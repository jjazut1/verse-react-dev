var nue=Object.defineProperty,rue=Object.defineProperties;var iue=Object.getOwnPropertyDescriptors;var K1=Object.getOwnPropertySymbols,oue=Object.getPrototypeOf,k4=Object.prototype.hasOwnProperty,I4=Object.prototype.propertyIsEnumerable,sue=Reflect.get;var xM=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),aue=t=>{throw TypeError(t)},Vl=Math.pow,bM=(t,e,n)=>e in t?nue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,B=(t,e)=>{for(var n in e||(e={}))k4.call(e,n)&&bM(t,n,e[n]);if(K1)for(var n of K1(e))I4.call(e,n)&&bM(t,n,e[n]);return t},oe=(t,e)=>rue(t,iue(e));var Tt=(t,e)=>{var n={};for(var r in t)k4.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&K1)for(var r of K1(t))e.indexOf(r)<0&&I4.call(t,r)&&(n[r]=t[r]);return n};var lue=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var oo=(t,e,n)=>bM(t,typeof e!="symbol"?e+"":e,n);var Fh=(t,e,n)=>sue(oue(t),n,e);var te=(t,e,n)=>new Promise((r,i)=>{var o=l=>{try{a(n.next(l))}catch(c){i(c)}},s=l=>{try{a(n.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((n=n.apply(t,e)).next())}),cue=function(t,e){this[0]=t,this[1]=e};var wM=t=>{var e=t[xM("asyncIterator")],n=!1,r,i={};return e==null?(e=t[xM("iterator")](),r=o=>i[o]=s=>e[o](s)):(e=e.call(t),r=o=>i[o]=s=>{if(n){if(n=!1,o==="throw")throw s;return s}return n=!0,{done:!1,value:new cue(new Promise(a=>{var l=e[o](s);l instanceof Object||aue("Object expected"),a(l)}),1)}}),i[xM("iterator")]=()=>i,r("next"),"throw"in e?r("throw"):i.throw=o=>{throw o},"return"in e&&r("return"),i};var tat=lue(rt=>{function uue(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var $i=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Md(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var L7={exports:{}},EA={},B7={exports:{}},gr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sw=Symbol.for("react.element"),due=Symbol.for("react.portal"),fue=Symbol.for("react.fragment"),hue=Symbol.for("react.strict_mode"),pue=Symbol.for("react.profiler"),mue=Symbol.for("react.provider"),gue=Symbol.for("react.context"),vue=Symbol.for("react.forward_ref"),yue=Symbol.for("react.suspense"),xue=Symbol.for("react.memo"),bue=Symbol.for("react.lazy"),F4=Symbol.iterator;function wue(t){return t===null||typeof t!="object"?null:(t=F4&&t[F4]||t["@@iterator"],typeof t=="function"?t:null)}var j7={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U7=Object.assign,z7={};function i0(t,e,n){this.props=t,this.context=e,this.refs=z7,this.updater=n||j7}i0.prototype.isReactComponent={};i0.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};i0.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function V7(){}V7.prototype=i0.prototype;function tO(t,e,n){this.props=t,this.context=e,this.refs=z7,this.updater=n||j7}var nO=tO.prototype=new V7;nO.constructor=tO;U7(nO,i0.prototype);nO.isPureReactComponent=!0;var O4=Array.isArray,W7=Object.prototype.hasOwnProperty,rO={current:null},$7={key:!0,ref:!0,__self:!0,__source:!0};function H7(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)W7.call(e,r)&&!$7.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:sw,type:t,key:o,ref:s,props:i,_owner:rO.current}}function Sue(t,e){return{$$typeof:sw,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function iO(t){return typeof t=="object"&&t!==null&&t.$$typeof===sw}function _ue(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var N4=/\/+/g;function SM(t,e){return typeof t=="object"&&t!==null&&t.key!=null?_ue(""+t.key):e.toString(36)}function M_(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case sw:case due:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+SM(s,0):r,O4(i)?(n="",t!=null&&(n=t.replace(N4,"$&/")+"/"),M_(i,e,n,"",function(c){return c})):i!=null&&(iO(i)&&(i=Sue(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(N4,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",O4(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+SM(o,a);s+=M_(o,e,n,l,i)}else if(l=wue(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+SM(o,a++),s+=M_(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Y1(t,e,n){if(t==null)return t;var r=[],i=0;return M_(t,r,"","",function(o){return e.call(n,o,i++)}),r}function Eue(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Bs={current:null},P_={transition:null},Cue={ReactCurrentDispatcher:Bs,ReactCurrentBatchConfig:P_,ReactCurrentOwner:rO};function G7(){throw Error("act(...) is not supported in production builds of React.")}gr.Children={map:Y1,forEach:function(t,e,n){Y1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Y1(t,function(){e++}),e},toArray:function(t){return Y1(t,function(e){return e})||[]},only:function(t){if(!iO(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};gr.Component=i0;gr.Fragment=fue;gr.Profiler=pue;gr.PureComponent=tO;gr.StrictMode=hue;gr.Suspense=yue;gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cue;gr.act=G7;gr.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=U7({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=rO.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)W7.call(e,l)&&!$7.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:sw,type:t.type,key:i,ref:o,props:r,_owner:s}};gr.createContext=function(t){return t={$$typeof:gue,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:mue,_context:t},t.Consumer=t};gr.createElement=H7;gr.createFactory=function(t){var e=H7.bind(null,t);return e.type=t,e};gr.createRef=function(){return{current:null}};gr.forwardRef=function(t){return{$$typeof:vue,render:t}};gr.isValidElement=iO;gr.lazy=function(t){return{$$typeof:bue,_payload:{_status:-1,_result:t},_init:Eue}};gr.memo=function(t,e){return{$$typeof:xue,type:t,compare:e===void 0?null:e}};gr.startTransition=function(t){var e=P_.transition;P_.transition={};try{t()}finally{P_.transition=e}};gr.unstable_act=G7;gr.useCallback=function(t,e){return Bs.current.useCallback(t,e)};gr.useContext=function(t){return Bs.current.useContext(t)};gr.useDebugValue=function(){};gr.useDeferredValue=function(t){return Bs.current.useDeferredValue(t)};gr.useEffect=function(t,e){return Bs.current.useEffect(t,e)};gr.useId=function(){return Bs.current.useId()};gr.useImperativeHandle=function(t,e,n){return Bs.current.useImperativeHandle(t,e,n)};gr.useInsertionEffect=function(t,e){return Bs.current.useInsertionEffect(t,e)};gr.useLayoutEffect=function(t,e){return Bs.current.useLayoutEffect(t,e)};gr.useMemo=function(t,e){return Bs.current.useMemo(t,e)};gr.useReducer=function(t,e,n){return Bs.current.useReducer(t,e,n)};gr.useRef=function(t){return Bs.current.useRef(t)};gr.useState=function(t){return Bs.current.useState(t)};gr.useSyncExternalStore=function(t,e,n){return Bs.current.useSyncExternalStore(t,e,n)};gr.useTransition=function(){return Bs.current.useTransition()};gr.version="18.3.1";B7.exports=gr;var A=B7.exports;const Ot=Md(A),L4=uue({__proto__:null,default:Ot},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aue=A,Tue=Symbol.for("react.element"),Mue=Symbol.for("react.fragment"),Pue=Object.prototype.hasOwnProperty,Due=Aue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rue={key:!0,ref:!0,__self:!0,__source:!0};function q7(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Pue.call(e,r)&&!Rue.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Tue,type:t,key:o,ref:s,props:i,_owner:Due.current}}EA.Fragment=Mue;EA.jsx=q7;EA.jsxs=q7;L7.exports=EA;var h=L7.exports,bR={},K7={exports:{}},Ua={},Y7={exports:{}},X7={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,z){var q=j.length;j.push(z);e:for(;0<q;){var $=q-1>>>1,K=j[$];if(0<i(K,z))j[$]=z,j[q]=K,q=$;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var z=j[0],q=j.pop();if(q!==z){j[0]=q;e:for(var $=0,K=j.length,G=K>>>1;$<G;){var Y=2*($+1)-1,J=j[Y],V=Y+1,re=j[V];if(0>i(J,q))V<K&&0>i(re,J)?(j[$]=re,j[V]=q,$=V):(j[$]=J,j[Y]=q,$=Y);else if(V<K&&0>i(re,q))j[$]=re,j[V]=q,$=V;else break e}}return z}function i(j,z){var q=j.sortIndex-z.sortIndex;return q!==0?q:j.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,b=!1,v=!1,m=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(j){for(var z=n(c);z!==null;){if(z.callback===null)r(c);else if(z.startTime<=j)r(c),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(c)}}function S(j){if(v=!1,w(j),!b)if(n(l)!==null)b=!0,U(D);else{var z=n(c);z!==null&&H(S,z.startTime-j)}}function D(j,z){b=!1,v&&(v=!1,g(M),M=-1),p=!0;var q=f;try{for(w(z),d=n(l);d!==null&&(!(d.expirationTime>z)||j&&!E());){var $=d.callback;if(typeof $=="function"){d.callback=null,f=d.priorityLevel;var K=$(d.expirationTime<=z);z=t.unstable_now(),typeof K=="function"?d.callback=K:d===n(l)&&r(l),w(z)}else r(l);d=n(l)}if(d!==null)var G=!0;else{var Y=n(c);Y!==null&&H(S,Y.startTime-z),G=!1}return G}finally{d=null,f=q,p=!1}}var k=!1,P=null,M=-1,T=5,_=-1;function E(){return!(t.unstable_now()-_<T)}function R(){if(P!==null){var j=t.unstable_now();_=j;var z=!0;try{z=P(!0,j)}finally{z?F():(k=!1,P=null)}}else k=!1}var F;if(typeof x=="function")F=function(){x(R)};else if(typeof MessageChannel!="undefined"){var L=new MessageChannel,N=L.port2;L.port1.onmessage=R,F=function(){N.postMessage(null)}}else F=function(){m(R,0)};function U(j){P=j,k||(k=!0,F())}function H(j,z){M=m(function(){j(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){b||p||(b=!0,U(D))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var q=f;f=z;try{return j()}finally{f=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,z){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var q=f;f=j;try{return z()}finally{f=q}},t.unstable_scheduleCallback=function(j,z,q){var $=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?$+q:$):q=$,j){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=q+K,j={id:u++,callback:z,priorityLevel:j,startTime:q,expirationTime:K,sortIndex:-1},q>$?(j.sortIndex=q,e(c,j),n(l)===null&&j===n(c)&&(v?(g(M),M=-1):v=!0,H(S,q-$))):(j.sortIndex=K,e(l,j),b||p||(b=!0,U(D))),j},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(j){var z=f;return function(){var q=f;f=z;try{return j.apply(this,arguments)}finally{f=q}}}})(X7);Y7.exports=X7;var kue=Y7.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iue=A,Ia=kue;function jt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Q7=new Set,$x={};function cm(t,e){bv(t,e),bv(t+"Capture",e)}function bv(t,e){for($x[t]=e,t=0;t<e.length;t++)Q7.add(e[t])}var dd=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),wR=Object.prototype.hasOwnProperty,Fue=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,B4={},j4={};function Oue(t){return wR.call(j4,t)?!0:wR.call(B4,t)?!1:Fue.test(t)?j4[t]=!0:(B4[t]=!0,!1)}function Nue(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Lue(t,e,n,r){if(e===null||typeof e=="undefined"||Nue(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function js(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var qo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qo[t]=new js(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qo[e]=new js(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qo[t]=new js(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qo[t]=new js(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qo[t]=new js(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qo[t]=new js(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qo[t]=new js(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qo[t]=new js(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qo[t]=new js(t,5,!1,t.toLowerCase(),null,!1,!1)});var oO=/[\-:]([a-z])/g;function sO(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(oO,sO);qo[e]=new js(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(oO,sO);qo[e]=new js(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(oO,sO);qo[e]=new js(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qo[t]=new js(t,1,!1,t.toLowerCase(),null,!1,!1)});qo.xlinkHref=new js("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qo[t]=new js(t,1,!1,t.toLowerCase(),null,!0,!0)});function aO(t,e,n,r){var i=qo.hasOwnProperty(e)?qo[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Lue(e,n,i,r)&&(n=null),r||i===null?Oue(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Pd=Iue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X1=Symbol.for("react.element"),bg=Symbol.for("react.portal"),wg=Symbol.for("react.fragment"),lO=Symbol.for("react.strict_mode"),SR=Symbol.for("react.profiler"),Z7=Symbol.for("react.provider"),J7=Symbol.for("react.context"),cO=Symbol.for("react.forward_ref"),_R=Symbol.for("react.suspense"),ER=Symbol.for("react.suspense_list"),uO=Symbol.for("react.memo"),uf=Symbol.for("react.lazy"),eH=Symbol.for("react.offscreen"),U4=Symbol.iterator;function G0(t){return t===null||typeof t!="object"?null:(t=U4&&t[U4]||t["@@iterator"],typeof t=="function"?t:null)}var Fi=Object.assign,_M;function Ay(t){if(_M===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);_M=e&&e[1]||""}return`
`+_M+t}var EM=!1;function CM(t,e){if(!t||EM)return"";EM=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{EM=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ay(t):""}function Bue(t){switch(t.tag){case 5:return Ay(t.type);case 16:return Ay("Lazy");case 13:return Ay("Suspense");case 19:return Ay("SuspenseList");case 0:case 2:case 15:return t=CM(t.type,!1),t;case 11:return t=CM(t.type.render,!1),t;case 1:return t=CM(t.type,!0),t;default:return""}}function CR(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wg:return"Fragment";case bg:return"Portal";case SR:return"Profiler";case lO:return"StrictMode";case _R:return"Suspense";case ER:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case J7:return(t.displayName||"Context")+".Consumer";case Z7:return(t._context.displayName||"Context")+".Provider";case cO:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case uO:return e=t.displayName||null,e!==null?e:CR(t.type)||"Memo";case uf:e=t._payload,t=t._init;try{return CR(t(e))}catch(n){}}return null}function jue(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return CR(e);case 8:return e===lO?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Xf(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tH(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Uue(t){var e=tH(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Q1(t){t._valueTracker||(t._valueTracker=Uue(t))}function nH(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=tH(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function OE(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch(e){return t.body}}function AR(t,e){var n=e.checked;return Fi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function z4(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Xf(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rH(t,e){e=e.checked,e!=null&&aO(t,"checked",e,!1)}function TR(t,e){rH(t,e);var n=Xf(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?MR(t,e.type,n):e.hasOwnProperty("defaultValue")&&MR(t,e.type,Xf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function V4(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function MR(t,e,n){(e!=="number"||OE(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ty=Array.isArray;function Gg(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Xf(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function PR(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(jt(91));return Fi({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function W4(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(jt(92));if(Ty(n)){if(1<n.length)throw Error(jt(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Xf(n)}}function iH(t,e){var n=Xf(e.value),r=Xf(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function $4(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function oH(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function DR(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?oH(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Z1,sH=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Z1=Z1||document.createElement("div"),Z1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Z1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Hx(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ex={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zue=["Webkit","ms","Moz","O"];Object.keys(ex).forEach(function(t){zue.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ex[e]=ex[t]})});function aH(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ex.hasOwnProperty(t)&&ex[t]?(""+e).trim():e+"px"}function lH(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=aH(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Vue=Fi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function RR(t,e){if(e){if(Vue[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(jt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(jt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(jt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(jt(62))}}function kR(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var IR=null;function dO(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var FR=null,qg=null,Kg=null;function H4(t){if(t=cw(t)){if(typeof FR!="function")throw Error(jt(280));var e=t.stateNode;e&&(e=PA(e),FR(t.stateNode,t.type,e))}}function cH(t){qg?Kg?Kg.push(t):Kg=[t]:qg=t}function uH(){if(qg){var t=qg,e=Kg;if(Kg=qg=null,H4(t),e)for(t=0;t<e.length;t++)H4(e[t])}}function dH(t,e){return t(e)}function fH(){}var AM=!1;function hH(t,e,n){if(AM)return t(e,n);AM=!0;try{return dH(t,e,n)}finally{AM=!1,(qg!==null||Kg!==null)&&(fH(),uH())}}function Gx(t,e){var n=t.stateNode;if(n===null)return null;var r=PA(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(jt(231,e,typeof n));return n}var OR=!1;if(dd)try{var q0={};Object.defineProperty(q0,"passive",{get:function(){OR=!0}}),window.addEventListener("test",q0,q0),window.removeEventListener("test",q0,q0)}catch(t){OR=!1}function Wue(t,e,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var tx=!1,NE=null,LE=!1,NR=null,$ue={onError:function(t){tx=!0,NE=t}};function Hue(t,e,n,r,i,o,s,a,l){tx=!1,NE=null,Wue.apply($ue,arguments)}function Gue(t,e,n,r,i,o,s,a,l){if(Hue.apply(this,arguments),tx){if(tx){var c=NE;tx=!1,NE=null}else throw Error(jt(198));LE||(LE=!0,NR=c)}}function um(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function pH(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function G4(t){if(um(t)!==t)throw Error(jt(188))}function que(t){var e=t.alternate;if(!e){if(e=um(t),e===null)throw Error(jt(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return G4(i),t;if(o===r)return G4(i),e;o=o.sibling}throw Error(jt(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(jt(189))}}if(n.alternate!==r)throw Error(jt(190))}if(n.tag!==3)throw Error(jt(188));return n.stateNode.current===n?t:e}function mH(t){return t=que(t),t!==null?gH(t):null}function gH(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gH(t);if(e!==null)return e;t=t.sibling}return null}var vH=Ia.unstable_scheduleCallback,q4=Ia.unstable_cancelCallback,Kue=Ia.unstable_shouldYield,Yue=Ia.unstable_requestPaint,Zi=Ia.unstable_now,Xue=Ia.unstable_getCurrentPriorityLevel,fO=Ia.unstable_ImmediatePriority,yH=Ia.unstable_UserBlockingPriority,BE=Ia.unstable_NormalPriority,Que=Ia.unstable_LowPriority,xH=Ia.unstable_IdlePriority,CA=null,zc=null;function Zue(t){if(zc&&typeof zc.onCommitFiberRoot=="function")try{zc.onCommitFiberRoot(CA,t,void 0,(t.current.flags&128)===128)}catch(e){}}var lc=Math.clz32?Math.clz32:tde,Jue=Math.log,ede=Math.LN2;function tde(t){return t>>>=0,t===0?32:31-(Jue(t)/ede|0)|0}var J1=64,eS=4194304;function My(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function jE(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=My(a):(o&=s,o!==0&&(r=My(o)))}else s=n&~i,s!==0?r=My(s):o!==0&&(r=My(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-lc(e),i=1<<n,r|=t[n],e&=~i;return r}function nde(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rde(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-lc(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=nde(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function LR(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function bH(){var t=J1;return J1<<=1,!(J1&4194240)&&(J1=64),t}function TM(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function aw(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-lc(e),t[e]=n}function ide(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-lc(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function hO(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-lc(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ei=0;function wH(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var SH,pO,_H,EH,CH,BR=!1,tS=[],kf=null,If=null,Ff=null,qx=new Map,Kx=new Map,gf=[],ode="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function K4(t,e){switch(t){case"focusin":case"focusout":kf=null;break;case"dragenter":case"dragleave":If=null;break;case"mouseover":case"mouseout":Ff=null;break;case"pointerover":case"pointerout":qx.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kx.delete(e.pointerId)}}function K0(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=cw(e),e!==null&&pO(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function sde(t,e,n,r,i){switch(e){case"focusin":return kf=K0(kf,t,e,n,r,i),!0;case"dragenter":return If=K0(If,t,e,n,r,i),!0;case"mouseover":return Ff=K0(Ff,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return qx.set(o,K0(qx.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Kx.set(o,K0(Kx.get(o)||null,t,e,n,r,i)),!0}return!1}function AH(t){var e=cp(t.target);if(e!==null){var n=um(e);if(n!==null){if(e=n.tag,e===13){if(e=pH(n),e!==null){t.blockedOn=e,CH(t.priority,function(){_H(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function D_(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=jR(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);IR=r,n.target.dispatchEvent(r),IR=null}else return e=cw(n),e!==null&&pO(e),t.blockedOn=n,!1;e.shift()}return!0}function Y4(t,e,n){D_(t)&&n.delete(e)}function ade(){BR=!1,kf!==null&&D_(kf)&&(kf=null),If!==null&&D_(If)&&(If=null),Ff!==null&&D_(Ff)&&(Ff=null),qx.forEach(Y4),Kx.forEach(Y4)}function Y0(t,e){t.blockedOn===e&&(t.blockedOn=null,BR||(BR=!0,Ia.unstable_scheduleCallback(Ia.unstable_NormalPriority,ade)))}function Yx(t){function e(i){return Y0(i,t)}if(0<tS.length){Y0(tS[0],t);for(var n=1;n<tS.length;n++){var r=tS[n];r.blockedOn===t&&(r.blockedOn=null)}}for(kf!==null&&Y0(kf,t),If!==null&&Y0(If,t),Ff!==null&&Y0(Ff,t),qx.forEach(e),Kx.forEach(e),n=0;n<gf.length;n++)r=gf[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<gf.length&&(n=gf[0],n.blockedOn===null);)AH(n),n.blockedOn===null&&gf.shift()}var Yg=Pd.ReactCurrentBatchConfig,UE=!0;function lde(t,e,n,r){var i=ei,o=Yg.transition;Yg.transition=null;try{ei=1,mO(t,e,n,r)}finally{ei=i,Yg.transition=o}}function cde(t,e,n,r){var i=ei,o=Yg.transition;Yg.transition=null;try{ei=4,mO(t,e,n,r)}finally{ei=i,Yg.transition=o}}function mO(t,e,n,r){if(UE){var i=jR(t,e,n,r);if(i===null)LM(t,e,r,zE,n),K4(t,r);else if(sde(i,t,e,n,r))r.stopPropagation();else if(K4(t,r),e&4&&-1<ode.indexOf(t)){for(;i!==null;){var o=cw(i);if(o!==null&&SH(o),o=jR(t,e,n,r),o===null&&LM(t,e,r,zE,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else LM(t,e,r,null,n)}}var zE=null;function jR(t,e,n,r){if(zE=null,t=dO(r),t=cp(t),t!==null)if(e=um(t),e===null)t=null;else if(n=e.tag,n===13){if(t=pH(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return zE=t,null}function TH(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xue()){case fO:return 1;case yH:return 4;case BE:case Que:return 16;case xH:return 536870912;default:return 16}default:return 16}}var Af=null,gO=null,R_=null;function MH(){if(R_)return R_;var t,e=gO,n=e.length,r,i="value"in Af?Af.value:Af.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return R_=i.slice(t,1<r?1-r:void 0)}function k_(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nS(){return!0}function X4(){return!1}function za(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?nS:X4,this.isPropagationStopped=X4,this}return Fi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nS)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nS)},persist:function(){},isPersistent:nS}),e}var o0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vO=za(o0),lw=Fi({},o0,{view:0,detail:0}),ude=za(lw),MM,PM,X0,AA=Fi({},lw,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yO,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==X0&&(X0&&t.type==="mousemove"?(MM=t.screenX-X0.screenX,PM=t.screenY-X0.screenY):PM=MM=0,X0=t),MM)},movementY:function(t){return"movementY"in t?t.movementY:PM}}),Q4=za(AA),dde=Fi({},AA,{dataTransfer:0}),fde=za(dde),hde=Fi({},lw,{relatedTarget:0}),DM=za(hde),pde=Fi({},o0,{animationName:0,elapsedTime:0,pseudoElement:0}),mde=za(pde),gde=Fi({},o0,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vde=za(gde),yde=Fi({},o0,{data:0}),Z4=za(yde),xde={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bde={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wde={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sde(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wde[t])?!!e[t]:!1}function yO(){return Sde}var _de=Fi({},lw,{key:function(t){if(t.key){var e=xde[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=k_(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bde[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yO,charCode:function(t){return t.type==="keypress"?k_(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?k_(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ede=za(_de),Cde=Fi({},AA,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),J4=za(Cde),Ade=Fi({},lw,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yO}),Tde=za(Ade),Mde=Fi({},o0,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pde=za(Mde),Dde=Fi({},AA,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rde=za(Dde),kde=[9,13,27,32],xO=dd&&"CompositionEvent"in window,nx=null;dd&&"documentMode"in document&&(nx=document.documentMode);var Ide=dd&&"TextEvent"in window&&!nx,PH=dd&&(!xO||nx&&8<nx&&11>=nx),ej=" ",tj=!1;function DH(t,e){switch(t){case"keyup":return kde.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function RH(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Sg=!1;function Fde(t,e){switch(t){case"compositionend":return RH(e);case"keypress":return e.which!==32?null:(tj=!0,ej);case"textInput":return t=e.data,t===ej&&tj?null:t;default:return null}}function Ode(t,e){if(Sg)return t==="compositionend"||!xO&&DH(t,e)?(t=MH(),R_=gO=Af=null,Sg=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return PH&&e.locale!=="ko"?null:e.data;default:return null}}var Nde={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nj(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Nde[t.type]:e==="textarea"}function kH(t,e,n,r){cH(r),e=VE(e,"onChange"),0<e.length&&(n=new vO("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var rx=null,Xx=null;function Lde(t){WH(t,0)}function TA(t){var e=Cg(t);if(nH(e))return t}function Bde(t,e){if(t==="change")return e}var IH=!1;if(dd){var RM;if(dd){var kM="oninput"in document;if(!kM){var rj=document.createElement("div");rj.setAttribute("oninput","return;"),kM=typeof rj.oninput=="function"}RM=kM}else RM=!1;IH=RM&&(!document.documentMode||9<document.documentMode)}function ij(){rx&&(rx.detachEvent("onpropertychange",FH),Xx=rx=null)}function FH(t){if(t.propertyName==="value"&&TA(Xx)){var e=[];kH(e,Xx,t,dO(t)),hH(Lde,e)}}function jde(t,e,n){t==="focusin"?(ij(),rx=e,Xx=n,rx.attachEvent("onpropertychange",FH)):t==="focusout"&&ij()}function Ude(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return TA(Xx)}function zde(t,e){if(t==="click")return TA(e)}function Vde(t,e){if(t==="input"||t==="change")return TA(e)}function Wde(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hc=typeof Object.is=="function"?Object.is:Wde;function Qx(t,e){if(hc(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!wR.call(e,i)||!hc(t[i],e[i]))return!1}return!0}function oj(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sj(t,e){var n=oj(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=oj(n)}}function OH(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?OH(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function NH(){for(var t=window,e=OE();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch(r){n=!1}if(n)t=e.contentWindow;else break;e=OE(t.document)}return e}function bO(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $de(t){var e=NH(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&OH(n.ownerDocument.documentElement,n)){if(r!==null&&bO(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=sj(n,o);var s=sj(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Hde=dd&&"documentMode"in document&&11>=document.documentMode,_g=null,UR=null,ix=null,zR=!1;function aj(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zR||_g==null||_g!==OE(r)||(r=_g,"selectionStart"in r&&bO(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ix&&Qx(ix,r)||(ix=r,r=VE(UR,"onSelect"),0<r.length&&(e=new vO("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=_g)))}function rS(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Eg={animationend:rS("Animation","AnimationEnd"),animationiteration:rS("Animation","AnimationIteration"),animationstart:rS("Animation","AnimationStart"),transitionend:rS("Transition","TransitionEnd")},IM={},LH={};dd&&(LH=document.createElement("div").style,"AnimationEvent"in window||(delete Eg.animationend.animation,delete Eg.animationiteration.animation,delete Eg.animationstart.animation),"TransitionEvent"in window||delete Eg.transitionend.transition);function MA(t){if(IM[t])return IM[t];if(!Eg[t])return t;var e=Eg[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in LH)return IM[t]=e[n];return t}var BH=MA("animationend"),jH=MA("animationiteration"),UH=MA("animationstart"),zH=MA("transitionend"),VH=new Map,lj="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sh(t,e){VH.set(t,e),cm(e,[t])}for(var FM=0;FM<lj.length;FM++){var OM=lj[FM],Gde=OM.toLowerCase(),qde=OM[0].toUpperCase()+OM.slice(1);sh(Gde,"on"+qde)}sh(BH,"onAnimationEnd");sh(jH,"onAnimationIteration");sh(UH,"onAnimationStart");sh("dblclick","onDoubleClick");sh("focusin","onFocus");sh("focusout","onBlur");sh(zH,"onTransitionEnd");bv("onMouseEnter",["mouseout","mouseover"]);bv("onMouseLeave",["mouseout","mouseover"]);bv("onPointerEnter",["pointerout","pointerover"]);bv("onPointerLeave",["pointerout","pointerover"]);cm("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cm("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cm("onBeforeInput",["compositionend","keypress","textInput","paste"]);cm("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cm("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cm("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Py="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kde=new Set("cancel close invalid load scroll toggle".split(" ").concat(Py));function cj(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Gue(r,e,void 0,t),t.currentTarget=null}function WH(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;cj(i,a,c),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;cj(i,a,c),o=l}}}if(LE)throw t=NR,LE=!1,NR=null,t}function vi(t,e){var n=e[GR];n===void 0&&(n=e[GR]=new Set);var r=t+"__bubble";n.has(r)||($H(e,t,2,!1),n.add(r))}function NM(t,e,n){var r=0;e&&(r|=4),$H(n,t,r,e)}var iS="_reactListening"+Math.random().toString(36).slice(2);function Zx(t){if(!t[iS]){t[iS]=!0,Q7.forEach(function(n){n!=="selectionchange"&&(Kde.has(n)||NM(n,!1,t),NM(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[iS]||(e[iS]=!0,NM("selectionchange",!1,e))}}function $H(t,e,n,r){switch(TH(e)){case 1:var i=lde;break;case 4:i=cde;break;default:i=mO}n=i.bind(null,e,n,t),i=void 0,!OR||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function LM(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=cp(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}hH(function(){var c=o,u=dO(n),d=[];e:{var f=VH.get(t);if(f!==void 0){var p=vO,b=t;switch(t){case"keypress":if(k_(n)===0)break e;case"keydown":case"keyup":p=Ede;break;case"focusin":b="focus",p=DM;break;case"focusout":b="blur",p=DM;break;case"beforeblur":case"afterblur":p=DM;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Q4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=fde;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Tde;break;case BH:case jH:case UH:p=mde;break;case zH:p=Pde;break;case"scroll":p=ude;break;case"wheel":p=Rde;break;case"copy":case"cut":case"paste":p=vde;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=J4}var v=(e&4)!==0,m=!v&&t==="scroll",g=v?f!==null?f+"Capture":null:f;v=[];for(var x=c,w;x!==null;){w=x;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,g!==null&&(S=Gx(x,g),S!=null&&v.push(Jx(x,S,w)))),m)break;x=x.return}0<v.length&&(f=new p(f,b,null,n,u),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==IR&&(b=n.relatedTarget||n.fromElement)&&(cp(b)||b[fd]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(b=n.relatedTarget||n.toElement,p=c,b=b?cp(b):null,b!==null&&(m=um(b),b!==m||b.tag!==5&&b.tag!==6)&&(b=null)):(p=null,b=c),p!==b)){if(v=Q4,S="onMouseLeave",g="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(v=J4,S="onPointerLeave",g="onPointerEnter",x="pointer"),m=p==null?f:Cg(p),w=b==null?f:Cg(b),f=new v(S,x+"leave",p,n,u),f.target=m,f.relatedTarget=w,S=null,cp(u)===c&&(v=new v(g,x+"enter",b,n,u),v.target=w,v.relatedTarget=m,S=v),m=S,p&&b)t:{for(v=p,g=b,x=0,w=v;w;w=Wm(w))x++;for(w=0,S=g;S;S=Wm(S))w++;for(;0<x-w;)v=Wm(v),x--;for(;0<w-x;)g=Wm(g),w--;for(;x--;){if(v===g||g!==null&&v===g.alternate)break t;v=Wm(v),g=Wm(g)}v=null}else v=null;p!==null&&uj(d,f,p,v,!1),b!==null&&m!==null&&uj(d,m,b,v,!0)}}e:{if(f=c?Cg(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var D=Bde;else if(nj(f))if(IH)D=Vde;else{D=Ude;var k=jde}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(D=zde);if(D&&(D=D(t,c))){kH(d,D,n,u);break e}k&&k(t,f,c),t==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&MR(f,"number",f.value)}switch(k=c?Cg(c):window,t){case"focusin":(nj(k)||k.contentEditable==="true")&&(_g=k,UR=c,ix=null);break;case"focusout":ix=UR=_g=null;break;case"mousedown":zR=!0;break;case"contextmenu":case"mouseup":case"dragend":zR=!1,aj(d,n,u);break;case"selectionchange":if(Hde)break;case"keydown":case"keyup":aj(d,n,u)}var P;if(xO)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Sg?DH(t,n)&&(M="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(PH&&n.locale!=="ko"&&(Sg||M!=="onCompositionStart"?M==="onCompositionEnd"&&Sg&&(P=MH()):(Af=u,gO="value"in Af?Af.value:Af.textContent,Sg=!0)),k=VE(c,M),0<k.length&&(M=new Z4(M,t,null,n,u),d.push({event:M,listeners:k}),P?M.data=P:(P=RH(n),P!==null&&(M.data=P)))),(P=Ide?Fde(t,n):Ode(t,n))&&(c=VE(c,"onBeforeInput"),0<c.length&&(u=new Z4("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=P))}WH(d,e)})}function Jx(t,e,n){return{instance:t,listener:e,currentTarget:n}}function VE(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Gx(t,n),o!=null&&r.unshift(Jx(t,o,i)),o=Gx(t,e),o!=null&&r.push(Jx(t,o,i))),t=t.return}return r}function Wm(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function uj(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Gx(n,o),l!=null&&s.unshift(Jx(n,l,a))):i||(l=Gx(n,o),l!=null&&s.push(Jx(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var Yde=/\r\n?/g,Xde=/\u0000|\uFFFD/g;function dj(t){return(typeof t=="string"?t:""+t).replace(Yde,`
`).replace(Xde,"")}function oS(t,e,n){if(e=dj(e),dj(t)!==e&&n)throw Error(jt(425))}function WE(){}var VR=null,WR=null;function $R(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var HR=typeof setTimeout=="function"?setTimeout:void 0,Qde=typeof clearTimeout=="function"?clearTimeout:void 0,fj=typeof Promise=="function"?Promise:void 0,Zde=typeof queueMicrotask=="function"?queueMicrotask:typeof fj!="undefined"?function(t){return fj.resolve(null).then(t).catch(Jde)}:HR;function Jde(t){setTimeout(function(){throw t})}function BM(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Yx(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Yx(e)}function Of(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hj(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var s0=Math.random().toString(36).slice(2),Lc="__reactFiber$"+s0,eb="__reactProps$"+s0,fd="__reactContainer$"+s0,GR="__reactEvents$"+s0,efe="__reactListeners$"+s0,tfe="__reactHandles$"+s0;function cp(t){var e=t[Lc];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fd]||n[Lc]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=hj(t);t!==null;){if(n=t[Lc])return n;t=hj(t)}return e}t=n,n=t.parentNode}return null}function cw(t){return t=t[Lc]||t[fd],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Cg(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(jt(33))}function PA(t){return t[eb]||null}var qR=[],Ag=-1;function ah(t){return{current:t}}function wi(t){0>Ag||(t.current=qR[Ag],qR[Ag]=null,Ag--)}function fi(t,e){Ag++,qR[Ag]=t.current,t.current=e}var Qf={},ps=ah(Qf),ra=ah(!1),Lp=Qf;function wv(t,e){var n=t.type.contextTypes;if(!n)return Qf;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ia(t){return t=t.childContextTypes,t!=null}function $E(){wi(ra),wi(ps)}function pj(t,e,n){if(ps.current!==Qf)throw Error(jt(168));fi(ps,e),fi(ra,n)}function HH(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(jt(108,jue(t)||"Unknown",i));return Fi({},n,r)}function HE(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qf,Lp=ps.current,fi(ps,t),fi(ra,ra.current),!0}function mj(t,e,n){var r=t.stateNode;if(!r)throw Error(jt(169));n?(t=HH(t,e,Lp),r.__reactInternalMemoizedMergedChildContext=t,wi(ra),wi(ps),fi(ps,t)):wi(ra),fi(ra,n)}var ju=null,DA=!1,jM=!1;function GH(t){ju===null?ju=[t]:ju.push(t)}function nfe(t){DA=!0,GH(t)}function lh(){if(!jM&&ju!==null){jM=!0;var t=0,e=ei;try{var n=ju;for(ei=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ju=null,DA=!1}catch(i){throw ju!==null&&(ju=ju.slice(t+1)),vH(fO,lh),i}finally{ei=e,jM=!1}}return null}var Tg=[],Mg=0,GE=null,qE=0,al=[],ll=0,Bp=null,$u=1,Hu="";function Hh(t,e){Tg[Mg++]=qE,Tg[Mg++]=GE,GE=t,qE=e}function qH(t,e,n){al[ll++]=$u,al[ll++]=Hu,al[ll++]=Bp,Bp=t;var r=$u;t=Hu;var i=32-lc(r)-1;r&=~(1<<i),n+=1;var o=32-lc(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,$u=1<<32-lc(e)+i|n<<i|r,Hu=o+t}else $u=1<<o|n<<i|r,Hu=t}function wO(t){t.return!==null&&(Hh(t,1),qH(t,1,0))}function SO(t){for(;t===GE;)GE=Tg[--Mg],Tg[Mg]=null,qE=Tg[--Mg],Tg[Mg]=null;for(;t===Bp;)Bp=al[--ll],al[ll]=null,Hu=al[--ll],al[ll]=null,$u=al[--ll],al[ll]=null}var Pa=null,Aa=null,Ai=!1,Ql=null;function KH(t,e){var n=fl(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function gj(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pa=t,Aa=Of(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pa=t,Aa=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Bp!==null?{id:$u,overflow:Hu}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=fl(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pa=t,Aa=null,!0):!1;default:return!1}}function KR(t){return(t.mode&1)!==0&&(t.flags&128)===0}function YR(t){if(Ai){var e=Aa;if(e){var n=e;if(!gj(t,e)){if(KR(t))throw Error(jt(418));e=Of(n.nextSibling);var r=Pa;e&&gj(t,e)?KH(r,n):(t.flags=t.flags&-4097|2,Ai=!1,Pa=t)}}else{if(KR(t))throw Error(jt(418));t.flags=t.flags&-4097|2,Ai=!1,Pa=t}}}function vj(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pa=t}function sS(t){if(t!==Pa)return!1;if(!Ai)return vj(t),Ai=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$R(t.type,t.memoizedProps)),e&&(e=Aa)){if(KR(t))throw YH(),Error(jt(418));for(;e;)KH(t,e),e=Of(e.nextSibling)}if(vj(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(jt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Aa=Of(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Aa=null}}else Aa=Pa?Of(t.stateNode.nextSibling):null;return!0}function YH(){for(var t=Aa;t;)t=Of(t.nextSibling)}function Sv(){Aa=Pa=null,Ai=!1}function _O(t){Ql===null?Ql=[t]:Ql.push(t)}var rfe=Pd.ReactCurrentBatchConfig;function Q0(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(jt(309));var r=n.stateNode}if(!r)throw Error(jt(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(jt(284));if(!n._owner)throw Error(jt(290,t))}return t}function aS(t,e){throw t=Object.prototype.toString.call(e),Error(jt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function yj(t){var e=t._init;return e(t._payload)}function XH(t){function e(g,x){if(t){var w=g.deletions;w===null?(g.deletions=[x],g.flags|=16):w.push(x)}}function n(g,x){if(!t)return null;for(;x!==null;)e(g,x),x=x.sibling;return null}function r(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function i(g,x){return g=jf(g,x),g.index=0,g.sibling=null,g}function o(g,x,w){return g.index=w,t?(w=g.alternate,w!==null?(w=w.index,w<x?(g.flags|=2,x):w):(g.flags|=2,x)):(g.flags|=1048576,x)}function s(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,x,w,S){return x===null||x.tag!==6?(x=GM(w,g.mode,S),x.return=g,x):(x=i(x,w),x.return=g,x)}function l(g,x,w,S){var D=w.type;return D===wg?u(g,x,w.props.children,S,w.key):x!==null&&(x.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===uf&&yj(D)===x.type)?(S=i(x,w.props),S.ref=Q0(g,x,w),S.return=g,S):(S=j_(w.type,w.key,w.props,null,g.mode,S),S.ref=Q0(g,x,w),S.return=g,S)}function c(g,x,w,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=qM(w,g.mode,S),x.return=g,x):(x=i(x,w.children||[]),x.return=g,x)}function u(g,x,w,S,D){return x===null||x.tag!==7?(x=wp(w,g.mode,S,D),x.return=g,x):(x=i(x,w),x.return=g,x)}function d(g,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=GM(""+x,g.mode,w),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case X1:return w=j_(x.type,x.key,x.props,null,g.mode,w),w.ref=Q0(g,null,x),w.return=g,w;case bg:return x=qM(x,g.mode,w),x.return=g,x;case uf:var S=x._init;return d(g,S(x._payload),w)}if(Ty(x)||G0(x))return x=wp(x,g.mode,w,null),x.return=g,x;aS(g,x)}return null}function f(g,x,w,S){var D=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return D!==null?null:a(g,x,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case X1:return w.key===D?l(g,x,w,S):null;case bg:return w.key===D?c(g,x,w,S):null;case uf:return D=w._init,f(g,x,D(w._payload),S)}if(Ty(w)||G0(w))return D!==null?null:u(g,x,w,S,null);aS(g,w)}return null}function p(g,x,w,S,D){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(w)||null,a(x,g,""+S,D);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case X1:return g=g.get(S.key===null?w:S.key)||null,l(x,g,S,D);case bg:return g=g.get(S.key===null?w:S.key)||null,c(x,g,S,D);case uf:var k=S._init;return p(g,x,w,k(S._payload),D)}if(Ty(S)||G0(S))return g=g.get(w)||null,u(x,g,S,D,null);aS(x,S)}return null}function b(g,x,w,S){for(var D=null,k=null,P=x,M=x=0,T=null;P!==null&&M<w.length;M++){P.index>M?(T=P,P=null):T=P.sibling;var _=f(g,P,w[M],S);if(_===null){P===null&&(P=T);break}t&&P&&_.alternate===null&&e(g,P),x=o(_,x,M),k===null?D=_:k.sibling=_,k=_,P=T}if(M===w.length)return n(g,P),Ai&&Hh(g,M),D;if(P===null){for(;M<w.length;M++)P=d(g,w[M],S),P!==null&&(x=o(P,x,M),k===null?D=P:k.sibling=P,k=P);return Ai&&Hh(g,M),D}for(P=r(g,P);M<w.length;M++)T=p(P,g,M,w[M],S),T!==null&&(t&&T.alternate!==null&&P.delete(T.key===null?M:T.key),x=o(T,x,M),k===null?D=T:k.sibling=T,k=T);return t&&P.forEach(function(E){return e(g,E)}),Ai&&Hh(g,M),D}function v(g,x,w,S){var D=G0(w);if(typeof D!="function")throw Error(jt(150));if(w=D.call(w),w==null)throw Error(jt(151));for(var k=D=null,P=x,M=x=0,T=null,_=w.next();P!==null&&!_.done;M++,_=w.next()){P.index>M?(T=P,P=null):T=P.sibling;var E=f(g,P,_.value,S);if(E===null){P===null&&(P=T);break}t&&P&&E.alternate===null&&e(g,P),x=o(E,x,M),k===null?D=E:k.sibling=E,k=E,P=T}if(_.done)return n(g,P),Ai&&Hh(g,M),D;if(P===null){for(;!_.done;M++,_=w.next())_=d(g,_.value,S),_!==null&&(x=o(_,x,M),k===null?D=_:k.sibling=_,k=_);return Ai&&Hh(g,M),D}for(P=r(g,P);!_.done;M++,_=w.next())_=p(P,g,M,_.value,S),_!==null&&(t&&_.alternate!==null&&P.delete(_.key===null?M:_.key),x=o(_,x,M),k===null?D=_:k.sibling=_,k=_);return t&&P.forEach(function(R){return e(g,R)}),Ai&&Hh(g,M),D}function m(g,x,w,S){if(typeof w=="object"&&w!==null&&w.type===wg&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case X1:e:{for(var D=w.key,k=x;k!==null;){if(k.key===D){if(D=w.type,D===wg){if(k.tag===7){n(g,k.sibling),x=i(k,w.props.children),x.return=g,g=x;break e}}else if(k.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===uf&&yj(D)===k.type){n(g,k.sibling),x=i(k,w.props),x.ref=Q0(g,k,w),x.return=g,g=x;break e}n(g,k);break}else e(g,k);k=k.sibling}w.type===wg?(x=wp(w.props.children,g.mode,S,w.key),x.return=g,g=x):(S=j_(w.type,w.key,w.props,null,g.mode,S),S.ref=Q0(g,x,w),S.return=g,g=S)}return s(g);case bg:e:{for(k=w.key;x!==null;){if(x.key===k)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(g,x.sibling),x=i(x,w.children||[]),x.return=g,g=x;break e}else{n(g,x);break}else e(g,x);x=x.sibling}x=qM(w,g.mode,S),x.return=g,g=x}return s(g);case uf:return k=w._init,m(g,x,k(w._payload),S)}if(Ty(w))return b(g,x,w,S);if(G0(w))return v(g,x,w,S);aS(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(g,x.sibling),x=i(x,w),x.return=g,g=x):(n(g,x),x=GM(w,g.mode,S),x.return=g,g=x),s(g)):n(g,x)}return m}var _v=XH(!0),QH=XH(!1),KE=ah(null),YE=null,Pg=null,EO=null;function CO(){EO=Pg=YE=null}function AO(t){var e=KE.current;wi(KE),t._currentValue=e}function XR(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Xg(t,e){YE=t,EO=Pg=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ta=!0),t.firstContext=null)}function yl(t){var e=t._currentValue;if(EO!==t)if(t={context:t,memoizedValue:e,next:null},Pg===null){if(YE===null)throw Error(jt(308));Pg=t,YE.dependencies={lanes:0,firstContext:t}}else Pg=Pg.next=t;return e}var up=null;function TO(t){up===null?up=[t]:up.push(t)}function ZH(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,TO(e)):(n.next=i.next,i.next=n),e.interleaved=n,hd(t,r)}function hd(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var df=!1;function MO(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function JH(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function td(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Nf(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,kr&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,hd(t,n)}return i=r.interleaved,i===null?(e.next=e,TO(r)):(e.next=i.next,i.next=e),r.interleaved=e,hd(t,n)}function I_(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hO(t,n)}}function xj(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function XE(t,e,n,r){var i=t.updateQueue;df=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==s&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;s=0,u=c=l=null,a=o;do{var f=a.lane,p=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=t,v=a;switch(f=e,p=n,v.tag){case 1:if(b=v.payload,typeof b=="function"){d=b.call(p,d,f);break e}d=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=v.payload,f=typeof b=="function"?b.call(p,d,f):b,f==null)break e;d=Fi({},d,f);break e;case 2:df=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,s|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Up|=s,t.lanes=s,t.memoizedState=d}}function bj(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(jt(191,i));i.call(r)}}}var uw={},Vc=ah(uw),tb=ah(uw),nb=ah(uw);function dp(t){if(t===uw)throw Error(jt(174));return t}function PO(t,e){switch(fi(nb,e),fi(tb,t),fi(Vc,uw),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:DR(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=DR(e,t)}wi(Vc),fi(Vc,e)}function Ev(){wi(Vc),wi(tb),wi(nb)}function eG(t){dp(nb.current);var e=dp(Vc.current),n=DR(e,t.type);e!==n&&(fi(tb,t),fi(Vc,n))}function DO(t){tb.current===t&&(wi(Vc),wi(tb))}var Di=ah(0);function QE(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var UM=[];function RO(){for(var t=0;t<UM.length;t++)UM[t]._workInProgressVersionPrimary=null;UM.length=0}var F_=Pd.ReactCurrentDispatcher,zM=Pd.ReactCurrentBatchConfig,jp=0,Ii=null,bo=null,Ro=null,ZE=!1,ox=!1,rb=0,ife=0;function es(){throw Error(jt(321))}function kO(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!hc(t[n],e[n]))return!1;return!0}function IO(t,e,n,r,i,o){if(jp=o,Ii=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,F_.current=t===null||t.memoizedState===null?lfe:cfe,t=n(r,i),ox){o=0;do{if(ox=!1,rb=0,25<=o)throw Error(jt(301));o+=1,Ro=bo=null,e.updateQueue=null,F_.current=ufe,t=n(r,i)}while(ox)}if(F_.current=JE,e=bo!==null&&bo.next!==null,jp=0,Ro=bo=Ii=null,ZE=!1,e)throw Error(jt(300));return t}function FO(){var t=rb!==0;return rb=0,t}function Rc(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ro===null?Ii.memoizedState=Ro=t:Ro=Ro.next=t,Ro}function xl(){if(bo===null){var t=Ii.alternate;t=t!==null?t.memoizedState:null}else t=bo.next;var e=Ro===null?Ii.memoizedState:Ro.next;if(e!==null)Ro=e,bo=t;else{if(t===null)throw Error(jt(310));bo=t,t={memoizedState:bo.memoizedState,baseState:bo.baseState,baseQueue:bo.baseQueue,queue:bo.queue,next:null},Ro===null?Ii.memoizedState=Ro=t:Ro=Ro.next=t}return Ro}function ib(t,e){return typeof e=="function"?e(t):e}function VM(t){var e=xl(),n=e.queue;if(n===null)throw Error(jt(311));n.lastRenderedReducer=t;var r=bo,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,c=o;do{var u=c.lane;if((jp&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,s=r):l=l.next=d,Ii.lanes|=u,Up|=u}c=c.next}while(c!==null&&c!==o);l===null?s=r:l.next=a,hc(r,e.memoizedState)||(ta=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Ii.lanes|=o,Up|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function WM(t){var e=xl(),n=e.queue;if(n===null)throw Error(jt(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);hc(o,e.memoizedState)||(ta=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function tG(){}function nG(t,e){var n=Ii,r=xl(),i=e(),o=!hc(r.memoizedState,i);if(o&&(r.memoizedState=i,ta=!0),r=r.queue,OO(oG.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Ro!==null&&Ro.memoizedState.tag&1){if(n.flags|=2048,ob(9,iG.bind(null,n,r,i,e),void 0,null),Fo===null)throw Error(jt(349));jp&30||rG(n,e,i)}return i}function rG(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ii.updateQueue,e===null?(e={lastEffect:null,stores:null},Ii.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function iG(t,e,n,r){e.value=n,e.getSnapshot=r,sG(e)&&aG(t)}function oG(t,e,n){return n(function(){sG(e)&&aG(t)})}function sG(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!hc(t,n)}catch(r){return!0}}function aG(t){var e=hd(t,1);e!==null&&cc(e,t,1,-1)}function wj(t){var e=Rc();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ib,lastRenderedState:t},e.queue=t,t=t.dispatch=afe.bind(null,Ii,t),[e.memoizedState,t]}function ob(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ii.updateQueue,e===null?(e={lastEffect:null,stores:null},Ii.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function lG(){return xl().memoizedState}function O_(t,e,n,r){var i=Rc();Ii.flags|=t,i.memoizedState=ob(1|e,n,void 0,r===void 0?null:r)}function RA(t,e,n,r){var i=xl();r=r===void 0?null:r;var o=void 0;if(bo!==null){var s=bo.memoizedState;if(o=s.destroy,r!==null&&kO(r,s.deps)){i.memoizedState=ob(e,n,o,r);return}}Ii.flags|=t,i.memoizedState=ob(1|e,n,o,r)}function Sj(t,e){return O_(8390656,8,t,e)}function OO(t,e){return RA(2048,8,t,e)}function cG(t,e){return RA(4,2,t,e)}function uG(t,e){return RA(4,4,t,e)}function dG(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function fG(t,e,n){return n=n!=null?n.concat([t]):null,RA(4,4,dG.bind(null,e,t),n)}function NO(){}function hG(t,e){var n=xl();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kO(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function pG(t,e){var n=xl();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kO(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function mG(t,e,n){return jp&21?(hc(n,e)||(n=bH(),Ii.lanes|=n,Up|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ta=!0),t.memoizedState=n)}function ofe(t,e){var n=ei;ei=n!==0&&4>n?n:4,t(!0);var r=zM.transition;zM.transition={};try{t(!1),e()}finally{ei=n,zM.transition=r}}function gG(){return xl().memoizedState}function sfe(t,e,n){var r=Bf(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},vG(t))yG(e,n);else if(n=ZH(t,e,n,r),n!==null){var i=ks();cc(n,t,r,i),xG(n,e,r)}}function afe(t,e,n){var r=Bf(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(vG(t))yG(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,hc(a,s)){var l=e.interleaved;l===null?(i.next=i,TO(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch(c){}finally{}n=ZH(t,e,i,r),n!==null&&(i=ks(),cc(n,t,r,i),xG(n,e,r))}}function vG(t){var e=t.alternate;return t===Ii||e!==null&&e===Ii}function yG(t,e){ox=ZE=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function xG(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hO(t,n)}}var JE={readContext:yl,useCallback:es,useContext:es,useEffect:es,useImperativeHandle:es,useInsertionEffect:es,useLayoutEffect:es,useMemo:es,useReducer:es,useRef:es,useState:es,useDebugValue:es,useDeferredValue:es,useTransition:es,useMutableSource:es,useSyncExternalStore:es,useId:es,unstable_isNewReconciler:!1},lfe={readContext:yl,useCallback:function(t,e){return Rc().memoizedState=[t,e===void 0?null:e],t},useContext:yl,useEffect:Sj,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,O_(4194308,4,dG.bind(null,e,t),n)},useLayoutEffect:function(t,e){return O_(4194308,4,t,e)},useInsertionEffect:function(t,e){return O_(4,2,t,e)},useMemo:function(t,e){var n=Rc();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rc();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=sfe.bind(null,Ii,t),[r.memoizedState,t]},useRef:function(t){var e=Rc();return t={current:t},e.memoizedState=t},useState:wj,useDebugValue:NO,useDeferredValue:function(t){return Rc().memoizedState=t},useTransition:function(){var t=wj(!1),e=t[0];return t=ofe.bind(null,t[1]),Rc().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ii,i=Rc();if(Ai){if(n===void 0)throw Error(jt(407));n=n()}else{if(n=e(),Fo===null)throw Error(jt(349));jp&30||rG(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Sj(oG.bind(null,r,o,t),[t]),r.flags|=2048,ob(9,iG.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Rc(),e=Fo.identifierPrefix;if(Ai){var n=Hu,r=$u;n=(r&~(1<<32-lc(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=rb++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ife++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},cfe={readContext:yl,useCallback:hG,useContext:yl,useEffect:OO,useImperativeHandle:fG,useInsertionEffect:cG,useLayoutEffect:uG,useMemo:pG,useReducer:VM,useRef:lG,useState:function(){return VM(ib)},useDebugValue:NO,useDeferredValue:function(t){var e=xl();return mG(e,bo.memoizedState,t)},useTransition:function(){var t=VM(ib)[0],e=xl().memoizedState;return[t,e]},useMutableSource:tG,useSyncExternalStore:nG,useId:gG,unstable_isNewReconciler:!1},ufe={readContext:yl,useCallback:hG,useContext:yl,useEffect:OO,useImperativeHandle:fG,useInsertionEffect:cG,useLayoutEffect:uG,useMemo:pG,useReducer:WM,useRef:lG,useState:function(){return WM(ib)},useDebugValue:NO,useDeferredValue:function(t){var e=xl();return bo===null?e.memoizedState=t:mG(e,bo.memoizedState,t)},useTransition:function(){var t=WM(ib)[0],e=xl().memoizedState;return[t,e]},useMutableSource:tG,useSyncExternalStore:nG,useId:gG,unstable_isNewReconciler:!1};function Yl(t,e){if(t&&t.defaultProps){e=Fi({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function QR(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Fi({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var kA={isMounted:function(t){return(t=t._reactInternals)?um(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ks(),i=Bf(t),o=td(r,i);o.payload=e,n!=null&&(o.callback=n),e=Nf(t,o,i),e!==null&&(cc(e,t,i,r),I_(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ks(),i=Bf(t),o=td(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Nf(t,o,i),e!==null&&(cc(e,t,i,r),I_(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ks(),r=Bf(t),i=td(n,r);i.tag=2,e!=null&&(i.callback=e),e=Nf(t,i,r),e!==null&&(cc(e,t,r,n),I_(e,t,r))}};function _j(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Qx(n,r)||!Qx(i,o):!0}function bG(t,e,n){var r=!1,i=Qf,o=e.contextType;return typeof o=="object"&&o!==null?o=yl(o):(i=ia(e)?Lp:ps.current,r=e.contextTypes,o=(r=r!=null)?wv(t,i):Qf),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=kA,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Ej(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&kA.enqueueReplaceState(e,e.state,null)}function ZR(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},MO(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=yl(o):(o=ia(e)?Lp:ps.current,i.context=wv(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(QR(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&kA.enqueueReplaceState(i,i.state,null),XE(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Cv(t,e){try{var n="",r=e;do n+=Bue(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function $M(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function JR(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var dfe=typeof WeakMap=="function"?WeakMap:Map;function wG(t,e,n){n=td(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){tC||(tC=!0,ck=r),JR(t,e)},n}function SG(t,e,n){n=td(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){JR(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){JR(t,e),typeof r!="function"&&(Lf===null?Lf=new Set([this]):Lf.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Cj(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new dfe;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Cfe.bind(null,t,e,n),e.then(t,t))}function Aj(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Tj(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=td(-1,1),e.tag=2,Nf(n,e,1))),n.lanes|=1),t)}var ffe=Pd.ReactCurrentOwner,ta=!1;function As(t,e,n,r){e.child=t===null?QH(e,null,n,r):_v(e,t.child,n,r)}function Mj(t,e,n,r,i){n=n.render;var o=e.ref;return Xg(e,i),r=IO(t,e,n,r,o,i),n=FO(),t!==null&&!ta?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,pd(t,e,i)):(Ai&&n&&wO(e),e.flags|=1,As(t,e,r,i),e.child)}function Pj(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!$O(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,_G(t,e,o,r,i)):(t=j_(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Qx,n(s,r)&&t.ref===e.ref)return pd(t,e,i)}return e.flags|=1,t=jf(o,r),t.ref=e.ref,t.return=e,e.child=t}function _G(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Qx(o,r)&&t.ref===e.ref)if(ta=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(ta=!0);else return e.lanes=t.lanes,pd(t,e,i)}return ek(t,e,n,r,i)}function EG(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},fi(Rg,wa),wa|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,fi(Rg,wa),wa|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,fi(Rg,wa),wa|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,fi(Rg,wa),wa|=r;return As(t,e,i,n),e.child}function CG(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ek(t,e,n,r,i){var o=ia(n)?Lp:ps.current;return o=wv(e,o),Xg(e,i),n=IO(t,e,n,r,o,i),r=FO(),t!==null&&!ta?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,pd(t,e,i)):(Ai&&r&&wO(e),e.flags|=1,As(t,e,n,i),e.child)}function Dj(t,e,n,r,i){if(ia(n)){var o=!0;HE(e)}else o=!1;if(Xg(e,i),e.stateNode===null)N_(t,e),bG(e,n,r),ZR(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=yl(c):(c=ia(n)?Lp:ps.current,c=wv(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Ej(e,s,r,c),df=!1;var f=e.memoizedState;s.state=f,XE(e,r,s,i),l=e.memoizedState,a!==r||f!==l||ra.current||df?(typeof u=="function"&&(QR(e,n,u,r),l=e.memoizedState),(a=df||_j(e,n,a,r,f,l,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,JH(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Yl(e.type,a),s.props=c,d=e.pendingProps,f=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=yl(l):(l=ia(n)?Lp:ps.current,l=wv(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Ej(e,s,r,l),df=!1,f=e.memoizedState,s.state=f,XE(e,r,s,i);var b=e.memoizedState;a!==d||f!==b||ra.current||df?(typeof p=="function"&&(QR(e,n,p,r),b=e.memoizedState),(c=df||_j(e,n,c,r,f,b,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,b,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,b,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),s.props=r,s.state=b,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return tk(t,e,n,r,o,i)}function tk(t,e,n,r,i,o){CG(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&mj(e,n,!1),pd(t,e,o);r=e.stateNode,ffe.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=_v(e,t.child,null,o),e.child=_v(e,null,a,o)):As(t,e,a,o),e.memoizedState=r.state,i&&mj(e,n,!0),e.child}function AG(t){var e=t.stateNode;e.pendingContext?pj(t,e.pendingContext,e.pendingContext!==e.context):e.context&&pj(t,e.context,!1),PO(t,e.containerInfo)}function Rj(t,e,n,r,i){return Sv(),_O(i),e.flags|=256,As(t,e,n,r),e.child}var nk={dehydrated:null,treeContext:null,retryLane:0};function rk(t){return{baseLanes:t,cachePool:null,transitions:null}}function TG(t,e,n){var r=e.pendingProps,i=Di.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),fi(Di,i&1),t===null)return YR(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=OA(s,r,0,null),t=wp(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=rk(n),e.memoizedState=nk,t):LO(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return hfe(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=jf(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=jf(a,o):(o=wp(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?rk(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=nk,r}return o=t.child,t=o.sibling,r=jf(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function LO(t,e){return e=OA({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function lS(t,e,n,r){return r!==null&&_O(r),_v(e,t.child,null,n),t=LO(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function hfe(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=$M(Error(jt(422))),lS(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=OA({mode:"visible",children:r.children},i,0,null),o=wp(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&_v(e,t.child,null,s),e.child.memoizedState=rk(s),e.memoizedState=nk,o);if(!(e.mode&1))return lS(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(jt(419)),r=$M(o,r,void 0),lS(t,e,s,r)}if(a=(s&t.childLanes)!==0,ta||a){if(r=Fo,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,hd(t,i),cc(r,t,i,-1))}return WO(),r=$M(Error(jt(421))),lS(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Afe.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Aa=Of(i.nextSibling),Pa=e,Ai=!0,Ql=null,t!==null&&(al[ll++]=$u,al[ll++]=Hu,al[ll++]=Bp,$u=t.id,Hu=t.overflow,Bp=e),e=LO(e,r.children),e.flags|=4096,e)}function kj(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),XR(t.return,e,n)}function HM(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function MG(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(As(t,e,r.children,n),r=Di.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&kj(t,n,e);else if(t.tag===19)kj(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(fi(Di,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&QE(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),HM(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&QE(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}HM(e,!0,n,null,o);break;case"together":HM(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function N_(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pd(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Up|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(jt(153));if(e.child!==null){for(t=e.child,n=jf(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=jf(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pfe(t,e,n){switch(e.tag){case 3:AG(e),Sv();break;case 5:eG(e);break;case 1:ia(e.type)&&HE(e);break;case 4:PO(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;fi(KE,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(fi(Di,Di.current&1),e.flags|=128,null):n&e.child.childLanes?TG(t,e,n):(fi(Di,Di.current&1),t=pd(t,e,n),t!==null?t.sibling:null);fi(Di,Di.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return MG(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Di,Di.current),r)break;return null;case 22:case 23:return e.lanes=0,EG(t,e,n)}return pd(t,e,n)}var PG,ik,DG,RG;PG=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ik=function(){};DG=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,dp(Vc.current);var o=null;switch(n){case"input":i=AR(t,i),r=AR(t,r),o=[];break;case"select":i=Fi({},i,{value:void 0}),r=Fi({},r,{value:void 0}),o=[];break;case"textarea":i=PR(t,i),r=PR(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=WE)}RR(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&($x.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&($x.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&vi("scroll",t),o||a===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};RG=function(t,e,n,r){n!==r&&(e.flags|=4)};function Z0(t,e){if(!Ai)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ts(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function mfe(t,e,n){var r=e.pendingProps;switch(SO(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ts(e),null;case 1:return ia(e.type)&&$E(),ts(e),null;case 3:return r=e.stateNode,Ev(),wi(ra),wi(ps),RO(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(sS(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ql!==null&&(fk(Ql),Ql=null))),ik(t,e),ts(e),null;case 5:DO(e);var i=dp(nb.current);if(n=e.type,t!==null&&e.stateNode!=null)DG(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(jt(166));return ts(e),null}if(t=dp(Vc.current),sS(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Lc]=e,r[eb]=o,t=(e.mode&1)!==0,n){case"dialog":vi("cancel",r),vi("close",r);break;case"iframe":case"object":case"embed":vi("load",r);break;case"video":case"audio":for(i=0;i<Py.length;i++)vi(Py[i],r);break;case"source":vi("error",r);break;case"img":case"image":case"link":vi("error",r),vi("load",r);break;case"details":vi("toggle",r);break;case"input":z4(r,o),vi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},vi("invalid",r);break;case"textarea":W4(r,o),vi("invalid",r)}RR(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&oS(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&oS(r.textContent,a,t),i=["children",""+a]):$x.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&vi("scroll",r)}switch(n){case"input":Q1(r),V4(r,o,!0);break;case"textarea":Q1(r),$4(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=WE)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=oH(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Lc]=e,t[eb]=r,PG(t,e,!1,!1),e.stateNode=t;e:{switch(s=kR(n,r),n){case"dialog":vi("cancel",t),vi("close",t),i=r;break;case"iframe":case"object":case"embed":vi("load",t),i=r;break;case"video":case"audio":for(i=0;i<Py.length;i++)vi(Py[i],t);i=r;break;case"source":vi("error",t),i=r;break;case"img":case"image":case"link":vi("error",t),vi("load",t),i=r;break;case"details":vi("toggle",t),i=r;break;case"input":z4(t,r),i=AR(t,r),vi("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Fi({},r,{value:void 0}),vi("invalid",t);break;case"textarea":W4(t,r),i=PR(t,r),vi("invalid",t);break;default:i=r}RR(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?lH(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&sH(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Hx(t,l):typeof l=="number"&&Hx(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&($x.hasOwnProperty(o)?l!=null&&o==="onScroll"&&vi("scroll",t):l!=null&&aO(t,o,l,s))}switch(n){case"input":Q1(t),V4(t,r,!1);break;case"textarea":Q1(t),$4(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Xf(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Gg(t,!!r.multiple,o,!1):r.defaultValue!=null&&Gg(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=WE)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ts(e),null;case 6:if(t&&e.stateNode!=null)RG(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(jt(166));if(n=dp(nb.current),dp(Vc.current),sS(e)){if(r=e.stateNode,n=e.memoizedProps,r[Lc]=e,(o=r.nodeValue!==n)&&(t=Pa,t!==null))switch(t.tag){case 3:oS(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&oS(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Lc]=e,e.stateNode=r}return ts(e),null;case 13:if(wi(Di),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ai&&Aa!==null&&e.mode&1&&!(e.flags&128))YH(),Sv(),e.flags|=98560,o=!1;else if(o=sS(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(jt(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(jt(317));o[Lc]=e}else Sv(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ts(e),o=!1}else Ql!==null&&(fk(Ql),Ql=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Di.current&1?So===0&&(So=3):WO())),e.updateQueue!==null&&(e.flags|=4),ts(e),null);case 4:return Ev(),ik(t,e),t===null&&Zx(e.stateNode.containerInfo),ts(e),null;case 10:return AO(e.type._context),ts(e),null;case 17:return ia(e.type)&&$E(),ts(e),null;case 19:if(wi(Di),o=e.memoizedState,o===null)return ts(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Z0(o,!1);else{if(So!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=QE(t),s!==null){for(e.flags|=128,Z0(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return fi(Di,Di.current&1|2),e.child}t=t.sibling}o.tail!==null&&Zi()>Av&&(e.flags|=128,r=!0,Z0(o,!1),e.lanes=4194304)}else{if(!r)if(t=QE(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Z0(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Ai)return ts(e),null}else 2*Zi()-o.renderingStartTime>Av&&n!==1073741824&&(e.flags|=128,r=!0,Z0(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Zi(),e.sibling=null,n=Di.current,fi(Di,r?n&1|2:n&1),e):(ts(e),null);case 22:case 23:return VO(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wa&1073741824&&(ts(e),e.subtreeFlags&6&&(e.flags|=8192)):ts(e),null;case 24:return null;case 25:return null}throw Error(jt(156,e.tag))}function gfe(t,e){switch(SO(e),e.tag){case 1:return ia(e.type)&&$E(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ev(),wi(ra),wi(ps),RO(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return DO(e),null;case 13:if(wi(Di),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(jt(340));Sv()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return wi(Di),null;case 4:return Ev(),null;case 10:return AO(e.type._context),null;case 22:case 23:return VO(),null;case 24:return null;default:return null}}var cS=!1,ls=!1,vfe=typeof WeakSet=="function"?WeakSet:Set,fn=null;function Dg(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Wi(t,e,r)}else n.current=null}function ok(t,e,n){try{n()}catch(r){Wi(t,e,r)}}var Ij=!1;function yfe(t,e){if(VR=UE,t=NH(),bO(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(S){n=null;break e}var s=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(a=s+i),d!==o||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=s),f===o&&++u===r&&(l=s),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(WR={focusedElem:t,selectionRange:n},UE=!1,fn=e;fn!==null;)if(e=fn,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,fn=t;else for(;fn!==null;){e=fn;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var v=b.memoizedProps,m=b.memoizedState,g=e.stateNode,x=g.getSnapshotBeforeUpdate(e.elementType===e.type?v:Yl(e.type,v),m);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(jt(163))}}catch(S){Wi(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,fn=t;break}fn=e.return}return b=Ij,Ij=!1,b}function sx(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&ok(e,n,o)}i=i.next}while(i!==r)}}function IA(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function sk(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function kG(t){var e=t.alternate;e!==null&&(t.alternate=null,kG(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Lc],delete e[eb],delete e[GR],delete e[efe],delete e[tfe])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function IG(t){return t.tag===5||t.tag===3||t.tag===4}function Fj(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||IG(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ak(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=WE));else if(r!==4&&(t=t.child,t!==null))for(ak(t,e,n),t=t.sibling;t!==null;)ak(t,e,n),t=t.sibling}function lk(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(lk(t,e,n),t=t.sibling;t!==null;)lk(t,e,n),t=t.sibling}var jo=null,Xl=!1;function qd(t,e,n){for(n=n.child;n!==null;)FG(t,e,n),n=n.sibling}function FG(t,e,n){if(zc&&typeof zc.onCommitFiberUnmount=="function")try{zc.onCommitFiberUnmount(CA,n)}catch(a){}switch(n.tag){case 5:ls||Dg(n,e);case 6:var r=jo,i=Xl;jo=null,qd(t,e,n),jo=r,Xl=i,jo!==null&&(Xl?(t=jo,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):jo.removeChild(n.stateNode));break;case 18:jo!==null&&(Xl?(t=jo,n=n.stateNode,t.nodeType===8?BM(t.parentNode,n):t.nodeType===1&&BM(t,n),Yx(t)):BM(jo,n.stateNode));break;case 4:r=jo,i=Xl,jo=n.stateNode.containerInfo,Xl=!0,qd(t,e,n),jo=r,Xl=i;break;case 0:case 11:case 14:case 15:if(!ls&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&ok(n,e,s),i=i.next}while(i!==r)}qd(t,e,n);break;case 1:if(!ls&&(Dg(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Wi(n,e,a)}qd(t,e,n);break;case 21:qd(t,e,n);break;case 22:n.mode&1?(ls=(r=ls)||n.memoizedState!==null,qd(t,e,n),ls=r):qd(t,e,n);break;default:qd(t,e,n)}}function Oj(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new vfe),e.forEach(function(r){var i=Tfe.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Wl(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:jo=a.stateNode,Xl=!1;break e;case 3:jo=a.stateNode.containerInfo,Xl=!0;break e;case 4:jo=a.stateNode.containerInfo,Xl=!0;break e}a=a.return}if(jo===null)throw Error(jt(160));FG(o,s,i),jo=null,Xl=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Wi(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)OG(e,t),e=e.sibling}function OG(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wl(e,t),Ac(t),r&4){try{sx(3,t,t.return),IA(3,t)}catch(v){Wi(t,t.return,v)}try{sx(5,t,t.return)}catch(v){Wi(t,t.return,v)}}break;case 1:Wl(e,t),Ac(t),r&512&&n!==null&&Dg(n,n.return);break;case 5:if(Wl(e,t),Ac(t),r&512&&n!==null&&Dg(n,n.return),t.flags&32){var i=t.stateNode;try{Hx(i,"")}catch(v){Wi(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&rH(i,o),kR(a,s);var c=kR(a,o);for(s=0;s<l.length;s+=2){var u=l[s],d=l[s+1];u==="style"?lH(i,d):u==="dangerouslySetInnerHTML"?sH(i,d):u==="children"?Hx(i,d):aO(i,u,d,c)}switch(a){case"input":TR(i,o);break;case"textarea":iH(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Gg(i,!!o.multiple,p,!1):f!==!!o.multiple&&(o.defaultValue!=null?Gg(i,!!o.multiple,o.defaultValue,!0):Gg(i,!!o.multiple,o.multiple?[]:"",!1))}i[eb]=o}catch(v){Wi(t,t.return,v)}}break;case 6:if(Wl(e,t),Ac(t),r&4){if(t.stateNode===null)throw Error(jt(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(v){Wi(t,t.return,v)}}break;case 3:if(Wl(e,t),Ac(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Yx(e.containerInfo)}catch(v){Wi(t,t.return,v)}break;case 4:Wl(e,t),Ac(t);break;case 13:Wl(e,t),Ac(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(UO=Zi())),r&4&&Oj(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(ls=(c=ls)||u,Wl(e,t),ls=c):Wl(e,t),Ac(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(fn=t,u=t.child;u!==null;){for(d=fn=u;fn!==null;){switch(f=fn,p=f.child,f.tag){case 0:case 11:case 14:case 15:sx(4,f,f.return);break;case 1:Dg(f,f.return);var b=f.stateNode;if(typeof b.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(v){Wi(r,n,v)}}break;case 5:Dg(f,f.return);break;case 22:if(f.memoizedState!==null){Lj(d);continue}}p!==null?(p.return=f,fn=p):Lj(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=aH("display",s))}catch(v){Wi(t,t.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Wi(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Wl(e,t),Ac(t),r&4&&Oj(t);break;case 21:break;default:Wl(e,t),Ac(t)}}function Ac(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(IG(n)){var r=n;break e}n=n.return}throw Error(jt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Hx(i,""),r.flags&=-33);var o=Fj(t);lk(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=Fj(t);ak(t,a,s);break;default:throw Error(jt(161))}}catch(l){Wi(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function xfe(t,e,n){fn=t,NG(t)}function NG(t,e,n){for(var r=(t.mode&1)!==0;fn!==null;){var i=fn,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||cS;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ls;a=cS;var c=ls;if(cS=s,(ls=l)&&!c)for(fn=i;fn!==null;)s=fn,l=s.child,s.tag===22&&s.memoizedState!==null?Bj(i):l!==null?(l.return=s,fn=l):Bj(i);for(;o!==null;)fn=o,NG(o),o=o.sibling;fn=i,cS=a,ls=c}Nj(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,fn=o):Nj(t)}}function Nj(t){for(;fn!==null;){var e=fn;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ls||IA(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ls)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Yl(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&bj(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}bj(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Yx(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(jt(163))}ls||e.flags&512&&sk(e)}catch(f){Wi(e,e.return,f)}}if(e===t){fn=null;break}if(n=e.sibling,n!==null){n.return=e.return,fn=n;break}fn=e.return}}function Lj(t){for(;fn!==null;){var e=fn;if(e===t){fn=null;break}var n=e.sibling;if(n!==null){n.return=e.return,fn=n;break}fn=e.return}}function Bj(t){for(;fn!==null;){var e=fn;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{IA(4,e)}catch(l){Wi(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Wi(e,i,l)}}var o=e.return;try{sk(e)}catch(l){Wi(e,o,l)}break;case 5:var s=e.return;try{sk(e)}catch(l){Wi(e,s,l)}}}catch(l){Wi(e,e.return,l)}if(e===t){fn=null;break}var a=e.sibling;if(a!==null){a.return=e.return,fn=a;break}fn=e.return}}var bfe=Math.ceil,eC=Pd.ReactCurrentDispatcher,BO=Pd.ReactCurrentOwner,pl=Pd.ReactCurrentBatchConfig,kr=0,Fo=null,uo=null,Ho=0,wa=0,Rg=ah(0),So=0,sb=null,Up=0,FA=0,jO=0,ax=null,Zs=null,UO=0,Av=1/0,Bu=null,tC=!1,ck=null,Lf=null,uS=!1,Tf=null,nC=0,lx=0,uk=null,L_=-1,B_=0;function ks(){return kr&6?Zi():L_!==-1?L_:L_=Zi()}function Bf(t){return t.mode&1?kr&2&&Ho!==0?Ho&-Ho:rfe.transition!==null?(B_===0&&(B_=bH()),B_):(t=ei,t!==0||(t=window.event,t=t===void 0?16:TH(t.type)),t):1}function cc(t,e,n,r){if(50<lx)throw lx=0,uk=null,Error(jt(185));aw(t,n,r),(!(kr&2)||t!==Fo)&&(t===Fo&&(!(kr&2)&&(FA|=n),So===4&&vf(t,Ho)),oa(t,r),n===1&&kr===0&&!(e.mode&1)&&(Av=Zi()+500,DA&&lh()))}function oa(t,e){var n=t.callbackNode;rde(t,e);var r=jE(t,t===Fo?Ho:0);if(r===0)n!==null&&q4(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&q4(n),e===1)t.tag===0?nfe(jj.bind(null,t)):GH(jj.bind(null,t)),Zde(function(){!(kr&6)&&lh()}),n=null;else{switch(wH(r)){case 1:n=fO;break;case 4:n=yH;break;case 16:n=BE;break;case 536870912:n=xH;break;default:n=BE}n=$G(n,LG.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function LG(t,e){if(L_=-1,B_=0,kr&6)throw Error(jt(327));var n=t.callbackNode;if(Qg()&&t.callbackNode!==n)return null;var r=jE(t,t===Fo?Ho:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=rC(t,r);else{e=r;var i=kr;kr|=2;var o=jG();(Fo!==t||Ho!==e)&&(Bu=null,Av=Zi()+500,bp(t,e));do try{_fe();break}catch(a){BG(t,a)}while(!0);CO(),eC.current=o,kr=i,uo!==null?e=0:(Fo=null,Ho=0,e=So)}if(e!==0){if(e===2&&(i=LR(t),i!==0&&(r=i,e=dk(t,i))),e===1)throw n=sb,bp(t,0),vf(t,r),oa(t,Zi()),n;if(e===6)vf(t,r);else{if(i=t.current.alternate,!(r&30)&&!wfe(i)&&(e=rC(t,r),e===2&&(o=LR(t),o!==0&&(r=o,e=dk(t,o))),e===1))throw n=sb,bp(t,0),vf(t,r),oa(t,Zi()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(jt(345));case 2:Gh(t,Zs,Bu);break;case 3:if(vf(t,r),(r&130023424)===r&&(e=UO+500-Zi(),10<e)){if(jE(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ks(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=HR(Gh.bind(null,t,Zs,Bu),e);break}Gh(t,Zs,Bu);break;case 4:if(vf(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-lc(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Zi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*bfe(r/1960))-r,10<r){t.timeoutHandle=HR(Gh.bind(null,t,Zs,Bu),r);break}Gh(t,Zs,Bu);break;case 5:Gh(t,Zs,Bu);break;default:throw Error(jt(329))}}}return oa(t,Zi()),t.callbackNode===n?LG.bind(null,t):null}function dk(t,e){var n=ax;return t.current.memoizedState.isDehydrated&&(bp(t,e).flags|=256),t=rC(t,e),t!==2&&(e=Zs,Zs=n,e!==null&&fk(e)),t}function fk(t){Zs===null?Zs=t:Zs.push.apply(Zs,t)}function wfe(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!hc(o(),i))return!1}catch(s){return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vf(t,e){for(e&=~jO,e&=~FA,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-lc(e),r=1<<n;t[n]=-1,e&=~r}}function jj(t){if(kr&6)throw Error(jt(327));Qg();var e=jE(t,0);if(!(e&1))return oa(t,Zi()),null;var n=rC(t,e);if(t.tag!==0&&n===2){var r=LR(t);r!==0&&(e=r,n=dk(t,r))}if(n===1)throw n=sb,bp(t,0),vf(t,e),oa(t,Zi()),n;if(n===6)throw Error(jt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gh(t,Zs,Bu),oa(t,Zi()),null}function zO(t,e){var n=kr;kr|=1;try{return t(e)}finally{kr=n,kr===0&&(Av=Zi()+500,DA&&lh())}}function zp(t){Tf!==null&&Tf.tag===0&&!(kr&6)&&Qg();var e=kr;kr|=1;var n=pl.transition,r=ei;try{if(pl.transition=null,ei=1,t)return t()}finally{ei=r,pl.transition=n,kr=e,!(kr&6)&&lh()}}function VO(){wa=Rg.current,wi(Rg)}function bp(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Qde(n)),uo!==null)for(n=uo.return;n!==null;){var r=n;switch(SO(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$E();break;case 3:Ev(),wi(ra),wi(ps),RO();break;case 5:DO(r);break;case 4:Ev();break;case 13:wi(Di);break;case 19:wi(Di);break;case 10:AO(r.type._context);break;case 22:case 23:VO()}n=n.return}if(Fo=t,uo=t=jf(t.current,null),Ho=wa=e,So=0,sb=null,jO=FA=Up=0,Zs=ax=null,up!==null){for(e=0;e<up.length;e++)if(n=up[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}up=null}return t}function BG(t,e){do{var n=uo;try{if(CO(),F_.current=JE,ZE){for(var r=Ii.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ZE=!1}if(jp=0,Ro=bo=Ii=null,ox=!1,rb=0,BO.current=null,n===null||n.return===null){So=1,sb=e,uo=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=Ho,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Aj(s);if(p!==null){p.flags&=-257,Tj(p,s,a,o,e),p.mode&1&&Cj(o,c,e),e=p,l=c;var b=e.updateQueue;if(b===null){var v=new Set;v.add(l),e.updateQueue=v}else b.add(l);break e}else{if(!(e&1)){Cj(o,c,e),WO();break e}l=Error(jt(426))}}else if(Ai&&a.mode&1){var m=Aj(s);if(m!==null){!(m.flags&65536)&&(m.flags|=256),Tj(m,s,a,o,e),_O(Cv(l,a));break e}}o=l=Cv(l,a),So!==4&&(So=2),ax===null?ax=[o]:ax.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var g=wG(o,l,e);xj(o,g);break e;case 1:a=l;var x=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Lf===null||!Lf.has(w)))){o.flags|=65536,e&=-e,o.lanes|=e;var S=SG(o,a,e);xj(o,S);break e}}o=o.return}while(o!==null)}zG(n)}catch(D){e=D,uo===n&&n!==null&&(uo=n=n.return);continue}break}while(!0)}function jG(){var t=eC.current;return eC.current=JE,t===null?JE:t}function WO(){(So===0||So===3||So===2)&&(So=4),Fo===null||!(Up&268435455)&&!(FA&268435455)||vf(Fo,Ho)}function rC(t,e){var n=kr;kr|=2;var r=jG();(Fo!==t||Ho!==e)&&(Bu=null,bp(t,e));do try{Sfe();break}catch(i){BG(t,i)}while(!0);if(CO(),kr=n,eC.current=r,uo!==null)throw Error(jt(261));return Fo=null,Ho=0,So}function Sfe(){for(;uo!==null;)UG(uo)}function _fe(){for(;uo!==null&&!Kue();)UG(uo)}function UG(t){var e=WG(t.alternate,t,wa);t.memoizedProps=t.pendingProps,e===null?zG(t):uo=e,BO.current=null}function zG(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=gfe(n,e),n!==null){n.flags&=32767,uo=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{So=6,uo=null;return}}else if(n=mfe(n,e,wa),n!==null){uo=n;return}if(e=e.sibling,e!==null){uo=e;return}uo=e=t}while(e!==null);So===0&&(So=5)}function Gh(t,e,n){var r=ei,i=pl.transition;try{pl.transition=null,ei=1,Efe(t,e,n,r)}finally{pl.transition=i,ei=r}return null}function Efe(t,e,n,r){do Qg();while(Tf!==null);if(kr&6)throw Error(jt(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(jt(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(ide(t,o),t===Fo&&(uo=Fo=null,Ho=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||uS||(uS=!0,$G(BE,function(){return Qg(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=pl.transition,pl.transition=null;var s=ei;ei=1;var a=kr;kr|=4,BO.current=null,yfe(t,n),OG(n,t),$de(WR),UE=!!VR,WR=VR=null,t.current=n,xfe(n),Yue(),kr=a,ei=s,pl.transition=o}else t.current=n;if(uS&&(uS=!1,Tf=t,nC=i),o=t.pendingLanes,o===0&&(Lf=null),Zue(n.stateNode),oa(t,Zi()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(tC)throw tC=!1,t=ck,ck=null,t;return nC&1&&t.tag!==0&&Qg(),o=t.pendingLanes,o&1?t===uk?lx++:(lx=0,uk=t):lx=0,lh(),null}function Qg(){if(Tf!==null){var t=wH(nC),e=pl.transition,n=ei;try{if(pl.transition=null,ei=16>t?16:t,Tf===null)var r=!1;else{if(t=Tf,Tf=null,nC=0,kr&6)throw Error(jt(331));var i=kr;for(kr|=4,fn=t.current;fn!==null;){var o=fn,s=o.child;if(fn.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(fn=c;fn!==null;){var u=fn;switch(u.tag){case 0:case 11:case 15:sx(8,u,o)}var d=u.child;if(d!==null)d.return=u,fn=d;else for(;fn!==null;){u=fn;var f=u.sibling,p=u.return;if(kG(u),u===c){fn=null;break}if(f!==null){f.return=p,fn=f;break}fn=p}}}var b=o.alternate;if(b!==null){var v=b.child;if(v!==null){b.child=null;do{var m=v.sibling;v.sibling=null,v=m}while(v!==null)}}fn=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,fn=s;else e:for(;fn!==null;){if(o=fn,o.flags&2048)switch(o.tag){case 0:case 11:case 15:sx(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,fn=g;break e}fn=o.return}}var x=t.current;for(fn=x;fn!==null;){s=fn;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,fn=w;else e:for(s=x;fn!==null;){if(a=fn,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:IA(9,a)}}catch(D){Wi(a,a.return,D)}if(a===s){fn=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,fn=S;break e}fn=a.return}}if(kr=i,lh(),zc&&typeof zc.onPostCommitFiberRoot=="function")try{zc.onPostCommitFiberRoot(CA,t)}catch(D){}r=!0}return r}finally{ei=n,pl.transition=e}}return!1}function Uj(t,e,n){e=Cv(n,e),e=wG(t,e,1),t=Nf(t,e,1),e=ks(),t!==null&&(aw(t,1,e),oa(t,e))}function Wi(t,e,n){if(t.tag===3)Uj(t,t,n);else for(;e!==null;){if(e.tag===3){Uj(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Lf===null||!Lf.has(r))){t=Cv(n,t),t=SG(e,t,1),e=Nf(e,t,1),t=ks(),e!==null&&(aw(e,1,t),oa(e,t));break}}e=e.return}}function Cfe(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ks(),t.pingedLanes|=t.suspendedLanes&n,Fo===t&&(Ho&n)===n&&(So===4||So===3&&(Ho&130023424)===Ho&&500>Zi()-UO?bp(t,0):jO|=n),oa(t,e)}function VG(t,e){e===0&&(t.mode&1?(e=eS,eS<<=1,!(eS&130023424)&&(eS=4194304)):e=1);var n=ks();t=hd(t,e),t!==null&&(aw(t,e,n),oa(t,n))}function Afe(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),VG(t,n)}function Tfe(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(jt(314))}r!==null&&r.delete(e),VG(t,n)}var WG;WG=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ra.current)ta=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ta=!1,pfe(t,e,n);ta=!!(t.flags&131072)}else ta=!1,Ai&&e.flags&1048576&&qH(e,qE,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;N_(t,e),t=e.pendingProps;var i=wv(e,ps.current);Xg(e,n),i=IO(null,e,r,t,i,n);var o=FO();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ia(r)?(o=!0,HE(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,MO(e),i.updater=kA,e.stateNode=i,i._reactInternals=e,ZR(e,r,t,n),e=tk(null,e,r,!0,o,n)):(e.tag=0,Ai&&o&&wO(e),As(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(N_(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Pfe(r),t=Yl(r,t),i){case 0:e=ek(null,e,r,t,n);break e;case 1:e=Dj(null,e,r,t,n);break e;case 11:e=Mj(null,e,r,t,n);break e;case 14:e=Pj(null,e,r,Yl(r.type,t),n);break e}throw Error(jt(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yl(r,i),ek(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yl(r,i),Dj(t,e,r,i,n);case 3:e:{if(AG(e),t===null)throw Error(jt(387));r=e.pendingProps,o=e.memoizedState,i=o.element,JH(t,e),XE(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Cv(Error(jt(423)),e),e=Rj(t,e,r,n,i);break e}else if(r!==i){i=Cv(Error(jt(424)),e),e=Rj(t,e,r,n,i);break e}else for(Aa=Of(e.stateNode.containerInfo.firstChild),Pa=e,Ai=!0,Ql=null,n=QH(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Sv(),r===i){e=pd(t,e,n);break e}As(t,e,r,n)}e=e.child}return e;case 5:return eG(e),t===null&&YR(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,$R(r,i)?s=null:o!==null&&$R(r,o)&&(e.flags|=32),CG(t,e),As(t,e,s,n),e.child;case 6:return t===null&&YR(e),null;case 13:return TG(t,e,n);case 4:return PO(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=_v(e,null,r,n):As(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yl(r,i),Mj(t,e,r,i,n);case 7:return As(t,e,e.pendingProps,n),e.child;case 8:return As(t,e,e.pendingProps.children,n),e.child;case 12:return As(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,fi(KE,r._currentValue),r._currentValue=s,o!==null)if(hc(o.value,s)){if(o.children===i.children&&!ra.current){e=pd(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=td(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),XR(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(jt(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),XR(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}As(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Xg(e,n),i=yl(i),r=r(i),e.flags|=1,As(t,e,r,n),e.child;case 14:return r=e.type,i=Yl(r,e.pendingProps),i=Yl(r.type,i),Pj(t,e,r,i,n);case 15:return _G(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yl(r,i),N_(t,e),e.tag=1,ia(r)?(t=!0,HE(e)):t=!1,Xg(e,n),bG(e,r,i),ZR(e,r,i,n),tk(null,e,r,!0,t,n);case 19:return MG(t,e,n);case 22:return EG(t,e,n)}throw Error(jt(156,e.tag))};function $G(t,e){return vH(t,e)}function Mfe(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fl(t,e,n,r){return new Mfe(t,e,n,r)}function $O(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Pfe(t){if(typeof t=="function")return $O(t)?1:0;if(t!=null){if(t=t.$$typeof,t===cO)return 11;if(t===uO)return 14}return 2}function jf(t,e){var n=t.alternate;return n===null?(n=fl(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function j_(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")$O(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case wg:return wp(n.children,i,o,e);case lO:s=8,i|=8;break;case SR:return t=fl(12,n,e,i|2),t.elementType=SR,t.lanes=o,t;case _R:return t=fl(13,n,e,i),t.elementType=_R,t.lanes=o,t;case ER:return t=fl(19,n,e,i),t.elementType=ER,t.lanes=o,t;case eH:return OA(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Z7:s=10;break e;case J7:s=9;break e;case cO:s=11;break e;case uO:s=14;break e;case uf:s=16,r=null;break e}throw Error(jt(130,t==null?t:typeof t,""))}return e=fl(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function wp(t,e,n,r){return t=fl(7,t,r,e),t.lanes=n,t}function OA(t,e,n,r){return t=fl(22,t,r,e),t.elementType=eH,t.lanes=n,t.stateNode={isHidden:!1},t}function GM(t,e,n){return t=fl(6,t,null,e),t.lanes=n,t}function qM(t,e,n){return e=fl(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Dfe(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=TM(0),this.expirationTimes=TM(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=TM(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function HO(t,e,n,r,i,o,s,a,l){return t=new Dfe(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=fl(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},MO(o),t}function Rfe(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bg,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function HG(t){if(!t)return Qf;t=t._reactInternals;e:{if(um(t)!==t||t.tag!==1)throw Error(jt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ia(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(jt(171))}if(t.tag===1){var n=t.type;if(ia(n))return HH(t,n,e)}return e}function GG(t,e,n,r,i,o,s,a,l){return t=HO(n,r,!0,t,i,o,s,a,l),t.context=HG(null),n=t.current,r=ks(),i=Bf(n),o=td(r,i),o.callback=e!=null?e:null,Nf(n,o,i),t.current.lanes=i,aw(t,i,r),oa(t,r),t}function NA(t,e,n,r){var i=e.current,o=ks(),s=Bf(i);return n=HG(n),e.context===null?e.context=n:e.pendingContext=n,e=td(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Nf(i,e,s),t!==null&&(cc(t,i,s,o),I_(t,i,s)),s}function iC(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function zj(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function GO(t,e){zj(t,e),(t=t.alternate)&&zj(t,e)}function kfe(){return null}var qG=typeof reportError=="function"?reportError:function(t){console.error(t)};function qO(t){this._internalRoot=t}LA.prototype.render=qO.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(jt(409));NA(t,e,null,null)};LA.prototype.unmount=qO.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zp(function(){NA(null,t,null,null)}),e[fd]=null}};function LA(t){this._internalRoot=t}LA.prototype.unstable_scheduleHydration=function(t){if(t){var e=EH();t={blockedOn:null,target:t,priority:e};for(var n=0;n<gf.length&&e!==0&&e<gf[n].priority;n++);gf.splice(n,0,t),n===0&&AH(t)}};function KO(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function BA(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vj(){}function Ife(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=iC(s);o.call(c)}}var s=GG(e,r,t,0,null,!1,!1,"",Vj);return t._reactRootContainer=s,t[fd]=s.current,Zx(t.nodeType===8?t.parentNode:t),zp(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=iC(l);a.call(c)}}var l=HO(t,0,!1,null,null,!1,!1,"",Vj);return t._reactRootContainer=l,t[fd]=l.current,Zx(t.nodeType===8?t.parentNode:t),zp(function(){NA(e,l,n,r)}),l}function jA(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=iC(s);a.call(l)}}NA(e,s,t,i)}else s=Ife(n,e,t,i,r);return iC(s)}SH=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=My(e.pendingLanes);n!==0&&(hO(e,n|1),oa(e,Zi()),!(kr&6)&&(Av=Zi()+500,lh()))}break;case 13:zp(function(){var r=hd(t,1);if(r!==null){var i=ks();cc(r,t,1,i)}}),GO(t,1)}};pO=function(t){if(t.tag===13){var e=hd(t,134217728);if(e!==null){var n=ks();cc(e,t,134217728,n)}GO(t,134217728)}};_H=function(t){if(t.tag===13){var e=Bf(t),n=hd(t,e);if(n!==null){var r=ks();cc(n,t,e,r)}GO(t,e)}};EH=function(){return ei};CH=function(t,e){var n=ei;try{return ei=t,e()}finally{ei=n}};FR=function(t,e,n){switch(e){case"input":if(TR(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=PA(r);if(!i)throw Error(jt(90));nH(r),TR(r,i)}}}break;case"textarea":iH(t,n);break;case"select":e=n.value,e!=null&&Gg(t,!!n.multiple,e,!1)}};dH=zO;fH=zp;var Ffe={usingClientEntryPoint:!1,Events:[cw,Cg,PA,cH,uH,zO]},J0={findFiberByHostInstance:cp,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ofe={bundleType:J0.bundleType,version:J0.version,rendererPackageName:J0.rendererPackageName,rendererConfig:J0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pd.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mH(t),t===null?null:t.stateNode},findFiberByHostInstance:J0.findFiberByHostInstance||kfe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var dS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dS.isDisabled&&dS.supportsFiber)try{CA=dS.inject(Ofe),zc=dS}catch(t){}}Ua.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ffe;Ua.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!KO(e))throw Error(jt(200));return Rfe(t,e,null,n)};Ua.createRoot=function(t,e){if(!KO(t))throw Error(jt(299));var n=!1,r="",i=qG;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=HO(t,1,!1,null,null,n,!1,r,i),t[fd]=e.current,Zx(t.nodeType===8?t.parentNode:t),new qO(e)};Ua.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(jt(188)):(t=Object.keys(t).join(","),Error(jt(268,t)));return t=mH(e),t=t===null?null:t.stateNode,t};Ua.flushSync=function(t){return zp(t)};Ua.hydrate=function(t,e,n){if(!BA(e))throw Error(jt(200));return jA(null,t,e,!0,n)};Ua.hydrateRoot=function(t,e,n){if(!KO(t))throw Error(jt(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=qG;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=GG(e,null,t,1,n!=null?n:null,i,!1,o,s),t[fd]=e.current,Zx(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new LA(e)};Ua.render=function(t,e,n){if(!BA(e))throw Error(jt(200));return jA(null,t,e,!1,n)};Ua.unmountComponentAtNode=function(t){if(!BA(t))throw Error(jt(40));return t._reactRootContainer?(zp(function(){jA(null,null,t,!1,function(){t._reactRootContainer=null,t[fd]=null})}),!0):!1};Ua.unstable_batchedUpdates=zO;Ua.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!BA(n))throw Error(jt(200));if(t==null||t._reactInternals===void 0)throw Error(jt(38));return jA(t,e,n,!1,r)};Ua.version="18.3.1-next-f1338f8080-20240426";function KG(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(KG)}catch(t){console.error(t)}}KG(),K7.exports=Ua;var rc=K7.exports;const Nfe=Md(rc);var Wj=rc;bR.createRoot=Wj.createRoot,bR.hydrateRoot=Wj.hydrateRoot;function Lfe(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function Bfe(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var jfe=function(){function t(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Bfe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=Lfe(i);try{o.insertRule(r,o.cssRules.length)}catch(s){}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),os="-ms-",oC="-moz-",Wr="-webkit-",YG="comm",YO="rule",XO="decl",Ufe="@import",XG="@keyframes",zfe="@layer",Vfe=Math.abs,UA=String.fromCharCode,Wfe=Object.assign;function $fe(t,e){return zo(t,0)^45?(((e<<2^zo(t,0))<<2^zo(t,1))<<2^zo(t,2))<<2^zo(t,3):0}function QG(t){return t.trim()}function Hfe(t,e){return(t=e.exec(t))?t[0]:t}function $r(t,e,n){return t.replace(e,n)}function hk(t,e){return t.indexOf(e)}function zo(t,e){return t.charCodeAt(e)|0}function ab(t,e,n){return t.slice(e,n)}function Ic(t){return t.length}function QO(t){return t.length}function fS(t,e){return e.push(t),t}function Gfe(t,e){return t.map(e).join("")}var zA=1,Tv=1,ZG=0,ua=0,co=0,a0="";function VA(t,e,n,r,i,o,s){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:zA,column:Tv,length:s,return:""}}function ey(t,e){return Wfe(VA("",null,null,"",null,null,0),t,{length:-t.length},e)}function qfe(){return co}function Kfe(){return co=ua>0?zo(a0,--ua):0,Tv--,co===10&&(Tv=1,zA--),co}function Da(){return co=ua<ZG?zo(a0,ua++):0,Tv++,co===10&&(Tv=1,zA++),co}function Wc(){return zo(a0,ua)}function U_(){return ua}function dw(t,e){return ab(a0,t,e)}function lb(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function JG(t){return zA=Tv=1,ZG=Ic(a0=t),ua=0,[]}function eq(t){return a0="",t}function z_(t){return QG(dw(ua-1,pk(t===91?t+2:t===40?t+1:t)))}function Yfe(t){for(;(co=Wc())&&co<33;)Da();return lb(t)>2||lb(co)>3?"":" "}function Xfe(t,e){for(;--e&&Da()&&!(co<48||co>102||co>57&&co<65||co>70&&co<97););return dw(t,U_()+(e<6&&Wc()==32&&Da()==32))}function pk(t){for(;Da();)switch(co){case t:return ua;case 34:case 39:t!==34&&t!==39&&pk(co);break;case 40:t===41&&pk(t);break;case 92:Da();break}return ua}function Qfe(t,e){for(;Da()&&t+co!==57;)if(t+co===84&&Wc()===47)break;return"/*"+dw(e,ua-1)+"*"+UA(t===47?t:Da())}function Zfe(t){for(;!lb(Wc());)Da();return dw(t,ua)}function Jfe(t){return eq(V_("",null,null,null,[""],t=JG(t),0,[0],t))}function V_(t,e,n,r,i,o,s,a,l){for(var c=0,u=0,d=s,f=0,p=0,b=0,v=1,m=1,g=1,x=0,w="",S=i,D=o,k=r,P=w;m;)switch(b=x,x=Da()){case 40:if(b!=108&&zo(P,d-1)==58){hk(P+=$r(z_(x),"&","&\f"),"&\f")!=-1&&(g=-1);break}case 34:case 39:case 91:P+=z_(x);break;case 9:case 10:case 13:case 32:P+=Yfe(b);break;case 92:P+=Xfe(U_()-1,7);continue;case 47:switch(Wc()){case 42:case 47:fS(ehe(Qfe(Da(),U_()),e,n),l);break;default:P+="/"}break;case 123*v:a[c++]=Ic(P)*g;case 125*v:case 59:case 0:switch(x){case 0:case 125:m=0;case 59+u:g==-1&&(P=$r(P,/\f/g,"")),p>0&&Ic(P)-d&&fS(p>32?Hj(P+";",r,n,d-1):Hj($r(P," ","")+";",r,n,d-2),l);break;case 59:P+=";";default:if(fS(k=$j(P,e,n,c,u,i,a,w,S=[],D=[],d),o),x===123)if(u===0)V_(P,e,k,k,S,o,d,a,D);else switch(f===99&&zo(P,3)===110?100:f){case 100:case 108:case 109:case 115:V_(t,k,k,r&&fS($j(t,k,k,0,0,i,a,w,i,S=[],d),D),i,D,d,a,r?S:D);break;default:V_(P,k,k,k,[""],D,0,a,D)}}c=u=p=0,v=g=1,w=P="",d=s;break;case 58:d=1+Ic(P),p=b;default:if(v<1){if(x==123)--v;else if(x==125&&v++==0&&Kfe()==125)continue}switch(P+=UA(x),x*v){case 38:g=u>0?1:(P+="\f",-1);break;case 44:a[c++]=(Ic(P)-1)*g,g=1;break;case 64:Wc()===45&&(P+=z_(Da())),f=Wc(),u=d=Ic(w=P+=Zfe(U_())),x++;break;case 45:b===45&&Ic(P)==2&&(v=0)}}return o}function $j(t,e,n,r,i,o,s,a,l,c,u){for(var d=i-1,f=i===0?o:[""],p=QO(f),b=0,v=0,m=0;b<r;++b)for(var g=0,x=ab(t,d+1,d=Vfe(v=s[b])),w=t;g<p;++g)(w=QG(v>0?f[g]+" "+x:$r(x,/&\f/g,f[g])))&&(l[m++]=w);return VA(t,e,n,i===0?YO:a,l,c,u)}function ehe(t,e,n){return VA(t,e,n,YG,UA(qfe()),ab(t,2,-2),0)}function Hj(t,e,n,r){return VA(t,e,n,XO,ab(t,0,r),ab(t,r+1,-1),r)}function Zg(t,e){for(var n="",r=QO(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function the(t,e,n,r){switch(t.type){case zfe:if(t.children.length)break;case Ufe:case XO:return t.return=t.return||t.value;case YG:return"";case XG:return t.return=t.value+"{"+Zg(t.children,r)+"}";case YO:t.value=t.props.join(",")}return Ic(n=Zg(t.children,r))?t.return=t.value+"{"+n+"}":""}function nhe(t){var e=QO(t);return function(n,r,i,o){for(var s="",a=0;a<e;a++)s+=t[a](n,r,i,o)||"";return s}}function rhe(t){return function(e){e.root||(e=e.return)&&t(e)}}function tq(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var ihe=function(e,n,r){for(var i=0,o=0;i=o,o=Wc(),i===38&&o===12&&(n[r]=1),!lb(o);)Da();return dw(e,ua)},ohe=function(e,n){var r=-1,i=44;do switch(lb(i)){case 0:i===38&&Wc()===12&&(n[r]=1),e[r]+=ihe(ua-1,n,r);break;case 2:e[r]+=z_(i);break;case 4:if(i===44){e[++r]=Wc()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=UA(i)}while(i=Da());return e},she=function(e,n){return eq(ohe(JG(e),n))},Gj=new WeakMap,ahe=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!Gj.get(r))&&!i){Gj.set(e,!0);for(var o=[],s=she(n,o),a=r.props,l=0,c=0;l<s.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=o[l]?s[l].replace(/&\f/g,a[u]):a[u]+" "+s[l]}}},lhe=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function nq(t,e){switch($fe(t,e)){case 5103:return Wr+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Wr+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Wr+t+oC+t+os+t+t;case 6828:case 4268:return Wr+t+os+t+t;case 6165:return Wr+t+os+"flex-"+t+t;case 5187:return Wr+t+$r(t,/(\w+).+(:[^]+)/,Wr+"box-$1$2"+os+"flex-$1$2")+t;case 5443:return Wr+t+os+"flex-item-"+$r(t,/flex-|-self/,"")+t;case 4675:return Wr+t+os+"flex-line-pack"+$r(t,/align-content|flex-|-self/,"")+t;case 5548:return Wr+t+os+$r(t,"shrink","negative")+t;case 5292:return Wr+t+os+$r(t,"basis","preferred-size")+t;case 6060:return Wr+"box-"+$r(t,"-grow","")+Wr+t+os+$r(t,"grow","positive")+t;case 4554:return Wr+$r(t,/([^-])(transform)/g,"$1"+Wr+"$2")+t;case 6187:return $r($r($r(t,/(zoom-|grab)/,Wr+"$1"),/(image-set)/,Wr+"$1"),t,"")+t;case 5495:case 3959:return $r(t,/(image-set\([^]*)/,Wr+"$1$`$1");case 4968:return $r($r(t,/(.+:)(flex-)?(.*)/,Wr+"box-pack:$3"+os+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Wr+t+t;case 4095:case 3583:case 4068:case 2532:return $r(t,/(.+)-inline(.+)/,Wr+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ic(t)-1-e>6)switch(zo(t,e+1)){case 109:if(zo(t,e+4)!==45)break;case 102:return $r(t,/(.+:)(.+)-([^]+)/,"$1"+Wr+"$2-$3$1"+oC+(zo(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~hk(t,"stretch")?nq($r(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(zo(t,e+1)!==115)break;case 6444:switch(zo(t,Ic(t)-3-(~hk(t,"!important")&&10))){case 107:return $r(t,":",":"+Wr)+t;case 101:return $r(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Wr+(zo(t,14)===45?"inline-":"")+"box$3$1"+Wr+"$2$3$1"+os+"$2box$3")+t}break;case 5936:switch(zo(t,e+11)){case 114:return Wr+t+os+$r(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Wr+t+os+$r(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Wr+t+os+$r(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Wr+t+os+t+t}return t}var che=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case XO:e.return=nq(e.value,e.length);break;case XG:return Zg([ey(e,{value:$r(e.value,"@","@"+Wr)})],i);case YO:if(e.length)return Gfe(e.props,function(o){switch(Hfe(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Zg([ey(e,{props:[$r(o,/:(read-\w+)/,":"+oC+"$1")]})],i);case"::placeholder":return Zg([ey(e,{props:[$r(o,/:(plac\w+)/,":"+Wr+"input-$1")]}),ey(e,{props:[$r(o,/:(plac\w+)/,":"+oC+"$1")]}),ey(e,{props:[$r(o,/:(plac\w+)/,os+"input-$1")]})],i)}return""})}},uhe=[che],dhe=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(v){var m=v.getAttribute("data-emotion");m.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var i=e.stylisPlugins||uhe,o={},s,a=[];s=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(v){for(var m=v.getAttribute("data-emotion").split(" "),g=1;g<m.length;g++)o[m[g]]=!0;a.push(v)});var l,c=[ahe,lhe];{var u,d=[the,rhe(function(v){u.insert(v)})],f=nhe(c.concat(i,d)),p=function(m){return Zg(Jfe(m),f)};l=function(m,g,x,w){u=x,p(m?m+"{"+g.styles+"}":g.styles),w&&(b.inserted[g.name]=!0)}}var b={key:n,sheet:new jfe({key:n,container:s,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:l};return b.sheet.hydrate(a),b};function Vp(){return Vp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vp.apply(null,arguments)}var qj=function(e){var n=new WeakMap;return function(r){if(n.has(r))return n.get(r);var i=e(r);return n.set(r,i),i}},rq={exports:{}},ni={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oo=typeof Symbol=="function"&&Symbol.for,ZO=Oo?Symbol.for("react.element"):60103,JO=Oo?Symbol.for("react.portal"):60106,WA=Oo?Symbol.for("react.fragment"):60107,$A=Oo?Symbol.for("react.strict_mode"):60108,HA=Oo?Symbol.for("react.profiler"):60114,GA=Oo?Symbol.for("react.provider"):60109,qA=Oo?Symbol.for("react.context"):60110,eN=Oo?Symbol.for("react.async_mode"):60111,KA=Oo?Symbol.for("react.concurrent_mode"):60111,YA=Oo?Symbol.for("react.forward_ref"):60112,XA=Oo?Symbol.for("react.suspense"):60113,fhe=Oo?Symbol.for("react.suspense_list"):60120,QA=Oo?Symbol.for("react.memo"):60115,ZA=Oo?Symbol.for("react.lazy"):60116,hhe=Oo?Symbol.for("react.block"):60121,phe=Oo?Symbol.for("react.fundamental"):60117,mhe=Oo?Symbol.for("react.responder"):60118,ghe=Oo?Symbol.for("react.scope"):60119;function Va(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case ZO:switch(t=t.type,t){case eN:case KA:case WA:case HA:case $A:case XA:return t;default:switch(t=t&&t.$$typeof,t){case qA:case YA:case ZA:case QA:case GA:return t;default:return e}}case JO:return e}}}function iq(t){return Va(t)===KA}ni.AsyncMode=eN;ni.ConcurrentMode=KA;ni.ContextConsumer=qA;ni.ContextProvider=GA;ni.Element=ZO;ni.ForwardRef=YA;ni.Fragment=WA;ni.Lazy=ZA;ni.Memo=QA;ni.Portal=JO;ni.Profiler=HA;ni.StrictMode=$A;ni.Suspense=XA;ni.isAsyncMode=function(t){return iq(t)||Va(t)===eN};ni.isConcurrentMode=iq;ni.isContextConsumer=function(t){return Va(t)===qA};ni.isContextProvider=function(t){return Va(t)===GA};ni.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===ZO};ni.isForwardRef=function(t){return Va(t)===YA};ni.isFragment=function(t){return Va(t)===WA};ni.isLazy=function(t){return Va(t)===ZA};ni.isMemo=function(t){return Va(t)===QA};ni.isPortal=function(t){return Va(t)===JO};ni.isProfiler=function(t){return Va(t)===HA};ni.isStrictMode=function(t){return Va(t)===$A};ni.isSuspense=function(t){return Va(t)===XA};ni.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===WA||t===KA||t===HA||t===$A||t===XA||t===fhe||typeof t=="object"&&t!==null&&(t.$$typeof===ZA||t.$$typeof===QA||t.$$typeof===GA||t.$$typeof===qA||t.$$typeof===YA||t.$$typeof===phe||t.$$typeof===mhe||t.$$typeof===ghe||t.$$typeof===hhe)};ni.typeOf=Va;rq.exports=ni;var vhe=rq.exports,oq=vhe,yhe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},xhe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},sq={};sq[oq.ForwardRef]=yhe;sq[oq.Memo]=xhe;var bhe=!0;function whe(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var aq=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||bhe===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},lq=function(e,n,r){aq(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var o=n;do e.insert(n===o?"."+i:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function She(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var _he={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ehe=/[A-Z]|^ms/g,Che=/_EMO_([^_]+?)_([^]*?)_EMO_/g,cq=function(e){return e.charCodeAt(1)===45},Kj=function(e){return e!=null&&typeof e!="boolean"},KM=tq(function(t){return cq(t)?t:t.replace(Ehe,"-$&").toLowerCase()}),Yj=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(Che,function(r,i,o){return Fc={name:i,styles:o,next:Fc},i})}return _he[e]!==1&&!cq(e)&&typeof n=="number"&&n!==0?n+"px":n};function cb(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Fc={name:i.name,styles:i.styles,next:Fc},i.name;var o=n;if(o.styles!==void 0){var s=o.next;if(s!==void 0)for(;s!==void 0;)Fc={name:s.name,styles:s.styles,next:Fc},s=s.next;var a=o.styles+";";return a}return Ahe(t,e,n)}case"function":{if(t!==void 0){var l=Fc,c=n(t);return Fc=l,cb(t,e,c)}break}}var u=n;if(e==null)return u;var d=e[u];return d!==void 0?d:u}function Ahe(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=cb(t,e,n[i])+";";else for(var o in n){var s=n[o];if(typeof s!="object"){var a=s;e!=null&&e[a]!==void 0?r+=o+"{"+e[a]+"}":Kj(a)&&(r+=KM(o)+":"+Yj(o,a)+";")}else if(Array.isArray(s)&&typeof s[0]=="string"&&(e==null||e[s[0]]===void 0))for(var l=0;l<s.length;l++)Kj(s[l])&&(r+=KM(o)+":"+Yj(o,s[l])+";");else{var c=cb(t,e,s);switch(o){case"animation":case"animationName":{r+=KM(o)+":"+c+";";break}default:r+=o+"{"+c+"}"}}}return r}var Xj=/label:\s*([^\s;{]+)\s*(;|$)/g,Fc;function tN(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";Fc=void 0;var o=t[0];if(o==null||o.raw===void 0)r=!1,i+=cb(n,e,o);else{var s=o;i+=s[0]}for(var a=1;a<t.length;a++)if(i+=cb(n,e,t[a]),r){var l=o;i+=l[a]}Xj.lastIndex=0;for(var c="",u;(u=Xj.exec(i))!==null;)c+="-"+u[1];var d=She(i)+c;return{name:d,styles:i,next:Fc}}var The=function(e){return e()},uq=L4.useInsertionEffect?L4.useInsertionEffect:!1,Mhe=uq||The,Qj=uq||A.useLayoutEffect,dq=A.createContext(typeof HTMLElement!="undefined"?dhe({key:"css"}):null);dq.Provider;var fq=function(e){return A.forwardRef(function(n,r){var i=A.useContext(dq);return e(n,i,r)})},ub=A.createContext({}),Phe=function(e,n){if(typeof n=="function"){var r=n(e);return r}return Vp({},e,n)},Dhe=qj(function(t){return qj(function(e){return Phe(t,e)})}),Rhe=function(e){var n=A.useContext(ub);return e.theme!==n&&(n=Dhe(n)(e.theme)),A.createElement(ub.Provider,{value:n},e.children)},JA=fq(function(t,e){var n=t.styles,r=tN([n],void 0,A.useContext(ub)),i=A.useRef();return Qj(function(){var o=e.key+"-global",s=new e.sheet.constructor({key:o,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+o+" "+r.name+'"]');return e.sheet.tags.length&&(s.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",o),s.hydrate([l])),i.current=[s,a],function(){s.flush()}},[e]),Qj(function(){var o=i.current,s=o[0],a=o[1];if(a){o[1]=!1;return}if(r.next!==void 0&&lq(e,r.next,!0),s.tags.length){var l=s.tags[s.tags.length-1].nextElementSibling;s.before=l,s.flush()}e.insert("",r,s,!1)},[e,r.name]),null});function khe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return tN(e)}var fw=function(){var e=khe.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},hq=String.raw,pq=hq`
  :root,
  :host {
    --chakra-vh: 100vh;
  }

  @supports (height: -webkit-fill-available) {
    :root,
    :host {
      --chakra-vh: -webkit-fill-available;
    }
  }

  @supports (height: -moz-fill-available) {
    :root,
    :host {
      --chakra-vh: -moz-fill-available;
    }
  }

  @supports (height: 100dvh) {
    :root,
    :host {
      --chakra-vh: 100dvh;
    }
  }
`,Ihe=()=>h.jsx(JA,{styles:pq}),Fhe=({scope:t=""})=>h.jsx(JA,{styles:hq`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        touch-action: manipulation;
      }

      body {
        position: relative;
        min-height: 100%;
        margin: 0;
        font-feature-settings: "kern";
      }

      ${t} :where(*, *::before, *::after) {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
        word-wrap: break-word;
      }

      main {
        display: block;
      }

      ${t} hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      ${t} :where(pre, code, kbd,samp) {
        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      ${t} a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      ${t} abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      ${t} :where(b, strong) {
        font-weight: bold;
      }

      ${t} small {
        font-size: 80%;
      }

      ${t} :where(sub,sup) {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      ${t} sub {
        bottom: -0.25em;
      }

      ${t} sup {
        top: -0.5em;
      }

      ${t} img {
        border-style: none;
      }

      ${t} :where(button, input, optgroup, select, textarea) {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      ${t} :where(button, input) {
        overflow: visible;
      }

      ${t} :where(button, select) {
        text-transform: none;
      }

      ${t} :where(
          button::-moz-focus-inner,
          [type="button"]::-moz-focus-inner,
          [type="reset"]::-moz-focus-inner,
          [type="submit"]::-moz-focus-inner
        ) {
        border-style: none;
        padding: 0;
      }

      ${t} fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      ${t} legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      ${t} progress {
        vertical-align: baseline;
      }

      ${t} textarea {
        overflow: auto;
      }

      ${t} :where([type="checkbox"], [type="radio"]) {
        box-sizing: border-box;
        padding: 0;
      }

      ${t} input[type="number"]::-webkit-inner-spin-button,
      ${t} input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      ${t} input[type="number"] {
        -moz-appearance: textfield;
      }

      ${t} input[type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      ${t} input[type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ${t} ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      ${t} details {
        display: block;
      }

      ${t} summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      ${t} :where(
          blockquote,
          dl,
          dd,
          h1,
          h2,
          h3,
          h4,
          h5,
          h6,
          hr,
          figure,
          p,
          pre
        ) {
        margin: 0;
      }

      ${t} button {
        background: transparent;
        padding: 0;
      }

      ${t} fieldset {
        margin: 0;
        padding: 0;
      }

      ${t} :where(ol, ul) {
        margin: 0;
        padding: 0;
      }

      ${t} textarea {
        resize: vertical;
      }

      ${t} :where(button, [role="button"]) {
        cursor: pointer;
      }

      ${t} button::-moz-focus-inner {
        border: 0 !important;
      }

      ${t} table {
        border-collapse: collapse;
      }

      ${t} :where(h1, h2, h3, h4, h5, h6) {
        font-size: inherit;
        font-weight: inherit;
      }

      ${t} :where(button, input, optgroup, select, textarea) {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      ${t} :where(img, svg, video, canvas, audio, iframe, embed, object) {
        display: block;
      }

      ${t} :where(img, video) {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible]
        :focus:not([data-focus-visible-added]):not(
          [data-focus-visible-disabled]
        ) {
        outline: none;
        box-shadow: none;
      }

      ${t} select::-ms-expand {
        display: none;
      }

      ${pq}
    `});function Ohe(t,e){return`${t} returned \`undefined\`. Seems you forgot to wrap component within ${e}`}function pi(t={}){const{name:e,strict:n=!0,hookName:r="useContext",providerName:i="Provider",errorMessage:o,defaultValue:s}=t,a=A.createContext(s);a.displayName=e;function l(){var c;const u=A.useContext(a);if(!u&&n){const d=new Error(o!=null?o:Ohe(r,i));throw d.name="ContextError",(c=Error.captureStackTrace)==null||c.call(Error,d,l),d}return u}return[a.Provider,l,a]}var[Nhe,Lhe]=pi({strict:!1,name:"PortalManagerContext"});function mq(t){const{children:e,zIndex:n}=t;return h.jsx(Nhe,{value:{zIndex:n},children:e})}mq.displayName="PortalManager";var nd=globalThis!=null&&globalThis.document?A.useLayoutEffect:A.useEffect,[gq,Bhe]=pi({strict:!1,name:"PortalContext"}),nN="chakra-portal",jhe=".chakra-portal",Uhe=t=>h.jsx("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:t.zIndex,top:0,left:0,right:0},children:t.children}),zhe=t=>{const{appendToParentPortal:e,children:n}=t,[r,i]=A.useState(null),o=A.useRef(null),[,s]=A.useState({});A.useEffect(()=>s({}),[]);const a=Bhe(),l=Lhe();nd(()=>{if(!r)return;const u=r.ownerDocument,d=e&&a!=null?a:u.body;if(!d)return;o.current=u.createElement("div"),o.current.className=nN,d.appendChild(o.current),s({});const f=o.current;return()=>{d.contains(f)&&d.removeChild(f)}},[r]);const c=l!=null&&l.zIndex?h.jsx(Uhe,{zIndex:l==null?void 0:l.zIndex,children:n}):n;return o.current?rc.createPortal(h.jsx(gq,{value:o.current,children:c}),o.current):h.jsx("span",{ref:u=>{u&&i(u)}})},Vhe=t=>{const{children:e,containerRef:n,appendToParentPortal:r}=t,i=n.current,o=i!=null?i:typeof window!="undefined"?document.body:void 0,s=A.useMemo(()=>{const l=i==null?void 0:i.ownerDocument.createElement("div");return l&&(l.className=nN),l},[i]),[,a]=A.useState({});return nd(()=>a({}),[]),nd(()=>{if(!(!s||!o))return o.appendChild(s),()=>{o.removeChild(s)}},[s,o]),o&&s?rc.createPortal(h.jsx(gq,{value:r?s:null,children:e}),s):null};function l0(t){const i=B({appendToParentPortal:!0},t),{containerRef:n}=i,r=Tt(i,["containerRef"]);return n?h.jsx(Vhe,B({containerRef:n},r)):h.jsx(zhe,B({},r))}l0.className=nN;l0.selector=jhe;l0.displayName="Portal";function c0(){const t=A.useContext(ub);if(!t)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return t}var rN=A.createContext({});rN.displayName="ColorModeContext";function eT(){const t=A.useContext(rN);if(t===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return t}function Jl(t,e){const{colorMode:n}=eT();return n==="dark"?e:t}var hS={light:"chakra-ui-light",dark:"chakra-ui-dark"};function Whe(t={}){const{preventTransition:e=!0}=t,n={setDataset:r=>{const i=e?n.preventTransition():void 0;document.documentElement.dataset.theme=r,document.documentElement.style.colorScheme=r,i==null||i()},setClassName(r){document.body.classList.add(r?hS.dark:hS.light),document.body.classList.remove(r?hS.light:hS.dark)},query(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme(r){var i;return((i=n.query().matches)!=null?i:r==="dark")?"dark":"light"},addListener(r){const i=n.query(),o=s=>{r(s.matches?"dark":"light")};return typeof i.addListener=="function"?i.addListener(o):i.addEventListener("change",o),()=>{typeof i.removeListener=="function"?i.removeListener(o):i.removeEventListener("change",o)}},preventTransition(){const r=document.createElement("style");return r.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(r),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(r)})})}}};return n}var $he="chakra-ui-color-mode";function Hhe(t){return{ssr:!1,type:"localStorage",get(e){if(!(globalThis!=null&&globalThis.document))return e;let n;try{n=localStorage.getItem(t)||e}catch(r){}return n||e},set(e){try{localStorage.setItem(t,e)}catch(n){}}}}var Ghe=Hhe($he),Zj=()=>{};function Jj(t,e){return t.type==="cookie"&&t.ssr?t.get(e):e}function vq(t){const{value:e,children:n,options:{useSystemColorMode:r,initialColorMode:i,disableTransitionOnChange:o}={},colorModeManager:s=Ghe}=t,a=i==="dark"?"dark":"light",[l,c]=A.useState(()=>Jj(s,a)),[u,d]=A.useState(()=>Jj(s)),{getSystemTheme:f,setClassName:p,setDataset:b,addListener:v}=A.useMemo(()=>Whe({preventTransition:o}),[o]),m=i==="system"&&!l?u:l,g=A.useCallback(S=>{const D=S==="system"?f():S;c(D),p(D==="dark"),b(D),s.set(D)},[s,f,p,b]);nd(()=>{i==="system"&&d(f())},[]),A.useEffect(()=>{const S=s.get();if(S){g(S);return}if(i==="system"){g("system");return}g(a)},[s,a,i,g]);const x=A.useCallback(()=>{g(m==="dark"?"light":"dark")},[m,g]);A.useEffect(()=>{if(r)return v(g)},[r,v,g]);const w=A.useMemo(()=>({colorMode:e!=null?e:m,toggleColorMode:e?Zj:x,setColorMode:e?Zj:g,forced:e!==void 0}),[m,x,g,e]);return h.jsx(rN.Provider,{value:w,children:n})}vq.displayName="ColorModeProvider";var qhe=new Set(["dark","light","system"]);function Khe(t){let e=t;return qhe.has(e)||(e="light"),e}function Yhe(t={}){const{initialColorMode:e="light",type:n="localStorage",storageKey:r="chakra-ui-color-mode"}=t,i=Khe(e),o=n==="cookie",s=`(function(){try{var a=function(o){var l="(prefers-color-scheme: dark)",v=window.matchMedia(l).matches?"dark":"light",e=o==="system"?v:o,d=document.documentElement,m=document.body,i="chakra-ui-light",n="chakra-ui-dark",s=e==="dark";return m.classList.add(s?n:i),m.classList.remove(s?i:n),d.style.colorScheme=e,d.dataset.theme=e,e},u=a,h="${i}",r="${r}",t=document.cookie.match(new RegExp("(^| )".concat(r,"=([^;]+)"))),c=t?t[2]:null;c?a(c):document.cookie="".concat(r,"=").concat(a(h),"; max-age=31536000; path=/")}catch(a){}})();
  `,a=`(function(){try{var a=function(c){var v="(prefers-color-scheme: dark)",h=window.matchMedia(v).matches?"dark":"light",r=c==="system"?h:c,o=document.documentElement,s=document.body,l="chakra-ui-light",d="chakra-ui-dark",i=r==="dark";return s.classList.add(i?d:l),s.classList.remove(i?l:d),o.style.colorScheme=r,o.dataset.theme=r,r},n=a,m="${i}",e="${r}",t=localStorage.getItem(e);t?a(t):localStorage.setItem(e,a(m))}catch(a){}})();
  `;return`!${o?s:a}`.trim()}function Xhe(t={}){const{nonce:e}=t;return h.jsx("script",{id:"chakra-script",nonce:e,dangerouslySetInnerHTML:{__html:Yhe(t)}})}function yq(){const t=eT(),e=c0();return oe(B({},t),{theme:e})}function Qhe(t,e,n){var r,i;if(e==null)return e;const o=s=>{var a,l;return(l=(a=t.__cssMap)==null?void 0:a[s])==null?void 0:l.value};return(i=(r=o(e))!=null?r:o(n))!=null?i:n}function Zhe(t,e,n){const r=Array.isArray(e)?e:[e],i=Array.isArray(n)?n:[n];return o=>{const s=i.filter(Boolean),a=r.map((l,c)=>{var u;const d=`${t}.${l}`;return Qhe(o,d,(u=s[c])!=null?u:l)});return Array.isArray(e)?a:a[0]}}var _n=(...t)=>t.filter(Boolean).join(" ");function us(t){const e=typeof t;return t!=null&&(e==="object"||e==="function")&&!Array.isArray(t)}var hw=t=>{const{condition:e,message:n}=t};function Uc(t,...e){return Jhe(t)?t(...e):t}var Jhe=t=>typeof t=="function",Fn=t=>t?"":void 0,rd=t=>t?!0:void 0;function Un(...t){return function(n){t.some(r=>(r==null||r(n),n==null?void 0:n.defaultPrevented))}}function epe(...t){return function(n){t.forEach(r=>{r==null||r(n)})}}var sC={exports:{}};sC.exports;(function(t,e){var n=200,r="__lodash_hash_undefined__",i=800,o=16,s=9007199254740991,a="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",u="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Function]",b="[object GeneratorFunction]",v="[object Map]",m="[object Number]",g="[object Null]",x="[object Object]",w="[object Proxy]",S="[object RegExp]",D="[object Set]",k="[object String]",P="[object Undefined]",M="[object WeakMap]",T="[object ArrayBuffer]",_="[object DataView]",E="[object Float32Array]",R="[object Float64Array]",F="[object Int8Array]",L="[object Int16Array]",N="[object Int32Array]",U="[object Uint8Array]",H="[object Uint8ClampedArray]",j="[object Uint16Array]",z="[object Uint32Array]",q=/[\\^$.*+?()[\]{}|]/g,$=/^\[object .+?Constructor\]$/,K=/^(?:0|[1-9]\d*)$/,G={};G[E]=G[R]=G[F]=G[L]=G[N]=G[U]=G[H]=G[j]=G[z]=!0,G[a]=G[l]=G[T]=G[u]=G[_]=G[d]=G[f]=G[p]=G[v]=G[m]=G[x]=G[S]=G[D]=G[k]=G[M]=!1;var Y=typeof $i=="object"&&$i&&$i.Object===Object&&$i,J=typeof self=="object"&&self&&self.Object===Object&&self,V=Y||J||Function("return this")(),re=e&&!e.nodeType&&e,fe=re&&!0&&t&&!t.nodeType&&t,pe=fe&&fe.exports===re,ce=pe&&Y.process,xe=function(){try{var Re=fe&&fe.require&&fe.require("util").types;return Re||ce&&ce.binding&&ce.binding("util")}catch(He){}}(),Ae=xe&&xe.isTypedArray;function Ee(Re,He,ht){switch(ht.length){case 0:return Re.call(He);case 1:return Re.call(He,ht[0]);case 2:return Re.call(He,ht[0],ht[1]);case 3:return Re.call(He,ht[0],ht[1],ht[2])}return Re.apply(He,ht)}function ee(Re,He){for(var ht=-1,dn=Array(Re);++ht<Re;)dn[ht]=He(ht);return dn}function Oe(Re){return function(He){return Re(He)}}function le(Re,He){return Re==null?void 0:Re[He]}function me(Re,He){return function(ht){return Re(He(ht))}}var ne=Array.prototype,se=Function.prototype,ge=Object.prototype,Q=V["__core-js_shared__"],W=se.toString,ve=ge.hasOwnProperty,ue=function(){var Re=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||"");return Re?"Symbol(src)_1."+Re:""}(),Me=ge.toString,Pe=W.call(Object),je=RegExp("^"+W.call(ve).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ke=pe?V.Buffer:void 0,De=V.Symbol,nt=V.Uint8Array;ke&&ke.allocUnsafe;var be=me(Object.getPrototypeOf,Object),Ne=Object.create,Ie=ge.propertyIsEnumerable,Ve=ne.splice,Ue=De?De.toStringTag:void 0,tt=function(){try{var Re=wn(Object,"defineProperty");return Re({},"",{}),Re}catch(He){}}(),st=ke?ke.isBuffer:void 0,vt=Math.max,Fe=Date.now,ct=wn(V,"Map"),Ye=wn(Object,"create"),ft=function(){function Re(){}return function(He){if(!Fl(He))return{};if(Ne)return Ne(He);Re.prototype=He;var ht=new Re;return Re.prototype=void 0,ht}}();function _t(Re){var He=-1,ht=Re==null?0:Re.length;for(this.clear();++He<ht;){var dn=Re[He];this.set(dn[0],dn[1])}}function lt(){this.__data__=Ye?Ye(null):{},this.size=0}function Lt(Re){var He=this.has(Re)&&delete this.__data__[Re];return this.size-=He?1:0,He}function nn(Re){var He=this.__data__;if(Ye){var ht=He[Re];return ht===r?void 0:ht}return ve.call(He,Re)?He[Re]:void 0}function sn(Re){var He=this.__data__;return Ye?He[Re]!==void 0:ve.call(He,Re)}function Ce(Re,He){var ht=this.__data__;return this.size+=this.has(Re)?0:1,ht[Re]=Ye&&He===void 0?r:He,this}_t.prototype.clear=lt,_t.prototype.delete=Lt,_t.prototype.get=nn,_t.prototype.has=sn,_t.prototype.set=Ce;function ze(Re){var He=-1,ht=Re==null?0:Re.length;for(this.clear();++He<ht;){var dn=Re[He];this.set(dn[0],dn[1])}}function Qe(){this.__data__=[],this.size=0}function gt(Re){var He=this.__data__,ht=et(He,Re);if(ht<0)return!1;var dn=He.length-1;return ht==dn?He.pop():Ve.call(He,ht,1),--this.size,!0}function Rt(Re){var He=this.__data__,ht=et(He,Re);return ht<0?void 0:He[ht][1]}function Bt(Re){return et(this.__data__,Re)>-1}function tn(Re,He){var ht=this.__data__,dn=et(ht,Re);return dn<0?(++this.size,ht.push([Re,He])):ht[dn][1]=He,this}ze.prototype.clear=Qe,ze.prototype.delete=gt,ze.prototype.get=Rt,ze.prototype.has=Bt,ze.prototype.set=tn;function Ht(Re){var He=-1,ht=Re==null?0:Re.length;for(this.clear();++He<ht;){var dn=Re[He];this.set(dn[0],dn[1])}}function Qt(){this.size=0,this.__data__={hash:new _t,map:new(ct||ze),string:new _t}}function Vt(Re){var He=Cn(this,Re).delete(Re);return this.size-=He?1:0,He}function pn(Re){return Cn(this,Re).get(Re)}function vn(Re){return Cn(this,Re).has(Re)}function Wn(Re,He){var ht=Cn(this,Re),dn=ht.size;return ht.set(Re,He),this.size+=ht.size==dn?0:1,this}Ht.prototype.clear=Qt,Ht.prototype.delete=Vt,Ht.prototype.get=pn,Ht.prototype.has=vn,Ht.prototype.set=Wn;function tr(Re){var He=this.__data__=new ze(Re);this.size=He.size}function qr(){this.__data__=new ze,this.size=0}function hr(Re){var He=this.__data__,ht=He.delete(Re);return this.size=He.size,ht}function Jn(Re){return this.__data__.get(Re)}function xn(Re){return this.__data__.has(Re)}function Te(Re,He){var ht=this.__data__;if(ht instanceof ze){var dn=ht.__data__;if(!ct||dn.length<n-1)return dn.push([Re,He]),this.size=++ht.size,this;ht=this.__data__=new Ht(dn)}return ht.set(Re,He),this.size=ht.size,this}tr.prototype.clear=qr,tr.prototype.delete=hr,tr.prototype.get=Jn,tr.prototype.has=xn,tr.prototype.set=Te;function Je(Re,He){var ht=Od(Re),dn=!ht&&Vs(Re),ar=!ht&&!dn&&Il(Re),Rr=!ht&&!dn&&!ar&&Cm(Re),Xr=ht||dn||ar||Rr,An=Xr?ee(Re.length,String):[],jr=An.length;for(var Qr in Re)Xr&&(Qr=="length"||ar&&(Qr=="offset"||Qr=="parent")||Rr&&(Qr=="buffer"||Qr=="byteLength"||Qr=="byteOffset")||ur(Qr,jr))||An.push(Qr);return An}function ae(Re,He,ht){(ht!==void 0&&!ha(Re[He],ht)||ht===void 0&&!(He in Re))&&Ke(Re,He,ht)}function Le(Re,He,ht){var dn=Re[He];(!(ve.call(Re,He)&&ha(dn,ht))||ht===void 0&&!(He in Re))&&Ke(Re,He,ht)}function et(Re,He){for(var ht=Re.length;ht--;)if(ha(Re[ht][0],He))return ht;return-1}function Ke(Re,He,ht){He=="__proto__"&&tt?tt(Re,He,{configurable:!0,enumerable:!0,value:ht,writable:!0}):Re[He]=ht}var We=Zt();function wt(Re){return Re==null?Re===void 0?P:g:Ue&&Ue in Object(Re)?sr(Re):bm(Re)}function kt(Re){return To(Re)&&wt(Re)==a}function Mt(Re){if(!Fl(Re)||gi(Re))return!1;var He=xh(Re)?je:$;return He.test(_m(Re))}function Wt(Re){return To(Re)&&Em(Re.length)&&!!G[wt(Re)]}function mn(Re){if(!Fl(Re))return Ni(Re);var He=Yo(Re),ht=[];for(var dn in Re)dn=="constructor"&&(He||!ve.call(Re,dn))||ht.push(dn);return ht}function gn(Re,He,ht,dn,ar){Re!==He&&We(He,function(Rr,Xr){if(ar||(ar=new tr),Fl(Rr))cn(Re,He,Xr,ht,gn,dn,ar);else{var An=dn?dn(vh(Re,Xr),Rr,Xr+"",Re,He,ar):void 0;An===void 0&&(An=Rr),ae(Re,Xr,An)}},gu)}function cn(Re,He,ht,dn,ar,Rr,Xr){var An=vh(Re,ht),jr=vh(He,ht),Qr=Xr.get(jr);if(Qr){ae(Re,ht,Qr);return}var go=Rr?Rr(An,jr,ht+"",Re,He,Xr):void 0,Ol=go===void 0;if(Ol){var Li=Od(jr),vu=!Li&&Il(jr),yu=!Li&&!vu&&Cm(jr);go=jr,Li||vu||yu?Od(An)?go=An:yh(An)?go=St(An):vu?(Ol=!1,go=br(jr)):yu?(Ol=!1,go=at(jr)):go=[]:P0(jr)||Vs(jr)?(go=An,Vs(An)?go=Ld(An):(!Fl(An)||xh(An))&&(go=zn(jr))):Ol=!1}Ol&&(Xr.set(jr,go),ar(go,jr,dn,Rr,Xr),Xr.delete(jr)),ae(Re,ht,go)}function un(Re,He){return wm(gh(Re,He,wr),Re+"")}var $n=tt?function(Re,He){return tt(Re,"toString",{configurable:!0,enumerable:!1,value:Dr(He),writable:!0})}:wr;function br(Re,He){return Re.slice()}function _e(Re){var He=new Re.constructor(Re.byteLength);return new nt(He).set(new nt(Re)),He}function at(Re,He){var ht=_e(Re.buffer);return new Re.constructor(ht,Re.byteOffset,Re.length)}function St(Re,He){var ht=-1,dn=Re.length;for(He||(He=Array(dn));++ht<dn;)He[ht]=Re[ht];return He}function Dt(Re,He,ht,dn){var ar=!ht;ht||(ht={});for(var Rr=-1,Xr=He.length;++Rr<Xr;){var An=He[Rr],jr=void 0;jr===void 0&&(jr=Re[An]),ar?Ke(ht,An,jr):Le(ht,An,jr)}return ht}function Nt(Re){return un(function(He,ht){var dn=-1,ar=ht.length,Rr=ar>1?ht[ar-1]:void 0,Xr=ar>2?ht[2]:void 0;for(Rr=Re.length>3&&typeof Rr=="function"?(ar--,Rr):void 0,Xr&&mo(ht[0],ht[1],Xr)&&(Rr=ar<3?void 0:Rr,ar=1),He=Object(He);++dn<ar;){var An=ht[dn];An&&Re(He,An,dn,Rr)}return He})}function Zt(Re){return function(He,ht,dn){for(var ar=-1,Rr=Object(He),Xr=dn(He),An=Xr.length;An--;){var jr=Xr[++ar];if(ht(Rr[jr],jr,Rr)===!1)break}return He}}function Cn(Re,He){var ht=Re.__data__;return Hn(He)?ht[typeof He=="string"?"string":"hash"]:ht.map}function wn(Re,He){var ht=le(Re,He);return Mt(ht)?ht:void 0}function sr(Re){var He=ve.call(Re,Ue),ht=Re[Ue];try{Re[Ue]=void 0;var dn=!0}catch(Rr){}var ar=Me.call(Re);return dn&&(He?Re[Ue]=ht:delete Re[Ue]),ar}function zn(Re){return typeof Re.constructor=="function"&&!Yo(Re)?ft(be(Re)):{}}function ur(Re,He){var ht=typeof Re;return He=He==null?s:He,!!He&&(ht=="number"||ht!="symbol"&&K.test(Re))&&Re>-1&&Re%1==0&&Re<He}function mo(Re,He,ht){if(!Fl(ht))return!1;var dn=typeof He;return(dn=="number"?Nd(ht)&&ur(He,ht.length):dn=="string"&&He in ht)?ha(ht[He],Re):!1}function Hn(Re){var He=typeof Re;return He=="string"||He=="number"||He=="symbol"||He=="boolean"?Re!=="__proto__":Re===null}function gi(Re){return!!ue&&ue in Re}function Yo(Re){var He=Re&&Re.constructor,ht=typeof He=="function"&&He.prototype||ge;return Re===ht}function Ni(Re){var He=[];if(Re!=null)for(var ht in Object(Re))He.push(ht);return He}function bm(Re){return Me.call(Re)}function gh(Re,He,ht){return He=vt(He===void 0?Re.length-1:He,0),function(){for(var dn=arguments,ar=-1,Rr=vt(dn.length-He,0),Xr=Array(Rr);++ar<Rr;)Xr[ar]=dn[He+ar];ar=-1;for(var An=Array(He+1);++ar<He;)An[ar]=dn[ar];return An[He]=ht(Xr),Ee(Re,this,An)}}function vh(Re,He){if(!(He==="constructor"&&typeof Re[He]=="function")&&He!="__proto__")return Re[He]}var wm=Sm($n);function Sm(Re){var He=0,ht=0;return function(){var dn=Fe(),ar=o-(dn-ht);if(ht=dn,ar>0){if(++He>=i)return arguments[0]}else He=0;return Re.apply(void 0,arguments)}}function _m(Re){if(Re!=null){try{return W.call(Re)}catch(He){}try{return Re+""}catch(He){}}return""}function ha(Re,He){return Re===He||Re!==Re&&He!==He}var Vs=kt(function(){return arguments}())?kt:function(Re){return To(Re)&&ve.call(Re,"callee")&&!Ie.call(Re,"callee")},Od=Array.isArray;function Nd(Re){return Re!=null&&Em(Re.length)&&!xh(Re)}function yh(Re){return To(Re)&&Nd(Re)}var Il=st||Tm;function xh(Re){if(!Fl(Re))return!1;var He=wt(Re);return He==p||He==b||He==c||He==w}function Em(Re){return typeof Re=="number"&&Re>-1&&Re%1==0&&Re<=s}function Fl(Re){var He=typeof Re;return Re!=null&&(He=="object"||He=="function")}function To(Re){return Re!=null&&typeof Re=="object"}function P0(Re){if(!To(Re)||wt(Re)!=x)return!1;var He=be(Re);if(He===null)return!0;var ht=ve.call(He,"constructor")&&He.constructor;return typeof ht=="function"&&ht instanceof ht&&W.call(ht)==Pe}var Cm=Ae?Oe(Ae):Wt;function Ld(Re){return Dt(Re,gu(Re))}function gu(Re){return Nd(Re)?Je(Re):mn(Re)}var Am=Nt(function(Re,He,ht,dn){gn(Re,He,ht,dn)});function Dr(Re){return function(){return Re}}function wr(Re){return Re}function Tm(){return!1}t.exports=Am})(sC,sC.exports);var tpe=sC.exports;const hl=Md(tpe);var npe=t=>/!(important)?$/.test(t),eU=t=>typeof t=="string"?t.replace(/!(important)?$/,"").trim():t,rpe=(t,e)=>n=>{const r=String(e),i=npe(r),o=eU(r),s=t?`${t}.${o}`:o;let a=us(n.__cssMap)&&s in n.__cssMap?n.__cssMap[s].varRef:e;return a=eU(a),i?`${a} !important`:a};function iN(t){const{scale:e,transform:n,compose:r}=t;return(o,s)=>{var a;const l=rpe(e,o)(s);let c=(a=n==null?void 0:n(l,s))!=null?a:l;return r&&(c=r(c,s)),c}}var pS=(...t)=>e=>t.reduce((n,r)=>r(n),e);function Za(t,e){return n=>{const r={property:n,scale:t};return r.transform=iN({scale:t,transform:e}),r}}var ipe=({rtl:t,ltr:e})=>n=>n.direction==="rtl"?t:e;function ope(t){const{property:e,scale:n,transform:r}=t;return{scale:n,property:ipe(e),transform:n?iN({scale:n,compose:r}):r}}var xq=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function spe(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...xq].join(" ")}function ape(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...xq].join(" ")}var lpe={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},cpe={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function upe(t){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":t,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}var dpe={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},mk={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},fpe=new Set(Object.values(mk)),gk=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),hpe=t=>t.trim();function ppe(t,e){if(t==null||gk.has(t))return t;if(!(vk(t)||gk.has(t)))return`url('${t}')`;const i=/(^[a-z-A-Z]+)\((.*)\)/g.exec(t),o=i==null?void 0:i[1],s=i==null?void 0:i[2];if(!o||!s)return t;const a=o.includes("-gradient")?o:`${o}-gradient`,[l,...c]=s.split(",").map(hpe).filter(Boolean);if((c==null?void 0:c.length)===0)return t;const u=l in mk?mk[l]:l;c.unshift(u);const d=c.map(f=>{if(fpe.has(f))return f;const p=f.indexOf(" "),[b,v]=p!==-1?[f.substr(0,p),f.substr(p+1)]:[f],m=vk(v)?v:v&&v.split(" "),g=`colors.${b}`,x=g in e.__cssMap?e.__cssMap[g].varRef:b;return m?[x,...Array.isArray(m)?m:[m]].join(" "):x});return`${a}(${d.join(", ")})`}var vk=t=>typeof t=="string"&&t.includes("(")&&t.includes(")"),mpe=(t,e)=>ppe(t,e!=null?e:{});function gpe(t){return/^var\(--.+\)$/.test(t)}var vpe=t=>{const e=parseFloat(t.toString()),n=t.toString().replace(String(e),"");return{unitless:!n,value:e,unit:n}},Tc=t=>e=>`${t}(${e})`,Er={filter(t){return t!=="auto"?t:lpe},backdropFilter(t){return t!=="auto"?t:cpe},ring(t){return upe(Er.px(t))},bgClip(t){return t==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:t}},transform(t){return t==="auto"?spe():t==="auto-gpu"?ape():t},vh(t){return t==="$100vh"?"var(--chakra-vh)":t},px(t){if(t==null)return t;const{unitless:e}=vpe(t);return e||typeof t=="number"?`${t}px`:t},fraction(t){return typeof t!="number"||t>1?t:`${t*100}%`},float(t,e){const n={left:"right",right:"left"};return e.direction==="rtl"?n[t]:t},degree(t){if(gpe(t)||t==null)return t;const e=typeof t=="string"&&!t.endsWith("deg");return typeof t=="number"||e?`${t}deg`:t},gradient:mpe,blur:Tc("blur"),opacity:Tc("opacity"),brightness:Tc("brightness"),contrast:Tc("contrast"),dropShadow:Tc("drop-shadow"),grayscale:Tc("grayscale"),hueRotate:t=>Tc("hue-rotate")(Er.degree(t)),invert:Tc("invert"),saturate:Tc("saturate"),sepia:Tc("sepia"),bgImage(t){return t==null||vk(t)||gk.has(t)?t:`url(${t})`},outline(t){const e=String(t)==="0"||String(t)==="none";return t!==null&&e?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:t}},flexDirection(t){var e;const{space:n,divide:r}=(e=dpe[t])!=null?e:{},i={flexDirection:t};return n&&(i[n]=1),r&&(i[r]=1),i}},Xe={borderWidths:Za("borderWidths"),borderStyles:Za("borderStyles"),colors:Za("colors"),borders:Za("borders"),gradients:Za("gradients",Er.gradient),radii:Za("radii",Er.px),space:Za("space",pS(Er.vh,Er.px)),spaceT:Za("space",pS(Er.vh,Er.px)),degreeT(t){return{property:t,transform:Er.degree}},prop(t,e,n){return B({property:t,scale:e},e&&{transform:iN({scale:e,transform:n})})},propT(t,e){return{property:t,transform:e}},sizes:Za("sizes",pS(Er.vh,Er.px)),sizesT:Za("sizes",pS(Er.vh,Er.fraction)),shadows:Za("shadows"),logical:ope,blur:Za("blur",Er.blur)},W_={background:Xe.colors("background"),backgroundColor:Xe.colors("backgroundColor"),backgroundImage:Xe.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:Er.bgClip},bgSize:Xe.prop("backgroundSize"),bgPosition:Xe.prop("backgroundPosition"),bg:Xe.colors("background"),bgColor:Xe.colors("backgroundColor"),bgPos:Xe.prop("backgroundPosition"),bgRepeat:Xe.prop("backgroundRepeat"),bgAttachment:Xe.prop("backgroundAttachment"),bgGradient:Xe.gradients("backgroundImage"),bgClip:{transform:Er.bgClip}};Object.assign(W_,{bgImage:W_.backgroundImage,bgImg:W_.backgroundImage});var Vr={border:Xe.borders("border"),borderWidth:Xe.borderWidths("borderWidth"),borderStyle:Xe.borderStyles("borderStyle"),borderColor:Xe.colors("borderColor"),borderRadius:Xe.radii("borderRadius"),borderTop:Xe.borders("borderTop"),borderBlockStart:Xe.borders("borderBlockStart"),borderTopLeftRadius:Xe.radii("borderTopLeftRadius"),borderStartStartRadius:Xe.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:Xe.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:Xe.radii("borderTopRightRadius"),borderStartEndRadius:Xe.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:Xe.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:Xe.borders("borderRight"),borderInlineEnd:Xe.borders("borderInlineEnd"),borderBottom:Xe.borders("borderBottom"),borderBlockEnd:Xe.borders("borderBlockEnd"),borderBottomLeftRadius:Xe.radii("borderBottomLeftRadius"),borderBottomRightRadius:Xe.radii("borderBottomRightRadius"),borderLeft:Xe.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:Xe.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:Xe.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:Xe.borders(["borderLeft","borderRight"]),borderInline:Xe.borders("borderInline"),borderY:Xe.borders(["borderTop","borderBottom"]),borderBlock:Xe.borders("borderBlock"),borderTopWidth:Xe.borderWidths("borderTopWidth"),borderBlockStartWidth:Xe.borderWidths("borderBlockStartWidth"),borderTopColor:Xe.colors("borderTopColor"),borderBlockStartColor:Xe.colors("borderBlockStartColor"),borderTopStyle:Xe.borderStyles("borderTopStyle"),borderBlockStartStyle:Xe.borderStyles("borderBlockStartStyle"),borderBottomWidth:Xe.borderWidths("borderBottomWidth"),borderBlockEndWidth:Xe.borderWidths("borderBlockEndWidth"),borderBottomColor:Xe.colors("borderBottomColor"),borderBlockEndColor:Xe.colors("borderBlockEndColor"),borderBottomStyle:Xe.borderStyles("borderBottomStyle"),borderBlockEndStyle:Xe.borderStyles("borderBlockEndStyle"),borderLeftWidth:Xe.borderWidths("borderLeftWidth"),borderInlineStartWidth:Xe.borderWidths("borderInlineStartWidth"),borderLeftColor:Xe.colors("borderLeftColor"),borderInlineStartColor:Xe.colors("borderInlineStartColor"),borderLeftStyle:Xe.borderStyles("borderLeftStyle"),borderInlineStartStyle:Xe.borderStyles("borderInlineStartStyle"),borderRightWidth:Xe.borderWidths("borderRightWidth"),borderInlineEndWidth:Xe.borderWidths("borderInlineEndWidth"),borderRightColor:Xe.colors("borderRightColor"),borderInlineEndColor:Xe.colors("borderInlineEndColor"),borderRightStyle:Xe.borderStyles("borderRightStyle"),borderInlineEndStyle:Xe.borderStyles("borderInlineEndStyle"),borderTopRadius:Xe.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:Xe.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:Xe.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:Xe.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(Vr,{rounded:Vr.borderRadius,roundedTop:Vr.borderTopRadius,roundedTopLeft:Vr.borderTopLeftRadius,roundedTopRight:Vr.borderTopRightRadius,roundedTopStart:Vr.borderStartStartRadius,roundedTopEnd:Vr.borderStartEndRadius,roundedBottom:Vr.borderBottomRadius,roundedBottomLeft:Vr.borderBottomLeftRadius,roundedBottomRight:Vr.borderBottomRightRadius,roundedBottomStart:Vr.borderEndStartRadius,roundedBottomEnd:Vr.borderEndEndRadius,roundedLeft:Vr.borderLeftRadius,roundedRight:Vr.borderRightRadius,roundedStart:Vr.borderInlineStartRadius,roundedEnd:Vr.borderInlineEndRadius,borderStart:Vr.borderInlineStart,borderEnd:Vr.borderInlineEnd,borderTopStartRadius:Vr.borderStartStartRadius,borderTopEndRadius:Vr.borderStartEndRadius,borderBottomStartRadius:Vr.borderEndStartRadius,borderBottomEndRadius:Vr.borderEndEndRadius,borderStartRadius:Vr.borderInlineStartRadius,borderEndRadius:Vr.borderInlineEndRadius,borderStartWidth:Vr.borderInlineStartWidth,borderEndWidth:Vr.borderInlineEndWidth,borderStartColor:Vr.borderInlineStartColor,borderEndColor:Vr.borderInlineEndColor,borderStartStyle:Vr.borderInlineStartStyle,borderEndStyle:Vr.borderInlineEndStyle});var ype={color:Xe.colors("color"),textColor:Xe.colors("color"),fill:Xe.colors("fill"),stroke:Xe.colors("stroke")},yk={boxShadow:Xe.shadows("boxShadow"),mixBlendMode:!0,blendMode:Xe.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:Xe.prop("backgroundBlendMode"),opacity:!0};Object.assign(yk,{shadow:yk.boxShadow});var xpe={filter:{transform:Er.filter},blur:Xe.blur("--chakra-blur"),brightness:Xe.propT("--chakra-brightness",Er.brightness),contrast:Xe.propT("--chakra-contrast",Er.contrast),hueRotate:Xe.propT("--chakra-hue-rotate",Er.hueRotate),invert:Xe.propT("--chakra-invert",Er.invert),saturate:Xe.propT("--chakra-saturate",Er.saturate),dropShadow:Xe.propT("--chakra-drop-shadow",Er.dropShadow),backdropFilter:{transform:Er.backdropFilter},backdropBlur:Xe.blur("--chakra-backdrop-blur"),backdropBrightness:Xe.propT("--chakra-backdrop-brightness",Er.brightness),backdropContrast:Xe.propT("--chakra-backdrop-contrast",Er.contrast),backdropHueRotate:Xe.propT("--chakra-backdrop-hue-rotate",Er.hueRotate),backdropInvert:Xe.propT("--chakra-backdrop-invert",Er.invert),backdropSaturate:Xe.propT("--chakra-backdrop-saturate",Er.saturate)},aC={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:Er.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:Xe.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:Xe.space("gap"),rowGap:Xe.space("rowGap"),columnGap:Xe.space("columnGap")};Object.assign(aC,{flexDir:aC.flexDirection});var bq={gridGap:Xe.space("gridGap"),gridColumnGap:Xe.space("gridColumnGap"),gridRowGap:Xe.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},bpe={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:Er.outline},outlineOffset:!0,outlineColor:Xe.colors("outlineColor")},tl={width:Xe.sizesT("width"),inlineSize:Xe.sizesT("inlineSize"),height:Xe.sizes("height"),blockSize:Xe.sizes("blockSize"),boxSize:Xe.sizes(["width","height"]),minWidth:Xe.sizes("minWidth"),minInlineSize:Xe.sizes("minInlineSize"),minHeight:Xe.sizes("minHeight"),minBlockSize:Xe.sizes("minBlockSize"),maxWidth:Xe.sizes("maxWidth"),maxInlineSize:Xe.sizes("maxInlineSize"),maxHeight:Xe.sizes("maxHeight"),maxBlockSize:Xe.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(t,e)=>{var n,r,i;return{[`@media screen and (min-width: ${(i=(r=(n=e.__breakpoints)==null?void 0:n.get(t))==null?void 0:r.minW)!=null?i:t})`]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(t,e)=>{var n,r,i;return{[`@media screen and (max-width: ${(i=(r=(n=e.__breakpoints)==null?void 0:n.get(t))==null?void 0:r._minW)!=null?i:t})`]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:Xe.propT("float",Er.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(tl,{w:tl.width,h:tl.height,minW:tl.minWidth,maxW:tl.maxWidth,minH:tl.minHeight,maxH:tl.maxHeight,overscroll:tl.overscrollBehavior,overscrollX:tl.overscrollBehaviorX,overscrollY:tl.overscrollBehaviorY});var wpe={listStyleType:!0,listStylePosition:!0,listStylePos:Xe.prop("listStylePosition"),listStyleImage:!0,listStyleImg:Xe.prop("listStyleImage")};function Spe(t,e,n,r){const i=typeof e=="string"?e.split("."):[e];for(r=0;r<i.length&&t;r+=1)t=t[i[r]];return t===void 0?n:t}var _pe=t=>{const e=new WeakMap;return(r,i,o,s)=>{if(typeof r=="undefined")return t(r,i,o);e.has(r)||e.set(r,new Map);const a=e.get(r);if(a.has(i))return a.get(i);const l=t(r,i,o,s);return a.set(i,l),l}},Epe=_pe(Spe),Cpe={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},Ape={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},YM=(t,e,n)=>{const r={},i=Epe(t,e,{});for(const o in i)o in n&&n[o]!=null||(r[o]=i[o]);return r},Tpe={srOnly:{transform(t){return t===!0?Cpe:t==="focusable"?Ape:{}}},layerStyle:{processResult:!0,transform:(t,e,n)=>YM(e,`layerStyles.${t}`,n)},textStyle:{processResult:!0,transform:(t,e,n)=>YM(e,`textStyles.${t}`,n)},apply:{processResult:!0,transform:(t,e,n)=>YM(e,t,n)}},cx={position:!0,pos:Xe.prop("position"),zIndex:Xe.prop("zIndex","zIndices"),inset:Xe.spaceT("inset"),insetX:Xe.spaceT(["left","right"]),insetInline:Xe.spaceT("insetInline"),insetY:Xe.spaceT(["top","bottom"]),insetBlock:Xe.spaceT("insetBlock"),top:Xe.spaceT("top"),insetBlockStart:Xe.spaceT("insetBlockStart"),bottom:Xe.spaceT("bottom"),insetBlockEnd:Xe.spaceT("insetBlockEnd"),left:Xe.spaceT("left"),insetInlineStart:Xe.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:Xe.spaceT("right"),insetInlineEnd:Xe.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(cx,{insetStart:cx.insetInlineStart,insetEnd:cx.insetInlineEnd});var Mpe={ring:{transform:Er.ring},ringColor:Xe.colors("--chakra-ring-color"),ringOffset:Xe.prop("--chakra-ring-offset-width"),ringOffsetColor:Xe.colors("--chakra-ring-offset-color"),ringInset:Xe.prop("--chakra-ring-inset")},yi={margin:Xe.spaceT("margin"),marginTop:Xe.spaceT("marginTop"),marginBlockStart:Xe.spaceT("marginBlockStart"),marginRight:Xe.spaceT("marginRight"),marginInlineEnd:Xe.spaceT("marginInlineEnd"),marginBottom:Xe.spaceT("marginBottom"),marginBlockEnd:Xe.spaceT("marginBlockEnd"),marginLeft:Xe.spaceT("marginLeft"),marginInlineStart:Xe.spaceT("marginInlineStart"),marginX:Xe.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:Xe.spaceT("marginInline"),marginY:Xe.spaceT(["marginTop","marginBottom"]),marginBlock:Xe.spaceT("marginBlock"),padding:Xe.space("padding"),paddingTop:Xe.space("paddingTop"),paddingBlockStart:Xe.space("paddingBlockStart"),paddingRight:Xe.space("paddingRight"),paddingBottom:Xe.space("paddingBottom"),paddingBlockEnd:Xe.space("paddingBlockEnd"),paddingLeft:Xe.space("paddingLeft"),paddingInlineStart:Xe.space("paddingInlineStart"),paddingInlineEnd:Xe.space("paddingInlineEnd"),paddingX:Xe.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:Xe.space("paddingInline"),paddingY:Xe.space(["paddingTop","paddingBottom"]),paddingBlock:Xe.space("paddingBlock")};Object.assign(yi,{m:yi.margin,mt:yi.marginTop,mr:yi.marginRight,me:yi.marginInlineEnd,marginEnd:yi.marginInlineEnd,mb:yi.marginBottom,ml:yi.marginLeft,ms:yi.marginInlineStart,marginStart:yi.marginInlineStart,mx:yi.marginX,my:yi.marginY,p:yi.padding,pt:yi.paddingTop,py:yi.paddingY,px:yi.paddingX,pb:yi.paddingBottom,pl:yi.paddingLeft,ps:yi.paddingInlineStart,paddingStart:yi.paddingInlineStart,pr:yi.paddingRight,pe:yi.paddingInlineEnd,paddingEnd:yi.paddingInlineEnd});var Ppe={textDecorationColor:Xe.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:Xe.shadows("textShadow")},Dpe={clipPath:!0,transform:Xe.propT("transform",Er.transform),transformOrigin:!0,translateX:Xe.spaceT("--chakra-translate-x"),translateY:Xe.spaceT("--chakra-translate-y"),skewX:Xe.degreeT("--chakra-skew-x"),skewY:Xe.degreeT("--chakra-skew-y"),scaleX:Xe.prop("--chakra-scale-x"),scaleY:Xe.prop("--chakra-scale-y"),scale:Xe.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:Xe.degreeT("--chakra-rotate")},Rpe={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:Xe.prop("transitionDuration","transition.duration"),transitionProperty:Xe.prop("transitionProperty","transition.property"),transitionTimingFunction:Xe.prop("transitionTimingFunction","transition.easing")},kpe={fontFamily:Xe.prop("fontFamily","fonts"),fontSize:Xe.prop("fontSize","fontSizes",Er.px),fontWeight:Xe.prop("fontWeight","fontWeights"),lineHeight:Xe.prop("lineHeight","lineHeights"),letterSpacing:Xe.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(t){if(t===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},Ipe={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:Xe.spaceT("scrollMargin"),scrollMarginTop:Xe.spaceT("scrollMarginTop"),scrollMarginBottom:Xe.spaceT("scrollMarginBottom"),scrollMarginLeft:Xe.spaceT("scrollMarginLeft"),scrollMarginRight:Xe.spaceT("scrollMarginRight"),scrollMarginX:Xe.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:Xe.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:Xe.spaceT("scrollPadding"),scrollPaddingTop:Xe.spaceT("scrollPaddingTop"),scrollPaddingBottom:Xe.spaceT("scrollPaddingBottom"),scrollPaddingLeft:Xe.spaceT("scrollPaddingLeft"),scrollPaddingRight:Xe.spaceT("scrollPaddingRight"),scrollPaddingX:Xe.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:Xe.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function wq(t){return us(t)&&t.reference?t.reference:String(t)}var tT=(t,...e)=>e.map(wq).join(` ${t} `).replace(/calc/g,""),tU=(...t)=>`calc(${tT("+",...t)})`,nU=(...t)=>`calc(${tT("-",...t)})`,xk=(...t)=>`calc(${tT("*",...t)})`,rU=(...t)=>`calc(${tT("/",...t)})`,iU=t=>{const e=wq(t);return e!=null&&!Number.isNaN(parseFloat(e))?String(e).startsWith("-")?String(e).slice(1):`-${e}`:xk(e,-1)},np=Object.assign(t=>({add:(...e)=>np(tU(t,...e)),subtract:(...e)=>np(nU(t,...e)),multiply:(...e)=>np(xk(t,...e)),divide:(...e)=>np(rU(t,...e)),negate:()=>np(iU(t)),toString:()=>t.toString()}),{add:tU,subtract:nU,multiply:xk,divide:rU,negate:iU});function Fpe(t,e="-"){return t.replace(/\s+/g,e)}function Ope(t){const e=Fpe(t.toString());return Lpe(Npe(e))}function Npe(t){return t.includes("\\.")?t:!Number.isInteger(parseFloat(t.toString()))?t.replace(".","\\."):t}function Lpe(t){return t.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}function Bpe(t,e=""){return[e,t].filter(Boolean).join("-")}function jpe(t,e){return`var(${t}${e?`, ${e}`:""})`}function Upe(t,e=""){return Ope(`--${Bpe(t,e)}`)}function kn(t,e,n){const r=Upe(t,n);return{variable:r,reference:jpe(r,e)}}function zpe(t,e){const n={};for(const r of e){if(Array.isArray(r)){const[i,o]=r;n[i]=kn(`${t}-${i}`,o);continue}n[r]=kn(`${t}-${r}`)}return n}function Vpe(t){const e=t==null?0:t.length;return e?t[e-1]:void 0}function Wpe(t){const e=parseFloat(t.toString()),n=t.toString().replace(String(e),"");return{unitless:!n,value:e,unit:n}}function bk(t){if(t==null)return t;const{unitless:e}=Wpe(t);return e||typeof t=="number"?`${t}px`:t}var Sq=(t,e)=>parseInt(t[1],10)>parseInt(e[1],10)?1:-1,oN=t=>Object.fromEntries(Object.entries(t).sort(Sq));function oU(t){const e=oN(t);return Object.assign(Object.values(e),e)}function $pe(t){const e=Object.keys(oN(t));return new Set(e)}function sU(t){var e;if(!t)return t;t=(e=bk(t))!=null?e:t;const n=-.02;return typeof t=="number"?`${t+n}`:t.replace(/(\d+\.?\d*)/u,r=>`${parseFloat(r)+n}`)}function Dy(t,e){const n=["@media screen"];return t&&n.push("and",`(min-width: ${bk(t)})`),e&&n.push("and",`(max-width: ${bk(e)})`),n.join(" ")}function Hpe(t){var e;if(!t)return null;t.base=(e=t.base)!=null?e:"0px";const n=oU(t),r=Object.entries(t).sort(Sq).map(([s,a],l,c)=>{var u;let[,d]=(u=c[l+1])!=null?u:[];return d=parseFloat(d)>0?sU(d):void 0,{_minW:sU(a),breakpoint:s,minW:a,maxW:d,maxWQuery:Dy(null,d),minWQuery:Dy(a),minMaxQuery:Dy(a,d)}}),i=$pe(t),o=Array.from(i.values());return{keys:i,normalized:n,isResponsive(s){const a=Object.keys(s);return a.length>0&&a.every(l=>i.has(l))},asObject:oN(t),asArray:oU(t),details:r,get(s){return r.find(a=>a.breakpoint===s)},media:[null,...n.map(s=>Dy(s)).slice(1)],toArrayValue(s){if(!us(s))throw new Error("toArrayValue: value must be an object");const a=o.map(l=>{var c;return(c=s[l])!=null?c:null});for(;Vpe(a)===null;)a.pop();return a},toObjectValue(s){if(!Array.isArray(s))throw new Error("toObjectValue: value must be an array");return s.reduce((a,l,c)=>{const u=o[c];return u!=null&&l!=null&&(a[u]=l),a},{})}}}var Lo={hover:(t,e)=>`${t}:hover ${e}, ${t}[data-hover] ${e}`,focus:(t,e)=>`${t}:focus ${e}, ${t}[data-focus] ${e}`,focusVisible:(t,e)=>`${t}:focus-visible ${e}`,focusWithin:(t,e)=>`${t}:focus-within ${e}`,active:(t,e)=>`${t}:active ${e}, ${t}[data-active] ${e}`,disabled:(t,e)=>`${t}:disabled ${e}, ${t}[data-disabled] ${e}`,invalid:(t,e)=>`${t}:invalid ${e}, ${t}[data-invalid] ${e}`,checked:(t,e)=>`${t}:checked ${e}, ${t}[data-checked] ${e}`,placeholderShown:(t,e)=>`${t}:placeholder-shown ${e}`},Kd=t=>_q(e=>t(e,"&"),"[role=group]","[data-group]",".group"),Pu=t=>_q(e=>t(e,"~ &"),"[data-peer]",".peer"),_q=(t,...e)=>e.map(t).join(", "),nT={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:Kd(Lo.hover),_peerHover:Pu(Lo.hover),_groupFocus:Kd(Lo.focus),_peerFocus:Pu(Lo.focus),_groupFocusVisible:Kd(Lo.focusVisible),_peerFocusVisible:Pu(Lo.focusVisible),_groupActive:Kd(Lo.active),_peerActive:Pu(Lo.active),_groupDisabled:Kd(Lo.disabled),_peerDisabled:Pu(Lo.disabled),_groupInvalid:Kd(Lo.invalid),_peerInvalid:Pu(Lo.invalid),_groupChecked:Kd(Lo.checked),_peerChecked:Pu(Lo.checked),_groupFocusWithin:Kd(Lo.focusWithin),_peerFocusWithin:Pu(Lo.focusWithin),_peerPlaceholderShown:Pu(Lo.placeholderShown),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]"},Eq=Object.keys(nT);function aU(t,e){return kn(String(t).replace(/\./g,"-"),void 0,e)}function Gpe(t,e){let n={};const r={};for(const[i,o]of Object.entries(t)){const{isSemantic:s,value:a}=o,{variable:l,reference:c}=aU(i,e==null?void 0:e.cssVarPrefix);if(!s){if(i.startsWith("space")){const f=i.split("."),[p,...b]=f,v=`${p}.-${b.join(".")}`,m=np.negate(a),g=np.negate(c);r[v]={value:m,var:l,varRef:g}}n[l]=a,r[i]={value:a,var:l,varRef:c};continue}const u=f=>{const b=[String(i).split(".")[0],f].join(".");if(!t[b])return f;const{reference:m}=aU(b,e==null?void 0:e.cssVarPrefix);return m},d=us(a)?a:{default:a};n=hl(n,Object.entries(d).reduce((f,[p,b])=>{var v,m;if(!b)return f;const g=u(`${b}`);if(p==="default")return f[l]=g,f;const x=(m=(v=nT)==null?void 0:v[p])!=null?m:p;return f[x]={[l]:g},f},{})),r[i]={value:c,var:l,varRef:c}}return{cssVars:n,cssMap:r}}function qpe(t,e=[]){const n=Object.assign({},t);for(const r of e)r in n&&delete n[r];return n}function Kpe(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Ype(t){return typeof t=="object"&&t!=null&&!Array.isArray(t)}function lU(t,e,n={}){const{stop:r,getKey:i}=n;function o(s,a=[]){var l;if(Ype(s)||Array.isArray(s)){const c={};for(const[u,d]of Object.entries(s)){const f=(l=i==null?void 0:i(u))!=null?l:u,p=[...a,f];if(r!=null&&r(s,p))return e(s,a);c[f]=o(d,p)}return c}return e(s,a)}return o(t)}var Xpe=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function Qpe(t){return Kpe(t,Xpe)}function Zpe(t){return t.semanticTokens}function Jpe(t){const o=t,{__cssMap:e,__cssVars:n,__breakpoints:r}=o;return Tt(o,["__cssMap","__cssVars","__breakpoints"])}var eme=t=>Eq.includes(t)||t==="default";function tme({tokens:t,semanticTokens:e}){const n={};return lU(t,(r,i)=>{r!=null&&(n[i.join(".")]={isSemantic:!1,value:r})}),lU(e,(r,i)=>{r!=null&&(n[i.join(".")]={isSemantic:!0,value:r})},{stop:r=>Object.keys(r).every(eme)}),n}function nme(t){var e;const n=Jpe(t),r=Qpe(n),i=Zpe(n),o=tme({tokens:r,semanticTokens:i}),s=(e=n.config)==null?void 0:e.cssVarPrefix,{cssMap:a,cssVars:l}=Gpe(o,{cssVarPrefix:s});return Object.assign(n,{__cssVars:B(B({},{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"}),l),__cssMap:a,__breakpoints:Hpe(n.breakpoints)}),n}var sN=hl({},W_,Vr,ype,aC,tl,xpe,Mpe,bpe,bq,Tpe,cx,yk,yi,Ipe,kpe,Ppe,Dpe,wpe,Rpe),rme=Object.assign({},yi,tl,aC,bq,cx),Cq=Object.keys(rme),ime=[...Object.keys(sN),...Eq],ome=B(B({},sN),nT),sme=t=>t in ome,ame=t=>e=>{if(!e.__breakpoints)return t;const{isResponsive:n,toArrayValue:r,media:i}=e.__breakpoints,o={};for(const s in t){let a=Uc(t[s],e);if(a==null)continue;if(a=us(a)&&n(a)?r(a):a,!Array.isArray(a)){o[s]=a;continue}const l=a.slice(0,i.length).length;for(let c=0;c<l;c+=1){const u=i==null?void 0:i[c];if(!u){o[s]=a[c];continue}o[u]=o[u]||{},a[c]!=null&&(o[u][s]=a[c])}}return o};function lme(t){const e=[];let n="",r=!1;for(let i=0;i<t.length;i++){const o=t[i];o==="("?(r=!0,n+=o):o===")"?(r=!1,n+=o):o===","&&!r?(e.push(n),n=""):n+=o}return n=n.trim(),n&&e.push(n),e}function cme(t){return/^var\(--.+\)$/.test(t)}var ume=(t,e)=>t.startsWith("--")&&typeof e=="string"&&!cme(e),dme=(t,e)=>{var n,r;if(e==null)return e;const i=l=>{var c,u;return(u=(c=t.__cssMap)==null?void 0:c[l])==null?void 0:u.varRef},o=l=>{var c;return(c=i(l))!=null?c:l},[s,a]=lme(e);return e=(r=(n=i(s))!=null?n:o(a))!=null?r:o(e),e};function fme(t){const{configs:e={},pseudos:n={},theme:r}=t,i=(o,s=!1)=>{var a,l,c;const u=Uc(o,r),d=ame(u)(r);let f={};for(let p in d){const b=d[p];let v=Uc(b,r);p in n&&(p=n[p]),ume(p,v)&&(v=dme(r,v));let m=e[p];if(m===!0&&(m={property:p}),us(v)){f[p]=(a=f[p])!=null?a:{},f[p]=hl({},f[p],i(v,!0));continue}let g=(c=(l=m==null?void 0:m.transform)==null?void 0:l.call(m,v,r,u))!=null?c:v;g=m!=null&&m.processResult?i(g,!0):g;const x=Uc(m==null?void 0:m.property,r);if(!s&&(m!=null&&m.static)){const w=Uc(m.static,r);f=hl({},f,w)}if(x&&Array.isArray(x)){for(const w of x)f[w]=g;continue}if(x){x==="&"&&us(g)?f=hl({},f,g):f[x]=g;continue}if(us(g)){f=hl({},f,g);continue}f[p]=g}return f};return i}var Aq=t=>e=>fme({theme:e,pseudos:nT,configs:sN})(t);function mi(t){return{definePartsStyle(e){return e},defineMultiStyleConfig(e){return B({parts:t},e)}}}function hme(t,e){if(Array.isArray(t))return t;if(us(t))return e(t);if(t!=null)return[t]}function pme(t,e){for(let n=e+1;n<t.length;n++)if(t[n]!=null)return n;return-1}function mme(t){const e=t.__breakpoints;return function(r,i,o,s){var a,l;if(!e)return;const c={},u=hme(o,e.toArrayValue);if(!u)return c;const d=u.length,f=d===1,p=!!r.parts;for(let b=0;b<d;b++){const v=e.details[b],m=e.details[pme(u,b)],g=Dy(v.minW,m==null?void 0:m._minW),x=Uc((a=r[i])==null?void 0:a[u[b]],s);if(x){if(p){(l=r.parts)==null||l.forEach(w=>{hl(c,{[w]:f?x[w]:{[g]:x[w]}})});continue}if(!p){f?hl(c,x):c[g]=x;continue}c[g]=x}}return c}}function gme(t){return e=>{var n;const{variant:r,size:i,theme:o}=e,s=mme(o);return hl({},Uc((n=t.baseStyle)!=null?n:{},e),s(t,"sizes",i,e),s(t,"variants",r,e))}}function vme(t,e,n){var r,i,o;return(o=(i=(r=t.__cssMap)==null?void 0:r[`${e}.${n}`])==null?void 0:i.varRef)!=null?o:n}function di(t){return qpe(t,["styleConfig","size","variant","colorScheme"])}var yme=["borders","breakpoints","colors","components","config","direction","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","shadows","sizes","space","styles","transition","zIndices"];function xme(t){return us(t)?yme.every(e=>Object.prototype.hasOwnProperty.call(t,e)):!1}var bme={common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},wme={"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},Sme={"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},_me={property:bme,easing:wme,duration:Sme},Eme=_me,Cme={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},Ame=Cme,Tme={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},Mme=Tme,Pme={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},Dme=Pme,Rme={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},kme=Rme,Ime={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},Fme=Ime,Ome={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},Nme=Ome,Lme={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},Bme=Lme,jme={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},Tq=jme,Mq={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},Ume={max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch"},zme={sm:"640px",md:"768px",lg:"1024px",xl:"1280px"},Vme=oe(B(B({},Mq),Ume),{container:zme}),Pq=Vme,Wme=oe(B({breakpoints:Dme,zIndices:Ame,radii:Fme,blur:Bme,colors:kme},Tq),{sizes:Pq,shadows:Nme,space:Mq,borders:Mme,transition:Eme}),{defineMultiStyleConfig:$me,definePartsStyle:Ry}=mi(["stepper","step","title","description","indicator","separator","icon","number"]),zu=kn("stepper-indicator-size"),kg=kn("stepper-icon-size"),Ig=kn("stepper-title-font-size"),ky=kn("stepper-description-font-size"),ty=kn("stepper-accent-color"),Hme=Ry(({colorScheme:t})=>({stepper:{display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"},[ty.variable]:`colors.${t}.500`,_dark:{[ty.variable]:`colors.${t}.200`}},title:{fontSize:Ig.reference,fontWeight:"medium"},description:{fontSize:ky.reference,color:"chakra-subtle-text"},number:{fontSize:Ig.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:kg.reference,height:kg.reference},indicator:{flexShrink:0,borderRadius:"full",width:zu.reference,height:zu.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:ty.reference},"&[data-status=complete]":{bg:ty.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:ty.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:`calc(100% - ${zu.reference} - 8px)`,top:`calc(${zu.reference} + 4px)`,insetStart:`calc(${zu.reference} / 2 - 1px)`}}})),Gme=$me({baseStyle:Hme,sizes:{xs:Ry({stepper:{[zu.variable]:"sizes.4",[kg.variable]:"sizes.3",[Ig.variable]:"fontSizes.xs",[ky.variable]:"fontSizes.xs"}}),sm:Ry({stepper:{[zu.variable]:"sizes.6",[kg.variable]:"sizes.4",[Ig.variable]:"fontSizes.sm",[ky.variable]:"fontSizes.xs"}}),md:Ry({stepper:{[zu.variable]:"sizes.8",[kg.variable]:"sizes.5",[Ig.variable]:"fontSizes.md",[ky.variable]:"fontSizes.sm"}}),lg:Ry({stepper:{[zu.variable]:"sizes.10",[kg.variable]:"sizes.6",[Ig.variable]:"fontSizes.lg",[ky.variable]:"fontSizes.md"}})},defaultProps:{size:"md",colorScheme:"blue"}});function Gr(t,e={}){let n=!1;function r(){if(!n){n=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}function i(...u){r();for(const d of u)e[d]=l(d);return Gr(t,e)}function o(...u){for(const d of u)d in e||(e[d]=l(d));return Gr(t,e)}function s(){return Object.fromEntries(Object.entries(e).map(([d,f])=>[d,f.selector]))}function a(){return Object.fromEntries(Object.entries(e).map(([d,f])=>[d,f.className]))}function l(u){const p=`chakra-${(["container","root"].includes(u!=null?u:"")?[t]:[t,u]).filter(Boolean).join("__")}`;return{className:p,selector:`.${p}`,toString:()=>u}}return{parts:i,toPart:l,extend:o,selectors:s,classnames:a,get keys(){return Object.keys(e)},__type:{}}}var qme=Gr("accordion").parts("root","container","button","panel").extend("icon"),Kme=Gr("alert").parts("title","description","container").extend("icon","spinner"),Yme=Gr("avatar").parts("label","badge","container").extend("excessLabel","group"),Xme=Gr("breadcrumb").parts("link","item","container").extend("separator");Gr("button").parts();var Qme=Gr("checkbox").parts("control","icon","container").extend("label");Gr("progress").parts("track","filledTrack").extend("label");var Zme=Gr("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),Jme=Gr("editable").parts("preview","input","textarea"),ege=Gr("form").parts("container","requiredIndicator","helperText"),tge=Gr("formError").parts("text","icon"),nge=Gr("input").parts("addon","field","element","group"),rge=Gr("list").parts("container","item","icon"),ige=Gr("menu").parts("button","list","item").extend("groupTitle","icon","command","divider"),oge=Gr("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),sge=Gr("numberinput").parts("root","field","stepperGroup","stepper");Gr("pininput").parts("field");var age=Gr("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton"),lge=Gr("progress").parts("label","filledTrack","track"),cge=Gr("radio").parts("container","control","label"),uge=Gr("select").parts("field","icon"),dge=Gr("slider").parts("container","track","thumb","filledTrack","mark"),fge=Gr("stat").parts("container","label","helpText","number","icon"),hge=Gr("switch").parts("container","track","thumb","label"),pge=Gr("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),mge=Gr("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),gge=Gr("tag").parts("container","label","closeButton"),vge=Gr("card").parts("container","header","body","footer");Gr("stepper").parts("stepper","step","title","description","indicator","separator","icon","number");function fp(t,e,n){return Math.min(Math.max(t,n),e)}class yge extends Error{constructor(e){super(`Failed to parse color: "${e}"`)}}var Iy=yge;function aN(t){if(typeof t!="string")throw new Iy(t);if(t.trim().toLowerCase()==="transparent")return[0,0,0,0];let e=t.trim();e=Age.test(t)?wge(t):t;const n=Sge.exec(e);if(n){const s=Array.from(n).slice(1);return[...s.slice(0,3).map(a=>parseInt(db(a,2),16)),parseInt(db(s[3]||"f",2),16)/255]}const r=_ge.exec(e);if(r){const s=Array.from(r).slice(1);return[...s.slice(0,3).map(a=>parseInt(a,16)),parseInt(s[3]||"ff",16)/255]}const i=Ege.exec(e);if(i){const s=Array.from(i).slice(1);return[...s.slice(0,3).map(a=>parseInt(a,10)),parseFloat(s[3]||"1")]}const o=Cge.exec(e);if(o){const[s,a,l,c]=Array.from(o).slice(1).map(parseFloat);if(fp(0,100,a)!==a)throw new Iy(t);if(fp(0,100,l)!==l)throw new Iy(t);return[...Tge(s,a,l),Number.isNaN(c)?1:c]}throw new Iy(t)}function xge(t){let e=5381,n=t.length;for(;n;)e=e*33^t.charCodeAt(--n);return(e>>>0)%2341}const cU=t=>parseInt(t.replace(/_/g,""),36),bge="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((t,e)=>{const n=cU(e.substring(0,3)),r=cU(e.substring(3)).toString(16);let i="";for(let o=0;o<6-r.length;o++)i+="0";return t[n]=`${i}${r}`,t},{});function wge(t){const e=t.toLowerCase().trim(),n=bge[xge(e)];if(!n)throw new Iy(t);return`#${n}`}const db=(t,e)=>Array.from(Array(e)).map(()=>t).join(""),Sge=new RegExp(`^#${db("([a-f0-9])",3)}([a-f0-9])?$`,"i"),_ge=new RegExp(`^#${db("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),Ege=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${db(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),Cge=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,Age=/^[a-z]+$/i,uU=t=>Math.round(t*255),Tge=(t,e,n)=>{let r=n/100;if(e===0)return[r,r,r].map(uU);const i=(t%360+360)%360/60,o=(1-Math.abs(2*r-1))*(e/100),s=o*(1-Math.abs(i%2-1));let a=0,l=0,c=0;i>=0&&i<1?(a=o,l=s):i>=1&&i<2?(a=s,l=o):i>=2&&i<3?(l=o,c=s):i>=3&&i<4?(l=s,c=o):i>=4&&i<5?(a=s,c=o):i>=5&&i<6&&(a=o,c=s);const u=r-o/2,d=a+u,f=l+u,p=c+u;return[d,f,p].map(uU)};function Mge(t,e,n,r){return`rgba(${fp(0,255,t).toFixed()}, ${fp(0,255,e).toFixed()}, ${fp(0,255,n).toFixed()}, ${parseFloat(fp(0,1,r).toFixed(3))})`}function Pge(t,e){const[n,r,i,o]=aN(t);return Mge(n,r,i,o-e)}function Dge(t){const[e,n,r,i]=aN(t);let o=s=>{const a=fp(0,255,s).toString(16);return a.length===1?`0${a}`:a};return`#${o(e)}${o(n)}${o(r)}${i<1?o(Math.round(i*255)):""}`}function Rge(t,e,n,r,i){for(e=e.split?e.split("."):e,r=0;r<e.length;r++)t=t?t[e[r]]:i;return t===i?n:t}var kge=t=>Object.keys(t).length===0,Rs=(t,e,n)=>{const r=Rge(t,`colors.${e}`,e);try{return Dge(r),r}catch(i){return n!=null?n:"#000000"}},Ige=t=>{const[e,n,r]=aN(t);return(e*299+n*587+r*114)/1e3},Fge=t=>e=>{const n=Rs(e,t);return Ige(n)<128?"dark":"light"},Oge=t=>e=>Fge(t)(e)==="dark",Mv=(t,e)=>n=>{const r=Rs(n,t);return Pge(r,1-e)};function dU(t="1rem",e="rgba(255, 255, 255, 0.15)"){return{backgroundImage:`linear-gradient(
    45deg,
    ${e} 25%,
    transparent 25%,
    transparent 50%,
    ${e} 50%,
    ${e} 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:`${t} ${t}`}}var Nge=()=>`#${Math.floor(Math.random()*16777215).toString(16).padEnd(6,"0")}`;function Lge(t){const e=Nge();return!t||kge(t)?e:t.string&&t.colors?jge(t.string,t.colors):t.string&&!t.colors?Bge(t.string):t.colors&&!t.string?Uge(t.colors):e}function Bge(t){let e=0;if(t.length===0)return e.toString();for(let r=0;r<t.length;r+=1)e=t.charCodeAt(r)+((e<<5)-e),e=e&e;let n="#";for(let r=0;r<3;r+=1){const i=e>>r*8&255;n+=`00${i.toString(16)}`.substr(-2)}return n}function jge(t,e){let n=0;if(t.length===0)return e[0];for(let r=0;r<t.length;r+=1)n=t.charCodeAt(r)+((n<<5)-n),n=n&n;return n=(n%e.length+e.length)%e.length,e[n]}function Uge(t){return t[Math.floor(Math.random()*t.length)]}function Rn(t,e){return n=>n.colorMode==="dark"?e:t}function lN(t){const{orientation:e,vertical:n,horizontal:r}=t;return e?e==="vertical"?n:r:{}}function Dq(t){return us(t)&&t.reference?t.reference:String(t)}var rT=(t,...e)=>e.map(Dq).join(` ${t} `).replace(/calc/g,""),fU=(...t)=>`calc(${rT("+",...t)})`,hU=(...t)=>`calc(${rT("-",...t)})`,wk=(...t)=>`calc(${rT("*",...t)})`,pU=(...t)=>`calc(${rT("/",...t)})`,mU=t=>{const e=Dq(t);return e!=null&&!Number.isNaN(parseFloat(e))?String(e).startsWith("-")?String(e).slice(1):`-${e}`:wk(e,-1)},Vu=Object.assign(t=>({add:(...e)=>Vu(fU(t,...e)),subtract:(...e)=>Vu(hU(t,...e)),multiply:(...e)=>Vu(wk(t,...e)),divide:(...e)=>Vu(pU(t,...e)),negate:()=>Vu(mU(t)),toString:()=>t.toString()}),{add:fU,subtract:hU,multiply:wk,divide:pU,negate:mU});function zge(t){return!Number.isInteger(parseFloat(t.toString()))}function Vge(t,e="-"){return t.replace(/\s+/g,e)}function Rq(t){const e=Vge(t.toString());return e.includes("\\.")?t:zge(t)?e.replace(".","\\."):t}function Wge(t,e=""){return[e,Rq(t)].filter(Boolean).join("-")}function $ge(t,e){return`var(${Rq(t)}${e?`, ${e}`:""})`}function Hge(t,e=""){return`--${Wge(t,e)}`}function Ao(t,e){const n=Hge(t,void 0);return{variable:n,reference:$ge(n,Gge(void 0))}}function Gge(t){return t==null?void 0:t.reference}var{defineMultiStyleConfig:qge,definePartsStyle:$_}=mi(hge.keys),ux=Ao("switch-track-width"),Sp=Ao("switch-track-height"),XM=Ao("switch-track-diff"),Kge=Vu.subtract(ux,Sp),Sk=Ao("switch-thumb-x"),ny=Ao("switch-bg"),Yge=t=>{const{colorScheme:e}=t;return{borderRadius:"full",p:"0.5",width:[ux.reference],height:[Sp.reference],transitionProperty:"common",transitionDuration:"fast",[ny.variable]:"colors.gray.300",_dark:{[ny.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[ny.variable]:`colors.${e}.500`,_dark:{[ny.variable]:`colors.${e}.200`}},bg:ny.reference}},Xge={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[Sp.reference],height:[Sp.reference],_checked:{transform:`translateX(${Sk.reference})`}},Qge=$_(t=>({container:{[XM.variable]:Kge,[Sk.variable]:XM.reference,_rtl:{[Sk.variable]:Vu(XM).negate().toString()}},track:Yge(t),thumb:Xge})),Zge={sm:$_({container:{[ux.variable]:"1.375rem",[Sp.variable]:"sizes.3"}}),md:$_({container:{[ux.variable]:"1.875rem",[Sp.variable]:"sizes.4"}}),lg:$_({container:{[ux.variable]:"2.875rem",[Sp.variable]:"sizes.6"}})},Jge=qge({baseStyle:Qge,sizes:Zge,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:eve,definePartsStyle:Jg}=mi(pge.keys),tve=Jg({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),lC={"&[data-is-numeric=true]":{textAlign:"end"}},nve=Jg(t=>{const{colorScheme:e}=t;return{th:B({color:Rn("gray.600","gray.400")(t),borderBottom:"1px",borderColor:Rn(`${e}.100`,`${e}.700`)(t)},lC),td:B({borderBottom:"1px",borderColor:Rn(`${e}.100`,`${e}.700`)(t)},lC),caption:{color:Rn("gray.600","gray.100")(t)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),rve=Jg(t=>{const{colorScheme:e}=t;return{th:B({color:Rn("gray.600","gray.400")(t),borderBottom:"1px",borderColor:Rn(`${e}.100`,`${e}.700`)(t)},lC),td:B({borderBottom:"1px",borderColor:Rn(`${e}.100`,`${e}.700`)(t)},lC),caption:{color:Rn("gray.600","gray.100")(t)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:Rn(`${e}.100`,`${e}.700`)(t)},td:{background:Rn(`${e}.100`,`${e}.700`)(t)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),ive={simple:nve,striped:rve,unstyled:{}},ove={sm:Jg({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:Jg({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:Jg({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},sve=eve({baseStyle:tve,variants:ive,sizes:ove,defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}}),Js=kn("tabs-color"),ec=kn("tabs-bg"),mS=kn("tabs-border-color"),{defineMultiStyleConfig:ave,definePartsStyle:$c}=mi(mge.keys),lve=t=>{const{orientation:e}=t;return{display:e==="vertical"?"flex":"block"}},cve=t=>{const{isFitted:e}=t;return{flex:e?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},uve=t=>{const{align:e="start",orientation:n}=t;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[e],flexDirection:n==="vertical"?"column":"row"}},dve={p:4},fve=$c(t=>({root:lve(t),tab:cve(t),tablist:uve(t),tabpanel:dve})),hve={sm:$c({tab:{py:1,px:4,fontSize:"sm"}}),md:$c({tab:{fontSize:"md",py:2,px:4}}),lg:$c({tab:{fontSize:"lg",py:3,px:4}})},pve=$c(t=>{const{colorScheme:e,orientation:n}=t,r=n==="vertical",i=r?"borderStart":"borderBottom",o=r?"marginStart":"marginBottom";return{tablist:{[i]:"2px solid",borderColor:"inherit"},tab:{[i]:"2px solid",borderColor:"transparent",[o]:"-2px",_selected:{[Js.variable]:`colors.${e}.600`,_dark:{[Js.variable]:`colors.${e}.300`},borderColor:"currentColor"},_active:{[ec.variable]:"colors.gray.200",_dark:{[ec.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:Js.reference,bg:ec.reference}}}),mve=$c(t=>{const{colorScheme:e}=t;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[mS.variable]:"transparent",_selected:{[Js.variable]:`colors.${e}.600`,[mS.variable]:"colors.white",_dark:{[Js.variable]:`colors.${e}.300`,[mS.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:mS.reference},color:Js.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),gve=$c(t=>{const{colorScheme:e}=t;return{tab:{border:"1px solid",borderColor:"inherit",[ec.variable]:"colors.gray.50",_dark:{[ec.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[ec.variable]:"colors.white",[Js.variable]:`colors.${e}.600`,_dark:{[ec.variable]:"colors.gray.800",[Js.variable]:`colors.${e}.300`},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:Js.reference,bg:ec.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),vve=$c(t=>{const{colorScheme:e,theme:n}=t;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:Rs(n,`${e}.700`),bg:Rs(n,`${e}.100`)}}}}),yve=$c(t=>{const{colorScheme:e}=t;return{tab:{borderRadius:"full",fontWeight:"semibold",[Js.variable]:"colors.gray.600",_dark:{[Js.variable]:"inherit"},_selected:{[Js.variable]:"colors.white",[ec.variable]:`colors.${e}.600`,_dark:{[Js.variable]:"colors.gray.800",[ec.variable]:`colors.${e}.300`}},color:Js.reference,bg:ec.reference}}}),xve=$c({}),bve={line:pve,enclosed:mve,"enclosed-colored":gve,"soft-rounded":vve,"solid-rounded":yve,unstyled:xve},wve=ave({baseStyle:fve,sizes:hve,variants:bve,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),to=zpe("badge",["bg","color","shadow"]),Sve={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:to.bg.reference,color:to.color.reference,boxShadow:to.shadow.reference},_ve=t=>{const{colorScheme:e,theme:n}=t,r=Mv(`${e}.500`,.6)(n);return{[to.bg.variable]:`colors.${e}.500`,[to.color.variable]:"colors.white",_dark:{[to.bg.variable]:r,[to.color.variable]:"colors.whiteAlpha.800"}}},Eve=t=>{const{colorScheme:e,theme:n}=t,r=Mv(`${e}.200`,.16)(n);return{[to.bg.variable]:`colors.${e}.100`,[to.color.variable]:`colors.${e}.800`,_dark:{[to.bg.variable]:r,[to.color.variable]:`colors.${e}.200`}}},Cve=t=>{const{colorScheme:e,theme:n}=t,r=Mv(`${e}.200`,.8)(n);return{[to.color.variable]:`colors.${e}.500`,_dark:{[to.color.variable]:r},[to.shadow.variable]:`inset 0 0 0px 1px ${to.color.reference}`}},Ave={solid:_ve,subtle:Eve,outline:Cve},dx={baseStyle:Sve,variants:Ave,defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:Tve,definePartsStyle:_p}=mi(gge.keys),gU=kn("tag-bg"),vU=kn("tag-color"),QM=kn("tag-shadow"),H_=kn("tag-min-height"),G_=kn("tag-min-width"),q_=kn("tag-font-size"),K_=kn("tag-padding-inline"),Mve={fontWeight:"medium",lineHeight:1.2,outline:0,[vU.variable]:to.color.reference,[gU.variable]:to.bg.reference,[QM.variable]:to.shadow.reference,color:vU.reference,bg:gU.reference,boxShadow:QM.reference,borderRadius:"md",minH:H_.reference,minW:G_.reference,fontSize:q_.reference,px:K_.reference,_focusVisible:{[QM.variable]:"shadows.outline"}},Pve={lineHeight:1.2,overflow:"visible"},Dve={fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}},Rve=_p({container:Mve,label:Pve,closeButton:Dve}),kve={sm:_p({container:{[H_.variable]:"sizes.5",[G_.variable]:"sizes.5",[q_.variable]:"fontSizes.xs",[K_.variable]:"space.2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:_p({container:{[H_.variable]:"sizes.6",[G_.variable]:"sizes.6",[q_.variable]:"fontSizes.sm",[K_.variable]:"space.2"}}),lg:_p({container:{[H_.variable]:"sizes.8",[G_.variable]:"sizes.8",[q_.variable]:"fontSizes.md",[K_.variable]:"space.3"}})},Ive={subtle:_p(t=>{var e;return{container:(e=dx.variants)==null?void 0:e.subtle(t)}}),solid:_p(t=>{var e;return{container:(e=dx.variants)==null?void 0:e.solid(t)}}),outline:_p(t=>{var e;return{container:(e=dx.variants)==null?void 0:e.outline(t)}})},Fve=Tve({variants:Ive,baseStyle:Rve,sizes:kve,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),{definePartsStyle:Gu,defineMultiStyleConfig:Ove}=mi(nge.keys),Fg=kn("input-height"),Og=kn("input-font-size"),Ng=kn("input-padding"),Lg=kn("input-border-radius"),Nve=Gu({addon:{height:Fg.reference,fontSize:Og.reference,px:Ng.reference,borderRadius:Lg.reference},field:{width:"100%",height:Fg.reference,fontSize:Og.reference,px:Ng.reference,borderRadius:Lg.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),Yd={lg:{[Og.variable]:"fontSizes.lg",[Ng.variable]:"space.4",[Lg.variable]:"radii.md",[Fg.variable]:"sizes.12"},md:{[Og.variable]:"fontSizes.md",[Ng.variable]:"space.4",[Lg.variable]:"radii.md",[Fg.variable]:"sizes.10"},sm:{[Og.variable]:"fontSizes.sm",[Ng.variable]:"space.3",[Lg.variable]:"radii.sm",[Fg.variable]:"sizes.8"},xs:{[Og.variable]:"fontSizes.xs",[Ng.variable]:"space.2",[Lg.variable]:"radii.sm",[Fg.variable]:"sizes.6"}},Lve={lg:Gu({field:Yd.lg,group:Yd.lg}),md:Gu({field:Yd.md,group:Yd.md}),sm:Gu({field:Yd.sm,group:Yd.sm}),xs:Gu({field:Yd.xs,group:Yd.xs})};function cN(t){const{focusBorderColor:e,errorBorderColor:n}=t;return{focusBorderColor:e||Rn("blue.500","blue.300")(t),errorBorderColor:n||Rn("red.500","red.300")(t)}}var Bve=Gu(t=>{const{theme:e}=t,{focusBorderColor:n,errorBorderColor:r}=cN(t);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:Rn("gray.300","whiteAlpha.400")(t)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Rs(e,r),boxShadow:`0 0 0 1px ${Rs(e,r)}`},_focusVisible:{zIndex:1,borderColor:Rs(e,n),boxShadow:`0 0 0 1px ${Rs(e,n)}`}},addon:{border:"1px solid",borderColor:Rn("inherit","whiteAlpha.50")(t),bg:Rn("gray.100","whiteAlpha.300")(t)}}}),jve=Gu(t=>{const{theme:e}=t,{focusBorderColor:n,errorBorderColor:r}=cN(t);return{field:{border:"2px solid",borderColor:"transparent",bg:Rn("gray.100","whiteAlpha.50")(t),_hover:{bg:Rn("gray.200","whiteAlpha.100")(t)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Rs(e,r)},_focusVisible:{bg:"transparent",borderColor:Rs(e,n)}},addon:{border:"2px solid",borderColor:"transparent",bg:Rn("gray.100","whiteAlpha.50")(t)}}}),Uve=Gu(t=>{const{theme:e}=t,{focusBorderColor:n,errorBorderColor:r}=cN(t);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Rs(e,r),boxShadow:`0px 1px 0px 0px ${Rs(e,r)}`},_focusVisible:{borderColor:Rs(e,n),boxShadow:`0px 1px 0px 0px ${Rs(e,n)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}}),zve=Gu({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}}),Vve={outline:Bve,filled:jve,flushed:Uve,unstyled:zve},Hr=Ove({baseStyle:Nve,sizes:Lve,variants:Vve,defaultProps:{size:"md",variant:"outline"}}),yU,Wve=oe(B({},(yU=Hr.baseStyle)==null?void 0:yU.field),{paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"}),xU,bU,$ve={outline:t=>{var e,n;return(n=(e=Hr.variants)==null?void 0:e.outline(t).field)!=null?n:{}},flushed:t=>{var e,n;return(n=(e=Hr.variants)==null?void 0:e.flushed(t).field)!=null?n:{}},filled:t=>{var e,n;return(n=(e=Hr.variants)==null?void 0:e.filled(t).field)!=null?n:{}},unstyled:(bU=(xU=Hr.variants)==null?void 0:xU.unstyled.field)!=null?bU:{}},wU,SU,_U,EU,CU,AU,TU,MU,Hve={xs:(SU=(wU=Hr.sizes)==null?void 0:wU.xs.field)!=null?SU:{},sm:(EU=(_U=Hr.sizes)==null?void 0:_U.sm.field)!=null?EU:{},md:(AU=(CU=Hr.sizes)==null?void 0:CU.md.field)!=null?AU:{},lg:(MU=(TU=Hr.sizes)==null?void 0:TU.lg.field)!=null?MU:{}},Gve={baseStyle:Wve,sizes:Hve,variants:$ve,defaultProps:{size:"md",variant:"outline"}},gS=Ao("tooltip-bg"),ZM=Ao("tooltip-fg"),qve=Ao("popper-arrow-bg"),Kve={bg:gS.reference,color:ZM.reference,[gS.variable]:"colors.gray.700",[ZM.variable]:"colors.whiteAlpha.900",_dark:{[gS.variable]:"colors.gray.300",[ZM.variable]:"colors.gray.900"},[qve.variable]:gS.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"},Yve={baseStyle:Kve},{defineMultiStyleConfig:Xve,definePartsStyle:Fy}=mi(lge.keys),Qve=t=>{const{colorScheme:e,theme:n,isIndeterminate:r,hasStripe:i}=t,o=Rn(dU(),dU("1rem","rgba(0,0,0,0.1)"))(t),s=Rn(`${e}.500`,`${e}.200`)(t),a=`linear-gradient(
    to right,
    transparent 0%,
    ${Rs(n,s)} 50%,
    transparent 100%
  )`;return B(B({},!r&&i&&o),r?{bgImage:a}:{bgColor:s})},Zve={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},Jve=t=>({bg:Rn("gray.100","whiteAlpha.300")(t)}),e0e=t=>B({transitionProperty:"common",transitionDuration:"slow"},Qve(t)),t0e=Fy(t=>({label:Zve,filledTrack:e0e(t),track:Jve(t)})),n0e={xs:Fy({track:{h:"1"}}),sm:Fy({track:{h:"2"}}),md:Fy({track:{h:"3"}}),lg:Fy({track:{h:"4"}})},r0e=Xve({sizes:n0e,baseStyle:t0e,defaultProps:{size:"md",colorScheme:"blue"}}),i0e=t=>typeof t=="function";function Is(t,...e){return i0e(t)?t(...e):t}var{definePartsStyle:Y_,defineMultiStyleConfig:o0e}=mi(Qme.keys),fx=kn("checkbox-size"),s0e=t=>{const{colorScheme:e}=t;return{w:fx.reference,h:fx.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:Rn(`${e}.500`,`${e}.200`)(t),borderColor:Rn(`${e}.500`,`${e}.200`)(t),color:Rn("white","gray.900")(t),_hover:{bg:Rn(`${e}.600`,`${e}.300`)(t),borderColor:Rn(`${e}.600`,`${e}.300`)(t)},_disabled:{borderColor:Rn("gray.200","transparent")(t),bg:Rn("gray.200","whiteAlpha.300")(t),color:Rn("gray.500","whiteAlpha.500")(t)}},_indeterminate:{bg:Rn(`${e}.500`,`${e}.200`)(t),borderColor:Rn(`${e}.500`,`${e}.200`)(t),color:Rn("white","gray.900")(t)},_disabled:{bg:Rn("gray.100","whiteAlpha.100")(t),borderColor:Rn("gray.100","transparent")(t)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:Rn("red.500","red.300")(t)}}},a0e={_disabled:{cursor:"not-allowed"}},l0e={userSelect:"none",_disabled:{opacity:.4}},c0e={transitionProperty:"transform",transitionDuration:"normal"},u0e=Y_(t=>({icon:c0e,container:a0e,control:Is(s0e,t),label:l0e})),d0e={sm:Y_({control:{[fx.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:Y_({control:{[fx.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:Y_({control:{[fx.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},cC=o0e({baseStyle:u0e,sizes:d0e,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:f0e,definePartsStyle:X_}=mi(cge.keys),h0e=t=>{var e;const n=(e=Is(cC.baseStyle,t))==null?void 0:e.control;return oe(B({},n),{borderRadius:"full",_checked:oe(B({},n==null?void 0:n._checked),{_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}})})},p0e=X_(t=>{var e,n,r,i;return{label:(n=(e=cC).baseStyle)==null?void 0:n.call(e,t).label,container:(i=(r=cC).baseStyle)==null?void 0:i.call(r,t).container,control:h0e(t)}}),m0e={md:X_({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:X_({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:X_({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},g0e=f0e({baseStyle:p0e,sizes:m0e,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:v0e,definePartsStyle:y0e}=mi(uge.keys),vS=kn("select-bg"),PU,x0e=oe(B({},(PU=Hr.baseStyle)==null?void 0:PU.field),{appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:vS.reference,[vS.variable]:"colors.white",_dark:{[vS.variable]:"colors.gray.700"},"> option, > optgroup":{bg:vS.reference}}),b0e={width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}},w0e=y0e({field:x0e,icon:b0e}),yS={paddingInlineEnd:"8"},DU,RU,kU,IU,FU,OU,NU,LU,S0e={lg:oe(B({},(DU=Hr.sizes)==null?void 0:DU.lg),{field:B(B({},(RU=Hr.sizes)==null?void 0:RU.lg.field),yS)}),md:oe(B({},(kU=Hr.sizes)==null?void 0:kU.md),{field:B(B({},(IU=Hr.sizes)==null?void 0:IU.md.field),yS)}),sm:oe(B({},(FU=Hr.sizes)==null?void 0:FU.sm),{field:B(B({},(OU=Hr.sizes)==null?void 0:OU.sm.field),yS)}),xs:oe(B({},(NU=Hr.sizes)==null?void 0:NU.xs),{field:B(B({},(LU=Hr.sizes)==null?void 0:LU.xs.field),yS),icon:{insetEnd:"1"}})},_0e=v0e({baseStyle:w0e,sizes:S0e,variants:Hr.variants,defaultProps:Hr.defaultProps}),JM=kn("skeleton-start-color"),eP=kn("skeleton-end-color"),E0e={[JM.variable]:"colors.gray.100",[eP.variable]:"colors.gray.400",_dark:{[JM.variable]:"colors.gray.800",[eP.variable]:"colors.gray.600"},background:JM.reference,borderColor:eP.reference,opacity:.7,borderRadius:"sm"},C0e={baseStyle:E0e},tP=kn("skip-link-bg"),A0e={borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[tP.variable]:"colors.white",_dark:{[tP.variable]:"colors.gray.700"},bg:tP.reference}},T0e={baseStyle:A0e},{defineMultiStyleConfig:M0e,definePartsStyle:iT}=mi(dge.keys),fb=kn("slider-thumb-size"),hb=kn("slider-track-size"),yf=kn("slider-bg"),P0e=t=>{const{orientation:e}=t;return B({display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"}},lN({orientation:e,vertical:{h:"100%"},horizontal:{w:"100%"}}))},D0e=t=>{const e=lN({orientation:t.orientation,horizontal:{h:hb.reference},vertical:{w:hb.reference}});return oe(B({},e),{overflow:"hidden",borderRadius:"sm",[yf.variable]:"colors.gray.200",_dark:{[yf.variable]:"colors.whiteAlpha.200"},_disabled:{[yf.variable]:"colors.gray.300",_dark:{[yf.variable]:"colors.whiteAlpha.300"}},bg:yf.reference})},R0e=t=>{const{orientation:e}=t,n=lN({orientation:e,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}});return oe(B({},n),{w:fb.reference,h:fb.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}})},k0e=t=>{const{colorScheme:e}=t;return{width:"inherit",height:"inherit",[yf.variable]:`colors.${e}.500`,_dark:{[yf.variable]:`colors.${e}.200`},bg:yf.reference}},I0e=iT(t=>({container:P0e(t),track:D0e(t),thumb:R0e(t),filledTrack:k0e(t)})),F0e=iT({container:{[fb.variable]:"sizes.4",[hb.variable]:"sizes.1"}}),O0e=iT({container:{[fb.variable]:"sizes.3.5",[hb.variable]:"sizes.1"}}),N0e=iT({container:{[fb.variable]:"sizes.2.5",[hb.variable]:"sizes.0.5"}}),L0e={lg:F0e,md:O0e,sm:N0e},B0e=M0e({baseStyle:I0e,sizes:L0e,defaultProps:{size:"md",colorScheme:"blue"}}),rp=Ao("spinner-size"),j0e={width:[rp.reference],height:[rp.reference]},U0e={xs:{[rp.variable]:"sizes.3"},sm:{[rp.variable]:"sizes.4"},md:{[rp.variable]:"sizes.6"},lg:{[rp.variable]:"sizes.8"},xl:{[rp.variable]:"sizes.12"}},z0e={baseStyle:j0e,sizes:U0e,defaultProps:{size:"md"}},{defineMultiStyleConfig:V0e,definePartsStyle:kq}=mi(fge.keys),W0e={fontWeight:"medium"},$0e={opacity:.8,marginBottom:"2"},H0e={verticalAlign:"baseline",fontWeight:"semibold"},G0e={marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"},q0e=kq({container:{},label:W0e,helpText:$0e,number:H0e,icon:G0e}),K0e={md:kq({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},Y0e=V0e({baseStyle:q0e,sizes:K0e,defaultProps:{size:"md"}}),nP=kn("kbd-bg"),X0e={[nP.variable]:"colors.gray.100",_dark:{[nP.variable]:"colors.whiteAlpha.100"},bg:nP.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"},Q0e={baseStyle:X0e},Z0e={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}},J0e={baseStyle:Z0e},{defineMultiStyleConfig:eye,definePartsStyle:tye}=mi(rge.keys),nye={marginEnd:"2",display:"inline",verticalAlign:"text-bottom"},rye=tye({icon:nye}),iye=eye({baseStyle:rye}),{defineMultiStyleConfig:oye,definePartsStyle:sye}=mi(ige.keys),kc=kn("menu-bg"),rP=kn("menu-shadow"),aye={[kc.variable]:"#fff",[rP.variable]:"shadows.sm",_dark:{[kc.variable]:"colors.gray.700",[rP.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px",bg:kc.reference,boxShadow:rP.reference},lye={py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[kc.variable]:"colors.gray.100",_dark:{[kc.variable]:"colors.whiteAlpha.100"}},_active:{[kc.variable]:"colors.gray.200",_dark:{[kc.variable]:"colors.whiteAlpha.200"}},_expanded:{[kc.variable]:"colors.gray.100",_dark:{[kc.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:kc.reference},cye={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},uye={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},dye={opacity:.6},fye={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6},hye={transitionProperty:"common",transitionDuration:"normal"},pye=sye({button:hye,list:aye,item:lye,groupTitle:cye,icon:uye,command:dye,divider:fye}),mye=oye({baseStyle:pye}),{defineMultiStyleConfig:gye,definePartsStyle:_k}=mi(oge.keys),iP=kn("modal-bg"),oP=kn("modal-shadow"),vye={bg:"blackAlpha.600",zIndex:"modal"},yye=t=>{const{isCentered:e,scrollBehavior:n}=t;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:e?"center":"flex-start",overflow:n==="inside"?"hidden":"auto",overscrollBehaviorY:"none"}},xye=t=>{const{isCentered:e,scrollBehavior:n}=t;return{borderRadius:"md",color:"inherit",my:e?"auto":"16",mx:e?"auto":void 0,zIndex:"modal",maxH:n==="inside"?"calc(100% - 7.5rem)":void 0,[iP.variable]:"colors.white",[oP.variable]:"shadows.lg",_dark:{[iP.variable]:"colors.gray.700",[oP.variable]:"shadows.dark-lg"},bg:iP.reference,boxShadow:oP.reference}},bye={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},wye={position:"absolute",top:"2",insetEnd:"3"},Sye=t=>{const{scrollBehavior:e}=t;return{px:"6",py:"2",flex:"1",overflow:e==="inside"?"auto":void 0}},_ye={px:"6",py:"4"},Eye=_k(t=>({overlay:vye,dialogContainer:Is(yye,t),dialog:Is(xye,t),header:bye,closeButton:wye,body:Is(Sye,t),footer:_ye}));function $l(t){return _k(t==="full"?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:t}})}var Cye={xs:$l("xs"),sm:$l("sm"),md:$l("md"),lg:$l("lg"),xl:$l("xl"),"2xl":$l("2xl"),"3xl":$l("3xl"),"4xl":$l("4xl"),"5xl":$l("5xl"),"6xl":$l("6xl"),full:$l("full")},Aye=gye({baseStyle:Eye,sizes:Cye,defaultProps:{size:"md"}}),{defineMultiStyleConfig:Tye,definePartsStyle:Iq}=mi(sge.keys),uN=Ao("number-input-stepper-width"),Fq=Ao("number-input-input-padding"),Mye=Vu(uN).add("0.5rem").toString(),sP=Ao("number-input-bg"),aP=Ao("number-input-color"),lP=Ao("number-input-border-color"),Pye={[uN.variable]:"sizes.6",[Fq.variable]:Mye},Dye=t=>{var e,n;return(n=(e=Is(Hr.baseStyle,t))==null?void 0:e.field)!=null?n:{}},Rye={width:uN.reference},kye={borderStart:"1px solid",borderStartColor:lP.reference,color:aP.reference,bg:sP.reference,[aP.variable]:"colors.chakra-body-text",[lP.variable]:"colors.chakra-border-color",_dark:{[aP.variable]:"colors.whiteAlpha.800",[lP.variable]:"colors.whiteAlpha.300"},_active:{[sP.variable]:"colors.gray.200",_dark:{[sP.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},Iye=Iq(t=>{var e;return{root:Pye,field:(e=Is(Dye,t))!=null?e:{},stepperGroup:Rye,stepper:kye}});function xS(t){var e,n,r;const i=(e=Hr.sizes)==null?void 0:e[t],o={lg:"md",md:"md",sm:"sm",xs:"sm"},s=(r=(n=i.field)==null?void 0:n.fontSize)!=null?r:"md",a=Tq.fontSizes[s];return Iq({field:oe(B({},i.field),{paddingInlineEnd:Fq.reference,verticalAlign:"top"}),stepper:{fontSize:Vu(a).multiply(.75).toString(),_first:{borderTopEndRadius:o[t]},_last:{borderBottomEndRadius:o[t],mt:"-1px",borderTopWidth:1}}})}var Fye={xs:xS("xs"),sm:xS("sm"),md:xS("md"),lg:xS("lg")},Oye=Tye({baseStyle:Iye,sizes:Fye,variants:Hr.variants,defaultProps:Hr.defaultProps}),BU,Nye=oe(B({},(BU=Hr.baseStyle)==null?void 0:BU.field),{textAlign:"center"}),Lye={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},jU,UU,Bye={outline:t=>{var e,n,r;return(r=(n=Is((e=Hr.variants)==null?void 0:e.outline,t))==null?void 0:n.field)!=null?r:{}},flushed:t=>{var e,n,r;return(r=(n=Is((e=Hr.variants)==null?void 0:e.flushed,t))==null?void 0:n.field)!=null?r:{}},filled:t=>{var e,n,r;return(r=(n=Is((e=Hr.variants)==null?void 0:e.filled,t))==null?void 0:n.field)!=null?r:{}},unstyled:(UU=(jU=Hr.variants)==null?void 0:jU.unstyled.field)!=null?UU:{}},jye={baseStyle:Nye,sizes:Lye,variants:Bye,defaultProps:Hr.defaultProps},{defineMultiStyleConfig:Uye,definePartsStyle:zye}=mi(age.keys),bS=Ao("popper-bg"),Vye=Ao("popper-arrow-bg"),zU=Ao("popper-arrow-shadow-color"),Wye={zIndex:10},$ye={[bS.variable]:"colors.white",bg:bS.reference,[Vye.variable]:bS.reference,[zU.variable]:"colors.gray.200",_dark:{[bS.variable]:"colors.gray.700",[zU.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},Hye={px:3,py:2,borderBottomWidth:"1px"},Gye={px:3,py:2},qye={px:3,py:2,borderTopWidth:"1px"},Kye={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},Yye=zye({popper:Wye,content:$ye,header:Hye,body:Gye,footer:qye,closeButton:Kye}),Xye=Uye({baseStyle:Yye}),{definePartsStyle:Ek,defineMultiStyleConfig:Qye}=mi(Zme.keys),cP=kn("drawer-bg"),uP=kn("drawer-box-shadow");function $m(t){return Ek(t==="full"?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:t}})}var Zye={bg:"blackAlpha.600",zIndex:"modal"},Jye={display:"flex",zIndex:"modal",justifyContent:"center"},exe=t=>{const{isFullHeight:e}=t;return oe(B({},e&&{height:"100vh"}),{zIndex:"modal",maxH:"100vh",color:"inherit",[cP.variable]:"colors.white",[uP.variable]:"shadows.lg",_dark:{[cP.variable]:"colors.gray.700",[uP.variable]:"shadows.dark-lg"},bg:cP.reference,boxShadow:uP.reference})},txe={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},nxe={position:"absolute",top:"2",insetEnd:"3"},rxe={px:"6",py:"2",flex:"1",overflow:"auto"},ixe={px:"6",py:"4"},oxe=Ek(t=>({overlay:Zye,dialogContainer:Jye,dialog:Is(exe,t),header:txe,closeButton:nxe,body:rxe,footer:ixe})),sxe={xs:$m("xs"),sm:$m("md"),md:$m("lg"),lg:$m("2xl"),xl:$m("4xl"),full:$m("full")},axe=Qye({baseStyle:oxe,sizes:sxe,defaultProps:{size:"xs"}}),{definePartsStyle:lxe,defineMultiStyleConfig:cxe}=mi(Jme.keys),uxe={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},dxe={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},fxe={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},hxe=lxe({preview:uxe,input:dxe,textarea:fxe}),pxe=cxe({baseStyle:hxe}),{definePartsStyle:mxe,defineMultiStyleConfig:gxe}=mi(ege.keys),ev=kn("form-control-color"),vxe={marginStart:"1",[ev.variable]:"colors.red.500",_dark:{[ev.variable]:"colors.red.300"},color:ev.reference},yxe={mt:"2",[ev.variable]:"colors.gray.600",_dark:{[ev.variable]:"colors.whiteAlpha.600"},color:ev.reference,lineHeight:"normal",fontSize:"sm"},xxe=mxe({container:{width:"100%",position:"relative"},requiredIndicator:vxe,helperText:yxe}),bxe=gxe({baseStyle:xxe}),{definePartsStyle:wxe,defineMultiStyleConfig:Sxe}=mi(tge.keys),tv=kn("form-error-color"),_xe={[tv.variable]:"colors.red.500",_dark:{[tv.variable]:"colors.red.300"},color:tv.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},Exe={marginEnd:"0.5em",[tv.variable]:"colors.red.500",_dark:{[tv.variable]:"colors.red.300"},color:tv.reference},Cxe=wxe({text:_xe,icon:Exe}),Axe=Sxe({baseStyle:Cxe}),Txe={fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}},Mxe={baseStyle:Txe},Pxe={fontFamily:"heading",fontWeight:"bold"},Dxe={"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},Rxe={baseStyle:Pxe,sizes:Dxe,defaultProps:{size:"xl"}},{defineMultiStyleConfig:kxe,definePartsStyle:Ixe}=mi(Xme.keys),dP=kn("breadcrumb-link-decor"),Fxe={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:dP.reference,[dP.variable]:"none","&:not([aria-current=page])":{cursor:"pointer",_hover:{[dP.variable]:"underline"},_focusVisible:{boxShadow:"outline"}}},Oxe=Ixe({link:Fxe}),Nxe=kxe({baseStyle:Oxe}),Lxe={lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},Oq=t=>{const{colorScheme:e,theme:n}=t;if(e==="gray")return{color:Rn("gray.800","whiteAlpha.900")(t),_hover:{bg:Rn("gray.100","whiteAlpha.200")(t)},_active:{bg:Rn("gray.200","whiteAlpha.300")(t)}};const r=Mv(`${e}.200`,.12)(n),i=Mv(`${e}.200`,.24)(n);return{color:Rn(`${e}.600`,`${e}.200`)(t),bg:"transparent",_hover:{bg:Rn(`${e}.50`,r)(t)},_active:{bg:Rn(`${e}.100`,i)(t)}}},Bxe=t=>{const{colorScheme:e}=t,n=Rn("gray.200","whiteAlpha.300")(t);return B({border:"1px solid",borderColor:e==="gray"?n:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"}},Is(Oq,t))},jxe={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},Uxe=t=>{var e;const{colorScheme:n}=t;if(n==="gray"){const l=Rn("gray.100","whiteAlpha.200")(t);return{bg:l,color:Rn("gray.800","whiteAlpha.900")(t),_hover:{bg:Rn("gray.200","whiteAlpha.300")(t),_disabled:{bg:l}},_active:{bg:Rn("gray.300","whiteAlpha.400")(t)}}}const{bg:r=`${n}.500`,color:i="white",hoverBg:o=`${n}.600`,activeBg:s=`${n}.700`}=(e=jxe[n])!=null?e:{},a=Rn(r,`${n}.200`)(t);return{bg:a,color:Rn(i,"gray.800")(t),_hover:{bg:Rn(o,`${n}.300`)(t),_disabled:{bg:a}},_active:{bg:Rn(s,`${n}.400`)(t)}}},zxe=t=>{const{colorScheme:e}=t;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:Rn(`${e}.500`,`${e}.200`)(t),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:Rn(`${e}.700`,`${e}.500`)(t)}}},Vxe={bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"},Wxe={ghost:Oq,outline:Bxe,solid:Uxe,link:zxe,unstyled:Vxe},$xe={lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},Hxe={baseStyle:Lxe,variants:Wxe,sizes:$xe,defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:Ep,defineMultiStyleConfig:Gxe}=mi(vge.keys),uC=kn("card-bg"),id=kn("card-padding"),Nq=kn("card-shadow"),Q_=kn("card-radius"),Lq=kn("card-border-width","0"),Bq=kn("card-border-color"),qxe=Ep({container:{[uC.variable]:"colors.chakra-body-bg",backgroundColor:uC.reference,boxShadow:Nq.reference,borderRadius:Q_.reference,color:"chakra-body-text",borderWidth:Lq.reference,borderColor:Bq.reference},body:{padding:id.reference,flex:"1 1 0%"},header:{padding:id.reference},footer:{padding:id.reference}}),Kxe={sm:Ep({container:{[Q_.variable]:"radii.base",[id.variable]:"space.3"}}),md:Ep({container:{[Q_.variable]:"radii.md",[id.variable]:"space.5"}}),lg:Ep({container:{[Q_.variable]:"radii.xl",[id.variable]:"space.7"}})},Yxe={elevated:Ep({container:{[Nq.variable]:"shadows.base",_dark:{[uC.variable]:"colors.gray.700"}}}),outline:Ep({container:{[Lq.variable]:"1px",[Bq.variable]:"colors.chakra-border-color"}}),filled:Ep({container:{[uC.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[id.variable]:0},header:{[id.variable]:0},footer:{[id.variable]:0}}},Xxe=Gxe({baseStyle:qxe,variants:Yxe,sizes:Kxe,defaultProps:{variant:"elevated",size:"md"}}),hx=Ao("close-button-size"),ry=Ao("close-button-bg"),Qxe={w:[hx.reference],h:[hx.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[ry.variable]:"colors.blackAlpha.100",_dark:{[ry.variable]:"colors.whiteAlpha.100"}},_active:{[ry.variable]:"colors.blackAlpha.200",_dark:{[ry.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:ry.reference},Zxe={lg:{[hx.variable]:"sizes.10",fontSize:"md"},md:{[hx.variable]:"sizes.8",fontSize:"xs"},sm:{[hx.variable]:"sizes.6",fontSize:"2xs"}},Jxe={baseStyle:Qxe,sizes:Zxe,defaultProps:{size:"md"}},{variants:ebe,defaultProps:tbe}=dx,nbe={fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:to.bg.reference,color:to.color.reference,boxShadow:to.shadow.reference},rbe={baseStyle:nbe,variants:ebe,defaultProps:tbe},ibe={w:"100%",mx:"auto",maxW:"prose",px:"4"},obe={baseStyle:ibe},sbe={opacity:.6,borderColor:"inherit"},abe={borderStyle:"solid"},lbe={borderStyle:"dashed"},cbe={solid:abe,dashed:lbe},ube={baseStyle:sbe,variants:cbe,defaultProps:{variant:"solid"}},{definePartsStyle:dbe,defineMultiStyleConfig:fbe}=mi(qme.keys),hbe={borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},pbe={transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},mbe={pt:"2",px:"4",pb:"5"},gbe={fontSize:"1.25em"},vbe=dbe({container:hbe,button:pbe,panel:mbe,icon:gbe}),ybe=fbe({baseStyle:vbe}),{definePartsStyle:pw,defineMultiStyleConfig:xbe}=mi(Kme.keys),Ra=kn("alert-fg"),md=kn("alert-bg"),bbe=pw({container:{bg:md.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:Ra.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:Ra.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function dN(t){const{theme:e,colorScheme:n}=t,r=Mv(`${n}.200`,.16)(e);return{light:`colors.${n}.100`,dark:r}}var wbe=pw(t=>{const{colorScheme:e}=t,n=dN(t);return{container:{[Ra.variable]:`colors.${e}.600`,[md.variable]:n.light,_dark:{[Ra.variable]:`colors.${e}.200`,[md.variable]:n.dark}}}}),Sbe=pw(t=>{const{colorScheme:e}=t,n=dN(t);return{container:{[Ra.variable]:`colors.${e}.600`,[md.variable]:n.light,_dark:{[Ra.variable]:`colors.${e}.200`,[md.variable]:n.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:Ra.reference}}}),_be=pw(t=>{const{colorScheme:e}=t,n=dN(t);return{container:{[Ra.variable]:`colors.${e}.600`,[md.variable]:n.light,_dark:{[Ra.variable]:`colors.${e}.200`,[md.variable]:n.dark},pt:"2",borderTopWidth:"4px",borderTopColor:Ra.reference}}}),Ebe=pw(t=>{const{colorScheme:e}=t;return{container:{[Ra.variable]:"colors.white",[md.variable]:`colors.${e}.600`,_dark:{[Ra.variable]:"colors.gray.900",[md.variable]:`colors.${e}.200`},color:Ra.reference}}}),Cbe={subtle:wbe,"left-accent":Sbe,"top-accent":_be,solid:Ebe},Abe=xbe({baseStyle:bbe,variants:Cbe,defaultProps:{variant:"subtle",colorScheme:"blue"}}),{definePartsStyle:jq,defineMultiStyleConfig:Tbe}=mi(Yme.keys),nv=kn("avatar-border-color"),px=kn("avatar-bg"),pb=kn("avatar-font-size"),Pv=kn("avatar-size"),Mbe={borderRadius:"full",border:"0.2em solid",borderColor:nv.reference,[nv.variable]:"white",_dark:{[nv.variable]:"colors.gray.800"}},Pbe={bg:px.reference,fontSize:pb.reference,width:Pv.reference,height:Pv.reference,lineHeight:"1",[px.variable]:"colors.gray.200",_dark:{[px.variable]:"colors.whiteAlpha.400"}},Dbe=t=>{const{name:e,theme:n}=t,r=e?Lge({string:e}):"colors.gray.400",i=Oge(r)(n);let o="white";return i||(o="gray.800"),{bg:px.reference,fontSize:pb.reference,color:o,borderColor:nv.reference,verticalAlign:"top",width:Pv.reference,height:Pv.reference,"&:not([data-loaded])":{[px.variable]:r},[nv.variable]:"colors.white",_dark:{[nv.variable]:"colors.gray.800"}}},Rbe={fontSize:pb.reference,lineHeight:"1"},kbe=jq(t=>({badge:Is(Mbe,t),excessLabel:Is(Pbe,t),container:Is(Dbe,t),label:Rbe}));function Xd(t){const e=t!=="100%"?Pq[t]:void 0;return jq({container:{[Pv.variable]:e!=null?e:t,[pb.variable]:`calc(${e!=null?e:t} / 2.5)`},excessLabel:{[Pv.variable]:e!=null?e:t,[pb.variable]:`calc(${e!=null?e:t} / 2.5)`}})}var Ibe={"2xs":Xd(4),xs:Xd(6),sm:Xd(8),md:Xd(12),lg:Xd(16),xl:Xd(24),"2xl":Xd(32),full:Xd("100%")},Fbe=Tbe({baseStyle:kbe,sizes:Ibe,defaultProps:{size:"md"}}),Obe={Accordion:ybe,Alert:Abe,Avatar:Fbe,Badge:dx,Breadcrumb:Nxe,Button:Hxe,Checkbox:cC,CloseButton:Jxe,Code:rbe,Container:obe,Divider:ube,Drawer:axe,Editable:pxe,Form:bxe,FormError:Axe,FormLabel:Mxe,Heading:Rxe,Input:Hr,Kbd:Q0e,Link:J0e,List:iye,Menu:mye,Modal:Aye,NumberInput:Oye,PinInput:jye,Popover:Xye,Progress:r0e,Radio:g0e,Select:_0e,Skeleton:C0e,SkipLink:T0e,Slider:B0e,Spinner:z0e,Stat:Y0e,Switch:Jge,Table:sve,Tabs:wve,Tag:Fve,Textarea:Gve,Tooltip:Yve,Card:Xxe,Stepper:Gme},Nbe={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},Lbe={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},Bbe="ltr",jbe={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},Uq=oe(B({semanticTokens:Nbe,direction:Bbe},Wme),{components:Obe,styles:Lbe,config:jbe});function Oy(t){return typeof t=="function"}function Ube(...t){return e=>t.reduce((n,r)=>r(n),e)}var zbe=t=>function(...n){let r=[...n],i=n[n.length-1];return xme(i)&&r.length>1?r=r.slice(0,r.length-1):i=t,Ube(...r.map(o=>s=>Oy(o)?o(s):Wbe(s,o)))(i)},Vbe=zbe(Uq);function Wbe(...t){return hl({},...t,zq)}function zq(t,e,n,r){if((Oy(t)||Oy(e))&&Object.prototype.hasOwnProperty.call(r,n))return(...i)=>{const o=Oy(t)?t(...i):t,s=Oy(e)?e(...i):e;return hl({},o,s,zq)}}function $be(t,e){const n={};return Object.keys(t).forEach(r=>{e.includes(r)||(n[r]=t[r])}),n}function Hbe(t,e,n,r){const i=typeof e=="string"?e.split("."):[e];for(r=0;r<i.length&&t;r+=1)t=t[i[r]];return t===void 0?n:t}var Gbe=t=>{const e=new WeakMap;return(r,i,o,s)=>{if(typeof r=="undefined")return t(r,i,o);e.has(r)||e.set(r,new Map);const a=e.get(r);if(a.has(i))return a.get(i);const l=t(r,i,o,s);return a.set(i,l),l}},Vq=Gbe(Hbe);function Wq(t,e){const n={};return Object.keys(t).forEach(r=>{const i=t[r];e(i,r,t)&&(n[r]=i)}),n}var $q=t=>Wq(t,e=>e!=null);function qbe(t){return typeof t=="function"}function Hq(t,...e){return qbe(t)?t(...e):t}const Gq=1/60*1e3,Kbe=typeof performance!="undefined"?()=>performance.now():()=>Date.now(),qq=typeof window!="undefined"?t=>window.requestAnimationFrame(t):t=>setTimeout(()=>t(Kbe()),Gq);function Ybe(t){let e=[],n=[],r=0,i=!1,o=!1;const s=new WeakSet,a={schedule:(l,c=!1,u=!1)=>{const d=u&&i,f=d?e:n;return c&&s.add(l),f.indexOf(l)===-1&&(f.push(l),d&&i&&(r=e.length)),l},cancel:l=>{const c=n.indexOf(l);c!==-1&&n.splice(c,1),s.delete(l)},process:l=>{if(i){o=!0;return}if(i=!0,[e,n]=[n,e],n.length=0,r=e.length,r)for(let c=0;c<r;c++){const u=e[c];u(l),s.has(u)&&(a.schedule(u),t())}i=!1,o&&(o=!1,a.process(l))}};return a}const Xbe=40;let Ck=!0,mb=!1,Ak=!1;const rv={delta:0,timestamp:0},mw=["read","update","preRender","render","postRender"],oT=mw.reduce((t,e)=>(t[e]=Ybe(()=>mb=!0),t),{}),Qbe=mw.reduce((t,e)=>{const n=oT[e];return t[e]=(r,i=!1,o=!1)=>(mb||ewe(),n.schedule(r,i,o)),t},{}),Zbe=mw.reduce((t,e)=>(t[e]=oT[e].cancel,t),{});mw.reduce((t,e)=>(t[e]=()=>oT[e].process(rv),t),{});const Jbe=t=>oT[t].process(rv),Kq=t=>{mb=!1,rv.delta=Ck?Gq:Math.max(Math.min(t-rv.timestamp,Xbe),1),rv.timestamp=t,Ak=!0,mw.forEach(Jbe),Ak=!1,mb&&(Ck=!1,qq(Kq))},ewe=()=>{mb=!0,Ck=!0,Ak||qq(Kq)},VU=()=>rv;var twe=typeof Element!="undefined",nwe=typeof Map=="function",rwe=typeof Set=="function",iwe=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Z_(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,i;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Z_(t[r],e[r]))return!1;return!0}var o;if(nwe&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(o=t.entries();!(r=o.next()).done;)if(!e.has(r.value[0]))return!1;for(o=t.entries();!(r=o.next()).done;)if(!Z_(r.value[1],e.get(r.value[0])))return!1;return!0}if(rwe&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(o=t.entries();!(r=o.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(iwe&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;if(twe&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&t.$$typeof)&&!Z_(t[i[r]],e[i[r]]))return!1;return!0}return t!==t&&e!==e}var owe=function(e,n){try{return Z_(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const swe=Md(owe);function Yq(t,e={}){var n;const d=e,{styleConfig:r}=d,i=Tt(d,["styleConfig"]),{theme:o,colorMode:s}=yq(),a=t?Vq(o,`components.${t}`):void 0,l=r||a,c=hl({theme:o,colorMode:s},(n=l==null?void 0:l.defaultProps)!=null?n:{},$q($be(i,["children"]))),u=A.useRef({});if(l){const p=gme(l)(c);swe(u.current,p)||(u.current=p)}return u.current}function Wa(t,e={}){return Yq(t,e)}function gs(t,e={}){return Yq(t,e)}var awe=new Set([...ime,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),lwe=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function cwe(t){return lwe.has(t)||!awe.has(t)}function uwe(t,...e){if(t==null)throw new TypeError("Cannot convert undefined or null to object");const n=B({},t);for(const r of e)if(r!=null)for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(i in n&&delete n[i],n[i]=r[i]);return n}function Xq(t){const e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}var dwe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,fwe=tq(function(t){return dwe.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),hwe=fwe,pwe=function(e){return e!=="theme"},WU=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?hwe:pwe},$U=function(e,n,r){var i;if(n){var o=n.shouldForwardProp;i=e.__emotion_forwardProp&&o?function(s){return e.__emotion_forwardProp(s)&&o(s)}:o}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},mwe=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return aq(n,r,i),Mhe(function(){return lq(n,r,i)}),null},gwe=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,o,s;n!==void 0&&(o=n.label,s=n.target);var a=$U(e,n,r),l=a||WU(i),c=!l("as");return function(){var u=arguments,d=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&d.push("label:"+o+";"),u[0]==null||u[0].raw===void 0)d.push.apply(d,u);else{d.push(u[0][0]);for(var f=u.length,p=1;p<f;p++)d.push(u[p],u[0][p])}var b=fq(function(v,m,g){var x=c&&v.as||i,w="",S=[],D=v;if(v.theme==null){D={};for(var k in v)D[k]=v[k];D.theme=A.useContext(ub)}typeof v.className=="string"?w=whe(m.registered,S,v.className):v.className!=null&&(w=v.className+" ");var P=tN(d.concat(S),m.registered,D);w+=m.key+"-"+P.name,s!==void 0&&(w+=" "+s);var M=c&&a===void 0?WU(x):l,T={};for(var _ in v)c&&_==="as"||M(_)&&(T[_]=v[_]);return T.className=w,T.ref=g,A.createElement(A.Fragment,null,A.createElement(mwe,{cache:m,serialized:P,isStringTag:typeof x=="string"}),A.createElement(x,T))});return b.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",b.defaultProps=e.defaultProps,b.__emotion_real=b,b.__emotion_base=i,b.__emotion_styles=d,b.__emotion_forwardProp=a,Object.defineProperty(b,"toString",{value:function(){return"."+s}}),b.withComponent=function(v,m){return t(v,Vp({},n,m,{shouldForwardProp:$U(b,m,!0)})).apply(void 0,d)},b}},vwe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],dC=gwe.bind();vwe.forEach(function(t){dC[t]=dC(t)});var HU,ywe=(HU=dC.default)!=null?HU:dC,xwe=({baseStyle:t})=>e=>{const d=e,{theme:n,css:r,__css:i,sx:o}=d,s=Tt(d,["theme","css","__css","sx"]),a=Wq(s,(f,p)=>sme(p)),l=Hq(t,e),c=uwe({},i,l,$q(a),o),u=Aq(c)(e.theme);return r?[u,r]:u};function fP(t,e){const a=e!=null?e:{},{baseStyle:n}=a,r=Tt(a,["baseStyle"]);r.shouldForwardProp||(r.shouldForwardProp=cwe);const i=xwe({baseStyle:n}),o=ywe(t,r)(i);return Ot.forwardRef(function(c,u){const{colorMode:d,forced:f}=eT();return Ot.createElement(o,B({ref:u,"data-theme":f?d:void 0},c))})}function bwe(){const t=new Map;return new Proxy(fP,{apply(e,n,r){return fP(...r)},get(e,n){return t.has(n)||t.set(n,fP(n)),t.get(n)}})}var Ut=bwe();function Yt(t){return A.forwardRef(t)}function Qq(t={}){const{strict:e=!0,errorMessage:n="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:r}=t,i=A.createContext(void 0);i.displayName=r;function o(){var s;const a=A.useContext(i);if(!a&&e){const l=new Error(n);throw l.name="ContextError",(s=Error.captureStackTrace)==null||s.call(Error,l,o),l}return a}return[i.Provider,o,i]}function wwe(t){const{cssVarsRoot:e,theme:n,children:r}=t,i=A.useMemo(()=>nme(n),[n]);return h.jsxs(Rhe,{theme:i,children:[h.jsx(Swe,{root:e}),r]})}function Swe({root:t=":host, :root"}){const e=[t,"[data-theme]"].join(",");return h.jsx(JA,{styles:n=>({[e]:n.__cssVars})})}Qq({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function _we(t){return Qq({name:`${t}StylesContext`,errorMessage:`useStyles: "styles" is undefined. Seems you forgot to wrap the components in "<${t} />" `})}function Ewe(){const{colorMode:t}=eT();return h.jsx(JA,{styles:e=>{const n=Vq(e,"styles.global"),r=Hq(n,{theme:e,colorMode:t});return r?Aq(r)(e):void 0}})}var fN=A.createContext({getDocument(){return document},getWindow(){return window}});fN.displayName="EnvironmentContext";function Cwe({defer:t}={}){const[,e]=A.useReducer(n=>n+1,0);return nd(()=>{t&&e()},[t]),A.useContext(fN)}function Zq(t){const{children:e,environment:n,disabled:r}=t,i=A.useRef(null),o=A.useMemo(()=>n||{getDocument:()=>{var a,l;return(l=(a=i.current)==null?void 0:a.ownerDocument)!=null?l:document},getWindow:()=>{var a,l;return(l=(a=i.current)==null?void 0:a.ownerDocument.defaultView)!=null?l:window}},[n]),s=!r||!n;return h.jsxs(fN.Provider,{value:o,children:[e,s&&h.jsx("span",{id:"__chakra_env",hidden:!0,ref:i})]})}Zq.displayName="EnvironmentProvider";var Awe=t=>{const{children:e,colorModeManager:n,portalZIndex:r,resetScope:i,resetCSS:o=!0,theme:s={},environment:a,cssVarsRoot:l,disableEnvironment:c,disableGlobalStyle:u}=t,d=h.jsx(Zq,{environment:a,disabled:c,children:e});return h.jsx(wwe,{theme:s,cssVarsRoot:l,children:h.jsxs(vq,{colorModeManager:n,options:s.config,children:[o?h.jsx(Fhe,{scope:i}):h.jsx(Ihe,{}),!u&&h.jsx(Ewe,{}),r?h.jsx(mq,{zIndex:r,children:d}):d]})})},Twe=(t,e)=>t.find(n=>n.id===e);function GU(t,e){const n=Jq(t,e),r=n?t[n].findIndex(i=>i.id===e):-1;return{position:n,index:r}}function Jq(t,e){for(const[n,r]of Object.entries(t))if(Twe(r,e))return n}function Mwe(t){const e=t.includes("right"),n=t.includes("left");let r="center";return e&&(r="flex-end"),n&&(r="flex-start"),{display:"flex",flexDirection:"column",alignItems:r}}function Pwe(t){const n=t==="top"||t==="bottom"?"0 auto":void 0,r=t.includes("top")?"env(safe-area-inset-top, 0px)":void 0,i=t.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,o=t.includes("left")?void 0:"env(safe-area-inset-right, 0px)",s=t.includes("right")?void 0:"env(safe-area-inset-left, 0px)";return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:n,top:r,bottom:i,right:o,left:s}}function fo(t,e=[]){const n=A.useRef(t);return A.useEffect(()=>{n.current=t}),A.useCallback((...r)=>{var i;return(i=n.current)==null?void 0:i.call(n,...r)},e)}function Dwe(t,e){const n=fo(t);A.useEffect(()=>{if(e==null)return;let r=null;return r=window.setTimeout(()=>{n()},e),()=>{r&&window.clearTimeout(r)}},[e,n])}function gb(t,e){const n=A.useRef(!1),r=A.useRef(!1);A.useEffect(()=>{if(n.current&&r.current)return t();r.current=!0},e),A.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[])}const eK=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),sT=A.createContext({}),gw=A.createContext(null),aT=typeof document!="undefined",hN=aT?A.useLayoutEffect:A.useEffect,tK=A.createContext({strict:!1}),pN=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Rwe="framerAppearId",nK="data-"+pN(Rwe);function kwe(t,e,n,r){const{visualElement:i}=A.useContext(sT),o=A.useContext(tK),s=A.useContext(gw),a=A.useContext(eK).reducedMotion,l=A.useRef();r=r||o.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:i,props:n,presenceContext:s,blockInitialAnimation:s?s.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;A.useInsertionEffect(()=>{c&&c.update(n,s)});const u=A.useRef(!!(n[nK]&&!window.HandoffComplete));return hN(()=>{c&&(c.render(),u.current&&c.animationState&&c.animationState.animateChanges())}),A.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),c}function Bg(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Iwe(t,e,n){return A.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Bg(n)&&(n.current=r))},[e])}function vb(t){return typeof t=="string"||Array.isArray(t)}function lT(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const mN=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],gN=["initial",...mN];function cT(t){return lT(t.animate)||gN.some(e=>vb(t[e]))}function rK(t){return!!(cT(t)||t.variants)}function Fwe(t,e){if(cT(t)){const{initial:n,animate:r}=t;return{initial:n===!1||vb(n)?n:void 0,animate:vb(r)?r:void 0}}return t.inherit!==!1?e:{}}function Owe(t){const{initial:e,animate:n}=Fwe(t,A.useContext(sT));return A.useMemo(()=>({initial:e,animate:n}),[qU(e),qU(n)])}function qU(t){return Array.isArray(t)?t.join(" "):t}const KU={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yb={};for(const t in KU)yb[t]={isEnabled:e=>KU[t].some(n=>!!e[n])};function Nwe(t){for(const e in t)yb[e]=B(B({},yb[e]),t[e])}const vN=A.createContext({}),iK=A.createContext({}),Lwe=Symbol.for("motionComponentSymbol");function Bwe({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&Nwe(t);function o(a,l){let c;const u=oe(B(B({},A.useContext(eK)),a),{layoutId:jwe(a)}),{isStatic:d}=u,f=Owe(a),p=r(a,d);if(!d&&aT){f.visualElement=kwe(i,p,u,e);const b=A.useContext(iK),v=A.useContext(tK).strict;f.visualElement&&(c=f.visualElement.loadFeatures(u,v,t,b))}return A.createElement(sT.Provider,{value:f},c&&f.visualElement?A.createElement(c,B({visualElement:f.visualElement},u)):null,n(i,a,Iwe(p,f.visualElement,l),p,d,f.visualElement))}const s=A.forwardRef(o);return s[Lwe]=i,s}function jwe({layoutId:t}){const e=A.useContext(vN).id;return e&&t!==void 0?e+"-"+t:t}function Uwe(t){function e(r,i={}){return Bwe(t(r,i))}if(typeof Proxy=="undefined")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const zwe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function yN(t){return typeof t!="string"||t.includes("-")?!1:!!(zwe.indexOf(t)>-1||/[A-Z]/.test(t))}const fC={};function Vwe(t){Object.assign(fC,t)}const vw=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],dm=new Set(vw);function oK(t,{layout:e,layoutId:n}){return dm.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!fC[t]||t==="opacity")}const da=t=>!!(t&&t.getVelocity),Wwe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$we=vw.length;function Hwe(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let o="";for(let s=0;s<$we;s++){const a=vw[s];if(t[a]!==void 0){const l=Wwe[a]||a;o+=`${l}(${t[a]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),i?o=i(t,r?"":o):n&&r&&(o="none"),o}const sK=t=>e=>typeof e=="string"&&e.startsWith(t),aK=sK("--"),Tk=sK("var(--"),Gwe=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,qwe=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Zf=(t,e,n)=>Math.min(Math.max(n,t),e),fm={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},mx=oe(B({},fm),{transform:t=>Zf(0,1,t)}),wS=oe(B({},fm),{default:1}),gx=t=>Math.round(t*1e5)/1e5,uT=/(-)?([\d]*\.?[\d])+/g,lK=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Kwe=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function yw(t){return typeof t=="string"}const xw=t=>({test:e=>yw(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),af=xw("deg"),Hc=xw("%"),Bn=xw("px"),Ywe=xw("vh"),Xwe=xw("vw"),YU=oe(B({},Hc),{parse:t=>Hc.parse(t)/100,transform:t=>Hc.transform(t*100)}),XU=oe(B({},fm),{transform:Math.round}),cK={borderWidth:Bn,borderTopWidth:Bn,borderRightWidth:Bn,borderBottomWidth:Bn,borderLeftWidth:Bn,borderRadius:Bn,radius:Bn,borderTopLeftRadius:Bn,borderTopRightRadius:Bn,borderBottomRightRadius:Bn,borderBottomLeftRadius:Bn,width:Bn,maxWidth:Bn,height:Bn,maxHeight:Bn,size:Bn,top:Bn,right:Bn,bottom:Bn,left:Bn,padding:Bn,paddingTop:Bn,paddingRight:Bn,paddingBottom:Bn,paddingLeft:Bn,margin:Bn,marginTop:Bn,marginRight:Bn,marginBottom:Bn,marginLeft:Bn,rotate:af,rotateX:af,rotateY:af,rotateZ:af,scale:wS,scaleX:wS,scaleY:wS,scaleZ:wS,skew:af,skewX:af,skewY:af,distance:Bn,translateX:Bn,translateY:Bn,translateZ:Bn,x:Bn,y:Bn,z:Bn,perspective:Bn,transformPerspective:Bn,opacity:mx,originX:YU,originY:YU,originZ:Bn,zIndex:XU,fillOpacity:mx,strokeOpacity:mx,numOctaves:XU};function xN(t,e,n,r){const{style:i,vars:o,transform:s,transformOrigin:a}=t;let l=!1,c=!1,u=!0;for(const d in e){const f=e[d];if(aK(d)){o[d]=f;continue}const p=cK[d],b=qwe(f,p);if(dm.has(d)){if(l=!0,s[d]=b,!u)continue;f!==(p.default||0)&&(u=!1)}else d.startsWith("origin")?(c=!0,a[d]=b):i[d]=b}if(e.transform||(l||r?i.transform=Hwe(t.transform,n,u,r):i.transform&&(i.transform="none")),c){const{originX:d="50%",originY:f="50%",originZ:p=0}=a;i.transformOrigin=`${d} ${f} ${p}`}}const bN=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function uK(t,e,n){for(const r in e)!da(e[r])&&!oK(r,n)&&(t[r]=e[r])}function Qwe({transformTemplate:t},e,n){return A.useMemo(()=>{const r=bN();return xN(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function Zwe(t,e,n){const r=t.style||{},i={};return uK(i,r,t),Object.assign(i,Qwe(t,e,n)),t.transformValues?t.transformValues(i):i}function Jwe(t,e,n){const r={},i=Zwe(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const e1e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function hC(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||e1e.has(t)}let dK=t=>!hC(t);function t1e(t){t&&(dK=e=>e.startsWith("on")?!hC(e):t(e))}try{t1e(require("@emotion/is-prop-valid").default)}catch(t){}function n1e(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(dK(i)||n===!0&&hC(i)||!e&&!hC(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function QU(t,e,n){return typeof t=="string"?t:Bn.transform(e+n*t)}function r1e(t,e,n){const r=QU(e,t.x,t.width),i=QU(n,t.y,t.height);return`${r} ${i}`}const i1e={offset:"stroke-dashoffset",array:"stroke-dasharray"},o1e={offset:"strokeDashoffset",array:"strokeDasharray"};function s1e(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?i1e:o1e;t[o.offset]=Bn.transform(-r);const s=Bn.transform(e),a=Bn.transform(n);t[o.array]=`${s} ${a}`}function wN(t,p,u,d,f){var b=p,{attrX:e,attrY:n,attrScale:r,originX:i,originY:o,pathLength:s,pathSpacing:a=1,pathOffset:l=0}=b,c=Tt(b,["attrX","attrY","attrScale","originX","originY","pathLength","pathSpacing","pathOffset"]);if(xN(t,c,u,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:v,style:m,dimensions:g}=t;v.transform&&(g&&(m.transform=v.transform),delete v.transform),g&&(i!==void 0||o!==void 0||m.transform)&&(m.transformOrigin=r1e(g,i!==void 0?i:.5,o!==void 0?o:.5)),e!==void 0&&(v.x=e),n!==void 0&&(v.y=n),r!==void 0&&(v.scale=r),s!==void 0&&s1e(v,s,a,l,!1)}const fK=()=>oe(B({},bN()),{attrs:{}}),SN=t=>typeof t=="string"&&t.toLowerCase()==="svg";function a1e(t,e,n,r){const i=A.useMemo(()=>{const o=fK();return wN(o,e,{enableHardwareAcceleration:!1},SN(r),t.transformTemplate),oe(B({},o.attrs),{style:B({},o.style)})},[e]);if(t.style){const o={};uK(o,t.style,t),i.style=B(B({},o),i.style)}return i}function l1e(t=!1){return(n,r,i,{latestValues:o},s)=>{const l=(yN(n)?a1e:Jwe)(r,o,s,n),c=n1e(r,typeof n=="string",t),u=oe(B(B({},c),l),{ref:i}),{children:d}=r,f=A.useMemo(()=>da(d)?d.get():d,[d]);return A.createElement(n,oe(B({},u),{children:f}))}}function hK(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const pK=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function mK(t,e,n,r){hK(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(pK.has(i)?i:pN(i),e.attrs[i])}function _N(t,e){const{style:n}=t,r={};for(const i in n)(da(n[i])||e.style&&da(e.style[i])||oK(i,t))&&(r[i]=n[i]);return r}function gK(t,e){const n=_N(t,e);for(const r in t)if(da(t[r])||da(e[r])){const i=vw.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function EN(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function vK(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const pC=t=>Array.isArray(t),c1e=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),u1e=t=>pC(t)?t[t.length-1]||0:t;function J_(t){const e=da(t)?t.get():t;return c1e(e)?e.toValue():e}function d1e({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,o){const s={latestValues:f1e(r,i,o,t),renderState:e()};return n&&(s.mount=a=>n(r,a,s)),s}const yK=t=>(e,n)=>{const r=A.useContext(sT),i=A.useContext(gw),o=()=>d1e(t,e,r,i);return n?o():vK(o)};function f1e(t,e,n,r){const i={},o=r(t,{});for(const f in o)i[f]=J_(o[f]);let{initial:s,animate:a}=t;const l=cT(t),c=rK(t);e&&c&&!l&&t.inherit!==!1&&(s===void 0&&(s=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||s===!1;const d=u?a:s;return d&&typeof d!="boolean"&&!lT(d)&&(Array.isArray(d)?d:[d]).forEach(p=>{const b=EN(t,p);if(!b)return;const x=b,{transitionEnd:v,transition:m}=x,g=Tt(x,["transitionEnd","transition"]);for(const w in g){let S=g[w];if(Array.isArray(S)){const D=u?S.length-1:0;S=S[D]}S!==null&&(i[w]=S)}for(const w in v)i[w]=v[w]}),i}const eo=t=>t;class ZU{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function h1e(t){let e=new ZU,n=new ZU,r=0,i=!1,o=!1;const s=new WeakSet,a={schedule:(l,c=!1,u=!1)=>{const d=u&&i,f=d?e:n;return c&&s.add(l),f.add(l)&&d&&i&&(r=e.order.length),l},cancel:l=>{n.remove(l),s.delete(l)},process:l=>{if(i){o=!0;return}if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const u=e.order[c];u(l),s.has(u)&&(a.schedule(u),t())}i=!1,o&&(o=!1,a.process(l))}};return a}const SS=["prepare","read","update","preRender","render","postRender"],p1e=40;function m1e(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=SS.reduce((d,f)=>(d[f]=h1e(()=>n=!0),d),{}),s=d=>o[d].process(i),a=()=>{const d=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(d-i.timestamp,p1e),1),i.timestamp=d,i.isProcessing=!0,SS.forEach(s),i.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,i.isProcessing||t(a)};return{schedule:SS.reduce((d,f)=>{const p=o[f];return d[f]=(b,v=!1,m=!1)=>(n||l(),p.schedule(b,v,m)),d},{}),cancel:d=>SS.forEach(f=>o[f].cancel(d)),state:i,steps:o}}const{schedule:hi,cancel:gd,state:ss,steps:hP}=m1e(typeof requestAnimationFrame!="undefined"?requestAnimationFrame:eo,!0),g1e={useVisualState:yK({scrapeMotionValuesFromProps:gK,createRenderState:fK,onMount:(t,e,{renderState:n,latestValues:r})=>{hi.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch(i){n.dimensions={x:0,y:0,width:0,height:0}}}),hi.render(()=>{wN(n,r,{enableHardwareAcceleration:!1},SN(e.tagName),t.transformTemplate),mK(e,n)})}})},v1e={useVisualState:yK({scrapeMotionValuesFromProps:_N,createRenderState:bN})};function y1e(t,{forwardMotionProps:e=!1},n,r){const i=yN(t)?g1e:v1e;return oe(B({},i),{preloadedFeatures:n,useRender:l1e(e),createVisualElement:r,Component:t})}function qu(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const xK=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function dT(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const x1e=t=>e=>xK(e)&&t(e,dT(e));function od(t,e,n,r){return qu(t,e,x1e(n),r)}const b1e=(t,e)=>n=>e(t(n)),Uf=(...t)=>t.reduce(b1e);function bK(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const JU=bK("dragHorizontal"),e6=bK("dragVertical");function wK(t){let e=!1;if(t==="y")e=e6();else if(t==="x")e=JU();else{const n=JU(),r=e6();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function SK(){const t=wK(!0);return t?(t(),!1):!0}class ch{constructor(e){this.isMounted=!1,this.node=e}update(){}}function t6(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(o,s)=>{if(o.pointerType==="touch"||SK())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&hi.update(()=>a[r](o,s))};return od(t.current,n,i,{passive:!t.getProps()[r]})}class w1e extends ch{mount(){this.unmount=Uf(t6(this.node,!0),t6(this.node,!1))}unmount(){}}class S1e extends ch{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(n){e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Uf(qu(this.node.current,"focus",()=>this.onFocus()),qu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const _K=(t,e)=>e?t===e?!0:_K(t,e.parentElement):!1;function pP(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,dT(n))}class _1e extends ch{constructor(){super(...arguments),this.removeStartListeners=eo,this.removeEndListeners=eo,this.removeAccessibleListeners=eo,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),o=od(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:d}=this.node.getProps();hi.update(()=>{!d&&!_K(this.node.current,a.target)?u&&u(a,l):c&&c(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),s=od(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Uf(o,s),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const s=a=>{a.key!=="Enter"||!this.checkPressEnd()||pP("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&hi.update(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=qu(this.node.current,"keyup",s),pP("down",(a,l)=>{this.startPress(a,l)})},n=qu(this.node.current,"keydown",e),r=()=>{this.isPressing&&pP("cancel",(o,s)=>this.cancelPress(o,s))},i=qu(this.node.current,"blur",r);this.removeAccessibleListeners=Uf(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&hi.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!SK()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&hi.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=od(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=qu(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Uf(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Mk=new WeakMap,mP=new WeakMap,E1e=t=>{const e=Mk.get(t.target);e&&e(t)},C1e=t=>{t.forEach(E1e)};function A1e(n){var r=n,{root:t}=r,e=Tt(r,["root"]);const i=t||document;mP.has(i)||mP.set(i,{});const o=mP.get(i),s=JSON.stringify(e);return o[s]||(o[s]=new IntersectionObserver(C1e,B({root:t},e))),o[s]}function T1e(t,e,n){const r=A1e(e);return Mk.set(t,n),r.observe(t),()=>{Mk.delete(t),r.unobserve(t)}}const M1e={some:0,all:1};class P1e extends ch{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:M1e[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,o&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),f=c?u:d;f&&f(l)};return T1e(this.node.current,s,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver=="undefined")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(D1e(e,n))&&this.startObserver()}unmount(){}}function D1e({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const R1e={inView:{Feature:P1e},tap:{Feature:_1e},focus:{Feature:S1e},hover:{Feature:w1e}};function EK(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function k1e(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function I1e(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function fT(t,e,n){const r=t.getProps();return EN(r,e,n!==void 0?n:r.custom,k1e(t),I1e(t))}let CN=eo;const Cp=t=>t*1e3,sd=t=>t/1e3,F1e={current:!1},CK=t=>Array.isArray(t)&&typeof t[0]=="number";function AK(t){return!!(!t||typeof t=="string"&&TK[t]||CK(t)||Array.isArray(t)&&t.every(AK))}const Ny=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,TK={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ny([0,.65,.55,1]),circOut:Ny([.55,0,1,.45]),backIn:Ny([.31,.01,.66,-.59]),backOut:Ny([.33,1.53,.69,.99])};function MK(t){if(t)return CK(t)?Ny(t):Array.isArray(t)?t.map(MK):TK[t]}function O1e(t,e,n,{delay:r=0,duration:i,repeat:o=0,repeatType:s="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=MK(a);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:o+1,direction:s==="reverse"?"alternate":"normal"})}function N1e(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const PK=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,L1e=1e-7,B1e=12;function j1e(t,e,n,r,i){let o,s,a=0;do s=e+(n-e)/2,o=PK(s,r,i)-t,o>0?n=s:e=s;while(Math.abs(o)>L1e&&++a<B1e);return s}function bw(t,e,n,r){if(t===e&&n===r)return eo;const i=o=>j1e(o,0,1,t,n);return o=>o===0||o===1?o:PK(i(o),e,r)}const U1e=bw(.42,0,1,1),z1e=bw(0,0,.58,1),DK=bw(.42,0,.58,1),V1e=t=>Array.isArray(t)&&typeof t[0]!="number",RK=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,kK=t=>e=>1-t(1-e),AN=t=>1-Math.sin(Math.acos(t)),IK=kK(AN),W1e=RK(AN),FK=bw(.33,1.53,.69,.99),TN=kK(FK),$1e=RK(TN),H1e=t=>(t*=2)<1?.5*TN(t):.5*(2-Math.pow(2,-10*(t-1))),G1e={linear:eo,easeIn:U1e,easeInOut:DK,easeOut:z1e,circIn:AN,circInOut:W1e,circOut:IK,backIn:TN,backInOut:$1e,backOut:FK,anticipate:H1e},n6=t=>{if(Array.isArray(t)){CN(t.length===4);const[e,n,r,i]=t;return bw(e,n,r,i)}else if(typeof t=="string")return G1e[t];return t},MN=(t,e)=>n=>!!(yw(n)&&Kwe.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),OK=(t,e,n)=>r=>{if(!yw(r))return r;const[i,o,s,a]=r.match(uT);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(s),alpha:a!==void 0?parseFloat(a):1}},q1e=t=>Zf(0,255,t),gP=oe(B({},fm),{transform:t=>Math.round(q1e(t))}),hp={test:MN("rgb","red"),parse:OK("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+gP.transform(t)+", "+gP.transform(e)+", "+gP.transform(n)+", "+gx(mx.transform(r))+")"};function K1e(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Pk={test:MN("#"),parse:K1e,transform:hp.transform},jg={test:MN("hsl","hue"),parse:OK("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Hc.transform(gx(e))+", "+Hc.transform(gx(n))+", "+gx(mx.transform(r))+")"},Cs={test:t=>hp.test(t)||Pk.test(t)||jg.test(t),parse:t=>hp.test(t)?hp.parse(t):jg.test(t)?jg.parse(t):Pk.parse(t),transform:t=>yw(t)?t:t.hasOwnProperty("red")?hp.transform(t):jg.transform(t)},Ri=(t,e,n)=>-n*t+n*e+t;function vP(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Y1e({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,s=0;if(!e)i=o=s=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=vP(l,a,t+1/3),o=vP(l,a,t),s=vP(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(s*255),alpha:r}}const yP=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},X1e=[Pk,hp,jg],Q1e=t=>X1e.find(e=>e.test(t));function r6(t){const e=Q1e(t);let n=e.parse(t);return e===jg&&(n=Y1e(n)),n}const NK=(t,e)=>{const n=r6(t),r=r6(e),i=B({},n);return o=>(i.red=yP(n.red,r.red,o),i.green=yP(n.green,r.green,o),i.blue=yP(n.blue,r.blue,o),i.alpha=Ri(n.alpha,r.alpha,o),hp.transform(i))};function Z1e(t){var e,n;return isNaN(t)&&yw(t)&&(((e=t.match(uT))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(lK))===null||n===void 0?void 0:n.length)||0)>0}const LK={regex:Gwe,countKey:"Vars",token:"${v}",parse:eo},BK={regex:lK,countKey:"Colors",token:"${c}",parse:Cs.parse},jK={regex:uT,countKey:"Numbers",token:"${n}",parse:fm.parse};function xP(t,{regex:e,countKey:n,token:r,parse:i}){const o=t.tokenised.match(e);o&&(t["num"+n]=o.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...o.map(i)))}function mC(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&xP(n,LK),xP(n,BK),xP(n,jK),n}function UK(t){return mC(t).values}function zK(t){const{values:e,numColors:n,numVars:r,tokenised:i}=mC(t),o=e.length;return s=>{let a=i;for(let l=0;l<o;l++)l<r?a=a.replace(LK.token,s[l]):l<r+n?a=a.replace(BK.token,Cs.transform(s[l])):a=a.replace(jK.token,gx(s[l]));return a}}const J1e=t=>typeof t=="number"?0:t;function eSe(t){const e=UK(t);return zK(t)(e.map(J1e))}const Jf={test:Z1e,parse:UK,createTransformer:zK,getAnimatableNone:eSe},VK=(t,e)=>n=>`${n>0?e:t}`;function WK(t,e){return typeof t=="number"?n=>Ri(t,e,n):Cs.test(t)?NK(t,e):t.startsWith("var(")?VK(t,e):HK(t,e)}const $K=(t,e)=>{const n=[...t],r=n.length,i=t.map((o,s)=>WK(o,e[s]));return o=>{for(let s=0;s<r;s++)n[s]=i[s](o);return n}},tSe=(t,e)=>{const n=B(B({},t),e),r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=WK(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}},HK=(t,e)=>{const n=Jf.createTransformer(e),r=mC(t),i=mC(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Uf($K(r.values,i.values),n):VK(t,e)},xb=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},i6=(t,e)=>n=>Ri(t,e,n);function nSe(t){return typeof t=="number"?i6:typeof t=="string"?Cs.test(t)?NK:HK:Array.isArray(t)?$K:typeof t=="object"?tSe:i6}function rSe(t,e,n){const r=[],i=n||nSe(t[0]),o=t.length-1;for(let s=0;s<o;s++){let a=i(t[s],t[s+1]);if(e){const l=Array.isArray(e)?e[s]||eo:e;a=Uf(l,a)}r.push(a)}return r}function GK(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(CN(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const s=rSe(e,r,i),a=s.length,l=c=>{let u=0;if(a>1)for(;u<t.length-2&&!(c<t[u+1]);u++);const d=xb(t[u],t[u+1],c);return s[u](d)};return n?c=>l(Zf(t[0],t[o-1],c)):l}function iSe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=xb(0,e,r);t.push(Ri(n,1,i))}}function oSe(t){const e=[0];return iSe(e,t.length-1),e}function sSe(t,e){return t.map(n=>n*e)}function aSe(t,e){return t.map(()=>e||DK).splice(0,t.length-1)}function gC({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=V1e(r)?r.map(n6):n6(r),o={done:!1,value:e[0]},s=sSe(n&&n.length===e.length?n:oSe(e),t),a=GK(s,e,{ease:Array.isArray(i)?i:aSe(e,i)});return{calculatedDuration:t,next:l=>(o.value=a(l),o.done=l>=t,o)}}function qK(t,e){return e?t*(1e3/e):0}const lSe=5;function KK(t,e,n){const r=Math.max(e-lSe,0);return qK(n-t(r),e-r)}const o6=.001,cSe=.01,uSe=10,dSe=.05,fSe=1;function hSe({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,o,s=1-e;s=Zf(dSe,fSe,s),t=Zf(cSe,uSe,sd(t)),s<1?(i=c=>{const u=c*s,d=u*t,f=u-n,p=Dk(c,s),b=Math.exp(-d);return o6-f/p*b},o=c=>{const d=c*s*t,f=d*n+n,p=Math.pow(s,2)*Math.pow(c,2)*t,b=Math.exp(-d),v=Dk(Math.pow(c,2),s);return(-i(c)+o6>0?-1:1)*((f-p)*b)/v}):(i=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-.001+u*d},o=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const a=5/t,l=mSe(i,o,a);if(t=Cp(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:s*2*Math.sqrt(r*c),duration:t}}}const pSe=12;function mSe(t,e,n){let r=n;for(let i=1;i<pSe;i++)r=r-t(r)/e(r);return r}function Dk(t,e){return t*Math.sqrt(1-e*e)}const gSe=["duration","bounce"],vSe=["stiffness","damping","mass"];function s6(t,e){return e.some(n=>t[n]!==void 0)}function ySe(t){let e=B({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},t);if(!s6(t,vSe)&&s6(t,gSe)){const n=hSe(t);e=oe(B(B({},e),n),{mass:1}),e.isResolvedFromDuration=!0}return e}function YK(i){var o=i,{keyframes:t,restDelta:e,restSpeed:n}=o,r=Tt(o,["keyframes","restDelta","restSpeed"]);const s=t[0],a=t[t.length-1],l={done:!1,value:s},{stiffness:c,damping:u,mass:d,duration:f,velocity:p,isResolvedFromDuration:b}=ySe(oe(B({},r),{velocity:-sd(r.velocity||0)})),v=p||0,m=u/(2*Math.sqrt(c*d)),g=a-s,x=sd(Math.sqrt(c/d)),w=Math.abs(g)<5;n||(n=w?.01:2),e||(e=w?.005:.5);let S;if(m<1){const D=Dk(x,m);S=k=>{const P=Math.exp(-m*x*k);return a-P*((v+m*x*g)/D*Math.sin(D*k)+g*Math.cos(D*k))}}else if(m===1)S=D=>a-Math.exp(-x*D)*(g+(v+x*g)*D);else{const D=x*Math.sqrt(m*m-1);S=k=>{const P=Math.exp(-m*x*k),M=Math.min(D*k,300);return a-P*((v+m*x*g)*Math.sinh(M)+D*g*Math.cosh(M))/D}}return{calculatedDuration:b&&f||null,next:D=>{const k=S(D);if(b)l.done=D>=f;else{let P=v;D!==0&&(m<1?P=KK(S,D,k):P=0);const M=Math.abs(P)<=n,T=Math.abs(a-k)<=e;l.done=M&&T}return l.value=l.done?a:k,l}}}function a6({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:s,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],f={done:!1,value:d},p=M=>a!==void 0&&M<a||l!==void 0&&M>l,b=M=>a===void 0?l:l===void 0||Math.abs(a-M)<Math.abs(l-M)?a:l;let v=n*e;const m=d+v,g=s===void 0?m:s(m);g!==m&&(v=g-d);const x=M=>-v*Math.exp(-M/r),w=M=>g+x(M),S=M=>{const T=x(M),_=w(M);f.done=Math.abs(T)<=c,f.value=f.done?g:_};let D,k;const P=M=>{p(f.value)&&(D=M,k=YK({keyframes:[f.value,b(f.value)],velocity:KK(w,M,f.value),damping:i,stiffness:o,restDelta:c,restSpeed:u}))};return P(0),{calculatedDuration:null,next:M=>{let T=!1;return!k&&D===void 0&&(T=!0,S(M),P(M)),D!==void 0&&M>D?k.next(M-D):(!T&&S(M),f)}}}const xSe=t=>{const e=({timestamp:n})=>t(n);return{start:()=>hi.update(e,!0),stop:()=>gd(e),now:()=>ss.isProcessing?ss.timestamp:performance.now()}},l6=2e4;function c6(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<l6;)e+=n,r=t.next(e);return e>=l6?1/0:e}const bSe={decay:a6,inertia:a6,tween:gC,keyframes:gC,spring:YK};function vC(p){var b=p,{autoplay:t=!0,delay:e=0,driver:n=xSe,keyframes:r,type:i="keyframes",repeat:o=0,repeatDelay:s=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:u,onUpdate:d}=b,f=Tt(b,["autoplay","delay","driver","keyframes","type","repeat","repeatDelay","repeatType","onPlay","onStop","onComplete","onUpdate"]);let v=1,m=!1,g,x;const w=()=>{x=new Promise(G=>{g=G})};w();let S;const D=bSe[i]||gC;let k;D!==gC&&typeof r[0]!="number"&&(k=GK([0,100],r,{clamp:!1}),r=[0,100]);const P=D(oe(B({},f),{keyframes:r}));let M;a==="mirror"&&(M=D(oe(B({},f),{keyframes:[...r].reverse(),velocity:-(f.velocity||0)})));let T="idle",_=null,E=null,R=null;P.calculatedDuration===null&&o&&(P.calculatedDuration=c6(P));const{calculatedDuration:F}=P;let L=1/0,N=1/0;F!==null&&(L=F+s,N=L*(o+1)-s);let U=0;const H=G=>{if(E===null)return;v>0&&(E=Math.min(E,G)),v<0&&(E=Math.min(G-N/v,E)),_!==null?U=_:U=Math.round(G-E)*v;const Y=U-e*(v>=0?1:-1),J=v>=0?Y<0:Y>N;U=Math.max(Y,0),T==="finished"&&_===null&&(U=N);let V=U,re=P;if(o){const xe=Math.min(U,N)/L;let Ae=Math.floor(xe),Ee=xe%1;!Ee&&xe>=1&&(Ee=1),Ee===1&&Ae--,Ae=Math.min(Ae,o+1),!!(Ae%2)&&(a==="reverse"?(Ee=1-Ee,s&&(Ee-=s/L)):a==="mirror"&&(re=M)),V=Zf(0,1,Ee)*L}const fe=J?{done:!1,value:r[0]}:re.next(V);k&&(fe.value=k(fe.value));let{done:pe}=fe;!J&&F!==null&&(pe=v>=0?U>=N:U<=0);const ce=_===null&&(T==="finished"||T==="running"&&pe);return d&&d(fe.value),ce&&q(),fe},j=()=>{S&&S.stop(),S=void 0},z=()=>{T="idle",j(),g(),w(),E=R=null},q=()=>{T="finished",u&&u(),j(),g()},$=()=>{if(m)return;S||(S=n(H));const G=S.now();l&&l(),_!==null?E=G-_:(!E||T==="finished")&&(E=G),T==="finished"&&w(),R=E,_=null,T="running",S.start()};t&&$();const K={then(G,Y){return x.then(G,Y)},get time(){return sd(U)},set time(G){G=Cp(G),U=G,_!==null||!S||v===0?_=G:E=S.now()-G/v},get duration(){const G=P.calculatedDuration===null?c6(P):P.calculatedDuration;return sd(G)},get speed(){return v},set speed(G){G===v||!S||(v=G,K.time=sd(U))},get state(){return T},play:$,pause:()=>{T="paused",_=U},stop:()=>{m=!0,T!=="idle"&&(T="idle",c&&c(),z())},cancel:()=>{R!==null&&H(R),z()},complete:()=>{T="finished"},sample:G=>(E=0,H(G))};return K}function wSe(t){let e;return()=>(e===void 0&&(e=t()),e)}const SSe=wSe(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),_Se=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),_S=10,ESe=2e4,CSe=(t,e)=>e.type==="spring"||t==="backgroundColor"||!AK(e.ease);function ASe(t,e,o){var s=o,{onUpdate:n,onComplete:r}=s,i=Tt(s,["onUpdate","onComplete"]);if(!(SSe()&&_Se.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let l=!1,c,u,d=!1;const f=()=>{u=new Promise(D=>{c=D})};f();let{keyframes:p,duration:b=300,ease:v,times:m}=i;if(CSe(e,i)){const D=vC(oe(B({},i),{repeat:0,delay:0}));let k={done:!1,value:p[0]};const P=[];let M=0;for(;!k.done&&M<ESe;)k=D.sample(M),P.push(k.value),M+=_S;m=void 0,p=P,b=M-_S,v="linear"}const g=O1e(t.owner.current,e,p,oe(B({},i),{duration:b,ease:v,times:m})),x=()=>{d=!1,g.cancel()},w=()=>{d=!0,hi.update(x),c(),f()};return g.onfinish=()=>{d||(t.set(N1e(p,i)),r&&r(),w())},{then(D,k){return u.then(D,k)},attachTimeline(D){return g.timeline=D,g.onfinish=null,eo},get time(){return sd(g.currentTime||0)},set time(D){g.currentTime=Cp(D)},get speed(){return g.playbackRate},set speed(D){g.playbackRate=D},get duration(){return sd(b)},play:()=>{l||(g.play(),gd(x))},pause:()=>g.pause(),stop:()=>{if(l=!0,g.playState==="idle")return;const{currentTime:D}=g;if(D){const k=vC(oe(B({},i),{autoplay:!1}));t.setWithVelocity(k.sample(D-_S).value,k.sample(D).value,_S)}w()},complete:()=>{d||g.finish()},cancel:w}}function TSe({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:eo,pause:eo,stop:eo,then:o=>(o(),Promise.resolve()),cancel:eo,complete:eo});return e?vC({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const MSe={type:"spring",stiffness:500,damping:25,restSpeed:10},PSe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),DSe={type:"keyframes",duration:.8},RSe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kSe=(t,{keyframes:e})=>e.length>2?DSe:dm.has(t)?t.startsWith("scale")?PSe(e[1]):MSe:RSe,Rk=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Jf.test(e)||e==="0")&&!e.startsWith("url(")),ISe=new Set(["brightness","contrast","saturate","opacity"]);function FSe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(uT)||[];if(!r)return t;const i=n.replace(r,"");let o=ISe.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const OSe=/([a-z-]*)\(.*?\)/g,kk=oe(B({},Jf),{getAnimatableNone:t=>{const e=t.match(OSe);return e?e.map(FSe).join(" "):t}}),NSe=oe(B({},cK),{color:Cs,backgroundColor:Cs,outlineColor:Cs,fill:Cs,stroke:Cs,borderColor:Cs,borderTopColor:Cs,borderRightColor:Cs,borderBottomColor:Cs,borderLeftColor:Cs,filter:kk,WebkitFilter:kk}),PN=t=>NSe[t];function XK(t,e){let n=PN(t);return n!==kk&&(n=Jf),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const QK=t=>/^0[^.\s]+$/.test(t);function LSe(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||QK(t)}function BSe(t,e,n,r){const i=Rk(e,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const s=r.from!==void 0?r.from:t.get();let a;const l=[];for(let c=0;c<o.length;c++)o[c]===null&&(o[c]=c===0?s:o[c-1]),LSe(o[c])&&l.push(c),typeof o[c]=="string"&&o[c]!=="none"&&o[c]!=="0"&&(a=o[c]);if(i&&l.length&&a)for(let c=0;c<l.length;c++){const u=l[c];o[u]=XK(e,a)}return o}function jSe(d){var f=d,{when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:s,repeatDelay:a,from:l,elapsed:c}=f,u=Tt(f,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"]);return!!Object.keys(u).length}function DN(t,e){return t[e]||t.default||t}const USe={skipAnimations:!1},RN=(t,e,n,r={})=>i=>{const o=DN(r,t)||{},s=o.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Cp(s);const l=BSe(e,t,n,o),c=l[0],u=l[l.length-1],d=Rk(t,c),f=Rk(t,u);let p=oe(B({keyframes:l,velocity:e.getVelocity(),ease:"easeOut"},o),{delay:-a,onUpdate:b=>{e.set(b),o.onUpdate&&o.onUpdate(b)},onComplete:()=>{i(),o.onComplete&&o.onComplete()}});if(jSe(o)||(p=B(B({},p),kSe(t,p))),p.duration&&(p.duration=Cp(p.duration)),p.repeatDelay&&(p.repeatDelay=Cp(p.repeatDelay)),!d||!f||F1e.current||o.type===!1||USe.skipAnimations)return TSe(p);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const b=ASe(e,t,p);if(b)return b}return vC(p)};function yC(t){return!!(da(t)&&t.add)}const ZK=t=>/^\-?\d*\.?\d+$/.test(t);function kN(t,e){t.indexOf(e)===-1&&t.push(e)}function IN(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class FN{constructor(){this.subscriptions=[]}add(e){return kN(this.subscriptions,e),()=>IN(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const s=this.subscriptions[o];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const zSe=t=>!isNaN(parseFloat(t));class VSe{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:o,timestamp:s}=ss;this.lastUpdated!==s&&(this.timeDelta=o,this.lastUpdated=s,hi.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>hi.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=zSe(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new FN);const r=this.events[e].add(n);return e==="change"?()=>{r(),hi.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?qK(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Dv(t,e){return new VSe(t,e)}const JK=t=>e=>e.test(t),WSe={test:t=>t==="auto",parse:t=>t},eY=[fm,Bn,Hc,af,Xwe,Ywe,WSe],iy=t=>eY.find(JK(t)),$Se=[...eY,Cs,Jf],HSe=t=>$Se.find(JK(t));function GSe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Dv(n))}function qSe(t,e){const n=fT(t,e);let s=n?t.makeTargetAnimatable(n,!1):{},{transitionEnd:r={},transition:i={}}=s,o=Tt(s,["transitionEnd","transition"]);o=B(B({},o),r);for(const a in o){const l=u1e(o[a]);GSe(t,a,l)}}function KSe(t,e,n){var r,i;const o=Object.keys(e).filter(a=>!t.hasValue(a)),s=o.length;if(s)for(let a=0;a<s;a++){const l=o[a],c=e[l];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(i=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&i!==void 0?i:e[l]),u!=null&&(typeof u=="string"&&(ZK(u)||QK(u))?u=parseFloat(u):!HSe(u)&&Jf.test(c)&&(u=XK(l,c)),t.addValue(l,Dv(u,{owner:t})),n[l]===void 0&&(n[l]=u),u!==null&&t.setBaseTarget(l,u))}}function YSe(t,e){return e?(e[t]||e.default||e).from:void 0}function XSe(t,e,n){const r={};for(const i in t){const o=YSe(i,e);if(o!==void 0)r[i]=o;else{const s=n.getValue(i);s&&(r[i]=s.get())}}return r}function QSe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function ZSe(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function tY(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let d=t.makeTargetAnimatable(e),{transition:o=t.getDefaultTransition(),transitionEnd:s}=d,a=Tt(d,["transition","transitionEnd"]);const l=t.getValue("willChange");r&&(o=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const f in a){const p=t.getValue(f),b=a[f];if(!p||b===void 0||u&&QSe(u,f))continue;const v=B({delay:n,elapsed:0},DN(o||{},f));if(window.HandoffAppearAnimations){const x=t.getProps()[nK];if(x){const w=window.HandoffAppearAnimations(x,f,p,hi);w!==null&&(v.elapsed=w,v.isHandoff=!0)}}let m=!v.isHandoff&&!ZSe(p,b);if(v.type==="spring"&&(p.getVelocity()||v.velocity)&&(m=!1),p.animation&&(m=!1),m)continue;p.start(RN(f,p,b,t.shouldReduceMotion&&dm.has(f)?{type:!1}:v));const g=p.animation;yC(l)&&(l.add(f),g.then(()=>l.remove(f))),c.push(g)}return s&&Promise.all(c).then(()=>{s&&qSe(t,s)}),c}function Ik(t,e,n={}){const r=fT(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(tY(t,r,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:d}=i;return JSe(t,e,c+l,u,d,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,c]=a==="beforeChildren"?[o,s]:[s,o];return l().then(()=>c())}else return Promise.all([o(),s(n.delay)])}function JSe(t,e,n=0,r=0,i=1,o){const s=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(e_e).forEach((c,u)=>{c.notify("AnimationStart",e),s.push(Ik(c,e,oe(B({},o),{delay:n+l(u)})).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(s)}function e_e(t,e){return t.sortNodePosition(e)}function t_e(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>Ik(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=Ik(t,e,n);else{const i=typeof e=="function"?fT(t,e,n.custom):e;r=Promise.all(tY(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const n_e=[...mN].reverse(),r_e=mN.length;function i_e(t){return e=>Promise.all(e.map(({animation:n,options:r})=>t_e(t,n,r)))}function o_e(t){let e=i_e(t);const n=a_e();let r=!0;const i=(l,c)=>{const u=fT(t,c);if(u){const d=u,{transition:f,transitionEnd:p}=d,b=Tt(d,["transition","transitionEnd"]);l=B(B(B({},l),b),p)}return l};function o(l){e=l(t)}function s(l,c){const u=t.getProps(),d=t.getVariantContext(!0)||{},f=[],p=new Set;let b={},v=1/0;for(let g=0;g<r_e;g++){const x=n_e[g],w=n[x],S=u[x]!==void 0?u[x]:d[x],D=vb(S),k=x===c?w.isActive:null;k===!1&&(v=g);let P=S===d[x]&&S!==u[x]&&D;if(P&&r&&t.manuallyAnimateOnMount&&(P=!1),w.protectedKeys=B({},b),!w.isActive&&k===null||!S&&!w.prevProp||lT(S)||typeof S=="boolean")continue;let T=s_e(w.prevProp,S)||x===c&&w.isActive&&!P&&D||g>v&&D,_=!1;const E=Array.isArray(S)?S:[S];let R=E.reduce(i,{});k===!1&&(R={});const{prevResolvedValues:F={}}=w,L=B(B({},F),R),N=U=>{T=!0,p.has(U)&&(_=!0,p.delete(U)),w.needsAnimating[U]=!0};for(const U in L){const H=R[U],j=F[U];if(b.hasOwnProperty(U))continue;let z=!1;pC(H)&&pC(j)?z=!EK(H,j):z=H!==j,z?H!==void 0?N(U):p.add(U):H!==void 0&&p.has(U)?N(U):w.protectedKeys[U]=!0}w.prevProp=S,w.prevResolvedValues=R,w.isActive&&(b=B(B({},b),R)),r&&t.blockInitialAnimation&&(T=!1),T&&(!P||_)&&f.push(...E.map(U=>({animation:U,options:B({type:x},l)})))}if(p.size){const g={};p.forEach(x=>{const w=t.getBaseTarget(x);w!==void 0&&(g[x]=w)}),f.push({animation:g})}let m=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(m=!1),r=!1,m?e(f):Promise.resolve()}function a(l,c,u){var d;if(n[l].isActive===c)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(p=>{var b;return(b=p.animationState)===null||b===void 0?void 0:b.setActive(l,c)}),n[l].isActive=c;const f=s(u,l);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:s,setActive:a,setAnimateFunction:o,getState:()=>n}}function s_e(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!EK(e,t):!1}function Oh(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function a_e(){return{animate:Oh(!0),whileInView:Oh(),whileHover:Oh(),whileTap:Oh(),whileDrag:Oh(),whileFocus:Oh(),exit:Oh()}}class l_e extends ch{constructor(e){super(e),e.animationState||(e.animationState=o_e(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),lT(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let c_e=0;class u_e extends ch{constructor(){super(...arguments),this.id=c_e++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const o=this.node.animationState.setActive("exit",!e,{custom:r!=null?r:this.node.getProps().custom});n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const d_e={animation:{Feature:l_e},exit:{Feature:u_e}},u6=(t,e)=>Math.abs(t-e);function f_e(t,e){const n=u6(t.x,e.x),r=u6(t.y,e.y);return Math.sqrt(Vl(n,2)+Vl(r,2))}class nY{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=wP(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=f_e(d.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:b}=d,{timestamp:v}=ss;this.history.push(oe(B({},b),{timestamp:v}));const{onStart:m,onMove:g}=this.handlers;f||(m&&m(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=bP(f,this.transformPagePoint),hi.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:p,onSessionEnd:b,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=wP(d.type==="pointercancel"?this.lastMoveEventInfo:bP(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,m),b&&b(d,m)},!xK(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=dT(e),a=bP(s,this.transformPagePoint),{point:l}=a,{timestamp:c}=ss;this.history=[oe(B({},l),{timestamp:c})];const{onSessionStart:u}=n;u&&u(e,wP(a,this.history)),this.removeListeners=Uf(od(this.contextWindow,"pointermove",this.handlePointerMove),od(this.contextWindow,"pointerup",this.handlePointerUp),od(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),gd(this.updatePoint)}}function bP(t,e){return e?{point:e(t.point)}:t}function d6(t,e){return{x:t.x-e.x,y:t.y-e.y}}function wP({point:t},e){return{point:t,delta:d6(t,rY(e)),offset:d6(t,h_e(e)),velocity:p_e(e,.1)}}function h_e(t){return t[0]}function rY(t){return t[t.length-1]}function p_e(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=rY(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Cp(e)));)n--;if(!r)return{x:0,y:0};const o=sd(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const s={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function Fa(t){return t.max-t.min}function Fk(t,e=0,n=.01){return Math.abs(t-e)<=n}function f6(t,e,n,r=.5){t.origin=r,t.originPoint=Ri(e.min,e.max,t.origin),t.scale=Fa(n)/Fa(e),(Fk(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Ri(n.min,n.max,t.origin)-t.originPoint,(Fk(t.translate)||isNaN(t.translate))&&(t.translate=0)}function vx(t,e,n,r){f6(t.x,e.x,n.x,r?r.originX:void 0),f6(t.y,e.y,n.y,r?r.originY:void 0)}function h6(t,e,n){t.min=n.min+e.min,t.max=t.min+Fa(e)}function m_e(t,e,n){h6(t.x,e.x,n.x),h6(t.y,e.y,n.y)}function p6(t,e,n){t.min=e.min-n.min,t.max=t.min+Fa(e)}function yx(t,e,n){p6(t.x,e.x,n.x),p6(t.y,e.y,n.y)}function g_e(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ri(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ri(n,t,r.max):Math.min(t,n)),t}function m6(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function v_e(t,{top:e,left:n,bottom:r,right:i}){return{x:m6(t.x,n,i),y:m6(t.y,e,r)}}function g6(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function y_e(t,e){return{x:g6(t.x,e.x),y:g6(t.y,e.y)}}function x_e(t,e){let n=.5;const r=Fa(t),i=Fa(e);return i>r?n=xb(e.min,e.max-r,t.min):r>i&&(n=xb(t.min,t.max-i,e.min)),Zf(0,1,n)}function b_e(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Ok=.35;function w_e(t=Ok){return t===!1?t=0:t===!0&&(t=Ok),{x:v6(t,"left","right"),y:v6(t,"top","bottom")}}function v6(t,e,n){return{min:y6(t,e),max:y6(t,n)}}function y6(t,e){return typeof t=="number"?t:t[e]||0}const x6=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ug=()=>({x:x6(),y:x6()}),b6=()=>({min:0,max:0}),lo=()=>({x:b6(),y:b6()});function nl(t){return[t("x"),t("y")]}function iY({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function S_e({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function __e(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function SP(t){return t===void 0||t===1}function Nk({scale:t,scaleX:e,scaleY:n}){return!SP(t)||!SP(e)||!SP(n)}function qh(t){return Nk(t)||oY(t)||t.z||t.rotate||t.rotateX||t.rotateY}function oY(t){return w6(t.x)||w6(t.y)}function w6(t){return t&&t!=="0%"}function xC(t,e,n){const r=t-n,i=e*r;return n+i}function S6(t,e,n,r,i){return i!==void 0&&(t=xC(t,i,r)),xC(t,n,r)+e}function Lk(t,e=0,n=1,r,i){t.min=S6(t.min,e,n,r,i),t.max=S6(t.max,e,n,r,i)}function sY(t,{x:e,y:n}){Lk(t.x,e.translate,e.scale,e.originPoint),Lk(t.y,n.translate,n.scale,n.originPoint)}function E_e(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,s;for(let a=0;a<i;a++){o=n[a],s=o.projectionDelta;const l=o.instance;l&&l.style&&l.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&zg(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,sY(t,s)),r&&qh(o.latestValues)&&zg(t,o.latestValues))}e.x=_6(e.x),e.y=_6(e.y)}function _6(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function ff(t,e){t.min=t.min+e,t.max=t.max+e}function E6(t,e,[n,r,i]){const o=e[i]!==void 0?e[i]:.5,s=Ri(t.min,t.max,o);Lk(t,e[n],e[r],s,e.scale)}const C_e=["x","scaleX","originX"],A_e=["y","scaleY","originY"];function zg(t,e){E6(t.x,e,C_e),E6(t.y,e,A_e)}function aY(t,e){return iY(__e(t.getBoundingClientRect(),e))}function T_e(t,e,n){const r=aY(t,n),{scroll:i}=e;return i&&(ff(r.x,i.offset.x),ff(r.y,i.offset.y)),r}const lY=({current:t})=>t?t.ownerDocument.defaultView:null,M_e=new WeakMap;class P_e{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=lo(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(dT(u,"page").point)},o=(u,d)=>{const{drag:f,dragPropagation:p,onDragStart:b}=this.getProps();if(f&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=wK(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),nl(m=>{let g=this.getAxisMotionValue(m).get()||0;if(Hc.test(g)){const{projection:x}=this.visualElement;if(x&&x.layout){const w=x.layout.layoutBox[m];w&&(g=Fa(w)*(parseFloat(g)/100))}}this.originPoint[m]=g}),b&&hi.update(()=>b(u,d),!1,!0);const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},s=(u,d)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:b,onDrag:v}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:m}=d;if(p&&this.currentDirection===null){this.currentDirection=D_e(m),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",d.point,m),this.updateAxis("y",d.point,m),this.visualElement.render(),v&&v(u,d)},a=(u,d)=>this.stop(u,d),l=()=>nl(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new nY(e,{onSessionStart:i,onStart:o,onMove:s,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:lY(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&hi.update(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!ES(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=g_e(s,this.constraints[e],this.elastic[e])),o.set(s)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&Bg(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=v_e(i.layoutBox,n):this.constraints=!1,this.elastic=w_e(r),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&nl(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=b_e(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Bg(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=T_e(r,i.root,this.visualElement.getTransformPagePoint());let s=y_e(i.layout.layoutBox,o);if(n){const a=n(S_e(s));this.hasMutatedConstraints=!!a,a&&(s=iY(a))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=nl(u=>{if(!ES(u,n,this.currentDirection))return;let d=l&&l[u]||{};s&&(d={min:0,max:0});const f=i?200:1e6,p=i?40:1e7,b=B(B({type:"inertia",velocity:r?e[u]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10},o),d);return this.startAxisValueAnimation(u,b)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(RN(e,r,0,n))}stopAnimation(){nl(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){nl(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){nl(n=>{const{drag:r}=this.getProps();if(!ES(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:a}=i.layout.layoutBox[n];o.set(e[n]-Ri(s,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Bg(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};nl(s=>{const a=this.getAxisMotionValue(s);if(a){const l=a.get();i[s]=x_e({min:l,max:l},this.constraints[s])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),nl(s=>{if(!ES(s,e,null))return;const a=this.getAxisMotionValue(s),{min:l,max:c}=this.constraints[s];a.set(Ri(l,c,i[s]))})}addListeners(){if(!this.visualElement.current)return;M_e.set(this.visualElement,this);const e=this.visualElement.current,n=od(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Bg(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const s=qu(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(nl(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{s(),n(),o(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:s=Ok,dragMomentum:a=!0}=e;return oe(B({},e),{drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:s,dragMomentum:a})}}function ES(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function D_e(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class R_e extends ch{constructor(e){super(e),this.removeGroupControls=eo,this.removeListeners=eo,this.controls=new P_e(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||eo}unmount(){this.removeGroupControls(),this.removeListeners()}}const C6=t=>(e,n)=>{t&&hi.update(()=>t(e,n))};class k_e extends ch{constructor(){super(...arguments),this.removePointerDownListener=eo}onPointerDown(e){this.session=new nY(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:lY(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:C6(e),onStart:C6(n),onMove:r,onEnd:(o,s)=>{delete this.session,i&&hi.update(()=>i(o,s))}}}mount(){this.removePointerDownListener=od(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function cY(){const t=A.useContext(gw);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=A.useId();return A.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}function I_e(){return F_e(A.useContext(gw))}function F_e(t){return t===null?!0:t.isPresent}const eE={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function A6(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const oy={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Bn.test(t))t=parseFloat(t);else return t;const n=A6(t,e.target.x),r=A6(t,e.target.y);return`${n}% ${r}%`}},O_e={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Jf.parse(t);if(i.length>5)return r;const o=Jf.createTransformer(t),s=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+s]/=a,i[1+s]/=l;const c=Ri(a,l,.5);return typeof i[2+s]=="number"&&(i[2+s]/=c),typeof i[3+s]=="number"&&(i[3+s]/=c),o(i)}};class N_e extends Ot.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;Vwe(L_e),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions(oe(B({},o.options),{onExitComplete:()=>this.safeToRemove()}))),eE.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,s=r.projection;return s&&(s.isPresent=o,i||e.layoutDependency!==n||n===void 0?s.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?s.promote():s.relegate()||hi.postRender(()=>{const a=s.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function uY(t){const[e,n]=cY(),r=A.useContext(vN);return Ot.createElement(N_e,oe(B({},t),{layoutGroup:r,switchLayoutGroup:A.useContext(iK),isPresent:e,safeToRemove:n}))}const L_e={borderRadius:oe(B({},oy),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:oy,borderTopRightRadius:oy,borderBottomLeftRadius:oy,borderBottomRightRadius:oy,boxShadow:O_e},dY=["TopLeft","TopRight","BottomLeft","BottomRight"],B_e=dY.length,T6=t=>typeof t=="string"?parseFloat(t):t,M6=t=>typeof t=="number"||Bn.test(t);function j_e(t,e,n,r,i,o){i?(t.opacity=Ri(0,n.opacity!==void 0?n.opacity:1,U_e(r)),t.opacityExit=Ri(e.opacity!==void 0?e.opacity:1,0,z_e(r))):o&&(t.opacity=Ri(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let s=0;s<B_e;s++){const a=`border${dY[s]}Radius`;let l=P6(e,a),c=P6(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||M6(l)===M6(c)?(t[a]=Math.max(Ri(T6(l),T6(c),r),0),(Hc.test(c)||Hc.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Ri(e.rotate||0,n.rotate||0,r))}function P6(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const U_e=fY(0,.5,IK),z_e=fY(.5,.95,eo);function fY(t,e,n){return r=>r<t?0:r>e?1:n(xb(t,e,r))}function D6(t,e){t.min=e.min,t.max=e.max}function Ja(t,e){D6(t.x,e.x),D6(t.y,e.y)}function R6(t,e,n,r,i){return t-=e,t=xC(t,1/n,r),i!==void 0&&(t=xC(t,1/i,r)),t}function V_e(t,e=0,n=1,r=.5,i,o=t,s=t){if(Hc.test(e)&&(e=parseFloat(e),e=Ri(s.min,s.max,e/100)-s.min),typeof e!="number")return;let a=Ri(o.min,o.max,r);t===o&&(a-=e),t.min=R6(t.min,e,n,a,i),t.max=R6(t.max,e,n,a,i)}function k6(t,e,[n,r,i],o,s){V_e(t,e[n],e[r],e[i],e.scale,o,s)}const W_e=["x","scaleX","originX"],$_e=["y","scaleY","originY"];function I6(t,e,n,r){k6(t.x,e,W_e,n?n.x:void 0,r?r.x:void 0),k6(t.y,e,$_e,n?n.y:void 0,r?r.y:void 0)}function F6(t){return t.translate===0&&t.scale===1}function hY(t){return F6(t.x)&&F6(t.y)}function H_e(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function pY(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function O6(t){return Fa(t.x)/Fa(t.y)}class G_e{constructor(){this.members=[]}add(e){kN(this.members,e),e.scheduleRender()}remove(e){if(IN(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function N6(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y;if((i||o)&&(r=`translate3d(${i}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:c,rotateY:u}=n;l&&(r+=`rotate(${l}deg) `),c&&(r+=`rotateX(${c}deg) `),u&&(r+=`rotateY(${u}deg) `)}const s=t.x.scale*e.x,a=t.y.scale*e.y;return(s!==1||a!==1)&&(r+=`scale(${s}, ${a})`),r||"none"}const q_e=(t,e)=>t.depth-e.depth;class K_e{constructor(){this.children=[],this.isDirty=!1}add(e){kN(this.children,e),this.isDirty=!0}remove(e){IN(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(q_e),this.isDirty=!1,this.children.forEach(e)}}function Y_e(t,e){const n=performance.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(gd(r),t(o-e))};return hi.read(r,!0),()=>gd(r)}function X_e(t){window.MotionDebug&&window.MotionDebug.record(t)}function Q_e(t){return t instanceof SVGElement&&t.tagName!=="svg"}function Z_e(t,e,n){const r=da(t)?t:Dv(t);return r.start(RN("",r,e,n)),r.animation}const L6=["","X","Y","Z"],J_e={visibility:"hidden"},B6=1e3;let eEe=0;const Kh={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function mY({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},a=e==null?void 0:e()){this.id=eEe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Kh.totalNodes=Kh.resolvedTargetDeltas=Kh.recalculatedProjection=0,this.nodes.forEach(rEe),this.nodes.forEach(lEe),this.nodes.forEach(cEe),this.nodes.forEach(iEe),X_e(Kh)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new K_e)}addEventListener(s,a){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new FN),this.eventHandlers.get(s).add(a)}notifyListeners(s,...a){const l=this.eventHandlers.get(s);l&&l.notify(...a)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Q_e(s),this.instance=s;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(s,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=Y_e(f,250),eE.hasAnimatedSinceResize&&(eE.hasAnimatedSinceResize=!1,this.nodes.forEach(U6))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||pEe,{onLayoutAnimationStart:m,onLayoutAnimationComplete:g}=u.getProps(),x=!this.targetLayout||!pY(this.targetLayout,b)||p,w=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||f&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,w);const S=oe(B({},DN(v,"layout")),{onPlay:m,onComplete:g});(u.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else f||U6(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,gd(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(uEe),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(j6);return}this.isUpdating||this.nodes.forEach(sEe),this.isUpdating=!1,this.nodes.forEach(aEe),this.nodes.forEach(tEe),this.nodes.forEach(nEe),this.clearAllSnapshots();const a=performance.now();ss.delta=Zf(0,1e3/60,a-ss.timestamp),ss.timestamp=a,ss.isProcessing=!0,hP.update.process(ss),hP.preRender.process(ss),hP.render.process(ss),ss.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(oEe),this.sharedNodes.forEach(dEe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,hi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){hi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=lo(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:s,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!hY(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;s&&(a||qh(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return s&&(l=this.removeTransform(l)),mEe(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return lo();const a=s.measureViewportBox(),{scroll:l}=this.root;return l&&(ff(a.x,l.offset.x),ff(a.y,l.offset.y)),a}removeElementScroll(s){const a=lo();Ja(a,s);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:d}=c;if(c!==this.root&&u&&d.layoutScroll){if(u.isRoot){Ja(a,s);const{scroll:f}=this.root;f&&(ff(a.x,-f.offset.x),ff(a.y,-f.offset.y))}ff(a.x,u.offset.x),ff(a.y,u.offset.y)}}return a}applyTransform(s,a=!1){const l=lo();Ja(l,s);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&zg(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),qh(u.latestValues)&&zg(l,u.latestValues)}return qh(this.latestValues)&&zg(l,this.latestValues),l}removeTransform(s){const a=lo();Ja(a,s);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!qh(c.latestValues))continue;Nk(c.latestValues)&&c.updateSnapshot();const u=lo(),d=c.measurePageBox();Ja(u,d),I6(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return qh(this.latestValues)&&I6(a,this.latestValues),a}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options=oe(B(B({},this.options),s),{crossfade:s.crossfade!==void 0?s.crossfade:!0})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ss.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=ss.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=lo(),this.relativeTargetOrigin=lo(),yx(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Ja(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=lo(),this.targetWithTransforms=lo()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),m_e(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ja(this.target,this.layout.layoutBox),sY(this.target,this.targetDelta)):Ja(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=lo(),this.relativeTargetOrigin=lo(),yx(this.relativeTargetOrigin,this.target,p.target),Ja(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Kh.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Nk(this.parent.latestValues)||oY(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ss.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Ja(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;E_e(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:b}=a;if(!b){this.projectionTransform&&(this.projectionDelta=Ug(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ug(),this.projectionDeltaWithTransform=Ug());const v=this.projectionTransform;vx(this.projectionDelta,this.layoutCorrected,b,this.latestValues),this.projectionTransform=N6(this.projectionDelta,this.treeScale),(this.projectionTransform!==v||this.treeScale.x!==f||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),Kh.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),s){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(s,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u=B({},this.latestValues),d=Ug();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=lo(),p=l?l.source:void 0,b=this.layout?this.layout.source:void 0,v=p!==b,m=this.getStack(),g=!m||m.members.length<=1,x=!!(v&&!g&&this.options.crossfade===!0&&!this.path.some(hEe));this.animationProgress=0;let w;this.mixTargetDelta=S=>{const D=S/1e3;z6(d.x,s.x,D),z6(d.y,s.y,D),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(yx(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),fEe(this.relativeTarget,this.relativeTargetOrigin,f,D),w&&H_e(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=lo()),Ja(w,this.relativeTarget)),v&&(this.animationValues=u,j_e(u,c,this.latestValues,D,x,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(gd(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=hi.update(()=>{eE.hasAnimatedSinceResize=!0,this.currentAnimation=Z_e(0,B6,oe(B({},s),{onUpdate:a=>{this.mixTargetDelta(a),s.onUpdate&&s.onUpdate(a)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(B6),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=s;if(!(!a||!l||!c)){if(this!==s&&this.layout&&c&&gY(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||lo();const d=Fa(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+d;const f=Fa(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+f}Ja(a,l),zg(a,u),vx(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(s,a){this.sharedNodes.has(s)||this.sharedNodes.set(s,new G_e),this.sharedNodes.get(s).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:a}=this.options;return a?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:a}=this.options;return a?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetRotation(){const{visualElement:s}=this.options;if(!s)return;let a=!1;const{latestValues:l}=s;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let u=0;u<L6.length;u++){const d="rotate"+L6[u];l[d]&&(c[d]=l[d],s.setStaticValue(d,0))}s.render();for(const u in c)s.setStaticValue(u,c[u]);s.scheduleRender()}getProjectionStyles(s){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return J_e;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=J_(s==null?void 0:s.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=J_(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!qh(this.latestValues)&&(v.transform=u?u({},""):"none",this.hasProjected=!1),v}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=N6(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:p,y:b}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${b.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const v in fC){if(f[v]===void 0)continue;const{correct:m,applyTo:g}=fC[v],x=c.transform==="none"?f[v]:m(f[v],d);if(g){const w=g.length;for(let S=0;S<w;S++)c[g[S]]=x}else c[v]=x}return this.options.layoutId&&(c.pointerEvents=d===this?J_(s==null?void 0:s.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var a;return(a=s.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(j6),this.root.sharedNodes.clear()}}}function tEe(t){t.updateLayout()}function nEe(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,s=n.source!==t.layout.source;o==="size"?nl(d=>{const f=s?n.measuredBox[d]:n.layoutBox[d],p=Fa(f);f.min=r[d].min,f.max=f.min+p}):gY(o,n.layoutBox,r)&&nl(d=>{const f=s?n.measuredBox[d]:n.layoutBox[d],p=Fa(r[d]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+p)});const a=Ug();vx(a,r,n.layoutBox);const l=Ug();s?vx(l,t.applyTransform(i,!0),n.measuredBox):vx(l,r,n.layoutBox);const c=!hY(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const b=lo();yx(b,n.layoutBox,f.layoutBox);const v=lo();yx(v,r,p.layoutBox),pY(b,v)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=b,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function rEe(t){Kh.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function iEe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function oEe(t){t.clearSnapshot()}function j6(t){t.clearMeasurements()}function sEe(t){t.isLayoutDirty=!1}function aEe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function U6(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function lEe(t){t.resolveTargetDelta()}function cEe(t){t.calcProjection()}function uEe(t){t.resetRotation()}function dEe(t){t.removeLeadSnapshot()}function z6(t,e,n){t.translate=Ri(e.translate,0,n),t.scale=Ri(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function V6(t,e,n,r){t.min=Ri(e.min,n.min,r),t.max=Ri(e.max,n.max,r)}function fEe(t,e,n,r){V6(t.x,e.x,n.x,r),V6(t.y,e.y,n.y,r)}function hEe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const pEe={duration:.45,ease:[.4,0,.1,1]},W6=t=>typeof navigator!="undefined"&&navigator.userAgent.toLowerCase().includes(t),$6=W6("applewebkit/")&&!W6("chrome/")?Math.round:eo;function H6(t){t.min=$6(t.min),t.max=$6(t.max)}function mEe(t){H6(t.x),H6(t.y)}function gY(t,e,n){return t==="position"||t==="preserve-aspect"&&!Fk(O6(e),O6(n),.2)}const gEe=mY({attachResizeListener:(t,e)=>qu(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),_P={current:void 0},vY=mY({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!_P.current){const t=new gEe({});t.mount(window),t.setOptions({layoutScroll:!0}),_P.current=t}return _P.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),vEe={pan:{Feature:k_e},drag:{Feature:R_e,ProjectionNode:vY,MeasureLayout:uY}},yEe=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function xEe(t){const e=yEe.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function Bk(t,e,n=1){const[r,i]=xEe(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const s=o.trim();return ZK(s)?parseFloat(s):s}else return Tk(i)?Bk(i,e,n+1):i}function bEe(t,r,n){var e=Tt(r,[]);const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n=B({},n)),t.values.forEach(o=>{const s=o.get();if(!Tk(s))return;const a=Bk(s,i);a&&o.set(a)});for(const o in e){const s=e[o];if(!Tk(s))continue;const a=Bk(s,i);a&&(e[o]=a,n||(n={}),n[o]===void 0&&(n[o]=s))}return{target:e,transitionEnd:n}}const wEe=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),yY=t=>wEe.has(t),SEe=t=>Object.keys(t).some(yY),G6=t=>t===fm||t===Bn,q6=(t,e)=>parseFloat(t.split(", ")[e]),K6=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return q6(i[1],e);{const o=r.match(/^matrix\((.+)\)$/);return o?q6(o[1],t):0}},_Ee=new Set(["x","y","z"]),EEe=vw.filter(t=>!_Ee.has(t));function CEe(t){const e=[];return EEe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Rv={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:K6(4,13),y:K6(5,14)};Rv.translateX=Rv.x;Rv.translateY=Rv.y;const AEe=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,o=getComputedStyle(i),{display:s}=o,a={};s==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=Rv[c](r,o)}),e.render();const l=e.measureViewportBox();return n.forEach(c=>{const u=e.getValue(c);u&&u.jump(a[c]),t[c]=Rv[c](l,o)}),t},TEe=(t,e,n={},r={})=>{e=B({},e),r=B({},r);const i=Object.keys(e).filter(yY);let o=[],s=!1;const a=[];if(i.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let u=n[l],d=iy(u);const f=e[l];let p;if(pC(f)){const b=f.length,v=f[0]===null?1:0;u=f[v],d=iy(u);for(let m=v;m<b&&f[m]!==null;m++)p?CN(iy(f[m])===p):p=iy(f[m])}else p=iy(f);if(d!==p)if(G6(d)&&G6(p)){const b=c.get();typeof b=="string"&&c.set(parseFloat(b)),typeof f=="string"?e[l]=parseFloat(f):Array.isArray(f)&&p===Bn&&(e[l]=f.map(parseFloat))}else d!=null&&d.transform&&(p!=null&&p.transform)&&(u===0||f===0)?u===0?c.set(p.transform(u)):e[l]=d.transform(f):(s||(o=CEe(t),s=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],c.jump(f))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=AEe(e,t,a);return o.length&&o.forEach(([u,d])=>{t.getValue(u).set(d)}),t.render(),aT&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function MEe(t,e,n,r){return SEe(e)?TEe(t,e,n,r):{target:e,transitionEnd:r}}const PEe=(t,e,n,r)=>{const i=bEe(t,e,r);return e=i.target,r=i.transitionEnd,MEe(t,e,n,r)},jk={current:null},xY={current:!1};function DEe(){if(xY.current=!0,!!aT)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>jk.current=t.matches;t.addListener(e),e()}else jk.current=!1}function REe(t,e,n){const{willChange:r}=e;for(const i in e){const o=e[i],s=n[i];if(da(o))t.addValue(i,o),yC(r)&&r.add(i);else if(da(s))t.addValue(i,Dv(o,{owner:t})),yC(r)&&r.remove(i);else if(s!==o)if(t.hasValue(i)){const a=t.getValue(i);!a.hasAnimated&&a.set(o)}else{const a=t.getStaticValue(i);t.addValue(i,Dv(a!==void 0?a:o,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const Y6=new WeakMap,bY=Object.keys(yb),kEe=bY.length,X6=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],IEe=gN.length;class FEe{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:o},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>hi.render(this.render,!1,!0);const{latestValues:a,renderState:l}=o;this.latestValues=a,this.baseTarget=B({},a),this.initialValues=n.initial?B({},a):{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=s,this.isControllingVariants=cT(n),this.isVariantNode=rK(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const d=this.scrapeMotionValuesFromProps(n,{}),{willChange:c}=d,u=Tt(d,["willChange"]);for(const f in u){const p=u[f];a[f]!==void 0&&da(p)&&(p.set(a[f],!1),yC(c)&&c.add(f))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,Y6.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),xY.current||DEe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:jk.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Y6.delete(this.current),this.projection&&this.projection.unmount(),gd(this.notifyUpdate),gd(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=dm.has(e),i=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&hi.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures(s,r,i,o){var a=s,{children:e}=a,n=Tt(a,["children"]);let l,c;for(let u=0;u<kEe;u++){const d=bY[u],{isEnabled:f,Feature:p,ProjectionNode:b,MeasureLayout:v}=yb[d];b&&(l=b),f(n)&&(!this.features[d]&&p&&(this.features[d]=new p(this)),v&&(c=v))}if((this.type==="html"||this.type==="svg")&&!this.projection&&l){this.projection=new l(this.latestValues,this.parent&&this.parent.projection);const{layoutId:u,layout:d,drag:f,dragConstraints:p,layoutScroll:b,layoutRoot:v}=n;this.projection.setOptions({layoutId:u,layout:d,alwaysMeasureLayout:!!f||p&&Bg(p),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof d=="string"?d:"both",initialPromotionConfig:o,layoutScroll:b,layoutRoot:v})}return c}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):lo()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<X6.length;r++){const i=X6[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o=e["on"+i];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=REe(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<IEe;r++){const i=gN[r],o=this.props[i];(vb(o)||o===!1)&&(n[i]=o)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Dv(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=EN(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!da(o)?o:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new FN),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class wY extends FEe{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance(s,{transformValues:i},o){var a=s,{transition:e,transitionEnd:n}=a,r=Tt(a,["transition","transitionEnd"]);let l=XSe(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),l&&(l=i(l))),o){KSe(this,r,l);const c=PEe(this,r,l,n);n=c.transitionEnd,r=c.target}return B({transition:e,transitionEnd:n},r)}}function OEe(t){return window.getComputedStyle(t)}class NEe extends wY{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(dm.has(n)){const r=PN(n);return r&&r.default||0}else{const r=OEe(e),i=(aK(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return aY(e,n)}build(e,n,r,i){xN(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return _N(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;da(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){hK(e,n,r,i)}}class LEe extends wY{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(dm.has(n)){const r=PN(n);return r&&r.default||0}return n=pK.has(n)?n:pN(n),e.getAttribute(n)}measureInstanceViewportBox(){return lo()}scrapeMotionValuesFromProps(e,n){return gK(e,n)}build(e,n,r,i){wN(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){mK(e,n,r,i)}mount(e){this.isSVGTag=SN(e.tagName),super.mount(e)}}const BEe=(t,e)=>yN(t)?new LEe(e,{enableHardwareAcceleration:!1}):new NEe(e,{enableHardwareAcceleration:!0}),jEe={layout:{ProjectionNode:vY,MeasureLayout:uY}},UEe=B(B(B(B({},d_e),R1e),vEe),jEe),ml=Uwe((t,e)=>y1e(t,e,UEe,BEe));function SY(){const t=A.useRef(!1);return hN(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function zEe(){const t=SY(),[e,n]=A.useState(0),r=A.useCallback(()=>{t.current&&n(e+1)},[e]);return[A.useCallback(()=>hi.postRender(r),[r]),e]}class VEe extends A.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function WEe({children:t,isPresent:e}){const n=A.useId(),r=A.useRef(null),i=A.useRef({width:0,height:0,top:0,left:0});return A.useInsertionEffect(()=>{const{width:o,height:s,top:a,left:l}=i.current;if(e||!r.current||!o||!s)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${s}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),A.createElement(VEe,{isPresent:e,childRef:r,sizeRef:i},A.cloneElement(t,{ref:r}))}const EP=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:s})=>{const a=vK($Ee),l=A.useId(),c=A.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:u=>{a.set(u,!0);for(const d of a.values())if(!d)return;r&&r()},register:u=>(a.set(u,!1),()=>a.delete(u))}),o?void 0:[n]);return A.useMemo(()=>{a.forEach((u,d)=>a.set(d,!1))},[n]),A.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),s==="popLayout"&&(t=A.createElement(WEe,{isPresent:n},t)),A.createElement(gw.Provider,{value:c},t)};function $Ee(){return new Map}function HEe(t){return A.useEffect(()=>()=>t(),[])}const Yh=t=>t.key||"";function GEe(t,e){t.forEach(n=>{const r=Yh(n);e.set(r,n)})}function qEe(t){const e=[];return A.Children.forEach(t,n=>{A.isValidElement(n)&&e.push(n)}),e}const Gc=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:o=!0,mode:s="sync"})=>{const a=A.useContext(vN).forceRender||zEe()[0],l=SY(),c=qEe(t);let u=c;const d=A.useRef(new Map).current,f=A.useRef(u),p=A.useRef(new Map).current,b=A.useRef(!0);if(hN(()=>{b.current=!1,GEe(c,p),f.current=u}),HEe(()=>{b.current=!0,p.clear(),d.clear()}),b.current)return A.createElement(A.Fragment,null,u.map(x=>A.createElement(EP,{key:Yh(x),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:s},x)));u=[...u];const v=f.current.map(Yh),m=c.map(Yh),g=v.length;for(let x=0;x<g;x++){const w=v[x];m.indexOf(w)===-1&&!d.has(w)&&d.set(w,void 0)}return s==="wait"&&d.size&&(u=[]),d.forEach((x,w)=>{if(m.indexOf(w)!==-1)return;const S=p.get(w);if(!S)return;const D=v.indexOf(w);let k=x;if(!k){const P=()=>{d.delete(w);const M=Array.from(p.keys()).filter(T=>!m.includes(T));if(M.forEach(T=>p.delete(T)),f.current=c.filter(T=>{const _=Yh(T);return _===w||M.includes(_)}),!d.size){if(l.current===!1)return;a(),r&&r()}};k=A.createElement(EP,{key:Yh(S),isPresent:!1,onExitComplete:P,custom:e,presenceAffectsLayout:o,mode:s},S),d.set(w,k)}u.splice(D,0,k)}),u=u.map(x=>{const w=x.key;return d.has(w)?x:A.createElement(EP,{key:Yh(x),isPresent:!0,presenceAffectsLayout:o,mode:s},x)}),A.createElement(A.Fragment,null,d.size?u:u.map(x=>A.cloneElement(x)))};var KEe={initial:t=>{const{position:e}=t,n=["top","bottom"].includes(e)?"y":"x";let r=["top-right","bottom-right"].includes(e)?1:-1;return e==="bottom"&&(r=1),{opacity:0,[n]:r*24}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},_Y=A.memo(t=>{const{id:e,message:n,onCloseComplete:r,onRequestRemove:i,requestClose:o=!1,position:s="bottom",duration:a=5e3,containerStyle:l,motionVariants:c=KEe,toastSpacing:u="0.5rem"}=t,[d,f]=A.useState(a),p=I_e();gb(()=>{p||r==null||r()},[p]),gb(()=>{f(a)},[a]);const b=()=>f(null),v=()=>f(a),m=()=>{p&&i()};A.useEffect(()=>{p&&o&&i()},[p,o,i]),Dwe(m,d);const g=A.useMemo(()=>B({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:u},l),[l,u]),x=A.useMemo(()=>Mwe(s),[s]);return h.jsx(ml.div,{layout:!0,className:"chakra-toast",variants:c,initial:"initial",animate:"animate",exit:"exit",onHoverStart:b,onHoverEnd:v,custom:{position:s},style:x,children:h.jsx(Ut.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:g,children:Uc(n,{id:e,onClose:m})})})});_Y.displayName="ToastComponent";function YEe(t,e){var n;const r=t!=null?t:"bottom",o={"top-start":{ltr:"top-left",rtl:"top-right"},"top-end":{ltr:"top-right",rtl:"top-left"},"bottom-start":{ltr:"bottom-left",rtl:"bottom-right"},"bottom-end":{ltr:"bottom-right",rtl:"bottom-left"}}[r];return(n=o==null?void 0:o[e])!=null?n:r}var Q6={path:h.jsxs("g",{stroke:"currentColor",strokeWidth:"1.5",children:[h.jsx("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),h.jsx("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),h.jsx("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},Dd=Yt((t,e)=>{const m=t,{as:n,viewBox:r,color:i="currentColor",focusable:o=!1,children:s,className:a,__css:l}=m,c=Tt(m,["as","viewBox","color","focusable","children","className","__css"]),u=_n("chakra-icon",a),d=Wa("Icon",t),f=B(B({w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:i},l),d),p={ref:e,focusable:o,className:u,__css:f},b=r!=null?r:Q6.viewBox;if(n&&typeof n!="string")return h.jsx(Ut.svg,B(B({as:n},p),c));const v=s!=null?s:Q6.path;return h.jsx(Ut.svg,oe(B(B({verticalAlign:"middle",viewBox:b},p),c),{children:v}))});Dd.displayName="Icon";function xc(t){const{viewBox:e="0 0 24 24",d:n,displayName:r,defaultProps:i={}}=t,o=A.Children.toArray(t.path),s=Yt((a,l)=>h.jsx(Dd,oe(B(B({ref:l,viewBox:e},i),a),{children:o.length?o:h.jsx("path",{fill:"currentColor",d:n})})));return s.displayName=r,s}function XEe(t){return h.jsx(Dd,oe(B({viewBox:"0 0 24 24"},t),{children:h.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})}))}function QEe(t){return h.jsx(Dd,oe(B({viewBox:"0 0 24 24"},t),{children:h.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})}))}function Z6(t){return h.jsx(Dd,oe(B({viewBox:"0 0 24 24"},t),{children:h.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})}))}var ZEe=fw({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),Oa=Yt((t,e)=>{const n=Wa("Spinner",t),d=di(t),{label:r="Loading...",thickness:i="2px",speed:o="0.45s",emptyColor:s="transparent",className:a}=d,l=Tt(d,["label","thickness","speed","emptyColor","className"]),c=_n("chakra-spinner",a),u=B({display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:i,borderBottomColor:s,borderLeftColor:s,animation:`${ZEe} ${o} linear infinite`},n);return h.jsx(Ut.div,oe(B({ref:e,__css:u,className:c},l),{children:r&&h.jsx(Ut.span,{srOnly:!0,children:r})}))});Oa.displayName="Spinner";var[JEe,ON]=pi({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[eCe,NN]=pi({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),EY={info:{icon:QEe,colorScheme:"blue"},warning:{icon:Z6,colorScheme:"orange"},success:{icon:XEe,colorScheme:"green"},error:{icon:Z6,colorScheme:"red"},loading:{icon:Oa,colorScheme:"blue"}};function tCe(t){return EY[t].colorScheme}function nCe(t){return EY[t].icon}var bl=Yt(function(e,n){const r=NN(),{status:i}=ON(),o=B({display:"inline"},r.description);return h.jsx(Ut.div,oe(B({ref:n,"data-status":i},e),{className:_n("chakra-alert__desc",e.className),__css:o}))});bl.displayName="AlertDescription";function Si(t){const{status:e}=ON(),n=nCe(e),r=NN(),i=e==="loading"?r.spinner:r.icon;return h.jsx(Ut.span,oe(B({display:"inherit","data-status":e},t),{className:_n("chakra-alert__icon",t.className),__css:i,children:t.children||h.jsx(n,{h:"100%",w:"100%"})}))}Si.displayName="AlertIcon";var hT=Yt(function(e,n){const r=NN(),{status:i}=ON();return h.jsx(Ut.div,oe(B({ref:n,"data-status":i},e),{className:_n("chakra-alert__title",e.className),__css:r.title}))});hT.displayName="AlertTitle";var _i=Yt(function(e,n){var r;const u=di(e),{status:i="info",addRole:o=!0}=u,s=Tt(u,["status","addRole"]),a=(r=e.colorScheme)!=null?r:tCe(i),l=gs("Alert",oe(B({},e),{colorScheme:a})),c=B({width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden"},l.container);return h.jsx(JEe,{value:{status:i},children:h.jsx(eCe,{value:l,children:h.jsx(Ut.div,oe(B({"data-status":i,role:o?"alert":void 0,ref:n},s),{className:_n("chakra-alert",e.className),__css:c}))})})});_i.displayName="Alert";function rCe(t){return h.jsx(Dd,oe(B({focusable:"false","aria-hidden":!0},t),{children:h.jsx("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})}))}var LN=Yt(function(e,n){const r=Wa("CloseButton",e),c=di(e),{children:i,isDisabled:o,__css:s}=c,a=Tt(c,["children","isDisabled","__css"]),l={outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0};return h.jsx(Ut.button,oe(B({type:"button","aria-label":"Close",ref:n,disabled:o,__css:B(B(B({},l),r),s)},a),{children:i||h.jsx(rCe,{width:"1em",height:"1em"})}))});LN.displayName="CloseButton";var iCe={top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]},Bc=oCe(iCe);function oCe(t){let e=t;const n=new Set,r=i=>{e=i(e),n.forEach(o=>o())};return{getState:()=>e,subscribe:i=>(n.add(i),()=>{r(()=>t),n.delete(i)}),removeToast:(i,o)=>{r(s=>oe(B({},s),{[o]:s[o].filter(a=>a.id!=i)}))},notify:(i,o)=>{const s=sCe(i,o),{position:a,id:l}=s;return r(c=>{var u,d;const p=a.includes("top")?[s,...(u=c[a])!=null?u:[]]:[...(d=c[a])!=null?d:[],s];return oe(B({},c),{[a]:p})}),l},update:(i,o)=>{i&&r(s=>{const a=B({},s),{position:l,index:c}=GU(a,i);return l&&c!==-1&&(a[l][c]=oe(B(B({},a[l][c]),o),{message:CY(o)})),a})},closeAll:({positions:i}={})=>{r(o=>{const s=["bottom","bottom-right","bottom-left","top","top-left","top-right"];return(i!=null?i:s).reduce((l,c)=>(l[c]=o[c].map(u=>oe(B({},u),{requestClose:!0})),l),B({},o))})},close:i=>{r(o=>{const s=Jq(o,i);return s?oe(B({},o),{[s]:o[s].map(a=>a.id==i?oe(B({},a),{requestClose:!0}):a)}):o})},isActive:i=>!!GU(Bc.getState(),i).position}}var J6=0;function sCe(t,e={}){var n,r;J6+=1;const i=(n=e.id)!=null?n:J6,o=(r=e.position)!=null?r:"bottom";return{id:i,message:t,position:o,duration:e.duration,onCloseComplete:e.onCloseComplete,onRequestRemove:()=>Bc.removeToast(String(i),o),status:e.status,requestClose:!1,containerStyle:e.containerStyle}}var aCe=t=>{const{status:e,variant:n="solid",id:r,title:i,isClosable:o,onClose:s,description:a,colorScheme:l,icon:c}=t,u=r?{root:`toast-${r}`,title:`toast-${r}-title`,description:`toast-${r}-description`}:void 0;return h.jsxs(_i,{addRole:!1,status:e,variant:n,id:u==null?void 0:u.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:l,children:[h.jsx(Si,{children:c}),h.jsxs(Ut.div,{flex:"1",maxWidth:"100%",children:[i&&h.jsx(hT,{id:u==null?void 0:u.title,children:i}),a&&h.jsx(bl,{id:u==null?void 0:u.description,display:"block",children:a})]}),o&&h.jsx(LN,{size:"sm",onClick:s,position:"absolute",insetEnd:1,top:1})]})};function CY(t={}){const{render:e,toastComponent:n=aCe}=t;return i=>typeof e=="function"?e(B(B({},i),t)):h.jsx(n,B(B({},i),t))}function lCe(t,e){const n=i=>{var o;return oe(B(B({},e),i),{position:YEe((o=i==null?void 0:i.position)!=null?o:e==null?void 0:e.position,t)})},r=i=>{const o=n(i),s=CY(o);return Bc.notify(s,o)};return r.update=(i,o)=>{Bc.update(i,n(o))},r.promise=(i,o)=>{const s=r(oe(B({},o.loading),{status:"loading",duration:null}));i.then(a=>r.update(s,B({status:"success",duration:5e3},Uc(o.success,a)))).catch(a=>r.update(s,B({status:"error",duration:5e3},Uc(o.error,a))))},r.closeAll=Bc.closeAll,r.close=Bc.close,r.isActive=Bc.isActive,r}var[cCe,uCe]=pi({name:"ToastOptionsContext",strict:!1}),dCe=t=>{const e=A.useSyncExternalStore(Bc.subscribe,Bc.getState,Bc.getState),{motionVariants:n,component:r=_Y,portalProps:i}=t,s=Object.keys(e).map(a=>{const l=e[a];return h.jsx("div",{role:"region","aria-live":"polite","aria-label":`Notifications-${a}`,id:`chakra-toast-manager-${a}`,style:Pwe(a),children:h.jsx(Gc,{initial:!1,children:l.map(c=>h.jsx(r,B({motionVariants:n},c),c.id))})},a)});return h.jsx(l0,oe(B({},i),{children:s}))};function ro(t){const{theme:e}=yq(),n=uCe();return A.useMemo(()=>lCe(e.direction,B(B({},n),t)),[t,e.direction,n])}var fCe=t=>function(s){var a=s,{children:n,theme:r=t,toastOptions:i}=a,o=Tt(a,["children","theme","toastOptions"]);return h.jsxs(Awe,oe(B({theme:r},o),{children:[h.jsx(cCe,{value:i==null?void 0:i.defaultOptions,children:n}),h.jsx(dCe,B({},i))]}))},hCe=fCe(Uq),pCe=Object.defineProperty,mCe=(t,e,n)=>e in t?pCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ji=(t,e,n)=>(mCe(t,typeof e!="symbol"?e+"":e,n),n);function ez(t){return t.sort((e,n)=>{const r=e.compareDocumentPosition(n);if(r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(r&Node.DOCUMENT_POSITION_DISCONNECTED||r&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}var gCe=t=>typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE;function tz(t,e,n){let r=t+1;return n&&r>=e&&(r=0),r}function nz(t,e,n){let r=t-1;return n&&r<0&&(r=e),r}var Uk=typeof window!="undefined"?A.useLayoutEffect:A.useEffect,bC=t=>t,vCe=class{constructor(){ji(this,"descendants",new Map),ji(this,"register",t=>{if(t!=null)return gCe(t)?this.registerNode(t):e=>{this.registerNode(e,t)}}),ji(this,"unregister",t=>{this.descendants.delete(t);const e=ez(Array.from(this.descendants.keys()));this.assignIndex(e)}),ji(this,"destroy",()=>{this.descendants.clear()}),ji(this,"assignIndex",t=>{this.descendants.forEach(e=>{const n=t.indexOf(e.node);e.index=n,e.node.dataset.index=e.index.toString()})}),ji(this,"count",()=>this.descendants.size),ji(this,"enabledCount",()=>this.enabledValues().length),ji(this,"values",()=>Array.from(this.descendants.values()).sort((e,n)=>e.index-n.index)),ji(this,"enabledValues",()=>this.values().filter(t=>!t.disabled)),ji(this,"item",t=>{if(this.count()!==0)return this.values()[t]}),ji(this,"enabledItem",t=>{if(this.enabledCount()!==0)return this.enabledValues()[t]}),ji(this,"first",()=>this.item(0)),ji(this,"firstEnabled",()=>this.enabledItem(0)),ji(this,"last",()=>this.item(this.descendants.size-1)),ji(this,"lastEnabled",()=>{const t=this.enabledValues().length-1;return this.enabledItem(t)}),ji(this,"indexOf",t=>{var e,n;return t&&(n=(e=this.descendants.get(t))==null?void 0:e.index)!=null?n:-1}),ji(this,"enabledIndexOf",t=>t==null?-1:this.enabledValues().findIndex(e=>e.node.isSameNode(t))),ji(this,"next",(t,e=!0)=>{const n=tz(t,this.count(),e);return this.item(n)}),ji(this,"nextEnabled",(t,e=!0)=>{const n=this.item(t);if(!n)return;const r=this.enabledIndexOf(n.node),i=tz(r,this.enabledCount(),e);return this.enabledItem(i)}),ji(this,"prev",(t,e=!0)=>{const n=nz(t,this.count()-1,e);return this.item(n)}),ji(this,"prevEnabled",(t,e=!0)=>{const n=this.item(t);if(!n)return;const r=this.enabledIndexOf(n.node),i=nz(r,this.enabledCount()-1,e);return this.enabledItem(i)}),ji(this,"registerNode",(t,e)=>{if(!t||this.descendants.has(t))return;const n=Array.from(this.descendants.keys()).concat(t),r=ez(n);e!=null&&e.disabled&&(e.disabled=!!e.disabled);const i=B({node:t,index:-1},e);this.descendants.set(t,i),this.assignIndex(r)})}};function yCe(t,e){if(t!=null){if(typeof t=="function"){t(e);return}try{t.current=e}catch(n){throw new Error(`Cannot assign value '${e}' to ref '${t}'`)}}}function no(...t){return e=>{t.forEach(n=>{yCe(n,e)})}}function xCe(...t){return A.useMemo(()=>no(...t),t)}function bCe(){const t=A.useRef(new vCe);return Uk(()=>()=>t.current.destroy()),t.current}var[wCe,AY]=pi({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});function SCe(t){const e=AY(),[n,r]=A.useState(-1),i=A.useRef(null);Uk(()=>()=>{i.current&&e.unregister(i.current)},[]),Uk(()=>{if(!i.current)return;const s=Number(i.current.dataset.index);n!=s&&!Number.isNaN(s)&&r(s)});const o=bC(t?e.register(t):e.register);return{descendants:e,index:n,enabledIndex:e.enabledIndexOf(i.current),register:no(o,i)}}function TY(){return[bC(wCe),()=>bC(AY()),()=>bCe(),i=>SCe(i)]}var[_Ce,pT]=pi({name:"AccordionStylesContext",hookName:"useAccordionStyles",providerName:"<Accordion />"}),[ECe,BN]=pi({name:"AccordionItemContext",hookName:"useAccordionItemContext",providerName:"<AccordionItem />"}),[CCe,iat,ACe,TCe]=TY(),jN=Yt(function(e,n){const{getButtonProps:r}=BN(),i=r(e,n),o=pT(),s=B({display:"flex",alignItems:"center",width:"100%",outline:0},o.button);return h.jsx(Ut.button,oe(B({},i),{className:_n("chakra-accordion__button",e.className),__css:s}))});jN.displayName="AccordionButton";function UN(t){const{value:e,defaultValue:n,onChange:r,shouldUpdate:i=(f,p)=>f!==p}=t,o=fo(r),s=fo(i),[a,l]=A.useState(n),c=e!==void 0,u=c?e:a,d=fo(f=>{const b=typeof f=="function"?f(u):f;s(u,b)&&(c||l(b),o(b))},[c,o,u,s]);return[u,d]}function MCe(t){const p=t,{onChange:e,defaultIndex:n,index:r,allowMultiple:i,allowToggle:o}=p,s=Tt(p,["onChange","defaultIndex","index","allowMultiple","allowToggle"]);RCe(t),kCe(t);const a=ACe(),[l,c]=A.useState(-1);A.useEffect(()=>()=>{c(-1)},[]);const[u,d]=UN({value:r,defaultValue(){return i?n!=null?n:[]:n!=null?n:-1},onChange:e});return{index:u,setIndex:d,htmlProps:s,getAccordionItemProps:b=>{let v=!1;return b!==null&&(v=Array.isArray(u)?u.includes(b):u===b),{isOpen:v,onChange:g=>{if(b!==null)if(i&&Array.isArray(u)){const x=g?u.concat(b):u.filter(w=>w!==b);d(x)}else g?d(b):o&&d(-1)}}},focusedIndex:l,setFocusedIndex:c,descendants:a}}var[PCe,zN]=pi({name:"AccordionContext",hookName:"useAccordionContext",providerName:"Accordion"});function DCe(t){const M=t,{isDisabled:e,isFocusable:n,id:r}=M,i=Tt(M,["isDisabled","isFocusable","id"]),{getAccordionItemProps:o,setFocusedIndex:s}=zN(),a=A.useRef(null),l=A.useId(),c=r!=null?r:l,u=`accordion-button-${c}`,d=`accordion-panel-${c}`;ICe(t);const{register:f,index:p,descendants:b}=TCe({disabled:e&&!n}),{isOpen:v,onChange:m}=o(p===-1?null:p);FCe({isOpen:v,isDisabled:e});const g=()=>{m==null||m(!0)},x=()=>{m==null||m(!1)},w=A.useCallback(()=>{m==null||m(!v),s(p)},[p,s,v,m]),S=A.useCallback(T=>{const E={ArrowDown:()=>{const R=b.nextEnabled(p);R==null||R.node.focus()},ArrowUp:()=>{const R=b.prevEnabled(p);R==null||R.node.focus()},Home:()=>{const R=b.firstEnabled();R==null||R.node.focus()},End:()=>{const R=b.lastEnabled();R==null||R.node.focus()}}[T.key];E&&(T.preventDefault(),E(T))},[b,p]),D=A.useCallback(()=>{s(p)},[s,p]),k=A.useCallback(function(_={},E=null){return oe(B({},_),{type:"button",ref:no(f,a,E),id:u,disabled:!!e,"aria-expanded":!!v,"aria-controls":d,onClick:Un(_.onClick,w),onFocus:Un(_.onFocus,D),onKeyDown:Un(_.onKeyDown,S)})},[u,e,v,w,D,S,d,f]),P=A.useCallback(function(_={},E=null){return oe(B({},_),{ref:E,role:"region",id:d,"aria-labelledby":u,hidden:!v})},[u,v,d]);return{isOpen:v,isDisabled:e,isFocusable:n,onOpen:g,onClose:x,getButtonProps:k,getPanelProps:P,htmlProps:i}}function RCe(t){const e=t.index||t.defaultIndex,n=e!=null&&!Array.isArray(e)&&t.allowMultiple;hw({condition:!!n,message:`If 'allowMultiple' is passed, then 'index' or 'defaultIndex' must be an array. You passed: ${typeof e},`})}function kCe(t){hw({condition:!!(t.allowMultiple&&t.allowToggle),message:"If 'allowMultiple' is passed, 'allowToggle' will be ignored. Either remove 'allowToggle' or 'allowMultiple' depending on whether you want multiple accordions visible or not"})}function ICe(t){hw({condition:!!(t.isFocusable&&!t.isDisabled),message:`Using only 'isFocusable', this prop is reserved for situations where you pass 'isDisabled' but you still want the element to receive focus (A11y). Either remove it or pass 'isDisabled' as well.
    `})}function FCe(t){hw({condition:t.isOpen&&!!t.isDisabled,message:"Cannot open a disabled accordion item"})}function VN(t){const{isOpen:e,isDisabled:n}=BN(),{reduceMotion:r}=zN(),i=_n("chakra-accordion__icon",t.className),o=pT(),s=B({opacity:n?.4:1,transform:e?"rotate(-180deg)":void 0,transition:r?void 0:"transform 0.2s",transformOrigin:"center"},o.icon);return h.jsx(Dd,oe(B({viewBox:"0 0 24 24","aria-hidden":!0,className:i,__css:s},t),{children:h.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}))}VN.displayName="AccordionIcon";var WN=Yt(function(e,n){const{children:r,className:i}=e,u=DCe(e),{htmlProps:o}=u,s=Tt(u,["htmlProps"]),a=pT(),l=oe(B({},a.container),{overflowAnchor:"none"}),c=A.useMemo(()=>s,[s]);return h.jsx(ECe,{value:c,children:h.jsx(Ut.div,oe(B({ref:n},o),{className:_n("chakra-accordion__item",i),__css:l,children:typeof r=="function"?r({isExpanded:!!s.isOpen,isDisabled:!!s.isDisabled}):r}))})});WN.displayName="AccordionItem";var Vg={ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1]},Ap={enter:{duration:.2,ease:Vg.easeOut},exit:{duration:.1,ease:Vg.easeIn}},ad={enter:(t,e)=>oe(B({},t),{delay:typeof e=="number"?e:e==null?void 0:e.enter}),exit:(t,e)=>oe(B({},t),{delay:typeof e=="number"?e:e==null?void 0:e.exit})},OCe=t=>t!=null&&parseInt(t.toString(),10)>0,rz={exit:{height:{duration:.2,ease:Vg.ease},opacity:{duration:.3,ease:Vg.ease}},enter:{height:{duration:.3,ease:Vg.ease},opacity:{duration:.4,ease:Vg.ease}}},NCe={exit:({animateOpacity:t,startingHeight:e,transition:n,transitionEnd:r,delay:i})=>{var o;return oe(B({},t&&{opacity:OCe(e)?1:0}),{height:e,transitionEnd:r==null?void 0:r.exit,transition:(o=n==null?void 0:n.exit)!=null?o:ad.exit(rz.exit,i)})},enter:({animateOpacity:t,endingHeight:e,transition:n,transitionEnd:r,delay:i})=>{var o;return oe(B({},t&&{opacity:1}),{height:e,transitionEnd:r==null?void 0:r.enter,transition:(o=n==null?void 0:n.enter)!=null?o:ad.enter(rz.enter,i)})}},wC=A.forwardRef((t,e)=>{const x=t,{in:n,unmountOnExit:r,animateOpacity:i=!0,startingHeight:o=0,endingHeight:s="auto",style:a,className:l,transition:c,transitionEnd:u}=x,d=Tt(x,["in","unmountOnExit","animateOpacity","startingHeight","endingHeight","style","className","transition","transitionEnd"]),[f,p]=A.useState(!1);A.useEffect(()=>{const w=setTimeout(()=>{p(!0)});return()=>clearTimeout(w)},[]),hw({condition:Number(o)>0&&!!r,message:"startingHeight and unmountOnExit are mutually exclusive. You can't use them together"});const b=parseFloat(o.toString())>0,v={startingHeight:o,endingHeight:s,animateOpacity:i,transition:f?c:{enter:{duration:0}},transitionEnd:{enter:u==null?void 0:u.enter,exit:r?u==null?void 0:u.exit:oe(B({},u==null?void 0:u.exit),{display:b?"block":"none"})}},m=r?n:!0,g=n||r?"enter":"exit";return h.jsx(Gc,{initial:!1,custom:v,children:m&&h.jsx(ml.div,oe(B({ref:e},d),{className:_n("chakra-collapse",l),style:B({overflow:"hidden",display:"block"},a),custom:v,variants:NCe,initial:r?"exit":!1,animate:g,exit:"exit"}))})});wC.displayName="Collapse";var LCe={enter:({transition:t,transitionEnd:e,delay:n}={})=>{var r;return{opacity:1,transition:(r=t==null?void 0:t.enter)!=null?r:ad.enter(Ap.enter,n),transitionEnd:e==null?void 0:e.enter}},exit:({transition:t,transitionEnd:e,delay:n}={})=>{var r;return{opacity:0,transition:(r=t==null?void 0:t.exit)!=null?r:ad.exit(Ap.exit,n),transitionEnd:e==null?void 0:e.exit}}},MY={initial:"exit",animate:"enter",exit:"exit",variants:LCe},BCe=A.forwardRef(function(e,n){const p=e,{unmountOnExit:r,in:i,className:o,transition:s,transitionEnd:a,delay:l}=p,c=Tt(p,["unmountOnExit","in","className","transition","transitionEnd","delay"]),u=i||r?"enter":"exit",d=r?i&&r:!0,f={transition:s,transitionEnd:a,delay:l};return h.jsx(Gc,{custom:f,children:d&&h.jsx(ml.div,B(oe(B({ref:n,className:_n("chakra-fade",o),custom:f},MY),{animate:u}),c))})});BCe.displayName="Fade";var jCe={exit:({reverse:t,initialScale:e,transition:n,transitionEnd:r,delay:i})=>{var o;return oe(B({opacity:0},t?{scale:e,transitionEnd:r==null?void 0:r.exit}:{transitionEnd:B({scale:e},r==null?void 0:r.exit)}),{transition:(o=n==null?void 0:n.exit)!=null?o:ad.exit(Ap.exit,i)})},enter:({transitionEnd:t,transition:e,delay:n})=>{var r;return{opacity:1,scale:1,transition:(r=e==null?void 0:e.enter)!=null?r:ad.enter(Ap.enter,n),transitionEnd:t==null?void 0:t.enter}}},PY={initial:"exit",animate:"enter",exit:"exit",variants:jCe},UCe=A.forwardRef(function(e,n){const v=e,{unmountOnExit:r,in:i,reverse:o=!0,initialScale:s=.95,className:a,transition:l,transitionEnd:c,delay:u}=v,d=Tt(v,["unmountOnExit","in","reverse","initialScale","className","transition","transitionEnd","delay"]),f=r?i&&r:!0,p=i||r?"enter":"exit",b={initialScale:s,reverse:o,transition:l,transitionEnd:c,delay:u};return h.jsx(Gc,{custom:b,children:f&&h.jsx(ml.div,B(oe(B({ref:n,className:_n("chakra-offset-slide",a)},PY),{animate:p,custom:b}),d))})});UCe.displayName="ScaleFade";var zCe={initial:({offsetX:t,offsetY:e,transition:n,transitionEnd:r,delay:i})=>{var o;return{opacity:0,x:t,y:e,transition:(o=n==null?void 0:n.exit)!=null?o:ad.exit(Ap.exit,i),transitionEnd:r==null?void 0:r.exit}},enter:({transition:t,transitionEnd:e,delay:n})=>{var r;return{opacity:1,x:0,y:0,transition:(r=t==null?void 0:t.enter)!=null?r:ad.enter(Ap.enter,n),transitionEnd:e==null?void 0:e.enter}},exit:({offsetY:t,offsetX:e,transition:n,transitionEnd:r,reverse:i,delay:o})=>{var s;const a={x:e,y:t};return B({opacity:0,transition:(s=n==null?void 0:n.exit)!=null?s:ad.exit(Ap.exit,o)},i?oe(B({},a),{transitionEnd:r==null?void 0:r.exit}):{transitionEnd:B(B({},a),r==null?void 0:r.exit)})}},Ly={initial:"initial",animate:"enter",exit:"exit",variants:zCe},VCe=A.forwardRef(function(e,n){const m=e,{unmountOnExit:r,in:i,reverse:o=!0,className:s,offsetX:a=0,offsetY:l=8,transition:c,transitionEnd:u,delay:d}=m,f=Tt(m,["unmountOnExit","in","reverse","className","offsetX","offsetY","transition","transitionEnd","delay"]),p=r?i&&r:!0,b=i||r?"enter":"exit",v={offsetX:a,offsetY:l,reverse:o,transition:c,transitionEnd:u,delay:d};return h.jsx(Gc,{custom:v,children:p&&h.jsx(ml.div,B(oe(B({ref:n,className:_n("chakra-offset-slide",s),custom:v},Ly),{animate:b}),f))})});VCe.displayName="SlideFade";var $N=Yt(function(e,n){const p=e,{className:r,motionProps:i}=p,o=Tt(p,["className","motionProps"]),{reduceMotion:s}=zN(),{getPanelProps:a,isOpen:l}=BN(),c=a(o,n),u=_n("chakra-accordion__panel",r),d=pT();s||delete c.hidden;const f=h.jsx(Ut.div,oe(B({},c),{__css:d.panel,className:u}));return s?f:h.jsx(wC,oe(B({in:l},i),{children:f}))});$N.displayName="AccordionPanel";var HN=Yt(function(o,i){var s=o,{children:e,reduceMotion:n}=s,r=Tt(s,["children","reduceMotion"]);const a=gs("Accordion",r),l=di(r),p=MCe(l),{htmlProps:c,descendants:u}=p,d=Tt(p,["htmlProps","descendants"]),f=A.useMemo(()=>oe(B({},d),{reduceMotion:!!n}),[d,n]);return h.jsx(CCe,{value:u,children:h.jsx(PCe,{value:f,children:h.jsx(_Ce,{value:a,children:h.jsx(Ut.div,oe(B({ref:i},c),{className:_n("chakra-accordion",r.className),__css:a.root,children:e}))})})})});HN.displayName="Accordion";function GN(t){return A.Children.toArray(t).filter(e=>A.isValidElement(e))}var[WCe,$Ce]=pi({strict:!1,name:"ButtonGroupContext"}),HCe={horizontal:{"> *:first-of-type:not(:last-of-type)":{borderEndRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderStartRadius:0}},vertical:{"> *:first-of-type:not(:last-of-type)":{borderBottomRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderTopRadius:0}}},GCe={horizontal:t=>({"& > *:not(style) ~ *:not(style)":{marginStart:t}}),vertical:t=>({"& > *:not(style) ~ *:not(style)":{marginTop:t}})},zk=Yt(function(e,n){const m=e,{size:r,colorScheme:i,variant:o,className:s,spacing:a="0.5rem",isAttached:l,isDisabled:c,orientation:u="horizontal"}=m,d=Tt(m,["size","colorScheme","variant","className","spacing","isAttached","isDisabled","orientation"]),f=_n("chakra-button__group",s),p=A.useMemo(()=>({size:r,colorScheme:i,variant:o,isDisabled:c}),[r,i,o,c]);let b=B({display:"inline-flex"},l?HCe[u]:GCe[u](a));const v=u==="vertical";return h.jsx(WCe,{value:p,children:h.jsx(Ut.div,B({ref:n,role:"group",__css:b,className:f,"data-attached":l?"":void 0,"data-orientation":u,flexDir:v?"column":void 0},d))})});zk.displayName="ButtonGroup";function qCe(t){const[e,n]=A.useState(!t);return{ref:A.useCallback(o=>{o&&n(o.tagName==="BUTTON")},[]),type:e?"button":void 0}}function Vk(t){const s=t,{children:e,className:n}=s,r=Tt(s,["children","className"]),i=A.isValidElement(e)?A.cloneElement(e,{"aria-hidden":!0,focusable:!1}):e,o=_n("chakra-button__icon",n);return h.jsx(Ut.span,oe(B({display:"inline-flex",alignSelf:"center",flexShrink:0},r),{className:o,children:i}))}Vk.displayName="ButtonIcon";function Wk(t){const d=t,{label:e,placement:n,spacing:r="0.5rem",children:i=h.jsx(Oa,{color:"currentColor",width:"1em",height:"1em"}),className:o,__css:s}=d,a=Tt(d,["label","placement","spacing","children","className","__css"]),l=_n("chakra-button__spinner",o),c=n==="start"?"marginEnd":"marginStart",u=A.useMemo(()=>B({display:"flex",alignItems:"center",position:e?"relative":"absolute",[c]:e?r:0,fontSize:"1em",lineHeight:"normal"},s),[s,e,c,r]);return h.jsx(Ut.div,oe(B({className:l},a),{__css:u,children:i}))}Wk.displayName="ButtonSpinner";var hn=Yt((t,e)=>{const n=$Ce(),r=Wa("Button",B(B({},n),t)),k=di(t),{isDisabled:i=n==null?void 0:n.isDisabled,isLoading:o,isActive:s,children:a,leftIcon:l,rightIcon:c,loadingText:u,iconSpacing:d="0.5rem",type:f,spinner:p,spinnerPlacement:b="start",className:v,as:m}=k,g=Tt(k,["isDisabled","isLoading","isActive","children","leftIcon","rightIcon","loadingText","iconSpacing","type","spinner","spinnerPlacement","className","as"]),x=A.useMemo(()=>{const P=oe(B({},r==null?void 0:r._focus),{zIndex:1});return B(B({display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none"},r),!!n&&{_focus:P})},[r,n]),{ref:w,type:S}=qCe(m),D={rightIcon:c,leftIcon:l,iconSpacing:d,children:a};return h.jsxs(Ut.button,oe(B({ref:xCe(e,w),as:m,type:f!=null?f:S,"data-active":Fn(s),"data-loading":Fn(o),__css:x,className:_n("chakra-button",v)},g),{disabled:i||o,children:[o&&b==="start"&&h.jsx(Wk,{className:"chakra-button__spinner--start",label:u,placement:"start",spacing:d,children:p}),o?u||h.jsx(Ut.span,{opacity:0,children:h.jsx(iz,B({},D))}):h.jsx(iz,B({},D)),o&&b==="end"&&h.jsx(Wk,{className:"chakra-button__spinner--end",label:u,placement:"end",spacing:d,children:p})]}))});hn.displayName="Button";function iz(t){const{leftIcon:e,rightIcon:n,children:r,iconSpacing:i}=t;return h.jsxs(h.Fragment,{children:[e&&h.jsx(Vk,{marginEnd:i,children:e}),r,n&&h.jsx(Vk,{marginStart:i,children:n})]})}var Lr=Yt((t,e)=>{const c=t,{icon:n,children:r,isRound:i,"aria-label":o}=c,s=Tt(c,["icon","children","isRound","aria-label"]),a=n||r,l=A.isValidElement(a)?A.cloneElement(a,{"aria-hidden":!0,focusable:!1}):null;return h.jsx(hn,oe(B({padding:"0",borderRadius:i?"full":void 0,ref:e,"aria-label":o},s),{children:l}))});Lr.displayName="IconButton";var[KCe,DY]=_we("Card"),pc=Yt(function(e,n){const s=e,{className:r}=s,i=Tt(s,["className"]),o=DY();return h.jsx(Ut.div,B({ref:n,className:_n("chakra-card__body",r),__css:o.body},i))}),kv=Yt(function(e,n){const s=e,{className:r}=s,i=Tt(s,["className"]),o=DY();return h.jsx(Ut.div,B({ref:n,className:_n("chakra-card__header",r),__css:o.header},i))}),mc=Yt(function(e,n){const u=di(e),{className:r,children:i,direction:o="column",justify:s,align:a}=u,l=Tt(u,["className","children","direction","justify","align"]),c=gs("Card",e);return h.jsx(Ut.div,oe(B({ref:n,className:_n("chakra-card",r),__css:B({display:"flex",flexDirection:o,justifyContent:s,alignItems:a,position:"relative",minWidth:0,wordWrap:"break-word"},c.container)},l),{children:h.jsx(KCe,{value:c,children:i})}))}),[YCe,RY]=pi({name:"FormControlStylesContext",errorMessage:`useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormControl />" `}),[XCe,ww]=pi({strict:!1,name:"FormControlContext"});function QCe(t){const P=t,{id:e,isRequired:n,isInvalid:r,isDisabled:i,isReadOnly:o}=P,s=Tt(P,["id","isRequired","isInvalid","isDisabled","isReadOnly"]),a=A.useId(),l=e||`field-${a}`,c=`${l}-label`,u=`${l}-feedback`,d=`${l}-helptext`,[f,p]=A.useState(!1),[b,v]=A.useState(!1),[m,g]=A.useState(!1),x=A.useCallback((M={},T=null)=>oe(B({id:d},M),{ref:no(T,_=>{_&&v(!0)})}),[d]),w=A.useCallback((M={},T=null)=>oe(B({},M),{ref:T,"data-focus":Fn(m),"data-disabled":Fn(i),"data-invalid":Fn(r),"data-readonly":Fn(o),id:M.id!==void 0?M.id:c,htmlFor:M.htmlFor!==void 0?M.htmlFor:l}),[l,i,m,r,o,c]),S=A.useCallback((M={},T=null)=>oe(B({id:u},M),{ref:no(T,_=>{_&&p(!0)}),"aria-live":"polite"}),[u]),D=A.useCallback((M={},T=null)=>oe(B(B({},M),s),{ref:T,role:"group","data-focus":Fn(m),"data-disabled":Fn(i),"data-invalid":Fn(r),"data-readonly":Fn(o)}),[s,i,m,r,o]),k=A.useCallback((M={},T=null)=>oe(B({},M),{ref:T,role:"presentation","aria-hidden":!0,children:M.children||"*"}),[]);return{isRequired:!!n,isInvalid:!!r,isReadOnly:!!o,isDisabled:!!i,isFocused:!!m,onFocus:()=>g(!0),onBlur:()=>g(!1),hasFeedbackText:f,setHasFeedbackText:p,hasHelpText:b,setHasHelpText:v,id:l,labelId:c,feedbackId:u,helpTextId:d,htmlProps:s,getHelpTextProps:x,getErrorMessageProps:S,getRootProps:D,getLabelProps:w,getRequiredIndicatorProps:k}}var Ir=Yt(function(e,n){const r=gs("Form",e),i=di(e),c=QCe(i),{getRootProps:o,htmlProps:s}=c,a=Tt(c,["getRootProps","htmlProps"]),l=_n("chakra-form-control",e.className);return h.jsx(XCe,{value:a,children:h.jsx(YCe,{value:r,children:h.jsx(Ut.div,oe(B({},o({},n)),{className:l,__css:r.container}))})})});Ir.displayName="FormControl";var SC=Yt(function(e,n){const r=ww(),i=RY(),o=_n("chakra-form__helper-text",e.className);return h.jsx(Ut.div,oe(B({},r==null?void 0:r.getHelpTextProps(e,n)),{__css:i.helperText,className:o}))});SC.displayName="FormHelperText";var fr=Yt(function(e,n){var r;const i=Wa("FormLabel",e),o=di(e),p=o,{className:s,children:a,requiredIndicator:l=h.jsx(kY,{}),optionalIndicator:c=null}=p,u=Tt(p,["className","children","requiredIndicator","optionalIndicator"]),d=ww(),f=(r=d==null?void 0:d.getLabelProps(u,n))!=null?r:B({ref:n},u);return h.jsxs(Ut.label,oe(B({},f),{className:_n("chakra-form__label",o.className),__css:B({display:"block",textAlign:"start"},i),children:[a,d!=null&&d.isRequired?l:c]}))});fr.displayName="FormLabel";var kY=Yt(function(e,n){const r=ww(),i=RY();if(!(r!=null&&r.isRequired))return null;const o=_n("chakra-form__required-indicator",e.className);return h.jsx(Ut.span,oe(B({},r==null?void 0:r.getRequiredIndicatorProps(e,n)),{__css:i.requiredIndicator,className:o}))});kY.displayName="RequiredIndicator";function qN(t){const s=KN(t),{isDisabled:e,isInvalid:n,isReadOnly:r,isRequired:i}=s,o=Tt(s,["isDisabled","isInvalid","isReadOnly","isRequired"]);return oe(B({},o),{disabled:e,readOnly:r,required:i,"aria-invalid":rd(n),"aria-required":rd(i),"aria-readonly":rd(r)})}function KN(t){var e,n,r;const i=ww(),g=t,{id:o,disabled:s,readOnly:a,required:l,isRequired:c,isInvalid:u,isReadOnly:d,isDisabled:f,onFocus:p,onBlur:b}=g,v=Tt(g,["id","disabled","readOnly","required","isRequired","isInvalid","isReadOnly","isDisabled","onFocus","onBlur"]),m=t["aria-describedby"]?[t["aria-describedby"]]:[];return i!=null&&i.hasFeedbackText&&(i!=null&&i.isInvalid)&&m.push(i.feedbackId),i!=null&&i.hasHelpText&&m.push(i.helpTextId),oe(B({},v),{"aria-describedby":m.join(" ")||void 0,id:o!=null?o:i==null?void 0:i.id,isDisabled:(e=s!=null?s:f)!=null?e:i==null?void 0:i.isDisabled,isReadOnly:(n=a!=null?a:d)!=null?n:i==null?void 0:i.isReadOnly,isRequired:(r=l!=null?l:c)!=null?r:i==null?void 0:i.isRequired,isInvalid:u!=null?u:i==null?void 0:i.isInvalid,onFocus:Un(i==null?void 0:i.onFocus,p),onBlur:Un(i==null?void 0:i.onBlur,b)})}var ZCe={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},JCe=()=>typeof document!="undefined",oz=!1,Sw=null,Wp=!1,$k=!1,Hk=new Set;function YN(t,e){Hk.forEach(n=>n(t,e))}var eAe=typeof window!="undefined"&&window.navigator!=null?/^Mac/.test(window.navigator.platform):!1;function tAe(t){return!(t.metaKey||!eAe&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function sz(t){Wp=!0,tAe(t)&&(Sw="keyboard",YN("keyboard",t))}function Hm(t){if(Sw="pointer",t.type==="mousedown"||t.type==="pointerdown"){Wp=!0;const e=t.composedPath?t.composedPath()[0]:t.target;let n=!1;try{n=e.matches(":focus-visible")}catch(r){}if(n)return;YN("pointer",t)}}function nAe(t){return t.mozInputSource===0&&t.isTrusted?!0:t.detail===0&&!t.pointerType}function rAe(t){nAe(t)&&(Wp=!0,Sw="virtual")}function iAe(t){t.target===window||t.target===document||(!Wp&&!$k&&(Sw="virtual",YN("virtual",t)),Wp=!1,$k=!1)}function oAe(){Wp=!1,$k=!0}function az(){return Sw!=="pointer"}function sAe(){if(!JCe()||oz)return;const{focus:t}=HTMLElement.prototype;HTMLElement.prototype.focus=function(...n){Wp=!0,t.apply(this,n)},document.addEventListener("keydown",sz,!0),document.addEventListener("keyup",sz,!0),document.addEventListener("click",rAe,!0),window.addEventListener("focus",iAe,!0),window.addEventListener("blur",oAe,!1),typeof PointerEvent!="undefined"?(document.addEventListener("pointerdown",Hm,!0),document.addEventListener("pointermove",Hm,!0),document.addEventListener("pointerup",Hm,!0)):(document.addEventListener("mousedown",Hm,!0),document.addEventListener("mousemove",Hm,!0),document.addEventListener("mouseup",Hm,!0)),oz=!0}function IY(t){sAe(),t(az());const e=()=>t(az());return Hk.add(e),()=>{Hk.delete(e)}}function aAe(t,e=[]){const n=Object.assign({},t);for(const r of e)r in n&&delete n[r];return n}function lAe(t={}){const e=KN(t),{isDisabled:n,isReadOnly:r,isRequired:i,isInvalid:o,id:s,onBlur:a,onFocus:l,"aria-describedby":c}=e,Oe=t,{defaultChecked:u,isChecked:d,isFocusable:f,onChange:p,isIndeterminate:b,name:v,value:m,tabIndex:g=void 0,"aria-label":x,"aria-labelledby":w,"aria-invalid":S}=Oe,D=Tt(Oe,["defaultChecked","isChecked","isFocusable","onChange","isIndeterminate","name","value","tabIndex","aria-label","aria-labelledby","aria-invalid"]),k=aAe(D,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),P=fo(p),M=fo(a),T=fo(l),[_,E]=A.useState(!1),[R,F]=A.useState(!1),[L,N]=A.useState(!1),[U,H]=A.useState(!1);A.useEffect(()=>IY(E),[]);const j=A.useRef(null),[z,q]=A.useState(!0),[$,K]=A.useState(!!u),G=d!==void 0,Y=G?d:$,J=A.useCallback(le=>{if(r||n){le.preventDefault();return}G||K(Y?le.target.checked:b?!0:le.target.checked),P==null||P(le)},[r,n,Y,G,b,P]);nd(()=>{j.current&&(j.current.indeterminate=!!b)},[b]),gb(()=>{n&&F(!1)},[n,F]),nd(()=>{const le=j.current;if(!(le!=null&&le.form))return;const me=()=>{K(!!u)};return le.form.addEventListener("reset",me),()=>{var ne;return(ne=le.form)==null?void 0:ne.removeEventListener("reset",me)}},[]);const V=n&&!f,re=A.useCallback(le=>{le.key===" "&&H(!0)},[H]),fe=A.useCallback(le=>{le.key===" "&&H(!1)},[H]);nd(()=>{if(!j.current)return;j.current.checked!==Y&&K(j.current.checked)},[j.current]);const pe=A.useCallback((le={},me=null)=>{const ne=se=>{R&&se.preventDefault(),H(!0)};return oe(B({},le),{ref:me,"data-active":Fn(U),"data-hover":Fn(L),"data-checked":Fn(Y),"data-focus":Fn(R),"data-focus-visible":Fn(R&&_),"data-indeterminate":Fn(b),"data-disabled":Fn(n),"data-invalid":Fn(o),"data-readonly":Fn(r),"aria-hidden":!0,onMouseDown:Un(le.onMouseDown,ne),onMouseUp:Un(le.onMouseUp,()=>H(!1)),onMouseEnter:Un(le.onMouseEnter,()=>N(!0)),onMouseLeave:Un(le.onMouseLeave,()=>N(!1))})},[U,Y,n,R,_,L,b,o,r]),ce=A.useCallback((le={},me=null)=>oe(B({},le),{ref:me,"data-active":Fn(U),"data-hover":Fn(L),"data-checked":Fn(Y),"data-focus":Fn(R),"data-focus-visible":Fn(R&&_),"data-indeterminate":Fn(b),"data-disabled":Fn(n),"data-invalid":Fn(o),"data-readonly":Fn(r)}),[U,Y,n,R,_,L,b,o,r]),xe=A.useCallback((le={},me=null)=>oe(B(B({},k),le),{ref:no(me,ne=>{ne&&q(ne.tagName==="LABEL")}),onClick:Un(le.onClick,()=>{var ne;z||((ne=j.current)==null||ne.click(),requestAnimationFrame(()=>{var se;(se=j.current)==null||se.focus({preventScroll:!0})}))}),"data-disabled":Fn(n),"data-checked":Fn(Y),"data-invalid":Fn(o)}),[k,n,Y,o,z]),Ae=A.useCallback((le={},me=null)=>oe(B({},le),{ref:no(j,me),type:"checkbox",name:v,value:m,id:s,tabIndex:g,onChange:Un(le.onChange,J),onBlur:Un(le.onBlur,M,()=>F(!1)),onFocus:Un(le.onFocus,T,()=>F(!0)),onKeyDown:Un(le.onKeyDown,re),onKeyUp:Un(le.onKeyUp,fe),required:i,checked:Y,disabled:V,readOnly:r,"aria-label":x,"aria-labelledby":w,"aria-invalid":S?!!S:o,"aria-describedby":c,"aria-disabled":n,style:ZCe}),[v,m,s,J,M,T,re,fe,i,Y,V,r,x,w,S,o,c,n,g]),Ee=A.useCallback((le={},me=null)=>oe(B({},le),{ref:me,onMouseDown:Un(le.onMouseDown,cAe),"data-disabled":Fn(n),"data-checked":Fn(Y),"data-invalid":Fn(o)}),[Y,n,o]);return{state:{isInvalid:o,isFocused:R,isChecked:Y,isActive:U,isHovered:L,isIndeterminate:b,isDisabled:n,isReadOnly:r,isRequired:i},getRootProps:xe,getCheckboxProps:pe,getIndicatorProps:ce,getInputProps:Ae,getLabelProps:Ee,htmlProps:k}}function cAe(t){t.preventDefault(),t.stopPropagation()}function uAe(t){const e=parseFloat(t);return typeof e!="number"||Number.isNaN(e)?0:e}function XN(t,e){let n=uAe(t);const r=Vl(10,e!=null?e:10);return n=Math.round(n*r)/r,e?n.toFixed(e):n.toString()}function Gk(t){if(!Number.isFinite(t))return 0;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n+=1;return n}function lz(t,e,n){return(t-e)*100/(n-e)}function dAe(t,e,n){return(n-e)*t+e}function cz(t,e,n){const r=Math.round((t-e)/n)*n+e,i=Gk(n);return XN(r,i)}function tE(t,e,n){return t==null?t:(n<e&&console.warn("clamp: max cannot be less than min"),Math.min(Math.max(t,e),n))}function fAe(t={}){const{onChange:e,precision:n,defaultValue:r,value:i,step:o=1,min:s=Number.MIN_SAFE_INTEGER,max:a=Number.MAX_SAFE_INTEGER,keepWithinRange:l=!0}=t,c=fo(e),[u,d]=A.useState(()=>{var _;return r==null?"":(_=CP(r,o,n))!=null?_:""}),f=typeof i!="undefined",p=f?i:u,b=FY(lf(p),o),v=n!=null?n:b,m=A.useCallback(_=>{_!==p&&(f||d(_.toString()),c==null||c(_.toString(),lf(_)))},[c,f,p]),g=A.useCallback(_=>{let E=_;return l&&(E=tE(E,s,a)),XN(E,v)},[v,l,a,s]),x=A.useCallback((_=o)=>{let E;p===""?E=lf(_):E=lf(p)+_,E=g(E),m(E)},[g,o,m,p]),w=A.useCallback((_=o)=>{let E;p===""?E=lf(-_):E=lf(p)-_,E=g(E),m(E)},[g,o,m,p]),S=A.useCallback(()=>{var _;let E;r==null?E="":E=(_=CP(r,o,n))!=null?_:s,m(E)},[r,n,o,m,s]),D=A.useCallback(_=>{var E;const R=(E=CP(_,o,v))!=null?E:s;m(R)},[v,o,m,s]),k=lf(p);return{isOutOfRange:k>a||k<s,isAtMax:k===a,isAtMin:k===s,precision:v,value:p,valueAsNumber:k,update:m,reset:S,increment:x,decrement:w,clamp:g,cast:D,setValue:d}}function lf(t){return parseFloat(t.toString().replace(/[^\w.-]+/g,""))}function FY(t,e){return Math.max(Gk(e),Gk(t))}function CP(t,e,n){const r=lf(t);if(Number.isNaN(r))return;const i=FY(r,e);return XN(r,n!=null?n:i)}function nE(t,e,n,r){const i=fo(n);return A.useEffect(()=>{const o=typeof t=="function"?t():t!=null?t:document;if(!(!n||!o))return o.addEventListener(e,i,r),()=>{o.removeEventListener(e,i,r)}},[e,t,r,i,n]),()=>{const o=typeof t=="function"?t():t!=null?t:document;o==null||o.removeEventListener(e,i,r)}}function hAe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var qk="data-focus-lock",OY="data-focus-lock-disabled",pAe="data-no-focus-lock",mAe="data-autofocus-inside",gAe="data-no-autofocus";function AP(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function vAe(t,e){var n=A.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var yAe=typeof window!="undefined"?A.useLayoutEffect:A.useEffect,uz=new WeakMap;function NY(t,e){var n=vAe(null,function(r){return t.forEach(function(i){return AP(i,r)})});return yAe(function(){var r=uz.get(n);if(r){var i=new Set(r),o=new Set(t),s=n.current;i.forEach(function(a){o.has(a)||AP(a,null)}),o.forEach(function(a){i.has(a)||AP(a,s)})}uz.set(n,t)},[t]),n}var TP={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},jc=function(){return jc=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},jc.apply(this,arguments)};function _w(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function xAe(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function LY(t){return t}function BY(t,e){e===void 0&&(e=LY);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var s=e(o,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(o){for(r=!0;n.length;){var s=n;n=[],s.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(o),s=n}var l=function(){var u=s;s=[],u.forEach(o)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){s.push(u),c()},filter:function(u){return s=s.filter(u),n}}}};return i}function QN(t,e){return e===void 0&&(e=LY),BY(t,e)}function jY(t){t===void 0&&(t={});var e=BY(null);return e.options=jc({async:!0,ssr:!1},t),e}var UY=function(t){var e=t.sideCar,n=_w(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return A.createElement(r,jc({},n))};UY.isSideCarExport=!0;function bAe(t,e){return t.useMedium(e),UY}var zY=QN({},function(t){var e=t.target,n=t.currentTarget;return{target:e,currentTarget:n}}),VY=QN(),wAe=QN(),SAe=jY({async:!0,ssr:typeof document!="undefined"}),_Ae=A.createContext(void 0),EAe=[],ZN=A.forwardRef(function(e,n){var r,i=A.useState(),o=i[0],s=i[1],a=A.useRef(),l=A.useRef(!1),c=A.useRef(null),u=A.useState({}),d=u[1],f=e.children,p=e.disabled,b=p===void 0?!1:p,v=e.noFocusGuards,m=v===void 0?!1:v,g=e.persistentFocus,x=g===void 0?!1:g,w=e.crossFrame,S=w===void 0?!0:w,D=e.autoFocus,k=D===void 0?!0:D;e.allowTextSelection;var P=e.group,M=e.className,T=e.whiteList,_=e.hasPositiveIndices,E=e.shards,R=E===void 0?EAe:E,F=e.as,L=F===void 0?"div":F,N=e.lockProps,U=N===void 0?{}:N,H=e.sideCar,j=e.returnFocus,z=j===void 0?!1:j,q=e.focusOptions,$=e.onActivation,K=e.onDeactivation,G=A.useState({}),Y=G[0],J=A.useCallback(function(le){var me=le.captureFocusRestore;if(!c.current){var ne,se=(ne=document)==null?void 0:ne.activeElement;c.current=se,se!==document.body&&(c.current=me(se))}a.current&&$&&$(a.current),l.current=!0,d()},[$]),V=A.useCallback(function(){l.current=!1,K&&K(a.current),d()},[K]),re=A.useCallback(function(le){var me=c.current;if(me){var ne=(typeof me=="function"?me():me)||document.body,se=typeof z=="function"?z(ne):z;if(se){var ge=typeof se=="object"?se:void 0;c.current=null,le?Promise.resolve().then(function(){return ne.focus(ge)}):ne.focus(ge)}}},[z]),fe=A.useCallback(function(le){l.current&&zY.useMedium(le)},[]),pe=VY.useMedium,ce=A.useCallback(function(le){a.current!==le&&(a.current=le,s(le))},[]),xe=Vp((r={},r[OY]=b&&"disabled",r[qk]=P,r),U),Ae=m!==!0,Ee=Ae&&m!=="tail",ee=NY([n,ce]),Oe=A.useMemo(function(){return{observed:a,shards:R,enabled:!b,active:l.current}},[b,l.current,R,o]);return Ot.createElement(A.Fragment,null,Ae&&[Ot.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:b?-1:0,style:TP}),_?Ot.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:b?-1:1,style:TP}):null],!b&&Ot.createElement(H,{id:Y,sideCar:SAe,observed:o,disabled:b,persistentFocus:x,crossFrame:S,autoFocus:k,whiteList:T,shards:R,onActivation:J,onDeactivation:V,returnFocus:re,focusOptions:q,noFocusGuards:m}),Ot.createElement(L,Vp({ref:ee},xe,{className:M,onBlur:pe,onFocus:fe}),Ot.createElement(_Ae.Provider,{value:Oe},f)),Ee&&Ot.createElement("div",{"data-focus-guard":!0,tabIndex:b?-1:0,style:TP}))});ZN.propTypes={};function Kk(t,e){return Kk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Kk(t,e)}function CAe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Kk(t,e)}function bb(t){"@babel/helpers - typeof";return bb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bb(t)}function AAe(t,e){if(bb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TAe(t){var e=AAe(t,"string");return bb(e)=="symbol"?e:e+""}function MAe(t,e,n){return(e=TAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PAe(t,e){function n(r){return r.displayName||r.name||"Component"}return function(i){var o=[],s;function a(){s=t(o.map(function(c){return c.props})),e(s)}var l=function(c){CAe(u,c);function u(){return c.apply(this,arguments)||this}u.peek=function(){return s};var d=u.prototype;return d.componentDidMount=function(){o.push(this),a()},d.componentDidUpdate=function(){a()},d.componentWillUnmount=function(){var p=o.indexOf(this);o.splice(p,1),a()},d.render=function(){return Ot.createElement(i,this.props)},u}(A.PureComponent);return MAe(l,"displayName","SideEffect("+n(i)+")"),l}}var fu=function(t){for(var e=Array(t.length),n=0;n<t.length;++n)e[n]=t[n];return e},$p=function(t){return Array.isArray(t)?t:[t]},WY=function(t){return Array.isArray(t)?t[0]:t},DAe=function(t){if(t.nodeType!==Node.ELEMENT_NODE)return!1;var e=window.getComputedStyle(t,null);return!e||!e.getPropertyValue?!1:e.getPropertyValue("display")==="none"||e.getPropertyValue("visibility")==="hidden"},$Y=function(t){return t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?t.parentNode.host:t.parentNode},HY=function(t){return t===document||t&&t.nodeType===Node.DOCUMENT_NODE},RAe=function(t){return t.hasAttribute("inert")},kAe=function(t,e){return!t||HY(t)||!DAe(t)&&!RAe(t)&&e($Y(t))},GY=function(t,e){var n=t.get(e);if(n!==void 0)return n;var r=kAe(e,GY.bind(void 0,t));return t.set(e,r),r},IAe=function(t,e){return t&&!HY(t)?NAe(t)?e($Y(t)):!1:!0},qY=function(t,e){var n=t.get(e);if(n!==void 0)return n;var r=IAe(e,qY.bind(void 0,t));return t.set(e,r),r},KY=function(t){return t.dataset},FAe=function(t){return t.tagName==="BUTTON"},YY=function(t){return t.tagName==="INPUT"},XY=function(t){return YY(t)&&t.type==="radio"},OAe=function(t){return!((YY(t)||FAe(t))&&(t.type==="hidden"||t.disabled))},NAe=function(t){var e=t.getAttribute(gAe);return![!0,"true",""].includes(e)},JN=function(t){var e;return!!(t&&(!((e=KY(t))===null||e===void 0)&&e.focusGuard))},Yk=function(t){return!JN(t)},LAe=function(t){return!!t},BAe=function(t,e){var n=Math.max(0,t.tabIndex),r=Math.max(0,e.tabIndex),i=n-r,o=t.index-e.index;if(i){if(!n)return 1;if(!r)return-1}return i||o},jAe=function(t){return t.tabIndex<0&&!t.hasAttribute("tabindex")?0:t.tabIndex},e3=function(t,e,n){return fu(t).map(function(r,i){var o=jAe(r);return{node:r,index:i,tabIndex:n&&o===-1?(r.dataset||{}).focusGuard?0:-1:o}}).filter(function(r){return!e||r.tabIndex>=0}).sort(BAe)},UAe=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],t3=UAe.join(","),zAe="".concat(t3,", [data-focus-guard]"),QY=function(t,e){return fu((t.shadowRoot||t).children).reduce(function(n,r){return n.concat(r.matches(e?zAe:t3)?[r]:[],QY(r))},[])},VAe=function(t,e){var n;return t instanceof HTMLIFrameElement&&(!((n=t.contentDocument)===null||n===void 0)&&n.body)?Iv([t.contentDocument.body],e):[t]},Iv=function(t,e){return t.reduce(function(n,r){var i,o=QY(r,e),s=(i=[]).concat.apply(i,o.map(function(a){return VAe(a,e)}));return n.concat(s,r.parentNode?fu(r.parentNode.querySelectorAll(t3)).filter(function(a){return a===r}):[])},[])},WAe=function(t){var e=t.querySelectorAll("[".concat(mAe,"]"));return fu(e).map(function(n){return Iv([n])}).reduce(function(n,r){return n.concat(r)},[])},n3=function(t,e){return fu(t).filter(function(n){return GY(e,n)}).filter(function(n){return OAe(n)})},dz=function(t,e){return e===void 0&&(e=new Map),fu(t).filter(function(n){return qY(e,n)})},r3=function(t,e,n){return e3(n3(Iv(t,n),e),!0,n)},wb=function(t,e){return e3(n3(Iv(t),e),!1)},$Ae=function(t,e){return n3(WAe(t),e)},Tp=function(t,e){return t.shadowRoot?Tp(t.shadowRoot,e):Object.getPrototypeOf(t).contains!==void 0&&Object.getPrototypeOf(t).contains.call(t,e)?!0:fu(t.children).some(function(n){var r;if(n instanceof HTMLIFrameElement){var i=(r=n.contentDocument)===null||r===void 0?void 0:r.body;return i?Tp(i,e):!1}return Tp(n,e)})},HAe=function(t){for(var e=new Set,n=t.length,r=0;r<n;r+=1)for(var i=r+1;i<n;i+=1){var o=t[r].compareDocumentPosition(t[i]);(o&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&e.add(i),(o&Node.DOCUMENT_POSITION_CONTAINS)>0&&e.add(r)}return t.filter(function(s,a){return!e.has(a)})},ZY=function(t){return t.parentNode?ZY(t.parentNode):t},i3=function(t){var e=$p(t);return e.filter(Boolean).reduce(function(n,r){var i=r.getAttribute(qk);return n.push.apply(n,i?HAe(fu(ZY(r).querySelectorAll("[".concat(qk,'="').concat(i,'"]:not([').concat(OY,'="disabled"])')))):[r]),n},[])},GAe=function(t){try{return t()}catch(e){return}},Sb=function(t){if(t===void 0&&(t=document),!(!t||!t.activeElement)){var e=t.activeElement;return e.shadowRoot?Sb(e.shadowRoot):e instanceof HTMLIFrameElement&&GAe(function(){return e.contentWindow.document})?Sb(e.contentWindow.document):e}},qAe=function(t,e){return t===e},KAe=function(t,e){return!!fu(t.querySelectorAll("iframe")).some(function(n){return qAe(n,e)})},JY=function(t,e){return e===void 0&&(e=Sb(WY(t).ownerDocument)),!e||e.dataset&&e.dataset.focusGuard?!1:i3(t).some(function(n){return Tp(n,e)||KAe(n,e)})},YAe=function(t){t===void 0&&(t=document);var e=Sb(t);return e?fu(t.querySelectorAll("[".concat(pAe,"]"))).some(function(n){return Tp(n,e)}):!1},XAe=function(t,e){return e.filter(XY).filter(function(n){return n.name===t.name}).filter(function(n){return n.checked})[0]||t},o3=function(t,e){return XY(t)&&t.name?XAe(t,e):t},QAe=function(t){var e=new Set;return t.forEach(function(n){return e.add(o3(n,t))}),t.filter(function(n){return e.has(n)})},fz=function(t){return t[0]&&t.length>1?o3(t[0],t):t[0]},hz=function(t,e){return t.indexOf(o3(e,t))},Xk="NEW_FOCUS",ZAe=function(t,e,n,r,i){var o=t.length,s=t[0],a=t[o-1],l=JN(r);if(!(r&&t.indexOf(r)>=0)){var c=r!==void 0?n.indexOf(r):-1,u=i?n.indexOf(i):c,d=i?t.indexOf(i):-1;if(c===-1)return d!==-1?d:Xk;if(d===-1)return Xk;var f=c-u,p=n.indexOf(s),b=n.indexOf(a),v=QAe(n),m=r!==void 0?v.indexOf(r):-1,g=i?v.indexOf(i):m,x=v.filter(function(M){return M.tabIndex>=0}),w=r!==void 0?x.indexOf(r):-1,S=i?x.indexOf(i):w,D=w>=0&&S>=0?S-w:g-m;if(!f&&d>=0||e.length===0)return d;var k=hz(t,e[0]),P=hz(t,e[e.length-1]);if(c<=p&&l&&Math.abs(f)>1)return P;if(c>=b&&l&&Math.abs(f)>1)return k;if(f&&Math.abs(D)>1)return d;if(c<=p)return P;if(c>b)return k;if(f)return Math.abs(f)>1?d:(o+d+f)%o}},JAe=function(t){return function(e){var n,r=(n=KY(e))===null||n===void 0?void 0:n.autofocus;return e.autofocus||r!==void 0&&r!=="false"||t.indexOf(e)>=0}},pz=function(t,e,n){var r=t.map(function(o){var s=o.node;return s}),i=dz(r.filter(JAe(n)));return i&&i.length?fz(i):fz(dz(e))},Qk=function(t,e){return e===void 0&&(e=[]),e.push(t),t.parentNode&&Qk(t.parentNode.host||t.parentNode,e),e},MP=function(t,e){for(var n=Qk(t),r=Qk(e),i=0;i<n.length;i+=1){var o=n[i];if(r.indexOf(o)>=0)return o}return!1},eX=function(t,e,n){var r=$p(t),i=$p(e),o=r[0],s=!1;return i.filter(Boolean).forEach(function(a){s=MP(s||a,a)||s,n.filter(Boolean).forEach(function(l){var c=MP(o,l);c&&(!s||Tp(c,s)?s=c:s=MP(c,s))})}),s},mz=function(t,e){return t.reduce(function(n,r){return n.concat($Ae(r,e))},[])},eTe=function(t,e){var n=new Map;return e.forEach(function(r){return n.set(r.node,r)}),t.map(function(r){return n.get(r)}).filter(LAe)},tTe=function(t,e){var n=Sb($p(t).length>0?document:WY(t).ownerDocument),r=i3(t).filter(Yk),i=eX(n||t,t,r),o=new Map,s=wb(r,o),a=s.filter(function(b){var v=b.node;return Yk(v)});if(a[0]){var l=wb([i],o).map(function(b){var v=b.node;return v}),c=eTe(l,a),u=c.map(function(b){var v=b.node;return v}),d=c.filter(function(b){var v=b.tabIndex;return v>=0}).map(function(b){var v=b.node;return v}),f=ZAe(u,d,l,n,e);if(f===Xk){var p=pz(s,d,mz(r,o))||pz(s,u,mz(r,o));if(p)return{node:p};console.warn("focus-lock: cannot find any node to move focus into");return}return f===void 0?f:c[f]}},nTe=function(t){var e=i3(t).filter(Yk),n=eX(t,t,e),r=e3(Iv([n],!0),!0,!0),i=Iv(e,!1);return r.map(function(o){var s=o.node,a=o.index;return{node:s,index:a,lockItem:i.indexOf(s)>=0,guard:JN(s)}})},s3=function(t,e){t&&("focus"in t&&t.focus(e),"contentWindow"in t&&t.contentWindow&&t.contentWindow.focus())},PP=0,DP=!1,tX=function(t,e,n){n===void 0&&(n={});var r=tTe(t,e);if(!DP&&r){if(PP>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),DP=!0,setTimeout(function(){DP=!1},1);return}PP++,s3(r.node,n.focusOptions),PP--}};function sy(t){if(!t)return null;if(typeof WeakRef=="undefined")return function(){return t||null};var e=t?new WeakRef(t):null;return function(){return(e==null?void 0:e.deref())||null}}var rTe=function(t){if(!t)return null;for(var e=[],n=t;n&&n!==document.body;)e.push({current:sy(n),parent:sy(n.parentElement),left:sy(n.previousElementSibling),right:sy(n.nextElementSibling)}),n=n.parentElement;return{element:sy(t),stack:e,ownerDocument:t.ownerDocument}},iTe=function(t){var e,n,r,i,o;if(t)for(var s=t.stack,a=t.ownerDocument,l=new Map,c=0,u=s;c<u.length;c++){var d=u[c],f=(e=d.parent)===null||e===void 0?void 0:e.call(d);if(f&&a.contains(f)){for(var p=(n=d.left)===null||n===void 0?void 0:n.call(d),b=d.current(),v=f.contains(b)?b:void 0,m=(r=d.right)===null||r===void 0?void 0:r.call(d),g=r3([f],l),x=(o=(i=v!=null?v:p==null?void 0:p.nextElementSibling)!==null&&i!==void 0?i:m)!==null&&o!==void 0?o:p;x;){for(var w=0,S=g;w<S.length;w++){var D=S[w];if(x!=null&&x.contains(D.node))return D.node}x=x.nextElementSibling}if(g.length)return g[0].node}}},nX=function(t){var e=rTe(t);return function(){return iTe(e)}},oTe=function(t,e,n){if(!t||!e)return console.error("no element or scope given"),{};var r=$p(e);if(r.every(function(s){return!Tp(s,t)}))return console.error("Active element is not contained in the scope"),{};var i=n?r3(r,new Map):wb(r,new Map),o=i.findIndex(function(s){var a=s.node;return a===t});if(o!==-1)return{prev:i[o-1],next:i[o+1],first:i[0],last:i[i.length-1]}},sTe=function(t,e){var n=e?r3($p(t),new Map):wb($p(t),new Map);return{first:n[0],last:n[n.length-1]}},aTe=function(t){return Object.assign({scope:document.body,cycle:!0,onlyTabbable:!0},t)},rX=function(t,e,n){e===void 0&&(e={});var r=aTe(e),i=oTe(t,r.scope,r.onlyTabbable);if(i){var o=n(i,r.cycle);o&&s3(o.node,r.focusOptions)}},lTe=function(t,e){e===void 0&&(e={}),rX(t,e,function(n,r){var i=n.next,o=n.first;return i||r&&o})},cTe=function(t,e){e===void 0&&(e={}),rX(t,e,function(n,r){var i=n.prev,o=n.last;return i||r&&o})},iX=function(t,e,n){var r,i=sTe(t,(r=e.onlyTabbable)!==null&&r!==void 0?r:!0),o=i[n];o&&s3(o.node,e.focusOptions)},uTe=function(t,e){e===void 0&&(e={}),iX(t,e,"first")},dTe=function(t,e){e===void 0&&(e={}),iX(t,e,"last")};function a3(t){setTimeout(t,1)}var fTe=function(e){return e&&"current"in e?e.current:e},oX=function(){return document&&document.activeElement===document.body},hTe=function(){return oX()||YAe()},iv=null,Ys=null,gz=function(){return null},ov=null,_b=!1,l3=!1,pTe=function(){return!0},mTe=function(e){return(iv.whiteList||pTe)(e)},gTe=function(e,n){ov={observerNode:e,portaledElement:n}},vTe=function(e){return ov&&ov.portaledElement===e};function vz(t,e,n,r){var i=null,o=t;do{var s=r[o];if(s.guard)s.node.dataset.focusAutoGuard&&(i=s);else if(s.lockItem){if(o!==t)return;i=null}else break}while((o+=n)!==e);i&&(i.node.tabIndex=0)}var yTe=function(e){return e?!!_b:_b==="meanwhile"},xTe=function t(e,n,r){return n&&(n.host===e&&(!n.activeElement||r.contains(n.activeElement))||n.parentNode&&t(e,n.parentNode,r))},bTe=function(e,n){return n.some(function(r){return xTe(e,r,r)})},sX=function(e){return wb(e,new Map)},wTe=function(e){return!sX([e.parentNode]).some(function(n){return n.node===e})},_C=function(){var e=!1;if(iv){var n=iv,r=n.observed,i=n.persistentFocus,o=n.autoFocus,s=n.shards,a=n.crossFrame,l=n.focusOptions,c=n.noFocusGuards,u=r||ov&&ov.portaledElement;if(oX()&&Ys&&Ys!==document.body&&(!document.body.contains(Ys)||wTe(Ys))){var d=gz();d&&d.focus()}var f=document&&document.activeElement;if(u){var p=[u].concat(s.map(fTe).filter(Boolean)),b=function(){if(!yTe(a)||!c||!Ys||l3)return!1;var w=sX(p),S=w.findIndex(function(D){var k=D.node;return k===Ys});return S===0||S===w.length-1};if((!f||mTe(f))&&(i||b()||!hTe()||!Ys&&o)&&(u&&!(JY(p)||f&&bTe(f,p)||vTe(f))&&(document&&!Ys&&f&&!o?(f.blur&&f.blur(),document.body.focus()):(e=tX(p,Ys,{focusOptions:l}),ov={})),Ys=document&&document.activeElement,Ys!==document.body&&(gz=nX(Ys)),_b=!1),document&&f!==document.activeElement&&document.querySelector("[data-focus-auto-guard]")){var v=document&&document.activeElement,m=nTe(p),g=m.map(function(x){var w=x.node;return w}).indexOf(v);g>-1&&(m.filter(function(x){var w=x.guard,S=x.node;return w&&S.dataset.focusAutoGuard}).forEach(function(x){var w=x.node;return w.removeAttribute("tabIndex")}),vz(g,m.length,1,m),vz(g,-1,-1,m))}}}return e},aX=function(e){_C()&&e&&(e.stopPropagation(),e.preventDefault())},c3=function(){return a3(_C)},STe=function(e){var n=e.target,r=e.currentTarget;r.contains(n)||gTe(r,n)},_Te=function(){return null},lX=function(){l3=!0},cX=function(){l3=!1,_b="just",a3(function(){_b="meanwhile"})},ETe=function(){document.addEventListener("focusin",aX),document.addEventListener("focusout",c3),window.addEventListener("focus",lX),window.addEventListener("blur",cX)},CTe=function(){document.removeEventListener("focusin",aX),document.removeEventListener("focusout",c3),window.removeEventListener("focus",lX),window.removeEventListener("blur",cX)};function ATe(t){return t.filter(function(e){var n=e.disabled;return!n})}var uX={moveFocusInside:tX,focusInside:JY,focusNextElement:lTe,focusPrevElement:cTe,focusFirstElement:uTe,focusLastElement:dTe,captureFocusRestore:nX};function TTe(t){var e=t.slice(-1)[0];e&&!iv&&ETe();var n=iv,r=n&&e&&e.id===n.id;iv=e,n&&!r&&(n.onDeactivation(),t.filter(function(i){var o=i.id;return o===n.id}).length||n.returnFocus(!e)),e?(Ys=null,(!r||n.observed!==e.observed)&&e.onActivation(uX),_C(),a3(_C)):(CTe(),Ys=null)}zY.assignSyncMedium(STe);VY.assignMedium(c3);wAe.assignMedium(function(t){return t(uX)});const MTe=PAe(ATe,TTe)(_Te);var Zk=A.forwardRef(function(e,n){return Ot.createElement(ZN,Vp({sideCar:MTe,ref:n},e))}),dX=ZN.propTypes||{};dX.sideCar;hAe(dX,["sideCar"]);Zk.propTypes={};function PTe(t){return t!=null&&typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE}function fX(t){var e;if(!PTe(t))return!1;const n=(e=t.ownerDocument.defaultView)!=null?e:window;return t instanceof n.HTMLElement}function DTe(t){const e=t.ownerDocument.defaultView||window,{overflow:n,overflowX:r,overflowY:i}=e.getComputedStyle(t);return/auto|scroll|overlay|hidden/.test(n+i+r)}function RTe(t){return t.localName==="html"?t:t.assignedSlot||t.parentElement||t.ownerDocument.documentElement}function hX(t){return["html","body","#document"].includes(t.localName)?t.ownerDocument.body:fX(t)&&DTe(t)?t:hX(RTe(t))}var kTe=t=>t.hasAttribute("tabindex");function ITe(t){return!!t.getAttribute("disabled")||!!t.getAttribute("aria-disabled")}function pX(t){return t.parentElement&&pX(t.parentElement)?!0:t.hidden}function FTe(t){const e=t.getAttribute("contenteditable");return e!=="false"&&e!=null}function OTe(t){if(!fX(t)||pX(t)||ITe(t))return!1;const{localName:e}=t;if(["input","select","textarea","button"].indexOf(e)>=0)return!0;const r={a:()=>t.hasAttribute("href"),audio:()=>t.hasAttribute("controls"),video:()=>t.hasAttribute("controls")};return e in r?r[e]():FTe(t)?!0:kTe(t)}var NTe=["input:not(:disabled):not([disabled])","select:not(:disabled):not([disabled])","textarea:not(:disabled):not([disabled])","embed","iframe","object","a[href]","area[href]","button:not(:disabled):not([disabled])","[tabindex]","audio[controls]","video[controls]","*[tabindex]:not([aria-disabled])","*[contenteditable]"],LTe=NTe.join(),BTe=t=>t.offsetWidth>0&&t.offsetHeight>0;function jTe(t){const e=Array.from(t.querySelectorAll(LTe));return e.unshift(t),e.filter(n=>OTe(n)&&BTe(n))}var yz,UTe=(yz=Zk.default)!=null?yz:Zk,mX=t=>{const{initialFocusRef:e,finalFocusRef:n,contentRef:r,restoreFocus:i,children:o,isDisabled:s,autoFocus:a,persistentFocus:l,lockFocusAcrossFrames:c}=t,u=A.useCallback(()=>{e!=null&&e.current?e.current.focus():r!=null&&r.current&&jTe(r.current).length===0&&requestAnimationFrame(()=>{var b;(b=r.current)==null||b.focus()})},[e,r]),d=A.useCallback(()=>{var p;(p=n==null?void 0:n.current)==null||p.focus()},[n]),f=i&&!n;return h.jsx(UTe,{crossFrame:c,persistentFocus:l,autoFocus:a,disabled:s,onActivation:u,onDeactivation:d,returnFocus:f,children:o})};mX.displayName="FocusLock";var[zTe,VTe]=pi({name:"InputGroupStylesContext",errorMessage:`useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in "<InputGroup />" `}),sv=Yt(function(e,n){const r=gs("Input",e),f=di(e),{children:i,className:o}=f,s=Tt(f,["children","className"]),a=_n("chakra-input__group",o),l={},c=GN(i),u=r.field;c.forEach(p=>{var b,v;r&&(u&&p.type.id==="InputLeftElement"&&(l.paddingStart=(b=u.height)!=null?b:u.h),u&&p.type.id==="InputRightElement"&&(l.paddingEnd=(v=u.height)!=null?v:u.h),p.type.id==="InputRightAddon"&&(l.borderEndRadius=0),p.type.id==="InputLeftAddon"&&(l.borderStartRadius=0))});const d=c.map(p=>{var b,v;const m=Xq({size:((b=p.props)==null?void 0:b.size)||e.size,variant:((v=p.props)==null?void 0:v.variant)||e.variant});return p.type.id!=="Input"?A.cloneElement(p,m):A.cloneElement(p,Object.assign(m,l,p.props))});return h.jsx(Ut.div,oe(B({className:a,ref:n,__css:B({width:"100%",display:"flex",position:"relative",isolation:"isolate"},r.group),"data-group":!0},s),{children:h.jsx(zTe,{value:r,children:d})}))});sv.displayName="InputGroup";var WTe=Ut("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),mT=Yt(function(e,n){var r,i;const d=e,{placement:o="left"}=d,s=Tt(d,["placement"]),a=VTe(),l=a.field,u=B({[o==="left"?"insetStart":"insetEnd"]:"0",width:(r=l==null?void 0:l.height)!=null?r:l==null?void 0:l.h,height:(i=l==null?void 0:l.height)!=null?i:l==null?void 0:l.h,fontSize:l==null?void 0:l.fontSize},a.element);return h.jsx(WTe,B({ref:n,__css:u},s))});mT.id="InputElement";mT.displayName="InputElement";var gX=Yt(function(e,n){const s=e,{className:r}=s,i=Tt(s,["className"]),o=_n("chakra-input__left-element",r);return h.jsx(mT,B({ref:n,placement:"left",className:o},i))});gX.id="InputLeftElement";gX.displayName="InputLeftElement";var Mp=Yt(function(e,n){const s=e,{className:r}=s,i=Tt(s,["className"]),o=_n("chakra-input__right-element",r);return h.jsx(mT,B({ref:n,placement:"right",className:o},i))});Mp.id="InputRightElement";Mp.displayName="InputRightElement";var si=Yt(function(e,n){const c=e,{htmlSize:r}=c,i=Tt(c,["htmlSize"]),o=gs("Input",i),s=di(i),a=qN(s),l=_n("chakra-input",e.className);return h.jsx(Ut.input,oe(B({size:r},a),{__css:o.field,ref:n,className:l}))});si.displayName="Input";si.id="Input";var EC=Yt(function(e,n){const m=e,{templateAreas:r,gap:i,rowGap:o,columnGap:s,column:a,row:l,autoFlow:c,autoRows:u,templateRows:d,autoColumns:f,templateColumns:p}=m,b=Tt(m,["templateAreas","gap","rowGap","columnGap","column","row","autoFlow","autoRows","templateRows","autoColumns","templateColumns"]),v={display:"grid",gridTemplateAreas:r,gridGap:i,gridRowGap:o,gridColumnGap:s,gridAutoColumns:f,gridColumn:a,gridRow:l,gridAutoFlow:c,gridAutoRows:u,gridTemplateRows:d,gridTemplateColumns:p};return h.jsx(Ut.div,B({ref:n,__css:v},b))});EC.displayName="Grid";var vX=Object.freeze(["base","sm","md","lg","xl","2xl"]);function u3(t,e){return Array.isArray(t)?t.map(n=>n===null?null:e(n)):us(t)?Object.keys(t).reduce((n,r)=>(n[r]=e(t[r]),n),{}):t!=null?e(t):null}function $Te(t,e=vX){const n={};return t.forEach((r,i)=>{const o=e[i];r!=null&&(n[o]=r)}),n}var CC=Yt(function(e,n){const d=e,{columns:r,spacingX:i,spacingY:o,spacing:s,minChildWidth:a}=d,l=Tt(d,["columns","spacingX","spacingY","spacing","minChildWidth"]),c=c0(),u=a?GTe(a,c):qTe(r);return h.jsx(EC,B({ref:n,gap:s,columnGap:i,rowGap:o,templateColumns:u},l))});CC.displayName="SimpleGrid";function HTe(t){return typeof t=="number"?`${t}px`:t}function GTe(t,e){return u3(t,n=>{const r=Zhe("sizes",n,HTe(n))(e);return n===null?null:`repeat(auto-fit, minmax(${r}, 1fr))`})}function qTe(t){return u3(t,e=>e===null?null:`repeat(${e}, minmax(0, 1fr))`)}var dt=Yt(function(e,n){const r=Wa("Text",e),u=di(e),{className:i,align:o,decoration:s,casing:a}=u,l=Tt(u,["className","align","decoration","casing"]),c=Xq({textAlign:e.align,textDecoration:e.decoration,textTransform:e.casing});return h.jsx(Ut.p,oe(B(B({ref:n,className:_n("chakra-text",e.className)},c),l),{__css:r}))});dt.displayName="Text";var yX=t=>h.jsx(Ut.div,oe(B({className:"chakra-stack__item"},t),{__css:B({display:"inline-block",flex:"0 0 auto",minWidth:0},t.__css)}));yX.displayName="StackItem";function KTe(t){const{spacing:e,direction:n}=t,r={column:{my:e,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:e,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:e,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:e,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":u3(n,i=>r[i])}}var gT=Yt((t,e)=>{const w=t,{isInline:n,direction:r,align:i,justify:o,spacing:s="0.5rem",wrap:a,children:l,divider:c,className:u,shouldWrapChildren:d}=w,f=Tt(w,["isInline","direction","align","justify","spacing","wrap","children","divider","className","shouldWrapChildren"]),p=n?"row":r!=null?r:"column",b=A.useMemo(()=>KTe({spacing:s,direction:p}),[s,p]),v=!!c,m=!d&&!v,g=A.useMemo(()=>{const S=GN(l);return m?S:S.map((D,k)=>{const P=typeof D.key!="undefined"?D.key:k,M=k+1===S.length,_=d?h.jsx(yX,{children:D},P):D;if(!v)return _;const E=A.cloneElement(c,{__css:b}),R=M?null:E;return h.jsxs(A.Fragment,{children:[_,R]},P)})},[c,b,v,m,d,l]),x=_n("chakra-stack",u);return h.jsx(Ut.div,oe(B({ref:e,display:"flex",alignItems:i,justifyContent:o,flexDirection:p,flexWrap:a,gap:v?void 0:s,className:x},f),{children:g}))});gT.displayName="Stack";var $t=Yt((t,e)=>h.jsx(gT,oe(B({align:"center"},t),{direction:"column",ref:e})));$t.displayName="VStack";var Ln=Yt((t,e)=>h.jsx(gT,oe(B({align:"center"},t),{direction:"row",ref:e})));Ln.displayName="HStack";var Br=Yt(function(e,n){const r=Wa("Heading",e),s=di(e),{className:i}=s,o=Tt(s,["className"]);return h.jsx(Ut.h2,oe(B({ref:n,className:_n("chakra-heading",e.className)},o),{__css:r}))});Br.displayName="Heading";var yt=Ut("div");yt.displayName="Box";var xX=Yt(function(e,n){const a=e,{size:r,centerContent:i=!0}=a,o=Tt(a,["size","centerContent"]),s=i?{display:"flex",alignItems:"center",justifyContent:"center"}:{};return h.jsx(yt,B({ref:n,boxSize:r,__css:oe(B({},s),{flexShrink:0,flexGrow:0})},o))});xX.displayName="Square";var YTe=Yt(function(e,n){const o=e,{size:r}=o,i=Tt(o,["size"]);return h.jsx(xX,B({size:r,ref:n,borderRadius:"9999px"},i))});YTe.displayName="Circle";var po=Yt(function(e,n){const r=Wa("Badge",e),s=di(e),{className:i}=s,o=Tt(s,["className"]);return h.jsx(Ut.span,oe(B({ref:n,className:_n("chakra-badge",e.className)},o),{__css:B({display:"inline-block",whiteSpace:"nowrap",verticalAlign:"middle"},r)}))});po.displayName="Badge";var Ml=Ut("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});Ml.displayName="Center";var XTe={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};Yt(function(e,n){const o=e,{axis:r="both"}=o,i=Tt(o,["axis"]);return h.jsx(Ut.div,oe(B({ref:n,__css:XTe[r]},i),{position:"absolute"}))});var Jk=Yt(function(e,n){const r=Wa("Code",e),s=di(e),{className:i}=s,o=Tt(s,["className"]);return h.jsx(Ut.code,oe(B({ref:n,className:_n("chakra-code",e.className)},o),{__css:B({display:"inline-block"},r)}))});Jk.displayName="Code";var AC=Yt(function(e,n){const a=di(e),{className:r,centerContent:i}=a,o=Tt(a,["className","centerContent"]),s=Wa("Container",e);return h.jsx(Ut.div,oe(B({ref:n,className:_n("chakra-container",r)},o),{__css:B(B({},s),i&&{display:"flex",flexDirection:"column",alignItems:"center"})}))});AC.displayName="Container";var vd=Yt(function(e,n){const m=Wa("Divider",e),{borderLeftWidth:r,borderBottomWidth:i,borderTopWidth:o,borderRightWidth:s,borderWidth:a,borderStyle:l,borderColor:c}=m,u=Tt(m,["borderLeftWidth","borderBottomWidth","borderTopWidth","borderRightWidth","borderWidth","borderStyle","borderColor"]),g=di(e),{className:d,orientation:f="horizontal",__css:p}=g,b=Tt(g,["className","orientation","__css"]),v={vertical:{borderLeftWidth:r||s||a||"1px",height:"100%"},horizontal:{borderBottomWidth:i||o||a||"1px",width:"100%"}};return h.jsx(Ut.hr,oe(B({ref:n,"aria-orientation":f},b),{__css:B(B(oe(B({},u),{border:"0",borderColor:c,borderStyle:l}),v[f]),p),className:_n("chakra-divider",d)}))});vd.displayName="Divider";var gc=Yt(function(e,n){const f=e,{direction:r,align:i,justify:o,wrap:s,basis:a,grow:l,shrink:c}=f,u=Tt(f,["direction","align","justify","wrap","basis","grow","shrink"]),d={display:"flex",flexDirection:r,alignItems:i,justifyContent:o,flexWrap:s,flexBasis:a,flexGrow:l,flexShrink:c};return h.jsx(Ut.div,B({ref:n,__css:d},u))});gc.displayName="Flex";function QTe(t,e={}){const{ssr:n=!0,fallback:r}=e,{getWindow:i}=Cwe(),o=Array.isArray(t)?t:[t];let s=Array.isArray(r)?r:[r];s=s.filter(c=>c!=null);const[a,l]=A.useState(()=>o.map((c,u)=>({media:c,matches:n?!!s[u]:i().matchMedia(c).matches})));return A.useEffect(()=>{const c=i();l(o.map(f=>({media:f,matches:c.matchMedia(f).matches})));const u=o.map(f=>c.matchMedia(f)),d=f=>{l(p=>p.slice().map(b=>b.media===f.media?oe(B({},b),{matches:f.matches}):b))};return u.forEach(f=>{typeof f.addListener=="function"?f.addListener(d):f.addEventListener("change",d)}),()=>{u.forEach(f=>{typeof f.removeListener=="function"?f.removeListener(d):f.removeEventListener("change",d)})}},[i]),a.map(c=>c.matches)}function ZTe(t,e,n=vX){let r=Object.keys(t).indexOf(e);if(r!==-1)return t[e];let i=n.indexOf(e);for(;i>=0;){const o=n[i];if(t.hasOwnProperty(o)){r=i;break}i-=1}if(r!==-1){const o=n[r];return t[o]}}function JTe(t){var e,n;const r=us(t)?t:{fallback:t!=null?t:"base"},o=c0().__breakpoints.details.map(({minMaxQuery:c,breakpoint:u})=>({breakpoint:u,query:c.replace("@media screen and ","")})),s=o.map(c=>c.breakpoint===r.fallback),l=QTe(o.map(c=>c.query),{fallback:s,ssr:r.ssr}).findIndex(c=>c==!0);return(n=(e=o[l])==null?void 0:e.breakpoint)!=null?n:r.fallback}function Ji(t,e){var n;const r=us(e)?e:{fallback:"base"},i=JTe(r),o=c0();if(!i)return;const s=Array.from(((n=o.__breakpoints)==null?void 0:n.keys)||[]),a=Array.isArray(t)?Object.fromEntries(Object.entries($Te(t,s)).map(([l,c])=>[l,c])):t;return ZTe(a,i,s)}function e2e(){const t=A.useRef(new Map),e=t.current,n=A.useCallback((i,o,s,a)=>{t.current.set(s,{type:o,el:i,options:a}),i.addEventListener(o,s,a)},[]),r=A.useCallback((i,o,s,a)=>{i.removeEventListener(o,s,a),t.current.delete(s)},[]);return A.useEffect(()=>()=>{e.forEach((i,o)=>{r(i.el,i.type,o,i.options)})},[r,e]),{add:n,remove:r}}function RP(t){const e=t.target,{tagName:n,isContentEditable:r}=e;return n!=="INPUT"&&n!=="TEXTAREA"&&r!==!0}function t2e(t={}){const H=t,{ref:e,isDisabled:n,isFocusable:r,clickOnEnter:i=!0,clickOnSpace:o=!0,onMouseDown:s,onMouseUp:a,onClick:l,onKeyDown:c,onKeyUp:u,tabIndex:d,onMouseOver:f,onMouseLeave:p}=H,b=Tt(H,["ref","isDisabled","isFocusable","clickOnEnter","clickOnSpace","onMouseDown","onMouseUp","onClick","onKeyDown","onKeyUp","tabIndex","onMouseOver","onMouseLeave"]),[v,m]=A.useState(!0),[g,x]=A.useState(!1),w=e2e(),S=j=>{j&&j.tagName!=="BUTTON"&&m(!1)},D=v?d:d||0,k=n&&!r,P=A.useCallback(j=>{if(n){j.stopPropagation(),j.preventDefault();return}j.currentTarget.focus(),l==null||l(j)},[n,l]),M=A.useCallback(j=>{g&&RP(j)&&(j.preventDefault(),j.stopPropagation(),x(!1),w.remove(document,"keyup",M,!1))},[g,w]),T=A.useCallback(j=>{if(c==null||c(j),n||j.defaultPrevented||j.metaKey||!RP(j.nativeEvent)||v)return;const z=i&&j.key==="Enter";o&&j.key===" "&&(j.preventDefault(),x(!0)),z&&(j.preventDefault(),j.currentTarget.click()),w.add(document,"keyup",M,!1)},[n,v,c,i,o,w,M]),_=A.useCallback(j=>{if(u==null||u(j),n||j.defaultPrevented||j.metaKey||!RP(j.nativeEvent)||v)return;o&&j.key===" "&&(j.preventDefault(),x(!1),j.currentTarget.click())},[o,v,n,u]),E=A.useCallback(j=>{j.button===0&&(x(!1),w.remove(document,"mouseup",E,!1))},[w]),R=A.useCallback(j=>{if(j.button!==0)return;if(n){j.stopPropagation(),j.preventDefault();return}v||x(!0),j.currentTarget.focus({preventScroll:!0}),w.add(document,"mouseup",E,!1),s==null||s(j)},[n,v,s,w,E]),F=A.useCallback(j=>{j.button===0&&(v||x(!1),a==null||a(j))},[a,v]),L=A.useCallback(j=>{if(n){j.preventDefault();return}f==null||f(j)},[n,f]),N=A.useCallback(j=>{g&&(j.preventDefault(),x(!1)),p==null||p(j)},[g,p]),U=no(e,S);return v?oe(B({},b),{ref:U,type:"button","aria-disabled":k?void 0:n,disabled:k,onClick:P,onMouseDown:s,onMouseUp:a,onKeyUp:u,onKeyDown:c,onMouseOver:f,onMouseLeave:p}):oe(B({},b),{ref:U,role:"button","data-active":Fn(g),"aria-disabled":n?"true":void 0,tabIndex:k?void 0:D,onClick:P,onMouseDown:R,onMouseUp:F,onKeyUp:_,onKeyDown:T,onMouseOver:L,onMouseLeave:N})}var Gm=(t,e)=>({var:t,varRef:e?`var(${t}, ${e})`:`var(${t})`}),Wo={arrowShadowColor:Gm("--popper-arrow-shadow-color"),arrowSize:Gm("--popper-arrow-size","8px"),arrowSizeHalf:Gm("--popper-arrow-size-half"),arrowBg:Gm("--popper-arrow-bg"),transformOrigin:Gm("--popper-transform-origin"),arrowOffset:Gm("--popper-arrow-offset")};function n2e(t){if(t.includes("top"))return"1px 1px 0px 0 var(--popper-arrow-shadow-color)";if(t.includes("bottom"))return"-1px -1px 0px 0 var(--popper-arrow-shadow-color)";if(t.includes("right"))return"-1px 1px 0px 0 var(--popper-arrow-shadow-color)";if(t.includes("left"))return"1px -1px 0px 0 var(--popper-arrow-shadow-color)"}var r2e={top:"bottom center","top-start":"bottom left","top-end":"bottom right",bottom:"top center","bottom-start":"top left","bottom-end":"top right",left:"right center","left-start":"right top","left-end":"right bottom",right:"left center","right-start":"left top","right-end":"left bottom"},i2e=t=>r2e[t],xz={scroll:!0,resize:!0};function o2e(t){let e;return typeof t=="object"?e={enabled:!0,options:B(B({},xz),t)}:e={enabled:t,options:xz},e}var s2e={name:"matchWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:t})=>{t.styles.popper.width=`${t.rects.reference.width}px`},effect:({state:t})=>()=>{const e=t.elements.reference;t.elements.popper.style.width=`${e.offsetWidth}px`}},a2e={name:"transformOrigin",enabled:!0,phase:"write",fn:({state:t})=>{bz(t)},effect:({state:t})=>()=>{bz(t)}},bz=t=>{t.elements.popper.style.setProperty(Wo.transformOrigin.var,i2e(t.placement))},l2e={name:"positionArrow",enabled:!0,phase:"afterWrite",fn:({state:t})=>{c2e(t)}},c2e=t=>{var e;if(!t.placement)return;const n=u2e(t.placement);if((e=t.elements)!=null&&e.arrow&&n){Object.assign(t.elements.arrow.style,{[n.property]:n.value,width:Wo.arrowSize.varRef,height:Wo.arrowSize.varRef,zIndex:-1});const r={[Wo.arrowSizeHalf.var]:`calc(${Wo.arrowSize.varRef} / 2 - 1px)`,[Wo.arrowOffset.var]:`calc(${Wo.arrowSizeHalf.varRef} * -1)`};for(const i in r)t.elements.arrow.style.setProperty(i,r[i])}},u2e=t=>{if(t.startsWith("top"))return{property:"bottom",value:Wo.arrowOffset.varRef};if(t.startsWith("bottom"))return{property:"top",value:Wo.arrowOffset.varRef};if(t.startsWith("left"))return{property:"right",value:Wo.arrowOffset.varRef};if(t.startsWith("right"))return{property:"left",value:Wo.arrowOffset.varRef}},d2e={name:"innerArrow",enabled:!0,phase:"main",requires:["arrow"],fn:({state:t})=>{wz(t)},effect:({state:t})=>()=>{wz(t)}},wz=t=>{if(!t.elements.arrow)return;const e=t.elements.arrow.querySelector("[data-popper-arrow-inner]");if(!e)return;const n=n2e(t.placement);n&&e.style.setProperty("--popper-arrow-default-shadow",n),Object.assign(e.style,{transform:"rotate(45deg)",background:Wo.arrowBg.varRef,top:0,left:0,width:"100%",height:"100%",position:"absolute",zIndex:"inherit",boxShadow:"var(--popper-arrow-shadow, var(--popper-arrow-default-shadow))"})},f2e={"start-start":{ltr:"left-start",rtl:"right-start"},"start-end":{ltr:"left-end",rtl:"right-end"},"end-start":{ltr:"right-start",rtl:"left-start"},"end-end":{ltr:"right-end",rtl:"left-end"},start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}},h2e={"auto-start":"auto-end","auto-end":"auto-start","top-start":"top-end","top-end":"top-start","bottom-start":"bottom-end","bottom-end":"bottom-start"};function p2e(t,e="ltr"){var n,r;const i=((n=f2e[t])==null?void 0:n[e])||t;return e==="ltr"?i:(r=h2e[t])!=null?r:i}var sa="top",wl="bottom",Sl="right",aa="left",d3="auto",Ew=[sa,wl,Sl,aa],Fv="start",Eb="end",m2e="clippingParents",bX="viewport",ay="popper",g2e="reference",Sz=Ew.reduce(function(t,e){return t.concat([e+"-"+Fv,e+"-"+Eb])},[]),wX=[].concat(Ew,[d3]).reduce(function(t,e){return t.concat([e,e+"-"+Fv,e+"-"+Eb])},[]),v2e="beforeRead",y2e="read",x2e="afterRead",b2e="beforeMain",w2e="main",S2e="afterMain",_2e="beforeWrite",E2e="write",C2e="afterWrite",A2e=[v2e,y2e,x2e,b2e,w2e,S2e,_2e,E2e,C2e];function lu(t){return t?(t.nodeName||"").toLowerCase():null}function Na(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Hp(t){var e=Na(t).Element;return t instanceof e||t instanceof Element}function gl(t){var e=Na(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function f3(t){if(typeof ShadowRoot=="undefined")return!1;var e=Na(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function T2e(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},o=e.elements[n];!gl(o)||!lu(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var a=i[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function M2e(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},s=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=s.reduce(function(l,c){return l[c]="",l},{});!gl(i)||!lu(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}const P2e={name:"applyStyles",enabled:!0,phase:"write",fn:T2e,effect:M2e,requires:["computeStyles"]};function qc(t){return t.split("-")[0]}var Pp=Math.max,TC=Math.min,Ov=Math.round;function eI(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function SX(){return!/^((?!chrome|android).)*safari/i.test(eI())}function Nv(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,o=1;e&&gl(t)&&(i=t.offsetWidth>0&&Ov(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Ov(r.height)/t.offsetHeight||1);var s=Hp(t)?Na(t):window,a=s.visualViewport,l=!SX()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,u=(r.top+(l&&a?a.offsetTop:0))/o,d=r.width/i,f=r.height/o;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c,x:c,y:u}}function h3(t){var e=Nv(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function _X(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&f3(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function yd(t){return Na(t).getComputedStyle(t)}function D2e(t){return["table","td","th"].indexOf(lu(t))>=0}function uh(t){return((Hp(t)?t.ownerDocument:t.document)||window.document).documentElement}function vT(t){return lu(t)==="html"?t:t.assignedSlot||t.parentNode||(f3(t)?t.host:null)||uh(t)}function _z(t){return!gl(t)||yd(t).position==="fixed"?null:t.offsetParent}function R2e(t){var e=/firefox/i.test(eI()),n=/Trident/i.test(eI());if(n&&gl(t)){var r=yd(t);if(r.position==="fixed")return null}var i=vT(t);for(f3(i)&&(i=i.host);gl(i)&&["html","body"].indexOf(lu(i))<0;){var o=yd(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function Cw(t){for(var e=Na(t),n=_z(t);n&&D2e(n)&&yd(n).position==="static";)n=_z(n);return n&&(lu(n)==="html"||lu(n)==="body"&&yd(n).position==="static")?e:n||R2e(t)||e}function p3(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function xx(t,e,n){return Pp(t,TC(e,n))}function k2e(t,e,n){var r=xx(t,e,n);return r>n?n:r}function EX(){return{top:0,right:0,bottom:0,left:0}}function CX(t){return Object.assign({},EX(),t)}function AX(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var I2e=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,CX(typeof e!="number"?e:AX(e,Ew))};function F2e(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=qc(n.placement),l=p3(a),c=[aa,Sl].indexOf(a)>=0,u=c?"height":"width";if(!(!o||!s)){var d=I2e(i.padding,n),f=h3(o),p=l==="y"?sa:aa,b=l==="y"?wl:Sl,v=n.rects.reference[u]+n.rects.reference[l]-s[l]-n.rects.popper[u],m=s[l]-n.rects.reference[l],g=Cw(o),x=g?l==="y"?g.clientHeight||0:g.clientWidth||0:0,w=v/2-m/2,S=d[p],D=x-f[u]-d[b],k=x/2-f[u]/2+w,P=xx(S,k,D),M=l;n.modifiersData[r]=(e={},e[M]=P,e.centerOffset=P-k,e)}}function O2e(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||_X(e.elements.popper,i)&&(e.elements.arrow=i))}const N2e={name:"arrow",enabled:!0,phase:"main",fn:F2e,effect:O2e,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Lv(t){return t.split("-")[1]}var L2e={top:"auto",right:"auto",bottom:"auto",left:"auto"};function B2e(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Ov(n*i)/i||0,y:Ov(r*i)/i||0}}function Ez(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,s=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,f=s.x,p=f===void 0?0:f,b=s.y,v=b===void 0?0:b,m=typeof u=="function"?u({x:p,y:v}):{x:p,y:v};p=m.x,v=m.y;var g=s.hasOwnProperty("x"),x=s.hasOwnProperty("y"),w=aa,S=sa,D=window;if(c){var k=Cw(n),P="clientHeight",M="clientWidth";if(k===Na(n)&&(k=uh(n),yd(k).position!=="static"&&a==="absolute"&&(P="scrollHeight",M="scrollWidth")),k=k,i===sa||(i===aa||i===Sl)&&o===Eb){S=wl;var T=d&&k===D&&D.visualViewport?D.visualViewport.height:k[P];v-=T-r.height,v*=l?1:-1}if(i===aa||(i===sa||i===wl)&&o===Eb){w=Sl;var _=d&&k===D&&D.visualViewport?D.visualViewport.width:k[M];p-=_-r.width,p*=l?1:-1}}var E=Object.assign({position:a},c&&L2e),R=u===!0?B2e({x:p,y:v},Na(n)):{x:p,y:v};if(p=R.x,v=R.y,l){var F;return Object.assign({},E,(F={},F[S]=x?"0":"",F[w]=g?"0":"",F.transform=(D.devicePixelRatio||1)<=1?"translate("+p+"px, "+v+"px)":"translate3d("+p+"px, "+v+"px, 0)",F))}return Object.assign({},E,(e={},e[S]=x?v+"px":"",e[w]=g?p+"px":"",e.transform="",e))}function j2e(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,s=o===void 0?!0:o,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:qc(e.placement),variation:Lv(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Ez(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Ez(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const U2e={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:j2e,data:{}};var CS={passive:!0};function z2e(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=i===void 0?!0:i,s=r.resize,a=s===void 0?!0:s,l=Na(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach(function(u){u.addEventListener("scroll",n.update,CS)}),a&&l.addEventListener("resize",n.update,CS),function(){o&&c.forEach(function(u){u.removeEventListener("scroll",n.update,CS)}),a&&l.removeEventListener("resize",n.update,CS)}}const V2e={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:z2e,data:{}};var W2e={left:"right",right:"left",bottom:"top",top:"bottom"};function rE(t){return t.replace(/left|right|bottom|top/g,function(e){return W2e[e]})}var $2e={start:"end",end:"start"};function Cz(t){return t.replace(/start|end/g,function(e){return $2e[e]})}function m3(t){var e=Na(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function g3(t){return Nv(uh(t)).left+m3(t).scrollLeft}function H2e(t,e){var n=Na(t),r=uh(t),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;var c=SX();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a+g3(t),y:l}}function G2e(t){var e,n=uh(t),r=m3(t),i=(e=t.ownerDocument)==null?void 0:e.body,o=Pp(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Pp(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+g3(t),l=-r.scrollTop;return yd(i||n).direction==="rtl"&&(a+=Pp(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}function v3(t){var e=yd(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function TX(t){return["html","body","#document"].indexOf(lu(t))>=0?t.ownerDocument.body:gl(t)&&v3(t)?t:TX(vT(t))}function bx(t,e){var n;e===void 0&&(e=[]);var r=TX(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),o=Na(r),s=i?[o].concat(o.visualViewport||[],v3(r)?r:[]):r,a=e.concat(s);return i?a:a.concat(bx(vT(s)))}function tI(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function q2e(t,e){var n=Nv(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Az(t,e,n){return e===bX?tI(H2e(t,n)):Hp(e)?q2e(e,n):tI(G2e(uh(t)))}function K2e(t){var e=bx(vT(t)),n=["absolute","fixed"].indexOf(yd(t).position)>=0,r=n&&gl(t)?Cw(t):t;return Hp(r)?e.filter(function(i){return Hp(i)&&_X(i,r)&&lu(i)!=="body"}):[]}function Y2e(t,e,n,r){var i=e==="clippingParents"?K2e(t):[].concat(e),o=[].concat(i,[n]),s=o[0],a=o.reduce(function(l,c){var u=Az(t,c,r);return l.top=Pp(u.top,l.top),l.right=TC(u.right,l.right),l.bottom=TC(u.bottom,l.bottom),l.left=Pp(u.left,l.left),l},Az(t,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function MX(t){var e=t.reference,n=t.element,r=t.placement,i=r?qc(r):null,o=r?Lv(r):null,s=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case sa:l={x:s,y:e.y-n.height};break;case wl:l={x:s,y:e.y+e.height};break;case Sl:l={x:e.x+e.width,y:a};break;case aa:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?p3(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(o){case Fv:l[c]=l[c]-(e[u]/2-n[u]/2);break;case Eb:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function Cb(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,o=n.strategy,s=o===void 0?t.strategy:o,a=n.boundary,l=a===void 0?m2e:a,c=n.rootBoundary,u=c===void 0?bX:c,d=n.elementContext,f=d===void 0?ay:d,p=n.altBoundary,b=p===void 0?!1:p,v=n.padding,m=v===void 0?0:v,g=CX(typeof m!="number"?m:AX(m,Ew)),x=f===ay?g2e:ay,w=t.rects.popper,S=t.elements[b?x:f],D=Y2e(Hp(S)?S:S.contextElement||uh(t.elements.popper),l,u,s),k=Nv(t.elements.reference),P=MX({reference:k,element:w,placement:i}),M=tI(Object.assign({},w,P)),T=f===ay?M:k,_={top:D.top-T.top+g.top,bottom:T.bottom-D.bottom+g.bottom,left:D.left-T.left+g.left,right:T.right-D.right+g.right},E=t.modifiersData.offset;if(f===ay&&E){var R=E[i];Object.keys(_).forEach(function(F){var L=[Sl,wl].indexOf(F)>=0?1:-1,N=[sa,wl].indexOf(F)>=0?"y":"x";_[F]+=R[N]*L})}return _}function X2e(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?wX:l,u=Lv(r),d=u?a?Sz:Sz.filter(function(b){return Lv(b)===u}):Ew,f=d.filter(function(b){return c.indexOf(b)>=0});f.length===0&&(f=d);var p=f.reduce(function(b,v){return b[v]=Cb(t,{placement:v,boundary:i,rootBoundary:o,padding:s})[qc(v)],b},{});return Object.keys(p).sort(function(b,v){return p[b]-p[v]})}function Q2e(t){if(qc(t)===d3)return[];var e=rE(t);return[Cz(t),e,Cz(e)]}function Z2e(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!0:s,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,p=n.flipVariations,b=p===void 0?!0:p,v=n.allowedAutoPlacements,m=e.options.placement,g=qc(m),x=g===m,w=l||(x||!b?[rE(m)]:Q2e(m)),S=[m].concat(w).reduce(function(Y,J){return Y.concat(qc(J)===d3?X2e(e,{placement:J,boundary:u,rootBoundary:d,padding:c,flipVariations:b,allowedAutoPlacements:v}):J)},[]),D=e.rects.reference,k=e.rects.popper,P=new Map,M=!0,T=S[0],_=0;_<S.length;_++){var E=S[_],R=qc(E),F=Lv(E)===Fv,L=[sa,wl].indexOf(R)>=0,N=L?"width":"height",U=Cb(e,{placement:E,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),H=L?F?Sl:aa:F?wl:sa;D[N]>k[N]&&(H=rE(H));var j=rE(H),z=[];if(o&&z.push(U[R]<=0),a&&z.push(U[H]<=0,U[j]<=0),z.every(function(Y){return Y})){T=E,M=!1;break}P.set(E,z)}if(M)for(var q=b?3:1,$=function(J){var V=S.find(function(re){var fe=P.get(re);if(fe)return fe.slice(0,J).every(function(pe){return pe})});if(V)return T=V,"break"},K=q;K>0;K--){var G=$(K);if(G==="break")break}e.placement!==T&&(e.modifiersData[r]._skip=!0,e.placement=T,e.reset=!0)}}const J2e={name:"flip",enabled:!0,phase:"main",fn:Z2e,requiresIfExists:["offset"],data:{_skip:!1}};function Tz(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Mz(t){return[sa,Sl,wl,aa].some(function(e){return t[e]>=0})}function eMe(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=Cb(e,{elementContext:"reference"}),a=Cb(e,{altBoundary:!0}),l=Tz(s,r),c=Tz(a,i,o),u=Mz(l),d=Mz(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const tMe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:eMe};function nMe(t,e,n){var r=qc(t),i=[aa,sa].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[aa,Sl].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function rMe(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=i===void 0?[0,0]:i,s=wX.reduce(function(u,d){return u[d]=nMe(d,e.rects,o),u},{}),a=s[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=s}const iMe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:rMe};function oMe(t){var e=t.state,n=t.name;e.modifiersData[n]=MX({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const sMe={name:"popperOffsets",enabled:!0,phase:"read",fn:oMe,data:{}};function aMe(t){return t==="x"?"y":"x"}function lMe(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!1:s,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,f=n.tether,p=f===void 0?!0:f,b=n.tetherOffset,v=b===void 0?0:b,m=Cb(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),g=qc(e.placement),x=Lv(e.placement),w=!x,S=p3(g),D=aMe(S),k=e.modifiersData.popperOffsets,P=e.rects.reference,M=e.rects.popper,T=typeof v=="function"?v(Object.assign({},e.rects,{placement:e.placement})):v,_=typeof T=="number"?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),E=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,R={x:0,y:0};if(k){if(o){var F,L=S==="y"?sa:aa,N=S==="y"?wl:Sl,U=S==="y"?"height":"width",H=k[S],j=H+m[L],z=H-m[N],q=p?-M[U]/2:0,$=x===Fv?P[U]:M[U],K=x===Fv?-M[U]:-P[U],G=e.elements.arrow,Y=p&&G?h3(G):{width:0,height:0},J=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:EX(),V=J[L],re=J[N],fe=xx(0,P[U],Y[U]),pe=w?P[U]/2-q-fe-V-_.mainAxis:$-fe-V-_.mainAxis,ce=w?-P[U]/2+q+fe+re+_.mainAxis:K+fe+re+_.mainAxis,xe=e.elements.arrow&&Cw(e.elements.arrow),Ae=xe?S==="y"?xe.clientTop||0:xe.clientLeft||0:0,Ee=(F=E==null?void 0:E[S])!=null?F:0,ee=H+pe-Ee-Ae,Oe=H+ce-Ee,le=xx(p?TC(j,ee):j,H,p?Pp(z,Oe):z);k[S]=le,R[S]=le-H}if(a){var me,ne=S==="x"?sa:aa,se=S==="x"?wl:Sl,ge=k[D],Q=D==="y"?"height":"width",W=ge+m[ne],ve=ge-m[se],ue=[sa,aa].indexOf(g)!==-1,Me=(me=E==null?void 0:E[D])!=null?me:0,Pe=ue?W:ge-P[Q]-M[Q]-Me+_.altAxis,je=ue?ge+P[Q]+M[Q]-Me-_.altAxis:ve,ke=p&&ue?k2e(Pe,ge,je):xx(p?Pe:W,ge,p?je:ve);k[D]=ke,R[D]=ke-ge}e.modifiersData[r]=R}}const cMe={name:"preventOverflow",enabled:!0,phase:"main",fn:lMe,requiresIfExists:["offset"]};function uMe(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function dMe(t){return t===Na(t)||!gl(t)?m3(t):uMe(t)}function fMe(t){var e=t.getBoundingClientRect(),n=Ov(e.width)/t.offsetWidth||1,r=Ov(e.height)/t.offsetHeight||1;return n!==1||r!==1}function hMe(t,e,n){n===void 0&&(n=!1);var r=gl(e),i=gl(e)&&fMe(e),o=uh(e),s=Nv(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((lu(e)!=="body"||v3(o))&&(a=dMe(e)),gl(e)?(l=Nv(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=g3(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function pMe(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function i(o){n.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||i(o)}),r}function mMe(t){var e=pMe(t);return A2e.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function gMe(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function vMe(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var Pz={placement:"bottom",modifiers:[],strategy:"absolute"};function Dz(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function yMe(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,o=i===void 0?Pz:i;return function(a,l,c){c===void 0&&(c=o);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Pz,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,p={state:u,setOptions:function(g){var x=typeof g=="function"?g(u.options):g;v(),u.options=Object.assign({},o,u.options,x),u.scrollParents={reference:Hp(a)?bx(a):a.contextElement?bx(a.contextElement):[],popper:bx(l)};var w=mMe(vMe([].concat(r,u.options.modifiers)));return u.orderedModifiers=w.filter(function(S){return S.enabled}),b(),p.update()},forceUpdate:function(){if(!f){var g=u.elements,x=g.reference,w=g.popper;if(Dz(x,w)){u.rects={reference:hMe(x,Cw(w),u.options.strategy==="fixed"),popper:h3(w)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(_){return u.modifiersData[_.name]=Object.assign({},_.data)});for(var S=0;S<u.orderedModifiers.length;S++){if(u.reset===!0){u.reset=!1,S=-1;continue}var D=u.orderedModifiers[S],k=D.fn,P=D.options,M=P===void 0?{}:P,T=D.name;typeof k=="function"&&(u=k({state:u,options:M,name:T,instance:p})||u)}}}},update:gMe(function(){return new Promise(function(m){p.forceUpdate(),m(u)})}),destroy:function(){v(),f=!0}};if(!Dz(a,l))return p;p.setOptions(c).then(function(m){!f&&c.onFirstUpdate&&c.onFirstUpdate(m)});function b(){u.orderedModifiers.forEach(function(m){var g=m.name,x=m.options,w=x===void 0?{}:x,S=m.effect;if(typeof S=="function"){var D=S({state:u,name:g,instance:p,options:w}),k=function(){};d.push(D||k)}})}function v(){d.forEach(function(m){return m()}),d=[]}return p}}var xMe=[V2e,sMe,U2e,P2e,iMe,J2e,cMe,N2e,tMe],bMe=yMe({defaultModifiers:xMe});function wMe(t={}){const{enabled:e=!0,modifiers:n,placement:r="bottom",strategy:i="absolute",arrowPadding:o=8,eventListeners:s=!0,offset:a,gutter:l=8,flip:c=!0,boundary:u="clippingParents",preventOverflow:d=!0,matchWidth:f,direction:p="ltr"}=t,b=A.useRef(null),v=A.useRef(null),m=A.useRef(null),g=p2e(r,p),x=A.useRef(()=>{}),w=A.useCallback(()=>{var _;!e||!b.current||!v.current||((_=x.current)==null||_.call(x),m.current=bMe(b.current,v.current,{placement:g,modifiers:[d2e,l2e,a2e,oe(B({},s2e),{enabled:!!f}),B({name:"eventListeners"},o2e(s)),{name:"arrow",options:{padding:o}},{name:"offset",options:{offset:a!=null?a:[0,l]}},{name:"flip",enabled:!!c,options:{padding:8}},{name:"preventOverflow",enabled:!!d,options:{boundary:u}},...n!=null?n:[]],strategy:i}),m.current.forceUpdate(),x.current=m.current.destroy)},[g,e,n,f,s,o,a,l,c,d,u,i]);A.useEffect(()=>()=>{var _;!b.current&&!v.current&&((_=m.current)==null||_.destroy(),m.current=null)},[]);const S=A.useCallback(_=>{b.current=_,w()},[w]),D=A.useCallback((_={},E=null)=>oe(B({},_),{ref:no(S,E)}),[S]),k=A.useCallback(_=>{v.current=_,w()},[w]),P=A.useCallback((_={},E=null)=>oe(B({},_),{ref:no(k,E),style:oe(B({},_.style),{position:i,minWidth:f?void 0:"max-content",inset:"0 auto auto 0"})}),[i,k,f]),M=A.useCallback((_={},E=null)=>{const H=_,{size:R,shadowColor:F,bg:L,style:N}=H,U=Tt(H,["size","shadowColor","bg","style"]);return oe(B({},U),{ref:E,"data-popper-arrow":"",style:SMe(_)})},[]),T=A.useCallback((_={},E=null)=>oe(B({},_),{ref:E,"data-popper-arrow-inner":""}),[]);return{update(){var _;(_=m.current)==null||_.update()},forceUpdate(){var _;(_=m.current)==null||_.forceUpdate()},transformOrigin:Wo.transformOrigin.varRef,referenceRef:S,popperRef:k,getPopperProps:P,getArrowProps:M,getArrowInnerProps:T,getReferenceProps:D}}function SMe(t){const{size:e,shadowColor:n,bg:r,style:i}=t,o=oe(B({},i),{position:"absolute"});return e&&(o["--popper-arrow-size"]=e),n&&(o["--popper-arrow-shadow-color"]=n),r&&(o["--popper-arrow-bg"]=r),o}function _Me(t={}){const{onClose:e,onOpen:n,isOpen:r,id:i}=t,o=fo(n),s=fo(e),[a,l]=A.useState(t.defaultIsOpen||!1),c=r!==void 0?r:a,u=r!==void 0,d=A.useId(),f=i!=null?i:`disclosure-${d}`,p=A.useCallback(()=>{u||l(!1),s==null||s()},[u,s]),b=A.useCallback(()=>{u||l(!0),o==null||o()},[u,o]),v=A.useCallback(()=>{c?p():b()},[c,b,p]);function m(x={}){return oe(B({},x),{"aria-expanded":c,"aria-controls":f,onClick(w){var S;(S=x.onClick)==null||S.call(x,w),v()}})}function g(x={}){return oe(B({},x),{hidden:!c,id:f})}return{isOpen:c,onOpen:b,onClose:p,onToggle:v,isControlled:u,getButtonProps:m,getDisclosureProps:g}}function EMe(t){const{wasSelected:e,enabled:n,isSelected:r,mode:i="unmount"}=t;return!!(!n||r||i==="keepMounted"&&e)}var CMe={slideInBottom:oe(B({},Ly),{custom:{offsetY:16,reverse:!0}}),slideInRight:oe(B({},Ly),{custom:{offsetX:16,reverse:!0}}),slideInTop:oe(B({},Ly),{custom:{offsetY:-16,reverse:!0}}),slideInLeft:oe(B({},Ly),{custom:{offsetX:-16,reverse:!0}}),scale:oe(B({},PY),{custom:{initialScale:.95,reverse:!0}}),none:{}},AMe=Ut(ml.section),TMe=t=>CMe[t||"none"],PX=A.forwardRef((t,e)=>{const o=t,{preset:n,motionProps:r=TMe(n)}=o,i=Tt(o,["preset","motionProps"]);return h.jsx(AMe,B(B({ref:e},r),i))});PX.displayName="ModalTransition";var MMe=Object.defineProperty,PMe=(t,e,n)=>e in t?MMe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,DMe=(t,e,n)=>(PMe(t,e+"",n),n),RMe=class{constructor(){DMe(this,"modals"),this.modals=new Map}add(t){return this.modals.set(t,this.modals.size+1),this.modals.size}remove(t){this.modals.delete(t)}isTopModal(t){return t?this.modals.get(t)===this.modals.size:!1}},nI=new RMe;function DX(t,e){const[n,r]=A.useState(0);return A.useEffect(()=>{const i=t.current;if(i){if(e){const o=nI.add(i);r(o)}return()=>{nI.remove(i),r(0)}}},[e,t]),n}var kMe=function(t){if(typeof document=="undefined")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},qm=new WeakMap,AS=new WeakMap,TS={},kP=0,RX=function(t){return t&&(t.host||RX(t.parentNode))},IMe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=RX(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},FMe=function(t,e,n,r){var i=IMe(e,Array.isArray(t)?t:[t]);TS[n]||(TS[n]=new WeakMap);var o=TS[n],s=[],a=new Set,l=new Set(i),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(r),b=p!==null&&p!=="false",v=(qm.get(f)||0)+1,m=(o.get(f)||0)+1;qm.set(f,v),o.set(f,m),s.push(f),v===1&&b&&AS.set(f,!0),m===1&&f.setAttribute(n,"true"),b||f.setAttribute(r,"true")}catch(g){console.error("aria-hidden: cannot operate on ",f,g)}})};return u(e),a.clear(),kP++,function(){s.forEach(function(d){var f=qm.get(d)-1,p=o.get(d)-1;qm.set(d,f),o.set(d,p),f||(AS.has(d)||d.removeAttribute(r),AS.delete(d)),p||d.removeAttribute(n)}),kP--,kP||(qm=new WeakMap,qm=new WeakMap,AS=new WeakMap,TS={})}},OMe=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=kMe(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),FMe(r,i,n,"aria-hidden")):function(){return null}};function NMe(t){const{isOpen:e,onClose:n,id:r,closeOnOverlayClick:i=!0,closeOnEsc:o=!0,useInert:s=!0,onOverlayClick:a,onEsc:l}=t,c=A.useRef(null),u=A.useRef(null),[d,f,p]=BMe(r,"chakra-modal","chakra-modal--header","chakra-modal--body");LMe(c,e&&s);const b=DX(c,e),v=A.useRef(null),m=A.useCallback(T=>{v.current=T.target},[]),g=A.useCallback(T=>{T.key==="Escape"&&(T.stopPropagation(),o&&(n==null||n()),l==null||l())},[o,n,l]),[x,w]=A.useState(!1),[S,D]=A.useState(!1),k=A.useCallback((T={},_=null)=>oe(B({role:"dialog"},T),{ref:no(_,c),id:d,tabIndex:-1,"aria-modal":!0,"aria-labelledby":x?f:void 0,"aria-describedby":S?p:void 0,onClick:Un(T.onClick,E=>E.stopPropagation())}),[p,S,d,f,x]),P=A.useCallback(T=>{T.stopPropagation(),v.current===T.target&&nI.isTopModal(c.current)&&(i&&(n==null||n()),a==null||a())},[n,i,a]),M=A.useCallback((T={},_=null)=>oe(B({},T),{ref:no(_,u),onClick:Un(T.onClick,P),onKeyDown:Un(T.onKeyDown,g),onMouseDown:Un(T.onMouseDown,m)}),[g,m,P]);return{isOpen:e,onClose:n,headerId:f,bodyId:p,setBodyMounted:D,setHeaderMounted:w,dialogRef:c,overlayRef:u,getDialogProps:k,getDialogContainerProps:M,index:b}}function LMe(t,e){const n=t.current;A.useEffect(()=>{if(!(!t.current||!e))return OMe(t.current)},[e,t,n])}function BMe(t,...e){const n=A.useId(),r=t||n;return A.useMemo(()=>e.map(i=>`${i}-${r}`),[r,e])}var[jMe,u0]=pi({name:"ModalStylesContext",errorMessage:`useModalStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Modal />" `}),[UMe,Gp]=pi({strict:!0,name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap modal components in `<Modal />`"}),Kc=t=>{const e=B({scrollBehavior:"outside",autoFocus:!0,trapFocus:!0,returnFocusOnClose:!0,blockScrollOnMount:!0,allowPinchZoom:!1,motionPreset:"scale",lockFocusAcrossFrames:!0},t),{portalProps:n,children:r,autoFocus:i,trapFocus:o,initialFocusRef:s,finalFocusRef:a,returnFocusOnClose:l,blockScrollOnMount:c,allowPinchZoom:u,preserveScrollBarGap:d,motionPreset:f,lockFocusAcrossFrames:p,onCloseComplete:b}=e,v=gs("Modal",e),m=NMe(e),g=oe(B({},m),{autoFocus:i,trapFocus:o,initialFocusRef:s,finalFocusRef:a,returnFocusOnClose:l,blockScrollOnMount:c,allowPinchZoom:u,preserveScrollBarGap:d,motionPreset:f,lockFocusAcrossFrames:p});return h.jsx(UMe,{value:g,children:h.jsx(jMe,{value:v,children:h.jsx(Gc,{onExitComplete:b,children:g.isOpen&&h.jsx(l0,oe(B({},n),{children:r}))})})})};Kc.displayName="Modal";var iE="right-scroll-bar-position",oE="width-before-scroll-bar",zMe="with-scroll-bars-hidden",VMe="--removed-body-scroll-bar-size",kX=jY(),IP=function(){},yT=A.forwardRef(function(t,e){var n=A.useRef(null),r=A.useState({onScrollCapture:IP,onWheelCapture:IP,onTouchMoveCapture:IP}),i=r[0],o=r[1],s=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,p=t.noIsolation,b=t.inert,v=t.allowPinchZoom,m=t.as,g=m===void 0?"div":m,x=t.gapMode,w=_w(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,D=NY([n,e]),k=jc(jc({},w),i);return A.createElement(A.Fragment,null,u&&A.createElement(S,{sideCar:kX,removeScrollBar:c,shards:d,noIsolation:p,inert:b,setCallbacks:o,allowPinchZoom:!!v,lockRef:n,gapMode:x}),s?A.cloneElement(A.Children.only(a),jc(jc({},k),{ref:D})):A.createElement(g,jc({},k,{className:l,ref:D}),a))});yT.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};yT.classNames={fullWidth:oE,zeroRight:iE};var WMe=function(){if(typeof __webpack_nonce__!="undefined")return __webpack_nonce__};function $Me(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=WMe();return e&&t.setAttribute("nonce",e),t}function HMe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function GMe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var qMe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=$Me())&&(HMe(e,n),GMe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},KMe=function(){var t=qMe();return function(e,n){A.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},IX=function(){var t=KMe(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},YMe={left:0,top:0,right:0,gap:0},FP=function(t){return parseInt(t||"",10)||0},XMe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[FP(n),FP(r),FP(i)]},QMe=function(t){if(t===void 0&&(t="margin"),typeof window=="undefined")return YMe;var e=XMe(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},ZMe=IX(),av="data-scroll-locked",JMe=function(t,e,n,r){var i=t.left,o=t.top,s=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(zMe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(av,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(iE,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(oE,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(iE," .").concat(iE,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(oE," .").concat(oE,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(av,`] {
    `).concat(VMe,": ").concat(a,`px;
  }
`)},Rz=function(){var t=parseInt(document.body.getAttribute(av)||"0",10);return isFinite(t)?t:0},ePe=function(){A.useEffect(function(){return document.body.setAttribute(av,(Rz()+1).toString()),function(){var t=Rz()-1;t<=0?document.body.removeAttribute(av):document.body.setAttribute(av,t.toString())}},[])},tPe=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;ePe();var o=A.useMemo(function(){return QMe(i)},[i]);return A.createElement(ZMe,{styles:JMe(o,!e,i,n?"":"!important")})},rI=!1;if(typeof window!="undefined")try{var MS=Object.defineProperty({},"passive",{get:function(){return rI=!0,!0}});window.addEventListener("test",MS,MS),window.removeEventListener("test",MS,MS)}catch(t){rI=!1}var Km=rI?{passive:!1}:!1,nPe=function(t){return t.tagName==="TEXTAREA"},FX=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!nPe(t)&&n[e]==="visible")},rPe=function(t){return FX(t,"overflowY")},iPe=function(t){return FX(t,"overflowX")},kz=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot!="undefined"&&r instanceof ShadowRoot&&(r=r.host);var i=OX(t,r);if(i){var o=NX(t,r),s=o[1],a=o[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},oPe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},sPe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},OX=function(t,e){return t==="v"?rPe(e):iPe(e)},NX=function(t,e){return t==="v"?oPe(e):sPe(e)},aPe=function(t,e){return t==="h"&&e==="rtl"?-1:1},lPe=function(t,e,n,r,i){var o=aPe(t,window.getComputedStyle(e).direction),s=o*r,a=n.target,l=e.contains(a),c=!1,u=s>0,d=0,f=0;do{var p=NX(t,a),b=p[0],v=p[1],m=p[2],g=v-m-o*b;(b||g)&&OX(t,a)&&(d+=g,f+=b),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(c=!0),c},PS=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Iz=function(t){return[t.deltaX,t.deltaY]},Fz=function(t){return t&&"current"in t?t.current:t},cPe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},uPe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},dPe=0,Ym=[];function fPe(t){var e=A.useRef([]),n=A.useRef([0,0]),r=A.useRef(),i=A.useState(dPe++)[0],o=A.useState(IX)[0],s=A.useRef(t);A.useEffect(function(){s.current=t},[t]),A.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var v=xAe([t.lockRef.current],(t.shards||[]).map(Fz),!0).filter(Boolean);return v.forEach(function(m){return m.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(m){return m.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=A.useCallback(function(v,m){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!s.current.allowPinchZoom;var g=PS(v),x=n.current,w="deltaX"in v?v.deltaX:x[0]-g[0],S="deltaY"in v?v.deltaY:x[1]-g[1],D,k=v.target,P=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in v&&P==="h"&&k.type==="range")return!1;var M=kz(P,k);if(!M)return!0;if(M?D=P:(D=P==="v"?"h":"v",M=kz(P,k)),!M)return!1;if(!r.current&&"changedTouches"in v&&(w||S)&&(r.current=D),!D)return!0;var T=r.current||D;return lPe(T,m,v,T==="h"?w:S)},[]),l=A.useCallback(function(v){var m=v;if(!(!Ym.length||Ym[Ym.length-1]!==o)){var g="deltaY"in m?Iz(m):PS(m),x=e.current.filter(function(D){return D.name===m.type&&(D.target===m.target||m.target===D.shadowParent)&&cPe(D.delta,g)})[0];if(x&&x.should){m.cancelable&&m.preventDefault();return}if(!x){var w=(s.current.shards||[]).map(Fz).filter(Boolean).filter(function(D){return D.contains(m.target)}),S=w.length>0?a(m,w[0]):!s.current.noIsolation;S&&m.cancelable&&m.preventDefault()}}},[]),c=A.useCallback(function(v,m,g,x){var w={name:v,delta:m,target:g,should:x,shadowParent:hPe(g)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(S){return S!==w})},1)},[]),u=A.useCallback(function(v){n.current=PS(v),r.current=void 0},[]),d=A.useCallback(function(v){c(v.type,Iz(v),v.target,a(v,t.lockRef.current))},[]),f=A.useCallback(function(v){c(v.type,PS(v),v.target,a(v,t.lockRef.current))},[]);A.useEffect(function(){return Ym.push(o),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Km),document.addEventListener("touchmove",l,Km),document.addEventListener("touchstart",u,Km),function(){Ym=Ym.filter(function(v){return v!==o}),document.removeEventListener("wheel",l,Km),document.removeEventListener("touchmove",l,Km),document.removeEventListener("touchstart",u,Km)}},[]);var p=t.removeScrollBar,b=t.inert;return A.createElement(A.Fragment,null,b?A.createElement(o,{styles:uPe(i)}):null,p?A.createElement(tPe,{gapMode:t.gapMode}):null)}function hPe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const pPe=bAe(kX,fPe);var LX=A.forwardRef(function(t,e){return A.createElement(yT,jc({},t,{ref:e,sideCar:pPe}))});LX.classNames=yT.classNames;function mPe(t){const{autoFocus:e,trapFocus:n,dialogRef:r,initialFocusRef:i,blockScrollOnMount:o,allowPinchZoom:s,finalFocusRef:a,returnFocusOnClose:l,preserveScrollBarGap:c,lockFocusAcrossFrames:u,isOpen:d}=Gp(),[f,p]=cY();A.useEffect(()=>{!f&&p&&setTimeout(p)},[f,p]);const b=DX(r,d);return h.jsx(mX,{autoFocus:e,isDisabled:!n,initialFocusRef:i,finalFocusRef:a,restoreFocus:l,contentRef:r,lockFocusAcrossFrames:u,children:h.jsx(LX,{removeScrollBar:!c,allowPinchZoom:s,enabled:b===1&&o,forwardProps:!0,children:t.children})})}var Yc=Yt((t,e)=>{const m=t,{className:n,children:r,containerProps:i,motionProps:o}=m,s=Tt(m,["className","children","containerProps","motionProps"]),{getDialogProps:a,getDialogContainerProps:l}=Gp(),c=a(s,e),u=l(i),d=_n("chakra-modal__content",n),f=u0(),p=B({display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0},f.dialog),b=B({display:"flex",width:"100vw",height:"$100vh",position:"fixed",left:0,top:0},f.dialogContainer),{motionPreset:v}=Gp();return h.jsx(mPe,{children:h.jsx(Ut.div,oe(B({},u),{className:"chakra-modal__content-container",tabIndex:-1,__css:b,children:h.jsx(PX,oe(B({preset:v,motionProps:o,className:d},c),{__css:p,children:r}))}))})});Yc.displayName="ModalContent";var lv=Yt((t,e)=>{const a=t,{className:n}=a,r=Tt(a,["className"]),i=_n("chakra-modal__footer",n),o=u0(),s=B({display:"flex",alignItems:"center",justifyContent:"flex-end"},o.footer);return h.jsx(Ut.footer,oe(B({ref:e},r),{__css:s,className:i}))});lv.displayName="ModalFooter";var Xc=Yt((t,e)=>{const c=t,{className:n}=c,r=Tt(c,["className"]),{headerId:i,setHeaderMounted:o}=Gp();A.useEffect(()=>(o(!0),()=>o(!1)),[o]);const s=_n("chakra-modal__header",n),a=u0(),l=B({flex:0},a.header);return h.jsx(Ut.header,oe(B({ref:e,className:s,id:i},r),{__css:l}))});Xc.displayName="ModalHeader";var gPe=Ut(ml.div),Qc=Yt((t,e)=>{const f=t,{className:n,transition:r,motionProps:i}=f,o=Tt(f,["className","transition","motionProps"]),s=_n("chakra-modal__overlay",n),a=u0(),l=B({pos:"fixed",left:"0",top:"0",w:"100vw",h:"100vh"},a.overlay),{motionPreset:c}=Gp(),d=i||(c==="none"?{}:MY);return h.jsx(gPe,B(oe(B({},d),{__css:l,ref:e,className:s}),o))});Qc.displayName="ModalOverlay";var Zc=Yt((t,e)=>{const l=t,{className:n}=l,r=Tt(l,["className"]),{bodyId:i,setBodyMounted:o}=Gp();A.useEffect(()=>(o(!0),()=>o(!1)),[o]);const s=_n("chakra-modal__body",n),a=u0();return h.jsx(Ut.div,oe(B({ref:e,className:s,id:i},r),{__css:a.body}))});Zc.displayName="ModalBody";var Jc=Yt((t,e)=>{const l=t,{onClick:n,className:r}=l,i=Tt(l,["onClick","className"]),{onClose:o}=Gp(),s=_n("chakra-modal__close-btn",r),a=u0();return h.jsx(LN,B({ref:e,__css:a.closeButton,className:s,onClick:Un(n,c=>{c.stopPropagation(),o()})},i))});Jc.displayName="ModalCloseButton";var vPe=t=>h.jsx(Dd,oe(B({viewBox:"0 0 24 24"},t),{children:h.jsx("path",{fill:"currentColor",d:"M21,5H3C2.621,5,2.275,5.214,2.105,5.553C1.937,5.892,1.973,6.297,2.2,6.6l9,12 c0.188,0.252,0.485,0.4,0.8,0.4s0.611-0.148,0.8-0.4l9-12c0.228-0.303,0.264-0.708,0.095-1.047C21.725,5.214,21.379,5,21,5z"})})),yPe=t=>h.jsx(Dd,oe(B({viewBox:"0 0 24 24"},t),{children:h.jsx("path",{fill:"currentColor",d:"M12.8,5.4c-0.377-0.504-1.223-0.504-1.6,0l-9,12c-0.228,0.303-0.264,0.708-0.095,1.047 C2.275,18.786,2.621,19,3,19h18c0.379,0,0.725-0.214,0.895-0.553c0.169-0.339,0.133-0.744-0.095-1.047L12.8,5.4z"})}));function Oz(t,e,n,r){A.useEffect(()=>{var i;if(!t.current||!r)return;const o=(i=t.current.ownerDocument.defaultView)!=null?i:window,s=Array.isArray(e)?e:[e],a=new o.MutationObserver(l=>{for(const c of l)c.type==="attributes"&&c.attributeName&&s.includes(c.attributeName)&&n(c)});return a.observe(t.current,{attributes:!0,attributeFilter:s}),()=>a.disconnect()})}function xPe(t,e){const n=fo(t);A.useEffect(()=>{let r=null;const i=()=>n();return e!==null&&(r=window.setInterval(i,e)),()=>{r&&window.clearInterval(r)}},[e,n])}var bPe=50,Nz=300;function wPe(t,e){const[n,r]=A.useState(!1),[i,o]=A.useState(null),[s,a]=A.useState(!0),l=A.useRef(null),c=()=>clearTimeout(l.current);xPe(()=>{i==="increment"&&t(),i==="decrement"&&e()},n?bPe:null);const u=A.useCallback(()=>{s&&t(),l.current=setTimeout(()=>{a(!1),r(!0),o("increment")},Nz)},[t,s]),d=A.useCallback(()=>{s&&e(),l.current=setTimeout(()=>{a(!1),r(!0),o("decrement")},Nz)},[e,s]),f=A.useCallback(()=>{a(!0),r(!1),c()},[]);return A.useEffect(()=>()=>c(),[]),{up:u,down:d,stop:f,isSpinning:n}}var SPe=/^[Ee0-9+\-.]$/;function _Pe(t){return SPe.test(t)}function EPe(t,e){if(t.key==null)return!0;const n=t.ctrlKey||t.altKey||t.metaKey;return!(t.key.length===1)||n?!0:e(t.key)}function CPe(t={}){const ke=t,{focusInputOnChange:e=!0,clampValueOnBlur:n=!0,keepWithinRange:r=!0,min:i=Number.MIN_SAFE_INTEGER,max:o=Number.MAX_SAFE_INTEGER,step:s=1,isReadOnly:a,isDisabled:l,isRequired:c,isInvalid:u,pattern:d="[0-9]*(.[0-9]+)?",inputMode:f="decimal",allowMouseWheel:p,id:b,onChange:v,precision:m,name:g,"aria-describedby":x,"aria-label":w,"aria-labelledby":S,onFocus:D,onBlur:k,onInvalid:P,getAriaValueText:M,isValidCharacter:T,format:_,parse:E}=ke,R=Tt(ke,["focusInputOnChange","clampValueOnBlur","keepWithinRange","min","max","step","isReadOnly","isDisabled","isRequired","isInvalid","pattern","inputMode","allowMouseWheel","id","onChange","precision","name","aria-describedby","aria-label","aria-labelledby","onFocus","onBlur","onInvalid","getAriaValueText","isValidCharacter","format","parse"]),F=fo(D),L=fo(k),N=fo(P),U=fo(T!=null?T:_Pe),H=fo(M),j=fAe(t),{update:z,increment:q,decrement:$}=j,[K,G]=A.useState(!1),Y=!(a||l),J=A.useRef(null),V=A.useRef(null),re=A.useRef(null),fe=A.useRef(null),pe=A.useCallback(De=>De.split("").filter(U).join(""),[U]),ce=A.useCallback(De=>{var nt;return(nt=E==null?void 0:E(De))!=null?nt:De},[E]),xe=A.useCallback(De=>{var nt;return((nt=_==null?void 0:_(De))!=null?nt:De).toString()},[_]);gb(()=>{(j.valueAsNumber>o||j.valueAsNumber<i)&&(N==null||N("rangeOverflow",xe(j.value),j.valueAsNumber))},[j.valueAsNumber,j.value,xe,N]),nd(()=>{if(!J.current)return;if(J.current.value!=j.value){const nt=ce(J.current.value);j.setValue(pe(nt))}},[ce,pe]);const Ae=A.useCallback((De=s)=>{Y&&q(De)},[q,Y,s]),Ee=A.useCallback((De=s)=>{Y&&$(De)},[$,Y,s]),ee=wPe(Ae,Ee);Oz(re,"disabled",ee.stop,ee.isSpinning),Oz(fe,"disabled",ee.stop,ee.isSpinning);const Oe=A.useCallback(De=>{if(De.nativeEvent.isComposing)return;const be=ce(De.currentTarget.value);z(pe(be)),V.current={start:De.currentTarget.selectionStart,end:De.currentTarget.selectionEnd}},[z,pe,ce]),le=A.useCallback(De=>{var nt,be,Ne;F==null||F(De),V.current&&(De.target.selectionStart=(be=V.current.start)!=null?be:(nt=De.currentTarget.value)==null?void 0:nt.length,De.currentTarget.selectionEnd=(Ne=V.current.end)!=null?Ne:De.currentTarget.selectionStart)},[F]),me=A.useCallback(De=>{if(De.nativeEvent.isComposing)return;EPe(De,U)||De.preventDefault();const nt=ne(De)*s,be=De.key,Ie={ArrowUp:()=>Ae(nt),ArrowDown:()=>Ee(nt),Home:()=>z(i),End:()=>z(o)}[be];Ie&&(De.preventDefault(),Ie(De))},[U,s,Ae,Ee,z,i,o]),ne=De=>{let nt=1;return(De.metaKey||De.ctrlKey)&&(nt=.1),De.shiftKey&&(nt=10),nt},se=A.useMemo(()=>{const De=H==null?void 0:H(j.value);if(De!=null)return De;const nt=j.value.toString();return nt||void 0},[j.value,H]),ge=A.useCallback(()=>{let De=j.value;if(j.value==="")return;/^[eE]/.test(j.value.toString())?j.setValue(""):(j.valueAsNumber<i&&(De=i),j.valueAsNumber>o&&(De=o),j.cast(De))},[j,o,i]),Q=A.useCallback(()=>{G(!1),n&&ge()},[n,G,ge]),W=A.useCallback(()=>{e&&requestAnimationFrame(()=>{var De;(De=J.current)==null||De.focus()})},[e]),ve=A.useCallback(De=>{De.preventDefault(),ee.up(),W()},[W,ee]),ue=A.useCallback(De=>{De.preventDefault(),ee.down(),W()},[W,ee]);nE(()=>J.current,"wheel",De=>{var nt,be;const Ie=((be=(nt=J.current)==null?void 0:nt.ownerDocument)!=null?be:document).activeElement===J.current;if(!p||!Ie)return;De.preventDefault();const Ve=ne(De)*s,Ue=Math.sign(De.deltaY);Ue===-1?Ae(Ve):Ue===1&&Ee(Ve)},{passive:!1});const Me=A.useCallback((De={},nt=null)=>{const be=l||r&&j.isAtMax;return oe(B({},De),{ref:no(nt,re),role:"button",tabIndex:-1,onPointerDown:Un(De.onPointerDown,Ne=>{Ne.button!==0||be||ve(Ne)}),onPointerLeave:Un(De.onPointerLeave,ee.stop),onPointerUp:Un(De.onPointerUp,ee.stop),disabled:be,"aria-disabled":rd(be)})},[j.isAtMax,r,ve,ee.stop,l]),Pe=A.useCallback((De={},nt=null)=>{const be=l||r&&j.isAtMin;return oe(B({},De),{ref:no(nt,fe),role:"button",tabIndex:-1,onPointerDown:Un(De.onPointerDown,Ne=>{Ne.button!==0||be||ue(Ne)}),onPointerLeave:Un(De.onPointerLeave,ee.stop),onPointerUp:Un(De.onPointerUp,ee.stop),disabled:be,"aria-disabled":rd(be)})},[j.isAtMin,r,ue,ee.stop,l]),je=A.useCallback((De={},nt=null)=>{var be,Ne,Ie,Ve;return oe(B({name:g,inputMode:f,type:"text",pattern:d,"aria-labelledby":S,"aria-label":w,"aria-describedby":x,id:b,disabled:l},De),{readOnly:(be=De.readOnly)!=null?be:a,"aria-readonly":(Ne=De.readOnly)!=null?Ne:a,"aria-required":(Ie=De.required)!=null?Ie:c,required:(Ve=De.required)!=null?Ve:c,ref:no(J,nt),value:xe(j.value),role:"spinbutton","aria-valuemin":i,"aria-valuemax":o,"aria-valuenow":Number.isNaN(j.valueAsNumber)?void 0:j.valueAsNumber,"aria-invalid":rd(u!=null?u:j.isOutOfRange),"aria-valuetext":se,autoComplete:"off",autoCorrect:"off",onChange:Un(De.onChange,Oe),onKeyDown:Un(De.onKeyDown,me),onFocus:Un(De.onFocus,le,()=>G(!0)),onBlur:Un(De.onBlur,L,Q)})},[g,f,d,S,w,xe,x,b,l,c,a,u,j.value,j.valueAsNumber,j.isOutOfRange,i,o,se,Oe,me,le,L,Q]);return{value:xe(j.value),valueAsNumber:j.valueAsNumber,isFocused:K,isDisabled:l,isReadOnly:a,getIncrementButtonProps:Me,getDecrementButtonProps:Pe,getInputProps:je,htmlProps:R}}var[APe,xT]=pi({name:"NumberInputStylesContext",errorMessage:`useNumberInputStyles returned is 'undefined'. Seems you forgot to wrap the components in "<NumberInput />" `}),[TPe,y3]=pi({name:"NumberInputContext",errorMessage:"useNumberInputContext: `context` is undefined. Seems you forgot to wrap number-input's components within <NumberInput />"}),BX=Yt(function(e,n){const r=gs("NumberInput",e),i=di(e),o=KN(i),c=CPe(o),{htmlProps:s}=c,a=Tt(c,["htmlProps"]),l=A.useMemo(()=>a,[a]);return h.jsx(TPe,{value:l,children:h.jsx(APe,{value:r,children:h.jsx(Ut.div,oe(B({},s),{ref:n,className:_n("chakra-numberinput",e.className),__css:B({position:"relative",zIndex:0},r.root)}))})})});BX.displayName="NumberInput";var jX=Yt(function(e,n){const r=xT();return h.jsx(Ut.div,oe(B({"aria-hidden":!0,ref:n},e),{__css:B({display:"flex",flexDirection:"column",position:"absolute",top:"0",insetEnd:"0px",margin:"1px",height:"calc(100% - 2px)",zIndex:1},r.stepperGroup)}))});jX.displayName="NumberInputStepper";var UX=Yt(function(e,n){const{getInputProps:r}=y3(),i=r(e,n),o=xT();return h.jsx(Ut.input,oe(B({},i),{className:_n("chakra-numberinput__field",e.className),__css:B({width:"100%"},o.field)}))});UX.displayName="NumberInputField";var zX=Ut("div",{baseStyle:{display:"flex",justifyContent:"center",alignItems:"center",flex:1,transitionProperty:"common",transitionDuration:"normal",userSelect:"none",cursor:"pointer",lineHeight:"normal"}}),VX=Yt(function(e,n){var r;const i=xT(),{getDecrementButtonProps:o}=y3(),s=o(e,n);return h.jsx(zX,oe(B({},s),{__css:i.stepper,children:(r=e.children)!=null?r:h.jsx(vPe,{})}))});VX.displayName="NumberDecrementStepper";var WX=Yt(function(e,n){var r;const{getIncrementButtonProps:i}=y3(),o=i(e,n),s=xT();return h.jsx(zX,oe(B({},o),{__css:s.stepper,children:(r=e.children)!=null?r:h.jsx(yPe,{})}))});WX.displayName="NumberIncrementStepper";function MPe(t,e,n){return(t-e)*100/(n-e)}fw({"0%":{strokeDasharray:"1, 400",strokeDashoffset:"0"},"50%":{strokeDasharray:"400, 400",strokeDashoffset:"-100"},"100%":{strokeDasharray:"400, 400",strokeDashoffset:"-260"}});fw({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}});var PPe=fw({"0%":{left:"-40%"},"100%":{left:"100%"}}),DPe=fw({from:{backgroundPosition:"1rem 0"},to:{backgroundPosition:"0 0"}});function RPe(t){const{value:e=0,min:n,max:r,valueText:i,getValueText:o,isIndeterminate:s,role:a="progressbar"}=t,l=MPe(e,n,r);return{bind:{"data-indeterminate":s?"":void 0,"aria-valuemax":r,"aria-valuemin":n,"aria-valuenow":s?void 0:e,"aria-valuetext":(()=>{if(e!=null)return typeof o=="function"?o(e,l):i})(),role:a},percent:l,value:e}}var[kPe,IPe]=pi({name:"ProgressStylesContext",errorMessage:`useProgressStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Progress />" `}),FPe=Yt((t,e)=>{const d=t,{min:n,max:r,value:i,isIndeterminate:o,role:s}=d,a=Tt(d,["min","max","value","isIndeterminate","role"]),l=RPe({value:i,min:n,max:r,isIndeterminate:o,role:s}),c=IPe(),u=B({height:"100%"},c.filledTrack);return h.jsx(Ut.div,oe(B(B({ref:e,style:B({width:`${l.percent}%`},a.style)},l.bind),a),{__css:u}))}),$X=Yt((t,e)=>{var n;const M=di(t),{value:r,min:i=0,max:o=100,hasStripe:s,isAnimated:a,children:l,borderRadius:c,isIndeterminate:u,"aria-label":d,"aria-labelledby":f,"aria-valuetext":p,title:b,role:v}=M,m=Tt(M,["value","min","max","hasStripe","isAnimated","children","borderRadius","isIndeterminate","aria-label","aria-labelledby","aria-valuetext","title","role"]),g=gs("Progress",t),x=c!=null?c:(n=g.track)==null?void 0:n.borderRadius,w={animation:`${DPe} 1s linear infinite`},k=B(B({},!u&&s&&a&&w),u&&{position:"absolute",willChange:"left",minWidth:"50%",animation:`${PPe} 1s ease infinite normal none running`}),P=B({overflow:"hidden",position:"relative"},g.track);return h.jsx(Ut.div,oe(B({ref:e,borderRadius:x,__css:P},m),{children:h.jsxs(kPe,{value:g,children:[h.jsx(FPe,{"aria-label":d,"aria-labelledby":f,"aria-valuetext":p,min:i,max:o,value:r,isIndeterminate:u,css:k,borderRadius:x,title:b,role:v}),l]})}))});$X.displayName="Progress";function OPe(t){return t&&us(t)&&us(t.target)}function NPe(t={}){const D=t,{onChange:e,value:n,defaultValue:r,name:i,isDisabled:o,isFocusable:s,isNative:a}=D,l=Tt(D,["onChange","value","defaultValue","name","isDisabled","isFocusable","isNative"]),[c,u]=A.useState(r||""),d=typeof n!="undefined",f=d?n:c,p=A.useRef(null),b=A.useCallback(()=>{const k=p.current;if(!k)return;let P="input:not(:disabled):checked";const M=k.querySelector(P);if(M){M.focus();return}P="input:not(:disabled)";const T=k.querySelector(P);T==null||T.focus()},[]),m=`radio-${A.useId()}`,g=i||m,x=A.useCallback(k=>{const P=OPe(k)?k.target.value:k;d||u(P),e==null||e(String(P))},[e,d]),w=A.useCallback((k={},P=null)=>oe(B({},k),{ref:no(P,p),role:"radiogroup"}),[]),S=A.useCallback((k={},P=null)=>{const M=a?"checked":"isChecked";return oe(B({},k),{ref:P,name:g,[M]:f!=null?k.value===f:void 0,onChange(T){x(T)},"data-radiogroup":!0})},[a,g,x,f]);return{getRootProps:w,getRadioProps:S,name:g,ref:p,focus:b,setValue:u,value:f,onChange:x,isDisabled:o,isFocusable:s,htmlProps:l}}var[LPe,HX]=pi({name:"RadioGroupContext",strict:!1}),GX=Yt((t,e)=>{const m=t,{colorScheme:n,size:r,variant:i,children:o,className:s,isDisabled:a,isFocusable:l}=m,c=Tt(m,["colorScheme","size","variant","children","className","isDisabled","isFocusable"]),{value:u,onChange:d,getRootProps:f,name:p,htmlProps:b}=NPe(c),v=A.useMemo(()=>({name:p,size:r,onChange:d,colorScheme:n,value:u,variant:i,isDisabled:a,isFocusable:l}),[p,r,d,n,u,i,a,l]);return h.jsx(LPe,{value:v,children:h.jsx(Ut.div,oe(B({},f(b,e)),{className:_n("chakra-radio-group",s),children:o}))})});GX.displayName="RadioGroup";var BPe={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};function jPe(t={}){const xe=t,{defaultChecked:e,isChecked:n,isFocusable:r,isDisabled:i,isReadOnly:o,isRequired:s,onChange:a,isInvalid:l,name:c,value:u,id:d,"data-radiogroup":f,"aria-describedby":p}=xe,b=Tt(xe,["defaultChecked","isChecked","isFocusable","isDisabled","isReadOnly","isRequired","onChange","isInvalid","name","value","id","data-radiogroup","aria-describedby"]),v=`radio-${A.useId()}`,m=ww(),x=!!HX()||!!f;let S=!!m&&!x?m.id:v;S=d!=null?d:S;const D=i!=null?i:m==null?void 0:m.isDisabled,k=o!=null?o:m==null?void 0:m.isReadOnly,P=s!=null?s:m==null?void 0:m.isRequired,M=l!=null?l:m==null?void 0:m.isInvalid,[T,_]=A.useState(!1),[E,R]=A.useState(!1),[F,L]=A.useState(!1),[N,U]=A.useState(!1),[H,j]=A.useState(!!e),z=typeof n!="undefined",q=z?n:H;A.useEffect(()=>IY(_),[]);const $=A.useCallback(Ae=>{if(k||D){Ae.preventDefault();return}z||j(Ae.target.checked),a==null||a(Ae)},[z,D,k,a]),K=A.useCallback(Ae=>{Ae.key===" "&&U(!0)},[U]),G=A.useCallback(Ae=>{Ae.key===" "&&U(!1)},[U]),Y=A.useCallback((Ae={},Ee=null)=>oe(B({},Ae),{ref:Ee,"data-active":Fn(N),"data-hover":Fn(F),"data-disabled":Fn(D),"data-invalid":Fn(M),"data-checked":Fn(q),"data-focus":Fn(E),"data-focus-visible":Fn(E&&T),"data-readonly":Fn(k),"aria-hidden":!0,onMouseDown:Un(Ae.onMouseDown,()=>U(!0)),onMouseUp:Un(Ae.onMouseUp,()=>U(!1)),onMouseEnter:Un(Ae.onMouseEnter,()=>L(!0)),onMouseLeave:Un(Ae.onMouseLeave,()=>L(!1))}),[N,F,D,M,q,E,k,T]),{onFocus:J,onBlur:V}=m!=null?m:{},re=A.useCallback((Ae={},Ee=null)=>{const ee=D&&!r;return oe(B({},Ae),{id:S,ref:Ee,type:"radio",name:c,value:u,onChange:Un(Ae.onChange,$),onBlur:Un(V,Ae.onBlur,()=>R(!1)),onFocus:Un(J,Ae.onFocus,()=>R(!0)),onKeyDown:Un(Ae.onKeyDown,K),onKeyUp:Un(Ae.onKeyUp,G),checked:q,disabled:ee,readOnly:k,required:P,"aria-invalid":rd(M),"aria-disabled":rd(ee),"aria-required":rd(P),"data-readonly":Fn(k),"aria-describedby":p,style:BPe})},[D,r,S,c,u,$,V,J,K,G,q,k,P,M,p]);return{state:{isInvalid:M,isFocused:E,isChecked:q,isActive:N,isHovered:F,isDisabled:D,isReadOnly:k,isRequired:P},getCheckboxProps:Y,getRadioProps:Y,getInputProps:re,getLabelProps:(Ae={},Ee=null)=>oe(B({},Ae),{ref:Ee,onMouseDown:Un(Ae.onMouseDown,UPe),"data-disabled":Fn(D),"data-checked":Fn(q),"data-invalid":Fn(M)}),getRootProps:(Ae,Ee=null)=>oe(B({},Ae),{ref:Ee,"data-disabled":Fn(D),"data-checked":Fn(q),"data-invalid":Fn(M)}),htmlProps:b}}function UPe(t){t.preventDefault(),t.stopPropagation()}function zPe(t,e){const n={},r={};for(const[i,o]of Object.entries(t))e.includes(i)?n[i]=o:r[i]=o;return[n,r]}var iI=Yt((t,e)=>{var n;const r=HX(),{onChange:i,value:o}=t,s=gs("Radio",B(B({},r),t)),N=di(t),{spacing:l="0.5rem",children:c,isDisabled:u=r==null?void 0:r.isDisabled,isFocusable:d=r==null?void 0:r.isFocusable,inputProps:f}=N,p=Tt(N,["spacing","children","isDisabled","isFocusable","inputProps"]);let b=t.isChecked;(r==null?void 0:r.value)!=null&&o!=null&&(b=r.value===o);let v=i;r!=null&&r.onChange&&o!=null&&(v=epe(r.onChange,i));const m=(n=t==null?void 0:t.name)!=null?n:r==null?void 0:r.name,{getInputProps:g,getCheckboxProps:x,getLabelProps:w,getRootProps:S,htmlProps:D}=jPe(oe(B({},p),{isChecked:b,isFocusable:d,isDisabled:u,onChange:v,name:m})),[k,P]=zPe(D,Cq),M=x(P),T=g(f,e),_=w(),E=Object.assign({},k,S()),R=B({display:"inline-flex",alignItems:"center",verticalAlign:"top",cursor:"pointer",position:"relative"},s.container),F=B({display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},s.control),L=B({userSelect:"none",marginStart:l},s.label);return h.jsxs(Ut.label,oe(B({className:"chakra-radio"},E),{__css:R,children:[h.jsx("input",B({className:"chakra-radio__input"},T)),h.jsx(Ut.span,oe(B({className:"chakra-radio__control"},M),{__css:F})),c&&h.jsx(Ut.span,oe(B({className:"chakra-radio__label"},_),{__css:L,children:c}))]}))});iI.displayName="Radio";var qX=Yt(function(e,n){const a=e,{children:r,placeholder:i,className:o}=a,s=Tt(a,["children","placeholder","className"]);return h.jsxs(Ut.select,oe(B({},s),{ref:n,className:_n("chakra-select",o),children:[i&&h.jsx("option",{value:"",children:i}),r]}))});qX.displayName="SelectField";function VPe(t,e){const n={},r={};for(const[i,o]of Object.entries(t))e.includes(i)?n[i]=o:r[i]=o;return[n,r]}var Bv=Yt((t,e)=>{var n;const r=gs("Select",t),S=di(t),{rootProps:i,placeholder:o,icon:s,color:a,height:l,h:c,minH:u,minHeight:d,iconColor:f,iconSize:p}=S,b=Tt(S,["rootProps","placeholder","icon","color","height","h","minH","minHeight","iconColor","iconSize"]),[v,m]=VPe(b,Cq),g=qN(m),x={width:"100%",height:"fit-content",position:"relative",color:a},w=oe(B({paddingEnd:"2rem"},r.field),{_focus:B({zIndex:"unset"},(n=r.field)==null?void 0:n._focus)});return h.jsxs(Ut.div,oe(B(B({className:"chakra-select__wrapper",__css:x},v),i),{children:[h.jsx(qX,oe(B({ref:e,height:c!=null?c:l,minH:u!=null?u:d,placeholder:o},g),{__css:w,children:t.children})),h.jsx(KX,oe(B(oe(B({"data-disabled":Fn(g.disabled)},(f||a)&&{color:f||a}),{__css:r.icon}),p&&{fontSize:p}),{children:s}))]}))});Bv.displayName="Select";var WPe=t=>h.jsx("svg",oe(B({viewBox:"0 0 24 24"},t),{children:h.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})})),$Pe=Ut("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),KX=t=>{const i=t,{children:e=h.jsx(WPe,{})}=i,n=Tt(i,["children"]),r=A.cloneElement(e,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return h.jsx($Pe,oe(B({},n),{className:"chakra-select__icon-wrapper",children:A.isValidElement(e)?r:null}))};KX.displayName="SelectIcon";var Xm=t=>t?"":void 0,OP=t=>t?!0:void 0,Aw=(...t)=>t.filter(Boolean).join(" ");function NP(...t){return function(n){t.some(r=>(r==null||r(n),n==null?void 0:n.defaultPrevented))}}function DS(t){const{orientation:e,vertical:n,horizontal:r}=t;return e==="vertical"?n:r}var sE={width:0,height:0},RS=t=>t||sE;function HPe(t){const{orientation:e,thumbPercents:n,thumbRects:r,isReversed:i}=t,o=v=>{var m;const g=(m=r[v])!=null?m:sE;return B({position:"absolute",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",touchAction:"none"},DS({orientation:e,vertical:{bottom:`calc(${n[v]}% - ${g.height/2}px)`},horizontal:{left:`calc(${n[v]}% - ${g.width/2}px)`}}))},s=e==="vertical"?r.reduce((v,m)=>RS(v).height>RS(m).height?v:m,sE):r.reduce((v,m)=>RS(v).width>RS(m).width?v:m,sE),a=B({position:"relative",touchAction:"none",WebkitTapHighlightColor:"rgba(0,0,0,0)",userSelect:"none",outline:0},DS({orientation:e,vertical:s?{paddingLeft:s.width/2,paddingRight:s.width/2}:{},horizontal:s?{paddingTop:s.height/2,paddingBottom:s.height/2}:{}})),l=B({position:"absolute"},DS({orientation:e,vertical:{left:"50%",transform:"translateX(-50%)",height:"100%"},horizontal:{top:"50%",transform:"translateY(-50%)",width:"100%"}})),c=n.length===1,u=[0,i?100-n[0]:n[0]],d=c?u:n;let f=d[0];!c&&i&&(f=100-f);const p=Math.abs(d[d.length-1]-d[0]),b=B(B({},l),DS({orientation:e,vertical:i?{height:`${p}%`,top:`${f}%`}:{height:`${p}%`,bottom:`${f}%`},horizontal:i?{width:`${p}%`,right:`${f}%`}:{width:`${p}%`,left:`${f}%`}}));return{trackStyle:l,innerTrackStyle:b,rootStyle:a,getThumbStyle:o}}function GPe(t){const{isReversed:e,direction:n,orientation:r}=t;return n==="ltr"||r==="vertical"?e:!e}function qPe(t,e,n,r){return t.addEventListener(e,n,r),()=>{t.removeEventListener(e,n,r)}}function KPe(t){const e=XPe(t);return typeof e.PointerEvent!="undefined"&&t instanceof e.PointerEvent?t.pointerType==="mouse":t instanceof e.MouseEvent}function YX(t){return!!t.touches}function YPe(t){return YX(t)&&t.touches.length>1}function XPe(t){var e;return(e=t.view)!=null?e:window}function QPe(t,e="page"){const n=t.touches[0]||t.changedTouches[0];return{x:n[`${e}X`],y:n[`${e}Y`]}}function ZPe(t,e="page"){return{x:t[`${e}X`],y:t[`${e}Y`]}}function XX(t,e="page"){return YX(t)?QPe(t,e):ZPe(t,e)}function JPe(t){return e=>{const n=KPe(e);(!n||n&&e.button===0)&&t(e)}}function eDe(t,e=!1){function n(i){t(i,{point:XX(i)})}return e?JPe(n):n}function aE(t,e,n,r){return qPe(t,e,eDe(n,e==="pointerdown"),r)}var tDe=Object.defineProperty,nDe=(t,e,n)=>e in t?tDe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hl=(t,e,n)=>(nDe(t,typeof e!="symbol"?e+"":e,n),n),rDe=class{constructor(t,e,n){Hl(this,"history",[]),Hl(this,"startEvent",null),Hl(this,"lastEvent",null),Hl(this,"lastEventInfo",null),Hl(this,"handlers",{}),Hl(this,"removeListeners",()=>{}),Hl(this,"threshold",3),Hl(this,"win"),Hl(this,"updatePoint",()=>{if(!(this.lastEvent&&this.lastEventInfo))return;const a=LP(this.lastEventInfo,this.history),l=this.startEvent!==null,c=aDe(a.offset,{x:0,y:0})>=this.threshold;if(!l&&!c)return;const{timestamp:u}=VU();this.history.push(oe(B({},a.point),{timestamp:u}));const{onStart:d,onMove:f}=this.handlers;l||(d==null||d(this.lastEvent,a),this.startEvent=this.lastEvent),f==null||f(this.lastEvent,a)}),Hl(this,"onPointerMove",(a,l)=>{this.lastEvent=a,this.lastEventInfo=l,Qbe.update(this.updatePoint,!0)}),Hl(this,"onPointerUp",(a,l)=>{const c=LP(l,this.history),{onEnd:u,onSessionEnd:d}=this.handlers;d==null||d(a,c),this.end(),!(!u||!this.startEvent)&&(u==null||u(a,c))});var r;if(this.win=(r=t.view)!=null?r:window,YPe(t))return;this.handlers=e,n&&(this.threshold=n),t.stopPropagation(),t.preventDefault();const i={point:XX(t)},{timestamp:o}=VU();this.history=[oe(B({},i.point),{timestamp:o})];const{onSessionStart:s}=e;s==null||s(t,LP(i,this.history)),this.removeListeners=sDe(aE(this.win,"pointermove",this.onPointerMove),aE(this.win,"pointerup",this.onPointerUp),aE(this.win,"pointercancel",this.onPointerUp))}updateHandlers(t){this.handlers=t}end(){var t;(t=this.removeListeners)==null||t.call(this),Zbe.update(this.updatePoint)}};function Lz(t,e){return{x:t.x-e.x,y:t.y-e.y}}function LP(t,e){return{point:t.point,delta:Lz(t.point,e[e.length-1]),offset:Lz(t.point,e[0]),velocity:oDe(e,.1)}}var iDe=t=>t*1e3;function oDe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=t[t.length-1];for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>iDe(e)));)n--;if(!r)return{x:0,y:0};const o=(i.timestamp-r.timestamp)/1e3;if(o===0)return{x:0,y:0};const s={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function sDe(...t){return e=>t.reduce((n,r)=>r(n),e)}function BP(t,e){return Math.abs(t-e)}function Bz(t){return"x"in t&&"y"in t}function aDe(t,e){if(typeof t=="number"&&typeof e=="number")return BP(t,e);if(Bz(t)&&Bz(e)){const n=BP(t.x,e.x),r=BP(t.y,e.y);return Math.sqrt(Vl(n,2)+Vl(r,2))}return 0}function QX(t){const e=A.useRef(null);return e.current=t,e}function lDe(t,e){const{onPan:n,onPanStart:r,onPanEnd:i,onPanSessionStart:o,onPanSessionEnd:s,threshold:a}=e,l=!!(n||r||i||o||s),c=A.useRef(null),u=QX({onSessionStart:o,onSessionEnd:s,onStart:r,onMove:n,onEnd(d,f){c.current=null,i==null||i(d,f)}});A.useEffect(()=>{var d;(d=c.current)==null||d.updateHandlers(u.current)}),A.useEffect(()=>{const d=t.current;if(!d||!l)return;function f(p){c.current=new rDe(p,u.current,a)}return aE(d,"pointerdown",f)},[t,l,u,a]),A.useEffect(()=>()=>{var d;(d=c.current)==null||d.end(),c.current=null},[])}function cDe(t,e){var i;if(!t){e(void 0);return}e({width:t.offsetWidth,height:t.offsetHeight});const n=(i=t.ownerDocument.defaultView)!=null?i:window,r=new n.ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const[s]=o;let a,l;if("borderBoxSize"in s){const c=s.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=t.offsetWidth,l=t.offsetHeight;e({width:a,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}var uDe=globalThis!=null&&globalThis.document?A.useLayoutEffect:A.useEffect;function dDe(t,e){var n,r;if(!t||!t.parentElement)return;const i=(r=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?r:window,o=new i.MutationObserver(()=>{e()});return o.observe(t.parentElement,{childList:!0}),()=>{o.disconnect()}}function fDe({getNodes:t,observeMutation:e=!0}){const[n,r]=A.useState([]),[i,o]=A.useState(0);return uDe(()=>{const s=t(),a=s.map((l,c)=>cDe(l,u=>{r(d=>[...d.slice(0,c),u,...d.slice(c+1)])}));if(e){const l=s[0];a.push(dDe(l,()=>{o(c=>c+1)}))}return()=>{a.forEach(l=>{l==null||l()})}},[i]),n}function hDe(t){return typeof t=="object"&&t!==null&&"current"in t}function pDe(t){const[e]=fDe({observeMutation:!1,getNodes(){return[hDe(t)?t.current:t]}});return e}function mDe(t){var e;const Ne=t,{min:n=0,max:r=100,onChange:i,value:o,defaultValue:s,isReversed:a,direction:l="ltr",orientation:c="horizontal",id:u,isDisabled:d,isReadOnly:f,onChangeStart:p,onChangeEnd:b,step:v=1,getAriaValueText:m,"aria-valuetext":g,"aria-label":x,"aria-labelledby":w,name:S,focusThumbOnChange:D=!0}=Ne,k=Tt(Ne,["min","max","onChange","value","defaultValue","isReversed","direction","orientation","id","isDisabled","isReadOnly","onChangeStart","onChangeEnd","step","getAriaValueText","aria-valuetext","aria-label","aria-labelledby","name","focusThumbOnChange"]),P=fo(p),M=fo(b),T=fo(m),_=GPe({isReversed:a,direction:l,orientation:c}),[E,R]=UN({value:o,defaultValue:s!=null?s:vDe(n,r),onChange:i}),[F,L]=A.useState(!1),[N,U]=A.useState(!1),H=!(d||f),j=(r-n)/10,z=v||(r-n)/100,q=tE(E,n,r),$=r-q+n,G=lz(_?$:q,n,r),Y=c==="vertical",J=QX({min:n,max:r,step:v,isDisabled:d,value:q,isInteractive:H,isReversed:_,isVertical:Y,eventSource:null,focusThumbOnChange:D,orientation:c}),V=A.useRef(null),re=A.useRef(null),fe=A.useRef(null),pe=A.useId(),ce=u!=null?u:pe,[xe,Ae]=[`slider-thumb-${ce}`,`slider-track-${ce}`],Ee=A.useCallback(Ie=>{var Ve,Ue;if(!V.current)return;const tt=J.current;tt.eventSource="pointer";const st=V.current.getBoundingClientRect(),{clientX:vt,clientY:Fe}=(Ue=(Ve=Ie.touches)==null?void 0:Ve[0])!=null?Ue:Ie,ct=Y?st.bottom-Fe:vt-st.left,Ye=Y?st.height:st.width;let ft=ct/Ye;_&&(ft=1-ft);let _t=dAe(ft,tt.min,tt.max);return tt.step&&(_t=parseFloat(cz(_t,tt.min,tt.step))),_t=tE(_t,tt.min,tt.max),_t},[Y,_,J]),ee=A.useCallback(Ie=>{const Ve=J.current;Ve.isInteractive&&(Ie=parseFloat(cz(Ie,Ve.min,z)),Ie=tE(Ie,Ve.min,Ve.max),R(Ie))},[z,R,J]),Oe=A.useMemo(()=>({stepUp(Ie=z){const Ve=_?q-Ie:q+Ie;ee(Ve)},stepDown(Ie=z){const Ve=_?q+Ie:q-Ie;ee(Ve)},reset(){ee(s||0)},stepTo(Ie){ee(Ie)}}),[ee,_,q,z,s]),le=A.useCallback(Ie=>{const Ve=J.current,tt={ArrowRight:()=>Oe.stepUp(),ArrowUp:()=>Oe.stepUp(),ArrowLeft:()=>Oe.stepDown(),ArrowDown:()=>Oe.stepDown(),PageUp:()=>Oe.stepUp(j),PageDown:()=>Oe.stepDown(j),Home:()=>ee(Ve.min),End:()=>ee(Ve.max)}[Ie.key];tt&&(Ie.preventDefault(),Ie.stopPropagation(),tt(Ie),Ve.eventSource="keyboard")},[Oe,ee,j,J]),me=(e=T==null?void 0:T(q))!=null?e:g,ne=pDe(re),{getThumbStyle:se,rootStyle:ge,trackStyle:Q,innerTrackStyle:W}=A.useMemo(()=>{const Ie=J.current,Ve=ne!=null?ne:{width:0,height:0};return HPe({isReversed:_,orientation:Ie.orientation,thumbRects:[Ve],thumbPercents:[G]})},[_,ne,G,J]),ve=A.useCallback(()=>{J.current.focusThumbOnChange&&setTimeout(()=>{var Ve;return(Ve=re.current)==null?void 0:Ve.focus()})},[J]);gb(()=>{const Ie=J.current;ve(),Ie.eventSource==="keyboard"&&(M==null||M(Ie.value))},[q,M]);function ue(Ie){const Ve=Ee(Ie);Ve!=null&&Ve!==J.current.value&&R(Ve)}lDe(fe,{onPanSessionStart(Ie){const Ve=J.current;Ve.isInteractive&&(L(!0),ve(),ue(Ie),P==null||P(Ve.value))},onPanSessionEnd(){const Ie=J.current;Ie.isInteractive&&(L(!1),M==null||M(Ie.value))},onPan(Ie){J.current.isInteractive&&ue(Ie)}});const Me=A.useCallback((Ie={},Ve=null)=>oe(B(B({},Ie),k),{ref:no(Ve,fe),tabIndex:-1,"aria-disabled":OP(d),"data-focused":Xm(N),style:B(B({},Ie.style),ge)}),[k,d,N,ge]),Pe=A.useCallback((Ie={},Ve=null)=>oe(B({},Ie),{ref:no(Ve,V),id:Ae,"data-disabled":Xm(d),style:B(B({},Ie.style),Q)}),[d,Ae,Q]),je=A.useCallback((Ie={},Ve=null)=>oe(B({},Ie),{ref:Ve,style:B(B({},Ie.style),W)}),[W]),ke=A.useCallback((Ie={},Ve=null)=>oe(B({},Ie),{ref:no(Ve,re),role:"slider",tabIndex:H?0:void 0,id:xe,"data-active":Xm(F),"aria-valuetext":me,"aria-valuemin":n,"aria-valuemax":r,"aria-valuenow":q,"aria-orientation":c,"aria-disabled":OP(d),"aria-readonly":OP(f),"aria-label":x,"aria-labelledby":x?void 0:w,style:B(B({},Ie.style),se(0)),onKeyDown:NP(Ie.onKeyDown,le),onFocus:NP(Ie.onFocus,()=>U(!0)),onBlur:NP(Ie.onBlur,()=>U(!1))}),[H,xe,F,me,n,r,q,c,d,f,x,w,se,le]),De=A.useCallback((Ie,Ve=null)=>{const Ue=!(Ie.value<n||Ie.value>r),tt=q>=Ie.value,st=lz(Ie.value,n,r),vt=B({position:"absolute",pointerEvents:"none"},gDe({orientation:c,vertical:{bottom:_?`${100-st}%`:`${st}%`},horizontal:{left:_?`${100-st}%`:`${st}%`}}));return oe(B({},Ie),{ref:Ve,role:"presentation","aria-hidden":!0,"data-disabled":Xm(d),"data-invalid":Xm(!Ue),"data-highlighted":Xm(tt),style:B(B({},Ie.style),vt)})},[d,_,r,n,c,q]),nt=A.useCallback((Ie={},Ve=null)=>oe(B({},Ie),{ref:Ve,type:"hidden",value:q,name:S}),[S,q]);return{state:{value:q,isFocused:N,isDragging:F},actions:Oe,getRootProps:Me,getTrackProps:Pe,getInnerTrackProps:je,getThumbProps:ke,getMarkerProps:De,getInputProps:nt}}function gDe(t){const{orientation:e,vertical:n,horizontal:r}=t;return e==="vertical"?n:r}function vDe(t,e){return e<t?t:t+(e-t)/2}var[yDe,bT]=pi({name:"SliderContext",hookName:"useSliderContext",providerName:"<Slider />"}),[xDe,wT]=pi({name:"SliderStylesContext",hookName:"useSliderStyles",providerName:"<Slider />"}),ZX=Yt((t,e)=>{var n;const r=oe(B({},t),{orientation:(n=t==null?void 0:t.orientation)!=null?n:"horizontal"}),i=gs("Slider",r),o=di(r),{direction:s}=c0();o.direction=s;const f=mDe(o),{getInputProps:a,getRootProps:l}=f,c=Tt(f,["getInputProps","getRootProps"]),u=l(),d=a({},e);return h.jsx(yDe,{value:c,children:h.jsx(xDe,{value:i,children:h.jsxs(Ut.div,oe(B({},u),{className:Aw("chakra-slider",r.className),__css:i.container,children:[r.children,h.jsx("input",B({},d))]}))})})});ZX.displayName="Slider";var JX=Yt((t,e)=>{const{getThumbProps:n}=bT(),r=wT(),i=n(t,e);return h.jsx(Ut.div,oe(B({},i),{className:Aw("chakra-slider__thumb",t.className),__css:r.thumb}))});JX.displayName="SliderThumb";var eQ=Yt((t,e)=>{const{getTrackProps:n}=bT(),r=wT(),i=n(t,e);return h.jsx(Ut.div,oe(B({},i),{className:Aw("chakra-slider__track",t.className),__css:r.track}))});eQ.displayName="SliderTrack";var tQ=Yt((t,e)=>{const{getInnerTrackProps:n}=bT(),r=wT(),i=n(t,e);return h.jsx(Ut.div,oe(B({},i),{className:Aw("chakra-slider__filled-track",t.className),__css:r.filledTrack}))});tQ.displayName="SliderFilledTrack";var bDe=Yt((t,e)=>{const{getMarkerProps:n}=bT(),r=wT(),i=n(t,e);return h.jsx(Ut.div,oe(B({},i),{className:Aw("chakra-slider__marker",t.className),__css:r.mark}))});bDe.displayName="SliderMark";var[wDe,x3]=pi({name:"StatStylesContext",errorMessage:`useStatStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Stat />" `}),By=Yt(function(e,n){const r=gs("Stat",e),i=B({position:"relative",flex:"1 1 0%"},r.container),l=di(e),{className:o,children:s}=l,a=Tt(l,["className","children"]);return h.jsx(wDe,{value:r,children:h.jsx(Ut.div,oe(B({ref:n},a),{className:_n("chakra-stat",o),__css:i,children:h.jsx("dl",{children:s})}))})});By.displayName="Stat";var jy=Yt(function(e,n){const r=x3();return h.jsx(Ut.dd,oe(B({ref:n},e),{className:_n("chakra-stat__help-text",e.className),__css:r.helpText}))});jy.displayName="StatHelpText";var Uy=Yt(function(e,n){const r=x3();return h.jsx(Ut.dt,oe(B({ref:n},e),{className:_n("chakra-stat__label",e.className),__css:r.label}))});Uy.displayName="StatLabel";var zy=Yt(function(e,n){const r=x3();return h.jsx(Ut.dd,oe(B({ref:n},e),{className:_n("chakra-stat__number",e.className),__css:oe(B({},r.number),{fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums"})}))});zy.displayName="StatNumber";var b3=Yt(function(e,n){const r=gs("Switch",e),v=di(e),{spacing:i="0.5rem",children:o}=v,s=Tt(v,["spacing","children"]),{getIndicatorProps:a,getInputProps:l,getCheckboxProps:c,getRootProps:u,getLabelProps:d}=lAe(s),f=A.useMemo(()=>B({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0},r.container),[r.container]),p=A.useMemo(()=>B({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer"},r.track),[r.track]),b=A.useMemo(()=>B({userSelect:"none",marginStart:i},r.label),[i,r.label]);return h.jsxs(Ut.label,oe(B({},u()),{className:_n("chakra-switch",e.className),__css:f,children:[h.jsx("input",B({className:"chakra-switch__input"},l({},n))),h.jsx(Ut.span,oe(B({},c()),{className:"chakra-switch__track",__css:p,children:h.jsx(Ut.span,B({__css:r.thumb,className:"chakra-switch__thumb"},a()))})),o&&h.jsx(Ut.span,oe(B({className:"chakra-switch__label"},d()),{__css:b,children:o}))]}))});b3.displayName="Switch";var[SDe,Tw]=pi({name:"TableStylesContext",errorMessage:`useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Table />" `}),nQ=Yt((t,e)=>{const n=gs("Table",t),s=di(t),{className:r,layout:i}=s,o=Tt(s,["className","layout"]);return h.jsx(SDe,{value:n,children:h.jsx(Ut.table,B({ref:e,__css:B({tableLayout:i},n.table),className:_n("chakra-table",r)},o))})});nQ.displayName="Table";var _De=Yt((t,e)=>{const n=Tw();return h.jsx(Ut.thead,oe(B({},t),{ref:e,__css:n.thead}))}),jP=Yt((t,e)=>{const n=Tw();return h.jsx(Ut.tr,oe(B({},t),{ref:e,__css:n.tr}))}),EDe=Yt((t,e)=>{const n=Tw();return h.jsx(Ut.tbody,oe(B({},t),{ref:e,__css:n.tbody}))}),Qm=Yt((r,n)=>{var i=r,{isNumeric:t}=i,e=Tt(i,["isNumeric"]);const o=Tw();return h.jsx(Ut.td,oe(B({},e),{ref:n,__css:o.td,"data-is-numeric":t}))}),ly=Yt((r,n)=>{var i=r,{isNumeric:t}=i,e=Tt(i,["isNumeric"]);const o=Tw();return h.jsx(Ut.th,oe(B({},e),{ref:n,__css:o.th,"data-is-numeric":t}))}),[CDe,ADe,TDe,MDe]=TY();function PDe(t){var e;const w=t,{defaultIndex:n,onChange:r,index:i,isManual:o,isLazy:s,lazyBehavior:a="unmount",orientation:l="horizontal",direction:c="ltr"}=w,u=Tt(w,["defaultIndex","onChange","index","isManual","isLazy","lazyBehavior","orientation","direction"]),[d,f]=A.useState(n!=null?n:0),[p,b]=UN({defaultValue:n!=null?n:0,value:i,onChange:r});A.useEffect(()=>{i!=null&&f(i)},[i]);const v=TDe(),m=A.useId();return{id:`tabs-${(e=t.id)!=null?e:m}`,selectedIndex:p,focusedIndex:d,setSelectedIndex:b,setFocusedIndex:f,isManual:o,isLazy:s,lazyBehavior:a,orientation:l,descendants:v,direction:c,htmlProps:u}}var[DDe,ST]=pi({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"});function RDe(t){const{focusedIndex:e,orientation:n,direction:r}=ST(),i=ADe(),o=A.useCallback(s=>{const a=()=>{var x;const w=i.nextEnabled(e);w&&((x=w.node)==null||x.focus())},l=()=>{var x;const w=i.prevEnabled(e);w&&((x=w.node)==null||x.focus())},c=()=>{var x;const w=i.firstEnabled();w&&((x=w.node)==null||x.focus())},u=()=>{var x;const w=i.lastEnabled();w&&((x=w.node)==null||x.focus())},d=n==="horizontal",f=n==="vertical",p=s.key,b=r==="ltr"?"ArrowLeft":"ArrowRight",v=r==="ltr"?"ArrowRight":"ArrowLeft",g={[b]:()=>d&&l(),[v]:()=>d&&a(),ArrowDown:()=>f&&a(),ArrowUp:()=>f&&l(),Home:c,End:u}[p];g&&(s.preventDefault(),g(s))},[i,e,n,r]);return oe(B({},t),{role:"tablist","aria-orientation":n,onKeyDown:Un(t.onKeyDown,o)})}function kDe(t){const m=t,{isDisabled:e=!1,isFocusable:n=!1}=m,r=Tt(m,["isDisabled","isFocusable"]),{setSelectedIndex:i,isManual:o,id:s,setFocusedIndex:a,selectedIndex:l}=ST(),{index:c,register:u}=MDe({disabled:e&&!n}),d=c===l,f=()=>{i(c)},p=()=>{a(c),!o&&!(e&&n)&&i(c)},b=t2e(oe(B({},r),{ref:no(u,t.ref),isDisabled:e,isFocusable:n,onClick:Un(t.onClick,f)}));return oe(B({},b),{id:rQ(s,c),role:"tab",tabIndex:d?0:-1,type:"button","aria-selected":d,"aria-controls":iQ(s,c),onFocus:e?void 0:Un(t.onFocus,p)})}var[IDe,FDe]=pi({});function ODe(t){const e=ST(),{id:n,selectedIndex:r}=e,o=GN(t.children).map((s,a)=>A.createElement(IDe,{key:a,value:{isSelected:a===r,id:iQ(n,a),tabId:rQ(n,a),selectedIndex:r}},s));return oe(B({},t),{children:o})}function NDe(t){const u=t,{children:e}=u,n=Tt(u,["children"]),{isLazy:r,lazyBehavior:i}=ST(),{isSelected:o,id:s,tabId:a}=FDe(),l=A.useRef(!1);o&&(l.current=!0);const c=EMe({wasSelected:l.current,isSelected:o,enabled:r,mode:i});return oe(B({tabIndex:0},n),{children:c?e:null,role:"tabpanel","aria-labelledby":a,hidden:!o,id:s})}function rQ(t,e){return`${t}--tab-${e}`}function iQ(t,e){return`${t}--tabpanel-${e}`}var[LDe,_T]=pi({name:"TabsStylesContext",errorMessage:`useTabsStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tabs />" `}),Mw=Yt(function(e,n){const r=gs("Tabs",e),b=di(e),{children:i,className:o}=b,s=Tt(b,["children","className"]),v=PDe(s),{htmlProps:a,descendants:l}=v,c=Tt(v,["htmlProps","descendants"]),u=A.useMemo(()=>c,[c]),m=a,{isFitted:d}=m,f=Tt(m,["isFitted"]),p=B({position:"relative"},r.root);return h.jsx(CDe,{value:l,children:h.jsx(DDe,{value:u,children:h.jsx(LDe,{value:r,children:h.jsx(Ut.div,oe(B({className:_n("chakra-tabs",o),ref:n},f),{__css:p,children:i}))})})})});Mw.displayName="Tabs";var Pw=Yt(function(e,n){const r=RDe(oe(B({},e),{ref:n})),i=_T(),o=B({display:"flex"},i.tablist);return h.jsx(Ut.div,oe(B({},r),{className:_n("chakra-tabs__tablist",e.className),__css:o}))});Pw.displayName="TabList";var zf=Yt(function(e,n){const r=NDe(oe(B({},e),{ref:n})),i=_T();return h.jsx(Ut.div,oe(B({outline:"0"},r),{className:_n("chakra-tabs__tab-panel",e.className),__css:i.tabpanel}))});zf.displayName="TabPanel";var ET=Yt(function(e,n){const r=ODe(e),i=_T();return h.jsx(Ut.div,oe(B({},r),{width:"100%",ref:n,className:_n("chakra-tabs__tab-panels",e.className),__css:i.tabpanels}))});ET.displayName="TabPanels";var Ts=Yt(function(e,n){const r=_T(),i=kDe(oe(B({},e),{ref:n})),o=B({outline:"0",display:"flex",alignItems:"center",justifyContent:"center"},r.tab);return h.jsx(Ut.button,oe(B({},i),{className:_n("chakra-tabs__tab",e.className),__css:o}))});Ts.displayName="Tab";function BDe(t,e=[]){const n=Object.assign({},t);for(const r of e)r in n&&delete n[r];return n}var jDe=["h","minH","height","minHeight"],w3=Yt((t,e)=>{const n=Wa("Textarea",t),l=di(t),{className:r,rows:i}=l,o=Tt(l,["className","rows"]),s=qN(o),a=i?BDe(n,jDe):n;return h.jsx(Ut.textarea,oe(B({ref:e,rows:i},s),{className:_n("chakra-textarea",r),__css:a}))});w3.displayName="Textarea";var UDe={exit:{scale:.85,opacity:0,transition:{opacity:{duration:.15,easings:"easeInOut"},scale:{duration:.2,easings:"easeInOut"}}},enter:{scale:1,opacity:1,transition:{opacity:{easings:"easeOut",duration:.2},scale:{duration:.2,ease:[.175,.885,.4,1.1]}}}},oI=t=>{var e;return((e=t.current)==null?void 0:e.ownerDocument)||document},lE=t=>{var e,n;return((n=(e=t.current)==null?void 0:e.ownerDocument)==null?void 0:n.defaultView)||window};function zDe(t={}){const Ae=t,{openDelay:e=0,closeDelay:n=0,closeOnClick:r=!0,closeOnMouseDown:i,closeOnScroll:o,closeOnPointerDown:s=i,closeOnEsc:a=!0,onOpen:l,onClose:c,placement:u,id:d,isOpen:f,defaultIsOpen:p,arrowSize:b=10,arrowShadowColor:v,arrowPadding:m,modifiers:g,isDisabled:x,gutter:w,offset:S,direction:D}=Ae,k=Tt(Ae,["openDelay","closeDelay","closeOnClick","closeOnMouseDown","closeOnScroll","closeOnPointerDown","closeOnEsc","onOpen","onClose","placement","id","isOpen","defaultIsOpen","arrowSize","arrowShadowColor","arrowPadding","modifiers","isDisabled","gutter","offset","direction"]),{isOpen:P,onOpen:M,onClose:T}=_Me({isOpen:f,defaultIsOpen:p,onOpen:l,onClose:c}),{referenceRef:_,getPopperProps:E,getArrowInnerProps:R,getArrowProps:F}=wMe({enabled:P,placement:u,arrowPadding:m,modifiers:g,gutter:w,offset:S,direction:D}),L=A.useId(),U=`tooltip-${d!=null?d:L}`,H=A.useRef(null),j=A.useRef(),z=A.useCallback(()=>{j.current&&(clearTimeout(j.current),j.current=void 0)},[]),q=A.useRef(),$=A.useCallback(()=>{q.current&&(clearTimeout(q.current),q.current=void 0)},[]),K=A.useCallback(()=>{$(),T()},[T,$]),G=VDe(H,K),Y=A.useCallback(()=>{if(!x&&!j.current){P&&G();const Ee=lE(H);j.current=Ee.setTimeout(M,e)}},[G,x,P,M,e]),J=A.useCallback(()=>{z();const Ee=lE(H);q.current=Ee.setTimeout(K,n)},[n,K,z]),V=A.useCallback(()=>{P&&r&&J()},[r,J,P]),re=A.useCallback(()=>{P&&s&&J()},[s,J,P]),fe=A.useCallback(Ee=>{P&&Ee.key==="Escape"&&J()},[P,J]);nE(()=>oI(H),"keydown",a?fe:void 0),nE(()=>{if(!o)return null;const Ee=H.current;if(!Ee)return null;const ee=hX(Ee);return ee.localName==="body"?lE(H):ee},"scroll",()=>{P&&o&&K()},{passive:!0,capture:!0}),A.useEffect(()=>{x&&(z(),P&&T())},[x,P,T,z]),A.useEffect(()=>()=>{z(),$()},[z,$]),nE(()=>H.current,"pointerleave",J);const pe=A.useCallback((Ee={},ee=null)=>oe(B({},Ee),{ref:no(H,ee,_),onPointerEnter:Un(Ee.onPointerEnter,le=>{le.pointerType!=="touch"&&Y()}),onClick:Un(Ee.onClick,V),onPointerDown:Un(Ee.onPointerDown,re),onFocus:Un(Ee.onFocus,Y),onBlur:Un(Ee.onBlur,J),"aria-describedby":P?U:void 0}),[Y,J,re,P,U,V,_]),ce=A.useCallback((Ee={},ee=null)=>E(oe(B({},Ee),{style:oe(B({},Ee.style),{[Wo.arrowSize.var]:b?`${b}px`:void 0,[Wo.arrowShadowColor.var]:v})}),ee),[E,b,v]),xe=A.useCallback((Ee={},ee=null)=>{const Oe=oe(B({},Ee.style),{position:"relative",transformOrigin:Wo.transformOrigin.varRef});return oe(B(B({ref:ee},k),Ee),{id:U,role:"tooltip",style:Oe})},[k,U]);return{isOpen:P,show:Y,hide:J,getTriggerProps:pe,getTooltipProps:xe,getTooltipPositionerProps:ce,getArrowProps:F,getArrowInnerProps:R}}var UP="chakra-ui:close-tooltip";function VDe(t,e){return A.useEffect(()=>{const n=oI(t);return n.addEventListener(UP,e),()=>n.removeEventListener(UP,e)},[e,t]),()=>{const n=oI(t),r=lE(t);n.dispatchEvent(new r.CustomEvent(UP))}}function WDe(t,e=[]){const n=Object.assign({},t);for(const r of e)r in n&&delete n[r];return n}function $De(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}var HDe=Ut(ml.div),Ea=Yt((t,e)=>{var n,r;const i=Wa("Tooltip",t),o=di(t),s=c0(),E=o,{children:a,label:l,shouldWrapChildren:c,"aria-label":u,hasArrow:d,bg:f,portalProps:p,background:b,backgroundColor:v,bgColor:m,motionProps:g}=E,x=Tt(E,["children","label","shouldWrapChildren","aria-label","hasArrow","bg","portalProps","background","backgroundColor","bgColor","motionProps"]),w=(r=(n=b!=null?b:v)!=null?n:f)!=null?r:m;if(w){i.bg=w;const R=vme(s,"colors",w);i[Wo.arrowBg.var]=R}const S=zDe(oe(B({},x),{direction:s.direction})),D=typeof a=="string"||c;let k;if(D)k=h.jsx(Ut.span,oe(B({display:"inline-block",tabIndex:0},S.getTriggerProps()),{children:a}));else{const R=A.Children.only(a);k=A.cloneElement(R,S.getTriggerProps(R.props,R.ref))}const P=!!u,M=S.getTooltipProps({},e),T=P?WDe(M,["role","id"]):M,_=$De(M,["role","id"]);return l?h.jsxs(h.Fragment,{children:[k,h.jsx(Gc,{children:S.isOpen&&h.jsx(l0,oe(B({},p),{children:h.jsx(Ut.div,oe(B({},S.getTooltipPositionerProps()),{__css:{zIndex:i.zIndex,pointerEvents:"none"},children:h.jsxs(HDe,oe(B(B({variants:UDe,initial:"exit",animate:"enter",exit:"exit"},g),T),{__css:i,children:[l,P&&h.jsx(Ut.span,oe(B({srOnly:!0},_),{children:u})),d&&h.jsx(Ut.div,{"data-popper-arrow":!0,className:"chakra-tooltip__arrow-wrapper",children:h.jsx(Ut.div,{"data-popper-arrow-inner":!0,className:"chakra-tooltip__arrow",__css:{bg:i.bg}})})]}))}))}))})]}):h.jsx(h.Fragment,{children:a})});Ea.displayName="Tooltip";var S3={};Object.defineProperty(S3,"__esModule",{value:!0});S3.parse=ZDe;S3.serialize=JDe;const GDe=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,qDe=/^[\u0021-\u003A\u003C-\u007E]*$/,KDe=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,YDe=/^[\u0020-\u003A\u003D-\u007E]*$/,XDe=Object.prototype.toString,QDe=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function ZDe(t,e){const n=new QDe,r=t.length;if(r<2)return n;const i=(e==null?void 0:e.decode)||eRe;let o=0;do{const s=t.indexOf("=",o);if(s===-1)break;const a=t.indexOf(";",o),l=a===-1?r:a;if(s>l){o=t.lastIndexOf(";",s-1)+1;continue}const c=jz(t,o,s),u=Uz(t,s,c),d=t.slice(c,u);if(n[d]===void 0){let f=jz(t,s+1,l),p=Uz(t,l,f);const b=i(t.slice(f,p));n[d]=b}o=l+1}while(o<r);return n}function jz(t,e,n){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<n);return n}function Uz(t,e,n){for(;e>n;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return n}function JDe(t,e,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!GDe.test(t))throw new TypeError(`argument name is invalid: ${t}`);const i=r(e);if(!qDe.test(i))throw new TypeError(`argument val is invalid: ${e}`);let o=t+"="+i;if(!n)return o;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);o+="; Max-Age="+n.maxAge}if(n.domain){if(!KDe.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);o+="; Domain="+n.domain}if(n.path){if(!YDe.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);o+="; Path="+n.path}if(n.expires){if(!tRe(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);o+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.partitioned&&(o+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"none":o+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return o}function eRe(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch(e){return t}}function tRe(t){return XDe.call(t)==="[object Date]"}/**
 * react-router v7.5.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var oQ=t=>{throw TypeError(t)},nRe=(t,e,n)=>e.has(t)||oQ("Cannot "+n),zP=(t,e,n)=>(nRe(t,e,"read from private field"),n?n.call(t):e.get(t)),rRe=(t,e,n)=>e.has(t)?oQ("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),zz="popstate";function iRe(t={}){function e(r,i){let{pathname:o,search:s,hash:a}=r.location;return Ab("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:eh(i)}return sRe(e,n,null,t)}function dr(t,e){if(t===!1||t===null||typeof t=="undefined")throw new Error(e)}function Gi(t,e){if(!t){typeof console!="undefined"&&console.warn(e);try{throw new Error(e)}catch(n){}}}function oRe(){return Math.random().toString(36).substring(2,10)}function Vz(t,e){return{usr:t.state,key:t.key,idx:e}}function Ab(t,e,n=null,r){return oe(B({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?dh(e):e),{state:n,key:e&&e.key||r||oRe()})}function eh({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function dh(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function sRe(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a="POP",l=null,c=u();c==null&&(c=0,s.replaceState(oe(B({},s.state),{idx:c}),""));function u(){return(s.state||{idx:null}).idx}function d(){a="POP";let m=u(),g=m==null?null:m-c;c=m,l&&l({action:a,location:v.location,delta:g})}function f(m,g){a="PUSH";let x=Ab(v.location,m,g);c=u()+1;let w=Vz(x,c),S=v.createHref(x);try{s.pushState(w,"",S)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(S)}o&&l&&l({action:a,location:v.location,delta:1})}function p(m,g){a="REPLACE";let x=Ab(v.location,m,g);c=u();let w=Vz(x,c),S=v.createHref(x);s.replaceState(w,"",S),o&&l&&l({action:a,location:v.location,delta:0})}function b(m){let g=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof m=="string"?m:eh(m);return x=x.replace(/ $/,"%20"),dr(g,`No window.location.(origin|href) available to create URL for href: ${x}`),new URL(x,g)}let v={get action(){return a},get location(){return t(i,s)},listen(m){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(zz,d),l=m,()=>{i.removeEventListener(zz,d),l=null}},createHref(m){return e(i,m)},createURL:b,encodeLocation(m){let g=b(m);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:p,go(m){return s.go(m)}};return v}var Vy,Wz=class{constructor(t){if(rRe(this,Vy,new Map),t)for(let[e,n]of t)this.set(e,n)}get(t){if(zP(this,Vy).has(t))return zP(this,Vy).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,e){zP(this,Vy).set(t,e)}};Vy=new WeakMap;var aRe=new Set(["lazy","caseSensitive","path","id","index","children"]);function lRe(t){return aRe.has(t)}var cRe=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function uRe(t){return cRe.has(t)}function dRe(t){return t.index===!0}function MC(t,e,n=[],r={}){return t.map((i,o)=>{let s=[...n,String(o)],a=typeof i.id=="string"?i.id:s.join("-");if(dr(i.index!==!0||!i.children,"Cannot specify children on an index route"),dr(!r[a],`Found a route id collision on id "${a}".  Route id's must be globally unique within Data Router usages`),dRe(i)){let l=oe(B(B({},i),e(i)),{id:a});return r[a]=l,l}else{let l=oe(B(B({},i),e(i)),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=MC(i.children,e,s,r)),l}})}function xf(t,e,n="/"){return cE(t,e,n,!1)}function cE(t,e,n,r){let i=typeof e=="string"?dh(e):e,o=_l(i.pathname||"/",n);if(o==null)return null;let s=sQ(t);hRe(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let c=ERe(o);a=SRe(s[l],c,r)}return a}function fRe(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function sQ(t,e=[],n=[],r=""){let i=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&(dr(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=eu([r,l.relativePath]),u=n.concat(l);o.children&&o.children.length>0&&(dr(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),sQ(o.children,e,u,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:bRe(c,o.index),routesMeta:u})};return t.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let l of aQ(o.path))i(o,s,l)}),e}function aQ(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=aQ(r.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),i&&a.push(...s),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function hRe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:wRe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var pRe=/^:[\w-]+$/,mRe=3,gRe=2,vRe=1,yRe=10,xRe=-2,$z=t=>t==="*";function bRe(t,e){let n=t.split("/"),r=n.length;return n.some($z)&&(r+=xRe),e&&(r+=gRe),n.filter(i=>!$z(i)).reduce((i,o)=>i+(pRe.test(o)?mRe:o===""?vRe:yRe),r)}function wRe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function SRe(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=o==="/"?e:e.slice(o.length)||"/",d=PC({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=PC({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),s.push({params:i,pathname:eu([o,d.pathname]),pathnameBase:TRe(eu([o,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(o=eu([o,d.pathnameBase]))}return s}function PC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=_Re(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:d},f)=>{if(u==="*"){let b=a[f]||"";s=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const p=a[f];return d&&!p?c[u]=void 0:c[u]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:s,pattern:t}}function _Re(t,e=!1,n=!0){Gi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function ERe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gi(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function _l(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function CRe(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?dh(t):t;return{pathname:n?n.startsWith("/")?n:ARe(n,e):e,search:MRe(r),hash:PRe(i)}}function ARe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function VP(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function lQ(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function CT(t){let e=lQ(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function AT(t,e,n,r=!1){let i;typeof t=="string"?i=dh(t):(i=B({},t),dr(!i.pathname||!i.pathname.includes("?"),VP("?","pathname","search",i)),dr(!i.pathname||!i.pathname.includes("#"),VP("#","pathname","hash",i)),dr(!i.search||!i.search.includes("#"),VP("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let d=e.length-1;if(!r&&s.startsWith("..")){let f=s.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=CRe(i,a),c=s&&s!=="/"&&s.endsWith("/"),u=(o||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var eu=t=>t.join("/").replace(/\/\/+/g,"/"),TRe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),MRe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,PRe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,sI=(t,e=302)=>{let n=e;typeof n=="number"?n={status:n}:typeof n.status=="undefined"&&(n.status=302);let r=new Headers(n.headers);return r.set("Location",t),new Response(null,oe(B({},n),{headers:r}))},DC=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function jv(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var cQ=["POST","PUT","PATCH","DELETE"],DRe=new Set(cQ),RRe=["GET",...cQ],kRe=new Set(RRe),IRe=new Set([301,302,303,307,308]),FRe=new Set([307,308]),WP={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ORe={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},cy={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},_3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,NRe=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),uQ="remix-router-transitions",dQ=Symbol("ResetLoaderData");function LRe(t){const e=t.window?t.window:typeof window!="undefined"?window:void 0,n=typeof e!="undefined"&&typeof e.document!="undefined"&&typeof e.document.createElement!="undefined";dr(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=t.hydrationRouteProperties||[],i=t.mapRouteProperties||NRe,o={},s=MC(t.routes,i,void 0,o),a,l=t.basename||"/",c=t.dataStrategy||VRe,u=B({unstable_middleware:!1},t.future),d=null,f=new Set,p=null,b=null,v=null,m=t.hydrationData!=null,g=xf(s,t.history.location,l),x=!1,w=null;if(g==null&&!t.patchRoutesOnNavigation){let Ce=rl(404,{pathname:t.history.location.pathname}),{matches:ze,route:Qe}=n8(s);g=ze,w={[Qe.id]:Ce}}g&&!t.hydrationData&&lt(g,s,t.history.location.pathname).active&&(g=null);let S;if(g)if(g.some(Ce=>Ce.route.lazy))S=!1;else if(!g.some(Ce=>Ce.route.loader))S=!0;else{let Ce=t.hydrationData?t.hydrationData.loaderData:null,ze=t.hydrationData?t.hydrationData.errors:null;if(ze){let Qe=g.findIndex(gt=>ze[gt.route.id]!==void 0);S=g.slice(0,Qe+1).every(gt=>!lI(gt.route,Ce,ze))}else S=g.every(Qe=>!lI(Qe.route,Ce,ze))}else{S=!1,g=[];let Ce=lt(null,s,t.history.location.pathname);Ce.active&&Ce.matches&&(x=!0,g=Ce.matches)}let D,k={historyAction:t.history.action,location:t.history.location,matches:g,initialized:S,navigation:WP,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||w,fetchers:new Map,blockers:new Map},P="POP",M=!1,T,_=!1,E=new Map,R=null,F=!1,L=!1,N=new Set,U=new Map,H=0,j=-1,z=new Map,q=new Set,$=new Map,K=new Map,G=new Set,Y=new Map,J,V=null;function re(){if(d=t.history.listen(({action:Ce,location:ze,delta:Qe})=>{if(J){J(),J=void 0;return}Gi(Y.size===0||Qe!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let gt=vt({currentLocation:k.location,nextLocation:ze,historyAction:Ce});if(gt&&Qe!=null){let Rt=new Promise(Bt=>{J=Bt});t.history.go(Qe*-1),st(gt,{state:"blocked",location:ze,proceed(){st(gt,{state:"proceeding",proceed:void 0,reset:void 0,location:ze}),Rt.then(()=>t.history.go(Qe))},reset(){let Bt=new Map(k.blockers);Bt.set(gt,cy),ce({blockers:Bt})}});return}return ee(Ce,ze)}),n){JRe(e,E);let Ce=()=>eke(e,E);e.addEventListener("pagehide",Ce),R=()=>e.removeEventListener("pagehide",Ce)}return k.initialized||ee("POP",k.location,{initialHydration:!0}),D}function fe(){d&&d(),R&&R(),f.clear(),T&&T.abort(),k.fetchers.forEach((Ce,ze)=>De(ze)),k.blockers.forEach((Ce,ze)=>tt(ze))}function pe(Ce){return f.add(Ce),()=>f.delete(Ce)}function ce(Ce,ze={}){k=B(B({},k),Ce);let Qe=[],gt=[];k.fetchers.forEach((Rt,Bt)=>{Rt.state==="idle"&&(G.has(Bt)?Qe.push(Bt):gt.push(Bt))}),G.forEach(Rt=>{!k.fetchers.has(Rt)&&!U.has(Rt)&&Qe.push(Rt)}),[...f].forEach(Rt=>Rt(k,{deletedFetchers:Qe,viewTransitionOpts:ze.viewTransitionOpts,flushSync:ze.flushSync===!0})),Qe.forEach(Rt=>De(Rt)),gt.forEach(Rt=>k.fetchers.delete(Rt))}function xe(Ce,ze,{flushSync:Qe}={}){var Vt,pn;let gt=k.actionData!=null&&k.navigation.formMethod!=null&&_a(k.navigation.formMethod)&&k.navigation.state==="loading"&&((Vt=Ce.state)==null?void 0:Vt._isRedirect)!==!0,Rt;ze.actionData?Object.keys(ze.actionData).length>0?Rt=ze.actionData:Rt=null:gt?Rt=k.actionData:Rt=null;let Bt=ze.loaderData?e8(k.loaderData,ze.loaderData,ze.matches||[],ze.errors):k.loaderData,tn=k.blockers;tn.size>0&&(tn=new Map(tn),tn.forEach((vn,Wn)=>tn.set(Wn,cy)));let Ht=M===!0||k.navigation.formMethod!=null&&_a(k.navigation.formMethod)&&((pn=Ce.state)==null?void 0:pn._isRedirect)!==!0;a&&(s=a,a=void 0),F||P==="POP"||(P==="PUSH"?t.history.push(Ce,Ce.state):P==="REPLACE"&&t.history.replace(Ce,Ce.state));let Qt;if(P==="POP"){let vn=E.get(k.location.pathname);vn&&vn.has(Ce.pathname)?Qt={currentLocation:k.location,nextLocation:Ce}:E.has(Ce.pathname)&&(Qt={currentLocation:Ce,nextLocation:k.location})}else if(_){let vn=E.get(k.location.pathname);vn?vn.add(Ce.pathname):(vn=new Set([Ce.pathname]),E.set(k.location.pathname,vn)),Qt={currentLocation:k.location,nextLocation:Ce}}ce(oe(B({},ze),{actionData:Rt,loaderData:Bt,historyAction:P,location:Ce,initialized:!0,navigation:WP,revalidation:"idle",restoreScrollPosition:_t(Ce,ze.matches||k.matches),preventScrollReset:Ht,blockers:tn}),{viewTransitionOpts:Qt,flushSync:Qe===!0}),P="POP",M=!1,_=!1,F=!1,L=!1,V==null||V.resolve(),V=null}function Ae(Ce,ze){return te(this,null,function*(){if(typeof Ce=="number"){t.history.go(Ce);return}let Qe=aI(k.location,k.matches,l,Ce,ze==null?void 0:ze.fromRouteId,ze==null?void 0:ze.relative),{path:gt,submission:Rt,error:Bt}=Hz(!1,Qe,ze),tn=k.location,Ht=Ab(k.location,gt,ze&&ze.state);Ht=B(B({},Ht),t.history.encodeLocation(Ht));let Qt=ze&&ze.replace!=null?ze.replace:void 0,Vt="PUSH";Qt===!0?Vt="REPLACE":Qt===!1||Rt!=null&&_a(Rt.formMethod)&&Rt.formAction===k.location.pathname+k.location.search&&(Vt="REPLACE");let pn=ze&&"preventScrollReset"in ze?ze.preventScrollReset===!0:void 0,vn=(ze&&ze.flushSync)===!0,Wn=vt({currentLocation:tn,nextLocation:Ht,historyAction:Vt});if(Wn){st(Wn,{state:"blocked",location:Ht,proceed(){st(Wn,{state:"proceeding",proceed:void 0,reset:void 0,location:Ht}),Ae(Ce,ze)},reset(){let tr=new Map(k.blockers);tr.set(Wn,cy),ce({blockers:tr})}});return}yield ee(Vt,Ht,{submission:Rt,pendingError:Bt,preventScrollReset:pn,replace:ze&&ze.replace,enableViewTransition:ze&&ze.viewTransition,flushSync:vn})})}function Ee(){V||(V=tke()),Me(),ce({revalidation:"loading"});let Ce=V.promise;return k.navigation.state==="submitting"?Ce:k.navigation.state==="idle"?(ee(k.historyAction,k.location,{startUninterruptedRevalidation:!0}),Ce):(ee(P||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation,enableViewTransition:_===!0}),Ce)}function ee(Ce,ze,Qe){return te(this,null,function*(){T&&T.abort(),T=null,P=Ce,F=(Qe&&Qe.startUninterruptedRevalidation)===!0,ft(k.location,k.matches),M=(Qe&&Qe.preventScrollReset)===!0,_=(Qe&&Qe.enableViewTransition)===!0;let gt=a||s,Rt=Qe&&Qe.overrideNavigation,Bt=Qe!=null&&Qe.initialHydration&&k.matches&&k.matches.length>0&&!x?k.matches:xf(gt,ze,l),tn=(Qe&&Qe.flushSync)===!0;if(Bt&&k.initialized&&!L&&KRe(k.location,ze)&&!(Qe&&Qe.submission&&_a(Qe.submission.formMethod))){xe(ze,{matches:Bt},{flushSync:tn});return}let Ht=lt(Bt,gt,ze.pathname);if(Ht.active&&Ht.matches&&(Bt=Ht.matches),!Bt){let{error:hr,notFoundMatches:Jn,route:xn}=Fe(ze.pathname);xe(ze,{matches:Jn,loaderData:{},errors:{[xn.id]:hr}},{flushSync:tn});return}T=new AbortController;let Qt=gg(t.history,ze,T.signal,Qe&&Qe.submission),Vt=new Wz(t.unstable_getContext?yield t.unstable_getContext():void 0),pn;if(Qe&&Qe.pendingError)pn=[ip(Bt).route.id,{type:"error",error:Qe.pendingError}];else if(Qe&&Qe.submission&&_a(Qe.submission.formMethod)){let hr=yield Oe(Qt,ze,Qe.submission,Bt,Vt,Ht.active,Qe&&Qe.initialHydration===!0,{replace:Qe.replace,flushSync:tn});if(hr.shortCircuited)return;if(hr.pendingActionResult){let[Jn,xn]=hr.pendingActionResult;if(Sa(xn)&&jv(xn.error)&&xn.error.status===404){T=null,xe(ze,{matches:hr.matches,loaderData:{},errors:{[Jn]:xn.error}});return}}Bt=hr.matches||Bt,pn=hr.pendingActionResult,Rt=$P(ze,Qe.submission),tn=!1,Ht.active=!1,Qt=gg(t.history,Qt.url,Qt.signal)}let{shortCircuited:vn,matches:Wn,loaderData:tr,errors:qr}=yield le(Qt,ze,Bt,Vt,Ht.active,Rt,Qe&&Qe.submission,Qe&&Qe.fetcherSubmission,Qe&&Qe.replace,Qe&&Qe.initialHydration===!0,tn,pn);vn||(T=null,xe(ze,oe(B({matches:Wn||Bt},t8(pn)),{loaderData:tr,errors:qr})))})}function Oe(Qt,Vt,pn,vn,Wn,tr,qr){return te(this,arguments,function*(Ce,ze,Qe,gt,Rt,Bt,tn,Ht={}){Me();let hr=QRe(ze,Qe);if(ce({navigation:hr},{flushSync:Ht.flushSync===!0}),Bt){let Te=yield Lt(gt,ze.pathname,Ce.signal);if(Te.type==="aborted")return{shortCircuited:!0};if(Te.type==="error"){let Je=ip(Te.partialMatches).route.id;return{matches:Te.partialMatches,pendingActionResult:[Je,{type:"error",error:Te.error}]}}else if(Te.matches)gt=Te.matches;else{let{notFoundMatches:Je,error:ae,route:Le}=Fe(ze.pathname);return{matches:Je,pendingActionResult:[Le.id,{type:"error",error:ae}]}}}let Jn,xn=Wy(gt,ze);if(!xn.route.action&&!xn.route.lazy)Jn={type:"error",error:rl(405,{method:Ce.method,pathname:ze.pathname,routeId:xn.route.id})};else{let Te=cv(i,o,Ce,gt,xn,tn?[]:r,Rt),Je=yield ve(Ce,Te,Rt,null);if(Jn=Je[xn.route.id],!Jn){for(let ae of gt)if(Je[ae.route.id]){Jn=Je[ae.route.id];break}}if(Ce.signal.aborted)return{shortCircuited:!0}}if(pp(Jn)){let Te;return Ht&&Ht.replace!=null?Te=Ht.replace:Te=Qz(Jn.response.headers.get("Location"),new URL(Ce.url),l)===k.location.pathname+k.location.search,yield W(Ce,Jn,!0,{submission:Qe,replace:Te}),{shortCircuited:!0}}if(Sa(Jn)){let Te=ip(gt,xn.route.id);return(Ht&&Ht.replace)!==!0&&(P="PUSH"),{matches:gt,pendingActionResult:[Te.route.id,Jn]}}return{matches:gt,pendingActionResult:[xn.route.id,Jn]}})}function le(Ce,ze,Qe,gt,Rt,Bt,tn,Ht,Qt,Vt,pn,vn){return te(this,null,function*(){let Wn=Bt||$P(ze,tn),tr=tn||Ht||i8(Wn),qr=!F&&!Vt;if(Rt){if(qr){let Wt=me(vn);ce(B({navigation:Wn},Wt!==void 0?{actionData:Wt}:{}),{flushSync:pn})}let Mt=yield Lt(Qe,ze.pathname,Ce.signal);if(Mt.type==="aborted")return{shortCircuited:!0};if(Mt.type==="error"){let Wt=ip(Mt.partialMatches).route.id;return{matches:Mt.partialMatches,loaderData:{},errors:{[Wt]:Mt.error}}}else if(Mt.matches)Qe=Mt.matches;else{let{error:Wt,notFoundMatches:mn,route:gn}=Fe(ze.pathname);return{matches:mn,loaderData:{},errors:{[gn.id]:Wt}}}}let hr=a||s,{dsMatches:Jn,revalidatingFetchers:xn}=Gz(Ce,gt,i,o,t.history,k,Qe,tr,ze,Vt?[]:r,Vt===!0,L,N,G,$,q,hr,l,vn);if(j=++H,!t.dataStrategy&&!Jn.some(Mt=>Mt.shouldLoad)&&xn.length===0){let Mt=Ie();return xe(ze,B(B({matches:Qe,loaderData:{},errors:vn&&Sa(vn[1])?{[vn[0]]:vn[1].error}:null},t8(vn)),Mt?{fetchers:new Map(k.fetchers)}:{}),{flushSync:pn}),{shortCircuited:!0}}if(qr){let Mt={};if(!Rt){Mt.navigation=Wn;let Wt=me(vn);Wt!==void 0&&(Mt.actionData=Wt)}xn.length>0&&(Mt.fetchers=ne(xn)),ce(Mt,{flushSync:pn})}xn.forEach(Mt=>{be(Mt.key),Mt.controller&&U.set(Mt.key,Mt.controller)});let Te=()=>xn.forEach(Mt=>be(Mt.key));T&&T.signal.addEventListener("abort",Te);let{loaderResults:Je,fetcherResults:ae}=yield ue(Jn,xn,Ce,gt);if(Ce.signal.aborted)return{shortCircuited:!0};T&&T.signal.removeEventListener("abort",Te),xn.forEach(Mt=>U.delete(Mt.key));let Le=kS(Je);if(Le)return yield W(Ce,Le.result,!0,{replace:Qt}),{shortCircuited:!0};if(Le=kS(ae),Le)return q.add(Le.key),yield W(Ce,Le.result,!0,{replace:Qt}),{shortCircuited:!0};let{loaderData:et,errors:Ke}=Jz(k,Qe,Je,vn,xn,ae);Vt&&k.errors&&(Ke=B(B({},k.errors),Ke));let We=Ie(),wt=Ve(j),kt=We||wt||xn.length>0;return B({matches:Qe,loaderData:et,errors:Ke},kt?{fetchers:new Map(k.fetchers)}:{})})}function me(Ce){if(Ce&&!Sa(Ce[1]))return{[Ce[0]]:Ce[1].data};if(k.actionData)return Object.keys(k.actionData).length===0?null:k.actionData}function ne(Ce){return Ce.forEach(ze=>{let Qe=k.fetchers.get(ze.key),gt=uy(void 0,Qe?Qe.data:void 0);k.fetchers.set(ze.key,gt)}),new Map(k.fetchers)}function se(Ce,ze,Qe,gt){return te(this,null,function*(){be(Ce);let Rt=(gt&&gt.flushSync)===!0,Bt=a||s,tn=aI(k.location,k.matches,l,Qe,ze,gt==null?void 0:gt.relative),Ht=xf(Bt,tn,l),Qt=lt(Ht,Bt,tn);if(Qt.active&&Qt.matches&&(Ht=Qt.matches),!Ht){je(Ce,ze,rl(404,{pathname:tn}),{flushSync:Rt});return}let{path:Vt,submission:pn,error:vn}=Hz(!0,tn,gt);if(vn){je(Ce,ze,vn,{flushSync:Rt});return}let Wn=Wy(Ht,Vt),tr=new Wz(t.unstable_getContext?yield t.unstable_getContext():void 0),qr=(gt&&gt.preventScrollReset)===!0;if(pn&&_a(pn.formMethod)){yield ge(Ce,ze,Vt,Wn,Ht,tr,Qt.active,Rt,qr,pn);return}$.set(Ce,{routeId:ze,path:Vt}),yield Q(Ce,ze,Vt,Wn,Ht,tr,Qt.active,Rt,qr,pn)})}function ge(Ce,ze,Qe,gt,Rt,Bt,tn,Ht,Qt,Vt){return te(this,null,function*(){Me(),$.delete(Ce);function pn(un){if(!un.route.action&&!un.route.lazy){let $n=rl(405,{method:Vt.formMethod,pathname:Qe,routeId:ze});return je(Ce,ze,$n,{flushSync:Ht}),!0}return!1}if(!tn&&pn(gt))return;let vn=k.fetchers.get(Ce);Pe(Ce,ZRe(Vt,vn),{flushSync:Ht});let Wn=new AbortController,tr=gg(t.history,Qe,Wn.signal,Vt);if(tn){let un=yield Lt(Rt,Qe,tr.signal,Ce);if(un.type==="aborted")return;if(un.type==="error"){je(Ce,ze,un.error,{flushSync:Ht});return}else if(un.matches){if(Rt=un.matches,gt=Wy(Rt,Qe),pn(gt))return}else{je(Ce,ze,rl(404,{pathname:Qe}),{flushSync:Ht});return}}U.set(Ce,Wn);let qr=H,hr=cv(i,o,tr,Rt,gt,r,Bt),xn=(yield ve(tr,hr,Bt,Ce))[gt.route.id];if(tr.signal.aborted){U.get(Ce)===Wn&&U.delete(Ce);return}if(G.has(Ce)){if(pp(xn)||Sa(xn)){Pe(Ce,cf(void 0));return}}else{if(pp(xn))if(U.delete(Ce),j>qr){Pe(Ce,cf(void 0));return}else return q.add(Ce),Pe(Ce,uy(Vt)),W(tr,xn,!1,{fetcherSubmission:Vt,preventScrollReset:Qt});if(Sa(xn)){je(Ce,ze,xn.error);return}}let Te=k.navigation.location||k.location,Je=gg(t.history,Te,Wn.signal),ae=a||s,Le=k.navigation.state!=="idle"?xf(ae,k.navigation.location,l):k.matches;dr(Le,"Didn't find any matches after fetcher action");let et=++H;z.set(Ce,et);let Ke=uy(Vt,xn.data);k.fetchers.set(Ce,Ke);let{dsMatches:We,revalidatingFetchers:wt}=Gz(Je,Bt,i,o,t.history,k,Le,Vt,Te,r,!1,L,N,G,$,q,ae,l,[gt.route.id,xn]);wt.filter(un=>un.key!==Ce).forEach(un=>{let $n=un.key,br=k.fetchers.get($n),_e=uy(void 0,br?br.data:void 0);k.fetchers.set($n,_e),be($n),un.controller&&U.set($n,un.controller)}),ce({fetchers:new Map(k.fetchers)});let kt=()=>wt.forEach(un=>be(un.key));Wn.signal.addEventListener("abort",kt);let{loaderResults:Mt,fetcherResults:Wt}=yield ue(We,wt,Je,Bt);if(Wn.signal.aborted)return;Wn.signal.removeEventListener("abort",kt),z.delete(Ce),U.delete(Ce),wt.forEach(un=>U.delete(un.key));let mn=kS(Mt);if(mn)return W(Je,mn.result,!1,{preventScrollReset:Qt});if(mn=kS(Wt),mn)return q.add(mn.key),W(Je,mn.result,!1,{preventScrollReset:Qt});let{loaderData:gn,errors:cn}=Jz(k,Le,Mt,void 0,wt,Wt);if(k.fetchers.has(Ce)){let un=cf(xn.data);k.fetchers.set(Ce,un)}Ve(et),k.navigation.state==="loading"&&et>j?(dr(P,"Expected pending action"),T&&T.abort(),xe(k.navigation.location,{matches:Le,loaderData:gn,errors:cn,fetchers:new Map(k.fetchers)})):(ce({errors:cn,loaderData:e8(k.loaderData,gn,Le,cn),fetchers:new Map(k.fetchers)}),L=!1)})}function Q(Ce,ze,Qe,gt,Rt,Bt,tn,Ht,Qt,Vt){return te(this,null,function*(){let pn=k.fetchers.get(Ce);Pe(Ce,uy(Vt,pn?pn.data:void 0),{flushSync:Ht});let vn=new AbortController,Wn=gg(t.history,Qe,vn.signal);if(tn){let xn=yield Lt(Rt,Qe,Wn.signal,Ce);if(xn.type==="aborted")return;if(xn.type==="error"){je(Ce,ze,xn.error,{flushSync:Ht});return}else if(xn.matches)Rt=xn.matches,gt=Wy(Rt,Qe);else{je(Ce,ze,rl(404,{pathname:Qe}),{flushSync:Ht});return}}U.set(Ce,vn);let tr=H,qr=cv(i,o,Wn,Rt,gt,r,Bt),Jn=(yield ve(Wn,qr,Bt,Ce))[gt.route.id];if(U.get(Ce)===vn&&U.delete(Ce),!Wn.signal.aborted){if(G.has(Ce)){Pe(Ce,cf(void 0));return}if(pp(Jn))if(j>tr){Pe(Ce,cf(void 0));return}else{q.add(Ce),yield W(Wn,Jn,!1,{preventScrollReset:Qt});return}if(Sa(Jn)){je(Ce,ze,Jn.error);return}Pe(Ce,cf(Jn.data))}})}function W(Ht,Qt,Vt){return te(this,arguments,function*(Ce,ze,Qe,{submission:gt,fetcherSubmission:Rt,preventScrollReset:Bt,replace:tn}={}){ze.response.headers.has("X-Remix-Revalidate")&&(L=!0);let pn=ze.response.headers.get("Location");dr(pn,"Expected a Location header on the redirect Response"),pn=Qz(pn,new URL(Ce.url),l);let vn=Ab(k.location,pn,{_isRedirect:!0});if(n){let xn=!1;if(ze.response.headers.has("X-Remix-Reload-Document"))xn=!0;else if(_3.test(pn)){const Te=t.history.createURL(pn);xn=Te.origin!==e.location.origin||_l(Te.pathname,l)==null}if(xn){tn?e.location.replace(pn):e.location.assign(pn);return}}T=null;let Wn=tn===!0||ze.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:tr,formAction:qr,formEncType:hr}=k.navigation;!gt&&!Rt&&tr&&qr&&hr&&(gt=i8(k.navigation));let Jn=gt||Rt;if(FRe.has(ze.response.status)&&Jn&&_a(Jn.formMethod))yield ee(Wn,vn,{submission:oe(B({},Jn),{formAction:pn}),preventScrollReset:Bt||M,enableViewTransition:Qe?_:void 0});else{let xn=$P(vn,gt);yield ee(Wn,vn,{overrideNavigation:xn,fetcherSubmission:Rt,preventScrollReset:Bt||M,enableViewTransition:Qe?_:void 0})}})}function ve(Ce,ze,Qe,gt){return te(this,null,function*(){let Rt,Bt={};try{Rt=yield WRe(c,Ce,ze,gt,Qe,!1)}catch(tn){return ze.filter(Ht=>Ht.shouldLoad).forEach(Ht=>{Bt[Ht.route.id]={type:"error",error:tn}}),Bt}for(let[tn,Ht]of Object.entries(Rt))if(YRe(Ht)){let Qt=Ht.result;Bt[tn]={type:"redirect",response:GRe(Qt,Ce,tn,ze,l)}}else Bt[tn]=yield HRe(Ht);return Bt})}function ue(Ce,ze,Qe,gt){return te(this,null,function*(){let Rt=ve(Qe,Ce,gt,null),Bt=Promise.all(ze.map(Qt=>te(this,null,function*(){if(Qt.matches&&Qt.match&&Qt.request&&Qt.controller){let pn=(yield ve(Qt.request,Qt.matches,gt,Qt.key))[Qt.match.route.id];return{[Qt.key]:pn}}else return Promise.resolve({[Qt.key]:{type:"error",error:rl(404,{pathname:Qt.path})}})}))),tn=yield Rt,Ht=(yield Bt).reduce((Qt,Vt)=>Object.assign(Qt,Vt),{});return{loaderResults:tn,fetcherResults:Ht}})}function Me(){L=!0,$.forEach((Ce,ze)=>{U.has(ze)&&N.add(ze),be(ze)})}function Pe(Ce,ze,Qe={}){k.fetchers.set(Ce,ze),ce({fetchers:new Map(k.fetchers)},{flushSync:(Qe&&Qe.flushSync)===!0})}function je(Ce,ze,Qe,gt={}){let Rt=ip(k.matches,ze);De(Ce),ce({errors:{[Rt.route.id]:Qe},fetchers:new Map(k.fetchers)},{flushSync:(gt&&gt.flushSync)===!0})}function ke(Ce){return K.set(Ce,(K.get(Ce)||0)+1),G.has(Ce)&&G.delete(Ce),k.fetchers.get(Ce)||ORe}function De(Ce){let ze=k.fetchers.get(Ce);U.has(Ce)&&!(ze&&ze.state==="loading"&&z.has(Ce))&&be(Ce),$.delete(Ce),z.delete(Ce),q.delete(Ce),G.delete(Ce),N.delete(Ce),k.fetchers.delete(Ce)}function nt(Ce){let ze=(K.get(Ce)||0)-1;ze<=0?(K.delete(Ce),G.add(Ce)):K.set(Ce,ze),ce({fetchers:new Map(k.fetchers)})}function be(Ce){let ze=U.get(Ce);ze&&(ze.abort(),U.delete(Ce))}function Ne(Ce){for(let ze of Ce){let Qe=ke(ze),gt=cf(Qe.data);k.fetchers.set(ze,gt)}}function Ie(){let Ce=[],ze=!1;for(let Qe of q){let gt=k.fetchers.get(Qe);dr(gt,`Expected fetcher: ${Qe}`),gt.state==="loading"&&(q.delete(Qe),Ce.push(Qe),ze=!0)}return Ne(Ce),ze}function Ve(Ce){let ze=[];for(let[Qe,gt]of z)if(gt<Ce){let Rt=k.fetchers.get(Qe);dr(Rt,`Expected fetcher: ${Qe}`),Rt.state==="loading"&&(be(Qe),z.delete(Qe),ze.push(Qe))}return Ne(ze),ze.length>0}function Ue(Ce,ze){let Qe=k.blockers.get(Ce)||cy;return Y.get(Ce)!==ze&&Y.set(Ce,ze),Qe}function tt(Ce){k.blockers.delete(Ce),Y.delete(Ce)}function st(Ce,ze){let Qe=k.blockers.get(Ce)||cy;dr(Qe.state==="unblocked"&&ze.state==="blocked"||Qe.state==="blocked"&&ze.state==="blocked"||Qe.state==="blocked"&&ze.state==="proceeding"||Qe.state==="blocked"&&ze.state==="unblocked"||Qe.state==="proceeding"&&ze.state==="unblocked",`Invalid blocker state transition: ${Qe.state} -> ${ze.state}`);let gt=new Map(k.blockers);gt.set(Ce,ze),ce({blockers:gt})}function vt({currentLocation:Ce,nextLocation:ze,historyAction:Qe}){if(Y.size===0)return;Y.size>1&&Gi(!1,"A router only supports one blocker at a time");let gt=Array.from(Y.entries()),[Rt,Bt]=gt[gt.length-1],tn=k.blockers.get(Rt);if(!(tn&&tn.state==="proceeding")&&Bt({currentLocation:Ce,nextLocation:ze,historyAction:Qe}))return Rt}function Fe(Ce){let ze=rl(404,{pathname:Ce}),Qe=a||s,{matches:gt,route:Rt}=n8(Qe);return{notFoundMatches:gt,route:Rt,error:ze}}function ct(Ce,ze,Qe){if(p=Ce,v=ze,b=Qe||null,!m&&k.navigation===WP){m=!0;let gt=_t(k.location,k.matches);gt!=null&&ce({restoreScrollPosition:gt})}return()=>{p=null,v=null,b=null}}function Ye(Ce,ze){return b&&b(Ce,ze.map(gt=>fRe(gt,k.loaderData)))||Ce.key}function ft(Ce,ze){if(p&&v){let Qe=Ye(Ce,ze);p[Qe]=v()}}function _t(Ce,ze){if(p){let Qe=Ye(Ce,ze),gt=p[Qe];if(typeof gt=="number")return gt}return null}function lt(Ce,ze,Qe){if(t.patchRoutesOnNavigation)if(Ce){if(Object.keys(Ce[0].params).length>0)return{active:!0,matches:cE(ze,Qe,l,!0)}}else return{active:!0,matches:cE(ze,Qe,l,!0)||[]};return{active:!1,matches:null}}function Lt(Ce,ze,Qe,gt){return te(this,null,function*(){if(!t.patchRoutesOnNavigation)return{type:"success",matches:Ce};let Rt=Ce;for(;;){let Bt=a==null,tn=a||s,Ht=o;try{yield t.patchRoutesOnNavigation({signal:Qe,path:ze,matches:Rt,fetcherKey:gt,patch:(pn,vn)=>{Qe.aborted||qz(pn,vn,tn,Ht,i)}})}catch(pn){return{type:"error",error:pn,partialMatches:Rt}}finally{Bt&&!Qe.aborted&&(s=[...s])}if(Qe.aborted)return{type:"aborted"};let Qt=xf(tn,ze,l);if(Qt)return{type:"success",matches:Qt};let Vt=cE(tn,ze,l,!0);if(!Vt||Rt.length===Vt.length&&Rt.every((pn,vn)=>pn.route.id===Vt[vn].route.id))return{type:"success",matches:null};Rt=Vt}})}function nn(Ce){o={},a=MC(Ce,i,void 0,o)}function sn(Ce,ze){let Qe=a==null;qz(Ce,ze,a||s,o,i),Qe&&(s=[...s],ce({}))}return D={get basename(){return l},get future(){return u},get state(){return k},get routes(){return s},get window(){return e},initialize:re,subscribe:pe,enableScrollRestoration:ct,navigate:Ae,fetch:se,revalidate:Ee,createHref:Ce=>t.history.createHref(Ce),encodeLocation:Ce=>t.history.encodeLocation(Ce),getFetcher:ke,deleteFetcher:nt,dispose:fe,getBlocker:Ue,deleteBlocker:tt,patchRoutes:sn,_internalFetchControllers:U,_internalSetRoutes:nn},D}function BRe(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function aI(t,e,n,r,i,o){let s,a;if(i){s=[];for(let c of e)if(s.push(c),c.route.id===i){a=c;break}}else s=e,a=e[e.length-1];let l=AT(r||".",CT(s),_l(t.pathname,n)||t.pathname,o==="path");if(r==null&&(l.search=t.search,l.hash=t.hash),(r==null||r===""||r===".")&&a){let c=E3(l.search);if(a.route.index&&!c)l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index";else if(!a.route.index&&c){let u=new URLSearchParams(l.search),d=u.getAll("index");u.delete("index"),d.filter(p=>p).forEach(p=>u.append("index",p));let f=u.toString();l.search=f?`?${f}`:""}}return n!=="/"&&(l.pathname=l.pathname==="/"?n:eu([n,l.pathname])),eh(l)}function Hz(t,e,n){if(!n||!BRe(n))return{path:e};if(n.formMethod&&!XRe(n.formMethod))return{path:e,error:rl(405,{method:n.formMethod})};let r=()=>({path:e,error:rl(400,{type:"invalid-body"})}),o=(n.formMethod||"get").toUpperCase(),s=vQ(e);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!_a(o))return r();let d=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((f,[p,b])=>`${f}${p}=${b}
`,""):String(n.body);return{path:e,submission:{formMethod:o,formAction:s,formEncType:n.formEncType,formData:void 0,json:void 0,text:d}}}else if(n.formEncType==="application/json"){if(!_a(o))return r();try{let d=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:e,submission:{formMethod:o,formAction:s,formEncType:n.formEncType,formData:void 0,json:d,text:void 0}}}catch(d){return r()}}}dr(typeof FormData=="function","FormData is not available in this environment");let a,l;if(n.formData)a=uI(n.formData),l=n.formData;else if(n.body instanceof FormData)a=uI(n.body),l=n.body;else if(n.body instanceof URLSearchParams)a=n.body,l=Zz(a);else if(n.body==null)a=new URLSearchParams,l=new FormData;else try{a=new URLSearchParams(n.body),l=Zz(a)}catch(d){return r()}let c={formMethod:o,formAction:s,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:l,json:void 0,text:void 0};if(_a(c.formMethod))return{path:e,submission:c};let u=dh(e);return t&&u.search&&E3(u.search)&&a.append("index",""),u.search=`?${a}`,{path:eh(u),submission:c}}function Gz(t,e,n,r,i,o,s,a,l,c,u,d,f,p,b,v,m,g,x){var R;let w=x?Sa(x[1])?x[1].error:x[1].data:void 0,S=i.createURL(o.location),D=i.createURL(l),k;if(u&&o.errors){let F=Object.keys(o.errors)[0];k=s.findIndex(L=>L.route.id===F)}else if(x&&Sa(x[1])){let F=x[0];k=s.findIndex(L=>L.route.id===F)-1}let P=x?x[1].statusCode:void 0,M=P&&P>=400,T=oe(B({currentUrl:S,currentParams:((R=o.matches[0])==null?void 0:R.params)||{},nextUrl:D,nextParams:s[0].params},a),{actionResult:w,actionStatus:P}),_=s.map((F,L)=>{let{route:N}=F,U=null;if(k!=null&&L>k?U=!1:N.lazy?U=!0:N.loader==null?U=!1:u?U=lI(N,o.loaderData,o.errors):jRe(o.loaderData,o.matches[L],F)&&(U=!0),U!==null)return cI(n,r,t,F,c,e,U);let H=M?!1:d||S.pathname+S.search===D.pathname+D.search||S.search!==D.search||URe(o.matches[L],F),j=oe(B({},T),{defaultShouldRevalidate:H}),z=RC(F,j);return cI(n,r,t,F,c,e,z,j)}),E=[];return b.forEach((F,L)=>{if(u||!s.some($=>$.route.id===F.routeId)||p.has(L))return;let N=xf(m,F.path,g);if(!N){E.push({key:L,routeId:F.routeId,path:F.path,matches:null,match:null,request:null,controller:null});return}if(v.has(L))return;let U=o.fetchers.get(L),H=Wy(N,F.path),j=new AbortController,z=gg(i,F.path,j.signal),q=null;if(f.has(L))f.delete(L),q=cv(n,r,z,N,H,c,e);else if(U&&U.state!=="idle"&&U.data===void 0)d&&(q=cv(n,r,z,N,H,c,e));else{let $=oe(B({},T),{defaultShouldRevalidate:M?!1:d});RC(H,$)&&(q=cv(n,r,z,N,H,c,e,$))}q&&E.push({key:L,routeId:F.routeId,path:F.path,matches:q,match:H,request:z,controller:j})}),{dsMatches:_,revalidatingFetchers:E}}function lI(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function jRe(t,e,n){let r=!e||n.route.id!==e.route.id,i=!t.hasOwnProperty(n.route.id);return r||i}function URe(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function RC(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function qz(t,e,n,r,i){let o;if(t){let l=r[t];dr(l,`No route found to patch children into: routeId = ${t}`),l.children||(l.children=[]),o=l.children}else o=n;let s=e.filter(l=>!o.some(c=>fQ(l,c))),a=MC(s,i,[t||"_","patch",String((o==null?void 0:o.length)||"0")],r);o.push(...a)}function fQ(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(o=>fQ(n,o))}):!1}var Kz=new WeakMap,hQ=({key:t,route:e,manifest:n,mapRouteProperties:r})=>{let i=n[e.id];if(dr(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let o=i.lazy[t];if(!o)return;let s=Kz.get(i);s||(s={},Kz.set(i,s));let a=s[t];if(a)return a;let l=te(rt,null,function*(){let c=lRe(t),d=i[t]!==void 0&&t!=="hasErrorBoundary";if(c)Gi(!c,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),s[t]=Promise.resolve();else if(d)Gi(!1,`Route "${i.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let f=yield o();f!=null&&(Object.assign(i,{[t]:f}),Object.assign(i,r(i)))}typeof i.lazy=="object"&&(i.lazy[t]=void 0,Object.values(i.lazy).every(f=>f===void 0)&&(i.lazy=void 0))});return s[t]=l,l},Yz=new WeakMap;function zRe(t,e,n,r,i){let o=n[t.id];if(dr(o,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let u=Yz.get(o);if(u)return{lazyRoutePromise:u,lazyHandlerPromise:u};let d=te(this,null,function*(){dr(typeof t.lazy=="function","No lazy route function found");let f=yield t.lazy(),p={};for(let b in f){let v=f[b];if(v===void 0)continue;let m=uRe(b),x=o[b]!==void 0&&b!=="hasErrorBoundary";m?Gi(!m,"Route property "+b+" is not a supported property to be returned from a lazy route function. This property will be ignored."):x?Gi(!x,`Route "${o.id}" has a static property "${b}" defined but its lazy function is also returning a value for this property. The lazy route property "${b}" will be ignored.`):p[b]=v}Object.assign(o,p),Object.assign(o,oe(B({},r(o)),{lazy:void 0}))});return Yz.set(o,d),d.catch(()=>{}),{lazyRoutePromise:d,lazyHandlerPromise:d}}let s=Object.keys(t.lazy),a=[],l;for(let u of s){if(i&&i.includes(u))continue;let d=hQ({key:u,route:t,manifest:n,mapRouteProperties:r});d&&(a.push(d),u===e&&(l=d))}let c=a.length>0?Promise.all(a).then(()=>{}):void 0;return c==null||c.catch(()=>{}),l==null||l.catch(()=>{}),{lazyRoutePromise:c,lazyHandlerPromise:l}}function Xz(t){return te(this,null,function*(){let e=t.matches.filter(i=>i.shouldLoad),n={};return(yield Promise.all(e.map(i=>i.resolve()))).forEach((i,o)=>{n[e[o].route.id]=i}),n})}function VRe(t){return te(this,null,function*(){return t.matches.some(e=>e.route.unstable_middleware)?pQ(t,!1,()=>Xz(t),(e,n)=>({[n]:{type:"error",result:e}})):Xz(t)})}function pQ(t,e,n,r){return te(this,null,function*(){let{matches:i,request:o,params:s,context:a}=t,l={handlerResult:void 0};try{let c=i.flatMap(d=>d.route.unstable_middleware?d.route.unstable_middleware.map(f=>[d.route.id,f]):[]),u=yield mQ({request:o,params:s,context:a},c,e,l,n);return e?u:l.handlerResult}catch(c){if(!l.middlewareError)throw c;let u=yield r(l.middlewareError.error,l.middlewareError.routeId);return l.handlerResult?Object.assign(l.handlerResult,u):u}})}function mQ(t,e,n,r,i,o=0){return te(this,null,function*(){let{request:s}=t;if(s.signal.aborted)throw s.signal.reason?s.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${s.method} ${s.url}`);let a=e[o];if(!a)return r.handlerResult=yield i(),r.handlerResult;let[l,c]=a,u=!1,d,f=()=>te(this,null,function*(){if(u)throw new Error("You may only call `next()` once per middleware");u=!0,yield mQ(t,e,n,r,i,o+1)});try{let p=yield c({request:t.request,params:t.params,context:t.context},f);return u?p===void 0?d:p:f()}catch(p){throw r.middlewareError?r.middlewareError.error!==p&&(r.middlewareError={routeId:l,error:p}):r.middlewareError={routeId:l,error:p},p}})}function gQ(t,e,n,r,i){let o=hQ({key:"unstable_middleware",route:r.route,manifest:e,mapRouteProperties:t}),s=zRe(r.route,_a(n.method)?"action":"loader",e,t,i);return{middleware:o,route:s.lazyRoutePromise,handler:s.lazyHandlerPromise}}function cI(t,e,n,r,i,o,s,a=null){let l=!1,c=gQ(t,e,n,r,i);return oe(B({},r),{_lazyPromises:c,shouldLoad:s,unstable_shouldRevalidateArgs:a,unstable_shouldCallHandler(u){return l=!0,a?typeof u=="boolean"?RC(r,oe(B({},a),{defaultShouldRevalidate:u})):RC(r,a):s},resolve(u){return l||s||u&&n.method==="GET"&&(r.route.lazy||r.route.loader)?$Re({request:n,match:r,lazyHandlerPromise:c==null?void 0:c.handler,lazyRoutePromise:c==null?void 0:c.route,handlerOverride:u,scopedContext:o}):Promise.resolve({type:"data",result:void 0})}})}function cv(t,e,n,r,i,o,s,a=null){return r.map(l=>l.route.id!==i.route.id?oe(B({},l),{shouldLoad:!1,unstable_shouldRevalidateArgs:a,unstable_shouldCallHandler:()=>!1,_lazyPromises:gQ(t,e,n,l,o),resolve:()=>Promise.resolve({type:"data",result:void 0})}):cI(t,e,n,l,o,s,!0,a))}function WRe(t,e,n,r,i,o){return te(this,null,function*(){n.some(c=>{var u;return(u=c._lazyPromises)==null?void 0:u.middleware})&&(yield Promise.all(n.map(c=>{var u;return(u=c._lazyPromises)==null?void 0:u.middleware})));let s={request:e,params:n[0].params,context:i,matches:n},a=c=>{let u=s;return pQ(u,!1,()=>c(oe(B({},u),{fetcherKey:r,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}})),(d,f)=>({[f]:{type:"error",result:d}}))},l=yield t(oe(B({},s),{fetcherKey:r,unstable_runClientMiddleware:a}));try{yield Promise.all(n.flatMap(c=>{var u,d;return[(u=c._lazyPromises)==null?void 0:u.handler,(d=c._lazyPromises)==null?void 0:d.route]}))}catch(c){}return l})}function $Re(s){return te(this,arguments,function*({request:t,match:e,lazyHandlerPromise:n,lazyRoutePromise:r,handlerOverride:i,scopedContext:o}){let a,l,c=_a(t.method),u=c?"action":"loader",d=f=>{let p,b=new Promise((g,x)=>p=x);l=()=>p(),t.signal.addEventListener("abort",l);let v=g=>typeof f!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${u}" [routeId: ${e.route.id}]`)):f({request:t,params:e.params,context:o},...g!==void 0?[g]:[]),m=te(this,null,function*(){try{return{type:"data",result:yield i?i(x=>v(x)):v()}}catch(g){return{type:"error",result:g}}});return Promise.race([m,b])};try{let f=c?e.route.action:e.route.loader;if(n||r)if(f){let p,[b]=yield Promise.all([d(f).catch(v=>{p=v}),n,r]);if(p!==void 0)throw p;a=b}else{yield n;let p=c?e.route.action:e.route.loader;if(p)[a]=yield Promise.all([d(p),r]);else if(u==="action"){let b=new URL(t.url),v=b.pathname+b.search;throw rl(405,{method:t.method,pathname:v,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(f)a=yield d(f);else{let p=new URL(t.url),b=p.pathname+p.search;throw rl(404,{pathname:b})}}catch(f){return{type:"error",result:f}}finally{l&&t.signal.removeEventListener("abort",l)}return a})}function HRe(t){return te(this,null,function*(){var r,i,o,s,a,l;let{result:e,type:n}=t;if(yQ(e)){let c;try{let u=e.headers.get("Content-Type");u&&/\bapplication\/json\b/.test(u)?e.body==null?c=null:c=yield e.json():c=yield e.text()}catch(u){return{type:"error",error:u}}return n==="error"?{type:"error",error:new DC(e.status,e.statusText,c),statusCode:e.status,headers:e.headers}:{type:"data",data:c,statusCode:e.status,headers:e.headers}}return n==="error"?r8(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new DC(((o=e.init)==null?void 0:o.status)||500,void 0,e.data),statusCode:jv(e)?e.status:void 0,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:jv(e)?e.status:void 0}:r8(e)?{type:"data",data:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}})}function GRe(t,e,n,r,i){let o=t.headers.get("Location");if(dr(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!_3.test(o)){let s=r.slice(0,r.findIndex(a=>a.route.id===n)+1);o=aI(new URL(e.url),s,i,o),t.headers.set("Location",o)}return t}function Qz(t,e,n){if(_3.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),o=_l(i.pathname,n)!=null;if(i.origin===e.origin&&o)return i.pathname+i.search+i.hash}return t}function gg(t,e,n,r){let i=t.createURL(vQ(e)).toString(),o={signal:n};if(r&&_a(r.formMethod)){let{formMethod:s,formEncType:a}=r;o.method=s.toUpperCase(),a==="application/json"?(o.headers=new Headers({"Content-Type":a}),o.body=JSON.stringify(r.json)):a==="text/plain"?o.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?o.body=uI(r.formData):o.body=r.formData}return new Request(i,o)}function uI(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function Zz(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function qRe(t,e,n,r=!1,i=!1){let o={},s=null,a,l=!1,c={},u=n&&Sa(n[1])?n[1].error:void 0;return t.forEach(d=>{if(!(d.route.id in e))return;let f=d.route.id,p=e[f];if(dr(!pp(p),"Cannot handle redirect results in processLoaderData"),Sa(p)){let b=p.error;if(u!==void 0&&(b=u,u=void 0),s=s||{},i)s[f]=b;else{let v=ip(t,f);s[v.route.id]==null&&(s[v.route.id]=b)}r||(o[f]=dQ),l||(l=!0,a=jv(p.error)?p.error.status:500),p.headers&&(c[f]=p.headers)}else o[f]=p.data,p.statusCode&&p.statusCode!==200&&!l&&(a=p.statusCode),p.headers&&(c[f]=p.headers)}),u!==void 0&&n&&(s={[n[0]]:u},o[n[0]]=void 0),{loaderData:o,errors:s,statusCode:a||200,loaderHeaders:c}}function Jz(t,e,n,r,i,o){let{loaderData:s,errors:a}=qRe(e,n,r);return i.filter(l=>!l.matches||l.matches.some(c=>c.shouldLoad)).forEach(l=>{let{key:c,match:u,controller:d}=l,f=o[c];if(dr(f,"Did not find corresponding fetcher result"),!(d&&d.signal.aborted))if(Sa(f)){let p=ip(t.matches,u==null?void 0:u.route.id);a&&a[p.route.id]||(a=oe(B({},a),{[p.route.id]:f.error})),t.fetchers.delete(c)}else if(pp(f))dr(!1,"Unhandled fetcher revalidation redirect");else{let p=cf(f.data);t.fetchers.set(c,p)}}),{loaderData:s,errors:a}}function e8(t,e,n,r){let i=Object.entries(e).filter(([,o])=>o!==dQ).reduce((o,[s,a])=>(o[s]=a,o),{});for(let o of n){let s=o.route.id;if(!e.hasOwnProperty(s)&&t.hasOwnProperty(s)&&o.route.loader&&(i[s]=t[s]),r&&r.hasOwnProperty(s))break}return i}function t8(t){return t?Sa(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function ip(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function n8(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function rl(t,{pathname:e,routeId:n,method:r,type:i,message:o}={}){let s="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(s="Bad Request",r&&e&&n?a=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:i==="invalid-body"&&(a="Unable to encode submission body")):t===403?(s="Forbidden",a=`Route "${n}" does not match URL "${e}"`):t===404?(s="Not Found",a=`No route matches URL "${e}"`):t===405&&(s="Method Not Allowed",r&&e&&n?a=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:r&&(a=`Invalid request method "${r.toUpperCase()}"`)),new DC(t||500,s,new Error(a),!0)}function kS(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(pp(i))return{key:r,result:i}}}function vQ(t){let e=typeof t=="string"?dh(t):t;return eh(oe(B({},e),{hash:""}))}function KRe(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function YRe(t){return yQ(t.result)&&IRe.has(t.result.status)}function Sa(t){return t.type==="error"}function pp(t){return(t&&t.type)==="redirect"}function r8(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function yQ(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body!="undefined"}function XRe(t){return kRe.has(t.toUpperCase())}function _a(t){return DRe.has(t.toUpperCase())}function E3(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Wy(t,e){let n=typeof e=="string"?dh(e).search:e.search;if(t[t.length-1].route.index&&E3(n||""))return t[t.length-1];let r=lQ(t);return r[r.length-1]}function i8(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:o,json:s}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:e,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0};if(s!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:s,text:void 0}}}function $P(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function QRe(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function uy(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function ZRe(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function cf(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function JRe(t,e){try{let n=t.sessionStorage.getItem(uQ);if(n){let r=JSON.parse(n);for(let[i,o]of Object.entries(r||{}))o&&Array.isArray(o)&&e.set(i,new Set(o||[]))}}catch(n){}}function eke(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(uQ,JSON.stringify(n))}catch(r){Gi(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function tke(){let t,e,n=new Promise((r,i)=>{t=o=>te(this,null,function*(){r(o);try{yield n}catch(s){}}),e=o=>te(this,null,function*(){i(o);try{yield n}catch(s){}})});return{promise:n,resolve:t,reject:e}}var hm=A.createContext(null);hm.displayName="DataRouter";var Dw=A.createContext(null);Dw.displayName="DataRouterState";var C3=A.createContext({isTransitioning:!1});C3.displayName="ViewTransition";var xQ=A.createContext(new Map);xQ.displayName="Fetchers";var nke=A.createContext(null);nke.displayName="Await";var bc=A.createContext(null);bc.displayName="Navigation";var TT=A.createContext(null);TT.displayName="Location";var Pl=A.createContext({outlet:null,matches:[],isDataRoute:!1});Pl.displayName="Route";var A3=A.createContext(null);A3.displayName="RouteError";function rke(t,{relative:e}={}){dr(d0(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(bc),{hash:i,pathname:o,search:s}=Rw(t,{relative:e}),a=o;return n!=="/"&&(a=o==="/"?n:eu([n,o])),r.createHref({pathname:a,search:s,hash:i})}function d0(){return A.useContext(TT)!=null}function vs(){return dr(d0(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(TT).location}var bQ="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wQ(t){A.useContext(bc).static||A.useLayoutEffect(t)}function Fr(){let{isDataRoute:t}=A.useContext(Pl);return t?vke():ike()}function ike(){dr(d0(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(hm),{basename:e,navigator:n}=A.useContext(bc),{matches:r}=A.useContext(Pl),{pathname:i}=vs(),o=JSON.stringify(CT(r)),s=A.useRef(!1);return wQ(()=>{s.current=!0}),A.useCallback((l,c={})=>{if(Gi(s.current,bQ),!s.current)return;if(typeof l=="number"){n.go(l);return}let u=AT(l,JSON.parse(o),i,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:eu([e,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[e,n,o,i,t])}var SQ=A.createContext(null);function oke(){return A.useContext(SQ)}function ske(t){let e=A.useContext(Pl).outlet;return e&&A.createElement(SQ.Provider,{value:t},e)}function hu(){let{matches:t}=A.useContext(Pl),e=t[t.length-1];return e?e.params:{}}function Rw(t,{relative:e}={}){let{matches:n}=A.useContext(Pl),{pathname:r}=vs(),i=JSON.stringify(CT(n));return A.useMemo(()=>AT(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function ake(t,e,n,r){dr(d0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:o}=A.useContext(bc),{matches:s}=A.useContext(Pl),a=s[s.length-1],l=a?a.params:{},c=a?a.pathname:"/",u=a?a.pathnameBase:"/",d=a&&a.route;{let x=d&&d.path||"";EQ(c,!d||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let f=vs(),p;p=f;let b=p.pathname||"/",v=b;if(u!=="/"){let x=u.replace(/^\//,"").split("/");v="/"+b.replace(/^\//,"").split("/").slice(x.length).join("/")}let m=!o&&n&&n.matches&&n.matches.length>0?n.matches:xf(t,{pathname:v});return Gi(d||m!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Gi(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),fke(m&&m.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:eu([u,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?u:eu([u,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r)}function lke(){let t=_Q(),e=jv(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:o},"ErrorBoundary")," or"," ",A.createElement("code",{style:o},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:i},n):null,s)}var cke=A.createElement(lke,null),uke=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?A.createElement(Pl.Provider,{value:this.props.routeContext},A.createElement(A3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function dke({routeContext:t,match:e,children:n}){let r=A.useContext(hm);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(Pl.Provider,{value:t},n)}function fke(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let l=i.findIndex(c=>c.route.id&&(o==null?void 0:o[c.route.id])!==void 0);dr(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let s=!1,a=-1;if(n)for(let l=0;l<i.length;l++){let c=i[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:u,errors:d}=n,f=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!d||d[c.route.id]===void 0);if(c.route.lazy||f){s=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,c,u)=>{let d,f=!1,p=null,b=null;n&&(d=o&&c.route.id?o[c.route.id]:void 0,p=c.route.errorElement||cke,s&&(a<0&&u===0?(EQ("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,b=null):a===u&&(f=!0,b=c.route.hydrateFallbackElement||null)));let v=e.concat(i.slice(0,u+1)),m=()=>{let g;return d?g=p:f?g=b:c.route.Component?g=A.createElement(c.route.Component,null):c.route.element?g=c.route.element:g=l,A.createElement(dke,{match:c,routeContext:{outlet:l,matches:v,isDataRoute:n!=null},children:g})};return n&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?A.createElement(uke,{location:n.location,revalidation:n.revalidation,component:p,error:d,children:m(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):m()},null)}function T3(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hke(t){let e=A.useContext(hm);return dr(e,T3(t)),e}function pke(t){let e=A.useContext(Dw);return dr(e,T3(t)),e}function mke(t){let e=A.useContext(Pl);return dr(e,T3(t)),e}function M3(t){let e=mke(t),n=e.matches[e.matches.length-1];return dr(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function gke(){return M3("useRouteId")}function _Q(){var r;let t=A.useContext(A3),e=pke("useRouteError"),n=M3("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function vke(){let{router:t}=hke("useNavigate"),e=M3("useNavigate"),n=A.useRef(!1);return wQ(()=>{n.current=!0}),A.useCallback((s,...a)=>te(this,[s,...a],function*(i,o={}){Gi(n.current,bQ),n.current&&(typeof i=="number"?t.navigate(i):yield t.navigate(i,B({fromRouteId:e},o)))}),[t,e])}var o8={};function EQ(t,e,n){!e&&!o8[t]&&(o8[t]=!0,Gi(!1,n))}var s8={};function a8(t,e){!t&&!s8[e]&&(s8[e]=!0,console.warn(e))}function yke(t){let e={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&Gi(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:A.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&Gi(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:A.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&Gi(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:A.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),e}var xke=["HydrateFallback","hydrateFallbackElement"],bke=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function wke({router:t,flushSync:e}){let[n,r]=A.useState(t.state),[i,o]=A.useState(),[s,a]=A.useState({isTransitioning:!1}),[l,c]=A.useState(),[u,d]=A.useState(),[f,p]=A.useState(),b=A.useRef(new Map),v=A.useCallback((w,{deletedFetchers:S,flushSync:D,viewTransitionOpts:k})=>{w.fetchers.forEach((M,T)=>{M.data!==void 0&&b.current.set(T,M.data)}),S.forEach(M=>b.current.delete(M)),a8(D===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let P=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(a8(k==null||P,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!k||!P){e&&D?e(()=>r(w)):A.startTransition(()=>r(w));return}if(e&&D){e(()=>{u&&(l&&l.resolve(),u.skipTransition()),a({isTransitioning:!0,flushSync:!0,currentLocation:k.currentLocation,nextLocation:k.nextLocation})});let M=t.window.document.startViewTransition(()=>{e(()=>r(w))});M.finished.finally(()=>{e(()=>{c(void 0),d(void 0),o(void 0),a({isTransitioning:!1})})}),e(()=>d(M));return}u?(l&&l.resolve(),u.skipTransition(),p({state:w,currentLocation:k.currentLocation,nextLocation:k.nextLocation})):(o(w),a({isTransitioning:!0,flushSync:!1,currentLocation:k.currentLocation,nextLocation:k.nextLocation}))},[t.window,e,u,l]);A.useLayoutEffect(()=>t.subscribe(v),[t,v]),A.useEffect(()=>{s.isTransitioning&&!s.flushSync&&c(new bke)},[s]),A.useEffect(()=>{if(l&&i&&t.window){let w=i,S=l.promise,D=t.window.document.startViewTransition(()=>te(this,null,function*(){A.startTransition(()=>r(w)),yield S}));D.finished.finally(()=>{c(void 0),d(void 0),o(void 0),a({isTransitioning:!1})}),d(D)}},[i,l,t.window]),A.useEffect(()=>{l&&i&&n.location.key===i.location.key&&l.resolve()},[l,u,n.location,i]),A.useEffect(()=>{!s.isTransitioning&&f&&(o(f.state),a({isTransitioning:!0,flushSync:!1,currentLocation:f.currentLocation,nextLocation:f.nextLocation}),p(void 0))},[s.isTransitioning,f]);let m=A.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:w=>t.navigate(w),push:(w,S,D)=>t.navigate(w,{state:S,preventScrollReset:D==null?void 0:D.preventScrollReset}),replace:(w,S,D)=>t.navigate(w,{replace:!0,state:S,preventScrollReset:D==null?void 0:D.preventScrollReset})}),[t]),g=t.basename||"/",x=A.useMemo(()=>({router:t,navigator:m,static:!1,basename:g}),[t,m,g]);return A.createElement(A.Fragment,null,A.createElement(hm.Provider,{value:x},A.createElement(Dw.Provider,{value:n},A.createElement(xQ.Provider,{value:b.current},A.createElement(C3.Provider,{value:s},A.createElement(Cke,{basename:g,location:n.location,navigationType:n.historyAction,navigator:m},A.createElement(Ske,{routes:t.routes,future:t.future,state:n})))))),null)}var Ske=A.memo(_ke);function _ke({routes:t,future:e,state:n}){return ake(t,void 0,n,e)}function l8({to:t,replace:e,state:n,relative:r}){dr(d0(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=A.useContext(bc);Gi(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=A.useContext(Pl),{pathname:s}=vs(),a=Fr(),l=AT(t,CT(o),s,r==="path"),c=JSON.stringify(l);return A.useEffect(()=>{a(JSON.parse(c),{replace:e,state:n,relative:r})},[a,c,r,e,n]),null}function Eke(t){return ske(t.context)}function Cke({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){dr(!d0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),a=A.useMemo(()=>({basename:s,navigator:i,static:o,future:{}}),[s,i,o]);typeof n=="string"&&(n=dh(n));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:f="default"}=n,p=A.useMemo(()=>{let b=_l(l,s);return b==null?null:{location:{pathname:b,search:c,hash:u,state:d,key:f},navigationType:r}},[s,l,c,u,d,f,r]);return Gi(p!=null,`<Router basename="${s}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:A.createElement(bc.Provider,{value:a},A.createElement(TT.Provider,{children:e,value:p}))}var uE="get",dE="application/x-www-form-urlencoded";function MT(t){return t!=null&&typeof t.tagName=="string"}function Ake(t){return MT(t)&&t.tagName.toLowerCase()==="button"}function Tke(t){return MT(t)&&t.tagName.toLowerCase()==="form"}function Mke(t){return MT(t)&&t.tagName.toLowerCase()==="input"}function Pke(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Dke(t,e){return t.button===0&&(!e||e==="_self")&&!Pke(t)}function dI(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function Rke(t,e){let n=dI(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(o=>{n.append(i,o)})}),n}var IS=null;function kke(){if(IS===null)try{new FormData(document.createElement("form"),0),IS=!1}catch(t){IS=!0}return IS}var Ike=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function HP(t){return t!=null&&!Ike.has(t)?(Gi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dE}"`),null):t}function Fke(t,e){let n,r,i,o,s;if(Tke(t)){let a=t.getAttribute("action");r=a?_l(a,e):null,n=t.getAttribute("method")||uE,i=HP(t.getAttribute("enctype"))||dE,o=new FormData(t)}else if(Ake(t)||Mke(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?_l(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||uE,i=HP(t.getAttribute("formenctype"))||HP(a.getAttribute("enctype"))||dE,o=new FormData(a,t),!kke()){let{name:c,type:u,value:d}=t;if(u==="image"){let f=c?`${c}.`:"";o.append(`${f}x`,"0"),o.append(`${f}y`,"0")}else c&&o.append(c,d)}}else{if(MT(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=uE,r=null,i=dE,s=t}return o&&i==="text/plain"&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}function P3(t,e){if(t===!1||t===null||typeof t=="undefined")throw new Error(e)}function Oke(t,e){return te(this,null,function*(){if(t.id in e)return e[t.id];try{let n=yield import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}})}function Nke(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}function Lke(t,e,n){return te(this,null,function*(){let r=yield Promise.all(t.map(i=>te(this,null,function*(){let o=e.routes[i.route.id];if(o){let s=yield Oke(o,n);return s.links?s.links():[]}return[]})));return zke(r.flat(1).filter(Nke).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?oe(B({},i),{rel:"prefetch",as:"style"}):oe(B({},i),{rel:"prefetch"})))})}function c8(t,e,n,r,i,o){let s=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var u;return n[c].pathname!==l.pathname||((u=n[c].route.path)==null?void 0:u.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return o==="assets"?e.filter((l,c)=>s(l,c)||a(l,c)):o==="data"?e.filter((l,c)=>{var d;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(s(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function Bke(t,e,{includeHydrateFallback:n}={}){return jke(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function jke(t){return[...new Set(t)]}function Uke(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function zke(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let o=JSON.stringify(Uke(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}var Vke=new Set([100,101,204,205]);function Wke(t,e){let n=typeof t=="string"?new URL(t,typeof window=="undefined"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&_l(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function CQ(){let t=A.useContext(hm);return P3(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function $ke(){let t=A.useContext(Dw);return P3(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var D3=A.createContext(void 0);D3.displayName="FrameworkContext";function AQ(){let t=A.useContext(D3);return P3(t,"You must render this element inside a <HydratedRouter> element"),t}function Hke(t,e){let n=A.useContext(D3),[r,i]=A.useState(!1),[o,s]=A.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=e,f=A.useRef(null);A.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let v=g=>{g.forEach(x=>{s(x.isIntersecting)})},m=new IntersectionObserver(v,{threshold:.5});return f.current&&m.observe(f.current),()=>{m.disconnect()}}},[t]),A.useEffect(()=>{if(r){let v=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(v)}}},[r]);let p=()=>{i(!0)},b=()=>{i(!1),s(!1)};return n?t!=="intent"?[o,f,{}]:[o,f,{onFocus:dy(a,p),onBlur:dy(l,b),onMouseEnter:dy(c,p),onMouseLeave:dy(u,b),onTouchStart:dy(d,p)}]:[!1,f,{}]}function dy(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Gke(n){var r=n,{page:t}=r,e=Tt(r,["page"]);let{router:i}=CQ(),o=A.useMemo(()=>xf(i.routes,t,i.basename),[i.routes,t,i.basename]);return o?A.createElement(Kke,B({page:t,matches:o},e)):null}function qke(t){let{manifest:e,routeModules:n}=AQ(),[r,i]=A.useState([]);return A.useEffect(()=>{let o=!1;return Lke(t,e,n).then(s=>{o||i(s)}),()=>{o=!0}},[t,e,n]),r}function Kke(r){var i=r,{page:t,matches:e}=i,n=Tt(i,["page","matches"]);let o=vs(),{manifest:s,routeModules:a}=AQ(),{basename:l}=CQ(),{loaderData:c,matches:u}=$ke(),d=A.useMemo(()=>c8(t,e,u,s,o,"data"),[t,e,u,s,o]),f=A.useMemo(()=>c8(t,e,u,s,o,"assets"),[t,e,u,s,o]),p=A.useMemo(()=>{if(t===o.pathname+o.search+o.hash)return[];let m=new Set,g=!1;if(e.forEach(w=>{var D;let S=s.routes[w.route.id];!S||!S.hasLoader||(!d.some(k=>k.route.id===w.route.id)&&w.route.id in c&&((D=a[w.route.id])!=null&&D.shouldRevalidate)||S.hasClientLoader?g=!0:m.add(w.route.id))}),m.size===0)return[];let x=Wke(t,l);return g&&m.size>0&&x.searchParams.set("_routes",e.filter(w=>m.has(w.route.id)).map(w=>w.route.id).join(",")),[x.pathname+x.search]},[l,c,o,s,d,e,t,a]),b=A.useMemo(()=>Bke(f,s),[f,s]),v=qke(f);return A.createElement(A.Fragment,null,p.map(m=>A.createElement("link",B({key:m,rel:"prefetch",as:"fetch",href:m},n))),b.map(m=>A.createElement("link",B({key:m,rel:"modulepreload",href:m},n))),v.map(({key:m,link:g})=>A.createElement("link",B({key:m},g))))}function Yke(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var TQ=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";try{TQ&&(window.__reactRouterVersion="7.5.2")}catch(t){}function Xke(t,e){return LRe({basename:e==null?void 0:e.basename,unstable_getContext:e==null?void 0:e.unstable_getContext,future:e==null?void 0:e.future,history:iRe({window:e==null?void 0:e.window}),hydrationData:Qke(),routes:t,mapRouteProperties:yke,hydrationRouteProperties:xke,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function Qke(){let t=window==null?void 0:window.__staticRouterHydrationData;return t&&t.errors&&(t=oe(B({},t),{errors:Zke(t.errors)})),t}function Zke(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new DC(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let s=new o(i.message);s.stack="",n[r]=s}catch(s){}}if(n[r]==null){let o=new Error(i.message);o.stack="",n[r]=o}}else n[r]=i;return n}var MQ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ku=A.forwardRef(function(b,p){var v=b,{onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:s,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d}=v,f=Tt(v,["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"]);let{basename:m}=A.useContext(bc),g=typeof c=="string"&&MQ.test(c),x,w=!1;if(typeof c=="string"&&g&&(x=c,TQ))try{let E=new URL(window.location.href),R=c.startsWith("//")?new URL(E.protocol+c):new URL(c),F=_l(R.pathname,m);R.origin===E.origin&&F!=null?c=F+R.search+R.hash:w=!0}catch(E){Gi(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=rke(c,{relative:i}),[D,k,P]=Hke(r,f),M=nIe(c,{replace:s,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:d});function T(E){e&&e(E),E.defaultPrevented||M(E)}let _=A.createElement("a",oe(B(B({},f),P),{href:x||S,onClick:w||o?e:T,ref:Yke(p,k),target:l,"data-discover":!g&&n==="render"?"true":void 0}));return D&&!g?A.createElement(A.Fragment,null,_,A.createElement(Gke,{page:S})):_});Ku.displayName="Link";var Jke=A.forwardRef(function(d,u){var f=d,{"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:s,viewTransition:a,children:l}=f,c=Tt(f,["aria-current","caseSensitive","className","end","style","to","viewTransition","children"]);let p=Rw(s,{relative:c.relative}),b=vs(),v=A.useContext(Dw),{navigator:m,basename:g}=A.useContext(bc),x=v!=null&&aIe(p)&&a===!0,w=m.encodeLocation?m.encodeLocation(p).pathname:p.pathname,S=b.pathname,D=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(S=S.toLowerCase(),D=D?D.toLowerCase():null,w=w.toLowerCase()),D&&g&&(D=_l(D,g)||D);const k=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let P=S===w||!i&&S.startsWith(w)&&S.charAt(k)==="/",M=D!=null&&(D===w||!i&&D.startsWith(w)&&D.charAt(w.length)==="/"),T={isActive:P,isPending:M,isTransitioning:x},_=P?e:void 0,E;typeof r=="function"?E=r(T):E=[r,P?"active":null,M?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let R=typeof o=="function"?o(T):o;return A.createElement(Ku,oe(B({},c),{"aria-current":_,className:E,ref:u,style:R,to:s,viewTransition:a}),typeof l=="function"?l(T):l)});Jke.displayName="NavLink";var eIe=A.forwardRef((b,p)=>{var v=b,{discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:s=uE,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d}=v,f=Tt(v,["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"]);let m=oIe(),g=sIe(a,{relative:c}),x=s.toLowerCase()==="get"?"get":"post",w=typeof a=="string"&&MQ.test(a),S=D=>{if(l&&l(D),D.defaultPrevented)return;D.preventDefault();let k=D.nativeEvent.submitter,P=(k==null?void 0:k.getAttribute("formmethod"))||s;m(k||D.currentTarget,{fetcherKey:e,method:P,navigate:n,replace:i,state:o,relative:c,preventScrollReset:u,viewTransition:d})};return A.createElement("form",oe(B({ref:p,method:x,action:g,onSubmit:r?l:S},f),{"data-discover":!w&&t==="render"?"true":void 0}))});eIe.displayName="Form";function tIe(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PQ(t){let e=A.useContext(hm);return dr(e,tIe(t)),e}function nIe(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:s}={}){let a=Fr(),l=vs(),c=Rw(t,{relative:o});return A.useCallback(u=>{if(Dke(u,e)){u.preventDefault();let d=n!==void 0?n:eh(l)===eh(c);a(t,{replace:d,state:r,preventScrollReset:i,relative:o,viewTransition:s})}},[l,a,c,n,r,e,t,i,o,s])}function fh(t){Gi(typeof URLSearchParams!="undefined","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=A.useRef(dI(t)),n=A.useRef(!1),r=vs(),i=A.useMemo(()=>Rke(r.search,n.current?null:e.current),[r.search]),o=Fr(),s=A.useCallback((a,l)=>{const c=dI(typeof a=="function"?a(i):a);n.current=!0,o("?"+c,l)},[o,i]);return[i,s]}var rIe=0,iIe=()=>`__${String(++rIe)}__`;function oIe(){let{router:t}=PQ("useSubmit"),{basename:e}=A.useContext(bc),n=gke();return A.useCallback((o,...s)=>te(this,[o,...s],function*(r,i={}){let{action:a,method:l,encType:c,formData:u,body:d}=Fke(r,e);if(i.navigate===!1){let f=i.fetcherKey||iIe();yield t.fetch(f,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||l,formEncType:i.encType||c,flushSync:i.flushSync})}else yield t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||l,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})}),[t,e,n])}function sIe(t,{relative:e}={}){let{basename:n}=A.useContext(bc),r=A.useContext(Pl);dr(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o=B({},Rw(t||".",{relative:e})),s=vs();if(t==null){o.search=s.search;let a=new URLSearchParams(o.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let u=a.toString();o.search=u?`?${u}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:eu([n,o.pathname])),eh(o)}function aIe(t,e={}){let n=A.useContext(C3);dr(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=PQ("useViewTransitionState"),i=Rw(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=_l(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=_l(n.nextLocation.pathname,r)||n.nextLocation.pathname;return PC(i.pathname,s)!=null||PC(i.pathname,o)!=null}new TextEncoder;[...Vke];/**
 * react-router v7.5.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lIe(t){return A.createElement(wke,B({flushSync:rc.flushSync},t))}var u8={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DQ=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},cIe=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],a=t[n++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},RQ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,s||(f=64)),r.push(n[u],n[d],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(DQ(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):cIe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||c==null||d==null)throw new uIe;const f=o<<2|a>>4;if(r.push(f),c!==64){const p=a<<4&240|c>>2;if(r.push(p),d!==64){const b=c<<6&192|d;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class uIe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dIe=function(t){const e=DQ(t);return RQ.encodeByteArray(e,!0)},kC=function(t){return dIe(t).replace(/\./g,"")},kQ=function(t){try{return RQ.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fIe(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hIe=()=>fIe().__FIREBASE_DEFAULTS__,pIe=()=>{if(typeof process=="undefined"||typeof u8=="undefined")return;const t=u8.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},mIe=()=>{if(typeof document=="undefined")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&kQ(t[1]);return e&&JSON.parse(e)},PT=()=>{try{return hIe()||pIe()||mIe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},IQ=t=>{var e,n;return(n=(e=PT())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},R3=t=>{const e=IQ(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},FQ=()=>{var t;return(t=PT())===null||t===void 0?void 0:t.config},OQ=t=>{var e;return(e=PT())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gIe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NQ(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[kC(JSON.stringify(n)),kC(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vIe(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ms())}function yIe(){var t;const e=(t=PT())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(n){return!1}}function xIe(){return typeof navigator!="undefined"&&navigator.userAgent==="Cloudflare-Workers"}function LQ(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function bIe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wIe(){const t=ms();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function SIe(){return!yIe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function BQ(){try{return typeof indexedDB=="object"}catch(t){return!1}}function jQ(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function _Ie(){return!(typeof navigator=="undefined"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EIe="FirebaseError";class Dl extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=EIe,Object.setPrototypeOf(this,Dl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pm.prototype.create)}}class pm{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?CIe(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Dl(i,a,r)}}function CIe(t,e){return t.replace(AIe,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const AIe=/\{\$([^}]+)}/g;function TIe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Tb(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(d8(o)&&d8(s)){if(!Tb(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function d8(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $y(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Hy(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function MIe(t,e){const n=new PIe(t,e);return n.subscribe.bind(n)}class PIe{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");DIe(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=GP),i.error===void 0&&(i.error=GP),i.complete===void 0&&(i.complete=GP);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(s){}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DIe(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function GP(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RIe=1e3,kIe=2,IIe=4*60*60*1e3,FIe=.5;function f8(t,e=RIe,n=kIe){const r=e*Math.pow(n,t),i=Math.round(FIe*r*(Math.random()-.5)*2);return Math.min(IIe,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(t){return t&&t._delegate?t._delegate:t}class La{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OIe{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new gIe;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch(i){}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LIe(e))try{this.getOrInitializeService({instanceIdentifier:Xh})}catch(n){}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch(o){}}}}clearInstance(e=Xh){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return te(this,null,function*(){const e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Xh){return this.instances.has(e)}getOptions(e=Xh){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch(o){}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:NIe(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(i){}return r||null}normalizeInstanceIdentifier(e=Xh){return this.component?this.component.multipleInstances?e:Xh:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NIe(t){return t===Xh?void 0:t}function LIe(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BIe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new OIe(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Cr||(Cr={}));const jIe={debug:Cr.DEBUG,verbose:Cr.VERBOSE,info:Cr.INFO,warn:Cr.WARN,error:Cr.ERROR,silent:Cr.SILENT},UIe=Cr.INFO,zIe={[Cr.DEBUG]:"log",[Cr.VERBOSE]:"log",[Cr.INFO]:"info",[Cr.WARN]:"warn",[Cr.ERROR]:"error"},VIe=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=zIe[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class DT{constructor(e){this.name=e,this._logLevel=UIe,this._logHandler=VIe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Cr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jIe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Cr.DEBUG,...e),this._logHandler(this,Cr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Cr.VERBOSE,...e),this._logHandler(this,Cr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Cr.INFO,...e),this._logHandler(this,Cr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Cr.WARN,...e),this._logHandler(this,Cr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Cr.ERROR,...e),this._logHandler(this,Cr.ERROR,...e)}}const WIe=(t,e)=>e.some(n=>t instanceof n);let h8,p8;function $Ie(){return h8||(h8=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HIe(){return p8||(p8=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const UQ=new WeakMap,fI=new WeakMap,zQ=new WeakMap,qP=new WeakMap,k3=new WeakMap;function GIe(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Vf(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&UQ.set(n,t)}).catch(()=>{}),k3.set(e,t),e}function qIe(t){if(fI.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});fI.set(t,e)}let hI={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fI.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zQ.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vf(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function KIe(t){hI=t(hI)}function YIe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(KP(this),e,...n);return zQ.set(r,e.sort?e.sort():[e]),Vf(r)}:HIe().includes(t)?function(...e){return t.apply(KP(this),e),Vf(UQ.get(this))}:function(...e){return Vf(t.apply(KP(this),e))}}function XIe(t){return typeof t=="function"?YIe(t):(t instanceof IDBTransaction&&qIe(t),WIe(t,$Ie())?new Proxy(t,hI):t)}function Vf(t){if(t instanceof IDBRequest)return GIe(t);if(qP.has(t))return qP.get(t);const e=XIe(t);return e!==t&&(qP.set(t,e),k3.set(e,t)),e}const KP=t=>k3.get(t);function VQ(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=Vf(s);return r&&s.addEventListener("upgradeneeded",l=>{r(Vf(s.result),l.oldVersion,l.newVersion,Vf(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const QIe=["get","getKey","getAll","getAllKeys","count"],ZIe=["put","add","delete","clear"],YP=new Map;function m8(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(YP.get(e))return YP.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=ZIe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||QIe.includes(n)))return;const o=function(s,...a){return te(this,null,function*(){const l=this.transaction(s,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(yield Promise.all([c[n](...a),i&&l.done]))[0]})};return YP.set(e,o),o}KIe(t=>oe(B({},t),{get:(e,n,r)=>m8(e,n)||t.get(e,n,r),has:(e,n)=>!!m8(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JIe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(eFe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function eFe(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pI="@firebase/app",g8="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=new DT("@firebase/app"),tFe="@firebase/app-compat",nFe="@firebase/analytics-compat",rFe="@firebase/analytics",iFe="@firebase/app-check-compat",oFe="@firebase/app-check",sFe="@firebase/auth",aFe="@firebase/auth-compat",lFe="@firebase/database",cFe="@firebase/data-connect",uFe="@firebase/database-compat",dFe="@firebase/functions",fFe="@firebase/functions-compat",hFe="@firebase/installations",pFe="@firebase/installations-compat",mFe="@firebase/messaging",gFe="@firebase/messaging-compat",vFe="@firebase/performance",yFe="@firebase/performance-compat",xFe="@firebase/remote-config",bFe="@firebase/remote-config-compat",wFe="@firebase/storage",SFe="@firebase/storage-compat",_Fe="@firebase/firestore",EFe="@firebase/vertexai-preview",CFe="@firebase/firestore-compat",AFe="firebase",TFe="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="[DEFAULT]",MFe={[pI]:"fire-core",[tFe]:"fire-core-compat",[rFe]:"fire-analytics",[nFe]:"fire-analytics-compat",[oFe]:"fire-app-check",[iFe]:"fire-app-check-compat",[sFe]:"fire-auth",[aFe]:"fire-auth-compat",[lFe]:"fire-rtdb",[cFe]:"fire-data-connect",[uFe]:"fire-rtdb-compat",[dFe]:"fire-fn",[fFe]:"fire-fn-compat",[hFe]:"fire-iid",[pFe]:"fire-iid-compat",[mFe]:"fire-fcm",[gFe]:"fire-fcm-compat",[vFe]:"fire-perf",[yFe]:"fire-perf-compat",[xFe]:"fire-rc",[bFe]:"fire-rc-compat",[wFe]:"fire-gcs",[SFe]:"fire-gcs-compat",[_Fe]:"fire-fst",[CFe]:"fire-fst-compat",[EFe]:"fire-vertex","fire-js":"fire-js",[AFe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=new Map,PFe=new Map,gI=new Map;function v8(t,e){try{t.container.addComponent(e)}catch(n){xd.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function El(t){const e=t.name;if(gI.has(e))return xd.debug(`There were multiple attempts to register component ${e}.`),!1;gI.set(e,t);for(const n of IC.values())v8(n,t);for(const n of PFe.values())v8(n,t);return!0}function Rd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function na(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DFe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wf=new pm("app","Firebase",DFe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RFe{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new La("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm=TFe;function WQ(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:mI,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Wf.create("bad-app-name",{appName:String(i)});if(n||(n=FQ()),!n)throw Wf.create("no-options");const o=IC.get(i);if(o){if(Tb(n,o.options)&&Tb(r,o.config))return o;throw Wf.create("duplicate-app",{appName:i})}const s=new BIe(i);for(const l of gI.values())s.addComponent(l);const a=new RFe(n,r,s);return IC.set(i,a),a}function Iw(t=mI){const e=IC.get(t);if(!e&&t===mI&&FQ())return WQ();if(!e)throw Wf.create("no-app",{appName:t});return e}function ds(t,e,n){var r;let i=(r=MFe[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xd.warn(a.join(" "));return}El(new La(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kFe="firebase-heartbeat-database",IFe=1,Mb="firebase-heartbeat-store";let XP=null;function $Q(){return XP||(XP=VQ(kFe,IFe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Mb)}catch(n){console.warn(n)}}}}).catch(t=>{throw Wf.create("idb-open",{originalErrorMessage:t.message})})),XP}function FFe(t){return te(this,null,function*(){try{const n=(yield $Q()).transaction(Mb),r=yield n.objectStore(Mb).get(HQ(t));return yield n.done,r}catch(e){if(e instanceof Dl)xd.warn(e.message);else{const n=Wf.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xd.warn(n.message)}}})}function y8(t,e){return te(this,null,function*(){try{const r=(yield $Q()).transaction(Mb,"readwrite");yield r.objectStore(Mb).put(e,HQ(t)),yield r.done}catch(n){if(n instanceof Dl)xd.warn(n.message);else{const r=Wf.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xd.warn(r.message)}}})}function HQ(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OFe=1024,NFe=30*24*60*60*1e3;class LFe{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jFe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return te(this,null,function*(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=x8();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=NFe}),this._storage.overwrite(this._heartbeatsCache))}catch(r){xd.warn(r)}})}getHeartbeatsHeader(){return te(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=x8(),{heartbeatsToSend:r,unsentEntries:i}=BFe(this._heartbeatsCache.heartbeats),o=kC(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return xd.warn(n),""}})}}function x8(){return new Date().toISOString().substring(0,10)}function BFe(t,e=OFe){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),b8(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),b8(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class jFe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return te(this,null,function*(){return BQ()?jQ().then(()=>!0).catch(()=>!1):!1})}read(){return te(this,null,function*(){if(yield this._canUseIndexedDBPromise){const n=yield FFe(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return te(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){const i=yield this.read();return y8(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return te(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){const i=yield this.read();return y8(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}}function b8(t){return kC(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UFe(t){El(new La("platform-logger",e=>new JIe(e),"PRIVATE")),El(new La("heartbeat",e=>new LFe(e),"PRIVATE")),ds(pI,g8,t),ds(pI,g8,"esm2017"),ds("fire-js","")}UFe("");function GQ(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zFe=GQ,qQ=new pm("auth","Firebase",GQ());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=new DT("@firebase/auth");function VFe(t,...e){FC.logLevel<=Cr.WARN&&FC.warn(`Auth (${mm}): ${t}`,...e)}function fE(t,...e){FC.logLevel<=Cr.ERROR&&FC.error(`Auth (${mm}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t,...e){throw F3(t,...e)}function uc(t,...e){return F3(t,...e)}function I3(t,e,n){const r=Object.assign(Object.assign({},zFe()),{[e]:n});return new pm("auth","Firebase",r).create(e,{appName:t.name})}function vl(t){return I3(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function KQ(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Cl(t,"argument-error"),I3(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function F3(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return qQ.create(t,...e)}function Tn(t,e,...n){if(!t)throw F3(e,...n)}function Yu(t){const e="INTERNAL ASSERTION FAILED: "+t;throw fE(e),new Error(e)}function bd(t,e){t||Yu(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function WFe(){return w8()==="http:"||w8()==="https:"}function w8(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Fe(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WFe()||LQ()||"connection"in navigator)?navigator.onLine:!0}function HFe(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,n){this.shortDelay=e,this.longDelay=n,bd(n>e,"Short delay should be less than long delay!"),this.isMobile=vIe()||bIe()}get(){return $Fe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(t,e){bd(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YQ{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;if(typeof globalThis!="undefined"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch!="undefined")return fetch;Yu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;if(typeof globalThis!="undefined"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers!="undefined")return Headers;Yu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;if(typeof globalThis!="undefined"&&globalThis.Response)return globalThis.Response;if(typeof Response!="undefined")return Response;Yu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GFe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qFe=new Fw(3e4,6e4);function kd(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function wc(o,s,a,l){return te(this,arguments,function*(t,e,n,r,i={}){return XQ(t,i,()=>te(this,null,function*(){let c={},u={};r&&(e==="GET"?u=r:c={body:JSON.stringify(r)});const d=kw(Object.assign({key:t.config.apiKey},u)).slice(1),f=yield t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:f},c);return xIe()||(p.referrerPolicy="no-referrer"),YQ.fetch()(QQ(t,t.config.apiHost,n,d),p)}))})}function XQ(t,e,n){return te(this,null,function*(){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},GFe),e);try{const i=new YFe(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw FS(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw FS(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw FS(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw FS(t,"user-disabled",s);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw I3(t,u,c);Cl(t,u)}}catch(i){if(i instanceof Dl)throw i;Cl(t,"network-request-failed",{message:String(i)})}})}function Ow(o,s,a,l){return te(this,arguments,function*(t,e,n,r,i={}){const c=yield wc(t,e,n,r,i);return"mfaPendingCredential"in c&&Cl(t,"multi-factor-auth-required",{_serverResponse:c}),c})}function QQ(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?O3(t.config,i):`${t.config.apiScheme}://${i}`}function KFe(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class YFe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(uc(this.auth,"network-request-failed")),qFe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function FS(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=uc(t,e,r);return i.customData._tokenResponse=n,i}function S8(t){return t!==void 0&&t.enterprise!==void 0}class XFe{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return KFe(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}function QFe(t,e){return te(this,null,function*(){return wc(t,"GET","/v2/recaptchaConfig",kd(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZFe(t,e){return te(this,null,function*(){return wc(t,"POST","/v1/accounts:delete",e)})}function ZQ(t,e){return te(this,null,function*(){return wc(t,"POST","/v1/accounts:lookup",e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function JFe(t,e=!1){return te(this,null,function*(){const n=Tr(t),r=yield n.getIdToken(e),i=N3(r);Tn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:wx(QP(i.auth_time)),issuedAtTime:wx(QP(i.iat)),expirationTime:wx(QP(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}})}function QP(t){return Number(t)*1e3}function N3(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return fE("JWT malformed, contained fewer than 3 sections"),null;try{const i=kQ(n);return i?JSON.parse(i):(fE("Failed to decode base64 JWT payload"),null)}catch(i){return fE("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function _8(t){const e=N3(t);return Tn(e,"internal-error"),Tn(typeof e.exp!="undefined","internal-error"),Tn(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(t,e,n=!1){return te(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Dl&&eOe(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function eOe({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tOe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(()=>te(this,null,function*(){yield this.iteration()}),n)}iteration(){return te(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wx(this.lastLoginAt),this.creationTime=wx(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t){return te(this,null,function*(){var e;const n=t.auth,r=yield t.getIdToken(),i=yield qp(t,ZQ(n,{idToken:r}));Tn(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?JQ(o.providerUserInfo):[],a=rOe(t.providerData,s),l=t.isAnonymous,c=!(t.email&&o.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new vI(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function nOe(t){return te(this,null,function*(){const e=Tr(t);yield NC(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function rOe(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function JQ(t){return t.map(e=>{var{providerId:n}=e,r=_w(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iOe(t,e){return te(this,null,function*(){const n=yield XQ(t,{},()=>te(this,null,function*(){const r=kw({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=QQ(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",YQ.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function oOe(t,e){return te(this,null,function*(){return wc(t,"POST","/v2/accounts:revokeToken",kd(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Tn(e.idToken,"internal-error"),Tn(typeof e.idToken!="undefined","internal-error"),Tn(typeof e.refreshToken!="undefined","internal-error");const n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):_8(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Tn(e.length!==0,"internal-error");const n=_8(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return te(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Tn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return te(this,null,function*(){const{accessToken:r,refreshToken:i,expiresIn:o}=yield iOe(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new uv;return r&&(Tn(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Tn(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Tn(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uv,this.toJSON())}_performRefresh(){return Yu("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(t,e){Tn(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class Xu{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=_w(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tOe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new vI(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return te(this,null,function*(){const n=yield qp(this,this.stsTokenManager.getToken(this.auth,e));return Tn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return JFe(this,e)}reload(){return nOe(this)}_assign(e){this!==e&&(Tn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xu(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Tn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return te(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield NC(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return te(this,null,function*(){if(na(this.auth.app))return Promise.reject(vl(this.auth));const e=yield this.getIdToken();return yield qp(this,ZFe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,l,c,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,p=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,b=(s=n.photoURL)!==null&&s!==void 0?s:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,m=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,g=(c=n.createdAt)!==null&&c!==void 0?c:void 0,x=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:w,emailVerified:S,isAnonymous:D,providerData:k,stsTokenManager:P}=n;Tn(w&&P,e,"internal-error");const M=uv.fromJSON(this.name,P);Tn(typeof w=="string",e,"internal-error"),Qd(d,e.name),Qd(f,e.name),Tn(typeof S=="boolean",e,"internal-error"),Tn(typeof D=="boolean",e,"internal-error"),Qd(p,e.name),Qd(b,e.name),Qd(v,e.name),Qd(m,e.name),Qd(g,e.name),Qd(x,e.name);const T=new Xu({uid:w,auth:e,email:f,emailVerified:S,displayName:d,isAnonymous:D,photoURL:b,phoneNumber:p,tenantId:v,stsTokenManager:M,createdAt:g,lastLoginAt:x});return k&&Array.isArray(k)&&(T.providerData=k.map(_=>Object.assign({},_))),m&&(T._redirectEventId=m),T}static _fromIdTokenResponse(e,n,r=!1){return te(this,null,function*(){const i=new uv;i.updateFromServerResponse(n);const o=new Xu({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield NC(o),o})}static _fromGetAccountInfoResponse(e,n,r){return te(this,null,function*(){const i=n.users[0];Tn(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?JQ(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),a=new uv;a.updateFromIdToken(r);const l=new Xu({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new vI(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(l,c),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E8=new Map;function Qu(t){bd(t instanceof Function,"Expected a class definition");let e=E8.get(t);return e?(bd(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,E8.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eZ{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return te(this,null,function*(){return!0})}_set(e,n){return te(this,null,function*(){this.storage[e]=n})}_get(e){return te(this,null,function*(){const n=this.storage[e];return n===void 0?null:n})}_remove(e){return te(this,null,function*(){delete this.storage[e]})}_addListener(e,n){}_removeListener(e,n){}}eZ.type="NONE";const C8=eZ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(t,e,n){return`firebase:${t}:${e}:${n}`}class dv{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=hE(this.userKey,i.apiKey,o),this.fullPersistenceKey=hE("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return te(this,null,function*(){const e=yield this.persistence._get(this.fullUserKey);return e?Xu._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return te(this,null,function*(){if(this.persistence===e)return;const n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return te(this,null,function*(){if(!n.length)return new dv(Qu(C8),e,r);const i=(yield Promise.all(n.map(c=>te(this,null,function*(){if(yield c._isAvailable())return c})))).filter(c=>c);let o=i[0]||Qu(C8);const s=hE(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=yield c._get(s);if(u){const d=Xu._fromJSON(e,u);c!==o&&(a=d),o=c;break}}catch(u){}const l=i.filter(c=>c._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new dv(o,e,r):(o=l[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(c=>te(this,null,function*(){if(c!==o)try{yield c._remove(s)}catch(u){}}))),new dv(o,e,r))})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A8(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iZ(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tZ(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sZ(e))return"Blackberry";if(aZ(e))return"Webos";if(nZ(e))return"Safari";if((e.includes("chrome/")||rZ(e))&&!e.includes("edge/"))return"Chrome";if(oZ(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function tZ(t=ms()){return/firefox\//i.test(t)}function nZ(t=ms()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rZ(t=ms()){return/crios\//i.test(t)}function iZ(t=ms()){return/iemobile/i.test(t)}function oZ(t=ms()){return/android/i.test(t)}function sZ(t=ms()){return/blackberry/i.test(t)}function aZ(t=ms()){return/webos/i.test(t)}function L3(t=ms()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function sOe(t=ms()){var e;return L3(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function aOe(){return wIe()&&document.documentMode===10}function lZ(t=ms()){return L3(t)||oZ(t)||aZ(t)||sZ(t)||/windows phone/i.test(t)||iZ(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cZ(t,e=[]){let n;switch(t){case"Browser":n=A8(ms());break;case"Worker":n=`${A8(ms())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mm}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lOe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{const l=e(o);s(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return te(this,null,function*(){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch(o){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}})}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cOe(n){return te(this,arguments,function*(t,e={}){return wc(t,"GET","/v2/passwordPolicy",kd(t,e))})}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uOe=6;class dOe{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:uOe,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fOe{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new T8(this),this.idTokenSubscription=new T8(this),this.beforeStateQueue=new lOe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qQ,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qu(n)),this._initializationPromise=this.queue(()=>te(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield dv.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch(o){}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return te(this,null,function*(){if(this._deleted)return;const e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return te(this,null,function*(){try{const n=yield ZQ(this,{idToken:e}),r=yield Xu._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return te(this,null,function*(){var n;if(na(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const r=yield this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=yield this.tryRedirectSignIn(e);(!s||s===a)&&(l!=null&&l.user)&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Tn(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return te(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(r){yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return te(this,null,function*(){try{yield NC(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=HFe()}_delete(){return te(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return te(this,null,function*(){if(na(this.app))return Promise.reject(vl(this));const n=e?Tr(e):null;return n&&Tn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return te(this,null,function*(){if(!this._deleted)return e&&Tn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>te(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return te(this,null,function*(){return na(this.app)?Promise.reject(vl(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return na(this.app)?Promise.reject(vl(this)):this.queue(()=>te(this,null,function*(){yield this.assertedPersistence.setPersistence(Qu(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return te(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return te(this,null,function*(){const e=yield cOe(this),n=new dOe(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new pm("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return te(this,null,function*(){if(this.currentUser){const n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield oOe(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return te(this,null,function*(){const r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return te(this,null,function*(){if(!this.redirectPersistenceManager){const n=e&&Qu(e)||this._popupRedirectResolver;Tn(n,this,"argument-error"),this.redirectPersistenceManager=yield dv.create(this,[Qu(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return te(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>te(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return te(this,null,function*(){if(e===this.currentUser)return this.queue(()=>te(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tn(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{s=!0,l()}}else{const l=e.addObserver(n);return()=>{s=!0,l()}}}directlySetCurrentUser(e){return te(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Tn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cZ(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return te(this,null,function*(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);const i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return te(this,null,function*(){var e;const n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n!=null&&n.error&&VFe(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token})}}function Rl(t){return Tr(t)}class T8{constructor(e){this.auth=e,this.observer=null,this.addObserver=MIe(n=>this.observer=n)}get next(){return Tn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RT={loadJS(){return te(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hOe(t){RT=t}function uZ(t){return RT.loadJS(t)}function pOe(){return RT.recaptchaEnterpriseScript}function mOe(){return RT.gapiScript}function gOe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const vOe="recaptcha-enterprise",yOe="NO_RECAPTCHA";class xOe{constructor(e){this.type=vOe,this.auth=Rl(e)}verify(e="verify",n=!1){return te(this,null,function*(){function r(o){return te(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>te(this,null,function*(){QFe(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new XFe(l);return o.tenantId==null?o._agentRecaptchaConfig=c:o._tenantRecaptchaConfigs[o.tenantId]=c,s(c.siteKey)}}).catch(l=>{a(l)})}))})}function i(o,s,a){const l=window.grecaptcha;S8(l)?l.enterprise.ready(()=>{l.enterprise.execute(o,{action:e}).then(c=>{s(c)}).catch(()=>{s(yOe)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&S8(window.grecaptcha))i(a,o,s);else{if(typeof window=="undefined"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let l=pOe();l.length!==0&&(l+=a),uZ(l).then(()=>{i(a,o,s)}).catch(c=>{s(c)})}}).catch(a=>{s(a)})})})}}function M8(t,e,n,r=!1){return te(this,null,function*(){const i=new xOe(t);let o;try{o=yield i.verify(n)}catch(a){o=yield i.verify(n,!0)}const s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})}function Pb(t,e,n,r){return te(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=yield M8(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(o=>te(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=yield M8(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(o)}))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bOe(t,e){const n=Rd(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Tb(o,e!=null?e:{}))return i;Cl(i,"already-initialized")}return n.initialize({options:e})}function wOe(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Qu);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function SOe(t,e,n){const r=Rl(t);Tn(r._canInitEmulator,r,"emulator-config-failed"),Tn(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=dZ(e),{host:s,port:a}=_Oe(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),EOe()}function dZ(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _Oe(t){const e=dZ(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:P8(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:P8(s)}}}function P8(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function EOe(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yu("not implemented")}_getIdTokenResponse(e){return Yu("not implemented")}_linkToIdToken(e,n){return Yu("not implemented")}_getReauthenticationResolver(e){return Yu("not implemented")}}function COe(t,e){return te(this,null,function*(){return wc(t,"POST","/v1/accounts:update",e)})}function AOe(t,e){return te(this,null,function*(){return wc(t,"POST","/v1/accounts:signUp",e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TOe(t,e){return te(this,null,function*(){return Ow(t,"POST","/v1/accounts:signInWithPassword",kd(t,e))})}function fZ(t,e){return te(this,null,function*(){return wc(t,"POST","/v1/accounts:sendOobCode",kd(t,e))})}function MOe(t,e){return te(this,null,function*(){return fZ(t,e)})}function POe(t,e){return te(this,null,function*(){return fZ(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DOe(t,e){return te(this,null,function*(){return Ow(t,"POST","/v1/accounts:signInWithEmailLink",kd(t,e))})}function ROe(t,e){return te(this,null,function*(){return Ow(t,"POST","/v1/accounts:signInWithEmailLink",kd(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db extends B3{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Db(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Db(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return te(this,null,function*(){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pb(e,n,"signInWithPassword",TOe);case"emailLink":return DOe(e,{email:this._email,oobCode:this._password});default:Cl(e,"internal-error")}})}_linkToIdToken(e,n){return te(this,null,function*(){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pb(e,r,"signUpPassword",AOe);case"emailLink":return ROe(e,{idToken:n,email:this._email,oobCode:this._password});default:Cl(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(t,e){return te(this,null,function*(){return Ow(t,"POST","/v1/accounts:signInWithIdp",kd(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kOe="http://localhost";class Kp extends B3{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Kp(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Cl("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=_w(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Kp(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return fv(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,fv(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,fv(e,n)}buildRequest(){const e={requestUri:kOe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=kw(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IOe(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function FOe(t){const e=$y(Hy(t)).link,n=e?$y(Hy(e)).deep_link_id:null,r=$y(Hy(t)).deep_link_id;return(r?$y(Hy(r)).link:null)||r||n||e||t}class kT{constructor(e){var n,r,i,o,s,a;const l=$y(Hy(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,d=IOe((i=l.mode)!==null&&i!==void 0?i:null);Tn(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(o=l.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=l.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=FOe(e);try{return new kT(n)}catch(r){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(){this.providerId=hh.PROVIDER_ID}static credential(e,n){return Db._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=kT.parseLink(n);return Tn(r,"argument-error"),Db._fromEmailAndCode(e,r.code,r.tenantId)}}hh.PROVIDER_ID="password";hh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";hh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw extends IT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf extends Nw{constructor(){super("facebook.com")}static credential(e){return Kp._fromParams({providerId:bf.PROVIDER_ID,signInMethod:bf.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bf.credentialFromTaggedObject(e)}static credentialFromError(e){return bf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bf.credential(e.oauthAccessToken)}catch(n){return null}}}bf.FACEBOOK_SIGN_IN_METHOD="facebook.com";bf.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul extends Nw{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Kp._fromParams({providerId:ul.PROVIDER_ID,signInMethod:ul.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ul.credentialFromTaggedObject(e)}static credentialFromError(e){return ul.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ul.credential(n,r)}catch(i){return null}}}ul.GOOGLE_SIGN_IN_METHOD="google.com";ul.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf extends Nw{constructor(){super("github.com")}static credential(e){return Kp._fromParams({providerId:wf.PROVIDER_ID,signInMethod:wf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wf.credentialFromTaggedObject(e)}static credentialFromError(e){return wf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wf.credential(e.oauthAccessToken)}catch(n){return null}}}wf.GITHUB_SIGN_IN_METHOD="github.com";wf.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf extends Nw{constructor(){super("twitter.com")}static credential(e,n){return Kp._fromParams({providerId:Sf.PROVIDER_ID,signInMethod:Sf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Sf.credentialFromTaggedObject(e)}static credentialFromError(e){return Sf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Sf.credential(n,r)}catch(i){return null}}}Sf.TWITTER_SIGN_IN_METHOD="twitter.com";Sf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OOe(t,e){return te(this,null,function*(){return Ow(t,"POST","/v1/accounts:signUp",kd(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return te(this,null,function*(){const o=yield Xu._fromIdTokenResponse(e,r,i),s=D8(r);return new Yp({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return te(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);const i=D8(r);return new Yp({user:e,providerId:i,_tokenResponse:r,operationType:n})})}}function D8(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC extends Dl{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,LC.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new LC(e,n,r,i)}}function hZ(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?LC._fromErrorAndOperation(t,o,e,r):o})}function NOe(t,e,n=!1){return te(this,null,function*(){const r=yield qp(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Yp._forOperation(t,"link",r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pZ(t,e,n=!1){return te(this,null,function*(){const{auth:r}=t;if(na(r.app))return Promise.reject(vl(r));const i="reauthenticate";try{const o=yield qp(t,hZ(r,i,e,t),n);Tn(o.idToken,r,"internal-error");const s=N3(o.idToken);Tn(s,r,"internal-error");const{sub:a}=s;return Tn(t.uid===a,r,"user-mismatch"),Yp._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Cl(r,"user-mismatch"),o}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mZ(t,e,n=!1){return te(this,null,function*(){if(na(t.app))return Promise.reject(vl(t));const r="signIn",i=yield hZ(t,r,e),o=yield Yp._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function gZ(t,e){return te(this,null,function*(){return mZ(Rl(t),e)})}function LOe(t,e){return te(this,null,function*(){return pZ(Tr(t),e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BOe(t,e,n){var r;Tn(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),Tn(typeof n.dynamicLinkDomain=="undefined"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Tn(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Tn(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vZ(t){return te(this,null,function*(){const e=Rl(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function jOe(t,e,n){return te(this,null,function*(){const r=Rl(t);yield Pb(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",MOe)})}function yZ(t,e,n){return te(this,null,function*(){if(na(t.app))return Promise.reject(vl(t));const r=Rl(t),s=yield Pb(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",OOe).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&vZ(t),l}),a=yield Yp._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function xZ(t,e,n){return na(t.app)?Promise.reject(vl(t)):gZ(Tr(t),hh.credential(e,n)).catch(r=>te(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&vZ(t),r}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UOe(t,e,n){return te(this,null,function*(){const r=Rl(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(s,a){Tn(a.handleCodeInApp,r,"argument-error"),a&&BOe(r,s,a)}o(i,n),yield Pb(r,i,"getOobCode",POe)})}function j3(t,e){const n=kT.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}function U3(t,e,n){return te(this,null,function*(){if(na(t.app))return Promise.reject(vl(t));const r=Tr(t),i=hh.credentialWithLink(e,n||OC());return Tn(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),gZ(r,i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zOe(t,e){return te(this,null,function*(){return wc(t,"POST","/v1/accounts:update",e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VOe(r,i){return te(this,arguments,function*(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const o=Tr(t),a={idToken:yield o.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=yield qp(o,zOe(o.auth,a));o.displayName=l.displayName||null,o.photoURL=l.photoUrl||null;const c=o.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=o.displayName,c.photoURL=o.photoURL),yield o._updateTokensIfNecessary(l)})}function WOe(t,e){const n=Tr(t);return na(n.auth.app)?Promise.reject(vl(n.auth)):bZ(n,e,null)}function z3(t,e){return bZ(Tr(t),null,e)}function bZ(t,e,n){return te(this,null,function*(){const{auth:r}=t,o={idToken:yield t.getIdToken(),returnSecureToken:!0};e&&(o.email=e),n&&(o.password=n);const s=yield qp(t,COe(r,o));yield t._updateTokensIfNecessary(s,!0)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Oe(t,e){return Tr(t).setPersistence(e)}function HOe(t,e,n,r){return Tr(t).onIdTokenChanged(e,n,r)}function GOe(t,e,n){return Tr(t).beforeAuthStateChanged(e,n)}function wZ(t,e,n,r){return Tr(t).onAuthStateChanged(e,n,r)}function qOe(t){return Tr(t).signOut()}const BC="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SZ{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(BC,"1"),this.storage.removeItem(BC),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KOe=1e3,YOe=10;class hv extends SZ{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lZ(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,a,l)=>{this.notifyListeners(s,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);aOe()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,YOe):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},KOe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(e,n){return te(this,null,function*(){yield Fh(hv.prototype,this,"_set").call(this,e,n),this.localCache[e]=JSON.stringify(n)})}_get(e){return te(this,null,function*(){const n=yield Fh(hv.prototype,this,"_get").call(this,e);return this.localCache[e]=JSON.stringify(n),n})}_remove(e){return te(this,null,function*(){yield Fh(hv.prototype,this,"_remove").call(this,e),delete this.localCache[e]})}}hv.type="LOCAL";const _Z=hv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EZ extends SZ{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}EZ.type="SESSION";const CZ=EZ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XOe(t){return Promise.all(t.map(e=>te(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new FT(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){return te(this,null,function*(){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(c=>te(this,null,function*(){return c(n.origin,o)})),l=yield XOe(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}FT.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V3(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QOe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return te(this,null,function*(){const i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,l)=>{const c=V3("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(f.data.response);break;default:clearTimeout(u),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(){return window}function ZOe(t){tu().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AZ(){return typeof tu().WorkerGlobalScope!="undefined"&&typeof tu().importScripts=="function"}function JOe(){return te(this,null,function*(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(t){return null}})}function eNe(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function tNe(){return AZ()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TZ="firebaseLocalStorageDb",nNe=1,jC="firebaseLocalStorage",MZ="fbase_key";class Lw{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function OT(t,e){return t.transaction([jC],e?"readwrite":"readonly").objectStore(jC)}function rNe(){const t=indexedDB.deleteDatabase(TZ);return new Lw(t).toPromise()}function yI(){const t=indexedDB.open(TZ,nNe);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(jC,{keyPath:MZ})}catch(i){n(i)}}),t.addEventListener("success",()=>te(this,null,function*(){const r=t.result;r.objectStoreNames.contains(jC)?e(r):(r.close(),yield rNe(),e(yield yI()))}))})}function R8(t,e,n){return te(this,null,function*(){const r=OT(t,!0).put({[MZ]:e,value:n});return new Lw(r).toPromise()})}function iNe(t,e){return te(this,null,function*(){const n=OT(t,!1).get(e),r=yield new Lw(n).toPromise();return r===void 0?null:r.value})}function k8(t,e){const n=OT(t,!0).delete(e);return new Lw(n).toPromise()}const oNe=800,sNe=3;class PZ{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return te(this,null,function*(){return this.db?this.db:(this.db=yield yI(),this.db)})}_withRetries(e){return te(this,null,function*(){let n=0;for(;;)try{const r=yield this._openDb();return yield e(r)}catch(r){if(n++>sNe)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return te(this,null,function*(){return AZ()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return te(this,null,function*(){this.receiver=FT._getInstance(tNe()),this.receiver._subscribe("keyChanged",(e,n)=>te(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(n.key)}})),this.receiver._subscribe("ping",(e,n)=>te(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return te(this,null,function*(){var e,n;if(this.activeServiceWorker=yield JOe(),!this.activeServiceWorker)return;this.sender=new QOe(this.activeServiceWorker);const r=yield this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(e){return te(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||eNe()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(n){}})}_isAvailable(){return te(this,null,function*(){try{if(!indexedDB)return!1;const e=yield yI();return yield R8(e,BC,"1"),yield k8(e,BC),!0}catch(e){}return!1})}_withPendingWrite(e){return te(this,null,function*(){this.pendingWrites++;try{yield e()}finally{this.pendingWrites--}})}_set(e,n){return te(this,null,function*(){return this._withPendingWrite(()=>te(this,null,function*(){return yield this._withRetries(r=>R8(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)}))})}_get(e){return te(this,null,function*(){const n=yield this._withRetries(r=>iNe(r,e));return this.localCache[e]=n,n})}_remove(e){return te(this,null,function*(){return this._withPendingWrite(()=>te(this,null,function*(){return yield this._withRetries(n=>k8(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)}))})}_poll(){return te(this,null,function*(){const e=yield this._withRetries(i=>{const o=OT(i,!1).getAll();return new Lw(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n})}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>te(this,null,function*(){return this._poll()}),oNe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}PZ.type="LOCAL";const aNe=PZ;new Fw(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(t,e){return e?Qu(e):(Tn(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3 extends B3{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fv(e,this._buildIdpRequest())}_linkToIdToken(e,n){return fv(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return fv(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function lNe(t){return mZ(t.auth,new $3(t),t.bypassAuthState)}function cNe(t){const{auth:e,user:n}=t;return Tn(n,e,"internal-error"),pZ(n,new $3(t),t.bypassAuthState)}function uNe(t){return te(this,null,function*(){const{auth:e,user:n}=t;return Tn(n,e,"internal-error"),NOe(n,new $3(t),t.bypassAuthState)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DZ{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>te(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return te(this,null,function*(){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(l))}catch(c){this.reject(c)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lNe;case"linkViaPopup":case"linkViaRedirect":return uNe;case"reauthViaPopup":case"reauthViaRedirect":return cNe;default:Cl(this.auth,"internal-error")}}resolve(e){bd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dNe=new Fw(2e3,1e4);function UC(t,e,n){return te(this,null,function*(){if(na(t.app))return Promise.reject(uc(t,"operation-not-supported-in-this-environment"));const r=Rl(t);KQ(t,e,IT);const i=W3(r,n);return new mp(r,"signInViaPopup",e,i).executeNotNull()})}class mp extends DZ{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,mp.currentPopupAction&&mp.currentPopupAction.cancel(),mp.currentPopupAction=this}executeNotNull(){return te(this,null,function*(){const e=yield this.execute();return Tn(e,this.auth,"internal-error"),e})}onExecution(){return te(this,null,function*(){bd(this.filter.length===1,"Popup operations only handle one event");const e=V3();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(uc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(uc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mp.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(uc(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dNe.get())};e()}}mp.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fNe="pendingRedirect",pE=new Map;class Sx extends DZ{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return te(this,null,function*(){let e=pE.get(this.auth._key());if(!e){try{const r=(yield hNe(this.resolver,this.auth))?yield Fh(Sx.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}pE.set(this.auth._key(),e)}return this.bypassAuthState||pE.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return te(this,null,function*(){if(e.type==="signInViaRedirect")return Fh(Sx.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Fh(Sx.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return te(this,null,function*(){})}cleanUp(){}}function hNe(t,e){return te(this,null,function*(){const n=kZ(e),r=RZ(t);if(!(yield r._isAvailable()))return!1;const i=(yield r._get(n))==="true";return yield r._remove(n),i})}function pNe(t,e){return te(this,null,function*(){return RZ(t)._set(kZ(e),"true")})}function mNe(t,e){pE.set(t._key(),e)}function RZ(t){return Qu(t._redirectPersistence)}function kZ(t){return hE(fNe,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IZ(t,e,n){return gNe(t,e,n)}function gNe(t,e,n){return te(this,null,function*(){if(na(t.app))return Promise.reject(vl(t));const r=Rl(t);KQ(t,e,IT),yield r._initializationPromise;const i=W3(r,n);return yield pNe(i,r),i._openRedirect(r,e,"signInViaRedirect")})}function FZ(t,e){return te(this,null,function*(){return yield Rl(t)._initializationPromise,OZ(t,e,!1)})}function OZ(t,e,n=!1){return te(this,null,function*(){if(na(t.app))return Promise.reject(vl(t));const r=Rl(t),i=W3(r,e),s=yield new Sx(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vNe=10*60*1e3;class yNe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xNe(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!NZ(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(uc(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vNe&&this.cachedEventUids.clear(),this.cachedEventUids.has(I8(e))}saveEventToCache(e){this.cachedEventUids.add(I8(e)),this.lastProcessedEventTime=Date.now()}}function I8(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function NZ({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function xNe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NZ(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bNe(n){return te(this,arguments,function*(t,e={}){return wc(t,"GET","/v1/projects",e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wNe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SNe=/^https?/;function _Ne(t){return te(this,null,function*(){if(t.config.emulator)return;const{authorizedDomains:e}=yield bNe(t);for(const n of e)try{if(ENe(n))return}catch(r){}Cl(t,"unauthorized-domain")})}function ENe(t){const e=OC(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!SNe.test(n))return!1;if(wNe.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CNe=new Fw(3e4,6e4);function F8(){const t=tu().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ANe(t){return new Promise((e,n)=>{var r,i,o;function s(){F8(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{F8(),n(uc(t,"network-request-failed"))},timeout:CNe.get()})}if(!((i=(r=tu().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=tu().gapi)===null||o===void 0)&&o.load)s();else{const a=gOe("iframefcb");return tu()[a]=()=>{gapi.load?s():n(uc(t,"network-request-failed"))},uZ(`${mOe()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw mE=null,e})}let mE=null;function TNe(t){return mE=mE||ANe(t),mE}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MNe=new Fw(5e3,15e3),PNe="__/auth/iframe",DNe="emulator/auth/iframe",RNe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kNe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function INe(t){const e=t.config;Tn(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?O3(e,DNe):`https://${t.config.authDomain}/${PNe}`,r={apiKey:e.apiKey,appName:t.name,v:mm},i=kNe.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${kw(r).slice(1)}`}function FNe(t){return te(this,null,function*(){const e=yield TNe(t),n=tu().gapi;return Tn(n,t,"internal-error"),e.open({where:document.body,url:INe(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RNe,dontclear:!0},r=>new Promise((i,o)=>te(this,null,function*(){yield r.restyle({setHideOnLeave:!1});const s=uc(t,"network-request-failed"),a=tu().setTimeout(()=>{o(s)},MNe.get());function l(){tu().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{o(s)})})))})}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ONe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NNe=500,LNe=600,BNe="_blank",jNe="http://localhost";class O8{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function UNe(t,e,n,r=NNe,i=LNe){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},ONe),{width:r.toString(),height:i.toString(),top:o,left:s}),c=ms().toLowerCase();n&&(a=rZ(c)?BNe:n),tZ(c)&&(e=e||jNe,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[p,b])=>`${f}${p}=${b},`,"");if(sOe(c)&&a!=="_self")return zNe(e||"",a),new O8(null);const d=window.open(e||"",a,u);Tn(d,t,"popup-blocked");try{d.focus()}catch(f){}return new O8(d)}function zNe(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VNe="__/auth/handler",WNe="emulator/auth/handler",$Ne=encodeURIComponent("fac");function N8(t,e,n,r,i,o){return te(this,null,function*(){Tn(t.config.authDomain,t,"auth-domain-config-required"),Tn(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:mm,eventId:i};if(e instanceof IT){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",TIe(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))s[u]=d}if(e instanceof Nw){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(s.scopes=u.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=yield t._getAppCheckToken(),c=l?`#${$Ne}=${encodeURIComponent(l)}`:"";return`${HNe(t)}?${kw(a).slice(1)}${c}`})}function HNe({config:t}){return t.emulator?O3(t,WNe):`https://${t.authDomain}/${VNe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP="webStorageSupport";class GNe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=CZ,this._completeRedirectFn=OZ,this._overrideRedirectResult=mNe}_openPopup(e,n,r,i){return te(this,null,function*(){var o;bd((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=yield N8(e,n,r,OC(),i);return UNe(e,s,V3())})}_openRedirect(e,n,r,i){return te(this,null,function*(){yield this._originValidation(e);const o=yield N8(e,n,r,OC(),i);return ZOe(o),new Promise(()=>{})})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(bd(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return te(this,null,function*(){const n=yield FNe(e),r=new yNe(e);return n.register("authEvent",i=>(Tn(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ZP,{type:ZP},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[ZP];s!==void 0&&n(!!s),Cl(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_Ne(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return lZ()||nZ()||L3()}}const qNe=GNe;var L8="@firebase/auth",B8="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KNe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return te(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Tn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YNe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XNe(t){El(new La("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Tn(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cZ(t)},c=new fOe(r,i,o,l);return wOe(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),El(new La("auth-internal",e=>{const n=Rl(e.getProvider("auth").getImmediate());return(r=>new KNe(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ds(L8,B8,YNe(t)),ds(L8,B8,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QNe=5*60,ZNe=OQ("authIdTokenMaxAge")||QNe;let j8=null;const JNe=t=>e=>te(rt,null,function*(){const n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ZNe)return;const i=n==null?void 0:n.token;j8!==i&&(j8=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function zC(t=Iw()){const e=Rd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=bOe(t,{popupRedirectResolver:qNe,persistence:[aNe,_Z,CZ]}),r=OQ("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=JNe(o.toString());GOe(n,s,()=>s(n.currentUser)),HOe(n,a=>s(a))}}const i=IQ("auth");return i&&SOe(n,`http://${i}`),n}function e3e(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}hOe({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=uc("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",e3e().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XNe("Browser");var t3e="firebase",n3e="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ds(t3e,n3e,"app");var U8=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dp,LZ;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,M){function T(){}T.prototype=M.prototype,P.D=M.prototype,P.prototype=new T,P.prototype.constructor=P,P.C=function(_,E,R){for(var F=Array(arguments.length-2),L=2;L<arguments.length;L++)F[L-2]=arguments[L];return M.prototype[E].apply(_,F)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,M,T){T||(T=0);var _=Array(16);if(typeof M=="string")for(var E=0;16>E;++E)_[E]=M.charCodeAt(T++)|M.charCodeAt(T++)<<8|M.charCodeAt(T++)<<16|M.charCodeAt(T++)<<24;else for(E=0;16>E;++E)_[E]=M[T++]|M[T++]<<8|M[T++]<<16|M[T++]<<24;M=P.g[0],T=P.g[1],E=P.g[2];var R=P.g[3],F=M+(R^T&(E^R))+_[0]+3614090360&4294967295;M=T+(F<<7&4294967295|F>>>25),F=R+(E^M&(T^E))+_[1]+3905402710&4294967295,R=M+(F<<12&4294967295|F>>>20),F=E+(T^R&(M^T))+_[2]+606105819&4294967295,E=R+(F<<17&4294967295|F>>>15),F=T+(M^E&(R^M))+_[3]+3250441966&4294967295,T=E+(F<<22&4294967295|F>>>10),F=M+(R^T&(E^R))+_[4]+4118548399&4294967295,M=T+(F<<7&4294967295|F>>>25),F=R+(E^M&(T^E))+_[5]+1200080426&4294967295,R=M+(F<<12&4294967295|F>>>20),F=E+(T^R&(M^T))+_[6]+2821735955&4294967295,E=R+(F<<17&4294967295|F>>>15),F=T+(M^E&(R^M))+_[7]+4249261313&4294967295,T=E+(F<<22&4294967295|F>>>10),F=M+(R^T&(E^R))+_[8]+1770035416&4294967295,M=T+(F<<7&4294967295|F>>>25),F=R+(E^M&(T^E))+_[9]+2336552879&4294967295,R=M+(F<<12&4294967295|F>>>20),F=E+(T^R&(M^T))+_[10]+4294925233&4294967295,E=R+(F<<17&4294967295|F>>>15),F=T+(M^E&(R^M))+_[11]+2304563134&4294967295,T=E+(F<<22&4294967295|F>>>10),F=M+(R^T&(E^R))+_[12]+1804603682&4294967295,M=T+(F<<7&4294967295|F>>>25),F=R+(E^M&(T^E))+_[13]+4254626195&4294967295,R=M+(F<<12&4294967295|F>>>20),F=E+(T^R&(M^T))+_[14]+2792965006&4294967295,E=R+(F<<17&4294967295|F>>>15),F=T+(M^E&(R^M))+_[15]+1236535329&4294967295,T=E+(F<<22&4294967295|F>>>10),F=M+(E^R&(T^E))+_[1]+4129170786&4294967295,M=T+(F<<5&4294967295|F>>>27),F=R+(T^E&(M^T))+_[6]+3225465664&4294967295,R=M+(F<<9&4294967295|F>>>23),F=E+(M^T&(R^M))+_[11]+643717713&4294967295,E=R+(F<<14&4294967295|F>>>18),F=T+(R^M&(E^R))+_[0]+3921069994&4294967295,T=E+(F<<20&4294967295|F>>>12),F=M+(E^R&(T^E))+_[5]+3593408605&4294967295,M=T+(F<<5&4294967295|F>>>27),F=R+(T^E&(M^T))+_[10]+38016083&4294967295,R=M+(F<<9&4294967295|F>>>23),F=E+(M^T&(R^M))+_[15]+3634488961&4294967295,E=R+(F<<14&4294967295|F>>>18),F=T+(R^M&(E^R))+_[4]+3889429448&4294967295,T=E+(F<<20&4294967295|F>>>12),F=M+(E^R&(T^E))+_[9]+568446438&4294967295,M=T+(F<<5&4294967295|F>>>27),F=R+(T^E&(M^T))+_[14]+3275163606&4294967295,R=M+(F<<9&4294967295|F>>>23),F=E+(M^T&(R^M))+_[3]+4107603335&4294967295,E=R+(F<<14&4294967295|F>>>18),F=T+(R^M&(E^R))+_[8]+1163531501&4294967295,T=E+(F<<20&4294967295|F>>>12),F=M+(E^R&(T^E))+_[13]+2850285829&4294967295,M=T+(F<<5&4294967295|F>>>27),F=R+(T^E&(M^T))+_[2]+4243563512&4294967295,R=M+(F<<9&4294967295|F>>>23),F=E+(M^T&(R^M))+_[7]+1735328473&4294967295,E=R+(F<<14&4294967295|F>>>18),F=T+(R^M&(E^R))+_[12]+2368359562&4294967295,T=E+(F<<20&4294967295|F>>>12),F=M+(T^E^R)+_[5]+4294588738&4294967295,M=T+(F<<4&4294967295|F>>>28),F=R+(M^T^E)+_[8]+2272392833&4294967295,R=M+(F<<11&4294967295|F>>>21),F=E+(R^M^T)+_[11]+1839030562&4294967295,E=R+(F<<16&4294967295|F>>>16),F=T+(E^R^M)+_[14]+4259657740&4294967295,T=E+(F<<23&4294967295|F>>>9),F=M+(T^E^R)+_[1]+2763975236&4294967295,M=T+(F<<4&4294967295|F>>>28),F=R+(M^T^E)+_[4]+1272893353&4294967295,R=M+(F<<11&4294967295|F>>>21),F=E+(R^M^T)+_[7]+4139469664&4294967295,E=R+(F<<16&4294967295|F>>>16),F=T+(E^R^M)+_[10]+3200236656&4294967295,T=E+(F<<23&4294967295|F>>>9),F=M+(T^E^R)+_[13]+681279174&4294967295,M=T+(F<<4&4294967295|F>>>28),F=R+(M^T^E)+_[0]+3936430074&4294967295,R=M+(F<<11&4294967295|F>>>21),F=E+(R^M^T)+_[3]+3572445317&4294967295,E=R+(F<<16&4294967295|F>>>16),F=T+(E^R^M)+_[6]+76029189&4294967295,T=E+(F<<23&4294967295|F>>>9),F=M+(T^E^R)+_[9]+3654602809&4294967295,M=T+(F<<4&4294967295|F>>>28),F=R+(M^T^E)+_[12]+3873151461&4294967295,R=M+(F<<11&4294967295|F>>>21),F=E+(R^M^T)+_[15]+530742520&4294967295,E=R+(F<<16&4294967295|F>>>16),F=T+(E^R^M)+_[2]+3299628645&4294967295,T=E+(F<<23&4294967295|F>>>9),F=M+(E^(T|~R))+_[0]+4096336452&4294967295,M=T+(F<<6&4294967295|F>>>26),F=R+(T^(M|~E))+_[7]+1126891415&4294967295,R=M+(F<<10&4294967295|F>>>22),F=E+(M^(R|~T))+_[14]+2878612391&4294967295,E=R+(F<<15&4294967295|F>>>17),F=T+(R^(E|~M))+_[5]+4237533241&4294967295,T=E+(F<<21&4294967295|F>>>11),F=M+(E^(T|~R))+_[12]+1700485571&4294967295,M=T+(F<<6&4294967295|F>>>26),F=R+(T^(M|~E))+_[3]+2399980690&4294967295,R=M+(F<<10&4294967295|F>>>22),F=E+(M^(R|~T))+_[10]+4293915773&4294967295,E=R+(F<<15&4294967295|F>>>17),F=T+(R^(E|~M))+_[1]+2240044497&4294967295,T=E+(F<<21&4294967295|F>>>11),F=M+(E^(T|~R))+_[8]+1873313359&4294967295,M=T+(F<<6&4294967295|F>>>26),F=R+(T^(M|~E))+_[15]+4264355552&4294967295,R=M+(F<<10&4294967295|F>>>22),F=E+(M^(R|~T))+_[6]+2734768916&4294967295,E=R+(F<<15&4294967295|F>>>17),F=T+(R^(E|~M))+_[13]+1309151649&4294967295,T=E+(F<<21&4294967295|F>>>11),F=M+(E^(T|~R))+_[4]+4149444226&4294967295,M=T+(F<<6&4294967295|F>>>26),F=R+(T^(M|~E))+_[11]+3174756917&4294967295,R=M+(F<<10&4294967295|F>>>22),F=E+(M^(R|~T))+_[2]+718787259&4294967295,E=R+(F<<15&4294967295|F>>>17),F=T+(R^(E|~M))+_[9]+3951481745&4294967295,P.g[0]=P.g[0]+M&4294967295,P.g[1]=P.g[1]+(E+(F<<21&4294967295|F>>>11))&4294967295,P.g[2]=P.g[2]+E&4294967295,P.g[3]=P.g[3]+R&4294967295}r.prototype.u=function(P,M){M===void 0&&(M=P.length);for(var T=M-this.blockSize,_=this.B,E=this.h,R=0;R<M;){if(E==0)for(;R<=T;)i(this,P,R),R+=this.blockSize;if(typeof P=="string"){for(;R<M;)if(_[E++]=P.charCodeAt(R++),E==this.blockSize){i(this,_),E=0;break}}else for(;R<M;)if(_[E++]=P[R++],E==this.blockSize){i(this,_),E=0;break}}this.h=E,this.o+=M},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var M=1;M<P.length-8;++M)P[M]=0;var T=8*this.o;for(M=P.length-8;M<P.length;++M)P[M]=T&255,T/=256;for(this.u(P),P=Array(16),M=T=0;4>M;++M)for(var _=0;32>_;_+=8)P[T++]=this.g[M]>>>_&255;return P};function o(P,M){var T=a;return Object.prototype.hasOwnProperty.call(T,P)?T[P]:T[P]=M(P)}function s(P,M){this.h=M;for(var T=[],_=!0,E=P.length-1;0<=E;E--){var R=P[E]|0;_&&R==M||(T[E]=R,_=!1)}this.g=T}var a={};function l(P){return-128<=P&&128>P?o(P,function(M){return new s([M|0],0>M?-1:0)}):new s([P|0],0>P?-1:0)}function c(P){if(isNaN(P)||!isFinite(P))return d;if(0>P)return m(c(-P));for(var M=[],T=1,_=0;P>=T;_++)M[_]=P/T|0,T*=4294967296;return new s(M,0)}function u(P,M){if(P.length==0)throw Error("number format error: empty string");if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(P.charAt(0)=="-")return m(u(P.substring(1),M));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(M,8)),_=d,E=0;E<P.length;E+=8){var R=Math.min(8,P.length-E),F=parseInt(P.substring(E,E+R),M);8>R?(R=c(Math.pow(M,R)),_=_.j(R).add(c(F))):(_=_.j(T),_=_.add(c(F)))}return _}var d=l(0),f=l(1),p=l(16777216);t=s.prototype,t.m=function(){if(v(this))return-m(this).m();for(var P=0,M=1,T=0;T<this.g.length;T++){var _=this.i(T);P+=(0<=_?_:4294967296+_)*M,M*=4294967296}return P},t.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(b(this))return"0";if(v(this))return"-"+m(this).toString(P);for(var M=c(Math.pow(P,6)),T=this,_="";;){var E=S(T,M).g;T=g(T,E.j(M));var R=((0<T.g.length?T.g[0]:T.h)>>>0).toString(P);if(T=E,b(T))return R+_;for(;6>R.length;)R="0"+R;_=R+_}},t.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function b(P){if(P.h!=0)return!1;for(var M=0;M<P.g.length;M++)if(P.g[M]!=0)return!1;return!0}function v(P){return P.h==-1}t.l=function(P){return P=g(this,P),v(P)?-1:b(P)?0:1};function m(P){for(var M=P.g.length,T=[],_=0;_<M;_++)T[_]=~P.g[_];return new s(T,~P.h).add(f)}t.abs=function(){return v(this)?m(this):this},t.add=function(P){for(var M=Math.max(this.g.length,P.g.length),T=[],_=0,E=0;E<=M;E++){var R=_+(this.i(E)&65535)+(P.i(E)&65535),F=(R>>>16)+(this.i(E)>>>16)+(P.i(E)>>>16);_=F>>>16,R&=65535,F&=65535,T[E]=F<<16|R}return new s(T,T[T.length-1]&-2147483648?-1:0)};function g(P,M){return P.add(m(M))}t.j=function(P){if(b(this)||b(P))return d;if(v(this))return v(P)?m(this).j(m(P)):m(m(this).j(P));if(v(P))return m(this.j(m(P)));if(0>this.l(p)&&0>P.l(p))return c(this.m()*P.m());for(var M=this.g.length+P.g.length,T=[],_=0;_<2*M;_++)T[_]=0;for(_=0;_<this.g.length;_++)for(var E=0;E<P.g.length;E++){var R=this.i(_)>>>16,F=this.i(_)&65535,L=P.i(E)>>>16,N=P.i(E)&65535;T[2*_+2*E]+=F*N,x(T,2*_+2*E),T[2*_+2*E+1]+=R*N,x(T,2*_+2*E+1),T[2*_+2*E+1]+=F*L,x(T,2*_+2*E+1),T[2*_+2*E+2]+=R*L,x(T,2*_+2*E+2)}for(_=0;_<M;_++)T[_]=T[2*_+1]<<16|T[2*_];for(_=M;_<2*M;_++)T[_]=0;return new s(T,0)};function x(P,M){for(;(P[M]&65535)!=P[M];)P[M+1]+=P[M]>>>16,P[M]&=65535,M++}function w(P,M){this.g=P,this.h=M}function S(P,M){if(b(M))throw Error("division by zero");if(b(P))return new w(d,d);if(v(P))return M=S(m(P),M),new w(m(M.g),m(M.h));if(v(M))return M=S(P,m(M)),new w(m(M.g),M.h);if(30<P.g.length){if(v(P)||v(M))throw Error("slowDivide_ only works with positive integers.");for(var T=f,_=M;0>=_.l(P);)T=D(T),_=D(_);var E=k(T,1),R=k(_,1);for(_=k(_,2),T=k(T,2);!b(_);){var F=R.add(_);0>=F.l(P)&&(E=E.add(T),R=F),_=k(_,1),T=k(T,1)}return M=g(P,E.j(M)),new w(E,M)}for(E=d;0<=P.l(M);){for(T=Math.max(1,Math.floor(P.m()/M.m())),_=Math.ceil(Math.log(T)/Math.LN2),_=48>=_?1:Math.pow(2,_-48),R=c(T),F=R.j(M);v(F)||0<F.l(P);)T-=_,R=c(T),F=R.j(M);b(R)&&(R=f),E=E.add(R),P=g(P,F)}return new w(E,P)}t.A=function(P){return S(this,P).h},t.and=function(P){for(var M=Math.max(this.g.length,P.g.length),T=[],_=0;_<M;_++)T[_]=this.i(_)&P.i(_);return new s(T,this.h&P.h)},t.or=function(P){for(var M=Math.max(this.g.length,P.g.length),T=[],_=0;_<M;_++)T[_]=this.i(_)|P.i(_);return new s(T,this.h|P.h)},t.xor=function(P){for(var M=Math.max(this.g.length,P.g.length),T=[],_=0;_<M;_++)T[_]=this.i(_)^P.i(_);return new s(T,this.h^P.h)};function D(P){for(var M=P.g.length+1,T=[],_=0;_<M;_++)T[_]=P.i(_)<<1|P.i(_-1)>>>31;return new s(T,P.h)}function k(P,M){var T=M>>5;M%=32;for(var _=P.g.length-T,E=[],R=0;R<_;R++)E[R]=0<M?P.i(R+T)>>>M|P.i(R+T+1)<<32-M:P.i(R+T);return new s(E,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,LZ=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=c,s.fromString=u,Dp=s}).apply(typeof U8!="undefined"?U8:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var OS=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var BZ,Gy,jZ,gE,xI,UZ,zZ,VZ;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(I,X,ie){return I==Array.prototype||I==Object.prototype||(I[X]=ie.value),I};function n(I){I=[typeof globalThis=="object"&&globalThis,I,typeof window=="object"&&window,typeof self=="object"&&self,typeof OS=="object"&&OS];for(var X=0;X<I.length;++X){var ie=I[X];if(ie&&ie.Math==Math)return ie}throw Error("Cannot find global object")}var r=n(this);function i(I,X){if(X)e:{var ie=r;I=I.split(".");for(var we=0;we<I.length-1;we++){var ot=I[we];if(!(ot in ie))break e;ie=ie[ot]}I=I[I.length-1],we=ie[I],X=X(we),X!=we&&X!=null&&e(ie,I,{configurable:!0,writable:!0,value:X})}}function o(I,X){I instanceof String&&(I+="");var ie=0,we=!1,ot={next:function(){if(!we&&ie<I.length){var mt=ie++;return{value:X(mt,I[mt]),done:!1}}return we=!0,{done:!0,value:void 0}}};return ot[Symbol.iterator]=function(){return ot},ot}i("Array.prototype.values",function(I){return I||function(){return o(this,function(X,ie){return ie})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(I){var X=typeof I;return X=X!="object"?X:I?Array.isArray(I)?"array":X:"null",X=="array"||X=="object"&&typeof I.length=="number"}function c(I){var X=typeof I;return X=="object"&&I!=null||X=="function"}function u(I,X,ie){return I.call.apply(I.bind,arguments)}function d(I,X,ie){if(!I)throw Error();if(2<arguments.length){var we=Array.prototype.slice.call(arguments,2);return function(){var ot=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ot,we),I.apply(X,ot)}}return function(){return I.apply(X,arguments)}}function f(I,X,ie){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function p(I,X){var ie=Array.prototype.slice.call(arguments,1);return function(){var we=ie.slice();return we.push.apply(we,arguments),I.apply(this,we)}}function b(I,X){function ie(){}ie.prototype=X.prototype,I.aa=X.prototype,I.prototype=new ie,I.prototype.constructor=I,I.Qb=function(we,ot,mt){for(var Gt=Array(arguments.length-2),Ur=2;Ur<arguments.length;Ur++)Gt[Ur-2]=arguments[Ur];return X.prototype[ot].apply(we,Gt)}}function v(I){const X=I.length;if(0<X){const ie=Array(X);for(let we=0;we<X;we++)ie[we]=I[we];return ie}return[]}function m(I,X){for(let ie=1;ie<arguments.length;ie++){const we=arguments[ie];if(l(we)){const ot=I.length||0,mt=we.length||0;I.length=ot+mt;for(let Gt=0;Gt<mt;Gt++)I[ot+Gt]=we[Gt]}else I.push(we)}}class g{constructor(X,ie){this.i=X,this.j=ie,this.h=0,this.g=null}get(){let X;return 0<this.h?(this.h--,X=this.g,this.g=X.next,X.next=null):X=this.i(),X}}function x(I){return/^[\s\xa0]*$/.test(I)}function w(){var I=a.navigator;return I&&(I=I.userAgent)?I:""}function S(I){return S[" "](I),I}S[" "]=function(){};var D=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function k(I,X,ie){for(const we in I)X.call(ie,I[we],we,I)}function P(I,X){for(const ie in I)X.call(void 0,I[ie],ie,I)}function M(I){const X={};for(const ie in I)X[ie]=I[ie];return X}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(I,X){let ie,we;for(let ot=1;ot<arguments.length;ot++){we=arguments[ot];for(ie in we)I[ie]=we[ie];for(let mt=0;mt<T.length;mt++)ie=T[mt],Object.prototype.hasOwnProperty.call(we,ie)&&(I[ie]=we[ie])}}function E(I){var X=1;I=I.split(":");const ie=[];for(;0<X&&I.length;)ie.push(I.shift()),X--;return I.length&&ie.push(I.join(":")),ie}function R(I){a.setTimeout(()=>{throw I},0)}function F(){var I=z;let X=null;return I.g&&(X=I.g,I.g=I.g.next,I.g||(I.h=null),X.next=null),X}class L{constructor(){this.h=this.g=null}add(X,ie){const we=N.get();we.set(X,ie),this.h?this.h.next=we:this.g=we,this.h=we}}var N=new g(()=>new U,I=>I.reset());class U{constructor(){this.next=this.g=this.h=null}set(X,ie){this.h=X,this.g=ie,this.next=null}reset(){this.next=this.g=this.h=null}}let H,j=!1,z=new L,q=()=>{const I=a.Promise.resolve(void 0);H=()=>{I.then($)}};var $=()=>{for(var I;I=F();){try{I.h.call(I.g)}catch(ie){R(ie)}var X=N;X.j(I),100>X.h&&(X.h++,I.next=X.g,X.g=I)}j=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(I,X){this.type=I,this.g=this.target=X,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var I=!1,X=Object.defineProperty({},"passive",{get:function(){I=!0}});try{const ie=()=>{};a.addEventListener("test",ie,X),a.removeEventListener("test",ie,X)}catch(ie){}return I}();function J(I,X){if(G.call(this,I?I.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,I){var ie=this.type=I.type,we=I.changedTouches&&I.changedTouches.length?I.changedTouches[0]:null;if(this.target=I.target||I.srcElement,this.g=X,X=I.relatedTarget){if(D){e:{try{S(X.nodeName);var ot=!0;break e}catch(mt){}ot=!1}ot||(X=null)}}else ie=="mouseover"?X=I.fromElement:ie=="mouseout"&&(X=I.toElement);this.relatedTarget=X,we?(this.clientX=we.clientX!==void 0?we.clientX:we.pageX,this.clientY=we.clientY!==void 0?we.clientY:we.pageY,this.screenX=we.screenX||0,this.screenY=we.screenY||0):(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0),this.button=I.button,this.key=I.key||"",this.ctrlKey=I.ctrlKey,this.altKey=I.altKey,this.shiftKey=I.shiftKey,this.metaKey=I.metaKey,this.pointerId=I.pointerId||0,this.pointerType=typeof I.pointerType=="string"?I.pointerType:V[I.pointerType]||"",this.state=I.state,this.i=I,I.defaultPrevented&&J.aa.h.call(this)}}b(J,G);var V={2:"touch",3:"pen",4:"mouse"};J.prototype.h=function(){J.aa.h.call(this);var I=this.i;I.preventDefault?I.preventDefault():I.returnValue=!1};var re="closure_listenable_"+(1e6*Math.random()|0),fe=0;function pe(I,X,ie,we,ot){this.listener=I,this.proxy=null,this.src=X,this.type=ie,this.capture=!!we,this.ha=ot,this.key=++fe,this.da=this.fa=!1}function ce(I){I.da=!0,I.listener=null,I.proxy=null,I.src=null,I.ha=null}function xe(I){this.src=I,this.g={},this.h=0}xe.prototype.add=function(I,X,ie,we,ot){var mt=I.toString();I=this.g[mt],I||(I=this.g[mt]=[],this.h++);var Gt=Ee(I,X,we,ot);return-1<Gt?(X=I[Gt],ie||(X.fa=!1)):(X=new pe(X,this.src,mt,!!we,ot),X.fa=ie,I.push(X)),X};function Ae(I,X){var ie=X.type;if(ie in I.g){var we=I.g[ie],ot=Array.prototype.indexOf.call(we,X,void 0),mt;(mt=0<=ot)&&Array.prototype.splice.call(we,ot,1),mt&&(ce(X),I.g[ie].length==0&&(delete I.g[ie],I.h--))}}function Ee(I,X,ie,we){for(var ot=0;ot<I.length;++ot){var mt=I[ot];if(!mt.da&&mt.listener==X&&mt.capture==!!ie&&mt.ha==we)return ot}return-1}var ee="closure_lm_"+(1e6*Math.random()|0),Oe={};function le(I,X,ie,we,ot){if(Array.isArray(X)){for(var mt=0;mt<X.length;mt++)le(I,X[mt],ie,we,ot);return null}return ie=Me(ie),I&&I[re]?I.K(X,ie,c(we)?!!we.capture:!1,ot):me(I,X,ie,!1,we,ot)}function me(I,X,ie,we,ot,mt){if(!X)throw Error("Invalid event type");var Gt=c(ot)?!!ot.capture:!!ot,Ur=ve(I);if(Ur||(I[ee]=Ur=new xe(I)),ie=Ur.add(X,ie,we,Gt,mt),ie.proxy)return ie;if(we=ne(),ie.proxy=we,we.src=I,we.listener=ie,I.addEventListener)Y||(ot=Gt),ot===void 0&&(ot=!1),I.addEventListener(X.toString(),we,ot);else if(I.attachEvent)I.attachEvent(Q(X.toString()),we);else if(I.addListener&&I.removeListener)I.addListener(we);else throw Error("addEventListener and attachEvent are unavailable.");return ie}function ne(){function I(ie){return X.call(I.src,I.listener,ie)}const X=W;return I}function se(I,X,ie,we,ot){if(Array.isArray(X))for(var mt=0;mt<X.length;mt++)se(I,X[mt],ie,we,ot);else we=c(we)?!!we.capture:!!we,ie=Me(ie),I&&I[re]?(I=I.i,X=String(X).toString(),X in I.g&&(mt=I.g[X],ie=Ee(mt,ie,we,ot),-1<ie&&(ce(mt[ie]),Array.prototype.splice.call(mt,ie,1),mt.length==0&&(delete I.g[X],I.h--)))):I&&(I=ve(I))&&(X=I.g[X.toString()],I=-1,X&&(I=Ee(X,ie,we,ot)),(ie=-1<I?X[I]:null)&&ge(ie))}function ge(I){if(typeof I!="number"&&I&&!I.da){var X=I.src;if(X&&X[re])Ae(X.i,I);else{var ie=I.type,we=I.proxy;X.removeEventListener?X.removeEventListener(ie,we,I.capture):X.detachEvent?X.detachEvent(Q(ie),we):X.addListener&&X.removeListener&&X.removeListener(we),(ie=ve(X))?(Ae(ie,I),ie.h==0&&(ie.src=null,X[ee]=null)):ce(I)}}}function Q(I){return I in Oe?Oe[I]:Oe[I]="on"+I}function W(I,X){if(I.da)I=!0;else{X=new J(X,this);var ie=I.listener,we=I.ha||I.src;I.fa&&ge(I),I=ie.call(we,X)}return I}function ve(I){return I=I[ee],I instanceof xe?I:null}var ue="__closure_events_fn_"+(1e9*Math.random()>>>0);function Me(I){return typeof I=="function"?I:(I[ue]||(I[ue]=function(X){return I.handleEvent(X)}),I[ue])}function Pe(){K.call(this),this.i=new xe(this),this.M=this,this.F=null}b(Pe,K),Pe.prototype[re]=!0,Pe.prototype.removeEventListener=function(I,X,ie,we){se(this,I,X,ie,we)};function je(I,X){var ie,we=I.F;if(we)for(ie=[];we;we=we.F)ie.push(we);if(I=I.M,we=X.type||X,typeof X=="string")X=new G(X,I);else if(X instanceof G)X.target=X.target||I;else{var ot=X;X=new G(we,I),_(X,ot)}if(ot=!0,ie)for(var mt=ie.length-1;0<=mt;mt--){var Gt=X.g=ie[mt];ot=ke(Gt,we,!0,X)&&ot}if(Gt=X.g=I,ot=ke(Gt,we,!0,X)&&ot,ot=ke(Gt,we,!1,X)&&ot,ie)for(mt=0;mt<ie.length;mt++)Gt=X.g=ie[mt],ot=ke(Gt,we,!1,X)&&ot}Pe.prototype.N=function(){if(Pe.aa.N.call(this),this.i){var I=this.i,X;for(X in I.g){for(var ie=I.g[X],we=0;we<ie.length;we++)ce(ie[we]);delete I.g[X],I.h--}}this.F=null},Pe.prototype.K=function(I,X,ie,we){return this.i.add(String(I),X,!1,ie,we)},Pe.prototype.L=function(I,X,ie,we){return this.i.add(String(I),X,!0,ie,we)};function ke(I,X,ie,we){if(X=I.i.g[String(X)],!X)return!0;X=X.concat();for(var ot=!0,mt=0;mt<X.length;++mt){var Gt=X[mt];if(Gt&&!Gt.da&&Gt.capture==ie){var Ur=Gt.listener,vo=Gt.ha||Gt.src;Gt.fa&&Ae(I.i,Gt),ot=Ur.call(vo,we)!==!1&&ot}}return ot&&!we.defaultPrevented}function De(I,X,ie){if(typeof I=="function")ie&&(I=f(I,ie));else if(I&&typeof I.handleEvent=="function")I=f(I.handleEvent,I);else throw Error("Invalid listener argument");return 2147483647<Number(X)?-1:a.setTimeout(I,X||0)}function nt(I){I.g=De(()=>{I.g=null,I.i&&(I.i=!1,nt(I))},I.l);const X=I.h;I.h=null,I.m.apply(null,X)}class be extends K{constructor(X,ie){super(),this.m=X,this.l=ie,this.h=null,this.i=!1,this.g=null}j(X){this.h=arguments,this.g?this.i=!0:nt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ne(I){K.call(this),this.h=I,this.g={}}b(Ne,K);var Ie=[];function Ve(I){k(I.g,function(X,ie){this.g.hasOwnProperty(ie)&&ge(X)},I),I.g={}}Ne.prototype.N=function(){Ne.aa.N.call(this),Ve(this)},Ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ue=a.JSON.stringify,tt=a.JSON.parse,st=class{stringify(I){return a.JSON.stringify(I,void 0)}parse(I){return a.JSON.parse(I,void 0)}};function vt(){}vt.prototype.h=null;function Fe(I){return I.h||(I.h=I.i())}function ct(){}var Ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ft(){G.call(this,"d")}b(ft,G);function _t(){G.call(this,"c")}b(_t,G);var lt={},Lt=null;function nn(){return Lt=Lt||new Pe}lt.La="serverreachability";function sn(I){G.call(this,lt.La,I)}b(sn,G);function Ce(I){const X=nn();je(X,new sn(X))}lt.STAT_EVENT="statevent";function ze(I,X){G.call(this,lt.STAT_EVENT,I),this.stat=X}b(ze,G);function Qe(I){const X=nn();je(X,new ze(X,I))}lt.Ma="timingevent";function gt(I,X){G.call(this,lt.Ma,I),this.size=X}b(gt,G);function Rt(I,X){if(typeof I!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){I()},X)}function Bt(){this.g=!0}Bt.prototype.xa=function(){this.g=!1};function tn(I,X,ie,we,ot,mt){I.info(function(){if(I.g)if(mt)for(var Gt="",Ur=mt.split("&"),vo=0;vo<Ur.length;vo++){var Sr=Ur[vo].split("=");if(1<Sr.length){var Kr=Sr[0];Sr=Sr[1];var io=Kr.split("_");Gt=2<=io.length&&io[1]=="type"?Gt+(Kr+"="+Sr+"&"):Gt+(Kr+"=redacted&")}}else Gt=null;else Gt=mt;return"XMLHTTP REQ ("+we+") [attempt "+ot+"]: "+X+`
`+ie+`
`+Gt})}function Ht(I,X,ie,we,ot,mt,Gt){I.info(function(){return"XMLHTTP RESP ("+we+") [ attempt "+ot+"]: "+X+`
`+ie+`
`+mt+" "+Gt})}function Qt(I,X,ie,we){I.info(function(){return"XMLHTTP TEXT ("+X+"): "+pn(I,ie)+(we?" "+we:"")})}function Vt(I,X){I.info(function(){return"TIMEOUT: "+X})}Bt.prototype.info=function(){};function pn(I,X){if(!I.g)return X;if(!X)return null;try{var ie=JSON.parse(X);if(ie){for(I=0;I<ie.length;I++)if(Array.isArray(ie[I])){var we=ie[I];if(!(2>we.length)){var ot=we[1];if(Array.isArray(ot)&&!(1>ot.length)){var mt=ot[0];if(mt!="noop"&&mt!="stop"&&mt!="close")for(var Gt=1;Gt<ot.length;Gt++)ot[Gt]=""}}}}return Ue(ie)}catch(Ur){return X}}var vn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},tr;function qr(){}b(qr,vt),qr.prototype.g=function(){return new XMLHttpRequest},qr.prototype.i=function(){return{}},tr=new qr;function hr(I,X,ie,we){this.j=I,this.i=X,this.l=ie,this.R=we||1,this.U=new Ne(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Jn}function Jn(){this.i=null,this.g="",this.h=!1}var xn={},Te={};function Je(I,X,ie){I.L=1,I.v=gi(sr(X)),I.m=ie,I.P=!0,ae(I,null)}function ae(I,X){I.F=Date.now(),Ke(I),I.A=sr(I.v);var ie=I.A,we=I.R;Array.isArray(we)||(we=[String(we)]),yh(ie.i,"t",we),I.C=0,ie=I.j.J,I.h=new Jn,I.g=c1(I.j,ie?X:null,!I.m),0<I.O&&(I.M=new be(f(I.Y,I,I.g),I.O)),X=I.U,ie=I.g,we=I.ca;var ot="readystatechange";Array.isArray(ot)||(ot&&(Ie[0]=ot.toString()),ot=Ie);for(var mt=0;mt<ot.length;mt++){var Gt=le(ie,ot[mt],we||X.handleEvent,!1,X.h||X);if(!Gt)break;X.g[Gt.key]=Gt}X=I.H?M(I.H):{},I.m?(I.u||(I.u="POST"),X["Content-Type"]="application/x-www-form-urlencoded",I.g.ea(I.A,I.u,I.m,X)):(I.u="GET",I.g.ea(I.A,I.u,null,X)),Ce(),tn(I.i,I.u,I.A,I.l,I.R,I.m)}hr.prototype.ca=function(I){I=I.target;const X=this.M;X&&Qr(I)==3?X.j():this.Y(I)},hr.prototype.Y=function(I){try{if(I==this.g)e:{const io=Qr(this.g);var X=this.g.Ba();const Ha=this.g.Z();if(!(3>io)&&(io!=3||this.g&&(this.h.h||this.g.oa()||go(this.g)))){this.J||io!=4||X==7||(X==8||0>=Ha?Ce(3):Ce(2)),wt(this);var ie=this.g.Z();this.X=ie;t:if(Le(this)){var we=go(this.g);I="";var ot=we.length,mt=Qr(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){Mt(this),kt(this);var Gt="";break t}this.h.i=new a.TextDecoder}for(X=0;X<ot;X++)this.h.h=!0,I+=this.h.i.decode(we[X],{stream:!(mt&&X==ot-1)});we.length=0,this.h.g+=I,this.C=0,Gt=this.h.g}else Gt=this.g.oa();if(this.o=ie==200,Ht(this.i,this.u,this.A,this.l,this.R,io,ie),this.o){if(this.T&&!this.K){t:{if(this.g){var Ur,vo=this.g;if((Ur=vo.g?vo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Ur)){var Sr=Ur;break t}}Sr=null}if(ie=Sr)Qt(this.i,this.l,ie,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wt(this,ie);else{this.o=!1,this.s=3,Qe(12),Mt(this),kt(this);break e}}if(this.P){ie=!0;let Ws;for(;!this.J&&this.C<Gt.length;)if(Ws=et(this,Gt),Ws==Te){io==4&&(this.s=4,Qe(14),ie=!1),Qt(this.i,this.l,null,"[Incomplete Response]");break}else if(Ws==xn){this.s=4,Qe(15),Qt(this.i,this.l,Gt,"[Invalid Chunk]"),ie=!1;break}else Qt(this.i,this.l,Ws,null),Wt(this,Ws);if(Le(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),io!=4||Gt.length!=0||this.h.h||(this.s=1,Qe(16),ie=!1),this.o=this.o&&ie,!ie)Qt(this.i,this.l,Gt,"[Invalid Chunked Response]"),Mt(this),kt(this);else if(0<Gt.length&&!this.W){this.W=!0;var Kr=this.j;Kr.g==this&&Kr.ba&&!Kr.M&&(Kr.j.info("Great, no buffering proxy detected. Bytes received: "+Gt.length),$a(Kr),Kr.M=!0,Qe(11))}}else Qt(this.i,this.l,Gt,null),Wt(this,Gt);io==4&&Mt(this),this.o&&!this.J&&(io==4?li(this.j,this):(this.o=!1,Ke(this)))}else Ol(this.g),ie==400&&0<Gt.indexOf("Unknown SID")?(this.s=3,Qe(12)):(this.s=0,Qe(13)),Mt(this),kt(this)}}}catch(io){}finally{}};function Le(I){return I.g?I.u=="GET"&&I.L!=2&&I.j.Ca:!1}function et(I,X){var ie=I.C,we=X.indexOf(`
`,ie);return we==-1?Te:(ie=Number(X.substring(ie,we)),isNaN(ie)?xn:(we+=1,we+ie>X.length?Te:(X=X.slice(we,we+ie),I.C=we+ie,X)))}hr.prototype.cancel=function(){this.J=!0,Mt(this)};function Ke(I){I.S=Date.now()+I.I,We(I,I.I)}function We(I,X){if(I.B!=null)throw Error("WatchDog timer not null");I.B=Rt(f(I.ba,I),X)}function wt(I){I.B&&(a.clearTimeout(I.B),I.B=null)}hr.prototype.ba=function(){this.B=null;const I=Date.now();0<=I-this.S?(Vt(this.i,this.A),this.L!=2&&(Ce(),Qe(17)),Mt(this),this.s=2,kt(this)):We(this,this.S-I)};function kt(I){I.j.G==0||I.J||li(I.j,I)}function Mt(I){wt(I);var X=I.M;X&&typeof X.ma=="function"&&X.ma(),I.M=null,Ve(I.U),I.g&&(X=I.g,I.g=null,X.abort(),X.ma())}function Wt(I,X){try{var ie=I.j;if(ie.G!=0&&(ie.g==I||$n(ie.h,I))){if(!I.K&&$n(ie.h,I)&&ie.G==3){try{var we=ie.Da.g.parse(X)}catch(Sr){we=null}if(Array.isArray(we)&&we.length==3){var ot=we;if(ot[0]==0){e:if(!ie.u){if(ie.g)if(ie.g.F+3e3<I.F)Bd(ie),bh(ie);else break e;Mm(ie),Qe(18)}}else ie.za=ot[1],0<ie.za-ie.T&&37500>ot[2]&&ie.F&&ie.v==0&&!ie.C&&(ie.C=Rt(f(ie.Za,ie),6e3));if(1>=un(ie.h)&&ie.ca){try{ie.ca()}catch(Sr){}ie.ca=void 0}}else Ll(ie,11)}else if((I.K||ie.g==I)&&Bd(ie),!x(X))for(ot=ie.Da.g.parse(X),X=0;X<ot.length;X++){let Sr=ot[X];if(ie.T=Sr[0],Sr=Sr[1],ie.G==2)if(Sr[0]=="c"){ie.K=Sr[1],ie.ia=Sr[2];const Kr=Sr[3];Kr!=null&&(ie.la=Kr,ie.j.info("VER="+ie.la));const io=Sr[4];io!=null&&(ie.Aa=io,ie.j.info("SVER="+ie.Aa));const Ha=Sr[5];Ha!=null&&typeof Ha=="number"&&0<Ha&&(we=1.5*Ha,ie.L=we,ie.j.info("backChannelRequestTimeoutMs_="+we)),we=ie;const Ws=I.g;if(Ws){const Ch=Ws.g?Ws.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ch){var mt=we.h;mt.g||Ch.indexOf("spdy")==-1&&Ch.indexOf("quic")==-1&&Ch.indexOf("h2")==-1||(mt.j=mt.l,mt.g=new Set,mt.h&&(br(mt,mt.h),mt.h=null))}if(we.D){const R0=Ws.g?Ws.g.getResponseHeader("X-HTTP-Session-Id"):null;R0&&(we.ya=R0,Hn(we.I,we.D,R0))}}ie.G=3,ie.l&&ie.l.ua(),ie.ba&&(ie.R=Date.now()-I.F,ie.j.info("Handshake RTT: "+ie.R+"ms")),we=ie;var Gt=I;if(we.qa=Pm(we,we.J?we.ia:null,we.W),Gt.K){_e(we.h,Gt);var Ur=Gt,vo=we.L;vo&&(Ur.I=vo),Ur.B&&(wt(Ur),Ke(Ur)),we.g=Gt}else a1(we);0<ie.i.length&&wh(ie)}else Sr[0]!="stop"&&Sr[0]!="close"||Ll(ie,7);else ie.G==3&&(Sr[0]=="stop"||Sr[0]=="close"?Sr[0]=="stop"?Ll(ie,7):yu(ie):Sr[0]!="noop"&&ie.l&&ie.l.ta(Sr),ie.v=0)}}Ce(4)}catch(Sr){}}var mn=class{constructor(I,X){this.g=I,this.map=X}};function gn(I){this.l=I||10,a.PerformanceNavigationTiming?(I=a.performance.getEntriesByType("navigation"),I=0<I.length&&(I[0].nextHopProtocol=="hq"||I[0].nextHopProtocol=="h2")):I=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=I?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cn(I){return I.h?!0:I.g?I.g.size>=I.j:!1}function un(I){return I.h?1:I.g?I.g.size:0}function $n(I,X){return I.h?I.h==X:I.g?I.g.has(X):!1}function br(I,X){I.g?I.g.add(X):I.h=X}function _e(I,X){I.h&&I.h==X?I.h=null:I.g&&I.g.has(X)&&I.g.delete(X)}gn.prototype.cancel=function(){if(this.i=at(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const I of this.g.values())I.cancel();this.g.clear()}};function at(I){if(I.h!=null)return I.i.concat(I.h.D);if(I.g!=null&&I.g.size!==0){let X=I.i;for(const ie of I.g.values())X=X.concat(ie.D);return X}return v(I.i)}function St(I){if(I.V&&typeof I.V=="function")return I.V();if(typeof Map!="undefined"&&I instanceof Map||typeof Set!="undefined"&&I instanceof Set)return Array.from(I.values());if(typeof I=="string")return I.split("");if(l(I)){for(var X=[],ie=I.length,we=0;we<ie;we++)X.push(I[we]);return X}X=[],ie=0;for(we in I)X[ie++]=I[we];return X}function Dt(I){if(I.na&&typeof I.na=="function")return I.na();if(!I.V||typeof I.V!="function"){if(typeof Map!="undefined"&&I instanceof Map)return Array.from(I.keys());if(!(typeof Set!="undefined"&&I instanceof Set)){if(l(I)||typeof I=="string"){var X=[];I=I.length;for(var ie=0;ie<I;ie++)X.push(ie);return X}X=[],ie=0;for(const we in I)X[ie++]=we;return X}}}function Nt(I,X){if(I.forEach&&typeof I.forEach=="function")I.forEach(X,void 0);else if(l(I)||typeof I=="string")Array.prototype.forEach.call(I,X,void 0);else for(var ie=Dt(I),we=St(I),ot=we.length,mt=0;mt<ot;mt++)X.call(void 0,we[mt],ie&&ie[mt],I)}var Zt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cn(I,X){if(I){I=I.split("&");for(var ie=0;ie<I.length;ie++){var we=I[ie].indexOf("="),ot=null;if(0<=we){var mt=I[ie].substring(0,we);ot=I[ie].substring(we+1)}else mt=I[ie];X(mt,ot?decodeURIComponent(ot.replace(/\+/g," ")):"")}}}function wn(I){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,I instanceof wn){this.h=I.h,zn(this,I.j),this.o=I.o,this.g=I.g,ur(this,I.s),this.l=I.l;var X=I.i,ie=new ha;ie.i=X.i,X.g&&(ie.g=new Map(X.g),ie.h=X.h),mo(this,ie),this.m=I.m}else I&&(X=String(I).match(Zt))?(this.h=!1,zn(this,X[1]||"",!0),this.o=Yo(X[2]||""),this.g=Yo(X[3]||"",!0),ur(this,X[4]),this.l=Yo(X[5]||"",!0),mo(this,X[6]||"",!0),this.m=Yo(X[7]||"")):(this.h=!1,this.i=new ha(null,this.h))}wn.prototype.toString=function(){var I=[],X=this.j;X&&I.push(Ni(X,gh,!0),":");var ie=this.g;return(ie||X=="file")&&(I.push("//"),(X=this.o)&&I.push(Ni(X,gh,!0),"@"),I.push(encodeURIComponent(String(ie)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ie=this.s,ie!=null&&I.push(":",String(ie))),(ie=this.l)&&(this.g&&ie.charAt(0)!="/"&&I.push("/"),I.push(Ni(ie,ie.charAt(0)=="/"?wm:vh,!0))),(ie=this.i.toString())&&I.push("?",ie),(ie=this.m)&&I.push("#",Ni(ie,_m)),I.join("")};function sr(I){return new wn(I)}function zn(I,X,ie){I.j=ie?Yo(X,!0):X,I.j&&(I.j=I.j.replace(/:$/,""))}function ur(I,X){if(X){if(X=Number(X),isNaN(X)||0>X)throw Error("Bad port number "+X);I.s=X}else I.s=null}function mo(I,X,ie){X instanceof ha?(I.i=X,xh(I.i,I.h)):(ie||(X=Ni(X,Sm)),I.i=new ha(X,I.h))}function Hn(I,X,ie){I.i.set(X,ie)}function gi(I){return Hn(I,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),I}function Yo(I,X){return I?X?decodeURI(I.replace(/%25/g,"%2525")):decodeURIComponent(I):""}function Ni(I,X,ie){return typeof I=="string"?(I=encodeURI(I).replace(X,bm),ie&&(I=I.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I):null}function bm(I){return I=I.charCodeAt(0),"%"+(I>>4&15).toString(16)+(I&15).toString(16)}var gh=/[#\/\?@]/g,vh=/[#\?:]/g,wm=/[#\?]/g,Sm=/[#\?@]/g,_m=/#/g;function ha(I,X){this.h=this.g=null,this.i=I||null,this.j=!!X}function Vs(I){I.g||(I.g=new Map,I.h=0,I.i&&Cn(I.i,function(X,ie){I.add(decodeURIComponent(X.replace(/\+/g," ")),ie)}))}t=ha.prototype,t.add=function(I,X){Vs(this),this.i=null,I=Il(this,I);var ie=this.g.get(I);return ie||this.g.set(I,ie=[]),ie.push(X),this.h+=1,this};function Od(I,X){Vs(I),X=Il(I,X),I.g.has(X)&&(I.i=null,I.h-=I.g.get(X).length,I.g.delete(X))}function Nd(I,X){return Vs(I),X=Il(I,X),I.g.has(X)}t.forEach=function(I,X){Vs(this),this.g.forEach(function(ie,we){ie.forEach(function(ot){I.call(X,ot,we,this)},this)},this)},t.na=function(){Vs(this);const I=Array.from(this.g.values()),X=Array.from(this.g.keys()),ie=[];for(let we=0;we<X.length;we++){const ot=I[we];for(let mt=0;mt<ot.length;mt++)ie.push(X[we])}return ie},t.V=function(I){Vs(this);let X=[];if(typeof I=="string")Nd(this,I)&&(X=X.concat(this.g.get(Il(this,I))));else{I=Array.from(this.g.values());for(let ie=0;ie<I.length;ie++)X=X.concat(I[ie])}return X},t.set=function(I,X){return Vs(this),this.i=null,I=Il(this,I),Nd(this,I)&&(this.h-=this.g.get(I).length),this.g.set(I,[X]),this.h+=1,this},t.get=function(I,X){return I?(I=this.V(I),0<I.length?String(I[0]):X):X};function yh(I,X,ie){Od(I,X),0<ie.length&&(I.i=null,I.g.set(Il(I,X),v(ie)),I.h+=ie.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const I=[],X=Array.from(this.g.keys());for(var ie=0;ie<X.length;ie++){var we=X[ie];const mt=encodeURIComponent(String(we)),Gt=this.V(we);for(we=0;we<Gt.length;we++){var ot=mt;Gt[we]!==""&&(ot+="="+encodeURIComponent(String(Gt[we]))),I.push(ot)}}return this.i=I.join("&")};function Il(I,X){return X=String(X),I.j&&(X=X.toLowerCase()),X}function xh(I,X){X&&!I.j&&(Vs(I),I.i=null,I.g.forEach(function(ie,we){var ot=we.toLowerCase();we!=ot&&(Od(this,we),yh(this,ot,ie))},I)),I.j=X}function Em(I,X){const ie=new Bt;if(a.Image){const we=new Image;we.onload=p(To,ie,"TestLoadImage: loaded",!0,X,we),we.onerror=p(To,ie,"TestLoadImage: error",!1,X,we),we.onabort=p(To,ie,"TestLoadImage: abort",!1,X,we),we.ontimeout=p(To,ie,"TestLoadImage: timeout",!1,X,we),a.setTimeout(function(){we.ontimeout&&we.ontimeout()},1e4),we.src=I}else X(!1)}function Fl(I,X){const ie=new Bt,we=new AbortController,ot=setTimeout(()=>{we.abort(),To(ie,"TestPingServer: timeout",!1,X)},1e4);fetch(I,{signal:we.signal}).then(mt=>{clearTimeout(ot),mt.ok?To(ie,"TestPingServer: ok",!0,X):To(ie,"TestPingServer: server error",!1,X)}).catch(()=>{clearTimeout(ot),To(ie,"TestPingServer: error",!1,X)})}function To(I,X,ie,we,ot){try{ot&&(ot.onload=null,ot.onerror=null,ot.onabort=null,ot.ontimeout=null),we(ie)}catch(mt){}}function P0(){this.g=new st}function Cm(I,X,ie){const we=ie||"";try{Nt(I,function(ot,mt){let Gt=ot;c(ot)&&(Gt=Ue(ot)),X.push(we+mt+"="+encodeURIComponent(Gt))})}catch(ot){throw X.push(we+"type="+encodeURIComponent("_badmap")),ot}}function Ld(I){this.l=I.Ub||null,this.j=I.eb||!1}b(Ld,vt),Ld.prototype.g=function(){return new gu(this.l,this.j)},Ld.prototype.i=function(I){return function(){return I}}({});function gu(I,X){Pe.call(this),this.D=I,this.o=X,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(gu,Pe),t=gu.prototype,t.open=function(I,X){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=I,this.A=X,this.readyState=1,wr(this)},t.send=function(I){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const X={headers:this.u,method:this.B,credentials:this.m,cache:void 0};I&&(X.body=I),(this.D||a).fetch(new Request(this.A,X)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Dr(this)),this.readyState=0},t.Sa=function(I){if(this.g&&(this.l=I,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=I.headers,this.readyState=2,wr(this)),this.g&&(this.readyState=3,wr(this),this.g)))if(this.responseType==="arraybuffer")I.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream!="undefined"&&"body"in I){if(this.j=I.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Am(this)}else I.text().then(this.Ra.bind(this),this.ga.bind(this))};function Am(I){I.j.read().then(I.Pa.bind(I)).catch(I.ga.bind(I))}t.Pa=function(I){if(this.g){if(this.o&&I.value)this.response.push(I.value);else if(!this.o){var X=I.value?I.value:new Uint8Array(0);(X=this.v.decode(X,{stream:!I.done}))&&(this.response=this.responseText+=X)}I.done?Dr(this):wr(this),this.readyState==3&&Am(this)}},t.Ra=function(I){this.g&&(this.response=this.responseText=I,Dr(this))},t.Qa=function(I){this.g&&(this.response=I,Dr(this))},t.ga=function(){this.g&&Dr(this)};function Dr(I){I.readyState=4,I.l=null,I.j=null,I.v=null,wr(I)}t.setRequestHeader=function(I,X){this.u.append(I,X)},t.getResponseHeader=function(I){return this.h&&this.h.get(I.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const I=[],X=this.h.entries();for(var ie=X.next();!ie.done;)ie=ie.value,I.push(ie[0]+": "+ie[1]),ie=X.next();return I.join(`\r
`)};function wr(I){I.onreadystatechange&&I.onreadystatechange.call(I)}Object.defineProperty(gu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(I){this.m=I?"include":"same-origin"}});function Tm(I){let X="";return k(I,function(ie,we){X+=we,X+=":",X+=ie,X+=`\r
`}),X}function Re(I,X,ie){e:{for(we in ie){var we=!1;break e}we=!0}we||(ie=Tm(ie),typeof I=="string"?ie!=null&&encodeURIComponent(String(ie)):Hn(I,X,ie))}function He(I){Pe.call(this),this.headers=new Map,this.o=I||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(He,Pe);var ht=/^https?$/i,dn=["POST","PUT"];t=He.prototype,t.Ha=function(I){this.J=I},t.ea=function(I,X,ie,we){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+I);X=X?X.toUpperCase():"GET",this.D=I,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():tr.g(),this.v=this.o?Fe(this.o):Fe(tr),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(X,String(I),!0),this.B=!1}catch(mt){ar(this,mt);return}if(I=ie||"",ie=new Map(this.headers),we)if(Object.getPrototypeOf(we)===Object.prototype)for(var ot in we)ie.set(ot,we[ot]);else if(typeof we.keys=="function"&&typeof we.get=="function")for(const mt of we.keys())ie.set(mt,we.get(mt));else throw Error("Unknown input type for opt_headers: "+String(we));we=Array.from(ie.keys()).find(mt=>mt.toLowerCase()=="content-type"),ot=a.FormData&&I instanceof a.FormData,!(0<=Array.prototype.indexOf.call(dn,X,void 0))||we||ot||ie.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[mt,Gt]of ie)this.g.setRequestHeader(mt,Gt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jr(this),this.u=!0,this.g.send(I),this.u=!1}catch(mt){ar(this,mt)}};function ar(I,X){I.h=!1,I.g&&(I.j=!0,I.g.abort(),I.j=!1),I.l=X,I.m=5,Rr(I),An(I)}function Rr(I){I.A||(I.A=!0,je(I,"complete"),je(I,"error"))}t.abort=function(I){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=I||7,je(this,"complete"),je(this,"abort"),An(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),An(this,!0)),He.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Xr(this):this.bb())},t.bb=function(){Xr(this)};function Xr(I){if(I.h&&typeof s!="undefined"&&(!I.v[1]||Qr(I)!=4||I.Z()!=2)){if(I.u&&Qr(I)==4)De(I.Ea,0,I);else if(je(I,"readystatechange"),Qr(I)==4){I.h=!1;try{const Gt=I.Z();e:switch(Gt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var X=!0;break e;default:X=!1}var ie;if(!(ie=X)){var we;if(we=Gt===0){var ot=String(I.D).match(Zt)[1]||null;!ot&&a.self&&a.self.location&&(ot=a.self.location.protocol.slice(0,-1)),we=!ht.test(ot?ot.toLowerCase():"")}ie=we}if(ie)je(I,"complete"),je(I,"success");else{I.m=6;try{var mt=2<Qr(I)?I.g.statusText:""}catch(Ur){mt=""}I.l=mt+" ["+I.Z()+"]",Rr(I)}}finally{An(I)}}}}function An(I,X){if(I.g){jr(I);const ie=I.g,we=I.v[0]?()=>{}:null;I.g=null,I.v=null,X||je(I,"ready");try{ie.onreadystatechange=we}catch(ot){}}}function jr(I){I.I&&(a.clearTimeout(I.I),I.I=null)}t.isActive=function(){return!!this.g};function Qr(I){return I.g?I.g.readyState:0}t.Z=function(){try{return 2<Qr(this)?this.g.status:-1}catch(I){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(I){return""}},t.Oa=function(I){if(this.g){var X=this.g.responseText;return I&&X.indexOf(I)==0&&(X=X.substring(I.length)),tt(X)}};function go(I){try{if(!I.g)return null;if("response"in I.g)return I.g.response;switch(I.H){case"":case"text":return I.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in I.g)return I.g.mozResponseArrayBuffer}return null}catch(X){return null}}function Ol(I){const X={};I=(I.g&&2<=Qr(I)&&I.g.getAllResponseHeaders()||"").split(`\r
`);for(let we=0;we<I.length;we++){if(x(I[we]))continue;var ie=E(I[we]);const ot=ie[0];if(ie=ie[1],typeof ie!="string")continue;ie=ie.trim();const mt=X[ot]||[];X[ot]=mt,mt.push(ie)}P(X,function(we){return we.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Li(I,X,ie){return ie&&ie.internalChannelParams&&ie.internalChannelParams[I]||X}function vu(I){this.Aa=0,this.i=[],this.j=new Bt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Li("failFast",!1,I),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Li("baseRetryDelayMs",5e3,I),this.cb=Li("retryDelaySeedMs",1e4,I),this.Wa=Li("forwardChannelMaxRetries",2,I),this.wa=Li("forwardChannelRequestTimeoutMs",2e4,I),this.pa=I&&I.xmlHttpFactory||void 0,this.Xa=I&&I.Tb||void 0,this.Ca=I&&I.useFetchStreams||!1,this.L=void 0,this.J=I&&I.supportsCrossDomainXhr||!1,this.K="",this.h=new gn(I&&I.concurrentRequestLimit),this.Da=new P0,this.P=I&&I.fastHandshake||!1,this.O=I&&I.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=I&&I.Rb||!1,I&&I.xa&&this.j.xa(),I&&I.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&I&&I.detectBufferingProxy||!1,this.ja=void 0,I&&I.longPollingTimeout&&0<I.longPollingTimeout&&(this.ja=I.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=vu.prototype,t.la=8,t.G=1,t.connect=function(I,X,ie,we){Qe(0),this.W=I,this.H=X||{},ie&&we!==void 0&&(this.H.OSID=ie,this.H.OAID=we),this.F=this.X,this.I=Pm(this,null,this.W),wh(this)};function yu(I){if(D0(I),I.G==3){var X=I.U++,ie=sr(I.I);if(Hn(ie,"SID",I.K),Hn(ie,"RID",X),Hn(ie,"TYPE","terminate"),Sh(I,ie),X=new hr(I,I.j,X),X.L=2,X.v=gi(sr(ie)),ie=!1,a.navigator&&a.navigator.sendBeacon)try{ie=a.navigator.sendBeacon(X.v.toString(),"")}catch(we){}!ie&&a.Image&&(new Image().src=X.v,ie=!0),ie||(X.g=c1(X.j,null),X.g.ea(X.v)),X.F=Date.now(),Ke(X)}l1(I)}function bh(I){I.g&&($a(I),I.g.cancel(),I.g=null)}function D0(I){bh(I),I.u&&(a.clearTimeout(I.u),I.u=null),Bd(I),I.h.cancel(),I.s&&(typeof I.s=="number"&&a.clearTimeout(I.s),I.s=null)}function wh(I){if(!cn(I.h)&&!I.s){I.s=!0;var X=I.Ga;H||q(),j||(H(),j=!0),z.add(X,I),I.B=0}}function s1(I,X){return un(I.h)>=I.h.j-(I.s?1:0)?!1:I.s?(I.i=X.D.concat(I.i),!0):I.G==1||I.G==2||I.B>=(I.Va?0:I.Wa)?!1:(I.s=Rt(f(I.Ga,I,X),Nl(I,I.B)),I.B++,!0)}t.Ga=function(I){if(this.s)if(this.s=null,this.G==1){if(!I){this.U=Math.floor(1e5*Math.random()),I=this.U++;const ot=new hr(this,this.j,I);let mt=this.o;if(this.S&&(mt?(mt=M(mt),_(mt,this.S)):mt=this.S),this.m!==null||this.O||(ot.H=mt,mt=null),this.P)e:{for(var X=0,ie=0;ie<this.i.length;ie++){t:{var we=this.i[ie];if("__data__"in we.map&&(we=we.map.__data__,typeof we=="string")){we=we.length;break t}we=void 0}if(we===void 0)break;if(X+=we,4096<X){X=ie;break e}if(X===4096||ie===this.i.length-1){X=ie+1;break e}}X=1e3}else X=1e3;X=ys(this,ot,X),ie=sr(this.I),Hn(ie,"RID",I),Hn(ie,"CVER",22),this.D&&Hn(ie,"X-HTTP-Session-Id",this.D),Sh(this,ie),mt&&(this.O?X="headers="+encodeURIComponent(String(Tm(mt)))+"&"+X:this.m&&Re(ie,this.m,mt)),br(this.h,ot),this.Ua&&Hn(ie,"TYPE","init"),this.P?(Hn(ie,"$req",X),Hn(ie,"SID","null"),ot.T=!0,Je(ot,ie,null)):Je(ot,ie,X),this.G=2}}else this.G==3&&(I?Xo(this,I):this.i.length==0||cn(this.h)||Xo(this))};function Xo(I,X){var ie;X?ie=X.l:ie=I.U++;const we=sr(I.I);Hn(we,"SID",I.K),Hn(we,"RID",ie),Hn(we,"AID",I.T),Sh(I,we),I.m&&I.o&&Re(we,I.m,I.o),ie=new hr(I,I.j,ie,I.B+1),I.m===null&&(ie.H=I.o),X&&(I.i=X.D.concat(I.i)),X=ys(I,ie,1e3),ie.I=Math.round(.5*I.wa)+Math.round(.5*I.wa*Math.random()),br(I.h,ie),Je(ie,we,X)}function Sh(I,X){I.H&&k(I.H,function(ie,we){Hn(X,we,ie)}),I.l&&Nt({},function(ie,we){Hn(X,we,ie)})}function ys(I,X,ie){ie=Math.min(I.i.length,ie);var we=I.l?f(I.l.Na,I.l,I):null;e:{var ot=I.i;let mt=-1;for(;;){const Gt=["count="+ie];mt==-1?0<ie?(mt=ot[0].g,Gt.push("ofs="+mt)):mt=0:Gt.push("ofs="+mt);let Ur=!0;for(let vo=0;vo<ie;vo++){let Sr=ot[vo].g;const Kr=ot[vo].map;if(Sr-=mt,0>Sr)mt=Math.max(0,ot[vo].g-100),Ur=!1;else try{Cm(Kr,Gt,"req"+Sr+"_")}catch(io){we&&we(Kr)}}if(Ur){we=Gt.join("&");break e}}}return I=I.i.splice(0,ie),X.D=I,we}function a1(I){if(!I.g&&!I.u){I.Y=1;var X=I.Fa;H||q(),j||(H(),j=!0),z.add(X,I),I.v=0}}function Mm(I){return I.g||I.u||3<=I.v?!1:(I.Y++,I.u=Rt(f(I.Fa,I),Nl(I,I.v)),I.v++,!0)}t.Fa=function(){if(this.u=null,_h(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var I=2*this.R;this.j.info("BP detection timer enabled: "+I),this.A=Rt(f(this.ab,this),I)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qe(10),bh(this),_h(this))};function $a(I){I.A!=null&&(a.clearTimeout(I.A),I.A=null)}function _h(I){I.g=new hr(I,I.j,"rpc",I.Y),I.m===null&&(I.g.H=I.o),I.g.O=0;var X=sr(I.qa);Hn(X,"RID","rpc"),Hn(X,"SID",I.K),Hn(X,"AID",I.T),Hn(X,"CI",I.F?"0":"1"),!I.F&&I.ja&&Hn(X,"TO",I.ja),Hn(X,"TYPE","xmlhttp"),Sh(I,X),I.m&&I.o&&Re(X,I.m,I.o),I.L&&(I.g.I=I.L);var ie=I.g;I=I.ia,ie.L=1,ie.v=gi(sr(X)),ie.m=null,ie.P=!0,ae(ie,I)}t.Za=function(){this.C!=null&&(this.C=null,bh(this),Mm(this),Qe(19))};function Bd(I){I.C!=null&&(a.clearTimeout(I.C),I.C=null)}function li(I,X){var ie=null;if(I.g==X){Bd(I),$a(I),I.g=null;var we=2}else if($n(I.h,X))ie=X.D,_e(I.h,X),we=1;else return;if(I.G!=0){if(X.o)if(we==1){ie=X.m?X.m.length:0,X=Date.now()-X.F;var ot=I.B;we=nn(),je(we,new gt(we,ie)),wh(I)}else a1(I);else if(ot=X.s,ot==3||ot==0&&0<X.X||!(we==1&&s1(I,X)||we==2&&Mm(I)))switch(ie&&0<ie.length&&(X=I.h,X.i=X.i.concat(ie)),ot){case 1:Ll(I,5);break;case 4:Ll(I,10);break;case 3:Ll(I,6);break;default:Ll(I,2)}}}function Nl(I,X){let ie=I.Ta+Math.floor(Math.random()*I.cb);return I.isActive()||(ie*=2),ie*X}function Ll(I,X){if(I.j.info("Error code "+X),X==2){var ie=f(I.fb,I),we=I.Xa;const ot=!we;we=new wn(we||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||zn(we,"https"),gi(we),ot?Em(we.toString(),ie):Fl(we.toString(),ie)}else Qe(2);I.G=0,I.l&&I.l.sa(X),l1(I),D0(I)}t.fb=function(I){I?(this.j.info("Successfully pinged google.com"),Qe(2)):(this.j.info("Failed to ping google.com"),Qe(1))};function l1(I){if(I.G=0,I.ka=[],I.l){const X=at(I.h);(X.length!=0||I.i.length!=0)&&(m(I.ka,X),m(I.ka,I.i),I.h.i.length=0,v(I.i),I.i.length=0),I.l.ra()}}function Pm(I,X,ie){var we=ie instanceof wn?sr(ie):new wn(ie);if(we.g!="")X&&(we.g=X+"."+we.g),ur(we,we.s);else{var ot=a.location;we=ot.protocol,X=X?X+"."+ot.hostname:ot.hostname,ot=+ot.port;var mt=new wn(null);we&&zn(mt,we),X&&(mt.g=X),ot&&ur(mt,ot),ie&&(mt.l=ie),we=mt}return ie=I.D,X=I.ya,ie&&X&&Hn(we,ie,X),Hn(we,"VER",I.la),Sh(I,we),we}function c1(I,X,ie){if(X&&!I.J)throw Error("Can't create secondary domain capable XhrIo object.");return X=I.Ca&&!I.pa?new He(new Ld({eb:ie})):new He(I.pa),X.Ha(I.J),X}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function u1(){}t=u1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Dm(){}Dm.prototype.g=function(I,X){return new Qo(I,X)};function Qo(I,X){Pe.call(this),this.g=new vu(X),this.l=I,this.h=X&&X.messageUrlParams||null,I=X&&X.messageHeaders||null,X&&X.clientProtocolHeaderRequired&&(I?I["X-Client-Protocol"]="webchannel":I={"X-Client-Protocol":"webchannel"}),this.g.o=I,I=X&&X.initMessageHeaders||null,X&&X.messageContentType&&(I?I["X-WebChannel-Content-Type"]=X.messageContentType:I={"X-WebChannel-Content-Type":X.messageContentType}),X&&X.va&&(I?I["X-WebChannel-Client-Profile"]=X.va:I={"X-WebChannel-Client-Profile":X.va}),this.g.S=I,(I=X&&X.Sb)&&!x(I)&&(this.g.m=I),this.v=X&&X.supportsCrossDomainXhr||!1,this.u=X&&X.sendRawJson||!1,(X=X&&X.httpSessionIdParam)&&!x(X)&&(this.g.D=X,I=this.h,I!==null&&X in I&&(I=this.h,X in I&&delete I[X])),this.j=new jd(this)}b(Qo,Pe),Qo.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qo.prototype.close=function(){yu(this.g)},Qo.prototype.o=function(I){var X=this.g;if(typeof I=="string"){var ie={};ie.__data__=I,I=ie}else this.u&&(ie={},ie.__data__=Ue(I),I=ie);X.i.push(new mn(X.Ya++,I)),X.G==3&&wh(X)},Qo.prototype.N=function(){this.g.l=null,delete this.j,yu(this.g),delete this.g,Qo.aa.N.call(this)};function Eh(I){ft.call(this),I.__headers__&&(this.headers=I.__headers__,this.statusCode=I.__status__,delete I.__headers__,delete I.__status__);var X=I.__sm__;if(X){e:{for(const ie in X){I=ie;break e}I=void 0}(this.i=I)&&(I=this.i,X=X!==null&&I in X?X[I]:void 0),this.data=X}else this.data=I}b(Eh,ft);function xu(){_t.call(this),this.status=1}b(xu,_t);function jd(I){this.g=I}b(jd,u1),jd.prototype.ua=function(){je(this.g,"a")},jd.prototype.ta=function(I){je(this.g,new Eh(I))},jd.prototype.sa=function(I){je(this.g,new xu)},jd.prototype.ra=function(){je(this.g,"b")},Dm.prototype.createWebChannel=Dm.prototype.g,Qo.prototype.send=Qo.prototype.o,Qo.prototype.open=Qo.prototype.m,Qo.prototype.close=Qo.prototype.close,VZ=function(){return new Dm},zZ=function(){return nn()},UZ=lt,xI={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vn.NO_ERROR=0,vn.TIMEOUT=8,vn.HTTP_ERROR=6,gE=vn,Wn.COMPLETE="complete",jZ=Wn,ct.EventType=Ye,Ye.OPEN="a",Ye.CLOSE="b",Ye.ERROR="c",Ye.MESSAGE="d",Pe.prototype.listen=Pe.prototype.K,Gy=ct,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,BZ=He}).apply(typeof OS!="undefined"?OS:typeof self!="undefined"?self:typeof window!="undefined"?window:{});const z8="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}as.UNAUTHENTICATED=new as(null),as.GOOGLE_CREDENTIALS=new as("google-credentials-uid"),as.FIRST_PARTY=new as("first-party-uid"),as.MOCK_USER=new as("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let f0="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp=new DT("@firebase/firestore");function fy(){return Xp.logLevel}function yn(t,...e){if(Xp.logLevel<=Cr.DEBUG){const n=e.map(H3);Xp.debug(`Firestore (${f0}): ${t}`,...n)}}function wd(t,...e){if(Xp.logLevel<=Cr.ERROR){const n=e.map(H3);Xp.error(`Firestore (${f0}): ${t}`,...n)}}function Uv(t,...e){if(Xp.logLevel<=Cr.WARN){const n=e.map(H3);Xp.warn(`Firestore (${f0}): ${t}`,...n)}}function H3(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch(e){return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(t="Unexpected state"){const e=`FIRESTORE (${f0}) INTERNAL ASSERTION FAILED: `+t;throw wd(e),new Error(e)}function ti(t,e){t||Gn()}function Xn(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const At={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rn extends Dl{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WZ{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class r3e{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(as.UNAUTHENTICATED))}shutdown(){}}class i3e{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class o3e{constructor(e){this.t=e,this.currentUser=as.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ti(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let o=new ld;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ld,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=o;e.enqueueRetryable(()=>te(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},a=l=>{yn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(yn("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ld)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(yn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ti(typeof r.accessToken=="string"),new WZ(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ti(e===null||typeof e=="string"),new as(e)}}class s3e{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=as.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class a3e{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new s3e(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(as.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class l3e{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class c3e{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ti(this.o===void 0);const r=o=>{o.error!=null&&yn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,yn("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{yn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):yn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ti(typeof n.token=="string"),this.R=n.token,new l3e(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3e(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Z{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=u3e(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function Nr(t,e){return t<e?-1:t>e?1:0}function zv(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new rn(At.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new rn(At.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new rn(At.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new rn(At.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ar.fromMillis(Date.now())}static fromDate(e){return Ar.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ar(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Nr(this.nanoseconds,e.nanoseconds):Nr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Yn(e)}static min(){return new Yn(new Ar(0,0))}static max(){return new Yn(new Ar(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,n,r){n===void 0?n=0:n>e.length&&Gn(),r===void 0?r=e.length-n:r>e.length-n&&Gn(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Rb.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Rb?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class bi extends Rb{construct(e,n,r){return new bi(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new rn(At.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new bi(n)}static emptyPath(){return new bi([])}}const d3e=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $o extends Rb{construct(e,n,r){return new $o(e,n,r)}static isValidIdentifier(e){return d3e.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$o.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $o(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new rn(At.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new rn(At.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new rn(At.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new rn(At.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $o(n)}static emptyPath(){return new $o([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.path=e}static fromPath(e){return new Mn(bi.fromString(e))}static fromName(e){return new Mn(bi.fromString(e).popFirst(5))}static empty(){return new Mn(bi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bi.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return bi.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Mn(new bi(e.slice()))}}function f3e(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Yn.fromTimestamp(r===1e9?new Ar(n+1,0):new Ar(n,r));return new th(i,Mn.empty(),e)}function h3e(t){return new th(t.readTime,t.key,-1)}class th{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new th(Yn.min(),Mn.empty(),-1)}static max(){return new th(Yn.max(),Mn.empty(),-1)}}function p3e(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Mn.comparator(t.documentKey,e.documentKey),n!==0?n:Nr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3e="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class g3e{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(t){return te(this,null,function*(){if(t.code!==At.FAILED_PRECONDITION||t.message!==m3e)throw t;yn("LocalStore","Unexpectedly lost primary lease")})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Gn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ft((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Ft?n:Ft.resolve(n)}catch(n){return Ft.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Ft.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Ft.reject(n)}static resolve(e){return new Ft((n,r)=>{n(e)})}static reject(e){return new Ft((n,r)=>{r(e)})}static waitFor(e){return new Ft((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},l=>r(l))}),s=!0,o===i&&n()})}static or(e){let n=Ft.resolve(!1);for(const r of e)n=n.next(i=>i?Ft.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new Ft((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const c=l;n(e[c]).next(u=>{s[c]=u,++a,a===o&&r(s)},u=>i(u))}})}static doWhile(e,n){return new Ft((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function v3e(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function jw(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}G3.oe=-1;function NT(t){return t==null}function VC(t){return t===0&&1/t==-1/0}function y3e(t){return typeof t=="number"&&Number.isInteger(t)&&!VC(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V8(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function gm(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function HZ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,n){this.comparator=e,this.root=n||Uo.EMPTY}insert(e,n){return new Oi(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Uo.BLACK,null,null))}remove(e){return new Oi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Uo.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new NS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new NS(this.root,e,this.comparator,!1)}getReverseIterator(){return new NS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new NS(this.root,e,this.comparator,!0)}}class NS{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Uo{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r!=null?r:Uo.RED,this.left=i!=null?i:Uo.EMPTY,this.right=o!=null?o:Uo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new Uo(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,o!=null?o:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Uo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Uo.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Uo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Uo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Gn();const e=this.left.check();if(e!==this.right.check())throw Gn();return e+(this.isRed()?0:1)}}Uo.EMPTY=null,Uo.RED=!0,Uo.BLACK=!1;Uo.EMPTY=new class{constructor(){this.size=0}get key(){throw Gn()}get value(){throw Gn()}get color(){throw Gn()}get left(){throw Gn()}get right(){throw Gn()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Uo(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.comparator=e,this.data=new Oi(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new W8(this.data.getIterator())}getIteratorFrom(e){return new W8(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Go)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Go(this.comparator);return n.data=e,n}}class W8{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.fields=e,e.sort($o.comparator)}static empty(){return new Ta([])}unionWith(e){let n=new Go($o.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ta(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zv(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GZ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException!="undefined"&&o instanceof DOMException?new GZ("Invalid base64 string: "+o):o}}(e);return new Ko(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new Ko(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ko.EMPTY_BYTE_STRING=new Ko("");const x3e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nh(t){if(ti(!!t),typeof t=="string"){let e=0;const n=x3e.exec(t);if(ti(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qi(t.seconds),nanos:Qi(t.nanos)}}function Qi(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qp(t){return typeof t=="string"?Ko.fromBase64String(t):Ko.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q3(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function K3(t){const e=t.mapValue.fields.__previous_value__;return q3(e)?K3(e):e}function kb(t){const e=nh(t.mapValue.fields.__local_write_time__.timestampValue);return new Ar(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3e{constructor(e,n,r,i,o,s,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ib{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ib("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ib&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS={mapValue:{}};function Zp(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?q3(t)?4:S3e(t)?9007199254740991:w3e(t)?10:11:Gn()}function cu(t,e){if(t===e)return!0;const n=Zp(t);if(n!==Zp(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return kb(t).isEqual(kb(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=nh(i.timestampValue),a=nh(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Qp(i.bytesValue).isEqual(Qp(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Qi(i.geoPointValue.latitude)===Qi(o.geoPointValue.latitude)&&Qi(i.geoPointValue.longitude)===Qi(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Qi(i.integerValue)===Qi(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Qi(i.doubleValue),a=Qi(o.doubleValue);return s===a?VC(s)===VC(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return zv(t.arrayValue.values||[],e.arrayValue.values||[],cu);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(V8(s)!==V8(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!cu(s[l],a[l])))return!1;return!0}(t,e);default:return Gn()}}function Fb(t,e){return(t.values||[]).find(n=>cu(n,e))!==void 0}function Vv(t,e){if(t===e)return 0;const n=Zp(t),r=Zp(e);if(n!==r)return Nr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Nr(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=Qi(o.integerValue||o.doubleValue),l=Qi(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return $8(t.timestampValue,e.timestampValue);case 4:return $8(kb(t),kb(e));case 5:return Nr(t.stringValue,e.stringValue);case 6:return function(o,s){const a=Qp(o),l=Qp(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Nr(a[c],l[c]);if(u!==0)return u}return Nr(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=Nr(Qi(o.latitude),Qi(s.latitude));return a!==0?a:Nr(Qi(o.longitude),Qi(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return H8(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,l,c,u;const d=o.fields||{},f=s.fields||{},p=(a=d.value)===null||a===void 0?void 0:a.arrayValue,b=(l=f.value)===null||l===void 0?void 0:l.arrayValue,v=Nr(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=b==null?void 0:b.values)===null||u===void 0?void 0:u.length)||0);return v!==0?v:H8(p,b)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===LS.mapValue&&s===LS.mapValue)return 0;if(o===LS.mapValue)return 1;if(s===LS.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),c=s.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=Nr(l[d],u[d]);if(f!==0)return f;const p=Vv(a[l[d]],c[u[d]]);if(p!==0)return p}return Nr(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Gn()}}function $8(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Nr(t,e);const n=nh(t),r=nh(e),i=Nr(n.seconds,r.seconds);return i!==0?i:Nr(n.nanos,r.nanos)}function H8(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Vv(n[i],r[i]);if(o)return o}return Nr(n.length,r.length)}function Wv(t){return bI(t)}function bI(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=nh(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Qp(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Mn.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=bI(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${bI(n.fields[s])}`;return i+"}"}(t.mapValue):Gn()}function G8(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function wI(t){return!!t&&"integerValue"in t}function Y3(t){return!!t&&"arrayValue"in t}function q8(t){return!!t&&"nullValue"in t}function K8(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vE(t){return!!t&&"mapValue"in t}function w3e(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function _x(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return gm(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=_x(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_x(t.arrayValue.values[n]);return e}return Object.assign({},t)}function S3e(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.value=e}static empty(){return new ea({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!vE(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_x(n)}setAll(e){let n=$o.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=_x(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());vE(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return cu(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];vE(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){gm(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new ea(_x(this.value))}}function qZ(t){const e=[];return gm(t.fields,(n,r)=>{const i=new $o([n]);if(vE(r)){const o=qZ(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Ta(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new cs(e,0,Yn.min(),Yn.min(),Yn.min(),ea.empty(),0)}static newFoundDocument(e,n,r,i){return new cs(e,1,n,Yn.min(),r,i,0)}static newNoDocument(e,n){return new cs(e,2,n,Yn.min(),Yn.min(),ea.empty(),0)}static newUnknownDocument(e,n){return new cs(e,3,n,Yn.min(),Yn.min(),ea.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Yn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ea.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ea.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Yn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,n){this.position=e,this.inclusive=n}}function Y8(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=Mn.comparator(Mn.fromName(s.referenceValue),n.key):r=Vv(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function X8(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!cu(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,n="asc"){this.field=e,this.dir=n}}function _3e(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KZ{}class ho extends KZ{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new C3e(e,n,r):n==="array-contains"?new M3e(e,r):n==="in"?new P3e(e,r):n==="not-in"?new D3e(e,r):n==="array-contains-any"?new R3e(e,r):new ho(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new A3e(e,r):new T3e(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Vv(n,this.value)):n!==null&&Zp(this.value)===Zp(n)&&this.matchesComparison(Vv(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Gn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vc extends KZ{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new vc(e,n)}matches(e){return YZ(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function YZ(t){return t.op==="and"}function XZ(t){return E3e(t)&&YZ(t)}function E3e(t){for(const e of t.filters)if(e instanceof vc)return!1;return!0}function SI(t){if(t instanceof ho)return t.field.canonicalString()+t.op.toString()+Wv(t.value);if(XZ(t))return t.filters.map(e=>SI(e)).join(",");{const e=t.filters.map(n=>SI(n)).join(",");return`${t.op}(${e})`}}function QZ(t,e){return t instanceof ho?function(r,i){return i instanceof ho&&r.op===i.op&&r.field.isEqual(i.field)&&cu(r.value,i.value)}(t,e):t instanceof vc?function(r,i){return i instanceof vc&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&QZ(s,i.filters[a]),!0):!1}(t,e):void Gn()}function ZZ(t){return t instanceof ho?function(n){return`${n.field.canonicalString()} ${n.op} ${Wv(n.value)}`}(t):t instanceof vc?function(n){return n.op.toString()+" {"+n.getFilters().map(ZZ).join(" ,")+"}"}(t):"Filter"}class C3e extends ho{constructor(e,n,r){super(e,n,r),this.key=Mn.fromName(r.referenceValue)}matches(e){const n=Mn.comparator(e.key,this.key);return this.matchesComparison(n)}}class A3e extends ho{constructor(e,n){super(e,"in",n),this.keys=JZ("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class T3e extends ho{constructor(e,n){super(e,"not-in",n),this.keys=JZ("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function JZ(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Mn.fromName(r.referenceValue))}class M3e extends ho{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Y3(n)&&Fb(n.arrayValue,this.value)}}class P3e extends ho{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Fb(this.value.arrayValue,n)}}class D3e extends ho{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Fb(this.value.arrayValue,n)}}class R3e extends ho{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Y3(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Fb(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3e{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function Q8(t,e=null,n=[],r=[],i=null,o=null,s=null){return new k3e(t,e,n,r,i,o,s)}function X3(t){const e=Xn(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>SI(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),NT(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Wv(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Wv(r)).join(",")),e.ue=n}return e.ue}function Q3(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!_3e(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!QZ(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!X8(t.startAt,e.startAt)&&X8(t.endAt,e.endAt)}function _I(t){return Mn.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function I3e(t,e,n,r,i,o,s,a){return new h0(t,e,n,r,i,o,s,a)}function LT(t){return new h0(t)}function Z8(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function eJ(t){return t.collectionGroup!==null}function Ex(t){const e=Xn(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Go($o.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Ob(o,r))}),n.has($o.keyField().canonicalString())||e.ce.push(new Ob($o.keyField(),r))}return e.ce}function nu(t){const e=Xn(t);return e.le||(e.le=F3e(e,Ex(t))),e.le}function F3e(t,e){if(t.limitType==="F")return Q8(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Ob(i.field,o)});const n=t.endAt?new WC(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new WC(t.startAt.position,t.startAt.inclusive):null;return Q8(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function EI(t,e){const n=t.filters.concat([e]);return new h0(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $C(t,e,n){return new h0(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function BT(t,e){return Q3(nu(t),nu(e))&&t.limitType===e.limitType}function tJ(t){return`${X3(nu(t))}|lt:${t.limitType}`}function vg(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>ZZ(i)).join(", ")}]`),NT(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Wv(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Wv(i)).join(",")),`Target(${r})`}(nu(t))}; limitType=${t.limitType})`}function jT(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Mn.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Ex(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,l){const c=Y8(s,a,l);return s.inclusive?c<=0:c<0}(r.startAt,Ex(r),i)||r.endAt&&!function(s,a,l){const c=Y8(s,a,l);return s.inclusive?c>=0:c>0}(r.endAt,Ex(r),i))}(t,e)}function O3e(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function nJ(t){return(e,n)=>{let r=!1;for(const i of Ex(t)){const o=N3e(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function N3e(t,e,n){const r=t.field.isKeyField()?Mn.comparator(e.key,n.key):function(o,s,a){const l=s.data.field(o),c=a.data.field(o);return l!==null&&c!==null?Vv(l,c):Gn()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Gn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){gm(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return HZ(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3e=new Oi(Mn.comparator);function Sd(){return L3e}const rJ=new Oi(Mn.comparator);function qy(...t){let e=rJ;for(const n of t)e=e.insert(n.key,n);return e}function iJ(t){let e=rJ;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function gp(){return Cx()}function oJ(){return Cx()}function Cx(){return new p0(t=>t.toString(),(t,e)=>t.isEqual(e))}const B3e=new Oi(Mn.comparator),j3e=new Go(Mn.comparator);function yr(...t){let e=j3e;for(const n of t)e=e.add(n);return e}const U3e=new Go(Nr);function z3e(){return U3e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z3(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:VC(e)?"-0":e}}function sJ(t){return{integerValue:""+t}}function V3e(t,e){return y3e(e)?sJ(e):Z3(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(){this._=void 0}}function W3e(t,e,n){return t instanceof Nb?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&q3(o)&&(o=K3(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Lb?lJ(t,e):t instanceof Bb?cJ(t,e):function(i,o){const s=aJ(i,o),a=J8(s)+J8(i.Pe);return wI(s)&&wI(i.Pe)?sJ(a):Z3(i.serializer,a)}(t,e)}function $3e(t,e,n){return t instanceof Lb?lJ(t,e):t instanceof Bb?cJ(t,e):n}function aJ(t,e){return t instanceof HC?function(r){return wI(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Nb extends UT{}class Lb extends UT{constructor(e){super(),this.elements=e}}function lJ(t,e){const n=uJ(e);for(const r of t.elements)n.some(i=>cu(i,r))||n.push(r);return{arrayValue:{values:n}}}class Bb extends UT{constructor(e){super(),this.elements=e}}function cJ(t,e){let n=uJ(e);for(const r of t.elements)n=n.filter(i=>!cu(i,r));return{arrayValue:{values:n}}}class HC extends UT{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function J8(t){return Qi(t.integerValue||t.doubleValue)}function uJ(t){return Y3(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3e{constructor(e,n){this.field=e,this.transform=n}}function G3e(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Lb&&i instanceof Lb||r instanceof Bb&&i instanceof Bb?zv(r.elements,i.elements,cu):r instanceof HC&&i instanceof HC?cu(r.Pe,i.Pe):r instanceof Nb&&i instanceof Nb}(t.transform,e.transform)}class q3e{constructor(e,n){this.version=e,this.transformResults=n}}class Fs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Fs}static exists(e){return new Fs(void 0,e)}static updateTime(e){return new Fs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yE(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class zT{}function dJ(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new VT(t.key,Fs.none()):new Uw(t.key,t.data,Fs.none());{const n=t.data,r=ea.empty();let i=new Go($o.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new ph(t.key,r,new Ta(i.toArray()),Fs.none())}}function K3e(t,e,n){t instanceof Uw?function(i,o,s){const a=i.value.clone(),l=tV(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ph?function(i,o,s){if(!yE(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=tV(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(fJ(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Ax(t,e,n,r){return t instanceof Uw?function(o,s,a,l){if(!yE(o.precondition,s))return a;const c=o.value.clone(),u=nV(o.fieldTransforms,l,s);return c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ph?function(o,s,a,l){if(!yE(o.precondition,s))return a;const c=nV(o.fieldTransforms,l,s),u=s.data;return u.setAll(fJ(o)),u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(o,s,a){return yE(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function Y3e(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=aJ(r.transform,i||null);o!=null&&(n===null&&(n=ea.empty()),n.set(r.field,o))}return n||null}function eV(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&zv(r,i,(o,s)=>G3e(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Uw extends zT{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ph extends zT{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function fJ(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function tV(t,e,n){const r=new Map;ti(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,$3e(s,a,n[i]))}return r}function nV(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,W3e(o,s,e))}return r}class VT extends zT{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class X3e extends zT{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3e{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&K3e(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ax(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ax(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=oJ();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const l=dJ(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(Yn.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),yr())}isEqual(e){return this.batchId===e.batchId&&zv(this.mutations,e.mutations,(n,r)=>eV(n,r))&&zv(this.baseMutations,e.baseMutations,(n,r)=>eV(n,r))}}class J3{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ti(e.mutations.length===r.length);let i=function(){return B3e}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new J3(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3e{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3e{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ao,Mr;function eLe(t){switch(t){default:return Gn();case At.CANCELLED:case At.UNKNOWN:case At.DEADLINE_EXCEEDED:case At.RESOURCE_EXHAUSTED:case At.INTERNAL:case At.UNAVAILABLE:case At.UNAUTHENTICATED:return!1;case At.INVALID_ARGUMENT:case At.NOT_FOUND:case At.ALREADY_EXISTS:case At.PERMISSION_DENIED:case At.FAILED_PRECONDITION:case At.ABORTED:case At.OUT_OF_RANGE:case At.UNIMPLEMENTED:case At.DATA_LOSS:return!0}}function hJ(t){if(t===void 0)return wd("GRPC error has no .code"),At.UNKNOWN;switch(t){case ao.OK:return At.OK;case ao.CANCELLED:return At.CANCELLED;case ao.UNKNOWN:return At.UNKNOWN;case ao.DEADLINE_EXCEEDED:return At.DEADLINE_EXCEEDED;case ao.RESOURCE_EXHAUSTED:return At.RESOURCE_EXHAUSTED;case ao.INTERNAL:return At.INTERNAL;case ao.UNAVAILABLE:return At.UNAVAILABLE;case ao.UNAUTHENTICATED:return At.UNAUTHENTICATED;case ao.INVALID_ARGUMENT:return At.INVALID_ARGUMENT;case ao.NOT_FOUND:return At.NOT_FOUND;case ao.ALREADY_EXISTS:return At.ALREADY_EXISTS;case ao.PERMISSION_DENIED:return At.PERMISSION_DENIED;case ao.FAILED_PRECONDITION:return At.FAILED_PRECONDITION;case ao.ABORTED:return At.ABORTED;case ao.OUT_OF_RANGE:return At.OUT_OF_RANGE;case ao.UNIMPLEMENTED:return At.UNIMPLEMENTED;case ao.DATA_LOSS:return At.DATA_LOSS;default:return Gn()}}(Mr=ao||(ao={}))[Mr.OK=0]="OK",Mr[Mr.CANCELLED=1]="CANCELLED",Mr[Mr.UNKNOWN=2]="UNKNOWN",Mr[Mr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mr[Mr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mr[Mr.NOT_FOUND=5]="NOT_FOUND",Mr[Mr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mr[Mr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mr[Mr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mr[Mr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mr[Mr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mr[Mr.ABORTED=10]="ABORTED",Mr[Mr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mr[Mr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mr[Mr.INTERNAL=13]="INTERNAL",Mr[Mr.UNAVAILABLE=14]="UNAVAILABLE",Mr[Mr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tLe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nLe=new Dp([4294967295,4294967295],0);function rV(t){const e=tLe().encode(t),n=new LZ;return n.update(e),new Uint8Array(n.digest())}function iV(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Dp([n,r],0),new Dp([i,o],0)]}class eL{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ky(`Invalid padding: ${n}`);if(r<0)throw new Ky(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ky(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ky(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Dp.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Dp.fromNumber(r)));return i.compare(nLe)===1&&(i=new Dp([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=rV(e),[r,i]=iV(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new eL(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;const n=rV(e),[r,i]=iV(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ky extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,zw.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new WT(Yn.min(),i,new Oi(Nr),Sd(),yr())}}class zw{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new zw(r,n,yr(),yr(),yr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class pJ{constructor(e,n){this.targetId=e,this.me=n}}class mJ{constructor(e,n,r=Ko.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class oV{constructor(){this.fe=0,this.ge=aV(),this.pe=Ko.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=yr(),n=yr(),r=yr();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Gn()}}),new zw(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=aV()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ti(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class rLe{constructor(e){this.Le=e,this.Be=new Map,this.ke=Sd(),this.qe=sV(),this.Qe=new Oi(Nr)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Gn()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const o=i.target;if(_I(o))if(r===0){const s=new Mn(o.path);this.Ue(n,s,cs.newNoDocument(s,Yn.min()))}else ti(r===1);else{const s=this.Ye(n);if(s!==r){const a=this.Ze(e),l=a?this.Xe(a,e,s):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=Qp(r).toUint8Array()}catch(l){if(l instanceof GZ)return Uv("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new eL(s,i,o)}catch(l){return Uv(l instanceof Ky?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((o,s)=>{const a=this.Je(s);if(a){if(o.current&&_I(a.target)){const l=new Mn(a.target.path);this.ke.get(l)!==null||this.it(s,l)||this.Ue(s,l,cs.newNoDocument(l,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=yr();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new WT(e,n,this.Qe,this.ke,r);return this.ke=Sd(),this.qe=sV(),this.Qe=new Oi(Nr),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new oV,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Go(Nr),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||yn("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new oV),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function sV(){return new Oi(Mn.comparator)}function aV(){return new Oi(Mn.comparator)}const iLe={asc:"ASCENDING",desc:"DESCENDING"},oLe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sLe={and:"AND",or:"OR"};class aLe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function CI(t,e){return t.useProto3Json||NT(e)?e:{value:e}}function GC(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gJ(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function lLe(t,e){return GC(t,e.toTimestamp())}function ru(t){return ti(!!t),Yn.fromTimestamp(function(n){const r=nh(n);return new Ar(r.seconds,r.nanos)}(t))}function tL(t,e){return AI(t,e).canonicalString()}function AI(t,e){const n=function(i){return new bi(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function vJ(t){const e=bi.fromString(t);return ti(SJ(e)),e}function TI(t,e){return tL(t.databaseId,e.path)}function JP(t,e){const n=vJ(e);if(n.get(1)!==t.databaseId.projectId)throw new rn(At.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new rn(At.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Mn(xJ(n))}function yJ(t,e){return tL(t.databaseId,e)}function cLe(t){const e=vJ(t);return e.length===4?bi.emptyPath():xJ(e)}function MI(t){return new bi(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function xJ(t){return ti(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function lV(t,e,n){return{name:TI(t,e),fields:n.value.mapValue.fields}}function uLe(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Gn()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(c,u){return c.useProto3Json?(ti(u===void 0||typeof u=="string"),Ko.fromBase64String(u||"")):(ti(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Ko.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){const u=c.code===void 0?At.UNKNOWN:hJ(c.code);return new rn(u,c.message||"")}(s);n=new mJ(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=JP(t,r.document.name),o=ru(r.document.updateTime),s=r.document.createTime?ru(r.document.createTime):Yn.min(),a=new ea({mapValue:{fields:r.document.fields}}),l=cs.newFoundDocument(i,o,s,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new xE(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=JP(t,r.document),o=r.readTime?ru(r.readTime):Yn.min(),s=cs.newNoDocument(i,o),a=r.removedTargetIds||[];n=new xE([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=JP(t,r.document),o=r.removedTargetIds||[];n=new xE([],o,i,null)}else{if(!("filter"in e))return Gn();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new J3e(i,o),a=r.targetId;n=new pJ(a,s)}}return n}function dLe(t,e){let n;if(e instanceof Uw)n={update:lV(t,e.key,e.value)};else if(e instanceof VT)n={delete:TI(t,e.key)};else if(e instanceof ph)n={update:lV(t,e.key,e.data),updateMask:bLe(e.fieldMask)};else{if(!(e instanceof X3e))return Gn();n={verify:TI(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof Nb)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Lb)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Bb)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof HC)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw Gn()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:lLe(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Gn()}(t,e.precondition)),n}function fLe(t,e){return t&&t.length>0?(ti(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?ru(i.updateTime):ru(o);return s.isEqual(Yn.min())&&(s=ru(o)),new q3e(s,i.transformResults||[])}(n,e))):[]}function hLe(t,e){return{documents:[yJ(t,e.path)]}}function pLe(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=yJ(t,i);const o=function(c){if(c.length!==0)return wJ(vc.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:yg(f.field),direction:vLe(f.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=CI(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function mLe(t){let e=cLe(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ti(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let o=[];n.where&&(o=function(d){const f=bJ(d);return f instanceof vc&&XZ(f)?f.getFilters():[f]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(f=>function(b){return new Ob(xg(b.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,NT(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,p=d.values||[];return new WC(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,p=d.values||[];return new WC(p,f)}(n.endAt)),I3e(e,i,s,o,a,"F",l,c)}function gLe(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Gn()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function bJ(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=xg(n.unaryFilter.field);return ho.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=xg(n.unaryFilter.field);return ho.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=xg(n.unaryFilter.field);return ho.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=xg(n.unaryFilter.field);return ho.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Gn()}}(t):t.fieldFilter!==void 0?function(n){return ho.create(xg(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Gn()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return vc.create(n.compositeFilter.filters.map(r=>bJ(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Gn()}}(n.compositeFilter.op))}(t):Gn()}function vLe(t){return iLe[t]}function yLe(t){return oLe[t]}function xLe(t){return sLe[t]}function yg(t){return{fieldPath:t.canonicalString()}}function xg(t){return $o.fromServerFormat(t.fieldPath)}function wJ(t){return t instanceof ho?function(n){if(n.op==="=="){if(K8(n.value))return{unaryFilter:{field:yg(n.field),op:"IS_NAN"}};if(q8(n.value))return{unaryFilter:{field:yg(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(K8(n.value))return{unaryFilter:{field:yg(n.field),op:"IS_NOT_NAN"}};if(q8(n.value))return{unaryFilter:{field:yg(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yg(n.field),op:yLe(n.op),value:n.value}}}(t):t instanceof vc?function(n){const r=n.getFilters().map(i=>wJ(i));return r.length===1?r[0]:{compositeFilter:{op:xLe(n.op),filters:r}}}(t):Gn()}function bLe(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function SJ(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,n,r,i,o=Yn.min(),s=Yn.min(),a=Ko.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Mf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Mf(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wLe{constructor(e){this.ct=e}}function SLe(t){const e=mLe({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$C(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Le{constructor(){this.un=new ELe}addToCollectionParentIndex(e,n){return this.un.add(n),Ft.resolve()}getCollectionParents(e,n){return Ft.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Ft.resolve()}deleteFieldIndex(e,n){return Ft.resolve()}deleteAllFieldIndexes(e){return Ft.resolve()}createTargetIndexes(e,n){return Ft.resolve()}getDocumentsMatchingTarget(e,n){return Ft.resolve(null)}getIndexType(e,n){return Ft.resolve(0)}getFieldIndexes(e,n){return Ft.resolve([])}getNextCollectionGroupToUpdate(e){return Ft.resolve(null)}getMinOffset(e,n){return Ft.resolve(th.min())}getMinOffsetFromCollectionGroup(e,n){return Ft.resolve(th.min())}updateCollectionGroup(e,n,r){return Ft.resolve()}updateIndexEntries(e,n){return Ft.resolve()}}class ELe{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Go(bi.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Go(bi.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new $v(0)}static kn(){return new $v(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CLe{constructor(){this.changes=new p0(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cs.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ft.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ALe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TLe{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ax(r.mutation,i,Ta.empty(),Ar.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,yr()).next(()=>r))}getLocalViewOfDocuments(e,n,r=yr()){const i=gp();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=qy();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=gp();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,yr()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Sd();const s=Cx(),a=function(){return Cx()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof ph)?o=o.insert(c.key,c):u!==void 0?(s.set(c.key,u.mutation.getFieldMask()),Ax(u.mutation,c,u.mutation.getFieldMask(),Ar.now())):s.set(c.key,Ta.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((c,u)=>s.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new ALe(u,(d=s.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Cx();let i=new Oi((s,a)=>s-a),o=yr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||Ta.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(i.get(a.batchId)||yr()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=oJ();u.forEach(f=>{if(!o.has(f)){const p=dJ(n.get(f),r.get(f));p!==null&&d.set(f,p),o=o.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,d))}return Ft.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return Mn.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):eJ(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):Ft.resolve(gp());let a=-1,l=o;return s.next(c=>Ft.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(u)?Ft.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,l,c,yr())).next(u=>({batchId:a,changes:iJ(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Mn(n)).next(r=>{let i=qy();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=qy();return this.indexManager.getCollectionParents(e,o).next(a=>Ft.forEach(a,l=>{const c=function(d,f){return new h0(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((d,f)=>{s=s.insert(d,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((l,c)=>{const u=c.getKey();s.get(u)===null&&(s=s.insert(u,cs.newInvalidDocument(u)))});let a=qy();return s.forEach((l,c)=>{const u=o.get(l);u!==void 0&&Ax(u.mutation,c,Ta.empty(),Ar.now()),jT(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MLe{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Ft.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ru(i.createTime)}}(n)),Ft.resolve()}getNamedQuery(e,n){return Ft.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:SLe(i.bundledQuery),readTime:ru(i.readTime)}}(n)),Ft.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PLe{constructor(){this.overlays=new Oi(Mn.comparator),this.Ir=new Map}getOverlay(e,n){return Ft.resolve(this.overlays.get(n))}getOverlays(e,n){const r=gp();return Ft.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),Ft.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),Ft.resolve()}getOverlaysForCollection(e,n,r){const i=gp(),o=n.length+1,s=new Mn(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Ft.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Oi((c,u)=>c-u);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=o.get(c.largestBatchId);u===null&&(u=gp(),o=o.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=gp(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return Ft.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Z3e(n,r));let o=this.Ir.get(n);o===void 0&&(o=yr(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DLe{constructor(){this.sessionToken=Ko.EMPTY_BYTE_STRING}getSessionToken(e){return Ft.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ft.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(){this.Tr=new Go(Do.Er),this.dr=new Go(Do.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Do(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Do(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Mn(new bi([])),r=new Do(n,e),i=new Do(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Mn(new bi([])),r=new Do(n,e),i=new Do(n,e+1);let o=yr();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Do(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Do{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Mn.comparator(e.key,n.key)||Nr(e.wr,n.wr)}static Ar(e,n){return Nr(e.wr,n.wr)||Mn.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RLe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Go(Do.Er)}checkEmpty(e){return Ft.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Q3e(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.br=this.br.add(new Do(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ft.resolve(s)}lookupMutationBatch(e,n){return Ft.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),o=i<0?0:i;return Ft.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Ft.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ft.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Do(n,0),i=new Do(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{const a=this.Dr(s.wr);o.push(a)}),Ft.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Go(Nr);return n.forEach(i=>{const o=new Do(i,0),s=new Do(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),Ft.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Mn.isDocumentKey(o)||(o=o.child(""));const s=new Do(new Mn(o),0);let a=new Go(Nr);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},s),Ft.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ti(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Ft.forEach(n.mutations,i=>{const o=new Do(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Do(n,0),i=this.br.firstAfterOrEqual(r);return Ft.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ft.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kLe{constructor(e){this.Mr=e,this.docs=function(){return new Oi(Mn.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ft.resolve(r?r.document.mutableCopy():cs.newInvalidDocument(n))}getEntries(e,n){let r=Sd();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():cs.newInvalidDocument(i))}),Ft.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Sd();const s=n.path,a=new Mn(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||p3e(h3e(u),r)<=0||(i.has(u.key)||jT(n,u))&&(o=o.insert(u.key,u.mutableCopy()))}return Ft.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Gn()}Or(e,n){return Ft.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ILe(this)}getSize(e){return Ft.resolve(this.size)}}class ILe extends CLe{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Ft.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FLe{constructor(e){this.persistence=e,this.Nr=new p0(n=>X3(n),Q3),this.lastRemoteSnapshotVersion=Yn.min(),this.highestTargetId=0,this.Lr=0,this.Br=new nL,this.targetCount=0,this.kr=$v.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),Ft.resolve()}getLastRemoteSnapshotVersion(e){return Ft.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ft.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ft.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Ft.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new $v(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Ft.resolve()}updateTargetData(e,n){return this.Kn(n),Ft.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Ft.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Ft.waitFor(o).next(()=>i)}getTargetCount(e){return Ft.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Ft.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Ft.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),Ft.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Ft.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Ft.resolve(r)}containsKey(e,n){return Ft.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OLe{constructor(e,n){this.qr={},this.overlays={},this.Qr=new G3(0),this.Kr=!1,this.Kr=!0,this.$r=new DLe,this.referenceDelegate=e(this),this.Ur=new FLe(this),this.indexManager=new _Le,this.remoteDocumentCache=function(i){return new kLe(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new wLe(n),this.Gr=new MLe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new PLe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new RLe(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){yn("MemoryPersistence","Starting transaction:",e);const i=new NLe(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return Ft.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class NLe extends g3e{constructor(e){super(),this.currentSequenceNumber=e}}class rL{constructor(e){this.persistence=e,this.Jr=new nL,this.Yr=null}static Zr(e){return new rL(e)}get Xr(){if(this.Yr)return this.Yr;throw Gn()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Ft.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Ft.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Ft.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ft.forEach(this.Xr,r=>{const i=Mn.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,Yn.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Ft.or([()=>Ft.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=yr(),i=yr();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new iL(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LLe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BLe{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return SIe()?8:v3e(ms())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new LLe;return this.Xi(e,n,s).next(a=>{if(o.result=a,this.zi)return this.es(e,n,s,a.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(fy()<=Cr.DEBUG&&yn("QueryEngine","SDK will not create cache indexes for query:",vg(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ft.resolve()):(fy()<=Cr.DEBUG&&yn("QueryEngine","Query:",vg(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(fy()<=Cr.DEBUG&&yn("QueryEngine","The SDK decides to create cache indexes for query:",vg(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nu(n))):Ft.resolve())}Yi(e,n){if(Z8(n))return Ft.resolve(null);let r=nu(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=$C(n,null,"F"),r=nu(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=yr(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,s,l.readTime)?this.Yi(e,$C(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return Z8(n)||i.isEqual(Yn.min())?Ft.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const s=this.ts(n,o);return this.ns(n,s,r,i)?Ft.resolve(null):(fy()<=Cr.DEBUG&&yn("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),vg(n)),this.rs(e,s,n,f3e(i,-1)).next(a=>a))})}ts(e,n){let r=new Go(nJ(e));return n.forEach((i,o)=>{jT(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return fy()<=Cr.DEBUG&&yn("QueryEngine","Using full collection scan to execute query:",vg(n)),this.Ji.getDocumentsMatchingQuery(e,n,th.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jLe{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Oi(Nr),this._s=new p0(o=>X3(o),Q3),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TLe(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function ULe(t,e,n,r){return new jLe(t,e,n,r)}function _J(t,e){return te(this,null,function*(){const n=Xn(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let l=yr();for(const c of i){s.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of o){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:s,addedBatchIds:a}))})})})}function zLe(t,e){const n=Xn(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,f=d.keys();let p=Ft.resolve();return f.forEach(b=>{p=p.next(()=>u.getEntry(l,b)).next(v=>{const m=c.docVersions.get(b);ti(m!==null),v.version.compareTo(m)<0&&(d.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=yr();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function EJ(t){const e=Xn(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function VLe(t,e){const n=Xn(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((u,d)=>{const f=i.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(o,u.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(o,u.addedDocuments,d)));let p=f.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(Ko.EMPTY_BYTE_STRING,Yn.min()).withLastLimboFreeSnapshotVersion(Yn.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),i=i.insert(d,p),function(v,m,g){return v.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(f,p,u)&&a.push(n.Ur.updateTargetData(o,p))});let l=Sd(),c=yr();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(WLe(o,s,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(Yn.min())){const u=n.Ur.getLastRemoteSnapshotVersion(o).next(d=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(u)}return Ft.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(n.os=i,o))}function WLe(t,e,n){let r=yr(),i=yr();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Sd();return n.forEach((a,l)=>{const c=o.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Yn.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):yn("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:s,Is:i}})}function $Le(t,e){const n=Xn(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function HLe(t,e){const n=Xn(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,Ft.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new Mf(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function PI(t,e,n){return te(this,null,function*(){const r=Xn(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!jw(s))throw s;yn("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function cV(t,e,n){const r=Xn(t);let i=Yn.min(),o=yr();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,c,u){const d=Xn(l),f=d._s.get(u);return f!==void 0?Ft.resolve(d.os.get(f)):d.Ur.getTargetData(c,u)}(r,s,nu(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:Yn.min(),n?o:yr())).next(a=>(GLe(r,O3e(e),a),{documents:a,Ts:o})))}function GLe(t,e,n){let r=t.us.get(e)||Yn.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}class uV{constructor(){this.activeTargetIds=z3e()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qLe{constructor(){this.so=new uV,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new uV,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KLe{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){yn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){yn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BS=null;function eD(){return BS===null?BS=function(){return 268435456+Math.round(2147483648*Math.random())}():BS++,"0x"+BS.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YLe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XLe{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="WebChannelConnection";class QLe extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){const a=eD(),l=this.xo(n,r.toUriEncodedString());yn("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,o,s),this.No(n,l,c,i).then(u=>(yn("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Uv("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}Lo(n,r,i,o,s,a){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+f0}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){const i=YLe[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const o=eD();return new Promise((s,a)=>{const l=new BZ;l.setWithCredentials(!0),l.listenOnce(jZ.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case gE.NO_ERROR:const u=l.getResponseJson();yn(ns,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(u)),s(u);break;case gE.TIMEOUT:yn(ns,`RPC '${e}' ${o} timed out`),a(new rn(At.DEADLINE_EXCEEDED,"Request time out"));break;case gE.HTTP_ERROR:const d=l.getStatus();if(yn(ns,`RPC '${e}' ${o} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const p=f==null?void 0:f.error;if(p&&p.status&&p.message){const b=function(m){const g=m.toLowerCase().replace(/_/g,"-");return Object.values(At).indexOf(g)>=0?g:At.UNKNOWN}(p.status);a(new rn(b,p.message))}else a(new rn(At.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new rn(At.UNAVAILABLE,"Connection failed."));break;default:Gn()}}finally{yn(ns,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);yn(ns,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=eD(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=VZ(),a=zZ(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=o.join("");yn(ns,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=s.createWebChannel(u,l);let f=!1,p=!1;const b=new XLe({Io:m=>{p?yn(ns,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(f||(yn(ns,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),yn(ns,`RPC '${e}' stream ${i} sending:`,m),d.send(m))},To:()=>d.close()}),v=(m,g,x)=>{m.listen(g,w=>{try{x(w)}catch(S){setTimeout(()=>{throw S},0)}})};return v(d,Gy.EventType.OPEN,()=>{p||(yn(ns,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),v(d,Gy.EventType.CLOSE,()=>{p||(p=!0,yn(ns,`RPC '${e}' stream ${i} transport closed`),b.So())}),v(d,Gy.EventType.ERROR,m=>{p||(p=!0,Uv(ns,`RPC '${e}' stream ${i} transport errored:`,m),b.So(new rn(At.UNAVAILABLE,"The operation could not be completed")))}),v(d,Gy.EventType.MESSAGE,m=>{var g;if(!p){const x=m.data[0];ti(!!x);const w=x,S=w.error||((g=w[0])===null||g===void 0?void 0:g.error);if(S){yn(ns,`RPC '${e}' stream ${i} received error:`,S);const D=S.status;let k=function(T){const _=ao[T];if(_!==void 0)return hJ(_)}(D),P=S.message;k===void 0&&(k=At.INTERNAL,P="Unknown error status: "+D+" with message "+S.message),p=!0,b.So(new rn(k,P)),d.close()}else yn(ns,`RPC '${e}' stream ${i} received:`,x),b.bo(x)}}),v(a,UZ.STAT_EVENT,m=>{m.stat===xI.PROXY?yn(ns,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===xI.NOPROXY&&yn(ns,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function tD(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(t){return new aLe(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CJ{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&yn("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AJ{constructor(e,n,r,i,o,s,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new CJ(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return te(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return te(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return te(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===At.RESOURCE_EXHAUSTED?(wd(n.toString()),wd("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===At.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new rn(At.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>te(this,null,function*(){this.state=0,this.start()}))}I_(e){return yn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(yn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZLe extends AJ{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=uLe(this.serializer,e),r=function(o){if(!("targetChange"in o))return Yn.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Yn.min():s.readTime?ru(s.readTime):Yn.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=MI(this.serializer),n.addTarget=function(o,s){let a;const l=s.target;if(a=_I(l)?{documents:hLe(o,l)}:{query:pLe(o,l)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=gJ(o,s.resumeToken);const c=CI(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(Yn.min())>0){a.readTime=GC(o,s.snapshotVersion.toTimestamp());const c=CI(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=gLe(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=MI(this.serializer),n.removeTarget=e,this.a_(n)}}class JLe extends AJ{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ti(!!e.streamToken),this.lastStreamToken=e.streamToken,ti(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ti(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=fLe(e.writeResults,e.commitTime),r=ru(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=MI(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>dLe(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5e extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new rn(At.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,AI(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===At.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new rn(At.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,AI(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===At.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new rn(At.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class t5e{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(wd(n),this.D_=!1):yn("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5e{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>te(this,null,function*(){vm(this)&&(yn("RemoteStore","Restarting streams for network reachability change."),yield function(l){return te(this,null,function*(){const c=Xn(l);c.L_.add(4),yield Vw(c),c.q_.set("Unknown"),c.L_.delete(4),yield HT(c)})}(this))}))}),this.q_=new t5e(r,i)}}function HT(t){return te(this,null,function*(){if(vm(t))for(const e of t.B_)yield e(!0)})}function Vw(t){return te(this,null,function*(){for(const e of t.B_)yield e(!1)})}function TJ(t,e){const n=Xn(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),lL(n)?aL(n):m0(n).r_()&&sL(n,e))}function oL(t,e){const n=Xn(t),r=m0(n);n.N_.delete(e),r.r_()&&MJ(n,e),n.N_.size===0&&(r.r_()?r.o_():vm(n)&&n.q_.set("Unknown"))}function sL(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Yn.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}m0(t).A_(e)}function MJ(t,e){t.Q_.xe(e),m0(t).R_(e)}function aL(t){t.Q_=new rLe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),m0(t).start(),t.q_.v_()}function lL(t){return vm(t)&&!m0(t).n_()&&t.N_.size>0}function vm(t){return Xn(t).L_.size===0}function PJ(t){t.Q_=void 0}function r5e(t){return te(this,null,function*(){t.q_.set("Online")})}function i5e(t){return te(this,null,function*(){t.N_.forEach((e,n)=>{sL(t,e)})})}function o5e(t,e){return te(this,null,function*(){PJ(t),lL(t)?(t.q_.M_(e),aL(t)):t.q_.set("Unknown")})}function s5e(t,e,n){return te(this,null,function*(){if(t.q_.set("Online"),e instanceof mJ&&e.state===2&&e.cause)try{yield function(i,o){return te(this,null,function*(){const s=o.cause;for(const a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){yn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield qC(t,r)}else if(e instanceof xE?t.Q_.Ke(e):e instanceof pJ?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Yn.min()))try{const r=yield EJ(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){const a=o.Q_.rt(s);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=o.N_.get(c);u&&o.N_.set(c,u.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,c)=>{const u=o.N_.get(l);if(!u)return;o.N_.set(l,u.withResumeToken(Ko.EMPTY_BYTE_STRING,u.snapshotVersion)),MJ(o,l);const d=new Mf(u.target,l,c,u.sequenceNumber);sL(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){yn("RemoteStore","Failed to raise snapshot:",r),yield qC(t,r)}})}function qC(t,e,n){return te(this,null,function*(){if(!jw(e))throw e;t.L_.add(1),yield Vw(t),t.q_.set("Offline"),n||(n=()=>EJ(t.localStore)),t.asyncQueue.enqueueRetryable(()=>te(this,null,function*(){yn("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield HT(t)}))})}function DJ(t,e){return e().catch(n=>qC(t,n,e))}function GT(t){return te(this,null,function*(){const e=Xn(t),n=rh(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;a5e(e);)try{const i=yield $Le(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,l5e(e,i)}catch(i){yield qC(e,i)}RJ(e)&&kJ(e)})}function a5e(t){return vm(t)&&t.O_.length<10}function l5e(t,e){t.O_.push(e);const n=rh(t);n.r_()&&n.V_&&n.m_(e.mutations)}function RJ(t){return vm(t)&&!rh(t).n_()&&t.O_.length>0}function kJ(t){rh(t).start()}function c5e(t){return te(this,null,function*(){rh(t).p_()})}function u5e(t){return te(this,null,function*(){const e=rh(t);for(const n of t.O_)e.m_(n.mutations)})}function d5e(t,e,n){return te(this,null,function*(){const r=t.O_.shift(),i=J3.from(r,e,n);yield DJ(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield GT(t)})}function f5e(t,e){return te(this,null,function*(){e&&rh(t).V_&&(yield function(r,i){return te(this,null,function*(){if(function(s){return eLe(s)&&s!==At.ABORTED}(i.code)){const o=r.O_.shift();rh(r).s_(),yield DJ(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield GT(r)}})}(t,e)),RJ(t)&&kJ(t)})}function fV(t,e){return te(this,null,function*(){const n=Xn(t);n.asyncQueue.verifyOperationInProgress(),yn("RemoteStore","RemoteStore received new credentials");const r=vm(n);n.L_.add(3),yield Vw(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield HT(n)})}function h5e(t,e){return te(this,null,function*(){const n=Xn(t);e?(n.L_.delete(2),yield HT(n)):e||(n.L_.add(2),yield Vw(n),n.q_.set("Unknown"))})}function m0(t){return t.K_||(t.K_=function(n,r,i){const o=Xn(n);return o.w_(),new ZLe(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:r5e.bind(null,t),Ro:i5e.bind(null,t),mo:o5e.bind(null,t),d_:s5e.bind(null,t)}),t.B_.push(e=>te(this,null,function*(){e?(t.K_.s_(),lL(t)?aL(t):t.q_.set("Unknown")):(yield t.K_.stop(),PJ(t))}))),t.K_}function rh(t){return t.U_||(t.U_=function(n,r,i){const o=Xn(n);return o.w_(),new JLe(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:c5e.bind(null,t),mo:f5e.bind(null,t),f_:u5e.bind(null,t),g_:d5e.bind(null,t)}),t.B_.push(e=>te(this,null,function*(){e?(t.U_.s_(),yield GT(t)):(yield t.U_.stop(),t.O_.length>0&&(yn("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ld,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new cL(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new rn(At.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uL(t,e){if(wd("AsyncQueue",`${e}: ${t}`),jw(t))return new rn(At.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Mn.comparator(n.key,r.key):(n,r)=>Mn.comparator(n.key,r.key),this.keyedMap=qy(),this.sortedSet=new Oi(this.comparator)}static emptySet(e){return new pv(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof pv)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new pv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(){this.W_=new Oi(Mn.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Gn():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Hv{constructor(e,n,r,i,o,s,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new Hv(e,n,pv.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&BT(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5e{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class m5e{constructor(){this.queries=pV(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Xn(n),o=i.queries;i.queries=pV(),o.forEach((s,a)=>{for(const l of a.j_)l.onError(r)})})(this,new rn(At.ABORTED,"Firestore shutting down"))}}function pV(){return new p0(t=>tJ(t),BT)}function dL(t,e){return te(this,null,function*(){const n=Xn(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new p5e,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield n.onListen(i,!0);break;case 1:o.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){const a=uL(s,`Initialization of query '${vg(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&hL(n)})}function fL(t,e){return te(this,null,function*(){const n=Xn(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function g5e(t,e){const n=Xn(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&hL(n)}function v5e(t,e,n){const r=Xn(t),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(e)}function hL(t){t.Y_.forEach(e=>{e.next()})}var DI,mV;(mV=DI||(DI={})).ea="default",mV.Cache="cache";class pL{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Hv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Hv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==DI.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IJ{constructor(e){this.key=e}}class FJ{constructor(e){this.key=e}}class y5e{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=yr(),this.mutatedKeys=yr(),this.Aa=nJ(e),this.Ra=new pv(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new hV,i=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const f=i.get(u),p=jT(this.query,d)?d:null,b=!!f&&this.mutatedKeys.has(f.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let m=!1;f&&p?f.data.isEqual(p.data)?b!==v&&(r.track({type:3,doc:p}),m=!0):this.ga(f,p)||(r.track({type:2,doc:p}),m=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),m=!0):f&&!p&&(r.track({type:1,doc:f}),m=!0,(l||c)&&(a=!0)),m&&(p?(s=s.add(p),o=v?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),r.track({type:1,doc:u})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((u,d)=>function(p,b){const v=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Gn()}};return v(p)-v(b)}(u.type,d.type)||this.Aa(u.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,s.length!==0||c?{snapshot:new Hv(this.query,e.Ra,o,s,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new hV,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=yr(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new FJ(r))}),this.da.forEach(r=>{e.has(r)||n.push(new IJ(r))}),n}ba(e){this.Ta=e.Ts,this.da=yr();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Hv.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class x5e{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class b5e{constructor(e){this.key=e,this.va=!1}}class w5e{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new p0(a=>tJ(a),BT),this.Ma=new Map,this.xa=new Set,this.Oa=new Oi(Mn.comparator),this.Na=new Map,this.La=new nL,this.Ba={},this.ka=new Map,this.qa=$v.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}function S5e(t,e,n=!0){return te(this,null,function*(){const r=UJ(t);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield OJ(r,e,n,!0),i})}function _5e(t,e){return te(this,null,function*(){const n=UJ(t);yield OJ(n,e,!0,!1)})}function OJ(t,e,n,r){return te(this,null,function*(){const i=yield HLe(t.localStore,nu(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=yield E5e(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&TJ(t.remoteStore,i),a})}function E5e(t,e,n,r,i){return te(this,null,function*(){t.Ka=(d,f,p)=>function(v,m,g,x){return te(this,null,function*(){let w=m.view.ma(g);w.ns&&(w=yield cV(v.localStore,m.query,!1).then(({documents:P})=>m.view.ma(P,w)));const S=x&&x.targetChanges.get(m.targetId),D=x&&x.targetMismatches.get(m.targetId)!=null,k=m.view.applyChanges(w,v.isPrimaryClient,S,D);return vV(v,m.targetId,k.wa),k.snapshot})}(t,d,f,p);const o=yield cV(t.localStore,e,!0),s=new y5e(e,o.Ts),a=s.ma(o.documents),l=zw.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=s.applyChanges(a,t.isPrimaryClient,l);vV(t,n,c.wa);const u=new x5e(e,n,s);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot})}function C5e(t,e,n){return te(this,null,function*(){const r=Xn(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!BT(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield PI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&oL(r.remoteStore,i.targetId),RI(r,i.targetId)}).catch(Bw))):(RI(r,i.targetId),yield PI(r.localStore,i.targetId,!0))})}function A5e(t,e){return te(this,null,function*(){const n=Xn(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),oL(n.remoteStore,r.targetId))})}function T5e(t,e,n){return te(this,null,function*(){const r=F5e(t);try{const i=yield function(s,a){const l=Xn(s),c=Ar.now(),u=a.reduce((p,b)=>p.add(b.key),yr());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let b=Sd(),v=yr();return l.cs.getEntries(p,u).next(m=>{b=m,b.forEach((g,x)=>{x.isValidDocument()||(v=v.add(g))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,b)).next(m=>{d=m;const g=[];for(const x of a){const w=Y3e(x,d.get(x.key).overlayedDocument);w!=null&&g.push(new ph(x.key,w,qZ(w.value.mapValue),Fs.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,g,a)}).next(m=>{f=m;const g=m.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(p,m.batchId,g)})}).then(()=>({batchId:f.batchId,changes:iJ(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let c=s.Ba[s.currentUser.toKey()];c||(c=new Oi(Nr)),c=c.insert(a,l),s.Ba[s.currentUser.toKey()]=c}(r,i.batchId,n),yield Ww(r,i.changes),yield GT(r.remoteStore)}catch(i){const o=uL(i,"Failed to persist write");n.reject(o)}})}function NJ(t,e){return te(this,null,function*(){const n=Xn(t);try{const r=yield VLe(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Na.get(o);s&&(ti(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?ti(s.va):i.removedDocuments.size>0&&(ti(s.va),s.va=!1))}),yield Ww(n,r,e)}catch(r){yield Bw(r)}})}function gV(t,e,n){const r=Xn(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((o,s)=>{const a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const l=Xn(s);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.j_)f.Z_(a)&&(c=!0)}),c&&hL(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function M5e(t,e,n){return te(this,null,function*(){const r=Xn(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),o=i&&i.key;if(o){let s=new Oi(Mn.comparator);s=s.insert(o,cs.newNoDocument(o,Yn.min()));const a=yr().add(o),l=new WT(Yn.min(),new Map,new Oi(Nr),s,a);yield NJ(r,l),r.Oa=r.Oa.remove(o),r.Na.delete(e),mL(r)}else yield PI(r.localStore,e,!1).then(()=>RI(r,e,n)).catch(Bw)})}function P5e(t,e){return te(this,null,function*(){const n=Xn(t),r=e.batch.batchId;try{const i=yield zLe(n.localStore,e);BJ(n,r,null),LJ(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ww(n,i)}catch(i){yield Bw(i)}})}function D5e(t,e,n){return te(this,null,function*(){const r=Xn(t);try{const i=yield function(s,a){const l=Xn(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(ti(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);BJ(r,e,n),LJ(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Ww(r,i)}catch(i){yield Bw(i)}})}function LJ(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function BJ(t,e,n){const r=Xn(t);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function RI(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||jJ(t,r)})}function jJ(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(oL(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),mL(t))}function vV(t,e,n){for(const r of n)r instanceof IJ?(t.La.addReference(r.key,e),R5e(t,r)):r instanceof FJ?(yn("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||jJ(t,r.key)):Gn()}function R5e(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(yn("SyncEngine","New document in limbo: "+n),t.xa.add(r),mL(t))}function mL(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Mn(bi.fromString(e)),r=t.qa.next();t.Na.set(r,new b5e(n)),t.Oa=t.Oa.insert(n,r),TJ(t.remoteStore,new Mf(nu(LT(n.path)),r,"TargetPurposeLimboResolution",G3.oe))}}function Ww(t,e,n){return te(this,null,function*(){const r=Xn(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{s.push(r.Ka(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=iL.Wi(l.targetId,c);o.push(d)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(l,c){return te(this,null,function*(){const u=Xn(l);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Ft.forEach(c,f=>Ft.forEach(f.$i,p=>u.persistence.referenceDelegate.addReference(d,f.targetId,p)).next(()=>Ft.forEach(f.Ui,p=>u.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))}catch(d){if(!jw(d))throw d;yn("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const p=u.os.get(f),b=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(b);u.os=u.os.insert(f,v)}}})}(r.localStore,o))})}function k5e(t,e){return te(this,null,function*(){const n=Xn(t);if(!n.currentUser.isEqual(e)){yn("SyncEngine","User change. New user:",e.toKey());const r=yield _J(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(l=>{l.reject(new rn(At.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ww(n,r.hs)}})}function I5e(t,e){const n=Xn(t),r=n.Na.get(e);if(r&&r.va)return yr().add(r.key);{let i=yr();const o=n.Ma.get(e);if(!o)return i;for(const s of o){const a=n.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function UJ(t){const e=Xn(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=NJ.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=I5e.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=M5e.bind(null,e),e.Ca.d_=g5e.bind(null,e.eventManager),e.Ca.$a=v5e.bind(null,e.eventManager),e}function F5e(t){const e=Xn(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=P5e.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=D5e.bind(null,e),e}class KC{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(e){return te(this,null,function*(){this.serializer=$T(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),yield this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)})}ja(e,n){return null}Ha(e,n){return null}za(e){return ULe(this.persistence,new BLe,e.initialUser,this.serializer)}Ga(e){return new OLe(rL.Zr,this.serializer)}Wa(e){return new qLe}terminate(){return te(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}KC.provider={build:()=>new KC};class kI{initialize(e,n){return te(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gV(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=k5e.bind(null,this.syncEngine),yield h5e(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new m5e}()}createDatastore(e){const n=$T(e.databaseInfo.databaseId),r=function(o){return new QLe(o)}(e.databaseInfo);return function(o,s,a,l){return new e5e(o,s,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new n5e(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>gV(this.syncEngine,n,0),function(){return dV.D()?new dV:new KLe}())}createSyncEngine(e,n){return function(i,o,s,a,l,c,u){const d=new w5e(i,o,s,a,l,c);return u&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return te(this,null,function*(){var e,n;yield function(i){return te(this,null,function*(){const o=Xn(i);yn("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Vw(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}}kI.provider={build:()=>new kI};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):wd("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5e{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=as.UNAUTHENTICATED,this.clientId=$Z.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>te(this,null,function*(){yn("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(yn("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ld;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>te(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=uL(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function nD(t,e){return te(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),yn("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>te(this,null,function*(){r.isEqual(i)||(yield _J(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function yV(t,e){return te(this,null,function*(){t.asyncQueue.verifyOperationInProgress();const n=yield N5e(t);yn("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>fV(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>fV(e.remoteStore,i)),t._onlineComponents=e})}function N5e(t){return te(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){yn("FirestoreClient","Using user provided OfflineComponentProvider");try{yield nD(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===At.FAILED_PRECONDITION||i.code===At.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Uv("Error using user provided cache. Falling back to memory cache: "+n),yield nD(t,new KC)}}else yn("FirestoreClient","Using default OfflineComponentProvider"),yield nD(t,new KC);return t._offlineComponents})}function zJ(t){return te(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(yn("FirestoreClient","Using user provided OnlineComponentProvider"),yield yV(t,t._uninitializedComponentsProvider._online)):(yn("FirestoreClient","Using default OnlineComponentProvider"),yield yV(t,new kI))),t._onlineComponents})}function L5e(t){return zJ(t).then(e=>e.syncEngine)}function YC(t){return te(this,null,function*(){const e=yield zJ(t),n=e.eventManager;return n.onListen=S5e.bind(null,e.syncEngine),n.onUnlisten=C5e.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=_5e.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=A5e.bind(null,e.syncEngine),n})}function B5e(t,e,n={}){const r=new ld;return t.asyncQueue.enqueueAndForget(()=>te(this,null,function*(){return function(o,s,a,l,c){const u=new gL({next:f=>{u.Za(),s.enqueueAndForget(()=>fL(o,d));const p=f.docs.has(a);!p&&f.fromCache?c.reject(new rn(At.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new rn(At.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new pL(LT(a.path),u,{includeMetadataChanges:!0,_a:!0});return dL(o,d)}(yield YC(t),t.asyncQueue,e,n,r)})),r.promise}function j5e(t,e,n={}){const r=new ld;return t.asyncQueue.enqueueAndForget(()=>te(this,null,function*(){return function(o,s,a,l,c){const u=new gL({next:f=>{u.Za(),s.enqueueAndForget(()=>fL(o,d)),f.fromCache&&l.source==="server"?c.reject(new rn(At.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new pL(a,u,{includeMetadataChanges:!0,_a:!0});return dL(o,d)}(yield YC(t),t.asyncQueue,e,n,r)})),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VJ(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WJ(t,e,n){if(!n)throw new rn(At.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function U5e(t,e,n,r){if(e===!0&&r===!0)throw new rn(At.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function bV(t){if(!Mn.isDocumentKey(t))throw new rn(At.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wV(t){if(Mn.isDocumentKey(t))throw new rn(At.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function qT(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Gn()}function Os(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new rn(At.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qT(t);throw new rn(At.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function z5e(t,e){if(e<=0)throw new rn(At.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new rn(At.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new rn(At.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}U5e("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VJ((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new rn(At.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new rn(At.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new rn(At.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class KT{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new SV({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new rn(At.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new rn(At.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new SV(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new r3e;switch(r.type){case"firstParty":return new a3e(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new rn(At.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return te(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=xV.get(n);r&&(yn("ComponentProvider","Removing Datastore"),xV.delete(n),r.terminate())}(this),Promise.resolve()}}function V5e(t,e,n,r={}){var i;const o=(t=Os(t,KT))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Uv("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=as.MOCK_USER;else{a=NQ(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new rn(At.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new as(c)}t._authCredentials=new i3e(new WZ(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Id(this.firestore,e,this._query)}}class fs{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $f(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fs(this.firestore,e,this._key)}}class $f extends Id{constructor(e,n,r){super(e,n,LT(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fs(this.firestore,null,new Mn(e))}withConverter(e){return new $f(this.firestore,e,this._path)}}function Pn(t,e,...n){if(t=Tr(t),WJ("collection","path",e),t instanceof KT){const r=bi.fromString(e,...n);return wV(r),new $f(t,null,r)}{if(!(t instanceof fs||t instanceof $f))throw new rn(At.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(bi.fromString(e,...n));return wV(r),new $f(t.firestore,null,r)}}function an(t,e,...n){if(t=Tr(t),arguments.length===1&&(e=$Z.newId()),WJ("doc","path",e),t instanceof KT){const r=bi.fromString(e,...n);return bV(r),new fs(t,null,new Mn(r))}{if(!(t instanceof fs||t instanceof $f))throw new rn(At.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(bi.fromString(e,...n));return bV(r),new fs(t.firestore,t instanceof $f?t.converter:null,new Mn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new CJ(this,"async_queue_retry"),this.Vu=()=>{const r=tD();r&&yn("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=tD();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=tD();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new ld;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return te(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!jw(e))throw e;yn("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw wd("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=cL.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&Gn()}verifyOperationInProgress(){}wu(){return te(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function EV(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class uu extends KT{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new _V,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return te(this,null,function*(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _V(e),this._firestoreClient=void 0,yield e}})}}function W5e(t,e){const n=typeof t=="object"?t:Iw(),r=typeof t=="string"?t:"(default)",i=Rd(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=R3("firestore");o&&V5e(i,...o)}return i}function $w(t){if(t._terminated)throw new rn(At.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||$5e(t),t._firestoreClient}function $5e(t){var e,n,r;const i=t._freezeSettings(),o=function(a,l,c,u){return new b3e(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,VJ(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new O5e(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gv(Ko.fromBase64String(e))}catch(n){throw new rn(At.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Gv(Ko.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new rn(At.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $o(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new rn(At.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new rn(At.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Nr(this._lat,e._lat)||Nr(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5e=/^__.*__$/;class G5e{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ph(e,this.data,this.fieldMask,n,this.fieldTransforms):new Uw(e,this.data,n,this.fieldTransforms)}}class $J{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ph(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function HJ(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Gn()}}class xL{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new xL(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return XC(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(HJ(this.Cu)&&H5e.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class q5e{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$T(e)}Qu(e,n,r,i=!1){return new xL({Cu:e,methodName:n,qu:r,path:$o.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gw(t){const e=t._freezeSettings(),n=$T(t._databaseId);return new q5e(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bL(t,e,n,r,i,o={}){const s=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);SL("Data must be an object, but it was:",s,r);const a=KJ(r,s);let l,c;if(o.merge)l=new Ta(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const u=[];for(const d of o.mergeFields){const f=II(e,d,n);if(!s.contains(f))throw new rn(At.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);XJ(u,f)||u.push(f)}l=new Ta(u),c=s.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=s.fieldTransforms;return new G5e(new ea(a),l,c)}class XT extends YT{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof XT}}class wL extends YT{_toFieldTransform(e){return new H3e(e.path,new Nb)}isEqual(e){return e instanceof wL}}function GJ(t,e,n,r){const i=t.Qu(1,e,n);SL("Data must be an object, but it was:",i,r);const o=[],s=ea.empty();gm(r,(l,c)=>{const u=_L(e,l,n);c=Tr(c);const d=i.Nu(u);if(c instanceof XT)o.push(u);else{const f=qw(c,d);f!=null&&(o.push(u),s.set(u,f))}});const a=new Ta(o);return new $J(s,a,i.fieldTransforms)}function qJ(t,e,n,r,i,o){const s=t.Qu(1,e,n),a=[II(e,r,n)],l=[i];if(o.length%2!=0)throw new rn(At.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<o.length;f+=2)a.push(II(e,o[f])),l.push(o[f+1]);const c=[],u=ea.empty();for(let f=a.length-1;f>=0;--f)if(!XJ(c,a[f])){const p=a[f];let b=l[f];b=Tr(b);const v=s.Nu(p);if(b instanceof XT)c.push(p);else{const m=qw(b,v);m!=null&&(c.push(p),u.set(p,m))}}const d=new Ta(c);return new $J(u,d,s.fieldTransforms)}function K5e(t,e,n,r=!1){return qw(n,t.Qu(r?4:3,e))}function qw(t,e){if(YJ(t=Tr(t)))return SL("Unsupported field value:",e,t),KJ(t,e);if(t instanceof YT)return function(r,i){if(!HJ(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let l=qw(a,i.Lu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Tr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return V3e(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Ar.fromDate(r);return{timestampValue:GC(i.serializer,o)}}if(r instanceof Ar){const o=new Ar(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:GC(i.serializer,o)}}if(r instanceof vL)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gv)return{bytesValue:gJ(i.serializer,r._byteString)};if(r instanceof fs){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:tL(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof yL)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Z3(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${qT(r)}`)}(t,e)}function KJ(t,e){const n={};return HZ(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gm(t,(r,i)=>{const o=qw(i,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function YJ(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ar||t instanceof vL||t instanceof Gv||t instanceof fs||t instanceof YT||t instanceof yL)}function SL(t,e,n){if(!YJ(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=qT(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function II(t,e,n){if((e=Tr(e))instanceof Hw)return e._internalPath;if(typeof e=="string")return _L(t,e);throw XC("Field path arguments must be of type string or ",t,!1,void 0,n)}const Y5e=new RegExp("[~\\*/\\[\\]]");function _L(t,e,n){if(e.search(Y5e)>=0)throw XC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Hw(...e.split("."))._internalPath}catch(r){throw XC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function XC(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new rn(At.INVALID_ARGUMENT,a+t+l)}function XJ(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QJ{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new fs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new X5e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(QT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class X5e extends QJ{data(){return super.data()}}function QT(t,e){return typeof e=="string"?_L(t,e):e instanceof Hw?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZJ(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new rn(At.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class EL{}class CL extends EL{}function xr(t,e,...n){let r=[];e instanceof EL&&r.push(e),r=r.concat(n),function(o){const s=o.filter(l=>l instanceof AL).length,a=o.filter(l=>l instanceof ZT).length;if(s>1||s>0&&a>0)throw new rn(At.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class ZT extends CL{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ZT(e,n,r)}_apply(e){const n=this._parse(e);return JJ(e._query,n),new Id(e.firestore,e.converter,EI(e._query,n))}_parse(e){const n=Gw(e.firestore);return function(o,s,a,l,c,u,d){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new rn(At.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){AV(d,u);const p=[];for(const b of d)p.push(CV(l,o,b));f={arrayValue:{values:p}}}else f=CV(l,o,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||AV(d,u),f=K5e(a,s,d,u==="in"||u==="not-in");return ho.create(c,u,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Vn(t,e,n){const r=e,i=QT("where",t);return ZT._create(i,r,n)}class AL extends EL{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new AL(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:vc.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const l of a)JJ(s,l),s=EI(s,l)}(e._query,n),new Id(e.firestore,e.converter,EI(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class TL extends CL{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new TL(e,n)}_apply(e){const n=function(i,o,s){if(i.startAt!==null)throw new rn(At.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new rn(At.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ob(o,s)}(e._query,this._field,this._direction);return new Id(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new h0(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function g0(t,e="asc"){const n=e,r=QT("orderBy",t);return TL._create(r,n)}class ML extends CL{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new ML(e,n,r)}_apply(e){return new Id(e.firestore,e.converter,$C(e._query,this._limit,this._limitType))}}function Hf(t){return z5e("limit",t),ML._create("limit",t,"F")}function CV(t,e,n){if(typeof(n=Tr(n))=="string"){if(n==="")throw new rn(At.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eJ(e)&&n.indexOf("/")!==-1)throw new rn(At.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(bi.fromString(n));if(!Mn.isDocumentKey(r))throw new rn(At.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return G8(t,new Mn(r))}if(n instanceof fs)return G8(t,n._key);throw new rn(At.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qT(n)}.`)}function AV(t,e){if(!Array.isArray(t)||t.length===0)throw new rn(At.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JJ(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new rn(At.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new rn(At.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Q5e{convertValue(e,n="none"){switch(Zp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Gn()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return gm(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Qi(s.doubleValue));return new yL(o)}convertGeoPoint(e){return new vL(Qi(e.latitude),Qi(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=K3(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(kb(e));default:return null}}convertTimestamp(e){const n=nh(e);return new Ar(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=bi.fromString(e);ti(SJ(r));const i=new Ib(r.get(1),r.get(3)),o=new Mn(r.popFirst(5));return i.isEqual(n)||wd(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eee extends QJ{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(QT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class bE extends eee{data(e={}){return super.data(e)}}class tee{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Yy(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new bE(this._firestore,this._userDataWriter,r.key,r,new Yy(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new rn(At.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{const l=new bE(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Yy(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const l=new bE(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Yy(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:Z5e(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Z5e(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Gn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(t){t=Os(t,fs);const e=Os(t.firestore,uu);return B5e($w(e),t._key).then(n=>nee(e,t,n))}class DL extends Q5e{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gv(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new fs(this.firestore,null,n)}}function er(t){t=Os(t,Id);const e=Os(t.firestore,uu),n=$w(e),r=new DL(e);return ZJ(t._query),j5e(n,t._query).then(i=>new tee(e,r,t,i))}function iu(t,e,n){t=Os(t,fs);const r=Os(t.firestore,uu),i=PL(t.converter,e,n);return Kw(r,[bL(Gw(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Fs.none())])}function Ns(t,e,n,...r){t=Os(t,fs);const i=Os(t.firestore,uu),o=Gw(i);let s;return s=typeof(e=Tr(e))=="string"||e instanceof Hw?qJ(o,"updateDoc",t._key,e,n,r):GJ(o,"updateDoc",t._key,e),Kw(i,[s.toMutation(t._key,Fs.exists(!0))])}function ou(t){return Kw(Os(t.firestore,uu),[new VT(t._key,Fs.none())])}function Sc(t,e){const n=Os(t.firestore,uu),r=an(t),i=PL(t.converter,e);return Kw(n,[bL(Gw(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Fs.exists(!1))]).then(()=>r)}function J5e(t,...e){var n,r,i;t=Tr(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||EV(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(EV(e[s])){const d=e[s];e[s]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[s+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[s+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,u;if(t instanceof fs)c=Os(t.firestore,uu),u=LT(t._key.path),l={next:d=>{e[s]&&e[s](nee(c,t,d))},error:e[s+1],complete:e[s+2]};else{const d=Os(t,Id);c=Os(d.firestore,uu),u=d._query;const f=new DL(c);l={next:p=>{e[s]&&e[s](new tee(c,f,d,p))},error:e[s+1],complete:e[s+2]},ZJ(t._query)}return function(f,p,b,v){const m=new gL(v),g=new pL(p,m,b);return f.asyncQueue.enqueueAndForget(()=>te(this,null,function*(){return dL(yield YC(f),g)})),()=>{m.Za(),f.asyncQueue.enqueueAndForget(()=>te(this,null,function*(){return fL(yield YC(f),g)}))}}($w(c),u,a,l)}function Kw(t,e){return function(r,i){const o=new ld;return r.asyncQueue.enqueueAndForget(()=>te(this,null,function*(){return T5e(yield L5e(r),i,o)})),o.promise}($w(t),e)}function nee(t,e,n){const r=n.docs.get(e._key),i=new DL(t);return new eee(t,i,e._key,r,new Yy(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eBe{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Gw(e)}set(e,n,r){this._verifyNotCommitted();const i=rD(e,this._firestore),o=PL(i.converter,n,r),s=bL(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Fs.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=rD(e,this._firestore);let s;return s=typeof(n=Tr(n))=="string"||n instanceof Hw?qJ(this._dataReader,"WriteBatch.update",o._key,n,r,i):GJ(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Fs.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=rD(e,this._firestore);return this._mutations=this._mutations.concat(new VT(n._key,Fs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new rn(At.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rD(t,e){if((t=Tr(t)).firestore!==e)throw new rn(At.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function _o(){return new wL("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RL(t){return $w(t=Os(t,uu)),new eBe(t,e=>Kw(t,e))}(function(e,n=!0){(function(i){f0=i})(mm),El(new La("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new uu(new o3e(r.getProvider("auth-internal")),new c3e(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new rn(At.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ib(c.options.projectId,u)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ds(z8,"4.7.3",e),ds(z8,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ree="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tBe{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){return te(this,null,function*(){if(this.auth)try{const e=yield this.auth.getToken();return e==null?void 0:e.accessToken}catch(e){return}})}getMessagingToken(){return te(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch(e){return}})}getAppCheckToken(e){return te(this,null,function*(){if(this.appCheck){const n=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return n.error?null:n.token}return null})}getContext(e){return te(this,null,function*(){const n=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI="us-central1";class nBe{constructor(e,n,r,i,o=FI,s){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new tBe(n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(o);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=FI}catch(a){this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function rBe(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}const TV="@firebase/functions",MV="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iBe="auth-internal",oBe="app-check-internal",sBe="messaging-internal";function aBe(t,e){const n=(r,{instanceIdentifier:i})=>{const o=r.getProvider("app").getImmediate(),s=r.getProvider(iBe),a=r.getProvider(sBe),l=r.getProvider(oBe);return new nBe(o,s,a,l,i,t)};El(new La(ree,n,"PUBLIC").setMultipleInstances(!0)),ds(TV,MV,e),ds(TV,MV,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lBe(t=Iw(),e=FI){const r=Rd(Tr(t),ree).getImmediate({identifier:e}),i=R3("functions");return i&&cBe(r,...i),r}function cBe(t,e,n){rBe(Tr(t),e,n)}aBe(fetch.bind(self));const uBe={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ENVIRONMENT:"production",VITE_FIREBASE_API_KEY:"AIzaSyCv7lD3FR7xfw5WtJjElRbt5msOisG6iaM",VITE_FIREBASE_APP_ID:"1:169991609633:web:e933755e3423186450f260",VITE_FIREBASE_AUTH_DOMAIN:"verse-dev-central.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"169991609633",VITE_FIREBASE_PROJECT_ID:"verse-dev-central",VITE_FIREBASE_STORAGE_BUCKET:"verse-dev-central.firebasestorage.app",VITE_USER_NODE_ENV:"production"},Zm=t=>{const e=uBe[t];return!e||e===void 0||e==="undefined"||e===""?(console.error(`Required environment variable ${t} is missing or empty!`),""):e},OI={apiKey:Zm("VITE_FIREBASE_API_KEY"),authDomain:Zm("VITE_FIREBASE_AUTH_DOMAIN"),projectId:Zm("VITE_FIREBASE_PROJECT_ID"),storageBucket:Zm("VITE_FIREBASE_STORAGE_BUCKET"),messagingSenderId:Zm("VITE_FIREBASE_MESSAGING_SENDER_ID"),appId:Zm("VITE_FIREBASE_APP_ID")};OI.projectId!=="verse-dev-central"&&console.error(`WARNING: Using project ${OI.projectId} instead of verse-dev-central!`);const kL=WQ(OI),xt=W5e(kL),Jr=zC(kL);lBe(kL);$Oe(Jr,_Z).catch(t=>{console.error("Error setting auth persistence:",t)});const dBe=["teacher@example.com","admin@example.com"],iee=A.createContext({currentUser:null,isTeacher:!1,isStudent:!1,loginWithGoogle:()=>te(rt,null,function*(){return null}),login:()=>te(rt,null,function*(){}),logout:()=>te(rt,null,function*(){}),resetPassword:()=>te(rt,null,function*(){}),updateEmail:()=>te(rt,null,function*(){}),updatePassword:()=>te(rt,null,function*(){}),signup:()=>te(rt,null,function*(){return{}}),setCurrentUserAsAdmin:()=>te(rt,null,function*(){return!1})}),Pr=()=>A.useContext(iee);function fBe({children:t}){const[e,n]=A.useState(null),[r,i]=A.useState(!1),[o,s]=A.useState(!1),[a,l]=A.useState(!0),c=w=>te(this,null,function*(){var S,D,k;if(!w){i(!1),s(!1);return}try{if(dBe.includes(w.email||"")){i(!0),s(!1);return}try{const P=an(xt,"users",w.uid),M=yield oi(P);if(M.exists()){const T=M.data();try{const _={lastLogin:new Date().toISOString(),updatedAt:new Date().toISOString(),authUid:w.uid,userId:w.uid,displayName:w.displayName||T.displayName||((S=w.email)==null?void 0:S.split("@")[0]),email:w.email,emailVerified:w.emailVerified,linkedToAuth:!0};T.createdAt?_.createdAt=T.createdAt:_.createdAt=new Date().toISOString(),yield Ns(P,_)}catch(_){console.error("Error updating user login timestamp:",_)}if(T.role==="teacher"){i(!0),s(!1);return}else if(T.role==="student"){if(i(!1),s(!0),T.hasTemporaryPassword&&window.location.pathname!=="/password-change"){console.log(" Student has temporary password - redirecting to password change"),setTimeout(()=>{window.location.href="/password-change"},100);return}return}}}catch(P){console.error("Error checking user document by UID:",P)}try{const P=Pn(xt,"users"),M=xr(P,Vn("email","==",w.email)),T=yield er(M);if(T.empty)console.log(" DEBUG: No user documents found by email search");else{const _=T.docs[0],E=_.data();if(_.id===w.uid){console.log(" Found user document by email, but it already has correct UID - no migration needed");try{const R={lastLogin:new Date().toISOString(),updatedAt:new Date().toISOString(),authUid:w.uid,userId:w.uid,displayName:w.displayName||E.displayName||((D=w.email)==null?void 0:D.split("@")[0]),email:w.email,emailVerified:w.emailVerified,linkedToAuth:!0};if(E.createdAt?R.createdAt=E.createdAt:R.createdAt=new Date().toISOString(),yield Ns(_.ref,R),E.role==="teacher"||E.role==="admin")i(!0),s(!1);else if(E.role==="student"&&(i(!1),s(!0),E.hasTemporaryPassword&&window.location.pathname!=="/password-change")){console.log(" Student has temporary password - redirecting to password change"),setTimeout(()=>{window.location.href="/password-change"},100);return}return}catch(R){console.error("Error updating existing user document:",R)}}else{console.log(" Found legacy user document with different UID - performing migration"),console.log(`   Legacy UID: ${_.id}`),console.log(`   Current UID: ${w.uid}`);try{const R=oe(B({},E),{userId:w.uid,authUid:w.uid,updatedAt:new Date().toISOString(),lastLogin:new Date().toISOString(),displayName:w.displayName||E.displayName||((k=w.email)==null?void 0:k.split("@")[0]),email:w.email,emailVerified:w.emailVerified,linkedToAuth:!0,role:E.role});if(E.createdAt?R.createdAt=E.createdAt:R.createdAt=new Date().toISOString(),yield iu(an(xt,"users",w.uid),R),yield ou(_.ref),console.log(" Successfully migrated legacy user document"),E.role==="teacher"||E.role==="admin")i(!0),s(!1);else if(E.role==="student"&&(i(!1),s(!0),E.hasTemporaryPassword&&window.location.pathname!=="/password-change")){console.log(" Migrated student has temporary password - redirecting to password change"),setTimeout(()=>{window.location.href="/password-change"},100);return}return}catch(R){console.error("Error creating new user document with correct UID:",R)}}}}catch(P){console.error("Error checking user by email:",P)}i(!1),s(!1)}catch(P){console.error("Error in checkUserRole:",P),i(!1),s(!1)}});A.useEffect(()=>(FZ(Jr).then(S=>{}).catch(S=>{console.error("Redirect sign-in error:",S)}),wZ(Jr,S=>{n(S),c(S),l(!1)})),[]);const u=(w,S,D)=>te(this,null,function*(){try{D||console.log("No reCAPTCHA token provided, proceeding with signup without verification");const k=yield yZ(Jr,w,S);return yield iu(an(xt,"users",k.user.uid),{email:w,createdAt:new Date().toISOString(),userId:k.user.uid,verifiedByRecaptcha:!!D}),k}catch(k){throw console.error("Error creating user with email and password:",k),k}}),d=(w,S)=>te(this,null,function*(){try{yield xZ(Jr,w,S)}catch(D){throw console.error("Error signing in with email and password:",D),D}}),f=(w=!1,S)=>te(this,null,function*(){var P;const D=new ul;D.addScope("profile"),D.addScope("email");const k={prompt:"select_account"};if(S&&S.trim()&&(k.login_hint=S.toLowerCase().trim()),D.setCustomParameters(k),w)try{return yield IZ(Jr,D),null}catch(M){throw console.error("Redirect sign-in failed:",M),M}try{const M=window.open("","_blank","width=1,height=1");if(!M||M.closed)return M==null||M.close(),yield f(!0);M.close();const T=UC(Jr,D),_=new Promise((R,F)=>{setTimeout(()=>F(new Error("Google Sign-In popup timed out after 30 seconds")),3e4)});return yield Promise.race([T,_])}catch(M){if(console.error("Google Sign-In error occurred:",M),M.code==="auth/popup-closed-by-user")throw new Error("Sign-in was cancelled. Please try again.");if(M.code==="auth/popup-blocked")throw new Error("Popup was blocked by your browser. Please allow popups for this site and try again.");if(M.message&&M.message.includes("timed out"))try{return yield f(!0)}catch(T){throw console.error("Redirect fallback also failed:",T),new Error("Both popup and redirect sign-in methods failed. Please try again or contact support.")}if(M.message&&M.message.includes("IndexedDB"))throw new Error("Browser storage issue detected. Please clear your browser data (F12  Application  Storage  Clear site data) and try again.");if(M.message&&(M.message.includes("storage")||M.message.includes("quota")))throw new Error("Browser storage is full or corrupted. Please clear your browser data and try again.");if(M.code==="auth/account-exists-with-different-credential"){const T=(P=M.customData)==null?void 0:P.email;if(T)throw new Error(`You already have an account with ${T}. Please sign in with your email and password to link your Google account.`)}throw M}}),x={currentUser:e,isTeacher:r,isStudent:o,loginWithGoogle:f,login:d,logout:()=>te(this,null,function*(){try{yield qOe(Jr)}catch(w){throw console.error("Error signing out:",w),w}}),resetPassword:w=>te(this,null,function*(){try{yield jOe(Jr,w)}catch(S){throw console.error("Error resetting password:",S),S}}),updateEmail:w=>te(this,null,function*(){try{if(e)yield WOe(e,w);else throw new Error("No user logged in")}catch(S){throw console.error("Error updating email:",S),S}}),updatePassword:w=>te(this,null,function*(){try{if(e)yield z3(e,w);else throw new Error("No user logged in")}catch(S){throw console.error("Error updating password:",S),S}}),signup:u,setCurrentUserAsAdmin:()=>te(this,null,function*(){try{if(!e)throw new Error("No user logged in");return yield iu(an(xt,"users",e.uid),{email:e.email,role:"admin",updatedAt:new Date().toISOString()},{merge:!0}),i(!0),console.log("User set as admin and teacher flag activated"),!0}catch(w){throw console.error("Error setting user as admin:",w),w}})};return h.jsx(iee.Provider,{value:x,children:!a&&t})}const oee=A.createContext({hasUnsavedChanges:!1,setHasUnsavedChanges:()=>{},promptBeforeLeaving:()=>te(rt,null,function*(){return!0})}),hBe=()=>A.useContext(oee),pBe=({children:t})=>{const[e,n]=A.useState(!1),[r,i]=A.useState(!1),[o,s]=A.useState(null),[a,l]=A.useState("You have unsaved changes. Are you sure you want to leave this page?"),[c,u]=A.useState(!1);A.useEffect(()=>{if(e){const v=m=>(m.preventDefault(),m.returnValue=a,a);return window.addEventListener("beforeunload",v),()=>window.removeEventListener("beforeunload",v)}},[e,a]);const d=(v,m=!1)=>te(rt,null,function*(){return e?(v&&l(v),u(m),i(!0),new Promise(g=>{s(()=>g)})):!0}),f=()=>{i(!1),o&&(o(!0),s(null))},p=()=>{i(!1),o&&(o(!1),s(null))},b=()=>{i(!1),n(!1),o&&(o(!0),s(null))};return h.jsxs(oee.Provider,{value:{hasUnsavedChanges:e,setHasUnsavedChanges:n,promptBeforeLeaving:d},children:[t,r&&h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:h.jsxs("div",{style:{backgroundColor:"white",padding:"var(--spacing-6)",borderRadius:"var(--border-radius-md)",maxWidth:"500px",width:"90%",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[h.jsx("h2",{style:{fontSize:"var(--font-size-xl)",marginBottom:"var(--spacing-4)",color:"var(--color-warning-700)"},children:"Unsaved Changes"}),h.jsx("p",{style:{marginBottom:"var(--spacing-6)"},children:a}),h.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"var(--spacing-3)",flexWrap:"wrap"},children:[h.jsx("button",{onClick:p,style:{padding:"var(--spacing-2) var(--spacing-4)",borderRadius:"var(--border-radius-sm)",border:"1px solid var(--color-gray-300)",backgroundColor:"white",cursor:"pointer"},children:"Stay on This Page"}),h.jsx("button",{onClick:b,style:{padding:"var(--spacing-2) var(--spacing-4)",borderRadius:"var(--border-radius-sm)",border:"1px solid var(--color-error-400)",backgroundColor:"white",color:"var(--color-error-600)",cursor:"pointer"},children:"Leave Without Saving"}),c&&h.jsx("button",{onClick:f,style:{padding:"var(--spacing-2) var(--spacing-4)",borderRadius:"var(--border-radius-sm)",border:"none",backgroundColor:"var(--color-warning-600)",color:"white",cursor:"pointer"},children:"Save & Leave"})]})]})})]})},see=A.createContext(null),mBe=({children:t})=>{const[e,n]=A.useState(null),[r,i]=A.useState({}),[o,s]=A.useState(!1),a=A.useCallback((u,d={})=>{console.log(" ModalManager: showModal called with",u,d),requestAnimationFrame(()=>{console.log(" ModalManager: Setting modal state",u),n(u),i(d),requestAnimationFrame(()=>{s(!0),console.log(" ModalManager: Modal is ready for interaction",u)})})},[]),l=A.useCallback(()=>{console.log(" ModalManager: hideModal called"),s(!1),n(null),i({})},[]);A.useEffect(()=>{e||s(!1)},[e]);const c={showModal:a,hideModal:l,modalId:e,modalProps:r,isModalReady:o};return h.jsx(see.Provider,{value:c,children:t})},kl=()=>{const t=A.useContext(see);if(!t)throw new Error("useModal must be used within ModalProvider");return t},IL=({message:t="",size:e="medium",fullScreen:n=!1})=>{const i={small:{logo:"40px",text:"14px"},medium:{logo:"80px",text:"18px"},large:{logo:"120px",text:"24px"}}[e],o=n?{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.95)",zIndex:9999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"48px"};return h.jsxs("div",{style:o,children:[h.jsxs("div",{style:{position:"relative",marginBottom:"24px",display:"flex",alignItems:"center",justifyContent:"center"},children:[h.jsx("div",{style:{position:"absolute",width:i.logo,height:i.logo,backgroundColor:"#EBF8FF",borderRadius:"50%",animation:"pulse 2s ease-in-out infinite",zIndex:2}}),h.jsx("img",{src:"/android-chrome-192x192.png",alt:"Loading...",style:{width:i.logo,height:i.logo,borderRadius:"50%",animation:"bounce 1.5s ease-in-out infinite",zIndex:3,position:"relative"}})]}),h.jsx("div",{style:{display:"flex",gap:"8px",marginTop:"16px"},children:[0,1,2].map(s=>h.jsx("div",{style:{width:"8px",height:"8px",backgroundColor:"#4299E1",borderRadius:"50%",animation:`dotBounce 1.4s ease-in-out infinite ${s*.2}s`}},s))}),h.jsx("style",{children:`
        @keyframes bounce {
          0%, 20%, 53%, 80%, 100% {
            transform: translate(0, 0) scale(1);
          }
          40%, 43% {
            transform: translate(0, -8px) scale(1.1);
          }
          70% {
            transform: translate(0, -4px) scale(1.05);
          }
          90% {
            transform: translate(0, -2px) scale(1.02);
          }
        }
        
        @keyframes pulse {
          0% {
            transform: scale(0.95);
            opacity: 0.7;
          }
          50% {
            transform: scale(1.05);
            opacity: 0.9;
          }
          100% {
            transform: scale(0.95);
            opacity: 0.7;
          }
        }
        
        @keyframes dotBounce {
          0%, 80%, 100% {
            transform: scale(0.8);
            opacity: 0.5;
          }
          40% {
            transform: scale(1.2);
            opacity: 1;
          }
        }
      `})]})},gBe=A.createContext(void 0),vBe=({children:t})=>{const[e,n]=A.useState(!1),[r,i]=A.useState("Loading..."),o=(a="Loading...")=>{i(a),n(!0)},s=()=>{n(!1)};return h.jsxs(gBe.Provider,{value:{showLoading:o,hideLoading:s,isLoading:e},children:[t,e&&h.jsx(IL,{message:r,size:"large",fullScreen:!0})]})},yBe=`
.navbar-responsive {
  background-color: var(--color-primary-500);
  padding: var(--spacing-3) var(--spacing-4);
  position: sticky;
  top: 0;
  z-index: 100;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.navbar-container {
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacing-2);
}

.navbar-left {
  display: flex;
  gap: var(--spacing-4);
  flex: 1;
  min-width: 0;
}

.navbar-right {
  display: flex;
  align-items: center;
  gap: var(--spacing-2);
  flex-shrink: 0;
}

.navbar-user-info {
  color: white;
  font-size: 0.9rem;
  max-width: 200px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.navbar-button {
  background-color: rgba(255, 255, 255, 0.2);
  color: white;
  padding: var(--spacing-2) var(--spacing-3);
  border: none;
  border-radius: var(--border-radius-md);
  cursor: pointer;
  font-weight: bold;
  transition: all 0.2s ease-in-out;
  font-size: 0.9rem;
  white-space: nowrap;
}

.navbar-button:hover {
  opacity: 0.8;
  transform: translateY(-1px);
}

.navbar-button.teacher {
  background-color: rgba(255, 255, 255, 0.9);
  color: var(--color-primary-600);
  font-weight: bold;
}

.navbar-link {
  color: white;
  font-weight: bold;
  text-decoration: none;
  transition: opacity 0.2s ease-in-out;
  padding: var(--spacing-2) var(--spacing-3);
  border-radius: var(--border-radius-sm);
  white-space: nowrap;
}

.navbar-link:hover {
  opacity: 0.8;
}

.navbar-link.active {
  background-color: rgba(255, 255, 255, 0.2);
}

.admin-link {
  color: #FFD700 !important;
}

/* Mobile Responsive Styles */
@media (max-width: 768px) {
  .navbar-responsive {
    padding: var(--spacing-2) var(--spacing-3);
  }
  
  .navbar-container {
    gap: var(--spacing-1);
  }
  
  .navbar-left {
    gap: var(--spacing-2);
  }
  
  .navbar-right {
    gap: var(--spacing-1);
  }
  
  .navbar-user-info {
    max-width: 100px;
    font-size: 0.8rem;
  }
  
  .navbar-button {
    padding: var(--spacing-2);
    font-size: 0.8rem;
    min-width: 60px;
  }
  
  .navbar-button.teacher {
    font-size: 0.75rem;
    padding: var(--spacing-2) var(--spacing-3);
  }
  
  .navbar-link {
    padding: var(--spacing-2);
    font-size: 0.9rem;
  }
}

@media (max-width: 480px) {
  .navbar-container {
    flex-wrap: nowrap;
    overflow-x: auto;
  }
  
  .navbar-user-info {
    display: none; /* Hide email on very small screens */
  }
  
  .navbar-button {
    padding: var(--spacing-1) var(--spacing-2);
    font-size: 0.75rem;
    min-width: 50px;
  }
  
  .navbar-button.teacher {
    font-size: 0.7rem;
    padding: var(--spacing-1) var(--spacing-2);
  }
  
  .navbar-link {
    padding: var(--spacing-1) var(--spacing-2);
    font-size: 0.85rem;
  }
}

@media (max-width: 360px) {
  .navbar-right {
    gap: 0;
  }
  
  .navbar-button {
    padding: var(--spacing-1);
    font-size: 0.7rem;
    min-width: 45px;
  }
  
  .navbar-button.teacher {
    font-size: 0.65rem;
    padding: var(--spacing-1);
  }
}
`,xBe=({isOpen:t,onClose:e,teacherName:n,setTeacherName:r,teacherEmail:i,setTeacherEmail:o,teacherPassword:s,setTeacherPassword:a,teacherConfirmPassword:l,setTeacherConfirmPassword:c,isLoading:u,onEmailSignup:d,onGoogleSignup:f})=>h.jsxs(Kc,{isOpen:t,onClose:e,size:"md",children:[h.jsx(Qc,{}),h.jsxs(Yc,{children:[h.jsx(Xc,{children:h.jsxs($t,{spacing:2,align:"center",children:[h.jsx(dt,{fontSize:"2xl",fontWeight:"bold",color:"blue.600",children:" Get Started as a Teacher"}),h.jsx(dt,{fontSize:"sm",color:"gray.600",textAlign:"center",children:"Create your teacher account to start building amazing educational games"})]})}),h.jsx(Jc,{}),h.jsx(Zc,{pb:6,children:h.jsxs($t,{spacing:4,children:[h.jsxs(Ir,{children:[h.jsx(fr,{children:"Full Name"}),h.jsx(si,{value:n,onChange:p=>r(p.target.value),placeholder:"Enter your full name",disabled:u})]}),h.jsxs(Ir,{children:[h.jsx(fr,{children:"Email Address"}),h.jsx(si,{type:"email",value:i,onChange:p=>o(p.target.value),placeholder:"Enter your email",disabled:u})]}),h.jsxs(Ir,{children:[h.jsx(fr,{children:"Password"}),h.jsx(si,{type:"password",value:s,onChange:p=>a(p.target.value),placeholder:"Create a strong password",disabled:u})]}),h.jsxs(Ir,{children:[h.jsx(fr,{children:"Confirm Password"}),h.jsx(si,{type:"password",value:l,onChange:p=>c(p.target.value),placeholder:"Confirm your password",disabled:u})]}),h.jsx(hn,{colorScheme:"blue",width:"100%",onClick:d,isLoading:u,loadingText:"Creating Account...",children:"Create Teacher Account"}),h.jsxs(Ln,{width:"100%",children:[h.jsx(vd,{}),h.jsx(dt,{fontSize:"sm",color:"gray.500",children:"or"}),h.jsx(vd,{})]}),h.jsx(hn,{variant:"outline",width:"100%",onClick:f,isLoading:u,leftIcon:h.jsxs("svg",{width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",children:[h.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),h.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),h.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),h.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),children:"Sign up with Google"})]})})]})]}),bBe=({isOpen:t,onClose:e,memberEmail:n,setMemberEmail:r,memberPassword:i,setMemberPassword:o,isLoading:s,onEmailLogin:a,onGoogleLogin:l})=>h.jsxs(Kc,{isOpen:t,onClose:e,size:"md",children:[h.jsx(Qc,{}),h.jsxs(Yc,{children:[h.jsx(Xc,{children:h.jsxs($t,{spacing:2,align:"center",children:[h.jsx(dt,{fontSize:"2xl",fontWeight:"bold",color:"blue.600",children:" Members Login"}),h.jsx(dt,{fontSize:"sm",color:"gray.600",textAlign:"center",children:"Sign in to access your dashboard and continue learning"})]})}),h.jsx(Jc,{}),h.jsx(Zc,{pb:6,children:h.jsxs($t,{spacing:4,children:[h.jsxs(Ir,{children:[h.jsx(fr,{children:"Email Address"}),h.jsx(si,{type:"email",value:n,onChange:c=>r(c.target.value),placeholder:"Enter your email",disabled:s})]}),h.jsxs(Ir,{children:[h.jsx(fr,{children:"Password"}),h.jsx(si,{type:"password",value:i,onChange:c=>o(c.target.value),placeholder:"Enter your password",disabled:s})]}),h.jsx(hn,{colorScheme:"blue",width:"100%",onClick:a,isLoading:s,loadingText:"Signing In...",children:"Sign In"}),h.jsxs(Ln,{width:"100%",children:[h.jsx(vd,{}),h.jsx(dt,{fontSize:"sm",color:"gray.500",children:"or"}),h.jsx(vd,{})]}),h.jsx(hn,{variant:"outline",width:"100%",onClick:l,isLoading:s,leftIcon:h.jsxs("svg",{width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",children:[h.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),h.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),h.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),h.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),children:"Sign in with Google"})]})})]})]}),wBe=()=>{const{currentUser:t,isTeacher:e,isStudent:n,logout:r}=Pr(),i=vs(),o=Fr(),{hasUnsavedChanges:s,promptBeforeLeaving:a}=hBe(),[l,c]=A.useState(!1),[u,d]=A.useState(!1),[f,p]=A.useState(!1),[b,v]=A.useState(!1),[m,g]=A.useState(""),[x,w]=A.useState(""),[S,D]=A.useState(""),[k,P]=A.useState(""),[M,T]=A.useState(""),[_,E]=A.useState(""),R=ro(),L=(()=>{if(t&&n)return!0;const Y=new URLSearchParams(i.search),J=i.pathname==="/play",V=Y.get("token"),re=sessionStorage.getItem("direct_token_access")==="true";return J&&(V||re)})(),N=!t&&!L;A.useEffect(()=>{te(rt,null,function*(){if(!t){c(!1);return}try{const J=an(xt,"users",t.uid),V=yield oi(J);V.exists()&&V.data().role==="admin"?c(!0):c(!1)}catch(J){console.error("Error checking admin status:",J),c(!1)}})},[t]);const U=(Y,J)=>te(rt,null,function*(){if(i.pathname===J||!s)return;Y.preventDefault(),(yield a())&&o(J)}),H=()=>te(rt,null,function*(){s&&!(yield a("You have unsaved changes. Are you sure you want to log out?"))||(yield r(),o("/"))}),j=()=>{g(""),w(""),D(""),P(""),T(""),E(""),v(!1)},z=()=>{d(!1),p(!1),j()},q=()=>te(rt,null,function*(){if(!m||!x||!k){R({title:"Missing Information",description:"Please fill in all fields.",status:"error",duration:3e3});return}if(x!==S){R({title:"Password Mismatch",description:"Passwords do not match.",status:"error",duration:3e3});return}if(x.length<6){R({title:"Weak Password",description:"Password must be at least 6 characters.",status:"error",duration:3e3});return}v(!0);try{const J=(yield yZ(Jr,m,x)).user;yield VOe(J,{displayName:k}),yield iu(an(xt,"users",J.uid),{name:k,email:m,role:"teacher",createdAt:new Date().toISOString(),createdBy:"signup"}),R({title:"Welcome to LuminateLearn!",description:"Your teacher account has been created successfully.",status:"success",duration:3e3}),z(),o("/teacher")}catch(Y){console.error("Teacher signup error:",Y);let J="Signup Error",V="Failed to create account. Please try again.";Y.code==="auth/email-already-in-use"?(J="Account Already Exists",V='This email already has an account. Please use "Members Login" to sign in instead, or use a different email address.'):Y.code==="auth/invalid-email"?V="Please enter a valid email address.":Y.code==="auth/weak-password"?V="Password is too weak. Please choose a stronger password.":Y.code==="auth/operation-not-allowed"?V="Email/password accounts are not enabled. Please contact support.":Y.code==="auth/network-request-failed"?V="Network error. Please check your internet connection and try again.":Y.message&&(V=Y.message),R({title:J,description:V,status:"error",duration:5e3})}finally{v(!1)}}),$=()=>te(rt,null,function*(){v(!0);try{const Y=new ul,V=(yield UC(Jr,Y)).user,re=an(xt,"users",V.uid),fe=yield oi(re);if(fe.exists()){const pe=fe.data();if(pe.role!=="teacher"){const ce=oe(B({},pe),{role:"teacher",updatedAt:new Date().toISOString()});yield iu(re,ce,{merge:!0})}}else{const pe={name:V.displayName||"Teacher",email:V.email||"",role:"teacher",createdAt:new Date().toISOString(),createdBy:"google-signup"};yield iu(re,pe)}R({title:"Welcome to LuminateLearn!",description:"Successfully signed up with Google.",status:"success",duration:3e3}),z(),o("/teacher")}catch(Y){console.error(" NAVBAR: Teacher Google signup error:",Y);let J="Google Signup Error",V="Failed to sign up with Google. Please try again.";Y.code==="auth/popup-closed-by-user"?(J="Signup Cancelled",V="Google sign-up was cancelled."):Y.code==="auth/account-exists-with-different-credential"?(J="Account Already Exists",V='An account already exists with this email using a different sign-in method. Please use "Members Login" instead.'):Y.code==="auth/popup-blocked"?V="Popup was blocked by your browser. Please allow popups and try again.":Y.code==="auth/network-request-failed"?V="Network error. Please check your internet connection and try again.":Y.message&&(V=Y.message),R({title:J,description:V,status:Y.code==="auth/popup-closed-by-user"?"info":"error",duration:5e3})}finally{v(!1)}}),K=()=>te(rt,null,function*(){if(!M||!_){R({title:"Missing Information",description:"Please enter your email and password.",status:"error",duration:3e3});return}v(!0);try{const J=(yield xZ(Jr,M,_)).user,V=an(xt,"users",J.uid),re=yield oi(V);if(!re.exists()){yield Jr.signOut(),R({title:"Account Not Found",description:"Your account is not found in our system. Please contact your administrator or create a new account.",status:"error",duration:5e3}),z();return}const fe=re.data();if(!fe.role||fe.role!=="teacher"&&fe.role!=="student"&&fe.role!=="admin"){yield Jr.signOut(),R({title:"Invalid Account",description:"Your account is not properly configured. Please contact your administrator.",status:"error",duration:5e3}),z();return}R({title:"Welcome Back!",description:"Successfully logged in.",status:"success",duration:3e3}),z()}catch(Y){console.error("Login error:",Y);let J="Failed to log in. Please try again.";Y.code==="auth/user-not-found"?J="No account found with this email address.":Y.code==="auth/wrong-password"?J="Incorrect password. Please try again.":Y.code==="auth/invalid-email"?J="Invalid email address format.":Y.code==="auth/user-disabled"&&(J="This account has been disabled. Please contact support."),R({title:"Login Error",description:J,status:"error",duration:3e3})}finally{v(!1)}}),G=()=>te(rt,null,function*(){v(!0);try{const Y=new ul,V=(yield UC(Jr,Y)).user,re=an(xt,"users",V.uid),fe=yield oi(re);if(!fe.exists()){yield V.delete(),R({title:"Account Not Found",description:'You need to create an account first. Please use "Get Started as a Teacher" to create your account.',status:"error",duration:5e3}),z();return}const pe=fe.data();if(!pe.role||pe.role!=="teacher"&&pe.role!=="student"&&pe.role!=="admin"){yield V.delete(),R({title:"Invalid Account",description:"Your account is not properly configured. Please contact your administrator.",status:"error",duration:5e3}),z();return}R({title:"Welcome Back!",description:"Successfully logged in with Google.",status:"success",duration:3e3}),z()}catch(Y){console.error("Google login error:",Y),Y.code==="auth/popup-closed-by-user"?R({title:"Login Cancelled",description:"Google sign-in was cancelled.",status:"info",duration:3e3}):R({title:"Login Error",description:"Failed to log in with Google. Please try again.",status:"error",duration:3e3})}finally{v(!1)}});return h.jsxs(h.Fragment,{children:[h.jsx("style",{children:yBe}),h.jsx("nav",{className:"navbar-responsive",children:h.jsxs("div",{className:"navbar-container",children:[h.jsxs("div",{className:"navbar-left",children:[!t&&!L&&h.jsx(Ku,{to:"/",className:`navbar-link ${i.pathname==="/"?"active":""}`,onClick:Y=>U(Y,"/"),onMouseOver:Y=>Y.currentTarget.style.opacity="0.8",onMouseOut:Y=>Y.currentTarget.style.opacity="1",children:"Home"}),e&&h.jsx(h.Fragment,{children:h.jsx(Ku,{to:"/teacher",className:`navbar-link ${i.pathname==="/teacher"?"active":""}`,onClick:Y=>U(Y,"/teacher"),onMouseOver:Y=>Y.currentTarget.style.opacity="0.8",onMouseOut:Y=>Y.currentTarget.style.opacity="1",children:"Create"})}),n&&h.jsx(Ku,{to:"/student",className:`navbar-link ${i.pathname==="/student"?"active":""}`,onClick:Y=>U(Y,"/student"),onMouseOver:Y=>Y.currentTarget.style.opacity="0.8",onMouseOut:Y=>Y.currentTarget.style.opacity="1",children:"Dashboard"}),l&&h.jsx(Ku,{to:"/admin",className:`navbar-link admin-link ${i.pathname==="/admin"?"active":""}`,onClick:Y=>U(Y,"/admin"),onMouseOver:Y=>Y.currentTarget.style.opacity="0.8",onMouseOut:Y=>Y.currentTarget.style.opacity="1",children:"Admin"})]}),h.jsx("div",{className:"navbar-right",children:t?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"navbar-user-info",children:t.email}),h.jsx("button",{onClick:H,className:"navbar-button",onMouseOver:Y=>Y.currentTarget.style.opacity="0.8",onMouseOut:Y=>Y.currentTarget.style.opacity="1",children:"Logout"})]}):N?h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>d(!0),className:"navbar-button teacher",onMouseOver:Y=>Y.currentTarget.style.opacity="0.8",onMouseOut:Y=>Y.currentTarget.style.opacity="1",children:"Get Started as a Teacher"}),h.jsx("button",{onClick:()=>p(!0),className:"navbar-button",onMouseOver:Y=>Y.currentTarget.style.opacity="0.8",onMouseOut:Y=>Y.currentTarget.style.opacity="1",children:"Members Login"})]}):null})]})}),h.jsx(xBe,{isOpen:u,onClose:z,teacherName:k,setTeacherName:P,teacherEmail:m,setTeacherEmail:g,teacherPassword:x,setTeacherPassword:w,teacherConfirmPassword:S,setTeacherConfirmPassword:D,isLoading:b,onEmailSignup:q,onGoogleSignup:$}),h.jsx(bBe,{isOpen:f,onClose:z,memberEmail:M,setMemberEmail:T,memberPassword:_,setMemberPassword:E,isLoading:b,onEmailLogin:K,onGoogleLogin:G})]})},jS=["#3182CE","#38A169","#805AD5","#D69E2E","#E53E3E","#DD6B20","#319795","#ED64A6"],PV=({title:t,itemName:e,itemType:n,warningMessage:r,onDelete:i,onCancel:o})=>{const{hideModal:s,isModalReady:a}=kl(),l=d=>{if(d.preventDefault(),d.stopPropagation(),!a){console.warn(" DeleteConfirmationModal: Modal not ready, ignoring click");return}console.log(" DeleteConfirmationModal: Executing delete"),i(),s()},c=d=>{d.preventDefault(),d.stopPropagation(),o(),s()},u=d=>{d.target===d.currentTarget&&c(d)};return h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:u,children:h.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"8px",maxWidth:"400px",width:"100%",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",opacity:a?1:.7,transition:"opacity 0.1s ease-in-out"},onClick:d=>d.stopPropagation(),children:[h.jsx("h3",{style:{marginBottom:"16px",fontSize:"18px",fontWeight:"bold"},children:t}),h.jsxs("p",{style:{marginBottom:"8px",color:"#4A5568"},children:["Are you sure you want to delete ",h.jsx("strong",{children:e}),"?"]}),r&&h.jsx("p",{style:{marginBottom:"16px",color:"#E53E3E",fontSize:"14px"},children:r}),h.jsx("p",{style:{marginBottom:"24px",color:"#4A5568",fontSize:"14px"},children:"This action cannot be undone."}),h.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[h.jsx("button",{onClick:c,disabled:!a,style:{padding:"8px 16px",backgroundColor:"#E2E8F0",color:"#4A5568",border:"none",borderRadius:"4px",cursor:a?"pointer":"not-allowed",opacity:a?1:.6},children:"Cancel"}),h.jsx("button",{onClick:l,disabled:!a,style:{padding:"8px 16px",backgroundColor:"#F56565",color:"white",border:"none",borderRadius:"4px",cursor:a?"pointer":"not-allowed",opacity:a?1:.6},children:"Delete"})]})]})})},US=({folder:t,onSave:e,onCancel:n})=>{const{hideModal:r,isModalReady:i}=kl(),[o,s]=A.useState((t==null?void 0:t.name)||""),[a,l]=A.useState((t==null?void 0:t.description)||""),[c,u]=A.useState((t==null?void 0:t.color)||jS[0]),d=A.useRef(null);console.log(" FolderModal: Component initialized with props:",{hasFolder:!!t,folderId:t==null?void 0:t.id,folderName:t==null?void 0:t.name,hasOnSave:typeof e,hasOnCancel:typeof n,isModalReady:i}),A.useEffect(()=>{t?(s(t.name||""),l(t.description||""),u(t.color||jS[0])):(s(""),l(""),u(jS[0]))},[t==null?void 0:t.id]),A.useEffect(()=>{if(i&&!(t!=null&&t.id)&&d.current){const m=setTimeout(()=>{var g;(g=d.current)==null||g.focus()},100);return()=>clearTimeout(m)}},[i,t==null?void 0:t.id]);const f=m=>{console.log(" FolderModal: Form submit triggered!",m),m.preventDefault();const g=o.trim();if(!g){console.log(" FolderModal: Form validation failed - empty name");return}const x={name:g,description:a.trim(),color:c};console.log(" FolderModal: Submitting folder data:",x,"folderId:",t==null?void 0:t.id),e(x,t==null?void 0:t.id),r()},p=m=>{console.log(" FolderModal: Cancel button clicked"),m.preventDefault(),m.stopPropagation(),n(),r()},b=m=>{m.target===m.currentTarget&&p(m)},v=m=>{m.stopPropagation()};return h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:b,children:h.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"8px",maxWidth:"500px",width:"100%",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",opacity:i?1:.7,transition:"opacity 0.1s ease-in-out"},onClick:v,children:[h.jsx("h3",{style:{marginBottom:"20px",fontSize:"20px",fontWeight:"bold"},children:t!=null&&t.id?"Edit Folder":"Create New Folder"}),h.jsxs("form",{onSubmit:f,children:[h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Folder Name *"}),h.jsx("input",{ref:d,type:"text",value:o,onChange:m=>s(m.target.value),placeholder:"Enter folder name",required:!0,disabled:!i,style:{width:"100%",padding:"8px 12px",border:"1px solid #E2E8F0",borderRadius:"4px",fontSize:"16px",opacity:i?1:.6}})]}),h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Description"}),h.jsx("textarea",{value:a,onChange:m=>l(m.target.value),placeholder:"Enter folder description (optional)",rows:3,disabled:!i,style:{width:"100%",padding:"8px 12px",border:"1px solid #E2E8F0",borderRadius:"4px",fontSize:"16px",resize:"vertical",opacity:i?1:.6}})]}),h.jsxs("div",{style:{marginBottom:"24px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Color"}),h.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:jS.map(m=>h.jsx("button",{type:"button",onClick:()=>u(m),disabled:!i,style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:m,border:c===m?"3px solid #000":"2px solid #E2E8F0",cursor:i?"pointer":"not-allowed",transition:"border-color 0.2s",opacity:i?1:.6},title:m},m))})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"12px"},children:[h.jsx("button",{type:"button",onClick:p,disabled:!i,style:{padding:"10px 20px",backgroundColor:"white",color:"#4A5568",border:"1px solid #E2E8F0",borderRadius:"4px",cursor:i?"pointer":"not-allowed",fontSize:"16px",opacity:i?1:.6},children:"Cancel"}),h.jsx("button",{type:"submit",disabled:!i,onClick:m=>{console.log(" FolderModal: Create Folder button clicked!",{isModalReady:i,buttonDisabled:!i,folderName:o,event:m})},style:{padding:"10px 20px",backgroundColor:"#3182CE",color:"white",border:"none",borderRadius:"4px",cursor:i?"pointer":"not-allowed",fontSize:"16px",opacity:i?1:.6},children:t!=null&&t.id?"Update Folder":"Create Folder"})]})]})]})})},SBe=({student:t,onSave:e,onCancel:n})=>{const{hideModal:r,isModalReady:i}=kl(),[o,s]=A.useState((t==null?void 0:t.name)||""),[a,l]=A.useState((t==null?void 0:t.email)||""),[c,u]=A.useState((t==null?void 0:t.grade)||""),[d,f]=A.useState(t==null?void 0:t.age),[p,b]=A.useState((t==null?void 0:t.notes)||""),v=!(t!=null&&t.id);A.useEffect(()=>{t?(s(t.name||""),l(t.email||""),u(t.grade||""),f(t.age),b(t.notes||"")):(s(""),l(""),u(""),f(void 0),b(""))},[t==null?void 0:t.id]);const m=w=>{w.preventDefault();const S={name:o.trim(),email:a.trim(),grade:c.trim(),age:d||0,notes:p.trim()};e(S,t==null?void 0:t.id),r()},g=w=>{w.preventDefault(),w.stopPropagation(),n(),r()},x=w=>{const S=w.target.value;if(S==="")f(void 0);else{const D=Number(S);isNaN(D)||f(D)}};return h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:w=>{w.target===w.currentTarget&&g(w)},children:h.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"8px",maxWidth:"500px",width:"100%",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",opacity:i?1:.7,transition:"opacity 0.1s ease-in-out",maxHeight:"90vh",overflowY:"auto"},onClick:w=>w.stopPropagation(),children:[h.jsx("h3",{style:{marginBottom:"16px",fontSize:"20px"},children:t?"Edit Student":"Add New Student"}),v&&h.jsx("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"#EBF8FF",borderRadius:"6px",fontSize:"14px",color:"#1E40AF"},children:" After adding this student, they will receive an email to set up their password."}),h.jsxs("form",{onSubmit:m,children:[h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Name *"}),h.jsx("input",{type:"text",value:o,onChange:w=>s(w.target.value),required:!0,disabled:!i,style:{width:"100%",padding:"8px 12px",border:"1px solid #E2E8F0",borderRadius:"4px",backgroundColor:"#F8FAFC"}})]}),h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Email *"}),h.jsx("input",{type:"email",value:a,onChange:w=>l(w.target.value),required:!0,disabled:!i,style:{width:"100%",padding:"8px 12px",border:"1px solid #E2E8F0",borderRadius:"4px",backgroundColor:"#F8FAFC"}}),v&&h.jsx("p",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:"A password setup email will be sent to this address"})]}),h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Grade/Class"}),h.jsx("input",{type:"text",value:c,onChange:w=>u(w.target.value),disabled:!i,style:{width:"100%",padding:"8px 12px",border:"1px solid #E2E8F0",borderRadius:"4px",backgroundColor:"#F8FAFC"}})]}),h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Age"}),h.jsx("input",{type:"number",value:d!==void 0?d:"",onChange:x,min:"0",max:"100",placeholder:"Enter age",disabled:!i,style:{width:"120px",padding:"8px 12px",border:"1px solid #E2E8F0",borderRadius:"4px",backgroundColor:"#F8FAFC"}})]}),h.jsxs("div",{style:{marginBottom:"24px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Notes"}),h.jsx("textarea",{value:p,onChange:w=>b(w.target.value),disabled:!i,style:{width:"100%",padding:"8px 12px",border:"1px solid #E2E8F0",borderRadius:"4px",backgroundColor:"#F8FAFC",minHeight:"100px",resize:"vertical"}})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[h.jsx("button",{type:"button",onClick:g,disabled:!i,style:{padding:"8px 16px",backgroundColor:"#E2E8F0",color:"#4A5568",border:"none",borderRadius:"4px",cursor:i?"pointer":"not-allowed",opacity:i?1:.6},children:"Cancel"}),h.jsx("button",{type:"submit",disabled:!i,style:{padding:"8px 16px",backgroundColor:"#4299E1",color:"white",border:"none",borderRadius:"4px",cursor:i?"pointer":"not-allowed",opacity:i?1:.6},children:t?"Update Student":"Add Student"})]})]})]})})},_Be=({gameName:t,onUpdate:e,onCopy:n,onCancel:r})=>{const{hideModal:i,isModalReady:o}=kl(),s=()=>{e(),i()},a=()=>{n(),i()},l=()=>{r(),i()};return h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:c=>{c.target===c.currentTarget&&l()},children:h.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"8px",maxWidth:"500px",width:"100%",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",opacity:o?1:.7,transition:"opacity 0.1s ease-in-out"},onClick:c=>c.stopPropagation(),children:[h.jsx("h3",{style:{marginBottom:"16px",fontSize:"20px",fontWeight:"bold"},children:"Edit Game Configuration"}),h.jsxs("p",{style:{marginBottom:"8px",color:"#4A5568"},children:["You're about to edit ",h.jsx("strong",{children:t}),". Choose how you'd like to proceed:"]}),h.jsx("p",{style:{marginBottom:"24px",color:"#4A5568",fontSize:"14px"},children:"Update will modify the existing game, while Create Copy will make a new version."}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"12px"},children:[h.jsx("button",{onClick:l,disabled:!o,style:{padding:"8px 16px",backgroundColor:"#E2E8F0",color:"#4A5568",border:"none",borderRadius:"4px",cursor:o?"pointer":"not-allowed",flex:1,opacity:o?1:.6},children:"Cancel"}),h.jsx("button",{onClick:a,disabled:!o,style:{padding:"8px 16px",backgroundColor:"#4299E1",color:"white",border:"none",borderRadius:"4px",cursor:o?"pointer":"not-allowed",flex:1,opacity:o?1:.6},children:"Create Copy"}),h.jsx("button",{onClick:s,disabled:!o,style:{padding:"8px 16px",backgroundColor:"#38A169",color:"white",border:"none",borderRadius:"4px",cursor:o?"pointer":"not-allowed",flex:1,opacity:o?1:.6},children:"Update Game"})]})]})})},EBe=({assignment:t,attempts:e,isLoadingAttempts:n,onClose:r})=>{var a,l;const{hideModal:i}=kl(),o=c=>{if(c<60)return`${c} sec`;const u=Math.floor(c/60),d=c%60;return`${u} min ${d} sec`},s=()=>{r(),i()};return h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:c=>{c.target===c.currentTarget&&s()},children:h.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"8px",maxWidth:"700px",width:"100%",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",maxHeight:"80vh",overflowY:"auto"},onClick:c=>c.stopPropagation(),children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[h.jsx("h2",{style:{fontSize:"24px",margin:0},children:"Assignment Details"}),h.jsx("button",{onClick:s,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#718096"},children:""})]}),h.jsxs("div",{style:{marginBottom:"24px"},children:[h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[h.jsx("div",{style:{fontWeight:"bold"},children:"Title:"}),h.jsx("div",{children:t.gameName})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[h.jsx("div",{style:{fontWeight:"bold"},children:"Game Type:"}),h.jsx("div",{children:t.gameType})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[h.jsx("div",{style:{fontWeight:"bold"},children:"Student Email:"}),h.jsx("div",{children:t.studentEmail})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[h.jsx("div",{style:{fontWeight:"bold"},children:"Due Date:"}),h.jsx("div",{children:(a=t.deadline)==null?void 0:a.toDate().toLocaleDateString()})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[h.jsx("div",{style:{fontWeight:"bold"},children:"Status:"}),h.jsx("div",{children:t.status})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[h.jsx("div",{style:{fontWeight:"bold"},children:"Times Required:"}),h.jsx("div",{children:t.timesRequired})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[h.jsx("div",{style:{fontWeight:"bold"},children:"Times Completed:"}),h.jsx("div",{children:t.completedCount})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[h.jsx("div",{style:{fontWeight:"bold"},children:"Created At:"}),h.jsx("div",{children:(l=t.createdAt)==null?void 0:l.toDate().toLocaleString()})]}),t.lastCompletedAt&&h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[h.jsx("div",{style:{fontWeight:"bold"},children:"Last Completed At:"}),h.jsx("div",{children:t.lastCompletedAt.toDate().toLocaleString()})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[h.jsx("div",{style:{fontWeight:"bold"},children:"Assignment Link:"}),h.jsx("div",{children:`${window.location.origin}/assignment/${t.linkToken}`})]})]}),h.jsxs("div",{style:{marginTop:"24px"},children:[h.jsx("h3",{style:{fontSize:"18px",marginBottom:"16px"},children:"Attempt History"}),n?h.jsx("div",{style:{textAlign:"center",padding:"20px"},children:"Loading attempts..."}):e.length>0?h.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[h.jsx("thead",{children:h.jsxs("tr",{style:{borderBottom:"1px solid #E2E8F0"},children:[h.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Date & Time"}),h.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Duration"}),h.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Score"})]})}),h.jsx("tbody",{children:e.sort((c,u)=>u.timestamp.seconds-c.timestamp.seconds).map(c=>h.jsxs("tr",{style:{borderBottom:"1px solid #E2E8F0"},children:[h.jsx("td",{style:{padding:"12px",textAlign:"left"},children:c.timestamp.toDate().toLocaleString()}),h.jsx("td",{style:{padding:"12px",textAlign:"right"},children:o(c.duration)}),h.jsx("td",{style:{padding:"12px",textAlign:"right"},children:c.score!==void 0?c.score:"N/A"})]},c.id))})]}):h.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#718096"},children:"No attempts yet"})]}),h.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"24px"},children:h.jsx("button",{onClick:s,style:{padding:"8px 16px",backgroundColor:"#3182CE",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Close"})})]})})},CBe=({game:t,onAssign:e,onCancel:n,showToast:r})=>{const{hideModal:i,isModalReady:o}=kl(),{currentUser:s}=Pr(),[a,l]=A.useState([]),[c,u]=A.useState([]),[d,f]=A.useState(""),[p,b]=A.useState(""),[v,m]=A.useState(1),[g,x]=A.useState([]),[w,S]=A.useState(!1);A.useEffect(()=>{s&&D()},[s]);const D=()=>te(rt,null,function*(){if(s){S(!0);try{const E=Pn(xt,"users"),R=xr(E,Vn("role","==","student"),Vn("teacherId","==",s.uid)),L=(yield er(R)).docs.map(N=>{const U=N.data();return{id:N.id,name:U.name||"",email:U.email||"",grade:U.grade||"",age:U.age||0,notes:U.notes||"",createdAt:U.createdAt||Ar.now()}});x(L)}catch(E){console.error("Error fetching students for assignment:",E),r({title:"Error fetching students",status:"error",duration:3e3})}finally{S(!1)}}}),k=E=>{const R=Array.from(E.target.selectedOptions,L=>L.value);l(R);const F=g.filter(L=>R.includes(L.id));u(F)},P=E=>{l(a.filter(R=>R!==E)),u(c.filter(R=>R.id!==E))},M=()=>te(rt,null,function*(){if(c.length===0||!p){r({title:"Missing required fields",description:"Please select at least one student and set a deadline",status:"error",duration:3e3});return}try{const E=c.map(R=>R.email);yield e(t,E,new Date(p),v),r({title:"Assignments created",description:`Created assignments for ${c.length} student(s)`,status:"success",duration:3e3}),i()}catch(E){console.error("Error creating assignments:",E),r({title:"Error creating assignments",status:"error",duration:3e3})}}),T=()=>{n(),i()},_=E=>{E.target===E.currentTarget&&T()};return h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:_,children:h.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"8px",maxWidth:"600px",width:"100%",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",opacity:o?1:.7,transition:"opacity 0.1s ease-in-out"},onClick:E=>E.stopPropagation(),children:[h.jsx("h2",{style:{marginBottom:"16px",fontSize:"24px",textAlign:"center"},children:"Assign Game to Student"}),h.jsxs("div",{style:{marginBottom:"20px"},children:[h.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold"},children:["Game: ",t.title]}),h.jsxs("div",{style:{color:"#666"},children:["Type: ",t.gameType]})]}),h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Student Email *"}),w?h.jsx("div",{style:{padding:"8px 0"},children:"Loading students..."}):g.length>0?h.jsxs(h.Fragment,{children:[h.jsx("select",{multiple:!0,value:a,onChange:k,disabled:!o,style:{width:"100%",padding:"8px 12px",border:"1px solid #E2E8F0",borderRadius:"4px",backgroundColor:"#F7FAFC",minHeight:"120px",opacity:o?1:.6},required:!0,children:g.map(E=>h.jsxs("option",{value:E.id,children:[E.name," (",E.email,") ",E.grade?`- ${E.grade}`:""," ",E.age?`- Age ${E.age}`:""]},E.id))}),h.jsxs("div",{style:{marginTop:"8px"},children:[h.jsxs("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:["Selected Students (",c.length,"):"]}),h.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",minHeight:"40px",maxHeight:"100px",overflowY:"auto",padding:"8px",backgroundColor:"#EDF2F7",borderRadius:"4px"},children:c.length>0?c.map(E=>h.jsxs("div",{style:{display:"flex",alignItems:"center",backgroundColor:"#E2E8F0",padding:"4px 8px",borderRadius:"16px",fontSize:"14px"},children:[E.name,h.jsx("button",{onClick:()=>P(E.id),disabled:!o,style:{marginLeft:"4px",background:"none",border:"none",cursor:o?"pointer":"not-allowed",fontSize:"14px",color:"#4A5568",opacity:o?1:.6},children:""})]},E.id)):h.jsx("div",{style:{color:"#718096",fontSize:"14px",width:"100%",textAlign:"center",padding:"6px 0"},children:"No students selected"})})]}),h.jsx("div",{style:{fontSize:"14px",color:"#666",marginTop:"4px",fontStyle:"italic"},children:"Hold Ctrl/Cmd key to select multiple students"})]}):h.jsxs("div",{children:[h.jsx("div",{style:{marginBottom:"8px",color:"#E53E3E"},children:"No students found. Please add students in the My Students tab first."}),h.jsx("input",{type:"email",placeholder:"student@example.com",style:{width:"100%",padding:"8px 12px",border:"1px solid #E2E8F0",borderRadius:"4px",backgroundColor:"#F7FAFC",opacity:o?1:.6},value:d,onChange:E=>f(E.target.value),disabled:!o,required:!0})]}),h.jsx("div",{style:{fontSize:"14px",color:"#666",marginTop:"4px"},children:"An email notification with assignment details will be sent to each selected student."})]}),h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Deadline *"}),h.jsx("input",{type:"date",style:{width:"200px",padding:"8px 12px",border:"1px solid #E2E8F0",borderRadius:"4px",backgroundColor:"#F7FAFC",opacity:o?1:.6},value:p,onChange:E=>b(E.target.value),disabled:!o,required:!0})]}),h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Number of Times to Complete"}),h.jsxs("select",{style:{width:"120px",padding:"8px 12px",border:"1px solid #E2E8F0",borderRadius:"4px",backgroundColor:"#F7FAFC",opacity:o?1:.6},value:v,onChange:E=>m(Number(E.target.value)),disabled:!o,children:[h.jsx("option",{value:1,children:"1"}),h.jsx("option",{value:2,children:"2"}),h.jsx("option",{value:3,children:"3"}),h.jsx("option",{value:5,children:"5"}),h.jsx("option",{value:10,children:"10"})]})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[h.jsx("button",{onClick:T,disabled:!o,style:{padding:"8px 16px",backgroundColor:"white",color:"#4A5568",border:"1px solid #E2E8F0",borderRadius:"4px",cursor:o?"pointer":"not-allowed",opacity:o?1:.6},children:"Cancel"}),h.jsx("button",{onClick:M,disabled:!o,style:{padding:"8px 16px",backgroundColor:"#3182CE",color:"white",border:"none",borderRadius:"4px",cursor:o?"pointer":"not-allowed",opacity:o?1:.6},children:"Assign Game"})]})]})})},ABe=({student:t,onSave:e,onCancel:n})=>{const{hideModal:r,isModalReady:i}=kl(),[o,s]=A.useState((t==null?void 0:t.notes)||"");A.useEffect(()=>{s(t&&t.notes||"")},[t==null?void 0:t.id]);const a=u=>{u.preventDefault(),e(t.id,o.trim()),r()},l=u=>{u.preventDefault(),u.stopPropagation(),n(),r()},c=u=>{u.target===u.currentTarget&&l(u)};return h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:c,children:h.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"8px",maxWidth:"500px",width:"100%",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",opacity:i?1:.7,transition:"opacity 0.1s ease-in-out",maxHeight:"70vh",overflowY:"auto"},onClick:u=>u.stopPropagation(),children:[h.jsx("h3",{style:{marginBottom:"16px",fontSize:"20px",fontWeight:"bold"},children:" Student Notes"}),h.jsxs("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"#F8FAFC",borderRadius:"6px"},children:[h.jsx("div",{style:{fontWeight:"bold",fontSize:"16px",marginBottom:"4px"},children:t.name}),h.jsx("div",{style:{fontSize:"14px",color:"#6B7280"},children:t.email})]}),h.jsxs("form",{onSubmit:a,children:[h.jsxs("div",{style:{marginBottom:"24px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Notes"}),h.jsx("textarea",{value:o,onChange:u=>s(u.target.value),placeholder:"Add notes about this student's progress, behavior, or other observations...",disabled:!i,style:{width:"100%",padding:"12px",border:"1px solid #E2E8F0",borderRadius:"4px",backgroundColor:"#F8FAFC",minHeight:"120px",resize:"vertical",fontSize:"14px",lineHeight:"1.5",fontFamily:"inherit"}}),h.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:"These notes are private and only visible to you"})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[h.jsx("button",{type:"button",onClick:l,disabled:!i,style:{padding:"8px 16px",backgroundColor:"#E2E8F0",color:"#4A5568",border:"none",borderRadius:"4px",cursor:i?"pointer":"not-allowed",opacity:i?1:.6},children:"Cancel"}),h.jsx("button",{type:"submit",disabled:!i,style:{padding:"8px 16px",backgroundColor:"#4299E1",color:"white",border:"none",borderRadius:"4px",cursor:i?"pointer":"not-allowed",opacity:i?1:.6},children:"Save Notes"})]})]})]})})},aee=({onDeleteFolder:t,onSaveFolder:e,onCancelFolder:n,onSaveStudent:r,onCancelStudent:i,onSaveStudentNotes:o,onDelete:s,onCancelDelete:a,onUpdateGame:l,onCopyGame:c,onCancelEdit:u,onCloseAssignmentDetails:d,onAssignGame:f,onCancelAssignment:p,showToast:b})=>{const{modalId:v,modalProps:m}=kl();if(v==="delete-folder"){const{folderId:g,folderName:x,gamesCount:w}=m;return!g||!t?(console.warn(" GlobalModals: Missing folderId or onDeleteFolder for delete-folder modal"),null):h.jsx(PV,{title:"Delete Folder?",itemName:x||"(Unnamed Folder)",itemType:"folder",warningMessage:w>0?`This folder contains ${w} game(s). They will be moved to "All Games".`:void 0,onDelete:()=>t(g),onCancel:n||(()=>{})})}if(v==="folder-modal"){const{folder:g}=m;return e?h.jsx(US,{folder:g,onSave:e,onCancel:n||(()=>{})}):(console.warn(" GlobalModals: Missing onSaveFolder for folder-modal"),null)}if(v==="createFolder"){const{onSave:g}=m;return!g||typeof g!="function"?(console.warn(" GlobalModals: Missing onSave function for createFolder modal"),null):h.jsx(US,{folder:void 0,onSave:g,onCancel:n||(()=>{})})}if(v==="editFolder"){const{folder:g,onSave:x}=m;return!x||typeof x!="function"?(console.warn(" GlobalModals: Missing onSave function for editFolder modal"),null):h.jsx(US,{folder:g,onSave:x,onCancel:n||(()=>{})})}if(v==="assignment-folder-modal"){const{folder:g,onSave:x}=m;return!x||typeof x!="function"?(console.warn(" GlobalModals: Missing onSave function for assignment-folder-modal"),null):h.jsx(US,{folder:g,onSave:x,onCancel:n||(()=>{})})}if(v==="student-modal"){const{student:g}=m;return r?h.jsx(SBe,{student:g,onSave:r,onCancel:i||(()=>{})}):(console.warn(" GlobalModals: Missing onSaveStudent for student-modal"),null)}if(v==="delete-confirmation"){const{title:g,itemName:x,itemType:w,warningMessage:S,onDelete:D}=m;return!D||typeof D!="function"?(console.warn(" GlobalModals: Missing onDelete function in modalProps for delete-confirmation modal"),null):h.jsx(PV,{title:g,itemName:x,itemType:w,warningMessage:S,onDelete:D,onCancel:a||(()=>{})})}if(v==="edit-choice"){const{gameName:g}=m;return!l||!c?(console.warn(" GlobalModals: Missing edit handlers for edit-choice modal"),null):h.jsx(_Be,{gameName:g,onUpdate:l,onCopy:c,onCancel:u||(()=>{})})}if(v==="assignment-details"){const{assignment:g,attempts:x,isLoadingAttempts:w}=m;return d?h.jsx(EBe,{assignment:g,attempts:x||[],isLoadingAttempts:w||!1,onClose:d}):(console.warn(" GlobalModals: Missing onCloseAssignmentDetails for assignment-details modal"),null)}if(v==="assignment-creation"){const{game:g}=m;return!f||!p||!b?null:h.jsx(CBe,{game:g,onAssign:f,onCancel:p,showToast:b})}if(v==="student-notes"){const{student:g}=m;return o?h.jsx(ABe,{student:g,onSave:o,onCancel:i||(()=>{})}):(console.warn(" GlobalModals: Missing onSaveStudentNotes for student-notes modal"),null)}return null};let zS;const TBe=new Uint8Array(16);function MBe(){if(!zS&&(zS=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!zS))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return zS(TBe)}const Bo=[];for(let t=0;t<256;++t)Bo.push((t+256).toString(16).slice(1));function PBe(t,e=0){return Bo[t[e+0]]+Bo[t[e+1]]+Bo[t[e+2]]+Bo[t[e+3]]+"-"+Bo[t[e+4]]+Bo[t[e+5]]+"-"+Bo[t[e+6]]+Bo[t[e+7]]+"-"+Bo[t[e+8]]+Bo[t[e+9]]+"-"+Bo[t[e+10]]+Bo[t[e+11]]+Bo[t[e+12]]+Bo[t[e+13]]+Bo[t[e+14]]+Bo[t[e+15]]}const DBe=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),DV={randomUUID:DBe};function RBe(t,e,n){if(DV.randomUUID&&!t)return DV.randomUUID();t=t||{};const r=t.random||(t.rng||MBe)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,PBe(r)}const kBe=t=>te(rt,null,function*(){try{const e=Pn(xt,"assignments"),n=xr(e,Vn("teacherId","==",t)),r=yield er(n),i=[];return r.forEach(o=>{const s=o.data();i.push(B({id:o.id},s))}),i}catch(e){throw console.error("Error getting teacher assignments:",e),e}}),lee=t=>te(rt,null,function*(){try{const e=RBe(),n=oe(B({},t),{linkToken:e,status:"assigned",completedCount:0,createdAt:Ar.now(),emailSent:!1}),r=yield Sc(Pn(xt,"assignments"),n);return console.log("Assignment created with ID:",r.id),console.log("Email will be sent automatically via Firebase Cloud Functions"),r.id}catch(e){throw console.error("Error creating assignment:",e),e}}),Jm=(t,e)=>te(rt,null,function*(){try{const n=an(xt,"assignments",t);yield Ns(n,e)}catch(n){throw console.error("Error updating assignment:",n),n}}),IBe=t=>te(rt,null,function*(){try{const e=an(xt,"assignments",t);yield ou(e)}catch(e){throw console.error("Error deleting assignment:",e),e}}),FBe=t=>te(rt,null,function*(){try{const e=Pn(xt,"attempts"),n=xr(e,Vn("assignmentId","==",t)),r=yield er(n),i=[];return r.forEach(o=>{const s=o.data();i.push(B({id:o.id},s))}),i}catch(e){throw console.error("Error getting assignment attempts:",e),e}}),iD=(t,e)=>te(rt,null,function*(){try{if(!t)throw new Error("Missing assignmentId parameter");const n={assignmentId:t,studentEmail:e.studentEmail||"unknown@email.com",studentName:e.studentName||"Unknown Student",duration:typeof e.duration=="number"?e.duration:0,score:typeof e.score=="number"&&!isNaN(e.score)?e.score:null,results:e.results||null,timestamp:Ar.now()};console.log("Creating attempt with validated data:",n);const r=yield Sc(Pn(xt,"attempts"),n);return console.log("Successfully created attempt with ID:",r.id),r.id}catch(n){throw console.error("Error creating attempt:",n),n}}),OBe=t=>te(rt,null,function*(){if(!t)return console.error("getAssignmentByToken: Missing token parameter"),null;try{console.log(`getAssignmentByToken: Searching for assignment with token: ${t}`);const e=Pn(xt,"assignments"),n=xr(e,Vn("linkToken","==",t)),r=yield er(n);if(r.empty)return console.warn(`getAssignmentByToken: No assignment found with token: ${t}`),null;const i=r.docs[0];return console.log(`getAssignmentByToken: Found assignment with ID: ${i.id}`),B({id:i.id},i.data())}catch(e){throw console.error(`getAssignmentByToken: Error searching for token ${t}:`,e),e}}),NI=t=>te(rt,null,function*(){try{const e=Pn(xt,"assignments"),n=xr(e,Vn("teacherId","==",t)),r=yield er(n),i=[];r.forEach(u=>{const d=u.data();i.push(B({id:u.id},d))});const o=Pn(xt,"assignmentFolderAssignments"),s=xr(o,Vn("userId","==",t)),a=yield er(s),l=new Map;a.forEach(u=>{const d=u.data();l.set(d.assignmentId,d.folderId)});const c=i.map(u=>oe(B({},u),{folderId:l.get(u.id||"")||void 0}));return console.log("Loaded assignments with folder info:",{totalAssignments:c.length,assignmentsInFolders:c.filter(u=>u.folderId).length,unorganizedAssignments:c.filter(u=>!u.folderId).length}),c}catch(e){throw console.error("Error getting teacher assignments with folders:",e),e}}),oD=({game:t,onSuccess:e,onCancel:n})=>{const{currentUser:r}=Pr(),[i,o]=A.useState(""),[s,a]=A.useState(""),[l,c]=A.useState(1),[u,d]=A.useState(!1),[f,p]=A.useState(null),[b,v]=A.useState(!1);if(!r)return h.jsx("div",{style:{padding:"var(--spacing-4)",textAlign:"center",color:"var(--color-gray-500)"},children:"You must be logged in to assign games."});const m=x=>te(rt,null,function*(){if(x.preventDefault(),!i||!s){p("Please fill out all required fields");return}d(!0),p(null);try{const w=new Date(s);w.setHours(23,59,59,999);const S={teacherId:r.uid,studentEmail:i,gameId:t.id||"",gameName:t.title,gameType:t.type,deadline:Ar.fromDate(w),timesRequired:l},D=yield lee(S);v(!0),setTimeout(()=>{e()},1500)}catch(w){console.error("Error assigning game:",w),p("Failed to create assignment. Please try again.")}finally{d(!1)}}),g=new Date().toISOString().split("T")[0];return b?h.jsxs("div",{style:{padding:"var(--spacing-4)",textAlign:"center",backgroundColor:"white",borderRadius:"var(--border-radius-md)",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[h.jsx("div",{style:{color:"var(--color-success-500)",fontSize:"var(--font-size-xl)",marginBottom:"var(--spacing-2)"},children:""}),h.jsxs("div",{style:{color:"var(--color-gray-800)",fontSize:"var(--font-size-md)"},children:["Game successfully assigned to ",i,"!"]}),h.jsx("div",{style:{color:"var(--color-gray-500)",fontSize:"var(--font-size-sm)",marginTop:"var(--spacing-2)"},children:"An email with instructions has been sent to the student."})]}):h.jsxs("div",{style:{padding:"var(--spacing-4)",backgroundColor:"white",borderRadius:"var(--border-radius-md)",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[h.jsx("h2",{style:{fontSize:"var(--font-size-xl)",color:"var(--color-gray-800)",marginBottom:"var(--spacing-4)",textAlign:"center"},children:"Assign Game to Student"}),h.jsxs("form",{onSubmit:m,children:[f&&h.jsx("div",{style:{backgroundColor:"var(--color-error-100)",color:"var(--color-error-700)",padding:"var(--spacing-2)",borderRadius:"var(--border-radius-sm)",marginBottom:"var(--spacing-4)"},children:f}),h.jsxs("div",{style:{marginBottom:"var(--spacing-4)"},children:[h.jsxs("div",{style:{fontSize:"var(--font-size-md)",fontWeight:"bold",color:"var(--color-gray-800)",marginBottom:"var(--spacing-2)"},children:["Game: ",t.title]}),h.jsxs("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-gray-600)"},children:["Type: ",t.type==="sort-categories-egg"?"Categories":"Whack-a-Mole"]})]}),h.jsxs("div",{style:{marginBottom:"var(--spacing-4)"},children:[h.jsx("label",{htmlFor:"studentEmail",style:{display:"block",fontSize:"var(--font-size-sm)",color:"var(--color-gray-700)",marginBottom:"var(--spacing-1)"},children:"Student Email *"}),h.jsx("input",{id:"studentEmail",type:"email",value:i,onChange:x=>o(x.target.value),required:!0,style:{width:"100%",padding:"var(--spacing-2)",border:"1px solid var(--color-gray-300)",borderRadius:"var(--border-radius-sm)",fontSize:"var(--font-size-md)"},placeholder:"student@example.com"}),h.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-gray-500)",marginTop:"var(--spacing-1)"},children:"An email notification with assignment details will be sent to this address."})]}),h.jsxs("div",{style:{marginBottom:"var(--spacing-4)"},children:[h.jsx("label",{htmlFor:"deadline",style:{display:"block",fontSize:"var(--font-size-sm)",color:"var(--color-gray-700)",marginBottom:"var(--spacing-1)"},children:"Deadline *"}),h.jsx("input",{id:"deadline",type:"date",value:s,onChange:x=>a(x.target.value),min:g,required:!0,style:{width:"100%",padding:"var(--spacing-2)",border:"1px solid var(--color-gray-300)",borderRadius:"var(--border-radius-sm)",fontSize:"var(--font-size-md)"}})]}),h.jsxs("div",{style:{marginBottom:"var(--spacing-4)"},children:[h.jsx("label",{htmlFor:"timesRequired",style:{display:"block",fontSize:"var(--font-size-sm)",color:"var(--color-gray-700)",marginBottom:"var(--spacing-1)"},children:"Number of Times to Complete"}),h.jsx("select",{id:"timesRequired",value:l,onChange:x=>c(Number(x.target.value)),style:{width:"100%",padding:"var(--spacing-2)",border:"1px solid var(--color-gray-300)",borderRadius:"var(--border-radius-sm)",fontSize:"var(--font-size-md)"},children:[1,2,3,4,5].map(x=>h.jsx("option",{value:x,children:x},x))})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"var(--spacing-4)"},children:[h.jsx("button",{type:"button",onClick:n,style:{padding:"var(--spacing-2) var(--spacing-4)",backgroundColor:"white",border:"1px solid var(--color-gray-300)",borderRadius:"var(--border-radius-sm)",cursor:"pointer",color:"var(--color-gray-700)"},children:"Cancel"}),h.jsx("button",{type:"submit",disabled:u,style:{padding:"var(--spacing-2) var(--spacing-4)",backgroundColor:"var(--color-primary-600)",border:"none",borderRadius:"var(--border-radius-sm)",cursor:u?"not-allowed":"pointer",color:"white",fontWeight:"bold",opacity:u?.7:1},children:u?"Assigning...":"Assign Game"})]}),h.jsxs("div",{style:{backgroundColor:"var(--color-info-50)",borderRadius:"var(--border-radius-sm)",padding:"var(--spacing-2)",marginTop:"var(--spacing-4)",fontSize:"var(--font-size-sm)",color:"var(--color-info-700)",display:"flex",alignItems:"center"},children:[h.jsx("div",{style:{marginRight:"var(--spacing-2)"},children:""}),h.jsx("div",{children:"When you assign a game, the student will receive an email with instructions and a link to access the assignment."})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cee="firebasestorage.googleapis.com",uee="storageBucket",NBe=2*60*1e3,LBe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends Dl{constructor(e,n,r=0){super(sD(e),`Firebase Storage: ${n} (${sD(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ki.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return sD(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var qi;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(qi||(qi={}));function sD(t){return"storage/"+t}function FL(){const t="An unknown error occurred, please check the error payload for server response.";return new Ki(qi.UNKNOWN,t)}function BBe(t){return new Ki(qi.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function jBe(t){return new Ki(qi.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function UBe(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ki(qi.UNAUTHENTICATED,t)}function zBe(){return new Ki(qi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function VBe(t){return new Ki(qi.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function WBe(){return new Ki(qi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function $Be(){return new Ki(qi.CANCELED,"User canceled the upload/download.")}function HBe(t){return new Ki(qi.INVALID_URL,"Invalid URL '"+t+"'.")}function GBe(t){return new Ki(qi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function qBe(){return new Ki(qi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+uee+"' property when initializing the app?")}function KBe(){return new Ki(qi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function YBe(){return new Ki(qi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function XBe(t){return new Ki(qi.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function LI(t){return new Ki(qi.INVALID_ARGUMENT,t)}function dee(){return new Ki(qi.APP_DELETED,"The Firebase app was deleted.")}function QBe(t){return new Ki(qi.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Tx(t,e){return new Ki(qi.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function hy(t){throw new Ki(qi.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ma.makeFromUrl(e,n)}catch(i){return new Ma(e,"")}if(r.path==="")return r;throw GBe(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),l={bucket:1,path:3};function c(S){S.path_=decodeURIComponent(S.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${u}/b/${i}/o${f}`,"i"),b={bucket:1,path:3},v=n===cee?"(?:storage.googleapis.com|storage.cloud.google.com)":n,m="([^?#]*)",g=new RegExp(`^https?://${v}/${i}/${m}`,"i"),w=[{regex:a,indices:l,postModify:o},{regex:p,indices:b,postModify:c},{regex:g,indices:{bucket:1,path:2},postModify:c}];for(let S=0;S<w.length;S++){const D=w[S],k=D.regex.exec(e);if(k){const P=k[D.indices.bucket];let M=k[D.indices.path];M||(M=""),r=new Ma(P,M),D.postModify(r);break}}if(r==null)throw HBe(e);return r}}class ZBe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JBe(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function l(){return a===2}let c=!1;function u(...m){c||(c=!0,e.apply(null,m))}function d(m){i=setTimeout(()=>{i=null,t(p,l())},m)}function f(){o&&clearTimeout(o)}function p(m,...g){if(c){f();return}if(m){f(),u.call(null,m,...g);return}if(l()||s){f(),u.call(null,m,...g);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,d(w)}let b=!1;function v(m){b||(b=!0,f(),!c&&(i!==null?(m||(a=2),clearTimeout(i),d(0)):m||(a=1)))}return d(0),o=setTimeout(()=>{s=!0,v(!0)},n),v}function e4e(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4e(t){return t!==void 0}function n4e(t){return typeof t=="object"&&!Array.isArray(t)}function OL(t){return typeof t=="string"||t instanceof String}function RV(t){return NL()&&t instanceof Blob}function NL(){return typeof Blob!="undefined"}function kV(t,e,n,r){if(r<e)throw LI(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw LI(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LL(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function fee(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Rp;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Rp||(Rp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4e(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4e{constructor(e,n,r,i,o,s,a,l,c,u,d,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,b)=>{this.resolve_=p,this.reject_=b,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new VS(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===Rp.NO_ERROR,l=o.getStatus();if(!a||r4e(l,this.additionalRetryCodes_)&&this.retry){const u=o.getErrorCode()===Rp.ABORT;r(!1,new VS(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new VS(c,o))})},n=(r,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());t4e(l)?o(l):o()}catch(l){s(l)}else if(a!==null){const l=FL();l.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,l)):s(l)}else if(i.canceled){const l=this.appDelete_?dee():$Be();s(l)}else{const l=WBe();s(l)}};this.canceled_?n(!1,new VS(!1,null,!0)):this.backoffId_=JBe(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&e4e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class VS{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function o4e(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function s4e(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function a4e(t,e){e&&(t["X-Firebase-GMPID"]=e)}function l4e(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function c4e(t,e,n,r,i,o,s=!0){const a=fee(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return a4e(c,e),o4e(c,n),s4e(c,o),l4e(c,r),new i4e(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4e(){return typeof BlobBuilder!="undefined"?BlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:void 0}function d4e(...t){const e=u4e();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(NL())return new Blob(t);throw new Ki(qi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function f4e(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4e(t){if(typeof atob=="undefined")throw XBe("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class aD{constructor(e,n){this.data=e,this.contentType=n||null}}function hee(t,e){switch(t){case ic.RAW:return new aD(pee(e));case ic.BASE64:case ic.BASE64URL:return new aD(mee(t,e));case ic.DATA_URL:return new aD(m4e(e),g4e(e))}throw FL()}function pee(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function p4e(t){let e;try{e=decodeURIComponent(t)}catch(n){throw Tx(ic.DATA_URL,"Malformed data URL.")}return pee(e)}function mee(t,e){switch(t){case ic.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Tx(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ic.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Tx(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=h4e(e)}catch(i){throw i.message.includes("polyfill")?i:Tx(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class gee{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Tx(ic.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=v4e(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function m4e(t){const e=new gee(t);return e.base64?mee(ic.BASE64,e.rest):p4e(e.rest)}function g4e(t){return new gee(t).contentType}function v4e(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,n){let r=0,i="";RV(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(RV(this.data_)){const r=this.data_,i=f4e(r,e,n);return i===null?null:new _f(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new _f(r,!0)}}static getBlob(...e){if(NL()){const n=e.map(r=>r instanceof _f?r.data_:r);return new _f(d4e.apply(null,n))}else{const n=e.map(s=>OL(s)?hee(ic.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new _f(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vee(t){let e;try{e=JSON.parse(t)}catch(n){return null}return n4e(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4e(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function x4e(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function yee(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b4e(t,e){return e}class Ss{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||b4e}}let WS=null;function w4e(t){return!OL(t)||t.length<2?t:yee(t)}function xee(){if(WS)return WS;const t=[];t.push(new Ss("bucket")),t.push(new Ss("generation")),t.push(new Ss("metageneration")),t.push(new Ss("name","fullPath",!0));function e(o,s){return w4e(s)}const n=new Ss("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}const i=new Ss("size");return i.xform=r,t.push(i),t.push(new Ss("timeCreated")),t.push(new Ss("updated")),t.push(new Ss("md5Hash",null,!0)),t.push(new Ss("cacheControl",null,!0)),t.push(new Ss("contentDisposition",null,!0)),t.push(new Ss("contentEncoding",null,!0)),t.push(new Ss("contentLanguage",null,!0)),t.push(new Ss("contentType",null,!0)),t.push(new Ss("metadata","customMetadata",!0)),WS=t,WS}function S4e(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new Ma(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function _4e(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,e[s.server])}return S4e(r,t),r}function bee(t,e,n){const r=vee(e);return r===null?null:_4e(t,r,n)}function E4e(t,e,n,r){const i=vee(e);if(i===null||!OL(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(c=>{const u=t.bucket,d=t.fullPath,f="/b/"+s(u)+"/o/"+s(d),p=LL(f,n,r),b=fee({alt:"media",token:c});return p+b})[0]}function C4e(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class wee{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function See(t){if(!t)throw FL()}function A4e(t,e){function n(r,i){const o=bee(t,i,e);return See(o!==null),o}return n}function T4e(t,e){function n(r,i){const o=bee(t,i,e);return See(o!==null),E4e(o,i,t.host,t._protocol)}return n}function _ee(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=zBe():i=UBe():n.getStatus()===402?i=jBe(t.bucket):n.getStatus()===403?i=VBe(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function M4e(t){const e=_ee(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=BBe(t.path)),o.serverResponse=i.serverResponse,o}return n}function P4e(t,e,n){const r=e.fullServerUrl(),i=LL(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new wee(i,o,T4e(t,n),s);return a.errorHandler=M4e(e),a}function D4e(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function R4e(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=D4e(null,e)),r}function k4e(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let S=0;S<2;S++)w=w+Math.random().toString().slice(2);return w}const l=a();s["Content-Type"]="multipart/related; boundary="+l;const c=R4e(e,r,i),u=C4e(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",p=_f.getBlob(d,r,f);if(p===null)throw KBe();const b={name:c.fullPath},v=LL(o,t.host,t._protocol),m="POST",g=t.maxUploadRetryTime,x=new wee(v,m,A4e(t,n),g);return x.urlParams=b,x.headers=s,x.body=p.uploadData(),x.errorHandler=_ee(e),x}class I4e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Rp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Rp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Rp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw hy("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw hy("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw hy("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw hy("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw hy("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class F4e extends I4e{initXhr(){this.xhr_.responseType="text"}}function Eee(){return new F4e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,n){this._service=e,n instanceof Ma?this._location=n:this._location=Ma.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Jp(e,n)}get root(){const e=new Ma(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return yee(this._location.path)}get storage(){return this._service}get parent(){const e=y4e(this._location.path);if(e===null)return null;const n=new Ma(this._location.bucket,e);return new Jp(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw QBe(e)}}function O4e(t,e,n){t._throwIfRoot("uploadBytes");const r=k4e(t.storage,t._location,xee(),new _f(e,!0),n);return t.storage.makeRequestWithTokens(r,Eee).then(i=>({metadata:i,ref:t}))}function N4e(t,e,n=ic.RAW,r){t._throwIfRoot("uploadString");const i=hee(n,e),o=Object.assign({},r);return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),O4e(t,i.data,o)}function L4e(t){t._throwIfRoot("getDownloadURL");const e=P4e(t.storage,t._location,xee());return t.storage.makeRequestWithTokens(e,Eee).then(n=>{if(n===null)throw YBe();return n})}function B4e(t,e){const n=x4e(t._location.path,e),r=new Ma(t._location.bucket,n);return new Jp(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4e(t){return/^[A-Za-z]+:\/\//.test(t)}function U4e(t,e){return new Jp(t,e)}function Cee(t,e){if(t instanceof BL){const n=t;if(n._bucket==null)throw qBe();const r=new Jp(n,n._bucket);return e!=null?Cee(r,e):r}else return e!==void 0?B4e(t,e):t}function z4e(t,e){if(e&&j4e(e)){if(t instanceof BL)return U4e(t,e);throw LI("To use ref(service, url), the first argument must be a Storage instance.")}else return Cee(t,e)}function IV(t,e){const n=e==null?void 0:e[uee];return n==null?null:Ma.makeFromBucketSpec(n,t)}function V4e(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:NQ(i,t.app.options.projectId))}class BL{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=cee,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=NBe,this._maxUploadRetryTime=LBe,this._requests=new Set,i!=null?this._bucket=Ma.makeFromBucketSpec(i,this._host):this._bucket=IV(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ma.makeFromBucketSpec(this._url,e):this._bucket=IV(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kV("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kV("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return te(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return te(this,null,function*(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Jp(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new ZBe(dee());{const s=c4e(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,n){return te(this,null,function*(){const[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}}const FV="@firebase/storage",OV="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aee="storage";function W4e(t,e,n,r){return t=Tr(t),N4e(t,e,n,r)}function $4e(t){return t=Tr(t),L4e(t)}function H4e(t,e){return t=Tr(t),z4e(t,e)}function G4e(t=Iw(),e){t=Tr(t);const r=Rd(t,Aee).getImmediate({identifier:e}),i=R3("storage");return i&&q4e(r,...i),r}function q4e(t,e,n,r={}){V4e(t,e,n,r)}function K4e(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new BL(n,r,i,e,mm)}function Y4e(){El(new La(Aee,K4e,"PUBLIC").setMultipleInstances(!0)),ds(FV,OV,""),ds(FV,OV,"esm2017")}Y4e();function X4e(t){const e=document.createElement("canvas"),n=e.getContext("2d");if(e.width=300,e.height=200,!n)return dje(t.type);const r={"sort-categories-egg":"#e1c3ff","whack-a-mole":"#b8ffcc","spinner-wheel":"#ffe1b3",anagram:"#b3d4ff","place-value-showdown":"#ffe6e6"};return n.fillStyle=r[t.type]||"#f0f0f0",n.fillRect(0,0,e.width,e.height),t.type==="sort-categories-egg"?Z4e(n,t,e.width,e.height):t.type==="whack-a-mole"?J4e(n,t,e.width,e.height):t.type==="spinner-wheel"?tje(n,t,e.width,e.height):t.type==="anagram"?eje(n,t,e.width,e.height):t.type==="place-value-showdown"&&nje(n,t,e.width,e.height),n.fillStyle="#333333",n.font="bold 20px Arial",n.textAlign="center",n.fillText(qv(t.title,20),e.width/2,30),e.toDataURL("image/png")}function Q4e(t,e,n){return te(this,null,function*(){try{const r=G4e(),i=`thumbnails/${n}/${e}.png`,o=H4e(r,i);return yield W4e(o,t,"data_url"),yield $4e(o)}catch(r){return console.error("Error uploading thumbnail:",r),""}})}function Z4e(t,e,n,r){rje(t,n,r),e.categories&&e.categories.length>0&&oje(t,e.categories,n,r)}function J4e(t,e,n,r){if(ije(t,n,r),e.wordCategories&&e.wordCategories.length>0){const i=e.wordCategories.flatMap(o=>o.words).slice(0,8);sje(t,i,n,r)}}function eje(t,e,n,r){aje(t,n,r),e.anagrams&&e.anagrams.length>0&&lje(t,e.anagrams,n,r)}function tje(t,e,n,r){var u;const i=n*.5,o=r*.6,s=60,a=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFD93D","#DDA0DD"],l=((u=e.spinnerItems)==null?void 0:u.length)||6,c=2*Math.PI/l;for(let d=0;d<l;d++){const f=d*c,p=(d+1)*c;t.beginPath(),t.moveTo(i,o),t.arc(i,o,s,f,p),t.closePath(),t.fillStyle=a[d%a.length],t.fill(),t.strokeStyle="#fff",t.lineWidth=2,t.stroke()}if(t.beginPath(),t.arc(i,o,8,0,2*Math.PI),t.fillStyle="#333",t.fill(),t.beginPath(),t.moveTo(i,o-s-20),t.lineTo(i-8,o-s-5),t.lineTo(i+8,o-s-5),t.closePath(),t.fillStyle="#333",t.fill(),e.spinnerItems&&e.spinnerItems.length>0){const d=e.spinnerItems.slice(0,4);t.fillStyle="#555555",t.font="12px Arial",t.textAlign="center",d.forEach((f,p)=>{const b=p*c+c/2,v=s*.7,m=i+v*Math.cos(b),g=o+v*Math.sin(b);t.fillText(qv(f.text,6),m,g)})}}function nje(t,e,n,r){var d,f;const a=((d=e.placeValueConfig)==null?void 0:d.numberOfCards)||3,l=(n-a*35)/2;for(let p=0;p<a;p++){const b=l+p*35,v=r*.4;t.fillStyle="#ffffff",t.strokeStyle="#333333",t.lineWidth=2,t.fillRect(b,v,30,40),t.strokeRect(b,v,30,40),t.fillStyle="#333333",t.font="bold 20px Arial",t.textAlign="center";const m=Math.floor(Math.random()*10);t.fillText(m.toString(),b+30/2,v+40/2+6)}t.fillStyle="#ff6b6b",t.font="bold 16px Arial",t.textAlign="center",t.fillText("VS",n*.5,r*.7);const c=((f=e.placeValueConfig)==null?void 0:f.objective)||"largest";t.fillStyle="#666666",t.font="12px Arial",t.fillText(`Create ${c} number`,n*.5,r*.8),t.fillStyle="#ffd700",t.font="24px Arial",t.fillText("",n*.5,r*.25),t.fillStyle="#888888",t.font="10px Arial";const u=a===2?["10s","1s"]:a===3?["100s","10s","1s"]:a===4?["1000s","100s","10s","1s"]:["10000s","1000s","100s","10s","1s"];for(let p=0;p<a;p++){const b=l+p*35,v=r*.4;t.fillText(u[p],b+30/2,v-5)}}function rje(t,e,n){[{x:e*.2,y:n*.5},{x:e*.5,y:n*.4},{x:e*.8,y:n*.6}].forEach(i=>{t.fillStyle="#ffffff",t.strokeStyle="#dddddd",t.lineWidth=2,t.beginPath(),t.ellipse(i.x,i.y,30,40,0,0,2*Math.PI),t.fill(),t.stroke(),i.x===e*.5&&(t.strokeStyle="#888888",t.beginPath(),t.moveTo(i.x-15,i.y-20),t.lineTo(i.x+5,i.y),t.lineTo(i.x-5,i.y+10),t.stroke())})}function ije(t,e,n){const r=e*.5,i=n*.6;t.fillStyle="#654321",t.beginPath(),t.ellipse(r,i+10,40,20,0,0,2*Math.PI),t.fill(),t.fillStyle="#8B4513",t.beginPath(),t.arc(r,i-20,30,0,Math.PI,!1),t.fill(),t.fillStyle="#FFFFFF",t.beginPath(),t.arc(r-10,i-30,5,0,2*Math.PI),t.arc(r+10,i-30,5,0,2*Math.PI),t.fill(),t.fillStyle="#A0522D",t.fillRect(e*.7,n*.3,10,50),t.fillStyle="#708090",t.fillRect(e*.65,n*.2,20,30)}function oje(t,e,n,r){const i=e.slice(0,3);t.fillStyle="#555555",t.font="14px Arial",t.textAlign="center",i.forEach((o,s)=>{const a=n*.25,l=30,c=30+s*(a+20),u=r*.8;t.fillStyle="rgba(255, 255, 255, 0.7)",t.fillRect(c,u,a,l),t.fillStyle="#333333",t.fillText(qv(o.name,10),c+a/2,u+20)}),e.length>3&&(t.fillStyle="#555555",t.textAlign="center",t.fillText(`+${e.length-3} more`,n*.8,r*.85))}function sje(t,e,n,r){const i=e.slice(0,8);t.font="12px Arial",t.textAlign="center",i.forEach((o,s)=>{const a=Math.floor(s/4),l=s%4,c=n*.2+l*n*.2,u=r*.4+a*30,d=s*40%360;t.fillStyle=`hsla(${d}, 70%, 40%, 0.8)`,t.fillText(qv(o,8),c,u)}),e.length>8&&(t.fillStyle="#555555",t.fillText(`+${e.length-8} more words`,n*.5,r*.9))}function aje(t,e,n){[{x:e*.3,y:n*.5,rotation:0},{x:e*.7,y:n*.4,rotation:Math.PI/6},{x:e*.5,y:n*.6,rotation:-Math.PI/4}].forEach(i=>{t.save(),t.translate(i.x,i.y),t.rotate(i.rotation),t.fillStyle="#ffffff",t.strokeStyle="#cccccc",t.lineWidth=2,t.beginPath(),t.roundRect(-20,-15,40,30,5),t.fill(),t.stroke(),t.fillStyle="#e0e0e0",t.beginPath(),t.arc(20,0,8,0,2*Math.PI),t.fill(),t.restore()}),t.strokeStyle="#aaaaaa",t.lineWidth=1,t.setLineDash([5,5]),t.beginPath(),t.moveTo(e*.3,n*.5),t.lineTo(e*.7,n*.4),t.stroke(),t.setLineDash([])}function lje(t,e,n,r){const i=e.slice(0,3);t.font="14px Arial",t.textAlign="center",i.forEach((o,s)=>{const a=n*.2+s*n*.3,l=r*.8,c=o.type==="word"?cje(o.original):uje(o.original);t.fillStyle="#666666",t.fillText(qv(c,8),a,l),t.fillStyle="#888888",t.fillText("",a,l+15),t.fillStyle="#333333",t.fillText(qv(o.original,8),a,l+30)}),e.length>3&&(t.fillStyle="#555555",t.fillText(`+${e.length-3} more`,n*.85,r*.85))}function cje(t){const e=t.split("");for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e.join("")}function uje(t){const e=t.split(" ");for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e.join(" ")}function qv(t,e){return t?t.length<=e?t:t.substring(0,e-3)+"...":""}function dje(t){const e={"sort-categories-egg":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+P+/HgAFdwI2QM1kHwAAAABJRU5ErkJggg==","whack-a-mole":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+P+/HgAFdwI2QM1kHwAAAABJRU5ErkJggg==","spinner-wheel":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+P+/HgAFdwI2QM1kHwAAAABJRU5ErkJggg==",anagram:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+P+/HgAFdwI2QM1kHwAAAABJRU5ErkJggg==","place-value-showdown":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+P+/HgAFdwI2QM1kHwAAAABJRU5ErkJggg=="};return e[t]||e["sort-categories-egg"]}function jL(t,e){return te(this,null,function*(){try{const n={type:e.type,title:e.title||"Game"};n.type==="sort-categories-egg"&&e.categories?n.categories=e.categories:n.type==="whack-a-mole"&&e.categories?n.wordCategories=e.categories:n.type==="spinner-wheel"&&e.items?n.spinnerItems=e.items:n.type==="anagram"&&e.anagrams?n.anagrams=e.anagrams:n.type==="place-value-showdown"&&(n.placeValueConfig={numberOfCards:e.numberOfCards||3,objective:e.objective||"largest",winningScore:e.winningScore||5});const r=X4e(n);return yield Q4e(r,t,n.type)}catch(n){return console.error("Error generating thumbnail:",n),""}})}function fje(){return te(this,null,function*(){try{const t=yield er(Pn(xt,"userGameConfigs"));let e=0,n=0;const r=t.docs.map(i=>te(this,null,function*(){const o=i.data(),s=i.id;try{const a=yield jL(s,o);a?(yield Ns(an(xt,"userGameConfigs",s),{thumbnail:a}),console.log(`Successfully regenerated thumbnail for game: ${s}`),e++):(console.error(`Failed to generate thumbnail for game: ${s}`),n++)}catch(a){console.error(`Error regenerating thumbnail for game ${s}:`,a),n++}}));return yield Promise.all(r),{success:e,failed:n}}catch(t){throw console.error("Error in regenerateAllThumbnails:",t),t}})}function hje(t){return te(this,null,function*(){try{const e=an(xt,"userGameConfigs",t),n=yield oi(e);if(!n.exists())return console.error(`Game with ID ${t} not found`),!1;const r=n.data(),i=yield jL(t,r);return i?(yield Ns(an(xt,"userGameConfigs",t),{thumbnail:i}),console.log(`Successfully regenerated thumbnail for game: ${t}`),!0):(console.error(`Failed to generate thumbnail for game: ${t}`),!1)}catch(e){return console.error(`Error regenerating thumbnail for game ${t}:`,e),!1}})}function pje(t){const e={"sort-categories-egg":"#f0e6ff","whack-a-mole":"#e6fff0",default:"var(--color-primary-100)"};return e[t]||e.default}function mje(t){switch(t){case"sort-categories-egg":return"";case"whack-a-mole":return"";default:return""}}const lD=({title:t,type:e,thumbnail:n,id:r,isPlayable:i,onClick:o,isOwner:s,onDelete:a})=>{const{isTeacher:l,currentUser:c}=Pr(),[u,d]=A.useState(!1),[f,p]=A.useState(!1),[b,v]=A.useState(!1);A.useEffect(()=>{te(rt,null,function*(){if(!c){p(!1);return}try{const _=an(xt,"users",c.uid),E=yield oi(_);E.exists()&&E.data().role==="admin"?p(!0):p(!1)}catch(_){console.error("Error checking admin status:",_),p(!1)}})},[c]);const m=mje(e)||t.charAt(0),g=pje(e),x=T=>te(rt,null,function*(){if(T.preventDefault(),T.stopPropagation(),!!r){v(!0);try{if(yield hje(r)){const E=document.querySelector(`[data-game-id="${r}"] .game-thumbnail`);E&&(E.classList.add("thumbnail-regenerated"),setTimeout(()=>{E.classList.remove("thumbnail-regenerated")},2e3)),window.location.reload()}else console.error("Failed to regenerate thumbnail")}catch(_){console.error("Error regenerating thumbnail:",_)}finally{v(!1)}}}),w=()=>h.jsx("div",{className:"game-thumbnail",style:{width:"60px",height:"60px",backgroundColor:g,borderRadius:"var(--border-radius-md)",marginRight:"var(--spacing-3)",overflow:"hidden",flexShrink:0,position:"relative"},children:n?h.jsx("img",{src:n,alt:t,style:{width:"100%",height:"100%",objectFit:"cover"}}):h.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--color-primary-700)",fontSize:"var(--font-size-xl)"},children:m})}),S=()=>h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"var(--spacing-1)",flex:1},children:[h.jsx("h3",{style:{fontSize:"var(--font-size-md)",color:"var(--color-gray-800)",margin:0},children:t}),h.jsxs("span",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-gray-600)"},children:["Type: ",e]})]}),D={display:"flex",alignItems:"center",padding:"var(--spacing-3)",backgroundColor:"white",borderRadius:"var(--border-radius-md)",margin:"var(--spacing-2) 0",border:"1px solid var(--color-gray-200)",cursor:i||o?"pointer":"default",transition:"all 0.2s ease-in-out",textDecoration:"none",color:"inherit",boxShadow:"0 1px 3px rgba(0,0,0,0.05)"},k=()=>s&&a&&h.jsx("button",{onClick:T=>{T.preventDefault(),T.stopPropagation(),a()},style:{position:"absolute",top:"50%",right:"16px",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--color-gray-500)",padding:"var(--spacing-1)",borderRadius:"var(--border-radius-sm)",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},"aria-label":"Delete",title:"Delete",children:h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z",fill:"currentColor"})})}),P=()=>!l||!r?null:h.jsx("button",{onClick:T=>{T.preventDefault(),T.stopPropagation(),d(!0)},style:{position:"absolute",top:"50%",right:s?"48px":"16px",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--color-primary-600)",padding:"var(--spacing-1)",borderRadius:"var(--border-radius-sm)",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},"aria-label":"Assign",title:"Assign to Student",children:h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM7 10H9V17H7V10ZM11 7H13V17H11V7ZM15 13H17V17H15V13Z",fill:"currentColor"})})}),M=()=>!f||!r?null:h.jsx("button",{onClick:x,disabled:b,style:{position:"absolute",top:"50%",right:s?"80px":l?"48px":"16px",transform:"translateY(-50%)",background:"none",border:"none",cursor:b?"default":"pointer",color:b?"var(--color-gray-400)":"var(--color-blue-600)",padding:"var(--spacing-1)",borderRadius:"var(--border-radius-sm)",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},"aria-label":"Regenerate thumbnail",title:"Regenerate thumbnail",children:b?h.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"loading-spinner",children:[h.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z",fill:"currentColor"}),h.jsx("path",{d:"M12 2V4C16.41 4 20 7.59 20 12H22C22 6.48 17.52 2 12 2Z",fill:"currentColor"})]}):h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4C7.58 4 4.01 7.58 4.01 12C4.01 16.42 7.58 20 12 20C15.73 20 18.84 17.45 19.73 14H17.65C16.83 16.33 14.61 18 12 18C8.69 18 6 15.31 6 12C6 8.69 8.69 6 12 6C13.66 6 15.14 6.69 16.22 7.78L13 11H20V4L17.65 6.35Z",fill:"currentColor"})})});return o?h.jsxs("div",{style:{position:"relative"},"data-game-id":r,children:[h.jsxs("div",{style:D,onClick:o,onMouseOver:T=>{T.currentTarget.style.boxShadow="0 2px 5px rgba(0,0,0,0.1)"},onMouseOut:T=>{T.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.05)"},children:[w(),S()]}),k(),P(),M(),u&&h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"var(--spacing-4)"},children:h.jsx(oD,{game:{id:r||"",title:t,type:e,thumbnail:n},onSuccess:()=>d(!1),onCancel:()=>d(!1)})})]}):i&&r?h.jsxs("div",{style:{position:"relative"},"data-game-id":r,children:[h.jsxs(Ku,{to:`/game/${r}`,style:D,onMouseOver:T=>{T.currentTarget.style.boxShadow="0 2px 5px rgba(0,0,0,0.1)"},onMouseOut:T=>{T.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.05)"},children:[w(),S()]}),k(),P(),M(),u&&h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"var(--spacing-4)"},children:h.jsx(oD,{game:{id:r||"",title:t,type:e,thumbnail:n},onSuccess:()=>d(!1),onCancel:()=>d(!1)})})]}):h.jsxs("div",{style:{position:"relative"},"data-game-id":r,children:[h.jsxs("div",{style:D,children:[w(),S()]}),k(),P(),M(),u&&h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"var(--spacing-4)"},children:h.jsx(oD,{game:{id:r||"",title:t,type:e,thumbnail:n},onSuccess:()=>d(!1),onCancel:()=>d(!1)})})]})},cD=({onSearch:t})=>h.jsx("div",{style:{marginBottom:"var(--spacing-4)",position:"relative"},children:h.jsx("input",{type:"text",placeholder:"Search...",onChange:e=>t(e.target.value),style:{width:"100%",padding:"var(--spacing-2) var(--spacing-3)",borderRadius:"var(--border-radius-md)",border:"1px solid var(--color-gray-200)",fontSize:"var(--font-size-md)",outline:"none"}})}),gje=()=>{const[t,e]=A.useState([]),[n,r]=A.useState(""),[i,o]=A.useState(""),[s,a]=A.useState(""),[l,c]=A.useState(!0),u=Fr(),{currentUser:d,isTeacher:f,isStudent:p}=Pr(),b=ro(),[v,m]=A.useState([]),[g,x]=A.useState([]),[w,S]=A.useState(!1),[D,k]=A.useState(null);A.useEffect(()=>{p&&d&&u("/student")},[p,d,u]),A.useEffect(()=>{f&&d&&u("/teacher")},[f,d,u]);const P=(N,U,H)=>{k({id:N,type:U,title:H}),S(!0)},M=()=>te(rt,null,function*(){if(!(!D||!d))try{if(c(!0),D.type==="template"){yield ou(an(xt,"categoryTemplates",D.id));const N=xr(Pn(xt,"userGameConfigs"),Vn("userId","==",d.uid),Vn("title","==",D.title)),H=(yield er(N)).docs.map(j=>ou(j.ref));yield Promise.all(H),m(j=>j.filter(z=>z.id!==D.id)),e(j=>j.filter(z=>!(z.userId===d.uid&&z.title===D.title))),b({title:"Deleted Successfully",description:`Deleted template "${D.title}" and its associated games`,status:"success",duration:3e3})}else D.type==="game"&&(yield ou(an(xt,"userGameConfigs",D.id)),e(N=>N.filter(U=>U.id!==D.id)),b({title:"Deleted Successfully",description:`Deleted game "${D.title}"`,status:"success",duration:3e3}))}catch(N){console.error("Error deleting:",N),b({title:"Error",description:"Failed to delete. Please try again.",status:"error",duration:5e3})}finally{c(!1),S(!1),k(null)}}),T=()=>h.jsxs(Kc,{isOpen:w,onClose:()=>S(!1),children:[h.jsx(Qc,{}),h.jsxs(Yc,{children:[h.jsx(Xc,{children:"Confirm Deletion"}),h.jsx(Jc,{}),h.jsx(Zc,{children:(D==null?void 0:D.type)==="template"?h.jsxs("p",{children:['Are you sure you want to delete the template "',D==null?void 0:D.title,'"? This will also delete any associated games with the same title.']}):h.jsxs("p",{children:['Are you sure you want to delete the game "',D==null?void 0:D.title,'"?']})}),h.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",padding:"1rem"},children:[h.jsx(hn,{onClick:()=>S(!1),style:{marginRight:"0.5rem"},children:"Cancel"}),h.jsx(hn,{colorScheme:"red",onClick:M,isLoading:l,children:"Delete"})]})]})]});A.useEffect(()=>{te(rt,null,function*(){try{c(!0),console.log("Starting fetchGames function");const U=[d?te(rt,null,function*(){console.log("Attempting to fetch current user's games");try{const K=xr(Pn(xt,"userGameConfigs"),Vn("userId","==",d.uid));console.log("User games query:",K);const G=yield er(K);return console.log(`Successfully fetched ${G.docs.length} user games`),G}catch(K){return console.error("Error fetching user's games:",K),{docs:[]}}}):Promise.resolve({docs:[]}),te(rt,null,function*(){console.log("Attempting to fetch public games with share=true");try{const K=xr(Pn(xt,"userGameConfigs"),Vn("share","==",!0));console.log("Public games query:",K);const G=yield er(K);return console.log(`Successfully fetched ${G.docs.length} public games`),G}catch(K){throw console.error("Error fetching public games:",K),K}})];f&&(console.log("User is teacher, attempting to fetch templates"),U.push(te(rt,null,function*(){console.log("Attempting to fetch sort-categories-egg templates");try{const K=yield er(xr(Pn(xt,"categoryTemplates"),Vn("type","==","sort-categories-egg")));return console.log(`Successfully fetched ${K.docs.length} sort-categories-egg templates`),K}catch(K){return console.error("Error fetching sort-categories-egg templates:",K),{docs:[]}}}),te(rt,null,function*(){console.log("Attempting to fetch whack-a-mole templates");try{const K=yield er(xr(Pn(xt,"categoryTemplates"),Vn("type","==","whack-a-mole")));return console.log(`Successfully fetched ${K.docs.length} whack-a-mole templates`),K}catch(K){return console.error("Error fetching whack-a-mole templates:",K),{docs:[]}}}),te(rt,null,function*(){console.log("Attempting to fetch blank templates");try{const K=yield er(Pn(xt,"blankGameTemplates"));return console.log(`Successfully fetched ${K.docs.length} blank templates`),K}catch(K){return console.error("Error fetching blank templates:",K),{docs:[]}}}))),console.log("Executing all promises");const H=yield Promise.all(U);console.log("All promises resolved successfully");const j=H[0],z=H[1],q=j.docs.map(K=>({id:K.id,title:K.data().title||"Untitled Game",type:K.data().type||"sort-categories-egg",thumbnail:K.data().thumbnail||void 0,userId:K.data().userId||void 0,share:K.data().share||!1})),$=z.docs.filter(K=>!d||K.data().userId!==d.uid).map(K=>({id:K.id,title:K.data().title||"Untitled Game",type:K.data().type||"sort-categories-egg",thumbnail:K.data().thumbnail||void 0,userId:K.data().userId||void 0,share:K.data().share||!1}));if(e([...q,...$]),console.log(`Set publicGames with ${q.length} user games and ${$.length} other games`),f&&U.length>2){const K=H[2],G=H[3],Y=H[4],J=K.docs.map(fe=>({id:fe.id,title:fe.data().title||"Untitled Template",type:fe.data().type||"sort-categories-egg",thumbnail:fe.data().thumbnail,userId:fe.data().userId,categories:fe.data().categories||[],eggQty:fe.data().eggQty||6,share:fe.data().share||!1})),V=G.docs.map(fe=>({id:fe.id,title:fe.data().title||"Untitled Template",type:fe.data().type||"whack-a-mole",thumbnail:fe.data().thumbnail,userId:fe.data().userId,words:fe.data().words||[],share:fe.data().share||!1}));m([...J,...V]);const re=Y.docs.map(fe=>{const pe=fe.data();console.log(" Processing blank template:",{id:fe.id,title:pe.title,originalType:pe.type,allData:pe});let ce=pe.type||"sort-categories-egg";["whack-a-mole","sort-categories-egg","spinner-wheel","anagram","sentence-sense","place-value-showdown","word-volley"].includes(ce)||(console.warn(" Unsupported blank template type:",ce,"for template:",fe.id),ce="sort-categories-egg");const Ae={id:fe.id,title:pe.title||"Untitled Template",type:ce,thumbnail:pe.thumbnail,categories:pe.categories||[],eggQty:pe.eggQty||6,share:pe.share||!1};return console.log(" Processed blank template:",Ae),Ae});console.log(" All processed blank templates:",re),console.log(" Setting blankTemplates state with:",re.length,"templates"),x(re)}else m([]),x([])}catch(U){console.error("Error fetching games:",U),U.code&&console.error(`Firebase error code: ${U.code}`),U.message&&console.error(`Error message: ${U.message}`),b({title:"Error",description:"Could not load games and templates.",status:"error",duration:5e3})}finally{c(!1),console.log("Finished fetchGames function")}})},[b,d,f]);const _=t.filter(N=>d&&N.userId===d.uid&&N.title.toLowerCase().includes(n.toLowerCase())),E=t.filter(N=>(!d||N.userId!==d.uid)&&N.share===!0&&N.title.toLowerCase().includes(n.toLowerCase()));v.filter(N=>d&&N.userId===d.uid&&N.title.toLowerCase().includes(i.toLowerCase())),v.filter(N=>!d||N.userId!==d.uid&&N.title.toLowerCase().includes(i.toLowerCase())),g.filter(N=>N.title.toLowerCase().includes(s.toLowerCase()));const R=(N,U=!1)=>{if(console.log(" handleTemplateClick called with:",{template:N,isBlankTemplate:U,templateId:N==null?void 0:N.id,templateType:N==null?void 0:N.type,templateTitle:N==null?void 0:N.title}),!d){b({title:"Authentication Required",description:"Please sign in to access templates.",status:"error",duration:5e3});return}const H=N.type;console.log(" Template type:",H);const j=["whack-a-mole","sort-categories-egg","spinner-wheel","anagram","sentence-sense","place-value-showdown","word-volley"];if(console.log(" Supported game types:",j),console.log(" Is templateType supported?",j.includes(H)),j.includes(H))if(N.id){const z=`/configure/${H}/${N.id}`;console.log(" Navigating to:",z),u(z)}else{const z=`/configure/${H}`;console.log(" Navigating to (no ID):",z),u(z)}else{const z="sort-categories-egg";console.warn(` Unsupported template type: ${H}, falling back to ${z}`),console.log(" Template object causing fallback:",N),u(`/configure/${z}`)}},F=(N,U,H)=>N.length>0?h.jsx("div",{children:N.map(j=>h.jsx(lD,{id:j.id,title:j.title,type:j.type,thumbnail:j.thumbnail,isPlayable:!0,isOwner:U,onDelete:()=>H(j.id,"game",j.title)},j.id))}):h.jsx("div",{style:{textAlign:"center",padding:"var(--spacing-4)",color:"var(--color-gray-500)"},children:"No games found"}),L=(N,U,H,j)=>(console.log(" renderTemplatesList called with:",{templatesCount:N.length,isOwner:U,hasOnTemplateClick:!!H,hasDeleteHandler:!!j,templates:N.map(z=>({id:z.id,title:z.title,type:z.type}))}),N.length>0?h.jsx("div",{children:N.map(z=>(console.log(" Rendering GameItemDisplay for template:",{id:z.id,title:z.title,type:z.type,hasClickHandler:!!H}),h.jsx(lD,{title:z.title,type:z.type,thumbnail:z.thumbnail,isPlayable:!1,onClick:()=>{console.log(" GameItemDisplay onClick triggered for:",z.title,z.type),H(z)},isOwner:U,onDelete:j?()=>j(z.id,"template",z.title):void 0},z.id)))}):h.jsx("div",{style:{textAlign:"center",padding:"var(--spacing-4)",color:"var(--color-gray-500)"},children:"No templates found"}));return h.jsxs("div",{style:{width:"100vw",overflow:"hidden"},children:[h.jsx("div",{style:{backgroundColor:"var(--color-primary-500)",color:"white",padding:"var(--spacing-20) 0",width:"100%"},children:h.jsx("div",{style:{width:"100%",margin:"0 auto",padding:"0 var(--spacing-4)"},children:h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"var(--spacing-6)",alignItems:"center",width:"100%"},children:[h.jsx("h1",{style:{fontSize:"var(--font-size-5xl)",fontWeight:"bold"},children:"LuminateLearn"}),h.jsx("p",{style:{fontSize:"var(--font-size-xl)"},children:"Create Efficiently. Spark Curiosity. Shape Minds."})]})})}),h.jsx("div",{style:{padding:"var(--spacing-16) var(--spacing-4)",backgroundColor:"var(--color-gray-50)",width:"100%"},children:p&&d||f&&d?h.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",textAlign:"center",padding:"var(--spacing-8)",backgroundColor:"white",borderRadius:"var(--border-radius-lg)",boxShadow:"var(--shadow-md)"},children:[h.jsx("div",{style:{fontSize:"var(--font-size-2xl)",marginBottom:"var(--spacing-4)",color:"var(--color-primary-600)"},children:p?"":""}),h.jsx("h2",{style:{fontSize:"var(--font-size-xl)",color:"var(--color-gray-800)",marginBottom:"var(--spacing-2)"},children:p?"Redirecting to Your Dashboard":"Redirecting to Create"}),h.jsx("p",{style:{color:"var(--color-gray-600)"},children:p?"Taking you to your personal learning dashboard...":"Taking you to your creation and management dashboard..."})]}):h.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",display:"grid",gridTemplateColumns:f?"repeat(3, 1fr)":"1fr",gap:"var(--spacing-8)",width:"100%"},children:[p&&d&&h.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto 40px auto",textAlign:"center",padding:"var(--spacing-6)",backgroundColor:"linear-gradient(135deg, #4299E1 0%, #3182CE 100%)",background:"linear-gradient(135deg, #4299E1 0%, #3182CE 100%)",borderRadius:"var(--border-radius-lg)",boxShadow:"0 4px 12px rgba(66, 153, 225, 0.3)",color:"white"},children:[h.jsx("div",{style:{fontSize:"2rem",marginBottom:"var(--spacing-4)"},children:""}),h.jsx("h2",{style:{fontSize:"var(--font-size-xl)",marginBottom:"var(--spacing-2)",color:"white"},children:"Ready for the App Experience?"}),h.jsx("p",{style:{marginBottom:"var(--spacing-4)",opacity:.9},children:"Access your assignments and install the LuminateLearn app from your dashboard!"}),h.jsx("a",{href:"/student",style:{display:"inline-block",padding:"12px 24px",backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white",textDecoration:"none",borderRadius:"8px",fontWeight:"bold",border:"1px solid rgba(255, 255, 255, 0.3)",transition:"all 0.2s ease"},onMouseOver:N=>{N.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.3)"},onMouseOut:N=>{N.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.2)"},children:"Go to My Dashboard "})]}),h.jsxs("div",{style:{padding:"var(--spacing-6)",backgroundColor:"white",borderRadius:"var(--border-radius-lg)",boxShadow:"var(--shadow-md)"},children:[h.jsx("h2",{style:{fontSize:"var(--font-size-2xl)",color:"var(--color-gray-800)",marginBottom:"var(--spacing-4)"},children:"Free Games"}),h.jsx(cD,{onSearch:r}),h.jsx("div",{style:{maxHeight:"600px",overflowY:"auto"},children:l?h.jsx("div",{style:{textAlign:"center",padding:"var(--spacing-4)"},children:"Loading games..."}):h.jsxs(h.Fragment,{children:[d&&_.length>0&&h.jsxs("div",{children:[h.jsx("h3",{style:{fontSize:"var(--font-size-lg)",color:"var(--color-gray-700)",margin:"var(--spacing-4) 0",paddingBottom:"var(--spacing-2)",borderBottom:"1px solid var(--color-gray-200)"},children:"My Games"}),F(_,!0,P)]}),E.length>0&&h.jsxs("div",{children:[d&&_.length>0&&h.jsx("h3",{style:{fontSize:"var(--font-size-lg)",color:"var(--color-gray-700)",margin:"var(--spacing-4) 0",paddingBottom:"var(--spacing-2)",borderBottom:"1px solid var(--color-gray-200)"},children:"Other Public Games"}),F(E,!1,P)]})]})})]}),f&&h.jsxs("div",{style:{padding:"var(--spacing-6)",backgroundColor:"white",borderRadius:"var(--border-radius-lg)",boxShadow:"var(--shadow-md)"},children:[h.jsx("h2",{style:{fontSize:"var(--font-size-2xl)",color:"var(--color-gray-800)",marginBottom:"var(--spacing-4)"},children:"Modifiable Game Templates"}),h.jsx(cD,{onSearch:o}),h.jsx("div",{style:{maxHeight:"600px",overflowY:"auto"},children:l?h.jsx("div",{style:{textAlign:"center",padding:"var(--spacing-4)"},children:"Loading templates..."}):L(v.filter(N=>N.title.toLowerCase().includes(i.toLowerCase())),!1,N=>R(N),P)})]}),f&&h.jsxs("div",{style:{padding:"var(--spacing-6)",backgroundColor:"white",borderRadius:"var(--border-radius-lg)",boxShadow:"var(--shadow-md)"},children:[h.jsx("h2",{style:{fontSize:"var(--font-size-2xl)",color:"var(--color-gray-800)",marginBottom:"var(--spacing-4)"},children:"Blank Game Templates"}),h.jsx(cD,{onSearch:a}),h.jsx("div",{style:{maxHeight:"600px",overflowY:"auto"},children:l?h.jsx("div",{style:{textAlign:"center",padding:"var(--spacing-4)"},children:"Loading templates..."}):h.jsxs(h.Fragment,{children:[h.jsx(lD,{title:"Sentence Sense - Word Arrangement",type:"sentence-sense",isPlayable:!1,onClick:()=>{console.log(" Clicking hard-coded Sentence Sense template"),u("/configure/sentence-sense")}}),(()=>{const N=g.filter(U=>U.title.toLowerCase().includes(s.toLowerCase()));return console.log(" Filtered blank templates for rendering:",{totalBlankTemplates:g.length,filteredCount:N.length,searchTerm:s,filteredTemplates:N}),L(N,!1,U=>(console.log(" Template click handler created for:",U.title,U.type),R(U,!0)))})()]})})]})]})}),h.jsx(T,{})]})},BI=zC();function vje(t){return te(this,null,function*(){const e=new ul,n={prompt:"select_account"};t&&t.trim()&&(n.login_hint=t.toLowerCase().trim(),console.log("[Google Sign-In] Using login hint:",n.login_hint)),e.setCustomParameters(n);try{console.log("[Google Sign-In] Starting with account selection...");try{const r=new Promise((o,s)=>{setTimeout(()=>{s(new Error("auth/popup-timeout"))},8e3)}),i=yield Promise.race([UC(BI,e),r]);if(console.log("[Google Sign-In]  Popup Success:",i.user.email),t&&t.trim()&&i.user.email!==t.toLowerCase().trim()){console.warn("[Google Sign-In]  Account mismatch detected"),console.warn(`   Expected: ${t.toLowerCase().trim()}`),console.warn(`   Received: ${i.user.email}`);const o=new Error(`Account mismatch: You signed in with ${i.user.email}, but this login is for ${t}. Please try again and select the correct account.`);throw o.code="auth/account-mismatch",o}return i}catch(r){if(console.log("[Google Sign-In] Popup failed or timed out, trying redirect...",r.message||r.code),r.code==="auth/popup-blocked"||r.code==="auth/popup-closed-by-user"||r.code==="auth/cancelled-popup-request"||r.message==="auth/popup-timeout")return console.log("[Google Sign-In] Using redirect method..."),yield IZ(BI,e),null;throw r}}catch(r){throw console.error("[Google Sign-In]  Error:",r.code,r.message),r.code==="auth/popup-closed-by-user"?new Error("Sign-in was cancelled. Please try again."):r.code==="auth/popup-blocked"?new Error("Popup was blocked by your browser. Please allow popups for this site and try again."):(r.code==="auth/account-mismatch",r)}})}function yje(){return te(this,null,function*(){try{const t=yield FZ(BI);return t?(console.log("[Google Sign-In]  Redirect Success:",t.user.email),t):null}catch(t){throw console.error("[Google Sign-In]  Redirect Error:",t.code,t.message),t}})}const xje="6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI",NV={maxWidth:"400px",margin:"0 auto",padding:"2rem",backgroundColor:"white",borderRadius:"var(--border-radius-lg)",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},bje={display:"flex",flexDirection:"column",gap:"1rem"},LV={padding:"0.75rem",borderRadius:"var(--border-radius-md)",border:"1px solid var(--color-gray-300)",fontSize:"1rem"},Tee={padding:"0.75rem",borderRadius:"var(--border-radius-md)",backgroundColor:"var(--color-primary-500)",color:"white",border:"none",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",transition:"background-color 0.2s"},wje=oe(B({},Tee),{backgroundColor:"#4285F4",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"}),Sje={color:"var(--color-error)",fontSize:"0.875rem",marginTop:"0.25rem"},BV={marginTop:"1rem",textAlign:"center",fontSize:"0.875rem",color:"var(--color-gray-600)"},uD={color:"var(--color-primary-500)",textDecoration:"none",fontWeight:"bold"},_je=()=>new Promise(t=>{if(window.grecaptcha){console.log("reCAPTCHA already loaded"),t();return}console.log("Loading reCAPTCHA script dynamically"),window.onRecaptchaLoaded=()=>{console.log("reCAPTCHA script loaded successfully"),t()};const e=document.createElement("script");e.src="https://www.google.com/recaptcha/api.js?onload=onRecaptchaLoaded&render=explicit",e.async=!0,e.defer=!0,document.head.appendChild(e)}),Eje=()=>{const[t,e]=A.useState(""),[n,r]=A.useState(""),[i,o]=A.useState(""),[s,a]=A.useState(!1),[l,c]=A.useState("login"),[u,d]=A.useState(!1),[f,p]=A.useState(!1),[b,v]=A.useState(!1),[m,g]=A.useState(!1),x=A.useRef(null),w=A.useRef(null),{login:S,signup:D,loginWithGoogle:k,isTeacher:P,isStudent:M,currentUser:T}=Pr(),_=Fr(),[E]=fh(),R=E.get("assignmentId"),F=E.get("email"),L=E.get("temp")==="true",N=Y=>te(rt,null,function*(){if(!Y||!Y.includes("@")){g(!1);return}try{const J=Pn(xt,"users"),V=xr(J,Vn("email","==",Y.toLowerCase())),re=yield er(V);if(re.empty)g(!1);else{const pe=re.docs[0].data().hasTemporaryPassword===!0;g(pe)}}catch(J){console.error("Error checking temporary password:",J),g(!1)}});A.useEffect(()=>{if(t&&l==="login"){const Y=setTimeout(()=>{N(t)},500);return()=>clearTimeout(Y)}else g(!1)},[t,l]),A.useEffect(()=>{F&&l==="login"&&(e(F),L&&N(F))},[F,L,l]),A.useEffect(()=>{te(rt,null,function*(){try{const J=yield yje();if(J){if(console.log(" Google Sign-In redirect success:",J.user.email),t&&t.trim()&&J.user.email!==t.toLowerCase().trim()){o(`Account mismatch: You signed in with ${J.user.email}, but this login is for ${t}. Please try again and select the correct account.`);return}j(!0)}}catch(J){console.error(" Google Sign-In redirect failed:",J),J.message?o(J.message):o("Google Sign-In failed. Please try again.")}})},[t]);const U=()=>M?"/student":P?"/teacher":"/",[H,j]=A.useState(!1);A.useEffect(()=>{H&&(P||M)&&(j(!1),_(U()))},[H,P,M,_,T]),A.useEffect(()=>{te(rt,null,function*(){const J=window.location.href.includes("oobCode="),V=window.location.href.includes("mode=signIn"),re=!!R,fe=!!E.get("email");if(console.log("URL parameters check:",{hasOobCode:J,hasSignInMode:V,hasAssignmentId:re,hasEmailParam:fe,assignmentId:R,fullUrl:window.location.href}),re&&J){a(!0),console.log("Direct assignment access path detected");try{console.log("Trying direct assignment token access for ID:",R);const ce=an(xt,"assignments",R),xe=yield oi(ce);if(!xe.exists()){console.error("Assignment not found:",R),o("Assignment not found. Please contact your teacher."),a(!1);return}const Ae=xe.data();if(console.log("Assignment data retrieved directly:",Ae),!Ae.linkToken){console.error("Assignment has no link token:",R),o("This assignment cannot be accessed via email link. Please contact your teacher."),a(!1);return}console.log("Redirecting to game with direct token access"),_(`/play?token=${Ae.linkToken}&directAccess=true`);return}catch(ce){console.error("Error in direct assignment access:",ce)}}if(J&&V||j3(zC(),window.location.href)){a(!0),console.log("Email link authentication detected");const ce=Date.now();let xe=localStorage.getItem("emailForSignIn");if(console.log("Retrieved email from localStorage:",xe?"Yes":"No"),!xe){const Ae=E.get("email");if(console.log("Email parameter in URL:",Ae?"Yes":"No"),Ae)xe=decodeURIComponent(Ae),localStorage.setItem("emailForSignIn",xe),console.log("Using email from URL parameter:",xe);else{const Ee=window.prompt("Please provide your email for confirmation");if(!Ee){o("Email is required to complete sign-in"),a(!1);return}xe=Ee,localStorage.setItem("emailForSignIn",xe)}}try{console.log("Attempting to complete email link sign-in with email:",xe),yield U3(zC(),xe,window.location.href);const Ae=Date.now()-ce;if(console.log("Authentication completed in",Ae,"ms"),v(!0),R){console.log("Assignment ID found in URL:",R);try{const Ee=an(xt,"assignments",R),Oe=(yield oi(Ee)).data(),le=Oe==null?void 0:Oe.linkToken;console.log("Retrieved assignment token successfully:",le);const me=an(xt,"assignments",R),se=(yield oi(me)).data();console.log("Assignment data retrieved:",se),se&&se.beta===!0?(console.log("Beta assignment detected, redirecting to feedback form"),_(`/feedback?assignmentId=${R}&timeToComplete=${Ae}`)):(console.log("Redirecting to game with token"),_(`/play?token=${le}`))}catch(Ee){console.error("Error fetching assignment:",Ee),o("Error loading assignment"),a(!1)}}else console.log("No assignment ID found, setting pending redirect"),j(!0)}catch(Ae){console.error("Error signing in with email link:",Ae),o("Error completing email link sign-in. The link may be invalid or expired."),a(!1)}}else console.log("No email link authentication detected in current URL")})},[_,R,xt,E]),A.useEffect(()=>{_je().then(()=>{p(!0)})},[]),A.useEffect(()=>{if(l==="signup"&&f){if(console.log("In signup mode, setting up reCAPTCHA..."),!window.grecaptcha){console.error("reCAPTCHA not loaded yet"),o("reCAPTCHA verification could not be loaded. Please refresh the page and try again.");return}setTimeout(()=>{try{w.current&&!x.current?(console.log("Rendering reCAPTCHA..."),x.current=window.grecaptcha.render(w.current,{sitekey:xje,callback:()=>{console.log("reCAPTCHA callback success"),d(!0)},"expired-callback":()=>{console.log("reCAPTCHA expired"),d(!1)},"error-callback":()=>{console.log("reCAPTCHA error"),o("Error loading reCAPTCHA verification")}})):w.current?x.current&&(console.log("reCAPTCHA already rendered, resetting"),window.grecaptcha.reset(x.current)):console.error("reCAPTCHA container ref not available")}catch(Y){console.error("Error rendering reCAPTCHA:",Y)}},100)}else l==="login"&&x.current&&window.grecaptcha&&(console.log("Switching to login mode, resetting reCAPTCHA"),window.grecaptcha.reset(x.current),d(!1),x.current=null)},[l,f]);const z=()=>{if(o(""),!t.trim())return o("Email is required"),!1;if(!n.trim())return o("Password is required"),!1;if(l==="signup"){if(n.length<6)return o("Password must be at least 6 characters"),!1;if(!u)return o("Please complete the reCAPTCHA verification"),!1;if(!f)return o("reCAPTCHA verification is still loading"),!1}return!0},q=Y=>te(rt,null,function*(){if(Y.preventDefault(),!!z())try{if(a(!0),o(""),l==="login")yield S(t,n);else{const J=x.current&&window.grecaptcha?window.grecaptcha.getResponse(x.current):void 0;yield D(t,n,J)}j(!0)}catch(J){let V="Failed to ";if(V+=l==="login"?"log in":"sign up",J.code)switch(J.code){case"auth/user-not-found":V="No account found with this email";break;case"auth/wrong-password":V="Incorrect password";break;case"auth/email-already-in-use":V="An account with this email already exists";break;case"auth/invalid-email":V="Invalid email address";break;case"auth/weak-password":V="Password is too weak";break;default:V+=`: ${J.message}`}o(V),l==="signup"&&x.current&&window.grecaptcha&&(window.grecaptcha.reset(x.current),d(!1))}finally{a(!1)}}),$=()=>te(rt,null,function*(){try{a(!0),o("");const Y=yield vje(t||void 0);if(Y&&Y.user)j(!0);else if(Y===null)return}catch(Y){console.error("Google Sign-In failed:",Y),Y.code==="auth/account-mismatch"||Y.message==="Sign-in was cancelled. Please try again."||Y.message==="Popup was blocked by your browser. Please allow popups for this site and try again."?o(Y.message):o("Failed to sign in with Google. Please try again.")}finally{a(!1)}}),K=()=>{c(l==="login"?"signup":"login"),o(""),d(!1),x.current&&window.grecaptcha&&(window.grecaptcha.reset(x.current),x.current=null)},G=()=>l==="signup"?h.jsxs("div",{style:{marginTop:"0.5rem",marginBottom:"0.5rem"},children:[h.jsx("div",{ref:w,id:"recaptcha-container"}),!f&&h.jsx("div",{style:{color:"var(--color-gray-500)",fontSize:"0.875rem",textAlign:"center"},children:"Loading verification..."}),u&&h.jsxs("div",{style:{color:"var(--color-success)",fontSize:"0.875rem",marginTop:"0.25rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",fill:"currentColor"})}),h.jsx("span",{children:"Verification complete"})]})]}):null;return b?h.jsxs("div",{style:NV,children:[h.jsx("h2",{style:{textAlign:"center",color:"var(--color-success-600)"},children:"Sign-in Successful!"}),h.jsx("p",{style:{textAlign:"center"},children:"Redirecting to your assignment..."})]}):h.jsx("div",{style:{padding:"2rem",backgroundColor:"var(--color-gray-100)",minHeight:"calc(100vh - 64px)"},children:h.jsxs("div",{style:NV,children:[h.jsx("h2",{style:{textAlign:"center",marginBottom:"1.5rem",color:"var(--color-primary-700)"},children:l==="login"?"Log In":"Sign Up"}),i&&h.jsx("div",{style:Sje,children:i}),h.jsxs("form",{onSubmit:q,style:bje,children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",style:{display:"block",marginBottom:"0.25rem",fontSize:"0.875rem"},children:"Email"}),h.jsx("input",{id:"email",type:"email",value:t,onChange:Y=>e(Y.target.value),style:LV,required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"password",style:{display:"block",marginBottom:"0.25rem",fontSize:"0.875rem"},children:"Password"}),h.jsx("input",{id:"password",type:"password",value:n,onChange:Y=>r(Y.target.value),style:LV,required:!0})]}),G(),h.jsx("button",{type:"submit",style:oe(B({},Tee),{opacity:l==="signup"&&!u?.5:1}),disabled:s||l==="signup"&&!u,children:s?"Processing...":l==="login"?"Log In":"Sign Up"}),l==="signup"&&!u&&h.jsx("div",{style:{color:"var(--color-error)",fontSize:"0.75rem",textAlign:"center",marginTop:"0.5rem"},children:"Please complete the reCAPTCHA verification to sign up"})]}),!m&&!L&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{style:{margin:"1rem 0",textAlign:"center",position:"relative"},children:[h.jsx("hr",{style:{border:"1px solid var(--color-gray-200)"}}),h.jsx("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"0 0.5rem",color:"var(--color-gray-500)",fontSize:"0.875rem"},children:"OR"})]}),h.jsxs("button",{onClick:$,style:wje,disabled:s,children:[h.jsxs("svg",{width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",children:[h.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),h.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),h.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),h.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),h.jsx("span",{children:"Continue with Google"})]})]}),(m||L)&&l==="login"&&h.jsxs("div",{style:{background:"#fff3cd",border:"1px solid #ffeaa7",borderRadius:"5px",padding:"15px",margin:"20px 0",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"14px",color:"#856404",marginBottom:"10px"},children:h.jsx("strong",{children:" First Time Login"})}),h.jsx("div",{style:{fontSize:"12px",color:"#856404"},children:"Please use your email and temporary password from the email your teacher sent you. You'll be asked to create a new password after signing in."})]}),h.jsx("div",{style:BV,children:l==="login"?h.jsxs(h.Fragment,{children:["Don't have an account?"," ",h.jsx("a",{href:"#",onClick:K,style:uD,children:"Sign up"})]}):h.jsxs(h.Fragment,{children:["Already have an account?"," ",h.jsx("a",{href:"#",onClick:K,style:uD,children:"Log in"})]})}),l==="login"&&h.jsx("div",{style:oe(B({},BV),{marginTop:"0.5rem"}),children:h.jsx(Ku,{to:"/forgot-password",style:uD,children:"Forgot password?"})})]})})},Cje=()=>{const t=Fr(),[e]=fh(),{currentUser:n}=Pr();return A.useEffect(()=>{if(n){const r=e.get("redirectTo"),i=e.get("assignmentId");t(i?`/feedback?assignmentId=${i}`:r||"/")}else t("/login")},[n,t,e]),h.jsxs("div",{style:{maxWidth:"600px",margin:"2rem auto",padding:"2rem",textAlign:"center",backgroundColor:"white",borderRadius:"var(--border-radius-lg)",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[h.jsx("h1",{children:"Completing Login..."}),h.jsx("p",{children:"Please wait while we redirect you."})]})},Aje={maxWidth:"400px",margin:"0 auto",padding:"2rem",backgroundColor:"white",borderRadius:"var(--border-radius-lg)",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},Tje={display:"flex",flexDirection:"column",gap:"1rem"},Mje={padding:"0.75rem",borderRadius:"var(--border-radius-md)",border:"1px solid var(--color-gray-300)",fontSize:"1rem"},Pje={padding:"0.75rem",borderRadius:"var(--border-radius-md)",backgroundColor:"var(--color-primary-500)",color:"white",border:"none",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",transition:"background-color 0.2s"},Dje={color:"var(--color-error)",fontSize:"0.875rem",marginTop:"0.25rem"},Rje={color:"var(--color-success)",fontSize:"0.875rem",marginTop:"0.25rem"},kje={color:"var(--color-primary-500)",textDecoration:"none",fontWeight:"bold"},Ije=()=>{const[t,e]=A.useState(""),[n,r]=A.useState(""),[i,o]=A.useState(""),[s,a]=A.useState(!1),{resetPassword:l}=Pr(),c=u=>te(rt,null,function*(){if(u.preventDefault(),!t.trim()){r("Email is required");return}try{r(""),o(""),a(!0),yield l(t),o("Check your email inbox for further instructions")}catch(d){let f="Failed to reset password";if(d.code)switch(d.code){case"auth/user-not-found":f="No account found with this email";break;case"auth/invalid-email":f="Invalid email address";break;default:f+=`: ${d.message}`}r(f)}finally{a(!1)}});return h.jsx("div",{style:{padding:"2rem",backgroundColor:"var(--color-gray-100)",minHeight:"calc(100vh - 64px)"},children:h.jsxs("div",{style:Aje,children:[h.jsx("h2",{style:{textAlign:"center",marginBottom:"1.5rem",color:"var(--color-primary-700)"},children:"Reset Password"}),n&&h.jsx("div",{style:Dje,children:n}),i&&h.jsx("div",{style:Rje,children:i}),h.jsxs("form",{onSubmit:c,style:Tje,children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",style:{display:"block",marginBottom:"0.25rem",fontSize:"0.875rem"},children:"Email"}),h.jsx("input",{id:"email",type:"email",value:t,onChange:u=>e(u.target.value),style:Mje,required:!0})]}),h.jsx("button",{type:"submit",style:Pje,disabled:s,children:s?"Processing...":"Reset Password"})]}),h.jsx("div",{style:{marginTop:"1.5rem",textAlign:"center",fontSize:"0.875rem"},children:h.jsx(Ku,{to:"/login",style:kje,children:"Back to Login"})})]})})},Mee="@firebase/installations",UL="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pee=1e4,Dee=`w:${UL}`,Ree="FIS_v2",Fje="https://firebaseinstallations.googleapis.com/v1",Oje=60*60*1e3,Nje="installations",Lje="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bje={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},em=new pm(Nje,Lje,Bje);function kee(t){return t instanceof Dl&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iee({projectId:t}){return`${Fje}/projects/${t}/installations`}function Fee(t){return{token:t.token,requestStatus:2,expiresIn:Uje(t.expiresIn),creationTime:Date.now()}}function Oee(t,e){return te(this,null,function*(){const r=(yield e.json()).error;return em.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function Nee({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function jje(t,{refreshToken:e}){const n=Nee(t);return n.append("Authorization",zje(e)),n}function Lee(t){return te(this,null,function*(){const e=yield t();return e.status>=500&&e.status<600?t():e})}function Uje(t){return Number(t.replace("s","000"))}function zje(t){return`${Ree} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vje(r,i){return te(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const o=Iee(t),s=Nee(t),a=e.getImmediate({optional:!0});if(a){const d=yield a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const l={fid:n,authVersion:Ree,appId:t.appId,sdkVersion:Dee},c={method:"POST",headers:s,body:JSON.stringify(l)},u=yield Lee(()=>fetch(o,c));if(u.ok){const d=yield u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:Fee(d.authToken)}}else throw yield Oee("Create Installation",u)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bee(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wje(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $je=/^[cdef][\w-]{21}$/,jI="";function Hje(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=Gje(t);return $je.test(n)?n:jI}catch(t){return jI}}function Gje(t){return Wje(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jee=new Map;function Uee(t,e){const n=JT(t);zee(n,e),qje(n,e)}function zee(t,e){const n=jee.get(t);if(n)for(const r of n)r(e)}function qje(t,e){const n=Kje();n&&n.postMessage({key:t,fid:e}),Yje()}let vp=null;function Kje(){return!vp&&"BroadcastChannel"in self&&(vp=new BroadcastChannel("[Firebase] FID Change"),vp.onmessage=t=>{zee(t.data.key,t.data.fid)}),vp}function Yje(){jee.size===0&&vp&&(vp.close(),vp=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xje="firebase-installations-database",Qje=1,tm="firebase-installations-store";let dD=null;function zL(){return dD||(dD=VQ(Xje,Qje,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(tm)}}})),dD}function QC(t,e){return te(this,null,function*(){const n=JT(t),i=(yield zL()).transaction(tm,"readwrite"),o=i.objectStore(tm),s=yield o.get(n);return yield o.put(e,n),yield i.done,(!s||s.fid!==e.fid)&&Uee(t,e.fid),e})}function Vee(t){return te(this,null,function*(){const e=JT(t),r=(yield zL()).transaction(tm,"readwrite");yield r.objectStore(tm).delete(e),yield r.done})}function e2(t,e){return te(this,null,function*(){const n=JT(t),i=(yield zL()).transaction(tm,"readwrite"),o=i.objectStore(tm),s=yield o.get(n),a=e(s);return a===void 0?yield o.delete(n):yield o.put(a,n),yield i.done,a&&(!s||s.fid!==a.fid)&&Uee(t,a.fid),a})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(t){return te(this,null,function*(){let e;const n=yield e2(t.appConfig,r=>{const i=Zje(r),o=Jje(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===jI?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function Zje(t){const e=t||{fid:Hje(),registrationStatus:0};return Wee(e)}function Jje(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(em.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=eUe(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:tUe(t)}:{installationEntry:e}}function eUe(t,e){return te(this,null,function*(){try{const n=yield Vje(t,e);return QC(t.appConfig,n)}catch(n){throw kee(n)&&n.customData.serverCode===409?yield Vee(t.appConfig):yield QC(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function tUe(t){return te(this,null,function*(){let e=yield jV(t.appConfig);for(;e.registrationStatus===1;)yield Bee(100),e=yield jV(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=yield VL(t);return r||n}return e})}function jV(t){return e2(t,e=>{if(!e)throw em.create("installation-not-found");return Wee(e)})}function Wee(t){return nUe(t)?{fid:t.fid,registrationStatus:0}:t}function nUe(t){return t.registrationStatus===1&&t.registrationTime+Pee<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rUe(r,i){return te(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){const o=iUe(t,n),s=jje(t,n),a=e.getImmediate({optional:!0});if(a){const d=yield a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const l={installation:{sdkVersion:Dee,appId:t.appId}},c={method:"POST",headers:s,body:JSON.stringify(l)},u=yield Lee(()=>fetch(o,c));if(u.ok){const d=yield u.json();return Fee(d)}else throw yield Oee("Generate Auth Token",u)})}function iUe(t,{fid:e}){return`${Iee(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(t,e=!1){return te(this,null,function*(){let n;const r=yield e2(t.appConfig,o=>{if(!$ee(o))throw em.create("not-registered");const s=o.authToken;if(!e&&aUe(s))return o;if(s.requestStatus===1)return n=oUe(t,e),o;{if(!navigator.onLine)throw em.create("app-offline");const a=cUe(o);return n=sUe(t,a),a}});return n?yield n:r.authToken})}function oUe(t,e){return te(this,null,function*(){let n=yield UV(t.appConfig);for(;n.authToken.requestStatus===1;)yield Bee(100),n=yield UV(t.appConfig);const r=n.authToken;return r.requestStatus===0?WL(t,e):r})}function UV(t){return e2(t,e=>{if(!$ee(e))throw em.create("not-registered");const n=e.authToken;return uUe(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function sUe(t,e){return te(this,null,function*(){try{const n=yield rUe(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield QC(t.appConfig,r),n}catch(n){if(kee(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield Vee(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield QC(t.appConfig,r)}throw n}})}function $ee(t){return t!==void 0&&t.registrationStatus===2}function aUe(t){return t.requestStatus===2&&!lUe(t)}function lUe(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Oje}function cUe(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function uUe(t){return t.requestStatus===1&&t.requestTime+Pee<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dUe(t){return te(this,null,function*(){const e=t,{installationEntry:n,registrationPromise:r}=yield VL(e);return r?r.catch(console.error):WL(e).catch(console.error),n.fid})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fUe(t,e=!1){return te(this,null,function*(){const n=t;return yield hUe(n),(yield WL(n,e)).token})}function hUe(t){return te(this,null,function*(){const{registrationPromise:e}=yield VL(t);e&&(yield e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pUe(t){if(!t||!t.options)throw fD("App Configuration");if(!t.name)throw fD("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw fD(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function fD(t){return em.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hee="installations",mUe="installations-internal",gUe=t=>{const e=t.getProvider("app").getImmediate(),n=pUe(e),r=Rd(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},vUe=t=>{const e=t.getProvider("app").getImmediate(),n=Rd(e,Hee).getImmediate();return{getId:()=>dUe(n),getToken:i=>fUe(n,i)}};function yUe(){El(new La(Hee,gUe,"PUBLIC")),El(new La(mUe,vUe,"PRIVATE"))}yUe();ds(Mee,UL);ds(Mee,UL,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="analytics",xUe="firebase_id",bUe="origin",wUe=60*1e3,SUe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$L="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=new DT("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Ue={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ka=new pm("analytics","Analytics",_Ue);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EUe(t){if(!t.startsWith($L)){const e=ka.create("invalid-gtag-resource",{gtagURL:t});return la.warn(e.message),""}return t}function Gee(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function CUe(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function AUe(t,e){const n=CUe("firebase-js-sdk-policy",{createScriptURL:EUe}),r=document.createElement("script"),i=`${$L}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function TUe(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function MUe(t,e,n,r,i,o){return te(this,null,function*(){const s=r[i];try{if(s)yield e[s];else{const l=(yield Gee(n)).find(c=>c.measurementId===i);l&&(yield e[l.appId])}}catch(a){la.error(a)}t("config",i,o)})}function PUe(t,e,n,r,i){return te(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);const a=yield Gee(n);for(const l of s){const c=a.find(d=>d.measurementId===l),u=c&&e[c.appId];if(u)o.push(u);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),t("event",r,i||{})}catch(o){la.error(o)}})}function DUe(t,e,n,r){function i(o,...s){return te(this,null,function*(){try{if(o==="event"){const[a,l]=s;yield PUe(t,e,n,a,l)}else if(o==="config"){const[a,l]=s;yield MUe(t,e,n,r,a,l)}else if(o==="consent"){const[a,l]=s;t("consent",a,l)}else if(o==="get"){const[a,l,c]=s;t("get",a,l,c)}else if(o==="set"){const[a]=s;t("set",a)}else t(o,...s)}catch(a){la.error(a)}})}return i}function RUe(t,e,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=DUe(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}function kUe(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes($L)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IUe=30,FUe=1e3;class OUe{constructor(e={},n=FUe){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const qee=new OUe;function NUe(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function LUe(t){return te(this,null,function*(){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:NUe(r)},o=SUe.replace("{app-id}",n),s=yield fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{const l=yield s.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch(l){}throw ka.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})}function BUe(r){return te(this,arguments,function*(t,e=qee,n){const{appId:i,apiKey:o,measurementId:s}=t.options;if(!i)throw ka.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw ka.create("no-api-key")}const a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new zUe;return setTimeout(()=>te(this,null,function*(){l.abort()}),wUe),Kee({appId:i,apiKey:o,measurementId:s},a,l,e)})}function Kee(o,s,a){return te(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=qee){var l;const{appId:c,measurementId:u}=t;try{yield jUe(r,e)}catch(d){if(u)return la.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:c,measurementId:u};throw d}try{const d=yield LUe(t);return i.deleteThrottleMetadata(c),d}catch(d){const f=d;if(!UUe(f)){if(i.deleteThrottleMetadata(c),u)return la.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:c,measurementId:u};throw d}const p=Number((l=f==null?void 0:f.customData)===null||l===void 0?void 0:l.httpStatus)===503?f8(n,i.intervalMillis,IUe):f8(n,i.intervalMillis),b={throttleEndTimeMillis:Date.now()+p,backoffCount:n+1};return i.setThrottleMetadata(c,b),la.debug(`Calling attemptFetch again in ${p} millis`),Kee(t,b,r,i)}})}function jUe(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(o),r(ka.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function UUe(t){if(!(t instanceof Dl)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class zUe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}function VUe(t,e,n,r,i){return te(this,null,function*(){if(i&&i.global){t("event",n,r);return}else{const o=yield e,s=Object.assign(Object.assign({},r),{send_to:o});t("event",n,s)}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WUe(){return te(this,null,function*(){if(BQ())try{yield jQ()}catch(t){return la.warn(ka.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return la.warn(ka.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function $Ue(t,e,n,r,i,o,s){return te(this,null,function*(){var a;const l=BUe(t);l.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&la.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>la.error(p)),e.push(l);const c=WUe().then(p=>{if(p)return r.getId()}),[u,d]=yield Promise.all([l,c]);kUe(o)||AUe(o,u.measurementId),i("js",new Date);const f=(a=s==null?void 0:s.config)!==null&&a!==void 0?a:{};return f[bUe]="firebase",f.update=!0,d!=null&&(f[xUe]=d),i("config",u.measurementId,f),u.measurementId})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HUe{constructor(e){this.app=e}_delete(){return delete Mx[this.app.options.appId],Promise.resolve()}}let Mx={},zV=[];const VV={};let hD="dataLayer",GUe="gtag",WV,Yee,$V=!1;function qUe(){const t=[];if(LQ()&&t.push("This is a browser extension environment."),_Ie()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=ka.create("invalid-analytics-context",{errorInfo:e});la.warn(n.message)}}function KUe(t,e,n){qUe();const r=t.options.appId;if(!r)throw ka.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)la.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ka.create("no-api-key");if(Mx[r]!=null)throw ka.create("already-exists",{id:r});if(!$V){TUe(hD);const{wrappedGtag:o,gtagCore:s}=RUe(Mx,zV,VV,hD,GUe);Yee=o,WV=s,$V=!0}return Mx[r]=$Ue(t,zV,VV,e,WV,hD,n),new HUe(t)}function YUe(t=Iw()){t=Tr(t);const e=Rd(t,ZC);return e.isInitialized()?e.getImmediate():XUe(t)}function XUe(t,e={}){const n=Rd(t,ZC);if(n.isInitialized()){const i=n.getImmediate();if(Tb(e,n.getOptions()))return i;throw ka.create("already-initialized")}return n.initialize({options:e})}function Xee(t,e,n,r){t=Tr(t),VUe(Yee,Mx[t.app.options.appId],e,n,r).catch(i=>la.error(i))}const HV="@firebase/analytics",GV="0.10.8";function QUe(){El(new La(ZC,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return KUe(r,i,n)},"PUBLIC")),El(new La("analytics-internal",t,"PRIVATE")),ds(HV,GV),ds(HV,GV,"esm2017");function t(e){try{const n=e.getProvider(ZC).getImmediate();return{logEvent:(r,i,o)=>Xee(n,r,i,o)}}catch(n){throw ka.create("interop-component-reg-failed",{reason:n})}}}QUe();const ZUe=YUe(),JUe=(t,e)=>{try{const n=Jr.currentUser;Xee(ZUe,"email_link_auth_completed",{assignmentId:t,timeToComplete:e,userAuthenticated:!!n,userEmail:(n==null?void 0:n.email)||"unknown",timestamp:new Date().toISOString()})}catch(n){console.error("Error logging email_link_auth_completed event:",n)}},e6e={maxWidth:"600px",margin:"2rem auto",padding:"2rem",backgroundColor:"white",borderRadius:"var(--border-radius-lg)",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},t6e={display:"flex",flexDirection:"column",gap:"1.5rem"},$S={display:"flex",flexDirection:"column",gap:"0.5rem"},HS={fontWeight:"bold",fontSize:"1rem"},n6e={padding:"0.75rem",borderRadius:"var(--border-radius-md)",border:"1px solid var(--color-gray-300)",fontSize:"1rem"},qV=oe(B({},n6e),{minHeight:"120px"}),r6e={padding:"0.75rem",borderRadius:"var(--border-radius-md)",backgroundColor:"var(--color-primary-500)",color:"white",border:"none",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",transition:"background-color 0.2s"},Qee={padding:"1rem",borderRadius:"var(--border-radius-md)",marginBottom:"1rem"},i6e=oe(B({},Qee),{backgroundColor:"#d4edda",color:"#155724"}),o6e=oe(B({},Qee),{backgroundColor:"#f8d7da",color:"#721c24"}),s6e=()=>{const[t,e]=A.useState(0),[n,r]=A.useState(0),[i,o]=A.useState(""),[s,a]=A.useState(""),[l,c]=A.useState(""),[u,d]=A.useState(!1),[f,p]=A.useState(!1),[b]=fh(),{currentUser:v}=Pr(),m=Fr(),g=b.get("assignmentId"),x=b.get("timeToComplete");A.useEffect(()=>{(!g||!v)&&m("/"),g&&x&&v&&JUe(g,parseInt(x,10))},[g,v,m,x]);const w=S=>te(rt,null,function*(){if(S.preventDefault(),t===0||n===0){c("Please provide ratings for all questions");return}d(!0),c("");try{const D=`${g}_${(v==null?void 0:v.uid)||"anonymous"}`;yield iu(an(xt,"emailAuthFeedback",D),{assignmentId:g,userId:(v==null?void 0:v.uid)||"anonymous",userEmail:(v==null?void 0:v.email)||"unknown",rating:t,easeOfUse:n,issuesReported:i,comments:s,createdAt:_o(),timeToComplete:x?parseInt(x,10):null}),p(!0),setTimeout(()=>{m(g?`/play?id=${g}`:"/")},3e3)}catch(D){console.error("Error submitting feedback:",D),c("Error submitting feedback. Please try again.")}finally{d(!1)}});return h.jsxs("div",{style:e6e,children:[h.jsx("h1",{children:"Email Authentication Feedback"}),h.jsx("p",{children:"Thank you for participating in our beta test! Please take a moment to provide feedback on your experience with the passwordless login."}),l&&h.jsx("div",{style:o6e,children:l}),f&&h.jsx("div",{style:i6e,children:h.jsx("p",{children:"Thank you for your feedback! You will be redirected to your assignment shortly."})}),!f&&h.jsxs("form",{style:t6e,onSubmit:w,children:[h.jsxs("div",{style:$S,children:[h.jsx("label",{style:HS,children:"How would you rate your overall experience with the email link authentication?"}),h.jsx("div",{children:[1,2,3,4,5].map(S=>h.jsxs("label",{style:{marginRight:"1rem"},children:[h.jsx("input",{type:"radio",name:"rating",value:S,checked:t===S,onChange:()=>e(S)}),S," ",S===1?"(Poor)":S===5?"(Excellent)":""]},S))})]}),h.jsxs("div",{style:$S,children:[h.jsx("label",{style:HS,children:"How easy was it to access your assignment?"}),h.jsx("div",{children:[1,2,3,4,5].map(S=>h.jsxs("label",{style:{marginRight:"1rem"},children:[h.jsx("input",{type:"radio",name:"easeOfUse",value:S,checked:n===S,onChange:()=>r(S)}),S," ",S===1?"(Very Difficult)":S===5?"(Very Easy)":""]},S))})]}),h.jsxs("div",{style:$S,children:[h.jsx("label",{style:HS,children:"Did you encounter any issues? Please describe."}),h.jsx("textarea",{style:qV,value:i,onChange:S=>o(S.target.value),placeholder:"Describe any issues you encountered..."})]}),h.jsxs("div",{style:$S,children:[h.jsx("label",{style:HS,children:"Any additional comments or suggestions?"}),h.jsx("textarea",{style:qV,value:s,onChange:S=>a(S.target.value),placeholder:"Share your thoughts..."})]}),h.jsx("button",{type:"submit",style:r6e,disabled:u,children:u?"Submitting...":"Submit Feedback"})]})]})},Zee=["ass","fuck","shit","bitch","piss","dick","cunt"],KV={a:["@","4","",""],i:["1","!","|",""],o:["0","",""],u:["",""],e:["3","",""],s:["$","5",""]},a6e=t=>{let e="";for(const n of t.toLowerCase())n in KV?e+=`[${n}${KV[n].join("")}]`:e+=n;return new RegExp(e,"i")},l6e=Zee.map(a6e),c6e=t=>{const e=t.toLowerCase();return!!(Zee.some(r=>e.includes(r))||l6e.some(r=>r.test(e))||/(.)\1{3,}/.test(e))},Jee=t=>{let e=t.trim().replace(/\s+/g," ");return e=e.replace(/[^a-zA-Z0-9\s]/g,""),e},u6e=t=>{const e=Jee(t);return!(e.length<3||e.length>12||c6e(e))},d6e=t=>{let e=t.categories,n=!1;t.richCategories&&Array.isArray(t.richCategories)&&(e=t.richCategories,n=!0);const r=[];e.forEach(x=>{n&&x.items&&Array.isArray(x.items)?x.items.forEach(w=>{r.push({text:w.content||w.text||w,category:x.name})}):Array.isArray(x.items)&&x.items.forEach(w=>{r.push({text:w,category:x.name})})});const i=[],o=Math.min(t.eggQty,r.length),s=3,l=100-s-30,c=4,u=100-2*c,d=3.5,f=5,p=6.5,b=[...r].sort(()=>Math.random()-.5),v=[],m=(x,w)=>v.some(S=>Math.sqrt(Vl(x-S.x,2)+Vl(w-S.y,2))<p),g=()=>{const x=c+Math.random()*u,w=s+Math.random()*l;return{x,y:w}};for(let x=0;x<o;x++){const w=b[x];let S,D=0;const k=100;do S=g(),D++;while(m(S.x,S.y)&&D<k);if(D>=k){const _=Math.ceil(Math.sqrt(o)),E=Math.floor(x/_),R=x%_,F=u/_,L=l/Math.ceil(o/_);S={x:c+R*F+F/2,y:s+E*L+L/2}}const P=2,M=Math.max(c+d/2,Math.min(100-c-d/2,S.x+(Math.random()-.5)*P)),T=Math.max(s+f/2,Math.min(s+l-f/2,S.y+(Math.random()-.5)*P));v.push({x:M,y:T}),i.push({id:`egg-${Date.now()}-${x}`,word:w,cracked:!1,position:{x:M,y:T}})}return i},YV=t=>{let e=t.categories;return t.richCategories&&Array.isArray(t.richCategories)&&(e=t.richCategories),e.map((n,r)=>({id:`basket-${r}`,name:n.name,items:[]}))},ete=(t,e)=>t.category===e.name,f6e=(t,e)=>ete(t,e)?10:0,h6e=(t,e)=>{const n=t.every(o=>o.cracked),r=e.reduce((o,s)=>o+s.items.length,0),i=t.filter(o=>o.cracked).length;return n&&r===i},p6e=()=>[{id:"fallback1",type:"sort-categories-egg",title:"Animals",description:"Sort animals into categories",difficulty:"medium",timeLimit:300,targetScore:100,eggQty:12,categories:[{name:"Mammals",items:["dog","cat","elephant","giraffe"]},{name:"Birds",items:["eagle","parrot","penguin","owl"]},{name:"Reptiles",items:["snake","lizard","turtle","crocodile"]}],share:!0,createdAt:Ar.fromDate(new Date)},{id:"fallback2",type:"sort-categories-egg",title:"Colors",description:"Sort items by color",difficulty:"easy",timeLimit:240,targetScore:80,eggQty:9,categories:[{name:"Red",items:["apple","strawberry","fire truck"]},{name:"Blue",items:["sky","ocean","blueberry"]},{name:"Green",items:["grass","leaf","frog"]}],share:!0,createdAt:Ar.fromDate(new Date)}],m6e=(t,e)=>e.length<10?!0:t>Math.min(...e.map(n=>n.score)),g6e=(t,e,n,r,i)=>{const{currentUser:o}=Pr(),s=ro(),a=A.useRef(null),[l,c]=A.useState({score:0,eggs:[],crackedEggs:[],selectedWord:null,isWordSelected:!1,baskets:[],gameConfig:{title:"Default Configuration",type:"sort-categories-egg",description:"Sort items into categories by cracking eggs",difficulty:"medium",timeLimit:300,targetScore:100,eggQty:6,categories:[{name:"Category 1",items:["Item 1","Item 2","Item 3"]},{name:"Category 2",items:["Item 4","Item 5","Item 6"]}],share:!1,createdAt:t.createdAt},gameStarted:!1,savedConfigs:[],isConfigModalOpen:!1,isLoading:!1,ghostPosition:{x:0,y:0},targetBasket:null,isGameComplete:!1,highScores:[],isHighScore:!1,showHighScoreDisplayModal:!1,isSubmittingScore:!1}),u=A.useCallback(_=>te(rt,null,function*(){try{const E=xr(Pn(xt,"highScores"),Vn("configId","==",_),Vn("gameType","==","sort-categories-egg"),g0("score","desc"),Hf(10)),R=yield er(E),F=[];R.forEach(L=>{F.push(B({id:L.id},L.data()))}),c(L=>oe(B({},L),{highScores:F}))}catch(E){console.error("Error loading high scores:",E)}}),[]),d=A.useCallback(()=>te(rt,null,function*(){try{c(F=>oe(B({},F),{isLoading:!0}));const _=xr(Pn(xt,"userGameConfigs"),Vn("type","==","sort-categories-egg"),Vn("share","==",!0)),E=yield er(_),R=[];E.forEach(F=>{R.push(B({id:F.id},F.data()))}),c(F=>oe(B({},F),{savedConfigs:R}))}catch(_){console.error("Error loading configurations:",_),c(E=>oe(B({},E),{savedConfigs:p6e()}))}finally{c(_=>oe(B({},_),{isLoading:!1}))}}),[]),f=A.useCallback(_=>{console.log("Initializing game with config:",_),c(F=>oe(B({},F),{gameConfig:oe(B({},_),{id:_.id})})),_.id?(console.log("Loading high scores for config ID:",_.id),u(_.id)):console.error("No config ID available for game initialization");const E=YV(_),R=d6e(_);c(F=>oe(B({},F),{baskets:E,eggs:R,crackedEggs:[],score:0,gameStarted:!0,isGameComplete:!1,selectedWord:null,isWordSelected:!1}))},[u]);A.useEffect(()=>{d()},[]),A.useEffect(()=>{const _=YV(t);c(E=>oe(B({},E),{baskets:_})),f(t)},[t]),A.useEffect(()=>{const _=E=>{if(l.isWordSelected&&a.current){const R=a.current.getBoundingClientRect();c(F=>oe(B({},F),{ghostPosition:{x:E.clientX-R.left,y:E.clientY-R.top}}))}};return l.isWordSelected&&document.addEventListener("mousemove",_),()=>{document.removeEventListener("mousemove",_)}},[l.isWordSelected]);const p=A.useCallback(_=>{_.cracked||c(E=>{const R=E.eggs.map(N=>N.id===_.id?oe(B({},N),{cracked:!0}):N),F=R.find(N=>N.id===_.id),L=F?[...E.crackedEggs,F]:E.crackedEggs;return oe(B({},E),{eggs:R,crackedEggs:L,selectedWord:null,isWordSelected:!1})})},[]),b=A.useCallback((_,E)=>{if(E.stopPropagation(),a.current){const R=a.current.getBoundingClientRect();c(F=>oe(B({},F),{selectedWord:_,isWordSelected:!0,ghostPosition:{x:E.clientX-R.left,y:E.clientY-R.top}}))}},[]),v=A.useCallback(_=>{if(l.isWordSelected&&a.current){const E=a.current.getBoundingClientRect();c(R=>oe(B({},R),{ghostPosition:{x:_.clientX-E.left,y:_.clientY-E.top}}))}},[l.isWordSelected]),m=A.useCallback(_=>{if(!l.isWordSelected||!l.selectedWord)return;const R=_.target.closest(".basket");if(R){const F=R.getAttribute("data-basket-id"),L=l.baskets.find(N=>N.name===F);L&&g(l.selectedWord,L)}c(F=>oe(B({},F),{selectedWord:null,isWordSelected:!1}))},[l.isWordSelected,l.selectedWord,l.baskets]),g=A.useCallback((_,E)=>{ete(_,E);const R=f6e(_,E);c(F=>{const L=F.baskets.map(H=>H.id===E.id?oe(B({},H),{items:[...H.items,_]}):H),N=F.score+R,U=h6e(F.eggs,L);return oe(B({},F),{baskets:L,score:N,isGameComplete:U,selectedWord:null,isWordSelected:!1})})},[]),x=A.useCallback(_=>{f(_),c(E=>oe(B({},E),{isConfigModalOpen:!1}))},[]),w=A.useCallback(()=>{f(l.gameConfig)},[l.gameConfig]),S=A.useCallback(()=>{n(l.score)},[l.score,n]),D=A.useCallback(_=>m6e(_,l.highScores),[l.highScores]),k=A.useCallback(_=>te(rt,null,function*(){const E=_!=null?_:l.score;if(!u6e(e)){s({title:"Invalid Name",description:"Please enter a valid player name.",status:"error",duration:3e3,isClosable:!0});return}const R=Jee(e),F=D(E);if(F&&r&&r(),F)try{c(N=>oe(B({},N),{isSubmittingScore:!0}));const L={playerName:R,score:E,configId:l.gameConfig.id||"unknown",gameType:"sort-categories-egg",userId:(o==null?void 0:o.uid)||null,createdAt:_o()};yield Sc(Pn(xt,"highScores"),L),c(N=>oe(B({},N),{isHighScore:!0,showHighScoreDisplayModal:!0})),l.gameConfig.id&&(yield u(l.gameConfig.id)),s({title:"High Score Saved!",description:`Congratulations ${R}! Your score of ${E} has been saved.`,status:"success",duration:5e3,isClosable:!0})}catch(L){console.error("Error saving high score:",L),s({title:"Error",description:"Failed to save high score. Please try again.",status:"error",duration:3e3,isClosable:!0})}finally{c(L=>oe(B({},L),{isSubmittingScore:!1}))}else c(L=>oe(B({},L),{isHighScore:!1,showHighScoreDisplayModal:!0}));i&&i(),n(E)}),[l.score,l.gameConfig.id,l.highScores,e,o,D,u,r,i,n,s]),P=A.useCallback(()=>{c(_=>oe(B({},_),{showHighScoreDisplayModal:!1,isHighScore:!1}))},[]),M=A.useCallback(()=>{c(_=>oe(B({},_),{isConfigModalOpen:!0}))},[]),T=A.useCallback(()=>{c(_=>oe(B({},_),{isConfigModalOpen:!1}))},[]);return A.useEffect(()=>{l.isGameComplete&&!l.showHighScoreDisplayModal&&k()},[l.isGameComplete,l.showHighScoreDisplayModal,k]),{gameState:l,gameAreaRef:a,handleEggClick:p,handleWordClick:b,handleMouseMove:v,handleGameAreaClick:m,handleConfigSelect:x,handleResetGame:w,handleCloseGame:S,handleHighScoreDisplayModalClose:P,openConfigModal:M,closeConfigModal:T,loadSavedConfigs:d}},v6e=({onStartGame:t,onLoadConfig:e})=>{const n=Ji({base:2,md:3,lg:4}),r=Ji({base:"md",md:"lg"});return h.jsx(yt,{width:"100vw",maxWidth:"100%",position:"relative",left:"50%",transform:"translateX(-50%)",bg:"gray.50",children:h.jsx(yt,{width:"100%",maxW:"1400px",mx:"auto",px:n,py:6,children:h.jsxs($t,{spacing:6,align:"center",width:"100%",children:[h.jsx(Br,{size:r,textAlign:"center",fontFamily:"'Comic Neue', sans-serif",color:"blue.700",children:"Sort Categories Egg Reveal"}),h.jsx(dt,{fontSize:{base:"sm",md:"md"},textAlign:"center",maxW:"600px",fontFamily:"'Comic Neue', sans-serif",color:"gray.600",children:"Find eggs, crack them open, and sort words into the correct categories!"}),h.jsxs(CC,{columns:{base:1,md:2},spacing:4,width:"100%",maxW:"500px",mt:4,children:[h.jsx(hn,{colorScheme:"blue",size:{base:"md",md:"lg"},onClick:t,width:"100%",fontFamily:"'Comic Neue', sans-serif",children:"Start Game"}),h.jsx(hn,{variant:"outline",colorScheme:"blue",size:{base:"md",md:"lg"},onClick:e,width:"100%",fontFamily:"'Comic Neue', sans-serif",children:"Load Configuration"})]})]})})})},y6e={ck:"k",ch:"t",sh:"",th:"",th_voiced:"",wh:"hw",ph:"f",ng:"",ll:"l",gh:"",kn:"n",wr:"r",mb:"m",bt:"t",mn:"n",ai:"e",ay:"e",ee:"i",ea:"i",ie:"i",oa:"o",ow:"o",ou:"a",ow_sound:"a",ue:"u",ew:"u",oo:"u",oo_short:"",au:"",aw:"",oi:"",oy:"",ar:"r",er:"",ir:"",or:"r",ur:"",are:"r",eer:"r",ire:"ar",ore:"r",ure:"r",tion:"n",sion:"n",ture:"tr",cious:"s",tious:"s",ough:"f",augh:"f",eigh:"e",ight:"at",c_soft:"s",g_soft:"d",y_vowel:"a",y_short:""},x6e={voiceId:"Joanna",engine:"neural"};class b6e{constructor(e={}){oo(this,"config");oo(this,"currentAudio",null);oo(this,"firestoreAvailable",!1);this.config=B(B({},x6e),e),this.initializeFirestore()}initializeFirestore(){try{xt?(this.firestoreAvailable=!0,console.log("Firestore TTS service initialized successfully")):(this.firestoreAvailable=!1,console.warn("Firestore not available for TTS"))}catch(e){console.warn("Failed to initialize Firestore TTS service:",e),this.firestoreAvailable=!1}}generateRequestId(){return Date.now().toString()+"_"+Math.random().toString(36).substr(2,9)}waitForTTSResult(e){return te(this,null,function*(){return new Promise((n,r)=>{const i=an(xt,"ttsResults",e),o=setTimeout(()=>{s(),console.warn("TTS request timed out:",e),n(null)},3e4),s=J5e(i,a=>{if(a.exists()){clearTimeout(o),s();const l=a.data();console.log("TTS result received:",l),l.success&&l.audioData?(ou(i).catch(console.warn),n(l.audioData)):(console.error("TTS processing failed:",l.error),n(null))}},a=>{clearTimeout(o),s(),console.error("Error listening for TTS result:",a),r(a)})})})}convertToPhonemeSSML(e){let n="",r=0;const i=Object.entries(y6e).sort(([o],[s])=>s.length-o.length);for(;r<e.length;){let o=!1;for(const[s,a]of i){const l=e.substring(r,r+s.length);if(l.toLowerCase()===s.toLowerCase()){a&&(s==="ph"||s==="ck"||s==="kn"||s==="wr"||s==="mb"||s==="bt"||s==="mn"||s==="ll"||s==="wh"?n+=`<prosody rate="slow" volume="+9dB"><phoneme alphabet="ipa" ph="${a}">${l}</phoneme></prosody>`:n+=`<prosody volume="+9dB"><phoneme alphabet="ipa" ph="${a}">${l}</phoneme></prosody>`),r+=s.length,o=!0;break}}o||(n+=e[r],r++)}return`<speak><prosody volume="0dB">${n}</prosody></speak>`}speakWithPhonemes(r){return te(this,arguments,function*(e,n={}){if(!this.firestoreAvailable)return console.warn("Firestore TTS not available, falling back to Web Speech API with phonics"),this.fallbackToWebSpeech(e,n);try{const i=this.convertToPhonemeSSML(e),o=this.generateRequestId();console.log("Creating TTS request:",{requestId:o,ssmlText:i,voiceId:this.config.voiceId,engine:this.config.engine});const s=an(xt,"ttsRequests",o);yield iu(s,{ssmlText:i,voiceId:this.config.voiceId,engine:this.config.engine,userId:"anonymous",timestamp:new Date});const a=yield this.waitForTTSResult(o);if(a)console.log("Playing audio from Firestore TTS"),yield this.playBase64Audio(a);else return console.warn("No audio data received from Firestore TTS, falling back to Web Speech API"),this.fallbackToWebSpeech(e,n)}catch(i){console.error("Firestore TTS error details:",i);const o=i instanceof Error?i.message:String(i);return console.warn("Firestore TTS failed, falling back to Web Speech API with phonics:",o),this.fallbackToWebSpeech(e,n)}})}playBase64Audio(e){return te(this,null,function*(){try{const n=atob(e),r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);const i=new Blob([r],{type:"audio/mp3"}),o=URL.createObjectURL(i);this.currentAudio&&(this.currentAudio.pause(),this.currentAudio.currentTime=0),this.currentAudio=new Audio(o),this.currentAudio.play(),this.currentAudio.onended=()=>{URL.revokeObjectURL(o)}}catch(n){throw console.error("Error playing base64 audio:",n),n}})}fallbackToWebSpeech(e,n={}){return new Promise((r,i)=>{if(!("speechSynthesis"in window)){i(new Error("Speech synthesis not supported"));return}const o=new SpeechSynthesisUtterance(e);o.rate=n.rate||1,o.pitch=n.pitch||1,o.volume=n.volume||1,o.lang="en-US",o.onend=()=>r(),o.onerror=s=>i(s),speechSynthesis.speak(o)})}speakRegular(r){return te(this,arguments,function*(e,n={}){if(!this.firestoreAvailable)return console.warn("Firestore TTS not available, falling back to Web Speech API"),this.fallbackToWebSpeech(e,n);try{const i=this.generateRequestId();console.log("Creating regular TTS request:",{requestId:i,text:e,voiceId:this.config.voiceId,engine:this.config.engine});const o=an(xt,"ttsRequests",i);yield iu(o,{text:e,voiceId:this.config.voiceId,engine:this.config.engine,userId:"anonymous",timestamp:new Date});const s=yield this.waitForTTSResult(i);if(s)console.log("Playing regular audio from Firestore TTS"),yield this.playBase64Audio(s);else return console.warn("No audio data received from Firestore TTS, falling back to Web Speech API"),this.fallbackToWebSpeech(e,n)}catch(i){const o=i instanceof Error?i.message:String(i);return console.warn("Firestore TTS failed, falling back to Web Speech API:",o),this.fallbackToWebSpeech(e,n)}})}isPollyAvailable(){return this.firestoreAvailable}stop(){this.currentAudio&&(this.currentAudio.pause(),this.currentAudio.currentTime=0),"speechSynthesis"in window&&speechSynthesis.cancel()}updateConfig(e){this.config=B(B({},this.config),e)}}let Ca=null;try{Ca=new b6e}catch(t){console.warn("Failed to initialize Polly TTS service:",t)}const w6e={ck:"k",ch:"ch",sh:"sh",th:"th",ph:"f",ng:"ng",gh:"",ai:"ay",ay:"ay",ee:"ee",ea:"ee",ie:"ee",oa:"oh",ow:"oh",ou:"ow",ue:"oo",ew:"oo",oo:"oo",au:"aw",aw:"aw",oi:"oy",oy:"oy",ar:"ar",er:"ur",ir:"ur",or:"or",ur:"ur",are:"air",eer:"ear",ire:"ire",ore:"ore",ure:"ure",tion:"shun",sion:"zhun",ture:"chur",cious:"shus",tious:"shus",ough:"uff",augh:"aff",eigh:"ay",ight:"ite",c:"s",g:"j",y:"i",y_short:"i"};function S6e(t){let e=t.toLowerCase();return Object.entries(w6e).forEach(([n,r])=>{if(r){const i=new RegExp(`\\b${n}\\b`,"g");e=e.replace(i,r)}}),e}function Kv(){return"speechSynthesis"in window||Ca!==null&&Ca.isPollyAvailable()}function _d(t,e={}){return new Promise((n,r)=>{if(!Kv()){r(new Error("Text-to-speech is not available"));return}const i=new SpeechSynthesisUtterance(t);i.rate=e.rate||1,i.pitch=e.pitch||1,i.volume=e.volume||1,i.lang=e.lang||"en-US",e.voice&&(i.voice=e.voice),i.onend=()=>n(),i.onerror=o=>r(o),speechSynthesis.speak(i)})}function nm(t,e={}){const n=S6e(t);return _d(n,e)}function XV(n){return te(this,arguments,function*(t,e={}){if(!Ca)return console.warn("Polly TTS service not available, falling back to phonics TTS"),nm(t,e);try{yield Ca.speakWithPhonemes(t,{rate:e.rate,pitch:e.pitch,volume:e.volume})}catch(r){return console.error("Polly TTS error, falling back to phonics TTS:",r),nm(t,e)}})}function QV(n){return te(this,arguments,function*(t,e={}){if(!Ca)return console.warn("Polly TTS service not available, falling back to regular TTS"),_d(t,e);try{yield Ca.speakRegular(t,{rate:e.rate,pitch:e.pitch,volume:e.volume})}catch(r){return console.error("Polly TTS error, falling back to regular TTS:",r),_d(t,e)}})}function _6e(r){return te(this,arguments,function*(t,e=!1,n={}){if(e){if(Ca&&Ca.isPollyAvailable())try{yield Ca.speakWithPhonemes(t,n);return}catch(i){console.warn("Polly phonemes failed, falling back to Web Speech phonics:",i)}return nm(t,n)}else{if(Ca&&Ca.isPollyAvailable())try{yield Ca.speakRegular(t,n);return}catch(i){console.warn("Polly regular failed, falling back to Web Speech API:",i)}return _d(t,n)}})}function tte(t,e,n=!1){const r={rate:.8,pitch:1,volume:.8};n?nm(t,r).catch(console.error):_d(t,r).catch(console.error)}function E6e(t,e=!1){const n=t.replace(/<[^>]*>/g,""),r={rate:.7,pitch:1,volume:.9};e?nm(n,r).catch(console.error):_d(n,r).catch(console.error)}const C6e=({onClick:t,item:e,category:n,cracked:r,onWordClick:i,enableTextToSpeech:o=!1,usePhonicsMode:s=!1,useAmazonPolly:a=!1,textToSpeechMode:l,containerType:c="eggs"})=>{const[u,d]=A.useState(!1),[f,p]=A.useState(!1),[b]=A.useState(P()),[v,m]=A.useState(!1),g=()=>{switch(c){case"balloons":return{borderRadius:"50%",background:`linear-gradient(135deg, ${b}, ${w(b,-20)})`,boxShadow:"inset -2px -2px 4px rgba(0, 0, 0, 0.1), inset 2px 2px 4px rgba(255, 255, 255, 0.5)",border:"2px solid rgba(255, 255, 255, 0.4)"};case"presents":return{borderRadius:"8px",background:`linear-gradient(135deg, ${b}, ${w(b,-15)})`,boxShadow:"inset -2px -2px 4px rgba(0, 0, 0, 0.1), inset 2px 2px 4px rgba(255, 255, 255, 0.3)",border:"2px solid rgba(255, 255, 255, 0.3)"};case"amazon":return{borderRadius:"4px",background:"linear-gradient(135deg, #ffd89b, #d4a76a)",boxShadow:"inset -2px -2px 4px rgba(0, 0, 0, 0.1), inset 2px 2px 4px rgba(255, 255, 255, 0.3)",border:"2px solid rgba(139, 69, 19, 0.3)"};default:return{borderRadius:"50% 50% 50% 50% / 60% 60% 40% 40%",background:b,boxShadow:"inset -2px -2px 4px rgba(0, 0, 0, 0.1), inset 2px 2px 4px rgba(255, 255, 255, 0.3)",border:"2px solid rgba(255, 255, 255, 0.3)"}}},x=()=>{switch(c){case"balloons":return"/sounds/pop.mp3";case"presents":return"/sounds/unwrap.mp3";case"amazon":return"/sounds/cardboard.mp3";default:return"/sounds/crack.mp3"}},w=(T,_)=>{const E=T.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(E){const[,R,F,L]=E,N=Math.max(0,Math.min(100,parseInt(L)+_));return`hsl(${R}, ${F}%, ${N}%)`}return T},S=Ji({base:"45px",md:"55px",lg:"65px"}),D=Ji({base:"60px",md:"73px",lg:"86px"}),k=Ji({base:"xs",md:"sm",lg:"md"});A.useEffect(()=>{let T,_=null;if(r){const E=l||(o?"amazon-polly-phonics":"disabled");try{_=new Audio(x()),_.volume=.5,_.addEventListener("error",R=>{console.warn(`Sound file not found: ${x()}. Please add sound files to public/sounds/`)}),_.play().catch(R=>{console.warn("Could not play container sound:",R)})}catch(R){console.error("Error creating audio element:",R)}d(!0),p(!0),E!=="disabled"&&Kv()&&(T=setTimeout(()=>te(rt,null,function*(){const R={rate:.8,pitch:1,volume:.8};try{switch(E){case"amazon-polly-phonics":yield XV(e,R);break;case"amazon-polly-regular":yield QV(e,R);break;case"web-speech-phonics":yield nm(e,R);break;case"web-speech-regular":yield _d(e,R);break;default:a?s?yield XV(e,R):yield QV(e,R):s?yield nm(e,R):yield _d(e,R);break}}catch(F){console.error("TTS error:",F);try{yield _6e(e,s,R)}catch(L){console.error("Fallback TTS error:",L)}}}),800))}return()=>{T&&clearTimeout(T),_&&(_.pause(),_.currentTime=0)}},[r,o,s,a,e,l,c]);function P(){const T=Math.floor(Math.random()*360),_=Math.floor(Math.random()*30)+40,E=Math.floor(Math.random()*20)+70;return`hsl(${T}, ${_}%, ${E}%)`}const M=T=>{T.stopPropagation(),m(!0),i(e,n,T)};return h.jsxs(yt,{position:"relative",cursor:"pointer",onClick:r?void 0:t,width:S,height:D,display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none",transition:"all 0.3s ease",_hover:{transform:r?"none":"scale(1.05)",filter:r?"none":"brightness(1.1)"},children:[h.jsx(Gc,{children:!r&&h.jsxs(ml.div,{initial:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.3},style:oe(B({position:"absolute",width:"100%",height:"100%"},g()),{display:"flex",alignItems:"center",justifyContent:"center"}),children:[h.jsx(yt,{position:"absolute",top:"20%",left:"30%",width:"20%",height:"20%",borderRadius:c==="presents"||c==="amazon"?"4px":"50%",backgroundColor:"rgba(255, 255, 255, 0.4)",filter:"blur(2px)"}),c==="presents"&&h.jsxs(h.Fragment,{children:[h.jsx(yt,{position:"absolute",top:"0",left:"50%",width:"15%",height:"100%",backgroundColor:"rgba(255, 0, 0, 0.6)",transform:"translateX(-50%)"}),h.jsx(yt,{position:"absolute",top:"50%",left:"0",width:"100%",height:"15%",backgroundColor:"rgba(255, 0, 0, 0.6)",transform:"translateY(-50%)"})]}),c==="amazon"&&h.jsxs(h.Fragment,{children:[h.jsx(yt,{position:"absolute",top:"50%",left:"0",width:"100%",height:"10%",backgroundColor:"rgba(139, 69, 19, 0.4)",transform:"translateY(-50%)"}),h.jsx(yt,{position:"absolute",bottom:"15%",right:"15%",width:"20%",height:"15%",borderRadius:"50%",backgroundColor:"rgba(255, 255, 255, 0.8)",fontSize:"6px",display:"flex",alignItems:"center",justifyContent:"center",color:"orange",fontWeight:"bold",children:""})]}),c==="balloons"&&h.jsx(h.Fragment,{children:h.jsx(yt,{position:"absolute",bottom:"-5px",left:"50%",width:"2px",height:"15px",backgroundColor:"rgba(0, 0, 0, 0.3)",transform:"translateX(-50%)"})})]})}),h.jsx(Gc,{children:u&&h.jsx(ml.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.2},transition:{duration:.5},style:{position:"absolute",width:"100%",height:"100%",pointerEvents:"none",zIndex:2},children:h.jsxs("svg",{width:"100%",height:"100%",style:{position:"absolute",top:0,left:0},children:[h.jsx("path",{d:"M20,30 L25,45 L30,35 L35,50 L40,40",stroke:"#8B4513",strokeWidth:"1",fill:"none",opacity:"0.7"}),h.jsx("path",{d:"M50,25 L45,40 L55,35 L50,55",stroke:"#8B4513",strokeWidth:"1",fill:"none",opacity:"0.7"}),h.jsx("path",{d:"M15,45 L25,50 L20,60 L30,55",stroke:"#8B4513",strokeWidth:"1",fill:"none",opacity:"0.7"})]})})}),h.jsx(Gc,{children:r&&h.jsx(ml.div,{initial:{opacity:0,y:10,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.8},transition:{duration:.4,delay:.2},style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3},children:h.jsx(dt,{fontSize:k,fontWeight:"bold",color:"gray.800",textAlign:"center",cursor:"pointer",onClick:M,padding:"2px",borderRadius:"4px",backgroundColor:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",transition:"all 0.2s ease",_hover:{backgroundColor:"rgba(255, 255, 255, 1)",transform:"scale(1.05)",boxShadow:"0 3px 6px rgba(0, 0, 0, 0.15)"},opacity:v?.5:1,pointerEvents:v?"none":"auto",children:e})})})]})},A6e=({content:t,fontSize:e})=>typeof t=="string"&&t.includes("<")?(i=>{const o={bold:i.includes("<strong>")||i.includes("<b>"),italic:i.includes("<em>")||i.includes("<i>"),underline:i.includes("<u>")&&i.includes("</u>"),superscript:i.includes("<sup>")&&i.includes("</sup>"),subscript:i.includes("<sub>")&&i.includes("</sub>")},s=document.createElement("div");s.innerHTML=i;let a=s.textContent||s.innerText||i;if(o.superscript||o.subscript){let l="",c="",u="";if(o.superscript){const d=i.match(/^(.*?)<sup>(.*?)<\/sup>(.*)$/);d&&(l=d[1].replace(/<[^>]*>/g,""),c=d[2],u=d[3].replace(/<[^>]*>/g,""))}else if(o.subscript){const d=i.match(/^(.*?)<sub>(.*?)<\/sub>(.*)$/);d&&(l=d[1].replace(/<[^>]*>/g,""),c=d[2],u=d[3].replace(/<[^>]*>/g,""))}return h.jsxs(dt,{fontSize:e,color:"gray.800",fontWeight:o.bold?"bold":"medium",fontStyle:o.italic?"italic":"normal",textDecoration:o.underline?"underline":"none",textAlign:"center",px:2,py:.5,bg:"rgba(255,255,255,0.8)",borderRadius:"md",maxW:"90%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxShadow:"sm",fontFamily:"'Comic Neue', sans-serif",display:"inline-flex",alignItems:"baseline",children:[l,h.jsx(dt,{as:"span",fontSize:"0.7em",verticalAlign:o.superscript?"super":"sub",lineHeight:"1",children:c}),u]})}return h.jsx(dt,{fontSize:e,color:"gray.800",fontWeight:o.bold?"bold":"medium",fontStyle:o.italic?"italic":"normal",textDecoration:o.underline?"underline":"none",textAlign:"center",px:2,py:.5,bg:"rgba(255,255,255,0.8)",borderRadius:"md",maxW:"90%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxShadow:"sm",fontFamily:"'Comic Neue', sans-serif",children:a})})(t):h.jsx(dt,{fontSize:e,color:"gray.800",fontWeight:"medium",textAlign:"center",px:2,py:.5,bg:"rgba(255,255,255,0.8)",borderRadius:"md",maxW:"90%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxShadow:"sm",fontFamily:"'Comic Neue', sans-serif",children:t}),T6e=({category:t,items:e,onClick:n})=>{const r=Ji({base:"xs",md:"sm",lg:"md"}),i=Ji({base:"2xs",md:"xs",lg:"sm"}),o=Ji({base:"60px",md:"70px",lg:"80px",xl:"90px"});return h.jsxs($t,{spacing:1,align:"center",className:"basket","data-basket-id":t.name,position:"relative",children:[h.jsx(dt,{fontSize:r,fontWeight:"bold",color:"gray.700",textAlign:"center",mb:1,position:"absolute",top:"-22px",left:"50%",transform:"translateX(-50%)",whiteSpace:"nowrap",fontFamily:"'Comic Neue', sans-serif",maxWidth:"140px",overflow:"hidden",textOverflow:"ellipsis",children:t.name}),h.jsx(yt,{as:ml.div,whileHover:{scale:1.02},position:"relative",width:"100%",height:o,cursor:"pointer",onClick:n,sx:{position:"relative",borderRadius:"35% 35% 40% 40% / 30% 30% 70% 70%",background:"linear-gradient(180deg, #E3B778 0%, #D4A76A 100%)",overflow:"visible",transform:"perspective(1000px) rotateX(15deg)",transformOrigin:"bottom",boxShadow:`
            inset 0 5px 10px rgba(255,255,255,0.3),
            inset 0 -10px 20px rgba(139, 69, 19, 0.3),
            0 5px 15px rgba(0,0,0,0.1)
          `,transition:"all 0.3s ease","&::before":{content:'""',position:"absolute",top:"0",left:"0",right:"0",bottom:"0",background:`
              repeating-linear-gradient(
                45deg,
                transparent,
                transparent 5px,
                rgba(139, 69, 19, 0.1) 5px,
                rgba(139, 69, 19, 0.1) 10px
              )
            `,borderRadius:"inherit",opacity:.5}},children:h.jsxs($t,{spacing:.5,align:"center",justify:"center",height:"100%",pt:1.5,pb:.5,px:1.5,maxHeight:"100%",overflow:"hidden",children:[e.slice(0,3).map((s,a)=>h.jsx(A6e,{content:s,fontSize:i},a)),e.length>3&&h.jsxs(dt,{fontSize:"2xs",color:"gray.600",fontStyle:"italic",fontFamily:"'Comic Neue', sans-serif",children:["+",e.length-3," more"]})]})})]})},M6e=({content:t,fontSize:e,noPadding:n=!1})=>typeof t=="string"&&t.includes("<")?(o=>{const s={bold:o.includes("<strong>")||o.includes("<b>"),italic:o.includes("<em>")||o.includes("<i>"),underline:o.includes("<u>")&&o.includes("</u>"),superscript:o.includes("<sup>")&&o.includes("</sup>"),subscript:o.includes("<sub>")&&o.includes("</sub>")},a=document.createElement("div");a.innerHTML=o;let l=a.textContent||a.innerText||o;if(s.superscript||s.subscript){let c="",u="",d="";if(s.superscript){const f=o.match(/^(.*?)<sup>(.*?)<\/sup>(.*)$/);f&&(c=f[1].replace(/<[^>]*>/g,""),u=f[2],d=f[3].replace(/<[^>]*>/g,""))}else if(s.subscript){const f=o.match(/^(.*?)<sub>(.*?)<\/sub>(.*)$/);f&&(c=f[1].replace(/<[^>]*>/g,""),u=f[2],d=f[3].replace(/<[^>]*>/g,""))}return h.jsxs(dt,{fontSize:e,color:"gray.700",letterSpacing:"0.5px",fontWeight:s.bold?"bold":"medium",fontStyle:s.italic?"italic":"normal",textDecoration:s.underline?"underline":"none",px:n?0:2,py:n?0:1,borderRadius:"md",fontFamily:"'Comic Neue', sans-serif",display:"inline-flex",alignItems:"baseline",children:[c,h.jsx(dt,{as:"span",fontSize:"0.7em",verticalAlign:s.superscript?"super":"sub",lineHeight:"1",children:u}),d]})}return h.jsx(dt,{fontSize:e,color:"gray.700",letterSpacing:"0.5px",fontWeight:s.bold?"bold":"medium",fontStyle:s.italic?"italic":"normal",textDecoration:s.underline?"underline":"none",px:n?0:2,py:n?0:1,borderRadius:"md",fontFamily:"'Comic Neue', sans-serif",children:l})})(t):h.jsx(dt,{fontSize:e,color:"gray.700",letterSpacing:"0.5px",fontWeight:"medium",px:n?0:2,py:n?0:1,borderRadius:"md",fontFamily:"'Comic Neue', sans-serif",children:t}),P6e=({gameState:t,gameAreaRef:e,onMouseMove:n,onGameAreaClick:r,onEggClick:i,onWordClick:o,enableTextToSpeech:s=!1,usePhonicsMode:a=!1,useAmazonPolly:l=!1,textToSpeechMode:c,containerType:u="eggs"})=>{const d=Ji({base:1,md:2,lg:3}),f=Ji({base:"calc(100vh - 140px)",md:"calc(100vh - 160px)",lg:"calc(100vh - 180px)"}),p=Ji({base:"column",md:"row"}),b=Ji({base:"35px",md:"45px",lg:"55px"}),v=Ji({base:"90px",md:"110px",lg:"130px",xl:"150px"}),m=Ji({base:1,md:2,lg:3});return h.jsx(yt,{width:"100vw",maxWidth:"100%",position:"relative",left:"50%",transform:"translateX(-50%)",bg:"blue.50",children:h.jsx(yt,{width:"100%",maxW:"1600px",mx:"auto",px:d,py:2,children:h.jsxs(yt,{ref:e,position:"relative",width:"100%",height:f,bg:"blue.100",borderRadius:"lg",overflow:"hidden",onMouseMove:n,onClick:r,cursor:t.isWordSelected?"pointer":"default",boxShadow:"lg",minHeight:"400px",children:[h.jsx(yt,{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",opacity:.1,backgroundImage:"radial-gradient(circle at 1px 1px, gray 1px, transparent 0)",backgroundSize:"40px 40px"}),t.eggs.map(g=>h.jsx(yt,{position:"absolute",left:`${g.position.x}%`,top:`${g.position.y}%`,transform:"translate(-50%, -50%)",width:b,height:b,zIndex:g.cracked?2:1,children:h.jsx(C6e,{onClick:()=>i(g),item:g.word.text,category:g.word.category,cracked:g.cracked,onWordClick:(x,w,S)=>o({text:x,category:w},S),enableTextToSpeech:s,usePhonicsMode:a,useAmazonPolly:l,textToSpeechMode:c,containerType:u})},g.id)),h.jsx(gc,{position:"absolute",bottom:"4px",left:"0",right:"0",direction:p,justify:"center",align:"center",px:m,gap:m,flexWrap:"wrap",maxHeight:"28%",children:t.baskets.map(g=>h.jsx(yt,{width:v,minWidth:"80px",mb:{base:1,md:0},flex:{base:"1",md:"0 1 auto"},className:`basket basket-${g.id}`,"data-basket-id":g.name,children:h.jsx(T6e,{category:{name:g.name},items:g.items.map(x=>x.text),onClick:()=>{}})},g.id))}),t.isWordSelected&&t.selectedWord&&h.jsx(yt,{position:"absolute",left:`${t.ghostPosition.x}px`,top:`${t.ghostPosition.y}px`,transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:1e3,bg:"white",borderRadius:"md",boxShadow:"lg",p:2,children:h.jsx(M6e,{content:t.selectedWord.text,fontSize:{base:"sm",md:"md"},noPadding:!0})})]})})})},D6e=({gameState:t,onResetGame:e,onCloseGame:n})=>h.jsxs(gc,{position:"absolute",top:2,right:2,direction:{base:"column",md:"row"},justify:"flex-end",align:"center",gap:2,bg:"white",p:2,borderRadius:"lg",boxShadow:"md",fontFamily:"'Comic Neue', sans-serif",width:"auto",zIndex:10,fontSize:"sm",children:[h.jsxs(Ln,{spacing:3,children:[" ",h.jsxs(dt,{fontSize:{base:"sm",md:"md"},fontWeight:"bold",color:"blue.600",children:["Score: ",t.score]})]}),t.isGameComplete&&h.jsxs(Ln,{spacing:2,ml:2,children:[" ",h.jsx(hn,{colorScheme:"blue",onClick:e,size:"sm",fontFamily:"'Comic Neue', sans-serif",children:"Play Again"}),h.jsx(hn,{colorScheme:"gray",onClick:n,size:"sm",fontFamily:"'Comic Neue', sans-serif",children:"Close Game"})]})]}),R6e=({gameState:t,onClose:e})=>{const n=Ji({base:"sm",md:"md",lg:"xl"}),r=Fr(),{isTeacher:i,isStudent:o}=Pr(),s=()=>{e(),r(i?"/teacher":o?"/student":"/")};return h.jsxs(Kc,{isOpen:t.showHighScoreDisplayModal,onClose:s,size:n,children:[h.jsx(Qc,{}),h.jsxs(Yc,{fontFamily:"'Comic Neue', sans-serif",children:[h.jsx(Xc,{textAlign:"center",children:t.isHighScore?" New High Score!":" Game Complete!"}),h.jsx(Jc,{}),h.jsx(Zc,{children:h.jsxs($t,{spacing:6,children:[h.jsxs($t,{spacing:2,children:[h.jsxs(dt,{fontSize:"xl",fontWeight:"bold",color:"blue.600",children:["Final Score: ",t.score]}),h.jsx(dt,{fontSize:"md",color:"gray.600",children:"Great job sorting the categories!"})]}),t.highScores.length>0&&h.jsxs(yt,{w:"full",children:[h.jsx(Br,{size:"md",mb:4,textAlign:"center",color:"purple.600",children:" High Scores"}),h.jsx($t,{spacing:2,w:"full",children:t.highScores.slice(0,10).map((a,l)=>h.jsxs(Ln,{w:"full",justify:"space-between",p:3,bg:l===0?"yellow.50":"gray.50",borderRadius:"md",border:l===0?"2px solid gold":"1px solid gray.200",children:[h.jsxs(Ln,{children:[h.jsxs(dt,{fontWeight:"bold",color:"purple.600",children:["#",l+1]}),h.jsx(dt,{fontWeight:"medium",children:a.playerName})]}),h.jsxs(po,{colorScheme:l===0?"yellow":"blue",fontSize:"sm",px:2,py:1,children:[a.score," pts"]})]},a.id))})]})]})}),h.jsx(lv,{children:h.jsx(hn,{colorScheme:"blue",onClick:s,fontFamily:"'Comic Neue', sans-serif",children:"Close"})})]})]})},Al=xc({d:"M0,12a1.5,1.5,0,0,0,1.5,1.5h8.75a.25.25,0,0,1,.25.25V22.5a1.5,1.5,0,0,0,3,0V13.75a.25.25,0,0,1,.25-.25H22.5a1.5,1.5,0,0,0,0-3H13.75a.25.25,0,0,1-.25-.25V1.5a1.5,1.5,0,0,0-3,0v8.75a.25.25,0,0,1-.25.25H1.5A1.5,1.5,0,0,0,0,12Z",displayName:"AddIcon"}),Px=xc({displayName:"ViewIcon",path:h.jsxs("g",{fill:"currentColor",children:[h.jsx("path",{d:"M23.432,10.524C20.787,7.614,16.4,4.538,12,4.6,7.6,4.537,3.213,7.615.568,10.524a2.211,2.211,0,0,0,0,2.948C3.182,16.351,7.507,19.4,11.839,19.4h.308c4.347,0,8.671-3.049,11.288-5.929A2.21,2.21,0,0,0,23.432,10.524ZM7.4,12A4.6,4.6,0,1,1,12,16.6,4.6,4.6,0,0,1,7.4,12Z"}),h.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),Dx=xc({displayName:"ViewOffIcon",path:h.jsxs("g",{fill:"currentColor",children:[h.jsx("path",{d:"M23.2,10.549a20.954,20.954,0,0,0-4.3-3.6l4-3.995a1,1,0,1,0-1.414-1.414l-.018.018a.737.737,0,0,1-.173.291l-19.5,19.5c-.008.007-.018.009-.026.017a1,1,0,0,0,1.631,1.088l4.146-4.146a11.26,11.26,0,0,0,4.31.939h.3c4.256,0,8.489-2.984,11.051-5.8A2.171,2.171,0,0,0,23.2,10.549ZM16.313,13.27a4.581,4.581,0,0,1-3,3.028,4.3,4.3,0,0,1-3.1-.19.253.253,0,0,1-.068-.407l5.56-5.559a.252.252,0,0,1,.407.067A4.3,4.3,0,0,1,16.313,13.27Z"}),h.jsx("path",{d:"M7.615,13.4a.244.244,0,0,0,.061-.24A4.315,4.315,0,0,1,7.5,12,4.5,4.5,0,0,1,12,7.5a4.276,4.276,0,0,1,1.16.173.244.244,0,0,0,.24-.062l1.941-1.942a.254.254,0,0,0-.1-.421A10.413,10.413,0,0,0,12,4.75C7.7,4.692,3.4,7.7.813,10.549a2.15,2.15,0,0,0-.007,2.9,21.209,21.209,0,0,0,3.438,3.03.256.256,0,0,0,.326-.029Z"})]})}),Tl=xc({displayName:"DeleteIcon",path:h.jsx("g",{fill:"currentColor",children:h.jsx("path",{d:"M19.452 7.5H4.547a.5.5 0 00-.5.545l1.287 14.136A2 2 0 007.326 24h9.347a2 2 0 001.992-1.819L19.95 8.045a.5.5 0 00-.129-.382.5.5 0 00-.369-.163zm-9.2 13a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zm5 0a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zM22 4h-4.75a.25.25 0 01-.25-.25V2.5A2.5 2.5 0 0014.5 0h-5A2.5 2.5 0 007 2.5v1.25a.25.25 0 01-.25.25H2a1 1 0 000 2h20a1 1 0 000-2zM9 3.75V2.5a.5.5 0 01.5-.5h5a.5.5 0 01.5.5v1.25a.25.25 0 01-.25.25h-5.5A.25.25 0 019 3.75z"})})}),nte=xc({displayName:"RepeatIcon",path:h.jsxs("g",{fill:"currentColor",children:[h.jsx("path",{d:"M10.319,4.936a7.239,7.239,0,0,1,7.1,2.252,1.25,1.25,0,1,0,1.872-1.657A9.737,9.737,0,0,0,9.743,2.5,10.269,10.269,0,0,0,2.378,9.61a.249.249,0,0,1-.271.178l-1.033-.13A.491.491,0,0,0,.6,9.877a.5.5,0,0,0-.019.526l2.476,4.342a.5.5,0,0,0,.373.248.43.43,0,0,0,.062,0,.5.5,0,0,0,.359-.152l3.477-3.593a.5.5,0,0,0-.3-.844L5.15,10.172a.25.25,0,0,1-.2-.333A7.7,7.7,0,0,1,10.319,4.936Z"}),h.jsx("path",{d:"M23.406,14.1a.5.5,0,0,0,.015-.526l-2.5-4.329A.5.5,0,0,0,20.546,9a.489.489,0,0,0-.421.151l-3.456,3.614a.5.5,0,0,0,.3.842l1.848.221a.249.249,0,0,1,.183.117.253.253,0,0,1,.023.216,7.688,7.688,0,0,1-5.369,4.9,7.243,7.243,0,0,1-7.1-2.253,1.25,1.25,0,1,0-1.872,1.656,9.74,9.74,0,0,0,9.549,3.03,10.261,10.261,0,0,0,7.369-7.12.251.251,0,0,1,.27-.179l1.058.127a.422.422,0,0,0,.06,0A.5.5,0,0,0,23.406,14.1Z"})]})}),k6e=xc({displayName:"EditIcon",path:h.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",children:[h.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),h.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),I6e=xc({d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z",displayName:"ChevronRightIcon"}),Yv=xc({displayName:"ChevronDownIcon",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}),jb=xc({d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z",displayName:"ChevronUpIcon"}),ZV=xc({d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z",displayName:"ArrowBackIcon"}),F6e=xc({d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"}),kp=50,Ip=3,Rx=10,kx=2;function O6e(){this.__data__=[],this.size=0}var N6e=O6e;function L6e(t,e){return t===e||t!==t&&e!==e}var rte=L6e,B6e=rte;function j6e(t,e){for(var n=t.length;n--;)if(B6e(t[n][0],e))return n;return-1}var t2=j6e,U6e=t2,z6e=Array.prototype,V6e=z6e.splice;function W6e(t){var e=this.__data__,n=U6e(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():V6e.call(e,n,1),--this.size,!0}var $6e=W6e,H6e=t2;function G6e(t){var e=this.__data__,n=H6e(e,t);return n<0?void 0:e[n][1]}var q6e=G6e,K6e=t2;function Y6e(t){return K6e(this.__data__,t)>-1}var X6e=Y6e,Q6e=t2;function Z6e(t,e){var n=this.__data__,r=Q6e(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var J6e=Z6e,eze=N6e,tze=$6e,nze=q6e,rze=X6e,ize=J6e;function v0(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}v0.prototype.clear=eze;v0.prototype.delete=tze;v0.prototype.get=nze;v0.prototype.has=rze;v0.prototype.set=ize;var n2=v0,oze=n2;function sze(){this.__data__=new oze,this.size=0}var aze=sze;function lze(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var cze=lze;function uze(t){return this.__data__.get(t)}var dze=uze;function fze(t){return this.__data__.has(t)}var hze=fze,pze=typeof $i=="object"&&$i&&$i.Object===Object&&$i,ite=pze,mze=ite,gze=typeof self=="object"&&self&&self.Object===Object&&self,vze=mze||gze||Function("return this")(),pu=vze,yze=pu,xze=yze.Symbol,HL=xze,JV=HL,ote=Object.prototype,bze=ote.hasOwnProperty,wze=ote.toString,py=JV?JV.toStringTag:void 0;function Sze(t){var e=bze.call(t,py),n=t[py];try{t[py]=void 0;var r=!0}catch(o){}var i=wze.call(t);return r&&(e?t[py]=n:delete t[py]),i}var _ze=Sze,Eze=Object.prototype,Cze=Eze.toString;function Aze(t){return Cze.call(t)}var Tze=Aze,e9=HL,Mze=_ze,Pze=Tze,Dze="[object Null]",Rze="[object Undefined]",t9=e9?e9.toStringTag:void 0;function kze(t){return t==null?t===void 0?Rze:Dze:t9&&t9 in Object(t)?Mze(t):Pze(t)}var Yw=kze;function Ize(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Xw=Ize,Fze=Yw,Oze=Xw,Nze="[object AsyncFunction]",Lze="[object Function]",Bze="[object GeneratorFunction]",jze="[object Proxy]";function Uze(t){if(!Oze(t))return!1;var e=Fze(t);return e==Lze||e==Bze||e==Nze||e==jze}var ste=Uze,zze=pu,Vze=zze["__core-js_shared__"],Wze=Vze,pD=Wze,n9=function(){var t=/[^.]+$/.exec(pD&&pD.keys&&pD.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function $ze(t){return!!n9&&n9 in t}var Hze=$ze,Gze=Function.prototype,qze=Gze.toString;function Kze(t){if(t!=null){try{return qze.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var ate=Kze,Yze=ste,Xze=Hze,Qze=Xw,Zze=ate,Jze=/[\\^$.*+?()[\]{}|]/g,e8e=/^\[object .+?Constructor\]$/,t8e=Function.prototype,n8e=Object.prototype,r8e=t8e.toString,i8e=n8e.hasOwnProperty,o8e=RegExp("^"+r8e.call(i8e).replace(Jze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function s8e(t){if(!Qze(t)||Xze(t))return!1;var e=Yze(t)?o8e:e8e;return e.test(Zze(t))}var a8e=s8e;function l8e(t,e){return t==null?void 0:t[e]}var c8e=l8e,u8e=a8e,d8e=c8e;function f8e(t,e){var n=d8e(t,e);return u8e(n)?n:void 0}var y0=f8e,h8e=y0,p8e=pu,m8e=h8e(p8e,"Map"),GL=m8e,g8e=y0,v8e=g8e(Object,"create"),r2=v8e,r9=r2;function y8e(){this.__data__=r9?r9(null):{},this.size=0}var x8e=y8e;function b8e(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var w8e=b8e,S8e=r2,_8e="__lodash_hash_undefined__",E8e=Object.prototype,C8e=E8e.hasOwnProperty;function A8e(t){var e=this.__data__;if(S8e){var n=e[t];return n===_8e?void 0:n}return C8e.call(e,t)?e[t]:void 0}var T8e=A8e,M8e=r2,P8e=Object.prototype,D8e=P8e.hasOwnProperty;function R8e(t){var e=this.__data__;return M8e?e[t]!==void 0:D8e.call(e,t)}var k8e=R8e,I8e=r2,F8e="__lodash_hash_undefined__";function O8e(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=I8e&&e===void 0?F8e:e,this}var N8e=O8e,L8e=x8e,B8e=w8e,j8e=T8e,U8e=k8e,z8e=N8e;function x0(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}x0.prototype.clear=L8e;x0.prototype.delete=B8e;x0.prototype.get=j8e;x0.prototype.has=U8e;x0.prototype.set=z8e;var V8e=x0,i9=V8e,W8e=n2,$8e=GL;function H8e(){this.size=0,this.__data__={hash:new i9,map:new($8e||W8e),string:new i9}}var G8e=H8e;function q8e(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var K8e=q8e,Y8e=K8e;function X8e(t,e){var n=t.__data__;return Y8e(e)?n[typeof e=="string"?"string":"hash"]:n.map}var i2=X8e,Q8e=i2;function Z8e(t){var e=Q8e(this,t).delete(t);return this.size-=e?1:0,e}var J8e=Z8e,eVe=i2;function tVe(t){return eVe(this,t).get(t)}var nVe=tVe,rVe=i2;function iVe(t){return rVe(this,t).has(t)}var oVe=iVe,sVe=i2;function aVe(t,e){var n=sVe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var lVe=aVe,cVe=G8e,uVe=J8e,dVe=nVe,fVe=oVe,hVe=lVe;function b0(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}b0.prototype.clear=cVe;b0.prototype.delete=uVe;b0.prototype.get=dVe;b0.prototype.has=fVe;b0.prototype.set=hVe;var lte=b0,pVe=n2,mVe=GL,gVe=lte,vVe=200;function yVe(t,e){var n=this.__data__;if(n instanceof pVe){var r=n.__data__;if(!mVe||r.length<vVe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new gVe(r)}return n.set(t,e),this.size=n.size,this}var xVe=yVe,bVe=n2,wVe=aze,SVe=cze,_Ve=dze,EVe=hze,CVe=xVe;function w0(t){var e=this.__data__=new bVe(t);this.size=e.size}w0.prototype.clear=wVe;w0.prototype.delete=SVe;w0.prototype.get=_Ve;w0.prototype.has=EVe;w0.prototype.set=CVe;var AVe=w0,TVe="__lodash_hash_undefined__";function MVe(t){return this.__data__.set(t,TVe),this}var PVe=MVe;function DVe(t){return this.__data__.has(t)}var RVe=DVe,kVe=lte,IVe=PVe,FVe=RVe;function JC(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new kVe;++e<n;)this.add(t[e])}JC.prototype.add=JC.prototype.push=IVe;JC.prototype.has=FVe;var OVe=JC;function NVe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var LVe=NVe;function BVe(t,e){return t.has(e)}var jVe=BVe,UVe=OVe,zVe=LVe,VVe=jVe,WVe=1,$Ve=2;function HVe(t,e,n,r,i,o){var s=n&WVe,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(t),u=o.get(e);if(c&&u)return c==e&&u==t;var d=-1,f=!0,p=n&$Ve?new UVe:void 0;for(o.set(t,e),o.set(e,t);++d<a;){var b=t[d],v=e[d];if(r)var m=s?r(v,b,d,e,t,o):r(b,v,d,t,e,o);if(m!==void 0){if(m)continue;f=!1;break}if(p){if(!zVe(e,function(g,x){if(!VVe(p,x)&&(b===g||i(b,g,n,r,o)))return p.push(x)})){f=!1;break}}else if(!(b===v||i(b,v,n,r,o))){f=!1;break}}return o.delete(t),o.delete(e),f}var cte=HVe,GVe=pu,qVe=GVe.Uint8Array,KVe=qVe;function YVe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var XVe=YVe;function QVe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var ZVe=QVe,o9=HL,s9=KVe,JVe=rte,e9e=cte,t9e=XVe,n9e=ZVe,r9e=1,i9e=2,o9e="[object Boolean]",s9e="[object Date]",a9e="[object Error]",l9e="[object Map]",c9e="[object Number]",u9e="[object RegExp]",d9e="[object Set]",f9e="[object String]",h9e="[object Symbol]",p9e="[object ArrayBuffer]",m9e="[object DataView]",a9=o9?o9.prototype:void 0,mD=a9?a9.valueOf:void 0;function g9e(t,e,n,r,i,o,s){switch(n){case m9e:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case p9e:return!(t.byteLength!=e.byteLength||!o(new s9(t),new s9(e)));case o9e:case s9e:case c9e:return JVe(+t,+e);case a9e:return t.name==e.name&&t.message==e.message;case u9e:case f9e:return t==e+"";case l9e:var a=t9e;case d9e:var l=r&r9e;if(a||(a=n9e),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;r|=i9e,s.set(t,e);var u=e9e(a(t),a(e),r,i,o,s);return s.delete(t),u;case h9e:if(mD)return mD.call(t)==mD.call(e)}return!1}var v9e=g9e;function y9e(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var x9e=y9e,b9e=Array.isArray,qL=b9e,w9e=x9e,S9e=qL;function _9e(t,e,n){var r=e(t);return S9e(t)?r:w9e(r,n(t))}var E9e=_9e;function C9e(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}var A9e=C9e;function T9e(){return[]}var M9e=T9e,P9e=A9e,D9e=M9e,R9e=Object.prototype,k9e=R9e.propertyIsEnumerable,l9=Object.getOwnPropertySymbols,I9e=l9?function(t){return t==null?[]:(t=Object(t),P9e(l9(t),function(e){return k9e.call(t,e)}))}:D9e,F9e=I9e;function O9e(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var N9e=O9e;function L9e(t){return t!=null&&typeof t=="object"}var Qw=L9e,B9e=Yw,j9e=Qw,U9e="[object Arguments]";function z9e(t){return j9e(t)&&B9e(t)==U9e}var V9e=z9e,c9=V9e,W9e=Qw,ute=Object.prototype,$9e=ute.hasOwnProperty,H9e=ute.propertyIsEnumerable,G9e=c9(function(){return arguments}())?c9:function(t){return W9e(t)&&$9e.call(t,"callee")&&!H9e.call(t,"callee")},q9e=G9e,eA={exports:{}};function K9e(){return!1}var Y9e=K9e;eA.exports;(function(t,e){var n=pu,r=Y9e,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,s=o&&o.exports===i,a=s?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;t.exports=c})(eA,eA.exports);var dte=eA.exports,X9e=9007199254740991,Q9e=/^(?:0|[1-9]\d*)$/;function Z9e(t,e){var n=typeof t;return e=e==null?X9e:e,!!e&&(n=="number"||n!="symbol"&&Q9e.test(t))&&t>-1&&t%1==0&&t<e}var J9e=Z9e,eWe=9007199254740991;function tWe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=eWe}var fte=tWe,nWe=Yw,rWe=fte,iWe=Qw,oWe="[object Arguments]",sWe="[object Array]",aWe="[object Boolean]",lWe="[object Date]",cWe="[object Error]",uWe="[object Function]",dWe="[object Map]",fWe="[object Number]",hWe="[object Object]",pWe="[object RegExp]",mWe="[object Set]",gWe="[object String]",vWe="[object WeakMap]",yWe="[object ArrayBuffer]",xWe="[object DataView]",bWe="[object Float32Array]",wWe="[object Float64Array]",SWe="[object Int8Array]",_We="[object Int16Array]",EWe="[object Int32Array]",CWe="[object Uint8Array]",AWe="[object Uint8ClampedArray]",TWe="[object Uint16Array]",MWe="[object Uint32Array]",xi={};xi[bWe]=xi[wWe]=xi[SWe]=xi[_We]=xi[EWe]=xi[CWe]=xi[AWe]=xi[TWe]=xi[MWe]=!0;xi[oWe]=xi[sWe]=xi[yWe]=xi[aWe]=xi[xWe]=xi[lWe]=xi[cWe]=xi[uWe]=xi[dWe]=xi[fWe]=xi[hWe]=xi[pWe]=xi[mWe]=xi[gWe]=xi[vWe]=!1;function PWe(t){return iWe(t)&&rWe(t.length)&&!!xi[nWe(t)]}var DWe=PWe;function RWe(t){return function(e){return t(e)}}var kWe=RWe,tA={exports:{}};tA.exports;(function(t,e){var n=ite,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,s=o&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch(c){}}();t.exports=a})(tA,tA.exports);var IWe=tA.exports,FWe=DWe,OWe=kWe,u9=IWe,d9=u9&&u9.isTypedArray,NWe=d9?OWe(d9):FWe,hte=NWe,LWe=N9e,BWe=q9e,jWe=qL,UWe=dte,zWe=J9e,VWe=hte,WWe=Object.prototype,$We=WWe.hasOwnProperty;function HWe(t,e){var n=jWe(t),r=!n&&BWe(t),i=!n&&!r&&UWe(t),o=!n&&!r&&!i&&VWe(t),s=n||r||i||o,a=s?LWe(t.length,String):[],l=a.length;for(var c in t)(e||$We.call(t,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||zWe(c,l)))&&a.push(c);return a}var GWe=HWe,qWe=Object.prototype;function KWe(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||qWe;return t===n}var YWe=KWe;function XWe(t,e){return function(n){return t(e(n))}}var QWe=XWe,ZWe=QWe,JWe=ZWe(Object.keys,Object),e$e=JWe,t$e=YWe,n$e=e$e,r$e=Object.prototype,i$e=r$e.hasOwnProperty;function o$e(t){if(!t$e(t))return n$e(t);var e=[];for(var n in Object(t))i$e.call(t,n)&&n!="constructor"&&e.push(n);return e}var s$e=o$e,a$e=ste,l$e=fte;function c$e(t){return t!=null&&l$e(t.length)&&!a$e(t)}var u$e=c$e,d$e=GWe,f$e=s$e,h$e=u$e;function p$e(t){return h$e(t)?d$e(t):f$e(t)}var m$e=p$e,g$e=E9e,v$e=F9e,y$e=m$e;function x$e(t){return g$e(t,y$e,v$e)}var b$e=x$e,f9=b$e,w$e=1,S$e=Object.prototype,_$e=S$e.hasOwnProperty;function E$e(t,e,n,r,i,o){var s=n&w$e,a=f9(t),l=a.length,c=f9(e),u=c.length;if(l!=u&&!s)return!1;for(var d=l;d--;){var f=a[d];if(!(s?f in e:_$e.call(e,f)))return!1}var p=o.get(t),b=o.get(e);if(p&&b)return p==e&&b==t;var v=!0;o.set(t,e),o.set(e,t);for(var m=s;++d<l;){f=a[d];var g=t[f],x=e[f];if(r)var w=s?r(x,g,f,e,t,o):r(g,x,f,t,e,o);if(!(w===void 0?g===x||i(g,x,n,r,o):w)){v=!1;break}m||(m=f=="constructor")}if(v&&!m){var S=t.constructor,D=e.constructor;S!=D&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof D=="function"&&D instanceof D)&&(v=!1)}return o.delete(t),o.delete(e),v}var C$e=E$e,A$e=y0,T$e=pu,M$e=A$e(T$e,"DataView"),P$e=M$e,D$e=y0,R$e=pu,k$e=D$e(R$e,"Promise"),I$e=k$e,F$e=y0,O$e=pu,N$e=F$e(O$e,"Set"),L$e=N$e,B$e=y0,j$e=pu,U$e=B$e(j$e,"WeakMap"),z$e=U$e,UI=P$e,zI=GL,VI=I$e,WI=L$e,$I=z$e,pte=Yw,S0=ate,h9="[object Map]",V$e="[object Object]",p9="[object Promise]",m9="[object Set]",g9="[object WeakMap]",v9="[object DataView]",W$e=S0(UI),$$e=S0(zI),H$e=S0(VI),G$e=S0(WI),q$e=S0($I),Qh=pte;(UI&&Qh(new UI(new ArrayBuffer(1)))!=v9||zI&&Qh(new zI)!=h9||VI&&Qh(VI.resolve())!=p9||WI&&Qh(new WI)!=m9||$I&&Qh(new $I)!=g9)&&(Qh=function(t){var e=pte(t),n=e==V$e?t.constructor:void 0,r=n?S0(n):"";if(r)switch(r){case W$e:return v9;case $$e:return h9;case H$e:return p9;case G$e:return m9;case q$e:return g9}return e});var K$e=Qh,gD=AVe,Y$e=cte,X$e=v9e,Q$e=C$e,y9=K$e,x9=qL,b9=dte,Z$e=hte,J$e=1,w9="[object Arguments]",S9="[object Array]",GS="[object Object]",e7e=Object.prototype,_9=e7e.hasOwnProperty;function t7e(t,e,n,r,i,o){var s=x9(t),a=x9(e),l=s?S9:y9(t),c=a?S9:y9(e);l=l==w9?GS:l,c=c==w9?GS:c;var u=l==GS,d=c==GS,f=l==c;if(f&&b9(t)){if(!b9(e))return!1;s=!0,u=!1}if(f&&!u)return o||(o=new gD),s||Z$e(t)?Y$e(t,e,n,r,i,o):X$e(t,e,l,n,r,i,o);if(!(n&J$e)){var p=u&&_9.call(t,"__wrapped__"),b=d&&_9.call(e,"__wrapped__");if(p||b){var v=p?t.value():t,m=b?e.value():e;return o||(o=new gD),i(v,m,n,r,o)}}return f?(o||(o=new gD),Q$e(t,e,n,r,i,o)):!1}var n7e=t7e,r7e=n7e,E9=Qw;function mte(t,e,n,r,i){return t===e?!0:t==null||e==null||!E9(t)&&!E9(e)?t!==t&&e!==e:r7e(t,e,n,r,mte,i)}var i7e=mte,o7e=i7e;function s7e(t,e){return o7e(t,e)}var gte=s7e;const vD=Md(gte);var vte={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(t,e){(function(r,i){t.exports=i()})(typeof self!="undefined"?self:$i,function(){return function(n){var r={};function i(o){if(r[o])return r[o].exports;var s=r[o]={i:o,l:!1,exports:{}};return n[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=n,i.c=r,i.d=function(o,s,a){i.o(o,s)||Object.defineProperty(o,s,{configurable:!1,enumerable:!0,get:a})},i.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(s,"a",s),s},i.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},i.p="",i(i.s=109)}([function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(17),s=i(18),a=i(19),l=i(45),c=i(46),u=i(47),d=i(48),f=i(49),p=i(12),b=i(32),v=i(33),m=i(31),g=i(1),x={Scope:g.Scope,create:g.create,find:g.find,query:g.query,register:g.register,Container:o.default,Format:s.default,Leaf:a.default,Embed:d.default,Scroll:l.default,Block:u.default,Inline:c.default,Text:f.default,Attributor:{Attribute:p.default,Class:b.default,Style:v.default,Store:m.default}};r.default=x},function(n,r,i){var o=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,x){g.__proto__=x}||function(g,x){for(var w in x)x.hasOwnProperty(w)&&(g[w]=x[w])};return function(g,x){m(g,x);function w(){this.constructor=g}g.prototype=x===null?Object.create(x):(w.prototype=x.prototype,new w)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=function(m){o(g,m);function g(x){var w=this;return x="[Parchment] "+x,w=m.call(this,x)||this,w.message=x,w.name=w.constructor.name,w}return g}(Error);r.ParchmentError=s;var a={},l={},c={},u={};r.DATA_KEY="__blot";var d;(function(m){m[m.TYPE=3]="TYPE",m[m.LEVEL=12]="LEVEL",m[m.ATTRIBUTE=13]="ATTRIBUTE",m[m.BLOT=14]="BLOT",m[m.INLINE=7]="INLINE",m[m.BLOCK=11]="BLOCK",m[m.BLOCK_BLOT=10]="BLOCK_BLOT",m[m.INLINE_BLOT=6]="INLINE_BLOT",m[m.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",m[m.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",m[m.ANY=15]="ANY"})(d=r.Scope||(r.Scope={}));function f(m,g){var x=b(m);if(x==null)throw new s("Unable to create "+m+" blot");var w=x,S=m instanceof Node||m.nodeType===Node.TEXT_NODE?m:w.create(g);return new w(S,g)}r.create=f;function p(m,g){return g===void 0&&(g=!1),m==null?null:m[r.DATA_KEY]!=null?m[r.DATA_KEY].blot:g?p(m.parentNode,g):null}r.find=p;function b(m,g){g===void 0&&(g=d.ANY);var x;if(typeof m=="string")x=u[m]||a[m];else if(m instanceof Text||m.nodeType===Node.TEXT_NODE)x=u.text;else if(typeof m=="number")m&d.LEVEL&d.BLOCK?x=u.block:m&d.LEVEL&d.INLINE&&(x=u.inline);else if(m instanceof HTMLElement){var w=(m.getAttribute("class")||"").split(/\s+/);for(var S in w)if(x=l[w[S]],x)break;x=x||c[m.tagName]}return x==null?null:g&d.LEVEL&x.scope&&g&d.TYPE&x.scope?x:null}r.query=b;function v(){for(var m=[],g=0;g<arguments.length;g++)m[g]=arguments[g];if(m.length>1)return m.map(function(S){return v(S)});var x=m[0];if(typeof x.blotName!="string"&&typeof x.attrName!="string")throw new s("Invalid definition");if(x.blotName==="abstract")throw new s("Cannot register abstract class");if(u[x.blotName||x.attrName]=x,typeof x.keyName=="string")a[x.keyName]=x;else if(x.className!=null&&(l[x.className]=x),x.tagName!=null){Array.isArray(x.tagName)?x.tagName=x.tagName.map(function(S){return S.toUpperCase()}):x.tagName=x.tagName.toUpperCase();var w=Array.isArray(x.tagName)?x.tagName:[x.tagName];w.forEach(function(S){(c[S]==null||x.className==null)&&(c[S]=x)})}return x}r.register=v},function(n,r,i){var o=i(51),s=i(11),a=i(3),l=i(20),c="\0",u=function(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]};u.prototype.insert=function(d,f){var p={};return d.length===0?this:(p.insert=d,f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(p.attributes=f),this.push(p))},u.prototype.delete=function(d){return d<=0?this:this.push({delete:d})},u.prototype.retain=function(d,f){if(d<=0)return this;var p={retain:d};return f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(p.attributes=f),this.push(p)},u.prototype.push=function(d){var f=this.ops.length,p=this.ops[f-1];if(d=a(!0,{},d),typeof p=="object"){if(typeof d.delete=="number"&&typeof p.delete=="number")return this.ops[f-1]={delete:p.delete+d.delete},this;if(typeof p.delete=="number"&&d.insert!=null&&(f-=1,p=this.ops[f-1],typeof p!="object"))return this.ops.unshift(d),this;if(s(d.attributes,p.attributes)){if(typeof d.insert=="string"&&typeof p.insert=="string")return this.ops[f-1]={insert:p.insert+d.insert},typeof d.attributes=="object"&&(this.ops[f-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof p.retain=="number")return this.ops[f-1]={retain:p.retain+d.retain},typeof d.attributes=="object"&&(this.ops[f-1].attributes=d.attributes),this}}return f===this.ops.length?this.ops.push(d):this.ops.splice(f,0,d),this},u.prototype.chop=function(){var d=this.ops[this.ops.length-1];return d&&d.retain&&!d.attributes&&this.ops.pop(),this},u.prototype.filter=function(d){return this.ops.filter(d)},u.prototype.forEach=function(d){this.ops.forEach(d)},u.prototype.map=function(d){return this.ops.map(d)},u.prototype.partition=function(d){var f=[],p=[];return this.forEach(function(b){var v=d(b)?f:p;v.push(b)}),[f,p]},u.prototype.reduce=function(d,f){return this.ops.reduce(d,f)},u.prototype.changeLength=function(){return this.reduce(function(d,f){return f.insert?d+l.length(f):f.delete?d-f.delete:d},0)},u.prototype.length=function(){return this.reduce(function(d,f){return d+l.length(f)},0)},u.prototype.slice=function(d,f){d=d||0,typeof f!="number"&&(f=1/0);for(var p=[],b=l.iterator(this.ops),v=0;v<f&&b.hasNext();){var m;v<d?m=b.next(d-v):(m=b.next(f-v),p.push(m)),v+=l.length(m)}return new u(p)},u.prototype.compose=function(d){var f=l.iterator(this.ops),p=l.iterator(d.ops),b=[],v=p.peek();if(v!=null&&typeof v.retain=="number"&&v.attributes==null){for(var m=v.retain;f.peekType()==="insert"&&f.peekLength()<=m;)m-=f.peekLength(),b.push(f.next());v.retain-m>0&&p.next(v.retain-m)}for(var g=new u(b);f.hasNext()||p.hasNext();)if(p.peekType()==="insert")g.push(p.next());else if(f.peekType()==="delete")g.push(f.next());else{var x=Math.min(f.peekLength(),p.peekLength()),w=f.next(x),S=p.next(x);if(typeof S.retain=="number"){var D={};typeof w.retain=="number"?D.retain=x:D.insert=w.insert;var k=l.attributes.compose(w.attributes,S.attributes,typeof w.retain=="number");if(k&&(D.attributes=k),g.push(D),!p.hasNext()&&s(g.ops[g.ops.length-1],D)){var P=new u(f.rest());return g.concat(P).chop()}}else typeof S.delete=="number"&&typeof w.retain=="number"&&g.push(S)}return g.chop()},u.prototype.concat=function(d){var f=new u(this.ops.slice());return d.ops.length>0&&(f.push(d.ops[0]),f.ops=f.ops.concat(d.ops.slice(1))),f},u.prototype.diff=function(d,f){if(this.ops===d.ops)return new u;var p=[this,d].map(function(x){return x.map(function(w){if(w.insert!=null)return typeof w.insert=="string"?w.insert:c;var S=x===d?"on":"with";throw new Error("diff() called "+S+" non-document")}).join("")}),b=new u,v=o(p[0],p[1],f),m=l.iterator(this.ops),g=l.iterator(d.ops);return v.forEach(function(x){for(var w=x[1].length;w>0;){var S=0;switch(x[0]){case o.INSERT:S=Math.min(g.peekLength(),w),b.push(g.next(S));break;case o.DELETE:S=Math.min(w,m.peekLength()),m.next(S),b.delete(S);break;case o.EQUAL:S=Math.min(m.peekLength(),g.peekLength(),w);var D=m.next(S),k=g.next(S);s(D.insert,k.insert)?b.retain(S,l.attributes.diff(D.attributes,k.attributes)):b.push(k).delete(S);break}w-=S}}),b.chop()},u.prototype.eachLine=function(d,f){f=f||`
`;for(var p=l.iterator(this.ops),b=new u,v=0;p.hasNext();){if(p.peekType()!=="insert")return;var m=p.peek(),g=l.length(m)-p.peekLength(),x=typeof m.insert=="string"?m.insert.indexOf(f,g)-g:-1;if(x<0)b.push(p.next());else if(x>0)b.push(p.next(x));else{if(d(b,p.next(1).attributes||{},v)===!1)return;v+=1,b=new u}}b.length()>0&&d(b,{},v)},u.prototype.transform=function(d,f){if(f=!!f,typeof d=="number")return this.transformPosition(d,f);for(var p=l.iterator(this.ops),b=l.iterator(d.ops),v=new u;p.hasNext()||b.hasNext();)if(p.peekType()==="insert"&&(f||b.peekType()!=="insert"))v.retain(l.length(p.next()));else if(b.peekType()==="insert")v.push(b.next());else{var m=Math.min(p.peekLength(),b.peekLength()),g=p.next(m),x=b.next(m);if(g.delete)continue;x.delete?v.push(x):v.retain(m,l.attributes.transform(g.attributes,x.attributes,f))}return v.chop()},u.prototype.transformPosition=function(d,f){f=!!f;for(var p=l.iterator(this.ops),b=0;p.hasNext()&&b<=d;){var v=p.peekLength(),m=p.peekType();if(p.next(),m==="delete"){d-=Math.min(v,d-b);continue}else m==="insert"&&(b<d||!f)&&(d+=v);b+=v}return d},n.exports=u},function(n,r){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=function(p){return typeof Array.isArray=="function"?Array.isArray(p):o.call(p)==="[object Array]"},c=function(p){if(!p||o.call(p)!=="[object Object]")return!1;var b=i.call(p,"constructor"),v=p.constructor&&p.constructor.prototype&&i.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!b&&!v)return!1;var m;for(m in p);return typeof m=="undefined"||i.call(p,m)},u=function(p,b){s&&b.name==="__proto__"?s(p,b.name,{enumerable:!0,configurable:!0,value:b.newValue,writable:!0}):p[b.name]=b.newValue},d=function(p,b){if(b==="__proto__")if(i.call(p,b)){if(a)return a(p,b).value}else return;return p[b]};n.exports=function f(){var p,b,v,m,g,x,w=arguments[0],S=1,D=arguments.length,k=!1;for(typeof w=="boolean"&&(k=w,w=arguments[1]||{},S=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});S<D;++S)if(p=arguments[S],p!=null)for(b in p)v=d(w,b),m=d(p,b),w!==m&&(k&&m&&(c(m)||(g=l(m)))?(g?(g=!1,x=v&&l(v)?v:[]):x=v&&c(v)?v:{},u(w,{name:b,newValue:f(k,x,m)})):typeof m!="undefined"&&u(w,{name:b,newValue:m}));return w}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var o=function(){function E(R,F){for(var L=0;L<F.length;L++){var N=F[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(R,N.key,N)}}return function(R,F,L){return F&&E(R.prototype,F),L&&E(R,L),R}}(),s=function E(R,F,L){R===null&&(R=Function.prototype);var N=Object.getOwnPropertyDescriptor(R,F);if(N===void 0){var U=Object.getPrototypeOf(R);return U===null?void 0:E(U,F,L)}else{if("value"in N)return N.value;var H=N.get;return H===void 0?void 0:H.call(L)}},a=i(3),l=w(a),c=i(2),u=w(c),d=i(0),f=w(d),p=i(16),b=w(p),v=i(6),m=w(v),g=i(7),x=w(g);function w(E){return E&&E.__esModule?E:{default:E}}function S(E,R){if(!(E instanceof R))throw new TypeError("Cannot call a class as a function")}function D(E,R){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:E}function k(E,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);E.prototype=Object.create(R&&R.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(E,R):E.__proto__=R)}var P=1,M=function(E){k(R,E);function R(){return S(this,R),D(this,(R.__proto__||Object.getPrototypeOf(R)).apply(this,arguments))}return o(R,[{key:"attach",value:function(){s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"attach",this).call(this),this.attributes=new f.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new u.default().insert(this.value(),(0,l.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(L,N){var U=f.default.query(L,f.default.Scope.BLOCK_ATTRIBUTE);U!=null&&this.attributes.attribute(U,N)}},{key:"formatAt",value:function(L,N,U,H){this.format(U,H)}},{key:"insertAt",value:function(L,N,U){if(typeof N=="string"&&N.endsWith(`
`)){var H=f.default.create(T.blotName);this.parent.insertBefore(H,L===0?this:this.next),H.insertAt(0,N.slice(0,-1))}else s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,L,N,U)}}]),R}(f.default.Embed);M.scope=f.default.Scope.BLOCK_BLOT;var T=function(E){k(R,E);function R(F){S(this,R);var L=D(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,F));return L.cache={},L}return o(R,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(f.default.Leaf).reduce(function(L,N){return N.length()===0?L:L.insert(N.value(),_(N))},new u.default).insert(`
`,_(this))),this.cache.delta}},{key:"deleteAt",value:function(L,N){s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"deleteAt",this).call(this,L,N),this.cache={}}},{key:"formatAt",value:function(L,N,U,H){N<=0||(f.default.query(U,f.default.Scope.BLOCK)?L+N===this.length()&&this.format(U,H):s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"formatAt",this).call(this,L,Math.min(N,this.length()-L-1),U,H),this.cache={})}},{key:"insertAt",value:function(L,N,U){if(U!=null)return s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,L,N,U);if(N.length!==0){var H=N.split(`
`),j=H.shift();j.length>0&&(L<this.length()-1||this.children.tail==null?s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,Math.min(L,this.length()-1),j):this.children.tail.insertAt(this.children.tail.length(),j),this.cache={});var z=this;H.reduce(function(q,$){return z=z.split(q,!0),z.insertAt(0,$),$.length},L+j.length)}}},{key:"insertBefore",value:function(L,N){var U=this.children.head;s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertBefore",this).call(this,L,N),U instanceof b.default&&U.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"length",this).call(this)+P),this.cache.length}},{key:"moveChildren",value:function(L,N){s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"moveChildren",this).call(this,L,N),this.cache={}}},{key:"optimize",value:function(L){s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"optimize",this).call(this,L),this.cache={}}},{key:"path",value:function(L){return s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"path",this).call(this,L,!0)}},{key:"removeChild",value:function(L){s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"removeChild",this).call(this,L),this.cache={}}},{key:"split",value:function(L){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(N&&(L===0||L>=this.length()-P)){var U=this.clone();return L===0?(this.parent.insertBefore(U,this),this):(this.parent.insertBefore(U,this.next),U)}else{var H=s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"split",this).call(this,L,N);return this.cache={},H}}}]),R}(f.default.Block);T.blotName="block",T.tagName="P",T.defaultChild="break",T.allowedChildren=[m.default,f.default.Embed,x.default];function _(E){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return E==null||(typeof E.formats=="function"&&(R=(0,l.default)(R,E.formats())),E.parent==null||E.parent.blotName=="scroll"||E.parent.statics.scope!==E.statics.scope)?R:_(E.parent,R)}r.bubbleFormats=_,r.BlockEmbed=M,r.default=T},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},s=function(){function z(q,$){var K=[],G=!0,Y=!1,J=void 0;try{for(var V=q[Symbol.iterator](),re;!(G=(re=V.next()).done)&&(K.push(re.value),!($&&K.length===$));G=!0);}catch(fe){Y=!0,J=fe}finally{try{!G&&V.return&&V.return()}finally{if(Y)throw J}}return K}return function(q,$){if(Array.isArray(q))return q;if(Symbol.iterator in Object(q))return z(q,$);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function z(q,$){for(var K=0;K<$.length;K++){var G=$[K];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(q,G.key,G)}}return function(q,$,K){return $&&z(q.prototype,$),K&&z(q,K),q}}();i(50);var l=i(2),c=_(l),u=i(14),d=_(u),f=i(8),p=_(f),b=i(9),v=_(b),m=i(0),g=_(m),x=i(15),w=_(x),S=i(3),D=_(S),k=i(10),P=_(k),M=i(34),T=_(M);function _(z){return z&&z.__esModule?z:{default:z}}function E(z,q,$){return q in z?Object.defineProperty(z,q,{value:$,enumerable:!0,configurable:!0,writable:!0}):z[q]=$,z}function R(z,q){if(!(z instanceof q))throw new TypeError("Cannot call a class as a function")}var F=(0,P.default)("quill"),L=function(){a(z,null,[{key:"debug",value:function($){$===!0&&($="log"),P.default.level($)}},{key:"find",value:function($){return $.__quill||g.default.find($)}},{key:"import",value:function($){return this.imports[$]==null&&F.error("Cannot import "+$+". Are you sure it was registered?"),this.imports[$]}},{key:"register",value:function($,K){var G=this,Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof $!="string"){var J=$.attrName||$.blotName;typeof J=="string"?this.register("formats/"+J,$,K):Object.keys($).forEach(function(V){G.register(V,$[V],K)})}else this.imports[$]!=null&&!Y&&F.warn("Overwriting "+$+" with",K),this.imports[$]=K,($.startsWith("blots/")||$.startsWith("formats/"))&&K.blotName!=="abstract"?g.default.register(K):$.startsWith("modules")&&typeof K.register=="function"&&K.register()}}]);function z(q){var $=this,K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(R(this,z),this.options=N(q,K),this.container=this.options.container,this.container==null)return F.error("Invalid Quill container",q);this.options.debug&&z.debug(this.options.debug);var G=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new p.default,this.scroll=g.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new d.default(this.scroll),this.selection=new w.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(p.default.events.EDITOR_CHANGE,function(J){J===p.default.events.TEXT_CHANGE&&$.root.classList.toggle("ql-blank",$.editor.isBlank())}),this.emitter.on(p.default.events.SCROLL_UPDATE,function(J,V){var re=$.selection.lastRange,fe=re&&re.length===0?re.index:void 0;U.call($,function(){return $.editor.update(null,V,fe)},J)});var Y=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+G+"<p><br></p></div>");this.setContents(Y),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return a(z,[{key:"addContainer",value:function($){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof $=="string"){var G=$;$=document.createElement("div"),$.classList.add(G)}return this.container.insertBefore($,K),$}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function($,K,G){var Y=this,J=H($,K,G),V=s(J,4);return $=V[0],K=V[1],G=V[3],U.call(this,function(){return Y.editor.deleteText($,K)},G,$,-1*K)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable($),this.container.classList.toggle("ql-disabled",!$)}},{key:"focus",value:function(){var $=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=$,this.scrollIntoView()}},{key:"format",value:function($,K){var G=this,Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;return U.call(this,function(){var J=G.getSelection(!0),V=new c.default;if(J==null)return V;if(g.default.query($,g.default.Scope.BLOCK))V=G.editor.formatLine(J.index,J.length,E({},$,K));else{if(J.length===0)return G.selection.format($,K),V;V=G.editor.formatText(J.index,J.length,E({},$,K))}return G.setSelection(J,p.default.sources.SILENT),V},Y)}},{key:"formatLine",value:function($,K,G,Y,J){var V=this,re=void 0,fe=H($,K,G,Y,J),pe=s(fe,4);return $=pe[0],K=pe[1],re=pe[2],J=pe[3],U.call(this,function(){return V.editor.formatLine($,K,re)},J,$,0)}},{key:"formatText",value:function($,K,G,Y,J){var V=this,re=void 0,fe=H($,K,G,Y,J),pe=s(fe,4);return $=pe[0],K=pe[1],re=pe[2],J=pe[3],U.call(this,function(){return V.editor.formatText($,K,re)},J,$,0)}},{key:"getBounds",value:function($){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,G=void 0;typeof $=="number"?G=this.selection.getBounds($,K):G=this.selection.getBounds($.index,$.length);var Y=this.container.getBoundingClientRect();return{bottom:G.bottom-Y.top,height:G.height,left:G.left-Y.left,right:G.right-Y.left,top:G.top-Y.top,width:G.width}}},{key:"getContents",value:function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-$,G=H($,K),Y=s(G,2);return $=Y[0],K=Y[1],this.editor.getContents($,K)}},{key:"getFormat",value:function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof $=="number"?this.editor.getFormat($,K):this.editor.getFormat($.index,$.length)}},{key:"getIndex",value:function($){return $.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function($){return this.scroll.leaf($)}},{key:"getLine",value:function($){return this.scroll.line($)}},{key:"getLines",value:function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof $!="number"?this.scroll.lines($.index,$.length):this.scroll.lines($,K)}},{key:"getModule",value:function($){return this.theme.modules[$]}},{key:"getSelection",value:function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return $&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-$,G=H($,K),Y=s(G,2);return $=Y[0],K=Y[1],this.editor.getText($,K)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function($,K,G){var Y=this,J=arguments.length>3&&arguments[3]!==void 0?arguments[3]:z.sources.API;return U.call(this,function(){return Y.editor.insertEmbed($,K,G)},J,$)}},{key:"insertText",value:function($,K,G,Y,J){var V=this,re=void 0,fe=H($,0,G,Y,J),pe=s(fe,4);return $=pe[0],re=pe[2],J=pe[3],U.call(this,function(){return V.editor.insertText($,K,re)},J,$,K.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function($,K,G){this.clipboard.dangerouslyPasteHTML($,K,G)}},{key:"removeFormat",value:function($,K,G){var Y=this,J=H($,K,G),V=s(J,4);return $=V[0],K=V[1],G=V[3],U.call(this,function(){return Y.editor.removeFormat($,K)},G,$)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function($){var K=this,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return U.call(this,function(){$=new c.default($);var Y=K.getLength(),J=K.editor.deleteText(0,Y),V=K.editor.applyDelta($),re=V.ops[V.ops.length-1];re!=null&&typeof re.insert=="string"&&re.insert[re.insert.length-1]===`
`&&(K.editor.deleteText(K.getLength()-1,1),V.delete(1));var fe=J.compose(V);return fe},G)}},{key:"setSelection",value:function($,K,G){if($==null)this.selection.setRange(null,K||z.sources.API);else{var Y=H($,K,G),J=s(Y,4);$=J[0],K=J[1],G=J[3],this.selection.setRange(new x.Range($,K),G),G!==p.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function($){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API,G=new c.default().insert($);return this.setContents(G,K)}},{key:"update",value:function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,K=this.scroll.update($);return this.selection.update($),K}},{key:"updateContents",value:function($){var K=this,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return U.call(this,function(){return $=new c.default($),K.editor.applyDelta($,G)},G,!0)}}]),z}();L.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},L.events=p.default.events,L.sources=p.default.sources,L.version="1.3.7",L.imports={delta:c.default,parchment:g.default,"core/module":v.default,"core/theme":T.default};function N(z,q){if(q=(0,D.default)(!0,{container:z,modules:{clipboard:!0,keyboard:!0,history:!0}},q),!q.theme||q.theme===L.DEFAULTS.theme)q.theme=T.default;else if(q.theme=L.import("themes/"+q.theme),q.theme==null)throw new Error("Invalid theme "+q.theme+". Did you register it?");var $=(0,D.default)(!0,{},q.theme.DEFAULTS);[$,q].forEach(function(Y){Y.modules=Y.modules||{},Object.keys(Y.modules).forEach(function(J){Y.modules[J]===!0&&(Y.modules[J]={})})});var K=Object.keys($.modules).concat(Object.keys(q.modules)),G=K.reduce(function(Y,J){var V=L.import("modules/"+J);return V==null?F.error("Cannot load "+J+" module. Are you sure you registered it?"):Y[J]=V.DEFAULTS||{},Y},{});return q.modules!=null&&q.modules.toolbar&&q.modules.toolbar.constructor!==Object&&(q.modules.toolbar={container:q.modules.toolbar}),q=(0,D.default)(!0,{},L.DEFAULTS,{modules:G},$,q),["bounds","container","scrollingContainer"].forEach(function(Y){typeof q[Y]=="string"&&(q[Y]=document.querySelector(q[Y]))}),q.modules=Object.keys(q.modules).reduce(function(Y,J){return q.modules[J]&&(Y[J]=q.modules[J]),Y},{}),q}function U(z,q,$,K){if(this.options.strict&&!this.isEnabled()&&q===p.default.sources.USER)return new c.default;var G=$==null?null:this.getSelection(),Y=this.editor.delta,J=z();if(G!=null&&($===!0&&($=G.index),K==null?G=j(G,J,q):K!==0&&(G=j(G,$,K,q)),this.setSelection(G,p.default.sources.SILENT)),J.length()>0){var V,re=[p.default.events.TEXT_CHANGE,J,Y,q];if((V=this.emitter).emit.apply(V,[p.default.events.EDITOR_CHANGE].concat(re)),q!==p.default.sources.SILENT){var fe;(fe=this.emitter).emit.apply(fe,re)}}return J}function H(z,q,$,K,G){var Y={};return typeof z.index=="number"&&typeof z.length=="number"?typeof q!="number"?(G=K,K=$,$=q,q=z.length,z=z.index):(q=z.length,z=z.index):typeof q!="number"&&(G=K,K=$,$=q,q=0),(typeof $=="undefined"?"undefined":o($))==="object"?(Y=$,G=K):typeof $=="string"&&(K!=null?Y[$]=K:G=$),G=G||p.default.sources.API,[z,q,Y,G]}function j(z,q,$,K){if(z==null)return null;var G=void 0,Y=void 0;if(q instanceof c.default){var J=[z.index,z.index+z.length].map(function(pe){return q.transformPosition(pe,K!==p.default.sources.USER)}),V=s(J,2);G=V[0],Y=V[1]}else{var re=[z.index,z.index+z.length].map(function(pe){return pe<q||pe===q&&K===p.default.sources.USER?pe:$>=0?pe+$:Math.max(q,pe+$)}),fe=s(re,2);G=fe[0],Y=fe[1]}return new x.Range(G,Y-G)}r.expandConfig=N,r.overload=H,r.default=L},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function m(g,x){for(var w=0;w<x.length;w++){var S=x[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,S.key,S)}}return function(g,x,w){return x&&m(g.prototype,x),w&&m(g,w),g}}(),s=function m(g,x,w){g===null&&(g=Function.prototype);var S=Object.getOwnPropertyDescriptor(g,x);if(S===void 0){var D=Object.getPrototypeOf(g);return D===null?void 0:m(D,x,w)}else{if("value"in S)return S.value;var k=S.get;return k===void 0?void 0:k.call(w)}},a=i(7),l=d(a),c=i(0),u=d(c);function d(m){return m&&m.__esModule?m:{default:m}}function f(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function p(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function b(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var v=function(m){b(g,m);function g(){return f(this,g),p(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"formatAt",value:function(w,S,D,k){if(g.compare(this.statics.blotName,D)<0&&u.default.query(D,u.default.Scope.BLOT)){var P=this.isolate(w,S);k&&P.wrap(D,k)}else s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"formatAt",this).call(this,w,S,D,k)}},{key:"optimize",value:function(w){if(s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"optimize",this).call(this,w),this.parent instanceof g&&g.compare(this.statics.blotName,this.parent.statics.blotName)>0){var S=this.parent.isolate(this.offset(),this.length());this.moveChildren(S),S.wrap(this)}}}],[{key:"compare",value:function(w,S){var D=g.order.indexOf(w),k=g.order.indexOf(S);return D>=0||k>=0?D-k:w===S?0:w<S?-1:1}}]),g}(u.default.Inline);v.allowedChildren=[v,u.default.Embed,l.default],v.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function c(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function u(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var d=function(f){u(p,f);function p(){return l(this,p),c(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(s.default.Text);r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function x(w,S){for(var D=0;D<S.length;D++){var k=S[D];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(w,k.key,k)}}return function(w,S,D){return S&&x(w.prototype,S),D&&x(w,D),w}}(),s=function x(w,S,D){w===null&&(w=Function.prototype);var k=Object.getOwnPropertyDescriptor(w,S);if(k===void 0){var P=Object.getPrototypeOf(w);return P===null?void 0:x(P,S,D)}else{if("value"in k)return k.value;var M=k.get;return M===void 0?void 0:M.call(D)}},a=i(54),l=d(a),c=i(10),u=d(c);function d(x){return x&&x.__esModule?x:{default:x}}function f(x,w){if(!(x instanceof w))throw new TypeError("Cannot call a class as a function")}function p(x,w){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:x}function b(x,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);x.prototype=Object.create(w&&w.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(x,w):x.__proto__=w)}var v=(0,u.default)("quill:events"),m=["selectionchange","mousedown","mouseup","click"];m.forEach(function(x){document.addEventListener(x,function(){for(var w=arguments.length,S=Array(w),D=0;D<w;D++)S[D]=arguments[D];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(k){if(k.__quill&&k.__quill.emitter){var P;(P=k.__quill.emitter).handleDOM.apply(P,S)}})})});var g=function(x){b(w,x);function w(){f(this,w);var S=p(this,(w.__proto__||Object.getPrototypeOf(w)).call(this));return S.listeners={},S.on("error",v.error),S}return o(w,[{key:"emit",value:function(){v.log.apply(v,arguments),s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(D){for(var k=arguments.length,P=Array(k>1?k-1:0),M=1;M<k;M++)P[M-1]=arguments[M];(this.listeners[D.type]||[]).forEach(function(T){var _=T.node,E=T.handler;(D.target===_||_.contains(D.target))&&E.apply(void 0,[D].concat(P))})}},{key:"listenDOM",value:function(D,k,P){this.listeners[D]||(this.listeners[D]=[]),this.listeners[D].push({node:k,handler:P})}}]),w}(l.default);g.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},g.sources={API:"api",SILENT:"silent",USER:"user"},r.default=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});function o(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}var s=function a(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o(this,a),this.quill=l,this.options=c};s.DEFAULTS={},r.default=s},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=["error","warn","log","info"],s="warn";function a(c){if(o.indexOf(c)<=o.indexOf(s)){for(var u,d=arguments.length,f=Array(d>1?d-1:0),p=1;p<d;p++)f[p-1]=arguments[p];(u=console)[c].apply(u,f)}}function l(c){return o.reduce(function(u,d){return u[d]=a.bind(console,d,c),u},{})}a.level=l.level=function(c){s=c},r.default=l},function(n,r,i){var o=Array.prototype.slice,s=i(52),a=i(53),l=n.exports=function(f,p,b){return b||(b={}),f===p?!0:f instanceof Date&&p instanceof Date?f.getTime()===p.getTime():!f||!p||typeof f!="object"&&typeof p!="object"?b.strict?f===p:f==p:d(f,p,b)};function c(f){return f==null}function u(f){return!(!f||typeof f!="object"||typeof f.length!="number"||typeof f.copy!="function"||typeof f.slice!="function"||f.length>0&&typeof f[0]!="number")}function d(f,p,b){var v,m;if(c(f)||c(p)||f.prototype!==p.prototype)return!1;if(a(f))return a(p)?(f=o.call(f),p=o.call(p),l(f,p,b)):!1;if(u(f)){if(!u(p)||f.length!==p.length)return!1;for(v=0;v<f.length;v++)if(f[v]!==p[v])return!1;return!0}try{var g=s(f),x=s(p)}catch(w){return!1}if(g.length!=x.length)return!1;for(g.sort(),x.sort(),v=g.length-1;v>=0;v--)if(g[v]!=x[v])return!1;for(v=g.length-1;v>=0;v--)if(m=g[v],!l(f[m],p[m],b))return!1;return typeof f==typeof p}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(1),s=function(){function a(l,c,u){u===void 0&&(u={}),this.attrName=l,this.keyName=c;var d=o.Scope.TYPE&o.Scope.ATTRIBUTE;u.scope!=null?this.scope=u.scope&o.Scope.LEVEL|d:this.scope=o.Scope.ATTRIBUTE,u.whitelist!=null&&(this.whitelist=u.whitelist)}return a.keys=function(l){return[].map.call(l.attributes,function(c){return c.name})},a.prototype.add=function(l,c){return this.canAdd(l,c)?(l.setAttribute(this.keyName,c),!0):!1},a.prototype.canAdd=function(l,c){var u=o.query(l,o.Scope.BLOT&(this.scope|o.Scope.TYPE));return u==null?!1:this.whitelist==null?!0:typeof c=="string"?this.whitelist.indexOf(c.replace(/["']/g,""))>-1:this.whitelist.indexOf(c)>-1},a.prototype.remove=function(l){l.removeAttribute(this.keyName)},a.prototype.value=function(l){var c=l.getAttribute(this.keyName);return this.canAdd(l,c)&&c?c:""},a}();r.default=s},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var o=function(){function M(T,_){var E=[],R=!0,F=!1,L=void 0;try{for(var N=T[Symbol.iterator](),U;!(R=(U=N.next()).done)&&(E.push(U.value),!(_&&E.length===_));R=!0);}catch(H){F=!0,L=H}finally{try{!R&&N.return&&N.return()}finally{if(F)throw L}}return E}return function(T,_){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return M(T,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function M(T,_){for(var E=0;E<_.length;E++){var R=_[E];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(T,R.key,R)}}return function(T,_,E){return _&&M(T.prototype,_),E&&M(T,E),T}}(),a=function M(T,_,E){T===null&&(T=Function.prototype);var R=Object.getOwnPropertyDescriptor(T,_);if(R===void 0){var F=Object.getPrototypeOf(T);return F===null?void 0:M(F,_,E)}else{if("value"in R)return R.value;var L=R.get;return L===void 0?void 0:L.call(E)}},l=i(2),c=x(l),u=i(0),d=x(u),f=i(4),p=x(f),b=i(6),v=x(b),m=i(7),g=x(m);function x(M){return M&&M.__esModule?M:{default:M}}function w(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")}function S(M,T){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:M}function D(M,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);M.prototype=Object.create(T&&T.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(M,T):M.__proto__=T)}var k=function(M){D(T,M);function T(){return w(this,T),S(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return T}(v.default);k.blotName="code",k.tagName="CODE";var P=function(M){D(T,M);function T(){return w(this,T),S(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return s(T,[{key:"delta",value:function(){var E=this,R=this.domNode.textContent;return R.endsWith(`
`)&&(R=R.slice(0,-1)),R.split(`
`).reduce(function(F,L){return F.insert(L).insert(`
`,E.formats())},new c.default)}},{key:"format",value:function(E,R){if(!(E===this.statics.blotName&&R)){var F=this.descendant(g.default,this.length()-1),L=o(F,1),N=L[0];N!=null&&N.deleteAt(N.length()-1,1),a(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"format",this).call(this,E,R)}}},{key:"formatAt",value:function(E,R,F,L){if(R!==0&&!(d.default.query(F,d.default.Scope.BLOCK)==null||F===this.statics.blotName&&L===this.statics.formats(this.domNode))){var N=this.newlineIndex(E);if(!(N<0||N>=E+R)){var U=this.newlineIndex(E,!0)+1,H=N-U+1,j=this.isolate(U,H),z=j.next;j.format(F,L),z instanceof T&&z.formatAt(0,E-U+R-H,F,L)}}}},{key:"insertAt",value:function(E,R,F){if(F==null){var L=this.descendant(g.default,E),N=o(L,2),U=N[0],H=N[1];U.insertAt(H,R)}}},{key:"length",value:function(){var E=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?E:E+1}},{key:"newlineIndex",value:function(E){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(R)return this.domNode.textContent.slice(0,E).lastIndexOf(`
`);var F=this.domNode.textContent.slice(E).indexOf(`
`);return F>-1?E+F:-1}},{key:"optimize",value:function(E){this.domNode.textContent.endsWith(`
`)||this.appendChild(d.default.create("text",`
`)),a(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"optimize",this).call(this,E);var R=this.next;R!=null&&R.prev===this&&R.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===R.statics.formats(R.domNode)&&(R.optimize(E),R.moveChildren(this),R.remove())}},{key:"replace",value:function(E){a(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"replace",this).call(this,E),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(R){var F=d.default.find(R);F==null?R.parentNode.removeChild(R):F instanceof d.default.Embed?F.remove():F.unwrap()})}}],[{key:"create",value:function(E){var R=a(T.__proto__||Object.getPrototypeOf(T),"create",this).call(this,E);return R.setAttribute("spellcheck",!1),R}},{key:"formats",value:function(){return!0}}]),T}(p.default);P.blotName="code-block",P.tagName="PRE",P.TAB="  ",r.Code=k,r.default=P},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},s=function(){function z(q,$){var K=[],G=!0,Y=!1,J=void 0;try{for(var V=q[Symbol.iterator](),re;!(G=(re=V.next()).done)&&(K.push(re.value),!($&&K.length===$));G=!0);}catch(fe){Y=!0,J=fe}finally{try{!G&&V.return&&V.return()}finally{if(Y)throw J}}return K}return function(q,$){if(Array.isArray(q))return q;if(Symbol.iterator in Object(q))return z(q,$);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function z(q,$){for(var K=0;K<$.length;K++){var G=$[K];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(q,G.key,G)}}return function(q,$,K){return $&&z(q.prototype,$),K&&z(q,K),q}}(),l=i(2),c=R(l),u=i(20),d=R(u),f=i(0),p=R(f),b=i(13),v=R(b),m=i(24),g=R(m),x=i(4),w=R(x),S=i(16),D=R(S),k=i(21),P=R(k),M=i(11),T=R(M),_=i(3),E=R(_);function R(z){return z&&z.__esModule?z:{default:z}}function F(z,q,$){return q in z?Object.defineProperty(z,q,{value:$,enumerable:!0,configurable:!0,writable:!0}):z[q]=$,z}function L(z,q){if(!(z instanceof q))throw new TypeError("Cannot call a class as a function")}var N=/^[ -~]*$/,U=function(){function z(q){L(this,z),this.scroll=q,this.delta=this.getDelta()}return a(z,[{key:"applyDelta",value:function($){var K=this,G=!1;this.scroll.update();var Y=this.scroll.length();return this.scroll.batchStart(),$=j($),$.reduce(function(J,V){var re=V.retain||V.delete||V.insert.length||1,fe=V.attributes||{};if(V.insert!=null){if(typeof V.insert=="string"){var pe=V.insert;pe.endsWith(`
`)&&G&&(G=!1,pe=pe.slice(0,-1)),J>=Y&&!pe.endsWith(`
`)&&(G=!0),K.scroll.insertAt(J,pe);var ce=K.scroll.line(J),xe=s(ce,2),Ae=xe[0],Ee=xe[1],ee=(0,E.default)({},(0,x.bubbleFormats)(Ae));if(Ae instanceof w.default){var Oe=Ae.descendant(p.default.Leaf,Ee),le=s(Oe,1),me=le[0];ee=(0,E.default)(ee,(0,x.bubbleFormats)(me))}fe=d.default.attributes.diff(ee,fe)||{}}else if(o(V.insert)==="object"){var ne=Object.keys(V.insert)[0];if(ne==null)return J;K.scroll.insertAt(J,ne,V.insert[ne])}Y+=re}return Object.keys(fe).forEach(function(se){K.scroll.formatAt(J,re,se,fe[se])}),J+re},0),$.reduce(function(J,V){return typeof V.delete=="number"?(K.scroll.deleteAt(J,V.delete),J):J+(V.retain||V.insert.length||1)},0),this.scroll.batchEnd(),this.update($)}},{key:"deleteText",value:function($,K){return this.scroll.deleteAt($,K),this.update(new c.default().retain($).delete(K))}},{key:"formatLine",value:function($,K){var G=this,Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(Y).forEach(function(J){if(!(G.scroll.whitelist!=null&&!G.scroll.whitelist[J])){var V=G.scroll.lines($,Math.max(K,1)),re=K;V.forEach(function(fe){var pe=fe.length();if(!(fe instanceof v.default))fe.format(J,Y[J]);else{var ce=$-fe.offset(G.scroll),xe=fe.newlineIndex(ce+re)-ce+1;fe.formatAt(ce,xe,J,Y[J])}re-=pe})}}),this.scroll.optimize(),this.update(new c.default().retain($).retain(K,(0,P.default)(Y)))}},{key:"formatText",value:function($,K){var G=this,Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(Y).forEach(function(J){G.scroll.formatAt($,K,J,Y[J])}),this.update(new c.default().retain($).retain(K,(0,P.default)(Y)))}},{key:"getContents",value:function($,K){return this.delta.slice($,$+K)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function($,K){return $.concat(K.delta())},new c.default)}},{key:"getFormat",value:function($){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,G=[],Y=[];K===0?this.scroll.path($).forEach(function(V){var re=s(V,1),fe=re[0];fe instanceof w.default?G.push(fe):fe instanceof p.default.Leaf&&Y.push(fe)}):(G=this.scroll.lines($,K),Y=this.scroll.descendants(p.default.Leaf,$,K));var J=[G,Y].map(function(V){if(V.length===0)return{};for(var re=(0,x.bubbleFormats)(V.shift());Object.keys(re).length>0;){var fe=V.shift();if(fe==null)return re;re=H((0,x.bubbleFormats)(fe),re)}return re});return E.default.apply(E.default,J)}},{key:"getText",value:function($,K){return this.getContents($,K).filter(function(G){return typeof G.insert=="string"}).map(function(G){return G.insert}).join("")}},{key:"insertEmbed",value:function($,K,G){return this.scroll.insertAt($,K,G),this.update(new c.default().retain($).insert(F({},K,G)))}},{key:"insertText",value:function($,K){var G=this,Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return K=K.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt($,K),Object.keys(Y).forEach(function(J){G.scroll.formatAt($,K.length,J,Y[J])}),this.update(new c.default().retain($).insert(K,(0,P.default)(Y)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var $=this.scroll.children.head;return $.statics.blotName!==w.default.blotName||$.children.length>1?!1:$.children.head instanceof D.default}},{key:"removeFormat",value:function($,K){var G=this.getText($,K),Y=this.scroll.line($+K),J=s(Y,2),V=J[0],re=J[1],fe=0,pe=new c.default;V!=null&&(V instanceof v.default?fe=V.newlineIndex(re)-re+1:fe=V.length()-re,pe=V.delta().slice(re,re+fe-1).insert(`
`));var ce=this.getContents($,K+fe),xe=ce.diff(new c.default().insert(G).concat(pe)),Ae=new c.default().retain($).concat(xe);return this.applyDelta(Ae)}},{key:"update",value:function($){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,Y=this.delta;if(K.length===1&&K[0].type==="characterData"&&K[0].target.data.match(N)&&p.default.find(K[0].target)){var J=p.default.find(K[0].target),V=(0,x.bubbleFormats)(J),re=J.offset(this.scroll),fe=K[0].oldValue.replace(g.default.CONTENTS,""),pe=new c.default().insert(fe),ce=new c.default().insert(J.value()),xe=new c.default().retain(re).concat(pe.diff(ce,G));$=xe.reduce(function(Ae,Ee){return Ee.insert?Ae.insert(Ee.insert,V):Ae.push(Ee)},new c.default),this.delta=Y.compose($)}else this.delta=this.getDelta(),(!$||!(0,T.default)(Y.compose($),this.delta))&&($=Y.diff(this.delta,G));return $}}]),z}();function H(z,q){return Object.keys(q).reduce(function($,K){return z[K]==null||(q[K]===z[K]?$[K]=q[K]:Array.isArray(q[K])?q[K].indexOf(z[K])<0&&($[K]=q[K].concat([z[K]])):$[K]=[q[K],z[K]]),$},{})}function j(z){return z.reduce(function(q,$){if($.insert===1){var K=(0,P.default)($.attributes);return delete K.image,q.insert({image:$.attributes.image},K)}if($.attributes!=null&&($.attributes.list===!0||$.attributes.bullet===!0)&&($=(0,P.default)($),$.attributes.list?$.attributes.list="ordered":($.attributes.list="bullet",delete $.attributes.bullet)),typeof $.insert=="string"){var G=$.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return q.insert(G,$.attributes)}return q.push($)},new c.default)}r.default=U},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var o=function(){function M(T,_){var E=[],R=!0,F=!1,L=void 0;try{for(var N=T[Symbol.iterator](),U;!(R=(U=N.next()).done)&&(E.push(U.value),!(_&&E.length===_));R=!0);}catch(H){F=!0,L=H}finally{try{!R&&N.return&&N.return()}finally{if(F)throw L}}return E}return function(T,_){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return M(T,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function M(T,_){for(var E=0;E<_.length;E++){var R=_[E];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(T,R.key,R)}}return function(T,_,E){return _&&M(T.prototype,_),E&&M(T,E),T}}(),a=i(0),l=g(a),c=i(21),u=g(c),d=i(11),f=g(d),p=i(8),b=g(p),v=i(10),m=g(v);function g(M){return M&&M.__esModule?M:{default:M}}function x(M){if(Array.isArray(M)){for(var T=0,_=Array(M.length);T<M.length;T++)_[T]=M[T];return _}else return Array.from(M)}function w(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")}var S=(0,m.default)("quill:selection"),D=function M(T){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;w(this,M),this.index=T,this.length=_},k=function(){function M(T,_){var E=this;w(this,M),this.emitter=_,this.scroll=T,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=l.default.create("cursor",this),this.lastRange=this.savedRange=new D(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){E.mouseDown||setTimeout(E.update.bind(E,b.default.sources.USER),1)}),this.emitter.on(b.default.events.EDITOR_CHANGE,function(R,F){R===b.default.events.TEXT_CHANGE&&F.length()>0&&E.update(b.default.sources.SILENT)}),this.emitter.on(b.default.events.SCROLL_BEFORE_UPDATE,function(){if(E.hasFocus()){var R=E.getNativeRange();R!=null&&R.start.node!==E.cursor.textNode&&E.emitter.once(b.default.events.SCROLL_UPDATE,function(){try{E.setNativeRange(R.start.node,R.start.offset,R.end.node,R.end.offset)}catch(F){}})}}),this.emitter.on(b.default.events.SCROLL_OPTIMIZE,function(R,F){if(F.range){var L=F.range,N=L.startNode,U=L.startOffset,H=L.endNode,j=L.endOffset;E.setNativeRange(N,U,H,j)}}),this.update(b.default.sources.SILENT)}return s(M,[{key:"handleComposition",value:function(){var _=this;this.root.addEventListener("compositionstart",function(){_.composing=!0}),this.root.addEventListener("compositionend",function(){if(_.composing=!1,_.cursor.parent){var E=_.cursor.restore();if(!E)return;setTimeout(function(){_.setNativeRange(E.startNode,E.startOffset,E.endNode,E.endOffset)},1)}})}},{key:"handleDragging",value:function(){var _=this;this.emitter.listenDOM("mousedown",document.body,function(){_.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){_.mouseDown=!1,_.update(b.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(_,E){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[_])){this.scroll.update();var R=this.getNativeRange();if(!(R==null||!R.native.collapsed||l.default.query(_,l.default.Scope.BLOCK))){if(R.start.node!==this.cursor.textNode){var F=l.default.find(R.start.node,!1);if(F==null)return;if(F instanceof l.default.Leaf){var L=F.split(R.start.offset);F.parent.insertBefore(this.cursor,L)}else F.insertBefore(this.cursor,R.start.node);this.cursor.attach()}this.cursor.format(_,E),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(_){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=this.scroll.length();_=Math.min(_,R-1),E=Math.min(_+E,R-1)-_;var F=void 0,L=this.scroll.leaf(_),N=o(L,2),U=N[0],H=N[1];if(U==null)return null;var j=U.position(H,!0),z=o(j,2);F=z[0],H=z[1];var q=document.createRange();if(E>0){q.setStart(F,H);var $=this.scroll.leaf(_+E),K=o($,2);if(U=K[0],H=K[1],U==null)return null;var G=U.position(H,!0),Y=o(G,2);return F=Y[0],H=Y[1],q.setEnd(F,H),q.getBoundingClientRect()}else{var J="left",V=void 0;return F instanceof Text?(H<F.data.length?(q.setStart(F,H),q.setEnd(F,H+1)):(q.setStart(F,H-1),q.setEnd(F,H),J="right"),V=q.getBoundingClientRect()):(V=U.domNode.getBoundingClientRect(),H>0&&(J="right")),{bottom:V.top+V.height,height:V.height,left:V[J],right:V[J],top:V.top,width:0}}}},{key:"getNativeRange",value:function(){var _=document.getSelection();if(_==null||_.rangeCount<=0)return null;var E=_.getRangeAt(0);if(E==null)return null;var R=this.normalizeNative(E);return S.info("getNativeRange",R),R}},{key:"getRange",value:function(){var _=this.getNativeRange();if(_==null)return[null,null];var E=this.normalizedToRange(_);return[E,_]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(_){var E=this,R=[[_.start.node,_.start.offset]];_.native.collapsed||R.push([_.end.node,_.end.offset]);var F=R.map(function(U){var H=o(U,2),j=H[0],z=H[1],q=l.default.find(j,!0),$=q.offset(E.scroll);return z===0?$:q instanceof l.default.Container?$+q.length():$+q.index(j,z)}),L=Math.min(Math.max.apply(Math,x(F)),this.scroll.length()-1),N=Math.min.apply(Math,[L].concat(x(F)));return new D(N,L-N)}},{key:"normalizeNative",value:function(_){if(!P(this.root,_.startContainer)||!_.collapsed&&!P(this.root,_.endContainer))return null;var E={start:{node:_.startContainer,offset:_.startOffset},end:{node:_.endContainer,offset:_.endOffset},native:_};return[E.start,E.end].forEach(function(R){for(var F=R.node,L=R.offset;!(F instanceof Text)&&F.childNodes.length>0;)if(F.childNodes.length>L)F=F.childNodes[L],L=0;else if(F.childNodes.length===L)F=F.lastChild,L=F instanceof Text?F.data.length:F.childNodes.length+1;else break;R.node=F,R.offset=L}),E}},{key:"rangeToNative",value:function(_){var E=this,R=_.collapsed?[_.index]:[_.index,_.index+_.length],F=[],L=this.scroll.length();return R.forEach(function(N,U){N=Math.min(L-1,N);var H=void 0,j=E.scroll.leaf(N),z=o(j,2),q=z[0],$=z[1],K=q.position($,U!==0),G=o(K,2);H=G[0],$=G[1],F.push(H,$)}),F.length<2&&(F=F.concat(F)),F}},{key:"scrollIntoView",value:function(_){var E=this.lastRange;if(E!=null){var R=this.getBounds(E.index,E.length);if(R!=null){var F=this.scroll.length()-1,L=this.scroll.line(Math.min(E.index,F)),N=o(L,1),U=N[0],H=U;if(E.length>0){var j=this.scroll.line(Math.min(E.index+E.length,F)),z=o(j,1);H=z[0]}if(!(U==null||H==null)){var q=_.getBoundingClientRect();R.top<q.top?_.scrollTop-=q.top-R.top:R.bottom>q.bottom&&(_.scrollTop+=R.bottom-q.bottom)}}}}},{key:"setNativeRange",value:function(_,E){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_,F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:E,L=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(S.info("setNativeRange",_,E,R,F),!(_!=null&&(this.root.parentNode==null||_.parentNode==null||R.parentNode==null))){var N=document.getSelection();if(N!=null)if(_!=null){this.hasFocus()||this.root.focus();var U=(this.getNativeRange()||{}).native;if(U==null||L||_!==U.startContainer||E!==U.startOffset||R!==U.endContainer||F!==U.endOffset){_.tagName=="BR"&&(E=[].indexOf.call(_.parentNode.childNodes,_),_=_.parentNode),R.tagName=="BR"&&(F=[].indexOf.call(R.parentNode.childNodes,R),R=R.parentNode);var H=document.createRange();H.setStart(_,E),H.setEnd(R,F),N.removeAllRanges(),N.addRange(H)}}else N.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(_){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b.default.sources.API;if(typeof E=="string"&&(R=E,E=!1),S.info("setRange",_),_!=null){var F=this.rangeToNative(_);this.setNativeRange.apply(this,x(F).concat([E]))}else this.setNativeRange(null);this.update(R)}},{key:"update",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b.default.sources.USER,E=this.lastRange,R=this.getRange(),F=o(R,2),L=F[0],N=F[1];if(this.lastRange=L,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,f.default)(E,this.lastRange)){var U;!this.composing&&N!=null&&N.native.collapsed&&N.start.node!==this.cursor.textNode&&this.cursor.restore();var H=[b.default.events.SELECTION_CHANGE,(0,u.default)(this.lastRange),(0,u.default)(E),_];if((U=this.emitter).emit.apply(U,[b.default.events.EDITOR_CHANGE].concat(H)),_!==b.default.sources.SILENT){var j;(j=this.emitter).emit.apply(j,H)}}}}]),M}();function P(M,T){try{T.parentNode}catch(_){return!1}return T instanceof Text&&(T=T.parentNode),M.contains(T)}r.Range=D,r.default=k},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function b(v,m){for(var g=0;g<m.length;g++){var x=m[g];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(v,x.key,x)}}return function(v,m,g){return m&&b(v.prototype,m),g&&b(v,g),v}}(),s=function b(v,m,g){v===null&&(v=Function.prototype);var x=Object.getOwnPropertyDescriptor(v,m);if(x===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:b(w,m,g)}else{if("value"in x)return x.value;var S=x.get;return S===void 0?void 0:S.call(g)}},a=i(0),l=c(a);function c(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function d(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function f(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var p=function(b){f(v,b);function v(){return u(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return o(v,[{key:"insertInto",value:function(g,x){g.children.length===0?s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertInto",this).call(this,g,x):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),v}(l.default.Embed);p.blotName="break",p.tagName="BR",r.default=p},function(n,r,i){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var b in p)p.hasOwnProperty(b)&&(f[b]=p[b])};return function(f,p){d(f,p);function b(){this.constructor=f}f.prototype=p===null?Object.create(p):(b.prototype=p.prototype,new b)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(44),a=i(30),l=i(1),c=function(d){o(f,d);function f(p){var b=d.call(this,p)||this;return b.build(),b}return f.prototype.appendChild=function(p){this.insertBefore(p)},f.prototype.attach=function(){d.prototype.attach.call(this),this.children.forEach(function(p){p.attach()})},f.prototype.build=function(){var p=this;this.children=new s.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(b){try{var v=u(b);p.insertBefore(v,p.children.head||void 0)}catch(m){if(m instanceof l.ParchmentError)return;throw m}})},f.prototype.deleteAt=function(p,b){if(p===0&&b===this.length())return this.remove();this.children.forEachAt(p,b,function(v,m,g){v.deleteAt(m,g)})},f.prototype.descendant=function(p,b){var v=this.children.find(b),m=v[0],g=v[1];return p.blotName==null&&p(m)||p.blotName!=null&&m instanceof p?[m,g]:m instanceof f?m.descendant(p,g):[null,-1]},f.prototype.descendants=function(p,b,v){b===void 0&&(b=0),v===void 0&&(v=Number.MAX_VALUE);var m=[],g=v;return this.children.forEachAt(b,v,function(x,w,S){(p.blotName==null&&p(x)||p.blotName!=null&&x instanceof p)&&m.push(x),x instanceof f&&(m=m.concat(x.descendants(p,w,g))),g-=S}),m},f.prototype.detach=function(){this.children.forEach(function(p){p.detach()}),d.prototype.detach.call(this)},f.prototype.formatAt=function(p,b,v,m){this.children.forEachAt(p,b,function(g,x,w){g.formatAt(x,w,v,m)})},f.prototype.insertAt=function(p,b,v){var m=this.children.find(p),g=m[0],x=m[1];if(g)g.insertAt(x,b,v);else{var w=v==null?l.create("text",b):l.create(b,v);this.appendChild(w)}},f.prototype.insertBefore=function(p,b){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(v){return p instanceof v}))throw new l.ParchmentError("Cannot insert "+p.statics.blotName+" into "+this.statics.blotName);p.insertInto(this,b)},f.prototype.length=function(){return this.children.reduce(function(p,b){return p+b.length()},0)},f.prototype.moveChildren=function(p,b){this.children.forEach(function(v){p.insertBefore(v,b)})},f.prototype.optimize=function(p){if(d.prototype.optimize.call(this,p),this.children.length===0)if(this.statics.defaultChild!=null){var b=l.create(this.statics.defaultChild);this.appendChild(b),b.optimize(p)}else this.remove()},f.prototype.path=function(p,b){b===void 0&&(b=!1);var v=this.children.find(p,b),m=v[0],g=v[1],x=[[this,p]];return m instanceof f?x.concat(m.path(g,b)):(m!=null&&x.push([m,g]),x)},f.prototype.removeChild=function(p){this.children.remove(p)},f.prototype.replace=function(p){p instanceof f&&p.moveChildren(this),d.prototype.replace.call(this,p)},f.prototype.split=function(p,b){if(b===void 0&&(b=!1),!b){if(p===0)return this;if(p===this.length())return this.next}var v=this.clone();return this.parent.insertBefore(v,this.next),this.children.forEachAt(p,this.length(),function(m,g,x){m=m.split(g,b),v.appendChild(m)}),v},f.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},f.prototype.update=function(p,b){var v=this,m=[],g=[];p.forEach(function(x){x.target===v.domNode&&x.type==="childList"&&(m.push.apply(m,x.addedNodes),g.push.apply(g,x.removedNodes))}),g.forEach(function(x){if(!(x.parentNode!=null&&x.tagName!=="IFRAME"&&document.body.compareDocumentPosition(x)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var w=l.find(x);w!=null&&(w.domNode.parentNode==null||w.domNode.parentNode===v.domNode)&&w.detach()}}),m.filter(function(x){return x.parentNode==v.domNode}).sort(function(x,w){return x===w?0:x.compareDocumentPosition(w)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(x){var w=null;x.nextSibling!=null&&(w=l.find(x.nextSibling));var S=u(x);(S.next!=w||S.next==null)&&(S.parent!=null&&S.parent.removeChild(v),v.insertBefore(S,w||void 0))})},f}(a.default);function u(d){var f=l.find(d);if(f==null)try{f=l.create(d)}catch(p){f=l.create(l.Scope.INLINE),[].slice.call(d.childNodes).forEach(function(b){f.domNode.appendChild(b)}),d.parentNode&&d.parentNode.replaceChild(f.domNode,d),f.attach()}return f}r.default=c},function(n,r,i){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var b in p)p.hasOwnProperty(b)&&(f[b]=p[b])};return function(f,p){d(f,p);function b(){this.constructor=f}f.prototype=p===null?Object.create(p):(b.prototype=p.prototype,new b)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12),a=i(31),l=i(17),c=i(1),u=function(d){o(f,d);function f(p){var b=d.call(this,p)||this;return b.attributes=new a.default(b.domNode),b}return f.formats=function(p){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return p.tagName.toLowerCase()},f.prototype.format=function(p,b){var v=c.query(p);v instanceof s.default?this.attributes.attribute(v,b):b&&v!=null&&(p!==this.statics.blotName||this.formats()[p]!==b)&&this.replaceWith(p,b)},f.prototype.formats=function(){var p=this.attributes.values(),b=this.statics.formats(this.domNode);return b!=null&&(p[this.statics.blotName]=b),p},f.prototype.replaceWith=function(p,b){var v=d.prototype.replaceWith.call(this,p,b);return this.attributes.copy(v),v},f.prototype.update=function(p,b){var v=this;d.prototype.update.call(this,p,b),p.some(function(m){return m.target===v.domNode&&m.type==="attributes"})&&this.attributes.build()},f.prototype.wrap=function(p,b){var v=d.prototype.wrap.call(this,p,b);return v instanceof f&&v.statics.scope===this.statics.scope&&this.attributes.move(v),v},f}(l.default);r.default=u},function(n,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var f in d)d.hasOwnProperty(f)&&(u[f]=d[f])};return function(u,d){c(u,d);function f(){this.constructor=u}u.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(30),a=i(1),l=function(c){o(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.value=function(d){return!0},u.prototype.index=function(d,f){return this.domNode===d||this.domNode.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(f,1):-1},u.prototype.position=function(d,f){var p=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return d>0&&(p+=1),[this.parent.domNode,p]},u.prototype.value=function(){var d;return d={},d[this.statics.blotName]=this.statics.value(this.domNode)||!0,d},u.scope=a.Scope.INLINE_BLOT,u}(s.default);r.default=l},function(n,r,i){var o=i(11),s=i(3),a={attributes:{compose:function(c,u,d){typeof c!="object"&&(c={}),typeof u!="object"&&(u={});var f=s(!0,{},u);d||(f=Object.keys(f).reduce(function(b,v){return f[v]!=null&&(b[v]=f[v]),b},{}));for(var p in c)c[p]!==void 0&&u[p]===void 0&&(f[p]=c[p]);return Object.keys(f).length>0?f:void 0},diff:function(c,u){typeof c!="object"&&(c={}),typeof u!="object"&&(u={});var d=Object.keys(c).concat(Object.keys(u)).reduce(function(f,p){return o(c[p],u[p])||(f[p]=u[p]===void 0?null:u[p]),f},{});return Object.keys(d).length>0?d:void 0},transform:function(c,u,d){if(typeof c!="object")return u;if(typeof u=="object"){if(!d)return u;var f=Object.keys(u).reduce(function(p,b){return c[b]===void 0&&(p[b]=u[b]),p},{});return Object.keys(f).length>0?f:void 0}}},iterator:function(c){return new l(c)},length:function(c){return typeof c.delete=="number"?c.delete:typeof c.retain=="number"?c.retain:typeof c.insert=="string"?c.insert.length:1}};function l(c){this.ops=c,this.index=0,this.offset=0}l.prototype.hasNext=function(){return this.peekLength()<1/0},l.prototype.next=function(c){c||(c=1/0);var u=this.ops[this.index];if(u){var d=this.offset,f=a.length(u);if(c>=f-d?(c=f-d,this.index+=1,this.offset=0):this.offset+=c,typeof u.delete=="number")return{delete:c};var p={};return u.attributes&&(p.attributes=u.attributes),typeof u.retain=="number"?p.retain=c:typeof u.insert=="string"?p.insert=u.insert.substr(d,c):p.insert=u.insert,p}else return{retain:1/0}},l.prototype.peek=function(){return this.ops[this.index]},l.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},l.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},l.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var c=this.offset,u=this.index,d=this.next(),f=this.ops.slice(this.index);return this.offset=c,this.index=u,[d].concat(f)}else return[]},n.exports=a},function(n,r){var i=function(){function o(v,m){return m!=null&&v instanceof m}var s;try{s=Map}catch(v){s=function(){}}var a;try{a=Set}catch(v){a=function(){}}var l;try{l=Promise}catch(v){l=function(){}}function c(v,m,g,x,w){typeof m=="object"&&(g=m.depth,x=m.prototype,w=m.includeNonEnumerable,m=m.circular);var S=[],D=[],k=typeof Buffer!="undefined";typeof m=="undefined"&&(m=!0),typeof g=="undefined"&&(g=1/0);function P(M,T){if(M===null)return null;if(T===0)return M;var _,E;if(typeof M!="object")return M;if(o(M,s))_=new s;else if(o(M,a))_=new a;else if(o(M,l))_=new l(function(q,$){M.then(function(K){q(P(K,T-1))},function(K){$(P(K,T-1))})});else if(c.__isArray(M))_=[];else if(c.__isRegExp(M))_=new RegExp(M.source,b(M)),M.lastIndex&&(_.lastIndex=M.lastIndex);else if(c.__isDate(M))_=new Date(M.getTime());else{if(k&&Buffer.isBuffer(M))return Buffer.allocUnsafe?_=Buffer.allocUnsafe(M.length):_=new Buffer(M.length),M.copy(_),_;o(M,Error)?_=Object.create(M):typeof x=="undefined"?(E=Object.getPrototypeOf(M),_=Object.create(E)):(_=Object.create(x),E=x)}if(m){var R=S.indexOf(M);if(R!=-1)return D[R];S.push(M),D.push(_)}o(M,s)&&M.forEach(function(q,$){var K=P($,T-1),G=P(q,T-1);_.set(K,G)}),o(M,a)&&M.forEach(function(q){var $=P(q,T-1);_.add($)});for(var F in M){var L;E&&(L=Object.getOwnPropertyDescriptor(E,F)),!(L&&L.set==null)&&(_[F]=P(M[F],T-1))}if(Object.getOwnPropertySymbols)for(var N=Object.getOwnPropertySymbols(M),F=0;F<N.length;F++){var U=N[F],H=Object.getOwnPropertyDescriptor(M,U);H&&!H.enumerable&&!w||(_[U]=P(M[U],T-1),H.enumerable||Object.defineProperty(_,U,{enumerable:!1}))}if(w)for(var j=Object.getOwnPropertyNames(M),F=0;F<j.length;F++){var z=j[F],H=Object.getOwnPropertyDescriptor(M,z);H&&H.enumerable||(_[z]=P(M[z],T-1),Object.defineProperty(_,z,{enumerable:!1}))}return _}return P(v,g)}c.clonePrototype=function(m){if(m===null)return null;var g=function(){};return g.prototype=m,new g};function u(v){return Object.prototype.toString.call(v)}c.__objToStr=u;function d(v){return typeof v=="object"&&u(v)==="[object Date]"}c.__isDate=d;function f(v){return typeof v=="object"&&u(v)==="[object Array]"}c.__isArray=f;function p(v){return typeof v=="object"&&u(v)==="[object RegExp]"}c.__isRegExp=p;function b(v){var m="";return v.global&&(m+="g"),v.ignoreCase&&(m+="i"),v.multiline&&(m+="m"),m}return c.__getRegExpFlags=b,c}();typeof n=="object"&&n.exports&&(n.exports=i)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function _(E,R){var F=[],L=!0,N=!1,U=void 0;try{for(var H=E[Symbol.iterator](),j;!(L=(j=H.next()).done)&&(F.push(j.value),!(R&&F.length===R));L=!0);}catch(z){N=!0,U=z}finally{try{!L&&H.return&&H.return()}finally{if(N)throw U}}return F}return function(E,R){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return _(E,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function _(E,R){for(var F=0;F<R.length;F++){var L=R[F];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(E,L.key,L)}}return function(E,R,F){return R&&_(E.prototype,R),F&&_(E,F),E}}(),a=function _(E,R,F){E===null&&(E=Function.prototype);var L=Object.getOwnPropertyDescriptor(E,R);if(L===void 0){var N=Object.getPrototypeOf(E);return N===null?void 0:_(N,R,F)}else{if("value"in L)return L.value;var U=L.get;return U===void 0?void 0:U.call(F)}},l=i(0),c=S(l),u=i(8),d=S(u),f=i(4),p=S(f),b=i(16),v=S(b),m=i(13),g=S(m),x=i(25),w=S(x);function S(_){return _&&_.__esModule?_:{default:_}}function D(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")}function k(_,E){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:_}function P(_,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);_.prototype=Object.create(E&&E.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(_,E):_.__proto__=E)}function M(_){return _ instanceof p.default||_ instanceof f.BlockEmbed}var T=function(_){P(E,_);function E(R,F){D(this,E);var L=k(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,R));return L.emitter=F.emitter,Array.isArray(F.whitelist)&&(L.whitelist=F.whitelist.reduce(function(N,U){return N[U]=!0,N},{})),L.domNode.addEventListener("DOMNodeInserted",function(){}),L.optimize(),L.enable(),L}return s(E,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(F,L){var N=this.line(F),U=o(N,2),H=U[0],j=U[1],z=this.line(F+L),q=o(z,1),$=q[0];if(a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"deleteAt",this).call(this,F,L),$!=null&&H!==$&&j>0){if(H instanceof f.BlockEmbed||$ instanceof f.BlockEmbed){this.optimize();return}if(H instanceof g.default){var K=H.newlineIndex(H.length(),!0);if(K>-1&&(H=H.split(K+1),H===$)){this.optimize();return}}else if($ instanceof g.default){var G=$.newlineIndex(0);G>-1&&$.split(G+1)}var Y=$.children.head instanceof v.default?null:$.children.head;H.moveChildren($,Y),H.remove()}this.optimize()}},{key:"enable",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",F)}},{key:"formatAt",value:function(F,L,N,U){this.whitelist!=null&&!this.whitelist[N]||(a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"formatAt",this).call(this,F,L,N,U),this.optimize())}},{key:"insertAt",value:function(F,L,N){if(!(N!=null&&this.whitelist!=null&&!this.whitelist[L])){if(F>=this.length())if(N==null||c.default.query(L,c.default.Scope.BLOCK)==null){var U=c.default.create(this.statics.defaultChild);this.appendChild(U),N==null&&L.endsWith(`
`)&&(L=L.slice(0,-1)),U.insertAt(0,L,N)}else{var H=c.default.create(L,N);this.appendChild(H)}else a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,F,L,N);this.optimize()}}},{key:"insertBefore",value:function(F,L){if(F.statics.scope===c.default.Scope.INLINE_BLOT){var N=c.default.create(this.statics.defaultChild);N.appendChild(F),F=N}a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,F,L)}},{key:"leaf",value:function(F){return this.path(F).pop()||[null,-1]}},{key:"line",value:function(F){return F===this.length()?this.line(F-1):this.descendant(M,F)}},{key:"lines",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,N=function U(H,j,z){var q=[],$=z;return H.children.forEachAt(j,z,function(K,G,Y){M(K)?q.push(K):K instanceof c.default.Container&&(q=q.concat(U(K,G,$))),$-=Y}),q};return N(this,F,L)}},{key:"optimize",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,F,L),F.length>0&&this.emitter.emit(d.default.events.SCROLL_OPTIMIZE,F,L))}},{key:"path",value:function(F){return a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"path",this).call(this,F).slice(1)}},{key:"update",value:function(F){if(this.batch!==!0){var L=d.default.sources.USER;typeof F=="string"&&(L=F),Array.isArray(F)||(F=this.observer.takeRecords()),F.length>0&&this.emitter.emit(d.default.events.SCROLL_BEFORE_UPDATE,L,F),a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"update",this).call(this,F.concat([])),F.length>0&&this.emitter.emit(d.default.events.SCROLL_UPDATE,L,F)}}}]),E}(c.default.Scroll);T.blotName="scroll",T.className="ql-editor",T.tagName="DIV",T.defaultChild="block",T.allowedChildren=[p.default,f.BlockEmbed,w.default],r.default=T},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},s=function(){function V(re,fe){var pe=[],ce=!0,xe=!1,Ae=void 0;try{for(var Ee=re[Symbol.iterator](),ee;!(ce=(ee=Ee.next()).done)&&(pe.push(ee.value),!(fe&&pe.length===fe));ce=!0);}catch(Oe){xe=!0,Ae=Oe}finally{try{!ce&&Ee.return&&Ee.return()}finally{if(xe)throw Ae}}return pe}return function(re,fe){if(Array.isArray(re))return re;if(Symbol.iterator in Object(re))return V(re,fe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function V(re,fe){for(var pe=0;pe<fe.length;pe++){var ce=fe[pe];ce.enumerable=ce.enumerable||!1,ce.configurable=!0,"value"in ce&&(ce.writable=!0),Object.defineProperty(re,ce.key,ce)}}return function(re,fe,pe){return fe&&V(re.prototype,fe),pe&&V(re,pe),re}}(),l=i(21),c=_(l),u=i(11),d=_(u),f=i(3),p=_(f),b=i(2),v=_(b),m=i(20),g=_(m),x=i(0),w=_(x),S=i(5),D=_(S),k=i(10),P=_(k),M=i(9),T=_(M);function _(V){return V&&V.__esModule?V:{default:V}}function E(V,re,fe){return re in V?Object.defineProperty(V,re,{value:fe,enumerable:!0,configurable:!0,writable:!0}):V[re]=fe,V}function R(V,re){if(!(V instanceof re))throw new TypeError("Cannot call a class as a function")}function F(V,re){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return re&&(typeof re=="object"||typeof re=="function")?re:V}function L(V,re){if(typeof re!="function"&&re!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof re);V.prototype=Object.create(re&&re.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),re&&(Object.setPrototypeOf?Object.setPrototypeOf(V,re):V.__proto__=re)}var N=(0,P.default)("quill:keyboard"),U=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",H=function(V){L(re,V),a(re,null,[{key:"match",value:function(pe,ce){return ce=J(ce),["altKey","ctrlKey","metaKey","shiftKey"].some(function(xe){return!!ce[xe]!==pe[xe]&&ce[xe]!==null})?!1:ce.key===(pe.which||pe.keyCode)}}]);function re(fe,pe){R(this,re);var ce=F(this,(re.__proto__||Object.getPrototypeOf(re)).call(this,fe,pe));return ce.bindings={},Object.keys(ce.options.bindings).forEach(function(xe){xe==="list autofill"&&fe.scroll.whitelist!=null&&!fe.scroll.whitelist.list||ce.options.bindings[xe]&&ce.addBinding(ce.options.bindings[xe])}),ce.addBinding({key:re.keys.ENTER,shiftKey:null},K),ce.addBinding({key:re.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ce.addBinding({key:re.keys.BACKSPACE},{collapsed:!0},z),ce.addBinding({key:re.keys.DELETE},{collapsed:!0},q)):(ce.addBinding({key:re.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},z),ce.addBinding({key:re.keys.DELETE},{collapsed:!0,suffix:/^.?$/},q)),ce.addBinding({key:re.keys.BACKSPACE},{collapsed:!1},$),ce.addBinding({key:re.keys.DELETE},{collapsed:!1},$),ce.addBinding({key:re.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},z),ce.listen(),ce}return a(re,[{key:"addBinding",value:function(pe){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},xe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ae=J(pe);if(Ae==null||Ae.key==null)return N.warn("Attempted to add invalid keyboard binding",Ae);typeof ce=="function"&&(ce={handler:ce}),typeof xe=="function"&&(xe={handler:xe}),Ae=(0,p.default)(Ae,ce,xe),this.bindings[Ae.key]=this.bindings[Ae.key]||[],this.bindings[Ae.key].push(Ae)}},{key:"listen",value:function(){var pe=this;this.quill.root.addEventListener("keydown",function(ce){if(!ce.defaultPrevented){var xe=ce.which||ce.keyCode,Ae=(pe.bindings[xe]||[]).filter(function(nt){return re.match(ce,nt)});if(Ae.length!==0){var Ee=pe.quill.getSelection();if(!(Ee==null||!pe.quill.hasFocus())){var ee=pe.quill.getLine(Ee.index),Oe=s(ee,2),le=Oe[0],me=Oe[1],ne=pe.quill.getLeaf(Ee.index),se=s(ne,2),ge=se[0],Q=se[1],W=Ee.length===0?[ge,Q]:pe.quill.getLeaf(Ee.index+Ee.length),ve=s(W,2),ue=ve[0],Me=ve[1],Pe=ge instanceof w.default.Text?ge.value().slice(0,Q):"",je=ue instanceof w.default.Text?ue.value().slice(Me):"",ke={collapsed:Ee.length===0,empty:Ee.length===0&&le.length()<=1,format:pe.quill.getFormat(Ee),offset:me,prefix:Pe,suffix:je},De=Ae.some(function(nt){if(nt.collapsed!=null&&nt.collapsed!==ke.collapsed||nt.empty!=null&&nt.empty!==ke.empty||nt.offset!=null&&nt.offset!==ke.offset)return!1;if(Array.isArray(nt.format)){if(nt.format.every(function(be){return ke.format[be]==null}))return!1}else if(o(nt.format)==="object"&&!Object.keys(nt.format).every(function(be){return nt.format[be]===!0?ke.format[be]!=null:nt.format[be]===!1?ke.format[be]==null:(0,d.default)(nt.format[be],ke.format[be])}))return!1;return nt.prefix!=null&&!nt.prefix.test(ke.prefix)||nt.suffix!=null&&!nt.suffix.test(ke.suffix)?!1:nt.handler.call(pe,Ee,ke)!==!0});De&&ce.preventDefault()}}}})}}]),re}(T.default);H.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},H.DEFAULTS={bindings:{bold:Y("bold"),italic:Y("italic"),underline:Y("underline"),indent:{key:H.keys.TAB,format:["blockquote","indent","list"],handler:function(re,fe){if(fe.collapsed&&fe.offset!==0)return!0;this.quill.format("indent","+1",D.default.sources.USER)}},outdent:{key:H.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(re,fe){if(fe.collapsed&&fe.offset!==0)return!0;this.quill.format("indent","-1",D.default.sources.USER)}},"outdent backspace":{key:H.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(re,fe){fe.format.indent!=null?this.quill.format("indent","-1",D.default.sources.USER):fe.format.list!=null&&this.quill.format("list",!1,D.default.sources.USER)}},"indent code-block":G(!0),"outdent code-block":G(!1),"remove tab":{key:H.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(re){this.quill.deleteText(re.index-1,1,D.default.sources.USER)}},tab:{key:H.keys.TAB,handler:function(re){this.quill.history.cutoff();var fe=new v.default().retain(re.index).delete(re.length).insert("	");this.quill.updateContents(fe,D.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(re.index+1,D.default.sources.SILENT)}},"list empty enter":{key:H.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(re,fe){this.quill.format("list",!1,D.default.sources.USER),fe.format.indent&&this.quill.format("indent",!1,D.default.sources.USER)}},"checklist enter":{key:H.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(re){var fe=this.quill.getLine(re.index),pe=s(fe,2),ce=pe[0],xe=pe[1],Ae=(0,p.default)({},ce.formats(),{list:"checked"}),Ee=new v.default().retain(re.index).insert(`
`,Ae).retain(ce.length()-xe-1).retain(1,{list:"unchecked"});this.quill.updateContents(Ee,D.default.sources.USER),this.quill.setSelection(re.index+1,D.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:H.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(re,fe){var pe=this.quill.getLine(re.index),ce=s(pe,2),xe=ce[0],Ae=ce[1],Ee=new v.default().retain(re.index).insert(`
`,fe.format).retain(xe.length()-Ae-1).retain(1,{header:null});this.quill.updateContents(Ee,D.default.sources.USER),this.quill.setSelection(re.index+1,D.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(re,fe){var pe=fe.prefix.length,ce=this.quill.getLine(re.index),xe=s(ce,2),Ae=xe[0],Ee=xe[1];if(Ee>pe)return!0;var ee=void 0;switch(fe.prefix.trim()){case"[]":case"[ ]":ee="unchecked";break;case"[x]":ee="checked";break;case"-":case"*":ee="bullet";break;default:ee="ordered"}this.quill.insertText(re.index," ",D.default.sources.USER),this.quill.history.cutoff();var Oe=new v.default().retain(re.index-Ee).delete(pe+1).retain(Ae.length()-2-Ee).retain(1,{list:ee});this.quill.updateContents(Oe,D.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(re.index-pe,D.default.sources.SILENT)}},"code exit":{key:H.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(re){var fe=this.quill.getLine(re.index),pe=s(fe,2),ce=pe[0],xe=pe[1],Ae=new v.default().retain(re.index+ce.length()-xe-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Ae,D.default.sources.USER)}},"embed left":j(H.keys.LEFT,!1),"embed left shift":j(H.keys.LEFT,!0),"embed right":j(H.keys.RIGHT,!1),"embed right shift":j(H.keys.RIGHT,!0)}};function j(V,re){var fe,pe=V===H.keys.LEFT?"prefix":"suffix";return fe={key:V,shiftKey:re,altKey:null},E(fe,pe,/^$/),E(fe,"handler",function(xe){var Ae=xe.index;V===H.keys.RIGHT&&(Ae+=xe.length+1);var Ee=this.quill.getLeaf(Ae),ee=s(Ee,1),Oe=ee[0];return Oe instanceof w.default.Embed?(V===H.keys.LEFT?re?this.quill.setSelection(xe.index-1,xe.length+1,D.default.sources.USER):this.quill.setSelection(xe.index-1,D.default.sources.USER):re?this.quill.setSelection(xe.index,xe.length+1,D.default.sources.USER):this.quill.setSelection(xe.index+xe.length+1,D.default.sources.USER),!1):!0}),fe}function z(V,re){if(!(V.index===0||this.quill.getLength()<=1)){var fe=this.quill.getLine(V.index),pe=s(fe,1),ce=pe[0],xe={};if(re.offset===0){var Ae=this.quill.getLine(V.index-1),Ee=s(Ae,1),ee=Ee[0];if(ee!=null&&ee.length()>1){var Oe=ce.formats(),le=this.quill.getFormat(V.index-1,1);xe=g.default.attributes.diff(Oe,le)||{}}}var me=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(re.prefix)?2:1;this.quill.deleteText(V.index-me,me,D.default.sources.USER),Object.keys(xe).length>0&&this.quill.formatLine(V.index-me,me,xe,D.default.sources.USER),this.quill.focus()}}function q(V,re){var fe=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(re.suffix)?2:1;if(!(V.index>=this.quill.getLength()-fe)){var pe={},ce=0,xe=this.quill.getLine(V.index),Ae=s(xe,1),Ee=Ae[0];if(re.offset>=Ee.length()-1){var ee=this.quill.getLine(V.index+1),Oe=s(ee,1),le=Oe[0];if(le){var me=Ee.formats(),ne=this.quill.getFormat(V.index,1);pe=g.default.attributes.diff(me,ne)||{},ce=le.length()}}this.quill.deleteText(V.index,fe,D.default.sources.USER),Object.keys(pe).length>0&&this.quill.formatLine(V.index+ce-1,fe,pe,D.default.sources.USER)}}function $(V){var re=this.quill.getLines(V),fe={};if(re.length>1){var pe=re[0].formats(),ce=re[re.length-1].formats();fe=g.default.attributes.diff(ce,pe)||{}}this.quill.deleteText(V,D.default.sources.USER),Object.keys(fe).length>0&&this.quill.formatLine(V.index,1,fe,D.default.sources.USER),this.quill.setSelection(V.index,D.default.sources.SILENT),this.quill.focus()}function K(V,re){var fe=this;V.length>0&&this.quill.scroll.deleteAt(V.index,V.length);var pe=Object.keys(re.format).reduce(function(ce,xe){return w.default.query(xe,w.default.Scope.BLOCK)&&!Array.isArray(re.format[xe])&&(ce[xe]=re.format[xe]),ce},{});this.quill.insertText(V.index,`
`,pe,D.default.sources.USER),this.quill.setSelection(V.index+1,D.default.sources.SILENT),this.quill.focus(),Object.keys(re.format).forEach(function(ce){pe[ce]==null&&(Array.isArray(re.format[ce])||ce!=="link"&&fe.quill.format(ce,re.format[ce],D.default.sources.USER))})}function G(V){return{key:H.keys.TAB,shiftKey:!V,format:{"code-block":!0},handler:function(fe){var pe=w.default.query("code-block"),ce=fe.index,xe=fe.length,Ae=this.quill.scroll.descendant(pe,ce),Ee=s(Ae,2),ee=Ee[0],Oe=Ee[1];if(ee!=null){var le=this.quill.getIndex(ee),me=ee.newlineIndex(Oe,!0)+1,ne=ee.newlineIndex(le+Oe+xe),se=ee.domNode.textContent.slice(me,ne).split(`
`);Oe=0,se.forEach(function(ge,Q){V?(ee.insertAt(me+Oe,pe.TAB),Oe+=pe.TAB.length,Q===0?ce+=pe.TAB.length:xe+=pe.TAB.length):ge.startsWith(pe.TAB)&&(ee.deleteAt(me+Oe,pe.TAB.length),Oe-=pe.TAB.length,Q===0?ce-=pe.TAB.length:xe-=pe.TAB.length),Oe+=ge.length+1}),this.quill.update(D.default.sources.USER),this.quill.setSelection(ce,xe,D.default.sources.SILENT)}}}}function Y(V){return{key:V[0].toUpperCase(),shortKey:!0,handler:function(fe,pe){this.quill.format(V,!pe.format[V],D.default.sources.USER)}}}function J(V){if(typeof V=="string"||typeof V=="number")return J({key:V});if((typeof V=="undefined"?"undefined":o(V))==="object"&&(V=(0,c.default)(V,!1)),typeof V.key=="string")if(H.keys[V.key.toUpperCase()]!=null)V.key=H.keys[V.key.toUpperCase()];else if(V.key.length===1)V.key=V.key.toUpperCase().charCodeAt(0);else return null;return V.shortKey&&(V[U]=V.shortKey,delete V.shortKey),V}r.default=H,r.SHORTKEY=U},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function g(x,w){var S=[],D=!0,k=!1,P=void 0;try{for(var M=x[Symbol.iterator](),T;!(D=(T=M.next()).done)&&(S.push(T.value),!(w&&S.length===w));D=!0);}catch(_){k=!0,P=_}finally{try{!D&&M.return&&M.return()}finally{if(k)throw P}}return S}return function(x,w){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return g(x,w);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function g(x,w,S){x===null&&(x=Function.prototype);var D=Object.getOwnPropertyDescriptor(x,w);if(D===void 0){var k=Object.getPrototypeOf(x);return k===null?void 0:g(k,w,S)}else{if("value"in D)return D.value;var P=D.get;return P===void 0?void 0:P.call(S)}},a=function(){function g(x,w){for(var S=0;S<w.length;S++){var D=w[S];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(x,D.key,D)}}return function(x,w,S){return w&&g(x.prototype,w),S&&g(x,S),x}}(),l=i(0),c=f(l),u=i(7),d=f(u);function f(g){return g&&g.__esModule?g:{default:g}}function p(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function b(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function v(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var m=function(g){v(x,g),a(x,null,[{key:"value",value:function(){}}]);function x(w,S){p(this,x);var D=b(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,w));return D.selection=S,D.textNode=document.createTextNode(x.CONTENTS),D.domNode.appendChild(D.textNode),D._length=0,D}return a(x,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(S,D){if(this._length!==0)return s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"format",this).call(this,S,D);for(var k=this,P=0;k!=null&&k.statics.scope!==c.default.Scope.BLOCK_BLOT;)P+=k.offset(k.parent),k=k.parent;k!=null&&(this._length=x.CONTENTS.length,k.optimize(),k.formatAt(P,x.CONTENTS.length,S,D),this._length=0)}},{key:"index",value:function(S,D){return S===this.textNode?0:s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"index",this).call(this,S,D)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var S=this.textNode,D=this.selection.getNativeRange(),k=void 0,P=void 0,M=void 0;if(D!=null&&D.start.node===S&&D.end.node===S){var T=[S,D.start.offset,D.end.offset];k=T[0],P=T[1],M=T[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==x.CONTENTS){var _=this.textNode.data.split(x.CONTENTS).join("");this.next instanceof d.default?(k=this.next.domNode,this.next.insertAt(0,_),this.textNode.data=x.CONTENTS):(this.textNode.data=_,this.parent.insertBefore(c.default.create(this.textNode),this),this.textNode=document.createTextNode(x.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),P!=null){var E=[P,M].map(function(F){return Math.max(0,Math.min(k.data.length,F-1))}),R=o(E,2);return P=R[0],M=R[1],{startNode:k,startOffset:P,endNode:k,endOffset:M}}}}},{key:"update",value:function(S,D){var k=this;if(S.some(function(M){return M.type==="characterData"&&M.target===k.textNode})){var P=this.restore();P&&(D.range=P)}}},{key:"value",value:function(){return""}}]),x}(c.default.Embed);m.blotName="cursor",m.className="ql-cursor",m.tagName="span",m.CONTENTS="\uFEFF",r.default=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),s=c(o),a=i(4),l=c(a);function c(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function d(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function f(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var p=function(b){f(v,b);function v(){return u(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return v}(s.default.Container);p.allowedChildren=[l.default,a.BlockEmbed,p],r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var o=function(){function m(g,x){for(var w=0;w<x.length;w++){var S=x[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,S.key,S)}}return function(g,x,w){return x&&m(g.prototype,x),w&&m(g,w),g}}(),s=function m(g,x,w){g===null&&(g=Function.prototype);var S=Object.getOwnPropertyDescriptor(g,x);if(S===void 0){var D=Object.getPrototypeOf(g);return D===null?void 0:m(D,x,w)}else{if("value"in S)return S.value;var k=S.get;return k===void 0?void 0:k.call(w)}},a=i(0),l=c(a);function c(m){return m&&m.__esModule?m:{default:m}}function u(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function d(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function f(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var p=function(m){f(g,m);function g(){return u(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"value",value:function(w){var S=s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,w);return S.startsWith("rgb(")?(S=S.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+S.split(",").map(function(D){return("00"+parseInt(D).toString(16)).slice(-2)}).join("")):S}}]),g}(l.default.Attributor.Style),b=new l.default.Attributor.Class("color","ql-color",{scope:l.default.Scope.INLINE}),v=new p("color","color",{scope:l.default.Scope.INLINE});r.ColorAttributor=p,r.ColorClass=b,r.ColorStyle=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var o=function(){function v(m,g){for(var x=0;x<g.length;x++){var w=g[x];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(m,w.key,w)}}return function(m,g,x){return g&&v(m.prototype,g),x&&v(m,x),m}}(),s=function v(m,g,x){m===null&&(m=Function.prototype);var w=Object.getOwnPropertyDescriptor(m,g);if(w===void 0){var S=Object.getPrototypeOf(m);return S===null?void 0:v(S,g,x)}else{if("value"in w)return w.value;var D=w.get;return D===void 0?void 0:D.call(x)}},a=i(6),l=c(a);function c(v){return v&&v.__esModule?v:{default:v}}function u(v,m){if(!(v instanceof m))throw new TypeError("Cannot call a class as a function")}function d(v,m){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:v}function f(v,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);v.prototype=Object.create(m&&m.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(v,m):v.__proto__=m)}var p=function(v){f(m,v);function m(){return u(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"format",value:function(x,w){if(x!==this.statics.blotName||!w)return s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,x,w);w=this.constructor.sanitize(w),this.domNode.setAttribute("href",w)}}],[{key:"create",value:function(x){var w=s(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,x);return x=this.sanitize(x),w.setAttribute("href",x),w.setAttribute("rel","noopener noreferrer"),w.setAttribute("target","_blank"),w}},{key:"formats",value:function(x){return x.getAttribute("href")}},{key:"sanitize",value:function(x){return b(x,this.PROTOCOL_WHITELIST)?x:this.SANITIZED_URL}}]),m}(l.default);p.blotName="link",p.tagName="A",p.SANITIZED_URL="about:blank",p.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function b(v,m){var g=document.createElement("a");g.href=v;var x=g.href.slice(0,g.href.indexOf(":"));return m.indexOf(x)>-1}r.default=p,r.sanitize=b},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},s=function(){function m(g,x){for(var w=0;w<x.length;w++){var S=x[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,S.key,S)}}return function(g,x,w){return x&&m(g.prototype,x),w&&m(g,w),g}}(),a=i(23),l=d(a),c=i(107),u=d(c);function d(m){return m&&m.__esModule?m:{default:m}}function f(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}var p=0;function b(m,g){m.setAttribute(g,m.getAttribute(g)!=="true")}var v=function(){function m(g){var x=this;f(this,m),this.select=g,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){x.togglePicker()}),this.label.addEventListener("keydown",function(w){switch(w.keyCode){case l.default.keys.ENTER:x.togglePicker();break;case l.default.keys.ESCAPE:x.escape(),w.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return s(m,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),b(this.label,"aria-expanded"),b(this.options,"aria-hidden")}},{key:"buildItem",value:function(x){var w=this,S=document.createElement("span");return S.tabIndex="0",S.setAttribute("role","button"),S.classList.add("ql-picker-item"),x.hasAttribute("value")&&S.setAttribute("data-value",x.getAttribute("value")),x.textContent&&S.setAttribute("data-label",x.textContent),S.addEventListener("click",function(){w.selectItem(S,!0)}),S.addEventListener("keydown",function(D){switch(D.keyCode){case l.default.keys.ENTER:w.selectItem(S,!0),D.preventDefault();break;case l.default.keys.ESCAPE:w.escape(),D.preventDefault();break}}),S}},{key:"buildLabel",value:function(){var x=document.createElement("span");return x.classList.add("ql-picker-label"),x.innerHTML=u.default,x.tabIndex="0",x.setAttribute("role","button"),x.setAttribute("aria-expanded","false"),this.container.appendChild(x),x}},{key:"buildOptions",value:function(){var x=this,w=document.createElement("span");w.classList.add("ql-picker-options"),w.setAttribute("aria-hidden","true"),w.tabIndex="-1",w.id="ql-picker-options-"+p,p+=1,this.label.setAttribute("aria-controls",w.id),this.options=w,[].slice.call(this.select.options).forEach(function(S){var D=x.buildItem(S);w.appendChild(D),S.selected===!0&&x.selectItem(D)}),this.container.appendChild(w)}},{key:"buildPicker",value:function(){var x=this;[].slice.call(this.select.attributes).forEach(function(w){x.container.setAttribute(w.name,w.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var x=this;this.close(),setTimeout(function(){return x.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(x){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,S=this.container.querySelector(".ql-selected");if(x!==S&&(S!=null&&S.classList.remove("ql-selected"),x!=null&&(x.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(x.parentNode.children,x),x.hasAttribute("data-value")?this.label.setAttribute("data-value",x.getAttribute("data-value")):this.label.removeAttribute("data-value"),x.hasAttribute("data-label")?this.label.setAttribute("data-label",x.getAttribute("data-label")):this.label.removeAttribute("data-label"),w))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event=="undefined"?"undefined":o(Event))==="object"){var D=document.createEvent("Event");D.initEvent("change",!0,!0),this.select.dispatchEvent(D)}this.close()}}},{key:"update",value:function(){var x=void 0;if(this.select.selectedIndex>-1){var w=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];x=this.select.options[this.select.selectedIndex],this.selectItem(w)}else this.selectItem(null);var S=x!=null&&x!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",S)}}]),m}();r.default=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),s=N(o),a=i(5),l=N(a),c=i(4),u=N(c),d=i(16),f=N(d),p=i(25),b=N(p),v=i(24),m=N(v),g=i(35),x=N(g),w=i(6),S=N(w),D=i(22),k=N(D),P=i(7),M=N(P),T=i(55),_=N(T),E=i(42),R=N(E),F=i(23),L=N(F);function N(U){return U&&U.__esModule?U:{default:U}}l.default.register({"blots/block":u.default,"blots/block/embed":c.BlockEmbed,"blots/break":f.default,"blots/container":b.default,"blots/cursor":m.default,"blots/embed":x.default,"blots/inline":S.default,"blots/scroll":k.default,"blots/text":M.default,"modules/clipboard":_.default,"modules/history":R.default,"modules/keyboard":L.default}),s.default.register(u.default,f.default,m.default,S.default,k.default,M.default),r.default=l.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(1),s=function(){function a(l){this.domNode=l,this.domNode[o.DATA_KEY]={blot:this}}return Object.defineProperty(a.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),a.create=function(l){if(this.tagName==null)throw new o.ParchmentError("Blot definition missing tagName");var c;return Array.isArray(this.tagName)?(typeof l=="string"&&(l=l.toUpperCase(),parseInt(l).toString()===l&&(l=parseInt(l))),typeof l=="number"?c=document.createElement(this.tagName[l-1]):this.tagName.indexOf(l)>-1?c=document.createElement(l):c=document.createElement(this.tagName[0])):c=document.createElement(this.tagName),this.className&&c.classList.add(this.className),c},a.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},a.prototype.clone=function(){var l=this.domNode.cloneNode(!1);return o.create(l)},a.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[o.DATA_KEY]},a.prototype.deleteAt=function(l,c){var u=this.isolate(l,c);u.remove()},a.prototype.formatAt=function(l,c,u,d){var f=this.isolate(l,c);if(o.query(u,o.Scope.BLOT)!=null&&d)f.wrap(u,d);else if(o.query(u,o.Scope.ATTRIBUTE)!=null){var p=o.create(this.statics.scope);f.wrap(p),p.format(u,d)}},a.prototype.insertAt=function(l,c,u){var d=u==null?o.create("text",c):o.create(c,u),f=this.split(l);this.parent.insertBefore(d,f)},a.prototype.insertInto=function(l,c){c===void 0&&(c=null),this.parent!=null&&this.parent.children.remove(this);var u=null;l.children.insertBefore(this,c),c!=null&&(u=c.domNode),(this.domNode.parentNode!=l.domNode||this.domNode.nextSibling!=u)&&l.domNode.insertBefore(this.domNode,u),this.parent=l,this.attach()},a.prototype.isolate=function(l,c){var u=this.split(l);return u.split(c),u},a.prototype.length=function(){return 1},a.prototype.offset=function(l){return l===void 0&&(l=this.parent),this.parent==null||this==l?0:this.parent.children.offset(this)+this.parent.offset(l)},a.prototype.optimize=function(l){this.domNode[o.DATA_KEY]!=null&&delete this.domNode[o.DATA_KEY].mutations},a.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},a.prototype.replace=function(l){l.parent!=null&&(l.parent.insertBefore(this,l.next),l.remove())},a.prototype.replaceWith=function(l,c){var u=typeof l=="string"?o.create(l,c):l;return u.replace(this),u},a.prototype.split=function(l,c){return l===0?this:this.next},a.prototype.update=function(l,c){},a.prototype.wrap=function(l,c){var u=typeof l=="string"?o.create(l,c):l;return this.parent!=null&&this.parent.insertBefore(u,this.next),u.appendChild(this),u},a.blotName="abstract",a}();r.default=s},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(12),s=i(32),a=i(33),l=i(1),c=function(){function u(d){this.attributes={},this.domNode=d,this.build()}return u.prototype.attribute=function(d,f){f?d.add(this.domNode,f)&&(d.value(this.domNode)!=null?this.attributes[d.attrName]=d:delete this.attributes[d.attrName]):(d.remove(this.domNode),delete this.attributes[d.attrName])},u.prototype.build=function(){var d=this;this.attributes={};var f=o.default.keys(this.domNode),p=s.default.keys(this.domNode),b=a.default.keys(this.domNode);f.concat(p).concat(b).forEach(function(v){var m=l.query(v,l.Scope.ATTRIBUTE);m instanceof o.default&&(d.attributes[m.attrName]=m)})},u.prototype.copy=function(d){var f=this;Object.keys(this.attributes).forEach(function(p){var b=f.attributes[p].value(f.domNode);d.format(p,b)})},u.prototype.move=function(d){var f=this;this.copy(d),Object.keys(this.attributes).forEach(function(p){f.attributes[p].remove(f.domNode)}),this.attributes={}},u.prototype.values=function(){var d=this;return Object.keys(this.attributes).reduce(function(f,p){return f[p]=d.attributes[p].value(d.domNode),f},{})},u}();r.default=c},function(n,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var f in d)d.hasOwnProperty(f)&&(u[f]=d[f])};return function(u,d){c(u,d);function f(){this.constructor=u}u.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12);function a(c,u){var d=c.getAttribute("class")||"";return d.split(/\s+/).filter(function(f){return f.indexOf(u+"-")===0})}var l=function(c){o(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.keys=function(d){return(d.getAttribute("class")||"").split(/\s+/).map(function(f){return f.split("-").slice(0,-1).join("-")})},u.prototype.add=function(d,f){return this.canAdd(d,f)?(this.remove(d),d.classList.add(this.keyName+"-"+f),!0):!1},u.prototype.remove=function(d){var f=a(d,this.keyName);f.forEach(function(p){d.classList.remove(p)}),d.classList.length===0&&d.removeAttribute("class")},u.prototype.value=function(d){var f=a(d,this.keyName)[0]||"",p=f.slice(this.keyName.length+1);return this.canAdd(d,p)?p:""},u}(s.default);r.default=l},function(n,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var f in d)d.hasOwnProperty(f)&&(u[f]=d[f])};return function(u,d){c(u,d);function f(){this.constructor=u}u.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12);function a(c){var u=c.split("-"),d=u.slice(1).map(function(f){return f[0].toUpperCase()+f.slice(1)}).join("");return u[0]+d}var l=function(c){o(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.keys=function(d){return(d.getAttribute("style")||"").split(";").map(function(f){var p=f.split(":");return p[0].trim()})},u.prototype.add=function(d,f){return this.canAdd(d,f)?(d.style[a(this.keyName)]=f,!0):!1},u.prototype.remove=function(d){d.style[a(this.keyName)]="",d.getAttribute("style")||d.removeAttribute("style")},u.prototype.value=function(d){var f=d.style[a(this.keyName)];return this.canAdd(d,f)?f:""},u}(s.default);r.default=l},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function l(c,u){for(var d=0;d<u.length;d++){var f=u[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}return function(c,u,d){return u&&l(c.prototype,u),d&&l(c,d),c}}();function s(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var a=function(){function l(c,u){s(this,l),this.quill=c,this.options=u,this.modules={}}return o(l,[{key:"init",value:function(){var u=this;Object.keys(this.options.modules).forEach(function(d){u.modules[d]==null&&u.addModule(d)})}},{key:"addModule",value:function(u){var d=this.quill.constructor.import("modules/"+u);return this.modules[u]=new d(this.quill,this.options.modules[u]||{}),this.modules[u]}}]),l}();a.DEFAULTS={modules:{}},a.themes={default:a},r.default=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function g(x,w){for(var S=0;S<w.length;S++){var D=w[S];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(x,D.key,D)}}return function(x,w,S){return w&&g(x.prototype,w),S&&g(x,S),x}}(),s=function g(x,w,S){x===null&&(x=Function.prototype);var D=Object.getOwnPropertyDescriptor(x,w);if(D===void 0){var k=Object.getPrototypeOf(x);return k===null?void 0:g(k,w,S)}else{if("value"in D)return D.value;var P=D.get;return P===void 0?void 0:P.call(S)}},a=i(0),l=d(a),c=i(7),u=d(c);function d(g){return g&&g.__esModule?g:{default:g}}function f(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function p(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function b(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var v="\uFEFF",m=function(g){b(x,g);function x(w){f(this,x);var S=p(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,w));return S.contentNode=document.createElement("span"),S.contentNode.setAttribute("contenteditable",!1),[].slice.call(S.domNode.childNodes).forEach(function(D){S.contentNode.appendChild(D)}),S.leftGuard=document.createTextNode(v),S.rightGuard=document.createTextNode(v),S.domNode.appendChild(S.leftGuard),S.domNode.appendChild(S.contentNode),S.domNode.appendChild(S.rightGuard),S}return o(x,[{key:"index",value:function(S,D){return S===this.leftGuard?0:S===this.rightGuard?1:s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"index",this).call(this,S,D)}},{key:"restore",value:function(S){var D=void 0,k=void 0,P=S.data.split(v).join("");if(S===this.leftGuard)if(this.prev instanceof u.default){var M=this.prev.length();this.prev.insertAt(M,P),D={startNode:this.prev.domNode,startOffset:M+P.length}}else k=document.createTextNode(P),this.parent.insertBefore(l.default.create(k),this),D={startNode:k,startOffset:P.length};else S===this.rightGuard&&(this.next instanceof u.default?(this.next.insertAt(0,P),D={startNode:this.next.domNode,startOffset:P.length}):(k=document.createTextNode(P),this.parent.insertBefore(l.default.create(k),this.next),D={startNode:k,startOffset:P.length}));return S.data=v,D}},{key:"update",value:function(S,D){var k=this;S.forEach(function(P){if(P.type==="characterData"&&(P.target===k.leftGuard||P.target===k.rightGuard)){var M=k.restore(P.target);M&&(D.range=M)}})}}]),x}(l.default.Embed);r.default=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var o=i(0),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}var l={scope:s.default.Scope.BLOCK,whitelist:["right","center","justify"]},c=new s.default.Attributor.Attribute("align","align",l),u=new s.default.Attributor.Class("align","ql-align",l),d=new s.default.Attributor.Style("align","text-align",l);r.AlignAttribute=c,r.AlignClass=u,r.AlignStyle=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var o=i(0),s=l(o),a=i(26);function l(d){return d&&d.__esModule?d:{default:d}}var c=new s.default.Attributor.Class("background","ql-bg",{scope:s.default.Scope.INLINE}),u=new a.ColorAttributor("background","background-color",{scope:s.default.Scope.INLINE});r.BackgroundClass=c,r.BackgroundStyle=u},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var o=i(0),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}var l={scope:s.default.Scope.BLOCK,whitelist:["rtl"]},c=new s.default.Attributor.Attribute("direction","dir",l),u=new s.default.Attributor.Class("direction","ql-direction",l),d=new s.default.Attributor.Style("direction","direction",l);r.DirectionAttribute=c,r.DirectionClass=u,r.DirectionStyle=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var o=function(){function g(x,w){for(var S=0;S<w.length;S++){var D=w[S];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(x,D.key,D)}}return function(x,w,S){return w&&g(x.prototype,w),S&&g(x,S),x}}(),s=function g(x,w,S){x===null&&(x=Function.prototype);var D=Object.getOwnPropertyDescriptor(x,w);if(D===void 0){var k=Object.getPrototypeOf(x);return k===null?void 0:g(k,w,S)}else{if("value"in D)return D.value;var P=D.get;return P===void 0?void 0:P.call(S)}},a=i(0),l=c(a);function c(g){return g&&g.__esModule?g:{default:g}}function u(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function d(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function f(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var p={scope:l.default.Scope.INLINE,whitelist:["serif","monospace"]},b=new l.default.Attributor.Class("font","ql-font",p),v=function(g){f(x,g);function x(){return u(this,x),d(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return o(x,[{key:"value",value:function(S){return s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"value",this).call(this,S).replace(/["']/g,"")}}]),x}(l.default.Attributor.Style),m=new v("font","font-family",p);r.FontStyle=m,r.FontClass=b},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var o=i(0),s=a(o);function a(u){return u&&u.__esModule?u:{default:u}}var l=new s.default.Attributor.Class("size","ql-size",{scope:s.default.Scope.INLINE,whitelist:["small","large","huge"]}),c=new s.default.Attributor.Style("size","font-size",{scope:s.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=l,r.SizeStyle=c},function(n,r,i){n.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var o=function(){function w(S,D){for(var k=0;k<D.length;k++){var P=D[k];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(S,P.key,P)}}return function(S,D,k){return D&&w(S.prototype,D),k&&w(S,k),S}}(),s=i(0),a=f(s),l=i(5),c=f(l),u=i(9),d=f(u);function f(w){return w&&w.__esModule?w:{default:w}}function p(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function b(w,S){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:w}function v(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(w,S):w.__proto__=S)}var m=function(w){v(S,w);function S(D,k){p(this,S);var P=b(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,D,k));return P.lastRecorded=0,P.ignoreChange=!1,P.clear(),P.quill.on(c.default.events.EDITOR_CHANGE,function(M,T,_,E){M!==c.default.events.TEXT_CHANGE||P.ignoreChange||(!P.options.userOnly||E===c.default.sources.USER?P.record(T,_):P.transform(T))}),P.quill.keyboard.addBinding({key:"Z",shortKey:!0},P.undo.bind(P)),P.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},P.redo.bind(P)),/Win/i.test(navigator.platform)&&P.quill.keyboard.addBinding({key:"Y",shortKey:!0},P.redo.bind(P)),P}return o(S,[{key:"change",value:function(k,P){if(this.stack[k].length!==0){var M=this.stack[k].pop();this.stack[P].push(M),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(M[k],c.default.sources.USER),this.ignoreChange=!1;var T=x(M[k]);this.quill.setSelection(T)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(k,P){if(k.ops.length!==0){this.stack.redo=[];var M=this.quill.getContents().diff(P),T=Date.now();if(this.lastRecorded+this.options.delay>T&&this.stack.undo.length>0){var _=this.stack.undo.pop();M=M.compose(_.undo),k=_.redo.compose(k)}else this.lastRecorded=T;this.stack.undo.push({redo:k,undo:M}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(k){this.stack.undo.forEach(function(P){P.undo=k.transform(P.undo,!0),P.redo=k.transform(P.redo,!0)}),this.stack.redo.forEach(function(P){P.undo=k.transform(P.undo,!0),P.redo=k.transform(P.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),S}(d.default);m.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function g(w){var S=w.ops[w.ops.length-1];return S==null?!1:S.insert!=null?typeof S.insert=="string"&&S.insert.endsWith(`
`):S.attributes!=null?Object.keys(S.attributes).some(function(D){return a.default.query(D,a.default.Scope.BLOCK)!=null}):!1}function x(w){var S=w.reduce(function(k,P){return k+=P.delete||0,k},0),D=w.length()-S;return g(w)&&(D-=1),D}r.default=m,r.getLastChangeIndex=x},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var o=function(){function K(G,Y){for(var J=0;J<Y.length;J++){var V=Y[J];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(G,V.key,V)}}return function(G,Y,J){return Y&&K(G.prototype,Y),J&&K(G,J),G}}(),s=function K(G,Y,J){G===null&&(G=Function.prototype);var V=Object.getOwnPropertyDescriptor(G,Y);if(V===void 0){var re=Object.getPrototypeOf(G);return re===null?void 0:K(re,Y,J)}else{if("value"in V)return V.value;var fe=V.get;return fe===void 0?void 0:fe.call(J)}},a=i(3),l=T(a),c=i(2),u=T(c),d=i(8),f=T(d),p=i(23),b=T(p),v=i(34),m=T(v),g=i(59),x=T(g),w=i(60),S=T(w),D=i(28),k=T(D),P=i(61),M=T(P);function T(K){return K&&K.__esModule?K:{default:K}}function _(K,G){if(!(K instanceof G))throw new TypeError("Cannot call a class as a function")}function E(K,G){if(!K)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G&&(typeof G=="object"||typeof G=="function")?G:K}function R(K,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof G);K.prototype=Object.create(G&&G.prototype,{constructor:{value:K,enumerable:!1,writable:!0,configurable:!0}}),G&&(Object.setPrototypeOf?Object.setPrototypeOf(K,G):K.__proto__=G)}var F=[!1,"center","right","justify"],L=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],N=[!1,"serif","monospace"],U=["1","2","3",!1],H=["small",!1,"large","huge"],j=function(K){R(G,K);function G(Y,J){_(this,G);var V=E(this,(G.__proto__||Object.getPrototypeOf(G)).call(this,Y,J)),re=function fe(pe){if(!document.body.contains(Y.root))return document.body.removeEventListener("click",fe);V.tooltip!=null&&!V.tooltip.root.contains(pe.target)&&document.activeElement!==V.tooltip.textbox&&!V.quill.hasFocus()&&V.tooltip.hide(),V.pickers!=null&&V.pickers.forEach(function(ce){ce.container.contains(pe.target)||ce.close()})};return Y.emitter.listenDOM("click",document.body,re),V}return o(G,[{key:"addModule",value:function(J){var V=s(G.prototype.__proto__||Object.getPrototypeOf(G.prototype),"addModule",this).call(this,J);return J==="toolbar"&&this.extendToolbar(V),V}},{key:"buildButtons",value:function(J,V){J.forEach(function(re){var fe=re.getAttribute("class")||"";fe.split(/\s+/).forEach(function(pe){if(pe.startsWith("ql-")&&(pe=pe.slice(3),V[pe]!=null))if(pe==="direction")re.innerHTML=V[pe][""]+V[pe].rtl;else if(typeof V[pe]=="string")re.innerHTML=V[pe];else{var ce=re.value||"";ce!=null&&V[pe][ce]&&(re.innerHTML=V[pe][ce])}})})}},{key:"buildPickers",value:function(J,V){var re=this;this.pickers=J.map(function(pe){if(pe.classList.contains("ql-align"))return pe.querySelector("option")==null&&$(pe,F),new S.default(pe,V.align);if(pe.classList.contains("ql-background")||pe.classList.contains("ql-color")){var ce=pe.classList.contains("ql-background")?"background":"color";return pe.querySelector("option")==null&&$(pe,L,ce==="background"?"#ffffff":"#000000"),new x.default(pe,V[ce])}else return pe.querySelector("option")==null&&(pe.classList.contains("ql-font")?$(pe,N):pe.classList.contains("ql-header")?$(pe,U):pe.classList.contains("ql-size")&&$(pe,H)),new k.default(pe)});var fe=function(){re.pickers.forEach(function(ce){ce.update()})};this.quill.on(f.default.events.EDITOR_CHANGE,fe)}}]),G}(m.default);j.DEFAULTS=(0,l.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var G=this,Y=this.container.querySelector("input.ql-image[type=file]");Y==null&&(Y=document.createElement("input"),Y.setAttribute("type","file"),Y.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),Y.classList.add("ql-image"),Y.addEventListener("change",function(){if(Y.files!=null&&Y.files[0]!=null){var J=new FileReader;J.onload=function(V){var re=G.quill.getSelection(!0);G.quill.updateContents(new u.default().retain(re.index).delete(re.length).insert({image:V.target.result}),f.default.sources.USER),G.quill.setSelection(re.index+1,f.default.sources.SILENT),Y.value=""},J.readAsDataURL(Y.files[0])}}),this.container.appendChild(Y)),Y.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var z=function(K){R(G,K);function G(Y,J){_(this,G);var V=E(this,(G.__proto__||Object.getPrototypeOf(G)).call(this,Y,J));return V.textbox=V.root.querySelector('input[type="text"]'),V.listen(),V}return o(G,[{key:"listen",value:function(){var J=this;this.textbox.addEventListener("keydown",function(V){b.default.match(V,"enter")?(J.save(),V.preventDefault()):b.default.match(V,"escape")&&(J.cancel(),V.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),V!=null?this.textbox.value=V:J!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+J)||""),this.root.setAttribute("data-mode",J)}},{key:"restoreFocus",value:function(){var J=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=J}},{key:"save",value:function(){var J=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var V=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",J,f.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",J,f.default.sources.USER)),this.quill.root.scrollTop=V;break}case"video":J=q(J);case"formula":{if(!J)break;var re=this.quill.getSelection(!0);if(re!=null){var fe=re.index+re.length;this.quill.insertEmbed(fe,this.root.getAttribute("data-mode"),J,f.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(fe+1," ",f.default.sources.USER),this.quill.setSelection(fe+2,f.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),G}(M.default);function q(K){var G=K.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||K.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return G?(G[1]||"https")+"://www.youtube.com/embed/"+G[2]+"?showinfo=0":(G=K.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(G[1]||"https")+"://player.vimeo.com/video/"+G[2]+"/":K}function $(K,G){var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;G.forEach(function(J){var V=document.createElement("option");J===Y?V.setAttribute("selected","selected"):V.setAttribute("value",J),K.appendChild(V)})}r.BaseTooltip=z,r.default=j},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function s(){this.head=this.tail=null,this.length=0}return s.prototype.append=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];this.insertBefore(a[0],null),a.length>1&&this.append.apply(this,a.slice(1))},s.prototype.contains=function(a){for(var l,c=this.iterator();l=c();)if(l===a)return!0;return!1},s.prototype.insertBefore=function(a,l){a&&(a.next=l,l!=null?(a.prev=l.prev,l.prev!=null&&(l.prev.next=a),l.prev=a,l===this.head&&(this.head=a)):this.tail!=null?(this.tail.next=a,a.prev=this.tail,this.tail=a):(a.prev=null,this.head=this.tail=a),this.length+=1)},s.prototype.offset=function(a){for(var l=0,c=this.head;c!=null;){if(c===a)return l;l+=c.length(),c=c.next}return-1},s.prototype.remove=function(a){this.contains(a)&&(a.prev!=null&&(a.prev.next=a.next),a.next!=null&&(a.next.prev=a.prev),a===this.head&&(this.head=a.next),a===this.tail&&(this.tail=a.prev),this.length-=1)},s.prototype.iterator=function(a){return a===void 0&&(a=this.head),function(){var l=a;return a!=null&&(a=a.next),l}},s.prototype.find=function(a,l){l===void 0&&(l=!1);for(var c,u=this.iterator();c=u();){var d=c.length();if(a<d||l&&a===d&&(c.next==null||c.next.length()!==0))return[c,a];a-=d}return[null,0]},s.prototype.forEach=function(a){for(var l,c=this.iterator();l=c();)a(l)},s.prototype.forEachAt=function(a,l,c){if(!(l<=0))for(var u=this.find(a),d=u[0],f=u[1],p,b=a-f,v=this.iterator(d);(p=v())&&b<a+l;){var m=p.length();a>b?c(p,a-b,Math.min(l,b+m-a)):c(p,0,Math.min(m,a+l-b)),b+=m}},s.prototype.map=function(a){return this.reduce(function(l,c){return l.push(a(c)),l},[])},s.prototype.reduce=function(a,l){for(var c,u=this.iterator();c=u();)l=a(l,c);return l},s}();r.default=o},function(n,r,i){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var b in p)p.hasOwnProperty(b)&&(f[b]=p[b])};return function(f,p){d(f,p);function b(){this.constructor=f}f.prototype=p===null?Object.create(p):(b.prototype=p.prototype,new b)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(17),a=i(1),l={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},c=100,u=function(d){o(f,d);function f(p){var b=d.call(this,p)||this;return b.scroll=b,b.observer=new MutationObserver(function(v){b.update(v)}),b.observer.observe(b.domNode,l),b.attach(),b}return f.prototype.detach=function(){d.prototype.detach.call(this),this.observer.disconnect()},f.prototype.deleteAt=function(p,b){this.update(),p===0&&b===this.length()?this.children.forEach(function(v){v.remove()}):d.prototype.deleteAt.call(this,p,b)},f.prototype.formatAt=function(p,b,v,m){this.update(),d.prototype.formatAt.call(this,p,b,v,m)},f.prototype.insertAt=function(p,b,v){this.update(),d.prototype.insertAt.call(this,p,b,v)},f.prototype.optimize=function(p,b){var v=this;p===void 0&&(p=[]),b===void 0&&(b={}),d.prototype.optimize.call(this,b);for(var m=[].slice.call(this.observer.takeRecords());m.length>0;)p.push(m.pop());for(var g=function(D,k){k===void 0&&(k=!0),!(D==null||D===v)&&D.domNode.parentNode!=null&&(D.domNode[a.DATA_KEY].mutations==null&&(D.domNode[a.DATA_KEY].mutations=[]),k&&g(D.parent))},x=function(D){D.domNode[a.DATA_KEY]==null||D.domNode[a.DATA_KEY].mutations==null||(D instanceof s.default&&D.children.forEach(x),D.optimize(b))},w=p,S=0;w.length>0;S+=1){if(S>=c)throw new Error("[Parchment] Maximum optimize iterations reached");for(w.forEach(function(D){var k=a.find(D.target,!0);k!=null&&(k.domNode===D.target&&(D.type==="childList"?(g(a.find(D.previousSibling,!1)),[].forEach.call(D.addedNodes,function(P){var M=a.find(P,!1);g(M,!1),M instanceof s.default&&M.children.forEach(function(T){g(T,!1)})})):D.type==="attributes"&&g(k.prev)),g(k))}),this.children.forEach(x),w=[].slice.call(this.observer.takeRecords()),m=w.slice();m.length>0;)p.push(m.pop())}},f.prototype.update=function(p,b){var v=this;b===void 0&&(b={}),p=p||this.observer.takeRecords(),p.map(function(m){var g=a.find(m.target,!0);return g==null?null:g.domNode[a.DATA_KEY].mutations==null?(g.domNode[a.DATA_KEY].mutations=[m],g):(g.domNode[a.DATA_KEY].mutations.push(m),null)}).forEach(function(m){m==null||m===v||m.domNode[a.DATA_KEY]==null||m.update(m.domNode[a.DATA_KEY].mutations||[],b)}),this.domNode[a.DATA_KEY].mutations!=null&&d.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,b),this.optimize(p,b)},f.blotName="scroll",f.defaultChild="block",f.scope=a.Scope.BLOCK_BLOT,f.tagName="DIV",f}(s.default);r.default=u},function(n,r,i){var o=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var p in f)f.hasOwnProperty(p)&&(d[p]=f[p])};return function(d,f){u(d,f);function p(){this.constructor=d}d.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(18),a=i(1);function l(u,d){if(Object.keys(u).length!==Object.keys(d).length)return!1;for(var f in u)if(u[f]!==d[f])return!1;return!0}var c=function(u){o(d,u);function d(){return u!==null&&u.apply(this,arguments)||this}return d.formats=function(f){if(f.tagName!==d.tagName)return u.formats.call(this,f)},d.prototype.format=function(f,p){var b=this;f===this.statics.blotName&&!p?(this.children.forEach(function(v){v instanceof s.default||(v=v.wrap(d.blotName,!0)),b.attributes.copy(v)}),this.unwrap()):u.prototype.format.call(this,f,p)},d.prototype.formatAt=function(f,p,b,v){if(this.formats()[b]!=null||a.query(b,a.Scope.ATTRIBUTE)){var m=this.isolate(f,p);m.format(b,v)}else u.prototype.formatAt.call(this,f,p,b,v)},d.prototype.optimize=function(f){u.prototype.optimize.call(this,f);var p=this.formats();if(Object.keys(p).length===0)return this.unwrap();var b=this.next;b instanceof d&&b.prev===this&&l(p,b.formats())&&(b.moveChildren(this),b.remove())},d.blotName="inline",d.scope=a.Scope.INLINE_BLOT,d.tagName="SPAN",d}(s.default);r.default=c},function(n,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var f in d)d.hasOwnProperty(f)&&(u[f]=d[f])};return function(u,d){c(u,d);function f(){this.constructor=u}u.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(18),a=i(1),l=function(c){o(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.formats=function(d){var f=a.query(u.blotName).tagName;if(d.tagName!==f)return c.formats.call(this,d)},u.prototype.format=function(d,f){a.query(d,a.Scope.BLOCK)!=null&&(d===this.statics.blotName&&!f?this.replaceWith(u.blotName):c.prototype.format.call(this,d,f))},u.prototype.formatAt=function(d,f,p,b){a.query(p,a.Scope.BLOCK)!=null?this.format(p,b):c.prototype.formatAt.call(this,d,f,p,b)},u.prototype.insertAt=function(d,f,p){if(p==null||a.query(f,a.Scope.INLINE)!=null)c.prototype.insertAt.call(this,d,f,p);else{var b=this.split(d),v=a.create(f,p);b.parent.insertBefore(v,b)}},u.prototype.update=function(d,f){navigator.userAgent.match(/Trident/)?this.build():c.prototype.update.call(this,d,f)},u.blotName="block",u.scope=a.Scope.BLOCK_BLOT,u.tagName="P",u}(s.default);r.default=l},function(n,r,i){var o=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var d in u)u.hasOwnProperty(d)&&(c[d]=u[d])};return function(c,u){l(c,u);function d(){this.constructor=c}c.prototype=u===null?Object.create(u):(d.prototype=u.prototype,new d)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(19),a=function(l){o(c,l);function c(){return l!==null&&l.apply(this,arguments)||this}return c.formats=function(u){},c.prototype.format=function(u,d){l.prototype.formatAt.call(this,0,this.length(),u,d)},c.prototype.formatAt=function(u,d,f,p){u===0&&d===this.length()?this.format(f,p):l.prototype.formatAt.call(this,u,d,f,p)},c.prototype.formats=function(){return this.statics.formats(this.domNode)},c}(s.default);r.default=a},function(n,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var f in d)d.hasOwnProperty(f)&&(u[f]=d[f])};return function(u,d){c(u,d);function f(){this.constructor=u}u.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(19),a=i(1),l=function(c){o(u,c);function u(d){var f=c.call(this,d)||this;return f.text=f.statics.value(f.domNode),f}return u.create=function(d){return document.createTextNode(d)},u.value=function(d){var f=d.data;return f.normalize&&(f=f.normalize()),f},u.prototype.deleteAt=function(d,f){this.domNode.data=this.text=this.text.slice(0,d)+this.text.slice(d+f)},u.prototype.index=function(d,f){return this.domNode===d?f:-1},u.prototype.insertAt=function(d,f,p){p==null?(this.text=this.text.slice(0,d)+f+this.text.slice(d),this.domNode.data=this.text):c.prototype.insertAt.call(this,d,f,p)},u.prototype.length=function(){return this.text.length},u.prototype.optimize=function(d){c.prototype.optimize.call(this,d),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof u&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},u.prototype.position=function(d,f){return[this.domNode,d]},u.prototype.split=function(d,f){if(f===void 0&&(f=!1),!f){if(d===0)return this;if(d===this.length())return this.next}var p=a.create(this.domNode.splitText(d));return this.parent.insertBefore(p,this.next),this.text=this.statics.value(this.domNode),p},u.prototype.update=function(d,f){var p=this;d.some(function(b){return b.type==="characterData"&&b.target===p.domNode})&&(this.text=this.statics.value(this.domNode))},u.prototype.value=function(){return this.text},u.blotName="text",u.scope=a.Scope.INLINE_BLOT,u}(s.default);r.default=l},function(n,r,i){var o=document.createElement("div");if(o.classList.toggle("test-class",!1),o.classList.contains("test-class")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,l){return arguments.length>1&&!this.contains(a)==!l?l:s.call(this,a)}}String.prototype.startsWith||(String.prototype.startsWith=function(a,l){return l=l||0,this.substr(l,a.length)===a}),String.prototype.endsWith||(String.prototype.endsWith=function(a,l){var c=this.toString();(typeof l!="number"||!isFinite(l)||Math.floor(l)!==l||l>c.length)&&(l=c.length),l-=a.length;var u=c.indexOf(a,l);return u!==-1&&u===l}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("predicate must be a function");for(var c=Object(this),u=c.length>>>0,d=arguments[1],f,p=0;p<u;p++)if(f=c[p],l.call(d,f,p,c))return f}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(n,r){var i=-1,o=1,s=0;function a(S,D,k){if(S==D)return S?[[s,S]]:[];(k<0||S.length<k)&&(k=null);var P=d(S,D),M=S.substring(0,P);S=S.substring(P),D=D.substring(P),P=f(S,D);var T=S.substring(S.length-P);S=S.substring(0,S.length-P),D=D.substring(0,D.length-P);var _=l(S,D);return M&&_.unshift([s,M]),T&&_.push([s,T]),b(_),k!=null&&(_=g(_,k)),_=x(_),_}function l(S,D){var k;if(!S)return[[o,D]];if(!D)return[[i,S]];var P=S.length>D.length?S:D,M=S.length>D.length?D:S,T=P.indexOf(M);if(T!=-1)return k=[[o,P.substring(0,T)],[s,M],[o,P.substring(T+M.length)]],S.length>D.length&&(k[0][0]=k[2][0]=i),k;if(M.length==1)return[[i,S],[o,D]];var _=p(S,D);if(_){var E=_[0],R=_[1],F=_[2],L=_[3],N=_[4],U=a(E,F),H=a(R,L);return U.concat([[s,N]],H)}return c(S,D)}function c(S,D){for(var k=S.length,P=D.length,M=Math.ceil((k+P)/2),T=M,_=2*M,E=new Array(_),R=new Array(_),F=0;F<_;F++)E[F]=-1,R[F]=-1;E[T+1]=0,R[T+1]=0;for(var L=k-P,N=L%2!=0,U=0,H=0,j=0,z=0,q=0;q<M;q++){for(var $=-q+U;$<=q-H;$+=2){var K=T+$,G;$==-q||$!=q&&E[K-1]<E[K+1]?G=E[K+1]:G=E[K-1]+1;for(var Y=G-$;G<k&&Y<P&&S.charAt(G)==D.charAt(Y);)G++,Y++;if(E[K]=G,G>k)H+=2;else if(Y>P)U+=2;else if(N){var J=T+L-$;if(J>=0&&J<_&&R[J]!=-1){var V=k-R[J];if(G>=V)return u(S,D,G,Y)}}}for(var re=-q+j;re<=q-z;re+=2){var J=T+re,V;re==-q||re!=q&&R[J-1]<R[J+1]?V=R[J+1]:V=R[J-1]+1;for(var fe=V-re;V<k&&fe<P&&S.charAt(k-V-1)==D.charAt(P-fe-1);)V++,fe++;if(R[J]=V,V>k)z+=2;else if(fe>P)j+=2;else if(!N){var K=T+L-re;if(K>=0&&K<_&&E[K]!=-1){var G=E[K],Y=T+G-K;if(V=k-V,G>=V)return u(S,D,G,Y)}}}}return[[i,S],[o,D]]}function u(S,D,k,P){var M=S.substring(0,k),T=D.substring(0,P),_=S.substring(k),E=D.substring(P),R=a(M,T),F=a(_,E);return R.concat(F)}function d(S,D){if(!S||!D||S.charAt(0)!=D.charAt(0))return 0;for(var k=0,P=Math.min(S.length,D.length),M=P,T=0;k<M;)S.substring(T,M)==D.substring(T,M)?(k=M,T=k):P=M,M=Math.floor((P-k)/2+k);return M}function f(S,D){if(!S||!D||S.charAt(S.length-1)!=D.charAt(D.length-1))return 0;for(var k=0,P=Math.min(S.length,D.length),M=P,T=0;k<M;)S.substring(S.length-M,S.length-T)==D.substring(D.length-M,D.length-T)?(k=M,T=k):P=M,M=Math.floor((P-k)/2+k);return M}function p(S,D){var k=S.length>D.length?S:D,P=S.length>D.length?D:S;if(k.length<4||P.length*2<k.length)return null;function M(H,j,z){for(var q=H.substring(z,z+Math.floor(H.length/4)),$=-1,K="",G,Y,J,V;($=j.indexOf(q,$+1))!=-1;){var re=d(H.substring(z),j.substring($)),fe=f(H.substring(0,z),j.substring(0,$));K.length<fe+re&&(K=j.substring($-fe,$)+j.substring($,$+re),G=H.substring(0,z-fe),Y=H.substring(z+re),J=j.substring(0,$-fe),V=j.substring($+re))}return K.length*2>=H.length?[G,Y,J,V,K]:null}var T=M(k,P,Math.ceil(k.length/4)),_=M(k,P,Math.ceil(k.length/2)),E;if(!T&&!_)return null;_?T?E=T[4].length>_[4].length?T:_:E=_:E=T;var R,F,L,N;S.length>D.length?(R=E[0],F=E[1],L=E[2],N=E[3]):(L=E[0],N=E[1],R=E[2],F=E[3]);var U=E[4];return[R,F,L,N,U]}function b(S){S.push([s,""]);for(var D=0,k=0,P=0,M="",T="",_;D<S.length;)switch(S[D][0]){case o:P++,T+=S[D][1],D++;break;case i:k++,M+=S[D][1],D++;break;case s:k+P>1?(k!==0&&P!==0&&(_=d(T,M),_!==0&&(D-k-P>0&&S[D-k-P-1][0]==s?S[D-k-P-1][1]+=T.substring(0,_):(S.splice(0,0,[s,T.substring(0,_)]),D++),T=T.substring(_),M=M.substring(_)),_=f(T,M),_!==0&&(S[D][1]=T.substring(T.length-_)+S[D][1],T=T.substring(0,T.length-_),M=M.substring(0,M.length-_))),k===0?S.splice(D-P,k+P,[o,T]):P===0?S.splice(D-k,k+P,[i,M]):S.splice(D-k-P,k+P,[i,M],[o,T]),D=D-k-P+(k?1:0)+(P?1:0)+1):D!==0&&S[D-1][0]==s?(S[D-1][1]+=S[D][1],S.splice(D,1)):D++,P=0,k=0,M="",T="";break}S[S.length-1][1]===""&&S.pop();var E=!1;for(D=1;D<S.length-1;)S[D-1][0]==s&&S[D+1][0]==s&&(S[D][1].substring(S[D][1].length-S[D-1][1].length)==S[D-1][1]?(S[D][1]=S[D-1][1]+S[D][1].substring(0,S[D][1].length-S[D-1][1].length),S[D+1][1]=S[D-1][1]+S[D+1][1],S.splice(D-1,1),E=!0):S[D][1].substring(0,S[D+1][1].length)==S[D+1][1]&&(S[D-1][1]+=S[D+1][1],S[D][1]=S[D][1].substring(S[D+1][1].length)+S[D+1][1],S.splice(D+1,1),E=!0)),D++;E&&b(S)}var v=a;v.INSERT=o,v.DELETE=i,v.EQUAL=s,n.exports=v;function m(S,D){if(D===0)return[s,S];for(var k=0,P=0;P<S.length;P++){var M=S[P];if(M[0]===i||M[0]===s){var T=k+M[1].length;if(D===T)return[P+1,S];if(D<T){S=S.slice();var _=D-k,E=[M[0],M[1].slice(0,_)],R=[M[0],M[1].slice(_)];return S.splice(P,1,E,R),[P+1,S]}else k=T}}throw new Error("cursor_pos is out of bounds!")}function g(S,D){var k=m(S,D),P=k[1],M=k[0],T=P[M],_=P[M+1];if(T==null)return S;if(T[0]!==s)return S;if(_!=null&&T[1]+_[1]===_[1]+T[1])return P.splice(M,2,_,T),w(P,M,2);if(_!=null&&_[1].indexOf(T[1])===0){P.splice(M,2,[_[0],T[1]],[0,T[1]]);var E=_[1].slice(T[1].length);return E.length>0&&P.splice(M+2,0,[_[0],E]),w(P,M,3)}else return S}function x(S){for(var D=!1,k=function(_){return _.charCodeAt(0)>=56320&&_.charCodeAt(0)<=57343},P=function(_){return _.charCodeAt(_.length-1)>=55296&&_.charCodeAt(_.length-1)<=56319},M=2;M<S.length;M+=1)S[M-2][0]===s&&P(S[M-2][1])&&S[M-1][0]===i&&k(S[M-1][1])&&S[M][0]===o&&k(S[M][1])&&(D=!0,S[M-1][1]=S[M-2][1].slice(-1)+S[M-1][1],S[M][1]=S[M-2][1].slice(-1)+S[M][1],S[M-2][1]=S[M-2][1].slice(0,-1));if(!D)return S;for(var T=[],M=0;M<S.length;M+=1)S[M][1].length>0&&T.push(S[M]);return T}function w(S,D,k){for(var P=D+k-1;P>=0&&P>=D-1;P--)if(P+1<S.length){var M=S[P],T=S[P+1];M[0]===T[1]&&S.splice(P,2,[M[0],M[1]+T[1]])}return S}},function(n,r){r=n.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(o){var s=[];for(var a in o)s.push(a);return s}},function(n,r){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=n.exports=i?o:s,r.supported=o;function o(a){return Object.prototype.toString.call(a)=="[object Arguments]"}r.unsupported=s;function s(a){return a&&typeof a=="object"&&typeof a.length=="number"&&Object.prototype.hasOwnProperty.call(a,"callee")&&!Object.prototype.propertyIsEnumerable.call(a,"callee")||!1}},function(n,r){var i=Object.prototype.hasOwnProperty,o="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(o=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)i.call(d,f)&&u.push(o?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u,d){var f=o?o+u:u,p=this._events[f];if(d)return!!p;if(!p)return[];if(p.fn)return[p.fn];for(var b=0,v=p.length,m=new Array(v);b<v;b++)m[b]=p[b].fn;return m},l.prototype.emit=function(u,d,f,p,b,v){var m=o?o+u:u;if(!this._events[m])return!1;var g=this._events[m],x=arguments.length,w,S;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),x){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,f),!0;case 4:return g.fn.call(g.context,d,f,p),!0;case 5:return g.fn.call(g.context,d,f,p,b),!0;case 6:return g.fn.call(g.context,d,f,p,b,v),!0}for(S=1,w=new Array(x-1);S<x;S++)w[S-1]=arguments[S];g.fn.apply(g.context,w)}else{var D=g.length,k;for(S=0;S<D;S++)switch(g[S].once&&this.removeListener(u,g[S].fn,void 0,!0),x){case 1:g[S].fn.call(g[S].context);break;case 2:g[S].fn.call(g[S].context,d);break;case 3:g[S].fn.call(g[S].context,d,f);break;case 4:g[S].fn.call(g[S].context,d,f,p);break;default:if(!w)for(k=1,w=new Array(x-1);k<x;k++)w[k-1]=arguments[k];g[S].fn.apply(g[S].context,w)}}return!0},l.prototype.on=function(u,d,f){var p=new a(d,f||this),b=o?o+u:u;return this._events[b]?this._events[b].fn?this._events[b]=[this._events[b],p]:this._events[b].push(p):(this._events[b]=p,this._eventsCount++),this},l.prototype.once=function(u,d,f){var p=new a(d,f||this,!0),b=o?o+u:u;return this._events[b]?this._events[b].fn?this._events[b]=[this._events[b],p]:this._events[b].push(p):(this._events[b]=p,this._eventsCount++),this},l.prototype.removeListener=function(u,d,f,p){var b=o?o+u:u;if(!this._events[b])return this;if(!d)return--this._eventsCount===0?this._events=new s:delete this._events[b],this;var v=this._events[b];if(v.fn)v.fn===d&&(!p||v.once)&&(!f||v.context===f)&&(--this._eventsCount===0?this._events=new s:delete this._events[b]);else{for(var m=0,g=[],x=v.length;m<x;m++)(v[m].fn!==d||p&&!v[m].once||f&&v[m].context!==f)&&g.push(v[m]);g.length?this._events[b]=g.length===1?g[0]:g:--this._eventsCount===0?this._events=new s:delete this._events[b]}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=o?o+u:u,this._events[d]&&(--this._eventsCount===0?this._events=new s:delete this._events[d])):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prototype.setMaxListeners=function(){return this},l.prefixed=o,l.EventEmitter=l,typeof n!="undefined"&&(n.exports=l)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ne){return typeof ne}:function(ne){return ne&&typeof Symbol=="function"&&ne.constructor===Symbol&&ne!==Symbol.prototype?"symbol":typeof ne},s=function(){function ne(se,ge){var Q=[],W=!0,ve=!1,ue=void 0;try{for(var Me=se[Symbol.iterator](),Pe;!(W=(Pe=Me.next()).done)&&(Q.push(Pe.value),!(ge&&Q.length===ge));W=!0);}catch(je){ve=!0,ue=je}finally{try{!W&&Me.return&&Me.return()}finally{if(ve)throw ue}}return Q}return function(se,ge){if(Array.isArray(se))return se;if(Symbol.iterator in Object(se))return ne(se,ge);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function ne(se,ge){for(var Q=0;Q<ge.length;Q++){var W=ge[Q];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(se,W.key,W)}}return function(se,ge,Q){return ge&&ne(se.prototype,ge),Q&&ne(se,Q),se}}(),l=i(3),c=R(l),u=i(2),d=R(u),f=i(0),p=R(f),b=i(5),v=R(b),m=i(10),g=R(m),x=i(9),w=R(x),S=i(36),D=i(37),k=i(13),P=R(k),M=i(26),T=i(38),_=i(39),E=i(40);function R(ne){return ne&&ne.__esModule?ne:{default:ne}}function F(ne,se,ge){return se in ne?Object.defineProperty(ne,se,{value:ge,enumerable:!0,configurable:!0,writable:!0}):ne[se]=ge,ne}function L(ne,se){if(!(ne instanceof se))throw new TypeError("Cannot call a class as a function")}function N(ne,se){if(!ne)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se&&(typeof se=="object"||typeof se=="function")?se:ne}function U(ne,se){if(typeof se!="function"&&se!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof se);ne.prototype=Object.create(se&&se.prototype,{constructor:{value:ne,enumerable:!1,writable:!0,configurable:!0}}),se&&(Object.setPrototypeOf?Object.setPrototypeOf(ne,se):ne.__proto__=se)}var H=(0,g.default)("quill:clipboard"),j="__ql-matcher",z=[[Node.TEXT_NODE,me],[Node.TEXT_NODE,ee],["br",xe],[Node.ELEMENT_NODE,ee],[Node.ELEMENT_NODE,ce],[Node.ELEMENT_NODE,Oe],[Node.ELEMENT_NODE,pe],[Node.ELEMENT_NODE,le],["li",Ee],["b",fe.bind(fe,"bold")],["i",fe.bind(fe,"italic")],["style",Ae]],q=[S.AlignAttribute,T.DirectionAttribute].reduce(function(ne,se){return ne[se.keyName]=se,ne},{}),$=[S.AlignStyle,D.BackgroundStyle,M.ColorStyle,T.DirectionStyle,_.FontStyle,E.SizeStyle].reduce(function(ne,se){return ne[se.keyName]=se,ne},{}),K=function(ne){U(se,ne);function se(ge,Q){L(this,se);var W=N(this,(se.__proto__||Object.getPrototypeOf(se)).call(this,ge,Q));return W.quill.root.addEventListener("paste",W.onPaste.bind(W)),W.container=W.quill.addContainer("ql-clipboard"),W.container.setAttribute("contenteditable",!0),W.container.setAttribute("tabindex",-1),W.matchers=[],z.concat(W.options.matchers).forEach(function(ve){var ue=s(ve,2),Me=ue[0],Pe=ue[1];!Q.matchVisual&&Pe===Oe||W.addMatcher(Me,Pe)}),W}return a(se,[{key:"addMatcher",value:function(Q,W){this.matchers.push([Q,W])}},{key:"convert",value:function(Q){if(typeof Q=="string")return this.container.innerHTML=Q.replace(/\>\r?\n +\</g,"><"),this.convert();var W=this.quill.getFormat(this.quill.selection.savedRange.index);if(W[P.default.blotName]){var ve=this.container.innerText;return this.container.innerHTML="",new d.default().insert(ve,F({},P.default.blotName,W[P.default.blotName]))}var ue=this.prepareMatching(),Me=s(ue,2),Pe=Me[0],je=Me[1],ke=re(this.container,Pe,je);return J(ke,`
`)&&ke.ops[ke.ops.length-1].attributes==null&&(ke=ke.compose(new d.default().retain(ke.length()-1).delete(1))),H.log("convert",this.container.innerHTML,ke),this.container.innerHTML="",ke}},{key:"dangerouslyPasteHTML",value:function(Q,W){var ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.default.sources.API;if(typeof Q=="string")this.quill.setContents(this.convert(Q),W),this.quill.setSelection(0,v.default.sources.SILENT);else{var ue=this.convert(W);this.quill.updateContents(new d.default().retain(Q).concat(ue),ve),this.quill.setSelection(Q+ue.length(),v.default.sources.SILENT)}}},{key:"onPaste",value:function(Q){var W=this;if(!(Q.defaultPrevented||!this.quill.isEnabled())){var ve=this.quill.getSelection(),ue=new d.default().retain(ve.index),Me=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(v.default.sources.SILENT),setTimeout(function(){ue=ue.concat(W.convert()).delete(ve.length),W.quill.updateContents(ue,v.default.sources.USER),W.quill.setSelection(ue.length()-ve.length,v.default.sources.SILENT),W.quill.scrollingContainer.scrollTop=Me,W.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var Q=this,W=[],ve=[];return this.matchers.forEach(function(ue){var Me=s(ue,2),Pe=Me[0],je=Me[1];switch(Pe){case Node.TEXT_NODE:ve.push(je);break;case Node.ELEMENT_NODE:W.push(je);break;default:[].forEach.call(Q.container.querySelectorAll(Pe),function(ke){ke[j]=ke[j]||[],ke[j].push(je)});break}}),[W,ve]}}]),se}(w.default);K.DEFAULTS={matchers:[],matchVisual:!0};function G(ne,se,ge){return(typeof se=="undefined"?"undefined":o(se))==="object"?Object.keys(se).reduce(function(Q,W){return G(Q,W,se[W])},ne):ne.reduce(function(Q,W){return W.attributes&&W.attributes[se]?Q.push(W):Q.insert(W.insert,(0,c.default)({},F({},se,ge),W.attributes))},new d.default)}function Y(ne){if(ne.nodeType!==Node.ELEMENT_NODE)return{};var se="__ql-computed-style";return ne[se]||(ne[se]=window.getComputedStyle(ne))}function J(ne,se){for(var ge="",Q=ne.ops.length-1;Q>=0&&ge.length<se.length;--Q){var W=ne.ops[Q];if(typeof W.insert!="string")break;ge=W.insert+ge}return ge.slice(-1*se.length)===se}function V(ne){if(ne.childNodes.length===0)return!1;var se=Y(ne);return["block","list-item"].indexOf(se.display)>-1}function re(ne,se,ge){return ne.nodeType===ne.TEXT_NODE?ge.reduce(function(Q,W){return W(ne,Q)},new d.default):ne.nodeType===ne.ELEMENT_NODE?[].reduce.call(ne.childNodes||[],function(Q,W){var ve=re(W,se,ge);return W.nodeType===ne.ELEMENT_NODE&&(ve=se.reduce(function(ue,Me){return Me(W,ue)},ve),ve=(W[j]||[]).reduce(function(ue,Me){return Me(W,ue)},ve)),Q.concat(ve)},new d.default):new d.default}function fe(ne,se,ge){return G(ge,ne,!0)}function pe(ne,se){var ge=p.default.Attributor.Attribute.keys(ne),Q=p.default.Attributor.Class.keys(ne),W=p.default.Attributor.Style.keys(ne),ve={};return ge.concat(Q).concat(W).forEach(function(ue){var Me=p.default.query(ue,p.default.Scope.ATTRIBUTE);Me!=null&&(ve[Me.attrName]=Me.value(ne),ve[Me.attrName])||(Me=q[ue],Me!=null&&(Me.attrName===ue||Me.keyName===ue)&&(ve[Me.attrName]=Me.value(ne)||void 0),Me=$[ue],Me!=null&&(Me.attrName===ue||Me.keyName===ue)&&(Me=$[ue],ve[Me.attrName]=Me.value(ne)||void 0))}),Object.keys(ve).length>0&&(se=G(se,ve)),se}function ce(ne,se){var ge=p.default.query(ne);if(ge==null)return se;if(ge.prototype instanceof p.default.Embed){var Q={},W=ge.value(ne);W!=null&&(Q[ge.blotName]=W,se=new d.default().insert(Q,ge.formats(ne)))}else typeof ge.formats=="function"&&(se=G(se,ge.blotName,ge.formats(ne)));return se}function xe(ne,se){return J(se,`
`)||se.insert(`
`),se}function Ae(){return new d.default}function Ee(ne,se){var ge=p.default.query(ne);if(ge==null||ge.blotName!=="list-item"||!J(se,`
`))return se;for(var Q=-1,W=ne.parentNode;!W.classList.contains("ql-clipboard");)(p.default.query(W)||{}).blotName==="list"&&(Q+=1),W=W.parentNode;return Q<=0?se:se.compose(new d.default().retain(se.length()-1).retain(1,{indent:Q}))}function ee(ne,se){return J(se,`
`)||(V(ne)||se.length()>0&&ne.nextSibling&&V(ne.nextSibling))&&se.insert(`
`),se}function Oe(ne,se){if(V(ne)&&ne.nextElementSibling!=null&&!J(se,`

`)){var ge=ne.offsetHeight+parseFloat(Y(ne).marginTop)+parseFloat(Y(ne).marginBottom);ne.nextElementSibling.offsetTop>ne.offsetTop+ge*1.5&&se.insert(`
`)}return se}function le(ne,se){var ge={},Q=ne.style||{};return Q.fontStyle&&Y(ne).fontStyle==="italic"&&(ge.italic=!0),Q.fontWeight&&(Y(ne).fontWeight.startsWith("bold")||parseInt(Y(ne).fontWeight)>=700)&&(ge.bold=!0),Object.keys(ge).length>0&&(se=G(se,ge)),parseFloat(Q.textIndent||0)>0&&(se=new d.default().insert("	").concat(se)),se}function me(ne,se){var ge=ne.data;if(ne.parentNode.tagName==="O:P")return se.insert(ge.trim());if(ge.trim().length===0&&ne.parentNode.classList.contains("ql-clipboard"))return se;if(!Y(ne.parentNode).whiteSpace.startsWith("pre")){var Q=function(ve,ue){return ue=ue.replace(/[^\u00a0]/g,""),ue.length<1&&ve?" ":ue};ge=ge.replace(/\r\n/g," ").replace(/\n/g," "),ge=ge.replace(/\s\s+/g,Q.bind(Q,!0)),(ne.previousSibling==null&&V(ne.parentNode)||ne.previousSibling!=null&&V(ne.previousSibling))&&(ge=ge.replace(/^\s+/,Q.bind(Q,!1))),(ne.nextSibling==null&&V(ne.parentNode)||ne.nextSibling!=null&&V(ne.nextSibling))&&(ge=ge.replace(/\s+$/,Q.bind(Q,!1)))}return se.insert(ge)}r.default=K,r.matchAttributor=pe,r.matchBlot=ce,r.matchNewline=ee,r.matchSpacing=Oe,r.matchText=me},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function b(v,m){for(var g=0;g<m.length;g++){var x=m[g];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(v,x.key,x)}}return function(v,m,g){return m&&b(v.prototype,m),g&&b(v,g),v}}(),s=function b(v,m,g){v===null&&(v=Function.prototype);var x=Object.getOwnPropertyDescriptor(v,m);if(x===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:b(w,m,g)}else{if("value"in x)return x.value;var S=x.get;return S===void 0?void 0:S.call(g)}},a=i(6),l=c(a);function c(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function d(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function f(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var p=function(b){f(v,b);function v(){return u(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return o(v,[{key:"optimize",value:function(g){s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,g),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return s(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),v}(l.default);p.blotName="bold",p.tagName=["STRONG","B"],r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var o=function(){function E(R,F){var L=[],N=!0,U=!1,H=void 0;try{for(var j=R[Symbol.iterator](),z;!(N=(z=j.next()).done)&&(L.push(z.value),!(F&&L.length===F));N=!0);}catch(q){U=!0,H=q}finally{try{!N&&j.return&&j.return()}finally{if(U)throw H}}return L}return function(R,F){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return E(R,F);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function E(R,F){for(var L=0;L<F.length;L++){var N=F[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(R,N.key,N)}}return function(R,F,L){return F&&E(R.prototype,F),L&&E(R,L),R}}(),a=i(2),l=g(a),c=i(0),u=g(c),d=i(5),f=g(d),p=i(10),b=g(p),v=i(9),m=g(v);function g(E){return E&&E.__esModule?E:{default:E}}function x(E,R,F){return R in E?Object.defineProperty(E,R,{value:F,enumerable:!0,configurable:!0,writable:!0}):E[R]=F,E}function w(E,R){if(!(E instanceof R))throw new TypeError("Cannot call a class as a function")}function S(E,R){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:E}function D(E,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);E.prototype=Object.create(R&&R.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(E,R):E.__proto__=R)}var k=(0,b.default)("quill:toolbar"),P=function(E){D(R,E);function R(F,L){w(this,R);var N=S(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,F,L));if(Array.isArray(N.options.container)){var U=document.createElement("div");T(U,N.options.container),F.container.parentNode.insertBefore(U,F.container),N.container=U}else typeof N.options.container=="string"?N.container=document.querySelector(N.options.container):N.container=N.options.container;if(!(N.container instanceof HTMLElement)){var H;return H=k.error("Container required for toolbar",N.options),S(N,H)}return N.container.classList.add("ql-toolbar"),N.controls=[],N.handlers={},Object.keys(N.options.handlers).forEach(function(j){N.addHandler(j,N.options.handlers[j])}),[].forEach.call(N.container.querySelectorAll("button, select"),function(j){N.attach(j)}),N.quill.on(f.default.events.EDITOR_CHANGE,function(j,z){j===f.default.events.SELECTION_CHANGE&&N.update(z)}),N.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){var j=N.quill.selection.getRange(),z=o(j,1),q=z[0];N.update(q)}),N}return s(R,[{key:"addHandler",value:function(L,N){this.handlers[L]=N}},{key:"attach",value:function(L){var N=this,U=[].find.call(L.classList,function(j){return j.indexOf("ql-")===0});if(U){if(U=U.slice(3),L.tagName==="BUTTON"&&L.setAttribute("type","button"),this.handlers[U]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[U]==null){k.warn("ignoring attaching to disabled format",U,L);return}if(u.default.query(U)==null){k.warn("ignoring attaching to nonexistent format",U,L);return}}var H=L.tagName==="SELECT"?"change":"click";L.addEventListener(H,function(j){var z=void 0;if(L.tagName==="SELECT"){if(L.selectedIndex<0)return;var q=L.options[L.selectedIndex];q.hasAttribute("selected")?z=!1:z=q.value||!1}else L.classList.contains("ql-active")?z=!1:z=L.value||!L.hasAttribute("value"),j.preventDefault();N.quill.focus();var $=N.quill.selection.getRange(),K=o($,1),G=K[0];if(N.handlers[U]!=null)N.handlers[U].call(N,z);else if(u.default.query(U).prototype instanceof u.default.Embed){if(z=prompt("Enter "+U),!z)return;N.quill.updateContents(new l.default().retain(G.index).delete(G.length).insert(x({},U,z)),f.default.sources.USER)}else N.quill.format(U,z,f.default.sources.USER);N.update(G)}),this.controls.push([U,L])}}},{key:"update",value:function(L){var N=L==null?{}:this.quill.getFormat(L);this.controls.forEach(function(U){var H=o(U,2),j=H[0],z=H[1];if(z.tagName==="SELECT"){var q=void 0;if(L==null)q=null;else if(N[j]==null)q=z.querySelector("option[selected]");else if(!Array.isArray(N[j])){var $=N[j];typeof $=="string"&&($=$.replace(/\"/g,'\\"')),q=z.querySelector('option[value="'+$+'"]')}q==null?(z.value="",z.selectedIndex=-1):q.selected=!0}else if(L==null)z.classList.remove("ql-active");else if(z.hasAttribute("value")){var K=N[j]===z.getAttribute("value")||N[j]!=null&&N[j].toString()===z.getAttribute("value")||N[j]==null&&!z.getAttribute("value");z.classList.toggle("ql-active",K)}else z.classList.toggle("ql-active",N[j]!=null)})}}]),R}(m.default);P.DEFAULTS={};function M(E,R,F){var L=document.createElement("button");L.setAttribute("type","button"),L.classList.add("ql-"+R),F!=null&&(L.value=F),E.appendChild(L)}function T(E,R){Array.isArray(R[0])||(R=[R]),R.forEach(function(F){var L=document.createElement("span");L.classList.add("ql-formats"),F.forEach(function(N){if(typeof N=="string")M(L,N);else{var U=Object.keys(N)[0],H=N[U];Array.isArray(H)?_(L,U,H):M(L,U,H)}}),E.appendChild(L)})}function _(E,R,F){var L=document.createElement("select");L.classList.add("ql-"+R),F.forEach(function(N){var U=document.createElement("option");N!==!1?U.setAttribute("value",N):U.setAttribute("selected","selected"),L.appendChild(U)}),E.appendChild(L)}P.DEFAULTS={container:null,handlers:{clean:function(){var R=this,F=this.quill.getSelection();if(F!=null)if(F.length==0){var L=this.quill.getFormat();Object.keys(L).forEach(function(N){u.default.query(N,u.default.Scope.INLINE)!=null&&R.quill.format(N,!1)})}else this.quill.removeFormat(F,f.default.sources.USER)},direction:function(R){var F=this.quill.getFormat().align;R==="rtl"&&F==null?this.quill.format("align","right",f.default.sources.USER):!R&&F==="right"&&this.quill.format("align",!1,f.default.sources.USER),this.quill.format("direction",R,f.default.sources.USER)},indent:function(R){var F=this.quill.getSelection(),L=this.quill.getFormat(F),N=parseInt(L.indent||0);if(R==="+1"||R==="-1"){var U=R==="+1"?1:-1;L.direction==="rtl"&&(U*=-1),this.quill.format("indent",N+U,f.default.sources.USER)}},link:function(R){R===!0&&(R=prompt("Enter link URL:")),this.quill.format("link",R,f.default.sources.USER)},list:function(R){var F=this.quill.getSelection(),L=this.quill.getFormat(F);R==="check"?L.list==="checked"||L.list==="unchecked"?this.quill.format("list",!1,f.default.sources.USER):this.quill.format("list","unchecked",f.default.sources.USER):this.quill.format("list",R,f.default.sources.USER)}}},r.default=P,r.addControls=T},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function b(v,m){for(var g=0;g<m.length;g++){var x=m[g];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(v,x.key,x)}}return function(v,m,g){return m&&b(v.prototype,m),g&&b(v,g),v}}(),s=function b(v,m,g){v===null&&(v=Function.prototype);var x=Object.getOwnPropertyDescriptor(v,m);if(x===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:b(w,m,g)}else{if("value"in x)return x.value;var S=x.get;return S===void 0?void 0:S.call(g)}},a=i(28),l=c(a);function c(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function d(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function f(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var p=function(b){f(v,b);function v(m,g){u(this,v);var x=d(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,m));return x.label.innerHTML=g,x.container.classList.add("ql-color-picker"),[].slice.call(x.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(w){w.classList.add("ql-primary")}),x}return o(v,[{key:"buildItem",value:function(g){var x=s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"buildItem",this).call(this,g);return x.style.backgroundColor=g.getAttribute("value")||"",x}},{key:"selectItem",value:function(g,x){s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,g,x);var w=this.label.querySelector(".ql-color-label"),S=g&&g.getAttribute("data-value")||"";w&&(w.tagName==="line"?w.style.stroke=S:w.style.fill=S)}}]),v}(l.default);r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function b(v,m){for(var g=0;g<m.length;g++){var x=m[g];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(v,x.key,x)}}return function(v,m,g){return m&&b(v.prototype,m),g&&b(v,g),v}}(),s=function b(v,m,g){v===null&&(v=Function.prototype);var x=Object.getOwnPropertyDescriptor(v,m);if(x===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:b(w,m,g)}else{if("value"in x)return x.value;var S=x.get;return S===void 0?void 0:S.call(g)}},a=i(28),l=c(a);function c(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function d(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function f(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var p=function(b){f(v,b);function v(m,g){u(this,v);var x=d(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,m));return x.container.classList.add("ql-icon-picker"),[].forEach.call(x.container.querySelectorAll(".ql-picker-item"),function(w){w.innerHTML=g[w.getAttribute("data-value")||""]}),x.defaultItem=x.container.querySelector(".ql-selected"),x.selectItem(x.defaultItem),x}return o(v,[{key:"selectItem",value:function(g,x){s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,g,x),g=g||this.defaultItem,this.label.innerHTML=g.innerHTML}}]),v}(l.default);r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function l(c,u){for(var d=0;d<u.length;d++){var f=u[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}return function(c,u,d){return u&&l(c.prototype,u),d&&l(c,d),c}}();function s(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var a=function(){function l(c,u){var d=this;s(this,l),this.quill=c,this.boundsContainer=u||document.body,this.root=c.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){d.root.style.marginTop=-1*d.quill.root.scrollTop+"px"}),this.hide()}return o(l,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(u){var d=u.left+u.width/2-this.root.offsetWidth/2,f=u.bottom+this.quill.root.scrollTop;this.root.style.left=d+"px",this.root.style.top=f+"px",this.root.classList.remove("ql-flip");var p=this.boundsContainer.getBoundingClientRect(),b=this.root.getBoundingClientRect(),v=0;if(b.right>p.right&&(v=p.right-b.right,this.root.style.left=d+v+"px"),b.left<p.left&&(v=p.left-b.left,this.root.style.left=d+v+"px"),b.bottom>p.bottom){var m=b.bottom-b.top,g=u.bottom-u.top+m;this.root.style.top=f-g+"px",this.root.classList.add("ql-flip")}return v}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),l}();r.default=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function _(E,R){var F=[],L=!0,N=!1,U=void 0;try{for(var H=E[Symbol.iterator](),j;!(L=(j=H.next()).done)&&(F.push(j.value),!(R&&F.length===R));L=!0);}catch(z){N=!0,U=z}finally{try{!L&&H.return&&H.return()}finally{if(N)throw U}}return F}return function(E,R){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return _(E,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function _(E,R,F){E===null&&(E=Function.prototype);var L=Object.getOwnPropertyDescriptor(E,R);if(L===void 0){var N=Object.getPrototypeOf(E);return N===null?void 0:_(N,R,F)}else{if("value"in L)return L.value;var U=L.get;return U===void 0?void 0:U.call(F)}},a=function(){function _(E,R){for(var F=0;F<R.length;F++){var L=R[F];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(E,L.key,L)}}return function(E,R,F){return R&&_(E.prototype,R),F&&_(E,F),E}}(),l=i(3),c=w(l),u=i(8),d=w(u),f=i(43),p=w(f),b=i(27),v=w(b),m=i(15),g=i(41),x=w(g);function w(_){return _&&_.__esModule?_:{default:_}}function S(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")}function D(_,E){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:_}function k(_,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);_.prototype=Object.create(E&&E.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(_,E):_.__proto__=E)}var P=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],M=function(_){k(E,_);function E(R,F){S(this,E),F.modules.toolbar!=null&&F.modules.toolbar.container==null&&(F.modules.toolbar.container=P);var L=D(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,R,F));return L.quill.container.classList.add("ql-snow"),L}return a(E,[{key:"extendToolbar",value:function(F){F.container.classList.add("ql-snow"),this.buildButtons([].slice.call(F.container.querySelectorAll("button")),x.default),this.buildPickers([].slice.call(F.container.querySelectorAll("select")),x.default),this.tooltip=new T(this.quill,this.options.bounds),F.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(L,N){F.handlers.link.call(F,!N.format.link)})}}]),E}(p.default);M.DEFAULTS=(0,c.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(E){if(E){var R=this.quill.getSelection();if(R==null||R.length==0)return;var F=this.quill.getText(R);/^\S+@\S+\.\S+$/.test(F)&&F.indexOf("mailto:")!==0&&(F="mailto:"+F);var L=this.quill.theme.tooltip;L.edit("link",F)}else this.quill.format("link",!1)}}}}});var T=function(_){k(E,_);function E(R,F){S(this,E);var L=D(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,R,F));return L.preview=L.root.querySelector("a.ql-preview"),L}return a(E,[{key:"listen",value:function(){var F=this;s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(L){F.root.classList.contains("ql-editing")?F.save():F.edit("link",F.preview.textContent),L.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(L){if(F.linkRange!=null){var N=F.linkRange;F.restoreFocus(),F.quill.formatText(N,"link",!1,d.default.sources.USER),delete F.linkRange}L.preventDefault(),F.hide()}),this.quill.on(d.default.events.SELECTION_CHANGE,function(L,N,U){if(L!=null){if(L.length===0&&U===d.default.sources.USER){var H=F.quill.scroll.descendant(v.default,L.index),j=o(H,2),z=j[0],q=j[1];if(z!=null){F.linkRange=new m.Range(L.index-q,z.length());var $=v.default.formats(z.domNode);F.preview.textContent=$,F.preview.setAttribute("href",$),F.show(),F.position(F.quill.getBounds(F.linkRange));return}}else delete F.linkRange;F.hide()}})}},{key:"show",value:function(){s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),E}(f.BaseTooltip);T.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=M},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(29),s=W(o),a=i(36),l=i(38),c=i(64),u=i(65),d=W(u),f=i(66),p=W(f),b=i(67),v=W(b),m=i(37),g=i(26),x=i(39),w=i(40),S=i(56),D=W(S),k=i(68),P=W(k),M=i(27),T=W(M),_=i(69),E=W(_),R=i(70),F=W(R),L=i(71),N=W(L),U=i(72),H=W(U),j=i(73),z=W(j),q=i(13),$=W(q),K=i(74),G=W(K),Y=i(75),J=W(Y),V=i(57),re=W(V),fe=i(41),pe=W(fe),ce=i(28),xe=W(ce),Ae=i(59),Ee=W(Ae),ee=i(60),Oe=W(ee),le=i(61),me=W(le),ne=i(108),se=W(ne),ge=i(62),Q=W(ge);function W(ve){return ve&&ve.__esModule?ve:{default:ve}}s.default.register({"attributors/attribute/direction":l.DirectionAttribute,"attributors/class/align":a.AlignClass,"attributors/class/background":m.BackgroundClass,"attributors/class/color":g.ColorClass,"attributors/class/direction":l.DirectionClass,"attributors/class/font":x.FontClass,"attributors/class/size":w.SizeClass,"attributors/style/align":a.AlignStyle,"attributors/style/background":m.BackgroundStyle,"attributors/style/color":g.ColorStyle,"attributors/style/direction":l.DirectionStyle,"attributors/style/font":x.FontStyle,"attributors/style/size":w.SizeStyle},!0),s.default.register({"formats/align":a.AlignClass,"formats/direction":l.DirectionClass,"formats/indent":c.IndentClass,"formats/background":m.BackgroundStyle,"formats/color":g.ColorStyle,"formats/font":x.FontClass,"formats/size":w.SizeClass,"formats/blockquote":d.default,"formats/code-block":$.default,"formats/header":p.default,"formats/list":v.default,"formats/bold":D.default,"formats/code":q.Code,"formats/italic":P.default,"formats/link":T.default,"formats/script":E.default,"formats/strike":F.default,"formats/underline":N.default,"formats/image":H.default,"formats/video":z.default,"formats/list/item":b.ListItem,"modules/formula":G.default,"modules/syntax":J.default,"modules/toolbar":re.default,"themes/bubble":se.default,"themes/snow":Q.default,"ui/icons":pe.default,"ui/picker":xe.default,"ui/icon-picker":Oe.default,"ui/color-picker":Ee.default,"ui/tooltip":me.default},!0),r.default=s.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var o=function(){function v(m,g){for(var x=0;x<g.length;x++){var w=g[x];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(m,w.key,w)}}return function(m,g,x){return g&&v(m.prototype,g),x&&v(m,x),m}}(),s=function v(m,g,x){m===null&&(m=Function.prototype);var w=Object.getOwnPropertyDescriptor(m,g);if(w===void 0){var S=Object.getPrototypeOf(m);return S===null?void 0:v(S,g,x)}else{if("value"in w)return w.value;var D=w.get;return D===void 0?void 0:D.call(x)}},a=i(0),l=c(a);function c(v){return v&&v.__esModule?v:{default:v}}function u(v,m){if(!(v instanceof m))throw new TypeError("Cannot call a class as a function")}function d(v,m){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:v}function f(v,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);v.prototype=Object.create(m&&m.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(v,m):v.__proto__=m)}var p=function(v){f(m,v);function m(){return u(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"add",value:function(x,w){if(w==="+1"||w==="-1"){var S=this.value(x)||0;w=w==="+1"?S+1:S-1}return w===0?(this.remove(x),!0):s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"add",this).call(this,x,w)}},{key:"canAdd",value:function(x,w){return s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"canAdd",this).call(this,x,w)||s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"canAdd",this).call(this,x,parseInt(w))}},{key:"value",value:function(x){return parseInt(s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,x))||void 0}}]),m}(l.default.Attributor.Class),b=new p("indent","ql-indent",{scope:l.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=b},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(4),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function c(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function u(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var d=function(f){u(p,f);function p(){return l(this,p),c(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(s.default);d.blotName="blockquote",d.tagName="blockquote",r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function p(b,v){for(var m=0;m<v.length;m++){var g=v[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(b,g.key,g)}}return function(b,v,m){return v&&p(b.prototype,v),m&&p(b,m),b}}(),s=i(4),a=l(s);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,b){if(!(p instanceof b))throw new TypeError("Cannot call a class as a function")}function u(p,b){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:p}function d(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);p.prototype=Object.create(b&&b.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(p,b):p.__proto__=b)}var f=function(p){d(b,p);function b(){return c(this,b),u(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return o(b,null,[{key:"formats",value:function(m){return this.tagName.indexOf(m.tagName)+1}}]),b}(a.default);f.blotName="header",f.tagName=["H1","H2","H3","H4","H5","H6"],r.default=f},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var o=function(){function S(D,k){for(var P=0;P<k.length;P++){var M=k[P];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(D,M.key,M)}}return function(D,k,P){return k&&S(D.prototype,k),P&&S(D,P),D}}(),s=function S(D,k,P){D===null&&(D=Function.prototype);var M=Object.getOwnPropertyDescriptor(D,k);if(M===void 0){var T=Object.getPrototypeOf(D);return T===null?void 0:S(T,k,P)}else{if("value"in M)return M.value;var _=M.get;return _===void 0?void 0:_.call(P)}},a=i(0),l=p(a),c=i(4),u=p(c),d=i(25),f=p(d);function p(S){return S&&S.__esModule?S:{default:S}}function b(S,D,k){return D in S?Object.defineProperty(S,D,{value:k,enumerable:!0,configurable:!0,writable:!0}):S[D]=k,S}function v(S,D){if(!(S instanceof D))throw new TypeError("Cannot call a class as a function")}function m(S,D){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:S}function g(S,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);S.prototype=Object.create(D&&D.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(S,D):S.__proto__=D)}var x=function(S){g(D,S);function D(){return v(this,D),m(this,(D.__proto__||Object.getPrototypeOf(D)).apply(this,arguments))}return o(D,[{key:"format",value:function(P,M){P===w.blotName&&!M?this.replaceWith(l.default.create(this.statics.scope)):s(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"format",this).call(this,P,M)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():s(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(P,M){return this.parent.isolate(this.offset(this.parent),this.length()),P===this.parent.statics.blotName?(this.parent.replaceWith(P,M),this):(this.parent.unwrap(),s(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"replaceWith",this).call(this,P,M))}}],[{key:"formats",value:function(P){return P.tagName===this.tagName?void 0:s(D.__proto__||Object.getPrototypeOf(D),"formats",this).call(this,P)}}]),D}(u.default);x.blotName="list-item",x.tagName="LI";var w=function(S){g(D,S),o(D,null,[{key:"create",value:function(P){var M=P==="ordered"?"OL":"UL",T=s(D.__proto__||Object.getPrototypeOf(D),"create",this).call(this,M);return(P==="checked"||P==="unchecked")&&T.setAttribute("data-checked",P==="checked"),T}},{key:"formats",value:function(P){if(P.tagName==="OL")return"ordered";if(P.tagName==="UL")return P.hasAttribute("data-checked")?P.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function D(k){v(this,D);var P=m(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,k)),M=function(_){if(_.target.parentNode===k){var E=P.statics.formats(k),R=l.default.find(_.target);E==="checked"?R.format("list","unchecked"):E==="unchecked"&&R.format("list","checked")}};return k.addEventListener("touchstart",M),k.addEventListener("mousedown",M),P}return o(D,[{key:"format",value:function(P,M){this.children.length>0&&this.children.tail.format(P,M)}},{key:"formats",value:function(){return b({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(P,M){if(P instanceof x)s(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"insertBefore",this).call(this,P,M);else{var T=M==null?this.length():M.offset(this),_=this.split(T);_.parent.insertBefore(P,_)}}},{key:"optimize",value:function(P){s(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"optimize",this).call(this,P);var M=this.next;M!=null&&M.prev===this&&M.statics.blotName===this.statics.blotName&&M.domNode.tagName===this.domNode.tagName&&M.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(M.moveChildren(this),M.remove())}},{key:"replace",value:function(P){if(P.statics.blotName!==this.statics.blotName){var M=l.default.create(this.statics.defaultChild);P.moveChildren(M),this.appendChild(M)}s(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"replace",this).call(this,P)}}]),D}(f.default);w.blotName="list",w.scope=l.default.Scope.BLOCK_BLOT,w.tagName=["OL","UL"],w.defaultChild="list-item",w.allowedChildren=[x],r.ListItem=x,r.default=w},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(56),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function c(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function u(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var d=function(f){u(p,f);function p(){return l(this,p),c(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(s.default);d.blotName="italic",d.tagName=["EM","I"],r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function b(v,m){for(var g=0;g<m.length;g++){var x=m[g];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(v,x.key,x)}}return function(v,m,g){return m&&b(v.prototype,m),g&&b(v,g),v}}(),s=function b(v,m,g){v===null&&(v=Function.prototype);var x=Object.getOwnPropertyDescriptor(v,m);if(x===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:b(w,m,g)}else{if("value"in x)return x.value;var S=x.get;return S===void 0?void 0:S.call(g)}},a=i(6),l=c(a);function c(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function d(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function f(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var p=function(b){f(v,b);function v(){return u(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return o(v,null,[{key:"create",value:function(g){return g==="super"?document.createElement("sup"):g==="sub"?document.createElement("sub"):s(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,g)}},{key:"formats",value:function(g){if(g.tagName==="SUB")return"sub";if(g.tagName==="SUP")return"super"}}]),v}(l.default);p.blotName="script",p.tagName=["SUB","SUP"],r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function c(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function u(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var d=function(f){u(p,f);function p(){return l(this,p),c(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(s.default);d.blotName="strike",d.tagName="S",r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function c(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function u(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var d=function(f){u(p,f);function p(){return l(this,p),c(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(s.default);d.blotName="underline",d.tagName="U",r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function m(g,x){for(var w=0;w<x.length;w++){var S=x[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,S.key,S)}}return function(g,x,w){return x&&m(g.prototype,x),w&&m(g,w),g}}(),s=function m(g,x,w){g===null&&(g=Function.prototype);var S=Object.getOwnPropertyDescriptor(g,x);if(S===void 0){var D=Object.getPrototypeOf(g);return D===null?void 0:m(D,x,w)}else{if("value"in S)return S.value;var k=S.get;return k===void 0?void 0:k.call(w)}},a=i(0),l=u(a),c=i(27);function u(m){return m&&m.__esModule?m:{default:m}}function d(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function f(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function p(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var b=["alt","height","width"],v=function(m){p(g,m);function g(){return d(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"format",value:function(w,S){b.indexOf(w)>-1?S?this.domNode.setAttribute(w,S):this.domNode.removeAttribute(w):s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,w,S)}}],[{key:"create",value:function(w){var S=s(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,w);return typeof w=="string"&&S.setAttribute("src",this.sanitize(w)),S}},{key:"formats",value:function(w){return b.reduce(function(S,D){return w.hasAttribute(D)&&(S[D]=w.getAttribute(D)),S},{})}},{key:"match",value:function(w){return/\.(jpe?g|gif|png)$/.test(w)||/^data:image\/.+;base64/.test(w)}},{key:"sanitize",value:function(w){return(0,c.sanitize)(w,["http","https","data"])?w:"//:0"}},{key:"value",value:function(w){return w.getAttribute("src")}}]),g}(l.default.Embed);v.blotName="image",v.tagName="IMG",r.default=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function m(g,x){for(var w=0;w<x.length;w++){var S=x[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,S.key,S)}}return function(g,x,w){return x&&m(g.prototype,x),w&&m(g,w),g}}(),s=function m(g,x,w){g===null&&(g=Function.prototype);var S=Object.getOwnPropertyDescriptor(g,x);if(S===void 0){var D=Object.getPrototypeOf(g);return D===null?void 0:m(D,x,w)}else{if("value"in S)return S.value;var k=S.get;return k===void 0?void 0:k.call(w)}},a=i(4),l=i(27),c=u(l);function u(m){return m&&m.__esModule?m:{default:m}}function d(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function f(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function p(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var b=["height","width"],v=function(m){p(g,m);function g(){return d(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"format",value:function(w,S){b.indexOf(w)>-1?S?this.domNode.setAttribute(w,S):this.domNode.removeAttribute(w):s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,w,S)}}],[{key:"create",value:function(w){var S=s(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,w);return S.setAttribute("frameborder","0"),S.setAttribute("allowfullscreen",!0),S.setAttribute("src",this.sanitize(w)),S}},{key:"formats",value:function(w){return b.reduce(function(S,D){return w.hasAttribute(D)&&(S[D]=w.getAttribute(D)),S},{})}},{key:"sanitize",value:function(w){return c.default.sanitize(w)}},{key:"value",value:function(w){return w.getAttribute("src")}}]),g}(a.BlockEmbed);v.blotName="video",v.className="ql-video",v.tagName="IFRAME",r.default=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var o=function(){function w(S,D){for(var k=0;k<D.length;k++){var P=D[k];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(S,P.key,P)}}return function(S,D,k){return D&&w(S.prototype,D),k&&w(S,k),S}}(),s=function w(S,D,k){S===null&&(S=Function.prototype);var P=Object.getOwnPropertyDescriptor(S,D);if(P===void 0){var M=Object.getPrototypeOf(S);return M===null?void 0:w(M,D,k)}else{if("value"in P)return P.value;var T=P.get;return T===void 0?void 0:T.call(k)}},a=i(35),l=p(a),c=i(5),u=p(c),d=i(9),f=p(d);function p(w){return w&&w.__esModule?w:{default:w}}function b(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function v(w,S){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:w}function m(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(w,S):w.__proto__=S)}var g=function(w){m(S,w);function S(){return b(this,S),v(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return o(S,null,[{key:"create",value:function(k){var P=s(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,k);return typeof k=="string"&&(window.katex.render(k,P,{throwOnError:!1,errorColor:"#f00"}),P.setAttribute("data-value",k)),P}},{key:"value",value:function(k){return k.getAttribute("data-value")}}]),S}(l.default);g.blotName="formula",g.className="ql-formula",g.tagName="SPAN";var x=function(w){m(S,w),o(S,null,[{key:"register",value:function(){u.default.register(g,!0)}}]);function S(){b(this,S);var D=v(this,(S.__proto__||Object.getPrototypeOf(S)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return D}return S}(f.default);r.FormulaBlot=g,r.default=x},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var o=function(){function k(P,M){for(var T=0;T<M.length;T++){var _=M[T];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(P,_.key,_)}}return function(P,M,T){return M&&k(P.prototype,M),T&&k(P,T),P}}(),s=function k(P,M,T){P===null&&(P=Function.prototype);var _=Object.getOwnPropertyDescriptor(P,M);if(_===void 0){var E=Object.getPrototypeOf(P);return E===null?void 0:k(E,M,T)}else{if("value"in _)return _.value;var R=_.get;return R===void 0?void 0:R.call(T)}},a=i(0),l=v(a),c=i(5),u=v(c),d=i(9),f=v(d),p=i(13),b=v(p);function v(k){return k&&k.__esModule?k:{default:k}}function m(k,P){if(!(k instanceof P))throw new TypeError("Cannot call a class as a function")}function g(k,P){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:k}function x(k,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);k.prototype=Object.create(P&&P.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(k,P):k.__proto__=P)}var w=function(k){x(P,k);function P(){return m(this,P),g(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return o(P,[{key:"replaceWith",value:function(T){this.domNode.textContent=this.domNode.textContent,this.attach(),s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"replaceWith",this).call(this,T)}},{key:"highlight",value:function(T){var _=this.domNode.textContent;this.cachedText!==_&&((_.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=T(_),this.domNode.normalize(),this.attach()),this.cachedText=_)}}]),P}(b.default);w.className="ql-syntax";var S=new l.default.Attributor.Class("token","hljs",{scope:l.default.Scope.INLINE}),D=function(k){x(P,k),o(P,null,[{key:"register",value:function(){u.default.register(S,!0),u.default.register(w,!0)}}]);function P(M,T){m(this,P);var _=g(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,M,T));if(typeof _.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var E=null;return _.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(E),E=setTimeout(function(){_.highlight(),E=null},_.options.interval)}),_.highlight(),_}return o(P,[{key:"highlight",value:function(){var T=this;if(!this.quill.selection.composing){this.quill.update(u.default.sources.USER);var _=this.quill.getSelection();this.quill.scroll.descendants(w).forEach(function(E){E.highlight(T.options.highlight)}),this.quill.update(u.default.sources.SILENT),_!=null&&this.quill.setSelection(_,u.default.sources.SILENT)}}}]),P}(f.default);D.DEFAULTS={highlight:function(){return window.hljs==null?null:function(k){var P=window.hljs.highlightAuto(k);return P.value}}(),interval:1e3},r.CodeBlock=w,r.CodeToken=S,r.default=D},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var o=function P(M,T,_){M===null&&(M=Function.prototype);var E=Object.getOwnPropertyDescriptor(M,T);if(E===void 0){var R=Object.getPrototypeOf(M);return R===null?void 0:P(R,T,_)}else{if("value"in E)return E.value;var F=E.get;return F===void 0?void 0:F.call(_)}},s=function(){function P(M,T){for(var _=0;_<T.length;_++){var E=T[_];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(M,E.key,E)}}return function(M,T,_){return T&&P(M.prototype,T),_&&P(M,_),M}}(),a=i(3),l=m(a),c=i(8),u=m(c),d=i(43),f=m(d),p=i(15),b=i(41),v=m(b);function m(P){return P&&P.__esModule?P:{default:P}}function g(P,M){if(!(P instanceof M))throw new TypeError("Cannot call a class as a function")}function x(P,M){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:P}function w(P,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);P.prototype=Object.create(M&&M.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(P,M):P.__proto__=M)}var S=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],D=function(P){w(M,P);function M(T,_){g(this,M),_.modules.toolbar!=null&&_.modules.toolbar.container==null&&(_.modules.toolbar.container=S);var E=x(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,T,_));return E.quill.container.classList.add("ql-bubble"),E}return s(M,[{key:"extendToolbar",value:function(_){this.tooltip=new k(this.quill,this.options.bounds),this.tooltip.root.appendChild(_.container),this.buildButtons([].slice.call(_.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(_.container.querySelectorAll("select")),v.default)}}]),M}(f.default);D.DEFAULTS=(0,l.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(M){M?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var k=function(P){w(M,P);function M(T,_){g(this,M);var E=x(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,T,_));return E.quill.on(u.default.events.EDITOR_CHANGE,function(R,F,L,N){if(R===u.default.events.SELECTION_CHANGE)if(F!=null&&F.length>0&&N===u.default.sources.USER){E.show(),E.root.style.left="0px",E.root.style.width="",E.root.style.width=E.root.offsetWidth+"px";var U=E.quill.getLines(F.index,F.length);if(U.length===1)E.position(E.quill.getBounds(F));else{var H=U[U.length-1],j=E.quill.getIndex(H),z=Math.min(H.length()-1,F.index+F.length-j),q=E.quill.getBounds(new p.Range(j,z));E.position(q)}}else document.activeElement!==E.textbox&&E.quill.hasFocus()&&E.hide()}),E}return s(M,[{key:"listen",value:function(){var _=this;o(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){_.root.classList.remove("ql-editing")}),this.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!_.root.classList.contains("ql-hidden")){var E=_.quill.getSelection();E!=null&&_.position(_.quill.getBounds(E))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(_){var E=o(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"position",this).call(this,_),R=this.root.querySelector(".ql-tooltip-arrow");if(R.style.marginLeft="",E===0)return E;R.style.marginLeft=-1*E-R.offsetWidth/2+"px"}}]),M}(d.BaseTooltip);k.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=k,r.default=D},function(n,r,i){n.exports=i(63)}]).default})})(vte);var a7e=vte.exports,l7e=$i&&$i.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),nA=$i&&$i.__assign||function(){return nA=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},nA.apply(this,arguments)},c7e=$i&&$i.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},o2=$i&&$i.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Mc=o2(A),u7e=o2(rc),my=o2(gte),C9=o2(a7e),d7e=function(t){l7e(e,t);function e(n){var r=t.call(this,n)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(o,s,a,l){var c,u,d,f;o==="text-change"?(u=(c=r).onEditorChangeText)===null||u===void 0||u.call(c,r.editor.root.innerHTML,s,l,r.unprivilegedEditor):o==="selection-change"&&((f=(d=r).onEditorChangeSelection)===null||f===void 0||f.call(d,s,l,r.unprivilegedEditor))};var i=r.isControlled()?n.value:n.defaultValue;return r.value=i!=null?i:"",r}return e.prototype.validateProps=function(n){var r;if(Mc.default.Children.count(n.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Mc.default.Children.count(n.children)){var i=Mc.default.Children.only(n.children);if(((r=i)===null||r===void 0?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&n.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},e.prototype.shouldComponentUpdate=function(n,r){var i=this,o;if(this.validateProps(n),!this.editor||this.state.generation!==r.generation)return!0;if("value"in n){var s=this.getEditorContents(),a=(o=n.value,o!=null?o:"");this.isEqualValue(a,s)||this.setEditorContents(this.editor,a)}return n.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,n.readOnly),c7e(this.cleanProps,this.dirtyProps).some(function(l){return!my.default(n[l],i.props[l])})},e.prototype.shouldComponentRegenerate=function(n){var r=this;return this.dirtyProps.some(function(i){return!my.default(n[i],r.props[i])})},e.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},e.prototype.componentWillUnmount=function(){this.destroyEditor()},e.prototype.componentDidUpdate=function(n,r){var i=this;if(this.editor&&this.shouldComponentRegenerate(n)){var o=this.editor.getContents(),s=this.editor.getSelection();this.regenerationSnapshot={delta:o,selection:s},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==r.generation){var a=this.regenerationSnapshot,o=a.delta,l=a.selection;delete this.regenerationSnapshot,this.instantiateEditor();var c=this.editor;c.setContents(o),A9(function(){return i.setEditorSelection(c,l)})}},e.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},e.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},e.prototype.isControlled=function(){return"value"in this.props},e.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},e.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},e.prototype.createEditor=function(n,r){var i=new C9.default(n,r);return r.tabIndex!=null&&this.setEditorTabIndex(i,r.tabIndex),this.hookEditor(i),i},e.prototype.hookEditor=function(n){this.unprivilegedEditor=this.makeUnprivilegedEditor(n),n.on("editor-change",this.onEditorChange)},e.prototype.unhookEditor=function(n){n.off("editor-change",this.onEditorChange)},e.prototype.getEditorContents=function(){return this.value},e.prototype.getEditorSelection=function(){return this.selection},e.prototype.isDelta=function(n){return n&&n.ops},e.prototype.isEqualValue=function(n,r){return this.isDelta(n)&&this.isDelta(r)?my.default(n.ops,r.ops):my.default(n,r)},e.prototype.setEditorContents=function(n,r){var i=this;this.value=r;var o=this.getEditorSelection();typeof r=="string"?n.setContents(n.clipboard.convert(r)):n.setContents(r),A9(function(){return i.setEditorSelection(n,o)})},e.prototype.setEditorSelection=function(n,r){if(this.selection=r,r){var i=n.getLength();r.index=Math.max(0,Math.min(r.index,i-1)),r.length=Math.max(0,Math.min(r.length,i-1-r.index)),n.setSelection(r)}},e.prototype.setEditorTabIndex=function(n,r){var i,o;!((o=(i=n)===null||i===void 0?void 0:i.scroll)===null||o===void 0)&&o.domNode&&(n.scroll.domNode.tabIndex=r)},e.prototype.setEditorReadOnly=function(n,r){r?n.disable():n.enable()},e.prototype.makeUnprivilegedEditor=function(n){var r=n;return{getHTML:function(){return r.root.innerHTML},getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}},e.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var n=u7e.default.findDOMNode(this.editingArea);if(!n)throw new Error("Cannot find element for editing area");if(n.nodeType===3)throw new Error("Editing area cannot be a text node");return n},e.prototype.renderEditingArea=function(){var n=this,r=this.props,i=r.children,o=r.preserveWhitespace,s=this.state.generation,a={key:s,ref:function(l){n.editingArea=l}};return Mc.default.Children.count(i)?Mc.default.cloneElement(Mc.default.Children.only(i),a):o?Mc.default.createElement("pre",nA({},a)):Mc.default.createElement("div",nA({},a))},e.prototype.render=function(){var n;return Mc.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(n=this.props.className,n!=null?n:""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},e.prototype.onEditorChangeText=function(n,r,i,o){var s,a;if(this.editor){var l=this.isDelta(this.value)?o.getContents():o.getHTML();l!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=l,(a=(s=this.props).onChange)===null||a===void 0||a.call(s,n,r,i,o))}},e.prototype.onEditorChangeSelection=function(n,r,i){var o,s,a,l,c,u;if(this.editor){var d=this.getEditorSelection(),f=!d&&n,p=d&&!n;my.default(n,d)||(this.selection=n,(s=(o=this.props).onChangeSelection)===null||s===void 0||s.call(o,n,r,i),f?(l=(a=this.props).onFocus)===null||l===void 0||l.call(a,n,r,i):p&&((u=(c=this.props).onBlur)===null||u===void 0||u.call(c,d,r,i)))}},e.prototype.focus=function(){this.editor&&this.editor.focus()},e.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},e.displayName="React Quill",e.Quill=C9.default,e.defaultProps={theme:"snow",modules:{},readOnly:!1},e}(Mc.default.Component);function A9(t){Promise.resolve().then(t)}var f7e=d7e;const h7e=Md(f7e),p7e=({isOpen:t,onClose:e,onConfigSelect:n})=>{const[r,i]=A.useState(""),[o,s]=A.useState(6),[a,l]=A.useState([{name:"",items:[]}]),[c,u]=A.useState(!1),[d,f]=A.useState([]),[p,b]=A.useState(!1),v=ro();A.useEffect(()=>{m()},[]);const m=()=>te(rt,null,function*(){try{b(!0);const[_,E]=yield Promise.all([er(xr(Pn(xt,"gameConfigs"),Vn("type","==","sort-categories-egg"),Vn("share","==",!0))),er(xr(Pn(xt,"userGameConfigs"),Vn("type","==","sort-categories-egg"),Vn("share","==",!0)))]),R=[];_.forEach(F=>{const L=F.data(),N=L.categories.map(U=>oe(B({},U),{items:Array.isArray(U.items)?U.items:U.items.split(",").map(H=>H.trim())}));R.push(oe(B({id:F.id},L),{categories:N,isAdminConfig:!0}))}),E.forEach(F=>{const L=F.data(),N=L.categories.map(U=>oe(B({},U),{items:Array.isArray(U.items)?U.items:U.items.split(",").map(H=>H.trim())}));R.push(oe(B({id:F.id},L),{categories:N,isAdminConfig:!1}))}),f(R)}catch(_){console.error("Error loading configurations:",_),f([{id:"fallback1",type:"sort-categories-egg",title:"Animals",eggQty:12,categories:[{name:"Mammals",items:["dog","cat","elephant","giraffe"]},{name:"Birds",items:["eagle","parrot","penguin","owl"]},{name:"Reptiles",items:["snake","lizard","turtle","crocodile"]}],share:!0,createdAt:new Date,isAdminConfig:!0}]),v({title:"Using Sample Configurations",description:"Could not load configurations from server. Using sample configurations instead.",status:"info",duration:5e3})}finally{b(!1)}}),g=()=>{l([...a,{name:"",items:[]}])},x=(_,E,R)=>{const F=[...a];F[_].name=R,l(F)},w=_=>{const E=[...a];E[_].items.push({content:"",text:""}),l(E)},S=(_,E)=>{const R=[...a];R[_].items.splice(E,1),l(R)},D=(_,E,R)=>{const F=[...a],L=document.createElement("div");L.innerHTML=R;const N=L.textContent||L.innerText||"";F[_].items[E]={content:R,text:N.trim()},l(F)},k=()=>te(rt,null,function*(){var _,E;if(console.log("Auth state:",{currentUser:Jr.currentUser,isAuthenticated:!!Jr.currentUser,uid:(_=Jr.currentUser)==null?void 0:_.uid,email:(E=Jr.currentUser)==null?void 0:E.email}),!Jr.currentUser){v({title:"Authentication Required",description:"Please sign in to save configurations.",status:"error",duration:5e3});return}if(!r.trim()){v({title:"Error",description:"Please enter a configuration title.",status:"error",duration:3e3});return}if(a.some(R=>!R.name.trim()||!R.items.length)){v({title:"Error",description:"Please fill in all category names and items.",status:"error",duration:3e3});return}try{const R=a.map(z=>({name:z.name.trim(),items:z.items.map(q=>({content:q.content,text:q.text}))})),F=a.map(z=>({name:z.name.trim(),items:z.items.map(q=>q.text).filter(q=>q.length>0)}));if(R.filter(z=>z.items.length<Ip).length>0){v({title:"Not Enough Items",description:`Each category must have at least ${Ip} items.`,status:"warning",duration:5e3});return}if(R.filter(z=>z.items.length>kp).length>0){v({title:"Too Many Items",description:`A category cannot have more than ${kp} items.`,status:"warning",duration:5e3});return}const U={type:"sort-categories-egg",title:r.trim(),eggQty:Number(o),categories:F,richCategories:R,share:c,userId:Jr.currentUser.uid,email:Jr.currentUser.email||void 0,createdAt:_o()},H=R.reduce((z,q)=>z+q.items.length,0);if(H<U.eggQty){v({title:"Error",description:`Not enough items. You need at least ${U.eggQty} items total, but only have ${H}.`,status:"error",duration:5e3});return}const j=yield Sc(Pn(xt,"userGameConfigs"),U);console.log("Successfully saved config with ID:",j.id),v({title:"Success",description:"Configuration saved successfully",status:"success",duration:3e3}),yield m()}catch(R){console.error("Error saving configuration:",R),R instanceof Error&&console.error("Error details:",{message:R.message,code:R.code,name:R.name,stack:R.stack}),v({title:"Error",description:"Could not save configuration. Please try again.",status:"error",duration:5e3})}}),P=_=>{i(_.title||""),s(_.eggQty||6),u(_.share||!1);let E=[];_.richCategories&&Array.isArray(_.richCategories)?E=_.richCategories.map(R=>({name:R.name,items:R.items.map(F=>({content:F.content||"",text:F.text||""}))})):_.categories&&Array.isArray(_.categories)&&(E=_.categories.map(R=>({name:R.name,items:(Array.isArray(R.items)?R.items:[]).map(F=>({content:F,text:F}))}))),E.length===0?E=[{name:"",items:[{content:"",text:""}]}]:E=E.map(R=>oe(B({},R),{items:R.items.length>0?R.items:[{content:"",text:""}]})),l(E)},M={toolbar:[["bold","italic","underline"],[{script:"sub"},{script:"super"}],["clean"]]},T=["bold","italic","underline","script"];return h.jsxs($t,{spacing:4,pb:6,children:[h.jsxs(yt,{w:"100%",children:[h.jsx(Br,{size:"md",mb:2,children:"Load Saved Configuration"}),h.jsx(Bv,{placeholder:"Select a saved configuration",onChange:_=>{const E=d.find(R=>R.id===_.target.value);E&&(P(E),n(E))},isDisabled:p||d.length===0,children:d.map(_=>h.jsxs("option",{value:_.id,children:[_.title," ",_.isAdminConfig?"(Official)":`(by ${_.email||"Unknown"})`]},_.id))}),d.length===0&&!p&&h.jsx(dt,{fontSize:"sm",color:"gray.500",mt:1,children:"No saved configurations found. Create one below."})]}),h.jsx(vd,{}),h.jsxs(yt,{w:"100%",children:[h.jsx(Br,{size:"md",mb:4,children:"Create New Configuration"}),h.jsxs(Ir,{mb:4,children:[h.jsx(fr,{children:"Configuration Title"}),h.jsx(si,{value:r,onChange:_=>i(_.target.value),placeholder:"Enter configuration title"})]}),h.jsxs(Ir,{mb:4,children:[h.jsx(fr,{children:"Number of Eggs"}),h.jsx(si,{type:"number",value:o,onChange:_=>s(Number(_.target.value)),min:1})]}),h.jsx(Br,{size:"sm",mb:2,children:"Categories"}),a.map((_,E)=>h.jsxs($t,{w:"100%",spacing:2,mb:4,p:4,border:"1px",borderColor:"gray.200",borderRadius:"md",children:[h.jsxs(Ir,{children:[h.jsxs(fr,{children:["Category ",E+1," Name"]}),h.jsx(si,{value:_.name,onChange:R=>x(E,"name",R.target.value),placeholder:"Category name"})]}),h.jsx(fr,{alignSelf:"flex-start",children:"Items"}),_.items.map((R,F)=>h.jsxs(yt,{w:"100%",p:3,border:"1px",borderColor:"gray.100",borderRadius:"md",children:[h.jsxs(Ln,{mb:2,justify:"space-between",children:[h.jsxs(dt,{fontSize:"sm",fontWeight:"medium",children:["Item ",F+1]}),_.items.length>1&&h.jsx(Lr,{"aria-label":"Remove item",icon:h.jsx(Tl,{}),size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>S(E,F)})]}),h.jsx(h7e,{value:R.content,onChange:L=>D(E,F,L),modules:M,formats:T,placeholder:"Enter item text (supports bold, italic, underline, superscript, subscript)",style:{minHeight:"60px",backgroundColor:"white"}})]},F)),h.jsx(hn,{leftIcon:h.jsx(Al,{}),onClick:()=>w(E),colorScheme:"blue",variant:"outline",size:"sm",alignSelf:"flex-start",children:"Add Item"})]},E)),h.jsx(hn,{onClick:g,colorScheme:"blue",mb:4,children:"Add Category"}),h.jsxs(Ir,{display:"flex",alignItems:"center",mb:4,children:[h.jsx(fr,{mb:"0",children:"Share Configuration"}),h.jsx(b3,{isChecked:c,onChange:_=>u(_.target.checked)})]}),h.jsx(hn,{onClick:k,colorScheme:"green",w:"100%",children:"Save Configuration"})]})]})},m7e=({gameState:t,onClose:e,onConfigSelect:n})=>{const r=Ji({base:"sm",md:"md",lg:"xl"});return h.jsxs(Kc,{isOpen:t.isConfigModalOpen,onClose:e,size:r,children:[h.jsx(Qc,{}),h.jsxs(Yc,{maxH:"90vh",overflow:"hidden",children:[h.jsx(Xc,{fontFamily:"'Comic Neue', sans-serif",children:"Select Game Configuration"}),h.jsx(Jc,{}),h.jsx(Zc,{p:0,overflow:"auto",children:h.jsx(p7e,{isOpen:t.isConfigModalOpen,onClose:e,onConfigSelect:n})})]})]})},dc=({gameTitle:t,showHomeButton:e=!0,showBackButton:n=!0,onBack:r,children:i,variant:o="full"})=>{const s=Fr(),{isTeacher:a,isStudent:l}=Pr(),[c]=fh(),u=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||c.get("pwa")==="true";c.get("from");const d=c.get("emailAccess")==="true",f=Ji({base:"sm",md:"md"}),p=Ji({base:"md",md:"lg"}),b=()=>{s(a?"/teacher":l?"/student":"/")},v=()=>{r?r():window.history.length>1?window.history.back():b()},m=()=>u&&d?"Return to App Dashboard":a?"Return to Create Dashboard":l?"Return to Student Dashboard":"Return to Home";return o==="compact"?h.jsx(yt,{w:"full",bg:"white",boxShadow:"sm",borderBottom:"1px solid",borderColor:"gray.200",px:{base:3,md:4},py:{base:2,md:3},position:"sticky",top:0,zIndex:10,paddingTop:u?"max(8px, env(safe-area-inset-top))":void 0,paddingLeft:u?"max(12px, env(safe-area-inset-left))":void 0,paddingRight:u?"max(12px, env(safe-area-inset-right))":void 0,children:h.jsxs(Ln,{spacing:{base:2,md:3},justify:"space-between",w:"full",children:[h.jsxs(Ln,{spacing:{base:1,md:2},flex:1,minW:0,children:[n&&h.jsx(Ea,{label:"Go Back",placement:"bottom",children:h.jsx(Lr,{"aria-label":"Go back",icon:h.jsx(ZV,{}),size:f,variant:"ghost",onClick:v,colorScheme:"blue",flexShrink:0})}),h.jsx(dt,{fontSize:p,fontWeight:"bold",color:"blue.600",noOfLines:1,flex:1,children:t})]}),h.jsxs(Ln,{spacing:{base:1,md:2},flexShrink:0,children:[i,e&&h.jsx(Ea,{label:m(),placement:"bottom",children:h.jsx(Lr,{"aria-label":"Go to dashboard",icon:h.jsx("span",{children:""}),size:f,colorScheme:"blue",variant:"solid",onClick:b,flexShrink:0})})]})]})}):h.jsx(yt,{w:"full",bg:"white",boxShadow:"sm",borderRadius:"lg",p:4,border:"1px solid",borderColor:"gray.200",children:h.jsxs(Ln,{spacing:4,justify:"space-between",w:"full",children:[h.jsxs(Ln,{spacing:3,children:[n&&h.jsx(Ea,{label:"Go Back",placement:"bottom",children:h.jsx(hn,{leftIcon:h.jsx(ZV,{}),size:f,variant:"ghost",onClick:v,colorScheme:"blue",children:"Back"})}),h.jsx(dt,{fontSize:p,fontWeight:"bold",color:"gray.800",children:t}),u&&h.jsx(dt,{fontSize:"sm",color:"blue.500",fontWeight:"medium",children:" App Mode"})]}),h.jsxs(Ln,{spacing:3,children:[i,e&&h.jsx(Ea,{label:m(),placement:"bottom",children:h.jsx(hn,{leftIcon:h.jsx("span",{children:""}),size:f,colorScheme:"blue",variant:"solid",onClick:b,children:a?"Create":l?"Dashboard":"Home"})})]})]})})},g7e=({playerName:t,onGameComplete:e,config:n,onHighScoreProcessStart:r,onHighScoreProcessComplete:i})=>{const o=g6e(n,t,e,r,i);return h.jsxs(yt,{width:"100vw",maxWidth:"100%",overflow:"hidden",height:"auto",children:[h.jsx(dc,{gameTitle:"Sort Categories Egg Reveal",variant:"compact"}),h.jsx(m7e,{gameState:o.gameState,onClose:o.closeConfigModal,onConfigSelect:o.handleConfigSelect}),o.gameState.gameStarted?h.jsxs(yt,{position:"relative",children:[h.jsx(P6e,{gameState:o.gameState,gameAreaRef:o.gameAreaRef,onMouseMove:o.handleMouseMove,onGameAreaClick:o.handleGameAreaClick,onEggClick:o.handleEggClick,onWordClick:o.handleWordClick,enableTextToSpeech:n.enableTextToSpeech,usePhonicsMode:n.usePhonicsMode,useAmazonPolly:n.useAmazonPolly,textToSpeechMode:n.textToSpeechMode,containerType:n.containerType}),h.jsx(D6e,{gameState:o.gameState,onResetGame:o.handleResetGame,onCloseGame:o.handleCloseGame})]}):h.jsx(v6e,{onStartGame:o.openConfigModal,onLoadConfig:o.openConfigModal}),h.jsx(R6e,{gameState:o.gameState,onClose:o.handleHighScoreDisplayModalClose})]})},yte=({playerName:t,onGameComplete:e,config:n,onHighScoreProcessStart:r,onHighScoreProcessComplete:i})=>h.jsx(yt,{width:"100%",height:"100%",children:h.jsx(g7e,{playerName:t,onGameComplete:e,config:n,onHighScoreProcessStart:r,onHighScoreProcessComplete:i})});/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const KL="175",v7e=0,T9=1,y7e=2,xte=1,bte=2,Lu=3,Ed=0,ca=1,Ps=2,Gf=0,mv=1,M9=2,P9=3,D9=4,x7e=5,op=100,b7e=101,w7e=102,S7e=103,_7e=104,E7e=200,C7e=201,A7e=202,T7e=203,HI=204,GI=205,M7e=206,P7e=207,D7e=208,R7e=209,k7e=210,I7e=211,F7e=212,O7e=213,N7e=214,qI=0,KI=1,YI=2,Xv=3,XI=4,QI=5,ZI=6,JI=7,wte=0,L7e=1,B7e=2,qf=0,j7e=1,U7e=2,z7e=3,V7e=4,W7e=5,$7e=6,H7e=7,Ste=300,Qv=301,Zv=302,eF=303,tF=304,s2=306,Ub=1e3,yp=1001,nF=1002,fc=1003,G7e=1004,qS=1005,oc=1006,yD=1007,Pf=1008,Cd=1009,_te=1010,Ete=1011,zb=1012,YL=1013,rm=1014,Zu=1015,Zw=1016,XL=1017,QL=1018,Vb=1020,Cte=35902,Ate=1021,Tte=1022,sc=1023,Mte=1024,Pte=1025,Wb=1026,$b=1027,Dte=1028,ZL=1029,Rte=1030,JL=1031,e5=1033,wE=33776,SE=33777,_E=33778,EE=33779,rF=35840,iF=35841,oF=35842,sF=35843,aF=36196,lF=37492,cF=37496,uF=37808,dF=37809,fF=37810,hF=37811,pF=37812,mF=37813,gF=37814,vF=37815,yF=37816,xF=37817,bF=37818,wF=37819,SF=37820,_F=37821,CE=36492,EF=36494,CF=36495,kte=36283,AF=36284,TF=36285,MF=36286,q7e=3200,K7e=3201,Ite=0,Y7e=1,Ef="",il="srgb",Jv="srgb-linear",rA="linear",ii="srgb",eg=7680,R9=519,X7e=512,Q7e=513,Z7e=514,Fte=515,J7e=516,eHe=517,tHe=518,nHe=519,k9=35044,I9="300 es",Ju=2e3,iA=2001;class _0{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){const r=this._listeners;if(r===void 0)return;const i=r[e];if(i!==void 0){const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const r=n[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,s=i.length;o<s;o++)i[o].call(this,e);e.target=null}}}const rs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],xD=Math.PI/180,PF=180/Math.PI;function E0(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(rs[t&255]+rs[t>>8&255]+rs[t>>16&255]+rs[t>>24&255]+"-"+rs[e&255]+rs[e>>8&255]+"-"+rs[e>>16&15|64]+rs[e>>24&255]+"-"+rs[n&63|128]+rs[n>>8&255]+"-"+rs[n>>16&255]+rs[n>>24&255]+rs[r&255]+rs[r>>8&255]+rs[r>>16&255]+rs[r>>24&255]).toLowerCase()}function mr(t,e,n){return Math.max(e,Math.min(n,t))}function rHe(t,e){return(t%e+e)%e}function bD(t,e,n){return(1-n)*t+n*e}function gy(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Ks(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}class Kt{constructor(e=0,n=0){Kt.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=mr(this.x,e.x,n.x),this.y=mr(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=mr(this.x,e,n),this.y=mr(this.y,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(mr(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(mr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),o=this.x-e.x,s=this.y-e.y;return this.x=o*r-s*i+e.x,this.y=o*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class rr{constructor(e,n,r,i,o,s,a,l,c){rr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,s,a,l,c)}set(e,n,r,i,o,s,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=n,u[4]=o,u[5]=l,u[6]=r,u[7]=s,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,s=r[0],a=r[3],l=r[6],c=r[1],u=r[4],d=r[7],f=r[2],p=r[5],b=r[8],v=i[0],m=i[3],g=i[6],x=i[1],w=i[4],S=i[7],D=i[2],k=i[5],P=i[8];return o[0]=s*v+a*x+l*D,o[3]=s*m+a*w+l*k,o[6]=s*g+a*S+l*P,o[1]=c*v+u*x+d*D,o[4]=c*m+u*w+d*k,o[7]=c*g+u*S+d*P,o[2]=f*v+p*x+b*D,o[5]=f*m+p*w+b*k,o[8]=f*g+p*S+b*P,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return n*s*u-n*a*c-r*o*u+r*a*l+i*o*c-i*s*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*s-a*c,f=a*l-u*o,p=c*o-s*l,b=n*d+r*f+i*p;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/b;return e[0]=d*v,e[1]=(i*c-u*r)*v,e[2]=(a*r-i*s)*v,e[3]=f*v,e[4]=(u*n-i*l)*v,e[5]=(i*o-a*n)*v,e[6]=p*v,e[7]=(r*l-c*n)*v,e[8]=(s*n-r*o)*v,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,o,s,a){const l=Math.cos(o),c=Math.sin(o);return this.set(r*l,r*c,-r*(l*s+c*a)+s+e,-i*c,i*l,-i*(-c*s+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(wD.makeScale(e,n)),this}rotate(e){return this.premultiply(wD.makeRotation(-e)),this}translate(e,n){return this.premultiply(wD.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const wD=new rr;function Ote(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function oA(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function iHe(){const t=oA("canvas");return t.style.display="block",t}const F9={};function AE(t){t in F9||(F9[t]=!0,console.warn(t))}function oHe(t,e,n){return new Promise(function(r,i){function o(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:i();break;case t.TIMEOUT_EXPIRED:setTimeout(o,n);break;default:r()}}setTimeout(o,n)})}function sHe(t){const e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function aHe(t){const e=t.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const O9=new rr().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),N9=new rr().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function lHe(){const t={enabled:!0,workingColorSpace:Jv,spaces:{},convert:function(i,o,s){return this.enabled===!1||o===s||!o||!s||(this.spaces[o].transfer===ii&&(i.r=cd(i.r),i.g=cd(i.g),i.b=cd(i.b)),this.spaces[o].primaries!==this.spaces[s].primaries&&(i.applyMatrix3(this.spaces[o].toXYZ),i.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===ii&&(i.r=gv(i.r),i.g=gv(i.g),i.b=gv(i.b))),i},fromWorkingColorSpace:function(i,o){return this.convert(i,this.workingColorSpace,o)},toWorkingColorSpace:function(i,o){return this.convert(i,o,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Ef?rA:this.spaces[i].transfer},getLuminanceCoefficients:function(i,o=this.workingColorSpace){return i.fromArray(this.spaces[o].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,o,s){return i.copy(this.spaces[o].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return t.define({[Jv]:{primaries:e,whitePoint:r,transfer:rA,toXYZ:O9,fromXYZ:N9,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:il},outputColorSpaceConfig:{drawingBufferColorSpace:il}},[il]:{primaries:e,whitePoint:r,transfer:ii,toXYZ:O9,fromXYZ:N9,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:il}}}),t}const Or=lHe();function cd(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function gv(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let tg;class cHe{static getDataURL(e,n="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{tg===void 0&&(tg=oA("canvas")),tg.width=e.width,tg.height=e.height;const i=tg.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),r=tg}return r.toDataURL(n)}static sRGBToLinear(e){if(typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap){const n=oA("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),o=i.data;for(let s=0;s<o.length;s++)o[s]=cd(o[s]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(cd(n[r]/255)*255):n[r]=cd(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let uHe=0;class t5{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:uHe++}),this.uuid=E0(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let s=0,a=i.length;s<a;s++)i[s].isDataTexture?o.push(SD(i[s].image)):o.push(SD(i[s]))}else o=SD(i);r.url=o}return n||(e.images[this.uuid]=r),r}}function SD(t){return typeof HTMLImageElement!="undefined"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&t instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&t instanceof ImageBitmap?cHe.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let dHe=0;class Ls extends _0{constructor(e=Ls.DEFAULT_IMAGE,n=Ls.DEFAULT_MAPPING,r=yp,i=yp,o=oc,s=Pf,a=sc,l=Cd,c=Ls.DEFAULT_ANISOTROPY,u=Ef){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:dHe++}),this.uuid=E0(),this.name="",this.source=new t5(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=o,this.minFilter=s,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Kt(0,0),this.repeat=new Kt(1,1),this.center=new Kt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new rr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Ste)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ub:e.x=e.x-Math.floor(e.x);break;case yp:e.x=e.x<0?0:1;break;case nF:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ub:e.y=e.y-Math.floor(e.y);break;case yp:e.y=e.y<0?0:1;break;case nF:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Ls.DEFAULT_IMAGE=null;Ls.DEFAULT_MAPPING=Ste;Ls.DEFAULT_ANISOTROPY=1;class Hi{constructor(e=0,n=0,r=0,i=1){Hi.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=this.w,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i+s[12]*o,this.y=s[1]*n+s[5]*r+s[9]*i+s[13]*o,this.z=s[2]*n+s[6]*r+s[10]*i+s[14]*o,this.w=s[3]*n+s[7]*r+s[11]*i+s[15]*o,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,o;const l=e.elements,c=l[0],u=l[4],d=l[8],f=l[1],p=l[5],b=l[9],v=l[2],m=l[6],g=l[10];if(Math.abs(u-f)<.01&&Math.abs(d-v)<.01&&Math.abs(b-m)<.01){if(Math.abs(u+f)<.1&&Math.abs(d+v)<.1&&Math.abs(b+m)<.1&&Math.abs(c+p+g-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const w=(c+1)/2,S=(p+1)/2,D=(g+1)/2,k=(u+f)/4,P=(d+v)/4,M=(b+m)/4;return w>S&&w>D?w<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(w),i=k/r,o=P/r):S>D?S<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(S),r=k/i,o=M/i):D<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(D),r=P/o,i=M/o),this.set(r,i,o,n),this}let x=Math.sqrt((m-b)*(m-b)+(d-v)*(d-v)+(f-u)*(f-u));return Math.abs(x)<.001&&(x=1),this.x=(m-b)/x,this.y=(d-v)/x,this.z=(f-u)/x,this.w=Math.acos((c+p+g-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=mr(this.x,e.x,n.x),this.y=mr(this.y,e.y,n.y),this.z=mr(this.z,e.z,n.z),this.w=mr(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=mr(this.x,e,n),this.y=mr(this.y,e,n),this.z=mr(this.z,e,n),this.w=mr(this.w,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(mr(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class fHe extends _0{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Hi(0,0,e,n),this.scissorTest=!1,this.viewport=new Hi(0,0,e,n);const i={width:e,height:n,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:oc,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const o=new Ls(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);o.flipY=!1,o.generateMipmaps=r.generateMipmaps,o.internalFormat=r.internalFormat,this.textures=[];const s=r.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,o=this.textures.length;i<o;i++)this.textures[i].image.width=e,this.textures[i].image.height=n,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const i=Object.assign({},e.textures[n].image);this.textures[n].source=new t5(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class im extends fHe{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class Nte extends Ls{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=fc,this.minFilter=fc,this.wrapR=yp,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class hHe extends Ls{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=fc,this.minFilter=fc,this.wrapR=yp,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Jw{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,o,s,a){let l=r[i+0],c=r[i+1],u=r[i+2],d=r[i+3];const f=o[s+0],p=o[s+1],b=o[s+2],v=o[s+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d;return}if(a===1){e[n+0]=f,e[n+1]=p,e[n+2]=b,e[n+3]=v;return}if(d!==v||l!==f||c!==p||u!==b){let m=1-a;const g=l*f+c*p+u*b+d*v,x=g>=0?1:-1,w=1-g*g;if(w>Number.EPSILON){const D=Math.sqrt(w),k=Math.atan2(D,g*x);m=Math.sin(m*k)/D,a=Math.sin(a*k)/D}const S=a*x;if(l=l*m+f*S,c=c*m+p*S,u=u*m+b*S,d=d*m+v*S,m===1-a){const D=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=D,c*=D,u*=D,d*=D}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d}static multiplyQuaternionsFlat(e,n,r,i,o,s){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],d=o[s],f=o[s+1],p=o[s+2],b=o[s+3];return e[n]=a*b+u*d+l*p-c*f,e[n+1]=l*b+u*f+c*d-a*p,e[n+2]=c*b+u*p+a*f-l*d,e[n+3]=u*b-a*d-l*f-c*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),d=a(o/2),f=l(r/2),p=l(i/2),b=l(o/2);switch(s){case"XYZ":this._x=f*u*d+c*p*b,this._y=c*p*d-f*u*b,this._z=c*u*b+f*p*d,this._w=c*u*d-f*p*b;break;case"YXZ":this._x=f*u*d+c*p*b,this._y=c*p*d-f*u*b,this._z=c*u*b-f*p*d,this._w=c*u*d+f*p*b;break;case"ZXY":this._x=f*u*d-c*p*b,this._y=c*p*d+f*u*b,this._z=c*u*b+f*p*d,this._w=c*u*d-f*p*b;break;case"ZYX":this._x=f*u*d-c*p*b,this._y=c*p*d+f*u*b,this._z=c*u*b-f*p*d,this._w=c*u*d+f*p*b;break;case"YZX":this._x=f*u*d+c*p*b,this._y=c*p*d+f*u*b,this._z=c*u*b-f*p*d,this._w=c*u*d-f*p*b;break;case"XZY":this._x=f*u*d-c*p*b,this._y=c*p*d-f*u*b,this._z=c*u*b+f*p*d,this._w=c*u*d+f*p*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],o=n[8],s=n[1],a=n[5],l=n[9],c=n[2],u=n[6],d=n[10],f=r+a+d;if(f>0){const p=.5/Math.sqrt(f+1);this._w=.25/p,this._x=(u-l)*p,this._y=(o-c)*p,this._z=(s-i)*p}else if(r>a&&r>d){const p=2*Math.sqrt(1+r-a-d);this._w=(u-l)/p,this._x=.25*p,this._y=(i+s)/p,this._z=(o+c)/p}else if(a>d){const p=2*Math.sqrt(1+a-r-d);this._w=(o-c)/p,this._x=(i+s)/p,this._y=.25*p,this._z=(l+u)/p}else{const p=2*Math.sqrt(1+d-r-a);this._w=(s-i)/p,this._x=(o+c)/p,this._y=(l+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(mr(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,o=e._z,s=e._w,a=n._x,l=n._y,c=n._z,u=n._w;return this._x=r*u+s*a+i*c-o*l,this._y=i*u+s*l+o*a-r*c,this._z=o*u+s*c+r*l-i*a,this._w=s*u-r*a-i*l-o*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,o=this._z,s=this._w;let a=s*e._w+r*e._x+i*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=r,this._y=i,this._z=o,this;const l=1-a*a;if(l<=Number.EPSILON){const p=1-n;return this._w=p*s+n*this._w,this._x=p*r+n*this._x,this._y=p*i+n*this._y,this._z=p*o+n*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-n)*u)/c,f=Math.sin(n*u)/c;return this._w=s*d+this._w*f,this._x=r*d+this._x*f,this._y=i*d+this._y*f,this._z=o*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),o=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),o*Math.sin(n),o*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class qe{constructor(e=0,n=0,r=0){qe.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(L9.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(L9.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[3]*r+o[6]*i,this.y=o[1]*n+o[4]*r+o[7]*i,this.z=o[2]*n+o[5]*r+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=e.elements,s=1/(o[3]*n+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*n+o[4]*r+o[8]*i+o[12])*s,this.y=(o[1]*n+o[5]*r+o[9]*i+o[13])*s,this.z=(o[2]*n+o[6]*r+o[10]*i+o[14])*s,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,o=e.x,s=e.y,a=e.z,l=e.w,c=2*(s*i-a*r),u=2*(a*n-o*i),d=2*(o*r-s*n);return this.x=n+l*c+s*d-a*u,this.y=r+l*u+a*c-o*d,this.z=i+l*d+o*u-s*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i,this.y=o[1]*n+o[5]*r+o[9]*i,this.z=o[2]*n+o[6]*r+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=mr(this.x,e.x,n.x),this.y=mr(this.y,e.y,n.y),this.z=mr(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=mr(this.x,e,n),this.y=mr(this.y,e,n),this.z=mr(this.z,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(mr(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,o=e.z,s=n.x,a=n.y,l=n.z;return this.x=i*l-o*a,this.y=o*s-r*l,this.z=r*a-i*s,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return _D.copy(this).projectOnVector(e),this.sub(_D)}reflect(e){return this.sub(_D.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(mr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _D=new qe,L9=new Jw;class e1{constructor(e=new qe(1/0,1/0,1/0),n=new qe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(Gl.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(Gl.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=Gl.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const o=r.getAttribute("position");if(n===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)e.isMesh===!0?e.getVertexPosition(s,Gl):Gl.fromBufferAttribute(o,s),Gl.applyMatrix4(e.matrixWorld),this.expandByPoint(Gl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),KS.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),KS.copy(r.boundingBox)),KS.applyMatrix4(e.matrixWorld),this.union(KS)}const i=e.children;for(let o=0,s=i.length;o<s;o++)this.expandByObject(i[o],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Gl),Gl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(vy),YS.subVectors(this.max,vy),ng.subVectors(e.a,vy),rg.subVectors(e.b,vy),ig.subVectors(e.c,vy),Zd.subVectors(rg,ng),Jd.subVectors(ig,rg),Nh.subVectors(ng,ig);let n=[0,-Zd.z,Zd.y,0,-Jd.z,Jd.y,0,-Nh.z,Nh.y,Zd.z,0,-Zd.x,Jd.z,0,-Jd.x,Nh.z,0,-Nh.x,-Zd.y,Zd.x,0,-Jd.y,Jd.x,0,-Nh.y,Nh.x,0];return!ED(n,ng,rg,ig,YS)||(n=[1,0,0,0,1,0,0,0,1],!ED(n,ng,rg,ig,YS))?!1:(XS.crossVectors(Zd,Jd),n=[XS.x,XS.y,XS.z],ED(n,ng,rg,ig,YS))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Gl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Gl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Du[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Du[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Du[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Du[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Du[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Du[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Du[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Du[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Du),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Du=[new qe,new qe,new qe,new qe,new qe,new qe,new qe,new qe],Gl=new qe,KS=new e1,ng=new qe,rg=new qe,ig=new qe,Zd=new qe,Jd=new qe,Nh=new qe,vy=new qe,YS=new qe,XS=new qe,Lh=new qe;function ED(t,e,n,r,i){for(let o=0,s=t.length-3;o<=s;o+=3){Lh.fromArray(t,o);const a=i.x*Math.abs(Lh.x)+i.y*Math.abs(Lh.y)+i.z*Math.abs(Lh.z),l=e.dot(Lh),c=n.dot(Lh),u=r.dot(Lh);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const pHe=new e1,yy=new qe,CD=new qe;class n5{constructor(e=new qe,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):pHe.setFromPoints(e).getCenter(r);let i=0;for(let o=0,s=e.length;o<s;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;yy.subVectors(e,this.center);const n=yy.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(yy,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(CD.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(yy.copy(e.center).add(CD)),this.expandByPoint(yy.copy(e.center).sub(CD))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ru=new qe,AD=new qe,QS=new qe,ef=new qe,TD=new qe,ZS=new qe,MD=new qe;class Lte{constructor(e=new qe,n=new qe(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ru)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Ru.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Ru.copy(this.origin).addScaledVector(this.direction,n),Ru.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){AD.copy(e).add(n).multiplyScalar(.5),QS.copy(n).sub(e).normalize(),ef.copy(this.origin).sub(AD);const o=e.distanceTo(n)*.5,s=-this.direction.dot(QS),a=ef.dot(this.direction),l=-ef.dot(QS),c=ef.lengthSq(),u=Math.abs(1-s*s);let d,f,p,b;if(u>0)if(d=s*l-a,f=s*a-l,b=o*u,d>=0)if(f>=-b)if(f<=b){const v=1/u;d*=v,f*=v,p=d*(d+s*f+2*a)+f*(s*d+f+2*l)+c}else f=o,d=Math.max(0,-(s*f+a)),p=-d*d+f*(f+2*l)+c;else f=-o,d=Math.max(0,-(s*f+a)),p=-d*d+f*(f+2*l)+c;else f<=-b?(d=Math.max(0,-(-s*o+a)),f=d>0?-o:Math.min(Math.max(-o,-l),o),p=-d*d+f*(f+2*l)+c):f<=b?(d=0,f=Math.min(Math.max(-o,-l),o),p=f*(f+2*l)+c):(d=Math.max(0,-(s*o+a)),f=d>0?o:Math.min(Math.max(-o,-l),o),p=-d*d+f*(f+2*l)+c);else f=s>0?-o:o,d=Math.max(0,-(s*f+a)),p=-d*d+f*(f+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(AD).addScaledVector(QS,f),p}intersectSphere(e,n){Ru.subVectors(e.center,this.origin);const r=Ru.dot(this.direction),i=Ru.dot(Ru)-r*r,o=e.radius*e.radius;if(i>o)return null;const s=Math.sqrt(o-i),a=r-s,l=r+s;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,o,s,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,f=this.origin;return c>=0?(r=(e.min.x-f.x)*c,i=(e.max.x-f.x)*c):(r=(e.max.x-f.x)*c,i=(e.min.x-f.x)*c),u>=0?(o=(e.min.y-f.y)*u,s=(e.max.y-f.y)*u):(o=(e.max.y-f.y)*u,s=(e.min.y-f.y)*u),r>s||o>i||((o>r||isNaN(r))&&(r=o),(s<i||isNaN(i))&&(i=s),d>=0?(a=(e.min.z-f.z)*d,l=(e.max.z-f.z)*d):(a=(e.max.z-f.z)*d,l=(e.min.z-f.z)*d),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Ru)!==null}intersectTriangle(e,n,r,i,o){TD.subVectors(n,e),ZS.subVectors(r,e),MD.crossVectors(TD,ZS);let s=this.direction.dot(MD),a;if(s>0){if(i)return null;a=1}else if(s<0)a=-1,s=-s;else return null;ef.subVectors(this.origin,e);const l=a*this.direction.dot(ZS.crossVectors(ef,ZS));if(l<0)return null;const c=a*this.direction.dot(TD.cross(ef));if(c<0||l+c>s)return null;const u=-a*ef.dot(MD);return u<0?null:this.at(u/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ti{constructor(e,n,r,i,o,s,a,l,c,u,d,f,p,b,v,m){Ti.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,s,a,l,c,u,d,f,p,b,v,m)}set(e,n,r,i,o,s,a,l,c,u,d,f,p,b,v,m){const g=this.elements;return g[0]=e,g[4]=n,g[8]=r,g[12]=i,g[1]=o,g[5]=s,g[9]=a,g[13]=l,g[2]=c,g[6]=u,g[10]=d,g[14]=f,g[3]=p,g[7]=b,g[11]=v,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ti().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/og.setFromMatrixColumn(e,0).length(),o=1/og.setFromMatrixColumn(e,1).length(),s=1/og.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*s,n[9]=r[9]*s,n[10]=r[10]*s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,o=e.z,s=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(o),d=Math.sin(o);if(e.order==="XYZ"){const f=s*u,p=s*d,b=a*u,v=a*d;n[0]=l*u,n[4]=-l*d,n[8]=c,n[1]=p+b*c,n[5]=f-v*c,n[9]=-a*l,n[2]=v-f*c,n[6]=b+p*c,n[10]=s*l}else if(e.order==="YXZ"){const f=l*u,p=l*d,b=c*u,v=c*d;n[0]=f+v*a,n[4]=b*a-p,n[8]=s*c,n[1]=s*d,n[5]=s*u,n[9]=-a,n[2]=p*a-b,n[6]=v+f*a,n[10]=s*l}else if(e.order==="ZXY"){const f=l*u,p=l*d,b=c*u,v=c*d;n[0]=f-v*a,n[4]=-s*d,n[8]=b+p*a,n[1]=p+b*a,n[5]=s*u,n[9]=v-f*a,n[2]=-s*c,n[6]=a,n[10]=s*l}else if(e.order==="ZYX"){const f=s*u,p=s*d,b=a*u,v=a*d;n[0]=l*u,n[4]=b*c-p,n[8]=f*c+v,n[1]=l*d,n[5]=v*c+f,n[9]=p*c-b,n[2]=-c,n[6]=a*l,n[10]=s*l}else if(e.order==="YZX"){const f=s*l,p=s*c,b=a*l,v=a*c;n[0]=l*u,n[4]=v-f*d,n[8]=b*d+p,n[1]=d,n[5]=s*u,n[9]=-a*u,n[2]=-c*u,n[6]=p*d+b,n[10]=f-v*d}else if(e.order==="XZY"){const f=s*l,p=s*c,b=a*l,v=a*c;n[0]=l*u,n[4]=-d,n[8]=c*u,n[1]=f*d+v,n[5]=s*u,n[9]=p*d-b,n[2]=b*d-p,n[6]=a*u,n[10]=v*d+f}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(mHe,e,gHe)}lookAt(e,n,r){const i=this.elements;return ya.subVectors(e,n),ya.lengthSq()===0&&(ya.z=1),ya.normalize(),tf.crossVectors(r,ya),tf.lengthSq()===0&&(Math.abs(r.z)===1?ya.x+=1e-4:ya.z+=1e-4,ya.normalize(),tf.crossVectors(r,ya)),tf.normalize(),JS.crossVectors(ya,tf),i[0]=tf.x,i[4]=JS.x,i[8]=ya.x,i[1]=tf.y,i[5]=JS.y,i[9]=ya.y,i[2]=tf.z,i[6]=JS.z,i[10]=ya.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,s=r[0],a=r[4],l=r[8],c=r[12],u=r[1],d=r[5],f=r[9],p=r[13],b=r[2],v=r[6],m=r[10],g=r[14],x=r[3],w=r[7],S=r[11],D=r[15],k=i[0],P=i[4],M=i[8],T=i[12],_=i[1],E=i[5],R=i[9],F=i[13],L=i[2],N=i[6],U=i[10],H=i[14],j=i[3],z=i[7],q=i[11],$=i[15];return o[0]=s*k+a*_+l*L+c*j,o[4]=s*P+a*E+l*N+c*z,o[8]=s*M+a*R+l*U+c*q,o[12]=s*T+a*F+l*H+c*$,o[1]=u*k+d*_+f*L+p*j,o[5]=u*P+d*E+f*N+p*z,o[9]=u*M+d*R+f*U+p*q,o[13]=u*T+d*F+f*H+p*$,o[2]=b*k+v*_+m*L+g*j,o[6]=b*P+v*E+m*N+g*z,o[10]=b*M+v*R+m*U+g*q,o[14]=b*T+v*F+m*H+g*$,o[3]=x*k+w*_+S*L+D*j,o[7]=x*P+w*E+S*N+D*z,o[11]=x*M+w*R+S*U+D*q,o[15]=x*T+w*F+S*H+D*$,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],o=e[12],s=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],f=e[10],p=e[14],b=e[3],v=e[7],m=e[11],g=e[15];return b*(+o*l*d-i*c*d-o*a*f+r*c*f+i*a*p-r*l*p)+v*(+n*l*p-n*c*f+o*s*f-i*s*p+i*c*u-o*l*u)+m*(+n*c*d-n*a*p-o*s*d+r*s*p+o*a*u-r*c*u)+g*(-i*a*u-n*l*d+n*a*f+i*s*d-r*s*f+r*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],p=e[11],b=e[12],v=e[13],m=e[14],g=e[15],x=d*m*c-v*f*c+v*l*p-a*m*p-d*l*g+a*f*g,w=b*f*c-u*m*c-b*l*p+s*m*p+u*l*g-s*f*g,S=u*v*c-b*d*c+b*a*p-s*v*p-u*a*g+s*d*g,D=b*d*l-u*v*l-b*a*f+s*v*f+u*a*m-s*d*m,k=n*x+r*w+i*S+o*D;if(k===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/k;return e[0]=x*P,e[1]=(v*f*o-d*m*o-v*i*p+r*m*p+d*i*g-r*f*g)*P,e[2]=(a*m*o-v*l*o+v*i*c-r*m*c-a*i*g+r*l*g)*P,e[3]=(d*l*o-a*f*o-d*i*c+r*f*c+a*i*p-r*l*p)*P,e[4]=w*P,e[5]=(u*m*o-b*f*o+b*i*p-n*m*p-u*i*g+n*f*g)*P,e[6]=(b*l*o-s*m*o-b*i*c+n*m*c+s*i*g-n*l*g)*P,e[7]=(s*f*o-u*l*o+u*i*c-n*f*c-s*i*p+n*l*p)*P,e[8]=S*P,e[9]=(b*d*o-u*v*o-b*r*p+n*v*p+u*r*g-n*d*g)*P,e[10]=(s*v*o-b*a*o+b*r*c-n*v*c-s*r*g+n*a*g)*P,e[11]=(u*a*o-s*d*o-u*r*c+n*d*c+s*r*p-n*a*p)*P,e[12]=D*P,e[13]=(u*v*i-b*d*i+b*r*f-n*v*f-u*r*m+n*d*m)*P,e[14]=(b*a*i-s*v*i-b*r*l+n*v*l+s*r*m-n*a*m)*P,e[15]=(s*d*i-u*a*i+u*r*l-n*d*l-s*r*f+n*a*f)*P,this}scale(e){const n=this.elements,r=e.x,i=e.y,o=e.z;return n[0]*=r,n[4]*=i,n[8]*=o,n[1]*=r,n[5]*=i,n[9]*=o,n[2]*=r,n[6]*=i,n[10]*=o,n[3]*=r,n[7]*=i,n[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),o=1-r,s=e.x,a=e.y,l=e.z,c=o*s,u=o*a;return this.set(c*s+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*s,0,c*l-i*a,u*l+i*s,o*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,o,s){return this.set(1,r,o,0,e,1,s,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,o=n._x,s=n._y,a=n._z,l=n._w,c=o+o,u=s+s,d=a+a,f=o*c,p=o*u,b=o*d,v=s*u,m=s*d,g=a*d,x=l*c,w=l*u,S=l*d,D=r.x,k=r.y,P=r.z;return i[0]=(1-(v+g))*D,i[1]=(p+S)*D,i[2]=(b-w)*D,i[3]=0,i[4]=(p-S)*k,i[5]=(1-(f+g))*k,i[6]=(m+x)*k,i[7]=0,i[8]=(b+w)*P,i[9]=(m-x)*P,i[10]=(1-(f+v))*P,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let o=og.set(i[0],i[1],i[2]).length();const s=og.set(i[4],i[5],i[6]).length(),a=og.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],ql.copy(this);const c=1/o,u=1/s,d=1/a;return ql.elements[0]*=c,ql.elements[1]*=c,ql.elements[2]*=c,ql.elements[4]*=u,ql.elements[5]*=u,ql.elements[6]*=u,ql.elements[8]*=d,ql.elements[9]*=d,ql.elements[10]*=d,n.setFromRotationMatrix(ql),r.x=o,r.y=s,r.z=a,this}makePerspective(e,n,r,i,o,s,a=Ju){const l=this.elements,c=2*o/(n-e),u=2*o/(r-i),d=(n+e)/(n-e),f=(r+i)/(r-i);let p,b;if(a===Ju)p=-(s+o)/(s-o),b=-2*s*o/(s-o);else if(a===iA)p=-s/(s-o),b=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=b,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,o,s,a=Ju){const l=this.elements,c=1/(n-e),u=1/(r-i),d=1/(s-o),f=(n+e)*c,p=(r+i)*u;let b,v;if(a===Ju)b=(s+o)*d,v=-2*d;else if(a===iA)b=o*d,v=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=v,l[14]=-b,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const og=new qe,ql=new Ti,mHe=new qe(0,0,0),gHe=new qe(1,1,1),tf=new qe,JS=new qe,ya=new qe,B9=new Ti,j9=new Jw;class du{constructor(e=0,n=0,r=0,i=du.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,o=i[0],s=i[4],a=i[8],l=i[1],c=i[5],u=i[9],d=i[2],f=i[6],p=i[10];switch(n){case"XYZ":this._y=Math.asin(mr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-mr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,o),this._z=0);break;case"ZXY":this._x=Math.asin(mr(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-mr(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-s,c));break;case"YZX":this._z=Math.asin(mr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,o)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-mr(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return B9.makeRotationFromQuaternion(e),this.setFromRotationMatrix(B9,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return j9.setFromEuler(this),this.setFromQuaternion(j9,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}du.DEFAULT_ORDER="XYZ";class r5{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let vHe=0;const U9=new qe,sg=new Jw,ku=new Ti,e_=new qe,xy=new qe,yHe=new qe,xHe=new Jw,z9=new qe(1,0,0),V9=new qe(0,1,0),W9=new qe(0,0,1),$9={type:"added"},bHe={type:"removed"},ag={type:"childadded",child:null},PD={type:"childremoved",child:null};class hs extends _0{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:vHe++}),this.uuid=E0(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=hs.DEFAULT_UP.clone();const e=new qe,n=new du,r=new Jw,i=new qe(1,1,1);function o(){r.setFromEuler(n,!1)}function s(){n.setFromQuaternion(r,void 0,!1)}n._onChange(o),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ti},normalMatrix:{value:new rr}}),this.matrix=new Ti,this.matrixWorld=new Ti,this.matrixAutoUpdate=hs.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=hs.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new r5,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return sg.setFromAxisAngle(e,n),this.quaternion.multiply(sg),this}rotateOnWorldAxis(e,n){return sg.setFromAxisAngle(e,n),this.quaternion.premultiply(sg),this}rotateX(e){return this.rotateOnAxis(z9,e)}rotateY(e){return this.rotateOnAxis(V9,e)}rotateZ(e){return this.rotateOnAxis(W9,e)}translateOnAxis(e,n){return U9.copy(e).applyQuaternion(this.quaternion),this.position.add(U9.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(z9,e)}translateY(e){return this.translateOnAxis(V9,e)}translateZ(e){return this.translateOnAxis(W9,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ku.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?e_.copy(e):e_.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),xy.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ku.lookAt(xy,e_,this.up):ku.lookAt(e_,xy,this.up),this.quaternion.setFromRotationMatrix(ku),i&&(ku.extractRotation(i.matrixWorld),sg.setFromRotationMatrix(ku),this.quaternion.premultiply(sg.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent($9),ag.child=e,this.dispatchEvent(ag),ag.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(bHe),PD.child=e,this.dispatchEvent(PD),PD.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),ku.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ku.multiply(e.parent.matrixWorld)),e.applyMatrix4(ku),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent($9),ag.child=e,this.dispatchEvent(ag),ag.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectByProperty(e,n);if(s!==void 0)return s}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let o=0,s=i.length;o<s;o++)i[o].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xy,e,yHe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xy,xHe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const i=this.children;for(let o=0,s=i.length;o<s;o++)i[o].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function o(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];o(e.shapes,d)}else o(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(o(e.materials,this.material[l]));i.material=a}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(o(e.animations,l))}}if(n){const a=s(e.geometries),l=s(e.materials),c=s(e.textures),u=s(e.images),d=s(e.shapes),f=s(e.skeletons),p=s(e.animations),b=s(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),f.length>0&&(r.skeletons=f),p.length>0&&(r.animations=p),b.length>0&&(r.nodes=b)}return r.object=i,r;function s(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}hs.DEFAULT_UP=new qe(0,1,0);hs.DEFAULT_MATRIX_AUTO_UPDATE=!0;hs.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Kl=new qe,Iu=new qe,DD=new qe,Fu=new qe,lg=new qe,cg=new qe,H9=new qe,RD=new qe,kD=new qe,ID=new qe,FD=new Hi,OD=new Hi,ND=new Hi;class tc{constructor(e=new qe,n=new qe,r=new qe){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),Kl.subVectors(e,n),i.cross(Kl);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,n,r,i,o){Kl.subVectors(i,n),Iu.subVectors(r,n),DD.subVectors(e,n);const s=Kl.dot(Kl),a=Kl.dot(Iu),l=Kl.dot(DD),c=Iu.dot(Iu),u=Iu.dot(DD),d=s*c-a*a;if(d===0)return o.set(0,0,0),null;const f=1/d,p=(c*l-a*u)*f,b=(s*u-a*l)*f;return o.set(1-p-b,b,p)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Fu)===null?!1:Fu.x>=0&&Fu.y>=0&&Fu.x+Fu.y<=1}static getInterpolation(e,n,r,i,o,s,a,l){return this.getBarycoord(e,n,r,i,Fu)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,Fu.x),l.addScaledVector(s,Fu.y),l.addScaledVector(a,Fu.z),l)}static getInterpolatedAttribute(e,n,r,i,o,s){return FD.setScalar(0),OD.setScalar(0),ND.setScalar(0),FD.fromBufferAttribute(e,n),OD.fromBufferAttribute(e,r),ND.fromBufferAttribute(e,i),s.setScalar(0),s.addScaledVector(FD,o.x),s.addScaledVector(OD,o.y),s.addScaledVector(ND,o.z),s}static isFrontFacing(e,n,r,i){return Kl.subVectors(r,n),Iu.subVectors(e,n),Kl.cross(Iu).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Kl.subVectors(this.c,this.b),Iu.subVectors(this.a,this.b),Kl.cross(Iu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return tc.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return tc.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,o){return tc.getInterpolation(e,this.a,this.b,this.c,n,r,i,o)}containsPoint(e){return tc.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return tc.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,o=this.c;let s,a;lg.subVectors(i,r),cg.subVectors(o,r),RD.subVectors(e,r);const l=lg.dot(RD),c=cg.dot(RD);if(l<=0&&c<=0)return n.copy(r);kD.subVectors(e,i);const u=lg.dot(kD),d=cg.dot(kD);if(u>=0&&d<=u)return n.copy(i);const f=l*d-u*c;if(f<=0&&l>=0&&u<=0)return s=l/(l-u),n.copy(r).addScaledVector(lg,s);ID.subVectors(e,o);const p=lg.dot(ID),b=cg.dot(ID);if(b>=0&&p<=b)return n.copy(o);const v=p*c-l*b;if(v<=0&&c>=0&&b<=0)return a=c/(c-b),n.copy(r).addScaledVector(cg,a);const m=u*b-p*d;if(m<=0&&d-u>=0&&p-b>=0)return H9.subVectors(o,i),a=(d-u)/(d-u+(p-b)),n.copy(i).addScaledVector(H9,a);const g=1/(m+v+f);return s=v*g,a=f*g,n.copy(r).addScaledVector(lg,s).addScaledVector(cg,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Bte={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},nf={h:0,s:0,l:0},t_={h:0,s:0,l:0};function LD(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class Sn{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=il){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Or.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=Or.workingColorSpace){return this.r=e,this.g=n,this.b=r,Or.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=Or.workingColorSpace){if(e=rHe(e,1),n=mr(n,0,1),r=mr(r,0,1),n===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,s=2*r-o;this.r=LD(s,o,e+1/3),this.g=LD(s,o,e),this.b=LD(s,o,e-1/3)}return Or.toWorkingColorSpace(this,i),this}setStyle(e,n=il){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const s=i[1],a=i[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,n);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,n);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=i[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,n);if(s===6)return this.setHex(parseInt(o,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=il){const r=Bte[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=cd(e.r),this.g=cd(e.g),this.b=cd(e.b),this}copyLinearToSRGB(e){return this.r=gv(e.r),this.g=gv(e.g),this.b=gv(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=il){return Or.fromWorkingColorSpace(is.copy(this),e),Math.round(mr(is.r*255,0,255))*65536+Math.round(mr(is.g*255,0,255))*256+Math.round(mr(is.b*255,0,255))}getHexString(e=il){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Or.workingColorSpace){Or.fromWorkingColorSpace(is.copy(this),n);const r=is.r,i=is.g,o=is.b,s=Math.max(r,i,o),a=Math.min(r,i,o);let l,c;const u=(a+s)/2;if(a===s)l=0,c=0;else{const d=s-a;switch(c=u<=.5?d/(s+a):d/(2-s-a),s){case r:l=(i-o)/d+(i<o?6:0);break;case i:l=(o-r)/d+2;break;case o:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=Or.workingColorSpace){return Or.fromWorkingColorSpace(is.copy(this),n),e.r=is.r,e.g=is.g,e.b=is.b,e}getStyle(e=il){Or.fromWorkingColorSpace(is.copy(this),e);const n=is.r,r=is.g,i=is.b;return e!==il?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(nf),this.setHSL(nf.h+e,nf.s+n,nf.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(nf),e.getHSL(t_);const r=bD(nf.h,t_.h,n),i=bD(nf.s,t_.s,n),o=bD(nf.l,t_.l,n);return this.setHSL(r,i,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,o=e.elements;return this.r=o[0]*n+o[3]*r+o[6]*i,this.g=o[1]*n+o[4]*r+o[7]*i,this.b=o[2]*n+o[5]*r+o[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const is=new Sn;Sn.NAMES=Bte;let wHe=0;class ym extends _0{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:wHe++}),this.uuid=E0(),this.name="",this.type="Material",this.blending=mv,this.side=Ed,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=HI,this.blendDst=GI,this.blendEquation=op,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Sn(0,0,0),this.blendAlpha=0,this.depthFunc=Xv,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=R9,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=eg,this.stencilZFail=eg,this.stencilZPass=eg,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==mv&&(r.blending=this.blending),this.side!==Ed&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==HI&&(r.blendSrc=this.blendSrc),this.blendDst!==GI&&(r.blendDst=this.blendDst),this.blendEquation!==op&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Xv&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==R9&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==eg&&(r.stencilFail=this.stencilFail),this.stencilZFail!==eg&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==eg&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(o){const s=[];for(const a in o){const l=o[a];delete l.metadata,s.push(l)}return s}if(n){const o=i(e.textures),s=i(e.images);o.length>0&&(r.textures=o),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=n[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Ms extends ym{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Sn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new du,this.combine=wte,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const so=new qe,n_=new Kt;let SHe=0;class su{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:SHe++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=k9,this.updateRanges=[],this.gpuType=Zu,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)n_.fromBufferAttribute(this,n),n_.applyMatrix3(e),this.setXY(n,n_.x,n_.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)so.fromBufferAttribute(this,n),so.applyMatrix3(e),this.setXYZ(n,so.x,so.y,so.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)so.fromBufferAttribute(this,n),so.applyMatrix4(e),this.setXYZ(n,so.x,so.y,so.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)so.fromBufferAttribute(this,n),so.applyNormalMatrix(e),this.setXYZ(n,so.x,so.y,so.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)so.fromBufferAttribute(this,n),so.transformDirection(e),this.setXYZ(n,so.x,so.y,so.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=gy(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Ks(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=gy(n,this.array)),n}setX(e,n){return this.normalized&&(n=Ks(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=gy(n,this.array)),n}setY(e,n){return this.normalized&&(n=Ks(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=gy(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Ks(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=gy(n,this.array)),n}setW(e,n){return this.normalized&&(n=Ks(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Ks(n,this.array),r=Ks(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Ks(n,this.array),r=Ks(r,this.array),i=Ks(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,o){return e*=this.itemSize,this.normalized&&(n=Ks(n,this.array),r=Ks(r,this.array),i=Ks(i,this.array),o=Ks(o,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==k9&&(e.usage=this.usage),e}}class jte extends su{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class Ute extends su{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class ai extends su{constructor(e,n,r){super(new Float32Array(e),n,r)}}let _He=0;const el=new Ti,BD=new hs,ug=new qe,xa=new e1,by=new e1,Po=new qe;class fa extends _0{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_He++}),this.uuid=E0(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Ote(e)?Ute:jte)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new rr().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return el.makeRotationFromQuaternion(e),this.applyMatrix4(el),this}rotateX(e){return el.makeRotationX(e),this.applyMatrix4(el),this}rotateY(e){return el.makeRotationY(e),this.applyMatrix4(el),this}rotateZ(e){return el.makeRotationZ(e),this.applyMatrix4(el),this}translate(e,n,r){return el.makeTranslation(e,n,r),this.applyMatrix4(el),this}scale(e,n,r){return el.makeScale(e,n,r),this.applyMatrix4(el),this}lookAt(e){return BD.lookAt(e),BD.updateMatrix(),this.applyMatrix4(BD.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ug).negate(),this.translate(ug.x,ug.y,ug.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const r=[];for(let i=0,o=e.length;i<o;i++){const s=e[i];r.push(s.x,s.y,s.z||0)}this.setAttribute("position",new ai(r,3))}else{const r=Math.min(e.length,n.count);for(let i=0;i<r;i++){const o=e[i];n.setXYZ(i,o.x,o.y,o.z||0)}e.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new e1);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new qe(-1/0,-1/0,-1/0),new qe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const o=n[r];xa.setFromBufferAttribute(o),this.morphTargetsRelative?(Po.addVectors(this.boundingBox.min,xa.min),this.boundingBox.expandByPoint(Po),Po.addVectors(this.boundingBox.max,xa.max),this.boundingBox.expandByPoint(Po)):(this.boundingBox.expandByPoint(xa.min),this.boundingBox.expandByPoint(xa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new n5);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new qe,1/0);return}if(e){const r=this.boundingSphere.center;if(xa.setFromBufferAttribute(e),n)for(let o=0,s=n.length;o<s;o++){const a=n[o];by.setFromBufferAttribute(a),this.morphTargetsRelative?(Po.addVectors(xa.min,by.min),xa.expandByPoint(Po),Po.addVectors(xa.max,by.max),xa.expandByPoint(Po)):(xa.expandByPoint(by.min),xa.expandByPoint(by.max))}xa.getCenter(r);let i=0;for(let o=0,s=e.count;o<s;o++)Po.fromBufferAttribute(e,o),i=Math.max(i,r.distanceToSquared(Po));if(n)for(let o=0,s=n.length;o<s;o++){const a=n[o],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Po.fromBufferAttribute(a,c),l&&(ug.fromBufferAttribute(e,c),Po.add(ug)),i=Math.max(i,r.distanceToSquared(Po))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,i=n.normal,o=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new su(new Float32Array(4*r.count),4));const s=this.getAttribute("tangent"),a=[],l=[];for(let M=0;M<r.count;M++)a[M]=new qe,l[M]=new qe;const c=new qe,u=new qe,d=new qe,f=new Kt,p=new Kt,b=new Kt,v=new qe,m=new qe;function g(M,T,_){c.fromBufferAttribute(r,M),u.fromBufferAttribute(r,T),d.fromBufferAttribute(r,_),f.fromBufferAttribute(o,M),p.fromBufferAttribute(o,T),b.fromBufferAttribute(o,_),u.sub(c),d.sub(c),p.sub(f),b.sub(f);const E=1/(p.x*b.y-b.x*p.y);isFinite(E)&&(v.copy(u).multiplyScalar(b.y).addScaledVector(d,-p.y).multiplyScalar(E),m.copy(d).multiplyScalar(p.x).addScaledVector(u,-b.x).multiplyScalar(E),a[M].add(v),a[T].add(v),a[_].add(v),l[M].add(m),l[T].add(m),l[_].add(m))}let x=this.groups;x.length===0&&(x=[{start:0,count:e.count}]);for(let M=0,T=x.length;M<T;++M){const _=x[M],E=_.start,R=_.count;for(let F=E,L=E+R;F<L;F+=3)g(e.getX(F+0),e.getX(F+1),e.getX(F+2))}const w=new qe,S=new qe,D=new qe,k=new qe;function P(M){D.fromBufferAttribute(i,M),k.copy(D);const T=a[M];w.copy(T),w.sub(D.multiplyScalar(D.dot(T))).normalize(),S.crossVectors(k,T);const E=S.dot(l[M])<0?-1:1;s.setXYZW(M,w.x,w.y,w.z,E)}for(let M=0,T=x.length;M<T;++M){const _=x[M],E=_.start,R=_.count;for(let F=E,L=E+R;F<L;F+=3)P(e.getX(F+0)),P(e.getX(F+1)),P(e.getX(F+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new su(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let f=0,p=r.count;f<p;f++)r.setXYZ(f,0,0,0);const i=new qe,o=new qe,s=new qe,a=new qe,l=new qe,c=new qe,u=new qe,d=new qe;if(e)for(let f=0,p=e.count;f<p;f+=3){const b=e.getX(f+0),v=e.getX(f+1),m=e.getX(f+2);i.fromBufferAttribute(n,b),o.fromBufferAttribute(n,v),s.fromBufferAttribute(n,m),u.subVectors(s,o),d.subVectors(i,o),u.cross(d),a.fromBufferAttribute(r,b),l.fromBufferAttribute(r,v),c.fromBufferAttribute(r,m),a.add(u),l.add(u),c.add(u),r.setXYZ(b,a.x,a.y,a.z),r.setXYZ(v,l.x,l.y,l.z),r.setXYZ(m,c.x,c.y,c.z)}else for(let f=0,p=n.count;f<p;f+=3)i.fromBufferAttribute(n,f+0),o.fromBufferAttribute(n,f+1),s.fromBufferAttribute(n,f+2),u.subVectors(s,o),d.subVectors(i,o),u.cross(d),r.setXYZ(f+0,u.x,u.y,u.z),r.setXYZ(f+1,u.x,u.y,u.z),r.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)Po.fromBufferAttribute(e,n),Po.normalize(),e.setXYZ(n,Po.x,Po.y,Po.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,f=new c.constructor(l.length*u);let p=0,b=0;for(let v=0,m=l.length;v<m;v++){a.isInterleavedBufferAttribute?p=l[v]*a.data.stride+a.offset:p=l[v]*u;for(let g=0;g<u;g++)f[b++]=c[p++]}return new su(f,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new fa,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);n.setAttribute(a,c)}const o=this.morphAttributes;for(const a in o){const l=[],c=o[a];for(let u=0,d=c.length;u<d;u++){const f=c[u],p=e(f,r);l.push(p)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,l=s.length;a<l;a++){const c=s[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let o=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,f=c.length;d<f;d++){const p=c[d];u.push(p.toJSON(e.data))}u.length>0&&(i[l]=u,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone());const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(n))}const o=e.morphAttributes;for(const c in o){const u=[],d=o[c];for(let f=0,p=d.length;f<p;f++)u.push(d[f].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let c=0,u=s.length;c<u;c++){const d=s[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const G9=new Ti,Bh=new Lte,r_=new n5,q9=new qe,i_=new qe,o_=new qe,s_=new qe,jD=new qe,a_=new qe,K9=new qe,l_=new qe;class Dn extends hs{constructor(e=new fa,n=new Ms){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,o=r.morphAttributes.position,s=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(o&&a){a_.set(0,0,0);for(let l=0,c=o.length;l<c;l++){const u=a[l],d=o[l];u!==0&&(jD.fromBufferAttribute(d,e),s?a_.addScaledVector(jD,u):a_.addScaledVector(jD.sub(n),u))}n.add(a_)}return n}raycast(e,n){const r=this.geometry,i=this.material,o=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),r_.copy(r.boundingSphere),r_.applyMatrix4(o),Bh.copy(e.ray).recast(e.near),!(r_.containsPoint(Bh.origin)===!1&&(Bh.intersectSphere(r_,q9)===null||Bh.origin.distanceToSquared(q9)>Vl(e.far-e.near,2)))&&(G9.copy(o).invert(),Bh.copy(e.ray).applyMatrix4(G9),!(r.boundingBox!==null&&Bh.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,Bh)))}_computeIntersections(e,n,r){let i;const o=this.geometry,s=this.material,a=o.index,l=o.attributes.position,c=o.attributes.uv,u=o.attributes.uv1,d=o.attributes.normal,f=o.groups,p=o.drawRange;if(a!==null)if(Array.isArray(s))for(let b=0,v=f.length;b<v;b++){const m=f[b],g=s[m.materialIndex],x=Math.max(m.start,p.start),w=Math.min(a.count,Math.min(m.start+m.count,p.start+p.count));for(let S=x,D=w;S<D;S+=3){const k=a.getX(S),P=a.getX(S+1),M=a.getX(S+2);i=c_(this,g,e,r,c,u,d,k,P,M),i&&(i.faceIndex=Math.floor(S/3),i.face.materialIndex=m.materialIndex,n.push(i))}}else{const b=Math.max(0,p.start),v=Math.min(a.count,p.start+p.count);for(let m=b,g=v;m<g;m+=3){const x=a.getX(m),w=a.getX(m+1),S=a.getX(m+2);i=c_(this,s,e,r,c,u,d,x,w,S),i&&(i.faceIndex=Math.floor(m/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(s))for(let b=0,v=f.length;b<v;b++){const m=f[b],g=s[m.materialIndex],x=Math.max(m.start,p.start),w=Math.min(l.count,Math.min(m.start+m.count,p.start+p.count));for(let S=x,D=w;S<D;S+=3){const k=S,P=S+1,M=S+2;i=c_(this,g,e,r,c,u,d,k,P,M),i&&(i.faceIndex=Math.floor(S/3),i.face.materialIndex=m.materialIndex,n.push(i))}}else{const b=Math.max(0,p.start),v=Math.min(l.count,p.start+p.count);for(let m=b,g=v;m<g;m+=3){const x=m,w=m+1,S=m+2;i=c_(this,s,e,r,c,u,d,x,w,S),i&&(i.faceIndex=Math.floor(m/3),n.push(i))}}}}function EHe(t,e,n,r,i,o,s,a){let l;if(e.side===ca?l=r.intersectTriangle(s,o,i,!0,a):l=r.intersectTriangle(i,o,s,e.side===Ed,a),l===null)return null;l_.copy(a),l_.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(l_);return c<n.near||c>n.far?null:{distance:c,point:l_.clone(),object:t}}function c_(t,e,n,r,i,o,s,a,l,c){t.getVertexPosition(a,i_),t.getVertexPosition(l,o_),t.getVertexPosition(c,s_);const u=EHe(t,e,n,r,i_,o_,s_,K9);if(u){const d=new qe;tc.getBarycoord(K9,i_,o_,s_,d),i&&(u.uv=tc.getInterpolatedAttribute(i,a,l,c,d,new Kt)),o&&(u.uv1=tc.getInterpolatedAttribute(o,a,l,c,d,new Kt)),s&&(u.normal=tc.getInterpolatedAttribute(s,a,l,c,d,new qe),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new qe,materialIndex:0};tc.getNormal(i_,o_,s_,f.normal),u.face=f,u.barycoord=d}return u}class ol extends fa{constructor(e=1,n=1,r=1,i=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:o,depthSegments:s};const a=this;i=Math.floor(i),o=Math.floor(o),s=Math.floor(s);const l=[],c=[],u=[],d=[];let f=0,p=0;b("z","y","x",-1,-1,r,n,e,s,o,0),b("z","y","x",1,-1,r,n,-e,s,o,1),b("x","z","y",1,1,e,r,n,i,s,2),b("x","z","y",1,-1,e,r,-n,i,s,3),b("x","y","z",1,-1,e,n,r,i,o,4),b("x","y","z",-1,-1,e,n,-r,i,o,5),this.setIndex(l),this.setAttribute("position",new ai(c,3)),this.setAttribute("normal",new ai(u,3)),this.setAttribute("uv",new ai(d,2));function b(v,m,g,x,w,S,D,k,P,M,T){const _=S/P,E=D/M,R=S/2,F=D/2,L=k/2,N=P+1,U=M+1;let H=0,j=0;const z=new qe;for(let q=0;q<U;q++){const $=q*E-F;for(let K=0;K<N;K++){const G=K*_-R;z[v]=G*x,z[m]=$*w,z[g]=L,c.push(z.x,z.y,z.z),z[v]=0,z[m]=0,z[g]=k>0?1:-1,u.push(z.x,z.y,z.z),d.push(K/P),d.push(1-q/M),H+=1}}for(let q=0;q<M;q++)for(let $=0;$<P;$++){const K=f+$+N*q,G=f+$+N*(q+1),Y=f+($+1)+N*(q+1),J=f+($+1)+N*q;l.push(K,G,J),l.push(G,Y,J),j+=6}a.addGroup(p,j,T),p+=j,f+=H}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ol(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function e0(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function Es(t){const e={};for(let n=0;n<t.length;n++){const r=e0(t[n]);for(const i in r)e[i]=r[i]}return e}function CHe(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function zte(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Or.workingColorSpace}const AHe={clone:e0,merge:Es};var THe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,MHe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ih extends ym{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=THe,this.fragmentShader=MHe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=e0(e.uniforms),this.uniformsGroups=CHe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?n.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?n.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?n.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?n.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?n.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?n.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?n.uniforms[i]={type:"m4",value:s.toArray()}:n.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class Vte extends hs{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ti,this.projectionMatrix=new Ti,this.projectionMatrixInverse=new Ti,this.coordinateSystem=Ju}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const rf=new qe,Y9=new Kt,X9=new Kt;class cl extends Vte{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=PF*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(xD*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return PF*2*Math.atan(Math.tan(xD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){rf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(rf.x,rf.y).multiplyScalar(-e/rf.z),rf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(rf.x,rf.y).multiplyScalar(-e/rf.z)}getViewSize(e,n){return this.getViewBounds(e,Y9,X9),n.subVectors(X9,Y9)}setViewOffset(e,n,r,i,o,s){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(xD*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,o=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,c=s.fullHeight;o+=s.offsetX*i/l,n-=s.offsetY*r/c,i*=s.width/l,r*=s.height/c}const a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const dg=-90,fg=1;class PHe extends hs{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new cl(dg,fg,e,n);i.layers=this.layers,this.add(i);const o=new cl(dg,fg,e,n);o.layers=this.layers,this.add(o);const s=new cl(dg,fg,e,n);s.layers=this.layers,this.add(s);const a=new cl(dg,fg,e,n);a.layers=this.layers,this.add(a);const l=new cl(dg,fg,e,n);l.layers=this.layers,this.add(l);const c=new cl(dg,fg,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,o,s,a,l]=n;for(const c of n)this.remove(c);if(e===Ju)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===iA)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,s,a,l,c,u]=this.children,d=e.getRenderTarget(),f=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),b=e.xr.enabled;e.xr.enabled=!1;const v=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,o),e.setRenderTarget(r,1,i),e.render(n,s),e.setRenderTarget(r,2,i),e.render(n,a),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,c),r.texture.generateMipmaps=v,e.setRenderTarget(r,5,i),e.render(n,u),e.setRenderTarget(d,f,p),e.xr.enabled=b,r.texture.needsPMREMUpdate=!0}}class Wte extends Ls{constructor(e=[],n=Qv,r,i,o,s,a,l,c,u){super(e,n,r,i,o,s,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class DHe extends im{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new Wte(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:oc}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new ol(5,5,5),o=new ih({name:"CubemapFromEquirect",uniforms:e0(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:ca,blending:Gf});o.uniforms.tEquirect.value=n;const s=new Dn(i,o),a=n.minFilter;return n.minFilter===Pf&&(n.minFilter=oc),new PHe(1,10,this).update(e,s),n.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,n=!0,r=!0,i=!0){const o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(n,r,i);e.setRenderTarget(o)}}class Zl extends hs{constructor(){super(),this.isGroup=!0,this.type="Group"}}const RHe={type:"move"};class UD{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Zl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Zl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new qe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new qe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Zl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new qe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new qe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,o=null,s=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){s=!0;for(const v of e.hand.values()){const m=n.getJointPose(v,r),g=this._getHandJoint(c,v);m!==null&&(g.matrix.fromArray(m.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=m.radius),g.visible=m!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],f=u.position.distanceTo(d.position),p=.02,b=.005;c.inputState.pinching&&f>p+b?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=p-b&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(o=n.getPose(e.gripSpace,r),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&o!==null&&(i=o),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(RHe)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=o!==null),c!==null&&(c.visible=s!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new Zl;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}let kHe=class extends hs{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new du,this.environmentIntensity=1,this.environmentRotation=new du,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}};const zD=new qe,IHe=new qe,FHe=new rr;class Zh{constructor(e=new qe(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=zD.subVectors(r,n).cross(IHe.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(zD),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:n.copy(e.start).addScaledVector(r,o)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||FHe.getNormalMatrix(e),i=this.coplanarPoint(zD).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const jh=new n5,u_=new qe;class i5{constructor(e=new Zh,n=new Zh,r=new Zh,i=new Zh,o=new Zh,s=new Zh){this.planes=[e,n,r,i,o,s]}set(e,n,r,i,o,s){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(o),a[5].copy(s),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=Ju){const r=this.planes,i=e.elements,o=i[0],s=i[1],a=i[2],l=i[3],c=i[4],u=i[5],d=i[6],f=i[7],p=i[8],b=i[9],v=i[10],m=i[11],g=i[12],x=i[13],w=i[14],S=i[15];if(r[0].setComponents(l-o,f-c,m-p,S-g).normalize(),r[1].setComponents(l+o,f+c,m+p,S+g).normalize(),r[2].setComponents(l+s,f+u,m+b,S+x).normalize(),r[3].setComponents(l-s,f-u,m-b,S-x).normalize(),r[4].setComponents(l-a,f-d,m-v,S-w).normalize(),n===Ju)r[5].setComponents(l+a,f+d,m+v,S+w).normalize();else if(n===iA)r[5].setComponents(a,d,v,w).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),jh.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),jh.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(jh)}intersectsSprite(e){return jh.center.set(0,0,0),jh.radius=.7071067811865476,jh.applyMatrix4(e.matrixWorld),this.intersectsSphere(jh)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let o=0;o<6;o++)if(n[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(u_.x=i.normal.x>0?e.max.x:e.min.x,u_.y=i.normal.y>0?e.max.y:e.min.y,u_.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(u_)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class wy extends Ls{constructor(e,n,r,i,o,s,a,l,c){super(e,n,r,i,o,s,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class $te extends Ls{constructor(e,n,r=rm,i,o,s,a=fc,l=fc,c,u=Wb){if(u!==Wb&&u!==$b)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,i,o,s,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new t5(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class mu{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),o=0;n.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),o+=r.distanceTo(i),n.push(o),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n=null){const r=this.getLengths();let i=0;const o=r.length;let s;n?s=n:s=e*r[o-1];let a=0,l=o-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-s,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===s)return i/(o-1);const u=r[i],f=r[i+1]-u,p=(s-u)/f;return(i+p)/(o-1)}getTangent(e,n){let i=e-1e-4,o=e+1e-4;i<0&&(i=0),o>1&&(o=1);const s=this.getPoint(i),a=this.getPoint(o),l=n||(s.isVector2?new Kt:new qe);return l.copy(a).sub(s).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n=!1){const r=new qe,i=[],o=[],s=[],a=new qe,l=new Ti;for(let p=0;p<=e;p++){const b=p/e;i[p]=this.getTangentAt(b,new qe)}o[0]=new qe,s[0]=new qe;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),d=Math.abs(i[0].y),f=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),d<=c&&(c=d,r.set(0,1,0)),f<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),o[0].crossVectors(i[0],a),s[0].crossVectors(i[0],o[0]);for(let p=1;p<=e;p++){if(o[p]=o[p-1].clone(),s[p]=s[p-1].clone(),a.crossVectors(i[p-1],i[p]),a.length()>Number.EPSILON){a.normalize();const b=Math.acos(mr(i[p-1].dot(i[p]),-1,1));o[p].applyMatrix4(l.makeRotationAxis(a,b))}s[p].crossVectors(i[p],o[p])}if(n===!0){let p=Math.acos(mr(o[0].dot(o[e]),-1,1));p/=e,i[0].dot(a.crossVectors(o[0],o[e]))>0&&(p=-p);for(let b=1;b<=e;b++)o[b].applyMatrix4(l.makeRotationAxis(i[b],p*b)),s[b].crossVectors(i[b],o[b])}return{tangents:i,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class o5 extends mu{constructor(e=0,n=0,r=1,i=1,o=0,s=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=l}getPoint(e,n=new Kt){const r=n,i=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=i;for(;o>i;)o-=i;o<Number.EPSILON&&(s?o=0:o=i),this.aClockwise===!0&&!s&&(o===i?o=-i:o=o-i);const a=this.aStartAngle+e*o;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),f=l-this.aX,p=c-this.aY;l=f*u-p*d+this.aX,c=f*d+p*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class OHe extends o5{constructor(e,n,r,i,o,s){super(e,n,r,r,i,o,s),this.isArcCurve=!0,this.type="ArcCurve"}}function s5(){let t=0,e=0,n=0,r=0;function i(o,s,a,l){t=o,e=a,n=-3*o+3*s-2*a-l,r=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,c){i(s,a,c*(a-o),c*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,c,u,d){let f=(s-o)/c-(a-o)/(c+u)+(a-s)/u,p=(a-s)/u-(l-s)/(u+d)+(l-a)/d;f*=u,p*=u,i(s,a,f,p)},calc:function(o){const s=o*o,a=s*o;return t+e*o+n*s+r*a}}}const d_=new qe,VD=new s5,WD=new s5,$D=new s5;class NHe extends mu{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new qe){const r=n,i=this.points,o=i.length,s=(o-(this.closed?0:1))*e;let a=Math.floor(s),l=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:l===0&&a===o-1&&(a=o-2,l=1);let c,u;this.closed||a>0?c=i[(a-1)%o]:(d_.subVectors(i[0],i[1]).add(i[0]),c=d_);const d=i[a%o],f=i[(a+1)%o];if(this.closed||a+2<o?u=i[(a+2)%o]:(d_.subVectors(i[o-1],i[o-2]).add(i[o-1]),u=d_),this.curveType==="centripetal"||this.curveType==="chordal"){const p=this.curveType==="chordal"?.5:.25;let b=Math.pow(c.distanceToSquared(d),p),v=Math.pow(d.distanceToSquared(f),p),m=Math.pow(f.distanceToSquared(u),p);v<1e-4&&(v=1),b<1e-4&&(b=v),m<1e-4&&(m=v),VD.initNonuniformCatmullRom(c.x,d.x,f.x,u.x,b,v,m),WD.initNonuniformCatmullRom(c.y,d.y,f.y,u.y,b,v,m),$D.initNonuniformCatmullRom(c.z,d.z,f.z,u.z,b,v,m)}else this.curveType==="catmullrom"&&(VD.initCatmullRom(c.x,d.x,f.x,u.x,this.tension),WD.initCatmullRom(c.y,d.y,f.y,u.y,this.tension),$D.initCatmullRom(c.z,d.z,f.z,u.z,this.tension));return r.set(VD.calc(l),WD.calc(l),$D.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new qe().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Q9(t,e,n,r,i){const o=(r-e)*.5,s=(i-n)*.5,a=t*t,l=t*a;return(2*n-2*r+o+s)*l+(-3*n+3*r-2*o-s)*a+o*t+n}function LHe(t,e){const n=1-t;return n*n*e}function BHe(t,e){return 2*(1-t)*t*e}function jHe(t,e){return t*t*e}function Ix(t,e,n,r){return LHe(t,e)+BHe(t,n)+jHe(t,r)}function UHe(t,e){const n=1-t;return n*n*n*e}function zHe(t,e){const n=1-t;return 3*n*n*t*e}function VHe(t,e){return 3*(1-t)*t*t*e}function WHe(t,e){return t*t*t*e}function Fx(t,e,n,r,i){return UHe(t,e)+zHe(t,n)+VHe(t,r)+WHe(t,i)}class Hte extends mu{constructor(e=new Kt,n=new Kt,r=new Kt,i=new Kt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new Kt){const r=n,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return r.set(Fx(e,i.x,o.x,s.x,a.x),Fx(e,i.y,o.y,s.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class $He extends mu{constructor(e=new qe,n=new qe,r=new qe,i=new qe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new qe){const r=n,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return r.set(Fx(e,i.x,o.x,s.x,a.x),Fx(e,i.y,o.y,s.y,a.y),Fx(e,i.z,o.z,s.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Gte extends mu{constructor(e=new Kt,n=new Kt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new Kt){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Kt){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class HHe extends mu{constructor(e=new qe,n=new qe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new qe){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new qe){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class qte extends mu{constructor(e=new Kt,n=new Kt,r=new Kt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new Kt){const r=n,i=this.v0,o=this.v1,s=this.v2;return r.set(Ix(e,i.x,o.x,s.x),Ix(e,i.y,o.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class GHe extends mu{constructor(e=new qe,n=new qe,r=new qe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new qe){const r=n,i=this.v0,o=this.v1,s=this.v2;return r.set(Ix(e,i.x,o.x,s.x),Ix(e,i.y,o.y,s.y),Ix(e,i.z,o.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Kte extends mu{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new Kt){const r=n,i=this.points,o=(i.length-1)*e,s=Math.floor(o),a=o-s,l=i[s===0?s:s-1],c=i[s],u=i[s>i.length-2?i.length-1:s+1],d=i[s>i.length-3?i.length-1:s+2];return r.set(Q9(a,l.x,c.x,u.x,d.x),Q9(a,l.y,c.y,u.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new Kt().fromArray(i))}return this}}var DF=Object.freeze({__proto__:null,ArcCurve:OHe,CatmullRomCurve3:NHe,CubicBezierCurve:Hte,CubicBezierCurve3:$He,EllipseCurve:o5,LineCurve:Gte,LineCurve3:HHe,QuadraticBezierCurve:qte,QuadraticBezierCurve3:GHe,SplineCurve:Kte});class qHe extends mu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new DF[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let o=0;for(;o<i.length;){if(i[o]>=r){const s=i[o]-r,a=this.curves[o],l=a.getLength(),c=l===0?0:1-s/l;return a.getPointAt(c,n)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,o=this.curves;i<o.length;i++){const s=o[i],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(n.push(u),r=u)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new DF[i.type]().fromJSON(i))}return this}}let Z9=class extends qHe{constructor(e){super(),this.type="Path",this.currentPoint=new Kt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new Gte(this.currentPoint.clone(),new Kt(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const o=new qte(this.currentPoint.clone(),new Kt(e,n),new Kt(r,i));return this.curves.push(o),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,o,s){const a=new Hte(this.currentPoint.clone(),new Kt(e,n),new Kt(r,i),new Kt(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new Kte(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,o,s){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,r,i,o,s),this}absarc(e,n,r,i,o,s){return this.absellipse(e,n,r,r,i,o,s),this}ellipse(e,n,r,i,o,s,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,n+u,r,i,o,s,a,l),this}absellipse(e,n,r,i,o,s,a,l){const c=new o5(e,n,r,i,o,s,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class Hb extends fa{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const o=[],s=[],a=[],l=[],c=new qe,u=new Kt;s.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,f=3;d<=n;d++,f+=3){const p=r+d/n*i;c.x=e*Math.cos(p),c.y=e*Math.sin(p),s.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(s[f]/e+1)/2,u.y=(s[f+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=n;d++)o.push(d,d+1,0);this.setIndex(o),this.setAttribute("position",new ai(s,3)),this.setAttribute("normal",new ai(a,3)),this.setAttribute("uv",new ai(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hb(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Cf extends fa{constructor(e=1,n=1,r=1,i=32,o=1,s=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),o=Math.floor(o);const u=[],d=[],f=[],p=[];let b=0;const v=[],m=r/2;let g=0;x(),s===!1&&(e>0&&w(!0),n>0&&w(!1)),this.setIndex(u),this.setAttribute("position",new ai(d,3)),this.setAttribute("normal",new ai(f,3)),this.setAttribute("uv",new ai(p,2));function x(){const S=new qe,D=new qe;let k=0;const P=(n-e)/r;for(let M=0;M<=o;M++){const T=[],_=M/o,E=_*(n-e)+e;for(let R=0;R<=i;R++){const F=R/i,L=F*l+a,N=Math.sin(L),U=Math.cos(L);D.x=E*N,D.y=-_*r+m,D.z=E*U,d.push(D.x,D.y,D.z),S.set(N,P,U).normalize(),f.push(S.x,S.y,S.z),p.push(F,1-_),T.push(b++)}v.push(T)}for(let M=0;M<i;M++)for(let T=0;T<o;T++){const _=v[T][M],E=v[T+1][M],R=v[T+1][M+1],F=v[T][M+1];(e>0||T!==0)&&(u.push(_,E,F),k+=3),(n>0||T!==o-1)&&(u.push(E,R,F),k+=3)}c.addGroup(g,k,0),g+=k}function w(S){const D=b,k=new Kt,P=new qe;let M=0;const T=S===!0?e:n,_=S===!0?1:-1;for(let R=1;R<=i;R++)d.push(0,m*_,0),f.push(0,_,0),p.push(.5,.5),b++;const E=b;for(let R=0;R<=i;R++){const L=R/i*l+a,N=Math.cos(L),U=Math.sin(L);P.x=T*U,P.y=m*_,P.z=T*N,d.push(P.x,P.y,P.z),f.push(0,_,0),k.x=N*.5+.5,k.y=U*.5*_+.5,p.push(k.x,k.y),b++}for(let R=0;R<i;R++){const F=D+R,L=E+R;S===!0?u.push(L,L+1,F):u.push(L+1,L,F),M+=3}c.addGroup(g,M,S===!0?1:2),g+=M}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class a5 extends Cf{constructor(e=1,n=1,r=32,i=1,o=!1,s=0,a=Math.PI*2){super(0,e,n,r,i,o,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:a}}static fromJSON(e){return new a5(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class l5 extends fa{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const o=[],s=[];a(i),c(r),u(),this.setAttribute("position",new ai(o,3)),this.setAttribute("normal",new ai(o.slice(),3)),this.setAttribute("uv",new ai(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(x){const w=new qe,S=new qe,D=new qe;for(let k=0;k<n.length;k+=3)p(n[k+0],w),p(n[k+1],S),p(n[k+2],D),l(w,S,D,x)}function l(x,w,S,D){const k=D+1,P=[];for(let M=0;M<=k;M++){P[M]=[];const T=x.clone().lerp(S,M/k),_=w.clone().lerp(S,M/k),E=k-M;for(let R=0;R<=E;R++)R===0&&M===k?P[M][R]=T:P[M][R]=T.clone().lerp(_,R/E)}for(let M=0;M<k;M++)for(let T=0;T<2*(k-M)-1;T++){const _=Math.floor(T/2);T%2===0?(f(P[M][_+1]),f(P[M+1][_]),f(P[M][_])):(f(P[M][_+1]),f(P[M+1][_+1]),f(P[M+1][_]))}}function c(x){const w=new qe;for(let S=0;S<o.length;S+=3)w.x=o[S+0],w.y=o[S+1],w.z=o[S+2],w.normalize().multiplyScalar(x),o[S+0]=w.x,o[S+1]=w.y,o[S+2]=w.z}function u(){const x=new qe;for(let w=0;w<o.length;w+=3){x.x=o[w+0],x.y=o[w+1],x.z=o[w+2];const S=m(x)/2/Math.PI+.5,D=g(x)/Math.PI+.5;s.push(S,1-D)}b(),d()}function d(){for(let x=0;x<s.length;x+=6){const w=s[x+0],S=s[x+2],D=s[x+4],k=Math.max(w,S,D),P=Math.min(w,S,D);k>.9&&P<.1&&(w<.2&&(s[x+0]+=1),S<.2&&(s[x+2]+=1),D<.2&&(s[x+4]+=1))}}function f(x){o.push(x.x,x.y,x.z)}function p(x,w){const S=x*3;w.x=e[S+0],w.y=e[S+1],w.z=e[S+2]}function b(){const x=new qe,w=new qe,S=new qe,D=new qe,k=new Kt,P=new Kt,M=new Kt;for(let T=0,_=0;T<o.length;T+=9,_+=6){x.set(o[T+0],o[T+1],o[T+2]),w.set(o[T+3],o[T+4],o[T+5]),S.set(o[T+6],o[T+7],o[T+8]),k.set(s[_+0],s[_+1]),P.set(s[_+2],s[_+3]),M.set(s[_+4],s[_+5]),D.copy(x).add(w).add(S).divideScalar(3);const E=m(D);v(k,_+0,x,E),v(P,_+2,w,E),v(M,_+4,S,E)}}function v(x,w,S,D){D<0&&x.x===1&&(s[w]=x.x-1),S.x===0&&S.z===0&&(s[w]=D/2/Math.PI+.5)}function m(x){return Math.atan2(x.z,-x.x)}function g(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new l5(e.vertices,e.indices,e.radius,e.details)}}class c5 extends Z9{constructor(e){super(e),this.uuid=E0(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new Z9().fromJSON(i))}return this}}function KHe(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let o=Yte(t,0,i,n,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,c;if(r&&(o=JHe(t,e,o,n)),t.length>80*n){a=1/0,l=1/0;let u=-1/0,d=-1/0;for(let f=n;f<i;f+=n){const p=t[f],b=t[f+1];p<a&&(a=p),b<l&&(l=b),p>u&&(u=p),b>d&&(d=b)}c=Math.max(u-a,d-l),c=c!==0?32767/c:0}return Gb(o,s,n,a,l,c,0),s}function Yte(t,e,n,r,i){let o;if(i===uGe(t,e,n,r)>0)for(let s=e;s<n;s+=r)o=J9(s/r|0,t[s],t[s+1],o);else for(let s=n-r;s>=e;s-=r)o=J9(s/r|0,t[s],t[s+1],o);return o&&t0(o,o.next)&&(Kb(o),o=o.next),o}function om(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(t0(n,n.next)||ki(n.prev,n,n.next)===0)){if(Kb(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function Gb(t,e,n,r,i,o,s){if(!t)return;!s&&o&&iGe(t,r,i,o);let a=t;for(;t.prev!==t.next;){const l=t.prev,c=t.next;if(o?XHe(t,r,i,o):YHe(t)){e.push(l.i,t.i,c.i),Kb(t),t=c.next,a=c.next;continue}if(t=c,t===a){s?s===1?(t=QHe(om(t),e),Gb(t,e,n,r,i,o,2)):s===2&&ZHe(t,e,n,r,i,o):Gb(om(t),e,n,r,i,o,1);break}}}function YHe(t){const e=t.prev,n=t,r=t.next;if(ki(e,n,r)>=0)return!1;const i=e.x,o=n.x,s=r.x,a=e.y,l=n.y,c=r.y,u=Math.min(i,o,s),d=Math.min(a,l,c),f=Math.max(i,o,s),p=Math.max(a,l,c);let b=r.next;for(;b!==e;){if(b.x>=u&&b.x<=f&&b.y>=d&&b.y<=p&&Xy(i,a,o,l,s,c,b.x,b.y)&&ki(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function XHe(t,e,n,r){const i=t.prev,o=t,s=t.next;if(ki(i,o,s)>=0)return!1;const a=i.x,l=o.x,c=s.x,u=i.y,d=o.y,f=s.y,p=Math.min(a,l,c),b=Math.min(u,d,f),v=Math.max(a,l,c),m=Math.max(u,d,f),g=RF(p,b,e,n,r),x=RF(v,m,e,n,r);let w=t.prevZ,S=t.nextZ;for(;w&&w.z>=g&&S&&S.z<=x;){if(w.x>=p&&w.x<=v&&w.y>=b&&w.y<=m&&w!==i&&w!==s&&Xy(a,u,l,d,c,f,w.x,w.y)&&ki(w.prev,w,w.next)>=0||(w=w.prevZ,S.x>=p&&S.x<=v&&S.y>=b&&S.y<=m&&S!==i&&S!==s&&Xy(a,u,l,d,c,f,S.x,S.y)&&ki(S.prev,S,S.next)>=0))return!1;S=S.nextZ}for(;w&&w.z>=g;){if(w.x>=p&&w.x<=v&&w.y>=b&&w.y<=m&&w!==i&&w!==s&&Xy(a,u,l,d,c,f,w.x,w.y)&&ki(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;S&&S.z<=x;){if(S.x>=p&&S.x<=v&&S.y>=b&&S.y<=m&&S!==i&&S!==s&&Xy(a,u,l,d,c,f,S.x,S.y)&&ki(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function QHe(t,e){let n=t;do{const r=n.prev,i=n.next.next;!t0(r,i)&&Qte(r,n,n.next,i)&&qb(r,i)&&qb(i,r)&&(e.push(r.i,n.i,i.i),Kb(n),Kb(n.next),n=t=i),n=n.next}while(n!==t);return om(n)}function ZHe(t,e,n,r,i,o){let s=t;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&aGe(s,a)){let l=Zte(s,a);s=om(s,s.next),l=om(l,l.next),Gb(s,e,n,r,i,o,0),Gb(l,e,n,r,i,o,0);return}a=a.next}s=s.next}while(s!==t)}function JHe(t,e,n,r){const i=[];for(let o=0,s=e.length;o<s;o++){const a=e[o]*r,l=o<s-1?e[o+1]*r:t.length,c=Yte(t,a,l,r,!1);c===c.next&&(c.steiner=!0),i.push(sGe(c))}i.sort(eGe);for(let o=0;o<i.length;o++)n=tGe(i[o],n);return n}function eGe(t,e){let n=t.x-e.x;if(n===0&&(n=t.y-e.y,n===0)){const r=(t.next.y-t.y)/(t.next.x-t.x),i=(e.next.y-e.y)/(e.next.x-e.x);n=r-i}return n}function tGe(t,e){const n=nGe(t,e);if(!n)return e;const r=Zte(n,t);return om(r,r.next),om(n,n.next)}function nGe(t,e){let n=e;const r=t.x,i=t.y;let o=-1/0,s;if(t0(t,n))return n;do{if(t0(t,n.next))return n.next;if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const d=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(d<=r&&d>o&&(o=d,s=n.x<n.next.x?n:n.next,d===r))return s}n=n.next}while(n!==e);if(!s)return null;const a=s,l=s.x,c=s.y;let u=1/0;n=s;do{if(r>=n.x&&n.x>=l&&r!==n.x&&Xte(i<c?r:o,i,l,c,i<c?o:r,i,n.x,n.y)){const d=Math.abs(i-n.y)/(r-n.x);qb(n,t)&&(d<u||d===u&&(n.x>s.x||n.x===s.x&&rGe(s,n)))&&(s=n,u=d)}n=n.next}while(n!==a);return s}function rGe(t,e){return ki(t.prev,t,e.prev)<0&&ki(e.next,t,t.next)<0}function iGe(t,e,n,r){let i=t;do i.z===0&&(i.z=RF(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,oGe(i)}function oGe(t){let e,n=1;do{let r=t,i;t=null;let o=null;for(e=0;r;){e++;let s=r,a=0;for(let c=0;c<n&&(a++,s=s.nextZ,!!s);c++);let l=n;for(;a>0||l>0&&s;)a!==0&&(l===0||!s||r.z<=s.z)?(i=r,r=r.nextZ,a--):(i=s,s=s.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=s}o.nextZ=null,n*=2}while(e>1);return t}function RF(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function sGe(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Xte(t,e,n,r,i,o,s,a){return(i-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(r-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function Xy(t,e,n,r,i,o,s,a){return!(t===s&&e===a)&&Xte(t,e,n,r,i,o,s,a)}function aGe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!lGe(t,e)&&(qb(t,e)&&qb(e,t)&&cGe(t,e)&&(ki(t.prev,t,e.prev)||ki(t,e.prev,e))||t0(t,e)&&ki(t.prev,t,t.next)>0&&ki(e.prev,e,e.next)>0)}function ki(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function t0(t,e){return t.x===e.x&&t.y===e.y}function Qte(t,e,n,r){const i=h_(ki(t,e,n)),o=h_(ki(t,e,r)),s=h_(ki(n,r,t)),a=h_(ki(n,r,e));return!!(i!==o&&s!==a||i===0&&f_(t,n,e)||o===0&&f_(t,r,e)||s===0&&f_(n,t,r)||a===0&&f_(n,e,r))}function f_(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function h_(t){return t>0?1:t<0?-1:0}function lGe(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Qte(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function qb(t,e){return ki(t.prev,t,t.next)<0?ki(t,e,t.next)>=0&&ki(t,t.prev,e)>=0:ki(t,e,t.prev)<0||ki(t,t.next,e)<0}function cGe(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function Zte(t,e){const n=kF(t.i,t.x,t.y),r=kF(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function J9(t,e,n,r){const i=kF(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Kb(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function kF(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function uGe(t,e,n,r){let i=0;for(let o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}class dGe{static triangulate(e,n,r=2){return KHe(e,n,r)}}class Kf{static area(e){const n=e.length;let r=0;for(let i=n-1,o=0;o<n;i=o++)r+=e[i].x*e[o].y-e[o].x*e[i].y;return r*.5}static isClockWise(e){return Kf.area(e)<0}static triangulateShape(e,n){const r=[],i=[],o=[];eW(e),tW(r,e);let s=e.length;n.forEach(eW);for(let l=0;l<n.length;l++)i.push(s),s+=n[l].length,tW(r,n[l]);const a=dGe.triangulate(r,i);for(let l=0;l<a.length;l+=3)o.push(a.slice(l,l+3));return o}}function eW(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function tW(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class u5 extends fa{constructor(e=new c5([new Kt(.5,.5),new Kt(-.5,.5),new Kt(-.5,-.5),new Kt(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];s(c)}this.setAttribute("position",new ai(i,3)),this.setAttribute("uv",new ai(o,2)),this.computeVertexNormals();function s(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,u=n.steps!==void 0?n.steps:1,d=n.depth!==void 0?n.depth:1;let f=n.bevelEnabled!==void 0?n.bevelEnabled:!0,p=n.bevelThickness!==void 0?n.bevelThickness:.2,b=n.bevelSize!==void 0?n.bevelSize:p-.1,v=n.bevelOffset!==void 0?n.bevelOffset:0,m=n.bevelSegments!==void 0?n.bevelSegments:3;const g=n.extrudePath,x=n.UVGenerator!==void 0?n.UVGenerator:fGe;let w,S=!1,D,k,P,M;g&&(w=g.getSpacedPoints(u),S=!0,f=!1,D=g.computeFrenetFrames(u,!1),k=new qe,P=new qe,M=new qe),f||(m=0,p=0,b=0,v=0);const T=a.extractPoints(c);let _=T.shape;const E=T.holes;if(!Kf.isClockWise(_)){_=_.reverse();for(let le=0,me=E.length;le<me;le++){const ne=E[le];Kf.isClockWise(ne)&&(E[le]=ne.reverse())}}function F(le){const ne=10000000000000001e-36;let se=le[0];for(let ge=1;ge<=le.length;ge++){const Q=ge%le.length,W=le[Q],ve=W.x-se.x,ue=W.y-se.y,Me=ve*ve+ue*ue,Pe=Math.max(Math.abs(W.x),Math.abs(W.y),Math.abs(se.x),Math.abs(se.y)),je=ne*Pe*Pe;if(Me<=je){le.splice(Q,1),ge--;continue}se=W}}F(_),E.forEach(F);const L=E.length,N=_;for(let le=0;le<L;le++){const me=E[le];_=_.concat(me)}function U(le,me,ne){return me||console.error("THREE.ExtrudeGeometry: vec does not exist"),le.clone().addScaledVector(me,ne)}const H=_.length;function j(le,me,ne){let se,ge,Q;const W=le.x-me.x,ve=le.y-me.y,ue=ne.x-le.x,Me=ne.y-le.y,Pe=W*W+ve*ve,je=W*Me-ve*ue;if(Math.abs(je)>Number.EPSILON){const ke=Math.sqrt(Pe),De=Math.sqrt(ue*ue+Me*Me),nt=me.x-ve/ke,be=me.y+W/ke,Ne=ne.x-Me/De,Ie=ne.y+ue/De,Ve=((Ne-nt)*Me-(Ie-be)*ue)/(W*Me-ve*ue);se=nt+W*Ve-le.x,ge=be+ve*Ve-le.y;const Ue=se*se+ge*ge;if(Ue<=2)return new Kt(se,ge);Q=Math.sqrt(Ue/2)}else{let ke=!1;W>Number.EPSILON?ue>Number.EPSILON&&(ke=!0):W<-Number.EPSILON?ue<-Number.EPSILON&&(ke=!0):Math.sign(ve)===Math.sign(Me)&&(ke=!0),ke?(se=-ve,ge=W,Q=Math.sqrt(Pe)):(se=W,ge=ve,Q=Math.sqrt(Pe/2))}return new Kt(se/Q,ge/Q)}const z=[];for(let le=0,me=N.length,ne=me-1,se=le+1;le<me;le++,ne++,se++)ne===me&&(ne=0),se===me&&(se=0),z[le]=j(N[le],N[ne],N[se]);const q=[];let $,K=z.concat();for(let le=0,me=L;le<me;le++){const ne=E[le];$=[];for(let se=0,ge=ne.length,Q=ge-1,W=se+1;se<ge;se++,Q++,W++)Q===ge&&(Q=0),W===ge&&(W=0),$[se]=j(ne[se],ne[Q],ne[W]);q.push($),K=K.concat($)}const G=[],Y=[];for(let le=0;le<m;le++){const me=le/m,ne=p*Math.cos(me*Math.PI/2),se=b*Math.sin(me*Math.PI/2)+v;for(let ge=0,Q=N.length;ge<Q;ge++){const W=U(N[ge],z[ge],se);xe(W.x,W.y,-ne),me==0&&G.push(W)}for(let ge=0,Q=L;ge<Q;ge++){const W=E[ge];$=q[ge];const ve=[];for(let ue=0,Me=W.length;ue<Me;ue++){const Pe=U(W[ue],$[ue],se);xe(Pe.x,Pe.y,-ne),me==0&&ve.push(Pe)}me==0&&Y.push(ve)}}const J=Kf.triangulateShape(G,Y),V=J.length,re=b+v;for(let le=0;le<H;le++){const me=f?U(_[le],K[le],re):_[le];S?(P.copy(D.normals[0]).multiplyScalar(me.x),k.copy(D.binormals[0]).multiplyScalar(me.y),M.copy(w[0]).add(P).add(k),xe(M.x,M.y,M.z)):xe(me.x,me.y,0)}for(let le=1;le<=u;le++)for(let me=0;me<H;me++){const ne=f?U(_[me],K[me],re):_[me];S?(P.copy(D.normals[le]).multiplyScalar(ne.x),k.copy(D.binormals[le]).multiplyScalar(ne.y),M.copy(w[le]).add(P).add(k),xe(M.x,M.y,M.z)):xe(ne.x,ne.y,d/u*le)}for(let le=m-1;le>=0;le--){const me=le/m,ne=p*Math.cos(me*Math.PI/2),se=b*Math.sin(me*Math.PI/2)+v;for(let ge=0,Q=N.length;ge<Q;ge++){const W=U(N[ge],z[ge],se);xe(W.x,W.y,d+ne)}for(let ge=0,Q=E.length;ge<Q;ge++){const W=E[ge];$=q[ge];for(let ve=0,ue=W.length;ve<ue;ve++){const Me=U(W[ve],$[ve],se);S?xe(Me.x,Me.y+w[u-1].y,w[u-1].x+ne):xe(Me.x,Me.y,d+ne)}}}fe(),pe();function fe(){const le=i.length/3;if(f){let me=0,ne=H*me;for(let se=0;se<V;se++){const ge=J[se];Ae(ge[2]+ne,ge[1]+ne,ge[0]+ne)}me=u+m*2,ne=H*me;for(let se=0;se<V;se++){const ge=J[se];Ae(ge[0]+ne,ge[1]+ne,ge[2]+ne)}}else{for(let me=0;me<V;me++){const ne=J[me];Ae(ne[2],ne[1],ne[0])}for(let me=0;me<V;me++){const ne=J[me];Ae(ne[0]+H*u,ne[1]+H*u,ne[2]+H*u)}}r.addGroup(le,i.length/3-le,0)}function pe(){const le=i.length/3;let me=0;ce(N,me),me+=N.length;for(let ne=0,se=E.length;ne<se;ne++){const ge=E[ne];ce(ge,me),me+=ge.length}r.addGroup(le,i.length/3-le,1)}function ce(le,me){let ne=le.length;for(;--ne>=0;){const se=ne;let ge=ne-1;ge<0&&(ge=le.length-1);for(let Q=0,W=u+m*2;Q<W;Q++){const ve=H*Q,ue=H*(Q+1),Me=me+se+ve,Pe=me+ge+ve,je=me+ge+ue,ke=me+se+ue;Ee(Me,Pe,je,ke)}}}function xe(le,me,ne){l.push(le),l.push(me),l.push(ne)}function Ae(le,me,ne){ee(le),ee(me),ee(ne);const se=i.length/3,ge=x.generateTopUV(r,i,se-3,se-2,se-1);Oe(ge[0]),Oe(ge[1]),Oe(ge[2])}function Ee(le,me,ne,se){ee(le),ee(me),ee(se),ee(me),ee(ne),ee(se);const ge=i.length/3,Q=x.generateSideWallUV(r,i,ge-6,ge-3,ge-2,ge-1);Oe(Q[0]),Oe(Q[1]),Oe(Q[3]),Oe(Q[1]),Oe(Q[2]),Oe(Q[3])}function ee(le){i.push(l[le*3+0]),i.push(l[le*3+1]),i.push(l[le*3+2])}function Oe(le){o.push(le.x),o.push(le.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return hGe(n,r,e)}static fromJSON(e,n){const r=[];for(let o=0,s=e.shapes.length;o<s;o++){const a=n[e.shapes[o]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new DF[i.type]().fromJSON(i)),new u5(r,e.options)}}const fGe={generateTopUV:function(t,e,n,r,i){const o=e[n*3],s=e[n*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new Kt(o,s),new Kt(a,l),new Kt(c,u)]},generateSideWallUV:function(t,e,n,r,i,o){const s=e[n*3],a=e[n*3+1],l=e[n*3+2],c=e[r*3],u=e[r*3+1],d=e[r*3+2],f=e[i*3],p=e[i*3+1],b=e[i*3+2],v=e[o*3],m=e[o*3+1],g=e[o*3+2];return Math.abs(a-u)<Math.abs(s-c)?[new Kt(s,1-l),new Kt(c,1-d),new Kt(f,1-b),new Kt(v,1-g)]:[new Kt(a,1-l),new Kt(u,1-d),new Kt(p,1-b),new Kt(m,1-g)]}};function hGe(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const o=t[r];n.shapes.push(o.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class d5 extends l5{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,o,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new d5(e.radius,e.detail)}}class Yf extends fa{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const o=e/2,s=n/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,d=e/a,f=n/l,p=[],b=[],v=[],m=[];for(let g=0;g<u;g++){const x=g*f-s;for(let w=0;w<c;w++){const S=w*d-o;b.push(S,-x,0),v.push(0,0,1),m.push(w/a),m.push(1-g/l)}}for(let g=0;g<l;g++)for(let x=0;x<a;x++){const w=x+c*g,S=x+c*(g+1),D=x+1+c*(g+1),k=x+1+c*g;p.push(w,S,k),p.push(S,D,k)}this.setIndex(p),this.setAttribute("position",new ai(b,3)),this.setAttribute("normal",new ai(v,3)),this.setAttribute("uv",new ai(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yf(e.width,e.height,e.widthSegments,e.heightSegments)}}class Ox extends fa{constructor(e=new c5([new Kt(0,.5),new Kt(-.5,-.5),new Kt(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],o=[],s=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new ai(i,3)),this.setAttribute("normal",new ai(o,3)),this.setAttribute("uv",new ai(s,2));function c(u){const d=i.length/3,f=u.extractPoints(n);let p=f.shape;const b=f.holes;Kf.isClockWise(p)===!1&&(p=p.reverse());for(let m=0,g=b.length;m<g;m++){const x=b[m];Kf.isClockWise(x)===!0&&(b[m]=x.reverse())}const v=Kf.triangulateShape(p,b);for(let m=0,g=b.length;m<g;m++){const x=b[m];p=p.concat(x)}for(let m=0,g=p.length;m<g;m++){const x=p[m];i.push(x.x,x.y,0),o.push(0,0,1),s.push(x.x,x.y)}for(let m=0,g=v.length;m<g;m++){const x=v[m],w=x[0]+d,S=x[1]+d,D=x[2]+d;r.push(w,S,D),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return pGe(n,e)}static fromJSON(e,n){const r=[];for(let i=0,o=e.shapes.length;i<o;i++){const s=n[e.shapes[i]];r.push(s)}return new Ox(r,e.curveSegments)}}function pGe(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class Xs extends fa{constructor(e=1,n=32,r=16,i=0,o=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:o,thetaStart:s,thetaLength:a},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(s+a,Math.PI);let c=0;const u=[],d=new qe,f=new qe,p=[],b=[],v=[],m=[];for(let g=0;g<=r;g++){const x=[],w=g/r;let S=0;g===0&&s===0?S=.5/n:g===r&&l===Math.PI&&(S=-.5/n);for(let D=0;D<=n;D++){const k=D/n;d.x=-e*Math.cos(i+k*o)*Math.sin(s+w*a),d.y=e*Math.cos(s+w*a),d.z=e*Math.sin(i+k*o)*Math.sin(s+w*a),b.push(d.x,d.y,d.z),f.copy(d).normalize(),v.push(f.x,f.y,f.z),m.push(k+S,1-w),x.push(c++)}u.push(x)}for(let g=0;g<r;g++)for(let x=0;x<n;x++){const w=u[g][x+1],S=u[g][x],D=u[g+1][x],k=u[g+1][x+1];(g!==0||s>0)&&p.push(w,S,k),(g!==r-1||l<Math.PI)&&p.push(S,D,k)}this.setIndex(p),this.setAttribute("position",new ai(b,3)),this.setAttribute("normal",new ai(v,3)),this.setAttribute("uv",new ai(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xs(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Nx extends fa{constructor(e=1,n=.4,r=12,i=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:o},r=Math.floor(r),i=Math.floor(i);const s=[],a=[],l=[],c=[],u=new qe,d=new qe,f=new qe;for(let p=0;p<=r;p++)for(let b=0;b<=i;b++){const v=b/i*o,m=p/r*Math.PI*2;d.x=(e+n*Math.cos(m))*Math.cos(v),d.y=(e+n*Math.cos(m))*Math.sin(v),d.z=n*Math.sin(m),a.push(d.x,d.y,d.z),u.x=e*Math.cos(v),u.y=e*Math.sin(v),f.subVectors(d,u).normalize(),l.push(f.x,f.y,f.z),c.push(b/i),c.push(p/r)}for(let p=1;p<=r;p++)for(let b=1;b<=i;b++){const v=(i+1)*p+b-1,m=(i+1)*(p-1)+b-1,g=(i+1)*(p-1)+b,x=(i+1)*p+b;s.push(v,m,x),s.push(m,g,x)}this.setIndex(s),this.setAttribute("position",new ai(a,3)),this.setAttribute("normal",new ai(l,3)),this.setAttribute("uv",new ai(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nx(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Ui extends ym{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Sn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Sn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ite,this.normalScale=new Kt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new du,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class mGe extends ym{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=q7e,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class gGe extends ym{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Jte extends hs{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Sn(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}const HD=new Ti,nW=new qe,rW=new qe;class vGe{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Kt(512,512),this.map=null,this.mapPass=null,this.matrix=new Ti,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new i5,this._frameExtents=new Kt(1,1),this._viewportCount=1,this._viewports=[new Hi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;nW.setFromMatrixPosition(e.matrixWorld),n.position.copy(nW),rW.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(rW),n.updateMatrixWorld(),HD.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(HD),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(HD)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class ene extends Vte{constructor(e=-1,n=1,r=1,i=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=r-e,s=r+e,a=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=c*this.view.offsetX,s=o+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class yGe extends vGe{constructor(){super(new ene(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class xGe extends Jte{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(hs.DEFAULT_UP),this.updateMatrix(),this.target=new hs,this.shadow=new yGe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class bGe extends Jte{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class wGe extends cl{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}const iW=new Ti;class GD{constructor(e,n,r=0,i=1/0){this.ray=new Lte(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new r5,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return iW.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(iW),this}intersectObject(e,n=!0,r=[]){return IF(e,this,r,n),r.sort(oW),r}intersectObjects(e,n=!0,r=[]){for(let i=0,o=e.length;i<o;i++)IF(e[i],this,r,n);return r.sort(oW),r}}function oW(t,e){return t.distance-e.distance}function IF(t,e,n,r){let i=!0;if(t.layers.test(e.layers)&&t.raycast(e,n)===!1&&(i=!1),i===!0&&r===!0){const o=t.children;for(let s=0,a=o.length;s<a;s++)IF(o[s],e,n,!0)}}function sW(t,e,n,r){const i=SGe(r);switch(n){case Ate:return t*e;case Mte:return t*e;case Pte:return t*e*2;case Dte:return t*e/i.components*i.byteLength;case ZL:return t*e/i.components*i.byteLength;case Rte:return t*e*2/i.components*i.byteLength;case JL:return t*e*2/i.components*i.byteLength;case Tte:return t*e*3/i.components*i.byteLength;case sc:return t*e*4/i.components*i.byteLength;case e5:return t*e*4/i.components*i.byteLength;case wE:case SE:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case _E:case EE:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case iF:case sF:return Math.max(t,16)*Math.max(e,8)/4;case rF:case oF:return Math.max(t,8)*Math.max(e,8)/2;case aF:case lF:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case cF:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case uF:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case dF:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case fF:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case hF:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case pF:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case mF:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case gF:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case vF:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case yF:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case xF:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case bF:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case wF:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case SF:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case _F:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case CE:case EF:case CF:return Math.ceil(t/4)*Math.ceil(e/4)*16;case kte:case AF:return Math.ceil(t/4)*Math.ceil(e/4)*8;case TF:case MF:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function SGe(t){switch(t){case Cd:case _te:return{byteLength:1,components:1};case zb:case Ete:case Zw:return{byteLength:2,components:1};case XL:case QL:return{byteLength:2,components:4};case rm:case YL:case Zu:return{byteLength:4,components:1};case Cte:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:KL}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=KL);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function tne(){let t=null,e=!1,n=null,r=null;function i(o,s){n(o,s),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){n=o},setContext:function(o){t=o}}}function _Ge(t){const e=new WeakMap;function n(a,l){const c=a.array,u=a.usage,d=c.byteLength,f=t.createBuffer();t.bindBuffer(l,f),t.bufferData(l,c,u),a.onUploadCallback();let p;if(c instanceof Float32Array)p=t.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?p=t.HALF_FLOAT:p=t.UNSIGNED_SHORT;else if(c instanceof Int16Array)p=t.SHORT;else if(c instanceof Uint32Array)p=t.UNSIGNED_INT;else if(c instanceof Int32Array)p=t.INT;else if(c instanceof Int8Array)p=t.BYTE;else if(c instanceof Uint8Array)p=t.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)p=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:f,type:p,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:d}}function r(a,l,c){const u=l.array,d=l.updateRanges;if(t.bindBuffer(c,a),d.length===0)t.bufferSubData(c,0,u);else{d.sort((p,b)=>p.start-b.start);let f=0;for(let p=1;p<d.length;p++){const b=d[f],v=d[p];v.start<=b.start+b.count+1?b.count=Math.max(b.count,v.start+v.count-b.start):(++f,d[f]=v)}d.length=f+1;for(let p=0,b=d.length;p<b;p++){const v=d[p];t.bufferSubData(c,v.start*u.BYTES_PER_ELEMENT,u,v.start,v.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(t.deleteBuffer(l.buffer),e.delete(a))}function s(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,n(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(c.buffer,a,l),c.version=a.version}}return{get:i,remove:o,update:s}}var EGe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,CGe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,AGe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,TGe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,MGe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,PGe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,DGe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,RGe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,kGe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,IGe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,FGe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,OGe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,NGe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,LGe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,BGe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,jGe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,UGe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,zGe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,VGe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,WGe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,$Ge=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,HGe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,GGe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,qGe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,KGe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,YGe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,XGe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,QGe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,ZGe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,JGe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,eqe="gl_FragColor = linearToOutputTexel( gl_FragColor );",tqe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,nqe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,rqe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,iqe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,oqe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,sqe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,aqe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,lqe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,cqe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,uqe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,dqe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,fqe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,hqe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,pqe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,mqe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,gqe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,vqe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,yqe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,xqe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,bqe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,wqe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Sqe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,_qe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Eqe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Cqe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Aqe=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Tqe=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Mqe=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Pqe=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Dqe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Rqe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,kqe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Iqe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Fqe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Oqe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Nqe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Lqe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Bqe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,jqe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Uqe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,zqe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Vqe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Wqe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,$qe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Hqe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Gqe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,qqe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Kqe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Yqe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Xqe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Qqe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Zqe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Jqe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,eKe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,tKe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,nKe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,rKe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,iKe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,oKe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,sKe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,aKe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,lKe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,cKe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,uKe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,dKe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,fKe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,hKe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,pKe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,mKe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,gKe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,vKe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,yKe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,xKe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,bKe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,wKe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,SKe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const _Ke=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,EKe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,CKe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,AKe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,TKe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,MKe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,PKe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,DKe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,RKe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,kKe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,IKe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,FKe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,OKe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,NKe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,LKe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,BKe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jKe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,UKe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zKe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,VKe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,WKe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,$Ke=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,HKe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,GKe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qKe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,KKe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YKe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,XKe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,QKe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,ZKe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,JKe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,eYe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,tYe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,nYe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,or={alphahash_fragment:EGe,alphahash_pars_fragment:CGe,alphamap_fragment:AGe,alphamap_pars_fragment:TGe,alphatest_fragment:MGe,alphatest_pars_fragment:PGe,aomap_fragment:DGe,aomap_pars_fragment:RGe,batching_pars_vertex:kGe,batching_vertex:IGe,begin_vertex:FGe,beginnormal_vertex:OGe,bsdfs:NGe,iridescence_fragment:LGe,bumpmap_pars_fragment:BGe,clipping_planes_fragment:jGe,clipping_planes_pars_fragment:UGe,clipping_planes_pars_vertex:zGe,clipping_planes_vertex:VGe,color_fragment:WGe,color_pars_fragment:$Ge,color_pars_vertex:HGe,color_vertex:GGe,common:qGe,cube_uv_reflection_fragment:KGe,defaultnormal_vertex:YGe,displacementmap_pars_vertex:XGe,displacementmap_vertex:QGe,emissivemap_fragment:ZGe,emissivemap_pars_fragment:JGe,colorspace_fragment:eqe,colorspace_pars_fragment:tqe,envmap_fragment:nqe,envmap_common_pars_fragment:rqe,envmap_pars_fragment:iqe,envmap_pars_vertex:oqe,envmap_physical_pars_fragment:gqe,envmap_vertex:sqe,fog_vertex:aqe,fog_pars_vertex:lqe,fog_fragment:cqe,fog_pars_fragment:uqe,gradientmap_pars_fragment:dqe,lightmap_pars_fragment:fqe,lights_lambert_fragment:hqe,lights_lambert_pars_fragment:pqe,lights_pars_begin:mqe,lights_toon_fragment:vqe,lights_toon_pars_fragment:yqe,lights_phong_fragment:xqe,lights_phong_pars_fragment:bqe,lights_physical_fragment:wqe,lights_physical_pars_fragment:Sqe,lights_fragment_begin:_qe,lights_fragment_maps:Eqe,lights_fragment_end:Cqe,logdepthbuf_fragment:Aqe,logdepthbuf_pars_fragment:Tqe,logdepthbuf_pars_vertex:Mqe,logdepthbuf_vertex:Pqe,map_fragment:Dqe,map_pars_fragment:Rqe,map_particle_fragment:kqe,map_particle_pars_fragment:Iqe,metalnessmap_fragment:Fqe,metalnessmap_pars_fragment:Oqe,morphinstance_vertex:Nqe,morphcolor_vertex:Lqe,morphnormal_vertex:Bqe,morphtarget_pars_vertex:jqe,morphtarget_vertex:Uqe,normal_fragment_begin:zqe,normal_fragment_maps:Vqe,normal_pars_fragment:Wqe,normal_pars_vertex:$qe,normal_vertex:Hqe,normalmap_pars_fragment:Gqe,clearcoat_normal_fragment_begin:qqe,clearcoat_normal_fragment_maps:Kqe,clearcoat_pars_fragment:Yqe,iridescence_pars_fragment:Xqe,opaque_fragment:Qqe,packing:Zqe,premultiplied_alpha_fragment:Jqe,project_vertex:eKe,dithering_fragment:tKe,dithering_pars_fragment:nKe,roughnessmap_fragment:rKe,roughnessmap_pars_fragment:iKe,shadowmap_pars_fragment:oKe,shadowmap_pars_vertex:sKe,shadowmap_vertex:aKe,shadowmask_pars_fragment:lKe,skinbase_vertex:cKe,skinning_pars_vertex:uKe,skinning_vertex:dKe,skinnormal_vertex:fKe,specularmap_fragment:hKe,specularmap_pars_fragment:pKe,tonemapping_fragment:mKe,tonemapping_pars_fragment:gKe,transmission_fragment:vKe,transmission_pars_fragment:yKe,uv_pars_fragment:xKe,uv_pars_vertex:bKe,uv_vertex:wKe,worldpos_vertex:SKe,background_vert:_Ke,background_frag:EKe,backgroundCube_vert:CKe,backgroundCube_frag:AKe,cube_vert:TKe,cube_frag:MKe,depth_vert:PKe,depth_frag:DKe,distanceRGBA_vert:RKe,distanceRGBA_frag:kKe,equirect_vert:IKe,equirect_frag:FKe,linedashed_vert:OKe,linedashed_frag:NKe,meshbasic_vert:LKe,meshbasic_frag:BKe,meshlambert_vert:jKe,meshlambert_frag:UKe,meshmatcap_vert:zKe,meshmatcap_frag:VKe,meshnormal_vert:WKe,meshnormal_frag:$Ke,meshphong_vert:HKe,meshphong_frag:GKe,meshphysical_vert:qKe,meshphysical_frag:KKe,meshtoon_vert:YKe,meshtoon_frag:XKe,points_vert:QKe,points_frag:ZKe,shadow_vert:JKe,shadow_frag:eYe,sprite_vert:tYe,sprite_frag:nYe},en={common:{diffuse:{value:new Sn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new rr},alphaMap:{value:null},alphaMapTransform:{value:new rr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new rr}},envmap:{envMap:{value:null},envMapRotation:{value:new rr},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new rr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new rr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new rr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new rr},normalScale:{value:new Kt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new rr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new rr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new rr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new rr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Sn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Sn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new rr},alphaTest:{value:0},uvTransform:{value:new rr}},sprite:{diffuse:{value:new Sn(16777215)},opacity:{value:1},center:{value:new Kt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new rr},alphaMap:{value:null},alphaMapTransform:{value:new rr},alphaTest:{value:0}}},Oc={basic:{uniforms:Es([en.common,en.specularmap,en.envmap,en.aomap,en.lightmap,en.fog]),vertexShader:or.meshbasic_vert,fragmentShader:or.meshbasic_frag},lambert:{uniforms:Es([en.common,en.specularmap,en.envmap,en.aomap,en.lightmap,en.emissivemap,en.bumpmap,en.normalmap,en.displacementmap,en.fog,en.lights,{emissive:{value:new Sn(0)}}]),vertexShader:or.meshlambert_vert,fragmentShader:or.meshlambert_frag},phong:{uniforms:Es([en.common,en.specularmap,en.envmap,en.aomap,en.lightmap,en.emissivemap,en.bumpmap,en.normalmap,en.displacementmap,en.fog,en.lights,{emissive:{value:new Sn(0)},specular:{value:new Sn(1118481)},shininess:{value:30}}]),vertexShader:or.meshphong_vert,fragmentShader:or.meshphong_frag},standard:{uniforms:Es([en.common,en.envmap,en.aomap,en.lightmap,en.emissivemap,en.bumpmap,en.normalmap,en.displacementmap,en.roughnessmap,en.metalnessmap,en.fog,en.lights,{emissive:{value:new Sn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:or.meshphysical_vert,fragmentShader:or.meshphysical_frag},toon:{uniforms:Es([en.common,en.aomap,en.lightmap,en.emissivemap,en.bumpmap,en.normalmap,en.displacementmap,en.gradientmap,en.fog,en.lights,{emissive:{value:new Sn(0)}}]),vertexShader:or.meshtoon_vert,fragmentShader:or.meshtoon_frag},matcap:{uniforms:Es([en.common,en.bumpmap,en.normalmap,en.displacementmap,en.fog,{matcap:{value:null}}]),vertexShader:or.meshmatcap_vert,fragmentShader:or.meshmatcap_frag},points:{uniforms:Es([en.points,en.fog]),vertexShader:or.points_vert,fragmentShader:or.points_frag},dashed:{uniforms:Es([en.common,en.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:or.linedashed_vert,fragmentShader:or.linedashed_frag},depth:{uniforms:Es([en.common,en.displacementmap]),vertexShader:or.depth_vert,fragmentShader:or.depth_frag},normal:{uniforms:Es([en.common,en.bumpmap,en.normalmap,en.displacementmap,{opacity:{value:1}}]),vertexShader:or.meshnormal_vert,fragmentShader:or.meshnormal_frag},sprite:{uniforms:Es([en.sprite,en.fog]),vertexShader:or.sprite_vert,fragmentShader:or.sprite_frag},background:{uniforms:{uvTransform:{value:new rr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:or.background_vert,fragmentShader:or.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new rr}},vertexShader:or.backgroundCube_vert,fragmentShader:or.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:or.cube_vert,fragmentShader:or.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:or.equirect_vert,fragmentShader:or.equirect_frag},distanceRGBA:{uniforms:Es([en.common,en.displacementmap,{referencePosition:{value:new qe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:or.distanceRGBA_vert,fragmentShader:or.distanceRGBA_frag},shadow:{uniforms:Es([en.lights,en.fog,{color:{value:new Sn(0)},opacity:{value:1}}]),vertexShader:or.shadow_vert,fragmentShader:or.shadow_frag}};Oc.physical={uniforms:Es([Oc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new rr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new rr},clearcoatNormalScale:{value:new Kt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new rr},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new rr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new rr},sheen:{value:0},sheenColor:{value:new Sn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new rr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new rr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new rr},transmissionSamplerSize:{value:new Kt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new rr},attenuationDistance:{value:0},attenuationColor:{value:new Sn(0)},specularColor:{value:new Sn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new rr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new rr},anisotropyVector:{value:new Kt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new rr}}]),vertexShader:or.meshphysical_vert,fragmentShader:or.meshphysical_frag};const p_={r:0,b:0,g:0},Uh=new du,rYe=new Ti;function iYe(t,e,n,r,i,o,s){const a=new Sn(0);let l=o===!0?0:1,c,u,d=null,f=0,p=null;function b(w){let S=w.isScene===!0?w.background:null;return S&&S.isTexture&&(S=(w.backgroundBlurriness>0?n:e).get(S)),S}function v(w){let S=!1;const D=b(w);D===null?g(a,l):D&&D.isColor&&(g(D,1),S=!0);const k=t.xr.getEnvironmentBlendMode();k==="additive"?r.buffers.color.setClear(0,0,0,1,s):k==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,s),(t.autoClear||S)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function m(w,S){const D=b(S);D&&(D.isCubeTexture||D.mapping===s2)?(u===void 0&&(u=new Dn(new ol(1,1,1),new ih({name:"BackgroundCubeMaterial",uniforms:e0(Oc.backgroundCube.uniforms),vertexShader:Oc.backgroundCube.vertexShader,fragmentShader:Oc.backgroundCube.fragmentShader,side:ca,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(k,P,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),Uh.copy(S.backgroundRotation),Uh.x*=-1,Uh.y*=-1,Uh.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(Uh.y*=-1,Uh.z*=-1),u.material.uniforms.envMap.value=D,u.material.uniforms.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(rYe.makeRotationFromEuler(Uh)),u.material.toneMapped=Or.getTransfer(D.colorSpace)!==ii,(d!==D||f!==D.version||p!==t.toneMapping)&&(u.material.needsUpdate=!0,d=D,f=D.version,p=t.toneMapping),u.layers.enableAll(),w.unshift(u,u.geometry,u.material,0,0,null)):D&&D.isTexture&&(c===void 0&&(c=new Dn(new Yf(2,2),new ih({name:"BackgroundMaterial",uniforms:e0(Oc.background.uniforms),vertexShader:Oc.background.vertexShader,fragmentShader:Oc.background.fragmentShader,side:Ed,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=D,c.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,c.material.toneMapped=Or.getTransfer(D.colorSpace)!==ii,D.matrixAutoUpdate===!0&&D.updateMatrix(),c.material.uniforms.uvTransform.value.copy(D.matrix),(d!==D||f!==D.version||p!==t.toneMapping)&&(c.material.needsUpdate=!0,d=D,f=D.version,p=t.toneMapping),c.layers.enableAll(),w.unshift(c,c.geometry,c.material,0,0,null))}function g(w,S){w.getRGB(p_,zte(t)),r.buffers.color.setClear(p_.r,p_.g,p_.b,S,s)}function x(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return a},setClearColor:function(w,S=1){a.set(w),l=S,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(w){l=w,g(a,l)},render:v,addToRenderList:m,dispose:x}}function oYe(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},i=f(null);let o=i,s=!1;function a(_,E,R,F,L){let N=!1;const U=d(F,R,E);o!==U&&(o=U,c(o.object)),N=p(_,F,R,L),N&&b(_,F,R,L),L!==null&&e.update(L,t.ELEMENT_ARRAY_BUFFER),(N||s)&&(s=!1,S(_,E,R,F),L!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(L).buffer))}function l(){return t.createVertexArray()}function c(_){return t.bindVertexArray(_)}function u(_){return t.deleteVertexArray(_)}function d(_,E,R){const F=R.wireframe===!0;let L=r[_.id];L===void 0&&(L={},r[_.id]=L);let N=L[E.id];N===void 0&&(N={},L[E.id]=N);let U=N[F];return U===void 0&&(U=f(l()),N[F]=U),U}function f(_){const E=[],R=[],F=[];for(let L=0;L<n;L++)E[L]=0,R[L]=0,F[L]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:E,enabledAttributes:R,attributeDivisors:F,object:_,attributes:{},index:null}}function p(_,E,R,F){const L=o.attributes,N=E.attributes;let U=0;const H=R.getAttributes();for(const j in H)if(H[j].location>=0){const q=L[j];let $=N[j];if($===void 0&&(j==="instanceMatrix"&&_.instanceMatrix&&($=_.instanceMatrix),j==="instanceColor"&&_.instanceColor&&($=_.instanceColor)),q===void 0||q.attribute!==$||$&&q.data!==$.data)return!0;U++}return o.attributesNum!==U||o.index!==F}function b(_,E,R,F){const L={},N=E.attributes;let U=0;const H=R.getAttributes();for(const j in H)if(H[j].location>=0){let q=N[j];q===void 0&&(j==="instanceMatrix"&&_.instanceMatrix&&(q=_.instanceMatrix),j==="instanceColor"&&_.instanceColor&&(q=_.instanceColor));const $={};$.attribute=q,q&&q.data&&($.data=q.data),L[j]=$,U++}o.attributes=L,o.attributesNum=U,o.index=F}function v(){const _=o.newAttributes;for(let E=0,R=_.length;E<R;E++)_[E]=0}function m(_){g(_,0)}function g(_,E){const R=o.newAttributes,F=o.enabledAttributes,L=o.attributeDivisors;R[_]=1,F[_]===0&&(t.enableVertexAttribArray(_),F[_]=1),L[_]!==E&&(t.vertexAttribDivisor(_,E),L[_]=E)}function x(){const _=o.newAttributes,E=o.enabledAttributes;for(let R=0,F=E.length;R<F;R++)E[R]!==_[R]&&(t.disableVertexAttribArray(R),E[R]=0)}function w(_,E,R,F,L,N,U){U===!0?t.vertexAttribIPointer(_,E,R,L,N):t.vertexAttribPointer(_,E,R,F,L,N)}function S(_,E,R,F){v();const L=F.attributes,N=R.getAttributes(),U=E.defaultAttributeValues;for(const H in N){const j=N[H];if(j.location>=0){let z=L[H];if(z===void 0&&(H==="instanceMatrix"&&_.instanceMatrix&&(z=_.instanceMatrix),H==="instanceColor"&&_.instanceColor&&(z=_.instanceColor)),z!==void 0){const q=z.normalized,$=z.itemSize,K=e.get(z);if(K===void 0)continue;const G=K.buffer,Y=K.type,J=K.bytesPerElement,V=Y===t.INT||Y===t.UNSIGNED_INT||z.gpuType===YL;if(z.isInterleavedBufferAttribute){const re=z.data,fe=re.stride,pe=z.offset;if(re.isInstancedInterleavedBuffer){for(let ce=0;ce<j.locationSize;ce++)g(j.location+ce,re.meshPerAttribute);_.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=re.meshPerAttribute*re.count)}else for(let ce=0;ce<j.locationSize;ce++)m(j.location+ce);t.bindBuffer(t.ARRAY_BUFFER,G);for(let ce=0;ce<j.locationSize;ce++)w(j.location+ce,$/j.locationSize,Y,q,fe*J,(pe+$/j.locationSize*ce)*J,V)}else{if(z.isInstancedBufferAttribute){for(let re=0;re<j.locationSize;re++)g(j.location+re,z.meshPerAttribute);_.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=z.meshPerAttribute*z.count)}else for(let re=0;re<j.locationSize;re++)m(j.location+re);t.bindBuffer(t.ARRAY_BUFFER,G);for(let re=0;re<j.locationSize;re++)w(j.location+re,$/j.locationSize,Y,q,$*J,$/j.locationSize*re*J,V)}}else if(U!==void 0){const q=U[H];if(q!==void 0)switch(q.length){case 2:t.vertexAttrib2fv(j.location,q);break;case 3:t.vertexAttrib3fv(j.location,q);break;case 4:t.vertexAttrib4fv(j.location,q);break;default:t.vertexAttrib1fv(j.location,q)}}}}x()}function D(){M();for(const _ in r){const E=r[_];for(const R in E){const F=E[R];for(const L in F)u(F[L].object),delete F[L];delete E[R]}delete r[_]}}function k(_){if(r[_.id]===void 0)return;const E=r[_.id];for(const R in E){const F=E[R];for(const L in F)u(F[L].object),delete F[L];delete E[R]}delete r[_.id]}function P(_){for(const E in r){const R=r[E];if(R[_.id]===void 0)continue;const F=R[_.id];for(const L in F)u(F[L].object),delete F[L];delete R[_.id]}}function M(){T(),s=!0,o!==i&&(o=i,c(o.object))}function T(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:M,resetDefaultState:T,dispose:D,releaseStatesOfGeometry:k,releaseStatesOfProgram:P,initAttributes:v,enableAttribute:m,disableUnusedAttributes:x}}function sYe(t,e,n){let r;function i(c){r=c}function o(c,u){t.drawArrays(r,c,u),n.update(u,r,1)}function s(c,u,d){d!==0&&(t.drawArraysInstanced(r,c,u,d),n.update(u,r,d))}function a(c,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,c,0,u,0,d);let p=0;for(let b=0;b<d;b++)p+=u[b];n.update(p,r,1)}function l(c,u,d,f){if(d===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let b=0;b<c.length;b++)s(c[b],u[b],f[b]);else{p.multiDrawArraysInstancedWEBGL(r,c,0,u,0,f,0,d);let b=0;for(let v=0;v<d;v++)b+=u[v]*f[v];n.update(b,r,1)}}this.setMode=i,this.render=o,this.renderInstances=s,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function aYe(t,e,n,r){let i;function o(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(P){return!(P!==sc&&r.convert(P)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(P){const M=P===Zw&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(P!==Cd&&r.convert(P)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&P!==Zu&&!M)}function l(P){if(P==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=n.precision!==void 0?n.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const d=n.logarithmicDepthBuffer===!0,f=n.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),p=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),b=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=t.getParameter(t.MAX_TEXTURE_SIZE),m=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),g=t.getParameter(t.MAX_VERTEX_ATTRIBS),x=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),w=t.getParameter(t.MAX_VARYING_VECTORS),S=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),D=b>0,k=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:d,reverseDepthBuffer:f,maxTextures:p,maxVertexTextures:b,maxTextureSize:v,maxCubemapSize:m,maxAttributes:g,maxVertexUniforms:x,maxVaryings:w,maxFragmentUniforms:S,vertexTextures:D,maxSamples:k}}function lYe(t){const e=this;let n=null,r=0,i=!1,o=!1;const s=new Zh,a=new rr,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){const p=d.length!==0||f||r!==0||i;return i=f,r=d.length,p},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(d,f){n=u(d,f,0)},this.setState=function(d,f,p){const b=d.clippingPlanes,v=d.clipIntersection,m=d.clipShadows,g=t.get(d);if(!i||b===null||b.length===0||o&&!m)o?u(null):c();else{const x=o?0:r,w=x*4;let S=g.clippingState||null;l.value=S,S=u(b,f,w,p);for(let D=0;D!==w;++D)S[D]=n[D];g.clippingState=S,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=x}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,f,p,b){const v=d!==null?d.length:0;let m=null;if(v!==0){if(m=l.value,b!==!0||m===null){const g=p+v*4,x=f.matrixWorldInverse;a.getNormalMatrix(x),(m===null||m.length<g)&&(m=new Float32Array(g));for(let w=0,S=p;w!==v;++w,S+=4)s.copy(d[w]).applyMatrix4(x,a),s.normal.toArray(m,S),m[S+3]=s.constant}l.value=m,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,m}}function cYe(t){let e=new WeakMap;function n(s,a){return a===eF?s.mapping=Qv:a===tF&&(s.mapping=Zv),s}function r(s){if(s&&s.isTexture){const a=s.mapping;if(a===eF||a===tF)if(e.has(s)){const l=e.get(s).texture;return n(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const c=new DHe(l.height);return c.fromEquirectangularTexture(t,s),e.set(s,c),s.addEventListener("dispose",i),n(c.texture,s.mapping)}else return null}}return s}function i(s){const a=s.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}const Wg=4,aW=[.125,.215,.35,.446,.526,.582],sp=20,qD=new ene,lW=new Sn;let KD=null,YD=0,XD=0,QD=!1;const Jh=(1+Math.sqrt(5))/2,hg=1/Jh,cW=[new qe(-Jh,hg,0),new qe(Jh,hg,0),new qe(-hg,0,Jh),new qe(hg,0,Jh),new qe(0,Jh,-hg),new qe(0,Jh,hg),new qe(-1,1,-1),new qe(1,1,-1),new qe(-1,1,1),new qe(1,1,1)],uYe=new qe;class uW{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100,o={}){const{size:s=256,position:a=uYe}=o;KD=this._renderer.getRenderTarget(),YD=this._renderer.getActiveCubeFace(),XD=this._renderer.getActiveMipmapLevel(),QD=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,r,i,l,a),n>0&&this._blur(l,0,0,n),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=hW(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=fW(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(KD,YD,XD),this._renderer.xr.enabled=QD,e.scissorTest=!1,m_(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Qv||e.mapping===Zv?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),KD=this._renderer.getRenderTarget(),YD=this._renderer.getActiveCubeFace(),XD=this._renderer.getActiveMipmapLevel(),QD=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:oc,minFilter:oc,generateMipmaps:!1,type:Zw,format:sc,colorSpace:Jv,depthBuffer:!1},i=dW(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=dW(e,n,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=dYe(o)),this._blurMaterial=fYe(o,e,n)}return i}_compileMaterial(e){const n=new Dn(this._lodPlanes[0],e);this._renderer.compile(n,qD)}_sceneToCubeUV(e,n,r,i,o){const l=new cl(90,1,n,r),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,f=d.autoClear,p=d.toneMapping;d.getClearColor(lW),d.toneMapping=qf,d.autoClear=!1;const b=new Ms({name:"PMREM.Background",side:ca,depthWrite:!1,depthTest:!1}),v=new Dn(new ol,b);let m=!1;const g=e.background;g?g.isColor&&(b.color.copy(g),e.background=null,m=!0):(b.color.copy(lW),m=!0);for(let x=0;x<6;x++){const w=x%3;w===0?(l.up.set(0,c[x],0),l.position.set(o.x,o.y,o.z),l.lookAt(o.x+u[x],o.y,o.z)):w===1?(l.up.set(0,0,c[x]),l.position.set(o.x,o.y,o.z),l.lookAt(o.x,o.y+u[x],o.z)):(l.up.set(0,c[x],0),l.position.set(o.x,o.y,o.z),l.lookAt(o.x,o.y,o.z+u[x]));const S=this._cubeSize;m_(i,w*S,x>2?S:0,S,S),d.setRenderTarget(i),m&&d.render(v,l),d.render(e,l)}v.geometry.dispose(),v.material.dispose(),d.toneMapping=p,d.autoClear=f,e.background=g}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===Qv||e.mapping===Zv;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=hW()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=fW());const o=i?this._cubemapMaterial:this._equirectMaterial,s=new Dn(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=e;const l=this._cubeSize;m_(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(s,qD)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const i=this._lodPlanes.length;for(let o=1;o<i;o++){const s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),a=cW[(i-o-1)%cW.length];this._blur(e,o-1,o,s,a)}n.autoClear=r}_blur(e,n,r,i,o){const s=this._pingPongRenderTarget;this._halfBlur(e,s,n,r,i,"latitudinal",o),this._halfBlur(s,e,r,r,i,"longitudinal",o)}_halfBlur(e,n,r,i,o,s,a){const l=this._renderer,c=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new Dn(this._lodPlanes[i],c),f=c.uniforms,p=this._sizeLods[r]-1,b=isFinite(o)?Math.PI/(2*p):2*Math.PI/(2*sp-1),v=o/b,m=isFinite(o)?1+Math.floor(u*v):sp;m>sp&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${sp}`);const g=[];let x=0;for(let P=0;P<sp;++P){const M=P/v,T=Math.exp(-M*M/2);g.push(T),P===0?x+=T:P<m&&(x+=2*T)}for(let P=0;P<g.length;P++)g[P]=g[P]/x;f.envMap.value=e.texture,f.samples.value=m,f.weights.value=g,f.latitudinal.value=s==="latitudinal",a&&(f.poleAxis.value=a);const{_lodMax:w}=this;f.dTheta.value=b,f.mipInt.value=w-r;const S=this._sizeLods[i],D=3*S*(i>w-Wg?i-w+Wg:0),k=4*(this._cubeSize-S);m_(n,D,k,3*S,2*S),l.setRenderTarget(n),l.render(d,qD)}}function dYe(t){const e=[],n=[],r=[];let i=t;const o=t-Wg+1+aW.length;for(let s=0;s<o;s++){const a=Math.pow(2,i);n.push(a);let l=1/a;s>t-Wg?l=aW[s-t+Wg-1]:s===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,d=1+c,f=[u,u,d,u,d,d,u,u,d,d,u,d],p=6,b=6,v=3,m=2,g=1,x=new Float32Array(v*b*p),w=new Float32Array(m*b*p),S=new Float32Array(g*b*p);for(let k=0;k<p;k++){const P=k%3*2/3-1,M=k>2?0:-1,T=[P,M,0,P+2/3,M,0,P+2/3,M+1,0,P,M,0,P+2/3,M+1,0,P,M+1,0];x.set(T,v*b*k),w.set(f,m*b*k);const _=[k,k,k,k,k,k];S.set(_,g*b*k)}const D=new fa;D.setAttribute("position",new su(x,v)),D.setAttribute("uv",new su(w,m)),D.setAttribute("faceIndex",new su(S,g)),e.push(D),i>Wg&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function dW(t,e,n){const r=new im(t,e,n);return r.texture.mapping=s2,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function m_(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function fYe(t,e,n){const r=new Float32Array(sp),i=new qe(0,1,0);return new ih({name:"SphericalGaussianBlur",defines:{n:sp,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:f5(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Gf,depthTest:!1,depthWrite:!1})}function fW(){return new ih({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:f5(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Gf,depthTest:!1,depthWrite:!1})}function hW(){return new ih({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:f5(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Gf,depthTest:!1,depthWrite:!1})}function f5(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function hYe(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===eF||l===tF,u=l===Qv||l===Zv;if(c||u){let d=e.get(a);const f=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==f)return n===null&&(n=new uW(t)),d=c?n.fromEquirectangular(a,d):n.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{const p=a.image;return c&&p&&p.height>0||u&&p&&i(p)?(n===null&&(n=new uW(t)),d=c?n.fromEquirectangular(a):n.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",o),d.texture):null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function o(a){const l=a.target;l.removeEventListener("dispose",o);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:s}}function pYe(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const i=n(r);return i===null&&AE("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function mYe(t,e,n,r){const i={},o=new WeakMap;function s(d){const f=d.target;f.index!==null&&e.remove(f.index);for(const b in f.attributes)e.remove(f.attributes[b]);f.removeEventListener("dispose",s),delete i[f.id];const p=o.get(f);p&&(e.remove(p),o.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,n.memory.geometries--}function a(d,f){return i[f.id]===!0||(f.addEventListener("dispose",s),i[f.id]=!0,n.memory.geometries++),f}function l(d){const f=d.attributes;for(const p in f)e.update(f[p],t.ARRAY_BUFFER)}function c(d){const f=[],p=d.index,b=d.attributes.position;let v=0;if(p!==null){const x=p.array;v=p.version;for(let w=0,S=x.length;w<S;w+=3){const D=x[w+0],k=x[w+1],P=x[w+2];f.push(D,k,k,P,P,D)}}else if(b!==void 0){const x=b.array;v=b.version;for(let w=0,S=x.length/3-1;w<S;w+=3){const D=w+0,k=w+1,P=w+2;f.push(D,k,k,P,P,D)}}else return;const m=new(Ote(f)?Ute:jte)(f,1);m.version=v;const g=o.get(d);g&&e.remove(g),o.set(d,m)}function u(d){const f=o.get(d);if(f){const p=d.index;p!==null&&f.version<p.version&&c(d)}else c(d);return o.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function gYe(t,e,n){let r;function i(f){r=f}let o,s;function a(f){o=f.type,s=f.bytesPerElement}function l(f,p){t.drawElements(r,p,o,f*s),n.update(p,r,1)}function c(f,p,b){b!==0&&(t.drawElementsInstanced(r,p,o,f*s,b),n.update(p,r,b))}function u(f,p,b){if(b===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,p,0,o,f,0,b);let m=0;for(let g=0;g<b;g++)m+=p[g];n.update(m,r,1)}function d(f,p,b,v){if(b===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let g=0;g<f.length;g++)c(f[g]/s,p[g],v[g]);else{m.multiDrawElementsInstancedWEBGL(r,p,0,o,f,0,v,0,b);let g=0;for(let x=0;x<b;x++)g+=p[x]*v[x];n.update(g,r,1)}}this.setMode=i,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function vYe(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,s,a){switch(n.calls++,s){case t.TRIANGLES:n.triangles+=a*(o/3);break;case t.LINES:n.lines+=a*(o/2);break;case t.LINE_STRIP:n.lines+=a*(o-1);break;case t.LINE_LOOP:n.lines+=a*o;break;case t.POINTS:n.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function yYe(t,e,n){const r=new WeakMap,i=new Hi;function o(s,a,l){const c=s.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=u!==void 0?u.length:0;let f=r.get(a);if(f===void 0||f.count!==d){let _=function(){M.dispose(),r.delete(a),a.removeEventListener("dispose",_)};var p=_;f!==void 0&&f.texture.dispose();const b=a.morphAttributes.position!==void 0,v=a.morphAttributes.normal!==void 0,m=a.morphAttributes.color!==void 0,g=a.morphAttributes.position||[],x=a.morphAttributes.normal||[],w=a.morphAttributes.color||[];let S=0;b===!0&&(S=1),v===!0&&(S=2),m===!0&&(S=3);let D=a.attributes.position.count*S,k=1;D>e.maxTextureSize&&(k=Math.ceil(D/e.maxTextureSize),D=e.maxTextureSize);const P=new Float32Array(D*k*4*d),M=new Nte(P,D,k,d);M.type=Zu,M.needsUpdate=!0;const T=S*4;for(let E=0;E<d;E++){const R=g[E],F=x[E],L=w[E],N=D*k*4*E;for(let U=0;U<R.count;U++){const H=U*T;b===!0&&(i.fromBufferAttribute(R,U),P[N+H+0]=i.x,P[N+H+1]=i.y,P[N+H+2]=i.z,P[N+H+3]=0),v===!0&&(i.fromBufferAttribute(F,U),P[N+H+4]=i.x,P[N+H+5]=i.y,P[N+H+6]=i.z,P[N+H+7]=0),m===!0&&(i.fromBufferAttribute(L,U),P[N+H+8]=i.x,P[N+H+9]=i.y,P[N+H+10]=i.z,P[N+H+11]=L.itemSize===4?i.w:1)}}f={count:d,texture:M,size:new Kt(D,k)},r.set(a,f),a.addEventListener("dispose",_)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",s.morphTexture,n);else{let b=0;for(let m=0;m<c.length;m++)b+=c[m];const v=a.morphTargetsRelative?1:1-b;l.getUniforms().setValue(t,"morphTargetBaseInfluence",v),l.getUniforms().setValue(t,"morphTargetInfluences",c)}l.getUniforms().setValue(t,"morphTargetsTexture",f.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",f.size)}return{update:o}}function xYe(t,e,n,r){let i=new WeakMap;function o(l){const c=r.render.frame,u=l.geometry,d=e.get(l,u);if(i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;i.get(f)!==c&&(f.update(),i.set(f,c))}return d}function s(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:o,dispose:s}}const nne=new Ls,pW=new $te(1,1),rne=new Nte,ine=new hHe,one=new Wte,mW=[],gW=[],vW=new Float32Array(16),yW=new Float32Array(9),xW=new Float32Array(4);function C0(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=mW[i];if(o===void 0&&(o=new Float32Array(i),mW[i]=o),e!==0){r.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=n,t[s].toArray(o,a)}return o}function Eo(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Co(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function a2(t,e){let n=gW[e];n===void 0&&(n=new Int32Array(e),gW[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function bYe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function wYe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Eo(n,e))return;t.uniform2fv(this.addr,e),Co(n,e)}}function SYe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Eo(n,e))return;t.uniform3fv(this.addr,e),Co(n,e)}}function _Ye(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Eo(n,e))return;t.uniform4fv(this.addr,e),Co(n,e)}}function EYe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Eo(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Co(n,e)}else{if(Eo(n,r))return;xW.set(r),t.uniformMatrix2fv(this.addr,!1,xW),Co(n,r)}}function CYe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Eo(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Co(n,e)}else{if(Eo(n,r))return;yW.set(r),t.uniformMatrix3fv(this.addr,!1,yW),Co(n,r)}}function AYe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Eo(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Co(n,e)}else{if(Eo(n,r))return;vW.set(r),t.uniformMatrix4fv(this.addr,!1,vW),Co(n,r)}}function TYe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function MYe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Eo(n,e))return;t.uniform2iv(this.addr,e),Co(n,e)}}function PYe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Eo(n,e))return;t.uniform3iv(this.addr,e),Co(n,e)}}function DYe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Eo(n,e))return;t.uniform4iv(this.addr,e),Co(n,e)}}function RYe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function kYe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Eo(n,e))return;t.uniform2uiv(this.addr,e),Co(n,e)}}function IYe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Eo(n,e))return;t.uniform3uiv(this.addr,e),Co(n,e)}}function FYe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Eo(n,e))return;t.uniform4uiv(this.addr,e),Co(n,e)}}function OYe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);let o;this.type===t.SAMPLER_2D_SHADOW?(pW.compareFunction=Fte,o=pW):o=nne,n.setTexture2D(e||o,i)}function NYe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||ine,i)}function LYe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||one,i)}function BYe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||rne,i)}function jYe(t){switch(t){case 5126:return bYe;case 35664:return wYe;case 35665:return SYe;case 35666:return _Ye;case 35674:return EYe;case 35675:return CYe;case 35676:return AYe;case 5124:case 35670:return TYe;case 35667:case 35671:return MYe;case 35668:case 35672:return PYe;case 35669:case 35673:return DYe;case 5125:return RYe;case 36294:return kYe;case 36295:return IYe;case 36296:return FYe;case 35678:case 36198:case 36298:case 36306:case 35682:return OYe;case 35679:case 36299:case 36307:return NYe;case 35680:case 36300:case 36308:case 36293:return LYe;case 36289:case 36303:case 36311:case 36292:return BYe}}function UYe(t,e){t.uniform1fv(this.addr,e)}function zYe(t,e){const n=C0(e,this.size,2);t.uniform2fv(this.addr,n)}function VYe(t,e){const n=C0(e,this.size,3);t.uniform3fv(this.addr,n)}function WYe(t,e){const n=C0(e,this.size,4);t.uniform4fv(this.addr,n)}function $Ye(t,e){const n=C0(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function HYe(t,e){const n=C0(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function GYe(t,e){const n=C0(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function qYe(t,e){t.uniform1iv(this.addr,e)}function KYe(t,e){t.uniform2iv(this.addr,e)}function YYe(t,e){t.uniform3iv(this.addr,e)}function XYe(t,e){t.uniform4iv(this.addr,e)}function QYe(t,e){t.uniform1uiv(this.addr,e)}function ZYe(t,e){t.uniform2uiv(this.addr,e)}function JYe(t,e){t.uniform3uiv(this.addr,e)}function eXe(t,e){t.uniform4uiv(this.addr,e)}function tXe(t,e,n){const r=this.cache,i=e.length,o=a2(n,i);Eo(r,o)||(t.uniform1iv(this.addr,o),Co(r,o));for(let s=0;s!==i;++s)n.setTexture2D(e[s]||nne,o[s])}function nXe(t,e,n){const r=this.cache,i=e.length,o=a2(n,i);Eo(r,o)||(t.uniform1iv(this.addr,o),Co(r,o));for(let s=0;s!==i;++s)n.setTexture3D(e[s]||ine,o[s])}function rXe(t,e,n){const r=this.cache,i=e.length,o=a2(n,i);Eo(r,o)||(t.uniform1iv(this.addr,o),Co(r,o));for(let s=0;s!==i;++s)n.setTextureCube(e[s]||one,o[s])}function iXe(t,e,n){const r=this.cache,i=e.length,o=a2(n,i);Eo(r,o)||(t.uniform1iv(this.addr,o),Co(r,o));for(let s=0;s!==i;++s)n.setTexture2DArray(e[s]||rne,o[s])}function oXe(t){switch(t){case 5126:return UYe;case 35664:return zYe;case 35665:return VYe;case 35666:return WYe;case 35674:return $Ye;case 35675:return HYe;case 35676:return GYe;case 5124:case 35670:return qYe;case 35667:case 35671:return KYe;case 35668:case 35672:return YYe;case 35669:case 35673:return XYe;case 5125:return QYe;case 36294:return ZYe;case 36295:return JYe;case 36296:return eXe;case 35678:case 36198:case 36298:case 36306:case 35682:return tXe;case 35679:case 36299:case 36307:return nXe;case 35680:case 36300:case 36308:case 36293:return rXe;case 36289:case 36303:case 36311:case 36292:return iXe}}class sXe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=jYe(n.type)}}class aXe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=oXe(n.type)}}class lXe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let o=0,s=i.length;o!==s;++o){const a=i[o];a.setValue(e,n[a.id],r)}}}const ZD=/(\w+)(\])?(\[|\.)?/g;function bW(t,e){t.seq.push(e),t.map[e.id]=e}function cXe(t,e,n){const r=t.name,i=r.length;for(ZD.lastIndex=0;;){const o=ZD.exec(r),s=ZD.lastIndex;let a=o[1];const l=o[2]==="]",c=o[3];if(l&&(a=a|0),c===void 0||c==="["&&s+2===i){bW(n,c===void 0?new sXe(a,t,e):new aXe(a,t,e));break}else{let d=n.map[a];d===void 0&&(d=new lXe(a),bW(n,d)),n=d}}}class TE{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const o=e.getActiveUniform(n,i),s=e.getUniformLocation(n,o.name);cXe(o,s,this)}}setValue(e,n,r,i){const o=this.map[n];o!==void 0&&o.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let o=0,s=n.length;o!==s;++o){const a=n[o],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,o=e.length;i!==o;++i){const s=e[i];s.id in n&&r.push(s)}return r}}function wW(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const uXe=37297;let dXe=0;function fXe(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let s=i;s<o;s++){const a=s+1;r.push(`${a===e?">":" "} ${a}: ${n[s]}`)}return r.join(`
`)}const SW=new rr;function hXe(t){Or._getMatrix(SW,Or.workingColorSpace,t);const e=`mat3( ${SW.elements.map(n=>n.toFixed(4))} )`;switch(Or.getTransfer(t)){case rA:return[e,"LinearTransferOETF"];case ii:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function _W(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const s=parseInt(o[1]);return n.toUpperCase()+`

`+i+`

`+fXe(t.getShaderSource(e),s)}else return i}function pXe(t,e){const n=hXe(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function mXe(t,e){let n;switch(e){case j7e:n="Linear";break;case U7e:n="Reinhard";break;case z7e:n="Cineon";break;case V7e:n="ACESFilmic";break;case $7e:n="AgX";break;case H7e:n="Neutral";break;case W7e:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const g_=new qe;function gXe(){Or.getLuminanceCoefficients(g_);const t=g_.x.toFixed(4),e=g_.y.toFixed(4),n=g_.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function vXe(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Qy).join(`
`)}function yXe(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function xXe(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const o=t.getActiveAttrib(e,i),s=o.name;let a=1;o.type===t.FLOAT_MAT2&&(a=2),o.type===t.FLOAT_MAT3&&(a=3),o.type===t.FLOAT_MAT4&&(a=4),n[s]={type:o.type,location:t.getAttribLocation(e,s),locationSize:a}}return n}function Qy(t){return t!==""}function EW(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function CW(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const bXe=/^[ \t]*#include +<([\w\d./]+)>/gm;function FF(t){return t.replace(bXe,SXe)}const wXe=new Map;function SXe(t,e){let n=or[e];if(n===void 0){const r=wXe.get(e);if(r!==void 0)n=or[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return FF(n)}const _Xe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function AW(t){return t.replace(_Xe,EXe)}function EXe(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function TW(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function CXe(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===xte?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===bte?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Lu&&(e="SHADOWMAP_TYPE_VSM"),e}function AXe(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Qv:case Zv:e="ENVMAP_TYPE_CUBE";break;case s2:e="ENVMAP_TYPE_CUBE_UV";break}return e}function TXe(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Zv:e="ENVMAP_MODE_REFRACTION";break}return e}function MXe(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case wte:e="ENVMAP_BLENDING_MULTIPLY";break;case L7e:e="ENVMAP_BLENDING_MIX";break;case B7e:e="ENVMAP_BLENDING_ADD";break}return e}function PXe(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function DXe(t,e,n,r){const i=t.getContext(),o=n.defines;let s=n.vertexShader,a=n.fragmentShader;const l=CXe(n),c=AXe(n),u=TXe(n),d=MXe(n),f=PXe(n),p=vXe(n),b=yXe(o),v=i.createProgram();let m,g,x=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(m=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b].filter(Qy).join(`
`),m.length>0&&(m+=`
`),g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b].filter(Qy).join(`
`),g.length>0&&(g+=`
`)):(m=[TW(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Qy).join(`
`),g=[TW(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==qf?"#define TONE_MAPPING":"",n.toneMapping!==qf?or.tonemapping_pars_fragment:"",n.toneMapping!==qf?mXe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",or.colorspace_pars_fragment,pXe("linearToOutputTexel",n.outputColorSpace),gXe(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Qy).join(`
`)),s=FF(s),s=EW(s,n),s=CW(s,n),a=FF(a),a=EW(a,n),a=CW(a,n),s=AW(s),a=AW(a),n.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,m=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,g=["#define varying in",n.glslVersion===I9?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===I9?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const w=x+m+s,S=x+g+a,D=wW(i,i.VERTEX_SHADER,w),k=wW(i,i.FRAGMENT_SHADER,S);i.attachShader(v,D),i.attachShader(v,k),n.index0AttributeName!==void 0?i.bindAttribLocation(v,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v);function P(E){if(t.debug.checkShaderErrors){const R=i.getProgramInfoLog(v).trim(),F=i.getShaderInfoLog(D).trim(),L=i.getShaderInfoLog(k).trim();let N=!0,U=!0;if(i.getProgramParameter(v,i.LINK_STATUS)===!1)if(N=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,v,D,k);else{const H=_W(i,D,"vertex"),j=_W(i,k,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(v,i.VALIDATE_STATUS)+`

Material Name: `+E.name+`
Material Type: `+E.type+`

Program Info Log: `+R+`
`+H+`
`+j)}else R!==""?console.warn("THREE.WebGLProgram: Program Info Log:",R):(F===""||L==="")&&(U=!1);U&&(E.diagnostics={runnable:N,programLog:R,vertexShader:{log:F,prefix:m},fragmentShader:{log:L,prefix:g}})}i.deleteShader(D),i.deleteShader(k),M=new TE(i,v),T=xXe(i,v)}let M;this.getUniforms=function(){return M===void 0&&P(this),M};let T;this.getAttributes=function(){return T===void 0&&P(this),T};let _=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return _===!1&&(_=i.getProgramParameter(v,uXe)),_},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=dXe++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=D,this.fragmentShader=k,this}let RXe=0;class kXe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),o=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new IXe(e),n.set(e,r)),r}}class IXe{constructor(e){this.id=RXe++,this.code=e,this.usedTimes=0}}function FXe(t,e,n,r,i,o,s){const a=new r5,l=new kXe,c=new Set,u=[],d=i.logarithmicDepthBuffer,f=i.vertexTextures;let p=i.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(T){return c.add(T),T===0?"uv":`uv${T}`}function m(T,_,E,R,F){const L=R.fog,N=F.geometry,U=T.isMeshStandardMaterial?R.environment:null,H=(T.isMeshStandardMaterial?n:e).get(T.envMap||U),j=H&&H.mapping===s2?H.image.height:null,z=b[T.type];T.precision!==null&&(p=i.getMaxPrecision(T.precision),p!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",p,"instead."));const q=N.morphAttributes.position||N.morphAttributes.normal||N.morphAttributes.color,$=q!==void 0?q.length:0;let K=0;N.morphAttributes.position!==void 0&&(K=1),N.morphAttributes.normal!==void 0&&(K=2),N.morphAttributes.color!==void 0&&(K=3);let G,Y,J,V;if(z){const Ce=Oc[z];G=Ce.vertexShader,Y=Ce.fragmentShader}else G=T.vertexShader,Y=T.fragmentShader,l.update(T),J=l.getVertexShaderID(T),V=l.getFragmentShaderID(T);const re=t.getRenderTarget(),fe=t.state.buffers.depth.getReversed(),pe=F.isInstancedMesh===!0,ce=F.isBatchedMesh===!0,xe=!!T.map,Ae=!!T.matcap,Ee=!!H,ee=!!T.aoMap,Oe=!!T.lightMap,le=!!T.bumpMap,me=!!T.normalMap,ne=!!T.displacementMap,se=!!T.emissiveMap,ge=!!T.metalnessMap,Q=!!T.roughnessMap,W=T.anisotropy>0,ve=T.clearcoat>0,ue=T.dispersion>0,Me=T.iridescence>0,Pe=T.sheen>0,je=T.transmission>0,ke=W&&!!T.anisotropyMap,De=ve&&!!T.clearcoatMap,nt=ve&&!!T.clearcoatNormalMap,be=ve&&!!T.clearcoatRoughnessMap,Ne=Me&&!!T.iridescenceMap,Ie=Me&&!!T.iridescenceThicknessMap,Ve=Pe&&!!T.sheenColorMap,Ue=Pe&&!!T.sheenRoughnessMap,tt=!!T.specularMap,st=!!T.specularColorMap,vt=!!T.specularIntensityMap,Fe=je&&!!T.transmissionMap,ct=je&&!!T.thicknessMap,Ye=!!T.gradientMap,ft=!!T.alphaMap,_t=T.alphaTest>0,lt=!!T.alphaHash,Lt=!!T.extensions;let nn=qf;T.toneMapped&&(re===null||re.isXRRenderTarget===!0)&&(nn=t.toneMapping);const sn={shaderID:z,shaderType:T.type,shaderName:T.name,vertexShader:G,fragmentShader:Y,defines:T.defines,customVertexShaderID:J,customFragmentShaderID:V,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:p,batching:ce,batchingColor:ce&&F._colorsTexture!==null,instancing:pe,instancingColor:pe&&F.instanceColor!==null,instancingMorph:pe&&F.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:re===null?t.outputColorSpace:re.isXRRenderTarget===!0?re.texture.colorSpace:Jv,alphaToCoverage:!!T.alphaToCoverage,map:xe,matcap:Ae,envMap:Ee,envMapMode:Ee&&H.mapping,envMapCubeUVHeight:j,aoMap:ee,lightMap:Oe,bumpMap:le,normalMap:me,displacementMap:f&&ne,emissiveMap:se,normalMapObjectSpace:me&&T.normalMapType===Y7e,normalMapTangentSpace:me&&T.normalMapType===Ite,metalnessMap:ge,roughnessMap:Q,anisotropy:W,anisotropyMap:ke,clearcoat:ve,clearcoatMap:De,clearcoatNormalMap:nt,clearcoatRoughnessMap:be,dispersion:ue,iridescence:Me,iridescenceMap:Ne,iridescenceThicknessMap:Ie,sheen:Pe,sheenColorMap:Ve,sheenRoughnessMap:Ue,specularMap:tt,specularColorMap:st,specularIntensityMap:vt,transmission:je,transmissionMap:Fe,thicknessMap:ct,gradientMap:Ye,opaque:T.transparent===!1&&T.blending===mv&&T.alphaToCoverage===!1,alphaMap:ft,alphaTest:_t,alphaHash:lt,combine:T.combine,mapUv:xe&&v(T.map.channel),aoMapUv:ee&&v(T.aoMap.channel),lightMapUv:Oe&&v(T.lightMap.channel),bumpMapUv:le&&v(T.bumpMap.channel),normalMapUv:me&&v(T.normalMap.channel),displacementMapUv:ne&&v(T.displacementMap.channel),emissiveMapUv:se&&v(T.emissiveMap.channel),metalnessMapUv:ge&&v(T.metalnessMap.channel),roughnessMapUv:Q&&v(T.roughnessMap.channel),anisotropyMapUv:ke&&v(T.anisotropyMap.channel),clearcoatMapUv:De&&v(T.clearcoatMap.channel),clearcoatNormalMapUv:nt&&v(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:be&&v(T.clearcoatRoughnessMap.channel),iridescenceMapUv:Ne&&v(T.iridescenceMap.channel),iridescenceThicknessMapUv:Ie&&v(T.iridescenceThicknessMap.channel),sheenColorMapUv:Ve&&v(T.sheenColorMap.channel),sheenRoughnessMapUv:Ue&&v(T.sheenRoughnessMap.channel),specularMapUv:tt&&v(T.specularMap.channel),specularColorMapUv:st&&v(T.specularColorMap.channel),specularIntensityMapUv:vt&&v(T.specularIntensityMap.channel),transmissionMapUv:Fe&&v(T.transmissionMap.channel),thicknessMapUv:ct&&v(T.thicknessMap.channel),alphaMapUv:ft&&v(T.alphaMap.channel),vertexTangents:!!N.attributes.tangent&&(me||W),vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!N.attributes.color&&N.attributes.color.itemSize===4,pointsUvs:F.isPoints===!0&&!!N.attributes.uv&&(xe||ft),fog:!!L,useFog:T.fog===!0,fogExp2:!!L&&L.isFogExp2,flatShading:T.flatShading===!0,sizeAttenuation:T.sizeAttenuation===!0,logarithmicDepthBuffer:d,reverseDepthBuffer:fe,skinning:F.isSkinnedMesh===!0,morphTargets:N.morphAttributes.position!==void 0,morphNormals:N.morphAttributes.normal!==void 0,morphColors:N.morphAttributes.color!==void 0,morphTargetsCount:$,morphTextureStride:K,numDirLights:_.directional.length,numPointLights:_.point.length,numSpotLights:_.spot.length,numSpotLightMaps:_.spotLightMap.length,numRectAreaLights:_.rectArea.length,numHemiLights:_.hemi.length,numDirLightShadows:_.directionalShadowMap.length,numPointLightShadows:_.pointShadowMap.length,numSpotLightShadows:_.spotShadowMap.length,numSpotLightShadowsWithMaps:_.numSpotLightShadowsWithMaps,numLightProbes:_.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:T.dithering,shadowMapEnabled:t.shadowMap.enabled&&E.length>0,shadowMapType:t.shadowMap.type,toneMapping:nn,decodeVideoTexture:xe&&T.map.isVideoTexture===!0&&Or.getTransfer(T.map.colorSpace)===ii,decodeVideoTextureEmissive:se&&T.emissiveMap.isVideoTexture===!0&&Or.getTransfer(T.emissiveMap.colorSpace)===ii,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===Ps,flipSided:T.side===ca,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionClipCullDistance:Lt&&T.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Lt&&T.extensions.multiDraw===!0||ce)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:T.customProgramCacheKey()};return sn.vertexUv1s=c.has(1),sn.vertexUv2s=c.has(2),sn.vertexUv3s=c.has(3),c.clear(),sn}function g(T){const _=[];if(T.shaderID?_.push(T.shaderID):(_.push(T.customVertexShaderID),_.push(T.customFragmentShaderID)),T.defines!==void 0)for(const E in T.defines)_.push(E),_.push(T.defines[E]);return T.isRawShaderMaterial===!1&&(x(_,T),w(_,T),_.push(t.outputColorSpace)),_.push(T.customProgramCacheKey),_.join()}function x(T,_){T.push(_.precision),T.push(_.outputColorSpace),T.push(_.envMapMode),T.push(_.envMapCubeUVHeight),T.push(_.mapUv),T.push(_.alphaMapUv),T.push(_.lightMapUv),T.push(_.aoMapUv),T.push(_.bumpMapUv),T.push(_.normalMapUv),T.push(_.displacementMapUv),T.push(_.emissiveMapUv),T.push(_.metalnessMapUv),T.push(_.roughnessMapUv),T.push(_.anisotropyMapUv),T.push(_.clearcoatMapUv),T.push(_.clearcoatNormalMapUv),T.push(_.clearcoatRoughnessMapUv),T.push(_.iridescenceMapUv),T.push(_.iridescenceThicknessMapUv),T.push(_.sheenColorMapUv),T.push(_.sheenRoughnessMapUv),T.push(_.specularMapUv),T.push(_.specularColorMapUv),T.push(_.specularIntensityMapUv),T.push(_.transmissionMapUv),T.push(_.thicknessMapUv),T.push(_.combine),T.push(_.fogExp2),T.push(_.sizeAttenuation),T.push(_.morphTargetsCount),T.push(_.morphAttributeCount),T.push(_.numDirLights),T.push(_.numPointLights),T.push(_.numSpotLights),T.push(_.numSpotLightMaps),T.push(_.numHemiLights),T.push(_.numRectAreaLights),T.push(_.numDirLightShadows),T.push(_.numPointLightShadows),T.push(_.numSpotLightShadows),T.push(_.numSpotLightShadowsWithMaps),T.push(_.numLightProbes),T.push(_.shadowMapType),T.push(_.toneMapping),T.push(_.numClippingPlanes),T.push(_.numClipIntersection),T.push(_.depthPacking)}function w(T,_){a.disableAll(),_.supportsVertexTextures&&a.enable(0),_.instancing&&a.enable(1),_.instancingColor&&a.enable(2),_.instancingMorph&&a.enable(3),_.matcap&&a.enable(4),_.envMap&&a.enable(5),_.normalMapObjectSpace&&a.enable(6),_.normalMapTangentSpace&&a.enable(7),_.clearcoat&&a.enable(8),_.iridescence&&a.enable(9),_.alphaTest&&a.enable(10),_.vertexColors&&a.enable(11),_.vertexAlphas&&a.enable(12),_.vertexUv1s&&a.enable(13),_.vertexUv2s&&a.enable(14),_.vertexUv3s&&a.enable(15),_.vertexTangents&&a.enable(16),_.anisotropy&&a.enable(17),_.alphaHash&&a.enable(18),_.batching&&a.enable(19),_.dispersion&&a.enable(20),_.batchingColor&&a.enable(21),T.push(a.mask),a.disableAll(),_.fog&&a.enable(0),_.useFog&&a.enable(1),_.flatShading&&a.enable(2),_.logarithmicDepthBuffer&&a.enable(3),_.reverseDepthBuffer&&a.enable(4),_.skinning&&a.enable(5),_.morphTargets&&a.enable(6),_.morphNormals&&a.enable(7),_.morphColors&&a.enable(8),_.premultipliedAlpha&&a.enable(9),_.shadowMapEnabled&&a.enable(10),_.doubleSided&&a.enable(11),_.flipSided&&a.enable(12),_.useDepthPacking&&a.enable(13),_.dithering&&a.enable(14),_.transmission&&a.enable(15),_.sheen&&a.enable(16),_.opaque&&a.enable(17),_.pointsUvs&&a.enable(18),_.decodeVideoTexture&&a.enable(19),_.decodeVideoTextureEmissive&&a.enable(20),_.alphaToCoverage&&a.enable(21),T.push(a.mask)}function S(T){const _=b[T.type];let E;if(_){const R=Oc[_];E=AHe.clone(R.uniforms)}else E=T.uniforms;return E}function D(T,_){let E;for(let R=0,F=u.length;R<F;R++){const L=u[R];if(L.cacheKey===_){E=L,++E.usedTimes;break}}return E===void 0&&(E=new DXe(t,_,T,o),u.push(E)),E}function k(T){if(--T.usedTimes===0){const _=u.indexOf(T);u[_]=u[u.length-1],u.pop(),T.destroy()}}function P(T){l.remove(T)}function M(){l.dispose()}return{getParameters:m,getProgramCacheKey:g,getUniforms:S,acquireProgram:D,releaseProgram:k,releaseShaderCache:P,programs:u,dispose:M}}function OXe(){let t=new WeakMap;function e(s){return t.has(s)}function n(s){let a=t.get(s);return a===void 0&&(a={},t.set(s,a)),a}function r(s){t.delete(s)}function i(s,a,l){t.get(s)[a]=l}function o(){t=new WeakMap}return{has:e,get:n,remove:r,update:i,dispose:o}}function NXe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function MW(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function PW(){const t=[];let e=0;const n=[],r=[],i=[];function o(){e=0,n.length=0,r.length=0,i.length=0}function s(d,f,p,b,v,m){let g=t[e];return g===void 0?(g={id:d.id,object:d,geometry:f,material:p,groupOrder:b,renderOrder:d.renderOrder,z:v,group:m},t[e]=g):(g.id=d.id,g.object=d,g.geometry=f,g.material=p,g.groupOrder=b,g.renderOrder=d.renderOrder,g.z=v,g.group=m),e++,g}function a(d,f,p,b,v,m){const g=s(d,f,p,b,v,m);p.transmission>0?r.push(g):p.transparent===!0?i.push(g):n.push(g)}function l(d,f,p,b,v,m){const g=s(d,f,p,b,v,m);p.transmission>0?r.unshift(g):p.transparent===!0?i.unshift(g):n.unshift(g)}function c(d,f){n.length>1&&n.sort(d||NXe),r.length>1&&r.sort(f||MW),i.length>1&&i.sort(f||MW)}function u(){for(let d=e,f=t.length;d<f;d++){const p=t[d];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:n,transmissive:r,transparent:i,init:o,push:a,unshift:l,finish:u,sort:c}}function LXe(){let t=new WeakMap;function e(r,i){const o=t.get(r);let s;return o===void 0?(s=new PW,t.set(r,[s])):i>=o.length?(s=new PW,o.push(s)):s=o[i],s}function n(){t=new WeakMap}return{get:e,dispose:n}}function BXe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new qe,color:new Sn};break;case"SpotLight":n={position:new qe,direction:new qe,color:new Sn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new qe,color:new Sn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new qe,skyColor:new Sn,groundColor:new Sn};break;case"RectAreaLight":n={color:new Sn,position:new qe,halfWidth:new qe,halfHeight:new qe};break}return t[e.id]=n,n}}}function jXe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Kt};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Kt};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Kt,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let UXe=0;function zXe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function VXe(t){const e=new BXe,n=jXe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new qe);const i=new qe,o=new Ti,s=new Ti;function a(c){let u=0,d=0,f=0;for(let T=0;T<9;T++)r.probe[T].set(0,0,0);let p=0,b=0,v=0,m=0,g=0,x=0,w=0,S=0,D=0,k=0,P=0;c.sort(zXe);for(let T=0,_=c.length;T<_;T++){const E=c[T],R=E.color,F=E.intensity,L=E.distance,N=E.shadow&&E.shadow.map?E.shadow.map.texture:null;if(E.isAmbientLight)u+=R.r*F,d+=R.g*F,f+=R.b*F;else if(E.isLightProbe){for(let U=0;U<9;U++)r.probe[U].addScaledVector(E.sh.coefficients[U],F);P++}else if(E.isDirectionalLight){const U=e.get(E);if(U.color.copy(E.color).multiplyScalar(E.intensity),E.castShadow){const H=E.shadow,j=n.get(E);j.shadowIntensity=H.intensity,j.shadowBias=H.bias,j.shadowNormalBias=H.normalBias,j.shadowRadius=H.radius,j.shadowMapSize=H.mapSize,r.directionalShadow[p]=j,r.directionalShadowMap[p]=N,r.directionalShadowMatrix[p]=E.shadow.matrix,x++}r.directional[p]=U,p++}else if(E.isSpotLight){const U=e.get(E);U.position.setFromMatrixPosition(E.matrixWorld),U.color.copy(R).multiplyScalar(F),U.distance=L,U.coneCos=Math.cos(E.angle),U.penumbraCos=Math.cos(E.angle*(1-E.penumbra)),U.decay=E.decay,r.spot[v]=U;const H=E.shadow;if(E.map&&(r.spotLightMap[D]=E.map,D++,H.updateMatrices(E),E.castShadow&&k++),r.spotLightMatrix[v]=H.matrix,E.castShadow){const j=n.get(E);j.shadowIntensity=H.intensity,j.shadowBias=H.bias,j.shadowNormalBias=H.normalBias,j.shadowRadius=H.radius,j.shadowMapSize=H.mapSize,r.spotShadow[v]=j,r.spotShadowMap[v]=N,S++}v++}else if(E.isRectAreaLight){const U=e.get(E);U.color.copy(R).multiplyScalar(F),U.halfWidth.set(E.width*.5,0,0),U.halfHeight.set(0,E.height*.5,0),r.rectArea[m]=U,m++}else if(E.isPointLight){const U=e.get(E);if(U.color.copy(E.color).multiplyScalar(E.intensity),U.distance=E.distance,U.decay=E.decay,E.castShadow){const H=E.shadow,j=n.get(E);j.shadowIntensity=H.intensity,j.shadowBias=H.bias,j.shadowNormalBias=H.normalBias,j.shadowRadius=H.radius,j.shadowMapSize=H.mapSize,j.shadowCameraNear=H.camera.near,j.shadowCameraFar=H.camera.far,r.pointShadow[b]=j,r.pointShadowMap[b]=N,r.pointShadowMatrix[b]=E.shadow.matrix,w++}r.point[b]=U,b++}else if(E.isHemisphereLight){const U=e.get(E);U.skyColor.copy(E.color).multiplyScalar(F),U.groundColor.copy(E.groundColor).multiplyScalar(F),r.hemi[g]=U,g++}}m>0&&(t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=en.LTC_FLOAT_1,r.rectAreaLTC2=en.LTC_FLOAT_2):(r.rectAreaLTC1=en.LTC_HALF_1,r.rectAreaLTC2=en.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=d,r.ambient[2]=f;const M=r.hash;(M.directionalLength!==p||M.pointLength!==b||M.spotLength!==v||M.rectAreaLength!==m||M.hemiLength!==g||M.numDirectionalShadows!==x||M.numPointShadows!==w||M.numSpotShadows!==S||M.numSpotMaps!==D||M.numLightProbes!==P)&&(r.directional.length=p,r.spot.length=v,r.rectArea.length=m,r.point.length=b,r.hemi.length=g,r.directionalShadow.length=x,r.directionalShadowMap.length=x,r.pointShadow.length=w,r.pointShadowMap.length=w,r.spotShadow.length=S,r.spotShadowMap.length=S,r.directionalShadowMatrix.length=x,r.pointShadowMatrix.length=w,r.spotLightMatrix.length=S+D-k,r.spotLightMap.length=D,r.numSpotLightShadowsWithMaps=k,r.numLightProbes=P,M.directionalLength=p,M.pointLength=b,M.spotLength=v,M.rectAreaLength=m,M.hemiLength=g,M.numDirectionalShadows=x,M.numPointShadows=w,M.numSpotShadows=S,M.numSpotMaps=D,M.numLightProbes=P,r.version=UXe++)}function l(c,u){let d=0,f=0,p=0,b=0,v=0;const m=u.matrixWorldInverse;for(let g=0,x=c.length;g<x;g++){const w=c[g];if(w.isDirectionalLight){const S=r.directional[d];S.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),S.direction.sub(i),S.direction.transformDirection(m),d++}else if(w.isSpotLight){const S=r.spot[p];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(m),S.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),S.direction.sub(i),S.direction.transformDirection(m),p++}else if(w.isRectAreaLight){const S=r.rectArea[b];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(m),s.identity(),o.copy(w.matrixWorld),o.premultiply(m),s.extractRotation(o),S.halfWidth.set(w.width*.5,0,0),S.halfHeight.set(0,w.height*.5,0),S.halfWidth.applyMatrix4(s),S.halfHeight.applyMatrix4(s),b++}else if(w.isPointLight){const S=r.point[f];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(m),f++}else if(w.isHemisphereLight){const S=r.hemi[v];S.direction.setFromMatrixPosition(w.matrixWorld),S.direction.transformDirection(m),v++}}}return{setup:a,setupView:l,state:r}}function DW(t){const e=new VXe(t),n=[],r=[];function i(u){c.camera=u,n.length=0,r.length=0}function o(u){n.push(u)}function s(u){r.push(u)}function a(){e.setup(n)}function l(u){e.setupView(n,u)}const c={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:a,setupLightsView:l,pushLight:o,pushShadow:s}}function WXe(t){let e=new WeakMap;function n(i,o=0){const s=e.get(i);let a;return s===void 0?(a=new DW(t),e.set(i,[a])):o>=s.length?(a=new DW(t),s.push(a)):a=s[o],a}function r(){e=new WeakMap}return{get:n,dispose:r}}const $Xe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,HXe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function GXe(t,e,n){let r=new i5;const i=new Kt,o=new Kt,s=new Hi,a=new mGe({depthPacking:K7e}),l=new gGe,c={},u=n.maxTextureSize,d={[Ed]:ca,[ca]:Ed,[Ps]:Ps},f=new ih({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Kt},radius:{value:4}},vertexShader:$Xe,fragmentShader:HXe}),p=f.clone();p.defines.HORIZONTAL_PASS=1;const b=new fa;b.setAttribute("position",new su(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Dn(b,f),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=xte;let g=this.type;this.render=function(k,P,M){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||k.length===0)return;const T=t.getRenderTarget(),_=t.getActiveCubeFace(),E=t.getActiveMipmapLevel(),R=t.state;R.setBlending(Gf),R.buffers.color.setClear(1,1,1,1),R.buffers.depth.setTest(!0),R.setScissorTest(!1);const F=g!==Lu&&this.type===Lu,L=g===Lu&&this.type!==Lu;for(let N=0,U=k.length;N<U;N++){const H=k[N],j=H.shadow;if(j===void 0){console.warn("THREE.WebGLShadowMap:",H,"has no shadow.");continue}if(j.autoUpdate===!1&&j.needsUpdate===!1)continue;i.copy(j.mapSize);const z=j.getFrameExtents();if(i.multiply(z),o.copy(j.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(o.x=Math.floor(u/z.x),i.x=o.x*z.x,j.mapSize.x=o.x),i.y>u&&(o.y=Math.floor(u/z.y),i.y=o.y*z.y,j.mapSize.y=o.y)),j.map===null||F===!0||L===!0){const $=this.type!==Lu?{minFilter:fc,magFilter:fc}:{};j.map!==null&&j.map.dispose(),j.map=new im(i.x,i.y,$),j.map.texture.name=H.name+".shadowMap",j.camera.updateProjectionMatrix()}t.setRenderTarget(j.map),t.clear();const q=j.getViewportCount();for(let $=0;$<q;$++){const K=j.getViewport($);s.set(o.x*K.x,o.y*K.y,o.x*K.z,o.y*K.w),R.viewport(s),j.updateMatrices(H,$),r=j.getFrustum(),S(P,M,j.camera,H,this.type)}j.isPointLightShadow!==!0&&this.type===Lu&&x(j,M),j.needsUpdate=!1}g=this.type,m.needsUpdate=!1,t.setRenderTarget(T,_,E)};function x(k,P){const M=e.update(v);f.defines.VSM_SAMPLES!==k.blurSamples&&(f.defines.VSM_SAMPLES=k.blurSamples,p.defines.VSM_SAMPLES=k.blurSamples,f.needsUpdate=!0,p.needsUpdate=!0),k.mapPass===null&&(k.mapPass=new im(i.x,i.y)),f.uniforms.shadow_pass.value=k.map.texture,f.uniforms.resolution.value=k.mapSize,f.uniforms.radius.value=k.radius,t.setRenderTarget(k.mapPass),t.clear(),t.renderBufferDirect(P,null,M,f,v,null),p.uniforms.shadow_pass.value=k.mapPass.texture,p.uniforms.resolution.value=k.mapSize,p.uniforms.radius.value=k.radius,t.setRenderTarget(k.map),t.clear(),t.renderBufferDirect(P,null,M,p,v,null)}function w(k,P,M,T){let _=null;const E=M.isPointLight===!0?k.customDistanceMaterial:k.customDepthMaterial;if(E!==void 0)_=E;else if(_=M.isPointLight===!0?l:a,t.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0){const R=_.uuid,F=P.uuid;let L=c[R];L===void 0&&(L={},c[R]=L);let N=L[F];N===void 0&&(N=_.clone(),L[F]=N,P.addEventListener("dispose",D)),_=N}if(_.visible=P.visible,_.wireframe=P.wireframe,T===Lu?_.side=P.shadowSide!==null?P.shadowSide:P.side:_.side=P.shadowSide!==null?P.shadowSide:d[P.side],_.alphaMap=P.alphaMap,_.alphaTest=P.alphaTest,_.map=P.map,_.clipShadows=P.clipShadows,_.clippingPlanes=P.clippingPlanes,_.clipIntersection=P.clipIntersection,_.displacementMap=P.displacementMap,_.displacementScale=P.displacementScale,_.displacementBias=P.displacementBias,_.wireframeLinewidth=P.wireframeLinewidth,_.linewidth=P.linewidth,M.isPointLight===!0&&_.isMeshDistanceMaterial===!0){const R=t.properties.get(_);R.light=M}return _}function S(k,P,M,T,_){if(k.visible===!1)return;if(k.layers.test(P.layers)&&(k.isMesh||k.isLine||k.isPoints)&&(k.castShadow||k.receiveShadow&&_===Lu)&&(!k.frustumCulled||r.intersectsObject(k))){k.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,k.matrixWorld);const F=e.update(k),L=k.material;if(Array.isArray(L)){const N=F.groups;for(let U=0,H=N.length;U<H;U++){const j=N[U],z=L[j.materialIndex];if(z&&z.visible){const q=w(k,z,T,_);k.onBeforeShadow(t,k,P,M,F,q,j),t.renderBufferDirect(M,null,F,q,k,j),k.onAfterShadow(t,k,P,M,F,q,j)}}}else if(L.visible){const N=w(k,L,T,_);k.onBeforeShadow(t,k,P,M,F,N,null),t.renderBufferDirect(M,null,F,N,k,null),k.onAfterShadow(t,k,P,M,F,N,null)}}const R=k.children;for(let F=0,L=R.length;F<L;F++)S(R[F],P,M,T,_)}function D(k){k.target.removeEventListener("dispose",D);for(const M in c){const T=c[M],_=k.target.uuid;_ in T&&(T[_].dispose(),delete T[_])}}}const qXe={[qI]:KI,[YI]:ZI,[XI]:JI,[Xv]:QI,[KI]:qI,[ZI]:YI,[JI]:XI,[QI]:Xv};function KXe(t,e){function n(){let Fe=!1;const ct=new Hi;let Ye=null;const ft=new Hi(0,0,0,0);return{setMask:function(_t){Ye!==_t&&!Fe&&(t.colorMask(_t,_t,_t,_t),Ye=_t)},setLocked:function(_t){Fe=_t},setClear:function(_t,lt,Lt,nn,sn){sn===!0&&(_t*=nn,lt*=nn,Lt*=nn),ct.set(_t,lt,Lt,nn),ft.equals(ct)===!1&&(t.clearColor(_t,lt,Lt,nn),ft.copy(ct))},reset:function(){Fe=!1,Ye=null,ft.set(-1,0,0,0)}}}function r(){let Fe=!1,ct=!1,Ye=null,ft=null,_t=null;return{setReversed:function(lt){if(ct!==lt){const Lt=e.get("EXT_clip_control");lt?Lt.clipControlEXT(Lt.LOWER_LEFT_EXT,Lt.ZERO_TO_ONE_EXT):Lt.clipControlEXT(Lt.LOWER_LEFT_EXT,Lt.NEGATIVE_ONE_TO_ONE_EXT),ct=lt;const nn=_t;_t=null,this.setClear(nn)}},getReversed:function(){return ct},setTest:function(lt){lt?re(t.DEPTH_TEST):fe(t.DEPTH_TEST)},setMask:function(lt){Ye!==lt&&!Fe&&(t.depthMask(lt),Ye=lt)},setFunc:function(lt){if(ct&&(lt=qXe[lt]),ft!==lt){switch(lt){case qI:t.depthFunc(t.NEVER);break;case KI:t.depthFunc(t.ALWAYS);break;case YI:t.depthFunc(t.LESS);break;case Xv:t.depthFunc(t.LEQUAL);break;case XI:t.depthFunc(t.EQUAL);break;case QI:t.depthFunc(t.GEQUAL);break;case ZI:t.depthFunc(t.GREATER);break;case JI:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}ft=lt}},setLocked:function(lt){Fe=lt},setClear:function(lt){_t!==lt&&(ct&&(lt=1-lt),t.clearDepth(lt),_t=lt)},reset:function(){Fe=!1,Ye=null,ft=null,_t=null,ct=!1}}}function i(){let Fe=!1,ct=null,Ye=null,ft=null,_t=null,lt=null,Lt=null,nn=null,sn=null;return{setTest:function(Ce){Fe||(Ce?re(t.STENCIL_TEST):fe(t.STENCIL_TEST))},setMask:function(Ce){ct!==Ce&&!Fe&&(t.stencilMask(Ce),ct=Ce)},setFunc:function(Ce,ze,Qe){(Ye!==Ce||ft!==ze||_t!==Qe)&&(t.stencilFunc(Ce,ze,Qe),Ye=Ce,ft=ze,_t=Qe)},setOp:function(Ce,ze,Qe){(lt!==Ce||Lt!==ze||nn!==Qe)&&(t.stencilOp(Ce,ze,Qe),lt=Ce,Lt=ze,nn=Qe)},setLocked:function(Ce){Fe=Ce},setClear:function(Ce){sn!==Ce&&(t.clearStencil(Ce),sn=Ce)},reset:function(){Fe=!1,ct=null,Ye=null,ft=null,_t=null,lt=null,Lt=null,nn=null,sn=null}}}const o=new n,s=new r,a=new i,l=new WeakMap,c=new WeakMap;let u={},d={},f=new WeakMap,p=[],b=null,v=!1,m=null,g=null,x=null,w=null,S=null,D=null,k=null,P=new Sn(0,0,0),M=0,T=!1,_=null,E=null,R=null,F=null,L=null;const N=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let U=!1,H=0;const j=t.getParameter(t.VERSION);j.indexOf("WebGL")!==-1?(H=parseFloat(/^WebGL (\d)/.exec(j)[1]),U=H>=1):j.indexOf("OpenGL ES")!==-1&&(H=parseFloat(/^OpenGL ES (\d)/.exec(j)[1]),U=H>=2);let z=null,q={};const $=t.getParameter(t.SCISSOR_BOX),K=t.getParameter(t.VIEWPORT),G=new Hi().fromArray($),Y=new Hi().fromArray(K);function J(Fe,ct,Ye,ft){const _t=new Uint8Array(4),lt=t.createTexture();t.bindTexture(Fe,lt),t.texParameteri(Fe,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Fe,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Lt=0;Lt<Ye;Lt++)Fe===t.TEXTURE_3D||Fe===t.TEXTURE_2D_ARRAY?t.texImage3D(ct,0,t.RGBA,1,1,ft,0,t.RGBA,t.UNSIGNED_BYTE,_t):t.texImage2D(ct+Lt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,_t);return lt}const V={};V[t.TEXTURE_2D]=J(t.TEXTURE_2D,t.TEXTURE_2D,1),V[t.TEXTURE_CUBE_MAP]=J(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),V[t.TEXTURE_2D_ARRAY]=J(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),V[t.TEXTURE_3D]=J(t.TEXTURE_3D,t.TEXTURE_3D,1,1),o.setClear(0,0,0,1),s.setClear(1),a.setClear(0),re(t.DEPTH_TEST),s.setFunc(Xv),le(!1),me(T9),re(t.CULL_FACE),ee(Gf);function re(Fe){u[Fe]!==!0&&(t.enable(Fe),u[Fe]=!0)}function fe(Fe){u[Fe]!==!1&&(t.disable(Fe),u[Fe]=!1)}function pe(Fe,ct){return d[Fe]!==ct?(t.bindFramebuffer(Fe,ct),d[Fe]=ct,Fe===t.DRAW_FRAMEBUFFER&&(d[t.FRAMEBUFFER]=ct),Fe===t.FRAMEBUFFER&&(d[t.DRAW_FRAMEBUFFER]=ct),!0):!1}function ce(Fe,ct){let Ye=p,ft=!1;if(Fe){Ye=f.get(ct),Ye===void 0&&(Ye=[],f.set(ct,Ye));const _t=Fe.textures;if(Ye.length!==_t.length||Ye[0]!==t.COLOR_ATTACHMENT0){for(let lt=0,Lt=_t.length;lt<Lt;lt++)Ye[lt]=t.COLOR_ATTACHMENT0+lt;Ye.length=_t.length,ft=!0}}else Ye[0]!==t.BACK&&(Ye[0]=t.BACK,ft=!0);ft&&t.drawBuffers(Ye)}function xe(Fe){return b!==Fe?(t.useProgram(Fe),b=Fe,!0):!1}const Ae={[op]:t.FUNC_ADD,[b7e]:t.FUNC_SUBTRACT,[w7e]:t.FUNC_REVERSE_SUBTRACT};Ae[S7e]=t.MIN,Ae[_7e]=t.MAX;const Ee={[E7e]:t.ZERO,[C7e]:t.ONE,[A7e]:t.SRC_COLOR,[HI]:t.SRC_ALPHA,[k7e]:t.SRC_ALPHA_SATURATE,[D7e]:t.DST_COLOR,[M7e]:t.DST_ALPHA,[T7e]:t.ONE_MINUS_SRC_COLOR,[GI]:t.ONE_MINUS_SRC_ALPHA,[R7e]:t.ONE_MINUS_DST_COLOR,[P7e]:t.ONE_MINUS_DST_ALPHA,[I7e]:t.CONSTANT_COLOR,[F7e]:t.ONE_MINUS_CONSTANT_COLOR,[O7e]:t.CONSTANT_ALPHA,[N7e]:t.ONE_MINUS_CONSTANT_ALPHA};function ee(Fe,ct,Ye,ft,_t,lt,Lt,nn,sn,Ce){if(Fe===Gf){v===!0&&(fe(t.BLEND),v=!1);return}if(v===!1&&(re(t.BLEND),v=!0),Fe!==x7e){if(Fe!==m||Ce!==T){if((g!==op||S!==op)&&(t.blendEquation(t.FUNC_ADD),g=op,S=op),Ce)switch(Fe){case mv:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case M9:t.blendFunc(t.ONE,t.ONE);break;case P9:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case D9:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Fe);break}else switch(Fe){case mv:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case M9:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case P9:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case D9:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Fe);break}x=null,w=null,D=null,k=null,P.set(0,0,0),M=0,m=Fe,T=Ce}return}_t=_t||ct,lt=lt||Ye,Lt=Lt||ft,(ct!==g||_t!==S)&&(t.blendEquationSeparate(Ae[ct],Ae[_t]),g=ct,S=_t),(Ye!==x||ft!==w||lt!==D||Lt!==k)&&(t.blendFuncSeparate(Ee[Ye],Ee[ft],Ee[lt],Ee[Lt]),x=Ye,w=ft,D=lt,k=Lt),(nn.equals(P)===!1||sn!==M)&&(t.blendColor(nn.r,nn.g,nn.b,sn),P.copy(nn),M=sn),m=Fe,T=!1}function Oe(Fe,ct){Fe.side===Ps?fe(t.CULL_FACE):re(t.CULL_FACE);let Ye=Fe.side===ca;ct&&(Ye=!Ye),le(Ye),Fe.blending===mv&&Fe.transparent===!1?ee(Gf):ee(Fe.blending,Fe.blendEquation,Fe.blendSrc,Fe.blendDst,Fe.blendEquationAlpha,Fe.blendSrcAlpha,Fe.blendDstAlpha,Fe.blendColor,Fe.blendAlpha,Fe.premultipliedAlpha),s.setFunc(Fe.depthFunc),s.setTest(Fe.depthTest),s.setMask(Fe.depthWrite),o.setMask(Fe.colorWrite);const ft=Fe.stencilWrite;a.setTest(ft),ft&&(a.setMask(Fe.stencilWriteMask),a.setFunc(Fe.stencilFunc,Fe.stencilRef,Fe.stencilFuncMask),a.setOp(Fe.stencilFail,Fe.stencilZFail,Fe.stencilZPass)),se(Fe.polygonOffset,Fe.polygonOffsetFactor,Fe.polygonOffsetUnits),Fe.alphaToCoverage===!0?re(t.SAMPLE_ALPHA_TO_COVERAGE):fe(t.SAMPLE_ALPHA_TO_COVERAGE)}function le(Fe){_!==Fe&&(Fe?t.frontFace(t.CW):t.frontFace(t.CCW),_=Fe)}function me(Fe){Fe!==v7e?(re(t.CULL_FACE),Fe!==E&&(Fe===T9?t.cullFace(t.BACK):Fe===y7e?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):fe(t.CULL_FACE),E=Fe}function ne(Fe){Fe!==R&&(U&&t.lineWidth(Fe),R=Fe)}function se(Fe,ct,Ye){Fe?(re(t.POLYGON_OFFSET_FILL),(F!==ct||L!==Ye)&&(t.polygonOffset(ct,Ye),F=ct,L=Ye)):fe(t.POLYGON_OFFSET_FILL)}function ge(Fe){Fe?re(t.SCISSOR_TEST):fe(t.SCISSOR_TEST)}function Q(Fe){Fe===void 0&&(Fe=t.TEXTURE0+N-1),z!==Fe&&(t.activeTexture(Fe),z=Fe)}function W(Fe,ct,Ye){Ye===void 0&&(z===null?Ye=t.TEXTURE0+N-1:Ye=z);let ft=q[Ye];ft===void 0&&(ft={type:void 0,texture:void 0},q[Ye]=ft),(ft.type!==Fe||ft.texture!==ct)&&(z!==Ye&&(t.activeTexture(Ye),z=Ye),t.bindTexture(Fe,ct||V[Fe]),ft.type=Fe,ft.texture=ct)}function ve(){const Fe=q[z];Fe!==void 0&&Fe.type!==void 0&&(t.bindTexture(Fe.type,null),Fe.type=void 0,Fe.texture=void 0)}function ue(){try{t.compressedTexImage2D(...arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Me(){try{t.compressedTexImage3D(...arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Pe(){try{t.texSubImage2D(...arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function je(){try{t.texSubImage3D(...arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function ke(){try{t.compressedTexSubImage2D(...arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function De(){try{t.compressedTexSubImage3D(...arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function nt(){try{t.texStorage2D(...arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function be(){try{t.texStorage3D(...arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Ne(){try{t.texImage2D(...arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Ie(){try{t.texImage3D(...arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Ve(Fe){G.equals(Fe)===!1&&(t.scissor(Fe.x,Fe.y,Fe.z,Fe.w),G.copy(Fe))}function Ue(Fe){Y.equals(Fe)===!1&&(t.viewport(Fe.x,Fe.y,Fe.z,Fe.w),Y.copy(Fe))}function tt(Fe,ct){let Ye=c.get(ct);Ye===void 0&&(Ye=new WeakMap,c.set(ct,Ye));let ft=Ye.get(Fe);ft===void 0&&(ft=t.getUniformBlockIndex(ct,Fe.name),Ye.set(Fe,ft))}function st(Fe,ct){const ft=c.get(ct).get(Fe);l.get(ct)!==ft&&(t.uniformBlockBinding(ct,ft,Fe.__bindingPointIndex),l.set(ct,ft))}function vt(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),s.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),u={},z=null,q={},d={},f=new WeakMap,p=[],b=null,v=!1,m=null,g=null,x=null,w=null,S=null,D=null,k=null,P=new Sn(0,0,0),M=0,T=!1,_=null,E=null,R=null,F=null,L=null,G.set(0,0,t.canvas.width,t.canvas.height),Y.set(0,0,t.canvas.width,t.canvas.height),o.reset(),s.reset(),a.reset()}return{buffers:{color:o,depth:s,stencil:a},enable:re,disable:fe,bindFramebuffer:pe,drawBuffers:ce,useProgram:xe,setBlending:ee,setMaterial:Oe,setFlipSided:le,setCullFace:me,setLineWidth:ne,setPolygonOffset:se,setScissorTest:ge,activeTexture:Q,bindTexture:W,unbindTexture:ve,compressedTexImage2D:ue,compressedTexImage3D:Me,texImage2D:Ne,texImage3D:Ie,updateUBOMapping:tt,uniformBlockBinding:st,texStorage2D:nt,texStorage3D:be,texSubImage2D:Pe,texSubImage3D:je,compressedTexSubImage2D:ke,compressedTexSubImage3D:De,scissor:Ve,viewport:Ue,reset:vt}}function YXe(t,e,n,r,i,o,s){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator=="undefined"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Kt,u=new WeakMap;let d;const f=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(Q){}function b(Q,W){return p?new OffscreenCanvas(Q,W):oA("canvas")}function v(Q,W,ve){let ue=1;const Me=ge(Q);if((Me.width>ve||Me.height>ve)&&(ue=ve/Math.max(Me.width,Me.height)),ue<1)if(typeof HTMLImageElement!="undefined"&&Q instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&Q instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&Q instanceof ImageBitmap||typeof VideoFrame!="undefined"&&Q instanceof VideoFrame){const Pe=Math.floor(ue*Me.width),je=Math.floor(ue*Me.height);d===void 0&&(d=b(Pe,je));const ke=W?b(Pe,je):d;return ke.width=Pe,ke.height=je,ke.getContext("2d").drawImage(Q,0,0,Pe,je),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Me.width+"x"+Me.height+") to ("+Pe+"x"+je+")."),ke}else return"data"in Q&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Me.width+"x"+Me.height+")."),Q;return Q}function m(Q){return Q.generateMipmaps}function g(Q){t.generateMipmap(Q)}function x(Q){return Q.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:Q.isWebGL3DRenderTarget?t.TEXTURE_3D:Q.isWebGLArrayRenderTarget||Q.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function w(Q,W,ve,ue,Me=!1){if(Q!==null){if(t[Q]!==void 0)return t[Q];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Q+"'")}let Pe=W;if(W===t.RED&&(ve===t.FLOAT&&(Pe=t.R32F),ve===t.HALF_FLOAT&&(Pe=t.R16F),ve===t.UNSIGNED_BYTE&&(Pe=t.R8)),W===t.RED_INTEGER&&(ve===t.UNSIGNED_BYTE&&(Pe=t.R8UI),ve===t.UNSIGNED_SHORT&&(Pe=t.R16UI),ve===t.UNSIGNED_INT&&(Pe=t.R32UI),ve===t.BYTE&&(Pe=t.R8I),ve===t.SHORT&&(Pe=t.R16I),ve===t.INT&&(Pe=t.R32I)),W===t.RG&&(ve===t.FLOAT&&(Pe=t.RG32F),ve===t.HALF_FLOAT&&(Pe=t.RG16F),ve===t.UNSIGNED_BYTE&&(Pe=t.RG8)),W===t.RG_INTEGER&&(ve===t.UNSIGNED_BYTE&&(Pe=t.RG8UI),ve===t.UNSIGNED_SHORT&&(Pe=t.RG16UI),ve===t.UNSIGNED_INT&&(Pe=t.RG32UI),ve===t.BYTE&&(Pe=t.RG8I),ve===t.SHORT&&(Pe=t.RG16I),ve===t.INT&&(Pe=t.RG32I)),W===t.RGB_INTEGER&&(ve===t.UNSIGNED_BYTE&&(Pe=t.RGB8UI),ve===t.UNSIGNED_SHORT&&(Pe=t.RGB16UI),ve===t.UNSIGNED_INT&&(Pe=t.RGB32UI),ve===t.BYTE&&(Pe=t.RGB8I),ve===t.SHORT&&(Pe=t.RGB16I),ve===t.INT&&(Pe=t.RGB32I)),W===t.RGBA_INTEGER&&(ve===t.UNSIGNED_BYTE&&(Pe=t.RGBA8UI),ve===t.UNSIGNED_SHORT&&(Pe=t.RGBA16UI),ve===t.UNSIGNED_INT&&(Pe=t.RGBA32UI),ve===t.BYTE&&(Pe=t.RGBA8I),ve===t.SHORT&&(Pe=t.RGBA16I),ve===t.INT&&(Pe=t.RGBA32I)),W===t.RGB&&ve===t.UNSIGNED_INT_5_9_9_9_REV&&(Pe=t.RGB9_E5),W===t.RGBA){const je=Me?rA:Or.getTransfer(ue);ve===t.FLOAT&&(Pe=t.RGBA32F),ve===t.HALF_FLOAT&&(Pe=t.RGBA16F),ve===t.UNSIGNED_BYTE&&(Pe=je===ii?t.SRGB8_ALPHA8:t.RGBA8),ve===t.UNSIGNED_SHORT_4_4_4_4&&(Pe=t.RGBA4),ve===t.UNSIGNED_SHORT_5_5_5_1&&(Pe=t.RGB5_A1)}return(Pe===t.R16F||Pe===t.R32F||Pe===t.RG16F||Pe===t.RG32F||Pe===t.RGBA16F||Pe===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Pe}function S(Q,W){let ve;return Q?W===null||W===rm||W===Vb?ve=t.DEPTH24_STENCIL8:W===Zu?ve=t.DEPTH32F_STENCIL8:W===zb&&(ve=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):W===null||W===rm||W===Vb?ve=t.DEPTH_COMPONENT24:W===Zu?ve=t.DEPTH_COMPONENT32F:W===zb&&(ve=t.DEPTH_COMPONENT16),ve}function D(Q,W){return m(Q)===!0||Q.isFramebufferTexture&&Q.minFilter!==fc&&Q.minFilter!==oc?Math.log2(Math.max(W.width,W.height))+1:Q.mipmaps!==void 0&&Q.mipmaps.length>0?Q.mipmaps.length:Q.isCompressedTexture&&Array.isArray(Q.image)?W.mipmaps.length:1}function k(Q){const W=Q.target;W.removeEventListener("dispose",k),M(W),W.isVideoTexture&&u.delete(W)}function P(Q){const W=Q.target;W.removeEventListener("dispose",P),_(W)}function M(Q){const W=r.get(Q);if(W.__webglInit===void 0)return;const ve=Q.source,ue=f.get(ve);if(ue){const Me=ue[W.__cacheKey];Me.usedTimes--,Me.usedTimes===0&&T(Q),Object.keys(ue).length===0&&f.delete(ve)}r.remove(Q)}function T(Q){const W=r.get(Q);t.deleteTexture(W.__webglTexture);const ve=Q.source,ue=f.get(ve);delete ue[W.__cacheKey],s.memory.textures--}function _(Q){const W=r.get(Q);if(Q.depthTexture&&(Q.depthTexture.dispose(),r.remove(Q.depthTexture)),Q.isWebGLCubeRenderTarget)for(let ue=0;ue<6;ue++){if(Array.isArray(W.__webglFramebuffer[ue]))for(let Me=0;Me<W.__webglFramebuffer[ue].length;Me++)t.deleteFramebuffer(W.__webglFramebuffer[ue][Me]);else t.deleteFramebuffer(W.__webglFramebuffer[ue]);W.__webglDepthbuffer&&t.deleteRenderbuffer(W.__webglDepthbuffer[ue])}else{if(Array.isArray(W.__webglFramebuffer))for(let ue=0;ue<W.__webglFramebuffer.length;ue++)t.deleteFramebuffer(W.__webglFramebuffer[ue]);else t.deleteFramebuffer(W.__webglFramebuffer);if(W.__webglDepthbuffer&&t.deleteRenderbuffer(W.__webglDepthbuffer),W.__webglMultisampledFramebuffer&&t.deleteFramebuffer(W.__webglMultisampledFramebuffer),W.__webglColorRenderbuffer)for(let ue=0;ue<W.__webglColorRenderbuffer.length;ue++)W.__webglColorRenderbuffer[ue]&&t.deleteRenderbuffer(W.__webglColorRenderbuffer[ue]);W.__webglDepthRenderbuffer&&t.deleteRenderbuffer(W.__webglDepthRenderbuffer)}const ve=Q.textures;for(let ue=0,Me=ve.length;ue<Me;ue++){const Pe=r.get(ve[ue]);Pe.__webglTexture&&(t.deleteTexture(Pe.__webglTexture),s.memory.textures--),r.remove(ve[ue])}r.remove(Q)}let E=0;function R(){E=0}function F(){const Q=E;return Q>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Q+" texture units while this GPU supports only "+i.maxTextures),E+=1,Q}function L(Q){const W=[];return W.push(Q.wrapS),W.push(Q.wrapT),W.push(Q.wrapR||0),W.push(Q.magFilter),W.push(Q.minFilter),W.push(Q.anisotropy),W.push(Q.internalFormat),W.push(Q.format),W.push(Q.type),W.push(Q.generateMipmaps),W.push(Q.premultiplyAlpha),W.push(Q.flipY),W.push(Q.unpackAlignment),W.push(Q.colorSpace),W.join()}function N(Q,W){const ve=r.get(Q);if(Q.isVideoTexture&&ne(Q),Q.isRenderTargetTexture===!1&&Q.version>0&&ve.__version!==Q.version){const ue=Q.image;if(ue===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ue.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Y(ve,Q,W);return}}n.bindTexture(t.TEXTURE_2D,ve.__webglTexture,t.TEXTURE0+W)}function U(Q,W){const ve=r.get(Q);if(Q.version>0&&ve.__version!==Q.version){Y(ve,Q,W);return}n.bindTexture(t.TEXTURE_2D_ARRAY,ve.__webglTexture,t.TEXTURE0+W)}function H(Q,W){const ve=r.get(Q);if(Q.version>0&&ve.__version!==Q.version){Y(ve,Q,W);return}n.bindTexture(t.TEXTURE_3D,ve.__webglTexture,t.TEXTURE0+W)}function j(Q,W){const ve=r.get(Q);if(Q.version>0&&ve.__version!==Q.version){J(ve,Q,W);return}n.bindTexture(t.TEXTURE_CUBE_MAP,ve.__webglTexture,t.TEXTURE0+W)}const z={[Ub]:t.REPEAT,[yp]:t.CLAMP_TO_EDGE,[nF]:t.MIRRORED_REPEAT},q={[fc]:t.NEAREST,[G7e]:t.NEAREST_MIPMAP_NEAREST,[qS]:t.NEAREST_MIPMAP_LINEAR,[oc]:t.LINEAR,[yD]:t.LINEAR_MIPMAP_NEAREST,[Pf]:t.LINEAR_MIPMAP_LINEAR},$={[X7e]:t.NEVER,[nHe]:t.ALWAYS,[Q7e]:t.LESS,[Fte]:t.LEQUAL,[Z7e]:t.EQUAL,[tHe]:t.GEQUAL,[J7e]:t.GREATER,[eHe]:t.NOTEQUAL};function K(Q,W){if(W.type===Zu&&e.has("OES_texture_float_linear")===!1&&(W.magFilter===oc||W.magFilter===yD||W.magFilter===qS||W.magFilter===Pf||W.minFilter===oc||W.minFilter===yD||W.minFilter===qS||W.minFilter===Pf)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(Q,t.TEXTURE_WRAP_S,z[W.wrapS]),t.texParameteri(Q,t.TEXTURE_WRAP_T,z[W.wrapT]),(Q===t.TEXTURE_3D||Q===t.TEXTURE_2D_ARRAY)&&t.texParameteri(Q,t.TEXTURE_WRAP_R,z[W.wrapR]),t.texParameteri(Q,t.TEXTURE_MAG_FILTER,q[W.magFilter]),t.texParameteri(Q,t.TEXTURE_MIN_FILTER,q[W.minFilter]),W.compareFunction&&(t.texParameteri(Q,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(Q,t.TEXTURE_COMPARE_FUNC,$[W.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(W.magFilter===fc||W.minFilter!==qS&&W.minFilter!==Pf||W.type===Zu&&e.has("OES_texture_float_linear")===!1)return;if(W.anisotropy>1||r.get(W).__currentAnisotropy){const ve=e.get("EXT_texture_filter_anisotropic");t.texParameterf(Q,ve.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(W.anisotropy,i.getMaxAnisotropy())),r.get(W).__currentAnisotropy=W.anisotropy}}}function G(Q,W){let ve=!1;Q.__webglInit===void 0&&(Q.__webglInit=!0,W.addEventListener("dispose",k));const ue=W.source;let Me=f.get(ue);Me===void 0&&(Me={},f.set(ue,Me));const Pe=L(W);if(Pe!==Q.__cacheKey){Me[Pe]===void 0&&(Me[Pe]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,ve=!0),Me[Pe].usedTimes++;const je=Me[Q.__cacheKey];je!==void 0&&(Me[Q.__cacheKey].usedTimes--,je.usedTimes===0&&T(W)),Q.__cacheKey=Pe,Q.__webglTexture=Me[Pe].texture}return ve}function Y(Q,W,ve){let ue=t.TEXTURE_2D;(W.isDataArrayTexture||W.isCompressedArrayTexture)&&(ue=t.TEXTURE_2D_ARRAY),W.isData3DTexture&&(ue=t.TEXTURE_3D);const Me=G(Q,W),Pe=W.source;n.bindTexture(ue,Q.__webglTexture,t.TEXTURE0+ve);const je=r.get(Pe);if(Pe.version!==je.__version||Me===!0){n.activeTexture(t.TEXTURE0+ve);const ke=Or.getPrimaries(Or.workingColorSpace),De=W.colorSpace===Ef?null:Or.getPrimaries(W.colorSpace),nt=W.colorSpace===Ef||ke===De?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,W.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,W.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,nt);let be=v(W.image,!1,i.maxTextureSize);be=se(W,be);const Ne=o.convert(W.format,W.colorSpace),Ie=o.convert(W.type);let Ve=w(W.internalFormat,Ne,Ie,W.colorSpace,W.isVideoTexture);K(ue,W);let Ue;const tt=W.mipmaps,st=W.isVideoTexture!==!0,vt=je.__version===void 0||Me===!0,Fe=Pe.dataReady,ct=D(W,be);if(W.isDepthTexture)Ve=S(W.format===$b,W.type),vt&&(st?n.texStorage2D(t.TEXTURE_2D,1,Ve,be.width,be.height):n.texImage2D(t.TEXTURE_2D,0,Ve,be.width,be.height,0,Ne,Ie,null));else if(W.isDataTexture)if(tt.length>0){st&&vt&&n.texStorage2D(t.TEXTURE_2D,ct,Ve,tt[0].width,tt[0].height);for(let Ye=0,ft=tt.length;Ye<ft;Ye++)Ue=tt[Ye],st?Fe&&n.texSubImage2D(t.TEXTURE_2D,Ye,0,0,Ue.width,Ue.height,Ne,Ie,Ue.data):n.texImage2D(t.TEXTURE_2D,Ye,Ve,Ue.width,Ue.height,0,Ne,Ie,Ue.data);W.generateMipmaps=!1}else st?(vt&&n.texStorage2D(t.TEXTURE_2D,ct,Ve,be.width,be.height),Fe&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,be.width,be.height,Ne,Ie,be.data)):n.texImage2D(t.TEXTURE_2D,0,Ve,be.width,be.height,0,Ne,Ie,be.data);else if(W.isCompressedTexture)if(W.isCompressedArrayTexture){st&&vt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,ct,Ve,tt[0].width,tt[0].height,be.depth);for(let Ye=0,ft=tt.length;Ye<ft;Ye++)if(Ue=tt[Ye],W.format!==sc)if(Ne!==null)if(st){if(Fe)if(W.layerUpdates.size>0){const _t=sW(Ue.width,Ue.height,W.format,W.type);for(const lt of W.layerUpdates){const Lt=Ue.data.subarray(lt*_t/Ue.data.BYTES_PER_ELEMENT,(lt+1)*_t/Ue.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Ye,0,0,lt,Ue.width,Ue.height,1,Ne,Lt)}W.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Ye,0,0,0,Ue.width,Ue.height,be.depth,Ne,Ue.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,Ye,Ve,Ue.width,Ue.height,be.depth,0,Ue.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else st?Fe&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,Ye,0,0,0,Ue.width,Ue.height,be.depth,Ne,Ie,Ue.data):n.texImage3D(t.TEXTURE_2D_ARRAY,Ye,Ve,Ue.width,Ue.height,be.depth,0,Ne,Ie,Ue.data)}else{st&&vt&&n.texStorage2D(t.TEXTURE_2D,ct,Ve,tt[0].width,tt[0].height);for(let Ye=0,ft=tt.length;Ye<ft;Ye++)Ue=tt[Ye],W.format!==sc?Ne!==null?st?Fe&&n.compressedTexSubImage2D(t.TEXTURE_2D,Ye,0,0,Ue.width,Ue.height,Ne,Ue.data):n.compressedTexImage2D(t.TEXTURE_2D,Ye,Ve,Ue.width,Ue.height,0,Ue.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):st?Fe&&n.texSubImage2D(t.TEXTURE_2D,Ye,0,0,Ue.width,Ue.height,Ne,Ie,Ue.data):n.texImage2D(t.TEXTURE_2D,Ye,Ve,Ue.width,Ue.height,0,Ne,Ie,Ue.data)}else if(W.isDataArrayTexture)if(st){if(vt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,ct,Ve,be.width,be.height,be.depth),Fe)if(W.layerUpdates.size>0){const Ye=sW(be.width,be.height,W.format,W.type);for(const ft of W.layerUpdates){const _t=be.data.subarray(ft*Ye/be.data.BYTES_PER_ELEMENT,(ft+1)*Ye/be.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,ft,be.width,be.height,1,Ne,Ie,_t)}W.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,be.width,be.height,be.depth,Ne,Ie,be.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,Ve,be.width,be.height,be.depth,0,Ne,Ie,be.data);else if(W.isData3DTexture)st?(vt&&n.texStorage3D(t.TEXTURE_3D,ct,Ve,be.width,be.height,be.depth),Fe&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,be.width,be.height,be.depth,Ne,Ie,be.data)):n.texImage3D(t.TEXTURE_3D,0,Ve,be.width,be.height,be.depth,0,Ne,Ie,be.data);else if(W.isFramebufferTexture){if(vt)if(st)n.texStorage2D(t.TEXTURE_2D,ct,Ve,be.width,be.height);else{let Ye=be.width,ft=be.height;for(let _t=0;_t<ct;_t++)n.texImage2D(t.TEXTURE_2D,_t,Ve,Ye,ft,0,Ne,Ie,null),Ye>>=1,ft>>=1}}else if(tt.length>0){if(st&&vt){const Ye=ge(tt[0]);n.texStorage2D(t.TEXTURE_2D,ct,Ve,Ye.width,Ye.height)}for(let Ye=0,ft=tt.length;Ye<ft;Ye++)Ue=tt[Ye],st?Fe&&n.texSubImage2D(t.TEXTURE_2D,Ye,0,0,Ne,Ie,Ue):n.texImage2D(t.TEXTURE_2D,Ye,Ve,Ne,Ie,Ue);W.generateMipmaps=!1}else if(st){if(vt){const Ye=ge(be);n.texStorage2D(t.TEXTURE_2D,ct,Ve,Ye.width,Ye.height)}Fe&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Ne,Ie,be)}else n.texImage2D(t.TEXTURE_2D,0,Ve,Ne,Ie,be);m(W)&&g(ue),je.__version=Pe.version,W.onUpdate&&W.onUpdate(W)}Q.__version=W.version}function J(Q,W,ve){if(W.image.length!==6)return;const ue=G(Q,W),Me=W.source;n.bindTexture(t.TEXTURE_CUBE_MAP,Q.__webglTexture,t.TEXTURE0+ve);const Pe=r.get(Me);if(Me.version!==Pe.__version||ue===!0){n.activeTexture(t.TEXTURE0+ve);const je=Or.getPrimaries(Or.workingColorSpace),ke=W.colorSpace===Ef?null:Or.getPrimaries(W.colorSpace),De=W.colorSpace===Ef||je===ke?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,W.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,W.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,De);const nt=W.isCompressedTexture||W.image[0].isCompressedTexture,be=W.image[0]&&W.image[0].isDataTexture,Ne=[];for(let ft=0;ft<6;ft++)!nt&&!be?Ne[ft]=v(W.image[ft],!0,i.maxCubemapSize):Ne[ft]=be?W.image[ft].image:W.image[ft],Ne[ft]=se(W,Ne[ft]);const Ie=Ne[0],Ve=o.convert(W.format,W.colorSpace),Ue=o.convert(W.type),tt=w(W.internalFormat,Ve,Ue,W.colorSpace),st=W.isVideoTexture!==!0,vt=Pe.__version===void 0||ue===!0,Fe=Me.dataReady;let ct=D(W,Ie);K(t.TEXTURE_CUBE_MAP,W);let Ye;if(nt){st&&vt&&n.texStorage2D(t.TEXTURE_CUBE_MAP,ct,tt,Ie.width,Ie.height);for(let ft=0;ft<6;ft++){Ye=Ne[ft].mipmaps;for(let _t=0;_t<Ye.length;_t++){const lt=Ye[_t];W.format!==sc?Ve!==null?st?Fe&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ft,_t,0,0,lt.width,lt.height,Ve,lt.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ft,_t,tt,lt.width,lt.height,0,lt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):st?Fe&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ft,_t,0,0,lt.width,lt.height,Ve,Ue,lt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ft,_t,tt,lt.width,lt.height,0,Ve,Ue,lt.data)}}}else{if(Ye=W.mipmaps,st&&vt){Ye.length>0&&ct++;const ft=ge(Ne[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,ct,tt,ft.width,ft.height)}for(let ft=0;ft<6;ft++)if(be){st?Fe&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ft,0,0,0,Ne[ft].width,Ne[ft].height,Ve,Ue,Ne[ft].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ft,0,tt,Ne[ft].width,Ne[ft].height,0,Ve,Ue,Ne[ft].data);for(let _t=0;_t<Ye.length;_t++){const Lt=Ye[_t].image[ft].image;st?Fe&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ft,_t+1,0,0,Lt.width,Lt.height,Ve,Ue,Lt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ft,_t+1,tt,Lt.width,Lt.height,0,Ve,Ue,Lt.data)}}else{st?Fe&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ft,0,0,0,Ve,Ue,Ne[ft]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ft,0,tt,Ve,Ue,Ne[ft]);for(let _t=0;_t<Ye.length;_t++){const lt=Ye[_t];st?Fe&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ft,_t+1,0,0,Ve,Ue,lt.image[ft]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ft,_t+1,tt,Ve,Ue,lt.image[ft])}}}m(W)&&g(t.TEXTURE_CUBE_MAP),Pe.__version=Me.version,W.onUpdate&&W.onUpdate(W)}Q.__version=W.version}function V(Q,W,ve,ue,Me,Pe){const je=o.convert(ve.format,ve.colorSpace),ke=o.convert(ve.type),De=w(ve.internalFormat,je,ke,ve.colorSpace),nt=r.get(W),be=r.get(ve);if(be.__renderTarget=W,!nt.__hasExternalTextures){const Ne=Math.max(1,W.width>>Pe),Ie=Math.max(1,W.height>>Pe);Me===t.TEXTURE_3D||Me===t.TEXTURE_2D_ARRAY?n.texImage3D(Me,Pe,De,Ne,Ie,W.depth,0,je,ke,null):n.texImage2D(Me,Pe,De,Ne,Ie,0,je,ke,null)}n.bindFramebuffer(t.FRAMEBUFFER,Q),me(W)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,ue,Me,be.__webglTexture,0,le(W)):(Me===t.TEXTURE_2D||Me>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Me<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,ue,Me,be.__webglTexture,Pe),n.bindFramebuffer(t.FRAMEBUFFER,null)}function re(Q,W,ve){if(t.bindRenderbuffer(t.RENDERBUFFER,Q),W.depthBuffer){const ue=W.depthTexture,Me=ue&&ue.isDepthTexture?ue.type:null,Pe=S(W.stencilBuffer,Me),je=W.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,ke=le(W);me(W)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,ke,Pe,W.width,W.height):ve?t.renderbufferStorageMultisample(t.RENDERBUFFER,ke,Pe,W.width,W.height):t.renderbufferStorage(t.RENDERBUFFER,Pe,W.width,W.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,je,t.RENDERBUFFER,Q)}else{const ue=W.textures;for(let Me=0;Me<ue.length;Me++){const Pe=ue[Me],je=o.convert(Pe.format,Pe.colorSpace),ke=o.convert(Pe.type),De=w(Pe.internalFormat,je,ke,Pe.colorSpace),nt=le(W);ve&&me(W)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,nt,De,W.width,W.height):me(W)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,nt,De,W.width,W.height):t.renderbufferStorage(t.RENDERBUFFER,De,W.width,W.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function fe(Q,W){if(W&&W.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,Q),!(W.depthTexture&&W.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const ue=r.get(W.depthTexture);ue.__renderTarget=W,(!ue.__webglTexture||W.depthTexture.image.width!==W.width||W.depthTexture.image.height!==W.height)&&(W.depthTexture.image.width=W.width,W.depthTexture.image.height=W.height,W.depthTexture.needsUpdate=!0),N(W.depthTexture,0);const Me=ue.__webglTexture,Pe=le(W);if(W.depthTexture.format===Wb)me(W)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Me,0,Pe):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Me,0);else if(W.depthTexture.format===$b)me(W)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Me,0,Pe):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Me,0);else throw new Error("Unknown depthTexture format")}function pe(Q){const W=r.get(Q),ve=Q.isWebGLCubeRenderTarget===!0;if(W.__boundDepthTexture!==Q.depthTexture){const ue=Q.depthTexture;if(W.__depthDisposeCallback&&W.__depthDisposeCallback(),ue){const Me=()=>{delete W.__boundDepthTexture,delete W.__depthDisposeCallback,ue.removeEventListener("dispose",Me)};ue.addEventListener("dispose",Me),W.__depthDisposeCallback=Me}W.__boundDepthTexture=ue}if(Q.depthTexture&&!W.__autoAllocateDepthBuffer){if(ve)throw new Error("target.depthTexture not supported in Cube render targets");fe(W.__webglFramebuffer,Q)}else if(ve){W.__webglDepthbuffer=[];for(let ue=0;ue<6;ue++)if(n.bindFramebuffer(t.FRAMEBUFFER,W.__webglFramebuffer[ue]),W.__webglDepthbuffer[ue]===void 0)W.__webglDepthbuffer[ue]=t.createRenderbuffer(),re(W.__webglDepthbuffer[ue],Q,!1);else{const Me=Q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Pe=W.__webglDepthbuffer[ue];t.bindRenderbuffer(t.RENDERBUFFER,Pe),t.framebufferRenderbuffer(t.FRAMEBUFFER,Me,t.RENDERBUFFER,Pe)}}else if(n.bindFramebuffer(t.FRAMEBUFFER,W.__webglFramebuffer),W.__webglDepthbuffer===void 0)W.__webglDepthbuffer=t.createRenderbuffer(),re(W.__webglDepthbuffer,Q,!1);else{const ue=Q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Me=W.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,Me),t.framebufferRenderbuffer(t.FRAMEBUFFER,ue,t.RENDERBUFFER,Me)}n.bindFramebuffer(t.FRAMEBUFFER,null)}function ce(Q,W,ve){const ue=r.get(Q);W!==void 0&&V(ue.__webglFramebuffer,Q,Q.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),ve!==void 0&&pe(Q)}function xe(Q){const W=Q.texture,ve=r.get(Q),ue=r.get(W);Q.addEventListener("dispose",P);const Me=Q.textures,Pe=Q.isWebGLCubeRenderTarget===!0,je=Me.length>1;if(je||(ue.__webglTexture===void 0&&(ue.__webglTexture=t.createTexture()),ue.__version=W.version,s.memory.textures++),Pe){ve.__webglFramebuffer=[];for(let ke=0;ke<6;ke++)if(W.mipmaps&&W.mipmaps.length>0){ve.__webglFramebuffer[ke]=[];for(let De=0;De<W.mipmaps.length;De++)ve.__webglFramebuffer[ke][De]=t.createFramebuffer()}else ve.__webglFramebuffer[ke]=t.createFramebuffer()}else{if(W.mipmaps&&W.mipmaps.length>0){ve.__webglFramebuffer=[];for(let ke=0;ke<W.mipmaps.length;ke++)ve.__webglFramebuffer[ke]=t.createFramebuffer()}else ve.__webglFramebuffer=t.createFramebuffer();if(je)for(let ke=0,De=Me.length;ke<De;ke++){const nt=r.get(Me[ke]);nt.__webglTexture===void 0&&(nt.__webglTexture=t.createTexture(),s.memory.textures++)}if(Q.samples>0&&me(Q)===!1){ve.__webglMultisampledFramebuffer=t.createFramebuffer(),ve.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,ve.__webglMultisampledFramebuffer);for(let ke=0;ke<Me.length;ke++){const De=Me[ke];ve.__webglColorRenderbuffer[ke]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,ve.__webglColorRenderbuffer[ke]);const nt=o.convert(De.format,De.colorSpace),be=o.convert(De.type),Ne=w(De.internalFormat,nt,be,De.colorSpace,Q.isXRRenderTarget===!0),Ie=le(Q);t.renderbufferStorageMultisample(t.RENDERBUFFER,Ie,Ne,Q.width,Q.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ke,t.RENDERBUFFER,ve.__webglColorRenderbuffer[ke])}t.bindRenderbuffer(t.RENDERBUFFER,null),Q.depthBuffer&&(ve.__webglDepthRenderbuffer=t.createRenderbuffer(),re(ve.__webglDepthRenderbuffer,Q,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Pe){n.bindTexture(t.TEXTURE_CUBE_MAP,ue.__webglTexture),K(t.TEXTURE_CUBE_MAP,W);for(let ke=0;ke<6;ke++)if(W.mipmaps&&W.mipmaps.length>0)for(let De=0;De<W.mipmaps.length;De++)V(ve.__webglFramebuffer[ke][De],Q,W,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,De);else V(ve.__webglFramebuffer[ke],Q,W,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0);m(W)&&g(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(je){for(let ke=0,De=Me.length;ke<De;ke++){const nt=Me[ke],be=r.get(nt);n.bindTexture(t.TEXTURE_2D,be.__webglTexture),K(t.TEXTURE_2D,nt),V(ve.__webglFramebuffer,Q,nt,t.COLOR_ATTACHMENT0+ke,t.TEXTURE_2D,0),m(nt)&&g(t.TEXTURE_2D)}n.unbindTexture()}else{let ke=t.TEXTURE_2D;if((Q.isWebGL3DRenderTarget||Q.isWebGLArrayRenderTarget)&&(ke=Q.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(ke,ue.__webglTexture),K(ke,W),W.mipmaps&&W.mipmaps.length>0)for(let De=0;De<W.mipmaps.length;De++)V(ve.__webglFramebuffer[De],Q,W,t.COLOR_ATTACHMENT0,ke,De);else V(ve.__webglFramebuffer,Q,W,t.COLOR_ATTACHMENT0,ke,0);m(W)&&g(ke),n.unbindTexture()}Q.depthBuffer&&pe(Q)}function Ae(Q){const W=Q.textures;for(let ve=0,ue=W.length;ve<ue;ve++){const Me=W[ve];if(m(Me)){const Pe=x(Q),je=r.get(Me).__webglTexture;n.bindTexture(Pe,je),g(Pe),n.unbindTexture()}}}const Ee=[],ee=[];function Oe(Q){if(Q.samples>0){if(me(Q)===!1){const W=Q.textures,ve=Q.width,ue=Q.height;let Me=t.COLOR_BUFFER_BIT;const Pe=Q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,je=r.get(Q),ke=W.length>1;if(ke)for(let De=0;De<W.length;De++)n.bindFramebuffer(t.FRAMEBUFFER,je.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+De,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,je.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+De,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,je.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,je.__webglFramebuffer);for(let De=0;De<W.length;De++){if(Q.resolveDepthBuffer&&(Q.depthBuffer&&(Me|=t.DEPTH_BUFFER_BIT),Q.stencilBuffer&&Q.resolveStencilBuffer&&(Me|=t.STENCIL_BUFFER_BIT)),ke){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,je.__webglColorRenderbuffer[De]);const nt=r.get(W[De]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,nt,0)}t.blitFramebuffer(0,0,ve,ue,0,0,ve,ue,Me,t.NEAREST),l===!0&&(Ee.length=0,ee.length=0,Ee.push(t.COLOR_ATTACHMENT0+De),Q.depthBuffer&&Q.resolveDepthBuffer===!1&&(Ee.push(Pe),ee.push(Pe),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,ee)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Ee))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),ke)for(let De=0;De<W.length;De++){n.bindFramebuffer(t.FRAMEBUFFER,je.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+De,t.RENDERBUFFER,je.__webglColorRenderbuffer[De]);const nt=r.get(W[De]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,je.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+De,t.TEXTURE_2D,nt,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,je.__webglMultisampledFramebuffer)}else if(Q.depthBuffer&&Q.resolveDepthBuffer===!1&&l){const W=Q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[W])}}}function le(Q){return Math.min(i.maxSamples,Q.samples)}function me(Q){const W=r.get(Q);return Q.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&W.__useRenderToTexture!==!1}function ne(Q){const W=s.render.frame;u.get(Q)!==W&&(u.set(Q,W),Q.update())}function se(Q,W){const ve=Q.colorSpace,ue=Q.format,Me=Q.type;return Q.isCompressedTexture===!0||Q.isVideoTexture===!0||ve!==Jv&&ve!==Ef&&(Or.getTransfer(ve)===ii?(ue!==sc||Me!==Cd)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ve)),W}function ge(Q){return typeof HTMLImageElement!="undefined"&&Q instanceof HTMLImageElement?(c.width=Q.naturalWidth||Q.width,c.height=Q.naturalHeight||Q.height):typeof VideoFrame!="undefined"&&Q instanceof VideoFrame?(c.width=Q.displayWidth,c.height=Q.displayHeight):(c.width=Q.width,c.height=Q.height),c}this.allocateTextureUnit=F,this.resetTextureUnits=R,this.setTexture2D=N,this.setTexture2DArray=U,this.setTexture3D=H,this.setTextureCube=j,this.rebindTextures=ce,this.setupRenderTarget=xe,this.updateRenderTargetMipmap=Ae,this.updateMultisampleRenderTarget=Oe,this.setupDepthRenderbuffer=pe,this.setupFrameBufferTexture=V,this.useMultisampledRTT=me}function XXe(t,e){function n(r,i=Ef){let o;const s=Or.getTransfer(i);if(r===Cd)return t.UNSIGNED_BYTE;if(r===XL)return t.UNSIGNED_SHORT_4_4_4_4;if(r===QL)return t.UNSIGNED_SHORT_5_5_5_1;if(r===Cte)return t.UNSIGNED_INT_5_9_9_9_REV;if(r===_te)return t.BYTE;if(r===Ete)return t.SHORT;if(r===zb)return t.UNSIGNED_SHORT;if(r===YL)return t.INT;if(r===rm)return t.UNSIGNED_INT;if(r===Zu)return t.FLOAT;if(r===Zw)return t.HALF_FLOAT;if(r===Ate)return t.ALPHA;if(r===Tte)return t.RGB;if(r===sc)return t.RGBA;if(r===Mte)return t.LUMINANCE;if(r===Pte)return t.LUMINANCE_ALPHA;if(r===Wb)return t.DEPTH_COMPONENT;if(r===$b)return t.DEPTH_STENCIL;if(r===Dte)return t.RED;if(r===ZL)return t.RED_INTEGER;if(r===Rte)return t.RG;if(r===JL)return t.RG_INTEGER;if(r===e5)return t.RGBA_INTEGER;if(r===wE||r===SE||r===_E||r===EE)if(s===ii)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(r===wE)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===SE)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===_E)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===EE)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(r===wE)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===SE)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===_E)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===EE)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===rF||r===iF||r===oF||r===sF)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(r===rF)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===iF)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===oF)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===sF)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===aF||r===lF||r===cF)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(r===aF||r===lF)return s===ii?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(r===cF)return s===ii?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===uF||r===dF||r===fF||r===hF||r===pF||r===mF||r===gF||r===vF||r===yF||r===xF||r===bF||r===wF||r===SF||r===_F)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(r===uF)return s===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===dF)return s===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===fF)return s===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===hF)return s===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===pF)return s===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===mF)return s===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===gF)return s===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===vF)return s===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===yF)return s===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===xF)return s===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===bF)return s===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===wF)return s===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===SF)return s===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===_F)return s===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===CE||r===EF||r===CF)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(r===CE)return s===ii?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===EF)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===CF)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===kte||r===AF||r===TF||r===MF)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(r===CE)return o.COMPRESSED_RED_RGTC1_EXT;if(r===AF)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===TF)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===MF)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Vb?t.UNSIGNED_INT_24_8:t[r]!==void 0?t[r]:null}return{convert:n}}const QXe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,ZXe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class JXe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const i=new Ls,o=e.properties.get(i);o.__webglTexture=n.texture,(n.depthNear!==r.depthNear||n.depthFar!==r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,r=new ih({vertexShader:QXe,fragmentShader:ZXe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new Dn(new Yf(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class eQe extends _0{constructor(e,n){super();const r=this;let i=null,o=1,s=null,a="local-floor",l=1,c=null,u=null,d=null,f=null,p=null,b=null;const v=new JXe,m=n.getContextAttributes();let g=null,x=null;const w=[],S=[],D=new Kt;let k=null;const P=new cl;P.viewport=new Hi;const M=new cl;M.viewport=new Hi;const T=[P,M],_=new wGe;let E=null,R=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Y){let J=w[Y];return J===void 0&&(J=new UD,w[Y]=J),J.getTargetRaySpace()},this.getControllerGrip=function(Y){let J=w[Y];return J===void 0&&(J=new UD,w[Y]=J),J.getGripSpace()},this.getHand=function(Y){let J=w[Y];return J===void 0&&(J=new UD,w[Y]=J),J.getHandSpace()};function F(Y){const J=S.indexOf(Y.inputSource);if(J===-1)return;const V=w[J];V!==void 0&&(V.update(Y.inputSource,Y.frame,c||s),V.dispatchEvent({type:Y.type,data:Y.inputSource}))}function L(){i.removeEventListener("select",F),i.removeEventListener("selectstart",F),i.removeEventListener("selectend",F),i.removeEventListener("squeeze",F),i.removeEventListener("squeezestart",F),i.removeEventListener("squeezeend",F),i.removeEventListener("end",L),i.removeEventListener("inputsourceschange",N);for(let Y=0;Y<w.length;Y++){const J=S[Y];J!==null&&(S[Y]=null,w[Y].disconnect(J))}E=null,R=null,v.reset(),e.setRenderTarget(g),p=null,f=null,d=null,i=null,x=null,G.stop(),r.isPresenting=!1,e.setPixelRatio(k),e.setSize(D.width,D.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Y){o=Y,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Y){a=Y,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||s},this.setReferenceSpace=function(Y){c=Y},this.getBaseLayer=function(){return f!==null?f:p},this.getBinding=function(){return d},this.getFrame=function(){return b},this.getSession=function(){return i},this.setSession=function(Y){return te(this,null,function*(){if(i=Y,i!==null){if(g=e.getRenderTarget(),i.addEventListener("select",F),i.addEventListener("selectstart",F),i.addEventListener("selectend",F),i.addEventListener("squeeze",F),i.addEventListener("squeezestart",F),i.addEventListener("squeezeend",F),i.addEventListener("end",L),i.addEventListener("inputsourceschange",N),m.xrCompatible!==!0&&(yield n.makeXRCompatible()),k=e.getPixelRatio(),e.getSize(D),typeof XRWebGLBinding!="undefined"&&"createProjectionLayer"in XRWebGLBinding.prototype){let V=null,re=null,fe=null;m.depth&&(fe=m.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,V=m.stencil?$b:Wb,re=m.stencil?Vb:rm);const pe={colorFormat:n.RGBA8,depthFormat:fe,scaleFactor:o};d=new XRWebGLBinding(i,n),f=d.createProjectionLayer(pe),i.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),x=new im(f.textureWidth,f.textureHeight,{format:sc,type:Cd,depthTexture:new $te(f.textureWidth,f.textureHeight,re,void 0,void 0,void 0,void 0,void 0,void 0,V),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:m.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1,resolveStencilBuffer:f.ignoreDepthValues===!1})}else{const V={antialias:m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:o};p=new XRWebGLLayer(i,n,V),i.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),x=new im(p.framebufferWidth,p.framebufferHeight,{format:sc,type:Cd,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil,resolveDepthBuffer:p.ignoreDepthValues===!1,resolveStencilBuffer:p.ignoreDepthValues===!1})}x.isXRRenderTarget=!0,this.setFoveation(l),c=null,s=yield i.requestReferenceSpace(a),G.setContext(i),G.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return v.getDepthTexture()};function N(Y){for(let J=0;J<Y.removed.length;J++){const V=Y.removed[J],re=S.indexOf(V);re>=0&&(S[re]=null,w[re].disconnect(V))}for(let J=0;J<Y.added.length;J++){const V=Y.added[J];let re=S.indexOf(V);if(re===-1){for(let pe=0;pe<w.length;pe++)if(pe>=S.length){S.push(V),re=pe;break}else if(S[pe]===null){S[pe]=V,re=pe;break}if(re===-1)break}const fe=w[re];fe&&fe.connect(V)}}const U=new qe,H=new qe;function j(Y,J,V){U.setFromMatrixPosition(J.matrixWorld),H.setFromMatrixPosition(V.matrixWorld);const re=U.distanceTo(H),fe=J.projectionMatrix.elements,pe=V.projectionMatrix.elements,ce=fe[14]/(fe[10]-1),xe=fe[14]/(fe[10]+1),Ae=(fe[9]+1)/fe[5],Ee=(fe[9]-1)/fe[5],ee=(fe[8]-1)/fe[0],Oe=(pe[8]+1)/pe[0],le=ce*ee,me=ce*Oe,ne=re/(-ee+Oe),se=ne*-ee;if(J.matrixWorld.decompose(Y.position,Y.quaternion,Y.scale),Y.translateX(se),Y.translateZ(ne),Y.matrixWorld.compose(Y.position,Y.quaternion,Y.scale),Y.matrixWorldInverse.copy(Y.matrixWorld).invert(),fe[10]===-1)Y.projectionMatrix.copy(J.projectionMatrix),Y.projectionMatrixInverse.copy(J.projectionMatrixInverse);else{const ge=ce+ne,Q=xe+ne,W=le-se,ve=me+(re-se),ue=Ae*xe/Q*ge,Me=Ee*xe/Q*ge;Y.projectionMatrix.makePerspective(W,ve,ue,Me,ge,Q),Y.projectionMatrixInverse.copy(Y.projectionMatrix).invert()}}function z(Y,J){J===null?Y.matrixWorld.copy(Y.matrix):Y.matrixWorld.multiplyMatrices(J.matrixWorld,Y.matrix),Y.matrixWorldInverse.copy(Y.matrixWorld).invert()}this.updateCamera=function(Y){if(i===null)return;let J=Y.near,V=Y.far;v.texture!==null&&(v.depthNear>0&&(J=v.depthNear),v.depthFar>0&&(V=v.depthFar)),_.near=M.near=P.near=J,_.far=M.far=P.far=V,(E!==_.near||R!==_.far)&&(i.updateRenderState({depthNear:_.near,depthFar:_.far}),E=_.near,R=_.far),P.layers.mask=Y.layers.mask|2,M.layers.mask=Y.layers.mask|4,_.layers.mask=P.layers.mask|M.layers.mask;const re=Y.parent,fe=_.cameras;z(_,re);for(let pe=0;pe<fe.length;pe++)z(fe[pe],re);fe.length===2?j(_,P,M):_.projectionMatrix.copy(P.projectionMatrix),q(Y,_,re)};function q(Y,J,V){V===null?Y.matrix.copy(J.matrixWorld):(Y.matrix.copy(V.matrixWorld),Y.matrix.invert(),Y.matrix.multiply(J.matrixWorld)),Y.matrix.decompose(Y.position,Y.quaternion,Y.scale),Y.updateMatrixWorld(!0),Y.projectionMatrix.copy(J.projectionMatrix),Y.projectionMatrixInverse.copy(J.projectionMatrixInverse),Y.isPerspectiveCamera&&(Y.fov=PF*2*Math.atan(1/Y.projectionMatrix.elements[5]),Y.zoom=1)}this.getCamera=function(){return _},this.getFoveation=function(){if(!(f===null&&p===null))return l},this.setFoveation=function(Y){l=Y,f!==null&&(f.fixedFoveation=Y),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=Y)},this.hasDepthSensing=function(){return v.texture!==null},this.getDepthSensingMesh=function(){return v.getMesh(_)};let $=null;function K(Y,J){if(u=J.getViewerPose(c||s),b=J,u!==null){const V=u.views;p!==null&&(e.setRenderTargetFramebuffer(x,p.framebuffer),e.setRenderTarget(x));let re=!1;V.length!==_.cameras.length&&(_.cameras.length=0,re=!0);for(let ce=0;ce<V.length;ce++){const xe=V[ce];let Ae=null;if(p!==null)Ae=p.getViewport(xe);else{const ee=d.getViewSubImage(f,xe);Ae=ee.viewport,ce===0&&(e.setRenderTargetTextures(x,ee.colorTexture,ee.depthStencilTexture),e.setRenderTarget(x))}let Ee=T[ce];Ee===void 0&&(Ee=new cl,Ee.layers.enable(ce),Ee.viewport=new Hi,T[ce]=Ee),Ee.matrix.fromArray(xe.transform.matrix),Ee.matrix.decompose(Ee.position,Ee.quaternion,Ee.scale),Ee.projectionMatrix.fromArray(xe.projectionMatrix),Ee.projectionMatrixInverse.copy(Ee.projectionMatrix).invert(),Ee.viewport.set(Ae.x,Ae.y,Ae.width,Ae.height),ce===0&&(_.matrix.copy(Ee.matrix),_.matrix.decompose(_.position,_.quaternion,_.scale)),re===!0&&_.cameras.push(Ee)}const fe=i.enabledFeatures;if(fe&&fe.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&d){const ce=d.getDepthInformation(V[0]);ce&&ce.isValid&&ce.texture&&v.init(e,ce,i.renderState)}}for(let V=0;V<w.length;V++){const re=S[V],fe=w[V];re!==null&&fe!==void 0&&fe.update(re,J,c||s)}$&&$(Y,J),J.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:J}),b=null}const G=new tne;G.setAnimationLoop(K),this.setAnimationLoop=function(Y){$=Y},this.dispose=function(){}}}const zh=new du,tQe=new Ti;function nQe(t,e){function n(m,g){m.matrixAutoUpdate===!0&&m.updateMatrix(),g.value.copy(m.matrix)}function r(m,g){g.color.getRGB(m.fogColor.value,zte(t)),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)}function i(m,g,x,w,S){g.isMeshBasicMaterial||g.isMeshLambertMaterial?o(m,g):g.isMeshToonMaterial?(o(m,g),d(m,g)):g.isMeshPhongMaterial?(o(m,g),u(m,g)):g.isMeshStandardMaterial?(o(m,g),f(m,g),g.isMeshPhysicalMaterial&&p(m,g,S)):g.isMeshMatcapMaterial?(o(m,g),b(m,g)):g.isMeshDepthMaterial?o(m,g):g.isMeshDistanceMaterial?(o(m,g),v(m,g)):g.isMeshNormalMaterial?o(m,g):g.isLineBasicMaterial?(s(m,g),g.isLineDashedMaterial&&a(m,g)):g.isPointsMaterial?l(m,g,x,w):g.isSpriteMaterial?c(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function o(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map,n(g.map,m.mapTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,n(g.alphaMap,m.alphaMapTransform)),g.bumpMap&&(m.bumpMap.value=g.bumpMap,n(g.bumpMap,m.bumpMapTransform),m.bumpScale.value=g.bumpScale,g.side===ca&&(m.bumpScale.value*=-1)),g.normalMap&&(m.normalMap.value=g.normalMap,n(g.normalMap,m.normalMapTransform),m.normalScale.value.copy(g.normalScale),g.side===ca&&m.normalScale.value.negate()),g.displacementMap&&(m.displacementMap.value=g.displacementMap,n(g.displacementMap,m.displacementMapTransform),m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap,n(g.emissiveMap,m.emissiveMapTransform)),g.specularMap&&(m.specularMap.value=g.specularMap,n(g.specularMap,m.specularMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);const x=e.get(g),w=x.envMap,S=x.envMapRotation;w&&(m.envMap.value=w,zh.copy(S),zh.x*=-1,zh.y*=-1,zh.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(zh.y*=-1,zh.z*=-1),m.envMapRotation.value.setFromMatrix4(tQe.makeRotationFromEuler(zh)),m.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap&&(m.lightMap.value=g.lightMap,m.lightMapIntensity.value=g.lightMapIntensity,n(g.lightMap,m.lightMapTransform)),g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity,n(g.aoMap,m.aoMapTransform))}function s(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,g.map&&(m.map.value=g.map,n(g.map,m.mapTransform))}function a(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}function l(m,g,x,w){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*x,m.scale.value=w*.5,g.map&&(m.map.value=g.map,n(g.map,m.uvTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,n(g.alphaMap,m.alphaMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest)}function c(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map,n(g.map,m.mapTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,n(g.alphaMap,m.alphaMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest)}function u(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}function d(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}function f(m,g){m.metalness.value=g.metalness,g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap,n(g.metalnessMap,m.metalnessMapTransform)),m.roughness.value=g.roughness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap,n(g.roughnessMap,m.roughnessMapTransform)),g.envMap&&(m.envMapIntensity.value=g.envMapIntensity)}function p(m,g,x){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap,n(g.sheenColorMap,m.sheenColorMapTransform)),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap,n(g.sheenRoughnessMap,m.sheenRoughnessMapTransform))),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap,n(g.clearcoatMap,m.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,n(g.clearcoatRoughnessMap,m.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(m.clearcoatNormalMap.value=g.clearcoatNormalMap,n(g.clearcoatNormalMap,m.clearcoatNormalMapTransform),m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===ca&&m.clearcoatNormalScale.value.negate())),g.dispersion>0&&(m.dispersion.value=g.dispersion),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap,n(g.iridescenceMap,m.iridescenceMapTransform)),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap,n(g.iridescenceThicknessMap,m.iridescenceThicknessMapTransform))),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=x.texture,m.transmissionSamplerSize.value.set(x.width,x.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap,n(g.transmissionMap,m.transmissionMapTransform)),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap,n(g.thicknessMap,m.thicknessMapTransform)),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(m.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(m.anisotropyMap.value=g.anisotropyMap,n(g.anisotropyMap,m.anisotropyMapTransform))),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap,n(g.specularColorMap,m.specularColorMapTransform)),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap,n(g.specularIntensityMap,m.specularIntensityMapTransform))}function b(m,g){g.matcap&&(m.matcap.value=g.matcap)}function v(m,g){const x=e.get(g).light;m.referencePosition.value.setFromMatrixPosition(x.matrixWorld),m.nearDistance.value=x.shadow.camera.near,m.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function rQe(t,e,n,r){let i={},o={},s=[];const a=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(x,w){const S=w.program;r.uniformBlockBinding(x,S)}function c(x,w){let S=i[x.id];S===void 0&&(b(x),S=u(x),i[x.id]=S,x.addEventListener("dispose",m));const D=w.program;r.updateUBOMapping(x,D);const k=e.render.frame;o[x.id]!==k&&(f(x),o[x.id]=k)}function u(x){const w=d();x.__bindingPointIndex=w;const S=t.createBuffer(),D=x.__size,k=x.usage;return t.bindBuffer(t.UNIFORM_BUFFER,S),t.bufferData(t.UNIFORM_BUFFER,D,k),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,w,S),S}function d(){for(let x=0;x<a;x++)if(s.indexOf(x)===-1)return s.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(x){const w=i[x.id],S=x.uniforms,D=x.__cache;t.bindBuffer(t.UNIFORM_BUFFER,w);for(let k=0,P=S.length;k<P;k++){const M=Array.isArray(S[k])?S[k]:[S[k]];for(let T=0,_=M.length;T<_;T++){const E=M[T];if(p(E,k,T,D)===!0){const R=E.__offset,F=Array.isArray(E.value)?E.value:[E.value];let L=0;for(let N=0;N<F.length;N++){const U=F[N],H=v(U);typeof U=="number"||typeof U=="boolean"?(E.__data[0]=U,t.bufferSubData(t.UNIFORM_BUFFER,R+L,E.__data)):U.isMatrix3?(E.__data[0]=U.elements[0],E.__data[1]=U.elements[1],E.__data[2]=U.elements[2],E.__data[3]=0,E.__data[4]=U.elements[3],E.__data[5]=U.elements[4],E.__data[6]=U.elements[5],E.__data[7]=0,E.__data[8]=U.elements[6],E.__data[9]=U.elements[7],E.__data[10]=U.elements[8],E.__data[11]=0):(U.toArray(E.__data,L),L+=H.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,R,E.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function p(x,w,S,D){const k=x.value,P=w+"_"+S;if(D[P]===void 0)return typeof k=="number"||typeof k=="boolean"?D[P]=k:D[P]=k.clone(),!0;{const M=D[P];if(typeof k=="number"||typeof k=="boolean"){if(M!==k)return D[P]=k,!0}else if(M.equals(k)===!1)return M.copy(k),!0}return!1}function b(x){const w=x.uniforms;let S=0;const D=16;for(let P=0,M=w.length;P<M;P++){const T=Array.isArray(w[P])?w[P]:[w[P]];for(let _=0,E=T.length;_<E;_++){const R=T[_],F=Array.isArray(R.value)?R.value:[R.value];for(let L=0,N=F.length;L<N;L++){const U=F[L],H=v(U),j=S%D,z=j%H.boundary,q=j+z;S+=z,q!==0&&D-q<H.storage&&(S+=D-q),R.__data=new Float32Array(H.storage/Float32Array.BYTES_PER_ELEMENT),R.__offset=S,S+=H.storage}}}const k=S%D;return k>0&&(S+=D-k),x.__size=S,x.__cache={},this}function v(x){const w={boundary:0,storage:0};return typeof x=="number"||typeof x=="boolean"?(w.boundary=4,w.storage=4):x.isVector2?(w.boundary=8,w.storage=8):x.isVector3||x.isColor?(w.boundary=16,w.storage=12):x.isVector4?(w.boundary=16,w.storage=16):x.isMatrix3?(w.boundary=48,w.storage=48):x.isMatrix4?(w.boundary=64,w.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),w}function m(x){const w=x.target;w.removeEventListener("dispose",m);const S=s.indexOf(w.__bindingPointIndex);s.splice(S,1),t.deleteBuffer(i[w.id]),delete i[w.id],delete o[w.id]}function g(){for(const x in i)t.deleteBuffer(i[x]);s=[],i={},o={}}return{bind:l,update:c,dispose:g}}class iQe{constructor(e={}){const{canvas:n=iHe(),context:r=null,depth:i=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reverseDepthBuffer:f=!1}=e;this.isWebGLRenderer=!0;let p;if(r!==null){if(typeof WebGLRenderingContext!="undefined"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=r.getContextAttributes().alpha}else p=s;const b=new Uint32Array(4),v=new Int32Array(4);let m=null,g=null;const x=[],w=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=qf,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const S=this;let D=!1;this._outputColorSpace=il;let k=0,P=0,M=null,T=-1,_=null;const E=new Hi,R=new Hi;let F=null;const L=new Sn(0);let N=0,U=n.width,H=n.height,j=1,z=null,q=null;const $=new Hi(0,0,U,H),K=new Hi(0,0,U,H);let G=!1;const Y=new i5;let J=!1,V=!1;const re=new Ti,fe=new Ti,pe=new qe,ce=new Hi,xe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ae=!1;function Ee(){return M===null?j:1}let ee=r;function Oe(ae,Le){return n.getContext(ae,Le)}try{const ae={alpha:!0,depth:i,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${KL}`),n.addEventListener("webglcontextlost",ft,!1),n.addEventListener("webglcontextrestored",_t,!1),n.addEventListener("webglcontextcreationerror",lt,!1),ee===null){const Le="webgl2";if(ee=Oe(Le,ae),ee===null)throw Oe(Le)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ae){throw console.error("THREE.WebGLRenderer: "+ae.message),ae}let le,me,ne,se,ge,Q,W,ve,ue,Me,Pe,je,ke,De,nt,be,Ne,Ie,Ve,Ue,tt,st,vt,Fe;function ct(){le=new pYe(ee),le.init(),st=new XXe(ee,le),me=new aYe(ee,le,e,st),ne=new KXe(ee,le),me.reverseDepthBuffer&&f&&ne.buffers.depth.setReversed(!0),se=new vYe(ee),ge=new OXe,Q=new YXe(ee,le,ne,ge,me,st,se),W=new cYe(S),ve=new hYe(S),ue=new _Ge(ee),vt=new oYe(ee,ue),Me=new mYe(ee,ue,se,vt),Pe=new xYe(ee,Me,ue,se),Ve=new yYe(ee,me,Q),be=new lYe(ge),je=new FXe(S,W,ve,le,me,vt,be),ke=new nQe(S,ge),De=new LXe,nt=new WXe(le),Ie=new iYe(S,W,ve,ne,Pe,p,l),Ne=new GXe(S,Pe,me),Fe=new rQe(ee,se,me,ne),Ue=new sYe(ee,le,se),tt=new gYe(ee,le,se),se.programs=je.programs,S.capabilities=me,S.extensions=le,S.properties=ge,S.renderLists=De,S.shadowMap=Ne,S.state=ne,S.info=se}ct();const Ye=new eQe(S,ee);this.xr=Ye,this.getContext=function(){return ee},this.getContextAttributes=function(){return ee.getContextAttributes()},this.forceContextLoss=function(){const ae=le.get("WEBGL_lose_context");ae&&ae.loseContext()},this.forceContextRestore=function(){const ae=le.get("WEBGL_lose_context");ae&&ae.restoreContext()},this.getPixelRatio=function(){return j},this.setPixelRatio=function(ae){ae!==void 0&&(j=ae,this.setSize(U,H,!1))},this.getSize=function(ae){return ae.set(U,H)},this.setSize=function(ae,Le,et=!0){if(Ye.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}U=ae,H=Le,n.width=Math.floor(ae*j),n.height=Math.floor(Le*j),et===!0&&(n.style.width=ae+"px",n.style.height=Le+"px"),this.setViewport(0,0,ae,Le)},this.getDrawingBufferSize=function(ae){return ae.set(U*j,H*j).floor()},this.setDrawingBufferSize=function(ae,Le,et){U=ae,H=Le,j=et,n.width=Math.floor(ae*et),n.height=Math.floor(Le*et),this.setViewport(0,0,ae,Le)},this.getCurrentViewport=function(ae){return ae.copy(E)},this.getViewport=function(ae){return ae.copy($)},this.setViewport=function(ae,Le,et,Ke){ae.isVector4?$.set(ae.x,ae.y,ae.z,ae.w):$.set(ae,Le,et,Ke),ne.viewport(E.copy($).multiplyScalar(j).round())},this.getScissor=function(ae){return ae.copy(K)},this.setScissor=function(ae,Le,et,Ke){ae.isVector4?K.set(ae.x,ae.y,ae.z,ae.w):K.set(ae,Le,et,Ke),ne.scissor(R.copy(K).multiplyScalar(j).round())},this.getScissorTest=function(){return G},this.setScissorTest=function(ae){ne.setScissorTest(G=ae)},this.setOpaqueSort=function(ae){z=ae},this.setTransparentSort=function(ae){q=ae},this.getClearColor=function(ae){return ae.copy(Ie.getClearColor())},this.setClearColor=function(){Ie.setClearColor(...arguments)},this.getClearAlpha=function(){return Ie.getClearAlpha()},this.setClearAlpha=function(){Ie.setClearAlpha(...arguments)},this.clear=function(ae=!0,Le=!0,et=!0){let Ke=0;if(ae){let We=!1;if(M!==null){const wt=M.texture.format;We=wt===e5||wt===JL||wt===ZL}if(We){const wt=M.texture.type,kt=wt===Cd||wt===rm||wt===zb||wt===Vb||wt===XL||wt===QL,Mt=Ie.getClearColor(),Wt=Ie.getClearAlpha(),mn=Mt.r,gn=Mt.g,cn=Mt.b;kt?(b[0]=mn,b[1]=gn,b[2]=cn,b[3]=Wt,ee.clearBufferuiv(ee.COLOR,0,b)):(v[0]=mn,v[1]=gn,v[2]=cn,v[3]=Wt,ee.clearBufferiv(ee.COLOR,0,v))}else Ke|=ee.COLOR_BUFFER_BIT}Le&&(Ke|=ee.DEPTH_BUFFER_BIT),et&&(Ke|=ee.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ee.clear(Ke)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",ft,!1),n.removeEventListener("webglcontextrestored",_t,!1),n.removeEventListener("webglcontextcreationerror",lt,!1),Ie.dispose(),De.dispose(),nt.dispose(),ge.dispose(),W.dispose(),ve.dispose(),Pe.dispose(),vt.dispose(),Fe.dispose(),je.dispose(),Ye.dispose(),Ye.removeEventListener("sessionstart",gt),Ye.removeEventListener("sessionend",Rt),Bt.stop()};function ft(ae){ae.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),D=!0}function _t(){console.log("THREE.WebGLRenderer: Context Restored."),D=!1;const ae=se.autoReset,Le=Ne.enabled,et=Ne.autoUpdate,Ke=Ne.needsUpdate,We=Ne.type;ct(),se.autoReset=ae,Ne.enabled=Le,Ne.autoUpdate=et,Ne.needsUpdate=Ke,Ne.type=We}function lt(ae){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ae.statusMessage)}function Lt(ae){const Le=ae.target;Le.removeEventListener("dispose",Lt),nn(Le)}function nn(ae){sn(ae),ge.remove(ae)}function sn(ae){const Le=ge.get(ae).programs;Le!==void 0&&(Le.forEach(function(et){je.releaseProgram(et)}),ae.isShaderMaterial&&je.releaseShaderCache(ae))}this.renderBufferDirect=function(ae,Le,et,Ke,We,wt){Le===null&&(Le=xe);const kt=We.isMesh&&We.matrixWorld.determinant()<0,Mt=qr(ae,Le,et,Ke,We);ne.setMaterial(Ke,kt);let Wt=et.index,mn=1;if(Ke.wireframe===!0){if(Wt=Me.getWireframeAttribute(et),Wt===void 0)return;mn=2}const gn=et.drawRange,cn=et.attributes.position;let un=gn.start*mn,$n=(gn.start+gn.count)*mn;wt!==null&&(un=Math.max(un,wt.start*mn),$n=Math.min($n,(wt.start+wt.count)*mn)),Wt!==null?(un=Math.max(un,0),$n=Math.min($n,Wt.count)):cn!=null&&(un=Math.max(un,0),$n=Math.min($n,cn.count));const br=$n-un;if(br<0||br===1/0)return;vt.setup(We,Ke,Mt,et,Wt);let _e,at=Ue;if(Wt!==null&&(_e=ue.get(Wt),at=tt,at.setIndex(_e)),We.isMesh)Ke.wireframe===!0?(ne.setLineWidth(Ke.wireframeLinewidth*Ee()),at.setMode(ee.LINES)):at.setMode(ee.TRIANGLES);else if(We.isLine){let St=Ke.linewidth;St===void 0&&(St=1),ne.setLineWidth(St*Ee()),We.isLineSegments?at.setMode(ee.LINES):We.isLineLoop?at.setMode(ee.LINE_LOOP):at.setMode(ee.LINE_STRIP)}else We.isPoints?at.setMode(ee.POINTS):We.isSprite&&at.setMode(ee.TRIANGLES);if(We.isBatchedMesh)if(We._multiDrawInstances!==null)AE("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),at.renderMultiDrawInstances(We._multiDrawStarts,We._multiDrawCounts,We._multiDrawCount,We._multiDrawInstances);else if(le.get("WEBGL_multi_draw"))at.renderMultiDraw(We._multiDrawStarts,We._multiDrawCounts,We._multiDrawCount);else{const St=We._multiDrawStarts,Dt=We._multiDrawCounts,Nt=We._multiDrawCount,Zt=Wt?ue.get(Wt).bytesPerElement:1,Cn=ge.get(Ke).currentProgram.getUniforms();for(let wn=0;wn<Nt;wn++)Cn.setValue(ee,"_gl_DrawID",wn),at.render(St[wn]/Zt,Dt[wn])}else if(We.isInstancedMesh)at.renderInstances(un,br,We.count);else if(et.isInstancedBufferGeometry){const St=et._maxInstanceCount!==void 0?et._maxInstanceCount:1/0,Dt=Math.min(et.instanceCount,St);at.renderInstances(un,br,Dt)}else at.render(un,br)};function Ce(ae,Le,et){ae.transparent===!0&&ae.side===Ps&&ae.forceSinglePass===!1?(ae.side=ca,ae.needsUpdate=!0,vn(ae,Le,et),ae.side=Ed,ae.needsUpdate=!0,vn(ae,Le,et),ae.side=Ps):vn(ae,Le,et)}this.compile=function(ae,Le,et=null){et===null&&(et=ae),g=nt.get(et),g.init(Le),w.push(g),et.traverseVisible(function(We){We.isLight&&We.layers.test(Le.layers)&&(g.pushLight(We),We.castShadow&&g.pushShadow(We))}),ae!==et&&ae.traverseVisible(function(We){We.isLight&&We.layers.test(Le.layers)&&(g.pushLight(We),We.castShadow&&g.pushShadow(We))}),g.setupLights();const Ke=new Set;return ae.traverse(function(We){if(!(We.isMesh||We.isPoints||We.isLine||We.isSprite))return;const wt=We.material;if(wt)if(Array.isArray(wt))for(let kt=0;kt<wt.length;kt++){const Mt=wt[kt];Ce(Mt,et,We),Ke.add(Mt)}else Ce(wt,et,We),Ke.add(wt)}),g=w.pop(),Ke},this.compileAsync=function(ae,Le,et=null){const Ke=this.compile(ae,Le,et);return new Promise(We=>{function wt(){if(Ke.forEach(function(kt){ge.get(kt).currentProgram.isReady()&&Ke.delete(kt)}),Ke.size===0){We(ae);return}setTimeout(wt,10)}le.get("KHR_parallel_shader_compile")!==null?wt():setTimeout(wt,10)})};let ze=null;function Qe(ae){ze&&ze(ae)}function gt(){Bt.stop()}function Rt(){Bt.start()}const Bt=new tne;Bt.setAnimationLoop(Qe),typeof self!="undefined"&&Bt.setContext(self),this.setAnimationLoop=function(ae){ze=ae,Ye.setAnimationLoop(ae),ae===null?Bt.stop():Bt.start()},Ye.addEventListener("sessionstart",gt),Ye.addEventListener("sessionend",Rt),this.render=function(ae,Le){if(Le!==void 0&&Le.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(D===!0)return;if(ae.matrixWorldAutoUpdate===!0&&ae.updateMatrixWorld(),Le.parent===null&&Le.matrixWorldAutoUpdate===!0&&Le.updateMatrixWorld(),Ye.enabled===!0&&Ye.isPresenting===!0&&(Ye.cameraAutoUpdate===!0&&Ye.updateCamera(Le),Le=Ye.getCamera()),ae.isScene===!0&&ae.onBeforeRender(S,ae,Le,M),g=nt.get(ae,w.length),g.init(Le),w.push(g),fe.multiplyMatrices(Le.projectionMatrix,Le.matrixWorldInverse),Y.setFromProjectionMatrix(fe),V=this.localClippingEnabled,J=be.init(this.clippingPlanes,V),m=De.get(ae,x.length),m.init(),x.push(m),Ye.enabled===!0&&Ye.isPresenting===!0){const wt=S.xr.getDepthSensingMesh();wt!==null&&tn(wt,Le,-1/0,S.sortObjects)}tn(ae,Le,0,S.sortObjects),m.finish(),S.sortObjects===!0&&m.sort(z,q),Ae=Ye.enabled===!1||Ye.isPresenting===!1||Ye.hasDepthSensing()===!1,Ae&&Ie.addToRenderList(m,ae),this.info.render.frame++,J===!0&&be.beginShadows();const et=g.state.shadowsArray;Ne.render(et,ae,Le),J===!0&&be.endShadows(),this.info.autoReset===!0&&this.info.reset();const Ke=m.opaque,We=m.transmissive;if(g.setupLights(),Le.isArrayCamera){const wt=Le.cameras;if(We.length>0)for(let kt=0,Mt=wt.length;kt<Mt;kt++){const Wt=wt[kt];Qt(Ke,We,ae,Wt)}Ae&&Ie.render(ae);for(let kt=0,Mt=wt.length;kt<Mt;kt++){const Wt=wt[kt];Ht(m,ae,Wt,Wt.viewport)}}else We.length>0&&Qt(Ke,We,ae,Le),Ae&&Ie.render(ae),Ht(m,ae,Le);M!==null&&P===0&&(Q.updateMultisampleRenderTarget(M),Q.updateRenderTargetMipmap(M)),ae.isScene===!0&&ae.onAfterRender(S,ae,Le),vt.resetDefaultState(),T=-1,_=null,w.pop(),w.length>0?(g=w[w.length-1],J===!0&&be.setGlobalState(S.clippingPlanes,g.state.camera)):g=null,x.pop(),x.length>0?m=x[x.length-1]:m=null};function tn(ae,Le,et,Ke){if(ae.visible===!1)return;if(ae.layers.test(Le.layers)){if(ae.isGroup)et=ae.renderOrder;else if(ae.isLOD)ae.autoUpdate===!0&&ae.update(Le);else if(ae.isLight)g.pushLight(ae),ae.castShadow&&g.pushShadow(ae);else if(ae.isSprite){if(!ae.frustumCulled||Y.intersectsSprite(ae)){Ke&&ce.setFromMatrixPosition(ae.matrixWorld).applyMatrix4(fe);const kt=Pe.update(ae),Mt=ae.material;Mt.visible&&m.push(ae,kt,Mt,et,ce.z,null)}}else if((ae.isMesh||ae.isLine||ae.isPoints)&&(!ae.frustumCulled||Y.intersectsObject(ae))){const kt=Pe.update(ae),Mt=ae.material;if(Ke&&(ae.boundingSphere!==void 0?(ae.boundingSphere===null&&ae.computeBoundingSphere(),ce.copy(ae.boundingSphere.center)):(kt.boundingSphere===null&&kt.computeBoundingSphere(),ce.copy(kt.boundingSphere.center)),ce.applyMatrix4(ae.matrixWorld).applyMatrix4(fe)),Array.isArray(Mt)){const Wt=kt.groups;for(let mn=0,gn=Wt.length;mn<gn;mn++){const cn=Wt[mn],un=Mt[cn.materialIndex];un&&un.visible&&m.push(ae,kt,un,et,ce.z,cn)}}else Mt.visible&&m.push(ae,kt,Mt,et,ce.z,null)}}const wt=ae.children;for(let kt=0,Mt=wt.length;kt<Mt;kt++)tn(wt[kt],Le,et,Ke)}function Ht(ae,Le,et,Ke){const We=ae.opaque,wt=ae.transmissive,kt=ae.transparent;g.setupLightsView(et),J===!0&&be.setGlobalState(S.clippingPlanes,et),Ke&&ne.viewport(E.copy(Ke)),We.length>0&&Vt(We,Le,et),wt.length>0&&Vt(wt,Le,et),kt.length>0&&Vt(kt,Le,et),ne.buffers.depth.setTest(!0),ne.buffers.depth.setMask(!0),ne.buffers.color.setMask(!0),ne.setPolygonOffset(!1)}function Qt(ae,Le,et,Ke){if((et.isScene===!0?et.overrideMaterial:null)!==null)return;g.state.transmissionRenderTarget[Ke.id]===void 0&&(g.state.transmissionRenderTarget[Ke.id]=new im(1,1,{generateMipmaps:!0,type:le.has("EXT_color_buffer_half_float")||le.has("EXT_color_buffer_float")?Zw:Cd,minFilter:Pf,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Or.workingColorSpace}));const wt=g.state.transmissionRenderTarget[Ke.id],kt=Ke.viewport||E;wt.setSize(kt.z*S.transmissionResolutionScale,kt.w*S.transmissionResolutionScale);const Mt=S.getRenderTarget();S.setRenderTarget(wt),S.getClearColor(L),N=S.getClearAlpha(),N<1&&S.setClearColor(16777215,.5),S.clear(),Ae&&Ie.render(et);const Wt=S.toneMapping;S.toneMapping=qf;const mn=Ke.viewport;if(Ke.viewport!==void 0&&(Ke.viewport=void 0),g.setupLightsView(Ke),J===!0&&be.setGlobalState(S.clippingPlanes,Ke),Vt(ae,et,Ke),Q.updateMultisampleRenderTarget(wt),Q.updateRenderTargetMipmap(wt),le.has("WEBGL_multisampled_render_to_texture")===!1){let gn=!1;for(let cn=0,un=Le.length;cn<un;cn++){const $n=Le[cn],br=$n.object,_e=$n.geometry,at=$n.material,St=$n.group;if(at.side===Ps&&br.layers.test(Ke.layers)){const Dt=at.side;at.side=ca,at.needsUpdate=!0,pn(br,et,Ke,_e,at,St),at.side=Dt,at.needsUpdate=!0,gn=!0}}gn===!0&&(Q.updateMultisampleRenderTarget(wt),Q.updateRenderTargetMipmap(wt))}S.setRenderTarget(Mt),S.setClearColor(L,N),mn!==void 0&&(Ke.viewport=mn),S.toneMapping=Wt}function Vt(ae,Le,et){const Ke=Le.isScene===!0?Le.overrideMaterial:null;for(let We=0,wt=ae.length;We<wt;We++){const kt=ae[We],Mt=kt.object,Wt=kt.geometry,mn=kt.group;let gn=kt.material;gn.allowOverride===!0&&Ke!==null&&(gn=Ke),Mt.layers.test(et.layers)&&pn(Mt,Le,et,Wt,gn,mn)}}function pn(ae,Le,et,Ke,We,wt){ae.onBeforeRender(S,Le,et,Ke,We,wt),ae.modelViewMatrix.multiplyMatrices(et.matrixWorldInverse,ae.matrixWorld),ae.normalMatrix.getNormalMatrix(ae.modelViewMatrix),We.onBeforeRender(S,Le,et,Ke,ae,wt),We.transparent===!0&&We.side===Ps&&We.forceSinglePass===!1?(We.side=ca,We.needsUpdate=!0,S.renderBufferDirect(et,Le,Ke,We,ae,wt),We.side=Ed,We.needsUpdate=!0,S.renderBufferDirect(et,Le,Ke,We,ae,wt),We.side=Ps):S.renderBufferDirect(et,Le,Ke,We,ae,wt),ae.onAfterRender(S,Le,et,Ke,We,wt)}function vn(ae,Le,et){Le.isScene!==!0&&(Le=xe);const Ke=ge.get(ae),We=g.state.lights,wt=g.state.shadowsArray,kt=We.state.version,Mt=je.getParameters(ae,We.state,wt,Le,et),Wt=je.getProgramCacheKey(Mt);let mn=Ke.programs;Ke.environment=ae.isMeshStandardMaterial?Le.environment:null,Ke.fog=Le.fog,Ke.envMap=(ae.isMeshStandardMaterial?ve:W).get(ae.envMap||Ke.environment),Ke.envMapRotation=Ke.environment!==null&&ae.envMap===null?Le.environmentRotation:ae.envMapRotation,mn===void 0&&(ae.addEventListener("dispose",Lt),mn=new Map,Ke.programs=mn);let gn=mn.get(Wt);if(gn!==void 0){if(Ke.currentProgram===gn&&Ke.lightsStateVersion===kt)return tr(ae,Mt),gn}else Mt.uniforms=je.getUniforms(ae),ae.onBeforeCompile(Mt,S),gn=je.acquireProgram(Mt,Wt),mn.set(Wt,gn),Ke.uniforms=Mt.uniforms;const cn=Ke.uniforms;return(!ae.isShaderMaterial&&!ae.isRawShaderMaterial||ae.clipping===!0)&&(cn.clippingPlanes=be.uniform),tr(ae,Mt),Ke.needsLights=Jn(ae),Ke.lightsStateVersion=kt,Ke.needsLights&&(cn.ambientLightColor.value=We.state.ambient,cn.lightProbe.value=We.state.probe,cn.directionalLights.value=We.state.directional,cn.directionalLightShadows.value=We.state.directionalShadow,cn.spotLights.value=We.state.spot,cn.spotLightShadows.value=We.state.spotShadow,cn.rectAreaLights.value=We.state.rectArea,cn.ltc_1.value=We.state.rectAreaLTC1,cn.ltc_2.value=We.state.rectAreaLTC2,cn.pointLights.value=We.state.point,cn.pointLightShadows.value=We.state.pointShadow,cn.hemisphereLights.value=We.state.hemi,cn.directionalShadowMap.value=We.state.directionalShadowMap,cn.directionalShadowMatrix.value=We.state.directionalShadowMatrix,cn.spotShadowMap.value=We.state.spotShadowMap,cn.spotLightMatrix.value=We.state.spotLightMatrix,cn.spotLightMap.value=We.state.spotLightMap,cn.pointShadowMap.value=We.state.pointShadowMap,cn.pointShadowMatrix.value=We.state.pointShadowMatrix),Ke.currentProgram=gn,Ke.uniformsList=null,gn}function Wn(ae){if(ae.uniformsList===null){const Le=ae.currentProgram.getUniforms();ae.uniformsList=TE.seqWithValue(Le.seq,ae.uniforms)}return ae.uniformsList}function tr(ae,Le){const et=ge.get(ae);et.outputColorSpace=Le.outputColorSpace,et.batching=Le.batching,et.batchingColor=Le.batchingColor,et.instancing=Le.instancing,et.instancingColor=Le.instancingColor,et.instancingMorph=Le.instancingMorph,et.skinning=Le.skinning,et.morphTargets=Le.morphTargets,et.morphNormals=Le.morphNormals,et.morphColors=Le.morphColors,et.morphTargetsCount=Le.morphTargetsCount,et.numClippingPlanes=Le.numClippingPlanes,et.numIntersection=Le.numClipIntersection,et.vertexAlphas=Le.vertexAlphas,et.vertexTangents=Le.vertexTangents,et.toneMapping=Le.toneMapping}function qr(ae,Le,et,Ke,We){Le.isScene!==!0&&(Le=xe),Q.resetTextureUnits();const wt=Le.fog,kt=Ke.isMeshStandardMaterial?Le.environment:null,Mt=M===null?S.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:Jv,Wt=(Ke.isMeshStandardMaterial?ve:W).get(Ke.envMap||kt),mn=Ke.vertexColors===!0&&!!et.attributes.color&&et.attributes.color.itemSize===4,gn=!!et.attributes.tangent&&(!!Ke.normalMap||Ke.anisotropy>0),cn=!!et.morphAttributes.position,un=!!et.morphAttributes.normal,$n=!!et.morphAttributes.color;let br=qf;Ke.toneMapped&&(M===null||M.isXRRenderTarget===!0)&&(br=S.toneMapping);const _e=et.morphAttributes.position||et.morphAttributes.normal||et.morphAttributes.color,at=_e!==void 0?_e.length:0,St=ge.get(Ke),Dt=g.state.lights;if(J===!0&&(V===!0||ae!==_)){const Hn=ae===_&&Ke.id===T;be.setState(Ke,ae,Hn)}let Nt=!1;Ke.version===St.__version?(St.needsLights&&St.lightsStateVersion!==Dt.state.version||St.outputColorSpace!==Mt||We.isBatchedMesh&&St.batching===!1||!We.isBatchedMesh&&St.batching===!0||We.isBatchedMesh&&St.batchingColor===!0&&We.colorTexture===null||We.isBatchedMesh&&St.batchingColor===!1&&We.colorTexture!==null||We.isInstancedMesh&&St.instancing===!1||!We.isInstancedMesh&&St.instancing===!0||We.isSkinnedMesh&&St.skinning===!1||!We.isSkinnedMesh&&St.skinning===!0||We.isInstancedMesh&&St.instancingColor===!0&&We.instanceColor===null||We.isInstancedMesh&&St.instancingColor===!1&&We.instanceColor!==null||We.isInstancedMesh&&St.instancingMorph===!0&&We.morphTexture===null||We.isInstancedMesh&&St.instancingMorph===!1&&We.morphTexture!==null||St.envMap!==Wt||Ke.fog===!0&&St.fog!==wt||St.numClippingPlanes!==void 0&&(St.numClippingPlanes!==be.numPlanes||St.numIntersection!==be.numIntersection)||St.vertexAlphas!==mn||St.vertexTangents!==gn||St.morphTargets!==cn||St.morphNormals!==un||St.morphColors!==$n||St.toneMapping!==br||St.morphTargetsCount!==at)&&(Nt=!0):(Nt=!0,St.__version=Ke.version);let Zt=St.currentProgram;Nt===!0&&(Zt=vn(Ke,Le,We));let Cn=!1,wn=!1,sr=!1;const zn=Zt.getUniforms(),ur=St.uniforms;if(ne.useProgram(Zt.program)&&(Cn=!0,wn=!0,sr=!0),Ke.id!==T&&(T=Ke.id,wn=!0),Cn||_!==ae){ne.buffers.depth.getReversed()?(re.copy(ae.projectionMatrix),sHe(re),aHe(re),zn.setValue(ee,"projectionMatrix",re)):zn.setValue(ee,"projectionMatrix",ae.projectionMatrix),zn.setValue(ee,"viewMatrix",ae.matrixWorldInverse);const gi=zn.map.cameraPosition;gi!==void 0&&gi.setValue(ee,pe.setFromMatrixPosition(ae.matrixWorld)),me.logarithmicDepthBuffer&&zn.setValue(ee,"logDepthBufFC",2/(Math.log(ae.far+1)/Math.LN2)),(Ke.isMeshPhongMaterial||Ke.isMeshToonMaterial||Ke.isMeshLambertMaterial||Ke.isMeshBasicMaterial||Ke.isMeshStandardMaterial||Ke.isShaderMaterial)&&zn.setValue(ee,"isOrthographic",ae.isOrthographicCamera===!0),_!==ae&&(_=ae,wn=!0,sr=!0)}if(We.isSkinnedMesh){zn.setOptional(ee,We,"bindMatrix"),zn.setOptional(ee,We,"bindMatrixInverse");const Hn=We.skeleton;Hn&&(Hn.boneTexture===null&&Hn.computeBoneTexture(),zn.setValue(ee,"boneTexture",Hn.boneTexture,Q))}We.isBatchedMesh&&(zn.setOptional(ee,We,"batchingTexture"),zn.setValue(ee,"batchingTexture",We._matricesTexture,Q),zn.setOptional(ee,We,"batchingIdTexture"),zn.setValue(ee,"batchingIdTexture",We._indirectTexture,Q),zn.setOptional(ee,We,"batchingColorTexture"),We._colorsTexture!==null&&zn.setValue(ee,"batchingColorTexture",We._colorsTexture,Q));const mo=et.morphAttributes;if((mo.position!==void 0||mo.normal!==void 0||mo.color!==void 0)&&Ve.update(We,et,Zt),(wn||St.receiveShadow!==We.receiveShadow)&&(St.receiveShadow=We.receiveShadow,zn.setValue(ee,"receiveShadow",We.receiveShadow)),Ke.isMeshGouraudMaterial&&Ke.envMap!==null&&(ur.envMap.value=Wt,ur.flipEnvMap.value=Wt.isCubeTexture&&Wt.isRenderTargetTexture===!1?-1:1),Ke.isMeshStandardMaterial&&Ke.envMap===null&&Le.environment!==null&&(ur.envMapIntensity.value=Le.environmentIntensity),wn&&(zn.setValue(ee,"toneMappingExposure",S.toneMappingExposure),St.needsLights&&hr(ur,sr),wt&&Ke.fog===!0&&ke.refreshFogUniforms(ur,wt),ke.refreshMaterialUniforms(ur,Ke,j,H,g.state.transmissionRenderTarget[ae.id]),TE.upload(ee,Wn(St),ur,Q)),Ke.isShaderMaterial&&Ke.uniformsNeedUpdate===!0&&(TE.upload(ee,Wn(St),ur,Q),Ke.uniformsNeedUpdate=!1),Ke.isSpriteMaterial&&zn.setValue(ee,"center",We.center),zn.setValue(ee,"modelViewMatrix",We.modelViewMatrix),zn.setValue(ee,"normalMatrix",We.normalMatrix),zn.setValue(ee,"modelMatrix",We.matrixWorld),Ke.isShaderMaterial||Ke.isRawShaderMaterial){const Hn=Ke.uniformsGroups;for(let gi=0,Yo=Hn.length;gi<Yo;gi++){const Ni=Hn[gi];Fe.update(Ni,Zt),Fe.bind(Ni,Zt)}}return Zt}function hr(ae,Le){ae.ambientLightColor.needsUpdate=Le,ae.lightProbe.needsUpdate=Le,ae.directionalLights.needsUpdate=Le,ae.directionalLightShadows.needsUpdate=Le,ae.pointLights.needsUpdate=Le,ae.pointLightShadows.needsUpdate=Le,ae.spotLights.needsUpdate=Le,ae.spotLightShadows.needsUpdate=Le,ae.rectAreaLights.needsUpdate=Le,ae.hemisphereLights.needsUpdate=Le}function Jn(ae){return ae.isMeshLambertMaterial||ae.isMeshToonMaterial||ae.isMeshPhongMaterial||ae.isMeshStandardMaterial||ae.isShadowMaterial||ae.isShaderMaterial&&ae.lights===!0}this.getActiveCubeFace=function(){return k},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(ae,Le,et){const Ke=ge.get(ae);Ke.__autoAllocateDepthBuffer=ae.resolveDepthBuffer===!1,Ke.__autoAllocateDepthBuffer===!1&&(Ke.__useRenderToTexture=!1),ge.get(ae.texture).__webglTexture=Le,ge.get(ae.depthTexture).__webglTexture=Ke.__autoAllocateDepthBuffer?void 0:et,Ke.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(ae,Le){const et=ge.get(ae);et.__webglFramebuffer=Le,et.__useDefaultFramebuffer=Le===void 0};const xn=ee.createFramebuffer();this.setRenderTarget=function(ae,Le=0,et=0){M=ae,k=Le,P=et;let Ke=!0,We=null,wt=!1,kt=!1;if(ae){const Wt=ge.get(ae);if(Wt.__useDefaultFramebuffer!==void 0)ne.bindFramebuffer(ee.FRAMEBUFFER,null),Ke=!1;else if(Wt.__webglFramebuffer===void 0)Q.setupRenderTarget(ae);else if(Wt.__hasExternalTextures)Q.rebindTextures(ae,ge.get(ae.texture).__webglTexture,ge.get(ae.depthTexture).__webglTexture);else if(ae.depthBuffer){const cn=ae.depthTexture;if(Wt.__boundDepthTexture!==cn){if(cn!==null&&ge.has(cn)&&(ae.width!==cn.image.width||ae.height!==cn.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Q.setupDepthRenderbuffer(ae)}}const mn=ae.texture;(mn.isData3DTexture||mn.isDataArrayTexture||mn.isCompressedArrayTexture)&&(kt=!0);const gn=ge.get(ae).__webglFramebuffer;ae.isWebGLCubeRenderTarget?(Array.isArray(gn[Le])?We=gn[Le][et]:We=gn[Le],wt=!0):ae.samples>0&&Q.useMultisampledRTT(ae)===!1?We=ge.get(ae).__webglMultisampledFramebuffer:Array.isArray(gn)?We=gn[et]:We=gn,E.copy(ae.viewport),R.copy(ae.scissor),F=ae.scissorTest}else E.copy($).multiplyScalar(j).floor(),R.copy(K).multiplyScalar(j).floor(),F=G;if(et!==0&&(We=xn),ne.bindFramebuffer(ee.FRAMEBUFFER,We)&&Ke&&ne.drawBuffers(ae,We),ne.viewport(E),ne.scissor(R),ne.setScissorTest(F),wt){const Wt=ge.get(ae.texture);ee.framebufferTexture2D(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Wt.__webglTexture,et)}else if(kt){const Wt=ge.get(ae.texture),mn=Le;ee.framebufferTextureLayer(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0,Wt.__webglTexture,et,mn)}else if(ae!==null&&et!==0){const Wt=ge.get(ae.texture);ee.framebufferTexture2D(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_2D,Wt.__webglTexture,et)}T=-1},this.readRenderTargetPixels=function(ae,Le,et,Ke,We,wt,kt){if(!(ae&&ae.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Mt=ge.get(ae).__webglFramebuffer;if(ae.isWebGLCubeRenderTarget&&kt!==void 0&&(Mt=Mt[kt]),Mt){ne.bindFramebuffer(ee.FRAMEBUFFER,Mt);try{const Wt=ae.texture,mn=Wt.format,gn=Wt.type;if(!me.textureFormatReadable(mn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!me.textureTypeReadable(gn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Le>=0&&Le<=ae.width-Ke&&et>=0&&et<=ae.height-We&&ee.readPixels(Le,et,Ke,We,st.convert(mn),st.convert(gn),wt)}finally{const Wt=M!==null?ge.get(M).__webglFramebuffer:null;ne.bindFramebuffer(ee.FRAMEBUFFER,Wt)}}},this.readRenderTargetPixelsAsync=function(ae,Le,et,Ke,We,wt,kt){return te(this,null,function*(){if(!(ae&&ae.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Mt=ge.get(ae).__webglFramebuffer;if(ae.isWebGLCubeRenderTarget&&kt!==void 0&&(Mt=Mt[kt]),Mt)if(Le>=0&&Le<=ae.width-Ke&&et>=0&&et<=ae.height-We){ne.bindFramebuffer(ee.FRAMEBUFFER,Mt);const Wt=ae.texture,mn=Wt.format,gn=Wt.type;if(!me.textureFormatReadable(mn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!me.textureTypeReadable(gn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const cn=ee.createBuffer();ee.bindBuffer(ee.PIXEL_PACK_BUFFER,cn),ee.bufferData(ee.PIXEL_PACK_BUFFER,wt.byteLength,ee.STREAM_READ),ee.readPixels(Le,et,Ke,We,st.convert(mn),st.convert(gn),0);const un=M!==null?ge.get(M).__webglFramebuffer:null;ne.bindFramebuffer(ee.FRAMEBUFFER,un);const $n=ee.fenceSync(ee.SYNC_GPU_COMMANDS_COMPLETE,0);return ee.flush(),yield oHe(ee,$n,4),ee.bindBuffer(ee.PIXEL_PACK_BUFFER,cn),ee.getBufferSubData(ee.PIXEL_PACK_BUFFER,0,wt),ee.deleteBuffer(cn),ee.deleteSync($n),wt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")})},this.copyFramebufferToTexture=function(ae,Le=null,et=0){const Ke=Math.pow(2,-et),We=Math.floor(ae.image.width*Ke),wt=Math.floor(ae.image.height*Ke),kt=Le!==null?Le.x:0,Mt=Le!==null?Le.y:0;Q.setTexture2D(ae,0),ee.copyTexSubImage2D(ee.TEXTURE_2D,et,0,0,kt,Mt,We,wt),ne.unbindTexture()};const Te=ee.createFramebuffer(),Je=ee.createFramebuffer();this.copyTextureToTexture=function(ae,Le,et=null,Ke=null,We=0,wt=null){wt===null&&(We!==0?(AE("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),wt=We,We=0):wt=0);let kt,Mt,Wt,mn,gn,cn,un,$n,br;const _e=ae.isCompressedTexture?ae.mipmaps[wt]:ae.image;if(et!==null)kt=et.max.x-et.min.x,Mt=et.max.y-et.min.y,Wt=et.isBox3?et.max.z-et.min.z:1,mn=et.min.x,gn=et.min.y,cn=et.isBox3?et.min.z:0;else{const mo=Math.pow(2,-We);kt=Math.floor(_e.width*mo),Mt=Math.floor(_e.height*mo),ae.isDataArrayTexture?Wt=_e.depth:ae.isData3DTexture?Wt=Math.floor(_e.depth*mo):Wt=1,mn=0,gn=0,cn=0}Ke!==null?(un=Ke.x,$n=Ke.y,br=Ke.z):(un=0,$n=0,br=0);const at=st.convert(Le.format),St=st.convert(Le.type);let Dt;Le.isData3DTexture?(Q.setTexture3D(Le,0),Dt=ee.TEXTURE_3D):Le.isDataArrayTexture||Le.isCompressedArrayTexture?(Q.setTexture2DArray(Le,0),Dt=ee.TEXTURE_2D_ARRAY):(Q.setTexture2D(Le,0),Dt=ee.TEXTURE_2D),ee.pixelStorei(ee.UNPACK_FLIP_Y_WEBGL,Le.flipY),ee.pixelStorei(ee.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Le.premultiplyAlpha),ee.pixelStorei(ee.UNPACK_ALIGNMENT,Le.unpackAlignment);const Nt=ee.getParameter(ee.UNPACK_ROW_LENGTH),Zt=ee.getParameter(ee.UNPACK_IMAGE_HEIGHT),Cn=ee.getParameter(ee.UNPACK_SKIP_PIXELS),wn=ee.getParameter(ee.UNPACK_SKIP_ROWS),sr=ee.getParameter(ee.UNPACK_SKIP_IMAGES);ee.pixelStorei(ee.UNPACK_ROW_LENGTH,_e.width),ee.pixelStorei(ee.UNPACK_IMAGE_HEIGHT,_e.height),ee.pixelStorei(ee.UNPACK_SKIP_PIXELS,mn),ee.pixelStorei(ee.UNPACK_SKIP_ROWS,gn),ee.pixelStorei(ee.UNPACK_SKIP_IMAGES,cn);const zn=ae.isDataArrayTexture||ae.isData3DTexture,ur=Le.isDataArrayTexture||Le.isData3DTexture;if(ae.isDepthTexture){const mo=ge.get(ae),Hn=ge.get(Le),gi=ge.get(mo.__renderTarget),Yo=ge.get(Hn.__renderTarget);ne.bindFramebuffer(ee.READ_FRAMEBUFFER,gi.__webglFramebuffer),ne.bindFramebuffer(ee.DRAW_FRAMEBUFFER,Yo.__webglFramebuffer);for(let Ni=0;Ni<Wt;Ni++)zn&&(ee.framebufferTextureLayer(ee.READ_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ge.get(ae).__webglTexture,We,cn+Ni),ee.framebufferTextureLayer(ee.DRAW_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ge.get(Le).__webglTexture,wt,br+Ni)),ee.blitFramebuffer(mn,gn,kt,Mt,un,$n,kt,Mt,ee.DEPTH_BUFFER_BIT,ee.NEAREST);ne.bindFramebuffer(ee.READ_FRAMEBUFFER,null),ne.bindFramebuffer(ee.DRAW_FRAMEBUFFER,null)}else if(We!==0||ae.isRenderTargetTexture||ge.has(ae)){const mo=ge.get(ae),Hn=ge.get(Le);ne.bindFramebuffer(ee.READ_FRAMEBUFFER,Te),ne.bindFramebuffer(ee.DRAW_FRAMEBUFFER,Je);for(let gi=0;gi<Wt;gi++)zn?ee.framebufferTextureLayer(ee.READ_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,mo.__webglTexture,We,cn+gi):ee.framebufferTexture2D(ee.READ_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_2D,mo.__webglTexture,We),ur?ee.framebufferTextureLayer(ee.DRAW_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,Hn.__webglTexture,wt,br+gi):ee.framebufferTexture2D(ee.DRAW_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_2D,Hn.__webglTexture,wt),We!==0?ee.blitFramebuffer(mn,gn,kt,Mt,un,$n,kt,Mt,ee.COLOR_BUFFER_BIT,ee.NEAREST):ur?ee.copyTexSubImage3D(Dt,wt,un,$n,br+gi,mn,gn,kt,Mt):ee.copyTexSubImage2D(Dt,wt,un,$n,mn,gn,kt,Mt);ne.bindFramebuffer(ee.READ_FRAMEBUFFER,null),ne.bindFramebuffer(ee.DRAW_FRAMEBUFFER,null)}else ur?ae.isDataTexture||ae.isData3DTexture?ee.texSubImage3D(Dt,wt,un,$n,br,kt,Mt,Wt,at,St,_e.data):Le.isCompressedArrayTexture?ee.compressedTexSubImage3D(Dt,wt,un,$n,br,kt,Mt,Wt,at,_e.data):ee.texSubImage3D(Dt,wt,un,$n,br,kt,Mt,Wt,at,St,_e):ae.isDataTexture?ee.texSubImage2D(ee.TEXTURE_2D,wt,un,$n,kt,Mt,at,St,_e.data):ae.isCompressedTexture?ee.compressedTexSubImage2D(ee.TEXTURE_2D,wt,un,$n,_e.width,_e.height,at,_e.data):ee.texSubImage2D(ee.TEXTURE_2D,wt,un,$n,kt,Mt,at,St,_e);ee.pixelStorei(ee.UNPACK_ROW_LENGTH,Nt),ee.pixelStorei(ee.UNPACK_IMAGE_HEIGHT,Zt),ee.pixelStorei(ee.UNPACK_SKIP_PIXELS,Cn),ee.pixelStorei(ee.UNPACK_SKIP_ROWS,wn),ee.pixelStorei(ee.UNPACK_SKIP_IMAGES,sr),wt===0&&Le.generateMipmaps&&ee.generateMipmap(Dt),ne.unbindTexture()},this.copyTextureToTexture3D=function(ae,Le,et=null,Ke=null,We=0){return AE('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(ae,Le,et,Ke,We)},this.initRenderTarget=function(ae){ge.get(ae).__webglFramebuffer===void 0&&Q.setupRenderTarget(ae)},this.initTexture=function(ae){ae.isCubeTexture?Q.setTextureCube(ae,0):ae.isData3DTexture?Q.setTexture3D(ae,0):ae.isDataArrayTexture||ae.isCompressedArrayTexture?Q.setTexture2DArray(ae,0):Q.setTexture2D(ae,0),ne.unbindTexture()},this.resetState=function(){k=0,P=0,M=null,ne.reset(),vt.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ju}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=Or._getDrawingBufferColorSpace(e),n.unpackColorSpace=Or._getUnpackColorSpace()}}class oQe{constructor(e,n){oo(this,"mesh");oo(this,"velocity");oo(this,"rotationSpeed");oo(this,"scene");oo(this,"lifespan");const r=Math.random();let i;if(r<.4){const d=.15+Math.random()*.1,f=.08+Math.random()*.06;i=new Yf(d,f)}else if(r<.7){const d=.06+Math.random()*.04;i=new Hb(d,8)}else{const d=.08+Math.random()*.04;i=new a5(d,d*1.5,3)}const o=[new Sn(16711680),new Sn(16777215),new Sn(255),new Sn(16766720),new Sn(16738740),new Sn(65280),new Sn(16729344),new Sn(9662683)],s=new Ms({color:o[Math.floor(Math.random()*o.length)],side:Ps,transparent:!0,opacity:.9});this.mesh=new Dn(i,s);const a=new qe((Math.random()-.5)*.3,Math.random()*.2,(Math.random()-.5)*.3);this.mesh.position.copy(n).add(a);const l=Math.random()*Math.PI*2,c=Math.random()*Math.PI*.3,u=.4+Math.random()*.3;this.velocity=new qe(Math.cos(l)*Math.cos(c)*u,Math.sin(c)*u+.2,Math.sin(l)*Math.cos(c)*u),this.rotationSpeed=new qe((Math.random()-.5)*.8,(Math.random()-.5)*.8,(Math.random()-.5)*.8),this.lifespan=.6,this.scene=e,e.add(this.mesh)}update(e){return this.mesh.position.add(this.velocity.clone().multiplyScalar(e)),this.mesh.rotation.x+=this.rotationSpeed.x*e,this.mesh.rotation.y+=this.rotationSpeed.y*e,this.mesh.rotation.z+=this.rotationSpeed.z*e,this.velocity.y-=.4*e,this.velocity.multiplyScalar(.95),this.mesh.material instanceof ym&&(this.mesh.material.opacity-=.05),this.lifespan-=e,this.lifespan<=0||this.mesh.position.y<-2?(this.scene.remove(this.mesh),!0):!1}}class RW{constructor(e,n){oo(this,"mesh");oo(this,"speed");oo(this,"scene");console.log("Creating cloud at position:",n);const r=new Zl,i=()=>{const a=.92+Math.random()*.08;return new Sn(a,a,a)},o=Math.floor(Math.random()*4);o===0?this.createFaceAndEars(r,i):o===1?this.createCumulusCloud(r,i):o===2?this.createStretchedCloud(r,i):this.createPuffyCloud(r,i),this.mesh=r,this.mesh.position.copy(n);const s=.75+Math.random()*.5;this.mesh.scale.set(s,s,s),this.speed=.003+Math.random()*.004,this.scene=e,e.add(this.mesh),console.log("Added cloud to scene at",this.mesh.position)}createFaceAndEars(e,n){const r=new Xs(.8,16,16),i=new Ms({color:n()}),o=new Dn(r,i);o.scale.set(.9,.9,.9),e.add(o),[{x:-1,y:.3,z:0},{x:1,y:.3,z:0},{x:0,y:.5,z:0}].forEach(a=>{const l=new Ms({color:n()}),c=new Dn(r,l);c.position.set(a.x,a.y,a.z),c.scale.set(.6,.4,.6),e.add(c)})}createCumulusCloud(e,n){const r=new Xs(.6,16,16),i=5+Math.floor(Math.random()*3);for(let s=0;s<i;s++){const a=new Ms({color:n()}),l=new Dn(r,a),c=-1.5+s*(3/i),u=Math.random()*.4-.2,d=Math.random()*.4-.2;l.position.set(c,u,d);const f=.7+Math.random()*.6;l.scale.set(f,f*.8,f),e.add(l)}const o=2+Math.floor(Math.random()*2);for(let s=0;s<o;s++){const a=new Ms({color:n()}),l=new Dn(r,a),c=-.8+Math.random()*1.6,u=.4+Math.random()*.3,d=Math.random()*.3-.15;l.position.set(c,u,d);const f=.5+Math.random()*.4;l.scale.set(f,f,f),e.add(l)}}createStretchedCloud(e,n){const r=new Xs(.5,16,16),i=4+Math.random()*2,o=6+Math.floor(Math.random()*3);for(let s=0;s<o;s++){const a=new Ms({color:n()}),l=new Dn(r,a),c=s/(o-1),u=-i/2+c*i,d=Math.sin(c*Math.PI)*.2,f=Math.random()*.3-.15;l.position.set(u,d,f);const p=.7+Math.sin(c*Math.PI)*.5,b=(.7+Math.random()*.3)*p;l.scale.set(b,b*.8,b),e.add(l)}}createPuffyCloud(e,n){const r=new Xs(.8,16,16),i=new Ms({color:n()}),o=new Dn(r,i);e.add(o);const s=2+Math.floor(Math.random()*2);for(let a=0;a<s;a++){const l=new Ms({color:n()}),c=new Dn(r,l),u=Math.random()*Math.PI*2,d=.6+Math.random()*.4,f=Math.cos(u)*d,p=Math.random()*.6-.3,b=Math.sin(u)*d*.5;c.position.set(f,p,b);const v=.6+Math.random()*.4;c.scale.set(v,v,v),e.add(c)}}update(){this.mesh.position.x+=this.speed,this.mesh.position.x>15&&(this.mesh.position.x=-15,console.log("Cloud reset to position:",this.mesh.position))}}const sQe=A.forwardRef(({gameActive:t,onMoleHit:e,config:n,onMolePopUp:r},i)=>{const o=A.useRef(null),s=A.useRef(),a=A.useRef(),l=A.useRef(),c=A.useRef([]),u=A.useRef(),d=A.useRef([]),f=A.useRef([]),p=A.useRef(new GD),b=A.useRef(Date.now());A.useEffect(()=>{const _=document.createElement("link");_.rel="stylesheet",_.href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&display=swap",document.head.appendChild(_);const E=document.createElement("div");return E.style.fontFamily='"Comic Neue", sans-serif',E.style.position="absolute",E.style.visibility="hidden",E.innerText="Preload Comic Neue Font",document.body.appendChild(E),()=>{document.body.removeChild(E)}},[]);const v=()=>{const _=n.richCategories&&Array.isArray(n.richCategories);let E=[],R=[],F="";if(_){const N=n.richCategories;console.log("Using rich text categories:",N);const U=N[0];F=U.title,E=U.items.map(H=>H.content||H.text||"").filter(H=>H.trim().length>0),R=N.slice(1).flatMap(H=>(console.log("Getting words from other rich category:",H.title),H.items.map(j=>j.content||j.text||"").filter(j=>j.trim().length>0))),console.log("Rich text words - Point generating:",E),console.log("Rich text words - Other categories:",R)}else{console.log("Using legacy categories format");const N=n.categories[0];E=N.words,F=N.title,R=n.categories.slice(1).flatMap(U=>(console.log("Getting words from other legacy category:",U.title),U.words))}if(Math.random()<.5&&E.length>0){const N=E[Math.floor(Math.random()*E.length)];return console.log("Selected point-generating word:",N,"from category:",F),{word:N,isCorrect:!0}}else if(R.length>0){const N=R[Math.floor(Math.random()*R.length)];return console.log("Selected non-point-generating word:",N),{word:N,isCorrect:!1}}else if(E.length>0){const N=E[Math.floor(Math.random()*E.length)];return console.log("Fallback: using point-generating word as incorrect:",N),{word:N,isCorrect:!1}}else return console.log("No words available, using fallback"),{word:"word",isCorrect:!0}},m=(_,E)=>{const R=_.children.find(F=>F.userData&&F.userData.isTextPlane);if(R&&R.material instanceof Ms){let F=E,L=!1,N={bold:!1,italic:!1,underline:!1,superscript:!1,subscript:!1},U="",H="",j="",z="",q="",$="";if(typeof E=="string"&&E.includes("<"))if(L=!0,console.log("Processing rich text for mole display:",E),N.bold=E.includes("<strong>")||E.includes("<b>"),N.italic=E.includes("<em>")||E.includes("<i>"),N.underline=E.includes("<u>")&&E.includes("</u>"),N.superscript=E.includes("<sup>")&&E.includes("</sup>"),N.subscript=E.includes("<sub>")&&E.includes("</sub>"),console.log("Detected text styles:",N,"Display text:",F),console.log("Raw HTML being processed:",E),N.superscript||N.subscript){if(console.log("Processing super/subscript text:",E),N.superscript){const pe=E.match(/^(.*?)<sup>(.*?)<\/sup>(.*)$/);if(console.log("Superscript regex match:",pe),pe)z=pe[1].replace(/<[^>]*>/g,""),q=pe[2],$=pe[3].replace(/<[^>]*>/g,""),U=z+$,H=q,F=U,console.log("Extracted superscript parts:",{beforeScript:z,scriptText:q,afterScript:$,mainText:U});else{console.log("Superscript regex failed, falling back to plain text extraction");const ce=document.createElement("div");ce.innerHTML=E,F=ce.textContent||ce.innerText||E}}if(N.subscript){const pe=E.match(/^(.*?)<sub>(.*?)<\/sub>(.*)$/);if(console.log("Subscript regex match:",pe),pe)z=pe[1].replace(/<[^>]*>/g,""),q=pe[2],$=pe[3].replace(/<[^>]*>/g,""),U=z+$,j=q,F=U,console.log("Extracted subscript parts:",{beforeScript:z,scriptText:q,afterScript:$,mainText:U});else{console.log("Subscript regex failed, falling back to plain text extraction");const ce=document.createElement("div");ce.innerHTML=E,F=ce.textContent||ce.innerText||E}}console.log("Final parsed text parts:",{beforeScript:z,scriptText:q,afterScript:$,mainText:U,superText:H,subText:j,displayText:F})}else{const pe=document.createElement("div");pe.innerHTML=E,F=pe.textContent||pe.innerText||E}const K=document.createElement("canvas"),G=K.getContext("2d");if(!G)return;if(K.width=1024,K.height=1024,G.clearRect(0,0,K.width,K.height),!document.querySelector('link[href*="Comic+Neue"]')){const pe=document.createElement("link");pe.rel="stylesheet",pe.href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap",document.head.appendChild(pe)}let Y=Math.min(240,1e3/F.length);G.imageSmoothingEnabled=!0,G.imageSmoothingQuality="high";let J=N.bold?"bold":"normal",V=N.italic?"italic":"normal";G.font=`${V} ${J} ${Y}px "Comic Neue", "Comic Sans MS", sans-serif`,G.textAlign="center",G.textBaseline="middle",G.fillStyle="#000000";let re=K.height/2;if(N.superscript&&H){console.log("RENDER CHECK - Superscript variables:",{beforeScript:z,scriptText:q,afterScript:$,superText:H}),G.font=`${V} ${J} ${Y}px "Comic Neue", "Comic Sans MS", sans-serif`,G.fillStyle="#000000";const pe=G.measureText(z||"").width,ce=G.measureText($||"").width,xe=Y*.5;G.font=`${V} ${J} ${xe}px "Comic Neue", "Comic Sans MS", sans-serif`;const Ae=G.measureText(H).width,Ee=Ae+10,ee=pe+ce+Ee;G.font=`${V} ${J} ${Y}px "Comic Neue", "Comic Sans MS", sans-serif`;const Oe=K.width/2-ee/2;if(console.log("Superscript rendering - beforeScript:",z,"afterScript:",$),console.log("Width calculations - before:",pe,"after:",ce,"script:",Ae,"spacing:",Ee,"total:",ee,"startX:",Oe),G.textAlign="left",G.textBaseline="middle",z&&(console.log("Drawing beforeScript:",z,"at position:",Oe,re),G.fillText(z,Oe,re)),$){const ne=Oe+pe+Ee;console.log("Drawing afterScript:",$,"at position:",ne,re),G.fillText($,ne,re)}G.font=`${V} ${J} ${xe}px "Comic Neue", "Comic Sans MS", sans-serif`;const le=Oe+pe+Ee/2-Ae/2,me=re-Y*.5;console.log("Drawing superscript:",H,"at position:",le,me),G.fillText(H,le,me),G.textAlign="center",G.font=`${V} ${J} ${Y}px "Comic Neue", "Comic Sans MS", sans-serif`}else if(N.subscript&&j){console.log("RENDER CHECK - Subscript variables:",{beforeScript:z,scriptText:q,afterScript:$,subText:j}),G.font=`${V} ${J} ${Y}px "Comic Neue", "Comic Sans MS", sans-serif`,G.fillStyle="#000000";const pe=G.measureText(z||"").width,ce=G.measureText($||"").width,xe=Y*.5;G.font=`${V} ${J} ${xe}px "Comic Neue", "Comic Sans MS", sans-serif`;const Ae=G.measureText(j).width,Ee=Ae+10,ee=pe+ce+Ee;G.font=`${V} ${J} ${Y}px "Comic Neue", "Comic Sans MS", sans-serif`;const Oe=K.width/2-ee/2;if(console.log("Subscript rendering - beforeScript:",z,"afterScript:",$),console.log("Width calculations - before:",pe,"after:",ce,"script:",Ae,"spacing:",Ee,"total:",ee,"startX:",Oe),G.textAlign="left",G.textBaseline="middle",z&&(console.log("Drawing beforeScript:",z,"at position:",Oe,re),G.fillText(z,Oe,re)),$){const ne=Oe+pe+Ee;console.log("Drawing afterScript:",$,"at position:",ne,re),G.fillText($,ne,re)}G.font=`${V} ${J} ${xe}px "Comic Neue", "Comic Sans MS", sans-serif`;const le=Oe+pe+Ee/2-Ae/2,me=re+Y*.4;console.log("Drawing subscript:",j,"at position:",le,me),G.fillText(j,le,me),G.textAlign="center",G.font=`${V} ${J} ${Y}px "Comic Neue", "Comic Sans MS", sans-serif`}else console.log("Drawing normal text:",F,"at position:",K.width/2,re),G.fillText(F,K.width/2,re);if(G.font=`${V} ${J} ${Y}px "Comic Neue", "Comic Sans MS", sans-serif`,N.underline){let pe,ce;if(N.superscript&&H){const Ee=G.measureText(z||"").width,ee=G.measureText($||"").width;pe=Ee+ee,ce=(K.width-pe)/2}else if(N.subscript&&j){const Ee=G.measureText(z||"").width,ee=G.measureText($||"").width;pe=Ee+ee,ce=(K.width-pe)/2}else pe=G.measureText(F).width,ce=(K.width-pe)/2;const xe=re+Y*.32,Ae=Math.max(3,Y*.03);G.fillRect(ce,xe,pe,Ae),console.log("Drew underline at Y:",xe,"thickness:",Ae)}L&&(G.fillStyle="#FFD700",G.font="24px Arial",G.fillText("",K.width-50,50)),R.material.map&&R.material.map.dispose();const fe=new wy(K);fe.minFilter=Pf,fe.magFilter=oc,fe.anisotropy=l.current?l.current.capabilities.getMaxAnisotropy():1,fe.needsUpdate=!0,R.material.map=fe,R.material.needsUpdate=!0}},g=()=>{const _=new Zl,E=new Xs(.5,32,24);E.scale(1,1.3,1);const R=new Ui({color:15127980,roughness:.8,metalness:.1}),F=new Dn(E,R);F.castShadow=!0,F.receiveShadow=!0,_.add(F);const N=(()=>{const ce=new Zl,xe=new Xs(.08,16,12),Ae=new Ui({color:16777215,roughness:.3,metalness:.2}),Ee=new Dn(xe,Ae);Ee.position.set(-.15,.36,.4),ce.add(Ee);const ee=new Dn(xe,Ae);ee.position.set(.15,.36,.4),ce.add(ee);const Oe=new Xs(.04,12,8),le=new Ui({color:0,roughness:.5,metalness:.1}),me=new Dn(Oe,le);me.position.set(-.15,.36,.47),ce.add(me);const ne=new Dn(Oe,le);return ne.position.set(.15,.36,.47),ce.add(ne),ce})();_.add(N);const U=()=>{const ce=new Zl;switch(Math.floor(Math.random()*6)){case 0:const Ae=new Sn(Math.random()>.7?16733440:Math.random()>.5?4006676:5782055),Ee=.2+Math.random()*.15,ee=new ol(.1,Ee,.4),Oe=new Ui({color:Ae,roughness:.9,metalness:.1}),le=new Dn(ee,Oe);le.position.set(0,.6,.05);const me=ee.attributes.position;for(let lt=0;lt<me.count;lt++){const Lt=me.getX(lt),nn=me.getY(lt),sn=me.getZ(lt),Ce=Lt+(Math.random()-.5)*.05,ze=sn+(Math.random()-.5)*.05;me.setXYZ(lt,Ce,nn,ze)}ee.computeVertexNormals(),ce.add(le);break;case 1:const ne=new Sn(Math.random()>.6?2692873:5782055),se=8+Math.floor(Math.random()*6);for(let lt=0;lt<se;lt++){const Lt=lt/se*Math.PI*2,nn=new Nx(.04,.02,8,6,Math.PI*1.5),sn=new Ui({color:ne,roughness:.9,metalness:.1}),Ce=new Dn(nn,sn);Ce.position.set(Math.cos(Lt)*.25,.55,Math.sin(Lt)*.25),Ce.rotation.x=Math.random()*Math.PI,Ce.rotation.y=Math.random()*Math.PI,Ce.rotation.z=Math.random()*Math.PI,ce.add(Ce)}break;case 2:const ge=new Sn(Math.random()>.5?4006676:5782055),Q=new Cf(.3,.35,.12,12),W=new Ui({color:ge,roughness:.9,metalness:.1}),ve=new Dn(Q,W);ve.position.set(0,.65,0),ce.add(ve);for(let lt=0;lt<5;lt++){const Lt=lt/5*Math.PI*2,nn=new ol(.05,.05,.05),sn=new Dn(nn,W);sn.position.set(Math.cos(Lt)*.15,.72,Math.sin(Lt)*.15),sn.rotation.x=Math.random()*Math.PI*.2,sn.rotation.y=Math.random()*Math.PI*.2,sn.rotation.z=Math.random()*Math.PI*.2,ce.add(sn)}break;case 3:const ue=new Sn(Math.random()>.7?1642503:4006676),Me=new Cf(.2,.3,.25,16,1,!1,0,Math.PI);Me.rotateX(Math.PI/2),Me.rotateY(Math.PI);const Pe=new Ui({color:ue,roughness:.8,metalness:.1}),je=new Dn(Me,Pe);je.position.set(0,.6,.2);const ke=3;for(let lt=0;lt<ke;lt++){const Lt=new Nx(.15,.05,8,12,Math.PI*.8),nn=new Dn(Lt,Pe);nn.position.set(0,.55+lt*.08,.15-lt*.05),nn.rotation.x=Math.PI/2,nn.scale.set(1.2,.7,1),ce.add(nn)}const De=new ol(.5,.18,.3);De.translate(0,-.1,0);const nt=new Dn(De,Pe);nt.position.set(0,.5,0),ce.add(je),ce.add(nt);break;case 4:const be=new Sn(Math.random()>.6?1642503:4006676),Ne=new Xs(.35,32,16,0,Math.PI*2,0,Math.PI/2),Ie=new Ui({color:be,roughness:.9,metalness:.05}),Ve=new Dn(Ne,Ie);Ve.position.set(0,.68,0),ce.add(Ve);const Ue=new Nx(.35,.04,16,32,Math.PI*2),tt=new Ui({color:be,roughness:.9,metalness:.05}),st=new Dn(Ue,tt);st.rotation.x=Math.PI/2,st.position.set(0,.51,0),ce.add(st);for(let lt=0;lt<8;lt++){const Lt=-Math.PI/4+lt/7*Math.PI*1.5,nn=.1+Math.random()*.08,sn=new ol(.08,nn,.04),Ce=new Dn(sn,Ie),ze=.35;Ce.position.set(Math.cos(Lt)*ze*.85,.55,Math.sin(Lt)*ze*.85),Ce.rotation.x=Math.PI*.45,Ce.rotation.y=-Lt,ce.add(Ce)}break;case 5:const vt=new Sn(Math.random()>.5?1642503:4006676),Fe=new Xs(.35,32,32),ct=new Ui({color:vt,roughness:1,metalness:0}),Ye=new Dn(Fe,ct);Ye.position.set(0,.68,0);const ft=Fe.attributes.position;for(let lt=0;lt<ft.count;lt++){const Lt=ft.getX(lt),nn=ft.getY(lt),sn=ft.getZ(lt),Ce=.06,ze=Lt+(Math.random()-.5)*Ce,Qe=nn+(Math.random()-.5)*Ce,gt=sn+(Math.random()-.5)*Ce;ft.setXYZ(lt,ze,Qe,gt)}Fe.computeVertexNormals();const _t=20;for(let lt=0;lt<_t;lt++){const Lt=Math.random()*Math.PI*2,nn=Math.random()*Math.PI,sn=Math.sin(nn)*Math.cos(Lt),Ce=Math.cos(nn),ze=Math.sin(nn)*Math.sin(Lt),Qe=.04+Math.random()*.04,gt=new Xs(Qe,8,8),Rt=new Dn(gt,ct),Bt=.35;Rt.position.set(sn*Bt*1.1,Ce*Bt*1.1+.68,ze*Bt*1.1),Rt.position.y>=.55&&ce.add(Rt)}ce.add(Ye);break}return ce};if(Math.random()<.7){const ce=U();_.add(ce)}const j=(()=>{const ce=document.createElement("canvas"),xe=ce.getContext("2d");return xe&&(ce.width=256,ce.height=256,xe.clearRect(0,0,ce.width,ce.height)),ce})(),z=new wy(j),q=new Ms({map:z,transparent:!0,side:Ed}),$=new Yf(.7,.7),K=new Dn($,q);K.position.set(0,.2,.48),K.userData.isFacePlane=!0,_.add(K);const G=new Yf(.9,.9),Y=document.createElement("canvas"),J=Y.getContext("2d");J&&(Y.width=512,Y.height=512,J.clearRect(0,0,Y.width,Y.height));const V=new wy(Y),re=new Ms({map:V,transparent:!0}),fe=new Dn(G,re);fe.position.set(0,0,.5),fe.userData.isTextPlane=!0,_.add(fe);const pe=(ce,xe)=>{const Ae=ce.children.find(Ee=>Ee.userData&&Ee.userData.isFacePlane);if(Ae&&Ae.material instanceof Ms&&Ae.material.map){const Ee=document.createElement("canvas"),ee=Ee.getContext("2d");if(!ee)return;switch(Ee.width=256,Ee.height=256,ee.clearRect(0,0,Ee.width,Ee.height),xe){case"neutral":ee.strokeStyle="#000000",ee.lineWidth=6,ee.beginPath(),ee.moveTo(90,150),ee.quadraticCurveTo(128,170,166,150),ee.stroke();break;case"surprised":ee.fillStyle="#000000",ee.beginPath(),ee.arc(128,160,25,0,Math.PI),ee.fill();break;case"hit":ee.strokeStyle="#000000",ee.lineWidth=6,ee.beginPath(),ee.moveTo(90,160),ee.quadraticCurveTo(128,140,166,160),ee.stroke();break;case"happy":ee.fillStyle="#FFFFFF",ee.beginPath(),ee.moveTo(85,150),ee.quadraticCurveTo(128,190,171,150),ee.quadraticCurveTo(128,170,85,150),ee.fill(),ee.strokeStyle="#000000",ee.lineWidth=4,ee.beginPath(),ee.moveTo(85,150),ee.quadraticCurveTo(128,190,171,150),ee.stroke(),ee.lineWidth=1,ee.beginPath(),ee.moveTo(128,170),ee.lineTo(128,185),ee.moveTo(108,167),ee.lineTo(108,177),ee.moveTo(148,167),ee.lineTo(148,177),ee.stroke();break}const Oe=new wy(Ee);Ae.material.map.dispose(),Ae.material.map=Oe,Ae.material.needsUpdate=!0}};return _.userData.updateExpression=pe,_.userData.updateExpression&&_.userData.updateExpression(_,"neutral"),_.userData.isMole=!0,_.rotation.x=-Math.PI*5/180,_},x=_=>{var H;if(!t)return;const E=new Kt;let R,F;_ instanceof MouseEvent?(R=_.clientX,F=_.clientY):(R=_.touches[0].clientX,F=_.touches[0].clientY);const L=(H=o.current)==null?void 0:H.getBoundingClientRect();if(!L)return;E.x=(R-L.left)/L.width*2-1,E.y=-((F-L.top)/L.height)*2+1,p.current.setFromCamera(E,a.current);const N=[];c.current.forEach(j=>{j.userData.isVisible&&j.traverse(z=>{z instanceof Dn&&N.push(z)})});const U=p.current.intersectObjects(N);if(U.length>0){let z=U[0].object;for(;z.parent&&!z.userData.isMole;)z=z.parent;z.userData.isMole&&z.userData.isVisible&&!z.userData.isHit&&(z.userData.isHit=!0,z.userData.updateExpression&&z.userData.updateExpression(z,"hit"),e(z.userData.word,z.userData.isCorrect),P(z,!1),T(z.position.clone()),setTimeout(()=>{z.userData.isVisible=!1,z.userData.isHit=!1,z.userData.updateExpression&&z.userData.updateExpression(z,"neutral")},300))}},w=()=>{if(!o.current)return()=>{};console.log("Creating scene...");const _=new kHe;s.current=_;const E=new cl(45,o.current.clientWidth/o.current.clientHeight,.1,1e3);E.position.set(0,6,8),E.lookAt(0,0,0),a.current=E;const R=new iQe({antialias:!0});R.setSize(o.current.clientWidth,o.current.clientHeight),R.shadowMap.enabled=!0,R.shadowMap.type=bte,R.setClearColor(8900331,1),o.current.appendChild(R.domElement),l.current=R;const F=new bGe(16777215,.7);_.add(F);const L=new xGe(16777215,.9);L.position.set(3,8,4),L.castShadow=!0,L.shadow.mapSize.width=1024,L.shadow.mapSize.height=1024,L.shadow.camera.near=.5,L.shadow.camera.far=20,L.shadow.camera.left=-10,L.shadow.camera.right=10,L.shadow.camera.top=10,L.shadow.camera.bottom=-10,_.add(L),f.current=[],console.log("Creating sphere-based clouds..."),[new qe(-5,2,-7),new qe(0,3,-6),new qe(5,2,-7)].forEach((z,q)=>{console.log(`Creating cloud ${q} at ${z.x}, ${z.y}, ${z.z}`);const $=new RW(_,z);f.current.push($)});for(let z=0;z<2;z++){const q=new qe(-10+Math.random()*20,2.5+Math.random()*2,-8+Math.random()*3);console.log(`Creating extra cloud at ${q.x}, ${q.y}, ${q.z}`);const $=new RW(_,q);f.current.push($)}console.log(`Created ${f.current.length} clouds`),S(_),D(_),p.current=new GD;let U=Date.now();function H(){if(!l.current)return;const z=Date.now(),q=(z-U)/1e3;U=z,f.current&&f.current.length>0?f.current.forEach(($,K)=>{$&&$.update?$.update():console.error(`Cloud ${K} is invalid:`,$)}):console.warn("No clouds to update"),d.current.forEach(($,K)=>{$.update(q),$.mesh.position.y<-5&&(_.remove($.mesh),d.current.splice(K,1))}),l.current.render(_,E),u.current=requestAnimationFrame(H),z-b.current>5e3&&(b.current=z,console.log("Camera position:",E.position),console.log("Number of clouds:",f.current.length),console.log("Scene children:",_.children.length))}H();function j(){if(!o.current||!a.current||!l.current)return;const z=o.current.clientWidth,q=o.current.clientHeight;a.current.aspect=z/q,a.current.updateProjectionMatrix(),l.current.setSize(z,q)}return window.addEventListener("resize",j),o.current.addEventListener("mousedown",x),o.current.addEventListener("touchstart",x,{passive:!0}),()=>{window.removeEventListener("resize",j),o.current&&(o.current.removeEventListener("mousedown",x),o.current.removeEventListener("touchstart",x),l.current&&o.current.removeChild(l.current.domElement)),u.current&&cancelAnimationFrame(u.current)}},S=_=>{const F=new Hb(10,96),L=.2,N=.25,U=.4,H=F.getAttribute("position"),j=F.getAttribute("uv"),z=[{centerU:.3,centerV:.7,radius:.27,color:15037299,heightMult:1.2},{centerU:.7,centerV:.6,radius:.25,color:9364626,heightMult:.8},{centerU:.2,centerV:.3,radius:.23,color:9795021,heightMult:1.4},{centerU:.6,centerV:.2,radius:.28,color:5227511,heightMult:.6},{centerU:.5,centerV:.5,radius:.18,color:16758605,heightMult:1}],q=(ce,xe,Ae)=>{const Ee=Math.sin(ce*4.7+xe*3.2)*Math.cos(xe*2.3-ce*1.9)*.1,ee=Math.sin(ce*7.5+xe*5.7)*Math.cos(xe*4.3-ce*3.1)*.05,Oe=1-Math.min(Ae*2.5,1);return(Ee+ee)*Oe},$=new ai(H.count*3,3),K=new Sn(6279520);for(let ce=0;ce<H.count;ce++){const xe=H.getX(ce),Ae=H.getY(ce),Ee=j.getX(ce),ee=j.getY(ce);if(xe===0&&Ae===0&&ce===0){H.setZ(ce,.08),$.setXYZ(ce,K.r,K.g,K.b);continue}const le=Math.sqrt(xe*xe+Ae*Ae)/10;let me=1,ne=new Sn(K);for(const ke of z){const De=Ee-ke.centerU,nt=ee-ke.centerV,be=De*De+nt*nt;if(be<ke.radius*ke.radius){const Ne=new Sn(ke.color),Ie=Math.sqrt(be),Ve=(ke.radius-Ie)/ke.radius,Ue=Math.pow(Ve,2.5);ne.r=K.r*(.6-Ue*.6)+Ne.r*Ue,ne.g=K.g*(.6-Ue*.6)+Ne.g*Ue,ne.b=K.b*(.6-Ue*.6)+Ne.b*Ue,me=1*(1-Ue)+ke.heightMult*Ue;break}}const se=Math.sin(xe*8.3+Ae*7.1)*.03+Math.cos(xe*9.8+Ae*6.3)*.02;ne.r=Math.max(0,Math.min(1,ne.r+se)),ne.g=Math.max(0,Math.min(1,ne.g+se)),ne.b=Math.max(0,Math.min(1,ne.b+se*.5)),$.setXYZ(ce,ne.r,ne.g,ne.b);const ge=L*Math.sin(N*xe)+L*Math.cos(N*Ae),Q=.05*Math.sin(xe*3+Ae*2)*Math.cos(xe-Ae)+.05*Math.cos(xe*5)*Math.sin(Ae*3),W=Math.atan2(Ae,xe),ve=Math.sin(W*8)*.5+Math.sin(W*5)*.3+Math.sin(W*3)*.2,ue=le*(.3+.7*le),Me=U*ve*ue,Pe=q(xe,Ae,le),je=(ge+Q+Me+Pe)*me;H.setZ(ce,je)}F.setAttribute("color",$),F.computeVertexNormals();const G=(ce,xe=.2)=>{const Ee=document.createElement("canvas");Ee.width=1024,Ee.height=1024;const ee=Ee.getContext("2d"),Oe=ee.createRadialGradient(1024/2,1024/2,0,1024/2,1024/2,1024*.7);Oe.addColorStop(0,"rgb(75, 52, 35)"),Oe.addColorStop(.7,"rgb(70, 47, 30)"),Oe.addColorStop(1,"rgb(65, 42, 25)"),ee.fillStyle=Oe,ee.fillRect(0,0,1024,1024);const le=/rgb\((\d+),\s*(\d+),\s*(\d+)\)/.exec(ce);let me=90,ne=160,se=60;le&&(me=parseInt(le[1]),ne=parseInt(le[2]),se=parseInt(le[3]));const ge=(Pe,je,ke)=>(Math.sin(Pe*7.13*ke+je*3.79*ke)*Math.cos(Pe*4.21*ke-je*8.11*ke)+Math.sin(Pe*2.89*ke-je*5.23*ke)*Math.cos(Pe*9.37*ke+je*1.97*ke))*.25+.5,Q=15e3;for(let Pe=0;Pe<Q;Pe++){const je=Math.random()*1024,ke=Math.random()*1024,De=1+Math.random()*3,nt=60+Math.floor(Math.random()*30),be=40+Math.floor(Math.random()*20),Ne=20+Math.floor(Math.random()*20),Ie=.2+Math.random()*.3;ee.fillStyle=`rgba(${nt}, ${be}, ${Ne}, ${Ie})`,Math.random()>.6?(ee.beginPath(),ee.arc(je,ke,De/2,0,Math.PI*2),ee.fill()):ee.fillRect(je,ke,De,De*.8)}const W=3e4,ve=[[me,ne,se],[Math.min(255,me*1.4),Math.min(255,ne*1.3),Math.min(255,se*1)],[Math.min(255,me*1),Math.min(255,ne*1.1),Math.min(255,se*.9)],[Math.min(255,me*1.35),Math.min(255,ne*1.05),Math.min(255,se*.8)]];for(let Pe=0;Pe<W;Pe++){const je=Math.random()*1024,ke=Math.random()*1024,De=je/1024,nt=ke/1024,be=ge(De,nt,1),Ne=ge(De,nt,3),Ie=ge(De,nt,7),Ve=be*.5+Ne*.3+Ie*.2;if(Ve<.4)continue;const Ue=3+Math.random()*12*Ve,tt=.5+Math.random()*1.5*Ve,st=Math.random()*Math.PI*2,vt=Math.floor(Math.random()*ve.length),Fe=ve[vt],ct=Math.max(0,Math.min(255,Fe[0]*(.9+Ve*.2))),Ye=Math.max(0,Math.min(255,Fe[1]*(.9+Ve*.2))),ft=Math.max(0,Math.min(255,Fe[2]*(.9+Ve*.2))),_t=.4+Ve*.6;ee.strokeStyle=`rgba(${Math.floor(ct)}, ${Math.floor(Ye)}, ${Math.floor(ft)}, ${_t})`,ee.lineWidth=tt;const lt=Math.random()*.5;ee.beginPath(),ee.moveTo(je,ke);const Lt=ge(De*10,nt*10,.5);if(Lt<.3)ee.lineTo(je+Math.cos(st)*Ue,ke+Math.sin(st)*Ue);else if(Lt<.6){const nn=je+Math.cos(st+lt)*(Ue*.5),sn=ke+Math.sin(st+lt)*(Ue*.5),Ce=je+Math.cos(st)*Ue,ze=ke+Math.sin(st)*Ue;ee.quadraticCurveTo(nn,sn,Ce,ze)}else{const nn=je+Math.cos(st-lt)*(Ue*.3),sn=ke+Math.sin(st-lt)*(Ue*.3),Ce=je+Math.cos(st+lt)*(Ue*.6),ze=ke+Math.sin(st+lt)*(Ue*.6),Qe=je+Math.cos(st)*Ue,gt=ke+Math.sin(st)*Ue;ee.bezierCurveTo(nn,sn,Ce,ze,Qe,gt)}ee.stroke()}const ue=80;for(let Pe=0;Pe<ue;Pe++){const je=Math.random()*1024,ke=Math.random()*1024,De=je/1024,nt=ke/1024;if(ge(De*5,nt*5,2)<.6)continue;const Ne=2+Math.random()*4,Ie=["rgba(255, 255, 180, 0.9)","rgba(255, 200, 200, 0.9)","rgba(200, 200, 255, 0.9)","rgba(255, 180, 140, 0.9)","rgba(220, 180, 255, 0.9)"];ee.fillStyle=Ie[Math.floor(Math.random()*Ie.length)],ee.beginPath(),ee.arc(je,ke,Ne/2,0,Math.PI*2),ee.fill(),ee.fillStyle="rgba(255, 220, 100, 0.95)",ee.beginPath(),ee.arc(je,ke,Ne/4,0,Math.PI*2),ee.fill()}const Me=new wy(Ee);return Me.wrapS=Ub,Me.wrapT=Ub,Me.repeat.set(5,7),Me.rotation=(Math.random()-.5)*.1,Me},Y=new Ui({vertexColors:!0,map:G("rgb(150, 225, 100)",.4),roughness:.9,metalness:0,side:Ps,flatShading:!1,wireframe:!1}),J=new Dn(F,Y);J.rotation.x=-Math.PI/2,J.position.y=-.05,J.receiveShadow=!0,_.add(J);const V=(ce,xe)=>{const le=.2*Math.sin(.25*ce)+.2*Math.cos(.25*xe),me=.05*Math.sin(ce*3+xe*2)*Math.cos(ce-xe)+.05*Math.cos(ce*5)*Math.sin(xe*3),se=Math.sqrt(ce*ce+xe*xe)/10,ge=Math.atan2(xe,ce),Q=Math.sin(ge*8)*.5+Math.sin(ge*5)*.3+Math.sin(ge*3)*.2,W=se*(.3+.7*se),ve=.4*Q*W,ue=(()=>{const De=Math.sin(ce*4.7+xe*3.2)*Math.cos(xe*2.3-ce*1.9)*.1,nt=Math.sin(ce*7.5+xe*5.7)*Math.cos(xe*4.3-ce*3.1)*.05,be=1-Math.min(se*2.5,1);return(De+nt)*be})(),Me=(ce/10+1)/2,Pe=(xe/10+1)/2;let je=1;const ke=[{centerU:.3,centerV:.7,radius:.27,color:15037299,heightMult:1.2},{centerU:.7,centerV:.6,radius:.25,color:9364626,heightMult:.8},{centerU:.2,centerV:.3,radius:.23,color:9795021,heightMult:1.4},{centerU:.6,centerV:.2,radius:.28,color:5227511,heightMult:.6},{centerU:.5,centerV:.5,radius:.18,color:16758605,heightMult:1}];for(const De of ke){const nt=Me-De.centerU,be=Pe-De.centerV,Ne=nt*nt+be*be;if(Ne<De.radius*De.radius){const Ie=Math.sqrt(Ne),Ve=(De.radius-Ie)/De.radius,Ue=Math.pow(Ve,3);je=1*(1-Ue)+De.heightMult*Ue;break}}return(le+me+ve+ue)*je},re=()=>{const ce=new Zl,xe=new ol(1,.7,1,5,4,5),Ae=xe.getAttribute("position"),Ee=new qe,ee=[];for(let W=0;W<Ae.count;W++)if(Ee.fromBufferAttribute(Ae,W),Ee.y<-.3)ee.push(new qe(Ee.x,-.35,Ee.z)),Ae.setY(W,-.35);else{const ue=(Ee.y+.35)/1.05,Me=Math.pow(ue,1.5)*.2;Ee.x+=(Math.random()-.5)*Me,Ee.y+=(Math.random()-.5)*Me*.8,Ee.z+=(Math.random()-.5)*Me,Ae.setXYZ(W,Ee.x,Ee.y,Ee.z)}xe.computeVertexNormals();const Oe=new Ui({color:8219475,roughness:.9,metalness:.1,flatShading:!0,side:Ps}),le=Math.random()*.2-.1;Oe.color.r+=le,Oe.color.g+=le,Oe.color.b+=le;const me=new Dn(xe,Oe);ce.add(me);const ne=new Cf(.6,.6,.1,12),se=new Ui({color:Oe.color,roughness:.9,metalness:.1,flatShading:!0}),ge=new Dn(ne,se);ge.position.y=-.4,ce.add(ge);for(let W=0;W<4;W++){const ve=new ol(.2+Math.random()*.15,.1+Math.random()*.1,.2+Math.random()*.15),ue=ve.getAttribute("position");for(let nt=0;nt<ue.count;nt++){const be=new qe().fromBufferAttribute(ue,nt);be.y>-.05&&(be.x+=(Math.random()-.5)*.1,be.y+=(Math.random()-.5)*.05,be.z+=(Math.random()-.5)*.1,ue.setXYZ(nt,be.x,be.y,be.z))}ve.computeVertexNormals();const Me=Math.random()*.15-.05,Pe=new Ui({color:new Sn(Oe.color).offsetHSL(0,0,Me),roughness:.9,metalness:.1,flatShading:!0}),je=new Dn(ve,Pe),ke=Math.PI*2/4*W+(Math.random()-.5)*.5,De=.4+Math.random()*.15;je.position.set(Math.cos(ke)*De,-.3-Math.random()*.1,Math.sin(ke)*De),je.rotation.set(Math.random()*Math.PI,Math.random()*Math.PI,Math.random()*Math.PI),ce.add(je)}const Q=()=>{const W=new Xs(.25,7,5),ve=W.getAttribute("position");for(let Pe=0;Pe<ve.count;Pe++){const je=new qe().fromBufferAttribute(ve,Pe);je.y*=.6,je.y>0&&(je.x+=(Math.random()-.5)*.2,je.z+=(Math.random()-.5)*.2),ve.setXYZ(Pe,je.x,je.y,je.z)}W.computeVertexNormals();const ue=Math.random()*.1-.05,Me=new Ui({color:new Sn(Oe.color).offsetHSL(0,0,ue),roughness:.9,metalness:.1,flatShading:!0});return new Dn(W,Me)};if(Math.random()>.3){const W=Q();W.position.set((Math.random()-.5)*.3,.1+Math.random()*.1,(Math.random()-.5)*.3),W.scale.set(.7+Math.random()*.5,.4+Math.random()*.3,.7+Math.random()*.5),W.rotation.y=Math.random()*Math.PI*2,ce.add(W)}return ce.traverse(W=>{W instanceof Dn&&(W.castShadow=!0,W.receiveShadow=!0)}),ce.userData.isMesh=!0,ce.userData.geometry=xe,ce.userData.material=Oe,ce},fe=(ce,xe,Ae,Ee,ee=1)=>{const Oe=4+Math.floor(Math.random()*3),le=new Zl;ce.add(le);const me=Math.cos(xe)*Ae,ne=Math.sin(xe)*Ae,se=Ee(me,ne),ge=1.2*ee,Q=new Cf(ge,ge,.2,8),W=new Ui({color:7166787,roughness:1,metalness:0,flatShading:!0}),ve=new Dn(Q,W);ve.position.set(me,se-.1,ne),le.add(ve);const ue=re();ue.position.set(me,se,ne);const Me=(1.2+Math.random()*.6)*ee;ue.scale.set(Me*(1+Math.random()*.2),Me*(.5+Math.random()*.2),Me*(1+Math.random()*.2)),ue.rotation.x=Math.random()*Math.PI/4,ue.rotation.y=Math.random()*Math.PI*2,ue.rotation.z=Math.random()*Math.PI/4,le.add(ue);const Pe=()=>{const ke=new ol(1,.15,1),De=ke.getAttribute("position");for(let Ne=0;Ne<De.count;Ne++)De.getY(Ne)>0&&(De.setX(Ne,De.getX(Ne)+(Math.random()-.5)*.1),De.setY(Ne,De.getY(Ne)+(Math.random()-.5)*.05),De.setZ(Ne,De.getZ(Ne)+(Math.random()-.5)*.1));ke.computeVertexNormals();const nt=Math.random()*.1-.05,be=new Ui({color:new Sn(8219475).offsetHSL(0,0,nt),roughness:.9,metalness:.1,flatShading:!0,side:Ps});return new Dn(ke,be)},je=2+Math.floor(Math.random()*2);for(let ke=0;ke<je;ke++){const De=Pe(),nt=Math.random()*Math.PI*2,be=ge*.7,Ne=me+Math.cos(nt)*be,Ie=ne+Math.sin(nt)*be,Ve=Ee(Ne,Ie);De.position.set(Ne,Ve-.05,Ie),De.rotation.set((Math.random()-.5)*.2,Math.random()*Math.PI*2,(Math.random()-.5)*.2);const Ue=.8+Math.random()*.4;De.scale.set(Ue,1,Ue),le.add(De)}for(let ke=1;ke<Oe;ke++){const De=re(),nt=Math.PI*2/(Oe-1)*(ke-1),be=xe+nt+(Math.random()-.5)*.4,Ne=(Math.random()-.3)*.7,Ie=ge*(.7+Ne),Ve=me+Math.cos(be)*Ie,Ue=ne+Math.sin(be)*Ie;Ee(Ve,Ue);const tt=(Math.random()-.3)*.15;De.position.set(Ve,se+tt,Ue);const st=.6+Math.random()*.5;if(De.scale.set(st*(.9+Math.random()*.3),st*(.4+Math.random()*.2),st*(.9+Math.random()*.3)),De.rotation.x=(Math.random()-.5)*Math.PI/4,De.rotation.y=Math.random()*Math.PI*2,De.rotation.z=(Math.random()-.5)*Math.PI/4,le.add(De),ke%2===0){const vt=new qe(me-Ve,0,ne-Ue).normalize().multiplyScalar(.3+Math.random()*.4);De.position.x+=vt.x,De.position.z+=vt.z}}return le},pe=(ce,xe)=>{[{angle:Math.PI*1.25,distance:9.8,scale:1},{angle:Math.PI*1.45,distance:9.5,scale:1.5},{angle:Math.PI*1.65,distance:9.8,scale:1}].forEach(Ee=>{fe(ce,Ee.angle,Ee.distance,xe,Ee.scale)})};_.add(J);for(let ce=0;ce<2;ce++){const xe=re();let Ae=!1,Ee=new qe,ee=0,Oe=0;for(;!Ae&&Oe<20;){Oe++;const me=[{angle:Math.PI/4+Math.PI/2*ce,dist:7+ce%2},{angle:Math.PI/4+Math.PI/3*ce,dist:6},{angle:Math.random()*Math.PI+Math.PI/2,dist:7.5+Math.random()*1.5}][Math.min(Oe%3,2)],ne=me.angle,se=me.dist,ge=Math.cos(ne)*se,Q=Math.sin(ne)*se;ee=V(ge,Q),Ee.set(ge,0,Q);const W=[{x:-2.5,z:-2},{x:2.5,z:-2},{x:-3,z:1},{x:3,z:1}];let ve=!1;for(const Me of W)if(Math.sqrt(Math.pow(ge-Me.x,2)+Math.pow(Q-Me.z,2))<2.5){ve=!0;break}if(!ve&&ce>0)for(let Me=0;Me<ce;Me++){const Pe=_.children.find(je=>je.userData&&je.userData.isRock&&je.userData.rockIndex===Me);if(Pe&&Math.sqrt(Math.pow(ge-Pe.position.x,2)+Math.pow(Q-Pe.position.z,2))<2){ve=!0;break}}const ue=Math.sqrt(ge*ge+Q*Q);Ae=!ve&&ue>3}if(Ae){xe.position.set(Ee.x,ee-.08,Ee.z);const le=.5+Math.random()*.7;xe.scale.set(le*(.8+Math.random()*.4),le*(.6+Math.random()*.3),le*(.8+Math.random()*.4)),xe.rotation.set(Math.random()*Math.PI*2,Math.random()*Math.PI*2,Math.random()*Math.PI*2),xe.userData.isRock=!0,xe.userData.rockIndex=ce,xe.castShadow=!0,xe.receiveShadow=!0,console.log(`Rock ${ce} placed at (${Ee.x.toFixed(2)}, ${ee.toFixed(2)}, ${Ee.z.toFixed(2)})`),_.add(xe)}}pe(_,V)},D=_=>{c.current=[];const E=[{x:-2.5,z:-2,position:"backLeft"},{x:2.5,z:-2,position:"backRight"},{x:-3,z:1,position:"frontLeft"},{x:3,z:1,position:"frontRight"}],R={},F=E.map(L=>{const N=g();N.position.set(L.x,-1.5,L.z);const U=new qe(0,7,7),H=new qe;if(L.z<0){H.subVectors(U,new qe(L.x,0,L.z)).normalize();const j=Math.atan2(H.x,H.z);R[L.position]=j}return{mole:N,position:L}});console.log(`Creating exactly ${E.length} holes and moles`),E.forEach((L,N)=>{const q=L.x,$=L.z,K=.2*Math.sin(.25*q)+.2*Math.cos(.25*$),G=.05*Math.sin(q*3+$*2)*Math.cos(q-$)+.05*Math.cos(q*5)*Math.sin($*3),J=Math.sqrt(q*q+$*$)/10,V=Math.atan2($,q),re=Math.sin(V*8)*.5+Math.sin(V*5)*.3+Math.sin(V*3)*.2,fe=Math.pow(J,2.5),pe=.4*re*fe,ce=(q/10+1)/2,xe=($/10+1)/2;let Ae=1;const Ee=[{centerU:.3,centerV:.7,radius:.25,color:15037299,heightMult:1.2},{centerU:.7,centerV:.6,radius:.2,color:8505220,heightMult:.8},{centerU:.2,centerV:.3,radius:.2,color:9795021,heightMult:1.4},{centerU:.6,centerV:.2,radius:.25,color:5227511,heightMult:.6},{centerU:.5,centerV:.5,radius:.15,color:16758605,heightMult:1}];for(const Q of Ee){const W=ce-Q.centerU,ve=xe-Q.centerV,ue=W*W+ve*ve;if(ue<Q.radius*Q.radius){const Me=Math.sqrt(ue),Pe=(Q.radius-Me)/Q.radius,je=Math.pow(Pe,3);Ae=1*(1-je)+Q.heightMult*je;break}}const ee=(K+G+pe)*Ae,Oe=k();Oe.position.set(L.x,ee-.01,L.z);const le=.2*.25*Math.cos(.25*q),me=-.2*.25*Math.sin(.25*$);if(Math.abs(le)>.05||Math.abs(me)>.05){const Q=new qe(-le,1,-me).normalize(),W=Math.atan2(Q.z,Q.y),ve=-Math.atan2(Q.x,Q.y);Oe.rotation.x=-Math.PI/2+W,Oe.rotation.z=ve}_.add(Oe);const{mole:ne}=F[N];let se=0;L.position==="frontLeft"?se=R.backLeft||0:L.position==="frontRight"?se=R.backRight||0:se=R[L.position]||0,ne.rotation.y=se,ne.visible=!1,ne.userData.isUp=!1,ne.userData.isMoving=!1;const ge=ee-1.3;ne.userData.holePosition={x:L.x,y:ge,z:L.z},ne.position.y=ge,ne.userData.centerRotation=se,ne.userData.terrainHeight=ee,_.add(ne),c.current.push(ne)}),console.log(`Setup complete. Total moles: ${c.current.length}`)},k=()=>{const _=new Zl,E=(ce,xe,Ae)=>{const Ee=new c5;for(let ee=0;ee<=Ae;ee++){const Oe=ee/Ae*Math.PI*2,me=(ce+(Math.random()*2-1)*xe)*(1+.1*Math.sin(Oe*3)+.05*Math.sin(Oe*5)),ne=Math.cos(Oe)*me,se=Math.sin(Oe)*me*.7;ee===0?Ee.moveTo(ne,se):Ee.lineTo(ne,se)}return Ee.closePath(),Ee},R={steps:2,depth:.4,bevelEnabled:!0,bevelThickness:.06,bevelSize:.06,bevelOffset:0,bevelSegments:3},F=E(1.3,.15,12),L=new Ox(F),N=new Ui({color:9127187,roughness:.8,metalness:.1}),U=new Dn(L,N);U.rotation.x=-Math.PI/2,U.position.y=.01,U.receiveShadow=!0,_.add(U);const H=E(1.1,.1,12),j=new u5(H,R),z=new Ui({color:4006676,roughness:.9,metalness:0,side:Ps}),q=new Dn(j,z);q.rotation.x=Math.PI/2,q.position.y=.015,q.receiveShadow=!0,_.add(q);const $=E(1.2,.15,12),K=new Ox($),G=new Ui({color:1706496,roughness:1,metalness:0}),Y=new Dn(K,G);Y.rotation.x=-Math.PI/2,Y.position.y=-.375,Y.receiveShadow=!0,_.add(Y);const J=E(1,.12,10),V=new Ox(J),re=new Ui({color:2759178,roughness:1,metalness:0}),fe=new Dn(V,re);fe.rotation.x=-Math.PI/2,fe.position.y=-.18,fe.receiveShadow=!0,_.add(fe);const pe=()=>{const ce=.05+Math.random()*.1;let xe;const Ae=Math.random();Ae<.4?(xe=new Xs(ce,8,6),xe.scale(1,.3,1)):Ae<.7?xe=new Cf(ce*.8,ce,ce*.3,8,1,!1):(xe=new d5(ce*.7,0),xe.scale(1,.4,1));const Ee=xe.getAttribute("position"),ee=new qe;for(let se=0;se<Ee.count;se++)ee.fromBufferAttribute(Ee,se),ee.x+=(Math.random()-.5)*.02,ee.y+=(Math.random()-.5)*.01,ee.z+=(Math.random()-.5)*.02,Ee.setXYZ(se,ee.x,ee.y,ee.z);xe.computeVertexNormals();const Oe=[9127187,10382154,8215365,7162933,11239778],le=Oe[Math.floor(Math.random()*Oe.length)],me=Math.random()*.06-.03,ne=new Ui({color:new Sn(le).offsetHSL(0,0,me),roughness:.9+Math.random()*.1,metalness:0,flatShading:Ae>.7});return new Dn(xe,ne)};for(let ce=0;ce<20;ce++){const xe=pe(),Ae=ce/20*Math.PI*2+(Math.random()-.5)*.3;let Ee;ce%4===0?Ee=1.3+Math.random()*.25:Ee=1.2+Math.random()*.2,xe.position.set(Math.cos(Ae)*Ee,.01+Math.random()*.01,Math.sin(Ae)*Ee*.7),xe.rotation.set(Math.random()*Math.PI*.2,Math.random()*Math.PI*2,Math.random()*Math.PI*.2);const ee=.8+Math.random()*.4;xe.scale.multiplyScalar(ee),xe.castShadow=!0,xe.receiveShadow=!0,_.add(xe)}for(let ce=0;ce<5;ce++){const xe=pe(),Ae=ce/5*Math.PI*2+(Math.random()-.5)*.5,Ee=1.35+Math.random()*.2;xe.position.set(Math.cos(Ae)*Ee,.015+Math.random()*.01,Math.sin(Ae)*Ee*.7);const ee=1.3+Math.random()*.4,Oe=.6+Math.random()*.2;xe.scale.set(ee,Oe,ee);for(let le=0;le<4;le++){const me=pe();me.position.set(Math.cos(Ae)*(Ee-.1),.01+Math.random()*.01,Math.sin(Ae)*(Ee-.1)),me.scale.set(.2,.2,.2),me.rotation.set(Math.random()*Math.PI*.2,Math.random()*Math.PI*2,Math.random()*Math.PI*.2),xe.add(me)}_.add(xe)}return _};A.useEffect(()=>{console.log("Scene component mounted. Game active:",t),console.log("Config:",n)},[]),A.useEffect(()=>{if(!s.current||!c.current.length)return console.log("Scene not ready yet, skipping game loop initialization"),()=>{};if(console.log("********* GAME STATE CHANGED *********"),console.log("Game active:",t,"Moles count:",c.current.length),!t)return console.log("Game not active, hiding moles"),M(),()=>{};console.log("********* INITIALIZING GAME LOOP *********"),console.log("Time:",Date.now()),M(),c.current.forEach(K=>{K.userData.molesShownCounter=0,console.log(`Reset mole counter for mole at ${K.position.x.toFixed(2)}, ${K.position.z.toFixed(2)}`)});const _=[],E=new Map,R=2e3,F=n.speed||2;let L;switch(F){case 1:L=9;break;case 3:L=15;break;case 4:L=21;break;case 2:default:L=12;break}let N=0;const U=F===3||F===4?L+Math.floor(Math.random()*2):L-Math.floor(Math.random()*2);console.log(" STRICT MOLE LIMITER ENABLED "),console.log(`Game Speed: ${F} (${F===1?"Slow":F===2?"Medium":F===3?"Fast":F===4?"Very Fast":"Unknown"})`),console.log(`Target mole count: ${U} in ${n.gameTime}s`);const H=Math.max(1500,n.gameTime*1e3/U);console.log(`Base interval between moles: ${Math.round(H)}ms (minimum 1.5s)`);const j=()=>{if(!t){console.log(" Game no longer active - not showing mole");return}if(N>=U){console.log(` MAXIMUM REACHED: ${N}/${U} moles shown - NO MORE WILL APPEAR`);return}const K=c.current.find(Y=>(Y.userData.molesShownCounter||0)>U);if(K){console.log(` Error: Mole counter exceeds max - found mole with counter ${K.userData.molesShownCounter}/${U}`);return}const G=c.current.filter(Y=>!Y.userData.isUp&&!Y.userData.isMoving);if(G.length>0){const Y=G[Math.floor(Math.random()*G.length)];N++,Y.userData.molesShownCounter=N,console.log(` Showing mole #${N}/${U} at:`,Y.position),P(Y,!0),r&&r(),E.set(Y,Date.now());const J=setTimeout(()=>{Y.userData.isUp&&!Y.userData.isMoving&&(P(Y,!1),E.delete(Y))},R);_.push(J),N<U?(console.log(` Scheduling next mole (${N+1}/${U})`),z()):console.log(` LIMIT REACHED: ${N}/${U} moles - no more will be scheduled`)}else if(N<U){console.log(` No available moles, retrying in 300ms (${N}/${U} shown so far)`);const Y=setTimeout(j,300);_.push(Y)}},z=()=>{if(N>=U){console.log(` LIMIT CHECK: ${N}/${U} moles shown - not scheduling any more`);return}const K=N===0?0:N/U*n.gameTime*1e3,G=Math.max(0,n.gameTime*1e3-K),Y=U-N;let J=Y>0?G/Y:H;const re=J*(F===1?.25:F===2?.2:.15),fe=F===1?1800:F===2?1500:1200,pe=Math.max(fe,J-re+Math.random()*re*2);console.log(` Next mole (#${N+1}/${U}) scheduled in ${Math.round(pe)}ms (min: ${fe}ms)`);const ce=setTimeout(j,pe);_.push(ce)};console.log("Starting game - first mole will appear in 500ms");const q=setTimeout(j,500);_.push(q);const $=setInterval(()=>{t&&c.current.forEach(K=>{if(K.userData.isUp&&!K.userData.isMoving){const G=E.get(K),Y=Date.now();(!G||Y-G>R+500)&&(console.log("Detected stuck mole, forcing down:",K.position),P(K,!1),E.delete(K))}})},1e3);return _.push($),()=>{console.log("Cleaning up timeouts"),_.forEach(K=>{typeof K=="number"?cancelAnimationFrame(K):clearTimeout(K)}),clearInterval($)}},[t,n.gameTime,n.speed]);const P=(_,E)=>{if(console.log("Animating mole:",E?"up":"down"),_.userData.isMoving){console.log("Mole is already moving, forcing completion of current animation"),_.position.y=E?_.userData.holePosition.y+1.8:_.userData.holePosition.y,_.userData.isMoving=!1,_.userData.isUp=!E,setTimeout(()=>P(_,E),50);return}const R=setTimeout(()=>{console.log("SAFETY: Animation taking too long, forcing completion"),_.position.y=E?_.userData.holePosition.y+1.8:_.userData.holePosition.y,_.userData.isMoving=!1,_.userData.isUp=E,E||(_.visible=!1,m(_,""))},300);_.userData.isMoving=!0,_.userData.currentSafetyTimer=R;const F=_.position.y,L=E?_.userData.holePosition.y+1.8:_.userData.holePosition.y,N=150,U=Date.now();if(E){_.visible=!0,_.rotation.y=_.userData.centerRotation||0;const{word:j,isCorrect:z}=v();_.userData.isCorrectWord=z,_.userData.word=j,m(_,j),console.log("Mole word assigned:",j,"isCorrect:",z)}function H(){if(!_.parent){clearTimeout(_.userData.currentSafetyTimer);return}const j=Date.now()-U,z=Math.min(j/N,1),q=z<.5?2*z*z:-1+(4-2*z)*z;_.position.y=F+(L-F)*q,z<1?requestAnimationFrame(H):(clearTimeout(_.userData.currentSafetyTimer),_.position.y=L,_.userData.isMoving=!1,_.userData.isUp=E,E||(_.visible=!1,m(_,"")),console.log("Mole animation complete:",E?"up":"down"))}H()},M=()=>{console.log("Resetting all moles to default state"),c.current.forEach(_=>{_.userData.currentSafetyTimer&&clearTimeout(_.userData.currentSafetyTimer),_.position.y=_.userData.holePosition.y,_.visible=!1,_.userData.isUp=!1,_.userData.isMoving=!1,m(_,"")})};A.useEffect(()=>{if(!o.current||!s.current||!a.current)return;const _=new GD,E=new Kt,R=new Map,F=600,L=N=>{if(!t){console.log("Game not active, ignoring click");return}const U=o.current.getBoundingClientRect(),H="touches"in N?N.touches[0].clientX:N.clientX,j="touches"in N?N.touches[0].clientY:N.clientY;E.x=(H-U.left)/U.width*2-1,E.y=-((j-U.top)/U.height)*2+1,_.setFromCamera(E,a.current);const z=[];c.current.forEach($=>{$.visible&&$.userData.isUp&&!$.userData.isMoving&&$.traverse(K=>{K instanceof Dn&&(K.userData.parentMole=$,z.push(K))})}),console.log("Checking intersections with",z.length,"objects");const q=_.intersectObjects(z,!1);if(q.length>0){console.log("Hit detected");const $=q[0].object,K=$.userData.parentMole||$.parent;if(K&&K.userData.isUp&&!K.userData.isMoving){const G=Date.now(),Y=R.get(K)||0;if(G-Y<F){console.log("Click ignored - too soon after previous click (remote control protection)");return}if(R.set(K,G),console.log("Processing hit on mole, isCorrect:",K.userData.isCorrectWord),e(K.userData.word,K.userData.isCorrectWord),K.userData.isCorrectWord){T(K.position.clone());const J=25;for(let ce=0;ce<J;ce++){const xe=Math.random()*Math.PI*2,Ae=Math.random()*.8,Ee=Math.random()*.5+.5,ee=new qe((Math.random()-.5)*.4,0,(Math.random()-.5)*.4),Oe=K.position.clone().add(new qe(Math.cos(xe)*Ae,Ee,Math.sin(xe)*Ae)).add(ee),le=new oQe(s.current,Oe);d.current.push(le)}const V=K.scale.x,re=300,fe=Date.now(),pe=()=>{const ce=Date.now()-fe,xe=Math.min(ce/re,1),Ee=V*(1+(ee=>Math.pow(2,-10*ee)*Math.sin((ee-.3/4)*(2*Math.PI)/.3)*1.2+1)(xe)*.2);K.scale.set(Ee,Ee,Ee),xe<1?requestAnimationFrame(pe):(K.scale.set(V,V,V),P(K,!1),setTimeout(()=>{R.delete(K)},100))};pe()}else P(K,!1),setTimeout(()=>{R.delete(K)},100)}}else console.log("No hit detected")};return o.current.addEventListener("click",L),o.current.addEventListener("touchstart",L),()=>{var N,U;(N=o.current)==null||N.removeEventListener("click",L),(U=o.current)==null||U.removeEventListener("touchstart",L)}},[t,e,n]),A.useImperativeHandle(i,()=>({reset:M}));const T=_=>{if(!s.current)return;const E=25,R=[],F=[new Sn(16711680),new Sn(16777215),new Sn(255),new Sn(16766720),new Sn(16738740),new Sn(65280)];for(let N=0;N<E;N++){const U=Math.random();let H;if(U<.5){const V=.04+Math.random()*.06,re=.04+Math.random()*.06;H=new Yf(V,re)}else{const V=.02+Math.random()*.04;H=new Hb(V,6)}const j=new Ms({color:F[Math.floor(Math.random()*F.length)],side:Ps,transparent:!0,opacity:.9}),z=new Dn(H,j),q=new qe((Math.random()-.5)*.2,Math.random()*.1,(Math.random()-.5)*.2);z.position.copy(_).add(q);const $=Math.random()*Math.PI*2,K=Math.random()*Math.PI*.4,G=.3+Math.random()*.4,Y=new qe(Math.cos($)*Math.cos(K)*G,Math.sin(K)*G+.1,Math.sin($)*Math.cos(K)*G),J=.5+Math.random()*.3;R.push({mesh:z,velocity:Y,life:J,maxLife:J}),s.current.add(z)}const L=()=>{let N=!1;R.forEach(U=>{var H;U.life>0?(U.life-=.02,U.mesh.position.x+=U.velocity.x*.1,U.mesh.position.y+=U.velocity.y*.1,U.mesh.position.z+=U.velocity.z*.1,U.velocity.y-=.01,U.velocity.multiplyScalar(.95),U.mesh.material instanceof ym&&(U.mesh.material.opacity=U.life/U.maxLife*.9),N=!0):U.mesh.parent&&((H=s.current)==null||H.remove(U.mesh))}),N&&requestAnimationFrame(L)};L()};return A.useEffect(()=>{if(!o.current)return;console.log("Initializing scene...");const _=w();return console.log("Scene initialized, clouds added:",f.current.length),i&&typeof i!="function"&&(i.current={resetMoles:M}),_},[]),h.jsx(yt,{ref:o,position:"relative",width:"100%",height:"100%",overflow:"hidden",sx:{"& canvas":{display:"block",width:"100% !important",height:"100% !important"}}})});class ud extends Error{constructor(e,n){super(e),this.code=n,this.name="HighScoreError"}}const aQe=t=>te(rt,null,function*(){try{const{gameType:e,configId:n,scoringSystem:r}=t,i=xr(Pn(xt,"highScores"),Vn("configId","==",n),Vn("gameType","==",e),g0("score",r==="miss-based"?"asc":"desc"),Hf(10));return(yield er(i)).docs.map(a=>B({id:a.id},a.data()))}catch(e){throw console.error("Error loading high scores:",e),new ud("Failed to load high scores","LOAD_ERROR")}}),lQe=(t,e,n)=>{var i;if(e.length<10)return!0;const r=(i=e[e.length-1])==null?void 0:i.score;return n==="miss-based"?t<r:t>r},cQe=(t,e)=>te(rt,null,function*(){if(!t)return e;let n=t.displayName||e||"Student";try{const r=yield oi(an(xt,"users",t.uid));r.exists()&&(n=r.data().name||n)}catch(r){console.log("Could not fetch user name from database, using fallback")}return n}),uQe=(t,e)=>te(rt,null,function*(){if(!e.enableRateLimit)return;const n=e.rateLimitMinutes||5,r=e.rateLimitCount||5,i=new Date;i.setMinutes(i.getMinutes()-n);const o=xr(Pn(xt,"highScores"),Vn("userId","==",t.uid),Vn("configId","==",e.configId),Vn("createdAt",">",i),Hf(r));if((yield er(o)).size>=r)throw new ud("Please wait a few minutes before submitting another score.","RATE_LIMIT_EXCEEDED")}),dQe=t=>te(rt,null,function*(){const e=an(xt,"userGameConfigs",t);if(!(yield oi(e)).exists())throw new ud("Game configuration not found.","CONFIG_NOT_FOUND")}),fQe=(t,e,n,r)=>te(rt,null,function*(){const{gameType:i,configId:o}=r;if(!o)throw new ud("Missing game configuration ID","MISSING_CONFIG_ID");if(!n)throw new ud("Must be logged in to save high score","NOT_AUTHENTICATED");if(typeof t!="number"||isNaN(t)||t<0)throw new ud("Invalid score value detected","INVALID_SCORE");yield dQe(o),yield uQe(n,r);const s=yield cQe(n,e),a={userId:n.uid,playerName:s,score:t,configId:o,gameType:i,createdAt:_o()},l=yield Sc(Pn(xt,"highScores"),a);return oe(B({id:l.id},a),{createdAt:new Date})});class hQe{constructor(e){this.config=e}loadScores(){return te(this,null,function*(){return aQe(this.config)})}checkScore(e,n){return lQe(e,n,this.config.scoringSystem)}saveScore(e,n,r){return te(this,null,function*(){return fQe(e,n,r,this.config)})}}const sne=t=>{const{currentUser:e}=Pr(),n=ro(),[r,i]=A.useState([]),[o,s]=A.useState(!1),[a,l]=A.useState(!1),[c,u]=A.useState(!1),[d,f]=A.useState(!1),[p,b]=A.useState(null),v=new hQe({gameType:t.gameType,configId:t.configId,scoringSystem:t.scoringSystem,enableRateLimit:t.enableRateLimit,rateLimitCount:t.rateLimitCount,rateLimitMinutes:t.rateLimitMinutes}),m=A.useCallback(()=>te(rt,null,function*(){if(t.configId){s(!0),b(null);try{const S=yield v.loadScores();i(S)}catch(S){const D=S instanceof ud?S.message:"Failed to load high scores";b(D),console.error("Error loading high scores:",S)}finally{s(!1)}}}),[t.configId,t.gameType]),g=A.useCallback(S=>v.checkScore(S,r),[r]),x=A.useCallback((S,D)=>te(rt,null,function*(){if(!t.configId){n({title:"Error",description:"Cannot save high score: missing game configuration",status:"error",duration:3e3});return}l(!0),b(null);const k=g(S);u(k),k&&t.onHighScoreProcessStart&&t.onHighScoreProcessStart();try{k&&(yield v.saveScore(S,D,e),yield m(),n({title:"High Score Saved!",description:`Congratulations! Your score of ${S} has been recorded.`,status:"success",duration:5e3})),f(!0)}catch(P){const M=P instanceof ud?P.message:"Failed to save high score";if(b(M),P instanceof ud){let T="Error Saving Score",_=P.message;switch(P.code){case"RATE_LIMIT_EXCEEDED":T="Too Many Attempts";break;case"NOT_AUTHENTICATED":T="Authentication Required";break;case"CONFIG_NOT_FOUND":T="Configuration Error";break;case"INVALID_SCORE":T="Invalid Score";break}n({title:T,description:_,status:"error",duration:5e3})}else n({title:"Error Saving Score",description:"Could not save your high score. Please try again.",status:"error",duration:3e3});console.error("Error saving high score:",P)}finally{l(!1),t.onHighScoreProcessComplete&&t.onHighScoreProcessComplete()}}),[t.configId,t.onHighScoreProcessStart,t.onHighScoreProcessComplete,e,g,m,n]),w=A.useCallback(()=>{b(null)},[]);return A.useEffect(()=>{m()},[m]),{highScores:r,isLoading:o,isSubmittingScore:a,isNewHighScore:c,showHighScoreModal:d,error:p,loadHighScores:m,checkHighScore:g,saveHighScore:x,setShowHighScoreModal:f,clearError:w}},OF=({isOpen:t,onClose:e,score:n,isNewHighScore:r,highScores:i,scoringSystem:o,gameTitle:s,timeElapsed:a,additionalStats:l,isLoading:c=!1,isSubmittingScore:u=!1,error:d,onClearError:f,onPlayAgain:p,customActions:b,maxScoresToShow:v=5,showNavigation:m=!0})=>{const g=Fr(),{isTeacher:x,isStudent:w}=Pr(),S=T=>{const _=Math.floor(T/60),E=T%60;return`${_}:${E.toString().padStart(2,"0")}`},D=T=>o==="miss-based"?T===1?"1 miss":`${T} misses`:`${T} points`,k=(T,_)=>_===0?"gold":_===1?"gray":_===2?"orange":"blue",P=()=>{e(),g(x?"/teacher":w?"/student":"/")},M=()=>{f&&f(),e()};return h.jsxs(Kc,{isOpen:t,onClose:M,size:"lg",isCentered:!0,children:[h.jsx(Qc,{}),h.jsxs(Yc,{children:[h.jsx(Xc,{textAlign:"center",children:u?h.jsxs(h.Fragment,{children:[h.jsx(Oa,{size:"sm",mr:2}),"Saving Score..."]}):r?" New High Score!":" Game Complete!"}),h.jsx(Jc,{}),h.jsx(Zc,{children:h.jsxs($t,{spacing:6,children:[d&&h.jsxs(_i,{status:"error",borderRadius:"md",children:[h.jsx(Si,{}),h.jsx(bl,{children:d})]}),h.jsxs(yt,{textAlign:"center",children:[h.jsx(dt,{fontSize:"lg",mb:2,children:"Your Score:"}),h.jsx(po,{fontSize:"xl",px:4,py:2,borderRadius:"lg",colorScheme:r?"gold":"blue",children:D(n)})]}),(a||l)&&h.jsxs(h.Fragment,{children:[h.jsx(vd,{}),h.jsxs(yt,{w:"full",children:[h.jsx(Br,{size:"sm",mb:3,textAlign:"center",children:"Game Stats"}),h.jsxs($t,{spacing:2,children:[a&&h.jsxs(Ln,{w:"full",justify:"space-between",children:[h.jsx(dt,{children:"Time Elapsed:"}),h.jsx(po,{colorScheme:"green",children:S(a)})]}),l==null?void 0:l.map((T,_)=>h.jsxs(Ln,{w:"full",justify:"space-between",children:[h.jsxs(dt,{children:[T.label,":"]}),h.jsx(po,{colorScheme:T.colorScheme||"blue",children:T.value})]},_))]})]})]}),!c&&i.length>0&&h.jsxs(h.Fragment,{children:[h.jsx(vd,{}),h.jsxs(yt,{w:"full",children:[h.jsx(Br,{size:"sm",mb:3,textAlign:"center",children:o==="miss-based"?"Best Scores (Fewest Misses)":"High Scores"}),h.jsx($t,{spacing:2,children:i.slice(0,v).map((T,_)=>h.jsxs(Ln,{w:"full",justify:"space-between",p:3,bg:_%2===0?"gray.50":"white",borderRadius:"md",border:T.userId&&T.score===n?"2px solid":"1px solid",borderColor:T.userId&&T.score===n?"gold.300":"gray.200",children:[h.jsxs(Ln,{children:[h.jsxs(dt,{fontWeight:"bold",minW:"30px",children:["#",_+1]}),h.jsx(dt,{children:T.playerName})]}),h.jsx(po,{colorScheme:k(T.score,_),children:D(T.score)})]},T.id))})]})]}),c&&h.jsxs(yt,{textAlign:"center",children:[h.jsx(Oa,{size:"lg"}),h.jsx(dt,{mt:2,children:"Loading high scores..."})]})]})}),h.jsx(lv,{children:h.jsxs($t,{w:"full",spacing:3,children:[h.jsxs(Ln,{spacing:3,w:"full",justify:"center",children:[p&&h.jsx(hn,{colorScheme:"blue",onClick:p,leftIcon:h.jsx(nte,{}),isDisabled:u,children:"Play Again"}),b==null?void 0:b.map((T,_)=>h.jsx(hn,{colorScheme:T.colorScheme||"gray",variant:T.variant||"solid",onClick:T.onClick,isDisabled:u,children:T.label},_))]}),m&&h.jsxs(Ln,{spacing:3,children:[h.jsx(hn,{variant:"outline",onClick:M,isDisabled:u,children:"Close"}),h.jsx(hn,{variant:"ghost",onClick:P,isDisabled:u,children:x?"Back to Teacher Dashboard":w?"Back to Student Dashboard":"Back to Home"})]})]})})]})]})},pQe={molePopUp:"",correctHit:"/sounds/correct hit.wav",wrongHit:"/sounds/miss hit.wav",bonusStreak:"",countdownTick:"",gameStart:"",gameEnd:"",backgroundMusic:"/sounds/game background.mp3"},mQe=t=>{const[e,n]=A.useState(!1),[r,i]=A.useState(.7),[o,s]=A.useState(!0),a=B(B({},pQe),t),l=A.useRef(new Map),c=A.useRef(null),u=A.useRef(!1);A.useEffect(()=>{if(Object.entries(a).forEach(([_,E])=>{if(_!=="backgroundMusic"&&E&&E.trim()!==""){const R=new Audio(E);R.volume=r,R.preload="auto",R.onerror=()=>{console.warn(`Failed to load audio file for ${_}: ${E}`),l.current.delete(_)},R.oncanplaythrough=()=>{console.log(`Successfully loaded whack-a-mole audio for ${_}`)},l.current.set(_,R)}else _!=="backgroundMusic"&&(!E||E.trim()==="")&&console.log(`Skipping deactivated sound: ${_}`)}),a.backgroundMusic){const _=new Audio(a.backgroundMusic);_.volume=r*.15,_.loop=!0,_.preload="auto",_.onerror=()=>{console.warn(`Failed to load background music: ${a.backgroundMusic}`),c.current=null},c.current=_}return()=>{l.current.forEach(_=>{_.pause(),_.src=""}),l.current.clear(),c.current&&(c.current.pause(),c.current.src="")}},[]),A.useEffect(()=>{l.current.forEach(_=>{_.volume=e?0:r}),c.current&&(c.current.volume=e||!o?0:r*.15)},[r,e,o]);const d=A.useCallback((_,E=1)=>{if(!e)try{const R=new(window.AudioContext||window.webkitAudioContext),F=R.createOscillator(),L=R.createGain();switch(F.connect(L),L.connect(R.destination),L.gain.setValueAtTime(r*E*.3,R.currentTime),_){case"molePopUp":F.frequency.setValueAtTime(400,R.currentTime),F.frequency.exponentialRampToValueAtTime(600,R.currentTime+.1),L.gain.exponentialRampToValueAtTime(.01,R.currentTime+.1),F.type="sine";break;case"correctHit":F.frequency.setValueAtTime(800,R.currentTime),F.frequency.exponentialRampToValueAtTime(1200,R.currentTime+.1),L.gain.exponentialRampToValueAtTime(.01,R.currentTime+.15),F.type="triangle";break;case"wrongHit":F.frequency.setValueAtTime(200,R.currentTime),F.frequency.exponentialRampToValueAtTime(100,R.currentTime+.2),L.gain.exponentialRampToValueAtTime(.01,R.currentTime+.2),F.type="sawtooth";break;case"bonusStreak":[523,659,784,1047].forEach((U,H)=>{const j=R.createOscillator(),z=R.createGain();j.connect(z),z.connect(R.destination),j.frequency.setValueAtTime(U,R.currentTime+H*.1),z.gain.setValueAtTime(r*E*.2,R.currentTime+H*.1),z.gain.exponentialRampToValueAtTime(.01,R.currentTime+H*.1+.2),j.type="sine",j.start(R.currentTime+H*.1),j.stop(R.currentTime+H*.1+.2)});return;case"countdownTick":F.frequency.setValueAtTime(800,R.currentTime),L.gain.exponentialRampToValueAtTime(.01,R.currentTime+.1),F.type="square";break;default:F.frequency.setValueAtTime(440,R.currentTime),L.gain.exponentialRampToValueAtTime(.01,R.currentTime+.1),F.type="sine"}F.start(R.currentTime),F.stop(R.currentTime+.5)}catch(R){console.warn(`Failed to generate fallback sound for ${_}:`,R)}},[e,r]),f=A.useCallback((_,E=1)=>{if(e)return;const R=l.current.get(_);if(R){const F=R.cloneNode();F.volume=r*E,F.play().catch(L=>{console.warn(`Failed to play sound ${_}:`,L),d(_,E)})}else d(_,E)},[e,r,d]),p=A.useCallback(()=>{a.molePopUp&&f("molePopUp",.8)},[f,a.molePopUp]),b=A.useCallback(()=>{a.correctHit&&f("correctHit",1),"vibrate"in navigator&&navigator.vibrate([50,30,100])},[f,a.correctHit]),v=A.useCallback(()=>{a.wrongHit&&f("wrongHit",1),"vibrate"in navigator&&navigator.vibrate(200)},[f,a.wrongHit]),m=A.useCallback(()=>{a.bonusStreak&&f("bonusStreak",1.2),"vibrate"in navigator&&navigator.vibrate([100,50,100,50,200])},[f,a.bonusStreak]),g=A.useCallback(()=>{a.countdownTick&&f("countdownTick",.6)},[f,a.countdownTick]),x=A.useCallback(()=>{a.gameStart&&f("gameStart",1),"vibrate"in navigator&&navigator.vibrate([100,50,100])},[f,a.gameStart]),w=A.useCallback(()=>{a.gameEnd&&f("gameEnd",1),"vibrate"in navigator&&navigator.vibrate([200,100,200,100,300])},[f,a.gameEnd]),S=A.useCallback(()=>{c.current&&!e&&o&&!u.current&&(c.current.play().catch(_=>{console.warn("Failed to play background music:",_)}),u.current=!0)},[e,o]),D=A.useCallback(()=>{c.current&&u.current&&(c.current.pause(),c.current.currentTime=0,u.current=!1)},[]),k=A.useCallback(()=>{c.current&&u.current&&c.current.pause()},[]),P=A.useCallback(()=>{c.current&&!e&&o&&c.current.play().catch(_=>{console.warn("Failed to resume background music:",_)})},[e,o]),M=A.useCallback(()=>{n(_=>!_)},[]),T=A.useCallback(()=>{s(_=>{const E=!_;return console.log("Music toggle:",E?"ON":"OFF",{isMuted:e,isPlayingMusic:u.current,hasBackgroundMusic:!!c.current}),!E&&u.current?(console.log("Pausing background music"),k()):E&&c.current&&!e&&(console.log("Resuming background music"),c.current.play().then(()=>{console.log("Background music resumed successfully"),u.current=!0}).catch(R=>{console.warn("Failed to resume background music:",R)})),E})},[k,e]);return{isMuted:e,volume:r,musicEnabled:o,isPlayingMusic:u.current,setVolume:i,toggleMute:M,toggleMusic:T,playMolePopUpSound:p,playCorrectHitSound:b,playWrongHitSound:v,playBonusStreakSound:m,playCountdownTickSound:g,playGameStartSound:x,playGameEndSound:w,startBackgroundMusic:S,stopBackgroundMusic:D,pauseBackgroundMusic:k,resumeBackgroundMusic:P,playSound:f}},gQe=()=>h.jsxs(yt,{width:"60px",height:"60px",borderRadius:"8px",bg:"white",color:"#001f3f",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",fontSize:"2xl",fontWeight:"bold",transform:"rotate(90deg)",transition:"transform 0.3s ease",_hover:{transform:"rotate(90deg) scale(1.1)"},children:["",h.jsx(yt,{position:"absolute",top:"-8px",right:"-8px",width:"20px",height:"20px",borderRadius:"full",bg:"#007AFF",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"xs",children:""})]}),vQe=()=>h.jsx(yt,{position:"fixed",top:0,left:0,right:0,bottom:0,bg:"rgba(0, 31, 63, 0.95)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",children:h.jsx(Ml,{children:h.jsxs($t,{spacing:6,textAlign:"center",color:"white",p:8,children:[h.jsx(yt,{bg:"rgba(255, 255, 255, 0.1)",borderRadius:"20px",p:6,boxShadow:"0 0 30px rgba(255, 255, 255, 0.2)",border:"2px solid rgba(255, 255, 255, 0.3)",children:h.jsx(gQe,{})}),h.jsxs($t,{spacing:3,children:[h.jsx(Br,{size:"lg",fontFamily:"'Comic Neue', cursive",textShadow:"1px 1px 2px rgba(0,0,0,0.3)",children:"Rotate Your Device"}),h.jsxs(dt,{fontSize:"lg",fontFamily:"'Comic Neue', cursive",textAlign:"center",lineHeight:"1.5",children:["For the best Whack-a-Mole experience,",`
`,"please rotate your device to landscape mode"]}),h.jsx(dt,{fontSize:"md",fontFamily:"'Comic Neue', cursive",opacity:.8,mt:2,children:" Turn your phone sideways"})]})]})})}),yQe=()=>{const[t,e]=A.useState(window.innerWidth>window.innerHeight);return A.useEffect(()=>{const n=()=>{e(window.innerWidth>window.innerHeight)};return window.addEventListener("resize",n),window.addEventListener("orientationchange",n),()=>{window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)}},[]),t},ane=({playerName:t,onGameComplete:e,config:n,onHighScoreProcessStart:r,onHighScoreProcessComplete:i})=>{var me;const{currentUser:o,isTeacher:s,isStudent:a}=Pr(),l=Fr(),[c,u]=A.useState(0),[d,f]=A.useState(n.gameTime),[p,b]=A.useState(!1),[v,m]=A.useState(0),[g,x]=A.useState(!1),[w,S]=A.useState(!1),[D,k]=A.useState(3),P=A.useRef(null),M=A.useRef(null),T=A.useRef(null),_=ro(),E=yQe(),{playMolePopUpSound:R,playCorrectHitSound:F,playWrongHitSound:L,playBonusStreakSound:N,playCountdownTickSound:U,playGameStartSound:H,playGameEndSound:j,startBackgroundMusic:z,stopBackgroundMusic:q,isMuted:$,toggleMute:K,musicEnabled:G,toggleMusic:Y,volume:J,setVolume:V}=mQe(),{highScores:re,isNewHighScore:fe,showHighScoreModal:pe,setShowHighScoreModal:ce,saveHighScore:xe,isSubmittingScore:Ae}=sne({gameType:"whack-a-mole",configId:n.id||"default",scoringSystem:"points-based",enableRateLimit:!0,onHighScoreProcessStart:r,onHighScoreProcessComplete:i});A.useEffect(()=>(p&&d>0&&!g?P.current=setTimeout(()=>{f(d-1)},1e3):d===0&&p&&ee(),()=>{P.current&&clearTimeout(P.current)}),[d,p,g]),A.useEffect(()=>(w&&D>0?(U(),M.current=setTimeout(()=>{k(D-1)},1e3)):D===0&&w&&(S(!1),b(!0),x(!1),H(),z()),()=>{M.current&&clearTimeout(M.current)}),[w,D,U,H,z]);const Ee=()=>{u(0),f(n.gameTime),m(0),x(!1),b(!1),S(!0),k(3),T.current&&T.current.reset()},ee=()=>{x(!0),b(!1),P.current&&clearInterval(P.current),T.current&&T.current.reset(),q(),j(),e(c),n.id&&o?xe(c,t):o||_({title:"Game Complete!",description:`Final Score: ${c} points. Sign in to save high scores!`,status:"info",duration:5e3})},Oe=(ne,se)=>{if(!(!p||g))if(se){F();const ge=v+1;let Q=n.pointsPerHit;ge>=n.bonusThreshold&&(Q+=n.bonusPoints,N(),_({title:"Bonus!",description:`+${n.bonusPoints} bonus points!`,status:"success",duration:1e3})),u(W=>W+Q),m(ge)}else L(),u(ge=>Math.max(0,ge-n.penaltyPoints)),m(0),_({title:"Oops!",description:`Wrong word! "${ne}" -${n.penaltyPoints} points`,status:"error",duration:1e3})},le=()=>{ce(!1),l(s?"/teacher":a?"/student":"/")};return E?h.jsxs(yt,{width:"100%",height:"100vh",position:"relative",children:[h.jsx(dc,{gameTitle:"Whack-a-Mole",variant:"compact"}),h.jsxs(yt,{position:"absolute",top:"60px",left:0,right:0,zIndex:1e3,p:4,display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[h.jsx(yt,{bg:"transparent",p:2,borderRadius:"md",maxWidth:"400px",children:h.jsx(dt,{fontSize:"xl",fontWeight:"bold",color:"#001f3f",fontFamily:"'Comic Neue', cursive",textShadow:"3px 3px 6px rgba(255,255,255,0.95)",isTruncated:!0,children:n.title})}),h.jsxs($t,{spacing:2,alignItems:"flex-end",children:[h.jsxs(Ln,{justify:"space-between",bg:"transparent",p:2,borderRadius:"md",width:"320px",spacing:4,children:[h.jsxs(dt,{fontSize:"xl",fontWeight:"bold",color:"#001f3f",fontFamily:"'Comic Neue', cursive",textShadow:"3px 3px 6px rgba(255,255,255,0.95)",children:["Score: ",c]}),h.jsxs(dt,{fontSize:"xl",fontWeight:"bold",color:d<=10?"#dc2626":"#001f3f",fontFamily:"'Comic Neue', cursive",textShadow:"3px 3px 6px rgba(255,255,255,0.95)",sx:{animation:d<=10?"pulse 1s ease-in-out infinite":"none","@keyframes pulse":{"0%, 100%":{transform:"scale(1)",opacity:1},"50%":{transform:"scale(1.1)",opacity:.8}}},children:["Time: ",d,"s"]})]}),h.jsxs(Ln,{spacing:3,bg:"rgba(255, 255, 255, 0.9)",borderRadius:"xl",p:2,children:[h.jsx(hn,{size:"sm",onClick:K,color:"#001f3f",_hover:{bg:"rgba(0, 31, 63, 0.1)"},bg:"transparent",borderRadius:"full",minW:"32px",h:"32px",p:0,fontSize:"md",children:$?"":""}),h.jsx(yt,{width:"60px",children:h.jsx(Ea,{label:`Volume: ${Math.round(J*100)}%`,placement:"top",children:h.jsxs(ZX,{"aria-label":"volume-slider",value:J,onChange:ne=>V(ne),min:0,max:1,step:.1,size:"sm",isDisabled:$,children:[h.jsx(eQ,{bg:"rgba(0, 31, 63, 0.2)",children:h.jsx(tQ,{bg:"#001f3f"})}),h.jsx(JX,{})]})})}),h.jsx(hn,{size:"sm",onClick:Y,color:"#001f3f",_hover:{bg:"rgba(0, 31, 63, 0.1)"},bg:"transparent",borderRadius:"full",minW:"32px",h:"32px",p:0,display:"flex",alignItems:"center",justifyContent:"center",children:h.jsxs(yt,{display:"flex",alignItems:"end",gap:"1px",height:"16px",children:[h.jsx(yt,{width:"3px",height:"8px",bg:G?"#001f3f":"#ccc",borderRadius:"1px",opacity:G?1:.5,transition:"all 0.2s ease",sx:G?{animation:"musicBar1 1s ease-in-out infinite alternate","@keyframes musicBar1":{"0%":{height:"8px"},"100%":{height:"12px"}}}:{}}),h.jsx(yt,{width:"3px",height:"12px",bg:G?"#001f3f":"#ccc",borderRadius:"1px",opacity:G?1:.5,transition:"all 0.2s ease",sx:G?{animation:"musicBar2 1s ease-in-out infinite alternate",animationDelay:"0.2s","@keyframes musicBar2":{"0%":{height:"12px"},"100%":{height:"16px"}}}:{}}),h.jsx(yt,{width:"3px",height:"6px",bg:G?"#001f3f":"#ccc",borderRadius:"1px",opacity:G?1:.5,transition:"all 0.2s ease",sx:G?{animation:"musicBar3 1s ease-in-out infinite alternate",animationDelay:"0.4s","@keyframes musicBar3":{"0%":{height:"6px"},"100%":{height:"10px"}}}:{}}),h.jsx(yt,{width:"3px",height:"10px",bg:G?"#001f3f":"#ccc",borderRadius:"1px",opacity:G?1:.5,transition:"all 0.2s ease",sx:G?{animation:"musicBar4 1s ease-in-out infinite alternate",animationDelay:"0.6s","@keyframes musicBar4":{"0%":{height:"10px"},"100%":{height:"14px"}}}:{}})]})})]})]})]}),h.jsx(sQe,{ref:T,onMoleHit:Oe,config:n,gameActive:p&&!g,onMolePopUp:R}),w&&h.jsx(Ml,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10,bg:"rgba(255, 255, 255, 0.95)",borderRadius:"full",width:"200px",height:"200px",border:"8px solid #001f3f",boxShadow:"0 0 50px rgba(0, 31, 63, 0.3)",children:h.jsx(dt,{fontSize:"8xl",fontWeight:"bold",color:"#001f3f",fontFamily:"'Comic Neue', cursive",textShadow:"2px 2px 4px rgba(255,255,255,0.8)",lineHeight:"1",children:D})}),(!p&&!w||g)&&!pe&&h.jsx(yt,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:2,bg:"white",p:6,borderRadius:"md",boxShadow:"xl",textAlign:"center",fontFamily:"'Comic Neue', cursive",children:h.jsxs($t,{spacing:4,children:[h.jsx(Br,{size:"lg",fontFamily:"'Comic Neue', cursive",children:g?"Game Over!":"Whack-a-Mole"}),!g&&h.jsx($t,{spacing:2,children:n.instructions?h.jsx(dt,{fontFamily:"'Comic Neue', cursive",children:n.instructions}):h.jsxs(h.Fragment,{children:[h.jsxs(dt,{fontFamily:"'Comic Neue', cursive",children:["Select moles displaying words from ",n.categories[0].title,"!"]}),h.jsxs(dt,{fontSize:"sm",color:"gray.600",fontFamily:"'Comic Neue', cursive",children:["Words from ",n.categories[0].title," will earn you points. Other words will result in a penalty."]})]})}),g&&h.jsxs(dt,{fontSize:"xl",fontFamily:"'Comic Neue', cursive",children:["Final Score: ",c]}),h.jsx(hn,{colorScheme:"blue",size:"lg",onClick:Ee,fontFamily:"'Comic Neue', cursive",fontWeight:"bold",children:g?"Play Again":"Start Game"})]})}),h.jsx(OF,{isOpen:pe,onClose:le,score:c,isNewHighScore:fe,highScores:re,scoringSystem:"points-based",gameTitle:"Whack-a-Mole",additionalStats:[{label:"Game Time",value:`${n.gameTime}s`,colorScheme:"blue"},{label:"Category",value:((me=n.categories[0])==null?void 0:me.title)||"Words",colorScheme:"green"},{label:"Max Consecutive",value:v,colorScheme:"purple"}],isSubmittingScore:Ae,onPlayAgain:Ee,customActions:[{label:"Back to Dashboard",onClick:le,colorScheme:"gray",variant:"outline"}]})]}):h.jsxs(h.Fragment,{children:[h.jsx(dc,{gameTitle:"Whack-a-Mole",variant:"compact"}),h.jsx(vQe,{})]})},xQe={primaryColors:["#FF6B6B","#FFD93D","#6BCF7F","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD"],pastel:["#FFB3BA","#FFDFBA","#FFFFBA","#BAFFC9","#BAE1FF","#E1BAFF","#FFBADB","#C9BAFF"],bright:["#FF0000","#FF8800","#FFFF00","#88FF00","#00FF00","#00FF88","#00FFFF","#0088FF"],patriotic:["#DC143C","#FFFFFF","#000080","#FF0000","#87CEEB","#4169E1","#C0C0C0","#191970"],greenShades:["#90EE90","#32CD32","#228B22","#006400","#2E8B57","#6B8E23","#00FF7F","#ADFF2F"],desert:["#F4A460","#D2B48C","#F5F5DC","#A0522D","#B7410E","#FF8C00","#E2725B","#C3B091"],ocean:["#ADD8E6","#87CEEB","#00BFFF","#40E0D0","#008080","#00FFFF","#4682B4"],sunset:["#FFC0CB","#FF7F50","#FFA500","#FFD700","#FFFF00","#FF6347","#DDA0DD","#E6E6FA"],custom:["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4"]},bQe=t=>{const e=t.replace("#",""),n=parseInt(e.substr(0,2),16)/255,r=parseInt(e.substr(2,2),16)/255,i=parseInt(e.substr(4,2),16)/255,o=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),s=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4),a=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4);return .2126*o+.7152*s+.0722*a},wQe=t=>bQe(t)<.5?"#FFFFFF":"#000000",lne=(t,e)=>{const n=360/e;return t*n+n/2},SQe=(t,e)=>{var i,o;console.log("=== POINTER DETECTION ==="),console.log(`Current rotation: ${t.toFixed(1)}`),console.log("Looking for segment closest to 180 (9 o'clock pointer)"),console.log(`Using ${e.length} segments for detection`);let n=0,r=360;for(let s=0;s<e.length;s++){const a=lne(s,e.length),l=(a+t)%360,c=Math.min(Math.abs(l-180),360-Math.abs(l-180));console.log(`${s}: "${(i=e[s])==null?void 0:i.text}" - base center: ${a.toFixed(1)}, after rotation: ${l.toFixed(1)}, distance to 180: ${c.toFixed(1)}`),c<r&&(r=c,n=s)}return console.log(`Closest segment: "${(o=e[n])==null?void 0:o.text}" (index ${n}) with distance ${r.toFixed(1)}`),console.log("========================"),n},kW=(t,e="primaryColors",n)=>{const r=e==="custom"&&n?n:xQe[e];return t.map((i,o)=>oe(B({},i),{color:r[o%r.length]}))},_Qe=(t,e=480)=>{const r=220*(e/480),i=e/2;return{x:i-r*.5,y:i,segmentIndex:t}},EQe=t=>{const e=[],n=(r,i={})=>{var o;if(r.nodeType===3){const s=r.textContent||"";s.trim()&&e.push(B({text:s},i))}else if(r.nodeType===1){const s=r,a=B({},i);switch((o=s.tagName)==null?void 0:o.toLowerCase()){case"b":case"strong":a.bold=!0;break;case"i":case"em":a.italic=!0;break;case"u":a.underline=!0;break;case"sup":a.superscript=!0;break;case"sub":a.subscript=!0;break}for(const l of Array.from(s.childNodes))n(l,a)}};try{const i=new DOMParser().parseFromString(t,"text/html");for(const o of Array.from(i.body.childNodes))n(o)}catch(r){console.error("Error parsing HTML:",r),e.push({text:t})}return e},CQe=()=>{const t=A.useRef(null),e=A.useRef(null);A.useEffect(()=>{const s=()=>te(rt,null,function*(){if(!t.current)try{t.current=new(window.AudioContext||window.webkitAudioContext),t.current.state==="suspended"&&(yield t.current.resume()),console.log("Audio context initialized and ready")}catch(a){console.error("Failed to initialize audio context:",a)}});return document.addEventListener("click",s,{once:!0}),()=>{document.removeEventListener("click",s),e.current&&clearInterval(e.current)}},[]);const n=()=>{if(!t.current||t.current.state!=="running"){console.log("Audio context not ready for click sound");return}try{const s=t.current,a=s.createOscillator(),l=s.createGain();a.type="square",a.frequency.setValueAtTime(800,s.currentTime),l.gain.setValueAtTime(0,s.currentTime),l.gain.linearRampToValueAtTime(.1,s.currentTime+.001),l.gain.exponentialRampToValueAtTime(.001,s.currentTime+.05),a.connect(l),l.connect(s.destination),a.start(s.currentTime),a.stop(s.currentTime+.05)}catch(s){console.error("Error generating click sound:",s)}};return{generateClick:n,startClickingSound:(s,a)=>{if(!t.current)return;const l=Date.now(),c=50,u=300;let d;switch(a){case 2:d=.65;break;case 3:d=.7;break;case 4:d=.75;break;case 5:d=.85;break;case 6:d=.86;break;case 7:d=.87;break;case 8:d=.88;break;case 9:d=.89;break;default:d=.95;break}let f=c;const p=()=>{const b=Date.now()-l,v=Math.min(b/s,1);if(v<d){const m=1-Math.pow(1-v,3);f=c+(u-c)*m,n(),e.current=setTimeout(p,f)}};p()},ensureAudioReady:()=>te(rt,null,function*(){if(!t.current)try{t.current=new(window.AudioContext||window.webkitAudioContext)}catch(s){return console.error("Failed to create audio context:",s),!1}if(t.current&&t.current.state==="suspended")try{return yield t.current.resume(),console.log("Audio context resumed"),!0}catch(s){return console.error("Failed to resume audio context:",s),!1}return!0}),stopClickingSounds:()=>{e.current&&(clearTimeout(e.current),e.current=null)}}},AQe=(t,e)=>{const[n,r]=A.useState({items:[],selected:null,spinning:!1,rotation:0,spinCount:0,gameComplete:!1,selectionHistory:[],isZoomed:!1,zoomTarget:{x:0,y:0,segmentIndex:0}}),i=CQe();A.useEffect(()=>{var c;if(e&&e.items){const u=e.items;console.log(" [useGameLogic] Raw config items received:",u),console.log(" [useGameLogic] First item details:",u[0]),console.log(" [useGameLogic] First item has content field:",!!((c=u[0])!=null&&c.content));const d=e.wheelTheme||"primaryColors",f=e.customColors,p=kW(u,d,f);console.log(" [useGameLogic] Items after color processing:",p),console.log(" [useGameLogic] First processed item:",p[0]),r(b=>oe(B({},b),{items:p}))}},[e]),A.useEffect(()=>{const c=e.maxSpins||0;c>0&&n.spinCount>=c&&!n.gameComplete&&(r(u=>oe(B({},u),{gameComplete:!0})),t(n.spinCount))},[n.spinCount,e,t,n.gameComplete]);const o=()=>te(rt,null,function*(){var P;if(n.items.length<2||n.spinning||n.gameComplete)return;yield i.ensureAudioReady();const c=e.maxSpins||0;if(c>0&&n.spinCount>=c){r(M=>oe(B({},M),{gameComplete:!0})),t(n.spinCount);return}r(M=>oe(B({},M),{spinning:!0}));const u=n.items,d=5+Math.floor(Math.random()*3),f=3e3;i.startClickingSound(f,u.length);const p=Math.floor(Math.random()*u.length),b=lne(p,u.length),v=(b+n.rotation)%360;let g=(180-v+360)%360;const x=360*d,w=n.rotation+x+g;console.log("=== SPIN CALCULATION ==="),console.log(`Winner: "${(P=u[p])==null?void 0:P.text}" (index ${p})`),console.log(`Segment center: ${b.toFixed(1)}`),console.log(`Current position: ${v.toFixed(1)}`),console.log(`Rotation needed: ${g.toFixed(1)}`),console.log(`Final rotation: ${w.toFixed(1)}`),console.log("=======================");const S=Date.now(),D=n.rotation,k=()=>{var R;const M=Date.now()-S,T=Math.min(M/f,1),_=1-Math.pow(1-T,3),E=D+(w-D)*_;if(r(F=>oe(B({},F),{rotation:E})),T<1)requestAnimationFrame(k);else{r(H=>oe(B({},H),{rotation:w}));const F=SQe(w,u),L=u[F];console.log("=== SPIN COMPLETE ==="),console.log(`Final winner: "${L==null?void 0:L.text}" (intended: "${(R=u[p])==null?void 0:R.text}")`),console.log(`Final rotation: ${w.toFixed(1)}`),console.log("=====================");const U=_Qe(F,480);r(H=>oe(B({},H),{spinning:!1,selected:L.text,selectionHistory:[...H.selectionHistory,L.text],spinCount:H.spinCount+1,zoomTarget:U})),setTimeout(()=>{r(H=>oe(B({},H),{isZoomed:!0}))},500),i.stopClickingSounds()}};requestAnimationFrame(k)}),s=()=>{r(c=>oe(B({},c),{isZoomed:!1,zoomTarget:{x:0,y:0,segmentIndex:0}}))},a=()=>{if(!n.selected)return;const c=n.items.filter(d=>d.text!==n.selected),u=n.selectionHistory.includes(n.selected)?n.selectionHistory:[...n.selectionHistory,n.selected];r(d=>oe(B({},d),{items:c,selected:null,selectionHistory:u,rotation:0,isZoomed:!1,zoomTarget:{x:0,y:0,segmentIndex:0}}))},l=()=>{if(e&&e.items){const c=e.items,u=e.wheelTheme||"primaryColors",d=e.customColors,f=kW(c,u,d);r({items:f,selected:null,spinning:!1,rotation:0,spinCount:0,gameComplete:!1,selectionHistory:[],isZoomed:!1,zoomTarget:{x:0,y:0,segmentIndex:0}})}i.stopClickingSounds()};return oe(B({},n),{spin:o,handleZoomOut:s,removeSelectedItem:a,resetGame:l})},TQe=({items:t,rotation:e,isZoomed:n,zoomTarget:r,spinning:i,wheelSize:o=480})=>{const s=o/480,a=220*s,l=o/2,c=360/t.length,u=20*s,d=12*s,f=14*s,p=Math.max(12,18*s),b=(m,g,x,w,S,D=p)=>{const k=EQe(m);return h.jsx("text",{x:g,y:x,textAnchor:"middle",dominantBaseline:"middle",fontSize:D,fontWeight:"normal",fontFamily:"'Comic Neue', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif",fill:S,transform:w,children:k.map((P,M)=>{const T={};let _="normal",E="normal",R="'Comic Neue', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif";P.bold&&(_="bold"),P.italic&&(E="italic",T.fontStyle="italic",R="Arial, Helvetica, sans-serif"),P.underline&&(T.textDecoration="underline");let F=D,L=0;const N=M>0?k[M-1]:null,U=N&&(N.superscript||N.subscript);return P.superscript?(F=D*.75,L=U?-D*.3-D*.2:-D*.3):P.subscript?(F=D*.75,L=U?D*.2+D*.3:D*.2):U&&(L=N.superscript?D*.3:-D*.2),h.jsx("tspan",{fontSize:F,fontWeight:_,fontStyle:E,fontFamily:R,dy:L,style:T,children:P.text},M)})})},v=()=>{if(t.length===0)return null;console.log(" [WheelRenderer] Rendering items:",t),console.log(" [WheelRenderer] Wheel size:",o,"Scale:",s);const m=n?2.4:1;let g=0,x=0;if(n){const w=window.innerWidth,S=window.innerHeight,D=60,k=140,P=D+k,M=S-P,T=w*.12,_=M*.3,E=w/2+T,R=P+M/2-_;g=(E-l)/m,x=(R-l)/m,console.log(" [Zoom Position] Up and right positioning:",{viewportWidth:w,viewportHeight:S,headerHeight:D,controlButtonsHeight:k,totalTopOffset:P,availableHeight:M,horizontalOffset:T,verticalOffset:_,wheelCenter:l,targetX:E,targetY:R,zoomScale:m,translateX:g.toFixed(2),translateY:x.toFixed(2)})}return h.jsxs(yt,{position:"relative",width:`${o}px`,height:`${o}px`,display:"flex",justifyContent:"center",alignItems:"center",mx:"auto",overflow:"visible",style:{transform:`scale(${m}) translate(${g}px, ${x}px)`,transition:n?"transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94)":"transform 0.6s ease-out"},children:[h.jsxs("svg",{width:o,height:o,style:{transition:i?"none":"transform 0.3s ease",transform:`rotate(${e}deg)`},children:[h.jsx("g",{children:t.map((w,S)=>{const D=c*S,k=D+c,P=c>180?1:0,M=l+a*Math.cos(Math.PI*D/180),T=l+a*Math.sin(Math.PI*D/180),_=l+a*Math.cos(Math.PI*k/180),E=l+a*Math.sin(Math.PI*k/180),R=`M${l},${l} L${M},${T} A${a},${a} 0 ${P} 1 ${_},${E} Z`,F=D+c/2,L=a*.7,N=l+L*Math.cos(Math.PI*F/180),U=l+L*Math.sin(Math.PI*F/180),H=`rotate(${F+180}, ${N}, ${U})`,j=n&&S===r.segmentIndex,z=wQe(w.color),q=o<320?8:o<400?10:12;return h.jsxs("g",{children:[h.jsx("path",{d:R,fill:w.color,stroke:j?"#FFD700":"#fff",strokeWidth:j?Math.max(2,4*s):Math.max(1,2*s),filter:j?"drop-shadow(0 0 10px rgba(255, 215, 0, 0.8))":"none"}),w.content?b(w.content,N,U,H,z,p):h.jsx("text",{x:N,y:U,textAnchor:"middle",dominantBaseline:"middle",fontSize:p,fontWeight:"normal",fontFamily:"'Comic Neue', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif",fill:z,transform:H,children:w.text.length>q?w.text.substring(0,q)+"...":w.text})]},w.id)})}),h.jsx("circle",{cx:l,cy:l,r:u,fill:"#9CA3AF"}),h.jsx("circle",{cx:l,cy:l,r:d,fill:"#fff"})]}),h.jsx(yt,{position:"absolute",top:"50%",left:"50%",transform:`translate(${-a-f}px, ${-20*s}px)`,zIndex:10,children:h.jsx(yt,{transformOrigin:`${12.5*s}px ${40*s}px`,sx:{animation:i?"pointerBounce 0.1s ease-in-out infinite alternate":"none","@keyframes pointerBounce":{"0%":{transform:"rotate(86deg)"},"100%":{transform:"rotate(90deg)"}},transform:i?void 0:"rotate(90deg)"},children:h.jsxs("svg",{width:25*s,height:50*s,viewBox:"0 0 25 50",children:[h.jsx("path",{d:"M12.5 45 C6 45, 2 37, 2 28 C2 18, 8 8, 12.5 8 C17 8, 23 18, 23 28 C23 37, 19 45, 12.5 45 Z",fill:"#E2E8F0",stroke:"#2D3748",strokeWidth:"1"}),h.jsx("path",{d:"M12.5 10 C9 10, 5 18, 5 28 C5 35, 8 42, 12.5 42 C17 42, 20 35, 20 28 C20 18, 16 10, 12.5 10 Z",fill:"#F7FAFC"}),h.jsx("circle",{cx:"12.5",cy:"40",r:"3",fill:"#2D3748"})]})})})]})};return h.jsx(yt,{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",overflow:"visible",transition:"all 0.3s ease",w:"100%",maxW:n?"none":`${o}px`,mx:"auto",zIndex:n?1e3:1,children:v()})},MQe=({isZoomed:t,selected:e,items:n,config:r,onZoomOut:i,onRemoveSelected:o,wheelSize:s=480})=>{if(!t)return null;const a=s<320?"sm":"md",l=s<320?"sm":"md",c=s<320?3:4,u=s<320?2:3;return h.jsx(h.Fragment,{children:h.jsxs($t,{position:"fixed",top:"70px",left:"50%",transform:"translateX(-50%)",spacing:4,zIndex:1001,align:"center",bg:"#E6F3FF",borderRadius:"lg",p:3,shadow:"none",border:"none",children:[h.jsx(hn,{onClick:i,bg:"#4ECDC4",color:"white",_hover:{bg:"#45B7D1"},_active:{bg:"#3A9BC1"},size:a,fontSize:l,px:c,py:u,borderRadius:"full",shadow:"lg",border:"2px solid white",minW:"120px",children:" ZOOM OUT"}),r.removeOnSelect&&e&&h.jsx(hn,{onClick:o,bg:"#F5F5DC",color:"#8B4513",_hover:{bg:"#F0E68C"},_active:{bg:"#DDD6C1"},size:a,fontSize:l,px:c,py:u,borderRadius:"full",shadow:"lg",border:"2px solid white",leftIcon:h.jsx("span",{children:""}),minW:"120px",children:"REMOVE"})]})})},PQe=({isZoomed:t,spinning:e,gameComplete:n,itemsLength:r,spinCount:i,onSpin:o,onReset:s})=>t?null:h.jsxs($t,{spacing:4,align:"center",justify:"center",w:"100%",children:[h.jsx(hn,{onClick:o,isDisabled:e||r<2||n,bg:"#F5F5DC",color:"#8B4513",_hover:{bg:"#F0E68C"},_active:{bg:"#DDD6C1"},size:"lg",fontSize:"xl",px:8,py:6,isLoading:e,loadingText:"SPINNING...",children:" SPIN THE WHEEL!"}),n&&h.jsxs($t,{spacing:2,children:[h.jsx(dt,{fontSize:"lg",fontWeight:"bold",color:"blue.600",children:"Game Complete! "}),h.jsxs(dt,{children:["Total spins: ",i]}),h.jsx(hn,{onClick:s,colorScheme:"blue",variant:"outline",children:" Play Again"})]})]}),cne=({onGameComplete:t,config:e})=>{const n=AQe(t,e),r=Ji({base:280,sm:320,md:400,lg:480}),i=Ji({base:2,sm:4,md:6,lg:6}),o=Ji({base:"md",sm:"lg",md:"lg",lg:"lg"});return n.items.length===0?h.jsx(Ml,{p:8,children:h.jsx(dt,{children:"No items configured for this spinner wheel."})}):h.jsxs(yt,{position:"fixed",top:"0",left:"0",w:"100vw",h:"100vh",bg:"#E6F3FF",display:"flex",flexDirection:"column",zIndex:1,overflow:n.isZoomed?"visible":"auto",children:[h.jsx(dc,{gameTitle:"Spinner Wheel",variant:"compact"}),h.jsx(yt,{flex:"1",display:"flex",justifyContent:"center",alignItems:"center",p:{base:2,sm:4,md:6},overflow:"hidden",children:h.jsx(yt,{w:"100%",maxW:{base:"100%",sm:"90%",md:"600px"},fontFamily:"'Comic Neue', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif",bg:"#E6F3FF",borderRadius:{base:"lg",md:"xl"},position:"relative",display:"flex",flexDirection:"column",alignItems:"center",minH:"0",children:h.jsxs($t,{spacing:{base:3,sm:4,md:6},w:"100%",align:"center",children:[!n.isZoomed&&h.jsx($t,{spacing:2,textAlign:"center",children:h.jsxs(Br,{size:o,color:"blue.600",children:[" ",e.title||"Spinner Wheel"]})}),h.jsxs(yt,{bg:"#E6F3FF",p:i,borderRadius:{base:"lg",md:"xl"},shadow:n.isZoomed?"none":"lg",position:"relative",w:"100%",display:"flex",justifyContent:"center",alignItems:"center",overflow:"visible",zIndex:n.isZoomed?999:1,children:[h.jsx(TQe,{items:n.items,rotation:n.rotation,isZoomed:n.isZoomed,zoomTarget:n.zoomTarget,spinning:n.spinning,wheelSize:r}),h.jsx(MQe,{isZoomed:n.isZoomed,selected:n.selected,items:n.items,config:e,onZoomOut:n.handleZoomOut,onRemoveSelected:n.removeSelectedItem,wheelSize:r})]}),h.jsx(PQe,{isZoomed:n.isZoomed,spinning:n.spinning,gameComplete:n.gameComplete,itemsLength:n.items.length,spinCount:n.spinCount,onSpin:n.spin,onReset:n.resetGame})]})})})]})},DQe=(t,e)=>{const r=t.replace(/[^\w]/g,"").split("");return RQe([...r],e)},RQe=(t,e)=>{const n=[...t],r=e==="low"?3:e==="medium"?5:8;for(let i=0;i<r;i++)for(let o=n.length-1;o>0;o--){const s=Math.floor(Math.random()*(o+1));[n[o],n[s]]=[n[s],n[o]]}return n},kQe=t=>t.anagrams.map((e,n)=>{const r=DQe(e.original,t.shuffleIntensity);return{id:e.id||n.toString(),original:e.original,definition:e.definition,difficulty:e.difficulty,scrambled:r,currentAnswer:new Array(e.original.length).fill(""),isCompleted:!1}}),IW=t=>t.toLowerCase().replace(/[^\w]/g,""),IQe=(t,e)=>{const n=t.join(""),r=IW(n),i=IW(e);return r===i},FQe=t=>{const e=Math.floor(t/60),n=t%60;return`${e}:${n.toString().padStart(2,"0")}`},OQe=(t,e,n)=>{const[r,i]=A.useState({gameStarted:!1,gameCompleted:!1,currentAnagramIndex:0,anagrams:[],score:0,timeElapsed:0,gameStats:{totalMisses:0,correctAnswers:0,timeElapsed:0,hintsUsed:0},showHint:!1,showDefinition:!1,highScores:[],showHighScoreModal:!1,isNewHighScore:!1,feedback:"",feedbackType:"info",showIncorrectFeedback:!1}),o=A.useRef(null),s=A.useRef(null),a=A.useRef(null);A.useEffect(()=>(l(),()=>{o.current&&clearInterval(o.current),s.current&&clearTimeout(s.current),a.current&&clearTimeout(a.current)}),[t]),A.useEffect(()=>{if(t.enableTextToSpeech&&Kv()&&r.gameStarted&&!r.gameCompleted&&r.anagrams.length>0){const g=r.anagrams[r.currentAnagramIndex];if(g){const x=setTimeout(()=>{tte(g.original)},500);return()=>clearTimeout(x)}}},[r.currentAnagramIndex,r.gameStarted,r.gameCompleted,t.enableTextToSpeech]),A.useEffect(()=>(r.gameStarted&&!r.gameCompleted?o.current=setInterval(()=>{i(g=>oe(B({},g),{timeElapsed:g.timeElapsed+1}))},1e3):o.current&&clearInterval(o.current),()=>{o.current&&clearInterval(o.current)}),[r.gameStarted,r.gameCompleted]);const l=A.useCallback(()=>{const g=kQe(t);i(x=>oe(B({},x),{anagrams:g,currentAnagramIndex:0,showHint:!1,showDefinition:!1}))},[t]),c=A.useCallback((g,x,w)=>{if(r.gameCompleted)return;const S=r.anagrams[r.currentAnagramIndex];if(!S.isCompleted){if(w==="scrambled"&&g){const D=S.currentAnswer.findIndex(P=>P==="");if(D===-1)return;const k=S.original[D];if(g.toLowerCase()===k.toLowerCase()){i(T=>{const _=[...T.anagrams];return _[T.currentAnagramIndex].currentAnswer[D]=g,_[T.currentAnagramIndex].scrambled[x]="",oe(B({},T),{anagrams:_})});const P=[...S.currentAnswer];P[D]=g,P.every(T=>T!=="")&&setTimeout(()=>u(),500)}else i(P=>oe(B({},P),{showIncorrectFeedback:!0,gameStats:oe(B({},P.gameStats),{totalMisses:P.gameStats.totalMisses+1})})),a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{i(P=>oe(B({},P),{showIncorrectFeedback:!1}))},250);return}if(w==="answer"&&g){const D=S.scrambled.findIndex(k=>k==="");D!==-1&&i(k=>{const P=[...k.anagrams];return P[k.currentAnagramIndex].scrambled[D]=g,P[k.currentAnagramIndex].currentAnswer[x]="",oe(B({},k),{anagrams:P})})}}},[r.gameCompleted,r.anagrams,r.currentAnagramIndex]),u=A.useCallback(()=>{const g=r.anagrams[r.currentAnagramIndex];IQe(g.currentAnswer,g.original)?(i(w=>{const S=[...w.anagrams];return S[w.currentAnagramIndex].isCompleted=!0,oe(B({},w),{anagrams:S,feedback:`Correct! The word is "${g.original}"`,feedbackType:"success",gameStats:oe(B({},w.gameStats),{correctAnswers:w.gameStats.correctAnswers+1})})}),r.currentAnagramIndex===r.anagrams.length-1?setTimeout(()=>p(),2e3):setTimeout(()=>{i(w=>oe(B({},w),{currentAnagramIndex:w.currentAnagramIndex+1,showHint:!1,showDefinition:!1}))},2e3)):i(w=>oe(B({},w),{feedback:"Try again!",feedbackType:"error",gameStats:oe(B({},w.gameStats),{totalMisses:w.gameStats.totalMisses+1})})),s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{i(w=>oe(B({},w),{feedback:"",feedbackType:"info"}))},3e3)},[r.anagrams,r.currentAnagramIndex]),d=A.useCallback(()=>{r.showHint||i(g=>oe(B({},g),{showHint:!0,gameStats:oe(B({},g.gameStats),{hintsUsed:g.gameStats.hintsUsed+1})}))},[r.showHint]),f=A.useCallback(()=>{i(g=>oe(B({},g),{showDefinition:!g.showDefinition}))},[]),p=A.useCallback(()=>te(rt,null,function*(){const g=r.gameStats.totalMisses;i(x=>oe(B({},x),{gameCompleted:!0,score:g,gameStats:oe(B({},x.gameStats),{timeElapsed:x.timeElapsed})})),n(g)}),[r.gameStats.totalMisses,r.timeElapsed,e,n]),b=A.useCallback(()=>{i(g=>oe(B({},g),{gameStarted:!0,timeElapsed:0}))},[]),v=A.useCallback(()=>{i({gameStarted:!1,gameCompleted:!1,currentAnagramIndex:0,anagrams:[],score:0,timeElapsed:0,gameStats:{totalMisses:0,correctAnswers:0,timeElapsed:0,hintsUsed:0},showHint:!1,showDefinition:!1,highScores:[],showHighScoreModal:!1,isNewHighScore:!1,feedback:"",feedbackType:"info",showIncorrectFeedback:!1}),l()},[l]),m=A.useCallback(()=>{i(g=>oe(B({},g),{showHighScoreModal:!1}))},[]);return{gameState:r,handleLetterClick:c,checkAnswer:u,useHint:d,toggleDefinition:f,startGame:b,resetGame:v,closeHighScoreModal:m,formatTime:FQe}},NQe=({config:t,onStartGame:e})=>{const n=Jl("gray.50","gray.900"),r=Jl("white","gray.700");return h.jsx(yt,{minH:"100vh",bg:n,p:6,children:h.jsx(Ml,{children:h.jsxs(mc,{maxW:"lg",w:"full",bg:r,children:[h.jsxs(kv,{textAlign:"center",children:[h.jsx(Br,{size:"xl",color:"purple.500",mb:2,fontFamily:"'Comic Neue', sans-serif",children:" Anagram Challenge"}),h.jsx(dt,{color:"gray.600",fontSize:"lg",fontFamily:"'Comic Neue', sans-serif",children:"Unscramble the letters to form words!"})]}),h.jsx(pc,{children:h.jsxs($t,{spacing:6,children:[h.jsxs($t,{spacing:3,textAlign:"center",children:[h.jsx(dt,{fontSize:"md",color:"gray.700",fontFamily:"'Comic Neue', sans-serif",children:h.jsx("strong",{children:"How to Play:"})}),h.jsxs($t,{spacing:2,align:"start",fontSize:"sm",color:"gray.600",children:[h.jsx(dt,{fontFamily:"'Comic Neue', sans-serif",children:" Click letters in the correct order to spell the word"}),h.jsx(dt,{fontFamily:"'Comic Neue', sans-serif",children:" Letters must be placed sequentially from left to right"}),h.jsx(dt,{fontFamily:"'Comic Neue', sans-serif",children:" Click answer letters to move them back to scrambled area"}),h.jsx(dt,{fontFamily:"'Comic Neue', sans-serif",children:" Use hints and definitions if available"}),h.jsx(dt,{fontFamily:"'Comic Neue', sans-serif",children:" Fewer misses = better score!"})]})]}),h.jsxs($t,{spacing:2,textAlign:"center",children:[h.jsx(dt,{fontSize:"sm",color:"gray.600",fontFamily:"'Comic Neue', sans-serif",children:h.jsx("strong",{children:"Game Settings:"})}),h.jsxs(dt,{fontSize:"sm",color:"gray.600",fontFamily:"'Comic Neue', sans-serif",children:["Words: ",t.anagrams.length," | Shuffle: ",t.shuffleIntensity," | Hints: ",t.enableHints?"Enabled":"Disabled"]})]}),h.jsx(hn,{onClick:e,colorScheme:"purple",size:"lg",w:"full",fontSize:"lg",fontFamily:"'Comic Neue', sans-serif",children:"Start Game"})]})})]})})})},LQe=({html:t})=>h.jsx(yt,{dangerouslySetInnerHTML:{__html:t},sx:{"& strong":{fontWeight:"bold"},"& em":{fontStyle:"italic"},"& u":{textDecoration:"underline"},"& sub":{fontSize:"0.8em",verticalAlign:"sub"},"& sup":{fontSize:"0.8em",verticalAlign:"super"},fontFamily:"'Comic Neue', sans-serif"}}),BQe=({gameState:t,config:e,onLetterClick:n,onUseHint:r,onToggleDefinition:i})=>{const o=Jl("white","gray.700"),s=Jl("blue.50","blue.900"),a=Jl("blue.200","blue.600"),l=Jl("green.50","green.900"),c=Jl("green.200","green.600"),u=t.anagrams[t.currentAnagramIndex],d=()=>{u&&tte(u.original)},f=()=>{u!=null&&u.definition&&E6e(u.definition)};return u?h.jsxs(yt,{position:"relative",w:"full",children:[(t.feedback||t.showIncorrectFeedback)&&h.jsx(yt,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,pointerEvents:"none",children:t.showIncorrectFeedback?h.jsx(yt,{bg:"red.500",color:"white",borderRadius:"full",w:"80px",h:"80px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"3xl",fontWeight:"bold",fontFamily:"'Comic Neue', sans-serif",boxShadow:"lg",animation:"pulse 0.25s ease-in-out",children:""}):h.jsxs(_i,{status:t.feedbackType,borderRadius:"md",w:"auto",boxShadow:"lg",fontFamily:"'Comic Neue', sans-serif",children:[h.jsx(Si,{}),t.feedback]})}),h.jsx($t,{spacing:6,w:"full",children:h.jsx(mc,{w:"full",bg:o,children:h.jsx(pc,{p:6,children:h.jsxs($t,{spacing:8,children:[h.jsxs($t,{spacing:3,w:"full",children:[h.jsx(Br,{size:"sm",color:"gray.600",fontFamily:"'Comic Neue', sans-serif",children:"Scrambled Letters"}),h.jsx(gc,{wrap:"wrap",gap:2,justify:"center",minH:"60px",p:4,bg:s,border:"2px dashed",borderColor:a,borderRadius:"md",w:"100%",maxW:"100%",children:u.scrambled.map((p,b)=>h.jsx(yt,{w:{base:"40px",sm:"45px",md:"50px"},h:{base:"40px",sm:"45px",md:"50px"},minW:{base:"40px",sm:"45px",md:"50px"},border:"2px solid",borderColor:p?"blue.300":"gray.300",borderRadius:"md",display:"flex",alignItems:"center",justifyContent:"center",bg:p?"white":"gray.100",cursor:p?"pointer":"default",onClick:()=>n(p,b,"scrambled"),_hover:p?{transform:"translateY(-2px)",boxShadow:"md"}:{},transition:"all 0.2s",fontSize:{base:"lg",sm:"xl",md:"xl"},fontWeight:"bold",fontFamily:"'Comic Neue', sans-serif",color:p?"blue.600":"gray.400",flexShrink:0,children:p},b))})]}),h.jsxs($t,{spacing:3,w:"full",children:[h.jsx(Br,{size:"sm",color:"gray.600",fontFamily:"'Comic Neue', sans-serif",children:"Your Answer"}),h.jsx(gc,{wrap:"nowrap",gap:2,justify:"center",minH:"60px",p:4,bg:l,border:"2px dashed",borderColor:c,borderRadius:"md",overflowX:"auto",w:"100%",maxW:"100%",children:u.currentAnswer.map((p,b)=>h.jsx(yt,{w:{base:"40px",sm:"45px",md:"50px"},h:{base:"40px",sm:"45px",md:"50px"},minW:{base:"40px",sm:"45px",md:"50px"},border:"2px solid",borderColor:p?"green.300":"gray.300",borderRadius:"md",display:"flex",alignItems:"center",justifyContent:"center",bg:p?"white":"gray.100",cursor:p?"pointer":"default",onClick:()=>n(p,b,"answer"),_hover:p?{transform:"translateY(-2px)",boxShadow:"md"}:{},transition:"all 0.2s",fontSize:{base:"lg",sm:"xl",md:"xl"},fontWeight:"bold",fontFamily:"'Comic Neue', sans-serif",color:p?"green.600":"gray.400",flexShrink:0,children:p},b))})]}),h.jsxs($t,{spacing:3,w:"full",children:[h.jsxs(Ln,{spacing:4,wrap:"wrap",justify:"center",children:[e.enableHints&&h.jsx(hn,{onClick:r,colorScheme:"cyan",variant:"outline",size:"sm",fontFamily:"'Comic Neue', sans-serif",isDisabled:t.showHint,children:t.showHint?" Hint Shown":" Show Hint"}),e.showDefinitions&&u.definition&&h.jsx(hn,{onClick:i,colorScheme:"blue",variant:"outline",size:"sm",fontFamily:"'Comic Neue', sans-serif",leftIcon:t.showDefinition?h.jsx(Yv,{}):h.jsx(I6e,{}),children:"Definition"}),e.enableTextToSpeech&&Kv()&&h.jsxs(h.Fragment,{children:[h.jsx(hn,{onClick:d,colorScheme:"purple",variant:"outline",size:"sm",fontFamily:"'Comic Neue', sans-serif",children:" Speak Word"}),e.showDefinitions&&u.definition&&h.jsx(hn,{onClick:f,colorScheme:"orange",variant:"outline",size:"sm",fontFamily:"'Comic Neue', sans-serif",children:" Speak Definition"})]})]}),e.enableHints&&h.jsx(wC,{in:t.showHint,children:h.jsxs(_i,{status:"info",borderRadius:"md",fontFamily:"'Comic Neue', sans-serif",children:[h.jsx(Si,{}),h.jsxs(dt,{fontSize:"sm",children:[" First letter: ",h.jsx("strong",{children:u.original[0]})]})]})}),e.showDefinitions&&u.definition&&h.jsx(wC,{in:t.showDefinition,children:h.jsxs(_i,{status:"info",borderRadius:"md",fontFamily:"'Comic Neue', sans-serif",children:[h.jsx(Si,{}),h.jsxs(yt,{fontSize:"sm",children:[h.jsx(dt,{as:"span",fontWeight:"bold",children:" Definition:"})," ",h.jsx(LQe,{html:u.definition})]})]})})]})]})})})})]}):null},jQe=({gameState:t,formatTime:e,onResetGame:n})=>{const r=Jl("gray.50","gray.900"),i=Jl("white","gray.700");return h.jsx(yt,{minH:"100vh",bg:r,p:6,children:h.jsx(Ml,{children:h.jsxs(mc,{maxW:"lg",w:"full",bg:i,children:[h.jsx(kv,{textAlign:"center",children:h.jsx(Br,{size:"xl",color:"green.500",mb:2,fontFamily:"'Comic Neue', sans-serif",children:" Game Complete!"})}),h.jsx(pc,{children:h.jsxs($t,{spacing:6,children:[h.jsxs(EC,{templateColumns:"1fr 1fr",gap:6,w:"full",children:[h.jsxs(By,{textAlign:"center",children:[h.jsx(Uy,{fontFamily:"'Comic Neue', sans-serif",children:"Total Misses"}),h.jsx(zy,{color:"purple.500",fontSize:"3xl",fontFamily:"'Comic Neue', sans-serif",children:t.score}),h.jsx(jy,{fontFamily:"'Comic Neue', sans-serif",children:"Fewer misses = better score!"})]}),h.jsxs(By,{textAlign:"center",children:[h.jsx(Uy,{fontFamily:"'Comic Neue', sans-serif",children:"Time"}),h.jsx(zy,{color:"orange.500",fontSize:"3xl",fontFamily:"'Comic Neue', sans-serif",children:e(t.timeElapsed)}),h.jsx(jy,{fontFamily:"'Comic Neue', sans-serif",children:"Total time"})]})]}),h.jsxs(EC,{templateColumns:"1fr 1fr",gap:6,w:"full",children:[h.jsxs(By,{textAlign:"center",children:[h.jsx(Uy,{fontFamily:"'Comic Neue', sans-serif",children:"Correct"}),h.jsxs(zy,{color:"green.500",fontSize:"2xl",fontFamily:"'Comic Neue', sans-serif",children:[t.gameStats.correctAnswers," / ",t.anagrams.length]}),h.jsx(jy,{fontFamily:"'Comic Neue', sans-serif",children:"Words solved"})]}),h.jsxs(By,{textAlign:"center",children:[h.jsx(Uy,{fontFamily:"'Comic Neue', sans-serif",children:"Accuracy"}),h.jsxs(zy,{color:"blue.500",fontSize:"2xl",fontFamily:"'Comic Neue', sans-serif",children:[t.gameStats.totalMisses+t.gameStats.correctAnswers>0?Math.round(t.gameStats.correctAnswers/(t.gameStats.totalMisses+t.gameStats.correctAnswers)*100):100,"%"]}),h.jsx(jy,{fontFamily:"'Comic Neue', sans-serif",children:"Success rate"})]})]}),h.jsx(Ln,{spacing:4,w:"full",justify:"center",children:h.jsx(hn,{onClick:n,colorScheme:"purple",size:"lg",leftIcon:h.jsx(nte,{}),fontFamily:"'Comic Neue', sans-serif",children:"Play Again"})})]})})]})})})},UQe=({playerName:t,onGameComplete:e,config:n})=>{const r=OQe(n,t,e),{gameState:i}=r;return i.gameStarted?i.gameCompleted?h.jsxs(yt,{w:"100%",minH:"100vh",display:"flex",flexDirection:"column",children:[h.jsx(dc,{gameTitle:"Anagram",variant:"compact"}),h.jsx(yt,{flex:1,overflow:"auto",children:h.jsx(jQe,{gameState:i,onResetGame:r.resetGame,formatTime:r.formatTime})})]}):h.jsxs(yt,{w:"100%",minH:"100vh",display:"flex",flexDirection:"column",children:[h.jsx(dc,{gameTitle:"Anagram",variant:"compact"}),h.jsx(yt,{flex:1,overflow:"auto",children:h.jsx(BQe,{gameState:i,config:n,onLetterClick:r.handleLetterClick,onUseHint:r.useHint,onToggleDefinition:r.toggleDefinition})})]}):h.jsxs(yt,{w:"100%",minH:"100vh",display:"flex",flexDirection:"column",children:[h.jsx(dc,{gameTitle:"Anagram",variant:"compact"}),h.jsx(yt,{flex:1,overflow:"auto",children:h.jsx(NQe,{config:n,onStartGame:r.startGame})})]})},une=({config:t,playerName:e,onGameComplete:n})=>t.type!=="anagram"?h.jsx("div",{children:"Error: Invalid game configuration"}):h.jsx(UQe,{config:t,playerName:e,onGameComplete:n}),zQe=({anagram:t,onComplete:e,onHintUsed:n,showDefinition:r,enableHints:i,enableTextToSpeech:o=!1,correctFeedbackDuration:s="momentary"})=>{const[a,l]=A.useState([]),[c,u]=A.useState(0),[d,f]=A.useState(0),[p,b]=A.useState(null),[v,m]=A.useState(!1),[g,x]=A.useState(!1),[w,S]=A.useState(!1),[D,k]=A.useState(null),[P,M]=A.useState(new Set),T=A.useRef(null),_=A.useRef(new Map),[E,R]=A.useState(null),[F,L]=A.useState(!1),[N,U]=A.useState({x:0,y:0}),[H,j]=A.useState(null);A.useEffect(()=>($(),()=>{_.current.forEach(Oe=>clearTimeout(Oe)),_.current.clear()}),[t.id]),A.useEffect(()=>{if(F){const Oe=le=>{U({x:le.clientX,y:le.clientY}),z(le.clientX)};return document.addEventListener("mousemove",Oe),()=>document.removeEventListener("mousemove",Oe)}else j(null)},[F]),A.useEffect(()=>{const Oe=le=>{le.key==="Escape"&&F&&E&&(R(null),L(!1),j(null))};if(F)return document.addEventListener("keydown",Oe),()=>document.removeEventListener("keydown",Oe)},[F,E]);const z=Oe=>{const le=T.current;if(!le)return;const me=le.getBoundingClientRect();if(Oe<me.left||Oe>me.right){j(null);return}const ne=V(Oe,le);j(ne)},q=(Oe,le,me)=>{const ne=t.original.trim().split(/\s+/);return le>=0&&le<ne.length?ne[le]===Oe.text:!1},$=()=>{_.current.forEach(ne=>clearTimeout(ne)),_.current.clear(),M(new Set);const me=[...t.original.trim().split(/\s+/).map((ne,se)=>({id:`word-${se}`,text:ne,originalIndex:se,currentIndex:se,isCorrect:!1}))];for(let ne=me.length-1;ne>0;ne--){const se=Math.floor(Math.random()*(ne+1));[me[ne],me[se]]=[me[se],me[ne]],me[ne].currentIndex=ne,me[se].currentIndex=se}l(me),u(0),f(0),b(null),m(!1),x(!1),S(!1),k(null),R(null),L(!1),j(null)},K=()=>{v||(m(!0),b(Date.now()))},G=Oe=>{const le=_.current.get(Oe);if(le&&clearTimeout(le),M(me=>new Set([...me,Oe])),s==="momentary"){const me=setTimeout(()=>{M(ne=>{const se=new Set(ne);return se.delete(Oe),se}),_.current.delete(Oe)},1e3);_.current.set(Oe,me)}},Y=(Oe,le)=>{le.stopPropagation(),K(),!F&&!g?(R(Oe),L(!0),U({x:le.clientX,y:le.clientY})):F&&E&&E.id!==Oe.id&&(pe(E,Oe),R(null),L(!1),j(null))},J=Oe=>{if(F&&E){const le=T.current;if(le){const me=le.getBoundingClientRect(),ne=Oe.clientX,se=Oe.clientY;if(ne>=me.left&&ne<=me.right&&se>=me.top&&se<=me.bottom){const ge=V(ne,le);fe(E,ge),R(null),L(!1),j(null);return}}R(null),L(!1),j(null)}},V=(Oe,le)=>{const me=le.querySelectorAll(".draggable-word:not(.dragging-source)"),ne=E?a.findIndex(se=>se.id===E.id):-1;for(let se=0;se<me.length;se++){const Q=me[se].getBoundingClientRect();if(Oe<Q.left+Q.width/2)return ne!==-1&&se>=ne?se+1:se}return a.length},re=Oe=>{F&&E&&U({x:Oe.clientX,y:Oe.clientY})},fe=(Oe,le)=>{const me=a.findIndex(ue=>ue.id===Oe.id);if(me===-1)return;const ne=[...a],se=ne.splice(me,1)[0],ge=le>me?le-1:le;ne.splice(ge,0,se),ne.forEach((ue,Me)=>{const Pe=ue.isCorrect;ue.currentIndex=Me,ue.isCorrect=q(ue,Me),s==="always"?ue.isCorrect?M(je=>new Set([...je,ue.id])):M(je=>{const ke=new Set(je);return ke.delete(ue.id),ke}):!Pe&&ue.isCorrect&&G(ue.id)}),l(ne),u(ue=>ue+1);const W=!ne[ge].isCorrect;W&&f(ue=>ue+1),ne.every(ue=>ue.isCorrect)&&!g&&(x(!0),setTimeout(()=>{e(!0,d+(W?1:0))},1500))},pe=(Oe,le)=>{const me=a.findIndex(ne=>ne.id===le.id);me!==-1&&fe(Oe,me)},ce=()=>{if(!i||w)return;n();const Oe=a.findIndex(le=>!le.isCorrect);Oe!==-1&&(k(Oe),S(!0),setTimeout(()=>{S(!1),k(null)},3e3))},xe=()=>{$()},Ae=()=>{!o||!Kv()||_d(t.original,{rate:.8,pitch:1,volume:.8})},Ee=(Oe,le)=>{let me="draggable-word";return Oe.isCorrect&&P.has(Oe.id)&&(me+=" correct"),E&&E.id===Oe.id&&(me+=" dragging-source"),w&&D===le&&(me+=" hint-highlight"),me},ee=()=>p?Math.round((Date.now()-p)/1e3):0;return h.jsxs("div",{className:"word-sentence-mode",onMouseMove:re,onClick:J,children:[h.jsx("div",{className:"game-header"}),h.jsxs("div",{className:"game-stats",children:[h.jsxs("div",{className:"stat-item",children:[h.jsx("span",{className:"stat-label",children:"Moves:"}),h.jsx("span",{className:"stat-value",children:c})]}),h.jsxs("div",{className:"stat-item",children:[h.jsx("span",{className:"stat-label",children:"Misses:"}),h.jsx("span",{className:"stat-value",children:d})]}),v&&h.jsxs("div",{className:"stat-item",children:[h.jsx("span",{className:"stat-label",children:"Time:"}),h.jsxs("span",{className:"stat-value",children:[ee(),"s"]})]})]}),h.jsx("div",{className:"sentence-container",ref:T,children:h.jsx("div",{className:"sentence-line",children:a.map((Oe,le)=>h.jsxs(Ot.Fragment,{children:[F&&H===le&&h.jsx("div",{className:"drop-zone-indicator"}),h.jsx("span",{className:Ee(Oe,le),onClick:me=>Y(Oe,me),title:g?"":"Click to pick up, click another word to swap",style:{opacity:E&&E.id===Oe.id?.3:1,cursor:g?"default":"pointer"},children:Oe.text}),F&&H===a.length&&le===a.length-1&&h.jsx("div",{className:"drop-zone-indicator"})]},Oe.id))})}),F&&E&&h.jsx("div",{style:{position:"fixed",left:N.x-30,top:N.y-15,background:"rgba(255, 255, 255, 0.95)",border:"2px solid #007bff",borderRadius:"8px",padding:"5px 10px",fontSize:"clamp(1rem, 4vw, 1.4rem)",fontWeight:"bold",color:"#007bff",pointerEvents:"none",zIndex:1e3,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",transform:"rotate(-2deg)",whiteSpace:"nowrap"},children:E.text}),w&&D!==null&&h.jsx("div",{className:"hint-area",children:h.jsxs("p",{children:[' The word "',h.jsx("strong",{children:a[D].text}),'" needs to be moved to a correct position']})}),h.jsxs("div",{className:"game-controls",children:[o&&Kv()&&h.jsx("button",{className:"tts-button",onClick:Ae,title:"Listen to the correct sentence",children:" Listen"}),i&&!g&&!w&&h.jsx("button",{className:"hint-button",onClick:ce,children:"Show Hint"}),h.jsx("button",{className:"reset-button",onClick:xe,disabled:g,children:"Reset"})]}),g&&h.jsxs("div",{className:"completion-message",children:[h.jsx("h3",{children:" Perfect! You arranged the sentence correctly!"}),h.jsxs("div",{className:"completion-stats",children:[h.jsxs("p",{children:["Completed with ",h.jsx("strong",{children:d})," misses in ",h.jsx("strong",{children:c})," moves and ",h.jsx("strong",{children:ee()})," seconds"]}),h.jsx("p",{children:h.jsx("em",{children:"Fewer misses = better score!"})})]})]})]})},VQe=(t,e,n)=>{const[r,i]=A.useState(!1),[o,s]=A.useState(!1),[a,l]=A.useState(0),[c,u]=A.useState([]),[d,f]=A.useState(0),[p,b]=A.useState(0),[v,m]=A.useState({totalMisses:0,correctAnswers:0,timeElapsed:0,hintsUsed:0}),g=A.useRef(null);A.useEffect(()=>(x(),i(!0),b(0),()=>{g.current&&clearInterval(g.current)}),[t]),A.useEffect(()=>(r&&!o?g.current=setInterval(()=>{b(P=>P+1)},1e3):g.current&&clearInterval(g.current),()=>{g.current&&clearInterval(g.current)}),[r,o]);const x=()=>{const P=t.sentences.map((M,T)=>({id:M.id||T.toString(),original:M.original,definition:M.definition,difficulty:M.difficulty,currentAnswer:[],isCompleted:!1}));u(P)},w=()=>te(rt,null,function*(){s(!0);const P=v.totalMisses;m(M=>oe(B({},M),{timeElapsed:p})),f(P),n(P)});return{gameStarted:r,gameCompleted:o,currentSentenceIndex:a,sentences:c,score:d,timeElapsed:p,gameStats:v,resetGame:()=>{i(!0),s(!1),l(0),f(0),b(0),m({totalMisses:0,correctAnswers:0,timeElapsed:0,hintsUsed:0}),x()},handleSentenceComplete:(P,M)=>{const T=[...c];P?(T[a].isCompleted=!0,m(_=>oe(B({},_),{correctAnswers:_.correctAnswers+1,totalMisses:_.totalMisses+M})),a===c.length-1?setTimeout(()=>w(),2e3):setTimeout(()=>{l(_=>_+1)},2e3)):m(_=>oe(B({},_),{totalMisses:_.totalMisses+M})),u(T)},handleHintUsed:()=>{m(P=>oe(B({},P),{hintsUsed:P.hintsUsed+1}))},currentSentence:c[a]}},WQe=({currentSentenceIndex:t,totalSentences:e,gameStats:n,timeElapsed:r,formatTime:i})=>{const o=Jl("white","gray.700");return h.jsx(mc,{w:"full",bg:o,children:h.jsx(pc,{p:4,children:h.jsxs($t,{spacing:3,children:[h.jsxs(Ln,{w:"full",justify:"space-between",children:[h.jsxs(po,{colorScheme:"blue",variant:"outline",children:["Sentence ",t+1," of ",e]}),h.jsxs(po,{colorScheme:"green",variant:"outline",children:["Misses: ",n.totalMisses]}),h.jsxs(po,{colorScheme:"orange",variant:"outline",children:["Time: ",i(r)]})]}),h.jsxs(yt,{w:"full",children:[h.jsx(dt,{fontSize:"sm",mb:1,color:"gray.600",children:"Progress"}),h.jsx($X,{value:t/e*100,colorScheme:"blue",size:"md",borderRadius:"full"})]})]})})})},$Qe=t=>{const e=Math.floor(t/60),n=t%60;return`${e}:${n.toString().padStart(2,"0")}`},HQe=({playerName:t,onGameComplete:e,config:n})=>{var s,a,l;const r=Jl("gray.50","gray.900"),i=VQe(n,t,e),o=A.useMemo(()=>i.currentSentence?{id:i.currentSentence.id,original:i.currentSentence.original,definition:i.currentSentence.definition}:null,[(s=i.currentSentence)==null?void 0:s.id,(a=i.currentSentence)==null?void 0:a.original,(l=i.currentSentence)==null?void 0:l.definition]);return i.currentSentence?h.jsx(yt,{minH:"100vh",bg:r,p:4,children:h.jsxs($t,{spacing:6,maxW:"4xl",mx:"auto",children:[h.jsx(dc,{gameTitle:"Sentence Sense",variant:"compact"}),h.jsx(WQe,{currentSentenceIndex:i.currentSentenceIndex,totalSentences:i.sentences.length,gameStats:i.gameStats,timeElapsed:i.timeElapsed,formatTime:$Qe}),h.jsx(yt,{w:"full",children:h.jsx(zQe,{anagram:o,onComplete:i.handleSentenceComplete,onHintUsed:i.handleHintUsed,showDefinition:!1,enableHints:n.showHints,enableTextToSpeech:n.enableTextToSpeech})})]})}):h.jsx(yt,{minH:"100vh",bg:r,children:h.jsx(Ml,{h:"100vh",children:h.jsxs($t,{spacing:4,children:[h.jsx(Oa,{size:"xl",color:"blue.500",thickness:"4px"}),h.jsx(dt,{color:"gray.600",children:"Loading sentence..."})]})})})},dne=({config:t,playerName:e,onGameComplete:n})=>t.type!=="sentence-sense"?h.jsx("div",{children:"Error: Invalid game configuration"}):h.jsx(HQe,{config:t,playerName:e,onGameComplete:n}),GQe=(t,e,n)=>{const r=n.numberOfCards;if(n.includeDecimal&&n.decimalPlaces,t<r){const o=r-1-t;return["ones","tens","hundreds","thousands","ten thousands"][o]||`10^${o}`}else{const o=t-r;return["tenths","hundredths","thousandths"][o]||`10^${-(o+1)}`}},qQe=(t,e)=>{const n=t.filter(o=>o.position==="slot").sort((o,s)=>(o.slotIndex||0)-(s.slotIndex||0));if(n.length===0)return"";const r=[],i=e.numberOfCards;return e.includeDecimal,n.forEach((o,s)=>{let a;if(s<i){const l=Math.pow(10,i-1-s);a=o.digit*l}else{const l=s-i+1,c=Math.pow(10,-l);a=o.digit*c}a>0&&(a>=1?r.push(a.toLocaleString()):r.push(a.toString()))}),r.join(" + ")},KQe=(t,e)=>{if(t.filter(i=>i.position==="slot").sort((i,o)=>(i.slotIndex||0)-(o.slotIndex||0)).length===0)return"";const r=NF(t,e);return YQe(r,e)},YQe=(t,e)=>{if(t===0)return"zero";const n=["","one","two","three","four","five","six","seven","eight","nine"],r=["ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],i=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"];if(e.includeDecimal&&t%1!==0){const o=Math.floor(t),s=t-o;let a="";o>0?a+=JD(o,n,r,i):a+="zero",a+=" and ";const l=s.toFixed(e.decimalPlaces).slice(2),c=parseInt(l);return c>0?(a+=JD(c,n,r,i),e.decimalPlaces===1?a+=c===1?" tenth":" tenths":e.decimalPlaces===2?a+=c===1?" hundredth":" hundredths":e.decimalPlaces===3&&(a+=c===1?" thousandth":" thousandths")):(a+="zero",e.decimalPlaces===1?a+=" tenths":e.decimalPlaces===2?a+=" hundredths":e.decimalPlaces===3&&(a+=" thousandths")),a}return JD(Math.floor(t),n,r,i)},JD=(t,e,n,r)=>{const i=[];let o=t;if(o>=1e4){const a=Math.floor(o/1e4),l=Math.floor(o%1e4/1e3);a>=1&&l>=1?a*10+l>=20?i.push(r[a]+"-"+e[l]+" thousand,"):a*10+l>=10&&i.push(n[a*10+l-10]+" thousand,"):a>=1&&l===0&&i.push(r[a]+" thousand,"),o=o%1e3}else if(o>=1e3){const a=Math.floor(o/1e3);a>=1&&i.push(e[a]+" thousand,"),o=o%1e3}if(o>=100){const a=Math.floor(o/100);o%100>0?i.push(e[a]+" hundred,"):i.push(e[a]+" hundred"),o=o%100}if(o>0)if(i.length>0&&i.push("and"),o>=20){const a=Math.floor(o/10),l=o%10;l>0?i.push(r[a]+"-"+e[l]):i.push(r[a])}else o>=10?i.push(n[o-10]):i.push(e[o]);return i.join(" ").replace(/,$/,"")},FW=t=>{const e=t.numberOfCards+(t.includeDecimal?t.decimalPlaces:0),n=[];for(let r=0;r<e;r++)n.push({id:`card-${Math.random().toString(36).substring(7)}`,digit:Math.floor(Math.random()*10),position:"deck"});return n},XQe=(t,e)=>{const{objective:n,aiDifficulty:r}=e;let i=[...t];return console.log(" TEACHER MOVE:",{objective:n,aiDifficulty:r,originalCards:t.map(o=>o.digit),includeDecimal:e.includeDecimal,decimalPlaces:e.decimalPlaces}),r==="easy"?i=t.sort(()=>Math.random()-.5):r==="medium"?Math.random()>.3?i=t.sort((o,s)=>n==="largest"?s.digit-o.digit:o.digit-s.digit):i=t.sort(()=>Math.random()-.5):i=t.sort((o,s)=>n==="largest"?s.digit-o.digit:o.digit-s.digit),console.log(" TEACHER ARRANGED:",i.map(o=>o.digit)),i.map((o,s)=>oe(B({},o),{position:"slot",slotIndex:s}))},NF=(t,e)=>{const n=t.filter(s=>s.position==="slot").sort((s,a)=>(s.slotIndex||0)-(a.slotIndex||0));if(n.length===0)return 0;const r=e.numberOfCards;if(!e.includeDecimal)return parseInt(n.map(s=>s.digit).join(""));let o=0;return n.forEach((s,a)=>{if(a<r){const l=Math.pow(10,r-1-a);o+=s.digit*l}else{const l=a-r+1,c=Math.pow(10,-l);o+=s.digit*c}}),o},QQe=(t,e,n)=>(console.log(" WINNER DETERMINATION:",{studentNumber:t,teacherNumber:e,objective:n,studentWins:n==="smallest"?t<e:t>e}),n==="largest"?t>e?"student":e>t?"teacher":"tie":t<e?"student":e<t?"teacher":"tie"),ZQe=(t,e)=>{const n=e.numberOfCards+(e.includeDecimal?e.decimalPlaces:0);return t.filter(i=>i.position==="slot").length===n},JQe=(t,e)=>{var b;console.log(" [PlaceValueShowdown] Config values received:",{numberOfCards:t.numberOfCards,includeDecimal:t.includeDecimal,decimalPlaces:t.decimalPlaces,totalSlots:t.numberOfCards+(t.includeDecimal?t.decimalPlaces:0),fullConfig:t});const[n,r]=A.useState({phase:"dealing",round:0,studentScore:0,teacherScore:0,studentCards:[],teacherCards:[],studentNumber:null,teacherNumber:null,roundWinner:null,message:` In this game, each of you will be dealt ${t.numberOfCards}${t.includeDecimal?` + ${t.decimalPlaces} decimal`:""} digit cards. Your mission is to drag and drop them into the slots to create the ${t.objective} number possible! The winner of each round earns 1 point! First to ${t.winningScore} points wins!`,isStudentReady:!1,isTeacherReady:!1}),[i,o]=A.useState({selectedCard:null,isCardSelected:!1,ghostPosition:{x:0,y:0}}),s=A.useRef(!1),a=A.useCallback(()=>{const v=FW(t),m=FW(t);r(g=>oe(B({},g),{phase:"dealing",round:g.round+1,studentCards:v,teacherCards:m,studentNumber:null,teacherNumber:null,roundWinner:null,isStudentReady:!1,isTeacherReady:!1,message:" Shuffling the cards..."})),setTimeout(()=>{r(g=>oe(B({},g),{phase:"arranging",message:`Now, arrange your cards to make the ${t.objective} number possible! Just click and drag your cards into the number slots.`})),setTimeout(()=>{r(g=>{const x=XQe(g.teacherCards,t);return oe(B({},g),{teacherCards:x,isTeacherReady:!0})})},2e3+Math.random()*3e3)},1500)},[t]);A.useEffect(()=>{s.current||(s.current=!0,setTimeout(()=>{t.numberOfCards+(t.includeDecimal?t.decimalPlaces:0),r(v=>oe(B({},v),{message:` Let's get started! ${t.includeDecimal?`We'll be working with ${t.numberOfCards} whole number cards and ${t.decimalPlaces} decimal place cards.`:`We'll be working with ${t.numberOfCards} digit cards.`}`})),setTimeout(()=>{a()},1500)},3e3))},[a,t]),A.useEffect(()=>{if(n.isStudentReady&&n.isTeacherReady&&n.phase==="arranging"){const v=NF(n.studentCards,t),m=NF(n.teacherCards,t),g=QQe(v,m,t.objective),x=n.studentScore+(g==="student"?1:0),w=n.teacherScore+(g==="teacher"?1:0);r(S=>oe(B({},S),{phase:"revealing",studentNumber:v,teacherNumber:m,roundWinner:g,studentScore:x,teacherScore:w,message:"Let's see who made the better number!"})),(x>=t.winningScore||w>=t.winningScore)&&setTimeout(()=>{const S=x>w?t.playerName:t.teacherName;r(D=>oe(B({},D),{phase:"gameComplete",message:` That's game! The final score is: ${t.teacherName} ${w}, ${t.playerName} ${x}. And the grand winner is... ${S}! Great job practicing place value!`}))},2e3)}},[n.isStudentReady,n.isTeacherReady,n.phase,n.studentScore,n.teacherScore,t]),A.useEffect(()=>{ZQe(n.studentCards,t)&&!n.isStudentReady&&r(m=>oe(B({},m),{isStudentReady:!0}))},[n.studentCards,t,n.isStudentReady]),A.useEffect(()=>{if(n.phase==="gameComplete"){const v=n.studentScore;setTimeout(()=>{e(v)},3e3)}},[n.phase,n.studentScore,e]);const l=A.useCallback((v,m)=>{var g;n.phase==="arranging"&&(i.isCardSelected&&((g=i.selectedCard)==null?void 0:g.id)===v.id?o({selectedCard:null,isCardSelected:!1,ghostPosition:{x:0,y:0}}):o({selectedCard:v,isCardSelected:!0,ghostPosition:{x:m.clientX,y:m.clientY}}))},[n.phase,i.isCardSelected,(b=i.selectedCard)==null?void 0:b.id]),c=A.useCallback(v=>{!i.selectedCard||n.phase!=="arranging"||(r(m=>{const g=m.studentCards.map(x=>x.id===i.selectedCard.id?oe(B({},x),{position:"slot",slotIndex:v}):x.slotIndex===v?oe(B({},x),{position:"deck",slotIndex:void 0}):x);return oe(B({},m),{studentCards:g})}),o({selectedCard:null,isCardSelected:!1,ghostPosition:{x:0,y:0}}))},[i.selectedCard,n.phase]),u=A.useCallback(v=>{n.phase==="arranging"&&r(m=>oe(B({},m),{studentCards:m.studentCards.map(g=>g.id===v.id?oe(B({},g),{position:"deck",slotIndex:void 0}):g)}))},[n.phase]),d=A.useCallback(v=>{v.target===v.currentTarget&&i.isCardSelected&&o({selectedCard:null,isCardSelected:!1,ghostPosition:{x:0,y:0}})},[i.isCardSelected]),f=A.useCallback(()=>{n.roundWinner&&(n.studentScore>=t.winningScore||n.teacherScore>=t.winningScore||setTimeout(()=>{a()},500))},[n.roundWinner,n.studentScore,n.teacherScore,t.winningScore,a]),p=A.useCallback(v=>{i.isCardSelected&&o(m=>oe(B({},m),{ghostPosition:v}))},[i.isCardSelected]);return{gameState:n,selectionState:i,handlers:{handleCardClick:l,handleSlotClick:c,handleReturnToDeck:u,handleGameAreaClick:d,handleAdvanceToNextRound:f,updateGhostPosition:p}}},eZe=({config:t,gameState:e,showPlaceValueLabels:n,setShowPlaceValueLabels:r,showExpandedNumbers:i,setShowExpandedNumbers:o,showExpandedWords:s,setShowExpandedWords:a,onAdvanceToNextRound:l})=>h.jsxs("div",{className:"game-header",children:[h.jsxs("h2",{children:[" ",t.title,h.jsx("span",{className:`objective-indicator ${t.objective==="smallest"?"smallest":""}`,children:t.objective==="largest"?" LARGEST":" SMALLEST"})]}),h.jsxs("div",{className:"header-content",children:[h.jsxs("div",{className:"scoreboard",children:[h.jsxs("div",{className:"score",children:[h.jsx("span",{className:"player-name",children:t.teacherName}),h.jsx("span",{className:"points",children:e.teacherScore})]}),h.jsx("div",{className:"vs",children:"VS"}),h.jsxs("div",{className:"score",children:[h.jsx("span",{className:"player-name",children:t.playerName}),h.jsx("span",{className:"points",children:e.studentScore})]})]}),h.jsxs("div",{className:"header-controls",children:[h.jsx("button",{onClick:()=>r(!n),className:`feature-button compact ${n?"active":""}`,title:"Show Place Values",children:""}),h.jsx("button",{onClick:()=>o(!i),className:`feature-button compact ${i?"active":""}`,title:"Show Expanded Numbers",children:""}),h.jsx("button",{onClick:()=>a(!s),className:`feature-button compact ${s?"active":""}`,title:"Show Expanded Words",children:""})]}),e.phase==="revealing"&&h.jsx("button",{onClick:l,className:"continue-button compact",children:" Next Round"})]})]}),tZe=({children:t,showPlaceValueLabels:e,slotIndex:n,totalSlots:r,hasComma:i,config:o})=>h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"slot-container",children:[t,e&&h.jsx("div",{className:"place-value-label",children:GQe(n,r,o)})]}),i&&h.jsx("div",{className:"comma-separator",children:","})]}),OW=({isTeacher:t,config:e,gameState:n,showPlaceValueLabels:r,showExpandedNumbers:i,showExpandedWords:o,onSlotClick:s,onCardClick:a,onReturnToDeck:l,selectionState:c})=>{const u=t?n.teacherCards:n.studentCards,d=t?n.isTeacherReady:n.isStudentReady,f=t?n.teacherNumber:n.studentNumber,p=t?e.teacherName:e.playerName,b=t?"teacher-area":"student-area",v=t?"teacher-slot":"student-slot",m=t?"teacher-card":"student-card",g=e.numberOfCards+(e.includeDecimal?e.decimalPlaces:0);return console.log(" [PlayerArea] Slot calculation:",{isTeacher:t,playerName:p,numberOfCards:e.numberOfCards,includeDecimal:e.includeDecimal,decimalPlaces:e.decimalPlaces,totalSlots:g,configType:e.type}),h.jsxs("div",{className:`player-area ${b}`,children:[h.jsxs("h3",{children:[p,"'s Turn"]}),h.jsx("div",{className:"number-slots",children:Array.from({length:g},(x,w)=>{const S=u.find(P=>P.slotIndex===w),D=e.numberOfCards>=4&&w===e.numberOfCards-4,k=e.includeDecimal&&w===e.numberOfCards;return h.jsxs(Ot.Fragment,{children:[k&&h.jsx("div",{className:"decimal-point",children:h.jsx("div",{className:"decimal-dot",children:"."})}),h.jsx(tZe,{showPlaceValueLabels:r,slotIndex:w,totalSlots:g,hasComma:D,config:e,children:h.jsx("div",{className:`number-slot ${v} ${!t&&(c!=null&&c.isCardSelected)?"can-drop":""}`,onClick:()=>!t&&(s==null?void 0:s(w)),children:S&&h.jsx("div",{className:`card ${m} ${t&&n.phase==="revealing"?"revealed":""}`,onClick:()=>!t&&(l==null?void 0:l(S)),children:t&&n.phase!=="revealing"?"?":S.digit})})})]},w)})}),!t&&h.jsx("div",{className:"student-deck-container",children:h.jsx("div",{className:"student-deck",children:u.filter(x=>x.position==="deck").map(x=>{var w,S;return h.jsx("div",{className:`card ${m} deck-card ${((w=c==null?void 0:c.selectedCard)==null?void 0:w.id)===x.id?"selected":""}`,onClick:D=>a==null?void 0:a(x,D),style:{opacity:((S=c==null?void 0:c.selectedCard)==null?void 0:S.id)===x.id?.5:1},children:x.digit},x.id)})})}),t&&h.jsx("div",{className:"teacher-spacer"}),h.jsx("div",{className:"ready-indicator",style:{opacity:d&&n.phase==="arranging"?1:0,visibility:d&&n.phase==="arranging"?"visible":"hidden"},children:" Ready!"}),n.phase==="revealing"&&f!==null&&h.jsxs("div",{className:"inline-notation",children:[i&&h.jsxs("div",{className:"notation-line",children:[h.jsxs("strong",{children:[e.includeDecimal?f.toFixed(e.decimalPlaces):f.toLocaleString()," ="]})," ",qQe(u,e)]}),o&&h.jsxs("div",{className:"notation-line",children:[h.jsx("strong",{children:"In Words:"})," ",KQe(u,e)]})]})]})},nZe=({playerName:t,onGameComplete:e,config:n,onHighScoreProcessStart:r,onHighScoreProcessComplete:i})=>{const{currentUser:o}=Pr(),[s,a]=A.useState(!1),[l,c]=A.useState(!1),[u,d]=A.useState(!1),f=Ot.useMemo(()=>{const m=o&&n.userId&&o.uid!==n.userId;return oe(B({},n),{playerName:t||n.playerName,teacherName:m?"Teacher":n.teacherName})},[n,t,o]),{gameState:p,selectionState:b,handlers:v}=JQe(f,e);return A.useEffect(()=>{const m=g=>{b.isCardSelected&&v.updateGhostPosition({x:g.clientX,y:g.clientY})};return b.isCardSelected&&window.addEventListener("mousemove",m),()=>{window.removeEventListener("mousemove",m)}},[b.isCardSelected,v]),h.jsxs("div",{className:"place-value-showdown",onClick:v.handleGameAreaClick,children:[h.jsx("div",{style:{position:"absolute",top:"10px",left:"10px",right:"10px",zIndex:1e3},children:h.jsx(dc,{gameTitle:f.title,variant:"compact"})}),h.jsx(eZe,{config:f,gameState:p,showPlaceValueLabels:s,setShowPlaceValueLabels:a,showExpandedNumbers:l,setShowExpandedNumbers:c,showExpandedWords:u,setShowExpandedWords:d,onAdvanceToNextRound:v.handleAdvanceToNextRound}),(p.phase==="dealing"||p.phase==="gameComplete")&&h.jsx("div",{className:"game-message",children:h.jsx("p",{children:p.message})}),(p.phase==="dealing"||p.phase==="arranging"||p.phase==="revealing")&&h.jsxs("div",{className:"game-area",children:[h.jsx(OW,{isTeacher:!0,config:f,gameState:p,showPlaceValueLabels:s,showExpandedNumbers:l,showExpandedWords:u}),h.jsx(OW,{isTeacher:!1,config:f,gameState:p,showPlaceValueLabels:s,showExpandedNumbers:l,showExpandedWords:u,onSlotClick:v.handleSlotClick,onCardClick:v.handleCardClick,onReturnToDeck:v.handleReturnToDeck,selectionState:b})]}),p.phase==="gameComplete"&&h.jsxs("div",{className:"game-complete",children:[h.jsx("h2",{children:" Game Complete!"}),h.jsxs("div",{className:"final-scores",children:[h.jsx("p",{children:h.jsx("strong",{children:"Final Score:"})}),h.jsxs("p",{children:[f.teacherName,": ",p.teacherScore]}),h.jsxs("p",{children:[f.playerName,": ",p.studentScore]})]})]}),b.isCardSelected&&b.selectedCard&&h.jsx("div",{className:"ghost-card",style:{position:"fixed",left:b.ghostPosition.x-30,top:b.ghostPosition.y-40,pointerEvents:"none",zIndex:1e3,opacity:.8},children:h.jsx("div",{className:"card student-card",children:b.selectedCard.digit})})]})},fne=({playerName:t,onGameComplete:e,config:n,onHighScoreProcessStart:r,onHighScoreProcessComplete:i})=>n.type!=="place-value-showdown"?h.jsx("div",{children:"Error: Invalid game configuration"}):h.jsx(nZe,{config:n,playerName:t,onGameComplete:e,onHighScoreProcessStart:r,onHighScoreProcessComplete:i}),ri=800,jn=500,pg=15,Ou=35,v_=80,rZe=80,NW=12,Sy=10,_y=-5,LW=50,iZe={classic:{name:"Classic Pong",background:{type:"solid",primary:"#000000"},paddles:{player:"#00FF00",ai:"#FF0000"},ball:{target:"#87CEEB",nonTarget:"#87CEEB"},text:{primary:"#FFFFFF",secondary:"#CCCCCC",target:"#000000",nonTarget:"#000000",background:"rgba(255, 255, 255, 0.9)",fontFamily:"Comic Neue, cursive"},ui:{centerLine:"#444444",buttons:"#00FF00",accent:"#FFFF00"},effects:{targetGlow:"#00FF00",correctHit:"#00FF00",wrongHit:"#FF0000"}},space:{name:"Space Adventure",background:{type:"gradient",primary:"#0B0C2A",secondary:"#1E1A78"},paddles:{player:"#00D4FF",ai:"#FF6B35"},ball:{target:"#87CEEB",nonTarget:"#87CEEB"},text:{primary:"#FFFFFF",secondary:"#A4B0BE",target:"#000000",nonTarget:"#000000",background:"rgba(11, 12, 42, 0.8)",fontFamily:"Comic Neue, cursive"},ui:{centerLine:"#3742FA",buttons:"#00D4FF",accent:"#FFA502"},effects:{targetGlow:"#00FF94",correctHit:"#00FF94",wrongHit:"#FF4757"}},neon:{name:"Neon Cyber",background:{type:"gradient",primary:"#0F0F23",secondary:"#2E0249"},paddles:{player:"#FF00FF",ai:"#00FFFF"},ball:{target:"#87CEEB",nonTarget:"#87CEEB"},text:{primary:"#FFFFFF",secondary:"#FF00FF",target:"#000000",nonTarget:"#000000",background:"rgba(15, 15, 35, 0.9)",fontFamily:"Comic Neue, cursive"},ui:{centerLine:"#FF00FF",buttons:"#00FFFF",accent:"#FFFF00"},effects:{targetGlow:"#FFFF00",correctHit:"#FFFF00",wrongHit:"#FF0080"}},ocean:{name:"Ocean Depths",background:{type:"gradient",primary:"#1B263B",secondary:"#0F4C75"},paddles:{player:"#4ECDC4",ai:"#F38BA8"},ball:{target:"#87CEEB",nonTarget:"#87CEEB"},text:{primary:"#FFFFFF",secondary:"#B3E5FC",target:"#000000",nonTarget:"#000000",background:"rgba(27, 38, 59, 0.8)",fontFamily:"Comic Neue, cursive"},ui:{centerLine:"#4ECDC4",buttons:"#96CEB4",accent:"#FFD93D"},effects:{targetGlow:"#96CEB4",correctHit:"#96CEB4",wrongHit:"#FF8A80"}},forest:{name:"Enchanted Forest",background:{type:"gradient",primary:"#1B4332",secondary:"#2D5016"},paddles:{player:"#95D5B2",ai:"#F4A261"},ball:{target:"#87CEEB",nonTarget:"#87CEEB"},text:{primary:"#FFFFFF",secondary:"#D8F3DC",target:"#000000",nonTarget:"#000000",background:"rgba(27, 67, 50, 0.8)",fontFamily:"Comic Neue, cursive"},ui:{centerLine:"#52B788",buttons:"#74C69D",accent:"#F9C74F"},effects:{targetGlow:"#74C69D",correctHit:"#74C69D",wrongHit:"#E76F51"}}},oZe={targetWords:["cat","bat","hat","mat","sat","pat","fat","rat"],nonTargetWords:["dog","sun","pen","book","tree","car","fish","bird"],categoryName:"Short A Words",theme:"classic",initialSpeed:4,paddleSize:rZe,maxLives:3,speedIncrement:1,wordsPerLevel:10,enableSound:!0,gameTime:180},Vh=t=>{const e=Math.random()<.6,n=e?t.targetWords:t.nonTargetWords;return{text:n[Math.floor(Math.random()*n.length)],isTarget:e}},BW=(t,e,n,r,i,o,s)=>{const a=t-n,l=t+n,c=e-n,u=e+n,d=r,f=r+o,p=i,b=i+s;return l>=d&&a<=f&&u>=p&&c<=b},jW=(t,e,n)=>{let r=(t-e)/n;r=Zy(r,.1,.9);const i=Math.PI/4;return(r-.5)*2*i},Zy=(t,e,n)=>Math.min(Math.max(t,e),n),sZe=(t,e)=>{if("speechSynthesis"in window){const n=new SpeechSynthesisUtterance(t);n.rate=.8,n.pitch=e?1.2:.8,speechSynthesis.speak(n)}},aZe=t=>{const[e,n]=A.useState("idle"),[r,i]=A.useState(t),[o,s]=A.useState(0),[a,l]=A.useState(0),[c,u]=A.useState(t.maxLives),[d,f]=A.useState(1),[p,b]=A.useState(0),[v,m]=A.useState(t.gameTime||180),[g,x]=A.useState(0),[w,S]=A.useState(0),[D,k]=A.useState(0),[P,M]=A.useState(0),[T,_]=A.useState(0),[E,R]=A.useState(0),[F,L]=A.useState(!0),[N,U]=A.useState(0),[H,j]=A.useState(!1),[z,q]=A.useState({x:Math.round(ri/2),y:Math.round(jn/2),vx:0,vy:0,radius:Ou,word:Vh(r)}),[$,K]=A.useState({x:ri-pg,y:jn/2-r.paddleSize/2,width:pg,height:r.paddleSize}),[G,Y]=A.useState({x:0,y:jn/2-v_/2,width:pg,height:v_}),J=A.useRef(null),V=A.useRef(null),re=A.useRef(z),fe=A.useRef(G);re.current=z,fe.current=G;const pe=e==="playing";A.useCallback(()=>{const Q=r.initialSpeed,W=F?-Q:Q,ve=(Math.random()-.5)*2;return L(ue=>!ue),{x:Math.round(ri/2),y:Math.round(jn/2),vx:W,vy:ve,radius:Ou,word:Vh(r)}},[r,F]);const ce=A.useCallback(()=>{s(0),l(0),u(r.maxLives),f(1),b(0),m(r.gameTime||180),x(0),S(0),k(0),M(0),_(0),R(0),L(!0),j(!1),q({x:Math.round(ri/2),y:Math.round(jn/2),vx:0,vy:0,radius:Ou,word:Vh(r)}),K({x:ri-pg,y:jn/2-r.paddleSize/2,width:pg,height:r.paddleSize}),Y({x:0,y:jn/2-v_/2,width:pg,height:v_})},[r]),xe=A.useCallback(()=>{ce(),n("playing")},[ce]),Ae=A.useCallback(()=>{e==="playing"&&n("paused")},[e]),Ee=A.useCallback(()=>{e==="paused"&&n("playing")},[e]),ee=A.useCallback(()=>{n("idle"),ce()},[ce]),Oe=A.useCallback(()=>{n("gameOver")},[]),le=A.useCallback(Q=>{const W=Zy(Q-$.height/2,0,jn-$.height);K(ve=>oe(B({},ve),{y:W}))},[$.height]),me=A.useCallback(()=>{!H&&e==="playing"&&(j(!0),q(Q=>oe(B({},Q),{x:Math.round(Q.x),y:Math.round(Q.y),vx:-r.initialSpeed,vy:(Math.random()-.5)*2})))},[H,e,r.initialSpeed]),ne=A.useCallback(()=>{e==="playing"&&Y(Q=>{const W=re.current,ve=Q.y+Q.height/2,ue=W.y,Me=3,Pe=W.word.isTarget,je=W.vx<0;let ke=Q.y;if(je&&Pe)ue<ve-10?ke=Math.max(0,Q.y-Me):ue>ve+10&&(ke=Math.min(jn-Q.height,Q.y+Me));else if(je&&!Pe)Math.random()<.8?ue<ve?ke=Math.min(jn-Q.height,Q.y+Me*1.5):ke=Math.max(0,Q.y-Me*1.5):ue<ve-10?ke=Math.max(0,Q.y-Me*.5):ue>ve+10&&(ke=Math.min(jn-Q.height,Q.y+Me*.5));else{const De=jn/2-Q.height/2;Math.abs(ve-jn/2)>20&&(ve<jn/2?ke=Math.min(De,Q.y+Me*.5):ke=Math.max(De,Q.y-Me*.5))}return oe(B({},Q),{y:ke})})},[e]),se=A.useCallback(()=>{if(!pe||!H)return null;const Q=performance.now(),W=100;let ve=null;const ue=B({},z),Me=Math.round(ue.vx),Pe=Math.round(ue.vy);if(ue.x=Math.round(ue.x+Me),ue.y=Math.round(ue.y+Pe),ue.vx=Me,ue.vy=Pe,ue.y<=Ou||ue.y>=jn-Ou){const je=ue.y<=Ou?"top":"bottom",ke=ue.vx,De=ue.vy,nt=Math.sqrt(ke*ke+De*De),be=Math.abs(Math.atan2(De,ke)*180/Math.PI);console.log(` Ball hit ${je} wall:`),console.log(`  Original velocity: vx=${ke.toFixed(2)}, vy=${De.toFixed(2)}`),console.log(`  Original speed: ${nt.toFixed(2)}`),console.log(`  Original angle: ${be.toFixed(1)}`),ue.vy*=-1,ue.y=Zy(ue.y,Ou,jn-Ou);const Ne=Math.sqrt(ue.vx*ue.vx+ue.vy*ue.vy),Ie=25*Math.PI/180,Ve=Ne*Math.sin(Ie),Ue=Ne*Math.cos(Ie);if(console.log(`  After initial bounce: vx=${ue.vx.toFixed(2)}, vy=${ue.vy.toFixed(2)}`),console.log(`  Required min |vx| for 25 from vertical: ${Ve.toFixed(2)}, actual |vx|: ${Math.abs(ue.vx).toFixed(2)}`),console.log(`  Required max |vy| for 25 from vertical: ${Ue.toFixed(2)}, actual |vy|: ${Math.abs(ue.vy).toFixed(2)}`),Math.abs(ue.vx)<Ve){console.log("    Too vertical! Adding horizontal velocity..."),ue.vx=ue.vx>=0?Ve:-Ve;const tt=Math.sqrt(Ne*Ne-ue.vx*ue.vx);Math.abs(ue.vy)>tt&&(ue.vy=ue.vy>0?tt:-tt);const st=Math.sqrt(ue.vx*ue.vx+ue.vy*ue.vy),vt=Math.atan2(Math.abs(ue.vx),Math.abs(ue.vy))*180/Math.PI;console.log(`   Adjusted velocity: vx=${ue.vx.toFixed(2)}, vy=${ue.vy.toFixed(2)}`),console.log(`   Final speed: ${st.toFixed(2)}`),console.log(`   Final angle from vertical: ${vt.toFixed(1)}`)}else{const tt=Math.atan2(Math.abs(ue.vx),Math.abs(ue.vy))*180/Math.PI;console.log(`   Angle OK: ${tt.toFixed(1)} from vertical`)}ve={type:"bounce"}}if(ue.vx>0&&Q-N>W&&BW(ue.x,ue.y,ue.radius,$.x,$.y,$.width,$.height)){console.log(` Player Paddle hit at ball position: x=${ue.x.toFixed(1)}, y=${ue.y.toFixed(1)}`),console.log(`  Paddle position: x=${$.x}, y=${$.y.toFixed(1)}, height=${$.height}`),console.log(`  Ball velocity before: vx=${ue.vx.toFixed(2)}, vy=${ue.vy.toFixed(2)}`);const je=jW(ue.y,$.y,$.height),ke=Math.sqrt(ue.vx*ue.vx+ue.vy*ue.vy),De=Math.max(ke,r.initialSpeed);if(ue.vx=-De*Math.cos(je),ue.vy=De*Math.sin(je),ue.x=$.x-ue.radius-2,ue.y-ue.radius<0&&(ue.y=ue.radius+1,console.log("    Ball too close to top edge after paddle hit, adjusting y position")),ue.y+ue.radius>jn&&(ue.y=jn-ue.radius-1,console.log("    Ball too close to bottom edge after paddle hit, adjusting y position")),console.log(`  Ball velocity after: vx=${ue.vx.toFixed(2)}, vy=${ue.vy.toFixed(2)}`),console.log(`  Ball position after: x=${ue.x.toFixed(1)}, y=${ue.y.toFixed(1)}`),U(Q),ue.word.isTarget){s(be=>be+Sy),S(be=>be+1),x(be=>be+1);const nt=Zy(De+r.speedIncrement,r.initialSpeed,NW);ue.vx=-nt*Math.cos(je),ue.vy=nt*Math.sin(je),ve={type:"correct",points:Sy,word:ue.word},g+1>=d*r.wordsPerLevel&&(f(be=>be+1),s(be=>be+LW),ve={type:"levelUp",points:LW})}else s(nt=>Math.max(0,nt+_y)),k(nt=>nt+1),x(nt=>nt+1),ve={type:"wrong",points:_y,word:ue.word};ue.word=Vh(r)}if(ue.vx<0&&Q-N>W&&BW(ue.x,ue.y,ue.radius,G.x,G.y,G.width,G.height)){console.log(` AI Paddle hit at ball position: x=${ue.x.toFixed(1)}, y=${ue.y.toFixed(1)}`),console.log(`  Paddle position: x=${G.x}, y=${G.y.toFixed(1)}, height=${G.height}`),console.log(`  Ball velocity before: vx=${ue.vx.toFixed(2)}, vy=${ue.vy.toFixed(2)}`);const je=jW(ue.y,G.y,G.height),ke=Math.sqrt(ue.vx*ue.vx+ue.vy*ue.vy),De=Math.max(ke,r.initialSpeed);if(ue.vx=De*Math.cos(je),ue.vy=De*Math.sin(je),ue.x=G.x+G.width+ue.radius+2,ue.y-ue.radius<0&&(ue.y=ue.radius+1,console.log("    Ball too close to top edge after paddle hit, adjusting y position")),ue.y+ue.radius>jn&&(ue.y=jn-ue.radius-1,console.log("    Ball too close to bottom edge after paddle hit, adjusting y position")),console.log(`  Ball velocity after: vx=${ue.vx.toFixed(2)}, vy=${ue.vy.toFixed(2)}`),console.log(`  Ball position after: x=${ue.x.toFixed(1)}, y=${ue.y.toFixed(1)}`),U(Q),ue.word.isTarget){l(be=>be+Sy),_(be=>be+1),x(be=>be+1);const nt=Zy(De+r.speedIncrement,r.initialSpeed,NW);ue.vx=nt*Math.cos(je),ue.vy=nt*Math.sin(je),ve={type:"aiCorrect",points:Sy,word:ue.word}}else l(nt=>Math.max(0,nt+_y)),R(nt=>nt+1),x(nt=>nt+1),ve={type:"aiWrong",points:_y,word:ue.word};ue.word=Vh(r)}if(ue.x>ri+Ou){ue.word.isTarget&&(M(De=>De+1),s(De=>Math.max(0,De+_y)),ve={type:"miss",word:ue.word}),x(De=>De+1);const je=r.initialSpeed,ke=F?-je:je;L(De=>!De),ue.x=Math.round(ri/2),ue.y=Math.round(jn/2),ue.vx=ke,ue.vy=(Math.random()-.5)*4,ue.word=Vh(r)}if(ue.x<-35){ue.word.isTarget&&(s(De=>De+Sy),ve={type:"aiMiss",word:ue.word}),x(De=>De+1);const je=r.initialSpeed,ke=F?-je:je;L(De=>!De),ue.x=Math.round(ri/2),ue.y=Math.round(jn/2),ue.vx=ke,ue.vy=(Math.random()-.5)*4,ue.word=Vh(r)}return q(ue),ve},[pe,H,z,$,G,r,c,d,g,Oe,F,N]);A.useEffect(()=>(e==="playing"?J.current=setInterval(()=>{b(Q=>Q+1),m(Q=>{const W=Q-1;return W<=0?(Oe(),0):W})},1e3):J.current&&(clearInterval(J.current),J.current=null),()=>{J.current&&clearInterval(J.current)}),[e,Oe]),A.useEffect(()=>(e==="playing"?V.current=setInterval(ne,50):V.current&&(clearInterval(V.current),V.current=null),()=>{V.current&&clearInterval(V.current)}),[e,ne]),A.useEffect(()=>()=>{J.current&&clearInterval(J.current),V.current&&clearInterval(V.current)},[]);const ge=A.useCallback(()=>se(),[se]);return{gameState:e,settings:r,ball:z,playerPaddle:$,aiPaddle:G,ballMoving:H,score:o,aiScore:a,level:d,timeElapsed:p,timeRemaining:v,wordsProcessed:g,correctHits:w,wrongHits:D,missedTargets:P,aiCorrectHits:T,aiWrongHits:E,startGame:xe,pauseGame:Ae,resumeGame:Ee,resetGame:ee,endGame:Oe,updateBall:se,updatePlayerPaddle:le,startBallMovement:me,handleBallHit:ge,isGameActive:pe,updateSettings:i}},lZe={correct:"/sounds/pop.mp3",wrong:"/sounds/crack.mp3",bounce:"/sounds/cardboard.mp3",levelUp:"/sounds/unwrap.mp3",gameOver:"/sounds/crack.mp3",backgroundMusic:void 0},cZe=t=>{const[e,n]=A.useState(!1),[r,i]=A.useState(.7),o=B(B({},lZe),t),s=A.useRef(new Map),a=A.useRef(null);A.useEffect(()=>{if(Object.entries(o).forEach(([T,_])=>{if(T!=="backgroundMusic"&&_){const E=new Audio(_);E.volume=r,E.preload="auto",E.onerror=()=>{console.warn(`Failed to load audio file for ${T}: ${_}`),s.current.delete(T)},E.oncanplaythrough=()=>{console.log(`Successfully loaded audio for ${T}`)},s.current.set(T,E)}}),o.backgroundMusic){const T=new Audio(o.backgroundMusic);T.volume=r*.3,T.loop=!0,T.preload="auto",T.onerror=()=>{console.warn(`Failed to load background music: ${o.backgroundMusic}`),a.current=null},a.current=T}return()=>{s.current.forEach(T=>{T.pause(),T.src=""}),s.current.clear(),a.current&&(a.current.pause(),a.current.src="")}},[]),A.useEffect(()=>{s.current.forEach(T=>{T.volume=e?0:r}),a.current&&(a.current.volume=e?0:r*.3)},[r,e]);const l=A.useCallback((T,_=1)=>{if(!e)try{const E=new(window.AudioContext||window.webkitAudioContext),R=E.createOscillator(),F=E.createGain();R.connect(F),F.connect(E.destination);const L=r*_*.1;switch(T){case"correct":R.frequency.setValueAtTime(800,E.currentTime),R.frequency.exponentialRampToValueAtTime(1e3,E.currentTime+.1),F.gain.setValueAtTime(L,E.currentTime),F.gain.exponentialRampToValueAtTime(.01,E.currentTime+.15),R.type="sine";break;case"wrong":R.frequency.setValueAtTime(200,E.currentTime),R.frequency.exponentialRampToValueAtTime(150,E.currentTime+.2),F.gain.setValueAtTime(L,E.currentTime),F.gain.exponentialRampToValueAtTime(.01,E.currentTime+.3),R.type="sawtooth";break;case"bounce":R.frequency.setValueAtTime(400,E.currentTime),R.frequency.exponentialRampToValueAtTime(200,E.currentTime+.05),F.gain.setValueAtTime(L,E.currentTime),F.gain.exponentialRampToValueAtTime(.01,E.currentTime+.1),R.type="square";break;case"levelUp":R.frequency.setValueAtTime(400,E.currentTime),R.frequency.exponentialRampToValueAtTime(800,E.currentTime+.3),F.gain.setValueAtTime(L,E.currentTime),F.gain.exponentialRampToValueAtTime(.01,E.currentTime+.4),R.type="triangle";break;case"gameOver":R.frequency.setValueAtTime(300,E.currentTime),R.frequency.exponentialRampToValueAtTime(100,E.currentTime+.5),F.gain.setValueAtTime(L,E.currentTime),F.gain.exponentialRampToValueAtTime(.01,E.currentTime+.6),R.type="sawtooth";break;default:R.frequency.setValueAtTime(500,E.currentTime),F.gain.setValueAtTime(L,E.currentTime),F.gain.exponentialRampToValueAtTime(.01,E.currentTime+.1),R.type="sine"}R.start(E.currentTime),R.stop(E.currentTime+1)}catch(E){console.warn(`Failed to generate fallback sound for ${T}:`,E)}},[e,r]),c=A.useCallback((T,_=1)=>{if(e)return;const E=s.current.get(T);if(E){const R=E.cloneNode();R.volume=r*_,R.play().catch(F=>{console.warn(`Failed to play sound ${T}:`,F),l(T,_)})}else l(T,_)},[e,r,l]),u=A.useCallback(()=>{c("correct",1),"vibrate"in navigator&&navigator.vibrate([50,50,100])},[c]),d=A.useCallback(()=>{c("wrong",1),"vibrate"in navigator&&navigator.vibrate(200)},[c]),f=A.useCallback(()=>{c("bounce",.6)},[c]),p=A.useCallback(()=>{c("levelUp",1.2),"vibrate"in navigator&&navigator.vibrate([100,50,100,50,200])},[c]),b=A.useCallback(()=>{c("gameOver",1),"vibrate"in navigator&&navigator.vibrate([300,100,300])},[c]),v=A.useCallback(()=>{a.current&&!e&&a.current.play().catch(T=>{console.warn("Failed to play background music:",T)})},[e]),m=A.useCallback(()=>{a.current&&(a.current.pause(),a.current.currentTime=0)},[]),g=A.useCallback(()=>{a.current&&a.current.pause()},[]),x=A.useCallback(()=>{a.current&&!e&&a.current.play().catch(T=>{console.warn("Failed to resume background music:",T)})},[e]),w=A.useCallback(()=>{n(T=>!T)},[]),S=A.useCallback(T=>{i(Math.max(0,Math.min(1,T)))},[]),D=A.useCallback(()=>{if("AudioContext"in window||"webkitAudioContext"in window){const T=window.AudioContext||window.webkitAudioContext;return new T}return null},[]),k=A.useCallback((T,_)=>{if("speechSynthesis"in window&&!e){const E=new SpeechSynthesisUtterance(T);_&&(_.rate&&(E.rate=_.rate),_.pitch&&(E.pitch=_.pitch),_.voice&&(E.voice=_.voice)),speechSynthesis.speak(E)}},[e]),P=A.useCallback(()=>"speechSynthesis"in window?speechSynthesis.getVoices():[],[]),M=A.useCallback(T=>{if(!e&&"AudioContext"in window){const _=D();if(!_)return;const E=_.createOscillator(),R=_.createGain();switch(E.connect(R),R.connect(_.destination),T){case"click":E.frequency.setValueAtTime(800,_.currentTime),R.gain.setValueAtTime(.1,_.currentTime),R.gain.exponentialRampToValueAtTime(.01,_.currentTime+.1);break;case"hover":E.frequency.setValueAtTime(600,_.currentTime),R.gain.setValueAtTime(.05,_.currentTime),R.gain.exponentialRampToValueAtTime(.01,_.currentTime+.05);break;case"focus":E.frequency.setValueAtTime(1e3,_.currentTime),R.gain.setValueAtTime(.03,_.currentTime),R.gain.exponentialRampToValueAtTime(.01,_.currentTime+.03);break}E.start(),E.stop(_.currentTime+.1)}},[e,D]);return{isMuted:e,volume:r,playCorrectSound:u,playWrongSound:d,playBounceSound:f,playLevelUpSound:p,playGameOverSound:b,playUISound:M,startBackgroundMusic:v,stopBackgroundMusic:m,pauseBackgroundMusic:g,resumeBackgroundMusic:x,toggleMute:w,setVolume:S,speakText:k,getAvailableVoices:P,playSound:c,createAudioContext:D}};class uZe{constructor(e=200){oo(this,"cache",new Map);oo(this,"maxCacheSize");this.maxCacheSize=e}createCacheKey(e,n){const{fontSize:r,color:i,fontFamily:o,maxWidth:s,bold:a,italic:l,backgroundColor:c,padding:u}=n;return`${e}-${r}-${i}-${o}-${s||"auto"}-${a||!1}-${l||!1}-${c||"transparent"}-${u||4}`}preRenderText(e,n){const r=this.createCacheKey(e,n);if(this.cache.has(r))return this.cache.get(r);const i=document.createElement("canvas"),o=i.getContext("2d"),s=n.bold?"bold":"normal",a=n.italic?"italic":"normal";let l=n.fontSize;o.font=`${a} ${s} ${l}px ${n.fontFamily}`;let c=o.measureText(e);if(n.maxWidth)for(;c.width>n.maxWidth&&l>8;)l-=1,o.font=`${a} ${s} ${l}px ${n.fontFamily}`,c=o.measureText(e);const u=n.padding||4,d=Math.ceil(c.width)+u*2,f=Math.ceil(l*1.4)+u*2;i.width=d,i.height=f,o.font=`${a} ${s} ${l}px ${n.fontFamily}`,o.textAlign="center",o.textBaseline="middle",o.imageSmoothingEnabled=!1,n.backgroundColor&&(o.fillStyle=n.backgroundColor,o.fillRect(0,0,d,f));const p=d/2,b=f/2;o.fillStyle=n.color,o.fillText(e,p,b);const v={canvas:i,width:d,height:f,actualFontSize:l};if(this.cache.set(r,v),this.cache.size>this.maxCacheSize){const m=this.cache.keys().next().value;m&&this.cache.delete(m)}return v}drawPreRenderedText(e,n,r,i,o,s=!0){const a=this.preRenderText(n,o),l=Math.round(s?r-a.width/2:r),c=Math.round(s?i-a.height/2:i),u=e.imageSmoothingEnabled;e.imageSmoothingEnabled=!1,e.drawImage(a.canvas,l,c),e.imageSmoothingEnabled=u}clearCache(){this.cache.clear()}clearCachePattern(e){const n=[];for(const r of this.cache.keys())r.includes(e)&&n.push(r);n.forEach(r=>this.cache.delete(r))}getCacheSize(){return this.cache.size}getCacheStats(){return{size:this.cache.size,maxSize:this.maxCacheSize}}}const UW=new uZe(200),dZe=()=>h.jsxs(yt,{width:"60px",height:"60px",borderRadius:"8px",bg:"white",color:"#001f3f",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",fontSize:"2xl",fontWeight:"bold",transform:"rotate(90deg)",transition:"transform 0.3s ease",_hover:{transform:"rotate(90deg) scale(1.1)"},children:["",h.jsx(yt,{position:"absolute",top:"-8px",right:"-8px",width:"20px",height:"20px",borderRadius:"full",bg:"#007AFF",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"xs",children:""})]}),fZe=()=>h.jsx(yt,{position:"fixed",top:0,left:0,right:0,bottom:0,bg:"rgba(0, 31, 63, 0.95)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",children:h.jsx(Ml,{children:h.jsxs($t,{spacing:6,textAlign:"center",color:"white",p:8,children:[h.jsx(yt,{bg:"rgba(255, 255, 255, 0.1)",borderRadius:"20px",p:6,boxShadow:"0 0 30px rgba(255, 255, 255, 0.2)",border:"2px solid rgba(255, 255, 255, 0.3)",children:h.jsx(dZe,{})}),h.jsxs($t,{spacing:3,children:[h.jsx(dt,{fontSize:"xl",fontFamily:"'Comic Neue', cursive",textShadow:"1px 1px 2px rgba(0,0,0,0.3)",fontWeight:"bold",children:"Rotate Your Device"}),h.jsxs(dt,{fontSize:"lg",fontFamily:"'Comic Neue', cursive",textAlign:"center",lineHeight:"1.5",children:["For the best Word Volley experience,",`
`,"please rotate your device to landscape mode"]}),h.jsx(dt,{fontSize:"md",fontFamily:"'Comic Neue', cursive",opacity:.8,mt:2,children:" Turn your phone sideways"})]})]})})}),hZe=()=>{const[t,e]=A.useState(window.innerWidth>window.innerHeight);return A.useEffect(()=>{const n=()=>{e(window.innerWidth>window.innerHeight)};return window.addEventListener("resize",n),window.addEventListener("orientationchange",n),()=>{window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)}},[]),t},pZe=({gameConfig:t={},onGameComplete:e,onHighScoreProcessStart:n,onHighScoreProcessComplete:r,onGameExit:i,configId:o,playerName:s="Student"})=>{var br;const{currentUser:a,isTeacher:l}=Pr(),c=A.useRef(null),u=A.useRef(null),d=A.useRef(),[f,p]=A.useState(jn/2),b=hZe(),[v,m]=A.useState(ri),[g,x]=A.useState(jn),[w,S]=A.useState(1);A.useEffect(()=>{const _e=()=>{if(!u.current)return;u.current.getBoundingClientRect();const St=Math.min(window.innerWidth-40,1e3),Dt=Math.min(window.innerHeight-300,600),Nt=ri/jn,Zt=St/Dt;let Cn,wn,sr;Zt>Nt?(wn=Dt,Cn=wn*Nt,sr=wn/jn):(Cn=St,wn=Cn/Nt,sr=Cn/ri);const zn=400,ur=250;Cn<zn&&(Cn=zn,wn=zn/Nt,sr=Cn/ri),wn<ur&&(wn=ur,Cn=ur*Nt,sr=wn/jn),m(Math.round(Cn)),x(Math.round(wn)),S(sr)};return _e(),window.addEventListener("resize",_e),window.addEventListener("orientationchange",_e),()=>{window.removeEventListener("resize",_e),window.removeEventListener("orientationchange",_e)}},[]);const D=A.useRef(""),{highScores:k,isNewHighScore:P,showHighScoreModal:M,setShowHighScoreModal:T,saveHighScore:_,isSubmittingScore:E}=sne({gameType:"word-volley",configId:o||"default",scoringSystem:"points-based",enableRateLimit:!0,onHighScoreProcessStart:n,onHighScoreProcessComplete:r}),[R,F]=A.useState(!1),[L,N]=A.useState([]),[U,H]=A.useState(!1),j=A.useCallback(()=>te(rt,null,function*(){H(!0);try{const _e=Pn(xt,"highScores"),at=xr(_e,Vn("gameType","==","word-volley"),g0("score","desc"),Hf(10)),St=yield er(at),Dt=[];St.forEach(Nt=>{Dt.push(B({id:Nt.id},Nt.data()))}),N(Dt),F(!0)}catch(_e){console.error("Error loading general leaderboard:",_e),N([]),F(!0)}finally{H(!1)}}),[]),[z,q]=A.useState(!1),[$,K]=A.useState(!1),[G,Y]=A.useState(!0),[J,V]=A.useState(!1),[re,fe]=A.useState("classic"),[pe,ce]=A.useState((br=t.enableTextToSpeech)!=null?br:!0),xe=A.useCallback(()=>{ce(_e=>!_e)},[]);A.useEffect(()=>{D.current!==re&&(UW.clearCache(),D.current=re)},[re]);const[Ae,Ee]=A.useState(!1),[ee,Oe]=A.useState(-100),[le,me]=A.useState(0),ne=A.useRef(),se=A.useRef(),[ge,Q]=A.useState(!1),[W,ve]=A.useState(-100),[ue,Me]=A.useState(0),Pe=A.useRef(),je=A.useRef(),[ke,De]=A.useState(!1),[nt,be]=A.useState(jn+100),[Ne,Ie]=A.useState(0),[Ve,Ue]=A.useState(0),tt=A.useRef(),st=A.useRef(),{gameState:vt,settings:Fe,ball:ct,playerPaddle:Ye,aiPaddle:ft,ballMoving:_t,score:lt,aiScore:Lt,level:nn,timeElapsed:sn,timeRemaining:Ce,wordsProcessed:ze,startGame:Qe,pauseGame:gt,resumeGame:Rt,resetGame:Bt,updateBall:tn,updatePlayerPaddle:Ht,startBallMovement:Qt,isGameActive:Vt}=aZe(B(B({},oZe),t)),{playBounceSound:pn,toggleMute:vn,isMuted:Wn}=cZe();A.useEffect(()=>{pe&&ct.word&&vt==="playing"&&sZe(ct.word.text,ct.word.isTarget)},[ct.word,pe,vt]);const tr=A.useCallback((_e,at)=>_e>=Ye.x-20&&_e<=Ye.x+Ye.width+20&&at>=Ye.y-20&&at<=Ye.y+Ye.height+20,[Ye]),qr=A.useCallback(_e=>{if(!Vt)return;const at=c.current,St=u.current;if(!at||!St)return;St.getBoundingClientRect();const Dt=at.getBoundingClientRect(),Nt=_e.clientX-Dt.left,Zt=_e.clientY-Dt.top,Cn=Zt/g*jn;p(Cn);const wn=Nt>=0&&Nt<=v&&Zt>=0&&Zt<=g;if(K(wn),z&&wn){G&&Y(!1);let sr=Cn;Cn<0?sr=0:Cn>jn&&(sr=jn),p(sr),Ht(sr)}},[Vt,Ht,z,G,v,g]),hr=A.useCallback(_e=>{if(!Vt)return;const at=c.current;if(!at)return;const St=at.getBoundingClientRect(),Dt=_e.clientX-St.left,Nt=_e.clientY-St.top,Zt=Dt/v*ri,Cn=Nt/g*jn;if(!z&&tr(Zt,Cn)){q(!0),Y(!1),Qt();const wn=Math.max(0,Math.min(jn,Cn));p(wn),Ht(wn)}},[Vt,z,tr,Ht,Qt,v,g]),Jn=A.useCallback(_e=>{if(!Vt)return;_e.preventDefault();const at=c.current;if(!at)return;const St=_e.touches[0],Dt=at.getBoundingClientRect();St.clientX-Dt.left;const Zt=(St.clientY-Dt.top)/g*jn;if(p(Zt),K(!0),z||(q(!0),Y(!1)),z){const Cn=Math.max(0,Math.min(jn,Zt));p(Cn),Ht(Cn)}},[Vt,Ht,z,g]),xn=A.useCallback(_e=>{if(!Vt)return;_e.preventDefault();const at=c.current;if(!at)return;const St=_e.touches[0],Dt=at.getBoundingClientRect(),Zt=(St.clientY-Dt.top)/g*jn;q(!0),Y(!1),K(!0),Qt();const Cn=Math.max(0,Math.min(jn,Zt));p(Cn),Ht(Cn)},[Vt,Ht,Qt,g]),Te=A.useCallback(()=>{Vt&&K(!0)},[Vt]),Je=A.useCallback(()=>{K(!1)},[]);A.useEffect(()=>{vt==="idle"?(Qe(),q(!1),Y(!0)):vt==="gameOver"&&(q(!1),Y(!0))},[vt,Qe]),A.useEffect(()=>{if(re==="forest"&&Vt){const _e=()=>{const at=Math.random()*3e4+2e4;se.current=setTimeout(()=>{re==="forest"&&Vt&&ae(),_e()},at)};return _e(),()=>{se.current&&clearTimeout(se.current),ne.current&&cancelAnimationFrame(ne.current)}}},[re,Vt]),A.useEffect(()=>{if(re==="ocean"&&Vt){const _e=()=>{const at=Math.random()*25e3+15e3;je.current=setTimeout(()=>{re==="ocean"&&Vt&&Le(),_e()},at)};return _e(),()=>{je.current&&clearTimeout(je.current),Pe.current&&cancelAnimationFrame(Pe.current)}}},[re,Vt]),A.useEffect(()=>{if(re==="space"&&Vt){const _e=()=>{const at=Math.random()*2e4+1e4;st.current=setTimeout(()=>{re==="space"&&Vt&&et(),_e()},at)};return _e(),()=>{st.current&&clearTimeout(st.current),tt.current&&cancelAnimationFrame(tt.current)}}},[re,Vt]);const ae=A.useCallback(()=>{Ee(!0),Oe(-100),me(0);const _e=()=>{Oe(at=>{const St=at+1.5;return St>ri+100?(Ee(!1),-100):St}),me(at=>(at+1)%4),ee<ri+100&&(ne.current=requestAnimationFrame(_e))};ne.current=requestAnimationFrame(_e)},[ee]),Le=A.useCallback(()=>{Q(!0),ve(-120),Me(0);const _e=()=>{ve(at=>{const St=at+2.5;return St>ri+120?(Q(!1),-120):St}),Me(at=>(at+1)%6),W<ri+120&&(Pe.current=requestAnimationFrame(_e))};Pe.current=requestAnimationFrame(_e)},[W]),et=A.useCallback(()=>{De(!0),be(jn+50),Ie(0),Ue(Math.random()*(ri-80)+40);const _e=()=>{be(at=>{const St=at-4;return St<-100?(De(!1),jn+50):St}),Ie(at=>(at+1)%8),nt>-100&&(tt.current=requestAnimationFrame(_e))};tt.current=requestAnimationFrame(_e)},[nt]);A.useEffect(()=>()=>{se.current&&clearTimeout(se.current),ne.current&&cancelAnimationFrame(ne.current),je.current&&clearTimeout(je.current),Pe.current&&cancelAnimationFrame(Pe.current),st.current&&clearTimeout(st.current),tt.current&&cancelAnimationFrame(tt.current)},[]);const Ke=A.useCallback(()=>{const _e=c.current,at=_e==null?void 0:_e.getContext("2d");if(!_e||!at)return;const St=iZe[re];if(at.save(),at.scale(w,w),at.clearRect(0,0,ri,jn),St.background.type==="gradient"){const ur=at.createLinearGradient(0,0,ri,jn);ur.addColorStop(0,St.background.primary),ur.addColorStop(1,St.background.secondary||St.background.primary),at.fillStyle=ur}else at.fillStyle=St.background.primary;at.fillRect(0,0,ri,jn),at.strokeStyle=St.ui.centerLine,at.setLineDash([10,10]),at.lineWidth=2,at.beginPath(),at.moveTo(ri/2,0),at.lineTo(ri/2,jn),at.stroke(),at.setLineDash([]),at.fillStyle=St.paddles.ai;const Dt=Math.min(ft.width,ft.height)/2;We(at,ft.x,ft.y,ft.width,ft.height,Dt),at.fill();const Nt=ct.word.isTarget&&ct.vx>0&&ct.x>ri/2;if(z&&$){at.fillStyle=St.paddles.player,at.strokeStyle="#00FF00",at.lineWidth=3;const ur=Math.min(Ye.width+4,Ye.height+4)/2;We(at,Ye.x-2,Ye.y-2,Ye.width+4,Ye.height+4,ur),at.stroke(),at.shadowColor="#00FF00",at.shadowBlur=10}else if(z&&!$){at.fillStyle=St.paddles.player,at.strokeStyle="#FFD700",at.lineWidth=3;const ur=Math.min(Ye.width+4,Ye.height+4)/2;We(at,Ye.x-2,Ye.y-2,Ye.width+4,Ye.height+4,ur),at.stroke()}else if(at.fillStyle=St.paddles.player,G&&Vt){at.strokeStyle="rgba(255, 255, 255, 0.5)",at.lineWidth=2,at.setLineDash([5,5]);const ur=Math.min(Ye.width+2,Ye.height+2)/2;We(at,Ye.x-1,Ye.y-1,Ye.width+2,Ye.height+2,ur),at.stroke(),at.setLineDash([])}Nt&&z&&(at.shadowColor=St.effects.targetGlow,at.shadowBlur=20);const Zt=Math.min(Ye.width,Ye.height)/2;We(at,Ye.x,Ye.y,Ye.width,Ye.height,Zt),at.fill(),at.shadowBlur=0;const Cn=Math.round(ct.x),wn=Math.round(ct.y);at.fillStyle=St.ball.target,at.beginPath(),at.arc(Cn,wn,ct.radius,0,Math.PI*2),at.fill();const sr=ct.radius*1.6;let zn=Math.max(14,Math.min(24,ct.radius*.7));zn=Math.round(zn),UW.drawPreRenderedText(at,ct.word.text,Cn,wn,{fontSize:zn,color:St.text.target,fontFamily:St.text.fontFamily,maxWidth:sr,bold:!0},!0),wt(at,St),kt(),re==="forest"&&Ae&&Mt(at),re==="ocean"&&ge&&Wt(at),re==="space"&&ke&&mn(at),at.restore()},[ct,Ye,ft,re,lt,nn,z,$,G,Vt,Ae,ee,le,ge,W,ue,ke,nt,Ne,Ve,w]),We=(_e,at,St,Dt,Nt,Zt)=>{_e.beginPath(),_e.moveTo(at+Zt,St),_e.lineTo(at+Dt-Zt,St),_e.quadraticCurveTo(at+Dt,St,at+Dt,St+Zt),_e.lineTo(at+Dt,St+Nt-Zt),_e.quadraticCurveTo(at+Dt,St+Nt,at+Dt-Zt,St+Nt),_e.lineTo(at+Zt,St+Nt),_e.quadraticCurveTo(at,St+Nt,at,St+Nt-Zt),_e.lineTo(at,St+Zt),_e.quadraticCurveTo(at,St,at+Zt,St),_e.closePath()},wt=(_e,at)=>{_e.font=`14px ${at.text.fontFamily}`,_e.fillStyle=at.text.primary,_e.textAlign="center",!_t&&Vt?(_e.fillStyle="rgba(255, 255, 0, 0.9)",_e.fillText(" Click on your paddle to start the ball!",ri/2,jn-40)):!z&&G&&Vt?(_e.fillStyle="rgba(255, 255, 0, 0.9)",_e.fillText(" Click on your paddle to start controlling it!",ri/2,jn-40)):z&&!$&&Vt?(_e.fillStyle="rgba(255, 165, 0, 0.9)",_e.fillText(" Move mouse back over game area to control paddle",ri/2,jn-40)):z&&$&&Vt&&(_e.fillStyle="rgba(0, 255, 0, 0.7)",_e.fillText(" Paddle engaged - following your cursor",ri/2,jn-20))},kt=(_e,at)=>{},Mt=_e=>{const Dt=jn-40-10;_e.fillStyle="#8B4513",_e.fillRect(ee,Dt,60*.7,40*.6),_e.beginPath(),_e.arc(ee+60*.8,Dt+40*.3,40*.3,0,Math.PI*2),_e.fill(),_e.beginPath(),_e.moveTo(ee+60*.65,Dt+40*.1),_e.lineTo(ee+60*.75,Dt-40*.1),_e.lineTo(ee+60*.85,Dt+40*.1),_e.fill(),_e.beginPath(),_e.moveTo(ee+60*.75,Dt+40*.1),_e.lineTo(ee+60*.85,Dt-40*.1),_e.lineTo(ee+60*.95,Dt+40*.1),_e.fill();const Nt=Math.sin(le*.5)*10;_e.strokeStyle="#8B4513",_e.lineWidth=8,_e.beginPath(),_e.moveTo(ee-60*.1,Dt+40*.3),_e.quadraticCurveTo(ee-60*.3+Nt,Dt-40*.2,ee-60*.2,Dt-40*.4),_e.stroke();const Zt=Math.sin(le*.8)*5;_e.fillStyle="#654321",_e.fillRect(ee+60*.15+Zt,Dt+40*.5,6,40*.4),_e.fillRect(ee+60*.25-Zt,Dt+40*.5,6,40*.4),_e.fillRect(ee+60*.45-Zt,Dt+40*.5,6,40*.4),_e.fillRect(ee+60*.55+Zt,Dt+40*.5,6,40*.4),_e.fillStyle="#FFD700",_e.beginPath(),_e.arc(ee+60*.75,Dt+40*.25,3,0,Math.PI*2),_e.fill(),_e.beginPath(),_e.arc(ee+60*.85,Dt+40*.25,3,0,Math.PI*2),_e.fill(),_e.fillStyle="#000",_e.beginPath(),_e.arc(ee+60*.75,Dt+40*.25,1,0,Math.PI*2),_e.fill(),_e.beginPath(),_e.arc(ee+60*.85,Dt+40*.25,1,0,Math.PI*2),_e.fill(),_e.strokeStyle="#654321",_e.lineWidth=2;for(let Cn=0;Cn<3;Cn++)_e.beginPath(),_e.moveTo(ee+60*.1+Cn*15,Dt+40*.2),_e.lineTo(ee+60*.2+Cn*15,Dt+40*.5),_e.stroke();_e.strokeStyle="#000",_e.lineWidth=1,_e.beginPath(),_e.moveTo(ee+60*.65,Dt+40*.35),_e.lineTo(ee+60*.5,Dt+40*.3),_e.stroke(),_e.beginPath(),_e.moveTo(ee+60*.65,Dt+40*.4),_e.lineTo(ee+60*.5,Dt+40*.4),_e.stroke(),_e.beginPath(),_e.moveTo(ee+60*.95,Dt+40*.35),_e.lineTo(ee+60*1.1,Dt+40*.3),_e.stroke(),_e.beginPath(),_e.moveTo(ee+60*.95,Dt+40*.4),_e.lineTo(ee+60*1.1,Dt+40*.4),_e.stroke()},Wt=_e=>{const Dt=jn/2-20,Nt=Math.sin(ue*.3)*8,Zt=Dt+Nt;_e.fillStyle="#4682B4",_e.beginPath(),_e.ellipse(W+80*.5,Zt+40*.5,80*.4,40*.25,0,0,Math.PI*2),_e.fill(),_e.beginPath(),_e.ellipse(W+80*.8,Zt+40*.5,80*.15,40*.15,0,0,Math.PI*2),_e.fill(),_e.beginPath(),_e.moveTo(W+80*.4,Zt+40*.25),_e.lineTo(W+80*.5,Zt-40*.1),_e.lineTo(W+80*.6,Zt+40*.25),_e.fill();const Cn=Math.sin(ue*.4)*15;if(_e.beginPath(),_e.moveTo(W+80*.1,Zt+40*.5),_e.lineTo(W-80*.1,Zt+40*.3+Cn),_e.lineTo(W-80*.05,Zt+40*.5),_e.lineTo(W-80*.1,Zt+40*.7-Cn),_e.closePath(),_e.fill(),_e.beginPath(),_e.ellipse(W+80*.45,Zt+40*.65,80*.12,40*.08,.3,0,Math.PI*2),_e.fill(),_e.fillStyle="#000080",_e.beginPath(),_e.arc(W+80*.7,Zt+40*.4,4,0,Math.PI*2),_e.fill(),_e.fillStyle="#87CEEB",_e.beginPath(),_e.arc(W+80*.72,Zt+40*.38,2,0,Math.PI*2),_e.fill(),_e.strokeStyle="#5F9EA0",_e.lineWidth=2,_e.beginPath(),_e.moveTo(W+80*.3,Zt+40*.35),_e.quadraticCurveTo(W+80*.5,Zt+40*.25,W+80*.7,Zt+40*.35),_e.stroke(),_e.beginPath(),_e.moveTo(W+80*.25,Zt+40*.65),_e.quadraticCurveTo(W+80*.45,Zt+40*.75,W+80*.65,Zt+40*.65),_e.stroke(),ue%8===0)for(let wn=0;wn<3;wn++){const sr=W-20-wn*15,zn=Zt+40*.3+(Math.random()-.5)*20;_e.fillStyle="rgba(173, 216, 230, 0.6)",_e.beginPath(),_e.arc(sr,zn,2+Math.random()*3,0,Math.PI*2),_e.fill()}},mn=_e=>{const Dt=Ve,Nt=nt;_e.fillStyle="#C0C0C0",_e.fillRect(Dt,Nt,30,80*.7),_e.fillStyle="#FF4500",_e.beginPath(),_e.moveTo(Dt,Nt),_e.lineTo(Dt+30/2,Nt-80*.3),_e.lineTo(Dt+30,Nt),_e.closePath(),_e.fill(),_e.fillStyle="#8B0000",_e.beginPath(),_e.moveTo(Dt-30*.2,Nt+80*.5),_e.lineTo(Dt,Nt+80*.7),_e.lineTo(Dt,Nt+80*.4),_e.closePath(),_e.fill(),_e.beginPath(),_e.moveTo(Dt+30+30*.2,Nt+80*.5),_e.lineTo(Dt+30,Nt+80*.7),_e.lineTo(Dt+30,Nt+80*.4),_e.closePath(),_e.fill(),_e.fillStyle="#87CEEB",_e.beginPath(),_e.arc(Dt+30/2,Nt+80*.25,30*.15,0,Math.PI*2),_e.fill(),_e.strokeStyle="#2F4F4F",_e.lineWidth=2,_e.beginPath(),_e.arc(Dt+30/2,Nt+80*.25,30*.15,0,Math.PI*2),_e.stroke(),_e.strokeStyle="#696969",_e.lineWidth=1,_e.beginPath(),_e.moveTo(Dt+30*.1,Nt+80*.15),_e.lineTo(Dt+30*.9,Nt+80*.15),_e.stroke(),_e.beginPath(),_e.moveTo(Dt+30*.1,Nt+80*.45),_e.lineTo(Dt+30*.9,Nt+80*.45),_e.stroke();const Zt=40+Math.sin(Ne*.8)*15,Cn=.7+Math.sin(Ne*1.2)*.3;if(_e.fillStyle=`rgba(255, 69, 0, ${Cn})`,_e.beginPath(),_e.moveTo(Dt+30*.2,Nt+80*.7),_e.lineTo(Dt+30/2,Nt+80*.7+Zt),_e.lineTo(Dt+30*.8,Nt+80*.7),_e.closePath(),_e.fill(),_e.fillStyle=`rgba(255, 255, 0, ${Cn*.8})`,_e.beginPath(),_e.moveTo(Dt+30*.3,Nt+80*.7),_e.lineTo(Dt+30/2,Nt+80*.7+Zt*.7),_e.lineTo(Dt+30*.7,Nt+80*.7),_e.closePath(),_e.fill(),_e.fillStyle=`rgba(255, 255, 255, ${Cn*.6})`,_e.beginPath(),_e.moveTo(Dt+30*.4,Nt+80*.7),_e.lineTo(Dt+30/2,Nt+80*.7+Zt*.4),_e.lineTo(Dt+30*.6,Nt+80*.7),_e.closePath(),_e.fill(),Ne%3===0)for(let wn=0;wn<5;wn++){const sr=Dt+9+Math.random()*30*.4,zn=Nt+80*.8+Math.random()*30;_e.fillStyle=`rgba(255, ${100+Math.random()*155}, 0, 0.8)`,_e.beginPath(),_e.arc(sr,zn,1+Math.random()*2,0,Math.PI*2),_e.fill()}if(Ne%4===0)for(let wn=0;wn<3;wn++){const sr=Dt+15+(Math.random()-.5)*20,zn=Nt+80+20+wn*15;_e.fillStyle=`rgba(169, 169, 169, ${.4-wn*.1})`,_e.beginPath(),_e.arc(sr,zn,3+wn,0,Math.PI*2),_e.fill()}},gn=A.useCallback(()=>{if(vt==="playing"){const _e=tn();_e&&_e.type==="bounce"&&pn(),Ke()}else vt==="gameOver"&&(e&&e(lt,sn),o&&_(lt,s));vt!=="idle"&&(d.current=requestAnimationFrame(gn))},[vt,tn,Ke,lt,sn,e,o,s,_,pn,ct]);A.useEffect(()=>(vt==="playing"&&(d.current=requestAnimationFrame(gn)),()=>{d.current&&cancelAnimationFrame(d.current)}),[vt,gn]),A.useEffect(()=>()=>{d.current&&cancelAnimationFrame(d.current)},[]);const cn=()=>{vt==="playing"?gt():vt==="paused"&&Rt()},un=()=>{Bt()},$n=_e=>{const at=Math.floor(_e/60),St=_e%60;return`${at}:${St.toString().padStart(2,"0")}`};return b?h.jsxs("div",{className:"word-volley-game",children:[h.jsx(dc,{gameTitle:"Pong",variant:"compact"}),h.jsxs("div",{className:"game-container",children:[h.jsxs("div",{style:{padding:`${Math.max(8,w*12)}px ${Math.max(12,w*24)}px`,background:"#f8f9fa",borderRadius:"12px 12px 0 0",display:"flex",flexDirection:"column",gap:`${Math.max(4,w*8)}px`,marginBottom:"-12px",position:"relative",zIndex:1},children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:`${Math.max(8,w*12)}px`},children:[h.jsxs("div",{style:{fontSize:`${Math.max(1,w*1.2)}rem`,fontWeight:"bold",color:"#dc2626"},children:["AI: ",Lt]}),h.jsxs("div",{style:{fontSize:`${Math.max(1.1,w*1.4)}rem`,fontWeight:"bold",color:Ce<=30?"#dc2626":Ce<=60?"#ea580c":"#1f2937",textAlign:"center",animation:Ce<=30?"pulse 1s ease-in-out infinite":"none"},children:[" ",$n(Ce)]}),h.jsxs("div",{style:{fontSize:`${Math.max(1,w*1.2)}rem`,fontWeight:"bold",color:"#2563eb"},children:["Player: ",lt]})]}),h.jsxs("div",{style:{textAlign:"center",fontSize:`${Math.max(.8,w*.9)}rem`,color:"#6b7280",fontWeight:"500",padding:`${Math.max(4,w*6)}px ${Math.max(8,w*12)}px`,background:"rgba(255, 255, 255, 0.7)",borderRadius:"6px",border:"1px solid rgba(0, 0, 0, 0.1)"},children:["Hit: ",h.jsx("strong",{style:{color:"#059669"},children:Fe.categoryName})," words | Avoid: ",h.jsxs("strong",{style:{color:"#dc2626"},children:["Non-",Fe.categoryName]})," words"]})]}),h.jsxs("div",{className:"canvas-container",ref:u,onMouseMove:qr,onClick:hr,onTouchMove:Jn,onTouchStart:xn,onMouseEnter:Te,onMouseLeave:Je,style:{cursor:z&&$?"none":"pointer",display:"flex",justifyContent:"center",alignItems:"center",minHeight:`${g+40}px`,padding:"20px",background:"#f8f9fa",overflow:"visible"},children:[h.jsx("canvas",{ref:c,width:v,height:g,className:`game-canvas ball-text-optimized theme-${re} ${z?"paddle-engaged":""}`,style:{touchAction:"none",width:`${v}px`,height:`${g}px`,maxWidth:"100%",maxHeight:"100%"}}),vt==="paused"&&h.jsx("div",{className:"game-overlay",children:h.jsxs("div",{className:"pause-message",children:[h.jsx("h3",{children:"Game Paused"}),h.jsx("button",{className:"resume-button",onClick:cn,children:"Resume"})]})}),vt==="gameOver"&&!M&&h.jsx("div",{className:"game-overlay",children:h.jsxs("div",{className:"start-message",children:[h.jsx("h3",{children:"Game Complete!"}),h.jsxs("p",{children:["Final Score: ",lt]}),h.jsxs("p",{children:["Time: ",Math.floor(sn/60),":",(sn%60).toString().padStart(2,"0")]}),h.jsxs("p",{children:["Words Processed: ",ze]}),h.jsxs("p",{children:["Level Reached: ",nn]}),h.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center",flexWrap:"wrap",marginTop:"20px"},children:[h.jsx("button",{className:"start-button",onClick:un,children:"Play Again"}),l&&h.jsx("button",{className:"start-button",onClick:j,disabled:U,style:{background:U?"#6c757d":"linear-gradient(135deg, #007bff, #0056b3)",cursor:U?"not-allowed":"pointer"},children:U?" Loading...":" View Leaderboard"}),i&&h.jsx("button",{className:"start-button",onClick:i,style:{background:"#6c757d"},children:"Exit Game"})]})]})})]}),h.jsxs("div",{style:{padding:`${Math.max(12,w*16)}px ${Math.max(16,w*24)}px`,background:"#f8f9fa",borderRadius:"12px",marginTop:"0px",display:"flex",flexDirection:"column",gap:`${Math.max(8,w*12)}px`},children:[h.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",gap:`${Math.max(8,w*12)}px`},children:[h.jsx("button",{onClick:cn,disabled:vt!=="playing"&&vt!=="paused",style:{background:vt!=="playing"&&vt!=="paused"?"#6c757d":"linear-gradient(135deg, #ffc107, #fd7e14)",border:"none",borderRadius:"20px",color:"white",padding:`${Math.max(8,w*10)}px ${Math.max(16,w*20)}px`,fontSize:`${Math.max(.8,w*.9)}rem`,fontWeight:"600",cursor:vt!=="playing"&&vt!=="paused"?"not-allowed":"pointer",transition:"all 0.2s ease",opacity:vt!=="playing"&&vt!=="paused"?.6:1},children:vt==="paused"?" Resume":" Pause"}),h.jsx("button",{onClick:un,style:{background:"linear-gradient(135deg, #dc3545, #e83e8c)",border:"none",borderRadius:"20px",color:"white",padding:`${Math.max(8,w*10)}px ${Math.max(16,w*20)}px`,fontSize:`${Math.max(.8,w*.9)}rem`,fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:" Reset"}),h.jsx("button",{onClick:vn,style:{background:"linear-gradient(135deg, #6f42c1, #e83e8c)",border:"none",borderRadius:"20px",color:"white",padding:`${Math.max(8,w*10)}px ${Math.max(16,w*20)}px`,fontSize:`${Math.max(.8,w*.9)}rem`,fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:Wn?" Unmute":" Mute"}),h.jsx("button",{onClick:xe,style:{background:"linear-gradient(135deg, #17a2b8, #20c997)",border:"none",borderRadius:"20px",color:"white",padding:`${Math.max(8,w*10)}px ${Math.max(16,w*20)}px`,fontSize:`${Math.max(.8,w*.9)}rem`,fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:pe?" TTS On":" TTS Off"}),l&&h.jsx("button",{onClick:j,disabled:U,style:{background:U?"#6c757d":"linear-gradient(135deg, #007bff, #0056b3)",border:"none",borderRadius:"20px",color:"white",padding:`${Math.max(8,w*10)}px ${Math.max(16,w*20)}px`,fontSize:`${Math.max(.8,w*.9)}rem`,fontWeight:"600",cursor:U?"not-allowed":"pointer",transition:"all 0.2s ease"},children:U?" Loading...":" Leaderboard"})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",gap:`${Math.max(8,w*12)}px`},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:`${Math.max(6,w*8)}px`},children:[h.jsx("label",{style:{fontSize:`${Math.max(.8,w*.9)}rem`,fontWeight:"600",color:"#495057"},children:" Theme:"}),h.jsxs("select",{value:re,onChange:_e=>{const at=_e.target.value;fe(at),console.log("Theme changed to:",at)},style:{padding:`${Math.max(6,w*8)}px ${Math.max(8,w*12)}px`,borderRadius:"15px",border:"2px solid #dee2e6",background:"white",fontSize:`${Math.max(.8,w*.9)}rem`,fontWeight:"500",color:"#495057",cursor:"pointer",transition:"all 0.2s ease",outline:"none"},onFocus:_e=>{_e.target.style.borderColor="#667eea",_e.target.style.boxShadow="0 0 0 3px rgba(102, 126, 234, 0.1)"},onBlur:_e=>{_e.target.style.borderColor="#dee2e6",_e.target.style.boxShadow="none"},children:[h.jsx("option",{value:"classic",children:"Classic Pong"}),h.jsx("option",{value:"space",children:"Space Adventure"}),h.jsx("option",{value:"neon",children:"Neon Cyber"}),h.jsx("option",{value:"ocean",children:"Ocean Depths"}),h.jsx("option",{value:"forest",children:"Enchanted Forest"})]})]}),h.jsx("button",{onClick:()=>V(!0),style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",borderRadius:"20px",color:"white",padding:`${Math.max(8,w*10)}px ${Math.max(16,w*20)}px`,fontSize:`${Math.max(.8,w*.9)}rem`,fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(102, 126, 234, 0.3)"},onMouseEnter:_e=>{_e.currentTarget.style.transform="translateY(-1px)",_e.currentTarget.style.boxShadow="0 4px 12px rgba(102, 126, 234, 0.4)"},onMouseLeave:_e=>{_e.currentTarget.style.transform="translateY(0)",_e.currentTarget.style.boxShadow="0 2px 8px rgba(102, 126, 234, 0.3)"},children:" How Scoring Works"})]})]})]}),J&&h.jsx("div",{className:"game-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3},children:h.jsxs("div",{className:"start-message",style:{maxWidth:"700px",width:"95%"},children:[h.jsx("h3",{children:" How Scoring Works"}),h.jsxs("div",{style:{display:"flex",gap:"20px",marginBottom:"20px",flexWrap:"wrap"},children:[h.jsxs("div",{style:{flex:"1",minWidth:"300px",textAlign:"left"},children:[h.jsx("h4",{style:{color:"#4CAF50",marginBottom:"10px"},children:" Player Scoring"}),h.jsxs("div",{style:{marginBottom:"15px"},children:[h.jsx("strong",{style:{color:"#4CAF50"},children:"Positive Points:"}),h.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px"},children:[h.jsxs("li",{children:[h.jsx("strong",{children:"+10 points"})," - When you hit a target word (correct category)"]}),h.jsxs("li",{children:[h.jsx("strong",{children:"+10 points"})," - When the AI misses a target word (bonus for AI mistakes)"]})]})]}),h.jsxs("div",{children:[h.jsx("strong",{style:{color:"#f44336"},children:"Negative Points:"}),h.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px"},children:[h.jsxs("li",{children:[h.jsx("strong",{children:"-5 points"})," - When you hit a non-target word (wrong category)"]}),h.jsxs("li",{children:[h.jsx("strong",{children:"-5 points"})," - When you miss a target word (ball goes off your side)"]})]})]})]}),h.jsxs("div",{style:{flex:"1",minWidth:"300px",textAlign:"left"},children:[h.jsx("h4",{style:{color:"#FF9800",marginBottom:"10px"},children:" AI Scoring"}),h.jsxs("div",{style:{marginBottom:"15px"},children:[h.jsx("strong",{style:{color:"#4CAF50"},children:"Positive Points:"}),h.jsx("ul",{style:{margin:"5px 0",paddingLeft:"20px"},children:h.jsxs("li",{children:[h.jsx("strong",{children:"+10 points"})," - When AI hits a target word (AI plays correctly)"]})})]}),h.jsxs("div",{style:{marginBottom:"15px"},children:[h.jsx("strong",{style:{color:"#f44336"},children:"Negative Points:"}),h.jsx("ul",{style:{margin:"5px 0",paddingLeft:"20px"},children:h.jsxs("li",{children:[h.jsx("strong",{children:"-5 points"})," - When AI hits a non-target word (AI makes mistake)"]})})]}),h.jsxs("div",{children:[h.jsx("strong",{style:{color:"#757575"},children:"No penalty:"}),h.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px"},children:[h.jsx("li",{children:"When AI misses a target word (you get the bonus instead)"}),h.jsx("li",{children:"When AI correctly avoids a non-target word"})]})]})]})]}),h.jsxs("div",{style:{background:"rgba(33, 150, 243, 0.1)",border:"1px solid rgba(33, 150, 243, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"20px",textAlign:"left"},children:[h.jsx("strong",{style:{color:"#2196F3"},children:" Pro Tip:"})," You score best by hitting target words and capitalizing on AI mistakes!"]}),h.jsx("button",{className:"start-button",onClick:()=>V(!1),style:{marginTop:"10px"},children:"Got It!"})]})}),h.jsx(OF,{isOpen:M,onClose:()=>T(!1),score:lt,isNewHighScore:P,highScores:k,scoringSystem:"points-based",gameTitle:"Word Volley",timeElapsed:sn,additionalStats:[{label:"Words Processed",value:ze,colorScheme:"blue"},{label:"Level Reached",value:nn,colorScheme:"purple"},{label:"Category",value:Fe.categoryName||"Words",colorScheme:"green"}],isSubmittingScore:E,onPlayAgain:un,customActions:i?[{label:"Exit Game",onClick:i,colorScheme:"gray",variant:"outline"}]:void 0}),h.jsx(OF,{isOpen:R,onClose:()=>F(!1),score:lt,isNewHighScore:!1,highScores:L,scoringSystem:"points-based",gameTitle:"Word Volley - General Leaderboard",timeElapsed:sn,additionalStats:[{label:"Words Processed",value:ze,colorScheme:"blue"},{label:"Level Reached",value:nn,colorScheme:"purple"},{label:"Your Score",value:lt,colorScheme:"orange"}],isSubmittingScore:!1,onPlayAgain:un,customActions:[{label:"Close Leaderboard",onClick:()=>F(!1),colorScheme:"blue",variant:"solid"},...i?[{label:"Exit Game",onClick:i,colorScheme:"gray",variant:"outline"}]:[]]})]}):h.jsxs(h.Fragment,{children:[h.jsx(dc,{gameTitle:"Pong",variant:"compact"}),h.jsx(fZe,{})]})},hne=({gameConfig:t,playerName:e,onGameComplete:n,onHighScoreProcessStart:r,onHighScoreProcessComplete:i})=>{var p,b,v,m;const o=Fr(),a=40+((t.paddleSize||5)-1)/9*40,c=3+((t.gameSpeed||5)-2)/13*12,u={gameTime:(t.gameDuration||3)*60,paddleSize:a,initialSpeed:c,categoryName:((p=t.targetCategory)==null?void 0:p.name)||"Words",targetWords:((b=t.targetCategory)==null?void 0:b.words)||[],nonTargetWords:((v=t.nonTargetCategory)==null?void 0:v.words)||[],enableTextToSpeech:(m=t.enableTextToSpeech)!=null?m:!0,theme:"classic",maxLives:3,speedIncrement:1,wordsPerLevel:10,enableSound:!0},d=(g,x)=>{n(g)},f=()=>{o(-1)};return h.jsx(pZe,{gameConfig:u,onGameComplete:d,onHighScoreProcessStart:r,onHighScoreProcessComplete:i,configId:t.id,playerName:e,onGameExit:f})},h5=()=>{const[t,e]=A.useState(null),n=A.useCallback(r=>{e(r),setTimeout(()=>{e(null)},r.duration)},[]);return{toastMessage:t,showToast:n}},mZe=({toastMessage:t})=>{if(!t)return null;const e=n=>{switch(n){case"success":return"bg-green-500";case"error":return"bg-red-500";case"warning":return"bg-yellow-500";case"info":return"bg-blue-500";default:return"bg-gray-500"}};return h.jsxs("div",{className:`fixed top-4 right-4 p-4 rounded-lg text-white ${e(t.status)} shadow-lg transition-opacity duration-300`,style:{zIndex:1e3},children:[h.jsx("h3",{className:"font-bold",children:t.title}),t.description&&h.jsx("p",{className:"mt-1",children:t.description})]})},gZe=()=>{const{configId:t}=hu(),[e,n]=A.useState(null),[r,i]=A.useState(!0),{showToast:o}=h5();A.useEffect(()=>{te(rt,null,function*(){if(!t){o({title:"Configuration ID missing",description:"No game configuration ID was provided.",status:"error",duration:3e3}),i(!1);return}try{const c=an(xt,"userGameConfigs",t),u=yield oi(c);if(u.exists()){const d=B({id:u.id},u.data());n(d)}else o({title:"Configuration not found",description:"The game configuration could not be found.",status:"error",duration:3e3})}catch(c){console.error("Error loading game configuration:",c),o({title:"Error loading configuration",description:"There was an error loading the game configuration.",status:"error",duration:3e3})}finally{i(!1)}})},[t,o]);const s=A.useCallback(l=>{o({title:"Game Complete!",description:`You scored ${l} points!`,status:"success",duration:5e3})},[o]);if(r)return h.jsx(AC,{maxW:"container.xl",centerContent:!0,children:h.jsx(Ml,{p:8,children:h.jsx(Oa,{size:"xl"})})});if(!e)return null;const a=()=>{switch(e.type){case"whack-a-mole":return h.jsx(ane,{playerName:"Player",onGameComplete:s,config:e});case"sort-categories-egg":return h.jsx(yte,{playerName:"Player",onGameComplete:s,config:e});case"spinner-wheel":return h.jsx(cne,{onGameComplete:s,config:e});case"anagram":return h.jsx(une,{playerName:"Player",onGameComplete:s,config:e});case"sentence-sense":return h.jsx(dne,{playerName:"Player",onGameComplete:s,config:e});case"place-value-showdown":return h.jsx(fne,{playerName:"Player",onGameComplete:s,config:e});case"word-volley":return h.jsx(hne,{gameConfig:e,playerName:"Player",onGameComplete:s});default:return h.jsxs(dt,{children:["Invalid game configuration type: ",e.type]})}};return h.jsx(AC,{maxW:"container.xl",p:4,children:a()})},l2="gameFolders",zW=3,pne=(t,e=[],n=null,r=0)=>t.filter(o=>(o.parentId===void 0?null:o.parentId)===n).map(o=>{const s=pne(t,e,o.id,r+1),l=e.filter(c=>c.folderId===o.id).length+s.reduce((c,u)=>c+(u.gameCount||0),0);return oe(B({},o),{children:s,level:r,gameCount:l,isExpanded:r<2})}).sort((o,s)=>(o.order||0)-(s.order||0)),sA=(t,e)=>{if(!e)return!0;let n=0,r=e;for(;r&&n<=zW;){const i=t.find(o=>o.id===r);if(!i)break;n++,r=i.parentId||null}return n<=zW},aA=(t,e)=>{const n=[];return t.filter(i=>i.parentId===e).forEach(i=>{n.push(i.id),n.push(...aA(t,i.id))}),n},vZe=(t,e)=>{const n=[];let r=e;for(;r;){const i=t.find(o=>o.id===r);if(!i)break;n.unshift(i),r=i.parentId||null}return n},yZe=(t,e)=>sA(t,e),xZe=(t,e,n)=>n?e===n?!1:!aA(t,e).includes(n):!0,eR=t=>te(rt,null,function*(){const e=yield mne(t.userId);if(!sA(e,t.parentId||null))throw new Error("Cannot create folder: would exceed maximum depth of 4 levels");const n=new Date;return(yield Sc(Pn(xt,l2),oe(B({},t),{createdAt:n,updatedAt:n,depth:bZe(e,t.parentId||null)}))).id}),mne=t=>te(rt,null,function*(){try{const e=xr(Pn(xt,l2),Vn("userId","==",t),g0("order","asc"));return(yield er(e)).docs.map(r=>{var i,o;return oe(B({id:r.id},r.data()),{createdAt:((i=r.data().createdAt)==null?void 0:i.toDate())||new Date,updatedAt:((o=r.data().updatedAt)==null?void 0:o.toDate())||new Date})})}catch(e){throw console.error("Error fetching folders:",e),e}}),y_=(t,e)=>te(rt,null,function*(){const n=an(xt,l2,t);yield Ns(n,oe(B({},e),{updatedAt:new Date}))}),tR=t=>te(rt,null,function*(){const e=an(xt,l2,t);yield ou(e)}),x_=(t,e,n)=>te(rt,null,function*(){try{return yield ME(t,n),(yield Sc(Pn(xt,"gameFolderAssignments"),{gameId:t,folderId:e,userId:n,assignedAt:Ar.now()})).id}catch(r){throw console.error("Error assigning game to folder:",r),r}}),ME=(t,e)=>te(rt,null,function*(){try{const n=xr(Pn(xt,"gameFolderAssignments"),Vn("gameId","==",t),Vn("userId","==",e)),r=yield er(n),i=RL(xt);r.docs.forEach(o=>{i.delete(o.ref)}),yield i.commit()}catch(n){throw console.error("Error removing game from folder:",n),n}}),VW=t=>te(rt,null,function*(){try{const e=xr(Pn(xt,"gameFolderAssignments"),Vn("userId","==",t));return(yield er(e)).docs.map(r=>B({id:r.id},r.data()))}catch(e){throw console.error("Error fetching game folder assignments:",e),e}}),bZe=(t,e)=>{if(!e)return 0;const n=t.find(r=>r.id===e);return n?(n.depth||0)+1:0},wZe=t=>{let e=0,n=0,r=0;const i=(o,s=0)=>{o.forEach(a=>{e++,n+=a.gameCount||0,r=Math.max(r,s),a.children.length>0&&i(a.children,s+1)})};return i(t),{totalFolders:e,totalGames:n,maxDepth:r}},SZe=({userId:t,games:e,onGamesUpdate:n,onShowToast:r})=>{const[i,o]=A.useState([]),[s,a]=A.useState([]),[l,c]=A.useState(null),[u,d]=A.useState(!1),[f,p]=A.useState(null),[b,v]=A.useState(new Set),[m,g]=A.useState([]),[x,w]=A.useState([]),{showModal:S}=kl(),D=m.length>0,k=x.length>0,P=A.useCallback(le=>{g(me=>[...me,le]),w([])},[]),M=A.useMemo(()=>pne(i,e),[i,e]),T=A.useCallback(()=>te(rt,null,function*(){if(t){d(!0),p(null);try{const[le,me]=yield Promise.all([mne(t),VW(t)]);o(le),a(me);const ne=new Set;le.forEach(se=>{(se.depth||0)<2&&ne.add(se.id)}),v(ne)}catch(le){const me=le instanceof Error?le.message:"Failed to load folder data";console.error("Error loading folders:",le),p(me),r({title:"Error Loading Folders",description:me,status:"error",duration:5e3})}finally{d(!1)}}}),[t,r]);A.useEffect(()=>{t&&T()},[t,T]),A.useEffect(()=>{te(rt,null,function*(){if(!(!t||i.length===0||e.length===0))try{const me=yield VW(t);if(me.length===0)return;const ne=new Map;me.forEach(Q=>{const W=i.find(ve=>ve.id===Q.folderId);W&&ne.set(Q.gameId,{folderId:W.id,folderName:W.name,folderColor:W.color})});const se=e.map(Q=>{const W=ne.get(Q.id);return W?oe(B({},Q),{folderId:W.folderId,folderName:W.folderName,folderColor:W.folderColor}):Q});se.some((Q,W)=>Q.folderId!==e[W].folderId||Q.folderName!==e[W].folderName||Q.folderColor!==e[W].folderColor)&&n(se)}catch(me){console.error(" Error loading game folder assignments:",me),r({title:"Error loading folder assignments",status:"error",duration:3e3})}})},[t,i,e,n,r]);const _=A.useCallback(le=>te(rt,null,function*(){if(t){d(!0),p(null);try{if(!sA(i,le.parentId||null))throw new Error("Cannot create folder: would exceed maximum depth of 4 levels");const me=yield eR(oe(B({},le),{userId:t}));yield T();const ne={type:"CREATE_FOLDER",description:`Create folder "${le.name}"`,undoAction:()=>te(rt,null,function*(){yield tR(me),yield T(),l===me&&c(null)}),redoAction:()=>te(rt,null,function*(){yield eR(oe(B({},le),{userId:t})),yield T()}),timestamp:Date.now()};P(ne),r({title:"Folder Created",description:`"${le.name}" has been created successfully`,status:"success",duration:3e3}),c(me)}catch(me){const ne=me instanceof Error?me.message:"Failed to create folder";p(ne),r({title:"Error Creating Folder",description:ne,status:"error",duration:5e3})}finally{d(!1)}}}),[t,i,T,r,P,l]),E=A.useCallback((le,me)=>te(rt,null,function*(){d(!0),p(null);try{const ne=i.find(ge=>ge.id===le);if(!ne)throw new Error("Folder not found");yield y_(le,me),yield T();const se={type:"UPDATE_FOLDER",description:`Update folder "${me.name||ne.name}"`,undoAction:()=>te(rt,null,function*(){yield y_(le,{name:ne.name,description:ne.description,color:ne.color}),yield T()}),redoAction:()=>te(rt,null,function*(){yield y_(le,me),yield T()}),timestamp:Date.now()};P(se),r({title:"Folder Updated",description:"Folder has been updated successfully",status:"success",duration:3e3})}catch(ne){const se=ne instanceof Error?ne.message:"Failed to update folder";p(se),r({title:"Error Updating Folder",description:se,status:"error",duration:5e3})}finally{d(!1)}}),[t,i,T,r,P]),R=A.useCallback(le=>te(rt,null,function*(){d(!0),p(null);try{if(aA(i,le).length>0)throw new Error("Cannot delete folder with subfolders. Please delete subfolders first or move them to another location.");const ne=q(le);if(ne.length>0)throw new Error(`Cannot delete folder with ${ne.length} game(s). Please move games to another folder first.`);const se=i.find(Q=>Q.id===le);if(!se)throw new Error("Folder not found");yield tR(le),yield T();const ge={type:"DELETE_FOLDER",description:`Delete folder "${se.name}"`,undoAction:()=>te(rt,null,function*(){yield eR({name:se.name,description:se.description,color:se.color,parentId:se.parentId,order:se.order,userId:se.userId}),yield T()}),redoAction:()=>te(rt,null,function*(){yield tR(le),yield T(),l===le&&c(null)}),timestamp:Date.now()};P(ge),l===le&&c(null),r({title:"Folder Deleted",description:"Folder has been deleted successfully",status:"success",duration:3e3})}catch(me){const ne=me instanceof Error?me.message:"Failed to delete folder";p(ne),r({title:"Error Deleting Folder",description:ne,status:"error",duration:5e3})}finally{d(!1)}}),[t,l,i,T,r,P]),F=A.useCallback((le,me)=>te(rt,null,function*(){if(t)try{const ne=e.find(W=>W.id===le),se=i.find(W=>W.id===me);yield x_(le,me,t),yield T();const ge=e.map(W=>W.id===le?oe(B({},W),{folderId:me,folderName:(se==null?void 0:se.name)||"Unknown Folder",folderColor:(se==null?void 0:se.color)||"#3182CE"}):W);n(ge);const Q={type:"MOVE_GAME",description:`Move "${(ne==null?void 0:ne.title)||"game"}" to "${(se==null?void 0:se.name)||"folder"}"`,undoAction:()=>te(rt,null,function*(){ne!=null&&ne.folderId?yield x_(le,ne.folderId,t):yield ME(le,t),yield T();const W=e.map(ve=>ve.id===le?oe(B({},ve),{folderId:ne==null?void 0:ne.folderId,folderName:ne==null?void 0:ne.folderName,folderColor:ne==null?void 0:ne.folderColor}):ve);n(W)}),redoAction:()=>te(rt,null,function*(){yield x_(le,me,t),yield T();const W=e.map(ve=>ve.id===le?oe(B({},ve),{folderId:me,folderName:(se==null?void 0:se.name)||"Unknown Folder",folderColor:(se==null?void 0:se.color)||"#3182CE"}):ve);n(W)}),timestamp:Date.now()};P(Q),r({title:"Game Assigned",description:"Game has been assigned to folder successfully",status:"success",duration:3e3})}catch(ne){const se=ne instanceof Error?ne.message:"Failed to assign game to folder";r({title:"Error Assigning Game",description:se,status:"error",duration:5e3})}}),[t,e,i,T,n,r,P]),L=A.useCallback(le=>te(rt,null,function*(){if(t)try{const me=e.find(se=>se.id===le);yield ME(le,t),yield T();const ne=e.map(se=>se.id===le?oe(B({},se),{folderId:void 0,folderName:void 0,folderColor:void 0}):se);if(n(ne),me!=null&&me.folderId){const se={type:"MOVE_GAME",description:`Remove "${me.title||"game"}" from "${me.folderName||"folder"}"`,undoAction:()=>te(rt,null,function*(){yield x_(le,me.folderId,t),yield T();const ge=e.map(Q=>Q.id===le?oe(B({},Q),{folderId:me.folderId,folderName:me.folderName,folderColor:me.folderColor}):Q);n(ge)}),redoAction:()=>te(rt,null,function*(){yield ME(le,t),yield T();const ge=e.map(Q=>Q.id===le?oe(B({},Q),{folderId:void 0,folderName:void 0,folderColor:void 0}):Q);n(ge)}),timestamp:Date.now()};P(se)}r({title:"Game Removed",description:"Game has been removed from folder successfully",status:"success",duration:3e3})}catch(me){const ne=me instanceof Error?me.message:"Failed to remove game from folder";r({title:"Error Removing Game",description:ne,status:"error",duration:5e3})}}),[t,e,T,n,r,P]),N=A.useCallback(le=>te(rt,null,function*(){var ge;console.log(" Handling drop operation:",le);const{draggedItem:me,targetFolderId:ne,newParentId:se}=le;d(!0),p(null);try{if(me.type==="folder"){const Q=me.data;if(console.log(" Moving folder:",Q.name,"to parent:",se||"root"),!xZe(i,Q.id,se||null))throw new Error("Invalid folder move: would create circular reference");if(!sA(i,se||null))throw new Error("Invalid folder move: would exceed maximum depth of 4 levels");const W=se?(((ge=i.find(ve=>ve.id===se))==null?void 0:ge.depth)||0)+1:0;yield y_(Q.id,{parentId:se||null,depth:W}),yield T(),r({title:"Folder Moved",description:`"${Q.name}" has been moved successfully`,status:"success",duration:3e3})}else if(me.type==="game"){const Q=me.data;console.log(" Moving game:",Q.title,"to target:",ne),ne==="unorganized"?(yield L(Q.id),r({title:"Game Unorganized",description:`"${Q.title}" has been removed from folder`,status:"success",duration:3e3})):ne&&(yield F(Q.id,ne),r({title:"Game Organized",description:`"${Q.title}" has been moved to folder`,status:"success",duration:3e3}))}}catch(Q){const W=Q instanceof Error?Q.message:"Failed to move item";console.error(" Drop operation failed:",Q),p(W),r({title:"Move Failed",description:W,status:"error",duration:5e3})}finally{d(!1)}}),[i,T,F,L,r]),U=A.useCallback(le=>{v(me=>new Set([...me,le]))},[]),H=A.useCallback(le=>{v(me=>{const ne=new Set(me);return ne.delete(le),ne})},[]),j=A.useCallback(le=>{c(le)},[]),z=A.useCallback(le=>vZe(i,le),[i]),q=A.useCallback(le=>e.filter(me=>me.folderId===le),[e]),$=A.useCallback(le=>{const me=[le,...aA(i,le)];return e.filter(ne=>ne.folderId&&me.includes(ne.folderId))},[e,i]),K=A.useCallback(()=>e.filter(le=>!le.folderId),[e]),G=A.useCallback(le=>yZe(i,le),[i]),Y=A.useCallback(()=>wZe(M),[M]),J=A.useCallback(le=>{const me=le.toLowerCase();return i.filter(ne=>ne.name.toLowerCase().includes(me)||ne.description.toLowerCase().includes(me))},[i]),V=A.useCallback(()=>te(rt,null,function*(){yield T()}),[T]),re=V,fe=A.useCallback(le=>{const me=le!==void 0?le:l;S("createFolder",{onSave:ne=>te(rt,null,function*(){yield _(oe(B({},ne),{parentId:me,order:i.length,userId:t}))})})},[S,_,l,i.length,t]),pe=A.useCallback(le=>{S("editFolder",{folder:le,onSave:me=>te(rt,null,function*(){yield E(le.id,me)})})},[S,E]),ce=A.useCallback(()=>te(rt,null,function*(){if(m.length===0)return;const le=m[m.length-1];try{yield le.undoAction(),g(me=>me.slice(0,-1)),w(me=>[...me,le]),r({title:"Action Undone",description:`Undid: ${le.description}`,status:"info",duration:3e3})}catch(me){r({title:"Undo Failed",description:"Could not undo the last action",status:"error",duration:3e3})}}),[m,r]),xe=A.useCallback(()=>te(rt,null,function*(){if(x.length===0)return;const le=x[x.length-1];try{yield le.redoAction(),w(me=>me.slice(0,-1)),g(me=>[...me,le]),r({title:"Action Redone",description:`Redid: ${le.description}`,status:"info",duration:3e3})}catch(me){r({title:"Redo Failed",description:"Could not redo the action",status:"error",duration:3e3})}}),[x,r]),Ae=A.useCallback(()=>{g([]),w([]),r({title:"History Cleared",description:"Undo/redo history has been cleared",status:"info",duration:2e3})},[r]),Ee=A.useCallback((le,me)=>te(rt,null,function*(){me?yield E(me,le):yield _(oe(B({},le),{parentId:null,order:i.length,userId:t}))}),[E,_,i.length,t]),ee=A.useCallback(le=>te(rt,null,function*(){yield R(le)}),[R]),Oe=A.useCallback(()=>{},[]);return{folders:i,folderTree:M,assignments:s,selectedFolderId:l,isLoading:u,error:f,canUndo:D,canRedo:k,undoStack:m,redoStack:x,createNewFolder:_,updateExistingFolder:E,deleteExistingFolder:R,assignGame:F,removeGame:L,handleDrop:N,expandFolder:U,collapseFolder:H,undo:ce,redo:xe,clearHistory:Ae,selectFolder:j,setSelectedFolderId:c,getFolderBreadcrumbs:z,getGamesInFolder:q,getGamesInFolderTree:$,getUnorganizedGames:K,canCreateSubfolder:G,getFolderStats:Y,searchFolders:J,refreshData:V,refreshFolders:re,openCreateFolderModal:fe,openEditFolderModal:pe,handleSaveFolder:Ee,handleDeleteFolder:ee,handleCancelFolder:Oe}},c2=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";function A0(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function p5(t){return"nodeType"in t}function Us(t){var e,n;return t?A0(t)?t:p5(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function m5(t){const{Document:e}=Us(t);return t instanceof e}function t1(t){return A0(t)?!1:t instanceof Us(t).HTMLElement}function gne(t){return t instanceof Us(t).SVGElement}function T0(t){return t?A0(t)?t.document:p5(t)?m5(t)?t:t1(t)||gne(t)?t.ownerDocument:document:document:document}const Ad=c2?A.useLayoutEffect:A.useEffect;function u2(t){const e=A.useRef(t);return Ad(()=>{e.current=t}),A.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function _Ze(){const t=A.useRef(null),e=A.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=A.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Yb(t,e){e===void 0&&(e=[t]);const n=A.useRef(t);return Ad(()=>{n.current!==t&&(n.current=t)},e),n}function n1(t,e){const n=A.useRef();return A.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function lA(t){const e=u2(t),n=A.useRef(null),r=A.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function cA(t){const e=A.useRef();return A.useEffect(()=>{e.current=t},[t]),e.current}let nR={};function d2(t,e){return A.useMemo(()=>{if(e)return e;const n=nR[t]==null?0:nR[t]+1;return nR[t]=n,t+"-"+n},[t,e])}function vne(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((o,s)=>{const a=Object.entries(s);for(const[l,c]of a){const u=o[l];u!=null&&(o[l]=u+t*c)}return o},B({},e))}}const vv=vne(1),uA=vne(-1);function EZe(t){return"clientX"in t&&"clientY"in t}function g5(t){if(!t)return!1;const{KeyboardEvent:e}=Us(t.target);return e&&t instanceof e}function CZe(t){if(!t)return!1;const{TouchEvent:e}=Us(t.target);return e&&t instanceof e}function dA(t){if(CZe(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return EZe(t)?{x:t.clientX,y:t.clientY}:null}const Xb=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Xb.Translate.toString(t),Xb.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),WW="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function AZe(t){return t.matches(WW)?t:t.querySelector(WW)}const TZe={display:"none"};function MZe(t){let{id:e,value:n}=t;return Ot.createElement("div",{id:e,style:TZe},n)}function PZe(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ot.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function DZe(){const[t,e]=A.useState("");return{announce:A.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const yne=A.createContext(null);function RZe(t){const e=A.useContext(yne);A.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function kZe(){const[t]=A.useState(()=>new Set),e=A.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[A.useCallback(r=>{let{type:i,event:o}=r;t.forEach(s=>{var a;return(a=s[i])==null?void 0:a.call(s,o)})},[t]),e]}const IZe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},FZe={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function OZe(t){let{announcements:e=FZe,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=IZe}=t;const{announce:o,announcement:s}=DZe(),a=d2("DndLiveRegion"),[l,c]=A.useState(!1);if(A.useEffect(()=>{c(!0)},[]),RZe(A.useMemo(()=>({onDragStart(d){let{active:f}=d;o(e.onDragStart({active:f}))},onDragMove(d){let{active:f,over:p}=d;e.onDragMove&&o(e.onDragMove({active:f,over:p}))},onDragOver(d){let{active:f,over:p}=d;o(e.onDragOver({active:f,over:p}))},onDragEnd(d){let{active:f,over:p}=d;o(e.onDragEnd({active:f,over:p}))},onDragCancel(d){let{active:f,over:p}=d;o(e.onDragCancel({active:f,over:p}))}}),[o,e])),!l)return null;const u=Ot.createElement(Ot.Fragment,null,Ot.createElement(MZe,{id:r,value:i.draggable}),Ot.createElement(PZe,{id:a,announcement:s}));return n?rc.createPortal(u,n):u}var wo;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(wo||(wo={}));function fA(){}function NZe(t,e){return A.useMemo(()=>({sensor:t,options:e!=null?e:{}}),[t,e])}function LZe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return A.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const yc=Object.freeze({x:0,y:0});function BZe(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function jZe(t,e){const n=dA(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function UZe(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function zZe(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function VZe(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function $W(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const WZe=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=$W(e,e.left,e.top),o=[];for(const s of r){const{id:a}=s,l=n.get(a);if(l){const c=BZe($W(l),i);o.push({id:a,data:{droppableContainer:s,value:c}})}}return o.sort(UZe)};function $Ze(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),o=Math.min(e.top+e.height,t.top+t.height),s=i-r,a=o-n;if(r<i&&n<o){const l=e.width*e.height,c=t.width*t.height,u=s*a,d=u/(l+c-u);return Number(d.toFixed(4))}return 0}const HZe=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const o of r){const{id:s}=o,a=n.get(s);if(a){const l=$Ze(a,e);l>0&&i.push({id:s,data:{droppableContainer:o,value:l}})}}return i.sort(zZe)};function GZe(t,e,n){return oe(B({},t),{scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1})}function xne(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:yc}function qZe(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.reduce((s,a)=>oe(B({},s),{top:s.top+t*a.y,bottom:s.bottom+t*a.y,left:s.left+t*a.x,right:s.right+t*a.x}),B({},n))}}const KZe=qZe(1);function bne(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function YZe(t,e,n){const r=bne(e);if(!r)return t;const{scaleX:i,scaleY:o,x:s,y:a}=r,l=t.left-s-(1-i)*parseFloat(n),c=t.top-a-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),u=i?t.width/i:t.width,d=o?t.height/o:t.height;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l}}const XZe={ignoreTransform:!1};function r1(t,e){e===void 0&&(e=XZe);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:u}=Us(t).getComputedStyle(t);c&&(n=YZe(n,c,u))}const{top:r,left:i,width:o,height:s,bottom:a,right:l}=n;return{top:r,left:i,width:o,height:s,bottom:a,right:l}}function HW(t){return r1(t,{ignoreTransform:!0})}function QZe(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function ZZe(t,e){return e===void 0&&(e=Us(t).getComputedStyle(t)),e.position==="fixed"}function JZe(t,e){e===void 0&&(e=Us(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=e[i];return typeof o=="string"?n.test(o):!1})}function v5(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(m5(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!t1(i)||gne(i)||n.includes(i))return n;const o=Us(t).getComputedStyle(i);return i!==t&&JZe(i,o)&&n.push(i),ZZe(i,o)?n:r(i.parentNode)}return t?r(t):n}function wne(t){const[e]=v5(t,1);return e!=null?e:null}function rR(t){return!c2||!t?null:A0(t)?t:p5(t)?m5(t)||t===T0(t).scrollingElement?window:t1(t)?t:null:null}function Sne(t){return A0(t)?t.scrollX:t.scrollLeft}function _ne(t){return A0(t)?t.scrollY:t.scrollTop}function LF(t){return{x:Sne(t),y:_ne(t)}}var ko;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(ko||(ko={}));function Ene(t){return!c2||!t?!1:t===document.scrollingElement}function Cne(t){const e={x:0,y:0},n=Ene(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,o=t.scrollLeft<=e.x,s=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:i,isLeft:o,isBottom:s,isRight:a,maxScroll:r,minScroll:e}}const eJe={x:.2,y:.2};function tJe(t,e,n,r,i){let{top:o,left:s,right:a,bottom:l}=n;r===void 0&&(r=10),i===void 0&&(i=eJe);const{isTop:c,isBottom:u,isLeft:d,isRight:f}=Cne(t),p={x:0,y:0},b={x:0,y:0},v={height:e.height*i.y,width:e.width*i.x};return!c&&o<=e.top+v.height?(p.y=ko.Backward,b.y=r*Math.abs((e.top+v.height-o)/v.height)):!u&&l>=e.bottom-v.height&&(p.y=ko.Forward,b.y=r*Math.abs((e.bottom-v.height-l)/v.height)),!f&&a>=e.right-v.width?(p.x=ko.Forward,b.x=r*Math.abs((e.right-v.width-a)/v.width)):!d&&s<=e.left+v.width&&(p.x=ko.Backward,b.x=r*Math.abs((e.left+v.width-s)/v.width)),{direction:p,speed:b}}function nJe(t){if(t===document.scrollingElement){const{innerWidth:o,innerHeight:s}=window;return{top:0,left:0,right:o,bottom:s,width:o,height:s}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function Ane(t){return t.reduce((e,n)=>vv(e,LF(n)),yc)}function rJe(t){return t.reduce((e,n)=>e+Sne(n),0)}function iJe(t){return t.reduce((e,n)=>e+_ne(n),0)}function Tne(t,e){if(e===void 0&&(e=r1),!t)return;const{top:n,left:r,bottom:i,right:o}=e(t);wne(t)&&(i<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const oJe=[["x",["left","right"],rJe],["y",["top","bottom"],iJe]];class y5{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=v5(n),i=Ane(r);this.rect=B({},e),this.width=e.width,this.height=e.height;for(const[o,s,a]of oJe)for(const l of s)Object.defineProperty(this,l,{get:()=>{const c=a(r),u=i[o]-c;return this.rect[l]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Lx{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function sJe(t){const{EventTarget:e}=Us(t);return t instanceof e?t:T0(t)}function iR(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(Vl(n,2)+Vl(r,2))>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var sl;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(sl||(sl={}));function GW(t){t.preventDefault()}function aJe(t){t.stopPropagation()}var ui;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(ui||(ui={}));const Mne={start:[ui.Space,ui.Enter],cancel:[ui.Esc],end:[ui.Space,ui.Enter,ui.Tab]},lJe=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case ui.Right:return oe(B({},n),{x:n.x+25});case ui.Left:return oe(B({},n),{x:n.x-25});case ui.Down:return oe(B({},n),{y:n.y+25});case ui.Up:return oe(B({},n),{y:n.y-25})}};class Pne{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Lx(T0(n)),this.windowListeners=new Lx(Us(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(sl.Resize,this.handleCancel),this.windowListeners.add(sl.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(sl.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&Tne(r),n(yc)}handleKeyDown(e){if(g5(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:o=Mne,coordinateGetter:s=lJe,scrollBehavior:a="smooth"}=i,{code:l}=e;if(o.end.includes(l)){this.handleEnd(e);return}if(o.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:c}=r.current,u=c?{x:c.left,y:c.top}:yc;this.referenceCoordinates||(this.referenceCoordinates=u);const d=s(e,{active:n,context:r.current,currentCoordinates:u});if(d){const f=uA(d,u),p={x:0,y:0},{scrollableAncestors:b}=r.current;for(const v of b){const m=e.code,{isTop:g,isRight:x,isLeft:w,isBottom:S,maxScroll:D,minScroll:k}=Cne(v),P=nJe(v),M={x:Math.min(m===ui.Right?P.right-P.width/2:P.right,Math.max(m===ui.Right?P.left:P.left+P.width/2,d.x)),y:Math.min(m===ui.Down?P.bottom-P.height/2:P.bottom,Math.max(m===ui.Down?P.top:P.top+P.height/2,d.y))},T=m===ui.Right&&!x||m===ui.Left&&!w,_=m===ui.Down&&!S||m===ui.Up&&!g;if(T&&M.x!==d.x){const E=v.scrollLeft+f.x,R=m===ui.Right&&E<=D.x||m===ui.Left&&E>=k.x;if(R&&!f.y){v.scrollTo({left:E,behavior:a});return}R?p.x=v.scrollLeft-E:p.x=m===ui.Right?v.scrollLeft-D.x:v.scrollLeft-k.x,p.x&&v.scrollBy({left:-p.x,behavior:a});break}else if(_&&M.y!==d.y){const E=v.scrollTop+f.y,R=m===ui.Down&&E<=D.y||m===ui.Up&&E>=k.y;if(R&&!f.x){v.scrollTo({top:E,behavior:a});return}R?p.y=v.scrollTop-E:p.y=m===ui.Down?v.scrollTop-D.y:v.scrollTop-k.y,p.y&&v.scrollBy({top:-p.y,behavior:a});break}}this.handleMove(e,vv(uA(d,this.referenceCoordinates),p))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Pne.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=Mne,onActivation:i}=e,{active:o}=n;const{code:s}=t.nativeEvent;if(r.start.includes(s)){const a=o.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function qW(t){return!!(t&&"distance"in t)}function KW(t){return!!(t&&"delay"in t)}class x5{constructor(e,n,r){var i;r===void 0&&(r=sJe(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:o}=e,{target:s}=o;this.props=e,this.events=n,this.document=T0(s),this.documentListeners=new Lx(this.document),this.listeners=new Lx(r),this.windowListeners=new Lx(Us(s)),this.initialCoordinates=(i=dA(o))!=null?i:yc,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(sl.Resize,this.handleCancel),this.windowListeners.add(sl.DragStart,GW),this.windowListeners.add(sl.VisibilityChange,this.handleCancel),this.windowListeners.add(sl.ContextMenu,GW),this.documentListeners.add(sl.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(KW(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(qW(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(sl.Click,aJe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(sl.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:o}=this,{onMove:s,options:{activationConstraint:a}}=o;if(!i)return;const l=(n=dA(e))!=null?n:yc,c=uA(i,l);if(!r&&a){if(qW(a)){if(a.tolerance!=null&&iR(c,a.tolerance))return this.handleCancel();if(iR(c,a.distance))return this.handleStart()}if(KW(a)&&iR(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}e.cancelable&&e.preventDefault(),s(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===ui.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const cJe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class b5 extends x5{constructor(e){const{event:n}=e,r=T0(n.target);super(e,cJe,r)}}b5.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const uJe={move:{name:"mousemove"},end:{name:"mouseup"}};var BF;(function(t){t[t.RightClick=2]="RightClick"})(BF||(BF={}));class dJe extends x5{constructor(e){super(e,uJe,T0(e.event.target))}}dJe.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===BF.RightClick?!1:(r==null||r({event:n}),!0)}}];const oR={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class fJe extends x5{constructor(e){super(e,oR)}static setup(){return window.addEventListener(oR.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(oR.move.name,e)};function e(){}}}fJe.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Bx;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Bx||(Bx={}));var hA;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(hA||(hA={}));function hJe(t){let{acceleration:e,activator:n=Bx.Pointer,canScroll:r,draggingRect:i,enabled:o,interval:s=5,order:a=hA.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:u,delta:d,threshold:f}=t;const p=mJe({delta:d,disabled:!o}),[b,v]=_Ze(),m=A.useRef({x:0,y:0}),g=A.useRef({x:0,y:0}),x=A.useMemo(()=>{switch(n){case Bx.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Bx.DraggableRect:return i}},[n,i,l]),w=A.useRef(null),S=A.useCallback(()=>{const k=w.current;if(!k)return;const P=m.current.x*g.current.x,M=m.current.y*g.current.y;k.scrollBy(P,M)},[]),D=A.useMemo(()=>a===hA.TreeOrder?[...c].reverse():c,[a,c]);A.useEffect(()=>{if(!o||!c.length||!x){v();return}for(const k of D){if((r==null?void 0:r(k))===!1)continue;const P=c.indexOf(k),M=u[P];if(!M)continue;const{direction:T,speed:_}=tJe(k,M,x,e,f);for(const E of["x","y"])p[E][T[E]]||(_[E]=0,T[E]=0);if(_.x>0||_.y>0){v(),w.current=k,b(S,s),m.current=_,g.current=T;return}}m.current={x:0,y:0},g.current={x:0,y:0},v()},[e,S,r,v,o,s,JSON.stringify(x),JSON.stringify(p),b,c,D,u,JSON.stringify(f)])}const pJe={x:{[ko.Backward]:!1,[ko.Forward]:!1},y:{[ko.Backward]:!1,[ko.Forward]:!1}};function mJe(t){let{delta:e,disabled:n}=t;const r=cA(e);return n1(i=>{if(n||!r||!i)return pJe;const o={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[ko.Backward]:i.x[ko.Backward]||o.x===-1,[ko.Forward]:i.x[ko.Forward]||o.x===1},y:{[ko.Backward]:i.y[ko.Backward]||o.y===-1,[ko.Forward]:i.y[ko.Forward]||o.y===1}}},[n,e,r])}function gJe(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return n1(i=>{var o;return e==null?null:(o=r!=null?r:i)!=null?o:null},[r,e])}function vJe(t,e){return A.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,o=i.activators.map(s=>({eventName:s.eventName,handler:e(s.handler,r)}));return[...n,...o]},[]),[t,e])}var Qb;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Qb||(Qb={}));var jF;(function(t){t.Optimized="optimized"})(jF||(jF={}));const YW=new Map;function yJe(t,e){let{dragging:n,dependencies:r,config:i}=e;const[o,s]=A.useState(null),{frequency:a,measure:l,strategy:c}=i,u=A.useRef(t),d=m(),f=Yb(d),p=A.useCallback(function(g){g===void 0&&(g=[]),!f.current&&s(x=>x===null?g:x.concat(g.filter(w=>!x.includes(w))))},[f]),b=A.useRef(null),v=n1(g=>{if(d&&!n)return YW;if(!g||g===YW||u.current!==t||o!=null){const x=new Map;for(let w of t){if(!w)continue;if(o&&o.length>0&&!o.includes(w.id)&&w.rect.current){x.set(w.id,w.rect.current);continue}const S=w.node.current,D=S?new y5(l(S),S):null;w.rect.current=D,D&&x.set(w.id,D)}return x}return g},[t,o,n,d,l]);return A.useEffect(()=>{u.current=t},[t]),A.useEffect(()=>{d||p()},[n,d]),A.useEffect(()=>{o&&o.length>0&&s(null)},[JSON.stringify(o)]),A.useEffect(()=>{d||typeof a!="number"||b.current!==null||(b.current=setTimeout(()=>{p(),b.current=null},a))},[a,d,p,...r]),{droppableRects:v,measureDroppableContainers:p,measuringScheduled:o!=null};function m(){switch(c){case Qb.Always:return!1;case Qb.BeforeDragging:return n;default:return!n}}}function w5(t,e){return n1(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function xJe(t,e){return w5(t,e)}function bJe(t){let{callback:e,disabled:n}=t;const r=u2(e),i=A.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.MutationObserver=="undefined")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return A.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function f2(t){let{callback:e,disabled:n}=t;const r=u2(e),i=A.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.ResizeObserver=="undefined")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return A.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function wJe(t){return new y5(r1(t),t)}function XW(t,e,n){e===void 0&&(e=wJe);const[r,i]=A.useState(null);function o(){i(l=>{if(!t)return null;if(t.isConnected===!1){var c;return(c=l!=null?l:n)!=null?c:null}const u=e(t);return JSON.stringify(l)===JSON.stringify(u)?l:u})}const s=bJe({callback(l){if(t)for(const c of l){const{type:u,target:d}=c;if(u==="childList"&&d instanceof HTMLElement&&d.contains(t)){o();break}}}}),a=f2({callback:o});return Ad(()=>{o(),t?(a==null||a.observe(t),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),s==null||s.disconnect())},[t]),r}function SJe(t){const e=w5(t);return xne(t,e)}const QW=[];function _Je(t){const e=A.useRef(t),n=n1(r=>t?r&&r!==QW&&t&&e.current&&t.parentNode===e.current.parentNode?r:v5(t):QW,[t]);return A.useEffect(()=>{e.current=t},[t]),n}function EJe(t){const[e,n]=A.useState(null),r=A.useRef(t),i=A.useCallback(o=>{const s=rR(o.target);s&&n(a=>a?(a.set(s,LF(s)),new Map(a)):null)},[]);return A.useEffect(()=>{const o=r.current;if(t!==o){s(o);const a=t.map(l=>{const c=rR(l);return c?(c.addEventListener("scroll",i,{passive:!0}),[c,LF(c)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=t}return()=>{s(t),s(o)};function s(a){a.forEach(l=>{const c=rR(l);c==null||c.removeEventListener("scroll",i)})}},[i,t]),A.useMemo(()=>t.length?e?Array.from(e.values()).reduce((o,s)=>vv(o,s),yc):Ane(t):yc,[t,e])}function ZW(t,e){e===void 0&&(e=[]);const n=A.useRef(null);return A.useEffect(()=>{n.current=null},e),A.useEffect(()=>{const r=t!==yc;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?uA(t,n.current):yc}function CJe(t){A.useEffect(()=>{if(!c2)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function AJe(t,e){return A.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:o}=r;return n[i]=s=>{o(s,e)},n},{}),[t,e])}function Dne(t){return A.useMemo(()=>t?QZe(t):null,[t])}const JW=[];function TJe(t,e){e===void 0&&(e=r1);const[n]=t,r=Dne(n?Us(n):null),[i,o]=A.useState(JW);function s(){o(()=>t.length?t.map(l=>Ene(l)?r:new y5(e(l),l)):JW)}const a=f2({callback:s});return Ad(()=>{a==null||a.disconnect(),s(),t.forEach(l=>a==null?void 0:a.observe(l))},[t]),i}function Rne(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return t1(e)?e:t}function MJe(t){let{measure:e}=t;const[n,r]=A.useState(null),i=A.useCallback(c=>{for(const{target:u}of c)if(t1(u)){r(d=>{const f=e(u);return d?oe(B({},d),{width:f.width,height:f.height}):f});break}},[e]),o=f2({callback:i}),s=A.useCallback(c=>{const u=Rne(c);o==null||o.disconnect(),u&&(o==null||o.observe(u)),r(u?e(u):null)},[e,o]),[a,l]=lA(s);return A.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const PJe=[{sensor:b5,options:{}},{sensor:Pne,options:{}}],DJe={current:{}},PE={draggable:{measure:HW},droppable:{measure:HW,strategy:Qb.WhileDragging,frequency:jF.Optimized},dragOverlay:{measure:r1}};class jx extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const RJe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new jx,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:fA},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:PE,measureDroppableContainers:fA,windowRect:null,measuringScheduled:!1},kne={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:fA,draggableNodes:new Map,over:null,measureDroppableContainers:fA},i1=A.createContext(kne),Ine=A.createContext(RJe);function kJe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new jx}}}function IJe(t,e){switch(e.type){case wo.DragStart:return oe(B({},t),{draggable:oe(B({},t.draggable),{initialCoordinates:e.initialCoordinates,active:e.active})});case wo.DragMove:return t.draggable.active==null?t:oe(B({},t),{draggable:oe(B({},t.draggable),{translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}})});case wo.DragEnd:case wo.DragCancel:return oe(B({},t),{draggable:oe(B({},t.draggable),{active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}})});case wo.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new jx(t.droppable.containers);return i.set(r,n),oe(B({},t),{droppable:oe(B({},t.droppable),{containers:i})})}case wo.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,o=t.droppable.containers.get(n);if(!o||r!==o.key)return t;const s=new jx(t.droppable.containers);return s.set(n,oe(B({},o),{disabled:i})),oe(B({},t),{droppable:oe(B({},t.droppable),{containers:s})})}case wo.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new jx(t.droppable.containers);return o.delete(n),oe(B({},t),{droppable:oe(B({},t.droppable),{containers:o})})}default:return t}}function FJe(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=A.useContext(i1),o=cA(r),s=cA(n==null?void 0:n.id);return A.useEffect(()=>{if(!e&&!r&&o&&s!=null){if(!g5(o)||document.activeElement===o.target)return;const a=i.get(s);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const u of[l.current,c.current]){if(!u)continue;const d=AZe(u);if(d){d.focus();break}}})}},[r,e,i,s,o]),null}function Fne(t,e){let i=e,{transform:n}=i,r=Tt(i,["transform"]);return t!=null&&t.length?t.reduce((o,s)=>s(B({transform:o},r)),n):n}function OJe(t){return A.useMemo(()=>({draggable:B(B({},PE.draggable),t==null?void 0:t.draggable),droppable:B(B({},PE.droppable),t==null?void 0:t.droppable),dragOverlay:B(B({},PE.dragOverlay),t==null?void 0:t.dragOverlay)}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function NJe(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const o=A.useRef(!1),{x:s,y:a}=typeof i=="boolean"?{x:i,y:i}:i;Ad(()=>{if(!s&&!a||!e){o.current=!1;return}if(o.current||!r)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const u=n(c),d=xne(u,r);if(s||(d.x=0),a||(d.y=0),o.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const f=wne(c);f&&f.scrollBy({top:d.y,left:d.x})}},[e,s,a,r,n])}const h2=A.createContext(oe(B({},yc),{scaleX:1,scaleY:1}));var hf;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(hf||(hf={}));const One=A.memo(function(e){var n,r,i,o;let ft=e,{id:s,accessibility:a,autoScroll:l=!0,children:c,sensors:u=PJe,collisionDetection:d=HZe,measuring:f,modifiers:p}=ft,b=Tt(ft,["id","accessibility","autoScroll","children","sensors","collisionDetection","measuring","modifiers"]);const v=A.useReducer(IJe,void 0,kJe),[m,g]=v,[x,w]=kZe(),[S,D]=A.useState(hf.Uninitialized),k=S===hf.Initialized,{draggable:{active:P,nodes:M,translate:T},droppable:{containers:_}}=m,E=P!=null?M.get(P):null,R=A.useRef({initial:null,translated:null}),F=A.useMemo(()=>{var _t;return P!=null?{id:P,data:(_t=E==null?void 0:E.data)!=null?_t:DJe,rect:R}:null},[P,E]),L=A.useRef(null),[N,U]=A.useState(null),[H,j]=A.useState(null),z=Yb(b,Object.values(b)),q=d2("DndDescribedBy",s),$=A.useMemo(()=>_.getEnabled(),[_]),K=OJe(f),{droppableRects:G,measureDroppableContainers:Y,measuringScheduled:J}=yJe($,{dragging:k,dependencies:[T.x,T.y],config:K.droppable}),V=gJe(M,P),re=A.useMemo(()=>H?dA(H):null,[H]),fe=Ye(),pe=xJe(V,K.draggable.measure);NJe({activeNode:P!=null?M.get(P):null,config:fe.layoutShiftCompensation,initialRect:pe,measure:K.draggable.measure});const ce=XW(V,K.draggable.measure,pe),xe=XW(V?V.parentElement:null),Ae=A.useRef({activatorEvent:null,active:null,activeNode:V,collisionRect:null,collisions:null,droppableRects:G,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:_,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ee=_.getNodeFor((n=Ae.current.over)==null?void 0:n.id),ee=MJe({measure:K.dragOverlay.measure}),Oe=(r=ee.nodeRef.current)!=null?r:V,le=k?(i=ee.rect)!=null?i:ce:null,me=!!(ee.nodeRef.current&&ee.rect),ne=SJe(me?null:ce),se=Dne(Oe?Us(Oe):null),ge=_Je(k?Ee!=null?Ee:V:null),Q=TJe(ge),W=Fne(p,{transform:{x:T.x-ne.x,y:T.y-ne.y,scaleX:1,scaleY:1},activatorEvent:H,active:F,activeNodeRect:ce,containerNodeRect:xe,draggingNodeRect:le,over:Ae.current.over,overlayNodeRect:ee.rect,scrollableAncestors:ge,scrollableAncestorRects:Q,windowRect:se}),ve=re?vv(re,T):null,ue=EJe(ge),Me=ZW(ue),Pe=ZW(ue,[ce]),je=vv(W,Me),ke=le?KZe(le,W):null,De=F&&ke?d({active:F,collisionRect:ke,droppableRects:G,droppableContainers:$,pointerCoordinates:ve}):null,nt=VZe(De,"id"),[be,Ne]=A.useState(null),Ie=me?W:vv(W,Pe),Ve=GZe(Ie,(o=be==null?void 0:be.rect)!=null?o:null,ce),Ue=A.useRef(null),tt=A.useCallback((_t,lt)=>{let{sensor:Lt,options:nn}=lt;if(L.current==null)return;const sn=M.get(L.current);if(!sn)return;const Ce=_t.nativeEvent,ze=new Lt({active:L.current,activeNode:sn,event:Ce,options:nn,context:Ae,onAbort(gt){if(!M.get(gt))return;const{onDragAbort:Bt}=z.current,tn={id:gt};Bt==null||Bt(tn),x({type:"onDragAbort",event:tn})},onPending(gt,Rt,Bt,tn){if(!M.get(gt))return;const{onDragPending:Qt}=z.current,Vt={id:gt,constraint:Rt,initialCoordinates:Bt,offset:tn};Qt==null||Qt(Vt),x({type:"onDragPending",event:Vt})},onStart(gt){const Rt=L.current;if(Rt==null)return;const Bt=M.get(Rt);if(!Bt)return;const{onDragStart:tn}=z.current,Ht={activatorEvent:Ce,active:{id:Rt,data:Bt.data,rect:R}};rc.unstable_batchedUpdates(()=>{tn==null||tn(Ht),D(hf.Initializing),g({type:wo.DragStart,initialCoordinates:gt,active:Rt}),x({type:"onDragStart",event:Ht}),U(Ue.current),j(Ce)})},onMove(gt){g({type:wo.DragMove,coordinates:gt})},onEnd:Qe(wo.DragEnd),onCancel:Qe(wo.DragCancel)});Ue.current=ze;function Qe(gt){return function(){return te(this,null,function*(){const{active:Bt,collisions:tn,over:Ht,scrollAdjustedTranslate:Qt}=Ae.current;let Vt=null;if(Bt&&Qt){const{cancelDrop:pn}=z.current;Vt={activatorEvent:Ce,active:Bt,collisions:tn,delta:Qt,over:Ht},gt===wo.DragEnd&&typeof pn=="function"&&(yield Promise.resolve(pn(Vt)))&&(gt=wo.DragCancel)}L.current=null,rc.unstable_batchedUpdates(()=>{g({type:gt}),D(hf.Uninitialized),Ne(null),U(null),j(null),Ue.current=null;const pn=gt===wo.DragEnd?"onDragEnd":"onDragCancel";if(Vt){const vn=z.current[pn];vn==null||vn(Vt),x({type:pn,event:Vt})}})})}}},[M]),st=A.useCallback((_t,lt)=>(Lt,nn)=>{const sn=Lt.nativeEvent,Ce=M.get(nn);if(L.current!==null||!Ce||sn.dndKit||sn.defaultPrevented)return;const ze={active:Ce};_t(Lt,lt.options,ze)===!0&&(sn.dndKit={capturedBy:lt.sensor},L.current=nn,tt(Lt,lt))},[M,tt]),vt=vJe(u,st);CJe(u),Ad(()=>{ce&&S===hf.Initializing&&D(hf.Initialized)},[ce,S]),A.useEffect(()=>{const{onDragMove:_t}=z.current,{active:lt,activatorEvent:Lt,collisions:nn,over:sn}=Ae.current;if(!lt||!Lt)return;const Ce={active:lt,activatorEvent:Lt,collisions:nn,delta:{x:je.x,y:je.y},over:sn};rc.unstable_batchedUpdates(()=>{_t==null||_t(Ce),x({type:"onDragMove",event:Ce})})},[je.x,je.y]),A.useEffect(()=>{const{active:_t,activatorEvent:lt,collisions:Lt,droppableContainers:nn,scrollAdjustedTranslate:sn}=Ae.current;if(!_t||L.current==null||!lt||!sn)return;const{onDragOver:Ce}=z.current,ze=nn.get(nt),Qe=ze&&ze.rect.current?{id:ze.id,rect:ze.rect.current,data:ze.data,disabled:ze.disabled}:null,gt={active:_t,activatorEvent:lt,collisions:Lt,delta:{x:sn.x,y:sn.y},over:Qe};rc.unstable_batchedUpdates(()=>{Ne(Qe),Ce==null||Ce(gt),x({type:"onDragOver",event:gt})})},[nt]),Ad(()=>{Ae.current={activatorEvent:H,active:F,activeNode:V,collisionRect:ke,collisions:De,droppableRects:G,draggableNodes:M,draggingNode:Oe,draggingNodeRect:le,droppableContainers:_,over:be,scrollableAncestors:ge,scrollAdjustedTranslate:je},R.current={initial:le,translated:ke}},[F,V,De,ke,M,Oe,le,G,_,be,ge,je]),hJe(oe(B({},fe),{delta:T,draggingRect:ke,pointerCoordinates:ve,scrollableAncestors:ge,scrollableAncestorRects:Q}));const Fe=A.useMemo(()=>({active:F,activeNode:V,activeNodeRect:ce,activatorEvent:H,collisions:De,containerNodeRect:xe,dragOverlay:ee,draggableNodes:M,droppableContainers:_,droppableRects:G,over:be,measureDroppableContainers:Y,scrollableAncestors:ge,scrollableAncestorRects:Q,measuringConfiguration:K,measuringScheduled:J,windowRect:se}),[F,V,ce,H,De,xe,ee,M,_,G,be,Y,ge,Q,K,J,se]),ct=A.useMemo(()=>({activatorEvent:H,activators:vt,active:F,activeNodeRect:ce,ariaDescribedById:{draggable:q},dispatch:g,draggableNodes:M,over:be,measureDroppableContainers:Y}),[H,vt,F,ce,g,q,M,be,Y]);return Ot.createElement(yne.Provider,{value:w},Ot.createElement(i1.Provider,{value:ct},Ot.createElement(Ine.Provider,{value:Fe},Ot.createElement(h2.Provider,{value:Ve},c)),Ot.createElement(FJe,{disabled:(a==null?void 0:a.restoreFocus)===!1})),Ot.createElement(OZe,oe(B({},a),{hiddenTextDescribedById:q})));function Ye(){const _t=(N==null?void 0:N.autoScrollEnabled)===!1,lt=typeof l=="object"?l.enabled===!1:l===!1,Lt=k&&!_t&&!lt;return typeof l=="object"?oe(B({},l),{enabled:Lt}):{enabled:Lt}}}),LJe=A.createContext(null),e$="button",BJe="Draggable";function S5(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const o=d2(BJe),{activators:s,activatorEvent:a,active:l,activeNodeRect:c,ariaDescribedById:u,draggableNodes:d,over:f}=A.useContext(i1),{role:p=e$,roleDescription:b="draggable",tabIndex:v=0}=i!=null?i:{},m=(l==null?void 0:l.id)===e,g=A.useContext(m?h2:LJe),[x,w]=lA(),[S,D]=lA(),k=AJe(s,e),P=Yb(n);Ad(()=>(d.set(e,{id:e,key:o,node:x,activatorNode:S,data:P}),()=>{const T=d.get(e);T&&T.key===o&&d.delete(e)}),[d,e]);const M=A.useMemo(()=>({role:p,tabIndex:v,"aria-disabled":r,"aria-pressed":m&&p===e$?!0:void 0,"aria-roledescription":b,"aria-describedby":u.draggable}),[r,p,v,m,b,u.draggable]);return{active:l,activatorEvent:a,activeNodeRect:c,attributes:M,isDragging:m,listeners:r?void 0:k,node:x,over:f,setNodeRef:w,setActivatorNodeRef:D,transform:g}}function jJe(){return A.useContext(Ine)}const UJe="Droppable",zJe={timeout:25};function p2(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const o=d2(UJe),{active:s,dispatch:a,over:l,measureDroppableContainers:c}=A.useContext(i1),u=A.useRef({disabled:n}),d=A.useRef(!1),f=A.useRef(null),p=A.useRef(null),{disabled:b,updateMeasurementsFor:v,timeout:m}=B(B({},zJe),i),g=Yb(v!=null?v:r),x=A.useCallback(()=>{if(!d.current){d.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{c(Array.isArray(g.current)?g.current:[g.current]),p.current=null},m)},[m]),w=f2({callback:x,disabled:b||!s}),S=A.useCallback((M,T)=>{w&&(T&&(w.unobserve(T),d.current=!1),M&&w.observe(M))},[w]),[D,k]=lA(S),P=Yb(e);return A.useEffect(()=>{!w||!D.current||(w.disconnect(),d.current=!1,w.observe(D.current))},[D,w]),A.useEffect(()=>(a({type:wo.RegisterDroppable,element:{id:r,key:o,disabled:n,node:D,rect:f,data:P}}),()=>a({type:wo.UnregisterDroppable,key:o,id:r})),[r]),A.useEffect(()=>{n!==u.current.disabled&&(a({type:wo.SetDroppableDisabled,id:r,key:o,disabled:n}),u.current.disabled=n)},[r,o,n,a]),{active:s,rect:f,isOver:(l==null?void 0:l.id)===r,node:D,over:l,setNodeRef:k}}function VJe(t){let{animation:e,children:n}=t;const[r,i]=A.useState(null),[o,s]=A.useState(null),a=cA(n);return!n&&!r&&a&&i(a),Ad(()=>{if(!o)return;const l=r==null?void 0:r.key,c=r==null?void 0:r.props.id;if(l==null||c==null){i(null);return}Promise.resolve(e(c,o)).then(()=>{i(null)})},[e,r,o]),Ot.createElement(Ot.Fragment,null,n,r?A.cloneElement(r,{ref:s}):null)}const WJe={x:0,y:0,scaleX:1,scaleY:1};function $Je(t){let{children:e}=t;return Ot.createElement(i1.Provider,{value:kne},Ot.createElement(h2.Provider,{value:WJe},e))}const HJe={position:"fixed",touchAction:"none"},GJe=t=>g5(t)?"transform 250ms ease":void 0,qJe=A.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:i,children:o,className:s,rect:a,style:l,transform:c,transition:u=GJe}=t;if(!a)return null;const d=i?c:oe(B({},c),{scaleX:1,scaleY:1}),f=B(oe(B({},HJe),{width:a.width,height:a.height,top:a.top,left:a.left,transform:Xb.Transform.toString(d),transformOrigin:i&&r?jZe(r,a):void 0,transition:typeof u=="function"?u(r):u}),l);return Ot.createElement(n,{className:s,style:f,ref:e},o)}),KJe=t=>e=>{let{active:n,dragOverlay:r}=e;const i={},{styles:o,className:s}=t;if(o!=null&&o.active)for(const[a,l]of Object.entries(o.active))l!==void 0&&(i[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,l));if(o!=null&&o.dragOverlay)for(const[a,l]of Object.entries(o.dragOverlay))l!==void 0&&r.node.style.setProperty(a,l);return s!=null&&s.active&&n.node.classList.add(s.active),s!=null&&s.dragOverlay&&r.node.classList.add(s.dragOverlay),function(){for(const[l,c]of Object.entries(i))n.node.style.setProperty(l,c);s!=null&&s.active&&n.node.classList.remove(s.active)}},YJe=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Xb.Transform.toString(e)},{transform:Xb.Transform.toString(n)}]},XJe={duration:250,easing:"ease",keyframes:YJe,sideEffects:KJe({styles:{active:{opacity:"0"}}})};function QJe(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:i}=t;return u2((o,s)=>{if(e===null)return;const a=n.get(o);if(!a)return;const l=a.node.current;if(!l)return;const c=Rne(s);if(!c)return;const{transform:u}=Us(s).getComputedStyle(s),d=bne(u);if(!d)return;const f=typeof e=="function"?e:ZJe(e);return Tne(l,i.draggable.measure),f({active:{id:o,data:a.data,node:l,rect:i.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:s,rect:i.dragOverlay.measure(c)},droppableContainers:r,measuringConfiguration:i,transform:d})})}function ZJe(t){const{duration:e,easing:n,sideEffects:r,keyframes:i}=B(B({},XJe),t);return o=>{let x=o,{active:s,dragOverlay:a,transform:l}=x,c=Tt(x,["active","dragOverlay","transform"]);if(!e)return;const u={x:a.rect.left-s.rect.left,y:a.rect.top-s.rect.top},d={scaleX:l.scaleX!==1?s.rect.width*l.scaleX/a.rect.width:1,scaleY:l.scaleY!==1?s.rect.height*l.scaleY/a.rect.height:1},f=B({x:l.x-u.x,y:l.y-u.y},d),p=i(oe(B({},c),{active:s,dragOverlay:a,transform:{initial:l,final:f}})),[b]=p,v=p[p.length-1];if(JSON.stringify(b)===JSON.stringify(v))return;const m=r==null?void 0:r(B({active:s,dragOverlay:a},c)),g=a.node.animate(p,{duration:e,easing:n,fill:"forwards"});return new Promise(w=>{g.onfinish=()=>{m==null||m(),w()}})}}let t$=0;function JJe(t){return A.useMemo(()=>{if(t!=null)return t$++,t$},[t])}const Nne=Ot.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:i,transition:o,modifiers:s,wrapperElement:a="div",className:l,zIndex:c=999}=t;const{activatorEvent:u,active:d,activeNodeRect:f,containerNodeRect:p,draggableNodes:b,droppableContainers:v,dragOverlay:m,over:g,measuringConfiguration:x,scrollableAncestors:w,scrollableAncestorRects:S,windowRect:D}=jJe(),k=A.useContext(h2),P=JJe(d==null?void 0:d.id),M=Fne(s,{activatorEvent:u,active:d,activeNodeRect:f,containerNodeRect:p,draggingNodeRect:m.rect,over:g,overlayNodeRect:m.rect,scrollableAncestors:w,scrollableAncestorRects:S,transform:k,windowRect:D}),T=w5(f),_=QJe({config:r,draggableNodes:b,droppableContainers:v,measuringConfiguration:x}),E=T?m.setRef:void 0;return Ot.createElement($Je,null,Ot.createElement(VJe,{animation:_},d&&P?Ot.createElement(qJe,{key:P,id:d.id,ref:E,as:a,activatorEvent:u,adjustScale:e,className:l,transition:o,rect:T,style:B({zIndex:c},i),transform:M},n):null))}),eet=({unorganizedGamesCount:t})=>{const{setNodeRef:e,isOver:n}=p2({id:"unorganized",data:{type:"unorganized"}});return h.jsxs("div",{ref:e,style:{padding:"16px",backgroundColor:n?"#F0FFF4":"#F7FAFC",border:n?"2px solid #38A169":"2px dashed #CBD5E0",borderRadius:"12px",textAlign:"center",transition:"all 0.2s ease",minHeight:"60px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:n?"copy":"default",transform:n?"scale(1.02)":"scale(1)",boxShadow:n?"0 4px 12px rgba(56, 161, 105, 0.2)":"none"},children:[n&&h.jsx("div",{style:{position:"absolute",top:"-2px",left:"-2px",right:"-2px",bottom:"-2px",border:"2px dashed #38A169",borderRadius:"14px",pointerEvents:"none",animation:"pulse 1s infinite"}}),h.jsx("span",{style:{fontSize:"24px"},children:""}),h.jsxs("div",{children:[h.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",margin:"0",color:n?"#2F855A":"#4A5568"},children:"Unorganized Games"}),h.jsx("p",{style:{fontSize:"14px",color:n?"#38A169":"#718096",margin:"4px 0 0 0"},children:n?"Drop here to remove from folders":`${t} games without folders`})]})]})},tet=({game:t,onPlay:e,onEdit:n,onAssign:r,onDelete:i})=>{const{attributes:o,listeners:s,setNodeRef:a,isDragging:l}=S5({id:t.id,data:{type:"game",game:t}});return h.jsx("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"14px",border:"1px solid #E2E8F0",boxShadow:l?"0 8px 24px rgba(0, 0, 0, 0.15)":"0 2px 4px rgba(0, 0, 0, 0.05)",transition:"all 0.2s ease",opacity:l?.5:1,transform:l?"rotate(2deg)":"none",position:"relative"},onMouseEnter:c=>{l||(c.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)",c.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:c=>{l||(c.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.05)",c.currentTarget.style.transform="translateY(0)")},children:h.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[h.jsxs("div",oe(B(B({ref:a},o),s),{style:{width:"48px",height:"48px",backgroundColor:(t.gameType||"").includes("whack")?"#C6F6D5":(t.gameType||"").includes("spinner")?"#FED7D7":(t.gameType||"").includes("anagram")?"#BFDBFE":(t.gameType||"").includes("sentence")?"#E0F2FE":(t.gameType||"").includes("place")?"#FFEBE6":(t.gameType||"").includes("word-volley")?"#FFF2E6":"#E9D8FD",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",flexShrink:0,cursor:l?"grabbing":"grab",border:l?"2px solid #4299E1":"2px solid transparent",transition:"all 0.2s ease",position:"relative"},onMouseEnter:c=>{l||(c.currentTarget.style.border="2px solid #CBD5E0",c.currentTarget.style.transform="scale(1.05)")},onMouseLeave:c=>{l||(c.currentTarget.style.border="2px solid transparent",c.currentTarget.style.transform="scale(1)")},title:"Drag to move game to folder",children:[t.thumbnailUrl?h.jsx("img",{src:t.thumbnailUrl,alt:t.title,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"6px",pointerEvents:"none"}}):h.jsx("div",{style:{fontSize:"20px",color:"#718096",pointerEvents:"none"},children:(t.gameType||"").includes("whack")?"":(t.gameType||"").includes("spinner")?"":(t.gameType||"").includes("anagram")?"":(t.gameType||"").includes("sentence")?"":(t.gameType||"").includes("place")?"":(t.gameType||"").includes("word-volley")?"":""}),h.jsx("div",{style:{position:"absolute",bottom:"2px",right:"2px",width:"10px",height:"10px",backgroundColor:l?"#4299E1":"rgba(0, 0, 0, 0.2)",borderRadius:"2px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"6px",color:"white",opacity:l?1:.7,transition:"all 0.2s ease",pointerEvents:"none"},children:""})]})),h.jsxs("div",{style:{flex:1,minWidth:0},children:[h.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"3px",color:"#2D3748",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.title}),t.folderName&&h.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"3px",padding:"1px 5px",backgroundColor:t.folderColor||"#E2E8F0",color:"white",borderRadius:"10px",fontSize:"11px",fontWeight:"500",marginBottom:"6px"},children:[" ",t.folderName]}),h.jsx("p",{style:{color:"#718096",fontSize:"13px",marginBottom:"12px",textTransform:"capitalize"},children:(t.gameType||"Unknown").replace("-"," ")}),h.jsxs("div",{style:{display:"flex",gap:"5px",flexWrap:"nowrap"},children:[h.jsx("button",{onClick:c=>{c.stopPropagation(),e(t.id)},style:{padding:"3px 6px",backgroundColor:"#E3F2FD",color:"#1976D2",border:"1px solid #BBDEFB",borderRadius:"5px",cursor:"pointer",fontSize:"10px",fontWeight:"500",display:"flex",alignItems:"center",gap:"2px",transition:"all 0.2s",minWidth:"auto",whiteSpace:"nowrap"},onMouseEnter:c=>{c.currentTarget.style.backgroundColor="#BBDEFB",c.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:c=>{c.currentTarget.style.backgroundColor="#E3F2FD",c.currentTarget.style.transform="translateY(0)"},children:" Play"}),h.jsx("button",{onClick:c=>{c.stopPropagation(),n(t)},style:{padding:"3px 6px",backgroundColor:"#F3E5F5",color:"#7B1FA2",border:"1px solid #E1BEE7",borderRadius:"5px",cursor:"pointer",fontSize:"10px",fontWeight:"500",display:"flex",alignItems:"center",gap:"2px",transition:"all 0.2s",minWidth:"auto",whiteSpace:"nowrap"},onMouseEnter:c=>{c.currentTarget.style.backgroundColor="#E1BEE7",c.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:c=>{c.currentTarget.style.backgroundColor="#F3E5F5",c.currentTarget.style.transform="translateY(0)"},children:" Edit"}),h.jsx("button",{onClick:c=>{c.stopPropagation(),r(t)},style:{padding:"3px 6px",backgroundColor:"#E8F5E8",color:"#2E7D32",border:"1px solid #C8E6C9",borderRadius:"5px",cursor:"pointer",fontSize:"10px",fontWeight:"500",display:"flex",alignItems:"center",gap:"2px",transition:"all 0.2s",minWidth:"auto",whiteSpace:"nowrap"},onMouseEnter:c=>{c.currentTarget.style.backgroundColor="#C8E6C9",c.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:c=>{c.currentTarget.style.backgroundColor="#E8F5E8",c.currentTarget.style.transform="translateY(0)"},children:" Assign"}),h.jsx("button",{onClick:c=>{c.stopPropagation(),i(t.id)},style:{padding:"3px 6px",backgroundColor:"#FFEBEE",color:"#C62828",border:"1px solid #FFCDD2",borderRadius:"5px",cursor:"pointer",fontSize:"10px",fontWeight:"500",display:"flex",alignItems:"center",gap:"2px",transition:"all 0.2s",minWidth:"auto",whiteSpace:"nowrap"},onMouseEnter:c=>{c.currentTarget.style.backgroundColor="#FFCDD2",c.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:c=>{c.currentTarget.style.backgroundColor="#FFEBEE",c.currentTarget.style.transform="translateY(0)"},children:""})]})]})]})})},Lne=({folder:t,selectedFolderId:e,onFolderClick:n,onCreateSubfolder:r,onEditFolder:i,onDeleteFolder:o,getGamesInFolder:s,canCreateSubfolder:a,maxDepth:l,showGameCounts:c,collapsible:u,expandedFolders:d,onToggleExpanded:f})=>{const b=s(t.id).length,v=e===t.id,m=t.children&&t.children.length>0,g=d.has(t.id),x=t.level*24,{setNodeRef:w,isOver:S}=p2({id:t.id,data:{type:"folder",folder:t}}),{attributes:D,listeners:k,setNodeRef:P,isDragging:M}=S5({id:t.id,data:{type:"folder",folder:t}}),T=A.useCallback(()=>{n(t.id)},[t.id,n]),_=A.useCallback(E=>{E.stopPropagation(),m&&u&&f(t.id)},[t.id,m,u,f]);return h.jsxs("div",{style:{marginLeft:`${x}px`},children:[h.jsx("div",{style:{position:"relative"},children:h.jsx("div",{ref:w,style:{backgroundColor:S?"#E6FFFA":"transparent",border:S?"2px dashed #38B2AC":"2px solid transparent",borderRadius:"8px",padding:"2px",transition:"all 0.2s ease"},children:h.jsxs("div",oe(B(B({ref:P},D),k),{onClick:T,style:{padding:"16px 20px",backgroundColor:v?t.color||"#4299E1":"white",color:v?"white":"#4A5568",border:`2px solid ${t.color||"#4299E1"}`,borderRadius:"6px",cursor:M?"grabbing":"grab",fontSize:"14px",fontWeight:v?"600":"400",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"4px",userSelect:"none",opacity:M?.5:1,transform:M?"rotate(2deg)":"none",transition:"all 0.2s ease",minHeight:"56px"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[h.jsx("span",{style:{fontSize:"16px"},children:g?"":""}),h.jsx("span",{children:t.name}),m&&h.jsxs("span",{style:{fontSize:"12px",color:v?"rgba(255,255,255,0.8)":"#718096",marginLeft:"4px"},children:["(",t.children.length,")"]})]}),h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[c&&b>0&&h.jsxs("span",{style:{fontSize:"11px",backgroundColor:v?"rgba(255,255,255,0.2)":"#E2E8F0",color:v?"white":"#4A5568",padding:"2px 6px",borderRadius:"10px",fontWeight:"500"},children:[b," game",b!==1?"s":""]}),(v||t.level<l)&&a(t.id)&&h.jsx("button",{onClick:E=>{E.stopPropagation(),r(t.id)},style:{background:"none",border:"none",cursor:"pointer",padding:"2px",color:v?"white":"#4299E1",fontSize:"12px",opacity:v?1:.7},title:"Add subfolder",children:""}),h.jsx("button",{onClick:E=>{E.stopPropagation(),i(t)},style:{background:"none",border:"none",cursor:"pointer",padding:"2px",color:v?"white":"#805AD5",fontSize:"12px",opacity:v?1:.7},title:"Edit folder",children:""}),m&&h.jsx("button",{onClick:_,style:{background:"none",border:"none",cursor:"pointer",padding:"2px",color:v?"white":"#4A5568",fontSize:"12px"},children:g?"":""}),h.jsx("button",{onClick:E=>{E.stopPropagation(),window.confirm(`Delete folder "${t.name}"?`)&&o(t.id)},style:{background:"none",border:"none",cursor:"pointer",padding:"2px",color:v?"white":"#E53E3E",fontSize:"12px",opacity:.7},title:"Delete folder",children:""})]})]}))})}),g&&m&&t.children.map(E=>h.jsx(Lne,{folder:E,selectedFolderId:e,onFolderClick:n,onCreateSubfolder:r,onEditFolder:i,onDeleteFolder:o,getGamesInFolder:s,canCreateSubfolder:a,maxDepth:l,showGameCounts:c,collapsible:u,expandedFolders:d,onToggleExpanded:f},E.id))]})},net=({folders:t,selectedFolderId:e,onFolderClick:n,onCreateSubfolder:r,onEditFolder:i,onDeleteFolder:o,getGamesInFolder:s,canCreateSubfolder:a,maxDepth:l=3,showGameCounts:c=!0,collapsible:u=!0})=>{const[d,f]=A.useState(()=>{const m=new Set,g=x=>{x.forEach(w=>{w.level<2&&m.add(w.id),w.children&&w.children.length>0&&g(w.children)})};return g(t),m}),p=A.useCallback(m=>{f(g=>{const x=new Set(g);return x.has(m)?x.delete(m):x.add(m),x})},[]),b=A.useCallback(()=>{const m=new Set,g=x=>{x.forEach(w=>{m.add(w.id),w.children&&w.children.length>0&&g(w.children)})};g(t),f(m)},[t]),v=A.useCallback(()=>{f(new Set)},[]);return h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[h.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"8px",padding:"8px",backgroundColor:"#F7FAFC",borderRadius:"6px",border:"1px solid #E2E8F0"},children:[t.length>0&&u&&h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:b,style:{padding:"4px 8px",backgroundColor:"#E6FFFA",color:"#319795",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:" Expand All"}),h.jsx("button",{onClick:v,style:{padding:"4px 8px",backgroundColor:"#FED7D7",color:"#C53030",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:" Collapse All"})]}),h.jsx("button",{onClick:()=>r(null),style:{padding:"6px 12px",backgroundColor:"#4299E1",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:" Add Root Folder"}),t.length===0&&h.jsx("span",{style:{fontSize:"12px",color:"#718096",alignSelf:"center",marginLeft:"8px"},children:"Create folders to organize your games"})]}),t.length>0&&h.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:t.map(m=>h.jsx(Lne,{folder:m,selectedFolderId:e,onFolderClick:n,onCreateSubfolder:r,onEditFolder:i,onDeleteFolder:o,getGamesInFolder:s,canCreateSubfolder:a,maxDepth:l,showGameCounts:c,collapsible:u,expandedFolders:d,onToggleExpanded:p},m.id))}),t.length===0&&h.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"#718096",backgroundColor:"#F7FAFC",borderRadius:"8px",border:"2px dashed #CBD5E0"},children:[h.jsx("div",{style:{fontSize:"32px",marginBottom:"8px"},children:""}),h.jsx("p",{style:{margin:"0",fontWeight:"500"},children:"No folders yet"}),h.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"14px"},children:'Use the "Add Root Folder" button above to get started'})]})]})},m2="assignmentFolders",g2="assignmentFolderAssignments",n$=3,ret=t=>te(rt,null,function*(){try{const e=Ar.now();return(yield Sc(Pn(xt,m2),oe(B({},t),{createdAt:e,updatedAt:e}))).id}catch(e){throw console.error("Error creating assignment folder:",e),e}}),iet=t=>te(rt,null,function*(){try{const e=xr(Pn(xt,m2),Vn("userId","==",t),g0("order","asc"));return(yield er(e)).docs.map(r=>{var i,o;return oe(B({id:r.id},r.data()),{createdAt:((i=r.data().createdAt)==null?void 0:i.toDate())||new Date,updatedAt:((o=r.data().updatedAt)==null?void 0:o.toDate())||new Date})})}catch(e){throw console.error("Error fetching user assignment folders:",e),e}}),oet=(t,e)=>te(rt,null,function*(){try{const n=an(xt,m2,t);yield Ns(n,oe(B({},e),{updatedAt:Ar.now()}))}catch(n){throw console.error("Error updating assignment folder:",n),n}}),set=t=>te(rt,null,function*(){try{const e=RL(xt),n=an(xt,m2,t);e.delete(n);const r=xr(Pn(xt,g2),Vn("folderId","==",t));(yield er(r)).docs.forEach(o=>{e.delete(o.ref)}),yield e.commit()}catch(e){throw console.error("Error deleting assignment folder:",e),e}}),aet=(t,e,n)=>te(rt,null,function*(){try{return yield Bne(t,n),(yield Sc(Pn(xt,g2),{assignmentId:t,folderId:e,userId:n,assignedAt:Ar.now()})).id}catch(r){throw console.error("Error assigning assignment to folder:",r),r}}),Bne=(t,e)=>te(rt,null,function*(){try{const n=xr(Pn(xt,g2),Vn("assignmentId","==",t),Vn("userId","==",e)),r=yield er(n),i=RL(xt);r.docs.forEach(o=>{i.delete(o.ref)}),yield i.commit()}catch(n){throw console.error("Error removing assignment from folder:",n),n}}),cet=t=>te(rt,null,function*(){try{const e=xr(Pn(xt,g2),Vn("userId","==",t));return(yield er(e)).docs.map(r=>{var i;return oe(B({id:r.id},r.data()),{assignedAt:((i=r.data().assignedAt)==null?void 0:i.toDate())||new Date})})}catch(e){throw console.error("Error fetching assignment folder assignments:",e),e}}),_5=(t,e=[],n=null,r=0)=>t.filter(o=>(o.parentId===void 0?null:o.parentId)===n).map(o=>{const s=_5(t,e,o.id,r+1),l=e.filter(c=>c.folderId===o.id).length+s.reduce((c,u)=>c+(u.assignmentCount||0),0);return oe(B({},o),{children:s,level:r,assignmentCount:l,isExpanded:r<2})}).sort((o,s)=>(o.order||0)-(s.order||0)),uet=(t,e)=>{if(!e)return!0;let n=0,r=e;for(;r&&n<=n$;){const i=t.find(o=>o.id===r);if(!i)break;n++,r=i.parentId||null}return n<n$},det=(t,e)=>uet(t,e),fet=({userId:t,assignments:e,onAssignmentsUpdate:n,onShowToast:r})=>{const[i,o]=A.useState([]),[s,a]=A.useState([]),[l,c]=A.useState(null),[u,d]=A.useState(!1),[f,p]=A.useState(null),[b,v]=A.useState(new Set),[m,g]=A.useState([]),[x,w]=A.useState([]),{showModal:S}=kl(),D=m.length>0,k=x.length>0,P=A.useMemo(()=>_5(i,e),[i,e]),M=A.useCallback(()=>te(rt,null,function*(){if(t){d(!0),p(null);try{console.log(" Loading assignment folders for user:",t);const[G,Y]=yield Promise.all([iet(t),cet(t)]);console.log(" Retrieved assignment folders:",G),console.log(" Retrieved assignment folder assignments:",Y),o(G),a(Y);const J=new Set;G.forEach(V=>{(V.depth||0)<2&&J.add(V.id)}),v(J)}catch(G){const Y=G instanceof Error?G.message:"Failed to load assignment folder data";console.error("Error loading assignment folders:",G),p(Y),r({title:"Error Loading Assignment Folders",description:Y,status:"error",duration:5e3})}finally{d(!1)}}}),[t,r]);A.useEffect(()=>{t&&M()},[t,M]);const T=A.useCallback(G=>te(rt,null,function*(){var Y;try{const J=oe(B({},G),{userId:t,depth:G.parentId?(((Y=i.find(re=>re.id===G.parentId))==null?void 0:Y.depth)||0)+1:0,order:i.filter(re=>re.parentId===(G.parentId||null)).length});console.log(" Creating assignment folder:",J);const V=yield ret(J);return r({title:"Assignment Folder Created",description:`"${G.name}" has been created successfully`,status:"success",duration:3e3}),yield M(),V}catch(J){throw console.error("Error creating assignment folder:",J),r({title:"Error Creating Assignment Folder",description:"Failed to create assignment folder. Please try again.",status:"error",duration:5e3}),J}}),[t,i,M,r]),_=A.useCallback((G,Y)=>te(rt,null,function*(){try{console.log(" Updating assignment folder:",G,Y),yield oet(G,Y),r({title:"Assignment Folder Updated",description:"Assignment folder has been updated successfully",status:"success",duration:3e3}),yield M()}catch(J){throw console.error("Error updating assignment folder:",J),r({title:"Error Updating Assignment Folder",description:"Failed to update assignment folder. Please try again.",status:"error",duration:5e3}),J}}),[M,r]),E=A.useCallback(G=>te(rt,null,function*(){try{console.log(" Deleting assignment folder:",G),yield set(G),r({title:"Assignment Folder Deleted",description:"Assignment folder has been deleted successfully",status:"success",duration:3e3}),yield M()}catch(Y){throw console.error("Error deleting assignment folder:",Y),r({title:"Error Deleting Assignment Folder",description:"Failed to delete assignment folder. Please try again.",status:"error",duration:5e3}),Y}}),[M,r]),R=A.useCallback((G,Y)=>te(rt,null,function*(){try{console.log(" Assigning assignment to folder:",{assignmentId:G,folderId:Y,userId:t}),yield aet(G,Y,t);const J=yield NI(t);n(J),yield M()}catch(J){throw console.error("Error assigning assignment to folder:",J),r({title:"Error Moving Assignment",description:"Failed to move assignment to folder. Please try again.",status:"error",duration:5e3}),J}}),[t,n,M,r]),F=A.useCallback(G=>te(rt,null,function*(){try{console.log(" Removing assignment from folder:",{assignmentId:G,userId:t}),yield Bne(G,t);const Y=yield NI(t);n(Y),yield M()}catch(Y){throw console.error("Error removing assignment from folder:",Y),r({title:"Error Removing Assignment",description:"Failed to remove assignment from folder. Please try again.",status:"error",duration:5e3}),Y}}),[t,n,M,r]),L=A.useCallback(G=>e.filter(Y=>Y.folderId===G),[e]),N=A.useCallback(()=>e.filter(G=>!G.folderId),[e]),U=A.useCallback(G=>{console.log(" Opening create assignment folder modal, parentId:",G),S("assignment-folder-modal",{title:"Create Assignment Folder",onSave:Y=>te(rt,null,function*(){console.log(" onSave callback triggered with data:",Y,"parentId:",G);try{yield T(oe(B({},Y),{parentId:G||null})),console.log(" Folder creation completed successfully")}catch(J){throw console.error(" Error in onSave callback:",J),J}}),onCancel:()=>{console.log(" Create assignment folder modal cancelled")}})},[S,T]),H=A.useCallback(G=>{console.log(" Opening edit assignment folder modal:",G),S("assignment-folder-modal",{title:"Edit Assignment Folder",folder:{id:G.id,name:G.name,description:G.description,color:G.color},onSave:(Y,J)=>te(rt,null,function*(){console.log(" Edit onSave callback triggered with data:",Y,"folderId:",J);try{J&&(yield _(J,Y),console.log(" Folder update completed successfully"))}catch(V){throw console.error(" Error in edit onSave callback:",V),V}}),onCancel:()=>{console.log(" Edit assignment folder modal cancelled")}})},[S,_]),j=A.useCallback(()=>te(rt,null,function*(){r({title:"Undo",description:"Assignment folder undo functionality coming soon",status:"info",duration:3e3})}),[r]),z=A.useCallback(()=>te(rt,null,function*(){r({title:"Redo",description:"Assignment folder redo functionality coming soon",status:"info",duration:3e3})}),[r]),q=A.useCallback((G,Y)=>te(rt,null,function*(){console.log(" handleSaveFolder called with:",G,"folderId:",Y);try{Y?yield _(Y,G):yield T(oe(B({},G),{parentId:null}))}catch(J){throw console.error(" Error in handleSaveFolder:",J),J}}),[_,T]),$=A.useCallback(G=>te(rt,null,function*(){console.log(" handleDeleteFolder called with folderId:",G);try{yield E(G)}catch(Y){throw console.error(" Error in handleDeleteFolder:",Y),Y}}),[E]),K=A.useCallback(()=>{console.log(" handleCancelFolder called")},[]);return{folders:i,folderTree:P,assignments:s,selectedFolderId:l,isLoading:u,error:f,canUndo:D,canRedo:k,undoStack:m,redoStack:x,createNewFolder:T,updateExistingFolder:_,deleteExistingFolder:E,setSelectedFolderId:c,getAssignmentsInFolder:L,getUnorganizedAssignments:N,canCreateSubfolder:G=>det(i,G),refreshData:M,refreshFolders:M,openCreateFolderModal:U,openEditFolderModal:H,undo:j,redo:z,assignAssignmentToFolder:R,removeAssignmentFromFolder:F,handleSaveFolder:q,handleDeleteFolder:$,handleCancelFolder:K}},jne=({folder:t,selectedFolderId:e,onFolderClick:n,onCreateSubfolder:r,onEditFolder:i,onDeleteFolder:o,getAssignmentsInFolder:s,canCreateSubfolder:a,maxDepth:l,expandedFolders:c,onToggleExpanded:u})=>{var P;const d=s(t.id),f=d.length,p=e===t.id,b=t.children&&t.children.length>0,v=c.has(t.id),m=t.level*24,g=M=>M.replace(/[^a-zA-Z0-9]/g,"").slice(0,12),x=()=>{if(d.length===0)return null;const M=d.map(T=>g(T.gameName||T.title||"Untitled")).filter(T=>T.length>0);return M.length>0?M:["Untitled"]},{setNodeRef:w,isOver:S}=p2({id:`folder-${t.id}`,data:{type:"folder",folderId:t.id}}),D=A.useCallback(()=>{n(t.id)},[t.id,n]),k=A.useCallback(M=>{M.stopPropagation(),b&&u(t.id)},[t.id,b,u]);return h.jsx("div",{style:{marginLeft:`${m}px`},children:h.jsxs("div",{style:{position:"relative"},children:[h.jsx("div",{ref:w,style:{backgroundColor:S?"#E2F8FF":"transparent",border:S?"2px dashed #3182CE":"2px solid transparent",borderRadius:"8px",padding:"2px",transition:"all 0.2s ease"},children:h.jsxs("div",{onClick:D,style:{padding:"16px 20px",backgroundColor:p?t.color||"#4299E1":"white",color:p?"white":"#4A5568",border:`2px solid ${t.color||"#4299E1"}`,borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:p?"600":"400",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"4px",userSelect:"none",transition:"all 0.2s ease",minHeight:"56px",transform:S?"scale(1.02)":"scale(1)"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[b&&h.jsx("button",{onClick:k,style:{background:"none",border:"none",cursor:"pointer",padding:"2px",color:p?"white":"#4A5568",fontSize:"12px"},children:v?"":""}),h.jsx("span",{style:{fontSize:"16px"},children:v?"":""}),h.jsx("span",{children:t.name}),b&&h.jsxs("span",{style:{fontSize:"12px",color:p?"rgba(255,255,255,0.8)":"#718096",marginLeft:"4px"},children:["(",t.children.length,")"]})]}),h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[f>0&&h.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"2px",maxWidth:"200px"},children:(P=x())==null?void 0:P.map((M,T)=>h.jsx("span",{style:{fontSize:"10px",backgroundColor:p?"rgba(255,255,255,0.3)":"#E2E8F0",color:p?"white":"#4A5568",padding:"1px 4px",borderRadius:"8px",fontWeight:"500",fontFamily:"monospace"},children:M},T))}),h.jsxs("div",{style:{display:"flex",gap:"2px",alignItems:"center",pointerEvents:"auto",zIndex:20,position:"relative"},children:[t.level<l&&a(t.id)&&h.jsx("button",{onClick:M=>{M.stopPropagation(),r(t.id)},style:{background:"none",border:"none",cursor:"pointer",padding:"4px 6px",color:p?"white":"#4299E1",fontSize:"14px",opacity:1,zIndex:10,position:"relative",pointerEvents:"auto",minWidth:"20px",minHeight:"20px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Add subfolder",children:""}),h.jsx("button",{onClick:M=>{M.stopPropagation(),i(t)},style:{background:"none",border:"none",cursor:"pointer",padding:"4px 6px",color:p?"white":"#805AD5",fontSize:"14px",opacity:1,zIndex:10,position:"relative",pointerEvents:"auto",minWidth:"20px",minHeight:"20px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Edit folder",children:""}),h.jsx("button",{onClick:M=>{M.stopPropagation(),o(t.id)},style:{background:"none",border:"none",cursor:"pointer",padding:"4px 6px",color:p?"white":"#E53E3E",fontSize:"14px",opacity:1,zIndex:10,position:"relative",pointerEvents:"auto",minWidth:"20px",minHeight:"20px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Delete folder",children:""})]})]})]})}),b&&v&&h.jsx("div",{style:{marginTop:"4px"},children:t.children.map(M=>h.jsx(jne,{folder:M,selectedFolderId:e,onFolderClick:n,onCreateSubfolder:r,onEditFolder:i,onDeleteFolder:o,getAssignmentsInFolder:s,canCreateSubfolder:a,maxDepth:l,expandedFolders:c,onToggleExpanded:u},M.id))})]})})},het=({unorganizedAssignments:t})=>{const{isOver:e,setNodeRef:n}=p2({id:"unorganized-zone",data:{type:"unorganized"}});return h.jsxs("div",{ref:n,style:{padding:"12px",backgroundColor:e?"#FFF8E1":"#FFF8DC",border:`2px dashed ${e?"#F59E0B":"#DDD"}`,borderRadius:"8px",textAlign:"center",color:"#666",transition:"all 0.2s ease",transform:e?"scale(1.02)":"scale(1)"},children:[" Unorganized Assignments (",t.length,")",h.jsx("br",{}),h.jsx("small",{children:"Drag assignments here to remove them from folders"})]})},pet=({currentUser:t,assignments:e,onAssignmentsUpdate:n,showToast:r,assignmentFolderFilter:i,setAssignmentFolderFilter:o,onFolderHandlersReady:s})=>{const[a,l]=A.useState(new Set),c=fet({userId:(t==null?void 0:t.uid)||"",assignments:e,onAssignmentsUpdate:n,onShowToast:r}),u=A.useMemo(()=>_5(c.folders,e),[c.folders,e]),d=A.useCallback(v=>{l(m=>{const g=new Set(m);return g.has(v)?g.delete(v):g.add(v),g})},[]),f=A.useCallback(()=>{const v=new Set,m=g=>{g.forEach(x=>{v.add(x.id),x.children.length>0&&m(x.children)})};m(u),l(v)},[u]),p=A.useCallback(()=>{l(new Set)},[]),b=A.useMemo(()=>oe(B({},c),{expandAll:f,collapseAll:p}),[c.handleSaveFolder,c.handleDeleteFolder,c.handleCancelFolder,c.assignAssignmentToFolder,c.removeAssignmentFromFolder,c.openCreateFolderModal,c.openEditFolderModal,f,p]);return Ot.useEffect(()=>{s&&(console.log(" Calling onFolderHandlersReady with handlers:",Object.keys(b)),s(b))},[b,s]),Ot.useEffect(()=>{const v=new Set,m=g=>{g.forEach(x=>{x.level<2&&v.add(x.id),x.children.length>0&&m(x.children)})};m(u),l(g=>new Set([...g,...v]))},[u]),c.isLoading?h.jsx("div",{style:{marginBottom:"12px",padding:"16px",textAlign:"center"},children:"Loading assignment folders..."}):c.error?h.jsxs("div",{style:{marginBottom:"12px",padding:"16px",backgroundColor:"#FED7D7",color:"#9B2C2C",borderRadius:"8px",textAlign:"center"},children:["Error loading assignment folders: ",c.error]}):h.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"#F0F8FF",borderRadius:"8px",border:"1px solid #B0E0E6"},children:[h.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[h.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#2D3748"},children:" Organize Your Assignments"}),h.jsxs("div",{style:{display:"flex",gap:"4px"},children:[h.jsx("button",{onClick:c.undo,disabled:!c.canUndo,style:{padding:"6px 12px",backgroundColor:c.canUndo?"#2B6CB0":"#EDF2F7",color:c.canUndo?"white":"#A0AEC0",border:`2px solid ${c.canUndo?"#2B6CB0":"#CBD5E0"}`,borderRadius:"6px",cursor:c.canUndo?"pointer":"not-allowed",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s ease",boxShadow:c.canUndo?"0 2px 4px rgba(43, 108, 176, 0.2)":"none"},title:"Undo last action",children:" Undo"}),h.jsx("button",{onClick:c.redo,disabled:!c.canRedo,style:{padding:"6px 12px",backgroundColor:c.canRedo?"#38A169":"#EDF2F7",color:c.canRedo?"white":"#A0AEC0",border:`2px solid ${c.canRedo?"#38A169":"#CBD5E0"}`,borderRadius:"6px",cursor:c.canRedo?"pointer":"not-allowed",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s ease",boxShadow:c.canRedo?"0 2px 4px rgba(56, 161, 105, 0.2)":"none"},title:"Redo last action",children:" Redo"})]})]})}),h.jsx("div",{style:{marginBottom:"8px"},children:h.jsxs("button",{onClick:()=>{c.setSelectedFolderId(null),o("all")},style:{padding:"8px 16px",backgroundColor:c.selectedFolderId===null?"#E2E8F0":"white",color:c.selectedFolderId===null?"#2D3748":"#4A5568",border:"1px solid #E2E8F0",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:c.selectedFolderId===null?"600":"400"},children:[" All Assignments (",e.length,")"]})}),c.folders.length>0?h.jsxs("div",{children:[h.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px",alignItems:"center"},children:[h.jsx("button",{onClick:f,style:{padding:"4px 8px",backgroundColor:"#E6FFFA",color:"#234E52",border:"1px solid #4FD1C7",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"500"},children:" Expand All"}),h.jsx("button",{onClick:p,style:{padding:"4px 8px",backgroundColor:"#FED7D7",color:"#742A2A",border:"1px solid #FC8181",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"500"},children:" Collapse All"}),h.jsx("button",{onClick:()=>c.openCreateFolderModal(),style:{padding:"4px 8px",backgroundColor:"#4299E1",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"500"},children:" Add Root Folder"})]}),h.jsx("div",{style:{marginBottom:"12px",padding:"12px",backgroundColor:"white",borderRadius:"6px",border:"1px solid #E2E8F0",minHeight:"100px"},children:u.map(v=>h.jsx(jne,{folder:v,selectedFolderId:c.selectedFolderId,onFolderClick:m=>{c.setSelectedFolderId(m),o(m)},onCreateSubfolder:c.openCreateFolderModal,onEditFolder:c.openEditFolderModal,onDeleteFolder:c.deleteExistingFolder,getAssignmentsInFolder:c.getAssignmentsInFolder,canCreateSubfolder:c.canCreateSubfolder,maxDepth:3,expandedFolders:a,onToggleExpanded:d},v.id))}),h.jsx("div",{style:{marginTop:"12px"},children:h.jsx(het,{unorganizedAssignments:c.getUnorganizedAssignments()})})]}):h.jsx("div",{style:{marginBottom:"12px"},children:h.jsxs("div",{style:{marginBottom:"12px",padding:"16px",backgroundColor:"#E6F3FF",borderRadius:"8px",border:"1px solid #4299E1",textAlign:"center"},children:[h.jsx("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#2B6CB0",marginBottom:"8px"},children:" Get Started with Assignment Folders"}),h.jsx("p",{style:{color:"#4A5568",marginBottom:"12px"},children:"Organize your assignments into folders to keep track of different classes, subjects, or assignment types."}),h.jsx("button",{onClick:()=>c.openCreateFolderModal(),style:{padding:"8px 16px",backgroundColor:"#4299E1",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:" Create Your First Assignment Folder"})]})})]})},met=({assignment:t,getStudentDisplayName:e,handleViewAssignment:n,confirmDeleteAssignment:r})=>{var d,f,p;const{attributes:i,listeners:o,setNodeRef:s,isDragging:a}=S5({id:t.id||"unknown",data:{type:"assignment",assignment:t}}),l=new Date,c=((d=t.deadline)==null?void 0:d.toDate())<l&&(t.status==="assigned"||t.status==="started"),u=t.status==="completed";return h.jsxs("tr",{style:{borderBottom:"1px solid #E2E8F0",backgroundColor:u?"#F0FFF4":c?"#FFF5F5":"transparent",opacity:a?.5:1,transform:a?"rotate(1deg)":"none",transition:"all 0.2s ease"},children:[h.jsx("td",{style:{padding:"12px",width:"40px"},children:h.jsx("div",oe(B(B({ref:s},i),o),{style:{width:"24px",height:"24px",backgroundColor:"#F7FAFC",border:"2px solid #E2E8F0",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",cursor:a?"grabbing":"grab",fontSize:"12px",color:"#718096",transition:"all 0.2s ease"},onMouseEnter:b=>{a||(b.currentTarget.style.backgroundColor="#EDF2F7",b.currentTarget.style.borderColor="#CBD5E0")},onMouseLeave:b=>{a||(b.currentTarget.style.backgroundColor="#F7FAFC",b.currentTarget.style.borderColor="#E2E8F0")},title:"Drag to move assignment to folder",children:""}))}),h.jsx("td",{style:{padding:"12px"},children:t.gameName}),h.jsx("td",{style:{padding:"12px"},children:t.gameType}),h.jsx("td",{style:{padding:"12px"},children:(f=t.createdAt)==null?void 0:f.toDate().toLocaleDateString()}),h.jsxs("td",{style:{padding:"12px"},children:[(p=t.deadline)==null?void 0:p.toDate().toLocaleDateString(),c&&h.jsx("span",{style:{color:"#E53E3E",fontSize:"12px",fontWeight:"bold",display:"block"},children:"Overdue"})]}),h.jsx("td",{style:{padding:"12px"},children:e(t.studentEmail)}),h.jsx("td",{style:{padding:"12px"},children:h.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"medium",backgroundColor:u?"#C6F6D5":c?"#FED7D7":"#E2E8F0",color:u?"#2F855A":c?"#C53030":"#4A5568"},children:u?"Completed":c?"Overdue":"Assigned"})}),h.jsx("td",{style:{padding:"12px"},children:h.jsxs("div",{style:{display:"flex",gap:"8px"},children:[h.jsx("button",{onClick:()=>n(t),style:{padding:"6px 16px",backgroundColor:"#3182CE",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"View"}),h.jsx("button",{onClick:()=>r(t.id||""),style:{padding:"6px 16px",backgroundColor:"#F56565",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"Delete"})]})})]},t.id)},get=({currentUser:t,showToast:e,students:n,onAssignmentHandlersReady:r})=>{const[i,o]=A.useState([]),[s,a]=A.useState(""),[l,c]=A.useState("all"),[u,d]=A.useState("all"),[f,p]=A.useState(null),[b,v]=A.useState(null),[m,g]=A.useState([]),[x,w]=A.useState(!1),[S,D]=A.useState(null),{showModal:k}=kl(),P=H=>{var z,q;console.log(" handleDragStart called:",{activeId:H.active.id,activeData:H.active.data.current});const j=(z=H.active.data.current)==null?void 0:z.assignment;j&&((q=H.active.data.current)==null?void 0:q.type)==="assignment"&&D(j)},M=H=>te(rt,null,function*(){var G,Y,J,V,re;const{active:j,over:z}=H;if(console.log(" handleDragEnd called:",{activeId:j.id,overId:z==null?void 0:z.id,activeData:j.data.current,overData:z==null?void 0:z.data.current,hasHandlers:!!f}),D(null),!z||!f){console.log(" Early return - missing over or handlers:",{over:!!z,handlers:!!f});return}const q=(G=j.data.current)==null?void 0:G.assignment;if(!q||((Y=j.data.current)==null?void 0:Y.type)!=="assignment"){console.log(" Early return - invalid drag data:",{draggedAssignment:!!q,type:(J=j.data.current)==null?void 0:J.type});return}const $=(V=z.data.current)==null?void 0:V.folderId,K=(re=z.data.current)==null?void 0:re.type;console.log(" Processing drop:",{droppedOnType:K,droppedOnFolderId:$,assignmentId:q.id,assignmentName:q.gameName});try{K==="folder"&&$?(console.log(" Assigning to folder:",$),yield f.assignAssignmentToFolder(q.id,$),e({title:"Assignment Moved",description:`"${q.gameName}" moved to folder`,status:"success",duration:3e3})):K==="unorganized"?(console.log(" Removing from folder"),yield f.removeAssignmentFromFolder(q.id),e({title:"Assignment Unorganized",description:`"${q.gameName}" removed from folder`,status:"success",duration:3e3})):console.log(" No valid drop target found")}catch(fe){console.error(" Error in drag and drop:",fe),e({title:"Error",description:"Failed to move assignment",status:"error",duration:3e3})}}),T=H=>{const j=n.find(z=>z.email===H);return(j==null?void 0:j.name)||H.split("@")[0]};A.useEffect(()=>{te(rt,null,function*(){if(t)try{console.log("Fetching assignments for user:",t.uid);const j=yield NI(t.uid);console.log("Fetched assignments:",j),o(j)}catch(j){console.error("Error fetching assignments:",j),e({title:"Error fetching assignments",status:"error",duration:3e3})}})},[t]);const _=H=>te(rt,null,function*(){try{console.log("Deleting assignment:",H),yield IBe(H),o(i.filter(j=>j.id!==H)),e({title:"Assignment deleted successfully",status:"success",duration:3e3})}catch(j){console.error("Error deleting assignment:",j),e({title:"Error deleting assignment",status:"error",duration:3e3})}}),E=H=>te(rt,null,function*(){console.log("Viewing assignment:",H),v(H),w(!0);try{let j=[];H.id&&(j=yield FBe(H.id),console.log("Assignment attempts:",j)),g(j),k("assignment-details",{assignment:H,attempts:j,onClose:R})}catch(j){console.error("Error fetching assignment attempts:",j),e({title:"Error loading assignment details",status:"error",duration:3e3}),g([])}finally{w(!1)}}),R=()=>{console.log("Closing assignment view"),v(null),g([])},F=H=>{console.log(" confirmDeleteAssignment called with assignmentId:",H);const j=i.find(z=>z.id===H);if(!j){console.warn(" confirmDeleteAssignment: Assignment not found:",H);return}console.log(" confirmDeleteAssignment: Showing modal for assignment:",{assignmentId:H,assignmentTitle:j.gameName}),k("delete-confirmation",{title:"Delete Assignment?",itemName:j.gameName,itemType:"assignment",warningMessage:"This action cannot be undone. All student progress on this assignment will be lost.",onDelete:()=>_(H)})};A.useEffect(()=>{r({handleDeleteAssignment:_,handleViewAssignment:E,closeViewAssignment:R})},[i]);const L=i.filter(H=>{const j=!s||(()=>{var $,K,G;const q=s.toLowerCase();return(($=H.gameName)==null?void 0:$.toLowerCase().includes(q))||((K=H.studentEmail)==null?void 0:K.toLowerCase().includes(q))||((G=H.gameType)==null?void 0:G.toLowerCase().includes(q))})(),z=u==="all"?!0:u==="unorganized"?!H.folderId:H.folderId===u;return j&&z}),N=()=>{if(l==="all")return L;const H=new Date;return L.filter(j=>{var q;const z=(q=j.deadline)==null?void 0:q.toDate();switch(l){case"assigned":return j.status==="assigned"||j.status==="started";case"overdue":return(j.status==="assigned"||j.status==="started")&&z&&z<H;case"completed":return j.status==="completed";default:return!0}})},U=()=>{const H=new Date,j=L.filter(K=>K.status==="assigned"||K.status==="started").length,z=L.filter(K=>{var G;return(K.status==="assigned"||K.status==="started")&&((G=K.deadline)==null?void 0:G.toDate())&&K.deadline.toDate()<H}).length,q=L.filter(K=>K.status==="completed").length,$=K=>({padding:"8px 16px",margin:"0 4px",border:"none",borderRadius:"20px",backgroundColor:K?"#4299E1":"#F7FAFC",color:K?"white":"#4A5568",cursor:"pointer",fontSize:"14px",fontWeight:K?"bold":"normal",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"});return h.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"24px",flexWrap:"wrap"},children:[h.jsxs("button",{onClick:()=>c("all"),style:$(l==="all"),children:["All (",L.length,")"]}),h.jsxs("button",{onClick:()=>c("assigned"),style:$(l==="assigned"),children:["Active (",j,")"]}),h.jsxs("button",{onClick:()=>c("overdue"),style:$(l==="overdue"),children:["Overdue (",z,")"]}),h.jsxs("button",{onClick:()=>c("completed"),style:$(l==="completed"),children:["Completed (",q,")"]})]})};return h.jsxs(One,{onDragEnd:M,onDragStart:P,children:[h.jsxs("div",{children:[h.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"#FAFAFA",borderRadius:"8px",border:"1px solid #E2E8F0"},children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[h.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#2D3748"},children:" Search & Filter Assignments"}),(s||l!=="all"||u!=="all")&&h.jsx("button",{onClick:()=>{a(""),c("all"),d("all")},style:{padding:"4px 8px",backgroundColor:"#F7FAFC",color:"#4A5568",border:"1px solid #CBD5E0",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Clear Filters"})]}),h.jsx("div",{style:{marginBottom:"12px"},children:h.jsx("input",{type:"text",placeholder:"Search by title, game type, or student email...",value:s,onChange:H=>a(H.target.value),style:{padding:"10px 12px",border:"1px solid #CBD5E0",borderRadius:"6px",width:"100%",fontSize:"14px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)",outline:"none",transition:"border-color 0.2s"},onFocus:H=>{H.target.style.borderColor="#4299E1"},onBlur:H=>{H.target.style.borderColor="#CBD5E0"}})}),h.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[h.jsx("label",{style:{fontSize:"14px",color:"#4A5568",fontWeight:"500"},children:"Status:"}),h.jsxs("select",{value:l,onChange:H=>c(H.target.value),style:{padding:"6px 8px",border:"1px solid #CBD5E0",borderRadius:"4px",fontSize:"14px",backgroundColor:"white",cursor:"pointer"},children:[h.jsx("option",{value:"all",children:"All Status"}),h.jsx("option",{value:"assigned",children:" Active"}),h.jsx("option",{value:"overdue",children:" Overdue"}),h.jsx("option",{value:"completed",children:" Completed"})]})]}),f&&h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[h.jsx("label",{style:{fontSize:"14px",color:"#4A5568",fontWeight:"500"},children:"Organization:"}),h.jsxs("select",{value:u,onChange:H=>d(H.target.value),style:{padding:"6px 8px",border:"1px solid #CBD5E0",borderRadius:"4px",fontSize:"14px",backgroundColor:"white",cursor:"pointer"},children:[h.jsx("option",{value:"all",children:"All Assignments"}),h.jsx("option",{value:"unorganized",children:" Unorganized"})]})]}),h.jsx("div",{style:{marginLeft:"auto",fontSize:"14px",color:"#718096",fontWeight:"500"},children:(()=>{const H=N().length,j=i.length;return s||l!=="all"||u!=="all"?`${H} of ${j} assignments`:`${j} assignments`})()})]})]}),h.jsx(pet,{currentUser:t,assignments:i,onAssignmentsUpdate:o,showToast:e,assignmentFolderFilter:u,setAssignmentFolderFilter:d,onFolderHandlersReady:H=>{console.log(" Assignment folder handlers ready - methods available:",{assignAssignmentToFolder:typeof H.assignAssignmentToFolder,removeAssignmentFromFolder:typeof H.removeAssignmentFromFolder,totalMethods:Object.keys(H).length}),p(H)}}),U(),N().length>0?h.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[h.jsx("thead",{children:h.jsxs("tr",{style:{borderBottom:"1px solid #E2E8F0"},children:[h.jsx("th",{style:{padding:"12px",textAlign:"left",width:"40px"},children:""}),h.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Title"}),h.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Game"}),h.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Created Date"}),h.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Due Date"}),h.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Student"}),h.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Status"}),h.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Actions"})]})}),h.jsx("tbody",{children:N().map(H=>h.jsx(met,{assignment:H,getStudentDisplayName:T,handleViewAssignment:E,confirmDeleteAssignment:F},H.id))})]}):h.jsx("div",{style:{padding:"24px",textAlign:"center",backgroundColor:"#EBF8FF",borderRadius:"8px",marginTop:"16px"},children:h.jsxs("p",{style:{color:"#4A5568",fontSize:"16px"},children:["No ",l!=="all"?l:""," assignments found."]})})]}),h.jsx(Nne,{children:S?h.jsxs("div",{style:{padding:"6px 20px",backgroundColor:"#4299E1",color:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"12px",opacity:.9,transform:"rotate(2deg)",minWidth:"250px",maxWidth:"400px",cursor:"grabbing",whiteSpace:"nowrap"},children:["",h.jsx("span",{style:{flex:1,overflow:"hidden",textOverflow:"ellipsis"},children:S.gameName}),h.jsx("span",{style:{fontSize:"11px",backgroundColor:"rgba(255, 255, 255, 0.2)",padding:"2px 8px",borderRadius:"12px",flexShrink:0},children:"Assignment"})]}):null})]})},DE="teacher-dashboard-game-type-filter",vet=15*60*1e3,yet=t=>{const e={value:t,timestamp:Date.now()};localStorage.setItem(DE,JSON.stringify(e))},xet=()=>{try{const t=localStorage.getItem(DE);if(t){const e=JSON.parse(t);if(Date.now()-e.timestamp<vet)return e.value;localStorage.removeItem(DE)}}catch(t){console.error("Error loading game type filter:",t),localStorage.removeItem(DE)}return"all"},bet=()=>{var Rt,Bt,tn,Ht,Qt,Vt,pn,vn,Wn,tr,qr,hr,Jn,xn;const{currentUser:t}=Pr(),{toastMessage:e,showToast:n}=h5(),r=Fr(),i=vs(),{showModal:o}=kl();A.useEffect(()=>{i.state&&i.state.activeTab&&p(i.state.activeTab)},[i]);const[s,a]=A.useState([]),[l,c]=A.useState([]),[u,d]=A.useState([]),[f,p]=A.useState("create"),[b,v]=A.useState(null),[m,g]=A.useState([]),[x,w]=A.useState(!1),[S,D]=A.useState(""),[k,P]=A.useState(""),[M,T]=A.useState(xet()),[_,E]=A.useState("all"),[R,F]=A.useState(!1),[L,N]=A.useState([]),[U,H]=A.useState([]),[j,z]=A.useState(!1),[q,$]=A.useState([]),[K,G]=A.useState(!1),[Y,J]=A.useState(""),[V,re]=A.useState(""),[fe,pe]=A.useState("all"),[ce,xe]=A.useState("all"),[Ae,Ee]=A.useState("students"),[ee,Oe]=A.useState("all"),[le,me]=A.useState(null),ne=A.useRef(null),se=SZe({userId:(t==null?void 0:t.uid)||"",games:s,onGamesUpdate:Te=>a(Te),onShowToast:n}),ge=LZe(NZe(b5,{activationConstraint:{distance:3}})),[Q,W]=A.useState(null),ve=A.useCallback(Te=>{const{active:Je}=Te,ae=Je.data.current;console.log(" Drag start:",{activeId:Je.id,dragData:ae}),ae&&W({id:Je.id,type:ae.type,data:ae.folder||ae.game})},[]),ue=A.useCallback(Te=>{var Le,et,Ke,We;const{active:Je,over:ae}=Te;ae&&ae.id&&((Le=ae.data.current)==null?void 0:Le.type)==="folder"&&console.log(" Drag over folder:",{activeId:Je.id,overId:ae.id,overFolder:(Ke=(et=ae.data.current)==null?void 0:et.folder)==null?void 0:Ke.name,overType:(We=ae.data.current)==null?void 0:We.type})},[]),Me=A.useCallback(Te=>{var Le,et;const{active:Je,over:ae}=Te;if(console.log(" Drag end:",{activeId:Je.id,overId:ae==null?void 0:ae.id,activeType:(Le=Je.data.current)==null?void 0:Le.type,overType:(et=ae==null?void 0:ae.data.current)==null?void 0:et.type,overData:ae==null?void 0:ae.data.current}),Je&&ae&&Je.id!==ae.id){const Ke=Je.data.current,We=ae.data.current;if(console.log(" Drop data detailed:",{dragData:Ke,dropData:We,activeId:Je.id,overId:ae.id,dragType:Ke==null?void 0:Ke.type,dropType:We==null?void 0:We.type}),Ke&&We){const wt={draggedItem:{id:Je.id,type:Ke.type,data:Ke.folder||Ke.game},targetFolderId:ae.id,newParentId:We.type==="folder"?ae.id:(We.type==="unorganized",null)};console.log(" Calling handleDrop with:",wt),se.handleDrop(wt)}else console.log(" Missing drag or drop data:",{dragData:Ke,dropData:We})}else console.log(" Drop conditions not met:",{hasActive:!!Je,hasOver:!!ae,sameId:(Je==null?void 0:Je.id)===(ae==null?void 0:ae.id),activeId:Je==null?void 0:Je.id,overId:ae==null?void 0:ae.id});W(null)},[se]);A.useEffect(()=>{const Te=ae=>{if(!se.selectedFolderId)return;const Le=ae.target,et=Le.closest("[data-folder-button]"),Ke=Le.closest("[data-folder-actions]");!et&&!Ke&&se.setSelectedFolderId(null)},Je=ae=>{ae.key==="Escape"&&se.selectedFolderId&&se.setSelectedFolderId(null)};return document.addEventListener("mousedown",Te),document.addEventListener("keydown",Je),()=>{document.removeEventListener("mousedown",Te),document.removeEventListener("keydown",Je)}},[se.selectedFolderId,se.setSelectedFolderId]);const Pe=A.useCallback(()=>te(rt,null,function*(){F(!0);try{const Te=Pn(xt,"userGameConfigs"),Je=yield er(Te);if(Je.empty){a([]),c([]),F(!1);return}const ae=Je.docs.map(Ke=>{const We=Ke.data();return{id:Ke.id,title:We.title||"Untitled Game",description:We.description||"",gameType:We.type||"Unknown",thumbnailUrl:We.thumbnail||null,createdBy:We.email||"",share:We.share||!1,userId:We.userId||"",folderId:We.folderId||"",folderName:We.folderName||"",folderColor:We.folderColor||""}}),Le=ae.filter(Ke=>Ke.createdBy===(t==null?void 0:t.email)||Ke.userId===(t==null?void 0:t.uid)),et=ae.filter(Ke=>Ke.share===!0&&Ke.createdBy!==(t==null?void 0:t.email)&&Ke.userId!==(t==null?void 0:t.uid));a(Le),c(et)}catch(Te){console.error("Error fetching games:",Te),n({title:"Error fetching games",status:"error",duration:3e3})}finally{F(!1)}}),[t==null?void 0:t.email,t==null?void 0:t.uid,n]),je=A.useCallback(()=>te(rt,null,function*(){try{if(t!=null&&t.uid){const Te=yield kBe(t.uid);d(Te)}}catch(Te){n({title:"Error fetching assignments",status:"error",duration:3e3})}}),[t==null?void 0:t.uid,n]),ke=A.useCallback(()=>te(rt,null,function*(){z(!0);try{const Te=Pn(xt,"blankGameTemplates"),ae=(yield er(Te)).docs.map(wt=>{const kt=wt.data();return oe(B({id:wt.id},kt),{userId:kt.userId||"",createdBy:kt.createdBy||kt.email||""})}),Le=Pn(xt,"categoryTemplates"),Ke=(yield er(Le)).docs.map(wt=>{const kt=wt.data();return oe(B({id:wt.id},kt),{userId:kt.userId||"",createdBy:kt.createdBy||kt.email||""})}),We=ae.sort((wt,kt)=>{const Mt=(wt.type||"").localeCompare(kt.type||"");return Mt!==0?Mt:(wt.title||"").localeCompare(kt.title||"",void 0,{numeric:!0,sensitivity:"base"})});N(We),H(Ke)}catch(Te){console.error("Error fetching game templates:",Te),n({title:"Error fetching templates",status:"error",duration:3e3})}finally{z(!1)}}),[n]);A.useEffect(()=>{f==="create"&&ke()},[f,ke]),A.useEffect(()=>{f==="students"&&t&&st()},[f,t]),A.useEffect(()=>{t&&(Pe(),je())},[t,Pe,je]);const De=Te=>te(rt,null,function*(){const Je=Date.now();console.log(" handleDeleteGame called with gameId:",Te,"at timestamp:",Je);try{console.log(" Starting game deletion..."),yield ou(an(xt,"userGameConfigs",Te)),console.log(" Game deleted successfully from database, took:",Date.now()-Je,"ms"),a(s.filter(ae=>ae.id!==Te)),console.log(" Updated games state"),n({title:"Game deleted",status:"success",duration:3e3}),console.log(" Game deletion completed successfully, total time:",Date.now()-Je,"ms")}catch(ae){console.error(" Error deleting game:",ae),n({title:"Error deleting game",status:"error",duration:3e3})}}),nt=Te=>{console.log(" confirmDeleteGame called with gameId:",Te);const Je=s.find(ae=>ae.id===Te);if(!Je){console.warn(" confirmDeleteGame: Game not found:",Te);return}console.log(" confirmDeleteGame: Showing modal for game:",{gameId:Te,gameName:Je.title}),o("delete-confirmation",{title:"Delete Game?",itemName:Je.title,itemType:"game",warningMessage:void 0,onDelete:()=>De(Te)})},be=()=>{};u.filter(Te=>{const Je=S.toLowerCase();return Te.gameName.toLowerCase().includes(Je)||Te.studentEmail.toLowerCase().includes(Je)});const Ne=A.useCallback(()=>{let Te=s;return se.selectedFolderId&&(Te=se.getGamesInFolder(se.selectedFolderId)),Te.filter(Je=>{const ae=!k||Je.title.toLowerCase().includes(k.toLowerCase())||(Je.description||"").toLowerCase().includes(k.toLowerCase())||(Je.gameType||"").toLowerCase().includes(k.toLowerCase()),Le=M==="all"||(Je.gameType||"").toLowerCase().includes(M.toLowerCase());let et=!0;return _!=="all"&&!se.selectedFolderId&&(_==="unorganized"?et=!Je.folderId:_==="in-folders"&&(et=!!Je.folderId)),ae&&Le&&et}).sort((Je,ae)=>{const Le=(Je.gameType||"").localeCompare(ae.gameType||"");return Le!==0?Le:(Je.title||"").localeCompare(ae.title||"",void 0,{numeric:!0,sensitivity:"base"})})},[s,k,M,_,se.selectedFolderId,se]),Ie=A.useCallback(()=>l.filter(Te=>{const Je=!V||Te.title.toLowerCase().includes(V.toLowerCase())||(Te.description||"").toLowerCase().includes(V.toLowerCase())||(Te.gameType||"").toLowerCase().includes(V.toLowerCase()),ae=fe==="all"||(Te.gameType||"").toLowerCase().includes(fe.toLowerCase());return Je&&ae}).sort((Te,Je)=>{const ae=(Te.gameType||"").localeCompare(Je.gameType||"");return ae!==0?ae:(Te.title||"").localeCompare(Je.title||"",void 0,{numeric:!0,sensitivity:"base"})}),[l,V,fe]),Ve=()=>{},Ue=(Te,Je,ae,Le)=>te(rt,null,function*(){console.log(`Assigning ${Te.title} to ${Je.length} student(s)`),console.log(`Deadline: ${ae}, Times to complete: ${Le}`);try{for(const et of Je){const Ke={gameName:Te.title,gameId:Te.id,gameType:Te.gameType||"Unknown",studentEmail:et,teacherId:(t==null?void 0:t.uid)||"",teacherEmail:(t==null?void 0:t.email)||"",timesRequired:Le,deadline:Ar.fromDate(ae)},We=yield lee(Ke);console.log("Successfully created assignment, ID:",We)}je()}catch(et){throw console.error("Error creating assignment:",et),et}}),tt=Te=>{console.log(" handleTemplateClick called with template:",Te),console.log(" Template type:",Te.type),console.log(" Template ID:",Te.id),Te.id&&sessionStorage.setItem("selectedTemplateId",Te.id),Te.type==="whack-a-mole"?Te.id?r(`/configure/whack-a-mole/${Te.id}`):r("/configure/whack-a-mole"):Te.type==="sort-categories-egg"?Te.id?r(`/configure/sort-categories-egg/${Te.id}`):r("/configure/sort-categories-egg"):Te.type==="spinner-wheel"?Te.id?r(`/configure/spinner-wheel/${Te.id}`):r("/configure/spinner-wheel"):Te.type==="anagram"?Te.id?r(`/configure/anagram/${Te.id}`):r("/configure/anagram"):Te.type==="place-value-showdown"?Te.id?r(`/configure/place-value-showdown/${Te.id}`):r("/configure/place-value-showdown"):Te.type==="sentence-sense"?(console.log(" Navigating to sentence-sense configuration"),Te.id?(console.log(" Navigating with template ID:",Te.id),r(`/configure/sentence-sense/${Te.id}`)):(console.log(" Navigating without template ID"),r("/configure/sentence-sense"))):Te.type==="word-volley"?(console.log(" Navigating to word-volley configuration"),Te.id?(console.log(" Navigating with template ID:",Te.id),r(`/configure/word-volley/${Te.id}`)):(console.log(" Navigating without template ID"),r("/configure/word-volley"))):(console.log(" Unknown template type, navigating to default /configure"),r("/configure"))},st=()=>te(rt,null,function*(){if(t){G(!0);try{const Te=Pn(xt,"users"),Je=xr(Te,Vn("role","==","student"),Vn("teacherId","==",t.uid)),Le=(yield er(Je)).docs.map(et=>{const Ke=et.data();return{id:et.id,name:Ke.name||"",email:Ke.email||"",grade:Ke.grade||"",age:Ke.age||0,notes:Ke.notes||"",createdAt:Ke.createdAt||Ar.now(),passwordSetupSent:Ke.passwordSetupSent||!1}});$(Le)}catch(Te){console.error("Error fetching students:",Te),n({title:"Error fetching students",status:"error",duration:3e3})}finally{G(!1)}}}),vt=Te=>te(rt,null,function*(){if(t)try{console.log("Creating student record for:",Te.email);const Je={name:Te.name,email:Te.email,grade:Te.grade,age:Te.age,notes:Te.notes,role:"student",teacherId:t.uid,teacherEmail:t.email,createdAt:_o(),updatedAt:_o(),displayName:Te.name,hasTemporaryPassword:!0,linkedToAuth:!1,authUid:"",emailVerified:!1,passwordSetupSent:!1,passwordSetupComplete:!1,lastLogin:null,createdBy:"teacher",source:"teacher_dashboard"},Le={id:(yield Sc(Pn(xt,"users"),Je)).id,name:Te.name,email:Te.email,grade:Te.grade,age:Te.age,notes:Te.notes,createdAt:Ar.now(),passwordSetupSent:!1};$([...q,Le]),n({title:"Student added successfully",description:`Password setup email will be sent automatically to ${Te.email}`,status:"success",duration:5e3})}catch(Je){console.error("Error adding student:",Je),n({title:"Error adding student",status:"error",duration:3e3})}}),Fe=Te=>{console.log(" confirmDeleteStudent called with studentId:",Te);const Je=q.find(ae=>ae.id===Te);if(!Je){console.warn(" confirmDeleteStudent: Student not found:",Te);return}console.log(" confirmDeleteStudent: Showing modal for student:",{studentId:Te,studentName:Je.name}),o("delete-confirmation",{title:"Delete Student?",itemName:Je.name,itemType:"student",warningMessage:"All associated assignments will remain but will no longer be linked to this student.",onDelete:()=>Qe(Te)})},ct=()=>{console.log(" openAddStudentModal called"),o("student-modal",{student:null})},Ye=Te=>{console.log(" openEditStudentModal called with student:",Te),o("student-modal",{student:{id:Te.id,name:Te.name,email:Te.email,grade:Te.grade||"",age:Te.age||0,notes:Te.notes||""}})},ft=Te=>{console.log(" openStudentNotesModal called with student:",Te),o("student-notes",{student:{id:Te.id,name:Te.name,email:Te.email,notes:Te.notes||""}})},_t=(Te,Je)=>te(rt,null,function*(){try{console.log("Saving student notes:",Te,Je);const ae=an(xt,"users",Te);yield Ns(ae,{notes:Je,updatedAt:_o()}),$(q.map(Le=>Le.id===Te?oe(B({},Le),{notes:Je}):Le)),n({title:"Notes saved successfully",status:"success",duration:3e3})}catch(ae){console.error("Error saving student notes:",ae),n({title:"Error saving notes",status:"error",duration:3e3})}}),lt=Te=>{Ee(f),r(`/student?id=${Te.id}&teacherView=true`)},Lt=Te=>{r(`/game/${Te}`)},nn=Te=>{ne.current=Te,o("edit-choice",{gameName:Te.title})},sn=Te=>{const Je=Te.gameType;let ae="/configure";return Je==="whack-a-mole"?ae="/configure/whack-a-mole":Je==="sort-categories-egg"?ae="/configure/sort-categories-egg":Je==="spinner-wheel"?ae="/configure/spinner-wheel":Je==="anagram"?ae="/configure/anagram":Je==="sentence-sense"?ae="/configure/sentence-sense":Je==="place-value-showdown"?ae="/configure/place-value-showdown":Je==="word-volley"&&(ae="/configure/word-volley"),{handleUpdate:()=>{r(`${ae}/${Te.id}`)},handleCopy:()=>{r(`${ae}/${Te.id}?copy=true`)}}},Ce=Te=>{o("assignment-creation",{game:Te})},ze=(Te,Je)=>te(rt,null,function*(){try{console.log("Updating student:",Te,Je);const ae=an(xt,"users",Te);yield Ns(ae,Je),$(q.map(Le=>Le.id===Te?B(B({},Le),Je):Le)),n({title:"Student updated successfully",status:"success",duration:3e3})}catch(ae){console.error("Error updating student:",ae),n({title:"Error updating student",status:"error",duration:3e3})}}),Qe=Te=>te(rt,null,function*(){const Je=Date.now();console.log(" handleDeleteStudent called with studentId:",Te,"at timestamp:",Je);try{console.log(" Starting student deletion..."),yield ou(an(xt,"users",Te)),console.log(" Student deleted successfully from database, took:",Date.now()-Je,"ms"),$(q.filter(ae=>ae.id!==Te)),console.log(" Updated students state"),n({title:"Student deleted",status:"success",duration:3e3}),console.log(" Student deletion completed successfully, total time:",Date.now()-Je,"ms")}catch(ae){console.error(" Error deleting student:",ae),n({title:"Error deleting student",status:"error",duration:3e3})}}),gt=Te=>{T(Te),yet(Te)};return h.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"32px 16px"},children:[h.jsx(mZe,{toastMessage:e}),h.jsx(aee,{onDeleteFolder:se.handleDeleteFolder,onSaveFolder:se.handleSaveFolder,onCancelFolder:se.handleCancelFolder,onSaveStudent:(Te,Je)=>{Je?ze(Je,Te):vt(Te)},onCancelStudent:()=>{},onSaveStudentNotes:_t,onUpdateGame:()=>{const Te=ne.current;if(Te){const{handleUpdate:Je}=sn(Te);Je()}},onCopyGame:()=>{const Te=ne.current;if(Te){const{handleCopy:Je}=sn(Te);Je()}},onCancelEdit:()=>{ne.current=null},onCloseAssignmentDetails:be,onAssignGame:Ue,onCancelAssignment:Ve,showToast:n}),h.jsx("h1",{style:{fontSize:"32px",fontWeight:"bold",marginBottom:"32px"},children:"Create"}),h.jsxs("div",{children:[h.jsxs("div",{style:{display:"flex",borderBottom:"1px solid #E2E8F0",marginBottom:"24px"},children:[h.jsx("div",{onClick:()=>p("create"),style:{padding:"12px 24px",position:"relative",cursor:"pointer",color:f==="create"?"#4299E1":"#718096",fontWeight:f==="create"?"bold":"normal",borderBottom:f==="create"?"2px solid #4299E1":"none",marginBottom:f==="create"?"-1px":"0",transition:"all 0.2s ease",textDecoration:"none",backgroundColor:f==="create"?"#EBF8FF":"transparent",borderRadius:"4px 4px 0 0"},children:"Create Games"}),h.jsx("div",{onClick:()=>p("assignments"),style:{padding:"12px 24px",position:"relative",cursor:"pointer",color:f==="assignments"?"#4299E1":"#718096",fontWeight:f==="assignments"?"bold":"normal",borderBottom:f==="assignments"?"2px solid #4299E1":"none",marginBottom:f==="assignments"?"-1px":"0",transition:"all 0.2s ease",textDecoration:"none",backgroundColor:f==="assignments"?"#EBF8FF":"transparent",borderRadius:"4px 4px 0 0"},children:"Track Assignments"}),h.jsx("div",{onClick:()=>p("students"),style:{padding:"12px 24px",position:"relative",cursor:"pointer",color:f==="students"?"#4299E1":"#718096",fontWeight:f==="students"?"bold":"normal",borderBottom:f==="students"?"2px solid #4299E1":"none",marginBottom:f==="students"?"-1px":"0",transition:"all 0.2s ease",textDecoration:"none",backgroundColor:f==="students"?"#EBF8FF":"transparent",borderRadius:"4px 4px 0 0"},children:"My Students"})]}),f==="assignments"&&h.jsx(get,{currentUser:t,showToast:n,students:q,onAssignmentHandlersReady:Te=>{window.assignmentHandlers=Te}}),f==="create"&&h.jsxs("div",{children:[h.jsxs("div",{style:{marginBottom:"48px"},children:[h.jsx("h2",{style:{fontSize:"24px",fontWeight:"bold",marginBottom:"20px",color:"#2D3748",borderBottom:"2px solid #805AD5",paddingBottom:"8px"},children:"Start Creating"}),j?h.jsx("div",{style:{textAlign:"center",padding:"40px",backgroundColor:"#F7FAFC",borderRadius:"12px",border:"1px solid #E2E8F0"},children:h.jsx("div",{style:{fontSize:"16px",color:"#718096"},children:"Loading templates..."})}):L.length>0?h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"20px"},children:L.map(Te=>h.jsxs("div",{onClick:()=>{console.log(" Template card clicked:",Te),tt(Te)},style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",border:"2px solid #E2E8F0",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)",transition:"all 0.2s ease",cursor:"pointer",textAlign:"center"},onMouseEnter:Je=>{Je.currentTarget.style.borderColor="#805AD5",Je.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)",Je.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:Je=>{Je.currentTarget.style.borderColor="#E2E8F0",Je.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.05)",Je.currentTarget.style.transform="translateY(0)"},children:[h.jsx("div",{style:{width:"80px",height:"80px",backgroundColor:Te.type==="whack-a-mole"?"#C6F6D5":Te.type==="spinner-wheel"?"#FED7D7":Te.type==="anagram"?"#BFDBFE":Te.type==="sentence-sense"?"#E8F5E8":Te.type==="place-value-showdown"?"#FFE6E6":Te.type==="word-volley"?"#FFF2E6":"#E9D8FD",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",fontSize:"32px"},children:Te.thumbnail?h.jsx("img",{src:Te.thumbnail,alt:Te.title,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"12px"}}):Te.type==="whack-a-mole"?"":Te.type==="spinner-wheel"?"":Te.type==="anagram"?"":Te.type==="sentence-sense"?"":Te.type==="place-value-showdown"?"":Te.type==="word-volley"?"":""}),h.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px",color:"#2D3748"},children:Te.title}),h.jsx("div",{style:{padding:"8px 16px",backgroundColor:"#805AD5",color:"white",borderRadius:"6px",fontSize:"14px",fontWeight:"500",display:"inline-flex",alignItems:"center",gap:"6px"},children:" Create Game"})]},Te.id))}):h.jsxs("div",{style:{textAlign:"center",padding:"40px",backgroundColor:"#F7FAFC",borderRadius:"12px",border:"2px dashed #CBD5E0"},children:[h.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),h.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px",color:"#2D3748"},children:"No templates available"}),h.jsx("p",{style:{color:"#718096"},children:"Templates will appear here when they become available"})]})]}),h.jsxs("div",{style:{marginBottom:"48px"},children:[h.jsx("h2",{style:{fontSize:"24px",fontWeight:"bold",marginBottom:"20px",color:"#2D3748",borderBottom:"2px solid #4299E1",paddingBottom:"8px"},children:"My Created Games"}),R?h.jsx("div",{style:{textAlign:"center",padding:"40px",backgroundColor:"#F7FAFC",borderRadius:"12px",border:"1px solid #E2E8F0"},children:h.jsx("div",{style:{fontSize:"16px",color:"#718096"},children:"Loading games..."})}):s.length>0?h.jsxs("div",{children:[h.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"#FAFAFA",borderRadius:"8px",border:"1px solid #E2E8F0"},children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[h.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#2D3748"},children:" Search & Filter Games"}),(k||M!=="all"||_!=="all")&&h.jsx("button",{onClick:()=>{P(""),T("all"),E("all")},style:{padding:"4px 8px",backgroundColor:"#F7FAFC",color:"#4A5568",border:"1px solid #CBD5E0",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Clear Filters"})]}),h.jsx("div",{style:{marginBottom:"12px"},children:h.jsx("input",{type:"text",placeholder:"Search by title, description, or game type...",value:k,onChange:Te=>P(Te.target.value),style:{padding:"10px 12px",border:"1px solid #CBD5E0",borderRadius:"6px",width:"100%",fontSize:"14px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)",outline:"none",transition:"border-color 0.2s"},onFocus:Te=>{Te.target.style.borderColor="#4299E1"},onBlur:Te=>{Te.target.style.borderColor="#CBD5E0"}})}),h.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[h.jsx("label",{style:{fontSize:"14px",color:"#4A5568",fontWeight:"500"},children:"Type:"}),h.jsxs("select",{value:M,onChange:Te=>gt(Te.target.value),style:{padding:"6px 8px",border:"1px solid #CBD5E0",borderRadius:"4px",fontSize:"14px",backgroundColor:"white",cursor:"pointer"},children:[h.jsx("option",{value:"all",children:" All Types"}),h.jsx("option",{value:"anagram",children:" Anagram"}),h.jsx("option",{value:"place-value-showdown",children:" Place Value Showdown"}),h.jsx("option",{value:"word-volley",children:" Pong"}),h.jsx("option",{value:"sentence-sense",children:" Sentence Sense"}),h.jsx("option",{value:"sort-categories-egg",children:" Sort Categories"}),h.jsx("option",{value:"spinner-wheel",children:" Spinner Wheel"}),h.jsx("option",{value:"whack-a-mole",children:" Whack-a-Mole"})]})]}),!se.selectedFolderId&&se.folders.length>0&&h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[h.jsx("label",{style:{fontSize:"14px",color:"#4A5568",fontWeight:"500"},children:"Organization:"}),h.jsxs("select",{value:_,onChange:Te=>E(Te.target.value),style:{padding:"6px 8px",border:"1px solid #CBD5E0",borderRadius:"4px",fontSize:"14px",backgroundColor:"white",cursor:"pointer"},children:[h.jsx("option",{value:"all",children:"All Games"}),h.jsx("option",{value:"in-folders",children:" In Folders"}),h.jsx("option",{value:"unorganized",children:" Unorganized"})]})]}),h.jsx("div",{style:{marginLeft:"auto",fontSize:"14px",color:"#718096",fontWeight:"500"},children:(()=>{const Te=Ne().length,Je=se.selectedFolderId?se.getGamesInFolder(se.selectedFolderId).length:s.length;return k||M!=="all"||_!=="all"?`${Te} of ${Je} games`:`${Je} games`})()})]})]}),h.jsxs(One,{sensors:ge,collisionDetection:WZe,onDragStart:ve,onDragOver:ue,onDragEnd:Me,children:[h.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"#F8FAFC",borderRadius:"8px",border:"1px solid #E2E8F0"},children:[h.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[h.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#2D3748"},children:" Organize Your Games"}),h.jsxs("div",{style:{display:"flex",gap:"4px"},children:[h.jsx("button",{onClick:se.undo,disabled:!se.canUndo,style:{padding:"6px 12px",backgroundColor:se.canUndo?"#2B6CB0":"#EDF2F7",color:se.canUndo?"white":"#A0AEC0",border:`2px solid ${se.canUndo?"#2B6CB0":"#CBD5E0"}`,borderRadius:"6px",cursor:se.canUndo?"pointer":"not-allowed",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s ease",boxShadow:se.canUndo?"0 2px 4px rgba(43, 108, 176, 0.2)":"none"},title:se.canUndo?`Undo: ${((Rt=se.undoStack[se.undoStack.length-1])==null?void 0:Rt.description)||"Last action"}`:"Nothing to undo",onMouseEnter:Te=>{if(se.canUndo){const Je=Te.target;Je.style.backgroundColor="#2C5282",Je.style.transform="translateY(-1px)"}},onMouseLeave:Te=>{if(se.canUndo){const Je=Te.target;Je.style.backgroundColor="#2B6CB0",Je.style.transform="translateY(0)"}},children:" Undo"}),h.jsx("button",{onClick:se.redo,disabled:!se.canRedo,style:{padding:"6px 12px",backgroundColor:se.canRedo?"#38A169":"#EDF2F7",color:se.canRedo?"white":"#A0AEC0",border:`2px solid ${se.canRedo?"#38A169":"#CBD5E0"}`,borderRadius:"6px",cursor:se.canRedo?"pointer":"not-allowed",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s ease",boxShadow:se.canRedo?"0 2px 4px rgba(56, 161, 105, 0.2)":"none"},title:se.canRedo?`Redo: ${((Bt=se.redoStack[se.redoStack.length-1])==null?void 0:Bt.description)||"Last undone action"}`:"Nothing to redo",onMouseEnter:Te=>{if(se.canRedo){const Je=Te.target;Je.style.backgroundColor="#2F855A",Je.style.transform="translateY(-1px)"}},onMouseLeave:Te=>{if(se.canRedo){const Je=Te.target;Je.style.backgroundColor="#38A169",Je.style.transform="translateY(0)"}},children:" Redo"})]})]})}),se.folderTree.length>0?h.jsxs("div",{style:{marginBottom:"12px"},children:[h.jsx("div",{style:{marginBottom:"8px"},children:h.jsxs("button",{onClick:()=>{se.setSelectedFolderId(null),E("all")},style:{padding:"6px 12px",backgroundColor:se.selectedFolderId===null?"#E2E8F0":"white",color:se.selectedFolderId===null?"#2D3748":"#4A5568",border:"1px solid #E2E8F0",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:se.selectedFolderId===null?"600":"400"},children:[" All Games (",s.length,")"]})}),h.jsx(net,{folders:se.folderTree,selectedFolderId:se.selectedFolderId,onFolderClick:Te=>{se.setSelectedFolderId(Te),E("all")},onCreateSubfolder:se.openCreateFolderModal,onEditFolder:se.openEditFolderModal,onDeleteFolder:Te=>se.deleteExistingFolder(Te),getGamesInFolder:se.getGamesInFolder,canCreateSubfolder:se.canCreateSubfolder,maxDepth:3,showGameCounts:!0,collapsible:!0}),h.jsx("div",{style:{marginTop:"12px"},children:h.jsx(eet,{unorganizedGamesCount:se.getUnorganizedGames().length})})]}):h.jsx("div",{style:{marginBottom:"12px"},children:h.jsxs("div",{style:{marginBottom:"12px",padding:"16px",backgroundColor:"#E6F3FF",borderRadius:"8px",border:"1px solid #4299E1",textAlign:"center"},children:[h.jsx("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#2B6CB0",marginBottom:"8px"},children:" Get Started with Game Folders"}),h.jsx("p",{style:{color:"#4A5568",marginBottom:"12px"},children:"Organize your games into folders to keep track of different subjects, game types, or teaching units."}),h.jsx("button",{onClick:()=>se.openCreateFolderModal(),style:{padding:"8px 16px",backgroundColor:"#4299E1",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:" Create Your First Game Folder"})]})})]}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"20px"},children:(()=>{const Te=Ne();return Te.length===0&&(k||M!=="all"||_!=="all")?h.jsxs("div",{style:{gridColumn:"1 / -1",padding:"40px 20px",textAlign:"center",backgroundColor:"#F8F9FA",borderRadius:"12px",border:"2px dashed #CBD5E0"},children:[h.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),h.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px",color:"#2D3748"},children:"No games found"}),h.jsx("p",{style:{color:"#718096",marginBottom:"20px"},children:"Try adjusting your search terms or filters"}),h.jsx("button",{onClick:()=>{P(""),T("all"),E("all")},style:{padding:"8px 16px",backgroundColor:"#4299E1",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},children:"Clear All Filters"})]}):Te.map(Je=>h.jsx(tet,{game:Je,onPlay:Lt,onEdit:nn,onAssign:Ce,onDelete:nt},Je.id))})()}),h.jsx(Nne,{adjustScale:!1,dropAnimation:null,children:Q&&(Q.type==="game"?h.jsx("div",{style:{width:"64px",height:"64px",backgroundColor:(((tn=Q.data)==null?void 0:tn.gameType)||"").includes("whack")?"#C6F6D5":(((Ht=Q.data)==null?void 0:Ht.gameType)||"").includes("spinner")?"#FED7D7":(((Qt=Q.data)==null?void 0:Qt.gameType)||"").includes("anagram")?"#BFDBFE":(((Vt=Q.data)==null?void 0:Vt.gameType)||"").includes("sentence")?"#E0F2FE":(((pn=Q.data)==null?void 0:pn.gameType)||"").includes("place")?"#FFEBE6":"#E9D8FD",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:"3px solid #4299E1",boxShadow:"0 8px 24px rgba(0,0,0,0.3)",cursor:"grabbing",pointerEvents:"none",opacity:.95,transform:"rotate(3deg) scale(1.1)",zIndex:1e3},children:(vn=Q.data)!=null&&vn.thumbnailUrl?h.jsx("img",{src:Q.data.thumbnailUrl,alt:Q.data.title,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"5px",pointerEvents:"none"}}):h.jsx("div",{style:{fontSize:"24px",color:"#718096",pointerEvents:"none"},children:(((Wn=Q.data)==null?void 0:Wn.gameType)||"").includes("whack")?"":(((tr=Q.data)==null?void 0:tr.gameType)||"").includes("spinner")?"":(((qr=Q.data)==null?void 0:qr.gameType)||"").includes("anagram")?"":(((hr=Q.data)==null?void 0:hr.gameType)||"").includes("sentence")?"":(((Jn=Q.data)==null?void 0:Jn.gameType)||"").includes("place")?"":""})}):h.jsxs("div",{style:{padding:"8px 12px",backgroundColor:"white",border:"2px solid #4299E1",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px",transform:"rotate(2deg)",zIndex:1e3,cursor:"grabbing",pointerEvents:"none",opacity:.9},children:[h.jsx("span",{children:""}),h.jsx("span",{children:((xn=Q.data)==null?void 0:xn.name)||"Folder"})]}))})]})]}):h.jsxs("div",{style:{textAlign:"center",padding:"40px",backgroundColor:"#F7FAFC",borderRadius:"12px",border:"2px dashed #CBD5E0"},children:[h.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),h.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px",color:"#2D3748"},children:"No games created yet"}),h.jsx("p",{style:{color:"#718096",marginBottom:"20px"},children:"Start by creating your first game using the templates below"})]})]}),h.jsxs("div",{style:{marginBottom:"48px"},children:[h.jsx("h2",{style:{fontSize:"24px",fontWeight:"bold",marginBottom:"20px",color:"#2D3748",borderBottom:"2px solid #38A169",paddingBottom:"8px"},children:"Public Games"}),h.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"#FAFAFA",borderRadius:"8px",border:"1px solid #E2E8F0"},children:[h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto auto",gap:"12px",alignItems:"center"},children:[h.jsx("input",{type:"text",placeholder:"Search public games...",value:V,onChange:Te=>re(Te.target.value),style:{padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",backgroundColor:"white"}}),h.jsxs("select",{value:fe,onChange:Te=>pe(Te.target.value),style:{padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",backgroundColor:"white",minWidth:"150px"},children:[h.jsx("option",{value:"all",children:" All Types"}),h.jsx("option",{value:"whack-a-mole",children:" Whack-a-Mole"}),h.jsx("option",{value:"spinner-wheel",children:" Spinner Wheel"}),h.jsx("option",{value:"sort-categories-egg",children:" Sort Categories"}),h.jsx("option",{value:"anagram",children:" Anagram"}),h.jsx("option",{value:"sentence-sense",children:" Sentence Sense"}),h.jsx("option",{value:"place-value-showdown",children:" Place Value Showdown"}),h.jsx("option",{value:"word-volley",children:" Pong"})]}),h.jsx("button",{onClick:()=>{re(""),pe("all")},style:{padding:"8px 16px",backgroundColor:"#F3F4F6",border:"1px solid #D1D5DB",borderRadius:"6px",cursor:"pointer",fontSize:"14px",color:"#374151"},children:"Clear"})]}),h.jsxs("div",{style:{marginTop:"12px",fontSize:"14px",color:"#6B7280"},children:["Showing ",Ie().length," of ",l.length," public games"]})]}),R?h.jsx("div",{style:{textAlign:"center",padding:"40px",backgroundColor:"#F7FAFC",borderRadius:"12px",border:"1px solid #E2E8F0"},children:h.jsx("div",{style:{fontSize:"16px",color:"#718096"},children:"Loading public games..."})}):l.length>0?Ie().length>0?h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"20px"},children:Ie().map(Te=>h.jsx("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",border:"1px solid #E2E8F0",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)",transition:"all 0.2s ease",cursor:"pointer"},onMouseEnter:Je=>{Je.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)",Je.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:Je=>{Je.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.05)",Je.currentTarget.style.transform="translateY(0)"},children:h.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"16px"},children:[h.jsx("div",{style:{width:"64px",height:"64px",backgroundColor:(Te.gameType||"").includes("whack")?"#C6F6D5":(Te.gameType||"").includes("spinner")?"#FED7D7":(Te.gameType||"").includes("anagram")?"#BFDBFE":(Te.gameType||"").includes("sentence")?"#E0F2FE":(Te.gameType||"").includes("place")?"#FFEBE6":(Te.gameType||"").includes("word-volley")?"#FFF2E6":"#E9D8FD",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",flexShrink:0},children:Te.thumbnailUrl?h.jsx("img",{src:Te.thumbnailUrl,alt:Te.title,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px"}}):h.jsx("div",{style:{fontSize:"24px",color:"#718096"},children:(Te.gameType||"").includes("whack")?"":(Te.gameType||"").includes("spinner")?"":(Te.gameType||"").includes("anagram")?"":(Te.gameType||"").includes("sentence")?"":(Te.gameType||"").includes("place")?"":(Te.gameType||"").includes("word-volley")?"":""})}),h.jsxs("div",{style:{flex:1,minWidth:0},children:[h.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"4px",color:"#2D3748",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Te.title}),h.jsx("p",{style:{color:"#718096",fontSize:"14px",marginBottom:"16px",textTransform:"capitalize"},children:(Te.gameType||"Unknown").replace("-"," ")}),h.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"nowrap"},children:[h.jsx("button",{onClick:Je=>{Je.stopPropagation(),Lt(Te.id)},style:{padding:"4px 8px",backgroundColor:"#E3F2FD",color:"#1976D2",border:"1px solid #BBDEFB",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:"500",display:"flex",alignItems:"center",gap:"3px",transition:"all 0.2s",minWidth:"auto",whiteSpace:"nowrap"},onMouseEnter:Je=>{Je.currentTarget.style.backgroundColor="#BBDEFB",Je.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:Je=>{Je.currentTarget.style.backgroundColor="#E3F2FD",Je.currentTarget.style.transform="translateY(0)"},children:" Play"}),h.jsx("button",{onClick:Je=>{Je.stopPropagation();const ae=Te.gameType;let Le="/configure";ae==="whack-a-mole"?Le="/configure/whack-a-mole":ae==="sort-categories-egg"?Le="/configure/sort-categories-egg":ae==="spinner-wheel"?Le="/configure/spinner-wheel":ae==="anagram"?Le="/configure/anagram":ae==="sentence-sense"?Le="/configure/sentence-sense":ae==="place-value-showdown"?Le="/configure/place-value-showdown":ae==="word-volley"&&(Le="/configure/word-volley"),r(`${Le}/${Te.id}?copy=true`)},style:{padding:"4px 8px",backgroundColor:"#F3E5F5",color:"#7B1FA2",border:"1px solid #E1BEE7",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:"500",display:"flex",alignItems:"center",gap:"3px",transition:"all 0.2s",minWidth:"auto",whiteSpace:"nowrap"},onMouseEnter:Je=>{Je.currentTarget.style.backgroundColor="#E1BEE7",Je.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:Je=>{Je.currentTarget.style.backgroundColor="#F3E5F5",Je.currentTarget.style.transform="translateY(0)"},children:" Copy"}),h.jsx("button",{onClick:Je=>{Je.stopPropagation(),Ce(Te)},style:{padding:"4px 8px",backgroundColor:"#E8F5E8",color:"#2E7D32",border:"1px solid #C8E6C9",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:"500",display:"flex",alignItems:"center",gap:"3px",transition:"all 0.2s",minWidth:"auto",whiteSpace:"nowrap"},onMouseEnter:Je=>{Je.currentTarget.style.backgroundColor="#C8E6C9",Je.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:Je=>{Je.currentTarget.style.backgroundColor="#E8F5E8",Je.currentTarget.style.transform="translateY(0)"},children:" Assign"})]})]})]})},Te.id))}):h.jsxs("div",{style:{textAlign:"center",padding:"40px",backgroundColor:"#F7FAFC",borderRadius:"12px",border:"2px dashed #CBD5E0"},children:[h.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),h.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px",color:"#2D3748"},children:"No games match your search"}),h.jsx("p",{style:{color:"#718096",marginBottom:"16px"},children:"Try adjusting your search terms or filters"}),h.jsx("button",{onClick:()=>{re(""),pe("all")},style:{padding:"8px 16px",backgroundColor:"#4299E1",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},children:"Clear All Filters"})]}):h.jsxs("div",{style:{textAlign:"center",padding:"40px",backgroundColor:"#F7FAFC",borderRadius:"12px",border:"2px dashed #CBD5E0"},children:[h.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),h.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px",color:"#2D3748"},children:"No public games available"}),h.jsx("p",{style:{color:"#718096"},children:"Check back later for games shared by other educators"})]})]})]}),f==="students"&&h.jsxs("div",{children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[h.jsx("h2",{style:{fontSize:"20px",fontWeight:"bold"},children:"Student Management"}),h.jsx("button",{onClick:ct,style:{padding:"8px 16px",backgroundColor:"#38A169",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:h.jsx("span",{children:"+ Add Student"})})]}),h.jsx("div",{style:{marginBottom:"16px"},children:h.jsx("input",{type:"text",placeholder:"Search by name or email...",value:Y,onChange:Te=>J(Te.target.value),style:{padding:"12px 16px",border:"1px solid #E2E8F0",borderRadius:"4px",width:"100%",fontSize:"16px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)"}})}),K?h.jsx("div",{style:{textAlign:"center",padding:"40px 0"},children:"Loading students..."}):q.length>0?h.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[h.jsx("thead",{children:h.jsxs("tr",{style:{backgroundColor:"#F7FAFC",borderBottom:"2px solid #E2E8F0"},children:[h.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:"bold"},children:"Name"}),h.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:"bold"},children:"Email"}),h.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:"bold"},children:"Grade"}),h.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:"bold"},children:"Password Status"}),h.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:"bold"},children:"Actions"})]})}),h.jsx("tbody",{children:q.filter(Te=>{if(!Y)return!0;const Je=Y.toLowerCase();return Te.name.toLowerCase().includes(Je)||Te.email.toLowerCase().includes(Je)||Te.grade&&Te.grade.toLowerCase().includes(Je)}).map(Te=>h.jsxs("tr",{style:{borderBottom:"1px solid #E2E8F0"},children:[h.jsx("td",{style:{padding:"12px"},children:Te.name}),h.jsx("td",{style:{padding:"12px"},children:Te.email}),h.jsx("td",{style:{padding:"12px"},children:Te.grade||"-"}),h.jsx("td",{style:{padding:"12px"},children:h.jsx("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:Te.passwordSetupSent?h.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"medium",backgroundColor:"#FEF3C7",color:"#92400E"},children:" Password Setup Sent"}):h.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"medium",backgroundColor:"#E5E7EB",color:"#374151"},children:" Email Only"})})}),h.jsx("td",{style:{padding:"12px"},children:h.jsxs("div",{style:{display:"flex",gap:"8px"},children:[h.jsx("button",{onClick:()=>lt(Te),style:{padding:"6px 12px",backgroundColor:"#38B2AC",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"View"}),h.jsx("button",{onClick:()=>ft(Te),style:{padding:"6px 12px",backgroundColor:"#805AD5",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"Notes"}),h.jsx("button",{onClick:()=>Ye(Te),style:{padding:"6px 12px",backgroundColor:"#4299E1",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"Edit"}),h.jsx("button",{onClick:()=>Fe(Te.id),style:{padding:"6px 12px",backgroundColor:"#F56565",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"Delete"})]})})]},Te.id))})]}):h.jsxs("div",{style:{textAlign:"center",padding:"40px 0",color:"#718096",backgroundColor:"white",borderRadius:"8px",border:"1px dashed #E2E8F0",marginTop:"24px"},children:[h.jsx("p",{style:{marginBottom:"16px"},children:"You haven't added any students yet."}),h.jsx("button",{onClick:ct,style:{padding:"8px 16px",backgroundColor:"#4299E1",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Add Your First Student"})]})]})]})]})},v2=()=>{const{currentUser:t,isStudent:e}=Pr(),[n,r]=A.useState({isInstallable:!1,isInstalled:!1,showInstallPrompt:!1,installPrompt:null}),[i,o]=A.useState(!1);A.useEffect(()=>{const x=new URLSearchParams(window.location.search),w=x.get("forceBrowser")==="true",S=x.get("pwa"),D=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;if(console.log(" PWA Hook - Immediate URL parameter check:",{forceBrowser:w,pwaParam:S,isStandalone:D,currentUrl:window.location.href}),S==="auto"){console.log(" PWA Hook - pwa=auto detected, smart routing enabled"),x.delete("pwa");const k=`${window.location.pathname}${x.toString()?"?"+x.toString():""}`;if(window.history.replaceState({},"",k),D){console.log(" PWA Hook - Already in PWA mode, continuing");return}console.log(" PWA Hook - In browser mode, will show brief install prompt if available"),setTimeout(()=>{n.isInstallable&&!n.isInstalled&&(console.log(" PWA Hook - Showing brief install prompt for pwa=auto"),o(!0),setTimeout(()=>{o(!1),console.log(" PWA Hook - Brief install prompt auto-dismissed")},3e3))},1e3);return}if(D&&w){console.log(" PWA Hook - forceBrowser detected in standalone mode, redirecting to browser"),console.log(" PWA Hook - Browser URL will be:",window.location.href);const k=new URL(window.location.href);k.searchParams.delete("forceBrowser");const P=k.toString();console.log(" PWA Hook - Clean browser URL:",P);const M=document.createElement("a");M.href=P,M.target="_blank",M.rel="noopener noreferrer",document.body.appendChild(M);const T=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0,ctrlKey:!1,metaKey:!1,shiftKey:!1,button:0});M.dispatchEvent(T),setTimeout(()=>{document.body.removeChild(M)},100),setTimeout(()=>{try{window.close()}catch(_){console.log(" PWA Hook - Could not close PWA window, showing user message"),alert(" Opened in your browser. You can close this PWA window.")}},500),console.log(" PWA Hook - forceBrowser redirect handled");return}},[]);const s=()=>te(rt,null,function*(){try{console.log(" PWA Hook - Starting enhanced installation check...");const x=window.matchMedia("(display-mode: standalone)").matches,w=window.navigator.standalone===!0,S=document.referrer.includes("android-app://");if(console.log(" PWA Hook - Standalone check:",{isStandalone:x,isIOSPWA:w,isAndroidPWA:S}),x||w||S)return console.log(" PWA Hook - Detected via standalone mode"),!0;const D=window.location.hostname.includes("verse-dev-central.web.app")||window.location.hostname.includes("verse-central.web.app")||window.location.protocol==="https:"&&window.location.hostname!=="localhost";if(console.log(" PWA Hook - Environment check:",{hostname:window.location.hostname,isProduction:D,hostnameCheck:window.location.hostname.includes("verse-dev-central.web.app"),protocolCheck:window.location.protocol==="https:",notLocalhost:window.location.hostname!=="localhost"}),D){console.log(" PWA Hook - Running production environment checks...");const T={hasServiceWorker:"serviceWorker"in navigator,chromeMinimal:window.outerHeight-window.innerHeight<300,httpsSecure:window.location.protocol==="https:",noReferrerOrLauncher:document.referrer===""||document.referrer.includes("launch.html"),expectedPWAUrl:window.location.pathname.startsWith("/student")||window.location.pathname.startsWith("/play"),macOSChrome:navigator.platform.includes("Mac")&&navigator.userAgent.includes("Chrome")};console.log(" PWA Hook - Production PWA indicators:",T),console.log(" PWA Hook - Production environment details:",{hostname:window.location.hostname,protocol:window.location.protocol,pathname:window.location.pathname,referrer:document.referrer,platform:navigator.platform,userAgent:navigator.userAgent,outerHeight:window.outerHeight,innerHeight:window.innerHeight,chromeHeight:window.outerHeight-window.innerHeight});const _=Object.values(T).filter(Boolean).length;if(console.log(` PWA Hook - Production PWA score: ${_}/6 (need 3+ for detection)`),_>=3)return console.log(` PWA Hook - Production PWA detected with score ${_}/6`),!0;console.log(` PWA Hook - Production PWA NOT detected, score too low: ${_}/6`)}const k=navigator.platform.includes("Mac"),P=navigator.userAgent.includes("Chrome")&&!navigator.userAgent.includes("Edge"),M=window.location.protocol==="https:";if(k&&P&&M){const T={hasMenuBar:window.menubar&&window.menubar.visible,hasToolBar:window.toolbar&&window.toolbar.visible,chromeHeight:window.outerHeight-window.innerHeight},_={minimalChrome:T.chromeHeight<200,noMenuBar:!T.hasMenuBar,emptyReferrer:document.referrer==="",hasServiceWorker:"serviceWorker"in navigator,productionUrl:D};console.log(" PWA Hook - macOS PWA indicators:",_);const E=Object.values(_).filter(Boolean).length;if(E>=3)return console.log(` PWA Hook - macOS PWA detected with score ${E}/5`),!0}if("getInstalledRelatedApps"in navigator)try{const T=yield navigator.getInstalledRelatedApps();if(console.log(" PWA Hook - Related apps check:",T.length),T.length>0)return console.log(" PWA Hook - Detected via getInstalledRelatedApps"),!0}catch(T){console.log(" PWA Hook - getInstalledRelatedApps error:",T)}if("serviceWorker"in navigator)try{console.log(" PWA Hook - Checking service worker + minimal chrome...");const T=yield navigator.serviceWorker.getRegistrations(),_=window.outerHeight-window.innerHeight;if(console.log(" PWA Hook - Service worker details:",{registrationsCount:T.length,chromeHeight:_,threshold:150,meetsThreshold:_<150}),T.length>0&&_<150)return console.log(" PWA Hook - Detected via service worker + minimal chrome"),!0;console.log(" PWA Hook - Service worker + minimal chrome check failed")}catch(T){console.log(" PWA Hook - Service worker check error:",T)}else console.log(" PWA Hook - Service worker not supported");return console.log(" PWA Hook - No PWA installation detected"),!1}catch(x){return console.error(" PWA Hook - Error in checkIfInstalled:",x),!1}});A.useEffect(()=>{const x=new URLSearchParams(window.location.search),w=x.get("emailAccess")==="true",S=x.get("from")==="email",D=x.get("studentEmail"),k=x.get("source")==="email",P=window.location.pathname==="/student",M=sessionStorage.getItem("direct_token_access")==="true",T=w||S&&D||k||M&&P;console.log(" PWA Hook - useEffect triggered:",{currentUser:!!t,isStudent:e,userEmail:t==null?void 0:t.email,isEmailLinkAccess:T,emailAccess:w,fromEmail:S,studentEmailParam:!!D,sourceParam:k,isStudentRoute:P,sessionFlag:M});const _=t&&e||T&&P;if(!_){console.log(" PWA Hook - Not enabling PWA:",{hasCurrentUser:!!t,isStudent:e,isEmailLinkAccess:T,isStudentRoute:P,shouldEnablePWA:_});return}console.log(" PWA Hook - Enabling PWA:",{reason:t&&e?"authenticated_student":"email_link_access"});const E=U=>{if(console.log(" PWA Hook - Starting PWA launch redirect check..."),window.location.pathname.includes("launch")||window.location.pathname.includes("debug-launcher")||window.location.pathname.includes("test-launcher"))return console.log(" PWA Hook - Skipping redirect check - on launcher page"),!1;const j=window.matchMedia("(display-mode: standalone)").matches,z=window.navigator.standalone===!0,q=!j&&!z,$=document.referrer,K=window.location.hostname,G=$==="",Y=$!==""&&!$.includes(K),J=$.includes("launch.html"),V=G||Y||J;if(console.log(" PWA Hook - Launch redirect detailed check:",{isInstalled:U,inBrowserMode:q,fromExternalLink:V,currentURL:window.location.href,referrer:$,hostname:K,standaloneMode:j,iOSStandalone:z,hasNoReferrer:G,isExternalReferrer:Y,isFromLauncher:J,displayMode:j?"standalone":"browser"}),q&&V){console.log(" PWA Hook - Checking PWA installation status for guidance...");const pe="pwa_launch_"+(new URLSearchParams(window.location.search).get("token")||"default"),ce=sessionStorage.getItem(pe),xe=Date.now();if(ce){const Ae=xe-parseInt(ce);if(Ae<3e3)return console.log(` PWA Hook - Duplicate launch prevented! Last launch was ${Ae}ms ago`),!1}return window.location.search&&(console.log(" PWA Hook - Preserving deep link params:",window.location.search),localStorage.setItem("deepLinkParams",window.location.search)),!0}return!1};te(rt,null,function*(){const U=yield s();if(console.log(" PWA Hook - Installation check:",{isInstalled:U}),r(G=>oe(B({},G),{isInstalled:U})),U&&window.matchMedia("(display-mode: standalone)").matches){const G=localStorage.getItem("deepLinkParams");if(G&&!window.location.search){console.log(" PWA Hook - Restoring deep link params:",G);const J=new URLSearchParams(G).get("token");if(J){console.log(" PWA Hook - Token detected in deep link, navigating to game:",J),window.location.href=`/play?token=${J}`,localStorage.removeItem("deepLinkParams");return}else window.history.replaceState({},"",window.location.pathname+G),localStorage.removeItem("deepLinkParams")}}console.log(" PWA Hook - About to check PWA launch redirect...");const H=E(U);console.log(H?" PWA Hook - PWA launch redirect initiated":" PWA Hook - PWA launch redirect not triggered");const j=window.matchMedia("(display-mode: standalone)").matches,z=new URLSearchParams(window.location.search),q=z.get("token"),$=z.get("target");console.log(" PWA Enhanced Deep Link - Checking standalone mode conditions:",{isStandalone:j,hasToken:!!q,hasTarget:!!$,currentPath:window.location.pathname,searchParams:window.location.search});const K=window.location.pathname.includes("launch")||window.location.pathname.includes("debug-launcher")||window.location.pathname.includes("test-launcher");if(j&&(q||$)&&!K)if(console.log(" PWA Enhanced Deep Link -  Already in standalone mode, checking for navigation needed"),console.log(" PWA Enhanced Deep Link - Current path:",window.location.pathname),console.log(" PWA Enhanced Deep Link - Token:",q),console.log(" PWA Enhanced Deep Link - Target:",$),q&&!window.location.pathname.startsWith("/play")){const G=`/play${window.location.search}`;console.log(" PWA Enhanced Deep Link -  Navigating to play route:",G),setTimeout(()=>{window.location.href=G},100)}else if($&&$.startsWith("/")){const G=decodeURIComponent($);if(window.location.pathname!==G){const Y=`${G}${window.location.search}`;console.log(" PWA Enhanced Deep Link -  Navigating to target route:",Y),setTimeout(()=>{window.location.href=Y},100)}else console.log(" PWA Enhanced Deep Link -  Already on target path:",G)}else console.log(" PWA Enhanced Deep Link -  Already on correct path for token");else console.log(" PWA Enhanced Deep Link -  Conditions not met:",{isStandalone:j,hasToken:!!q,hasTarget:!!$});if(U)return F()});const F=()=>{const U=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;if("launchQueue"in window)try{window.launchQueue.setConsumer(j=>{if(console.log(" PWA LaunchQueue - Received launch params:",j),console.log(" PWA LaunchQueue - LaunchParams structure:",JSON.stringify(j,null,2)),console.log(" PWA LaunchQueue - Has targetURL:",!!j.targetURL),console.log(" PWA LaunchQueue - targetURL value:",j.targetURL),j.targetURL)try{const z=new URL(j.targetURL);if(console.log(" PWA LaunchQueue - Parsed URL:",{href:z.href,pathname:z.pathname,search:z.search,hash:z.hash}),z.search){console.log(" PWA LaunchQueue - Processing deep link:",z.search);const q=new URLSearchParams(z.search),$=q.get("target"),K=q.get("token"),G=q.get("forceBrowser")==="true";if(console.log(" PWA LaunchQueue - Parsed params:",{target:$,token:K,forceBrowser:G}),G&&U){console.log(" Detected forceBrowser=true in PWA context"),console.log(" Opening link in browser using simulated user click");const Y=new URL(z.href);Y.searchParams.delete("forceBrowser");const J=Y.toString();console.log(" Clean browser URL:",J);const V=document.createElement("a");V.href=J,V.target="_blank",V.rel="noopener noreferrer",document.body.appendChild(V);const re=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0,ctrlKey:!1,metaKey:!1,shiftKey:!1,button:0});V.dispatchEvent(re),setTimeout(()=>{document.body.removeChild(V)},100),setTimeout(()=>{alert(" Opened in your browser. You may close this PWA tab.")},500),console.log(" forceBrowser link handled - opened in browser");return}if($&&$.startsWith("/")){const J=decodeURIComponent($)+z.search;console.log(" PWA LaunchQueue - Navigating to target:",J),setTimeout(()=>{window.location.href=J},100)}else if(K){const Y=`/play${z.search}`;console.log(" PWA LaunchQueue - Navigating to play with token:",Y),setTimeout(()=>{window.location.href=Y},100)}else console.log(" PWA LaunchQueue - Fallback: updating URL params only"),window.history.replaceState({},"",window.location.pathname+z.search)}else console.log(" PWA LaunchQueue - No search parameters found in URL")}catch(z){console.error(" PWA LaunchQueue - Error parsing targetURL:",z)}else{console.log(" PWA LaunchQueue - No targetURL in launch params");const z=window.location.href;console.log(" PWA LaunchQueue - Current URL fallback check:",z);const q=new URLSearchParams(window.location.search),$=q.get("target"),K=q.get("token");if($||K){if(console.log(" PWA LaunchQueue - Found params in current URL:",{target:$,token:K}),$&&$.startsWith("/")){const G=decodeURIComponent($);if(window.location.pathname!==G){const Y=G+window.location.search;console.log(" PWA LaunchQueue - Fallback navigating to target:",Y),setTimeout(()=>{window.location.href=Y},100)}}else if(K&&!window.location.pathname.startsWith("/play")){const G=`/play${window.location.search}`;console.log(" PWA LaunchQueue - Fallback navigating to play:",G),setTimeout(()=>{window.location.href=G},100)}}}}),console.log(" PWA LaunchQueue - Consumer registered")}catch(j){console.log(" PWA LaunchQueue - Not supported yet:",j)}if("navigator"in window&&"registerProtocolHandler"in navigator)try{navigator.registerProtocolHandler("web+lumino",window.location.origin+"/play?token=%s"),console.log(" PWA Deep Linking - Protocol handler registered")}catch(j){console.log(" PWA Deep Linking - Protocol handler not supported:",j)}const H=j=>{const z=j.target;if(z&&z.tagName==="A"&&z.href){const q=new URL(z.href),$=new URL(window.location.href);q.origin===$.origin&&n.isInstalled&&(j.preventDefault(),console.log(" PWA Deep Linking - Intercepting link:",z.href),window.location.href=z.href)}};return document.addEventListener("click",H,!0),()=>{document.removeEventListener("click",H,!0)}};console.log(" PWA Debug - Current environment:",{"window.location.protocol":window.location.protocol,"window.location.hostname":window.location.hostname,"navigator.serviceWorker":!!navigator.serviceWorker,"window.matchMedia standalone":window.matchMedia("(display-mode: standalone)").matches,"document.referrer":document.referrer}),fetch("/manifest.webmanifest").then(U=>(console.log(" PWA Debug - Manifest fetch:",{status:U.status,ok:U.ok,url:U.url}),U.json())).then(U=>{console.log(" PWA Debug - Manifest content:",U),console.log(" PWA Debug - Manifest validation:",{hasName:!!U.name,hasShortName:!!U.short_name,hasStartUrl:!!U.start_url,hasIcons:!!U.icons&&U.icons.length>0,hasDisplay:!!U.display,startUrl:U.start_url})}).catch(U=>{console.error(" PWA Debug - Manifest fetch error:",U)}),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(U=>{console.log(" PWA Debug - Service Worker registrations:",U.length),U.forEach((H,j)=>{var z;console.log(` PWA Debug - SW ${j}:`,{scope:H.scope,state:(z=H.active)==null?void 0:z.state,hasUpdateHandler:!!H.onupdatefound})})});const L=U=>{const H=U;if(!H.prompt||typeof H.prompt!="function"){console.log(" PWA Debug - Ignoring fake/test beforeinstallprompt event");return}console.log(" PWA Hook - beforeinstallprompt event received"),console.log(" PWA Hook - Event details:",{platforms:H.platforms,type:H.type,timeStamp:H.timeStamp,hasPrompt:typeof H.prompt=="function"}),U.preventDefault(),window.deferredPrompt=H,r(j=>oe(B({},j),{isInstallable:!0,showInstallPrompt:!0,installPrompt:H})),console.log("PWA install prompt available for student")},N=()=>{console.log("PWA installed successfully"),r(U=>oe(B({},U),{isInstalled:!0,showInstallPrompt:!1,installPrompt:null}))};return window.addEventListener("beforeinstallprompt",L),window.addEventListener("appinstalled",N),setTimeout(()=>{var U;console.log(" PWA Debug - 5 second check:",{"beforeinstallprompt fired":!!n.installPrompt,showInstallPrompt:n.showInstallPrompt,isInstallable:n.isInstallable}),console.log(" PWA Debug - Chrome PWA criteria:",{"HTTPS or localhost":window.location.protocol==="https:"||window.location.hostname==="localhost","Service Worker registered":"serviceWorker"in navigator,"Manifest linked":!!document.querySelector('link[rel="manifest"]'),"Display mode":window.matchMedia("(display-mode: standalone)").matches?"standalone":"browser","User agent":navigator.userAgent.includes("Chrome"),Platform:navigator.platform,"Navigator standalone":navigator.standalone||!1}),console.log(" PWA Debug - Detailed criteria check:"),console.log("  - Protocol:",window.location.protocol),console.log("  - Hostname:",window.location.hostname),console.log("  - SW support:","serviceWorker"in navigator),console.log("  - Manifest link:",(U=document.querySelector('link[rel="manifest"]'))==null?void 0:U.href),console.log("  - User Agent:",navigator.userAgent),console.log("  - Display mode:",window.matchMedia("(display-mode: standalone)").matches),window.matchMedia("(display-mode: standalone)").matches&&console.log(" PWA Debug - App is already running in standalone mode (installed)"),console.log(" PWA Debug - Manual beforeinstallprompt test..."),window.addEventListener("beforeinstallprompt",H=>{console.log(" PWA Debug - beforeinstallprompt FINALLY fired!",H)})},5e3),setTimeout(()=>{console.log(" PWA Debug - 10 second final check:",{"Install prompt available":!!n.installPrompt,"Chrome thinks installable":n.isInstallable,"PWA enabled":g}),console.log(" PWA Debug - Chrome installation heuristics:"),console.log("  - Page has been visited before:",document.referrer!==""),console.log("  - User has interacted with page:",document.hasFocus()),console.log("  - Time on page > 30s:",performance.now()>3e4),console.log("  - No recent dismissal (unknown)");let U=!1;const H=()=>{U=!0,console.log(" PWA Debug - User interaction detected, PWA may become installable soon"),setTimeout(()=>{!n.installPrompt&&!window.deferredPrompt&&console.log(" PWA Debug - Still no install prompt after user interaction")},2e3)};["click","touchstart","keydown","scroll"].forEach($=>{document.addEventListener($,H,{once:!0})}),setTimeout(()=>{console.log(" PWA Debug - User interaction status after 15s:",U),U||console.log(" PWA Debug - No user interaction detected - this may prevent beforeinstallprompt")},15e3),console.log(" PWA Debug - Comprehensive installability check:");const j=window.matchMedia("(display-mode: standalone)").matches,z=window.navigator.standalone===!0;console.log("  - Already installed:",j||z),fetch("/manifest.webmanifest").then($=>$.json()).then($=>{var K,G,Y;console.log(" PWA Debug - Manifest details:",{name:$.name,start_url:$.start_url,display:$.display,current_url:window.location.pathname,url_match:$.start_url===window.location.pathname,icons_count:((K=$.icons)==null?void 0:K.length)||0,has_512_icon:(G=$.icons)==null?void 0:G.some(J=>J.sizes.includes("512x512"))}),console.log(" PWA Debug - Potential blocking issues:"),console.log("  - URL mismatch:",$.start_url!==window.location.pathname),console.log("  - Missing large icon:",!((Y=$.icons)!=null&&Y.some(J=>J.sizes.includes("512x512")))),console.log("  - Display not standalone:",$.display!=="standalone"),console.log("  - Already in standalone mode:",j)}).catch($=>{console.error(" PWA Debug - Failed to fetch manifest:",$)}),"getInstalledRelatedApps"in navigator&&navigator.getInstalledRelatedApps().then($=>{console.log(" PWA Debug - Related apps:",$)}).catch($=>{console.log(" PWA Debug - No related apps or error:",$)}),console.log(" PWA Debug - Waiting for real beforeinstallprompt event...")},1e4),()=>{window.removeEventListener("beforeinstallprompt",L),window.removeEventListener("appinstalled",N)}},[t,e]);const a=()=>te(rt,null,function*(){console.log(" PWA Hook - installPWA called:",{hasInstallPrompt:!!n.installPrompt,showInstallPrompt:n.showInstallPrompt,isInstallable:n.isInstallable,hasGlobalPrompt:!!window.deferredPrompt});let x=n.installPrompt||window.deferredPrompt;if(!x)return console.warn(" PWA Hook - No install prompt available. This can happen when:"),console.warn("   PWA criteria not fully met (HTTPS, manifest, service worker)"),console.warn("   User has already dismissed the prompt"),console.warn("   Browser doesn't support PWA installation"),console.warn("   App is already installed"),console.warn("   Chrome cache needs clearing (try clearing site data)"),console.log(" PWA Debug - Attempting manual installation guidance..."),!1;if(!x.prompt||typeof x.prompt!="function")return console.error(" PWA Hook - Install prompt is invalid (no prompt function). Clearing invalid prompt."),r(w=>oe(B({},w),{showInstallPrompt:!1,installPrompt:null,isInstallable:!1})),window.deferredPrompt=null,!1;try{console.log(" PWA Hook - Showing install prompt..."),yield x.prompt();const{outcome:w}=yield x.userChoice;return console.log(` PWA Hook - Install prompt result: ${w}`),w==="accepted"?(console.log(" PWA Hook - User accepted installation"),r(S=>oe(B({},S),{showInstallPrompt:!1,installPrompt:null})),window.deferredPrompt=null,!0):(console.log(" PWA Hook - User dismissed installation"),r(S=>oe(B({},S),{showInstallPrompt:!1})),window.deferredPrompt=null,!1)}catch(w){return console.error(" PWA Hook - Error installing PWA:",w),window.deferredPrompt=null,!1}}),l=()=>{r(x=>oe(B({},x),{showInstallPrompt:!1}))},c=new URLSearchParams(window.location.search),u=c.get("emailAccess")==="true",d=c.get("from")==="email",f=c.get("studentEmail"),p=c.get("source")==="email",b=window.location.pathname==="/student",v=sessionStorage.getItem("direct_token_access")==="true",g=t&&e||(u||d&&f||p||v&&b)&&b;return{isInstallable:n.isInstallable&&g,isInstalled:n.isInstalled,showInstallPrompt:n.showInstallPrompt&&g,showBriefInstallPrompt:i&&g,isPWAEnabled:g,installPWA:a,dismissInstallPrompt:l,dismissBriefInstallPrompt:()=>o(!1),checkIfInstalled:s}},wet=({className:t=""})=>{const{showInstallPrompt:e,installPWA:n,dismissInstallPrompt:r,isInstalled:i,isPWAEnabled:o}=v2();console.log(" PWA Banner - Render state:",{showInstallPrompt:e,isInstalled:i,isPWAEnabled:o,shouldShow:e&&!i});const s=!1,a=!i&&o;if(console.log(" PWA Banner - Development check:",{isDevelopment:s,showInstallPrompt:e,isInstalled:i,isPWAEnabled:o,shouldShowBanner:a,finalDecision:a,"import.meta.env.DEV":!1,"import.meta.env.MODE":"production"}),!a)return console.log(" PWA Banner - Not showing banner:",{showInstallPrompt:e,isInstalled:i,isPWAEnabled:o,isDevelopment:s,shouldShowBanner:a}),null;console.log(" PWA Banner - Showing banner (dev mode or install prompt available)");const l=/iPad|iPhone|iPod/.test(navigator.userAgent),c=/Android/.test(navigator.userAgent),u=()=>{const f=/Chrome/.test(navigator.userAgent),p=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent),b=/Firefox/.test(navigator.userAgent);let v="";f?v="Chrome: Look for the install icon () in the address bar, or go to Menu  Install LuminateLearn":p?v='Safari: Tap the Share button () and select "Add to Home Screen"':b?v="Firefox: Look for the install icon in the address bar, or go to Menu  Install":v="Look for an install option in your browser menu or address bar",alert(`Manual Installation:

${v}

Note: If the install option doesn't appear, try:
1. Clear your browser cache
2. Refresh the page
3. Interact with the page (click/scroll)
4. Wait 30+ seconds`)},d=()=>te(rt,null,function*(){(yield n())||(console.log(" PWA Banner - Automatic install failed, showing manual instructions"),u())});return h.jsxs("div",{className:`pwa-install-banner ${t}`,style:{background:"linear-gradient(135deg, #4299E1 0%, #3182CE 100%)",color:"white",borderRadius:"12px",margin:"16px 0",boxShadow:"0 4px 12px rgba(66, 153, 225, 0.3)",overflow:"hidden"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"16px 20px",gap:"16px"},children:[h.jsx("div",{style:{fontSize:"2rem",flexShrink:0},children:""}),h.jsxs("div",{style:{flex:1,minWidth:0},children:[h.jsx("h3",{style:{margin:"0 0 4px 0",fontSize:"1.1rem",fontWeight:600},children:"Install LuminateLearn"}),h.jsx("p",{style:{margin:0,fontSize:"0.9rem",opacity:.9,lineHeight:1.4},children:"Get the app experience! Install LuminateLearn for faster access to your assignments."})]}),h.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexShrink:0},children:[h.jsx("button",{onClick:d,style:{background:"rgba(255, 255, 255, 0.2)",color:"white",border:"1px solid rgba(255, 255, 255, 0.3)",padding:"8px 16px",borderRadius:"8px",fontSize:"0.9rem",fontWeight:500,cursor:"pointer",transition:"all 0.2s ease"},children:e?"Install App":"How to Install"}),s,h.jsx("button",{onClick:()=>{console.log(" PWA Debug - Note: Real beforeinstallprompt events are triggered by Chrome automatically")},style:{background:"rgba(255, 255, 255, 0.1)",color:"white",border:"1px solid rgba(255, 255, 255, 0.2)",padding:"6px 12px",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer"},title:"Test PWA installation criteria",children:" Debug"}),h.jsx("button",{onClick:r,style:{background:"none",border:"none",color:"white",fontSize:"1.2rem",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",opacity:.7,transition:"opacity 0.2s ease"},children:""})]})]}),h.jsx("div",{style:{fontSize:"0.8rem",opacity:.8,textAlign:"center",padding:"8px 16px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderTop:"1px solid rgba(255, 255, 255, 0.2)"},children:e?' Ready to install - Click "Install App" above':` ${l?"iOS":c?"Android":"Desktop"}: Click "How to Install" for instructions`})]})};function E5(t={}){const{enabled:e=!0,studentEmail:n,source:r="pwa_launch",onDuplicateDetected:i}=t,o=A.useRef(!1),s=A.useRef(null);return A.useEffect(()=>{if(!e||o.current)return;const a=new URLSearchParams(window.location.search);if(a.has("forceBrowser")&&a.get("forceBrowser")==="true"||!(window.location.pathname.includes("/student")||window.location.pathname.includes("/play")||window.location.pathname.includes("/teacher")||window.location.pathname.includes("/email-link")||window.location.pathname.includes("/login")||a.has("pwa")||a.has("emailAccess")||a.has("studentEmail"))||!("serviceWorker"in navigator))return;o.current=!0;const d=setTimeout(()=>te(this,null,function*(){try{console.log("[useSinglePWAWindow]  Enforcing single PWA window");const f=b=>{var v;if(((v=b.data)==null?void 0:v.type)==="CLOSE_DUPLICATE_PWA"){if(console.log("[useSinglePWAWindow]  Received close duplicate response:",b.data),b.data.success){const m=b.data.reason;i==null||i("focused_existing"),m==="existing_pwa_focused"?console.log("[useSinglePWAWindow]  Existing PWA successfully focused, closing this window"):m==="focus_blocked_fallback_close_new"?console.log("[useSinglePWAWindow]  Focus blocked by browser security, closing new window per fallback strategy"):m==="focus_failed_prefer_existing"?console.log("[useSinglePWAWindow]  Focus failed but preferring existing PWA, closing this window"):console.log("[useSinglePWAWindow]  Closing this window, reason:",m),setTimeout(()=>{try{window.close()}catch(g){console.log("[useSinglePWAWindow]  Could not close window:",g)}},500)}else{const m=b.data.reason;console.log("[useSinglePWAWindow]  This window can stay, reason:",m),i==null||i("no_action")}navigator.serviceWorker.removeEventListener("message",f),s.current=null}};s.current=f,navigator.serviceWorker.addEventListener("message",f);const p=yield navigator.serviceWorker.ready;p.active&&p.active.postMessage({type:"ENFORCE_SINGLE_PWA",currentUrl:window.location.href,studentEmail:n,source:r,timestamp:Date.now()}),setTimeout(()=>{s.current&&(console.log("[useSinglePWAWindow]  Timeout reached, removing listener"),navigator.serviceWorker.removeEventListener("message",s.current),s.current=null)},5e3)}catch(f){console.error("[useSinglePWAWindow]  Error enforcing single PWA:",f)}}),100);return()=>{clearTimeout(d),s.current&&(navigator.serviceWorker.removeEventListener("message",s.current),s.current=null)}},[e,n,r,i]),A.useEffect(()=>{var l;if(!e)return;const a=c=>{var u,d;((u=c.data)==null?void 0:u.type)==="PWA_ACTIVITY_NOTIFICATION"?console.log("[useSinglePWAWindow]  Received PWA activity notification:",c.data):((d=c.data)==null?void 0:d.type)==="CLIENT_ALIVE_PING"&&(console.log("[useSinglePWAWindow]  Responding to client alive ping"),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"CLIENT_ALIVE_RESPONSE",clientId:c.data.clientId,timestamp:Date.now()}))};return(l=navigator.serviceWorker)==null||l.addEventListener("message",a),()=>{var c;(c=navigator.serviceWorker)==null||c.removeEventListener("message",a)}},[e]),{isProcessed:o.current}}const En={primary:"#4299E1",background:"#EBF8FF",cardBg:"#FFFFFF",text:"#2D3748",textLight:"#718096"},_et=()=>{const{currentUser:t}=Pr(),e=Fr(),n=vs(),r=new URLSearchParams(n.search),i=r.get("id"),o=r.get("teacherView")==="true",s=r.get("pwa"),{installPWA:a,isInstallable:l,isInstalled:c,showBriefInstallPrompt:u,dismissBriefInstallPrompt:d}=v2(),{toastMessage:f,showToast:p}=h5(),[b,v]=A.useState(()=>{const be=new URLSearchParams(window.location.search),Ne=be.get("emailAccess")==="true",Ie=be.get("from")==="email",Ve=be.get("pwa")==="true",Ue=be.get("studentEmail"),tt=be.get("source")==="email",st=sessionStorage.getItem("direct_token_access")==="true",vt=Ne||Ie&&Ve||Ie&&Ue||tt||st;return console.log("[StudentDashboard] INITIALIZATION: Email link check:",{emailAccess:Ne,fromEmail:Ie,pwaParam:Ve,studentEmailParam:Ue,sourceParam:tt,sessionFlag:st,isEmailLink:vt}),vt&&(console.log("[StudentDashboard]  INITIALIZATION: Email link access detected"),sessionStorage.setItem("direct_token_access","true"),Ue&&(sessionStorage.setItem("student_email",Ue),console.log("[StudentDashboard]  INITIALIZATION: Stored student email for Dashboard navigation:",Ue))),vt}),[m,g]=A.useState(null),[x,w]=A.useState(null),[S,D]=A.useState([]),[k,P]=A.useState([]),[M,T]=A.useState([]),[_,E]=A.useState([]),[R,F]=A.useState({}),[L,N]=A.useState(!0),[U,H]=A.useState("assignments"),[j,z]=A.useState(!1),[q,$]=A.useState([]),[K,G]=A.useState(!1),[Y,J]=A.useState(!1),[V,re]=A.useState(null),fe=i||(t==null?void 0:t.email)||r.get("studentEmail")||"";E5({enabled:!0,studentEmail:fe,source:"student_dashboard",onDuplicateDetected:be=>{console.log("[StudentDashboard]  PWA duplicate action:",be),re(be),be==="focused_existing"?p({title:"Opening Existing App ",description:"Switching to your already open LuminateLearn app...",status:"info",duration:3e3}):be==="closed_duplicates"&&p({title:"App Window Cleaned Up ",description:"Closed duplicate windows to keep things tidy!",status:"success",duration:3e3})}}),A.useEffect(()=>{const be=window.matchMedia("(display-mode: standalone)").matches,Ne=window.navigator.standalone===!0,Ie=be||Ne;if(console.log(" StudentDashboard - IMMEDIATE CHECK:"),console.log("  - standaloneMatch:",be),console.log("  - iosStandalone:",Ne),console.log("  - isInPWAImmediate:",Ie),console.log("  - userAgent:",navigator.userAgent),console.log("  - windowSize:",`${window.outerWidth}x${window.outerHeight}`),console.log("  - innerSize:",`${window.innerWidth}x${window.innerHeight}`),Ie){console.log(" StudentDashboard - IMMEDIATE CHECK: In PWA mode, skipping universal guidance message");return}console.log(" StudentDashboard - IMMEDIATE CHECK: In browser mode, setting up delayed check...");const Ve=setTimeout(()=>{const Ue=window.matchMedia("(display-mode: standalone)").matches,tt=window.navigator.standalone===!0,st=Ue||tt;if(console.log(" StudentDashboard - DELAYED CHECK:"),console.log("  - standaloneMatchDelayed:",Ue),console.log("  - iosStandaloneDelayed:",tt),console.log("  - isInPWADelayed:",st),console.log("  - decision:",st?"SKIP_MESSAGE":"SHOW_MESSAGE"),st){console.log(" StudentDashboard - DELAYED CHECK: In PWA mode, skipping universal guidance message");return}console.log(" StudentDashboard - DELAYED CHECK: In browser mode, showing universal PWA guidance");try{p({title:" Get the best LuminateLearn experience!",description:`See an Install icon?  Tap it to add LuminateLearn to your device
See "Open in App"?  Tap it
See "Always Use"?  Tap it`,status:"info",duration:12e3}),console.log(" StudentDashboard - Universal PWA toast completed")}catch(vt){console.error(" StudentDashboard - Universal PWA toast error:",vt)}},6e3);return()=>clearTimeout(Ve)},[]),A.useEffect(()=>{const be=r.get("showGuide")==="true",Ne=r.get("pwa")==="alreadyInstalled",Ie=r.get("forceBrowser")==="true",Ve=r.get("showOpenInAppHint")==="true",Ue=r.get("emailClient")==="true";if(console.log("StudentDashboard: PWA parameters:",{pwaInstall:s,showGuide:be,alreadyInstalled:Ne,forceBrowser:Ie,showOpenInAppHint:Ve,emailClient:Ue,isInstallable:l,isInstalled:c}),Ie){console.log(" Force browser mode detected - skipping PWA features");return}if(Ne){const tt=setTimeout(()=>{p({title:"App Already Installed! ",description:"LuminateLearn is already installed on your device. You can find it on your home screen or in your applications folder.",status:"info",duration:8e3})},1e3);return()=>clearTimeout(tt)}if(s==="install"||be)if(c){const tt=setTimeout(()=>{p({title:"App Already Installed! ",description:"LuminateLearn is already installed. Look for the app icon on your home screen or in your applications.",status:"success",duration:8e3})},1e3);return()=>clearTimeout(tt)}else if(l){const tt=setTimeout(()=>{z(!0),console.log(" PWA installation prompted from email link")},1e3);return()=>clearTimeout(tt)}else{const tt=setTimeout(()=>{p({title:"Manual Installation Required",description:"Look for an install button in your browser address bar, or check your browser menu for 'Install LuminateLearn' or 'Add to Home Screen'.",status:"info",duration:1e4})},1e3);return()=>clearTimeout(tt)}},[s,l,c,r,p]);const pe=()=>te(rt,null,function*(){try{yield a(),z(!1);const be=new URL(window.location.href);be.searchParams.delete("pwa"),window.history.replaceState({},"",be.toString()),console.log(" PWA installation completed from Student Dashboard")}catch(be){console.error(" PWA installation failed:",be)}});A.useEffect(()=>{if(!L&&x){const be=setTimeout(()=>{const Ne=new URL(window.location.href);let Ie=!1;if(["studentEmail","source","pwa","from","emailAccess","forceBrowser","showInstall","showGuide"].forEach(Ue=>{Ne.searchParams.has(Ue)&&(console.log(`[StudentDashboard]  Cleaning URL parameter: ${Ue}`),Ne.searchParams.delete(Ue),Ie=!0)}),Ie){const Ue=Ne.toString();console.log("[StudentDashboard]  URL cleaned:",Ue),window.history.replaceState({},"",Ue)}},2e3);return()=>clearTimeout(be)}},[L,x]),A.useEffect(()=>{let be=null;try{be=new BroadcastChannel("luminatelearn-assignments"),console.log("[StudentDashboard]  BroadcastChannel initialized");const Ie=Ve=>{var Ue;console.log("[StudentDashboard]  BroadcastChannel message:",Ve.data),((Ue=Ve.data)==null?void 0:Ue.type)==="ASSIGNMENT_AVAILABLE"&&(console.log("[StudentDashboard]  New assignment notification received"),J(!0),p({title:"New Assignment Available! ",description:"A new assignment has been shared with you. Check your assignments tab!",status:"info",duration:6e3}),setTimeout(()=>{console.log("[StudentDashboard]  Auto-refreshing assignments"),window.location.reload()},2e3))};be.onmessage=Ie}catch(Ie){console.warn("[StudentDashboard]  BroadcastChannel not supported:",Ie)}const Ne=Ie=>{var Ve;console.log("[StudentDashboard]  Service Worker message:",Ie.data),((Ve=Ie.data)==null?void 0:Ve.type)==="ASSIGNMENT_NOTIFICATION"&&(console.log("[StudentDashboard]  Assignment notification from Service Worker"),J(!0),p({title:"Assignment Ready! ",description:"Your assignment is ready to play. Welcome back!",status:"success",duration:5e3}),setTimeout(()=>{window.location.reload()},1500))};return"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",Ne),()=>{be&&be.close(),"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",Ne)}},[p]),A.useEffect(()=>{te(rt,null,function*(){N(!0);try{if(o&&i){const Ne=an(xt,"users",i),Ie=yield oi(Ne);if(Ie.exists()){const Ve=Ie.data();g(B({id:Ie.id},Ve)),yield ce(Ve.email)}else console.error("Student not found"),e("/teacher")}else if(!t&&!b){console.log("[StudentDashboard] No current user and not email link access - redirecting to login"),e("/login");return}else if(t)if(b){const Ne=r.get("studentEmail")||sessionStorage.getItem("student_email");Ne?(console.log("[StudentDashboard]  Authenticated email link user - fetching data for:",Ne),yield ce(Ne)):yield xe()}else{const Ne=sessionStorage.getItem("student_email");Ne&&sessionStorage.getItem("direct_token_access")==="true"?(console.log("[StudentDashboard]  Using stored student email for authenticated user:",Ne),yield ce(Ne)):yield xe()}else if(b){const Ne=r.get("studentEmail");if(Ne){console.log(" Email link access detected - using simplified approach for:",Ne),yield ce(Ne);let Ie=Ne.split("@")[0];try{console.log("[StudentDashboard] Fetching student name from users collection for email:",Ne);const Ve=xr(Pn(xt,"users"),Vn("email","==",Ne.toLowerCase()),Hf(1)),Ue=yield er(Ve);if(Ue.empty)console.log("[StudentDashboard] No user found in users collection, using email prefix");else{const tt=Ue.docs[0].data();tt.name?(Ie=tt.name,console.log("[StudentDashboard] Found student name in users collection:",tt.name)):console.log("[StudentDashboard] No name field in user document, using email prefix")}}catch(Ve){console.error("[StudentDashboard] Error fetching student name from users collection:",Ve)}w({id:"email_link_user",email:Ne,name:Ie})}else{console.log("[StudentDashboard] Email link access but no studentEmail parameter"),e("/login");return}}}catch(Ne){console.error("Error in data fetching:",Ne)}finally{N(!1)}})},[t,e,i,o,b]);const ce=be=>te(rt,null,function*(){try{yield Ae(be),yield ee(be),yield ne(),i?yield le(i):t!=null&&t.uid&&(yield le(t.uid))}catch(Ne){console.error("Error fetching student specific data:",Ne)}}),xe=()=>te(rt,null,function*(){try{if(t!=null&&t.uid){const be=an(xt,"users",t.uid),Ne=yield oi(be);Ne.exists()&&w(B({id:Ne.id},Ne.data()))}yield Ee(),yield Oe(),yield ne(),yield me()}catch(be){console.error("Error fetching student data:",be)}}),Ae=be=>te(rt,null,function*(){try{const Ne=xr(Pn(xt,"assignments"),Vn("studentEmail","==",be)),Ve=(yield er(Ne)).docs.map(Ue=>B({id:Ue.id},Ue.data()));Ve.sort((Ue,tt)=>{var Fe,ct;const st=((Fe=Ue.deadline)==null?void 0:Fe.toDate())||new Date,vt=((ct=tt.deadline)==null?void 0:ct.toDate())||new Date;return st.getTime()-vt.getTime()}),D(Ve),yield se(Ve)}catch(Ne){console.error("Error fetching assignments:",Ne)}}),Ee=()=>te(rt,null,function*(){t!=null&&t.email&&(yield Ae(t.email))}),ee=be=>te(rt,null,function*(){}),Oe=()=>te(rt,null,function*(){}),le=be=>te(rt,null,function*(){try{const Ne=yield oi(an(xt,"users",be));if(Ne.exists()){const Ie=Ne.data();T(Ie.highScores||[])}}catch(Ne){console.error("Error fetching high scores:",Ne)}}),me=()=>te(rt,null,function*(){t!=null&&t.uid&&(yield le(t.uid))}),ne=()=>te(rt,null,function*(){try{const be=xr(Pn(xt,"userGameConfigs"),Vn("share","==",!0)),Ie=(yield er(be)).docs.map(Ve=>B({id:Ve.id},Ve.data()));E(Ie)}catch(be){console.error("Error fetching free games:",be)}}),se=be=>te(rt,null,function*(){try{const Ne=[...new Set(be.map(Ve=>Ve.gameId).filter(Boolean))];if(Ne.length===0)return;const Ie={};for(const Ve of Ne)try{const Ue=an(xt,"userGameConfigs",Ve),tt=yield oi(Ue);tt.exists()&&(Ie[Ve]=B({id:tt.id},tt.data()))}catch(Ue){console.error(`Error fetching game config for ${Ve}:`,Ue)}F(Ie)}catch(Ne){console.error("Error fetching game configs:",Ne)}}),ge=be=>{e(`/game/${be}`)},Q=be=>{be.linkToken&&e(`/play?token=${be.linkToken}`)},W=be=>be.timesRequired?Math.min(100,Math.round((be.completedCount||0)/be.timesRequired*100)):0,ve=(be,Ne)=>{switch(be){case"sort-categories-egg":case"sort-categories-egg-reveal":return((Ne==null?void 0:Ne.eggQty)||6)*10;case"whack-a-mole":const Ve=(Ne==null?void 0:Ne.speed)||(Ne==null?void 0:Ne.difficulty)||"medium";let Ue;switch(Ve.toLowerCase()){case"low":case"easy":Ue=60;break;case"high":case"hard":Ue=120;break;case"medium":default:Ue=90;break}return Ne!=null&&Ne.targetScore&&(Ue=Ne.targetScore),Ue;case"spinner-wheel":return(Ne==null?void 0:Ne.maxScore)||100;case"place-value-showdown":return((Ne==null?void 0:Ne.winningScore)||5)*20;default:return 100}},ue=(be,Ne,Ie,Ve)=>{const Ue=ve(Ne||"",Ie),tt=Math.min(100,Math.max(0,be/Ue*100));let st,vt,Fe;return tt>=96?(st=5,vt="MASTER",Fe="#FFD700"):tt>=85?(st=4,vt="EXPERT",Fe="#FF6B6B"):tt>=70?(st=3,vt="SKILLED",Fe="#4ECDC4"):tt>=50?(st=2,vt="LEARNER",Fe="#45B7D1"):(st=1,vt="BEGINNER",Fe="#96CEB4"),h.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"4px"},children:[h.jsx("div",{style:{display:"flex",marginBottom:"4px"},children:[...Array(5)].map((ct,Ye)=>h.jsx("div",{style:{fontSize:"20px",color:Ye<st?"#FFD700":"#E2E8F0",marginRight:"2px",textShadow:Ye<st?"0 1px 3px rgba(0,0,0,0.3)":"none"},children:""},Ye))}),h.jsx("div",{style:{fontSize:"11px",fontWeight:"bold",color:Fe,backgroundColor:`${Fe}15`,padding:"2px 8px",borderRadius:"12px",textAlign:"center",border:`1px solid ${Fe}40`},children:vt}),h.jsxs("div",{style:{fontSize:"10px",color:En.textLight,marginTop:"2px"},children:[Math.round(tt),"% (",be,"/",Ue,")"]})]})},Me=(be,Ne,Ie)=>h.jsxs("button",{onClick:()=>H(be),style:{padding:"12px",backgroundColor:U===be?En.primary:"transparent",color:U===be?"white":En.text,border:"none",borderRadius:"12px",cursor:"pointer",fontWeight:"bold",fontSize:"16px",display:"flex",alignItems:"center",boxShadow:U===be?"0 4px 6px rgba(66, 153, 225, 0.3)":"none",transition:"all 0.2s ease"},children:[h.jsx("span",{style:{marginRight:"8px",fontSize:"20px"},children:Ie}),Ne]}),Pe=()=>{const be=new Date,Ne=S.filter(tt=>{var vt;const st=(vt=tt.deadline)==null?void 0:vt.toDate();return st&&st<be&&(tt.status==="assigned"||tt.status==="started")}),Ie=S.filter(tt=>{var vt;const st=(vt=tt.deadline)==null?void 0:vt.toDate();return(tt.status==="assigned"||tt.status==="started")&&(!st||st>=be)}),Ve=S.filter(tt=>tt.status==="completed"),Ue=({assignment:tt,sectionType:st})=>{var Ye;const vt=()=>{switch(st){case"overdue":return"#F56565";case"current":return"#4299E1";case"completed":return"#48BB78";default:return"#E2E8F0"}},Fe=()=>{switch(st){case"overdue":return"#FFF5F5";case"current":return En.cardBg;case"completed":return"#F0FFF4";default:return En.cardBg}},ct=R[tt.gameId];return h.jsxs("div",{style:{backgroundColor:Fe(),borderRadius:"16px",padding:"16px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)",border:`2px solid ${vt()}`,cursor:st!=="completed"?"pointer":"default",transition:"transform 0.2s ease, box-shadow 0.2s ease",opacity:st==="completed"?.8:1},onClick:()=>st!=="completed"&&Q(tt),children:[h.jsx("div",{style:{height:"120px",backgroundColor:"#EDF2F7",borderRadius:"12px",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:`1px solid ${vt()}20`},children:ct!=null&&ct.thumbnail?h.jsx("img",{src:ct.thumbnail,alt:tt.gameName,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"12px"}}):h.jsx("div",{style:{fontSize:"48px",color:vt(),opacity:.7},children:(ct==null?void 0:ct.type)==="whack-a-mole"?"":(ct==null?void 0:ct.type)==="sort-categories-egg"?"":(ct==null?void 0:ct.type)==="place-value-showdown"?"":""})}),h.jsx("h3",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"8px",color:En.text},children:tt.gameName}),h.jsxs("div",{style:{marginBottom:"12px",color:En.textLight,fontSize:"14px"},children:["Due: ",((Ye=tt.deadline)==null?void 0:Ye.toDate().toLocaleDateString())||"No deadline",st==="overdue"&&h.jsx("span",{style:{marginLeft:"8px",color:"#E53E3E",fontSize:"12px",fontWeight:"bold",backgroundColor:"#FED7D7",padding:"2px 6px",borderRadius:"12px"},children:"OVERDUE"})]}),h.jsxs("div",{style:{marginBottom:"8px",fontSize:"14px"},children:[h.jsx("span",{style:{color:En.textLight},children:"Progress: "}),h.jsxs("span",{style:{fontWeight:"bold",color:En.text},children:[tt.completedCount||0," / ",tt.timesRequired||1]})]}),h.jsx("div",{style:{height:"12px",backgroundColor:"#E2E8F0",borderRadius:"6px",overflow:"hidden"},children:h.jsx("div",{style:{height:"100%",width:`${W(tt)}%`,backgroundColor:W(tt)===100?"#48BB78":vt(),borderRadius:"6px"}})}),h.jsx("div",{style:{marginTop:"16px",padding:"8px",backgroundColor:st==="completed"?"#C6F6D5":En.background,borderRadius:"8px",textAlign:"center",fontWeight:"bold",color:st==="completed"?"#2F855A":vt()},children:st==="completed"?" Completed!":st==="overdue"?" Complete Now!":" Play Now"})]},tt.id)};return h.jsxs("div",{style:{marginTop:"24px"},children:[h.jsx("h2",{style:{fontSize:"24px",marginBottom:"24px",color:En.text},children:"My Assignments"}),S.length===0?h.jsxs("div",{style:{backgroundColor:En.cardBg,borderRadius:"16px",padding:"24px",textAlign:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)"},children:[h.jsx("span",{style:{fontSize:"48px",marginBottom:"16px",display:"block"},children:""}),h.jsx("p",{style:{color:En.textLight,fontSize:"18px"},children:"You don't have any assignments yet!"})]}):h.jsxs(h.Fragment,{children:[Ne.length>0&&h.jsxs("div",{style:{marginBottom:"32px"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",backgroundColor:"#FED7D7",padding:"12px 16px",borderRadius:"12px",border:"2px solid #F56565"},children:[h.jsx("span",{style:{fontSize:"24px",marginRight:"12px"},children:""}),h.jsxs("h3",{style:{fontSize:"20px",fontWeight:"bold",color:"#C53030",margin:0},children:["Not-Yet-Done Assignments (",Ne.length,")"]})]}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px"},children:Ne.map(tt=>h.jsx(Ue,{assignment:tt,sectionType:"overdue"},tt.id))})]}),Ie.length>0&&h.jsxs("div",{style:{marginBottom:"32px"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",backgroundColor:"#EBF8FF",padding:"12px 16px",borderRadius:"12px",border:"2px solid #4299E1"},children:[h.jsx("span",{style:{fontSize:"24px",marginRight:"12px"},children:""}),h.jsxs("h3",{style:{fontSize:"20px",fontWeight:"bold",color:"#2B6CB0",margin:0},children:["Current Assignments (",Ie.length,")"]})]}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px"},children:Ie.map(tt=>h.jsx(Ue,{assignment:tt,sectionType:"current"},tt.id))})]}),Ve.length>0&&h.jsxs("div",{style:{marginBottom:"32px"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",backgroundColor:"#F0FFF4",padding:"12px 16px",borderRadius:"12px",border:"2px solid #48BB78"},children:[h.jsx("span",{style:{fontSize:"24px",marginRight:"12px"},children:""}),h.jsxs("h3",{style:{fontSize:"20px",fontWeight:"bold",color:"#2F855A",margin:0},children:["Completed Assignments (",Ve.length,")"]})]}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px"},children:Ve.map(tt=>h.jsx(Ue,{assignment:tt,sectionType:"completed"},tt.id))})]})]})]})},je=()=>{const be=S.reduce((Ie,Ve)=>{var Ue;if(Ve.gameId&&R[Ve.gameId]){const tt=R[Ve.gameId];Ie[Ve.gameId]=oe(B({},tt),{id:Ve.gameId,name:Ve.gameName,assignmentCount:(((Ue=Ie[Ve.gameId])==null?void 0:Ue.assignmentCount)||0)+1})}return Ie},{}),Ne=Object.values(be);return h.jsxs("div",{style:{marginTop:"24px"},children:[h.jsx("h2",{style:{fontSize:"24px",marginBottom:"24px",color:En.text},children:"Free Play"}),Ne.length>0&&h.jsxs("div",{style:{marginBottom:"32px"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",backgroundColor:"#E6FFFA",padding:"12px 16px",borderRadius:"12px",border:"2px solid #38B2AC"},children:[h.jsx("span",{style:{fontSize:"24px",marginRight:"12px"},children:""}),h.jsxs("h3",{style:{fontSize:"20px",fontWeight:"bold",color:"#2C7A7B",margin:0},children:["My Assigned Games (",Ne.length,")"]})]}),h.jsx("p",{style:{color:En.textLight,marginBottom:"16px",fontSize:"14px"},children:"Practice with games you've been assigned. Perfect your skills anytime!"}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px"},children:Ne.map(Ie=>h.jsxs("div",{style:{backgroundColor:En.cardBg,borderRadius:"16px",padding:"16px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)",border:"2px solid #38B2AC",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onClick:()=>ge(Ie.id),onMouseOver:Ve=>{Ve.currentTarget.style.transform="translateY(-2px)",Ve.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseOut:Ve=>{Ve.currentTarget.style.transform="translateY(0)",Ve.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.05)"},children:[h.jsx("div",{style:{height:"160px",backgroundColor:"#E6FFFA",borderRadius:"12px",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:"1px solid #38B2AC30"},children:Ie.thumbnail?h.jsx("img",{src:Ie.thumbnail,alt:Ie.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"12px"}}):h.jsx("div",{style:{fontSize:"48px",color:"#38B2AC"},children:Ie.type==="whack-a-mole"?"":Ie.type==="sort-categories-egg"?"":Ie.type==="place-value-showdown"?"":""})}),h.jsx("h3",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"8px",color:En.text},children:Ie.name||Ie.title}),h.jsxs("div",{style:{fontSize:"14px",color:En.textLight,marginBottom:"8px"},children:["Type: ",Ie.type||Ie.gameType]}),h.jsxs("div",{style:{fontSize:"14px",color:En.textLight,marginBottom:"16px"},children:["Assigned ",Ie.assignmentCount," time",Ie.assignmentCount>1?"s":""]}),h.jsx("div",{style:{padding:"8px",backgroundColor:"#38B2AC",borderRadius:"8px",textAlign:"center",fontWeight:"bold",color:"white"},children:" Practice Game"})]},Ie.id))})]}),h.jsxs("div",{style:{marginBottom:"32px"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",backgroundColor:"#F0FFF4",padding:"12px 16px",borderRadius:"12px",border:"2px solid #48BB78"},children:[h.jsx("span",{style:{fontSize:"24px",marginRight:"12px"},children:""}),h.jsxs("h3",{style:{fontSize:"20px",fontWeight:"bold",color:"#2F855A",margin:0},children:["Public Games (",_.length,")"]})]}),_.length===0?h.jsxs("div",{style:{backgroundColor:En.cardBg,borderRadius:"16px",padding:"24px",textAlign:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)"},children:[h.jsx("span",{style:{fontSize:"48px",marginBottom:"16px",display:"block"},children:""}),h.jsx("p",{style:{color:En.textLight,fontSize:"18px"},children:"No public games available right now. Check back later!"})]}):h.jsxs(h.Fragment,{children:[h.jsx("p",{style:{color:En.textLight,marginBottom:"16px",fontSize:"14px"},children:"Explore games shared by teachers for everyone to enjoy!"}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px"},children:_.map(Ie=>h.jsxs("div",{style:{backgroundColor:En.cardBg,borderRadius:"16px",padding:"16px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)",border:"2px solid #48BB78",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onClick:()=>ge(Ie.id),onMouseOver:Ve=>{Ve.currentTarget.style.transform="translateY(-2px)",Ve.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseOut:Ve=>{Ve.currentTarget.style.transform="translateY(0)",Ve.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.05)"},children:[h.jsx("div",{style:{height:"160px",backgroundColor:"#F0FFF4",borderRadius:"12px",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:"1px solid #48BB7830"},children:Ie.thumbnail?h.jsx("img",{src:Ie.thumbnail,alt:Ie.name||Ie.title,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"12px"}}):h.jsx("div",{style:{fontSize:"48px",color:"#48BB78"},children:Ie.type==="whack-a-mole"?"":Ie.type==="sort-categories-egg"?"":Ie.type==="place-value-showdown"?"":""})}),h.jsx("h3",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"8px",color:En.text},children:Ie.name||Ie.title}),h.jsxs("div",{style:{fontSize:"14px",color:En.textLight,marginBottom:"16px"},children:["Type: ",Ie.type||Ie.gameType]}),h.jsx("div",{style:{padding:"8px",backgroundColor:"#48BB78",borderRadius:"8px",textAlign:"center",fontWeight:"bold",color:"white"},children:" Play Free Game"})]},Ie.id))})]})]}),Ne.length===0&&_.length===0&&h.jsxs("div",{style:{backgroundColor:En.cardBg,borderRadius:"16px",padding:"32px",textAlign:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)"},children:[h.jsx("span",{style:{fontSize:"64px",marginBottom:"16px",display:"block"},children:""}),h.jsx("h3",{style:{fontSize:"20px",marginBottom:"8px",color:En.text},children:"No Games Available"}),h.jsx("p",{style:{color:En.textLight,fontSize:"16px"},children:"You don't have any assigned games yet, and there are no public games available. Check back later or ask your teacher about assignments!"})]})]})},ke=()=>{var Ve;const be=(Ue,tt,st)=>{const vt=ve(tt||"",st),Fe=Math.min(100,Math.max(0,Ue/vt*100));return Fe>=96?{emoji:"",text:"LEGEND",color:"#FFD700",bgColor:"#FFF8DC"}:Fe>=85?{emoji:"",text:"CHAMPION",color:"#FFD700",bgColor:"#FFF8DC"}:Fe>=70?{emoji:"",text:"EXPERT",color:"#C0C0C0",bgColor:"#F8F8FF"}:Fe>=50?{emoji:"",text:"SKILLED",color:"#CD7F32",bgColor:"#FDF5E6"}:Fe>=25?{emoji:"",text:"RISING STAR",color:"#32CD32",bgColor:"#F0FFF0"}:{emoji:"",text:"ACHIEVER",color:"#4169E1",bgColor:"#F0F8FF"}},Ne=()=>{var st;const Ue=q.length,tt=((st=q[0])==null?void 0:st.score)||0;return Ue===0?" Start playing games to unlock your first achievement!":Ue===1?" Great start! Keep playing to build your collection of achievements!":tt>=900?" Legendary performance! You're absolutely crushing it!":tt>=700?" Fantastic scores! You're becoming a true gaming expert!":" Keep it up! Every game makes you stronger!"},Ie=({score:Ue,index:tt})=>{var ct,Ye;const st=be(Ue.score,Ue.gameType,Ue.gameConfig),vt=Ue.gameConfig,Fe=tt===0;return h.jsxs("div",{style:{backgroundColor:Fe?"#FFF8DC":En.cardBg,borderRadius:"20px",padding:"20px",boxShadow:Fe?"0 8px 25px rgba(255, 215, 0, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.08)",border:Fe?"3px solid #FFD700":"2px solid #E2E8F0",position:"relative",transform:Fe?"scale(1.02)":"scale(1)",transition:"all 0.3s ease"},children:[Fe&&h.jsx("div",{style:{position:"absolute",top:"-15px",right:"20px",backgroundColor:"#FFD700",color:"#8B4513",padding:"8px 16px",borderRadius:"20px",fontWeight:"bold",fontSize:"14px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",display:"flex",alignItems:"center"},children:" TOP SCORE"}),h.jsx("div",{style:{height:"140px",backgroundColor:st.bgColor,borderRadius:"16px",marginBottom:"16px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:`2px solid ${st.color}30`},children:vt!=null&&vt.thumbnail?h.jsx("img",{src:vt.thumbnail,alt:vt.title,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"16px"}}):h.jsx("div",{style:{fontSize:"56px",color:st.color,opacity:.8},children:Ue.gameType==="whack-a-mole"?"":Ue.gameType==="sort-categories-egg"?"":Ue.gameType==="spinner-wheel"?"":Ue.gameType==="place-value-showdown"?"":""})}),h.jsx("h3",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"8px",color:En.text,textAlign:"center"},children:(vt==null?void 0:vt.title)||"Unknown Game"}),h.jsxs("div",{style:{backgroundColor:st.bgColor,color:st.color,borderRadius:"25px",padding:"8px 16px",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"12px",border:`2px solid ${st.color}40`},children:[h.jsx("span",{style:{marginRight:"6px",fontSize:"16px"},children:st.emoji}),st.text]}),h.jsxs("div",{style:{textAlign:"center",marginBottom:"12px"},children:[h.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:st.color,marginBottom:"4px"},children:Ue.score}),h.jsx("div",{style:{fontSize:"14px",color:En.textLight},children:"points"}),ue(Ue.score,Ue.gameType,Ue.gameConfig)]}),h.jsxs("div",{style:{fontSize:"12px",color:En.textLight,textAlign:"center",marginTop:"8px"},children:[" ",(Ye=(ct=Ue.createdAt)==null?void 0:ct.toDate)!=null&&Ye.call(ct)?Ue.createdAt.toDate().toLocaleDateString():new Date(Ue.createdAt).toLocaleDateString()]}),h.jsxs("div",{style:{position:"absolute",top:"12px",left:"12px",backgroundColor:Fe?"#FFD700":En.primary,color:Fe?"#8B4513":"white",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",fontSize:"14px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"},children:["#",tt+1]})]})};return h.jsxs("div",{style:{marginTop:"24px"},children:[h.jsx("h2",{style:{fontSize:"24px",marginBottom:"16px",color:En.text},children:" My High Scores"}),h.jsxs("div",{style:{backgroundColor:"#4299E1",color:"white",borderRadius:"16px",padding:"20px",marginBottom:"24px",textAlign:"center",boxShadow:"0 4px 12px rgba(66, 153, 225, 0.3)"},children:[h.jsx("div",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"8px"},children:Ne()}),h.jsx("div",{style:{opacity:.9},children:q.length>0&&`You've achieved ${q.length} high score${q.length>1?"s":""}!`})]}),q.length===0?h.jsxs("div",{style:{backgroundColor:En.cardBg,borderRadius:"20px",padding:"40px",textAlign:"center",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.05)"},children:[h.jsx("div",{style:{fontSize:"80px",marginBottom:"20px"},children:""}),h.jsx("h3",{style:{fontSize:"24px",marginBottom:"12px",color:En.text},children:"Your Trophy Case Awaits!"}),h.jsx("p",{style:{color:En.textLight,fontSize:"18px",marginBottom:"20px"},children:"Complete games to unlock achievements and build your high score collection!"}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginTop:"24px"},children:[{emoji:"",text:"First Score",desc:"Complete any game"},{emoji:"",text:"Rising Star",desc:"Score 500+ points"},{emoji:"",text:"Champion",desc:"Score 800+ points"},{emoji:"",text:"Legend",desc:"Score 900+ points"}].map((Ue,tt)=>h.jsxs("div",{style:{backgroundColor:"#F7FAFC",borderRadius:"12px",padding:"16px",opacity:.6,textAlign:"center",border:"2px dashed #E2E8F0"},children:[h.jsx("div",{style:{fontSize:"32px",marginBottom:"8px"},children:Ue.emoji}),h.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px",color:En.text},children:Ue.text}),h.jsx("div",{style:{fontSize:"12px",color:En.textLight},children:Ue.desc})]},tt))})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"16px",marginBottom:"32px"},children:[h.jsxs("div",{style:{backgroundColor:En.cardBg,padding:"20px",borderRadius:"16px",textAlign:"center",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.05)"},children:[h.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:En.primary},children:q.length}),h.jsx("div",{style:{color:En.textLight},children:"Total Achievements"})]}),h.jsxs("div",{style:{backgroundColor:En.cardBg,padding:"20px",borderRadius:"16px",textAlign:"center",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.05)"},children:[h.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#FFD700"},children:((Ve=q[0])==null?void 0:Ve.score)||0}),h.jsx("div",{style:{color:En.textLight},children:"Best Score"})]}),h.jsxs("div",{style:{backgroundColor:En.cardBg,padding:"20px",borderRadius:"16px",textAlign:"center",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.05)"},children:[h.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#48BB78"},children:Math.round(q.reduce((Ue,tt)=>Ue+(tt.score||0),0)/q.length)||0}),h.jsx("div",{style:{color:En.textLight},children:"Average Score"})]})]}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:q.map((Ue,tt)=>h.jsx(Ie,{score:Ue,index:tt},Ue.id))}),h.jsxs("div",{style:{backgroundColor:"#F0FFF4",borderRadius:"16px",padding:"20px",marginTop:"32px",textAlign:"center",border:"2px solid #48BB78"},children:[h.jsx("div",{style:{fontSize:"20px",marginBottom:"8px"},children:""}),h.jsx("div",{style:{color:"#2F855A",fontWeight:"bold"},children:"Keep playing to beat your high scores and unlock new achievements!"})]})]})]})},De=()=>te(rt,null,function*(){if(!K){G(!0);try{const be=o?i:t==null?void 0:t.uid;if(!be){console.log("No student userId found for high scores query"),$([]);return}console.log("Querying high scores for userId:",be);const Ne=xr(Pn(xt,"highScores"),Vn("userId","==",be),g0("score","desc")),Ie=yield er(Ne);console.log("Found high scores:",Ie.docs.length);const Ve=[];for(const Ue of Ie.docs){const tt=Ue.data();console.log("Processing high score:",tt);const st={id:Ue.id,userId:tt.userId||be,playerName:tt.playerName||"Student",score:tt.score,configId:tt.configId,createdAt:tt.createdAt,gameType:tt.gameType||"unknown",gameConfig:null};if(tt.configId)try{const vt=an(xt,"userGameConfigs",tt.configId),Fe=yield oi(vt);if(Fe.exists()){const ct=Fe.data();st.gameConfig=B({id:Fe.id,title:ct.title||ct.name,thumbnail:ct.thumbnail||ct.thumbnailUrl,type:ct.type||ct.gameType},ct),console.log("Found game config for score:",st.gameConfig.title)}else console.log("Game config not found for configId:",tt.configId)}catch(vt){console.error("Error fetching game config:",vt)}Ve.push(st)}console.log("Enhanced high scores loaded:",Ve.length),$(Ve)}catch(be){console.error("Error loading enhanced high scores:",be),$([])}finally{G(!1)}}}),nt=()=>{e("/teacher",{state:{activeTab:"students"}})};return A.useEffect(()=>{U==="highscores"&&!K&&q.length===0&&De()},[U]),A.useEffect(()=>{const be=new URLSearchParams(window.location.search),Ne=be.get("emailAccess")==="true",Ie=be.get("from")==="email",Ve=be.get("pwa")==="true",Ue=be.get("studentEmail"),tt=be.get("source")==="email",st=window.location.href,Fe=document.referrer.includes("oobCode="),ct=st.includes("oobCode=");console.log("[StudentDashboard] Email link access detection (EARLY):",{emailAccess:Ne,fromEmail:Ie,pwaParam:Ve,studentEmailParam:Ue,sourceParam:tt,hasOobCodeInReferrer:Fe,hasOobCodeInUrl:ct,currentUrl:st}),(Ne||Ie&&Ve||Ie&&Ue||tt||Fe||ct||sessionStorage.getItem("direct_token_access")==="true")&&(console.log("[StudentDashboard]  EARLY: Email link access detected - setting bypass flag"),v(!0),sessionStorage.setItem("direct_token_access","true"),Ue&&(sessionStorage.setItem("student_email",Ue),console.log("[StudentDashboard]  EARLY: Stored student email for Dashboard navigation:",Ue)))},[]),h.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"32px 16px",backgroundColor:En.background,minHeight:"100vh"},children:[o&&h.jsx("div",{style:{marginBottom:"20px"},children:h.jsxs("button",{onClick:nt,style:{display:"flex",alignItems:"center",padding:"8px 16px",backgroundColor:En.primary,color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[h.jsx("span",{style:{marginRight:"8px",fontSize:"18px"},children:""}),"Back to Teacher Dashboard"]})}),h.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"32px"},children:[h.jsx("div",{style:{marginRight:"16px",fontSize:"40px"},children:""}),h.jsxs("div",{children:[h.jsx("h1",{style:{fontSize:"28px",fontWeight:"bold",marginBottom:"4px",color:En.text},children:o?`Student: ${(m==null?void 0:m.name)||"Unknown Student"}`:`Hello, ${(x==null?void 0:x.name)||(t==null?void 0:t.displayName)||"Student"}!`}),h.jsx("p",{style:{color:En.textLight},children:o?`Teacher view of student dashboard${m!=null&&m.grade?` - Grade ${m.grade}`:""}`:""})]})]}),!o&&u&&h.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",padding:"16px 20px",borderRadius:"12px",boxShadow:"0 4px 16px rgba(16, 185, 129, 0.3)",zIndex:1e3,maxWidth:"320px",animation:"slideIn 0.3s ease-out"},children:h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[h.jsx("div",{style:{fontSize:"1.5rem"},children:""}),h.jsxs("div",{style:{flex:1},children:[h.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Install Our App?"}),h.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Get faster access to assignments"})]}),h.jsx("button",{onClick:a,style:{background:"rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"white",padding:"6px 12px",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer",marginRight:"8px"},children:"Install"}),h.jsx("button",{onClick:d,style:{background:"none",border:"none",color:"white",fontSize:"1.2rem",cursor:"pointer",padding:"4px",opacity:.7},children:""})]})}),!o&&h.jsx(wet,{}),j&&!o&&h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:h.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"30px",maxWidth:"500px",width:"100%",textAlign:"center",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)",position:"relative"},children:[h.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",margin:"-30px -30px 20px -30px",padding:"25px 30px",borderRadius:"16px 16px 0 0"},children:[h.jsx("div",{style:{fontSize:"48px",marginBottom:"10px"},children:""}),h.jsx("h2",{style:{margin:0,fontSize:"24px",fontWeight:"bold"},children:"Install LuminateLearn App"})]}),h.jsxs("div",{style:{marginBottom:"25px"},children:[h.jsxs("p",{style:{fontSize:"18px",color:En.text,marginBottom:"15px",lineHeight:1.6},children:[" ",h.jsx("strong",{children:"Get the best learning experience!"})]}),h.jsx("p",{style:{fontSize:"16px",color:En.textLight,lineHeight:1.6},children:"Install LuminateLearn as an app for faster access, offline capabilities, and a native app experience!"})]}),h.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"},children:[h.jsx("button",{onClick:pe,style:{backgroundColor:En.primary,color:"white",border:"none",borderRadius:"12px",padding:"15px 25px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 12px rgba(66, 153, 225, 0.3)",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseOver:be=>{be.currentTarget.style.backgroundColor="#3182CE",be.currentTarget.style.transform="translateY(-1px)"},onMouseOut:be=>{be.currentTarget.style.backgroundColor=En.primary,be.currentTarget.style.transform="translateY(0)"},children:" Install App"}),h.jsx("button",{onClick:()=>{z(!1);const be=new URL(window.location.href);be.searchParams.delete("pwa"),window.history.replaceState({},"",be.toString())},style:{backgroundColor:"transparent",color:En.textLight,border:`2px solid ${En.textLight}`,borderRadius:"12px",padding:"13px 25px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:be=>{be.currentTarget.style.backgroundColor=En.textLight,be.currentTarget.style.color="white"},onMouseOut:be=>{be.currentTarget.style.backgroundColor="transparent",be.currentTarget.style.color=En.textLight},children:"Maybe Later"})]}),h.jsxs("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#F0FFF4",borderRadius:"8px",fontSize:"14px",color:"#2F855A"},children:[" ",h.jsx("strong",{children:"Benefits:"})," Faster loading, works offline, and feels like a native app!"]})]})}),h.jsxs("div",{style:{display:"flex",gap:"12px",overflowX:"auto",padding:"8px 0"},children:[Me("assignments","My Assignments",""),Me("freeplay","Free Play",""),Me("highscores","High Scores","")]}),L?h.jsx(IL,{size:"large"}):h.jsxs(h.Fragment,{children:[U==="assignments"&&Pe(),U==="freeplay"&&je(),U==="highscores"&&ke()]}),f&&h.jsxs("div",{style:{position:"fixed",top:"20px",left:"50%",transform:"translateX(-50%)",backgroundColor:"#FFD700",color:"black",padding:"16px 24px",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:2e3,maxWidth:"90%",textAlign:"center",animation:"slideDown 0.3s ease-out",fontFamily:"'Comic Neue', 'Comic Sans MS', 'Trebuchet MS', cursive, sans-serif"},children:[h.jsx("style",{children:`
              @keyframes slideDown {
                from {
                  transform: translateX(-50%) translateY(-20px);
                  opacity: 0;
                }
                to {
                  transform: translateX(-50%) translateY(0);
                  opacity: 1;
                }
              }
            `}),h.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:"bold",marginBottom:"8px"},children:f.title}),f.description&&h.jsx("p",{style:{margin:0,fontSize:"14px",opacity:.9},children:f.description})]})]})},Eet=()=>{const{templateId:t}=hu(),{currentUser:e}=Pr(),n=Fr(),r=ro(),i=vs(),[o,s]=A.useState(null),[a,l]=A.useState(!1),u=(()=>{const b=i.pathname;return b.includes("whack-a-mole")?"whack-a-mole":b.includes("sort-categories-egg")?"sort-categories-egg":b.includes("spinner-wheel")?"spinner-wheel":b.includes("anagram")?"anagram":b.includes("sentence-sense")?"sentence-sense":b.includes("place-value-showdown")?"place-value-showdown":b.includes("word-volley")?"word-volley":null})();A.useEffect(()=>{u&&!t?(l(!0),s(null)):l(!1)},[u,t]),A.useEffect(()=>{e||(r({title:"Authentication Required",description:"Please sign in to access configuration pages.",status:"error",duration:5e3,isClosable:!0}),n("/"))},[e,n,r]),A.useEffect(()=>{!u&&i.pathname!=="/configure"&&(r({title:"Missing Game Type",description:"A game type is required to configure a game.",status:"error",duration:5e3,isClosable:!0}),n("/"))},[u,n,r,i.pathname]),A.useEffect(()=>{s(null)},[i.pathname]);const d=b=>{u&&!t||s(b)};if(!e||i.pathname==="/configure"&&!u)return h.jsx(Ml,{h:"100vh",children:h.jsx(Oa,{size:"xl"})});const f=()=>!u||u==="whack-a-mole"?0:u==="sort-categories-egg"?1:u==="spinner-wheel"?2:u==="anagram"?3:u==="sentence-sense"?4:u==="place-value-showdown"?5:u==="word-volley"?6:0,p=b=>{b===0&&n("/configure/whack-a-mole"),b===1&&n("/configure/sort-categories-egg"),b===2&&n("/configure/spinner-wheel"),b===3&&n("/configure/anagram"),b===4&&n("/configure/sentence-sense"),b===5&&n("/configure/place-value-showdown"),b===6&&n("/configure/word-volley")};return h.jsxs(AC,{maxW:"container.xl",py:8,children:[h.jsxs(yt,{mb:8,children:[h.jsx(Br,{mb:6,children:"Game Configuration"}),h.jsx(Mw,{index:f(),onChange:p,variant:"enclosed",colorScheme:"blue",children:h.jsxs(Pw,{children:[h.jsx(Ts,{children:"Whack-a-Mole"}),h.jsx(Ts,{children:"Sort Categories Egg"}),h.jsx(Ts,{children:"Spinner Wheel"}),h.jsx(Ts,{children:"Anagram"}),h.jsx(Ts,{children:"Sentence Sense"}),h.jsx(Ts,{children:"Place Value Showdown"}),h.jsx(Ts,{children:"Pong"})]})})]}),o&&!a&&h.jsxs(_i,{status:"error",mb:6,children:[h.jsx(Si,{}),h.jsx(hT,{children:"Error:"}),h.jsx(bl,{children:o})]}),h.jsx(Eke,{context:{onError:d}})]})};function Cet(t,e="You have unsaved changes. Are you sure you want to leave this page?"){const n=Fr(),r=vs(),[i,o]=A.useState(r.key),[s,a]=A.useState(!1),[l,c]=A.useState(null);return A.useEffect(()=>{if(t){const p=b=>(b.preventDefault(),b.returnValue=e,e);return window.addEventListener("beforeunload",p),()=>window.removeEventListener("beforeunload",p)}},[t,e]),A.useEffect(()=>{r.key!==i&&t&&(a(!0),c({to:-1,isBack:!0}),o(r.key))},[r,i,t]),{showPrompt:s,confirmNavigation:()=>{a(!1),l&&(typeof l.to=="string"?n(l.to):l.isBack?n(-1):n(l.to)),c(null)},cancelNavigation:()=>{a(!1),c(null)},safeNavigate:p=>{t?(a(!0),c({to:p,isBack:!1})):n(p)}}}const Aet=`
  body {
    background-color: #E6F3FF !important;
    min-height: 100vh;
  }
  
  .apple-container {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    max-width: 800px;
    margin: 0 auto;
    background-color: #E6F3FF;
    min-height: 100vh;
    padding: 20px;
  }
  
  .apple-section {
    background-color: white;
    border-radius: 12px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    padding: 20px;
    margin-bottom: 24px;
    border: 1px solid #E2E8F0;
    transition: all 0.2s ease;
  }

  .apple-section:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  }
  
  .apple-input {
    border-radius: 8px !important;
    border-color: #E2E8F0 !important;
    background-color: #F8F9FC !important;
    transition: all 0.2s ease !important;
  }
  
  .apple-input:focus-within {
    border-color: #007AFF !important;
    box-shadow: 0 0 0 1px #007AFF !important;
    background-color: white !important;
  }
  
  .apple-button {
    border-radius: 8px !important;
    font-weight: 500 !important;
    transition: all 0.2s ease !important;
  }
  
  .apple-button-primary {
    background-color: #007AFF !important;
    color: white !important;
  }
  
  .apple-button-primary:hover {
    background-color: #0063CC !important;
    transform: translateY(-1px) !important;
  }
`,Tet=({field:t,value:e,onChange:n,error:r,saveAttempted:i})=>{var s;const o=i&&t.required&&!e;switch(t.type){case"text":return h.jsx(si,{value:e||"",onChange:a=>n(a.target.value),placeholder:t.placeholder,isInvalid:o,className:"apple-input"});case"textarea":return h.jsx(w3,{value:e||"",onChange:a=>n(a.target.value),placeholder:t.placeholder,isInvalid:o,className:"apple-input",rows:3});case"number":return h.jsxs(BX,{value:e||t.defaultValue||0,onChange:a=>n(parseInt(a)||t.defaultValue||0),min:t.min,max:t.max,step:t.step,isInvalid:o,width:t.width||"auto",children:[h.jsx(UX,{className:"apple-input"}),h.jsxs(jX,{children:[h.jsx(WX,{}),h.jsx(VX,{})]})]});case"select":return h.jsx(Bv,{value:e||t.defaultValue||"",onChange:a=>{var c;const l=(c=t.options)==null?void 0:c.find(u=>u.value.toString()===a.target.value);n(l?l.value:a.target.value)},placeholder:t.placeholder,isInvalid:o,className:"apple-input",width:t.width||"auto",children:(s=t.options)==null?void 0:s.map(a=>h.jsx("option",{value:a.value,children:a.label},a.value))});case"switch":return h.jsx(b3,{isChecked:e||!1,onChange:a=>n(a.target.checked),colorScheme:"blue"});case"custom":if(t.component){const a=t.component;return h.jsx(a,{value:e,onChange:n,field:t})}return null;default:return h.jsxs(dt,{children:["Unsupported field type: ",t.type]})}},Met=({section:t,formData:e,updateField:n,errors:r,saveAttempted:i})=>{var o;if(t.component){const s=t.component;return h.jsxs(mc,{children:[h.jsxs(kv,{children:[h.jsx(Br,{size:"md",children:t.title}),t.description&&h.jsx(dt,{color:"gray.600",fontSize:"sm",mt:1,children:t.description})]}),h.jsx(pc,{children:h.jsx(s,{formData:e,updateField:n,errors:r,saveAttempted:i})})]})}return h.jsxs(mc,{children:[h.jsxs(kv,{children:[h.jsx(Br,{size:"md",children:t.title}),t.description&&h.jsx(dt,{color:"gray.600",fontSize:"sm",mt:1,children:t.description})]}),h.jsx(pc,{children:h.jsx($t,{spacing:4,children:(o=t.fields)==null?void 0:o.map(s=>h.jsxs(Ir,{isInvalid:!!r[s.name],children:[h.jsx(fr,{children:s.label}),h.jsx(Tet,{field:s,value:e[s.name],onChange:a=>n(s.name,a),error:r[s.name],saveAttempted:i}),s.helpText&&h.jsx(dt,{fontSize:"sm",color:"gray.600",mt:1,children:s.helpText}),r[s.name]&&h.jsxs(_i,{status:"error",mt:2,children:[h.jsx(Si,{}),h.jsx(bl,{children:r[s.name]})]})]},s.name))})})]})},xm=({schema:t,onSave:e,onCancel:n,initialData:r={},isEditing:i=!1,documentId:o})=>{Fr();const{currentUser:s}=Pr(),a=ro(),l=()=>{const P={};return t.sections.forEach(M=>{M.fields&&M.fields.forEach(T=>{T.defaultValue!==void 0&&(P[T.name]=T.defaultValue)})}),B(B({},P),r)},[c,u]=A.useState(l()),[d,f]=A.useState(!1),[p,b]=A.useState(!1),[v,m]=A.useState({}),g=JSON.stringify(c)!==JSON.stringify(r),{safeNavigate:x}=Cet(g);A.useEffect(()=>{const P=document.createElement("style");return P.textContent=Aet,document.head.appendChild(P),()=>{document.head.removeChild(P)}},[]);const w=(P,M)=>{u(T=>oe(B({},T),{[P]:M})),v[P]&&m(T=>oe(B({},T),{[P]:""}))},S=()=>{const P={};if(t.sections.forEach(M=>{var T;(T=M.fields)==null||T.forEach(_=>{if(_.required&&!c[_.name]&&(P[_.name]=`${_.label} is required`),_.validation){const E=_.validation(c[_.name]);E&&(P[_.name]=E)}})}),t.customValidation){const M=t.customValidation(c);M&&(P.custom=M)}return m(P),Object.keys(P).length===0},D=()=>te(rt,null,function*(){if(b(!0),!S()){a({title:"Validation Error",description:"Please fix the errors below before saving.",status:"error",duration:3e3});return}f(!0);try{const P=t.generateConfig?t.generateConfig(c,s):oe(B({},c),{type:t.gameType,userId:s==null?void 0:s.uid,email:s==null?void 0:s.email,createdAt:_o()});if(e)yield e(P);else if(o)yield Ns(an(xt,"userGameConfigs",o),P);else{const M=yield Sc(Pn(xt,"userGameConfigs"),P);try{const T=yield jL(M.id,P);yield Ns(an(xt,"userGameConfigs",M.id),{thumbnail:T})}catch(T){console.error("Error generating thumbnail:",T)}}a({title:"Success",description:"Configuration saved successfully!",status:"success",duration:3e3})}catch(P){console.error("Error saving configuration:",P);const M=P instanceof Error?P.message:String(P),T=M.includes("Unsupported field value: undefined");let _="Failed to save configuration. Please try again.";if(T){const E=M.match(/found in field (\w+)/);_=`Configuration error: The "${E?E[1]:"unknown field"}" field has an invalid value. Please refresh the page and try again.`}a({title:"Save Failed",description:_,status:"error",duration:5e3})}finally{f(!1)}}),k=()=>{n?n():x("/")};return d?h.jsx(Ml,{p:8,children:h.jsx(Oa,{size:"xl"})}):h.jsx(yt,{className:"apple-container",p:6,children:h.jsxs($t,{spacing:6,align:"stretch",children:[h.jsxs(yt,{children:[h.jsx(Br,{size:"lg",mb:2,children:i?`Edit ${t.title}`:`Create ${t.title}`}),h.jsx(dt,{color:"gray.600",children:t.description})]}),v.custom&&h.jsxs(_i,{status:"error",children:[h.jsx(Si,{}),h.jsx(bl,{children:v.custom})]}),t.sections.map((P,M)=>h.jsx(Met,{section:P,formData:c,updateField:w,errors:v,saveAttempted:p},M)),h.jsxs(Ln,{spacing:4,justify:"flex-end",children:[h.jsx(hn,{onClick:k,variant:"ghost",className:"apple-button",children:"Cancel"}),h.jsx(hn,{onClick:D,colorScheme:"blue",isLoading:d,loadingText:"Saving...",className:"apple-button apple-button-primary",children:"Save Game Configuration"})]})]})})};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function r$(t){return Object.prototype.toString.call(t)==="[object Object]"}function Vo(t){var e,n;return r$(t)===!1?!1:(e=t.constructor,e===void 0?!0:(n=e.prototype,!(r$(n)===!1||n.hasOwnProperty("isPrototypeOf")===!1)))}var Une=Symbol.for("immer-nothing"),i$=Symbol.for("immer-draftable"),Ba=Symbol.for("immer-state");function nc(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var n0=Object.getPrototypeOf;function sm(t){return!!t&&!!t[Ba]}function am(t){var e;return t?zne(t)||Array.isArray(t)||!!t[i$]||!!((e=t.constructor)!=null&&e[i$])||x2(t)||b2(t):!1}var Pet=Object.prototype.constructor.toString();function zne(t){if(!t||typeof t!="object")return!1;const e=n0(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Pet}function pA(t,e){y2(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function y2(t){const e=t[Ba];return e?e.type_:Array.isArray(t)?1:x2(t)?2:b2(t)?3:0}function UF(t,e){return y2(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Vne(t,e,n){const r=y2(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Det(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function x2(t){return t instanceof Map}function b2(t){return t instanceof Set}function ep(t){return t.copy_||t.base_}function zF(t,e){if(x2(t))return new Map(t);if(b2(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=zne(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Ba];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[s]})}return Object.create(n0(t),r)}else{const r=n0(t);if(r!==null&&n)return B({},t);const i=Object.create(r);return Object.assign(i,t)}}function C5(t,e=!1){return w2(t)||sm(t)||!am(t)||(y2(t)>1&&(t.set=t.add=t.clear=t.delete=Ret),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>C5(r,!0))),t}function Ret(){nc(2)}function w2(t){return Object.isFrozen(t)}var ket={};function lm(t){const e=ket[t];return e||nc(0,t),e}var Zb;function Wne(){return Zb}function Iet(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function o$(t,e){e&&(lm("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function VF(t){WF(t),t.drafts_.forEach(Fet),t.drafts_=null}function WF(t){t===Zb&&(Zb=t.parent_)}function s$(t){return Zb=Iet(Zb,t)}function Fet(t){const e=t[Ba];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function a$(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Ba].modified_&&(VF(e),nc(4)),am(t)&&(t=mA(e,t),e.parent_||gA(e,t)),e.patches_&&lm("Patches").generateReplacementPatches_(n[Ba].base_,t,e.patches_,e.inversePatches_)):t=mA(e,n,[]),VF(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Une?t:void 0}function mA(t,e,n){if(w2(e))return e;const r=e[Ba];if(!r)return pA(e,(i,o)=>l$(t,r,e,i,o,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return gA(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),pA(o,(a,l)=>l$(t,r,i,a,l,n,s)),gA(t,i,!1),n&&t.patches_&&lm("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function l$(t,e,n,r,i,o,s){if(sm(i)){const a=o&&e&&e.type_!==3&&!UF(e.assigned_,r)?o.concat(r):void 0,l=mA(t,i,a);if(Vne(n,r,l),sm(l))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(am(i)&&!w2(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;mA(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&gA(t,i)}}function gA(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&C5(e,n)}function Oet(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:Wne(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=A5;n&&(i=[r],o=Jb);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}var A5={get(t,e){if(e===Ba)return t;const n=ep(t);if(!UF(n,e))return Net(t,n,e);const r=n[e];return t.finalized_||!am(r)?r:r===sR(t.base_,e)?(aR(t),t.copy_[e]=HF(r,t)):r},has(t,e){return e in ep(t)},ownKeys(t){return Reflect.ownKeys(ep(t))},set(t,e,n){const r=$ne(ep(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=sR(ep(t),e),o=i==null?void 0:i[Ba];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Det(n,i)&&(n!==void 0||UF(t.base_,e)))return!0;aR(t),$F(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return sR(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,aR(t),$F(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=ep(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){nc(11)},getPrototypeOf(t){return n0(t.base_)},setPrototypeOf(){nc(12)}},Jb={};pA(A5,(t,e)=>{Jb[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Jb.deleteProperty=function(t,e){return Jb.set.call(this,t,e,void 0)};Jb.set=function(t,e,n){return A5.set.call(this,t[0],e,n,t[0])};function sR(t,e){const n=t[Ba];return(n?ep(n):t)[e]}function Net(t,e,n){var i;const r=$ne(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function $ne(t,e){if(!(e in t))return;let n=n0(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=n0(n)}}function $F(t){t.modified_||(t.modified_=!0,t.parent_&&$F(t.parent_))}function aR(t){t.copy_||(t.copy_=zF(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Let=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const o=n;n=e;const s=this;return function(l=o,...c){return s.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&nc(6),r!==void 0&&typeof r!="function"&&nc(7);let i;if(am(e)){const o=s$(this),s=HF(e,void 0);let a=!0;try{i=n(s),a=!1}finally{a?VF(o):WF(o)}return o$(o,r),a$(i,o)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===Une&&(i=void 0),this.autoFreeze_&&C5(i,!0),r){const o=[],s=[];lm("Patches").generateReplacementPatches_(e,i,o,s),r(o,s)}return i}else nc(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...a)=>this.produceWithPatches(s,l=>e(l,...a));let r,i;return[this.produce(e,n,(s,a)=>{r=s,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){am(t)||nc(8),sm(t)&&(t=Bet(t));const e=s$(this),n=HF(t,void 0);return n[Ba].isManual_=!0,WF(e),n}finishDraft(t,e){const n=t&&t[Ba];(!n||!n.isManual_)&&nc(9);const{scope_:r}=n;return o$(r,e),a$(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=lm("Patches").applyPatches_;return sm(t)?r(t,e):this.produce(t,i=>r(i,e))}};function HF(t,e){const n=x2(t)?lm("MapSet").proxyMap_(t,e):b2(t)?lm("MapSet").proxySet_(t,e):Oet(t,e);return(e?e.scope_:Wne()).drafts_.push(n),n}function Bet(t){return sm(t)||nc(10,t),Hne(t)}function Hne(t){if(!am(t)||w2(t))return t;const e=t[Ba];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=zF(t,e.scope_.immer_.useStrictShallowCopy_)}else n=zF(t,!0);return pA(n,(r,i)=>{Vne(n,r,Hne(i))}),e&&(e.finalized_=!1),n}var ja=new Let,T5=ja.produce;ja.produceWithPatches.bind(ja);ja.setAutoFreeze.bind(ja);ja.setUseStrictShallowCopy.bind(ja);ja.applyPatches.bind(ja);var c$=ja.createDraft.bind(ja),u$=ja.finishDraft.bind(ja),jet={transform(t,e){var{current:n,affinity:r}=t;if(n!=null){var i=$e.transform(n,e,{affinity:r});t.current=i,i==null&&t.unref()}}},Uet={transform(t,e){var{current:n,affinity:r}=t;if(n!=null){var i=cr.transform(n,e,{affinity:r});t.current=i,i==null&&t.unref()}}},zet={transform(t,e){var{current:n,affinity:r}=t;if(n!=null){var i=ut.transform(n,e,{affinity:r});t.current=i,i==null&&t.unref()}}},vA=new WeakMap,yA=new WeakMap,Ux=new WeakMap,Gne=new WeakMap,d$=new WeakMap,f$=new WeakMap,h$=new WeakMap,$e={ancestors(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=e,r=$e.levels(t,e);return n?r=r.slice(1):r=r.slice(0,-1),r},common(t,e){for(var n=[],r=0;r<t.length&&r<e.length;r++){var i=t[r],o=e[r];if(i!==o)break;n.push(i)}return n},compare(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return 0},endsAfter(t,e){var n=t.length-1,r=t.slice(0,n),i=e.slice(0,n),o=t[n],s=e[n];return $e.equals(r,i)&&o>s},endsAt(t,e){var n=t.length,r=t.slice(0,n),i=e.slice(0,n);return $e.equals(r,i)},endsBefore(t,e){var n=t.length-1,r=t.slice(0,n),i=e.slice(0,n),o=t[n],s=e[n];return $e.equals(r,i)&&o<s},equals(t,e){return t.length===e.length&&t.every((n,r)=>n===e[r])},hasPrevious(t){return t[t.length-1]>0},isAfter(t,e){return $e.compare(t,e)===1},isAncestor(t,e){return t.length<e.length&&$e.compare(t,e)===0},isBefore(t,e){return $e.compare(t,e)===-1},isChild(t,e){return t.length===e.length+1&&$e.compare(t,e)===0},isCommon(t,e){return t.length<=e.length&&$e.compare(t,e)===0},isDescendant(t,e){return t.length>e.length&&$e.compare(t,e)===0},isParent(t,e){return t.length+1===e.length&&$e.compare(t,e)===0},isPath(t){return Array.isArray(t)&&(t.length===0||typeof t[0]=="number")},isSibling(t,e){if(t.length!==e.length)return!1;var n=t.slice(0,-1),r=e.slice(0,-1),i=t[t.length-1],o=e[e.length-1];return i!==o&&$e.equals(n,r)},levels(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=e,r=[],i=0;i<=t.length;i++)r.push(t.slice(0,i));return n&&r.reverse(),r},next(t){if(t.length===0)throw new Error("Cannot get the next path of a root path [".concat(t,"], because it has no next index."));var e=t[t.length-1];return t.slice(0,-1).concat(e+1)},operationCanTransformPath(t){switch(t.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(t){if(t.length===0)throw new Error("Cannot get the parent path of the root path [".concat(t,"]."));return t.slice(0,-1)},previous(t){if(t.length===0)throw new Error("Cannot get the previous path of a root path [".concat(t,"], because it has no previous index."));var e=t[t.length-1];if(e<=0)throw new Error("Cannot get the previous path of a first child path [".concat(t,"] because it would result in a negative index."));return t.slice(0,-1).concat(e-1)},relative(t,e){if(!$e.isAncestor(e,t)&&!$e.equals(t,e))throw new Error("Cannot get the relative path of [".concat(t,"] inside ancestor [").concat(e,"], because it is not above or equal to the path."));return t.slice(e.length)},transform(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return null;var r=[...t],{affinity:i="forward"}=n;if(t.length===0)return r;switch(e.type){case"insert_node":{var{path:o}=e;($e.equals(o,r)||$e.endsBefore(o,r)||$e.isAncestor(o,r))&&(r[o.length-1]+=1);break}case"remove_node":{var{path:s}=e;if($e.equals(s,r)||$e.isAncestor(s,r))return null;$e.endsBefore(s,r)&&(r[s.length-1]-=1);break}case"merge_node":{var{path:a,position:l}=e;$e.equals(a,r)||$e.endsBefore(a,r)?r[a.length-1]-=1:$e.isAncestor(a,r)&&(r[a.length-1]-=1,r[a.length]+=l);break}case"split_node":{var{path:c,position:u}=e;if($e.equals(c,r)){if(i==="forward")r[r.length-1]+=1;else if(i!=="backward")return null}else $e.endsBefore(c,r)?r[c.length-1]+=1:$e.isAncestor(c,r)&&t[c.length]>=u&&(r[c.length-1]+=1,r[c.length]-=u);break}case"move_node":{var{path:d,newPath:f}=e;if($e.equals(d,f))return r;if($e.isAncestor(d,r)||$e.equals(d,r)){var p=f.slice();return $e.endsBefore(d,f)&&d.length<f.length&&(p[d.length-1]-=1),p.concat(r.slice(d.length))}else $e.isSibling(d,f)&&($e.isAncestor(f,r)||$e.equals(f,r))?$e.endsBefore(d,r)?r[d.length-1]-=1:r[d.length-1]+=1:$e.endsBefore(f,r)||$e.equals(f,r)||$e.isAncestor(f,r)?($e.endsBefore(d,r)&&(r[d.length-1]-=1),r[f.length-1]+=1):$e.endsBefore(d,r)&&($e.equals(f,r)&&(r[f.length-1]+=1),r[d.length-1]-=1);break}}return r}};function ew(t){"@babel/helpers - typeof";return ew=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ew(t)}function Vet(t,e){if(ew(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ew(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wet(t){var e=Vet(t,"string");return ew(e)==="symbol"?e:String(e)}function zs(t,e,n){return e=Wet(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ey(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p$(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var $et=(t,e,n)=>{switch(n.type){case"insert_node":{var{path:r,node:i}=n,o=zt.parent(t,r),s=r[r.length-1];if(s>o.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(r,"] because the destination is past the end of the node."));if(o.children.splice(s,0,i),e)for(var[a,l]of ut.points(e))e[l]=cr.transform(a,n);break}case"insert_text":{var{path:c,offset:u,text:d}=n;if(d.length===0)break;var f=zt.leaf(t,c),p=f.text.slice(0,u),b=f.text.slice(u);if(f.text=p+d+b,e)for(var[v,m]of ut.points(e))e[m]=cr.transform(v,n);break}case"merge_node":{var{path:g}=n,x=zt.get(t,g),w=$e.previous(g),S=zt.get(t,w),D=zt.parent(t,g),k=g[g.length-1];if(Xt.isText(x)&&Xt.isText(S))S.text+=x.text;else if(!Xt.isText(x)&&!Xt.isText(S))S.children.push(...x.children);else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(g,"] to nodes of different interfaces: ").concat(Io.stringify(x)," ").concat(Io.stringify(S)));if(D.children.splice(k,1),e)for(var[P,M]of ut.points(e))e[M]=cr.transform(P,n);break}case"move_node":{var{path:T,newPath:_}=n;if($e.isAncestor(T,_))throw new Error("Cannot move a path [".concat(T,"] to new path [").concat(_,"] because the destination is inside itself."));var E=zt.get(t,T),R=zt.parent(t,T),F=T[T.length-1];R.children.splice(F,1);var L=$e.transform(T,n),N=zt.get(t,$e.parent(L)),U=L[L.length-1];if(N.children.splice(U,0,E),e)for(var[H,j]of ut.points(e))e[j]=cr.transform(H,n);break}case"remove_node":{var{path:z}=n,q=z[z.length-1],$=zt.parent(t,z);if($.children.splice(q,1),e)for(var[K,G]of ut.points(e)){var Y=cr.transform(K,n);if(e!=null&&Y!=null)e[G]=Y;else{var J=void 0,V=void 0;for(var[re,fe]of zt.texts(t))if($e.compare(fe,z)===-1)J=[re,fe];else{V=[re,fe];break}var pe=!1;J&&V&&($e.equals(V[1],z)?pe=!$e.hasPrevious(V[1]):pe=$e.common(J[1],z).length<$e.common(V[1],z).length),J&&!pe?(K.path=J[1],K.offset=J[0].text.length):V?(K.path=V[1],K.offset=0):e=null}}break}case"remove_text":{var{path:ce,offset:xe,text:Ae}=n;if(Ae.length===0)break;var Ee=zt.leaf(t,ce),ee=Ee.text.slice(0,xe),Oe=Ee.text.slice(xe+Ae.length);if(Ee.text=ee+Oe,e)for(var[le,me]of ut.points(e))e[me]=cr.transform(le,n);break}case"set_node":{var{path:ne,properties:se,newProperties:ge}=n;if(ne.length===0)throw new Error("Cannot set properties on the root node!");var Q=zt.get(t,ne);for(var W in ge){if(W==="children"||W==="text")throw new Error('Cannot set the "'.concat(W,'" property of nodes!'));var ve=ge[W];ve==null?delete Q[W]:Q[W]=ve}for(var ue in se)ge.hasOwnProperty(ue)||delete Q[ue];break}case"set_selection":{var{newProperties:Me}=n;if(Me==null)e=Me;else{if(e==null){if(!ut.isRange(Me))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(Io.stringify(Me)," when there is no current selection."));e=Ey({},Me)}for(var Pe in Me){var je=Me[Pe];if(je==null){if(Pe==="anchor"||Pe==="focus")throw new Error('Cannot remove the "'.concat(Pe,'" selection property'));delete e[Pe]}else e[Pe]=je}}break}case"split_node":{var{path:ke,position:De,properties:nt}=n;if(ke.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(ke,"] because the root node cannot be split."));var be=zt.get(t,ke),Ne=zt.parent(t,ke),Ie=ke[ke.length-1],Ve;if(Xt.isText(be)){var Ue=be.text.slice(0,De),tt=be.text.slice(De);be.text=Ue,Ve=Ey(Ey({},nt),{},{text:tt})}else{var st=be.children.slice(0,De),vt=be.children.slice(De);be.children=st,Ve=Ey(Ey({},nt),{},{children:vt})}if(Ne.children.splice(Ie+1,0,Ve),e)for(var[Fe,ct]of ut.points(e))e[ct]=cr.transform(Fe,n);break}}return e},Het={transform(t,e){t.children=c$(t.children);var n=t.selection&&c$(t.selection);try{n=$et(t,n,e)}finally{t.children=u$(t.children),n?t.selection=sm(n)?u$(n):n:t.selection=null}}},Get={insertNodes(t,e,n){t.insertNodes(e,n)},liftNodes(t,e){t.liftNodes(e)},mergeNodes(t,e){t.mergeNodes(e)},moveNodes(t,e){t.moveNodes(e)},removeNodes(t,e){t.removeNodes(e)},setNodes(t,e,n){t.setNodes(e,n)},splitNodes(t,e){t.splitNodes(e)},unsetNodes(t,e,n){t.unsetNodes(e,n)},unwrapNodes(t,e){t.unwrapNodes(e)},wrapNodes(t,e,n){t.wrapNodes(e,n)}},qet={collapse(t,e){t.collapse(e)},deselect(t){t.deselect()},move(t,e){t.move(e)},select(t,e){t.select(e)},setPoint(t,e,n){t.setPoint(e,n)},setSelection(t,e){t.setSelection(e)}},qne=(t,e)=>{for(var n in t){var r=t[n],i=e[n];if(Vo(r)&&Vo(i)){if(!qne(r,i))return!1}else if(Array.isArray(r)&&Array.isArray(i)){if(r.length!==i.length)return!1;for(var o=0;o<r.length;o++)if(r[o]!==i[o])return!1}else if(r!==i)return!1}for(var s in e)if(t[s]===void 0&&e[s]!==void 0)return!1;return!0};function Ket(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Td(t,e){if(t==null)return{};var n=Ket(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var Yet=["anchor","focus"];function m$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xet(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m$(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var ut={edges(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=e,{anchor:r,focus:i}=t;return ut.isBackward(t)===n?[r,i]:[i,r]},end(t){var[,e]=ut.edges(t);return e},equals(t,e){return cr.equals(t.anchor,e.anchor)&&cr.equals(t.focus,e.focus)},surrounds(t,e){var n=ut.intersection(t,e);return n?ut.equals(n,e):!1},includes(t,e){if(ut.isRange(e)){if(ut.includes(t,e.anchor)||ut.includes(t,e.focus))return!0;var[n,r]=ut.edges(t),[i,o]=ut.edges(e);return cr.isBefore(n,i)&&cr.isAfter(r,o)}var[s,a]=ut.edges(t),l=!1,c=!1;return cr.isPoint(e)?(l=cr.compare(e,s)>=0,c=cr.compare(e,a)<=0):(l=$e.compare(e,s.path)>=0,c=$e.compare(e,a.path)<=0),l&&c},intersection(t,e){var n=Td(t,Yet),[r,i]=ut.edges(t),[o,s]=ut.edges(e),a=cr.isBefore(r,o)?o:r,l=cr.isBefore(i,s)?i:s;return cr.isBefore(l,a)?null:Xet({anchor:a,focus:l},n)},isBackward(t){var{anchor:e,focus:n}=t;return cr.isAfter(e,n)},isCollapsed(t){var{anchor:e,focus:n}=t;return cr.equals(e,n)},isExpanded(t){return!ut.isCollapsed(t)},isForward(t){return!ut.isBackward(t)},isRange(t){return Vo(t)&&cr.isPoint(t.anchor)&&cr.isPoint(t.focus)},*points(t){yield[t.anchor,"anchor"],yield[t.focus,"focus"]},start(t){var[e]=ut.edges(t);return e},transform(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return T5(t,r=>{if(r===null)return null;var{affinity:i="inward"}=n,o,s;if(i==="inward"){var a=ut.isCollapsed(r);ut.isForward(r)?(o="forward",s=a?o:"backward"):(o="backward",s=a?o:"forward")}else i==="outward"?ut.isForward(r)?(o="backward",s="forward"):(o="forward",s="backward"):(o=i,s=i);var l=cr.transform(r.anchor,e,{affinity:o}),c=cr.transform(r.focus,e,{affinity:s});if(!l||!c)return null;r.anchor=l,r.focus=c})}},g$=t=>Vo(t)&&zt.isNodeList(t.children)&&!he.isEditor(t),on={isAncestor(t){return Vo(t)&&zt.isNodeList(t.children)},isElement:g$,isElementList(t){return Array.isArray(t)&&t.every(e=>on.isElement(e))},isElementProps(t){return t.children!==void 0},isElementType:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return g$(e)&&e[r]===n},matches(t,e){for(var n in e)if(n!=="children"&&t[n]!==e[n])return!1;return!0}},Qet=["children"],Zet=["text"],v$=new WeakMap,zt={ancestor(t,e){var n=zt.get(t,e);if(Xt.isText(n))throw new Error("Cannot get the ancestor node at path [".concat(e,"] because it refers to a text node instead: ").concat(Io.stringify(n)));return n},ancestors(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var r of $e.ancestors(e,n)){var i=zt.ancestor(t,r),o=[i,r];yield o}}()},child(t,e){if(Xt.isText(t))throw new Error("Cannot get the child of a text node: ".concat(Io.stringify(t)));var n=t.children[e];if(n==null)throw new Error("Cannot get child at index `".concat(e,"` in node: ").concat(Io.stringify(t)));return n},children(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var{reverse:r=!1}=n,i=zt.ancestor(t,e),{children:o}=i,s=r?o.length-1:0;r?s>=0:s<o.length;){var a=zt.child(i,s),l=e.concat(s);yield[a,l],s=r?s-1:s+1}}()},common(t,e,n){var r=$e.common(e,n),i=zt.get(t,r);return[i,r]},descendant(t,e){var n=zt.get(t,e);if(he.isEditor(n))throw new Error("Cannot get the descendant node at path [".concat(e,"] because it refers to the root editor node instead: ").concat(Io.stringify(n)));return n},descendants(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[n,r]of zt.nodes(t,e))r.length!==0&&(yield[n,r])}()},elements(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[n,r]of zt.nodes(t,e))on.isElement(n)&&(yield[n,r])}()},extractProps(t){if(on.isAncestor(t)){var e=Td(t,Qet);return e}else{var e=Td(t,Zet);return e}},first(t,e){for(var n=e.slice(),r=zt.get(t,n);r&&!(Xt.isText(r)||r.children.length===0);)r=r.children[0],n.push(0);return[r,n]},fragment(t,e){if(Xt.isText(t))throw new Error("Cannot get a fragment starting from a root text node: ".concat(Io.stringify(t)));var n=T5({children:t.children},r=>{var[i,o]=ut.edges(e),s=zt.nodes(r,{reverse:!0,pass:f=>{var[,p]=f;return!ut.includes(e,p)}});for(var[,a]of s){if(!ut.includes(e,a)){var l=zt.parent(r,a),c=a[a.length-1];l.children.splice(c,1)}if($e.equals(a,o.path)){var u=zt.leaf(r,a);u.text=u.text.slice(0,o.offset)}if($e.equals(a,i.path)){var d=zt.leaf(r,a);d.text=d.text.slice(i.offset)}}he.isEditor(r)&&(r.selection=null)});return n.children},get(t,e){var n=zt.getIf(t,e);if(n===void 0)throw new Error("Cannot find a descendant at path [".concat(e,"] in node: ").concat(Io.stringify(t)));return n},getIf(t,e){for(var n=t,r=0;r<e.length;r++){var i=e[r];if(Xt.isText(n)||!n.children[i])return;n=n.children[i]}return n},has(t,e){for(var n=t,r=0;r<e.length;r++){var i=e[r];if(Xt.isText(n)||!n.children[i])return!1;n=n.children[i]}return!0},isNode(t){return Xt.isText(t)||on.isElement(t)||he.isEditor(t)},isNodeList(t){if(!Array.isArray(t))return!1;var e=v$.get(t);if(e!==void 0)return e;var n=t.every(r=>zt.isNode(r));return v$.set(t,n),n},last(t,e){for(var n=e.slice(),r=zt.get(t,n);r&&!(Xt.isText(r)||r.children.length===0);){var i=r.children.length-1;r=r.children[i],n.push(i)}return[r,n]},leaf(t,e){var n=zt.get(t,e);if(!Xt.isText(n))throw new Error("Cannot get the leaf node at path [".concat(e,"] because it refers to a non-leaf node: ").concat(Io.stringify(n)));return n},levels(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var r of $e.levels(e,n)){var i=zt.get(t,r);yield[i,r]}}()},matches(t,e){return on.isElement(t)&&on.isElementProps(e)&&on.matches(t,e)||Xt.isText(t)&&Xt.isTextProps(e)&&Xt.matches(t,e)},nodes(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var{pass:n,reverse:r=!1}=e,{from:i=[],to:o}=e,s=new Set,a=[],l=t;!(o&&(r?$e.isBefore(a,o):$e.isAfter(a,o)));){if(s.has(l)||(yield[l,a]),!s.has(l)&&!Xt.isText(l)&&l.children.length!==0&&(n==null||n([l,a])===!1)){s.add(l);var c=r?l.children.length-1:0;$e.isAncestor(a,i)&&(c=i[a.length]),a=a.concat(c),l=zt.get(t,a);continue}if(a.length===0)break;if(!r){var u=$e.next(a);if(zt.has(t,u)){a=u,l=zt.get(t,a);continue}}if(r&&a[a.length-1]!==0){var d=$e.previous(a);a=d,l=zt.get(t,a);continue}a=$e.parent(a),l=zt.get(t,a),s.add(l)}}()},parent(t,e){var n=$e.parent(e),r=zt.get(t,n);if(Xt.isText(r))throw new Error("Cannot get the parent of path [".concat(e,"] because it does not exist in the root."));return r},string(t){return Xt.isText(t)?t.text:t.children.map(zt.string).join("")},texts(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[n,r]of zt.nodes(t,e))Xt.isText(n)&&(yield[n,r])}()}};function y$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ei(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y$(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Df={isNodeOperation(t){return Df.isOperation(t)&&t.type.endsWith("_node")},isOperation(t){if(!Vo(t))return!1;switch(t.type){case"insert_node":return $e.isPath(t.path)&&zt.isNode(t.node);case"insert_text":return typeof t.offset=="number"&&typeof t.text=="string"&&$e.isPath(t.path);case"merge_node":return typeof t.position=="number"&&$e.isPath(t.path)&&Vo(t.properties);case"move_node":return $e.isPath(t.path)&&$e.isPath(t.newPath);case"remove_node":return $e.isPath(t.path)&&zt.isNode(t.node);case"remove_text":return typeof t.offset=="number"&&typeof t.text=="string"&&$e.isPath(t.path);case"set_node":return $e.isPath(t.path)&&Vo(t.properties)&&Vo(t.newProperties);case"set_selection":return t.properties===null&&ut.isRange(t.newProperties)||t.newProperties===null&&ut.isRange(t.properties)||Vo(t.properties)&&Vo(t.newProperties);case"split_node":return $e.isPath(t.path)&&typeof t.position=="number"&&Vo(t.properties);default:return!1}},isOperationList(t){return Array.isArray(t)&&t.every(e=>Df.isOperation(e))},isSelectionOperation(t){return Df.isOperation(t)&&t.type.endsWith("_selection")},isTextOperation(t){return Df.isOperation(t)&&t.type.endsWith("_text")},inverse(t){switch(t.type){case"insert_node":return Ei(Ei({},t),{},{type:"remove_node"});case"insert_text":return Ei(Ei({},t),{},{type:"remove_text"});case"merge_node":return Ei(Ei({},t),{},{type:"split_node",path:$e.previous(t.path)});case"move_node":{var{newPath:e,path:n}=t;if($e.equals(e,n))return t;if($e.isSibling(n,e))return Ei(Ei({},t),{},{path:e,newPath:n});var r=$e.transform(n,t),i=$e.transform($e.next(n),t);return Ei(Ei({},t),{},{path:r,newPath:i})}case"remove_node":return Ei(Ei({},t),{},{type:"insert_node"});case"remove_text":return Ei(Ei({},t),{},{type:"insert_text"});case"set_node":{var{properties:o,newProperties:s}=t;return Ei(Ei({},t),{},{properties:s,newProperties:o})}case"set_selection":{var{properties:a,newProperties:l}=t;return a==null?Ei(Ei({},t),{},{properties:l,newProperties:null}):l==null?Ei(Ei({},t),{},{properties:null,newProperties:a}):Ei(Ei({},t),{},{properties:l,newProperties:a})}case"split_node":return Ei(Ei({},t),{},{type:"merge_node",path:$e.next(t.path)})}}},x$=new WeakMap,Jet=t=>{var e=x$.get(t);if(e!==void 0)return e;if(!Vo(t))return!1;var n=typeof t.addMark=="function"&&typeof t.apply=="function"&&typeof t.deleteFragment=="function"&&typeof t.insertBreak=="function"&&typeof t.insertSoftBreak=="function"&&typeof t.insertFragment=="function"&&typeof t.insertNode=="function"&&typeof t.insertText=="function"&&typeof t.isElementReadOnly=="function"&&typeof t.isInline=="function"&&typeof t.isSelectable=="function"&&typeof t.isVoid=="function"&&typeof t.normalizeNode=="function"&&typeof t.onChange=="function"&&typeof t.removeMark=="function"&&typeof t.getDirtyPaths=="function"&&(t.marks===null||Vo(t.marks))&&(t.selection===null||ut.isRange(t.selection))&&zt.isNodeList(t.children)&&Df.isOperationList(t.operations);return x$.set(t,n),n},he={above(t,e){return t.above(e)},addMark(t,e,n){t.addMark(e,n)},after(t,e,n){return t.after(e,n)},before(t,e,n){return t.before(e,n)},deleteBackward(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:n="character"}=e;t.deleteBackward(n)},deleteForward(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:n="character"}=e;t.deleteForward(n)},deleteFragment(t,e){t.deleteFragment(e)},edges(t,e){return t.edges(e)},elementReadOnly(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.elementReadOnly(e)},end(t,e){return t.end(e)},first(t,e){return t.first(e)},fragment(t,e){return t.fragment(e)},hasBlocks(t,e){return t.hasBlocks(e)},hasInlines(t,e){return t.hasInlines(e)},hasPath(t,e){return t.hasPath(e)},hasTexts(t,e){return t.hasTexts(e)},insertBreak(t){t.insertBreak()},insertFragment(t,e,n){t.insertFragment(e,n)},insertNode(t,e){t.insertNode(e)},insertSoftBreak(t){t.insertSoftBreak()},insertText(t,e){t.insertText(e)},isBlock(t,e){return t.isBlock(e)},isEdge(t,e,n){return t.isEdge(e,n)},isEditor(t){return Jet(t)},isElementReadOnly(t,e){return t.isElementReadOnly(e)},isEmpty(t,e){return t.isEmpty(e)},isEnd(t,e,n){return t.isEnd(e,n)},isInline(t,e){return t.isInline(e)},isNormalizing(t){return t.isNormalizing()},isSelectable(t,e){return t.isSelectable(e)},isStart(t,e,n){return t.isStart(e,n)},isVoid(t,e){return t.isVoid(e)},last(t,e){return t.last(e)},leaf(t,e,n){return t.leaf(e,n)},levels(t,e){return t.levels(e)},marks(t){return t.getMarks()},next(t,e){return t.next(e)},node(t,e,n){return t.node(e,n)},nodes(t,e){return t.nodes(e)},normalize(t,e){t.normalize(e)},parent(t,e,n){return t.parent(e,n)},path(t,e,n){return t.path(e,n)},pathRef(t,e,n){return t.pathRef(e,n)},pathRefs(t){return t.pathRefs()},point(t,e,n){return t.point(e,n)},pointRef(t,e,n){return t.pointRef(e,n)},pointRefs(t){return t.pointRefs()},positions(t,e){return t.positions(e)},previous(t,e){return t.previous(e)},range(t,e,n){return t.range(e,n)},rangeRef(t,e,n){return t.rangeRef(e,n)},rangeRefs(t){return t.rangeRefs()},removeMark(t,e){t.removeMark(e)},setNormalizing(t,e){t.setNormalizing(e)},start(t,e){return t.start(e)},string(t,e,n){return t.string(e,n)},unhangRange(t,e,n){return t.unhangRange(e,n)},void(t,e){return t.void(e)},withoutNormalizing(t,e){t.withoutNormalizing(e)},shouldMergeNodesRemovePrevNode:(t,e,n)=>t.shouldMergeNodesRemovePrevNode(e,n)},ett={isSpan(t){return Array.isArray(t)&&t.length===2&&t.every($e.isPath)}};function b$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function w$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b$(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var cr={compare(t,e){var n=$e.compare(t.path,e.path);return n===0?t.offset<e.offset?-1:t.offset>e.offset?1:0:n},isAfter(t,e){return cr.compare(t,e)===1},isBefore(t,e){return cr.compare(t,e)===-1},equals(t,e){return t.offset===e.offset&&$e.equals(t.path,e.path)},isPoint(t){return Vo(t)&&typeof t.offset=="number"&&$e.isPath(t.path)},transform(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return T5(t,r=>{if(r===null)return null;var{affinity:i="forward"}=n,{path:o,offset:s}=r;switch(e.type){case"insert_node":case"move_node":{r.path=$e.transform(o,e,n);break}case"insert_text":{$e.equals(e.path,o)&&(e.offset<s||e.offset===s&&i==="forward")&&(r.offset+=e.text.length);break}case"merge_node":{$e.equals(e.path,o)&&(r.offset+=e.position),r.path=$e.transform(o,e,n);break}case"remove_text":{$e.equals(e.path,o)&&e.offset<=s&&(r.offset-=Math.min(s-e.offset,e.text.length));break}case"remove_node":{if($e.equals(e.path,o)||$e.isAncestor(e.path,o))return null;r.path=$e.transform(o,e,n);break}case"split_node":{if($e.equals(e.path,o)){if(e.position===s&&i==null)return null;(e.position<s||e.position===s&&i==="forward")&&(r.offset-=e.position,r.path=$e.transform(o,e,w$(w$({},n),{},{affinity:"forward"})))}else r.path=$e.transform(o,e,n);break}}})}},S$=void 0,Io={setScrubber(t){S$=t},stringify(t){return JSON.stringify(t,S$)}},ttt=["text"],ntt=["anchor","focus","merge"];function _$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_$(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Xt={equals(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:r=!1}=n;function i(o){var s=Td(o,ttt);return s}return qne(r?i(t):t,r?i(e):e)},isText(t){return Vo(t)&&typeof t.text=="string"},isTextList(t){return Array.isArray(t)&&t.every(e=>Xt.isText(e))},isTextProps(t){return t.text!==void 0},matches(t,e){for(var n in e)if(n!=="text"&&(!t.hasOwnProperty(n)||t[n]!==e[n]))return!1;return!0},decorations(t,e){var n=[Nu({},t)];for(var r of e){var{anchor:i,focus:o,merge:s}=r,a=Td(r,ntt),[l,c]=ut.edges(r),u=[],d=0,f=l.offset,p=c.offset,b=s!=null?s:Object.assign;for(var v of n){var{length:m}=v.text,g=d;if(d+=m,f<=g&&d<=p){b(v,a),u.push(v);continue}if(f!==p&&(f===d||p===g)||f>d||p<g||p===g&&g!==0){u.push(v);continue}var x=v,w=void 0,S=void 0;if(p<d){var D=p-g;S=Nu(Nu({},x),{},{text:x.text.slice(D)}),x=Nu(Nu({},x),{},{text:x.text.slice(0,D)})}if(f>g){var k=f-g;w=Nu(Nu({},x),{},{text:x.text.slice(0,k)}),x=Nu(Nu({},x),{},{text:x.text.slice(k)})}b(x,a),w&&u.push(w),u.push(x),S&&u.push(S)}n=u}return n}},M5=t=>t.selection?t.selection:t.children.length>0?he.end(t,[]):[0],M0=(t,e)=>{var[n]=he.node(t,e);return r=>r===n},P5=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=!n,i=n?ltt(e):e,o=qn.None,s=qn.None,a=0,l=null,c=null;for(var u of i){var d=u.codePointAt(0);if(!d)break;var f=btt(u,d);if([o,s]=r?[s,f]:[f,o],$g(o,qn.ZWJ)&&$g(s,qn.ExtPict)&&(r?l=E$(e.substring(0,a)):l=E$(e.substring(0,e.length-a)),!l)||$g(o,qn.RI)&&$g(s,qn.RI)&&(c!==null?c=!c:r?c=!0:c=Ctt(e.substring(0,e.length-a)),!c)||o!==qn.None&&s!==qn.None&&Stt(o,s))break;a+=u.length}return a||1},rtt=/\s/,itt=/[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,ott=/['\u2018\u2019]/,stt=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=0,i=!1;e.length>0;){var o=P5(e,n),[s,a]=D5(e,o,n);if(att(s,a,n))i=!0,r+=o;else if(!i)r+=o;else break;e=a}return r},D5=(t,e,n)=>{if(n){var r=t.length-e;return[t.slice(r,t.length),t.slice(0,r)]}return[t.slice(0,e),t.slice(e)]},att=function t(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(rtt.test(e))return!1;if(ott.test(e)){var i=P5(n,r),[o,s]=D5(n,i,r);if(t(o,s,r))return!0}return!itt.test(e)},ltt=function*(e){for(var n=e.length-1,r=0;r<e.length;r++){var i=e.charAt(n-r);if(utt(i.charCodeAt(0))){var o=e.charAt(n-r-1);if(ctt(o.charCodeAt(0))){yield o+i,r++;continue}}yield i}},ctt=t=>t>=55296&&t<=56319,utt=t=>t>=56320&&t<=57343,qn;(function(t){t[t.None=0]="None",t[t.Extend=1]="Extend",t[t.ZWJ=2]="ZWJ",t[t.RI=4]="RI",t[t.Prepend=8]="Prepend",t[t.SpacingMark=16]="SpacingMark",t[t.L=32]="L",t[t.V=64]="V",t[t.T=128]="T",t[t.LV=256]="LV",t[t.LVT=512]="LVT",t[t.ExtPict=1024]="ExtPict",t[t.Any=2048]="Any"})(qn||(qn={}));var dtt=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,ftt=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,htt=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,ptt=/^[\u1100-\u115F\uA960-\uA97C]$/,mtt=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,gtt=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,vtt=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,ytt=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,xtt=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,btt=(t,e)=>{var n=qn.Any;return t.search(dtt)!==-1&&(n|=qn.Extend),e===8205&&(n|=qn.ZWJ),e>=127462&&e<=127487&&(n|=qn.RI),t.search(ftt)!==-1&&(n|=qn.Prepend),t.search(htt)!==-1&&(n|=qn.SpacingMark),t.search(ptt)!==-1&&(n|=qn.L),t.search(mtt)!==-1&&(n|=qn.V),t.search(gtt)!==-1&&(n|=qn.T),t.search(vtt)!==-1&&(n|=qn.LV),t.search(ytt)!==-1&&(n|=qn.LVT),t.search(xtt)!==-1&&(n|=qn.ExtPict),n};function $g(t,e){return(t&e)!==0}var wtt=[[qn.L,qn.L|qn.V|qn.LV|qn.LVT],[qn.LV|qn.V,qn.V|qn.T],[qn.LVT|qn.T,qn.T],[qn.Any,qn.Extend|qn.ZWJ],[qn.Any,qn.SpacingMark],[qn.Prepend,qn.Any],[qn.ZWJ,qn.ExtPict],[qn.RI,qn.RI]];function Stt(t,e){return wtt.findIndex(n=>$g(t,n[0])&&$g(e,n[1]))===-1}var _tt=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,E$=t=>t.search(_tt)!==-1,Ett=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,Ctt=t=>{var e=t.match(Ett);if(e===null)return!1;var n=e[0].length/2;return n%2===1},Att={delete(t,e){t.delete(e)},insertFragment(t,e,n){t.insertFragment(e,n)},insertText(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};he.withoutNormalizing(t,()=>{var{voids:r=!1}=n,{at:i=M5(t)}=n;if($e.isPath(i)&&(i=he.range(t,i)),ut.isRange(i))if(ut.isCollapsed(i))i=i.anchor;else{var o=ut.end(i);if(!r&&he.void(t,{at:o}))return;var s=ut.start(i),a=he.pointRef(t,s),l=he.pointRef(t,o);Pt.delete(t,{at:i,voids:r});var c=a.unref(),u=l.unref();i=c||u,Pt.setSelection(t,{anchor:i,focus:i})}if(!(!r&&he.void(t,{at:i})||he.elementReadOnly(t,{at:i}))){var{path:d,offset:f}=i;e.length>0&&t.apply({type:"insert_text",path:d,offset:f,text:e})}})}};function C$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function b_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C$(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Pt=b_(b_(b_(b_({},Het),Get),qet),Att),RE=new WeakMap,Ttt=t=>RE.get(t)||!1,Mtt=(t,e,n)=>{var r=RE.get(t)||!1;RE.set(t,!0);try{e(),n()}finally{RE.set(t,r)}};function Kne(t,e,n){var r=vA.get(t)||[],i=yA.get(t)||new Set,o,s,a=d=>{if(d){var f=d.join(",");s.has(f)||(s.add(f),o.push(d))}};if(n){o=[],s=new Set;for(var l of r){var c=n(l);a(c)}}else o=r,s=i;for(var u of e)a(u);vA.set(t,o),yA.set(t,s)}var Ptt=(t,e)=>{for(var n of he.pathRefs(t))jet.transform(n,e);for(var r of he.pointRefs(t))Uet.transform(r,e);for(var i of he.rangeRefs(t))zet.transform(i,e);if(!Ttt(t)){var o=$e.operationCanTransformPath(e)?s=>$e.transform(s,e):void 0;Kne(t,t.getDirtyPaths(e),o)}Pt.transform(t,e),t.operations.push(e),he.normalize(t,{operation:e}),e.type==="set_selection"&&(t.marks=null),Ux.get(t)||(Ux.set(t,!0),Promise.resolve().then(()=>{Ux.set(t,!1),t.onChange({operation:e}),t.operations=[]}))},Dtt=(t,e)=>{switch(e.type){case"insert_text":case"remove_text":case"set_node":{var{path:n}=e;return $e.levels(n)}case"insert_node":{var{node:r,path:i}=e,o=$e.levels(i),s=Xt.isText(r)?[]:Array.from(zt.nodes(r),_=>{var[,E]=_;return i.concat(E)});return[...o,...s]}case"merge_node":{var{path:a}=e,l=$e.ancestors(a),c=$e.previous(a);return[...l,c]}case"move_node":{var{path:u,newPath:d}=e;if($e.equals(u,d))return[];var f=[],p=[];for(var b of $e.ancestors(u)){var v=$e.transform(b,e);f.push(v)}for(var m of $e.ancestors(d)){var g=$e.transform(m,e);p.push(g)}var x=p[p.length-1],w=d[d.length-1],S=x.concat(w);return[...f,...p,S]}case"remove_node":{var{path:D}=e,k=$e.ancestors(D);return[...k]}case"split_node":{var{path:P}=e,M=$e.levels(P),T=$e.next(P);return[...M,T]}default:return[]}},Rtt=t=>{var{selection:e}=t;return e?zt.fragment(t,e):[]},ktt=(t,e)=>{var[n,r]=e;if(!Xt.isText(n)){if(on.isElement(n)&&n.children.length===0){var i={text:""};Pt.insertNodes(t,i,{at:r.concat(0),voids:!0});return}for(var o=he.isEditor(n)?!1:on.isElement(n)&&(t.isInline(n)||n.children.length===0||Xt.isText(n.children[0])||t.isInline(n.children[0])),s=0,a=0;a<n.children.length;a++,s++){var l=zt.get(t,r);if(!Xt.isText(l)){var c=l.children[s],u=l.children[s-1],d=a===n.children.length-1,f=Xt.isText(c)||on.isElement(c)&&t.isInline(c);if(f!==o)f?Pt.removeNodes(t,{at:r.concat(s),voids:!0}):Pt.unwrapNodes(t,{at:r.concat(s),voids:!0}),s--;else if(on.isElement(c)){if(t.isInline(c)){if(u==null||!Xt.isText(u)){var p={text:""};Pt.insertNodes(t,p,{at:r.concat(s),voids:!0}),s++}else if(d){var b={text:""};Pt.insertNodes(t,b,{at:r.concat(s+1),voids:!0}),s++}}}else{if(!Xt.isText(c)&&!("children"in c)){var v=c;v.children=[]}u!=null&&Xt.isText(u)&&(Xt.equals(c,u,{loose:!0})?(Pt.mergeNodes(t,{at:r.concat(s),voids:!0}),s--):u.text===""?(Pt.removeNodes(t,{at:r.concat(s-1),voids:!0}),s--):c.text===""&&(Pt.removeNodes(t,{at:r.concat(s),voids:!0}),s--))}}}}},Itt=(t,e)=>{var{iteration:n,initialDirtyPathsLength:r}=e,i=r*42;if(n>i)throw new Error("Could not completely normalize the editor after ".concat(i," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},Ftt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:r=!1,mode:i="lowest",at:o=e.selection,match:s}=n;if(o){var a=he.path(e,o),l=i==="lowest";for(var[c,u]of he.levels(e,{at:a,voids:r,match:s,reverse:l}))if(!Xt.isText(c)){if(ut.isRange(o)){if($e.isAncestor(u,o.anchor.path)&&$e.isAncestor(u,o.focus.path))return[c,u]}else if(!$e.equals(a,u))return[c,u]}}};function A$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function T$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A$(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Ott=(t,e,n)=>{var{selection:r}=t;if(r){var i=(d,f)=>{if(!Xt.isText(d))return!1;var[p,b]=he.parent(t,f);return!t.isVoid(p)||t.markableVoid(p)},o=ut.isExpanded(r),s=!1;if(!o){var[a,l]=he.node(t,r);if(a&&i(a,l)){var[c]=he.parent(t,l);s=c&&t.markableVoid(c)}}if(o||s)Pt.setNodes(t,{[e]:n},{match:i,split:!0,voids:!0});else{var u=T$(T$({},he.marks(t)||{}),{},{[e]:n});t.marks=u,Ux.get(t)||t.onChange()}}};function M$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function P$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M$(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Ntt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=he.point(e,n,{edge:"end"}),o=he.end(e,[]),s={anchor:i,focus:o},{distance:a=1}=r,l=0,c;for(var u of he.positions(e,P$(P$({},r),{},{at:s}))){if(l>a)break;l!==0&&(c=u),l++}return c};function D$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function R$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D$(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Ltt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=he.start(e,[]),o=he.point(e,n,{edge:"start"}),s={anchor:i,focus:o},{distance:a=1}=r,l=0,c;for(var u of he.positions(e,R$(R$({},r),{},{at:s,reverse:!0}))){if(l>a)break;l!==0&&(c=u),l++}return c},Btt=(t,e)=>{var{selection:n}=t;n&&ut.isCollapsed(n)&&Pt.delete(t,{unit:e,reverse:!0})},jtt=(t,e)=>{var{selection:n}=t;n&&ut.isCollapsed(n)&&Pt.delete(t,{unit:e})},Utt=function(e){var{direction:n="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:r}=e;r&&ut.isExpanded(r)&&Pt.delete(e,{reverse:n==="backward"})},ztt=(t,e)=>[he.start(t,e),he.end(t,e)];function k$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function I$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k$(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Vtt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return he.above(e,I$(I$({},n),{},{match:r=>on.isElement(r)&&he.isElementReadOnly(e,r)}))},Wtt=(t,e)=>he.point(t,e,{edge:"end"}),$tt=(t,e)=>{var n=he.path(t,e,{edge:"start"});return he.node(t,n)},Htt=(t,e)=>{var n=he.range(t,e);return zt.fragment(t,n)};function F$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function O$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F$(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Gtt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return he.above(e,O$(O$({},n),{},{match:r=>on.isElement(r)&&he.isVoid(e,r)}))},qtt=(t,e)=>e.children.some(n=>on.isElement(n)&&he.isBlock(t,n)),Ktt=(t,e)=>e.children.some(n=>Xt.isText(n)||he.isInline(t,n)),Ytt=(t,e)=>zt.has(t,e),Xtt=(t,e)=>e.children.every(n=>Xt.isText(n)),Qtt=t=>{Pt.splitNodes(t,{always:!0})},Ztt=(t,e,n)=>{Pt.insertNodes(t,e,n)},Jtt=t=>{Pt.splitNodes(t,{always:!0})};function N$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ent(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N$(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var tnt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:i,marks:o}=e;if(i){if(o){var s=ent({text:n},o);Pt.insertNodes(e,s,{at:r.at,voids:r.voids})}else Pt.insertText(e,n,r);e.marks=null}},nnt=(t,e)=>!t.isInline(e),rnt=(t,e,n)=>he.isStart(t,e,n)||he.isEnd(t,e,n),int=(t,e)=>{var{children:n}=e,[r]=n;return n.length===0||n.length===1&&Xt.isText(r)&&r.text===""&&!t.isVoid(e)},ont=(t,e,n)=>{var r=he.end(t,n);return cr.equals(e,r)},snt=t=>{var e=Gne.get(t);return e===void 0?!0:e},ant=(t,e,n)=>{if(e.offset!==0)return!1;var r=he.start(t,n);return cr.equals(e,r)},lnt=(t,e)=>{var n=he.path(t,e,{edge:"end"});return he.node(t,n)},cnt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=he.path(e,n,r),o=zt.leaf(e,i);return[o,i]};function unt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:n=t.selection,reverse:r=!1,voids:i=!1}=e,{match:o}=e;if(o==null&&(o=()=>!0),!!n){var s=[],a=he.path(t,n);for(var[l,c]of zt.levels(t,a))if(o(l,c)&&(s.push([l,c]),!i&&on.isElement(l)&&he.isVoid(t,l)))break;r&&s.reverse(),yield*wM(s)}}()}var dnt=["text"],fnt=["text"],hnt=function(e){var{marks:n,selection:r}=e;if(!r)return null;var{anchor:i,focus:o}=r;if(n)return n;if(ut.isExpanded(r)){var s=ut.isBackward(r);s&&([o,i]=[i,o]);var a=he.isEnd(e,i,i.path);if(a){var l=he.after(e,i);l&&(i=l)}var[c]=he.nodes(e,{match:Xt.isText,at:{anchor:i,focus:o}});if(c){var[u]=c,d=Td(u,dnt);return d}else return{}}var{path:f}=i,[p]=he.leaf(e,f);if(i.offset===0){var b=he.previous(e,{at:f,match:Xt.isText}),v=he.above(e,{match:D=>on.isElement(D)&&he.isVoid(e,D)&&e.markableVoid(D)});if(!v){var m=he.above(e,{match:D=>on.isElement(D)&&he.isBlock(e,D)});if(b&&m){var[g,x]=b,[,w]=m;$e.isAncestor(w,x)&&(p=g)}}}var S=Td(p,fnt);return S},pnt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:i=!1}=n,{match:o,at:s=e.selection}=n;if(s){var a=he.after(e,s,{voids:i});if(a){var[,l]=he.last(e,[]),c=[a.path,l];if($e.isPath(s)&&s.length===0)throw new Error("Cannot get the next node from the root node!");if(o==null)if($e.isPath(s)){var[u]=he.parent(e,s);o=f=>u.children.includes(f)}else o=()=>!0;var[d]=he.nodes(e,{at:c,match:o,mode:r,voids:i});return d}}},mnt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=he.path(e,n,r),o=zt.get(e,i);return[o,i]};function gnt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:n=t.selection,mode:r="all",universal:i=!1,reverse:o=!1,voids:s=!1,pass:a,ignoreNonSelectable:l=!1}=e,{match:c}=e;if(c||(c=()=>!0),!!n){var u,d;if(ett.isSpan(n))u=n[0],d=n[1];else{var f=he.path(t,n,{edge:"start"}),p=he.path(t,n,{edge:"end"});u=o?p:f,d=o?f:p}var b=zt.nodes(t,{reverse:o,from:u,to:d,pass:D=>{var[k,P]=D;return a&&a([k,P])?!0:on.isElement(k)?!!(!s&&(he.isVoid(t,k)||he.isElementReadOnly(t,k))||l&&!he.isSelectable(t,k)):!1}}),v=[],m;for(var[g,x]of b)if(!(l&&on.isElement(g)&&!he.isSelectable(t,g))){var w=m&&$e.compare(x,m[1])===0;if(!(r==="highest"&&w)){if(!c(g,x)){if(i&&!w&&Xt.isText(g))return;continue}if(r==="lowest"&&w){m=[g,x];continue}var S=r==="lowest"?m:[g,x];S&&(i?v.push(S):yield S),m=[g,x]}}r==="lowest"&&m&&(i?v.push(m):yield m),i&&(yield*wM(v))}}()}var vnt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:r=!1,operation:i}=n,o=u=>vA.get(u)||[],s=u=>yA.get(u)||new Set,a=u=>{var d=o(u).pop(),f=d.join(",");return s(u).delete(f),d};if(he.isNormalizing(e)){if(r){var l=Array.from(zt.nodes(e),u=>{var[,d]=u;return d}),c=new Set(l.map(u=>u.join(",")));vA.set(e,l),yA.set(e,c)}o(e).length!==0&&he.withoutNormalizing(e,()=>{for(var u of o(e))if(zt.has(e,u)){var d=he.node(e,u),[f,p]=d;on.isElement(f)&&f.children.length===0&&e.normalizeNode(d,{operation:i})}for(var b=o(e),v=b.length,m=0;b.length!==0;){if(!e.shouldNormalize({dirtyPaths:b,iteration:m,initialDirtyPathsLength:v,operation:i}))return;var g=a(e);if(zt.has(e,g)){var x=he.node(e,g);e.normalizeNode(x,{operation:i})}m++,b=o(e)}})}},ynt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=he.path(e,n,r),o=$e.parent(i),s=he.node(e,o);return s},xnt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:i="forward"}=r,o={current:n,affinity:i,unref(){var{current:a}=o,l=he.pathRefs(e);return l.delete(o),o.current=null,a}},s=he.pathRefs(e);return s.add(o),o},bnt=t=>{var e=d$.get(t);return e||(e=new Set,d$.set(t,e)),e},wnt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:i,edge:o}=r;if($e.isPath(n)){if(o==="start"){var[,s]=zt.first(e,n);n=s}else if(o==="end"){var[,a]=zt.last(e,n);n=a}}return ut.isRange(n)&&(o==="start"?n=ut.start(n):o==="end"?n=ut.end(n):n=$e.common(n.anchor.path,n.focus.path)),cr.isPoint(n)&&(n=n.path),i!=null&&(n=n.slice(0,i)),n},Snt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:i="forward"}=r,o={current:n,affinity:i,unref(){var{current:a}=o,l=he.pointRefs(e);return l.delete(o),o.current=null,a}},s=he.pointRefs(e);return s.add(o),o},_nt=t=>{var e=f$.get(t);return e||(e=new Set,f$.set(t,e)),e},Ent=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:i="start"}=r;if($e.isPath(n)){var o;if(i==="end"){var[,s]=zt.last(e,n);o=s}else{var[,a]=zt.first(e,n);o=a}var l=zt.get(e,o);if(!Xt.isText(l))throw new Error("Cannot get the ".concat(i," point in the node at path [").concat(n,"] because it has no ").concat(i," text node."));return{path:o,offset:i==="end"?l.text.length:0}}if(ut.isRange(n)){var[c,u]=ut.edges(n);return i==="start"?c:u}return n};function Cnt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:n=t.selection,unit:r="offset",reverse:i=!1,voids:o=!1,ignoreNonSelectable:s=!1}=e;if(!n)return;var a=he.range(t,n),[l,c]=ut.edges(a),u=i?c:l,d=!1,f="",p=0,b=0,v=0;for(var[m,g]of he.nodes(t,{at:n,reverse:i,voids:o,ignoreNonSelectable:s})){if(on.isElement(m)){if(!o&&(t.isVoid(m)||t.isElementReadOnly(m))){yield he.start(t,g);continue}if(t.isInline(m))continue;if(he.hasInlines(t,m)){var x=$e.isAncestor(g,c.path)?c:he.end(t,g),w=$e.isAncestor(g,l.path)?l:he.start(t,g);f=he.string(t,{anchor:w,focus:x},{voids:o}),d=!0}}if(Xt.isText(m)){var S=$e.equals(g,u.path);for(S?(b=i?u.offset:m.text.length-u.offset,v=u.offset):(b=m.text.length,v=i?b:0),(S||d||r==="offset")&&(yield{path:g,offset:v},d=!1);;){if(p===0){if(f==="")break;p=D(f,r,i),f=D5(f,p,i)[1]}if(v=i?v-p:v+p,b=b-p,b<0){p=-b;break}p=0,yield{path:g,offset:v}}}}function D(k,P,M){return P==="character"?P5(k,M):P==="word"?stt(k,M):P==="line"||P==="block"?k.length:1}}()}var Ant=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:i=!1}=n,{match:o,at:s=e.selection}=n;if(s){var a=he.before(e,s,{voids:i});if(a){var[,l]=he.first(e,[]),c=[a.path,l];if($e.isPath(s)&&s.length===0)throw new Error("Cannot get the previous node from the root node!");if(o==null)if($e.isPath(s)){var[u]=he.parent(e,s);o=f=>u.children.includes(f)}else o=()=>!0;var[d]=he.nodes(e,{reverse:!0,at:c,match:o,mode:r,voids:i});return d}}},Tnt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:i="forward"}=r,o={current:n,affinity:i,unref(){var{current:a}=o,l=he.rangeRefs(e);return l.delete(o),o.current=null,a}},s=he.rangeRefs(e);return s.add(o),o},Mnt=t=>{var e=h$.get(t);return e||(e=new Set,h$.set(t,e)),e},Pnt=(t,e,n)=>{if(ut.isRange(e)&&!n)return e;var r=he.start(t,e),i=he.end(t,n||e);return{anchor:r,focus:i}};function L$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dnt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L$(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Rnt=(t,e)=>{var{selection:n}=t;if(n){var r=(u,d)=>{if(!Xt.isText(u))return!1;var[f,p]=he.parent(t,d);return!t.isVoid(f)||t.markableVoid(f)},i=ut.isExpanded(n),o=!1;if(!i){var[s,a]=he.node(t,n);if(s&&r(s,a)){var[l]=he.parent(t,a);o=l&&t.markableVoid(l)}}if(i||o)Pt.unsetNodes(t,e,{match:r,split:!0,voids:!0});else{var c=Dnt({},he.marks(t)||{});delete c[e],t.marks=c,Ux.get(t)||t.onChange()}}},knt=(t,e)=>{Gne.set(t,e)},Int=(t,e)=>he.point(t,e,{edge:"start"}),Fnt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:i=!1}=r,o=he.range(e,n),[s,a]=ut.edges(o),l="";for(var[c,u]of he.nodes(e,{at:o,match:Xt.isText,voids:i})){var d=c.text;$e.equals(u,a.path)&&(d=d.slice(0,a.offset)),$e.equals(u,s.path)&&(d=d.slice(s.offset)),l+=d}return l},Ont=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:i=!1}=r,[o,s]=ut.edges(n);if(o.offset!==0||s.offset!==0||ut.isCollapsed(n)||$e.hasPrevious(s.path))return n;var a=he.above(e,{at:s,match:b=>on.isElement(b)&&he.isBlock(e,b),voids:i}),l=a?a[1]:[],c=he.start(e,o),u={anchor:c,focus:s},d=!0;for(var[f,p]of he.nodes(e,{at:u,match:Xt.isText,reverse:!0,voids:i})){if(d){d=!1;continue}if(f.text!==""||$e.isBefore(p,l)){s={path:p,offset:f.text.length};break}}return{anchor:o,focus:s}},Nnt=(t,e)=>{var n=he.isNormalizing(t);he.setNormalizing(t,!1);try{e()}finally{he.setNormalizing(t,n)}he.normalize(t)},Lnt=(t,e,n)=>{var[r,i]=e;return on.isElement(r)&&he.isEmpty(t,r)||Xt.isText(r)&&r.text===""&&i[i.length-1]!==0},Bnt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};he.withoutNormalizing(e,()=>{var r,i,{reverse:o=!1,unit:s="character",distance:a=1,voids:l=!1}=n,{at:c=e.selection,hanging:u=!1}=n;if(c){var d=!1;if(ut.isRange(c)&&ut.isCollapsed(c)&&(d=!0,c=c.anchor),cr.isPoint(c)){var f=he.void(e,{at:c,mode:"highest"});if(!l&&f){var[,p]=f;c=p}else{var b={unit:s,distance:a},v=o?he.before(e,c,b)||he.start(e,[]):he.after(e,c,b)||he.end(e,[]);c={anchor:c,focus:v},u=!0}}if($e.isPath(c)){Pt.removeNodes(e,{at:c,voids:l});return}if(!ut.isCollapsed(c)){if(!u){var[,m]=ut.edges(c),g=he.end(e,[]);cr.equals(m,g)||(c=he.unhangRange(e,c,{voids:l}))}var[x,w]=ut.edges(c),S=he.above(e,{match:ee=>on.isElement(ee)&&he.isBlock(e,ee),at:x,voids:l}),D=he.above(e,{match:ee=>on.isElement(ee)&&he.isBlock(e,ee),at:w,voids:l}),k=S&&D&&!$e.equals(S[1],D[1]),P=$e.equals(x.path,w.path),M=l?null:(r=he.void(e,{at:x,mode:"highest"}))!==null&&r!==void 0?r:he.elementReadOnly(e,{at:x,mode:"highest"}),T=l?null:(i=he.void(e,{at:w,mode:"highest"}))!==null&&i!==void 0?i:he.elementReadOnly(e,{at:w,mode:"highest"});if(M){var _=he.before(e,x);_&&S&&$e.isAncestor(S[1],_.path)&&(x=_)}if(T){var E=he.after(e,w);E&&D&&$e.isAncestor(D[1],E.path)&&(w=E)}var R=[],F;for(var L of he.nodes(e,{at:c,voids:l})){var[N,U]=L;F&&$e.compare(U,F)===0||(!l&&on.isElement(N)&&(he.isVoid(e,N)||he.isElementReadOnly(e,N))||!$e.isCommon(U,x.path)&&!$e.isCommon(U,w.path))&&(R.push(L),F=U)}var H=Array.from(R,ee=>{var[,Oe]=ee;return he.pathRef(e,Oe)}),j=he.pointRef(e,x),z=he.pointRef(e,w),q="";if(!P&&!M){var $=j.current,[K]=he.leaf(e,$),{path:G}=$,{offset:Y}=x,J=K.text.slice(Y);J.length>0&&(e.apply({type:"remove_text",path:G,offset:Y,text:J}),q=J)}if(H.reverse().map(ee=>ee.unref()).filter(ee=>ee!==null).forEach(ee=>Pt.removeNodes(e,{at:ee,voids:l})),!T){var V=z.current,[re]=he.leaf(e,V),{path:fe}=V,pe=P?x.offset:0,ce=re.text.slice(pe,w.offset);ce.length>0&&(e.apply({type:"remove_text",path:fe,offset:pe,text:ce}),q=ce)}!P&&k&&z.current&&j.current&&Pt.mergeNodes(e,{at:z.current,hanging:!0,voids:l}),d&&o&&s==="character"&&q.length>1&&q.match(/[\u0E00-\u0E7F]+/)&&Pt.insertText(e,q.slice(0,q.length-a));var xe=j.unref(),Ae=z.unref(),Ee=o?xe||Ae:Ae||xe;n.at==null&&Ee&&Pt.select(e,Ee)}}})},jnt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};he.withoutNormalizing(e,()=>{var{hanging:i=!1,voids:o=!1}=r,{at:s=M5(e),batchDirty:a=!0}=r;if(n.length){if(ut.isRange(s))if(i||(s=he.unhangRange(e,s,{voids:o})),ut.isCollapsed(s))s=s.anchor;else{var[,l]=ut.edges(s);if(!o&&he.void(e,{at:l}))return;var c=he.pointRef(e,l);Pt.delete(e,{at:s}),s=c.unref()}else $e.isPath(s)&&(s=he.start(e,s));if(!(!o&&he.void(e,{at:s}))){var u=he.above(e,{at:s,match:J=>on.isElement(J)&&he.isInline(e,J),mode:"highest",voids:o});if(u){var[,d]=u;if(he.isEnd(e,s,d)){var f=he.after(e,d);s=f}else if(he.isStart(e,s,d)){var p=he.before(e,d);s=p}}var b=he.above(e,{match:J=>on.isElement(J)&&he.isBlock(e,J),at:s,voids:o}),[,v]=b,m=he.isStart(e,s,v),g=he.isEnd(e,s,v),x=m&&g,w=!m||m&&g,S=!g,[,D]=zt.first({children:n},[]),[,k]=zt.last({children:n},[]),P=[],M=J=>{var[V,re]=J,fe=re.length===0;return fe?!1:x?!0:!(w&&$e.isAncestor(re,D)&&on.isElement(V)&&!e.isVoid(V)&&!e.isInline(V)||S&&$e.isAncestor(re,k)&&on.isElement(V)&&!e.isVoid(V)&&!e.isInline(V))};for(var T of zt.nodes({children:n},{pass:M}))M(T)&&P.push(T);var _=[],E=[],R=[],F=!0,L=!1;for(var[N]of P)on.isElement(N)&&!e.isInline(N)?(F=!1,L=!0,E.push(N)):F?_.push(N):R.push(N);var[U]=he.nodes(e,{at:s,match:J=>Xt.isText(J)||he.isInline(e,J),mode:"highest",voids:o}),[,H]=U,j=he.isStart(e,s,H),z=he.isEnd(e,s,H),q=he.pathRef(e,g&&!R.length?$e.next(v):v),$=he.pathRef(e,z?$e.next(H):H);Pt.splitNodes(e,{at:s,match:J=>L?on.isElement(J)&&he.isBlock(e,J):Xt.isText(J)||he.isInline(e,J),mode:L?"lowest":"highest",always:L&&(!m||_.length>0)&&(!g||R.length>0),voids:o});var K=he.pathRef(e,!j||j&&z?$e.next(H):H);if(Pt.insertNodes(e,_,{at:K.current,match:J=>Xt.isText(J)||he.isInline(e,J),mode:"highest",voids:o,batchDirty:a}),x&&!_.length&&E.length&&!R.length&&Pt.delete(e,{at:v,voids:o}),Pt.insertNodes(e,E,{at:q.current,match:J=>on.isElement(J)&&he.isBlock(e,J),mode:"lowest",voids:o,batchDirty:a}),Pt.insertNodes(e,R,{at:$.current,match:J=>Xt.isText(J)||he.isInline(e,J),mode:"highest",voids:o,batchDirty:a}),!r.at){var G;if(R.length>0&&$.current?G=$e.previous($.current):E.length>0&&q.current?G=$e.previous(q.current):K.current&&(G=$e.previous(K.current)),G){var Y=he.end(e,G);Pt.select(e,Y)}}K.unref(),q.unref(),$.unref()}}})},Unt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:r="anchor"}=n,{selection:i}=e;if(i){if(r==="anchor")Pt.select(e,i.anchor);else if(r==="focus")Pt.select(e,i.focus);else if(r==="start"){var[o]=ut.edges(i);Pt.select(e,o)}else if(r==="end"){var[,s]=ut.edges(i);Pt.select(e,s)}}else return},znt=t=>{var{selection:e}=t;e&&t.apply({type:"set_selection",properties:e,newProperties:null})},Vnt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:r}=e,{distance:i=1,unit:o="character",reverse:s=!1}=n,{edge:a=null}=n;if(r){a==="start"&&(a=ut.isBackward(r)?"focus":"anchor"),a==="end"&&(a=ut.isBackward(r)?"anchor":"focus");var{anchor:l,focus:c}=r,u={distance:i,unit:o,ignoreNonSelectable:!0},d={};if(a==null||a==="anchor"){var f=s?he.before(e,l,u):he.after(e,l,u);f&&(d.anchor=f)}if(a==null||a==="focus"){var p=s?he.before(e,c,u):he.after(e,c,u);p&&(d.focus=p)}Pt.setSelection(e,d)}},Wnt=(t,e)=>{var{selection:n}=t;if(e=he.range(t,e),n){Pt.setSelection(t,e);return}if(!ut.isRange(e))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(Io.stringify(e)));t.apply({type:"set_selection",properties:n,newProperties:e})};function B$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function j$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B$(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var $nt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:i}=e,{edge:o="both"}=r;if(i){o==="start"&&(o=ut.isBackward(i)?"focus":"anchor"),o==="end"&&(o=ut.isBackward(i)?"anchor":"focus");var{anchor:s,focus:a}=i,l=o==="anchor"?s:a;Pt.setSelection(e,{[o==="anchor"?"anchor":"focus"]:j$(j$({},l),n)})}},Hnt=(t,e)=>{var{selection:n}=t,r={},i={};if(n){for(var o in e)(o==="anchor"&&e.anchor!=null&&!cr.equals(e.anchor,n.anchor)||o==="focus"&&e.focus!=null&&!cr.equals(e.focus,n.focus)||o!=="anchor"&&o!=="focus"&&e[o]!==n[o])&&(r[o]=n[o],i[o]=e[o]);Object.keys(r).length>0&&t.apply({type:"set_selection",properties:r,newProperties:i})}},Gnt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};he.withoutNormalizing(e,()=>{var{hanging:i=!1,voids:o=!1,mode:s="lowest",batchDirty:a=!0}=r,{at:l,match:c,select:u}=r;if(zt.isNode(n)&&(n=[n]),n.length!==0){var[d]=n;if(l||(l=M5(e),u!==!1&&(u=!0)),u==null&&(u=!1),ut.isRange(l))if(i||(l=he.unhangRange(e,l,{voids:o})),ut.isCollapsed(l))l=l.anchor;else{var[,f]=ut.edges(l),p=he.pointRef(e,f);Pt.delete(e,{at:l}),l=p.unref()}if(cr.isPoint(l)){c==null&&(Xt.isText(d)?c=_=>Xt.isText(_):e.isInline(d)?c=_=>Xt.isText(_)||he.isInline(e,_):c=_=>on.isElement(_)&&he.isBlock(e,_));var[b]=he.nodes(e,{at:l.path,match:c,mode:s,voids:o});if(b){var[,v]=b,m=he.pathRef(e,v),g=he.isEnd(e,l,v);Pt.splitNodes(e,{at:l,match:c,mode:s,voids:o});var x=m.unref();l=g?$e.next(x):x}else return}var w=$e.parent(l),S=l[l.length-1];if(!(!o&&he.void(e,{at:w}))){if(a){var D=[],k=$e.levels(w);Mtt(e,()=>{var _=function(){var F=w.concat(S);S++;var L={type:"insert_node",path:F,node:E};e.apply(L),l=$e.next(l),D.push(L),Xt.isText(E)?k.push(F):k.push(...Array.from(zt.nodes(E),N=>{var[,U]=N;return F.concat(U)}))};for(var E of n)_()},()=>{Kne(e,k,_=>{var E=_;for(var R of D)if($e.operationCanTransformPath(R)&&(E=$e.transform(E,R),!E))return null;return E})})}else for(var P of n){var M=w.concat(S);S++,e.apply({type:"insert_node",path:M,node:P}),l=$e.next(l)}if(l=$e.previous(l),u){var T=he.end(e,l);T&&Pt.select(e,T)}}}})},qnt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};he.withoutNormalizing(e,()=>{var{at:r=e.selection,mode:i="lowest",voids:o=!1}=n,{match:s}=n;if(s==null&&(s=$e.isPath(r)?M0(e,r):S=>on.isElement(S)&&he.isBlock(e,S)),!!r){var a=he.nodes(e,{at:r,match:s,mode:i,voids:o}),l=Array.from(a,S=>{var[,D]=S;return he.pathRef(e,D)});for(var c of l){var u=c.unref();if(u.length<2)throw new Error("Cannot lift node at a path [".concat(u,"] because it has a depth of less than `2`."));var d=he.node(e,$e.parent(u)),[f,p]=d,b=u[u.length-1],{length:v}=f.children;if(v===1){var m=$e.next(p);Pt.moveNodes(e,{at:u,to:m,voids:o}),Pt.removeNodes(e,{at:p,voids:o})}else if(b===0)Pt.moveNodes(e,{at:u,to:p,voids:o});else if(b===v-1){var g=$e.next(p);Pt.moveNodes(e,{at:u,to:g,voids:o})}else{var x=$e.next(u),w=$e.next(p);Pt.splitNodes(e,{at:x,voids:o}),Pt.moveNodes(e,{at:u,to:w,voids:o})}}}})},Knt=["text"],Ynt=["children"],Yne=(t,e)=>{if(on.isElement(e)){var n=e;return he.isVoid(t,e)?!0:n.children.length===1?Yne(t,n.children[0]):!1}else return!he.isEditor(e)},Xnt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};he.withoutNormalizing(e,()=>{var{match:r,at:i=e.selection}=n,{hanging:o=!1,voids:s=!1,mode:a="lowest"}=n;if(i){if(r==null)if($e.isPath(i)){var[l]=he.parent(e,i);r=_=>l.children.includes(_)}else r=_=>on.isElement(_)&&he.isBlock(e,_);if(!o&&ut.isRange(i)&&(i=he.unhangRange(e,i,{voids:s})),ut.isRange(i))if(ut.isCollapsed(i))i=i.anchor;else{var[,c]=ut.edges(i),u=he.pointRef(e,c);Pt.delete(e,{at:i}),i=u.unref(),n.at==null&&Pt.select(e,i)}var[d]=he.nodes(e,{at:i,match:r,voids:s,mode:a}),f=he.previous(e,{at:i,match:r,voids:s,mode:a});if(!(!d||!f)){var[p,b]=d,[v,m]=f;if(!(b.length===0||m.length===0)){var g=$e.next(m),x=$e.common(b,m),w=$e.isSibling(b,m),S=Array.from(he.levels(e,{at:b}),_=>{var[E]=_;return E}).slice(x.length).slice(0,-1),D=he.above(e,{at:b,mode:"highest",match:_=>S.includes(_)&&Yne(e,_)}),k=D&&he.pathRef(e,D[1]),P,M;if(Xt.isText(p)&&Xt.isText(v)){var T=Td(p,Knt);M=v.text.length,P=T}else if(on.isElement(p)&&on.isElement(v)){var T=Td(p,Ynt);M=v.children.length,P=T}else throw new Error("Cannot merge the node at path [".concat(b,"] with the previous sibling because it is not the same kind: ").concat(Io.stringify(p)," ").concat(Io.stringify(v)));w||Pt.moveNodes(e,{at:b,to:g,voids:s}),k&&Pt.removeNodes(e,{at:k.current,voids:s}),he.shouldMergeNodesRemovePrevNode(e,f,d)?Pt.removeNodes(e,{at:m,voids:s}):e.apply({type:"merge_node",path:g,position:M,properties:P}),k&&k.unref()}}}})},Qnt=(t,e)=>{he.withoutNormalizing(t,()=>{var{to:n,at:r=t.selection,mode:i="lowest",voids:o=!1}=e,{match:s}=e;if(r){s==null&&(s=$e.isPath(r)?M0(t,r):p=>on.isElement(p)&&he.isBlock(t,p));var a=he.pathRef(t,n),l=he.nodes(t,{at:r,match:s,mode:i,voids:o}),c=Array.from(l,p=>{var[,b]=p;return he.pathRef(t,b)});for(var u of c){var d=u.unref(),f=a.current;d.length!==0&&t.apply({type:"move_node",path:d,newPath:f}),a.current&&$e.isSibling(f,d)&&$e.isAfter(f,d)&&(a.current=$e.next(a.current))}a.unref()}})},Znt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};he.withoutNormalizing(e,()=>{var{hanging:r=!1,voids:i=!1,mode:o="lowest"}=n,{at:s=e.selection,match:a}=n;if(s){a==null&&(a=$e.isPath(s)?M0(e,s):p=>on.isElement(p)&&he.isBlock(e,p)),!r&&ut.isRange(s)&&(s=he.unhangRange(e,s,{voids:i}));var l=he.nodes(e,{at:s,match:a,mode:o,voids:i}),c=Array.from(l,p=>{var[,b]=p;return he.pathRef(e,b)});for(var u of c){var d=u.unref();if(d){var[f]=he.node(e,d);e.apply({type:"remove_node",path:d,node:f})}}}})},Jnt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};he.withoutNormalizing(e,()=>{var{match:i,at:o=e.selection,compare:s,merge:a}=r,{hanging:l=!1,mode:c="lowest",split:u=!1,voids:d=!1}=r;if(o){if(i==null&&(i=$e.isPath(o)?M0(e,o):M=>on.isElement(M)&&he.isBlock(e,M)),!l&&ut.isRange(o)&&(o=he.unhangRange(e,o,{voids:d})),u&&ut.isRange(o)){if(ut.isCollapsed(o)&&he.leaf(e,o.anchor)[0].text.length>0)return;var f=he.rangeRef(e,o,{affinity:"inward"}),[p,b]=ut.edges(o),v=c==="lowest"?"lowest":"highest",m=he.isEnd(e,b,b.path);Pt.splitNodes(e,{at:b,match:i,mode:v,voids:d,always:!m});var g=he.isStart(e,p,p.path);Pt.splitNodes(e,{at:p,match:i,mode:v,voids:d,always:!g}),o=f.unref(),r.at==null&&Pt.select(e,o)}s||(s=(M,T)=>M!==T);for(var[x,w]of he.nodes(e,{at:o,match:i,mode:c,voids:d})){var S={},D={};if(w.length!==0){var k=!1;for(var P in n)P==="children"||P==="text"||s(n[P],x[P])&&(k=!0,x.hasOwnProperty(P)&&(S[P]=x[P]),a?n[P]!=null&&(D[P]=a(x[P],n[P])):n[P]!=null&&(D[P]=n[P]));k&&e.apply({type:"set_node",path:w,properties:S,newProperties:D})}}}})},ert=(t,e)=>{if(ut.isCollapsed(e))return e.anchor;var[,n]=ut.edges(e),r=he.pointRef(t,n);return Pt.delete(t,{at:e}),r.unref()},trt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};he.withoutNormalizing(e,()=>{var{mode:r="lowest",voids:i=!1}=n,{match:o,at:s=e.selection,height:a=0,always:l=!1}=n;if(o==null&&(o=z=>on.isElement(z)&&he.isBlock(e,z)),ut.isRange(s)&&(s=ert(e,s)),$e.isPath(s)){var c=s,u=he.point(e,c),[d]=he.parent(e,c);o=z=>z===d,a=u.path.length-c.length+1,s=u,l=!0}if(s){var f=he.pointRef(e,s,{affinity:"backward"}),p;try{var[b]=he.nodes(e,{at:s,match:o,mode:r,voids:i});if(!b)return;var v=he.void(e,{at:s,mode:"highest"}),m=0;if(!i&&v){var[g,x]=v;if(on.isElement(g)&&e.isInline(g)){var w=he.after(e,x);if(!w){var S={text:""},D=$e.next(x);Pt.insertNodes(e,S,{at:D,voids:i}),w=he.point(e,D)}s=w,l=!0}var k=s.path.length-x.length;a=k+1,l=!0}p=he.pointRef(e,s);var P=s.path.length-a,[,M]=b,T=s.path.slice(0,P),_=a===0?s.offset:s.path[P]+m;for(var[E,R]of he.levels(e,{at:T,reverse:!0,voids:i})){var F=!1;if(R.length<M.length||R.length===0||!i&&on.isElement(E)&&he.isVoid(e,E))break;var L=f.current,N=he.isEnd(e,L,R);if(l||!f||!he.isEdge(e,L,R)){F=!0;var U=zt.extractProps(E);e.apply({type:"split_node",path:R,position:_,properties:U})}_=R[R.length-1]+(F||N?1:0)}if(n.at==null){var H=p.current||he.end(e,[]);Pt.select(e,H)}}finally{var j;f.unref(),(j=p)===null||j===void 0||j.unref()}}})},nrt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(n)||(n=[n]);var i={};for(var o of n)i[o]=null;Pt.setNodes(e,i,r)},rrt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};he.withoutNormalizing(e,()=>{var{mode:r="lowest",split:i=!1,voids:o=!1}=n,{at:s=e.selection,match:a}=n;if(s){a==null&&(a=$e.isPath(s)?M0(e,s):p=>on.isElement(p)&&he.isBlock(e,p)),$e.isPath(s)&&(s=he.range(e,s));var l=ut.isRange(s)?he.rangeRef(e,s):null,c=he.nodes(e,{at:s,match:a,mode:r,voids:o}),u=Array.from(c,p=>{var[,b]=p;return he.pathRef(e,b)}).reverse(),d=function(){var b=f.unref(),[v]=he.node(e,b),m=he.range(e,b);i&&l&&(m=ut.intersection(l.current,m)),Pt.liftNodes(e,{at:m,match:g=>on.isAncestor(v)&&v.children.includes(g),voids:o})};for(var f of u)d();l&&l.unref()}})};function U$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function z$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U$(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var irt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};he.withoutNormalizing(e,()=>{var{mode:i="lowest",split:o=!1,voids:s=!1}=r,{match:a,at:l=e.selection}=r;if(l){if(a==null&&($e.isPath(l)?a=M0(e,l):e.isInline(n)?a=m=>on.isElement(m)&&he.isInline(e,m)||Xt.isText(m):a=m=>on.isElement(m)&&he.isBlock(e,m)),o&&ut.isRange(l)){var[c,u]=ut.edges(l),d=he.rangeRef(e,l,{affinity:"inward"});Pt.splitNodes(e,{at:u,match:a,voids:s}),Pt.splitNodes(e,{at:c,match:a,voids:s}),l=d.unref(),r.at==null&&Pt.select(e,l)}var f=Array.from(he.nodes(e,{at:l,match:e.isInline(n)?m=>on.isElement(m)&&he.isBlock(e,m):m=>he.isEditor(m),mode:"lowest",voids:s})),p=function(){var g=ut.isRange(l)?ut.intersection(l,he.range(e,v)):l;if(!g)return 0;var x=Array.from(he.nodes(e,{at:g,match:a,mode:i,voids:s}));if(x.length>0){var[w]=x,S=x[x.length-1],[,D]=w,[,k]=S;if(D.length===0&&k.length===0)return 0;var P=$e.equals(D,k)?$e.parent(D):$e.common(D,k),M=he.range(e,D,k),T=he.node(e,P),[_]=T,E=P.length+1,R=$e.next(k.slice(0,E)),F=z$(z$({},n),{},{children:[]});Pt.insertNodes(e,F,{at:R,voids:s}),Pt.moveNodes(e,{at:M,match:L=>on.isAncestor(_)&&_.children.includes(L),to:R.concat(0),voids:s})}},b;for(var[,v]of f)b=p()}})},ort=()=>{var t={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Ptt(t,...r)},addMark:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Ott(t,...r)},deleteBackward:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Btt(t,...r)},deleteForward:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return jtt(t,...r)},deleteFragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Utt(t,...r)},getFragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Rtt(t,...r)},insertBreak:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Qtt(t,...r)},insertSoftBreak:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Jtt(t,...r)},insertFragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return jnt(t,...r)},insertNode:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Ztt(t,...r)},insertText:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return tnt(t,...r)},normalizeNode:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ktt(t,...r)},removeMark:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Rnt(t,...r)},getDirtyPaths:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Dtt(t,...r)},shouldNormalize:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Itt(t,...r)},above:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Ftt(t,...r)},after:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Ntt(t,...r)},before:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Ltt(t,...r)},collapse:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Unt(t,...r)},delete:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Bnt(t,...r)},deselect:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return znt(t,...r)},edges:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ztt(t,...r)},elementReadOnly:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Vtt(t,...r)},end:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Wtt(t,...r)},first:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return $tt(t,...r)},fragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Htt(t,...r)},getMarks:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return hnt(t,...r)},hasBlocks:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return qtt(t,...r)},hasInlines:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Ktt(t,...r)},hasPath:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Ytt(t,...r)},hasTexts:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Xtt(t,...r)},insertNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Gnt(t,...r)},isBlock:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return nnt(t,...r)},isEdge:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return rnt(t,...r)},isEmpty:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return int(t,...r)},isEnd:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ont(t,...r)},isNormalizing:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return snt(t,...r)},isStart:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ant(t,...r)},last:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return lnt(t,...r)},leaf:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return cnt(t,...r)},levels:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return unt(t,...r)},liftNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return qnt(t,...r)},mergeNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Xnt(t,...r)},move:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Vnt(t,...r)},moveNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Qnt(t,...r)},next:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return pnt(t,...r)},node:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return mnt(t,...r)},nodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return gnt(t,...r)},normalize:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return vnt(t,...r)},parent:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ynt(t,...r)},path:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return wnt(t,...r)},pathRef:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return xnt(t,...r)},pathRefs:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return bnt(t,...r)},point:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Ent(t,...r)},pointRef:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Snt(t,...r)},pointRefs:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _nt(t,...r)},positions:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Cnt(t,...r)},previous:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Ant(t,...r)},range:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Pnt(t,...r)},rangeRef:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Tnt(t,...r)},rangeRefs:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Mnt(t,...r)},removeNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Znt(t,...r)},select:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Wnt(t,...r)},setNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Jnt(t,...r)},setNormalizing:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return knt(t,...r)},setPoint:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return $nt(t,...r)},setSelection:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Hnt(t,...r)},splitNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return trt(t,...r)},start:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Int(t,...r)},string:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Fnt(t,...r)},unhangRange:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Ont(t,...r)},unsetNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return nrt(t,...r)},unwrapNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return rrt(t,...r)},void:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Gtt(t,...r)},withoutNormalizing:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Nnt(t,...r)},wrapNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return irt(t,...r)},shouldMergeNodesRemovePrevNode:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Lnt(t,...r)}};return t},srt=crt,Xne="---",Qne="A-Za-z--------",art=new RegExp("^[^"+Qne+"]*["+Xne+"]"),lrt=new RegExp("^[^"+Xne+"]*["+Qne+"]");function crt(t){return t=String(t||""),art.test(t)?"rtl":lrt.test(t)?"ltr":"neutral"}const Zne=Md(srt);var urt=pu,drt=function(){return urt.Date.now()},frt=drt,hrt=/\s/;function prt(t){for(var e=t.length;e--&&hrt.test(t.charAt(e)););return e}var mrt=prt,grt=mrt,vrt=/^\s+/;function yrt(t){return t&&t.slice(0,grt(t)+1).replace(vrt,"")}var xrt=yrt,brt=Yw,wrt=Qw,Srt="[object Symbol]";function _rt(t){return typeof t=="symbol"||wrt(t)&&brt(t)==Srt}var Ert=_rt,Crt=xrt,V$=Xw,Art=Ert,W$=NaN,Trt=/^[-+]0x[0-9a-f]+$/i,Mrt=/^0b[01]+$/i,Prt=/^0o[0-7]+$/i,Drt=parseInt;function Rrt(t){if(typeof t=="number")return t;if(Art(t))return W$;if(V$(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=V$(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Crt(t);var n=Mrt.test(t);return n||Prt.test(t)?Drt(t.slice(2),n?2:8):Trt.test(t)?W$:+t}var krt=Rrt,Irt=Xw,lR=frt,$$=krt,Frt="Expected a function",Ort=Math.max,Nrt=Math.min;function Lrt(t,e,n){var r,i,o,s,a,l,c=0,u=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(Frt);e=$$(e)||0,Irt(n)&&(u=!!n.leading,d="maxWait"in n,o=d?Ort($$(n.maxWait)||0,e):o,f="trailing"in n?!!n.trailing:f);function p(k){var P=r,M=i;return r=i=void 0,c=k,s=t.apply(M,P),s}function b(k){return c=k,a=setTimeout(g,e),u?p(k):s}function v(k){var P=k-l,M=k-c,T=e-P;return d?Nrt(T,o-M):T}function m(k){var P=k-l,M=k-c;return l===void 0||P>=e||P<0||d&&M>=o}function g(){var k=lR();if(m(k))return x(k);a=setTimeout(g,v(k))}function x(k){return a=void 0,f&&r?p(k):(r=i=void 0,s)}function w(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function S(){return a===void 0?s:x(lR())}function D(){var k=lR(),P=m(k);if(r=arguments,i=this,l=k,P){if(a===void 0)return b(l);if(d)return clearTimeout(a),a=setTimeout(g,e),p(l)}return a===void 0&&(a=setTimeout(g,e)),s}return D.cancel=w,D.flush=S,D}var Jne=Lrt;const Brt=Md(Jne);var jrt=Jne,Urt=Xw,zrt="Expected a function";function Vrt(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(zrt);return Urt(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),jrt(t,e,{leading:r,maxWait:e,trailing:i})}var Wrt=Vrt;const $rt=Md(Wrt),H$=t=>typeof t=="object"&&t!=null&&t.nodeType===1,G$=(t,e)=>(!e||t!=="hidden")&&t!=="visible"&&t!=="clip",cR=(t,e)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const n=getComputedStyle(t,null);return G$(n.overflowY,e)||G$(n.overflowX,e)||(r=>{const i=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch(s){return null}})(r);return!!i&&(i.clientHeight<r.scrollHeight||i.clientWidth<r.scrollWidth)})(t)}return!1},w_=(t,e,n,r,i,o,s,a)=>o<t&&s>e||o>t&&s<e?0:o<=t&&a<=n||s>=e&&a>=n?o-t-r:s>e&&a<n||o<t&&a>n?s-e+i:0,Hrt=t=>{const e=t.parentElement;return e==null?t.getRootNode().host||null:e},q$=(t,e)=>{var n,r,i,o;if(typeof document=="undefined")return[];const{scrollMode:s,block:a,inline:l,boundary:c,skipOverflowHiddenElements:u}=e,d=typeof c=="function"?c:R=>R!==c;if(!H$(t))throw new TypeError("Invalid target");const f=document.scrollingElement||document.documentElement,p=[];let b=t;for(;H$(b)&&d(b);){if(b=Hrt(b),b===f){p.push(b);break}b!=null&&b===document.body&&cR(b)&&!cR(document.documentElement)||b!=null&&cR(b,u)&&p.push(b)}const v=(r=(n=window.visualViewport)==null?void 0:n.width)!=null?r:innerWidth,m=(o=(i=window.visualViewport)==null?void 0:i.height)!=null?o:innerHeight,{scrollX:g,scrollY:x}=window,{height:w,width:S,top:D,right:k,bottom:P,left:M}=t.getBoundingClientRect();let T=a==="start"||a==="nearest"?D:a==="end"?P:D+w/2,_=l==="center"?M+S/2:l==="end"?k:M;const E=[];for(let R=0;R<p.length;R++){const F=p[R],{height:L,width:N,top:U,right:H,bottom:j,left:z}=F.getBoundingClientRect();if(s==="if-needed"&&D>=0&&M>=0&&P<=m&&k<=v&&D>=U&&P<=j&&M>=z&&k<=H)return E;const q=getComputedStyle(F),$=parseInt(q.borderLeftWidth,10),K=parseInt(q.borderTopWidth,10),G=parseInt(q.borderRightWidth,10),Y=parseInt(q.borderBottomWidth,10);let J=0,V=0;const re="offsetWidth"in F?F.offsetWidth-F.clientWidth-$-G:0,fe="offsetHeight"in F?F.offsetHeight-F.clientHeight-K-Y:0,pe="offsetWidth"in F?F.offsetWidth===0?0:N/F.offsetWidth:0,ce="offsetHeight"in F?F.offsetHeight===0?0:L/F.offsetHeight:0;if(f===F)J=a==="start"?T:a==="end"?T-m:a==="nearest"?w_(x,x+m,m,K,Y,x+T,x+T+w,w):T-m/2,V=l==="start"?_:l==="center"?_-v/2:l==="end"?_-v:w_(g,g+v,v,$,G,g+_,g+_+S,S),J=Math.max(0,J+x),V=Math.max(0,V+g);else{J=a==="start"?T-U-K:a==="end"?T-j+Y+fe:a==="nearest"?w_(U,j,L,K,Y+fe,T,T+w,w):T-(U+L/2)+fe/2,V=l==="start"?_-z-$:l==="center"?_-(z+N/2)+re/2:l==="end"?_-H+G+re:w_(z,H,N,$,G+re,_,_+S,S);const{scrollLeft:xe,scrollTop:Ae}=F;J=Math.max(0,Math.min(Ae+J/ce,F.scrollHeight-L/ce+fe)),V=Math.max(0,Math.min(xe+V/pe,F.scrollWidth-N/pe+re)),T+=Ae-J,_+=xe-V}E.push({el:F,top:J,left:V})}return E},Grt=t=>t===!1?{block:"end",inline:"nearest"}:(e=>e===Object(e)&&Object.keys(e).length!==0)(t)?t:{block:"start",inline:"nearest"};function qrt(t,e){if(!t.isConnected||!(i=>{let o=i;for(;o&&o.parentNode;){if(o.parentNode===document)return!0;o=o.parentNode instanceof ShadowRoot?o.parentNode.host:o.parentNode}return!1})(t))return;const n=(i=>{const o=window.getComputedStyle(i);return{top:parseFloat(o.scrollMarginTop)||0,right:parseFloat(o.scrollMarginRight)||0,bottom:parseFloat(o.scrollMarginBottom)||0,left:parseFloat(o.scrollMarginLeft)||0}})(t);if((i=>typeof i=="object"&&typeof i.behavior=="function")(e))return e.behavior(q$(t,e));const r=typeof e=="boolean"||e==null?void 0:e.behavior;for(const{el:i,top:o,left:s}of q$(t,Grt(e))){const a=o-n.top+n.bottom,l=s-n.left+n.right;i.scroll({top:a,left:l,behavior:r})}}var Fd={};Object.defineProperty(Fd,"__esModule",{value:!0});var Krt=typeof window!="undefined"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),uR={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},ere={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:Krt?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},R5={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(var S_=1;S_<20;S_++)R5["f"+S_]=111+S_;function S2(t,e,n){e&&!("byKey"in e)&&(n=e,e=null),Array.isArray(t)||(t=[t]);var r=t.map(function(s){return tre(s,e)}),i=function(a){return r.some(function(l){return nre(l,a)})},o=n==null?i:i(n);return o}function Yrt(t,e){return S2(t,e)}function Xrt(t,e){return S2(t,{byKey:!0},e)}function tre(t,e){var n=e&&e.byKey,r={};t=t.replace("++","+add");var i=t.split("+"),o=i.length;for(var s in uR)r[uR[s]]=!1;var a=!0,l=!1,c=void 0;try{for(var u=i[Symbol.iterator](),d;!(a=(d=u.next()).done);a=!0){var f=d.value,p=f.endsWith("?")&&f.length>1;p&&(f=f.slice(0,-1));var b=k5(f),v=uR[b];if(f.length>1&&!v&&!ere[f]&&!R5[b])throw new TypeError('Unknown modifier: "'+f+'"');(o===1||!v)&&(n?r.key=b:r.which=rre(f)),v&&(r[v]=p?null:!0)}}catch(m){l=!0,c=m}finally{try{!a&&u.return&&u.return()}finally{if(l)throw c}}return r}function nre(t,e){for(var n in t){var r=t[n],i=void 0;if(r!=null&&(n==="key"&&e.key!=null?i=e.key.toLowerCase():n==="which"?i=r===91&&e.which===93?91:e.which:i=e[n],!(i==null&&r===!1)&&i!==r))return!1}return!0}function rre(t){t=k5(t);var e=R5[t]||t.toUpperCase().charCodeAt(0);return e}function k5(t){return t=t.toLowerCase(),t=ere[t]||t,t}Fd.default=S2;var dR=Fd.isHotkey=S2;Fd.isCodeHotkey=Yrt;Fd.isKeyHotkey=Xrt;Fd.parseHotkey=tre;Fd.compareHotkey=nre;Fd.toKeyCode=rre;Fd.toKeyName=k5;var ire=globalThis.Node,Qrt=globalThis.Text,I5=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView||null,Zrt=t=>oh(t)&&t.nodeType===8,dl=t=>oh(t)&&t.nodeType===1,oh=t=>{var e=I5(t);return!!e&&t instanceof e.Node},GF=t=>{var e=t&&t.anchorNode&&I5(t.anchorNode);return!!e&&t instanceof e.Selection},ore=t=>oh(t)&&t.nodeType===3,Jrt=t=>t.clipboardData&&t.clipboardData.getData("text/plain")!==""&&t.clipboardData.types.length===1,eit=t=>{var[e,n]=t;if(dl(e)&&e.childNodes.length){var r=n===e.childNodes.length,i=r?n-1:n;for([e,i]=sre(e,i,r?"backward":"forward"),r=i<n;dl(e)&&e.childNodes.length;){var o=r?e.childNodes.length-1:0;e=nit(e,o,r?"backward":"forward")}n=r&&e.textContent!=null?e.textContent.length:0}return[e,n]},tit=t=>{for(var e=t&&t.parentNode;e;){if(e.toString()==="[object ShadowRoot]")return!0;e=e.parentNode}return!1},sre=(t,e,n)=>{for(var{childNodes:r}=t,i=r[e],o=e,s=!1,a=!1;(Zrt(i)||dl(i)&&i.childNodes.length===0||dl(i)&&i.getAttribute("contenteditable")==="false")&&!(s&&a);){if(o>=r.length){s=!0,o=e-1,n="backward";continue}if(o<0){a=!0,o=e+1,n="forward";continue}i=r[o],e=o,o+=n==="forward"?1:-1}return[i,e]},nit=(t,e,n)=>{var[r]=sre(t,e,n);return r},are=t=>{var e="";if(ore(t)&&t.nodeValue)return t.nodeValue;if(dl(t)){for(var n of Array.from(t.childNodes))e+=are(n);var r=getComputedStyle(t).getPropertyValue("display");(r==="block"||r==="list"||t.tagName==="BR")&&(e+=`
`)}return e},rit=/data-slate-fragment="(.+?)"/m,iit=t=>{var e=t.getData("text/html"),[,n]=e.match(rit)||[];return n},zx=t=>t.getSelection!=null?t.getSelection():document.getSelection(),F5=(t,e,n)=>{var{target:r}=e;if(dl(r)&&r.matches('[contentEditable="false"]'))return!1;var{document:i}=Zn.getWindow(t);if(i.contains(r))return Zn.hasDOMNode(t,r,{editable:!0});var o=n.find(s=>{var{addedNodes:a,removedNodes:l}=s;for(var c of a)if(c===r||c.contains(r))return!0;for(var u of l)if(u===r||u.contains(r))return!0});return!o||o===e?!1:F5(t,o,n)},oit=()=>{for(var t=document.activeElement;(e=t)!==null&&e!==void 0&&e.shadowRoot&&(n=t.shadowRoot)!==null&&n!==void 0&&n.activeElement;){var e,n,r;t=(r=t)===null||r===void 0||(r=r.shadowRoot)===null||r===void 0?void 0:r.activeElement}return t},K$=(t,e)=>!!(t.compareDocumentPosition(e)&ire.DOCUMENT_POSITION_PRECEDING),sit=(t,e)=>!!(t.compareDocumentPosition(e)&ire.DOCUMENT_POSITION_FOLLOWING),fR,hR,lre=typeof navigator!="undefined"&&typeof window!="undefined"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Y$=typeof navigator!="undefined"&&/Mac OS X/.test(navigator.userAgent),Ds=typeof navigator!="undefined"&&/Android/.test(navigator.userAgent),Hg=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),tp=typeof navigator!="undefined"&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),ait=typeof navigator!="undefined"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),cre=typeof navigator!="undefined"&&/Chrome/i.test(navigator.userAgent),lit=typeof navigator!="undefined"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),cit=Ds&&typeof navigator!="undefined"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),uit=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),dit=typeof navigator!="undefined"&&/.*UCBrowser/.test(navigator.userAgent),fit=typeof navigator!="undefined"&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),kE=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&/Version\/(\d+)/.test(navigator.userAgent)&&((fR=navigator.userAgent.match(/Version\/(\d+)/))!==null&&fR!==void 0&&fR[1]&&parseInt((hR=navigator.userAgent.match(/Version\/(\d+)/))===null||hR===void 0?void 0:hR[1],10)<17);var of=(!lit||!cit)&&!ait&&typeof globalThis!="undefined"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function tw(t){"@babel/helpers - typeof";return tw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tw(t)}function hit(t,e){if(tw(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tw(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pit(t){var e=hit(t,"string");return tw(e)==="symbol"?e:String(e)}function ure(t,e,n){return e=pit(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var mit=0;class git{constructor(){ure(this,"id",void 0),this.id="".concat(mit++)}}var yv=new WeakMap,O5=new WeakMap,N5=new WeakMap,dre=new WeakMap,IE=new WeakMap,qF=new WeakMap,nw=new WeakMap,Fp=new WeakMap,xA=new WeakMap,_2=new WeakMap,KF=new WeakMap,Rf=new WeakMap,xp=new WeakMap,Vx=new WeakMap,YF=new WeakMap,L5=new WeakMap,ac=new WeakMap,ed=new WeakMap,Qs=new WeakMap,pf=new WeakMap,mf=new WeakMap,fre=new WeakMap,r0=Symbol("placeholder"),hre=Symbol("mark-placeholder"),Zn={androidPendingDiffs:t=>Qs.get(t),androidScheduleFlush:t=>{var e;(e=L5.get(t))===null||e===void 0||e()},blur:t=>{var e=Zn.toDOMNode(t,t),n=Zn.findDocumentOrShadowRoot(t);Rf.set(t,!1),n.activeElement===e&&e.blur()},deselect:t=>{var{selection:e}=t,n=Zn.findDocumentOrShadowRoot(t),r=zx(n);r&&r.rangeCount>0&&r.removeAllRanges(),e&&Pt.deselect(t)},findDocumentOrShadowRoot:t=>{var e=Zn.toDOMNode(t,t),n=e.getRootNode();return n instanceof Document||n instanceof ShadowRoot?n:e.ownerDocument},findEventRange:(t,e)=>{"nativeEvent"in e&&(e=e.nativeEvent);var{clientX:n,clientY:r,target:i}=e;if(n==null||r==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var o=Zn.toSlateNode(t,e.target),s=Zn.findPath(t,o);if(on.isElement(o)&&he.isVoid(t,o)){var a=i.getBoundingClientRect(),l=t.isInline(o)?n-a.left<a.left+a.width-n:r-a.top<a.top+a.height-r,c=he.point(t,s,{edge:l?"start":"end"}),u=l?he.before(t,c):he.after(t,c);if(u){var d=he.range(t,u);return d}}var f,{document:p}=Zn.getWindow(t);if(p.caretRangeFromPoint)f=p.caretRangeFromPoint(n,r);else{var b=p.caretPositionFromPoint(n,r);b&&(f=p.createRange(),f.setStart(b.offsetNode,b.offset),f.setEnd(b.offsetNode,b.offset))}if(!f)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var v=Zn.toSlateRange(t,f,{exactMatch:!1,suppressThrow:!1});return v},findKey:(t,e)=>{var n=xA.get(e);return n||(n=new git,xA.set(e,n)),n},findPath:(t,e)=>{for(var n=[],r=e;;){var i=N5.get(r);if(i==null){if(he.isEditor(r))return n;break}var o=O5.get(r);if(o==null)break;n.unshift(o),r=i}throw new Error("Unable to find the path for Slate node: ".concat(Io.stringify(e)))},focus:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{retries:5};if(!Rf.get(e)){if(n.retries<=0)throw new Error("Could not set focus, editor seems stuck with pending operations");if(e.operations.length>0){setTimeout(()=>{Zn.focus(e,{retries:n.retries-1})},10);return}var r=Zn.toDOMNode(e,e),i=Zn.findDocumentOrShadowRoot(e);if(i.activeElement!==r){if(e.selection&&i instanceof Document){var o=zx(i),s=Zn.toDOMRange(e,e.selection);o==null||o.removeAllRanges(),o==null||o.addRange(s)}e.selection||Pt.select(e,he.start(e,[])),Rf.set(e,!0),r.focus({preventScroll:!0})}}},getWindow:t=>{var e=dre.get(t);if(!e)throw new Error("Unable to find a host window element for this editor");return e},hasDOMNode:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:i=!1}=r,o=Zn.toDOMNode(e,e),s;try{s=dl(n)?n:n.parentElement}catch(a){if(a instanceof Error&&!a.message.includes('Permission denied to access property "nodeType"'))throw a}return s?s.closest("[data-slate-editor]")===o&&(!i||s.isContentEditable?!0:typeof s.isContentEditable=="boolean"&&s.closest('[contenteditable="false"]')===o||!!s.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(t,e)=>oh(e)&&Zn.hasDOMNode(t,e,{editable:!0}),hasRange:(t,e)=>{var{anchor:n,focus:r}=e;return he.hasPath(t,n.path)&&he.hasPath(t,r.path)},hasSelectableTarget:(t,e)=>Zn.hasEditableTarget(t,e)||Zn.isTargetInsideNonReadonlyVoid(t,e),hasTarget:(t,e)=>oh(e)&&Zn.hasDOMNode(t,e),insertData:(t,e)=>{t.insertData(e)},insertFragmentData:(t,e)=>t.insertFragmentData(e),insertTextData:(t,e)=>t.insertTextData(e),isComposing:t=>!!xp.get(t),isFocused:t=>!!Rf.get(t),isReadOnly:t=>!!KF.get(t),isTargetInsideNonReadonlyVoid:(t,e)=>{if(KF.get(t))return!1;var n=Zn.hasTarget(t,e)&&Zn.toSlateNode(t,e);return on.isElement(n)&&he.isVoid(t,n)},setFragmentData:(t,e,n)=>t.setFragmentData(e,n),toDOMNode:(t,e)=>{var n=_2.get(t),r=he.isEditor(e)?IE.get(t):n==null?void 0:n.get(Zn.findKey(t,e));if(!r)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(Io.stringify(e)));return r},toDOMPoint:(t,e)=>{var[n]=he.node(t,e.path),r=Zn.toDOMNode(t,n),i;he.void(t,{at:e})&&(e={path:e.path,offset:0});for(var o="[data-slate-string], [data-slate-zero-width]",s=Array.from(r.querySelectorAll(o)),a=0,l=0;l<s.length;l++){var c=s[l],u=c.childNodes[0];if(!(u==null||u.textContent==null)){var{length:d}=u.textContent,f=c.getAttribute("data-slate-length"),p=f==null?d:parseInt(f,10),b=a+p,v=s[l+1];if(e.offset===b&&v!==null&&v!==void 0&&v.hasAttribute("data-slate-mark-placeholder")){var m,g=v.childNodes[0];i=[g instanceof Qrt?g:v,(m=v.textContent)!==null&&m!==void 0&&m.startsWith("\uFEFF")?1:0];break}if(e.offset<=b){var x=Math.min(d,Math.max(0,e.offset-a));i=[u,x];break}a=b}}if(!i)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(Io.stringify(e)));return i},toDOMRange:(t,e)=>{var{anchor:n,focus:r}=e,i=ut.isBackward(e),o=Zn.toDOMPoint(t,n),s=ut.isCollapsed(e)?o:Zn.toDOMPoint(t,r),a=Zn.getWindow(t),l=a.document.createRange(),[c,u]=i?s:o,[d,f]=i?o:s,p=dl(c)?c:c.parentElement,b=!!p.getAttribute("data-slate-zero-width"),v=dl(d)?d:d.parentElement,m=!!v.getAttribute("data-slate-zero-width");return l.setStart(c,b?1:u),l.setEnd(d,m?1:f),l},toSlateNode:(t,e)=>{var n=dl(e)?e:e.parentElement;n&&!n.hasAttribute("data-slate-node")&&(n=n.closest("[data-slate-node]"));var r=n?nw.get(n):null;if(!r)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(n));return r},toSlatePoint:(t,e,n)=>{var{exactMatch:r,suppressThrow:i,searchDirection:o="backward"}=n,[s,a]=r?e:eit(e),l=s.parentNode,c=null,u=0;if(l){var d,f,p=Zn.toDOMNode(t,t),b=l.closest('[data-slate-void="true"]'),v=b&&p.contains(b)?b:null,m=l.closest('[contenteditable="false"]'),g=m&&p.contains(m)?m:null,x=l.closest("[data-slate-leaf]"),w=null;if(x){if(c=x.closest('[data-slate-node="text"]'),c){var S=Zn.getWindow(t),D=S.document.createRange();D.setStart(c,0),D.setEnd(s,a);var k=D.cloneContents(),P=[...Array.prototype.slice.call(k.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(k.querySelectorAll("[contenteditable=false]"))];P.forEach(G=>{if(Ds&&!r&&G.hasAttribute("data-slate-zero-width")&&G.textContent.length>0&&G.textContext!=="\uFEFF"){G.textContent.startsWith("\uFEFF")&&(G.textContent=G.textContent.slice(1));return}G.parentNode.removeChild(G)}),u=k.textContent.length,w=c}}else if(v){for(var M=v.querySelectorAll("[data-slate-leaf]"),T=0;T<M.length;T++){var _=M[T];if(Zn.hasDOMNode(t,_)){x=_;break}}x?(c=x.closest('[data-slate-node="text"]'),w=x,u=w.textContent.length,w.querySelectorAll("[data-slate-zero-width]").forEach(G=>{u-=G.textContent.length})):u=1}else if(g){var E=G=>G?G.querySelectorAll("[data-slate-leaf]:not(:scope [data-slate-editor] [data-slate-leaf])"):[],R=g.closest('[data-slate-node="element"]');if(o==="forward"){var F,L=[...E(R),...E(R==null?void 0:R.nextElementSibling)];x=(F=L.find(G=>sit(g,G)))!==null&&F!==void 0?F:null}else{var N,U=[...E(R==null?void 0:R.previousElementSibling),...E(R)];x=(N=U.findLast(G=>K$(g,G)))!==null&&N!==void 0?N:null}x&&(c=x.closest('[data-slate-node="text"]'),w=x,o==="forward"?u=0:(u=w.textContent.length,w.querySelectorAll("[data-slate-zero-width]").forEach(G=>{u-=G.textContent.length})))}w&&u===w.textContent.length&&Ds&&w.getAttribute("data-slate-zero-width")==="z"&&(d=w.textContent)!==null&&d!==void 0&&d.startsWith("\uFEFF")&&(l.hasAttribute("data-slate-zero-width")||Hg&&(f=w.textContent)!==null&&f!==void 0&&f.endsWith(`

`))&&u--}if(Ds&&!c&&!r){var H=l.hasAttribute("data-slate-node")?l:l.closest("[data-slate-node]");if(H&&Zn.hasDOMNode(t,H,{editable:!0})){var j=Zn.toSlateNode(t,H),{path:z,offset:q}=he.start(t,Zn.findPath(t,j));return H.querySelector("[data-slate-leaf]")||(q=a),{path:z,offset:q}}}if(!c){if(i)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(e))}var $=Zn.toSlateNode(t,c),K=Zn.findPath(t,$);return{path:K,offset:u}},toSlateRange:(t,e,n)=>{var r,{exactMatch:i,suppressThrow:o}=n,s=GF(e)?e.anchorNode:e.startContainer,a,l,c,u,d;if(s)if(GF(e)){if(Hg&&e.rangeCount>1){c=e.focusNode;var f=e.getRangeAt(0),p=e.getRangeAt(e.rangeCount-1);if(c instanceof HTMLTableRowElement&&f.startContainer instanceof HTMLTableRowElement&&p.startContainer instanceof HTMLTableRowElement){let P=function(M){return M.childElementCount>0?P(M.children[0]):M};var k=P,b=f.startContainer,v=p.startContainer,m=P(b.children[f.startOffset]),g=P(v.children[p.startOffset]);u=0,g.childNodes.length>0?a=g.childNodes[0]:a=g,m.childNodes.length>0?c=m.childNodes[0]:c=m,g instanceof HTMLElement?l=g.innerHTML.length:l=0}else f.startContainer===c?(a=p.endContainer,l=p.endOffset,u=f.startOffset):(a=f.startContainer,l=f.endOffset,u=p.startOffset)}else a=e.anchorNode,l=e.anchorOffset,c=e.focusNode,u=e.focusOffset;cre&&tit(a)||Hg?d=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:d=e.isCollapsed}else a=e.startContainer,l=e.startOffset,c=e.endContainer,u=e.endOffset,d=e.collapsed;if(a==null||c==null||l==null||u==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(e));Hg&&(r=c.textContent)!==null&&r!==void 0&&r.endsWith(`

`)&&u===c.textContent.length&&u--;var x=Zn.toSlatePoint(t,[a,l],{exactMatch:i,suppressThrow:o});if(!x)return null;var w=K$(a,c)||a===c&&u<l,S=d?x:Zn.toSlatePoint(t,[c,u],{exactMatch:i,suppressThrow:o,searchDirection:w?"forward":"backward"});if(!S)return null;var D={anchor:x,focus:S};return ut.isExpanded(D)&&ut.isForward(D)&&dl(c)&&he.void(t,{at:D.focus,mode:"highest"})&&(D=he.unhangRange(t,D,{voids:!0})),D}};function vit(t,e){var{path:n,diff:r}=e;if(!he.hasPath(t,n))return!1;var i=zt.get(t,n);if(!Xt.isText(i))return!1;if(r.start!==i.text.length||r.text.length===0)return i.text.slice(r.start,r.start+r.text.length)===r.text;var o=$e.next(n);if(!he.hasPath(t,o))return!1;var s=zt.get(t,o);return Xt.isText(s)&&s.text.startsWith(r.text)}function pre(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce((i,o)=>i.slice(0,o.start)+o.text+i.slice(o.end),t)}function yit(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++)if(t.charAt(r)!==e.charAt(r))return r;return n}function xit(t,e,n){for(var r=Math.min(t.length,e.length,n),i=0;i<r;i++)if(t.charAt(t.length-i-1)!==e.charAt(e.length-i-1))return i;return r}function mre(t,e){var{start:n,end:r,text:i}=e,o=t.slice(n,r),s=yit(o,i),a=Math.min(o.length-s,i.length-s),l=xit(o,i,a),c={start:n+s,end:r-l,text:i.slice(s,i.length-l)};return c.start===c.end&&c.text.length===0?null:c}function bit(t,e,n){var r=Math.min(e.start,n.start),i=Math.max(0,Math.min(e.start+e.text.length,n.end)-n.start),o=pre(t,e,n),s=Math.max(n.start+n.text.length,e.start+e.text.length+(e.start+e.text.length>n.start?n.text.length:0)-i),a=o.slice(r,s),l=Math.max(e.end,n.end-e.text.length+(e.end-e.start));return mre(t,{start:r,end:l,text:a})}function wit(t){var{path:e,diff:n}=t;return{anchor:{path:e,offset:n.start},focus:{path:e,offset:n.end}}}function XF(t,e){var{path:n,offset:r}=e;if(!he.hasPath(t,n))return null;var i=zt.get(t,n);if(!Xt.isText(i))return null;var o=he.above(t,{match:a=>on.isElement(a)&&he.isBlock(t,a),at:n});if(!o)return null;for(;r>i.text.length;){var s=he.next(t,{at:n,match:Xt.isText});if(!s||!$e.isDescendant(s[1],o[1]))return null;r-=i.text.length,i=s[0],n=s[1]}return{path:n,offset:r}}function X$(t,e){var n=XF(t,e.anchor);if(!n)return null;if(ut.isCollapsed(e))return{anchor:n,focus:n};var r=XF(t,e.focus);return r?{anchor:n,focus:r}:null}function QF(t,e,n){var r=Qs.get(t),i=r==null?void 0:r.find(u=>{var{path:d}=u;return $e.equals(d,e.path)});if(!i||e.offset<=i.diff.start)return cr.transform(e,n,{affinity:"backward"});var{diff:o}=i;if(e.offset<=o.start+o.text.length){var s={path:e.path,offset:o.start},a=cr.transform(s,n,{affinity:"backward"});return a?{path:a.path,offset:a.offset+e.offset-o.start}:null}var l={path:e.path,offset:e.offset-o.text.length+o.end-o.start},c=cr.transform(l,n,{affinity:"backward"});return c?n.type==="split_node"&&$e.equals(n.path,e.path)&&l.offset<n.position&&o.start<n.position?c:{path:c.path,offset:c.offset+o.text.length-o.end+o.start}:null}function Q$(t,e,n){var r=QF(t,e.anchor,n);if(!r)return null;if(ut.isCollapsed(e))return{anchor:r,focus:r};var i=QF(t,e.focus,n);return i?{anchor:r,focus:i}:null}function Sit(t,e){var{path:n,diff:r,id:i}=t;switch(e.type){case"insert_text":return!$e.equals(e.path,n)||e.offset>=r.end?t:e.offset<=r.start?{diff:{start:e.text.length+r.start,end:e.text.length+r.end,text:r.text},id:i,path:n}:{diff:{start:r.start,end:r.end+e.text.length,text:r.text},id:i,path:n};case"remove_text":return!$e.equals(e.path,n)||e.offset>=r.end?t:e.offset+e.text.length<=r.start?{diff:{start:r.start-e.text.length,end:r.end-e.text.length,text:r.text},id:i,path:n}:{diff:{start:r.start,end:r.end-e.text.length,text:r.text},id:i,path:n};case"split_node":return!$e.equals(e.path,n)||e.position>=r.end?{diff:r,id:i,path:$e.transform(n,e,{affinity:"backward"})}:e.position>r.start?{diff:{start:r.start,end:Math.min(e.position,r.end),text:r.text},id:i,path:n}:{diff:{start:r.start-e.position,end:r.end-e.position,text:r.text},id:i,path:$e.transform(n,e,{affinity:"forward"})};case"merge_node":return $e.equals(e.path,n)?{diff:{start:r.start+e.position,end:r.end+e.position,text:r.text},id:i,path:$e.transform(n,e)}:{diff:r,id:i,path:$e.transform(n,e)}}var o=$e.transform(n,e);return o?{diff:r,path:o,id:i}:null}var Z$=(t,e)=>{var n=(e.top+e.bottom)/2;return t.top<=n&&t.bottom>=n},J$=(t,e,n)=>{var r=Zn.toDOMRange(t,e).getBoundingClientRect(),i=Zn.toDOMRange(t,n).getBoundingClientRect();return Z$(r,i)&&Z$(i,r)},_it=(t,e)=>{var n=he.range(t,ut.end(e)),r=Array.from(he.positions(t,{at:e})),i=0,o=r.length,s=Math.floor(o/2);if(J$(t,he.range(t,r[i]),n))return he.range(t,r[i],n);if(r.length<2)return he.range(t,r[r.length-1],n);for(;s!==r.length&&s!==i;)J$(t,he.range(t,r[s]),n)?o=s:i=s,s=Math.floor((i+o)/2);return he.range(t,r[o],n)};function e7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function t7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e7(Object(n),!0).forEach(function(r){ure(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Eit=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",r=e,{apply:i,onChange:o,deleteBackward:s,addMark:a,removeMark:l}=r;return _2.set(r,new WeakMap),r.addMark=(c,u)=>{var d,f;(d=L5.get(r))===null||d===void 0||d(),!ac.get(r)&&(f=Qs.get(r))!==null&&f!==void 0&&f.length&&ac.set(r,null),ed.delete(r),a(c,u)},r.removeMark=c=>{var u;!ac.get(r)&&(u=Qs.get(r))!==null&&u!==void 0&&u.length&&ac.set(r,null),ed.delete(r),l(c)},r.deleteBackward=c=>{if(c!=="line")return s(c);if(r.selection&&ut.isCollapsed(r.selection)){var u=he.above(r,{match:b=>on.isElement(b)&&he.isBlock(r,b),at:r.selection});if(u){var[,d]=u,f=he.range(r,d,r.selection.anchor),p=_it(r,f);ut.isCollapsed(p)||Pt.delete(r,{at:p})}}},r.apply=c=>{var u=[],d=[],f=Qs.get(r);if(f!=null&&f.length){var p=f.map(L=>Sit(L,c)).filter(Boolean);Qs.set(r,p)}var b=mf.get(r);b&&mf.set(r,Q$(r,b,c));var v=pf.get(r);if(v!=null&&v.at){var m=cr.isPoint(v==null?void 0:v.at)?QF(r,v.at,c):Q$(r,v.at,c);pf.set(r,m?t7(t7({},v),{},{at:m}):null)}switch(c.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{u.push(...mg(r,c.path));break}case"set_selection":{var g;(g=Vx.get(r))===null||g===void 0||g.unref(),Vx.delete(r);break}case"insert_node":case"remove_node":{u.push(...mg(r,$e.parent(c.path)));break}case"merge_node":{var x=$e.previous(c.path);u.push(...mg(r,x));break}case"move_node":{var w=$e.common($e.parent(c.path),$e.parent(c.newPath));u.push(...mg(r,w));var S;$e.isBefore(c.path,c.newPath)?(u.push(...mg(r,$e.parent(c.path))),S=c.newPath):(u.push(...mg(r,$e.parent(c.newPath))),S=c.path);var D=zt.get(e,$e.parent(S)),k=Zn.findKey(r,D),P=he.pathRef(r,$e.parent(S));d.push([P,k]);break}}switch(i(c),c.type){case"insert_node":case"remove_node":case"merge_node":case"move_node":case"split_node":case"insert_text":case"remove_text":case"set_selection":yv.set(r,!0)}for(var[M,T]of u){var[_]=he.node(r,M);xA.set(_,T)}for(var[E,R]of d){if(E.current){var[F]=he.node(r,E.current);xA.set(F,R)}E.unref()}},r.setFragmentData=c=>{var{selection:u}=r;if(u){var[d,f]=ut.edges(u),p=he.void(r,{at:d.path}),b=he.void(r,{at:f.path});if(!(ut.isCollapsed(u)&&!p)){var v=Zn.toDOMRange(r,u),m=v.cloneContents(),g=m.childNodes[0];if(m.childNodes.forEach(_=>{_.textContent&&_.textContent.trim()!==""&&(g=_)}),b){var[x]=b,w=v.cloneRange(),S=Zn.toDOMNode(r,x);w.setEndAfter(S),m=w.cloneContents()}if(p&&(g=m.querySelector("[data-slate-spacer]")),Array.from(m.querySelectorAll("[data-slate-zero-width]")).forEach(_=>{var E=_.getAttribute("data-slate-zero-width")==="n";_.textContent=E?`
`:""}),ore(g)){var D=g.ownerDocument.createElement("span");D.style.whiteSpace="pre",D.appendChild(g),m.appendChild(D),g=D}var k=r.getFragment(),P=JSON.stringify(k),M=window.btoa(encodeURIComponent(P));g.setAttribute("data-slate-fragment",M),c.setData("application/".concat(n),M);var T=m.ownerDocument.createElement("div");return T.appendChild(m),T.setAttribute("hidden","true"),m.ownerDocument.body.appendChild(T),c.setData("text/html",T.innerHTML),c.setData("text/plain",are(T)),m.ownerDocument.body.removeChild(T),c}}},r.insertData=c=>{r.insertFragmentData(c)||r.insertTextData(c)},r.insertFragmentData=c=>{var u=c.getData("application/".concat(n))||iit(c);if(u){var d=decodeURIComponent(window.atob(u)),f=JSON.parse(d);return r.insertFragment(f),!0}return!1},r.insertTextData=c=>{var u=c.getData("text/plain");if(u){var d=u.split(/\r\n|\r|\n/),f=!1;for(var p of d)f&&Pt.splitNodes(r,{always:!0}),r.insertText(p),f=!0;return!0}return!1},r.onChange=c=>{var u=YF.get(r);u&&u(c),o(c)},r},mg=(t,e)=>{var n=[];for(var[r,i]of he.levels(t,{at:e})){var o=Zn.findKey(t,r);n.push([i,o])}return n},Cit=3,Ait={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},Tit={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},Mit={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Ci=t=>{var e=Ait[t],n=Tit[t],r=Mit[t],i=e&&dR(e),o=n&&dR(n),s=r&&dR(r);return a=>!!(i&&i(a)||Y$&&o&&o(a)||!Y$&&s&&s(a))},Pi={isBold:Ci("bold"),isCompose:Ci("compose"),isMoveBackward:Ci("moveBackward"),isMoveForward:Ci("moveForward"),isDeleteBackward:Ci("deleteBackward"),isDeleteForward:Ci("deleteForward"),isDeleteLineBackward:Ci("deleteLineBackward"),isDeleteLineForward:Ci("deleteLineForward"),isDeleteWordBackward:Ci("deleteWordBackward"),isDeleteWordForward:Ci("deleteWordForward"),isExtendBackward:Ci("extendBackward"),isExtendForward:Ci("extendForward"),isExtendLineBackward:Ci("extendLineBackward"),isExtendLineForward:Ci("extendLineForward"),isItalic:Ci("italic"),isMoveLineBackward:Ci("moveLineBackward"),isMoveLineForward:Ci("moveLineForward"),isMoveWordBackward:Ci("moveWordBackward"),isMoveWordForward:Ci("moveWordForward"),isRedo:Ci("redo"),isSoftBreak:Ci("insertSoftBreak"),isSplitBlock:Ci("splitBlock"),isTransposeCharacter:Ci("transposeCharacter"),isUndo:Ci("undo")};function Pit(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function n7(t,e){if(t==null)return{};var n=Pit(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var Dit=["anchor","focus"],Rit=["anchor","focus"],kit=(t,e)=>Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(n=>e.hasOwnProperty(n)&&t[n]===e[n]),gre=(t,e)=>{var n=n7(t,Dit),r=n7(e,Rit);return t[r0]===e[r0]&&kit(n,r)},Iit=(t,e)=>{if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++){var r=t[n],i=e[n];if(!ut.equals(r,i)||!gre(r,i))return!1}return!0},Fit=(t,e)=>{if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++){var r=t[n],i=e[n];if(r.anchor.offset!==i.anchor.offset||r.focus.offset!==i.focus.offset||!gre(r,i))return!1}return!0},Op=[],Oit=function(){return Op.some(function(t){return t.activeTargets.length>0})},Nit=function(){return Op.some(function(t){return t.skippedTargets.length>0})},r7="ResizeObserver loop completed with undelivered notifications.",Lit=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:r7}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=r7),window.dispatchEvent(t)},rw;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(rw||(rw={}));var Np=function(t){return Object.freeze(t)},Bit=function(){function t(e,n){this.inlineSize=e,this.blockSize=n,Np(this)}return t}(),vre=function(){function t(e,n,r,i){return this.x=e,this.y=n,this.width=r,this.height=i,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Np(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,r=e.y,i=e.top,o=e.right,s=e.bottom,a=e.left,l=e.width,c=e.height;return{x:n,y:r,top:i,right:o,bottom:s,left:a,width:l,height:c}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),B5=function(t){return t instanceof SVGElement&&"getBBox"in t},yre=function(t){if(B5(t)){var e=t.getBBox(),n=e.width,r=e.height;return!n&&!r}var i=t,o=i.offsetWidth,s=i.offsetHeight;return!(o||s||t.getClientRects().length)},i7=function(t){var e;if(t instanceof Element)return!0;var n=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},jit=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Wx=typeof window!="undefined"?window:{},__=new WeakMap,o7=/auto|scroll/,Uit=/^tb|vertical/,zit=/msie|trident/i.test(Wx.navigator&&Wx.navigator.userAgent),Pc=function(t){return parseFloat(t||"0")},xv=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new Bit((n?e:t)||0,(n?t:e)||0)},s7=Np({devicePixelContentBoxSize:xv(),borderBoxSize:xv(),contentBoxSize:xv(),contentRect:new vre(0,0,0,0)}),xre=function(t,e){if(e===void 0&&(e=!1),__.has(t)&&!e)return __.get(t);if(yre(t))return __.set(t,s7),s7;var n=getComputedStyle(t),r=B5(t)&&t.ownerSVGElement&&t.getBBox(),i=!zit&&n.boxSizing==="border-box",o=Uit.test(n.writingMode||""),s=!r&&o7.test(n.overflowY||""),a=!r&&o7.test(n.overflowX||""),l=r?0:Pc(n.paddingTop),c=r?0:Pc(n.paddingRight),u=r?0:Pc(n.paddingBottom),d=r?0:Pc(n.paddingLeft),f=r?0:Pc(n.borderTopWidth),p=r?0:Pc(n.borderRightWidth),b=r?0:Pc(n.borderBottomWidth),v=r?0:Pc(n.borderLeftWidth),m=d+c,g=l+u,x=v+p,w=f+b,S=a?t.offsetHeight-w-t.clientHeight:0,D=s?t.offsetWidth-x-t.clientWidth:0,k=i?m+x:0,P=i?g+w:0,M=r?r.width:Pc(n.width)-k-D,T=r?r.height:Pc(n.height)-P-S,_=M+m+D+x,E=T+g+S+w,R=Np({devicePixelContentBoxSize:xv(Math.round(M*devicePixelRatio),Math.round(T*devicePixelRatio),o),borderBoxSize:xv(_,E,o),contentBoxSize:xv(M,T,o),contentRect:new vre(d,l,M,T)});return __.set(t,R),R},bre=function(t,e,n){var r=xre(t,n),i=r.borderBoxSize,o=r.contentBoxSize,s=r.devicePixelContentBoxSize;switch(e){case rw.DEVICE_PIXEL_CONTENT_BOX:return s;case rw.BORDER_BOX:return i;default:return o}},Vit=function(){function t(e){var n=xre(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=Np([n.borderBoxSize]),this.contentBoxSize=Np([n.contentBoxSize]),this.devicePixelContentBoxSize=Np([n.devicePixelContentBoxSize])}return t}(),wre=function(t){if(yre(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},Wit=function(){var t=1/0,e=[];Op.forEach(function(s){if(s.activeTargets.length!==0){var a=[];s.activeTargets.forEach(function(c){var u=new Vit(c.target),d=wre(c.target);a.push(u),c.lastReportedSize=bre(c.target,c.observedBox),d<t&&(t=d)}),e.push(function(){s.callback.call(s.observer,a,s.observer)}),s.activeTargets.splice(0,s.activeTargets.length)}});for(var n=0,r=e;n<r.length;n++){var i=r[n];i()}return t},a7=function(t){Op.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(i){i.isActive()&&(wre(i.target)>t?n.activeTargets.push(i):n.skippedTargets.push(i))})})},$it=function(){var t=0;for(a7(t);Oit();)t=Wit(),a7(t);return Nit()&&Lit(),t>0},pR,Sre=[],Hit=function(){return Sre.splice(0).forEach(function(t){return t()})},Git=function(t){if(!pR){var e=0,n=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return Hit()}).observe(n,r),pR=function(){n.textContent="".concat(e?e--:e++)}}Sre.push(t),pR()},qit=function(t){Git(function(){requestAnimationFrame(t)})},FE=0,Kit=function(){return!!FE},Yit=250,Xit={attributes:!0,characterData:!0,childList:!0,subtree:!0},l7=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],c7=function(t){return t===void 0&&(t=0),Date.now()+t},mR=!1,Qit=function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=Yit),!mR){mR=!0;var r=c7(e);qit(function(){var i=!1;try{i=$it()}finally{if(mR=!1,e=r-c7(),!Kit())return;i?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,Xit)};document.body?n():Wx.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),l7.forEach(function(n){return Wx.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),l7.forEach(function(n){return Wx.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t}(),ZF=new Qit,u7=function(t){!FE&&t>0&&ZF.start(),FE+=t,!FE&&ZF.stop()},Zit=function(t){return!B5(t)&&!jit(t)&&getComputedStyle(t).display==="inline"},Jit=function(){function t(e,n){this.target=e,this.observedBox=n||rw.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=bre(this.target,this.observedBox,!0);return Zit(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),eot=function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t}(),E_=new WeakMap,d7=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},C_=function(){function t(){}return t.connect=function(e,n){var r=new eot(e,n);E_.set(e,r)},t.observe=function(e,n,r){var i=E_.get(e),o=i.observationTargets.length===0;d7(i.observationTargets,n)<0&&(o&&Op.push(i),i.observationTargets.push(new Jit(n,r&&r.box)),u7(1),ZF.schedule())},t.unobserve=function(e,n){var r=E_.get(e),i=d7(r.observationTargets,n),o=r.observationTargets.length===1;i>=0&&(o&&Op.splice(Op.indexOf(r),1),r.observationTargets.splice(i,1),u7(-1))},t.disconnect=function(e){var n=this,r=E_.get(e);r.observationTargets.slice().forEach(function(i){return n.unobserve(e,i.target)}),r.activeTargets.splice(0,r.activeTargets.length)},t}(),tot=function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");C_.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!i7(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");C_.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!i7(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");C_.unobserve(this,e)},t.prototype.disconnect=function(){C_.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();function not(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function bA(t,e){if(t==null)return{};var n=not(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function iw(t){"@babel/helpers - typeof";return iw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iw(t)}function rot(t,e){if(iw(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(iw(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iot(t){var e=rot(t,"string");return iw(e)==="symbol"?e:String(e)}function au(t,e,n){return e=iot(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var j5=A.createContext(null),mh=()=>{var t=A.useContext(j5);if(!t)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return t},qt=Zn;function f7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function A_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f7(Object(n),!0).forEach(function(r){au(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var oot=25,sot=200,aot=function(){},lot=t=>(t==null?void 0:t.constructor.name)==="DataTransfer";function cot(t){var{editor:e,scheduleOnDOMSelectionChange:n,onDOMSelectionChange:r}=t,i=!1,o=null,s=null,a=null,l=0,c=!1,u=()=>{var R=mf.get(e);if(mf.delete(e),R){var{selection:F}=e,L=X$(e,R);L&&(!F||!ut.equals(L,F))&&Pt.select(e,L)}},d=()=>{var R=pf.get(e);if(pf.delete(e),!!R){if(R.at){var F=cr.isPoint(R.at)?XF(e,R.at):X$(e,R.at);if(!F)return;var L=he.range(e,F);(!e.selection||!ut.equals(e.selection,L))&&Pt.select(e,F)}R.run()}},f=()=>{if(s&&(clearTimeout(s),s=null),a&&(clearTimeout(a),a=null),!S()&&!w()){u();return}i||(i=!0,setTimeout(()=>i=!1)),w()&&(i="action");var R=e.selection&&he.rangeRef(e,e.selection,{affinity:"forward"});ed.set(e,e.marks),aot("flush",pf.get(e),Qs.get(e));for(var F=S(),L;L=(N=Qs.get(e))===null||N===void 0?void 0:N[0];){var N,U,H=ac.get(e);H!==void 0&&(ac.delete(e),e.marks=H),H&&c===!1&&(c=null);var j=wit(L);(!e.selection||!ut.equals(e.selection,j))&&Pt.select(e,j),L.diff.text?he.insertText(e,L.diff.text):he.deleteFragment(e),Qs.set(e,(U=Qs.get(e))===null||U===void 0?void 0:U.filter($=>{var{id:K}=$;return K!==L.id})),vit(e,L)||(F=!1,pf.delete(e),ed.delete(e),i="action",mf.delete(e),n.cancel(),r.cancel(),R==null||R.unref())}var z=R==null?void 0:R.unref();if(z&&!mf.get(e)&&(!e.selection||!ut.equals(z,e.selection))&&Pt.select(e,z),w()){d();return}F&&n(),n.flush(),r.flush(),u();var q=ed.get(e);ed.delete(e),q!==void 0&&(e.marks=q,e.onChange())},p=R=>{o&&clearTimeout(o),o=setTimeout(()=>{xp.set(e,!1),f()},oot)},b=R=>{xp.set(e,!0),o&&(clearTimeout(o),o=null)},v=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,L=qF.get(e);if(L){if(S()||F){L.style.display="none";return}L.style.removeProperty("display")}},m=(R,F)=>{var L,N=(L=Qs.get(e))!==null&&L!==void 0?L:[];Qs.set(e,N);var U=zt.leaf(e,R),H=N.findIndex(q=>$e.equals(q.path,R));if(H<0){var j=mre(U.text,F);j&&N.push({path:R,diff:F,id:l++}),v();return}var z=bit(U.text,N[H].diff,F);if(!z){N.splice(H,1),v();return}N[H]=A_(A_({},N[H]),{},{diff:z})},g=function(F){var{at:L}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};c=!1,mf.delete(e),n.cancel(),r.cancel(),w()&&f(),pf.set(e,{at:L,run:F}),a=setTimeout(f)},x=R=>{var F;if(s&&(clearTimeout(s),s=null),!yv.get(e)){var{inputType:L}=R,N=null,U=R.dataTransfer||R.data||void 0;c!==!1&&L!=="insertText"&&L!=="insertCompositionText"&&(c=!1);var[H]=R.getTargetRanges();H&&(N=qt.toSlateRange(e,H,{exactMatch:!1,suppressThrow:!0}));var j=qt.getWindow(e),z=j.getSelection();if(!N&&z&&(H=z,N=qt.toSlateRange(e,z,{exactMatch:!1,suppressThrow:!0})),N=(F=N)!==null&&F!==void 0?F:e.selection,!!N){var q=!0;if(L.startsWith("delete")){if(ut.isExpanded(N)){var[$,K]=ut.edges(N),G=zt.leaf(e,$.path);if(G.text.length===$.offset&&K.offset===0){var Y=he.next(e,{at:$.path,match:Xt.isText});Y&&$e.equals(Y[1],K.path)&&(N={anchor:K,focus:K})}}var J=L.endsWith("Backward")?"backward":"forward",[V,re]=ut.edges(N),[fe,pe]=he.leaf(e,V.path),ce={text:"",start:V.offset,end:re.offset},xe=Qs.get(e),Ae=xe==null?void 0:xe.find(ke=>$e.equals(ke.path,pe)),Ee=Ae?[Ae.diff,ce]:[ce],ee=pre(fe.text,...Ee);if(ee.length===0&&(q=!1),ut.isExpanded(N)){if(q&&$e.equals(N.anchor.path,N.focus.path)){var Oe={path:N.anchor.path,offset:V.offset},le=he.range(e,Oe,Oe);return P(le),m(N.anchor.path,{text:"",end:re.offset,start:V.offset})}return g(()=>he.deleteFragment(e,{direction:J}),{at:N})}}switch(L){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return g(()=>he.deleteFragment(e),{at:N});case"deleteContent":case"deleteContentForward":{var{anchor:me}=N;if(q&&ut.isCollapsed(N)){var ne=zt.leaf(e,me.path);if(me.offset<ne.text.length)return m(me.path,{text:"",start:me.offset,end:me.offset+1})}return g(()=>he.deleteForward(e),{at:N})}case"deleteContentBackward":{var se,{anchor:ge}=N,Q=GF(H)?H.isCollapsed:!!((se=H)!==null&&se!==void 0&&se.collapsed);return q&&Q&&ut.isCollapsed(N)&&ge.offset>0?m(ge.path,{text:"",start:ge.offset-1,end:ge.offset}):g(()=>he.deleteBackward(e),{at:N})}case"deleteEntireSoftLine":return g(()=>{he.deleteBackward(e,{unit:"line"}),he.deleteForward(e,{unit:"line"})},{at:N});case"deleteHardLineBackward":return g(()=>he.deleteBackward(e,{unit:"block"}),{at:N});case"deleteSoftLineBackward":return g(()=>he.deleteBackward(e,{unit:"line"}),{at:N});case"deleteHardLineForward":return g(()=>he.deleteForward(e,{unit:"block"}),{at:N});case"deleteSoftLineForward":return g(()=>he.deleteForward(e,{unit:"line"}),{at:N});case"deleteWordBackward":return g(()=>he.deleteBackward(e,{unit:"word"}),{at:N});case"deleteWordForward":return g(()=>he.deleteForward(e,{unit:"word"}),{at:N});case"insertLineBreak":return g(()=>he.insertSoftBreak(e),{at:N});case"insertParagraph":return g(()=>he.insertBreak(e),{at:N});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(lot(U))return g(()=>qt.insertData(e,U),{at:N});var W=U!=null?U:"";if(ac.get(e)&&(W=W.replace("\uFEFF","")),L==="insertText"&&/.*\n.*\n$/.test(W)&&(W=W.slice(0,-1)),W.includes(`
`))return g(()=>{var ke=W.split(`
`);ke.forEach((De,nt)=>{De&&he.insertText(e,De),nt!==ke.length-1&&he.insertSoftBreak(e)})},{at:N});if($e.equals(N.anchor.path,N.focus.path)){var[ve,ue]=ut.edges(N),Me={start:ve.offset,end:ue.offset,text:W};if(W&&c&&L==="insertCompositionText"){var Pe=c.start+c.text.search(/\S|$/),je=Me.start+Me.text.search(/\S|$/);je===Pe+1&&Me.end===c.start+c.text.length?(Me.start-=1,c=null,_()):c=!1}else L==="insertText"?c===null?c=Me:c&&ut.isCollapsed(N)&&c.end+c.text.length===ve.offset?c=A_(A_({},c),{},{text:c.text+W}):c=!1:c=!1;if(q){m(ve.path,Me);return}}return g(()=>he.insertText(e,W),{at:N})}}}}},w=()=>!!pf.get(e),S=()=>{var R;return!!((R=Qs.get(e))!==null&&R!==void 0&&R.length)},D=()=>w()||S(),k=()=>i,P=R=>{mf.set(e,R),s&&(clearTimeout(s),s=null);var{selection:F}=e;if(R){var L=!F||!$e.equals(F.anchor.path,R.anchor.path),N=!F||!$e.equals(F.anchor.path.slice(0,-1),R.anchor.path.slice(0,-1));(L&&c||N)&&(c=!1),(L||S())&&(s=setTimeout(f,sot))}},M=()=>{(w()||!S())&&f()},T=R=>{S()||(v(!0),setTimeout(v))},_=()=>{w()||(a=setTimeout(f))},E=R=>{if(!(S()||w())&&R.some(L=>F5(e,L,R))){var F;(F=fre.get(e))===null||F===void 0||F()}};return{flush:f,scheduleFlush:_,hasPendingDiffs:S,hasPendingAction:w,hasPendingChanges:D,isFlushing:k,handleUserSelect:P,handleCompositionEnd:p,handleCompositionStart:b,handleDOMBeforeInput:x,handleKeyDown:T,handleDomMutations:E,handleInput:M}}function uot(){var t=A.useRef(!1);return A.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),t.current}var ow=kE?A.useLayoutEffect:A.useEffect;function dot(t,e,n){var[r]=A.useState(()=>new MutationObserver(e));ow(()=>{r.takeRecords()}),A.useEffect(()=>{if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return r.observe(t.current,n),()=>r.disconnect()},[r,t,n])}var fot=["node"];function h7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hot(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h7(Object(n),!0).forEach(function(r){au(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var pot={subtree:!0,childList:!0,characterData:!0},mot=Ds?t=>{var{node:e}=t,n=bA(t,fot);if(!Ds)return null;var r=mh(),i=uot(),[o]=A.useState(()=>cot(hot({editor:r},n)));return dot(e,o.handleDomMutations,pot),L5.set(r,o.scheduleFlush),i&&o.flush(),o}:()=>null;function p7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function got(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p7(Object(n),!0).forEach(function(r){au(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var vot=t=>{var{isLast:e,leaf:n,parent:r,text:i}=t,o=mh(),s=qt.findPath(o,i),a=$e.parent(s),l=!!n[hre];return o.isVoid(r)?Ot.createElement(gR,{length:zt.string(r).length}):n.text===""&&r.children[r.children.length-1]===i&&!o.isInline(r)&&he.string(o,a)===""?Ot.createElement(gR,{isLineBreak:!0,isMarkPlaceholder:l}):n.text===""?Ot.createElement(gR,{isMarkPlaceholder:l}):e&&n.text.slice(-1)===`
`?Ot.createElement(m7,{isTrailing:!0,text:n.text}):Ot.createElement(m7,{text:n.text})},m7=t=>{var{text:e,isTrailing:n=!1}=t,r=A.useRef(null),i=()=>"".concat(e!=null?e:"").concat(n?`
`:""),[o]=A.useState(i);return ow(()=>{var s=i();r.current&&r.current.textContent!==s&&(r.current.textContent=s)}),Ot.createElement(yot,{ref:r},o)},yot=A.memo(A.forwardRef((t,e)=>Ot.createElement("span",{"data-slate-string":!0,ref:e},t.children))),gR=t=>{var{length:e=0,isLineBreak:n=!1,isMarkPlaceholder:r=!1}=t,i={"data-slate-zero-width":n?"n":"z","data-slate-length":e};return r&&(i["data-slate-mark-placeholder"]=!0),Ot.createElement("span",got({},i),!(Ds||lre)||!n?"\uFEFF":null,n?Ot.createElement("br",null):null)};function g7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _re(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g7(Object(n),!0).forEach(function(r){au(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var xot=Ds?300:0;function bot(t,e){t.current&&(t.current.disconnect(),e&&(t.current=null))}function v7(t){t.current&&(clearTimeout(t.current),t.current=null)}var wot=t=>{var{leaf:e,isLast:n,text:r,parent:i,renderPlaceholder:o,renderLeaf:s=x=>Ot.createElement(_ot,_re({},x))}=t,a=mh(),l=A.useRef(null),c=A.useRef(null),[u,d]=A.useState(!1),f=A.useRef(null),p=A.useCallback(x=>{if(bot(l,x==null),x==null){var w;qF.delete(a),(w=e.onPlaceholderResize)===null||w===void 0||w.call(e,null)}else{if(qF.set(a,x),!l.current){var S=window.ResizeObserver||tot;l.current=new S(()=>{var D;(D=e.onPlaceholderResize)===null||D===void 0||D.call(e,x)})}l.current.observe(x),c.current=x}},[c,e,a]),b=Ot.createElement(vot,{isLast:n,leaf:e,parent:i,text:r}),v=!!e[r0];if(A.useEffect(()=>(v?f.current||(f.current=setTimeout(()=>{d(!0),f.current=null},xot)):(v7(f),d(!1)),()=>v7(f)),[v,d]),v&&u){var m={children:e.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:tp?"inherit":void 0},contentEditable:!1,ref:p}};b=Ot.createElement(Ot.Fragment,null,o(m),b)}var g={"data-slate-leaf":!0};return s({attributes:g,children:b,leaf:e,text:r})},Sot=Ot.memo(wot,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&Xt.equals(e.leaf,t.leaf)&&e.leaf[r0]===t.leaf[r0]),_ot=t=>{var{attributes:e,children:n}=t;return Ot.createElement("span",_re({},e),n)},Eot=t=>{for(var{decorations:e,isLast:n,parent:r,renderPlaceholder:i,renderLeaf:o,text:s}=t,a=mh(),l=A.useRef(null),c=Xt.decorations(s,e),u=qt.findKey(a,s),d=[],f=0;f<c.length;f++){var p=c[f];d.push(Ot.createElement(Sot,{isLast:n&&f===c.length-1,key:"".concat(u.id,"-").concat(f),renderPlaceholder:i,leaf:p,text:s,parent:r,renderLeaf:o}))}var b=A.useCallback(v=>{var m=_2.get(a);v?(m==null||m.set(u,v),Fp.set(s,v),nw.set(v,s)):(m==null||m.delete(u),Fp.delete(s),l.current&&nw.delete(l.current)),l.current=v},[l,a,u,s]);return Ot.createElement("span",{"data-slate-node":"text",ref:b},d)},Ere=Ot.memo(Eot,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&Fit(e.decorations,t.decorations));function y7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y7(Object(n),!0).forEach(function(r){au(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Cot=t=>{var{decorations:e,element:n,renderElement:r=x=>Ot.createElement(Tot,JF({},x)),renderPlaceholder:i,renderLeaf:o,selection:s}=t,a=mh(),l=Dot(),c=a.isInline(n),u=qt.findKey(a,n),d=A.useCallback(x=>{var w=_2.get(a);x?(w==null||w.set(u,x),Fp.set(n,x),nw.set(x,n)):(w==null||w.delete(u),Fp.delete(n))},[a,u,n]),f=Are({decorations:e,node:n,renderElement:r,renderPlaceholder:i,renderLeaf:o,selection:s}),p={"data-slate-node":"element",ref:d};if(c&&(p["data-slate-inline"]=!0),!c&&he.hasInlines(a,n)){var b=zt.string(n),v=Zne(b);v==="rtl"&&(p.dir=v)}if(he.isVoid(a,n)){p["data-slate-void"]=!0,!l&&c&&(p.contentEditable=!1);var m=c?"span":"div",[[g]]=zt.texts(n);f=Ot.createElement(m,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},Ot.createElement(Ere,{renderPlaceholder:i,decorations:[],isLast:!1,parent:n,text:g})),O5.set(g,0),N5.set(g,n)}return r({attributes:p,children:f,element:n})},Aot=Ot.memo(Cot,(t,e)=>t.element===e.element&&t.renderElement===e.renderElement&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&Iit(t.decorations,e.decorations)&&(t.selection===e.selection||!!t.selection&&!!e.selection&&ut.equals(t.selection,e.selection))),Tot=t=>{var{attributes:e,children:n,element:r}=t,i=mh(),o=i.isInline(r)?"span":"div";return Ot.createElement(o,JF(JF({},e),{},{style:{position:"relative"}}),n)},Cre=A.createContext(()=>[]),Mot=()=>A.useContext(Cre),Pot=A.createContext(!1),Are=t=>{var{decorations:e,node:n,renderElement:r,renderPlaceholder:i,renderLeaf:o,selection:s}=t,a=Mot(),l=mh();yv.set(l,!1);for(var c=qt.findPath(l,n),u=[],d=on.isElement(n)&&!l.isInline(n)&&he.hasInlines(l,n),f=0;f<n.children.length;f++){var p=c.concat(f),b=n.children[f],v=qt.findKey(l,b),m=he.range(l,p),g=s&&ut.intersection(m,s),x=a([b,p]);for(var w of e){var S=ut.intersection(w,m);S&&x.push(S)}on.isElement(b)?u.push(Ot.createElement(Pot.Provider,{key:"provider-".concat(v.id),value:!!g},Ot.createElement(Aot,{decorations:x,element:b,key:v.id,renderElement:r,renderPlaceholder:i,renderLeaf:o,selection:g}))):u.push(Ot.createElement(Ere,{decorations:x,key:v.id,isLast:d&&f===n.children.length-1,parent:n,renderPlaceholder:i,renderLeaf:o,text:b})),O5.set(b,f),N5.set(b,n)}return u},Tre=A.createContext(!1),Dot=()=>A.useContext(Tre),Mre=A.createContext(null),Pre=()=>{var t=A.useContext(Mre);if(!t)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:e}=t;return e};function Rot(){var t=mh(),e=A.useRef(!1),n=A.useRef(0),r=A.useCallback(()=>{if(!e.current){e.current=!0;var i=qt.getWindow(t);i.cancelAnimationFrame(n.current),n.current=i.requestAnimationFrame(()=>{e.current=!1})}},[t]);return A.useEffect(()=>()=>cancelAnimationFrame(n.current),[]),{receivedUserInput:e,onUserInput:r}}var kot=(t,e)=>{var n=[],r=()=>{n=[]},i=s=>{if(e.current){var a=s.filter(l=>F5(t,l,s));n.push(...a)}};function o(){n.length>0&&(n.reverse().forEach(s=>{s.type!=="characterData"&&(s.removedNodes.forEach(a=>{s.target.insertBefore(a,s.nextSibling)}),s.addedNodes.forEach(a=>{s.target.removeChild(a)}))}),r())}return{registerMutations:i,restoreDOM:o,clear:r}},Iot={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class Dre extends A.Component{constructor(){super(...arguments),au(this,"context",null),au(this,"manager",null),au(this,"mutationObserver",null)}observe(){var e,{node:n}=this.props;if(!n.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(e=this.mutationObserver)===null||e===void 0||e.observe(n.current,Iot)}componentDidMount(){var{receivedUserInput:e}=this.props,n=this.context;this.manager=kot(n,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,n,r,i=(e=this.mutationObserver)===null||e===void 0?void 0:e.takeRecords();if(i!=null&&i.length){var o;(o=this.manager)===null||o===void 0||o.registerMutations(i)}return(n=this.mutationObserver)===null||n===void 0||n.disconnect(),(r=this.manager)===null||r===void 0||r.restoreDOM(),null}componentDidUpdate(){var e;(e=this.manager)===null||e===void 0||e.clear(),this.observe()}componentWillUnmount(){var e;(e=this.mutationObserver)===null||e===void 0||e.disconnect()}render(){return this.props.children}}au(Dre,"contextType",j5);var Fot=Ds?Dre:t=>{var{children:e}=t;return Ot.createElement(Ot.Fragment,null,e)},Oot=A.createContext(!1),Not=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],Lot=["text"];function x7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x7(Object(n),!0).forEach(function(r){au(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Bot=t=>Ot.createElement(Ot.Fragment,null,Are(t)),jot=A.forwardRef((t,e)=>{var n=A.useCallback(V=>Ot.createElement(Uot,Dc({},V)),[]),{autoFocus:r,decorate:i=zot,onDOMBeforeInput:o,placeholder:s,readOnly:a=!1,renderElement:l,renderLeaf:c,renderPlaceholder:u=n,scrollSelectionIntoView:d=Vot,style:f={},as:p="div",disableDefaultStyles:b=!1}=t,v=bA(t,Not),m=Pre(),[g,x]=A.useState(!1),w=A.useRef(null),S=A.useRef([]),[D,k]=A.useState(),P=A.useRef(!1),{onUserInput:M,receivedUserInput:T}=Rot(),[,_]=A.useReducer(V=>V+1,0);fre.set(m,_),KF.set(m,a);var E=A.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);A.useEffect(()=>{w.current&&r&&w.current.focus()},[r]);var R=A.useRef(),F=A.useMemo(()=>$rt(()=>{if(yv.get(m)){F();return}var V=qt.toDOMNode(m,m),re=V.getRootNode();if(!P.current&&tp&&re instanceof ShadowRoot){P.current=!0;var fe=oit();fe?document.execCommand("indent"):Pt.deselect(m),P.current=!1;return}var pe=R.current;if((Ds||!qt.isComposing(m))&&(!E.isUpdatingSelection||pe!=null&&pe.isFlushing())&&!E.isDraggingInternally){var ce=qt.findDocumentOrShadowRoot(m),{activeElement:xe}=ce,Ae=qt.toDOMNode(m,m),Ee=zx(ce);if(xe===Ae?(E.latestElement=xe,Rf.set(m,!0)):Rf.delete(m),!Ee)return Pt.deselect(m);var{anchorNode:ee,focusNode:Oe}=Ee,le=qt.hasEditableTarget(m,ee)||qt.isTargetInsideNonReadonlyVoid(m,ee),me=qt.hasTarget(m,Oe);if(le&&me){var ne=qt.toSlateRange(m,Ee,{exactMatch:!1,suppressThrow:!0});ne&&(!qt.isComposing(m)&&!(pe!=null&&pe.hasPendingChanges())&&!(pe!=null&&pe.isFlushing())?Pt.select(m,ne):pe==null||pe.handleUserSelect(ne))}a&&(!le||!me)&&Pt.deselect(m)}},100),[m,a,E]),L=A.useMemo(()=>Brt(F,0),[F]);R.current=mot({node:w,onDOMSelectionChange:F,scheduleOnDOMSelectionChange:L}),ow(()=>{var V,re,fe;w.current&&(fe=I5(w.current))?(dre.set(m,fe),IE.set(m,w.current),Fp.set(m,w.current),nw.set(w.current,m)):Fp.delete(m);var{selection:pe}=m,ce=qt.findDocumentOrShadowRoot(m),xe=zx(ce);if(!(!xe||!qt.isFocused(m)||(V=R.current)!==null&&V!==void 0&&V.hasPendingAction())){var Ae=le=>{var me=xe.type!=="None";if(!(!pe&&!me)){var ne=xe.focusNode,se;if(Hg&&xe.rangeCount>1){var ge=xe.getRangeAt(0),Q=xe.getRangeAt(xe.rangeCount-1);ge.startContainer===ne?se=Q.endContainer:se=ge.startContainer}else se=xe.anchorNode;var W=IE.get(m),ve=!1;if(W.contains(se)&&W.contains(ne)&&(ve=!0),me&&ve&&pe&&!le){var ue=qt.toSlateRange(m,xe,{exactMatch:!0,suppressThrow:!0});if(ue&&ut.equals(ue,pe)){var Me;if(!E.hasMarkPlaceholder||(Me=se)!==null&&Me!==void 0&&(Me=Me.parentElement)!==null&&Me!==void 0&&Me.hasAttribute("data-slate-mark-placeholder"))return}}if(pe&&!qt.hasRange(m,pe)){m.selection=qt.toSlateRange(m,xe,{exactMatch:!1,suppressThrow:!0});return}E.isUpdatingSelection=!0;var Pe=null;try{Pe=pe&&qt.toDOMRange(m,pe)}catch(je){}return Pe?(qt.isComposing(m)&&!Ds?xe.collapseToEnd():ut.isBackward(pe)?xe.setBaseAndExtent(Pe.endContainer,Pe.endOffset,Pe.startContainer,Pe.startOffset):xe.setBaseAndExtent(Pe.startContainer,Pe.startOffset,Pe.endContainer,Pe.endOffset),d(m,Pe)):xe.removeAllRanges(),Pe}};xe.rangeCount<=1&&Ae();var Ee=((re=R.current)===null||re===void 0?void 0:re.isFlushing())==="action";if(!Ds||!Ee){setTimeout(()=>{E.isUpdatingSelection=!1});return}var ee=null,Oe=requestAnimationFrame(()=>{if(Ee){var le=me=>{try{var ne=qt.toDOMNode(m,m);ne.focus(),Ae(me)}catch(se){}};le(),ee=setTimeout(()=>{le(!0),E.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(Oe),ee&&clearTimeout(ee)}}});var N=A.useCallback(V=>{w7(m,V);var re=qt.toDOMNode(m,m),fe=re.getRootNode();if(P!=null&&P.current&&tp&&fe instanceof ShadowRoot){var pe=V.getTargetRanges(),ce=pe[0],xe=new window.Range;xe.setStart(ce.startContainer,ce.startOffset),xe.setEnd(ce.endContainer,ce.endOffset);var Ae=qt.toSlateRange(m,xe,{exactMatch:!1,suppressThrow:!1});Pt.select(m,Ae),V.preventDefault(),V.stopImmediatePropagation();return}if(M(),!a&&qt.hasEditableTarget(m,V.target)&&!Wot(V,o)){var Ee;if(R.current)return R.current.handleDOMBeforeInput(V);L.flush(),F.flush();var{selection:ee}=m,{inputType:Oe}=V,le=V.dataTransfer||V.data||void 0,me=Oe==="insertCompositionText"||Oe==="deleteCompositionText";if(me&&qt.isComposing(m))return;var ne=!1;if(Oe==="insertText"&&ee&&ut.isCollapsed(ee)&&V.data&&V.data.length===1&&/[a-z ]/i.test(V.data)&&ee.anchor.offset!==0&&(ne=!0,m.marks&&(ne=!1),!yv.get(m))){var se,ge,{anchor:Q}=ee,[W,ve]=qt.toDOMPoint(m,Q),ue=(se=W.parentElement)===null||se===void 0?void 0:se.closest("a"),Me=qt.getWindow(m);if(ne&&ue&&qt.hasDOMNode(m,ue)){var Pe,je=Me==null?void 0:Me.document.createTreeWalker(ue,NodeFilter.SHOW_TEXT).lastChild();je===W&&((Pe=je.textContent)===null||Pe===void 0?void 0:Pe.length)===ve&&(ne=!1)}if(ne&&W.parentElement&&(Me==null||(ge=Me.getComputedStyle(W.parentElement))===null||ge===void 0?void 0:ge.whiteSpace)==="pre"){var ke=he.above(m,{at:Q.path,match:Ve=>on.isElement(Ve)&&he.isBlock(m,Ve)});ke&&zt.string(ke[0]).includes("	")&&(ne=!1)}}if((!Oe.startsWith("delete")||Oe.startsWith("deleteBy"))&&!yv.get(m)){var[De]=V.getTargetRanges();if(De){var nt=qt.toSlateRange(m,De,{exactMatch:!1,suppressThrow:!1});if(!ee||!ut.equals(ee,nt)){ne=!1;var be=!me&&m.selection&&he.rangeRef(m,m.selection);Pt.select(m,nt),be&&Vx.set(m,be)}}}if(me)return;if(ne||V.preventDefault(),ee&&ut.isExpanded(ee)&&Oe.startsWith("delete")){var Ne=Oe.endsWith("Backward")?"backward":"forward";he.deleteFragment(m,{direction:Ne});return}switch(Oe){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{he.deleteFragment(m);break}case"deleteContent":case"deleteContentForward":{he.deleteForward(m);break}case"deleteContentBackward":{he.deleteBackward(m);break}case"deleteEntireSoftLine":{he.deleteBackward(m,{unit:"line"}),he.deleteForward(m,{unit:"line"});break}case"deleteHardLineBackward":{he.deleteBackward(m,{unit:"block"});break}case"deleteSoftLineBackward":{he.deleteBackward(m,{unit:"line"});break}case"deleteHardLineForward":{he.deleteForward(m,{unit:"block"});break}case"deleteSoftLineForward":{he.deleteForward(m,{unit:"line"});break}case"deleteWordBackward":{he.deleteBackward(m,{unit:"word"});break}case"deleteWordForward":{he.deleteForward(m,{unit:"word"});break}case"insertLineBreak":he.insertSoftBreak(m);break;case"insertParagraph":{he.insertBreak(m);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{Oe==="insertFromComposition"&&qt.isComposing(m)&&(x(!1),xp.set(m,!1)),(le==null?void 0:le.constructor.name)==="DataTransfer"?qt.insertData(m,le):typeof le=="string"&&(ne?S.current.push(()=>he.insertText(m,le)):he.insertText(m,le));break}}var Ie=(Ee=Vx.get(m))===null||Ee===void 0?void 0:Ee.unref();Vx.delete(m),Ie&&(!m.selection||!ut.equals(m.selection,Ie))&&Pt.select(m,Ie)}},[m,F,M,o,a,L]),U=A.useCallback(V=>{V==null?(F.cancel(),L.cancel(),IE.delete(m),Fp.delete(m),w.current&&of&&w.current.removeEventListener("beforeinput",N)):of&&V.addEventListener("beforeinput",N),w.current=V,typeof e=="function"?e(V):e&&(e.current=V)},[F,L,m,N,e]);ow(()=>{var V=qt.getWindow(m),re=pe=>{var{target:ce}=pe,xe=ce instanceof HTMLElement?ce:null,Ae=xe==null?void 0:xe.tagName;Ae==="INPUT"||Ae==="TEXTAREA"||L()};V.document.addEventListener("selectionchange",re);var fe=()=>{E.isDraggingInternally=!1};return V.document.addEventListener("dragend",fe),V.document.addEventListener("drop",fe),()=>{V.document.removeEventListener("selectionchange",re),V.document.removeEventListener("dragend",fe),V.document.removeEventListener("drop",fe)}},[L,E]);var H=i([m,[]]),j=s&&m.children.length===1&&Array.from(zt.texts(m)).length===1&&zt.string(m)===""&&!g,z=A.useCallback(V=>{if(V&&j){var re;k((re=V.getBoundingClientRect())===null||re===void 0?void 0:re.height)}else k(void 0)},[j]);if(j){var q=he.start(m,[]);H.push({[r0]:!0,placeholder:s,onPlaceholderResize:z,anchor:q,focus:q})}var{marks:$}=m;if(E.hasMarkPlaceholder=!1,m.selection&&ut.isCollapsed(m.selection)&&$){var{anchor:K}=m.selection,G=zt.leaf(m,K.path),Y=bA(G,Lot);if(!Xt.equals(G,$,{loose:!0})){E.hasMarkPlaceholder=!0;var J=Object.fromEntries(Object.keys(Y).map(V=>[V,null]));H.push(Dc(Dc(Dc({[hre]:!0},J),$),{},{anchor:K,focus:K}))}}return A.useEffect(()=>{setTimeout(()=>{var{selection:V}=m;if(V){var{anchor:re}=V,fe=zt.leaf(m,re.path);if($&&!Xt.equals(fe,$,{loose:!0})){ac.set(m,$);return}}ac.delete(m)})}),Ot.createElement(Tre.Provider,{value:a},Ot.createElement(Oot.Provider,{value:g},Ot.createElement(Cre.Provider,{value:i},Ot.createElement(Fot,{node:w,receivedUserInput:T},Ot.createElement(p,Dc(Dc({role:a?void 0:"textbox","aria-multiline":a?void 0:!0},v),{},{spellCheck:of||!kE?v.spellCheck:!1,autoCorrect:of||!kE?v.autoCorrect:"false",autoCapitalize:of||!kE?v.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!a,zindex:-1,suppressContentEditableWarning:!0,ref:U,style:Dc(Dc({},b?{}:Dc({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},D?{minHeight:D}:{})),f),onBeforeInput:A.useCallback(V=>{if(!of&&!a&&!_s(V,v.onBeforeInput)&&qt.hasSelectableTarget(m,V.target)&&(V.preventDefault(),!qt.isComposing(m))){var re=V.data;he.insertText(m,re)}},[v.onBeforeInput,m,a]),onInput:A.useCallback(V=>{if(!_s(V,v.onInput)){if(R.current){R.current.handleInput();return}for(var re of S.current)re();S.current=[],qt.isFocused(m)||w7(m,V.nativeEvent)}},[v.onInput,m]),onBlur:A.useCallback(V=>{if(!(a||E.isUpdatingSelection||!qt.hasSelectableTarget(m,V.target)||_s(V,v.onBlur))){var re=qt.findDocumentOrShadowRoot(m);if(E.latestElement!==re.activeElement){var{relatedTarget:fe}=V,pe=qt.toDOMNode(m,m);if(fe!==pe&&!(dl(fe)&&fe.hasAttribute("data-slate-spacer"))){if(fe!=null&&oh(fe)&&qt.hasDOMNode(m,fe)){var ce=qt.toSlateNode(m,fe);if(on.isElement(ce)&&!m.isVoid(ce))return}if(tp){var xe=zx(re);xe==null||xe.removeAllRanges()}Rf.delete(m)}}}},[a,E.isUpdatingSelection,E.latestElement,m,v.onBlur]),onClick:A.useCallback(V=>{if(qt.hasTarget(m,V.target)&&!_s(V,v.onClick)&&oh(V.target)){var re=qt.toSlateNode(m,V.target),fe=qt.findPath(m,re);if(!he.hasPath(m,fe)||zt.get(m,fe)!==re)return;if(V.detail===Cit&&fe.length>=1){var pe=fe;if(!(on.isElement(re)&&he.isBlock(m,re))){var ce,xe=he.above(m,{match:ne=>on.isElement(ne)&&he.isBlock(m,ne),at:fe});pe=(ce=xe==null?void 0:xe[1])!==null&&ce!==void 0?ce:fe.slice(0,1)}var Ae=he.range(m,pe);Pt.select(m,Ae);return}if(a)return;var Ee=he.start(m,fe),ee=he.end(m,fe),Oe=he.void(m,{at:Ee}),le=he.void(m,{at:ee});if(Oe&&le&&$e.equals(Oe[1],le[1])){var me=he.range(m,Ee);Pt.select(m,me)}}},[m,v.onClick,a]),onCompositionEnd:A.useCallback(V=>{if(qt.hasSelectableTarget(m,V.target)){var re;if(qt.isComposing(m)&&Promise.resolve().then(()=>{x(!1),xp.set(m,!1)}),(re=R.current)===null||re===void 0||re.handleCompositionEnd(V),_s(V,v.onCompositionEnd)||Ds)return;if(!tp&&!uit&&!lre&&!fit&&!dit&&V.data){var fe=ac.get(m);ac.delete(m),fe!==void 0&&(ed.set(m,m.marks),m.marks=fe),he.insertText(m,V.data);var pe=ed.get(m);ed.delete(m),pe!==void 0&&(m.marks=pe)}}},[v.onCompositionEnd,m]),onCompositionUpdate:A.useCallback(V=>{qt.hasSelectableTarget(m,V.target)&&!_s(V,v.onCompositionUpdate)&&(qt.isComposing(m)||(x(!0),xp.set(m,!0)))},[v.onCompositionUpdate,m]),onCompositionStart:A.useCallback(V=>{if(qt.hasSelectableTarget(m,V.target)){var re;if((re=R.current)===null||re===void 0||re.handleCompositionStart(V),_s(V,v.onCompositionStart)||Ds)return;x(!0);var{selection:fe}=m;if(fe&&ut.isExpanded(fe)){he.deleteFragment(m);return}}},[v.onCompositionStart,m]),onCopy:A.useCallback(V=>{qt.hasSelectableTarget(m,V.target)&&!_s(V,v.onCopy)&&!b7(V)&&(V.preventDefault(),qt.setFragmentData(m,V.clipboardData,"copy"))},[v.onCopy,m]),onCut:A.useCallback(V=>{if(!a&&qt.hasSelectableTarget(m,V.target)&&!_s(V,v.onCut)&&!b7(V)){V.preventDefault(),qt.setFragmentData(m,V.clipboardData,"cut");var{selection:re}=m;if(re)if(ut.isExpanded(re))he.deleteFragment(m);else{var fe=zt.parent(m,re.anchor.path);he.isVoid(m,fe)&&Pt.delete(m)}}},[a,m,v.onCut]),onDragOver:A.useCallback(V=>{if(qt.hasTarget(m,V.target)&&!_s(V,v.onDragOver)){var re=qt.toSlateNode(m,V.target);on.isElement(re)&&he.isVoid(m,re)&&V.preventDefault()}},[v.onDragOver,m]),onDragStart:A.useCallback(V=>{if(!a&&qt.hasTarget(m,V.target)&&!_s(V,v.onDragStart)){var re=qt.toSlateNode(m,V.target),fe=qt.findPath(m,re),pe=on.isElement(re)&&he.isVoid(m,re)||he.void(m,{at:fe,voids:!0});if(pe){var ce=he.range(m,fe);Pt.select(m,ce)}E.isDraggingInternally=!0,qt.setFragmentData(m,V.dataTransfer,"drag")}},[a,m,v.onDragStart,E]),onDrop:A.useCallback(V=>{if(!a&&qt.hasTarget(m,V.target)&&!_s(V,v.onDrop)){V.preventDefault();var re=m.selection,fe=qt.findEventRange(m,V),pe=V.dataTransfer;Pt.select(m,fe),E.isDraggingInternally&&re&&!ut.equals(re,fe)&&!he.void(m,{at:fe,voids:!0})&&Pt.delete(m,{at:re}),qt.insertData(m,pe),qt.isFocused(m)||qt.focus(m)}},[a,m,v.onDrop,E]),onDragEnd:A.useCallback(V=>{!a&&E.isDraggingInternally&&v.onDragEnd&&qt.hasTarget(m,V.target)&&v.onDragEnd(V)},[a,E,v,m]),onFocus:A.useCallback(V=>{if(!a&&!E.isUpdatingSelection&&qt.hasEditableTarget(m,V.target)&&!_s(V,v.onFocus)){var re=qt.toDOMNode(m,m),fe=qt.findDocumentOrShadowRoot(m);if(E.latestElement=fe.activeElement,Hg&&V.target!==re){re.focus();return}Rf.set(m,!0)}},[a,E,m,v.onFocus]),onKeyDown:A.useCallback(V=>{if(!a&&qt.hasEditableTarget(m,V.target)){var re;(re=R.current)===null||re===void 0||re.handleKeyDown(V);var{nativeEvent:fe}=V;if(qt.isComposing(m)&&fe.isComposing===!1&&(xp.set(m,!1),x(!1)),_s(V,v.onKeyDown)||qt.isComposing(m))return;var{selection:pe}=m,ce=m.children[pe!==null?pe.focus.path[0]:0],xe=Zne(zt.string(ce))==="rtl";if(Pi.isRedo(fe)){V.preventDefault();var Ae=m;typeof Ae.redo=="function"&&Ae.redo();return}if(Pi.isUndo(fe)){V.preventDefault();var Ee=m;typeof Ee.undo=="function"&&Ee.undo();return}if(Pi.isMoveLineBackward(fe)){V.preventDefault(),Pt.move(m,{unit:"line",reverse:!0});return}if(Pi.isMoveLineForward(fe)){V.preventDefault(),Pt.move(m,{unit:"line"});return}if(Pi.isExtendLineBackward(fe)){V.preventDefault(),Pt.move(m,{unit:"line",edge:"focus",reverse:!0});return}if(Pi.isExtendLineForward(fe)){V.preventDefault(),Pt.move(m,{unit:"line",edge:"focus"});return}if(Pi.isMoveBackward(fe)){V.preventDefault(),pe&&ut.isCollapsed(pe)?Pt.move(m,{reverse:!xe}):Pt.collapse(m,{edge:xe?"end":"start"});return}if(Pi.isMoveForward(fe)){V.preventDefault(),pe&&ut.isCollapsed(pe)?Pt.move(m,{reverse:xe}):Pt.collapse(m,{edge:xe?"start":"end"});return}if(Pi.isMoveWordBackward(fe)){V.preventDefault(),pe&&ut.isExpanded(pe)&&Pt.collapse(m,{edge:"focus"}),Pt.move(m,{unit:"word",reverse:!xe});return}if(Pi.isMoveWordForward(fe)){V.preventDefault(),pe&&ut.isExpanded(pe)&&Pt.collapse(m,{edge:"focus"}),Pt.move(m,{unit:"word",reverse:xe});return}if(of){if((cre||tp)&&pe&&(Pi.isDeleteBackward(fe)||Pi.isDeleteForward(fe))&&ut.isCollapsed(pe)){var ee=zt.parent(m,pe.anchor.path);if(on.isElement(ee)&&he.isVoid(m,ee)&&(he.isInline(m,ee)||he.isBlock(m,ee))){V.preventDefault(),he.deleteBackward(m,{unit:"block"});return}}}else{if(Pi.isBold(fe)||Pi.isItalic(fe)||Pi.isTransposeCharacter(fe)){V.preventDefault();return}if(Pi.isSoftBreak(fe)){V.preventDefault(),he.insertSoftBreak(m);return}if(Pi.isSplitBlock(fe)){V.preventDefault(),he.insertBreak(m);return}if(Pi.isDeleteBackward(fe)){V.preventDefault(),pe&&ut.isExpanded(pe)?he.deleteFragment(m,{direction:"backward"}):he.deleteBackward(m);return}if(Pi.isDeleteForward(fe)){V.preventDefault(),pe&&ut.isExpanded(pe)?he.deleteFragment(m,{direction:"forward"}):he.deleteForward(m);return}if(Pi.isDeleteLineBackward(fe)){V.preventDefault(),pe&&ut.isExpanded(pe)?he.deleteFragment(m,{direction:"backward"}):he.deleteBackward(m,{unit:"line"});return}if(Pi.isDeleteLineForward(fe)){V.preventDefault(),pe&&ut.isExpanded(pe)?he.deleteFragment(m,{direction:"forward"}):he.deleteForward(m,{unit:"line"});return}if(Pi.isDeleteWordBackward(fe)){V.preventDefault(),pe&&ut.isExpanded(pe)?he.deleteFragment(m,{direction:"backward"}):he.deleteBackward(m,{unit:"word"});return}if(Pi.isDeleteWordForward(fe)){V.preventDefault(),pe&&ut.isExpanded(pe)?he.deleteFragment(m,{direction:"forward"}):he.deleteForward(m,{unit:"word"});return}}}},[a,m,v.onKeyDown]),onPaste:A.useCallback(V=>{!a&&qt.hasEditableTarget(m,V.target)&&!_s(V,v.onPaste)&&(!of||Jrt(V.nativeEvent)||tp)&&(V.preventDefault(),qt.insertData(m,V.clipboardData))},[a,m,v.onPaste])}),Ot.createElement(Bot,{decorations:H,node:m,renderElement:l,renderPlaceholder:u,renderLeaf:c,selection:m.selection}))))))}),Uot=t=>{var{attributes:e,children:n}=t;return Ot.createElement("span",Dc({},e),n,Ds&&Ot.createElement("br",null))},zot=()=>[],Vot=(t,e)=>{if(e.getBoundingClientRect&&(!t.selection||t.selection&&ut.isCollapsed(t.selection))){var n=e.startContainer.parentElement;n.getBoundingClientRect=e.getBoundingClientRect.bind(e),qrt(n,{scrollMode:"if-needed"}),delete n.getBoundingClientRect}},_s=(t,e)=>{if(!e)return!1;var n=e(t);return n!=null?n:t.isDefaultPrevented()||t.isPropagationStopped()},b7=t=>oh(t.target)&&(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement),Wot=(t,e)=>{if(!e)return!1;var n=e(t);return n!=null?n:t.defaultPrevented},w7=(t,e)=>{var n=t;if(e.inputType==="historyUndo"&&typeof n.undo=="function"){n.undo();return}if(e.inputType==="historyRedo"&&typeof n.redo=="function"){n.redo();return}},$ot=A.createContext(!1),Hot=A.createContext({});function Got(t){var e=A.useRef([]).current,n=A.useRef({editor:t}).current,r=A.useCallback(o=>{n.editor=o,e.forEach(s=>s(o))},[e,n]),i=A.useMemo(()=>({getSlate:()=>n.editor,addEventListener:o=>(e.push(o),()=>{e.splice(e.indexOf(o),1)})}),[e,n]);return{selectorContext:i,onChange:r}}var Rre=parseInt(Ot.version.split(".")[0],10),qot=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],Kot=t=>{var{editor:e,children:n,onChange:r,onSelectionChange:i,onValueChange:o,initialValue:s}=t,a=bA(t,qot),[l,c]=Ot.useState(()=>{if(!zt.isNodeList(s))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(Io.stringify(s)));if(!he.isEditor(e))throw new Error("[Slate] editor is invalid! You passed: ".concat(Io.stringify(e)));return e.children=s,Object.assign(e,a),{v:0,editor:e}}),{selectorContext:u,onChange:d}=Got(e),f=A.useCallback(v=>{var m;switch(r&&r(e.children),v==null||(m=v.operation)===null||m===void 0?void 0:m.type){case"set_selection":i==null||i(e.selection);break;default:o==null||o(e.children)}c(g=>({v:g.v+1,editor:e})),d(e)},[e,d,r,i,o]);A.useEffect(()=>(YF.set(e,f),()=>{YF.set(e,()=>{})}),[e,f]);var[p,b]=A.useState(qt.isFocused(e));return A.useEffect(()=>{b(qt.isFocused(e))},[e]),ow(()=>{var v=()=>b(qt.isFocused(e));return Rre>=17?(document.addEventListener("focusin",v),document.addEventListener("focusout",v),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",v)}):(document.addEventListener("focus",v,!0),document.addEventListener("blur",v,!0),()=>{document.removeEventListener("focus",v,!0),document.removeEventListener("blur",v,!0)})},[]),Ot.createElement(Hot.Provider,{value:u},Ot.createElement(Mre.Provider,{value:l},Ot.createElement(j5.Provider,{value:l.editor},Ot.createElement($ot.Provider,{value:p},n))))},Yot=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",r=e;r=Eit(r,n);var{onChange:i}=r;return r.onChange=o=>{var s=Rre<18?Nfe.unstable_batchedUpdates:a=>a();s(()=>{i(o)})},r},Xot={isHistory(t){return Vo(t)&&Array.isArray(t.redos)&&Array.isArray(t.undos)&&(t.redos.length===0||Df.isOperationList(t.redos[0].operations))&&(t.undos.length===0||Df.isOperationList(t.undos[0].operations))}},vR=new WeakMap,Wh=new WeakMap,T_=new WeakMap,Nc={isHistoryEditor(t){return Xot.isHistory(t.history)&&he.isEditor(t)},isMerging(t){return Wh.get(t)},isSplittingOnce(t){return T_.get(t)},setSplittingOnce(t,e){T_.set(t,e)},isSaving(t){return vR.get(t)},redo(t){t.redo()},undo(t){t.undo()},withMerging(t,e){var n=Nc.isMerging(t);Wh.set(t,!0),e(),Wh.set(t,n)},withNewBatch(t,e){var n=Nc.isMerging(t);Wh.set(t,!0),T_.set(t,!0),e(),Wh.set(t,n),T_.delete(t)},withoutMerging(t,e){var n=Nc.isMerging(t);Wh.set(t,!1),e(),Wh.set(t,n)},withoutSaving(t,e){var n=Nc.isSaving(t);vR.set(t,!1);try{e()}finally{vR.set(t,n)}}},Qot=t=>{var e=t,{apply:n}=e;return e.history={undos:[],redos:[]},e.redo=()=>{var{history:r}=e,{redos:i}=r;if(i.length>0){var o=i[i.length-1];o.selectionBefore&&Pt.setSelection(e,o.selectionBefore),Nc.withoutSaving(e,()=>{he.withoutNormalizing(e,()=>{for(var s of o.operations)e.apply(s)})}),r.redos.pop(),e.writeHistory("undos",o)}},e.undo=()=>{var{history:r}=e,{undos:i}=r;if(i.length>0){var o=i[i.length-1];Nc.withoutSaving(e,()=>{he.withoutNormalizing(e,()=>{var s=o.operations.map(Df.inverse).reverse();for(var a of s)e.apply(a);o.selectionBefore&&Pt.setSelection(e,o.selectionBefore)})}),e.writeHistory("redos",o),r.undos.pop()}},e.apply=r=>{var{operations:i,history:o}=e,{undos:s}=o,a=s[s.length-1],l=a&&a.operations[a.operations.length-1],c=Nc.isSaving(e),u=Nc.isMerging(e);if(c==null&&(c=Jot(r)),c){if(u==null&&(a==null?u=!1:i.length!==0?u=!0:u=Zot(r,l)),Nc.isSplittingOnce(e)&&(u=!1,Nc.setSplittingOnce(e,void 0)),a&&u)a.operations.push(r);else{var d={operations:[r],selectionBefore:e.selection};e.writeHistory("undos",d)}for(;s.length>100;)s.shift();o.redos=[]}n(r)},e.writeHistory=(r,i)=>{e.history[r].push(i)},e},Zot=(t,e)=>!!(e&&t.type==="insert_text"&&e.type==="insert_text"&&t.offset===e.offset+e.text.length&&$e.equals(t.path,e.path)||e&&t.type==="remove_text"&&e.type==="remove_text"&&t.offset+t.text.length===e.offset&&$e.equals(t.path,e.path)),Jot=(t,e)=>t.type!=="set_selection",kre={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},S7=Ot.createContext&&Ot.createContext(kre),est=["attr","size","title"];function tst(t,e){if(t==null)return{};var n=nst(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nst(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function wA(){return wA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wA.apply(this,arguments)}function _7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_7(Object(n),!0).forEach(function(r){rst(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rst(t,e,n){return e=ist(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ist(t){var e=ost(t,"string");return typeof e=="symbol"?e:e+""}function ost(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ire(t){return t&&t.map((e,n)=>Ot.createElement(e.tag,SA({key:n},e.attr),Ire(e.child)))}function o1(t){return e=>Ot.createElement(sst,wA({attr:SA({},t.attr)},e),Ire(t.child))}function sst(t){var e=n=>{var{attr:r,size:i,title:o}=t,s=tst(t,est),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),Ot.createElement("svg",wA({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:l,style:SA(SA({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&Ot.createElement("title",null,o),t.children)};return S7!==void 0?Ot.createElement(S7.Consumer,null,n=>e(n)):e(kre)}function ast(t){return o1({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M17.061 11.22A4.46 4.46 0 0 0 18 8.5C18 6.019 15.981 4 13.5 4H6v15h8c2.481 0 4.5-2.019 4.5-4.5a4.48 4.48 0 0 0-1.439-3.28zM13.5 7c.827 0 1.5.673 1.5 1.5s-.673 1.5-1.5 1.5H9V7h4.5zm.5 9H9v-3h5c.827 0 1.5.673 1.5 1.5S14.827 16 14 16z"},child:[]}]})(t)}function lst(t){return o1({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19 7V4H9v3h2.868L9.012 17H5v3h10v-3h-2.868l2.856-10z"},child:[]}]})(t)}function cst(t){return o1({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M5 18h14v2H5zM6 4v6c0 3.309 2.691 6 6 6s6-2.691 6-6V4h-2v6c0 2.206-1.794 4-4 4s-4-1.794-4-4V4H6z"},child:[]}]})(t)}function ust(t){return o1({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M22 18h-2v1h3v1h-4v-2c0-.55.45-1 1-1h2v-1h-3v-1h3c.55 0 1 .45 1 1v1c0 .55-.45 1-1 1zM5.88 18h2.66l3.4-5.42h.12l3.4 5.42h2.66l-4.65-7.27L17.81 4h-2.68l-3.07 4.99h-.12L8.85 4H6.19l4.32 6.73L5.88 18z"},child:[]}]})(t)}function dst(t){return o1({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M22 7h-2v1h3v1h-4V7c0-.55.45-1 1-1h2V5h-3V4h3c.55 0 1 .45 1 1v1c0 .55-.45 1-1 1zM5.88 20h2.66l3.4-5.42h.12l3.4 5.42h2.66l-4.65-7.27L17.81 6h-2.68l-3.07 4.99h-.12L8.85 6H6.19l4.32 6.73L5.88 20z"},child:[]}]})(t)}function fst(t,e,n,r,i,o,s){try{let l=t.selection;if(typeof window!="undefined"&&window.hasOwnProperty("_activeSlateEditor"),!l&&n.current)try{he.hasPath(t,n.current.anchor.path)&&he.hasPath(t,n.current.focus.path)?(Pt.select(t,n.current),l=n.current,qt.focus(t),console.log("Restored selection from lastSelectionRef")):console.log("Cannot restore selection - paths no longer exist")}catch(S){console.error("Failed to restore selection from ref:",S)}if(!l)try{const S=he.start(t,[]);Pt.select(t,S),l={anchor:S,focus:S},console.log("Positioned cursor at document start as fallback")}catch(S){console.warn("applyMarkSafely: No valid selection and cannot position at start. Aborting.");return}if(console.log("Using selection:",JSON.stringify(l)),ut.isCollapsed(l)){console.log("Selection is collapsed - attempting to expand");try{const[S,D]=he.node(t,l.anchor.path);if(Xt.isText(S)&&S.text.length>0){const k=S.text.substring(0,l.anchor.offset),P=S.text.substring(l.anchor.offset),M=/\s/;if(k.length>0&&!M.test(k.charAt(k.length-1))||P.length>0&&!M.test(P.charAt(0))){let _=l.anchor.offset,E=l.anchor.offset;for(;_>0&&!M.test(S.text.charAt(_-1));)_--;for(;E<S.text.length&&!M.test(S.text.charAt(E));)E++;const R={anchor:{path:l.anchor.path,offset:_},focus:{path:l.anchor.path,offset:E}};console.log("Expanded selection to word:",JSON.stringify(R)),Pt.select(t,R),l=R}else if(S.text.length>0){let _=Math.max(0,l.anchor.offset-1),E=Math.min(S.text.length,l.anchor.offset+1);_===E&&(_>0?_--:E<S.text.length&&E++);const R={anchor:{path:l.anchor.path,offset:_},focus:{path:l.anchor.path,offset:E}};console.log("Expanded selection to nearby chars:",JSON.stringify(R)),Pt.select(t,R),l=R}}}catch(S){console.error("Failed to expand collapsed selection:",S)}}const u=ut.isForward(l),d=B({},l),f=ut.start(l),p=ut.end(l),b=[...f.path],v=f.offset,m=[...p.path],g=p.offset,x=$e.parent(b);let w=!1;try{const S=[];for(const[D,k]of he.nodes(t,{at:l,match:Xt.isText}))if(S.push([D,k]),D[e]){w=!0;break}console.log(`Format ${e} isActive:`,w)}catch(S){console.error("Error checking format status:",S)}try{w?(he.removeMark(t,e),console.log(`Removed ${e} mark`)):(he.addMark(t,e,!0),console.log(`Added ${e} mark`));const S=oe(B({},r.current),{[e]:!w});r.current=S,i(S);try{const D=zt.get(t,x);if(!on.isElement(D))throw new Error("Expected paragraph to be an Element");console.log("Node structure after format:",JSON.stringify(D));const k=D.children.filter(P=>Xt.isText(P));console.log(`Paragraph now has ${k.length} text nodes`)}catch(D){console.error("Error getting paragraph structure:",D)}typeof window!="undefined"&&window.hasOwnProperty("_activeSlateEditor"),qt.focus(t),o(!0),setTimeout(()=>{try{let D=[...x,0],k=[...x,0],P=v,M=g;const T=zt.get(t,x);if(!on.isElement(T))throw new Error("Expected paragraph to be an Element");const _=T.children;console.log(`Searching for new selection in ${_.length} children nodes`);let E=0,R=!1,F=!1;for(let N=0;N<_.length;N++){const U=_[N];if(!Xt.isText(U))continue;const H=[...x,N],j=U.text.length,z=E+j;if(!R&&E<=v&&v<=z&&(D=H,P=v-E,R=!0,console.log(`Found start point in node ${N}, offset ${P}`)),!F&&E<=g&&g<=z&&(k=H,M=g-E,F=!0,console.log(`Found end point in node ${N}, offset ${M}`)),R&&F)break;E+=j}if(R||(D=[...x,0],P=0,console.log("Using fallback for start point")),!F){if(R)k=D,M=P;else{const N=_.length-1;k=[...x,N];const U=_[N];M=Xt.isText(U)?U.text.length:0}console.log("Using fallback for end point")}const L={anchor:{path:u?D:k,offset:u?P:M},focus:{path:u?k:D,offset:u?M:P}};try{Pt.select(t,L),console.log("Selection restored at:",JSON.stringify(L)),n.current=t.selection,typeof window!="undefined"&&window.hasOwnProperty("_activeSlateEditor")}catch(N){console.error("Error restoring selection:",N);try{const U=he.start(t,x);Pt.select(t,U),console.log("Used paragraph start as fallback selection"),n.current=t.selection}catch(U){console.error("Failed to set fallback selection:",U)}}}catch(D){console.error("Error in selection restoration:",D)}},10)}catch(S){console.error("Error applying format:",S)}}catch(a){console.error("applyMarkSafely error:",a)}}const hst=({attributes:t,children:e,leaf:n})=>(n.bold&&(e=h.jsx("strong",{children:e})),n.italic&&(e=h.jsx("em",{children:e})),n.underline&&(e=h.jsx("u",{children:e})),n.subscript&&(e=h.jsx("sub",{children:e})),n.superscript&&(e=h.jsx("sup",{children:e})),h.jsx("span",oe(B({},t),{children:e}))),Uu=!0,pst=({title:t,children:e})=>h.jsxs("div",{className:"simple-tooltip-container",children:[h.jsx("div",{className:"simple-tooltip-content",children:t}),e]}),mst=Ot.forwardRef((c,l)=>{var u=c,{children:t,onClick:e,onMouseDown:n,onMouseEnter:r,onMouseLeave:i,active:o,"aria-label":s}=u,a=Tt(u,["children","onClick","onMouseDown","onMouseEnter","onMouseLeave","active","aria-label"]);return h.jsx("button",oe(B({ref:l,className:`toolbar-btn ${o?"active":""}`,onClick:e,onMouseDown:n,onMouseEnter:r,onMouseLeave:i,"aria-label":s,type:"button"},a),{children:t}))}),yR=t=>{if(!t.selection)return{};try{if(t.children.length===0)return{};let e=t.selection.focus.path;e=[...e];let n,r;try{[n,r]=he.leaf(t,e)}catch(o){try{Uu&&console.log("Getting leaf at start of document as fallback");let s=he.start(t,[]);[n,r]=he.leaf(t,s.path)}catch(s){return console.error("Failed to get any valid leaf:",s),{}}}if(!n)return{};Uu&&console.log("Current leaf node format:",n);const i={};return Object.keys(n).forEach(o=>{o!=="text"&&(i[o]=n[o])}),i}catch(e){return console.error("Error getting leaf format:",e),{}}},gst=A.forwardRef(({value:t,onChange:e,placeholder:n="",className:r="",compact:i=!1,showToolbar:o=!0},s)=>{const a=A.useMemo(()=>{const H=Qot(Yot(ort())),{onChange:j}=H;return H.onChange=()=>{console.log("Editor onChange called, selection:",H.selection),j()},H},[]),l=A.useRef(`editor-${Math.random().toString(36).substring(2,9)}`),c=A.useRef(!1),u=A.useRef(null);A.useEffect(()=>{typeof window!="undefined"&&!window.hasOwnProperty("_activeSlateEditor")&&(window._activeSlateEditor={id:null,selection:null,timestamp:0});const H=()=>{const z=window._activeSlateEditor;z.id=l.current,z.timestamp=Date.now(),console.log(`Editor ${l.current} is now active`)},j=u.current;return j&&(j.addEventListener("focus",H,!0),window._activeSlateEditor.id||(window._activeSlateEditor.id=l.current)),()=>{j&&j.removeEventListener("focus",H,!0)}},[]);const d=A.useCallback(()=>{var H;a.selection&&(m.current=a.selection,((H=window._activeSlateEditor)==null?void 0:H.id)===l.current&&(window._activeSlateEditor.selection=a.selection,window._activeSlateEditor.timestamp=Date.now(),console.log(`Saved selection in active editor ${l.current}:`,a.selection)))},[a]),f=A.useCallback(()=>{var H;try{if(((H=window._activeSlateEditor)==null?void 0:H.id)===l.current){const j=m.current;j&&(he.hasPath(a,j.anchor.path)&&he.hasPath(a,j.focus.path)?(Pt.select(a,j),Uu&&console.log(`Restored selection in editor ${l.current}`)):Uu&&console.log(`Couldn't restore selection in editor ${l.current} - paths don't exist`))}}catch(j){console.error("Error restoring selection:",j)}},[a]),p=A.useRef(t),[b,v]=A.useState(()=>{c.current=!0;const H=E7(t);return p.current=t,console.log("Initial editor state:",H),H}),m=A.useRef(null),g=A.useRef({bold:!1,italic:!1,underline:!1,subscript:!1,superscript:!1}),[x,w]=A.useState(g.current),[S,D]=A.useState(!1),k=A.useRef(!1),[P,M]=A.useState(!1),[T,_]=A.useState(!1),E=A.useRef(null);A.useEffect(()=>{if(t===p.current)return;if(S){console.log("Skipping value update while editor is focused");return}p.current=t;const H=E7(t),j=a.selection;console.log("Updating editor state from props:",H);try{a.children=H,a.onChange(),v(H)}catch(z){console.error("Error updating editor content:",z)}j&&setTimeout(()=>{try{Pt.select(a,j)}catch(z){console.error("Failed to restore selection after value update:",z)}},0)},[t,a,S]),A.useEffect(()=>{console.log("SlateEditor rendered, isFocused:",S)}),A.useEffect(()=>{const H=z=>{const q=z.target;if(q.closest(".inline-toolbar")||q.getAttribute("data-toolbar-button")==="true"){const K=q.closest(".slate-editor-container");if(!K)return;K.getAttribute("data-editor-id")===l.current&&(console.log(`Toolbar interaction detected for editor ${l.current}`),k.current=!0,z.preventDefault(),d())}},j=()=>{k.current&&(console.log(`Toolbar interaction complete for editor ${l.current}`),setTimeout(()=>{var z;try{((z=window._activeSlateEditor)==null?void 0:z.id)===l.current&&(qt.focus(a),D(!0),f())}catch(q){console.error("Error maintaining focus after toolbar interaction",q)}k.current=!1},10))};return document.addEventListener("mousedown",H,!0),document.addEventListener("mouseup",j,!0),()=>{document.removeEventListener("mousedown",H,!0),document.removeEventListener("mouseup",j,!0)}},[a,d,f]),A.useEffect(()=>{if(a.selection)try{const H=yR(a),j={bold:!!H.bold,italic:!!H.italic,underline:!!H.underline,subscript:!!H.subscript,superscript:!!H.superscript};vD(g.current,j)||(Uu&&console.log("Updating marks from selection change:",j),g.current=j,w(j)),!P&&S&&M(!0)}catch(H){console.error("Error in selection effect:",H)}},[a.selection,a,P,S]);const R=A.useCallback(H=>{v(H);const j=a.selection;console.log("handleChange - selection:",j?ut.isCollapsed(j):"null");try{if(M(!!j||T),j)try{const $=yR(a);let K=$;if(ut.isExpanded(j))try{const Y=he.marks(a)||{};K=B(B({},$),Y)}catch(Y){console.error("Error getting marks:",Y)}const G={bold:!!K.bold,italic:!!K.italic,underline:!!K.underline,subscript:!!K.subscript,superscript:!!K.superscript};vD(g.current,G)||(Uu&&console.log("Updating marks from selection change:",G),g.current=G,w(G))}catch($){console.error("Error updating marks:",$)}const q=vst(H);Uu&&console.log("Sending onChange to parent with HTML:",q,"HTML length:",q.length),e(q)}catch(z){console.error("Error in handleChange:",z)}},[a,T,e]),F=A.useCallback(()=>{console.log(`Editor ${l.current} focused`),E.current&&(clearTimeout(E.current),E.current=null),D(!0),typeof window!="undefined"&&(window._activeSlateEditor={id:l.current,selection:a.selection,timestamp:Date.now()}),d(),f()},[a,d,f]),L=A.useCallback(H=>{if(console.log(`Editor ${l.current} blurred`),d(),k.current){console.log("Ignoring blur during toolbar interaction");return}E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{k.current?console.log("Prevented blur state change due to toolbar interaction"):D(!1),E.current=null},50)},[d]),N=A.useCallback(H=>{var z,q,$;if(console.log("Key pressed:",H.key),H.metaKey||H.ctrlKey)switch(H.key){case"b":{H.preventDefault();const K="bold";x[K]||!!((z=he.marks(a))!=null&&z[K])?(he.removeMark(a,K),g.current.bold=!1):(he.addMark(a,K,!0),g.current.bold=!0),w(B({},g.current));break}case"i":{H.preventDefault();const K="italic";x[K]||!!((q=he.marks(a))!=null&&q[K])?(he.removeMark(a,K),g.current.italic=!1):(he.addMark(a,K,!0),g.current.italic=!0),w(B({},g.current));break}case"u":{H.preventDefault();const K="underline";x[K]||!!(($=he.marks(a))!=null&&$[K])?(he.removeMark(a,K),g.current.underline=!1):(he.addMark(a,K,!0),g.current.underline=!0),w(B({},g.current));break}}m.current&&setTimeout(()=>{if(!a.selection&&S)try{Uu&&console.log("Restoring selection after keypress"),Pt.select(a,m.current)}catch(K){console.error("Failed to restore selection after keypress:",K)}},0)},[a,x,S]),U=A.useRef(a);return A.useEffect(()=>{U.current=a;const H=()=>{if(a.selection)try{m.current=a.selection;const z=yR(a),q={bold:!!z.bold,italic:!!z.italic,underline:!!z.underline,subscript:!!z.subscript,superscript:!!z.superscript};vD(g.current,q)||(g.current=q,w(q))}catch(z){console.error("Error updating selection state:",z)}console.log("Selection at capture:",JSON.stringify(a.selection))},j=new MutationObserver(()=>{U.current.selection&&H()});try{const z=qt.toDOMNode(a,a);j.observe(z,{subtree:!0,characterData:!0,childList:!0})}catch(z){console.error("Could not observe editor DOM:",z)}return()=>{j.disconnect()}},[a]),h.jsx("div",{className:`slate-editor-container ${i?"compact":""} ${r}`,ref:u,"data-focused":S||k.current,"data-editor-id":l.current,children:h.jsx(Kot,{editor:a,initialValue:b,onChange:R,onSelectionChange:H=>{console.log("Selection changed:",H)},children:h.jsxs("div",{className:"slate-editor-with-toolbar",children:[h.jsx(jot,{className:"slate-editor",placeholder:n,renderLeaf:H=>h.jsx(hst,B({},H)),onFocus:F,onBlur:L,onKeyDown:N,autoFocus:!1}),o&&h.jsxs("div",{className:"inline-toolbar always-visible",children:[h.jsx(Cy,{format:"bold",icon:h.jsx(ast,{size:16}),toolbarRef:k,activeMarks:x,lastSelectionRef:m,activeMarksRef:g,setActiveMarks:w,setIsFocused:D,isFocused:S}),h.jsx(Cy,{format:"italic",icon:h.jsx(lst,{size:16}),toolbarRef:k,activeMarks:x,lastSelectionRef:m,activeMarksRef:g,setActiveMarks:w,setIsFocused:D,isFocused:S}),h.jsx(Cy,{format:"underline",icon:h.jsx(cst,{size:16}),toolbarRef:k,activeMarks:x,lastSelectionRef:m,activeMarksRef:g,setActiveMarks:w,setIsFocused:D,isFocused:S}),h.jsx(Cy,{format:"subscript",icon:h.jsx(ust,{size:16}),toolbarRef:k,activeMarks:x,lastSelectionRef:m,activeMarksRef:g,setActiveMarks:w,setIsFocused:D,isFocused:S}),h.jsx(Cy,{format:"superscript",icon:h.jsx(dst,{size:16}),toolbarRef:k,activeMarks:x,lastSelectionRef:m,activeMarksRef:g,setActiveMarks:w,setIsFocused:D,isFocused:S})]})]})})})}),Cy=({format:t,icon:e,toolbarRef:n,activeMarks:r,lastSelectionRef:i,activeMarksRef:o,setActiveMarks:s,setIsFocused:a,isFocused:l})=>{const c=Pre(),u=A.useRef(null),d=A.useRef(!1),f=(m,g)=>{m.preventDefault(),m.stopPropagation(),d.current=!0,n.current=!0;try{fst(c,g,i,o,s,a)}catch(x){console.error("Error during format operation:",x)}finally{setTimeout(()=>{d.current=!1,n.current=!1},100)}},p=()=>{console.log(`Mouse entered ${t} button`),n.current=!0},b=()=>{console.log(`Mouse left ${t} button`),d.current||(n.current=!1)},v=m=>{m.preventDefault(),m.stopPropagation(),f(m,t)};return h.jsx(pst,{title:`${t.charAt(0).toUpperCase()+t.slice(1)}`,children:h.jsx(mst,{ref:u,onMouseDown:v,onMouseEnter:p,onMouseLeave:b,active:r[t],"aria-label":t,"data-toolbar-button":"true","data-button-format":t,children:e})})},E7=t=>{if(console.log("Deserializing HTML:",t),!t)return console.log("Received empty value for HTML deserialization:",t),[{type:"paragraph",children:[{text:""}]}];if(typeof t=="object"&&t!==null)if(t.name&&typeof t.name=="string")console.log("Extracting name from object:",t.name),t=t.name;else if(t.text&&typeof t.text=="string")console.log("Extracting text from object:",t.text),t=t.text;else return console.log("Received object value for HTML deserialization, using empty string:",t),[{type:"paragraph",children:[{text:""}]}];if(typeof t!="string")return console.log("Received non-string value for HTML deserialization:",t),[{type:"paragraph",children:[{text:""}]}];if(t.trim()==="")return[{type:"paragraph",children:[{text:""}]}];try{const e=document.createElement("div");if(e.innerHTML=t,e.childNodes.length>0&&(e.childNodes[0].nodeType===3||e.childNodes[0].nodeType===1&&!["P","DIV"].includes(e.childNodes[0].tagName))){const o=e.innerHTML;e.innerHTML=`<p>${o}</p>`}const n=o=>{if(o.nodeType===o.TEXT_NODE)return{text:o.textContent||""};if(o.nodeType!==o.ELEMENT_NODE)return null;const s=o;if(["STRONG","B","EM","I","U","SUB","SUP"].includes(s.tagName)){const l={};(s.tagName==="STRONG"||s.tagName==="B")&&(l.bold=!0),(s.tagName==="EM"||s.tagName==="I")&&(l.italic=!0),s.tagName==="U"&&(l.underline=!0),s.tagName==="SUB"&&(l.subscript=!0),s.tagName==="SUP"&&(l.superscript=!0);const c=[];return Array.from(s.childNodes).forEach(u=>{const d=n(u);d&&(Array.isArray(d)?d.forEach(f=>{Xt.isText(f)?c.push(B(B({},f),l)):c.push(f)}):Xt.isText(d)?c.push(B(B({},d),l)):c.push(d))}),c.length===0&&s.textContent?B({text:s.textContent},l):c.length>0?c:null}if(s.tagName==="P"||s.tagName==="DIV"){const l=[];return Array.from(s.childNodes).forEach(c=>{const u=n(c);if(u)if(Array.isArray(u))u.forEach(d=>{if(Xt.isText(d))l.push(d);else{const f=d;f.children&&f.children.length>0&&l.push(...f.children)}});else if(Xt.isText(u))l.push(u);else{const d=u;d.children&&d.children.length>0&&l.push(...d.children)}}),l.length===0&&s.textContent&&l.push({text:s.textContent}),{type:"paragraph",children:l.length>0?l:[{text:""}]}}const a=[];return Array.from(s.childNodes).forEach(l=>{const c=n(l);c&&(Array.isArray(c)?a.push(...c):a.push(c))}),a.length===0&&s.textContent?{text:s.textContent}:a.length>0?a:null},r=[],i=[];return Array.from(e.childNodes).forEach(o=>{const s=n(o);s&&i.push(s)}),i.forEach(o=>{if(o!==null)if(Array.isArray(o)){const s=[];let a=[];o.forEach(l=>{Xt.isText(l)?a.push(l):on.isElement(l)&&(a.length>0&&(s.push({type:"paragraph",children:[...a]}),a=[]),s.push(l))}),a.length>0&&s.push({type:"paragraph",children:[...a]}),r.push(...s)}else on.isElement(o)?r.push(o):Xt.isText(o)&&r.push({type:"paragraph",children:[o]})}),r.length===0&&r.push({type:"paragraph",children:[{text:""}]}),Uu&&console.log("Deserialized Slate nodes:",JSON.stringify(r)),r}catch(e){return console.error("Error deserializing HTML:",e),[{type:"paragraph",children:[{text:""}]}]}},vst=t=>{console.log("Serializing nodes:",JSON.stringify(t));const e=t.map(r=>{if(on.isElement(r)){const i=[];return r.children.forEach((o,s)=>{if(Xt.isText(o))if(s===0)i.push(o);else{const a=i[i.length-1],l=o;a.bold===l.bold&&a.italic===l.italic&&a.underline===l.underline&&a.subscript===l.subscript&&a.superscript===l.superscript?i[i.length-1]=oe(B({},a),{text:a.text+l.text}):i.push(l)}}),oe(B({},r),{children:i})}return r});console.log("Normalized nodes:",JSON.stringify(e));let n="";for(const r of e)if(on.isElement(r)){let i="";for(const o of r.children){if(!Xt.isText(o))continue;let s=yst(o.text);const a=[];o.bold&&a.push("bold"),o.italic&&a.push("italic"),o.underline&&a.push("underline"),o.subscript&&a.push("subscript"),o.superscript&&a.push("superscript");for(const l of a)switch(l){case"bold":s=`<strong>${s}</strong>`;break;case"italic":s=`<em>${s}</em>`;break;case"underline":s=`<u>${s}</u>`;break;case"subscript":s=`<sub>${s}</sub>`;break;case"superscript":s=`<sup>${s}</sup>`;break}i+=s}n+=i}return console.log("Serialized HTML:",n),n},yst=t=>{const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return t.replace(/[&<>"']/g,n=>e[n]||n)},U5=Ot.memo(gst,(t,e)=>t.placeholder===e.placeholder&&t.className===e.className&&t.compact===e.compact&&t.showToolbar===e.showToolbar&&!0);var _A={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */_A.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,u="__lodash_placeholder__",d=1,f=2,p=4,b=1,v=2,m=1,g=2,x=4,w=8,S=16,D=32,k=64,P=128,M=256,T=512,_=30,E="...",R=800,F=16,L=1,N=2,U=3,H=1/0,j=9007199254740991,z=17976931348623157e292,q=NaN,$=4294967295,K=$-1,G=$>>>1,Y=[["ary",P],["bind",m],["bindKey",g],["curry",w],["curryRight",S],["flip",T],["partial",D],["partialRight",k],["rearg",M]],J="[object Arguments]",V="[object Array]",re="[object AsyncFunction]",fe="[object Boolean]",pe="[object Date]",ce="[object DOMException]",xe="[object Error]",Ae="[object Function]",Ee="[object GeneratorFunction]",ee="[object Map]",Oe="[object Number]",le="[object Null]",me="[object Object]",ne="[object Promise]",se="[object Proxy]",ge="[object RegExp]",Q="[object Set]",W="[object String]",ve="[object Symbol]",ue="[object Undefined]",Me="[object WeakMap]",Pe="[object WeakSet]",je="[object ArrayBuffer]",ke="[object DataView]",De="[object Float32Array]",nt="[object Float64Array]",be="[object Int8Array]",Ne="[object Int16Array]",Ie="[object Int32Array]",Ve="[object Uint8Array]",Ue="[object Uint8ClampedArray]",tt="[object Uint16Array]",st="[object Uint32Array]",vt=/\b__p \+= '';/g,Fe=/\b(__p \+=) '' \+/g,ct=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ye=/&(?:amp|lt|gt|quot|#39);/g,ft=/[&<>"']/g,_t=RegExp(Ye.source),lt=RegExp(ft.source),Lt=/<%-([\s\S]+?)%>/g,nn=/<%([\s\S]+?)%>/g,sn=/<%=([\s\S]+?)%>/g,Ce=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ze=/^\w*$/,Qe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gt=/[\\^$.*+?()[\]{}|]/g,Rt=RegExp(gt.source),Bt=/^\s+/,tn=/\s/,Ht=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Qt=/\{\n\/\* \[wrapped with (.+)\] \*/,Vt=/,? & /,pn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,vn=/[()=,{}\[\]\/\s]/,Wn=/\\(\\)?/g,tr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qr=/\w*$/,hr=/^[-+]0x[0-9a-f]+$/i,Jn=/^0b[01]+$/i,xn=/^\[object .+?Constructor\]$/,Te=/^0o[0-7]+$/i,Je=/^(?:0|[1-9]\d*)$/,ae=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Le=/($^)/,et=/['\n\r\u2028\u2029\\]/g,Ke="\\ud800-\\udfff",We="\\u0300-\\u036f",wt="\\ufe20-\\ufe2f",kt="\\u20d0-\\u20ff",Mt=We+wt+kt,Wt="\\u2700-\\u27bf",mn="a-z\\xdf-\\xf6\\xf8-\\xff",gn="\\xac\\xb1\\xd7\\xf7",cn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",un="\\u2000-\\u206f",$n=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",br="A-Z\\xc0-\\xd6\\xd8-\\xde",_e="\\ufe0e\\ufe0f",at=gn+cn+un+$n,St="[']",Dt="["+Ke+"]",Nt="["+at+"]",Zt="["+Mt+"]",Cn="\\d+",wn="["+Wt+"]",sr="["+mn+"]",zn="[^"+Ke+at+Cn+Wt+mn+br+"]",ur="\\ud83c[\\udffb-\\udfff]",mo="(?:"+Zt+"|"+ur+")",Hn="[^"+Ke+"]",gi="(?:\\ud83c[\\udde6-\\uddff]){2}",Yo="[\\ud800-\\udbff][\\udc00-\\udfff]",Ni="["+br+"]",bm="\\u200d",gh="(?:"+sr+"|"+zn+")",vh="(?:"+Ni+"|"+zn+")",wm="(?:"+St+"(?:d|ll|m|re|s|t|ve))?",Sm="(?:"+St+"(?:D|LL|M|RE|S|T|VE))?",_m=mo+"?",ha="["+_e+"]?",Vs="(?:"+bm+"(?:"+[Hn,gi,Yo].join("|")+")"+ha+_m+")*",Od="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Nd="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",yh=ha+_m+Vs,Il="(?:"+[wn,gi,Yo].join("|")+")"+yh,xh="(?:"+[Hn+Zt+"?",Zt,gi,Yo,Dt].join("|")+")",Em=RegExp(St,"g"),Fl=RegExp(Zt,"g"),To=RegExp(ur+"(?="+ur+")|"+xh+yh,"g"),P0=RegExp([Ni+"?"+sr+"+"+wm+"(?="+[Nt,Ni,"$"].join("|")+")",vh+"+"+Sm+"(?="+[Nt,Ni+gh,"$"].join("|")+")",Ni+"?"+gh+"+"+wm,Ni+"+"+Sm,Nd,Od,Cn,Il].join("|"),"g"),Cm=RegExp("["+bm+Ke+Mt+_e+"]"),Ld=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,gu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Am=-1,Dr={};Dr[De]=Dr[nt]=Dr[be]=Dr[Ne]=Dr[Ie]=Dr[Ve]=Dr[Ue]=Dr[tt]=Dr[st]=!0,Dr[J]=Dr[V]=Dr[je]=Dr[fe]=Dr[ke]=Dr[pe]=Dr[xe]=Dr[Ae]=Dr[ee]=Dr[Oe]=Dr[me]=Dr[ge]=Dr[Q]=Dr[W]=Dr[Me]=!1;var wr={};wr[J]=wr[V]=wr[je]=wr[ke]=wr[fe]=wr[pe]=wr[De]=wr[nt]=wr[be]=wr[Ne]=wr[Ie]=wr[ee]=wr[Oe]=wr[me]=wr[ge]=wr[Q]=wr[W]=wr[ve]=wr[Ve]=wr[Ue]=wr[tt]=wr[st]=!0,wr[xe]=wr[Ae]=wr[Me]=!1;var Tm={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Re={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},He={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ht={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},dn=parseFloat,ar=parseInt,Rr=typeof $i=="object"&&$i&&$i.Object===Object&&$i,Xr=typeof self=="object"&&self&&self.Object===Object&&self,An=Rr||Xr||Function("return this")(),jr=e&&!e.nodeType&&e,Qr=jr&&!0&&t&&!t.nodeType&&t,go=Qr&&Qr.exports===jr,Ol=go&&Rr.process,Li=function(){try{var Ze=Qr&&Qr.require&&Qr.require("util").types;return Ze||Ol&&Ol.binding&&Ol.binding("util")}catch(bt){}}(),vu=Li&&Li.isArrayBuffer,yu=Li&&Li.isDate,bh=Li&&Li.isMap,D0=Li&&Li.isRegExp,wh=Li&&Li.isSet,s1=Li&&Li.isTypedArray;function Xo(Ze,bt,pt){switch(pt.length){case 0:return Ze.call(bt);case 1:return Ze.call(bt,pt[0]);case 2:return Ze.call(bt,pt[0],pt[1]);case 3:return Ze.call(bt,pt[0],pt[1],pt[2])}return Ze.apply(bt,pt)}function Sh(Ze,bt,pt,ln){for(var Kn=-1,zr=Ze==null?0:Ze.length;++Kn<zr;){var yo=Ze[Kn];bt(ln,yo,pt(yo),Ze)}return ln}function ys(Ze,bt){for(var pt=-1,ln=Ze==null?0:Ze.length;++pt<ln&&bt(Ze[pt],pt,Ze)!==!1;);return Ze}function a1(Ze,bt){for(var pt=Ze==null?0:Ze.length;pt--&&bt(Ze[pt],pt,Ze)!==!1;);return Ze}function Mm(Ze,bt){for(var pt=-1,ln=Ze==null?0:Ze.length;++pt<ln;)if(!bt(Ze[pt],pt,Ze))return!1;return!0}function $a(Ze,bt){for(var pt=-1,ln=Ze==null?0:Ze.length,Kn=0,zr=[];++pt<ln;){var yo=Ze[pt];bt(yo,pt,Ze)&&(zr[Kn++]=yo)}return zr}function _h(Ze,bt){var pt=Ze==null?0:Ze.length;return!!pt&&xu(Ze,bt,0)>-1}function Bd(Ze,bt,pt){for(var ln=-1,Kn=Ze==null?0:Ze.length;++ln<Kn;)if(pt(bt,Ze[ln]))return!0;return!1}function li(Ze,bt){for(var pt=-1,ln=Ze==null?0:Ze.length,Kn=Array(ln);++pt<ln;)Kn[pt]=bt(Ze[pt],pt,Ze);return Kn}function Nl(Ze,bt){for(var pt=-1,ln=bt.length,Kn=Ze.length;++pt<ln;)Ze[Kn+pt]=bt[pt];return Ze}function Ll(Ze,bt,pt,ln){var Kn=-1,zr=Ze==null?0:Ze.length;for(ln&&zr&&(pt=Ze[++Kn]);++Kn<zr;)pt=bt(pt,Ze[Kn],Kn,Ze);return pt}function l1(Ze,bt,pt,ln){var Kn=Ze==null?0:Ze.length;for(ln&&Kn&&(pt=Ze[--Kn]);Kn--;)pt=bt(pt,Ze[Kn],Kn,Ze);return pt}function Pm(Ze,bt){for(var pt=-1,ln=Ze==null?0:Ze.length;++pt<ln;)if(bt(Ze[pt],pt,Ze))return!0;return!1}var c1=ie("length");function u1(Ze){return Ze.split("")}function Dm(Ze){return Ze.match(pn)||[]}function Qo(Ze,bt,pt){var ln;return pt(Ze,function(Kn,zr,yo){if(bt(Kn,zr,yo))return ln=zr,!1}),ln}function Eh(Ze,bt,pt,ln){for(var Kn=Ze.length,zr=pt+(ln?1:-1);ln?zr--:++zr<Kn;)if(bt(Ze[zr],zr,Ze))return zr;return-1}function xu(Ze,bt,pt){return bt===bt?Vre(Ze,bt,pt):Eh(Ze,I,pt)}function jd(Ze,bt,pt,ln){for(var Kn=pt-1,zr=Ze.length;++Kn<zr;)if(ln(Ze[Kn],bt))return Kn;return-1}function I(Ze){return Ze!==Ze}function X(Ze,bt){var pt=Ze==null?0:Ze.length;return pt?Gt(Ze,bt)/pt:q}function ie(Ze){return function(bt){return bt==null?n:bt[Ze]}}function we(Ze){return function(bt){return Ze==null?n:Ze[bt]}}function ot(Ze,bt,pt,ln,Kn){return Kn(Ze,function(zr,yo,ci){pt=ln?(ln=!1,zr):bt(pt,zr,yo,ci)}),pt}function mt(Ze,bt){var pt=Ze.length;for(Ze.sort(bt);pt--;)Ze[pt]=Ze[pt].value;return Ze}function Gt(Ze,bt){for(var pt,ln=-1,Kn=Ze.length;++ln<Kn;){var zr=bt(Ze[ln]);zr!==n&&(pt=pt===n?zr:pt+zr)}return pt}function Ur(Ze,bt){for(var pt=-1,ln=Array(Ze);++pt<Ze;)ln[pt]=bt(pt);return ln}function vo(Ze,bt){return li(bt,function(pt){return[pt,Ze[pt]]})}function Sr(Ze){return Ze&&Ze.slice(0,V5(Ze)+1).replace(Bt,"")}function Kr(Ze){return function(bt){return Ze(bt)}}function io(Ze,bt){return li(bt,function(pt){return Ze[pt]})}function Ha(Ze,bt){return Ze.has(bt)}function Ws(Ze,bt){for(var pt=-1,ln=Ze.length;++pt<ln&&xu(bt,Ze[pt],0)>-1;);return pt}function Ch(Ze,bt){for(var pt=Ze.length;pt--&&xu(bt,Ze[pt],0)>-1;);return pt}function R0(Ze,bt){for(var pt=Ze.length,ln=0;pt--;)Ze[pt]===bt&&++ln;return ln}var Ore=we(Tm),Nre=we(Re);function Lre(Ze){return"\\"+ht[Ze]}function Bre(Ze,bt){return Ze==null?n:Ze[bt]}function Rm(Ze){return Cm.test(Ze)}function jre(Ze){return Ld.test(Ze)}function Ure(Ze){for(var bt,pt=[];!(bt=Ze.next()).done;)pt.push(bt.value);return pt}function E2(Ze){var bt=-1,pt=Array(Ze.size);return Ze.forEach(function(ln,Kn){pt[++bt]=[Kn,ln]}),pt}function z5(Ze,bt){return function(pt){return Ze(bt(pt))}}function Ud(Ze,bt){for(var pt=-1,ln=Ze.length,Kn=0,zr=[];++pt<ln;){var yo=Ze[pt];(yo===bt||yo===u)&&(Ze[pt]=u,zr[Kn++]=pt)}return zr}function d1(Ze){var bt=-1,pt=Array(Ze.size);return Ze.forEach(function(ln){pt[++bt]=ln}),pt}function zre(Ze){var bt=-1,pt=Array(Ze.size);return Ze.forEach(function(ln){pt[++bt]=[ln,ln]}),pt}function Vre(Ze,bt,pt){for(var ln=pt-1,Kn=Ze.length;++ln<Kn;)if(Ze[ln]===bt)return ln;return-1}function Wre(Ze,bt,pt){for(var ln=pt+1;ln--;)if(Ze[ln]===bt)return ln;return ln}function km(Ze){return Rm(Ze)?Hre(Ze):c1(Ze)}function Bl(Ze){return Rm(Ze)?Gre(Ze):u1(Ze)}function V5(Ze){for(var bt=Ze.length;bt--&&tn.test(Ze.charAt(bt)););return bt}var $re=we(He);function Hre(Ze){for(var bt=To.lastIndex=0;To.test(Ze);)++bt;return bt}function Gre(Ze){return Ze.match(To)||[]}function qre(Ze){return Ze.match(P0)||[]}var Kre=function Ze(bt){bt=bt==null?An:Im.defaults(An.Object(),bt,Im.pick(An,gu));var pt=bt.Array,ln=bt.Date,Kn=bt.Error,zr=bt.Function,yo=bt.Math,ci=bt.Object,C2=bt.RegExp,Yre=bt.String,Ga=bt.TypeError,f1=pt.prototype,Xre=zr.prototype,Fm=ci.prototype,h1=bt["__core-js_shared__"],p1=Xre.toString,Zr=Fm.hasOwnProperty,Qre=0,W5=function(){var y=/[^.]+$/.exec(h1&&h1.keys&&h1.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}(),m1=Fm.toString,Zre=p1.call(ci),Jre=An._,eie=C2("^"+p1.call(Zr).replace(gt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),g1=go?bt.Buffer:n,zd=bt.Symbol,v1=bt.Uint8Array,$5=g1?g1.allocUnsafe:n,y1=z5(ci.getPrototypeOf,ci),H5=ci.create,G5=Fm.propertyIsEnumerable,x1=f1.splice,q5=zd?zd.isConcatSpreadable:n,k0=zd?zd.iterator:n,Ah=zd?zd.toStringTag:n,b1=function(){try{var y=Rh(ci,"defineProperty");return y({},"",{}),y}catch(C){}}(),tie=bt.clearTimeout!==An.clearTimeout&&bt.clearTimeout,nie=ln&&ln.now!==An.Date.now&&ln.now,rie=bt.setTimeout!==An.setTimeout&&bt.setTimeout,w1=yo.ceil,S1=yo.floor,A2=ci.getOwnPropertySymbols,iie=g1?g1.isBuffer:n,K5=bt.isFinite,oie=f1.join,sie=z5(ci.keys,ci),xo=yo.max,Zo=yo.min,aie=ln.now,lie=bt.parseInt,Y5=yo.random,cie=f1.reverse,T2=Rh(bt,"DataView"),I0=Rh(bt,"Map"),M2=Rh(bt,"Promise"),Om=Rh(bt,"Set"),F0=Rh(bt,"WeakMap"),O0=Rh(ci,"create"),_1=F0&&new F0,Nm={},uie=kh(T2),die=kh(I0),fie=kh(M2),hie=kh(Om),pie=kh(F0),E1=zd?zd.prototype:n,N0=E1?E1.valueOf:n,X5=E1?E1.toString:n;function ye(y){if(Bi(y)&&!Qn(y)&&!(y instanceof vr)){if(y instanceof qa)return y;if(Zr.call(y,"__wrapped__"))return QB(y)}return new qa(y)}var Lm=function(){function y(){}return function(C){if(!Mi(C))return{};if(H5)return H5(C);y.prototype=C;var O=new y;return y.prototype=n,O}}();function C1(){}function qa(y,C){this.__wrapped__=y,this.__actions__=[],this.__chain__=!!C,this.__index__=0,this.__values__=n}ye.templateSettings={escape:Lt,evaluate:nn,interpolate:sn,variable:"",imports:{_:ye}},ye.prototype=C1.prototype,ye.prototype.constructor=ye,qa.prototype=Lm(C1.prototype),qa.prototype.constructor=qa;function vr(y){this.__wrapped__=y,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=$,this.__views__=[]}function mie(){var y=new vr(this.__wrapped__);return y.__actions__=$s(this.__actions__),y.__dir__=this.__dir__,y.__filtered__=this.__filtered__,y.__iteratees__=$s(this.__iteratees__),y.__takeCount__=this.__takeCount__,y.__views__=$s(this.__views__),y}function gie(){if(this.__filtered__){var y=new vr(this);y.__dir__=-1,y.__filtered__=!0}else y=this.clone(),y.__dir__*=-1;return y}function vie(){var y=this.__wrapped__.value(),C=this.__dir__,O=Qn(y),Z=C<0,de=O?y.length:0,Se=Poe(0,de,this.__views__),Be=Se.start,Ge=Se.end,it=Ge-Be,Et=Z?Ge:Be-1,Ct=this.__iteratees__,It=Ct.length,Jt=0,bn=Zo(it,this.__takeCount__);if(!O||!Z&&de==it&&bn==it)return bB(y,this.__actions__);var On=[];e:for(;it--&&Jt<bn;){Et+=C;for(var ir=-1,Nn=y[Et];++ir<It;){var pr=Ct[ir],_r=pr.iteratee,ga=pr.type,ws=_r(Nn);if(ga==N)Nn=ws;else if(!ws){if(ga==L)continue e;break e}}On[Jt++]=Nn}return On}vr.prototype=Lm(C1.prototype),vr.prototype.constructor=vr;function Th(y){var C=-1,O=y==null?0:y.length;for(this.clear();++C<O;){var Z=y[C];this.set(Z[0],Z[1])}}function yie(){this.__data__=O0?O0(null):{},this.size=0}function xie(y){var C=this.has(y)&&delete this.__data__[y];return this.size-=C?1:0,C}function bie(y){var C=this.__data__;if(O0){var O=C[y];return O===l?n:O}return Zr.call(C,y)?C[y]:n}function wie(y){var C=this.__data__;return O0?C[y]!==n:Zr.call(C,y)}function Sie(y,C){var O=this.__data__;return this.size+=this.has(y)?0:1,O[y]=O0&&C===n?l:C,this}Th.prototype.clear=yie,Th.prototype.delete=xie,Th.prototype.get=bie,Th.prototype.has=wie,Th.prototype.set=Sie;function bu(y){var C=-1,O=y==null?0:y.length;for(this.clear();++C<O;){var Z=y[C];this.set(Z[0],Z[1])}}function _ie(){this.__data__=[],this.size=0}function Eie(y){var C=this.__data__,O=A1(C,y);if(O<0)return!1;var Z=C.length-1;return O==Z?C.pop():x1.call(C,O,1),--this.size,!0}function Cie(y){var C=this.__data__,O=A1(C,y);return O<0?n:C[O][1]}function Aie(y){return A1(this.__data__,y)>-1}function Tie(y,C){var O=this.__data__,Z=A1(O,y);return Z<0?(++this.size,O.push([y,C])):O[Z][1]=C,this}bu.prototype.clear=_ie,bu.prototype.delete=Eie,bu.prototype.get=Cie,bu.prototype.has=Aie,bu.prototype.set=Tie;function wu(y){var C=-1,O=y==null?0:y.length;for(this.clear();++C<O;){var Z=y[C];this.set(Z[0],Z[1])}}function Mie(){this.size=0,this.__data__={hash:new Th,map:new(I0||bu),string:new Th}}function Pie(y){var C=B1(this,y).delete(y);return this.size-=C?1:0,C}function Die(y){return B1(this,y).get(y)}function Rie(y){return B1(this,y).has(y)}function kie(y,C){var O=B1(this,y),Z=O.size;return O.set(y,C),this.size+=O.size==Z?0:1,this}wu.prototype.clear=Mie,wu.prototype.delete=Pie,wu.prototype.get=Die,wu.prototype.has=Rie,wu.prototype.set=kie;function Mh(y){var C=-1,O=y==null?0:y.length;for(this.__data__=new wu;++C<O;)this.add(y[C])}function Iie(y){return this.__data__.set(y,l),this}function Fie(y){return this.__data__.has(y)}Mh.prototype.add=Mh.prototype.push=Iie,Mh.prototype.has=Fie;function jl(y){var C=this.__data__=new bu(y);this.size=C.size}function Oie(){this.__data__=new bu,this.size=0}function Nie(y){var C=this.__data__,O=C.delete(y);return this.size=C.size,O}function Lie(y){return this.__data__.get(y)}function Bie(y){return this.__data__.has(y)}function jie(y,C){var O=this.__data__;if(O instanceof bu){var Z=O.__data__;if(!I0||Z.length<i-1)return Z.push([y,C]),this.size=++O.size,this;O=this.__data__=new wu(Z)}return O.set(y,C),this.size=O.size,this}jl.prototype.clear=Oie,jl.prototype.delete=Nie,jl.prototype.get=Lie,jl.prototype.has=Bie,jl.prototype.set=jie;function Q5(y,C){var O=Qn(y),Z=!O&&Ih(y),de=!O&&!Z&&Gd(y),Se=!O&&!Z&&!de&&zm(y),Be=O||Z||de||Se,Ge=Be?Ur(y.length,Yre):[],it=Ge.length;for(var Et in y)(C||Zr.call(y,Et))&&!(Be&&(Et=="length"||de&&(Et=="offset"||Et=="parent")||Se&&(Et=="buffer"||Et=="byteLength"||Et=="byteOffset")||Cu(Et,it)))&&Ge.push(Et);return Ge}function Z5(y){var C=y.length;return C?y[j2(0,C-1)]:n}function Uie(y,C){return j1($s(y),Ph(C,0,y.length))}function zie(y){return j1($s(y))}function P2(y,C,O){(O!==n&&!Ul(y[C],O)||O===n&&!(C in y))&&Su(y,C,O)}function L0(y,C,O){var Z=y[C];(!(Zr.call(y,C)&&Ul(Z,O))||O===n&&!(C in y))&&Su(y,C,O)}function A1(y,C){for(var O=y.length;O--;)if(Ul(y[O][0],C))return O;return-1}function Vie(y,C,O,Z){return Vd(y,function(de,Se,Be){C(Z,de,O(de),Be)}),Z}function J5(y,C){return y&&Ec(C,Mo(C),y)}function Wie(y,C){return y&&Ec(C,Gs(C),y)}function Su(y,C,O){C=="__proto__"&&b1?b1(y,C,{configurable:!0,enumerable:!0,value:O,writable:!0}):y[C]=O}function D2(y,C){for(var O=-1,Z=C.length,de=pt(Z),Se=y==null;++O<Z;)de[O]=Se?n:uM(y,C[O]);return de}function Ph(y,C,O){return y===y&&(O!==n&&(y=y<=O?y:O),C!==n&&(y=y>=C?y:C)),y}function Ka(y,C,O,Z,de,Se){var Be,Ge=C&d,it=C&f,Et=C&p;if(O&&(Be=de?O(y,Z,de,Se):O(y)),Be!==n)return Be;if(!Mi(y))return y;var Ct=Qn(y);if(Ct){if(Be=Roe(y),!Ge)return $s(y,Be)}else{var It=Jo(y),Jt=It==Ae||It==Ee;if(Gd(y))return _B(y,Ge);if(It==me||It==J||Jt&&!de){if(Be=it||Jt?{}:VB(y),!Ge)return it?boe(y,Wie(Be,y)):xoe(y,J5(Be,y))}else{if(!wr[It])return de?y:{};Be=koe(y,It,Ge)}}Se||(Se=new jl);var bn=Se.get(y);if(bn)return bn;Se.set(y,Be),v4(y)?y.forEach(function(Nn){Be.add(Ka(Nn,C,O,Nn,y,Se))}):m4(y)&&y.forEach(function(Nn,pr){Be.set(pr,Ka(Nn,C,O,pr,y,Se))});var On=Et?it?X2:Y2:it?Gs:Mo,ir=Ct?n:On(y);return ys(ir||y,function(Nn,pr){ir&&(pr=Nn,Nn=y[pr]),L0(Be,pr,Ka(Nn,C,O,pr,y,Se))}),Be}function $ie(y){var C=Mo(y);return function(O){return eB(O,y,C)}}function eB(y,C,O){var Z=O.length;if(y==null)return!Z;for(y=ci(y);Z--;){var de=O[Z],Se=C[de],Be=y[de];if(Be===n&&!(de in y)||!Se(Be))return!1}return!0}function tB(y,C,O){if(typeof y!="function")throw new Ga(s);return $0(function(){y.apply(n,O)},C)}function B0(y,C,O,Z){var de=-1,Se=_h,Be=!0,Ge=y.length,it=[],Et=C.length;if(!Ge)return it;O&&(C=li(C,Kr(O))),Z?(Se=Bd,Be=!1):C.length>=i&&(Se=Ha,Be=!1,C=new Mh(C));e:for(;++de<Ge;){var Ct=y[de],It=O==null?Ct:O(Ct);if(Ct=Z||Ct!==0?Ct:0,Be&&It===It){for(var Jt=Et;Jt--;)if(C[Jt]===It)continue e;it.push(Ct)}else Se(C,It,Z)||it.push(Ct)}return it}var Vd=MB(_c),nB=MB(k2,!0);function Hie(y,C){var O=!0;return Vd(y,function(Z,de,Se){return O=!!C(Z,de,Se),O}),O}function T1(y,C,O){for(var Z=-1,de=y.length;++Z<de;){var Se=y[Z],Be=C(Se);if(Be!=null&&(Ge===n?Be===Be&&!ma(Be):O(Be,Ge)))var Ge=Be,it=Se}return it}function Gie(y,C,O,Z){var de=y.length;for(O=nr(O),O<0&&(O=-O>de?0:de+O),Z=Z===n||Z>de?de:nr(Z),Z<0&&(Z+=de),Z=O>Z?0:x4(Z);O<Z;)y[O++]=C;return y}function rB(y,C){var O=[];return Vd(y,function(Z,de,Se){C(Z,de,Se)&&O.push(Z)}),O}function No(y,C,O,Z,de){var Se=-1,Be=y.length;for(O||(O=Foe),de||(de=[]);++Se<Be;){var Ge=y[Se];C>0&&O(Ge)?C>1?No(Ge,C-1,O,Z,de):Nl(de,Ge):Z||(de[de.length]=Ge)}return de}var R2=PB(),iB=PB(!0);function _c(y,C){return y&&R2(y,C,Mo)}function k2(y,C){return y&&iB(y,C,Mo)}function M1(y,C){return $a(C,function(O){return Au(y[O])})}function Dh(y,C){C=$d(C,y);for(var O=0,Z=C.length;y!=null&&O<Z;)y=y[Cc(C[O++])];return O&&O==Z?y:n}function oB(y,C,O){var Z=C(y);return Qn(y)?Z:Nl(Z,O(y))}function xs(y){return y==null?y===n?ue:le:Ah&&Ah in ci(y)?Moe(y):zoe(y)}function I2(y,C){return y>C}function qie(y,C){return y!=null&&Zr.call(y,C)}function Kie(y,C){return y!=null&&C in ci(y)}function Yie(y,C,O){return y>=Zo(C,O)&&y<xo(C,O)}function F2(y,C,O){for(var Z=O?Bd:_h,de=y[0].length,Se=y.length,Be=Se,Ge=pt(Se),it=1/0,Et=[];Be--;){var Ct=y[Be];Be&&C&&(Ct=li(Ct,Kr(C))),it=Zo(Ct.length,it),Ge[Be]=!O&&(C||de>=120&&Ct.length>=120)?new Mh(Be&&Ct):n}Ct=y[0];var It=-1,Jt=Ge[0];e:for(;++It<de&&Et.length<it;){var bn=Ct[It],On=C?C(bn):bn;if(bn=O||bn!==0?bn:0,!(Jt?Ha(Jt,On):Z(Et,On,O))){for(Be=Se;--Be;){var ir=Ge[Be];if(!(ir?Ha(ir,On):Z(y[Be],On,O)))continue e}Jt&&Jt.push(On),Et.push(bn)}}return Et}function Xie(y,C,O,Z){return _c(y,function(de,Se,Be){C(Z,O(de),Se,Be)}),Z}function j0(y,C,O){C=$d(C,y),y=GB(y,C);var Z=y==null?y:y[Cc(Xa(C))];return Z==null?n:Xo(Z,y,O)}function sB(y){return Bi(y)&&xs(y)==J}function Qie(y){return Bi(y)&&xs(y)==je}function Zie(y){return Bi(y)&&xs(y)==pe}function U0(y,C,O,Z,de){return y===C?!0:y==null||C==null||!Bi(y)&&!Bi(C)?y!==y&&C!==C:Jie(y,C,O,Z,U0,de)}function Jie(y,C,O,Z,de,Se){var Be=Qn(y),Ge=Qn(C),it=Be?V:Jo(y),Et=Ge?V:Jo(C);it=it==J?me:it,Et=Et==J?me:Et;var Ct=it==me,It=Et==me,Jt=it==Et;if(Jt&&Gd(y)){if(!Gd(C))return!1;Be=!0,Ct=!1}if(Jt&&!Ct)return Se||(Se=new jl),Be||zm(y)?jB(y,C,O,Z,de,Se):Aoe(y,C,it,O,Z,de,Se);if(!(O&b)){var bn=Ct&&Zr.call(y,"__wrapped__"),On=It&&Zr.call(C,"__wrapped__");if(bn||On){var ir=bn?y.value():y,Nn=On?C.value():C;return Se||(Se=new jl),de(ir,Nn,O,Z,Se)}}return Jt?(Se||(Se=new jl),Toe(y,C,O,Z,de,Se)):!1}function eoe(y){return Bi(y)&&Jo(y)==ee}function O2(y,C,O,Z){var de=O.length,Se=de,Be=!Z;if(y==null)return!Se;for(y=ci(y);de--;){var Ge=O[de];if(Be&&Ge[2]?Ge[1]!==y[Ge[0]]:!(Ge[0]in y))return!1}for(;++de<Se;){Ge=O[de];var it=Ge[0],Et=y[it],Ct=Ge[1];if(Be&&Ge[2]){if(Et===n&&!(it in y))return!1}else{var It=new jl;if(Z)var Jt=Z(Et,Ct,it,y,C,It);if(!(Jt===n?U0(Ct,Et,b|v,Z,It):Jt))return!1}}return!0}function aB(y){if(!Mi(y)||Noe(y))return!1;var C=Au(y)?eie:xn;return C.test(kh(y))}function toe(y){return Bi(y)&&xs(y)==ge}function noe(y){return Bi(y)&&Jo(y)==Q}function roe(y){return Bi(y)&&H1(y.length)&&!!Dr[xs(y)]}function lB(y){return typeof y=="function"?y:y==null?qs:typeof y=="object"?Qn(y)?dB(y[0],y[1]):uB(y):D4(y)}function N2(y){if(!W0(y))return sie(y);var C=[];for(var O in ci(y))Zr.call(y,O)&&O!="constructor"&&C.push(O);return C}function ioe(y){if(!Mi(y))return Uoe(y);var C=W0(y),O=[];for(var Z in y)Z=="constructor"&&(C||!Zr.call(y,Z))||O.push(Z);return O}function L2(y,C){return y<C}function cB(y,C){var O=-1,Z=Hs(y)?pt(y.length):[];return Vd(y,function(de,Se,Be){Z[++O]=C(de,Se,Be)}),Z}function uB(y){var C=Z2(y);return C.length==1&&C[0][2]?$B(C[0][0],C[0][1]):function(O){return O===y||O2(O,y,C)}}function dB(y,C){return eM(y)&&WB(C)?$B(Cc(y),C):function(O){var Z=uM(O,y);return Z===n&&Z===C?dM(O,y):U0(C,Z,b|v)}}function P1(y,C,O,Z,de){y!==C&&R2(C,function(Se,Be){if(de||(de=new jl),Mi(Se))ooe(y,C,Be,O,P1,Z,de);else{var Ge=Z?Z(nM(y,Be),Se,Be+"",y,C,de):n;Ge===n&&(Ge=Se),P2(y,Be,Ge)}},Gs)}function ooe(y,C,O,Z,de,Se,Be){var Ge=nM(y,O),it=nM(C,O),Et=Be.get(it);if(Et){P2(y,O,Et);return}var Ct=Se?Se(Ge,it,O+"",y,C,Be):n,It=Ct===n;if(It){var Jt=Qn(it),bn=!Jt&&Gd(it),On=!Jt&&!bn&&zm(it);Ct=it,Jt||bn||On?Qn(Ge)?Ct=Ge:Yi(Ge)?Ct=$s(Ge):bn?(It=!1,Ct=_B(it,!0)):On?(It=!1,Ct=EB(it,!0)):Ct=[]:H0(it)||Ih(it)?(Ct=Ge,Ih(Ge)?Ct=b4(Ge):(!Mi(Ge)||Au(Ge))&&(Ct=VB(it))):It=!1}It&&(Be.set(it,Ct),de(Ct,it,Z,Se,Be),Be.delete(it)),P2(y,O,Ct)}function fB(y,C){var O=y.length;if(O)return C+=C<0?O:0,Cu(C,O)?y[C]:n}function hB(y,C,O){C.length?C=li(C,function(Se){return Qn(Se)?function(Be){return Dh(Be,Se.length===1?Se[0]:Se)}:Se}):C=[qs];var Z=-1;C=li(C,Kr(In()));var de=cB(y,function(Se,Be,Ge){var it=li(C,function(Et){return Et(Se)});return{criteria:it,index:++Z,value:Se}});return mt(de,function(Se,Be){return yoe(Se,Be,O)})}function soe(y,C){return pB(y,C,function(O,Z){return dM(y,Z)})}function pB(y,C,O){for(var Z=-1,de=C.length,Se={};++Z<de;){var Be=C[Z],Ge=Dh(y,Be);O(Ge,Be)&&z0(Se,$d(Be,y),Ge)}return Se}function aoe(y){return function(C){return Dh(C,y)}}function B2(y,C,O,Z){var de=Z?jd:xu,Se=-1,Be=C.length,Ge=y;for(y===C&&(C=$s(C)),O&&(Ge=li(y,Kr(O)));++Se<Be;)for(var it=0,Et=C[Se],Ct=O?O(Et):Et;(it=de(Ge,Ct,it,Z))>-1;)Ge!==y&&x1.call(Ge,it,1),x1.call(y,it,1);return y}function mB(y,C){for(var O=y?C.length:0,Z=O-1;O--;){var de=C[O];if(O==Z||de!==Se){var Se=de;Cu(de)?x1.call(y,de,1):V2(y,de)}}return y}function j2(y,C){return y+S1(Y5()*(C-y+1))}function loe(y,C,O,Z){for(var de=-1,Se=xo(w1((C-y)/(O||1)),0),Be=pt(Se);Se--;)Be[Z?Se:++de]=y,y+=O;return Be}function U2(y,C){var O="";if(!y||C<1||C>j)return O;do C%2&&(O+=y),C=S1(C/2),C&&(y+=y);while(C);return O}function lr(y,C){return rM(HB(y,C,qs),y+"")}function coe(y){return Z5(Vm(y))}function uoe(y,C){var O=Vm(y);return j1(O,Ph(C,0,O.length))}function z0(y,C,O,Z){if(!Mi(y))return y;C=$d(C,y);for(var de=-1,Se=C.length,Be=Se-1,Ge=y;Ge!=null&&++de<Se;){var it=Cc(C[de]),Et=O;if(it==="__proto__"||it==="constructor"||it==="prototype")return y;if(de!=Be){var Ct=Ge[it];Et=Z?Z(Ct,it,Ge):n,Et===n&&(Et=Mi(Ct)?Ct:Cu(C[de+1])?[]:{})}L0(Ge,it,Et),Ge=Ge[it]}return y}var gB=_1?function(y,C){return _1.set(y,C),y}:qs,doe=b1?function(y,C){return b1(y,"toString",{configurable:!0,enumerable:!1,value:hM(C),writable:!0})}:qs;function foe(y){return j1(Vm(y))}function Ya(y,C,O){var Z=-1,de=y.length;C<0&&(C=-C>de?0:de+C),O=O>de?de:O,O<0&&(O+=de),de=C>O?0:O-C>>>0,C>>>=0;for(var Se=pt(de);++Z<de;)Se[Z]=y[Z+C];return Se}function hoe(y,C){var O;return Vd(y,function(Z,de,Se){return O=C(Z,de,Se),!O}),!!O}function D1(y,C,O){var Z=0,de=y==null?Z:y.length;if(typeof C=="number"&&C===C&&de<=G){for(;Z<de;){var Se=Z+de>>>1,Be=y[Se];Be!==null&&!ma(Be)&&(O?Be<=C:Be<C)?Z=Se+1:de=Se}return de}return z2(y,C,qs,O)}function z2(y,C,O,Z){var de=0,Se=y==null?0:y.length;if(Se===0)return 0;C=O(C);for(var Be=C!==C,Ge=C===null,it=ma(C),Et=C===n;de<Se;){var Ct=S1((de+Se)/2),It=O(y[Ct]),Jt=It!==n,bn=It===null,On=It===It,ir=ma(It);if(Be)var Nn=Z||On;else Et?Nn=On&&(Z||Jt):Ge?Nn=On&&Jt&&(Z||!bn):it?Nn=On&&Jt&&!bn&&(Z||!ir):bn||ir?Nn=!1:Nn=Z?It<=C:It<C;Nn?de=Ct+1:Se=Ct}return Zo(Se,K)}function vB(y,C){for(var O=-1,Z=y.length,de=0,Se=[];++O<Z;){var Be=y[O],Ge=C?C(Be):Be;if(!O||!Ul(Ge,it)){var it=Ge;Se[de++]=Be===0?0:Be}}return Se}function yB(y){return typeof y=="number"?y:ma(y)?q:+y}function pa(y){if(typeof y=="string")return y;if(Qn(y))return li(y,pa)+"";if(ma(y))return X5?X5.call(y):"";var C=y+"";return C=="0"&&1/y==-1/0?"-0":C}function Wd(y,C,O){var Z=-1,de=_h,Se=y.length,Be=!0,Ge=[],it=Ge;if(O)Be=!1,de=Bd;else if(Se>=i){var Et=C?null:Eoe(y);if(Et)return d1(Et);Be=!1,de=Ha,it=new Mh}else it=C?[]:Ge;e:for(;++Z<Se;){var Ct=y[Z],It=C?C(Ct):Ct;if(Ct=O||Ct!==0?Ct:0,Be&&It===It){for(var Jt=it.length;Jt--;)if(it[Jt]===It)continue e;C&&it.push(It),Ge.push(Ct)}else de(it,It,O)||(it!==Ge&&it.push(It),Ge.push(Ct))}return Ge}function V2(y,C){return C=$d(C,y),y=GB(y,C),y==null||delete y[Cc(Xa(C))]}function xB(y,C,O,Z){return z0(y,C,O(Dh(y,C)),Z)}function R1(y,C,O,Z){for(var de=y.length,Se=Z?de:-1;(Z?Se--:++Se<de)&&C(y[Se],Se,y););return O?Ya(y,Z?0:Se,Z?Se+1:de):Ya(y,Z?Se+1:0,Z?de:Se)}function bB(y,C){var O=y;return O instanceof vr&&(O=O.value()),Ll(C,function(Z,de){return de.func.apply(de.thisArg,Nl([Z],de.args))},O)}function W2(y,C,O){var Z=y.length;if(Z<2)return Z?Wd(y[0]):[];for(var de=-1,Se=pt(Z);++de<Z;)for(var Be=y[de],Ge=-1;++Ge<Z;)Ge!=de&&(Se[de]=B0(Se[de]||Be,y[Ge],C,O));return Wd(No(Se,1),C,O)}function wB(y,C,O){for(var Z=-1,de=y.length,Se=C.length,Be={};++Z<de;){var Ge=Z<Se?C[Z]:n;O(Be,y[Z],Ge)}return Be}function $2(y){return Yi(y)?y:[]}function H2(y){return typeof y=="function"?y:qs}function $d(y,C){return Qn(y)?y:eM(y,C)?[y]:XB(Yr(y))}var poe=lr;function Hd(y,C,O){var Z=y.length;return O=O===n?Z:O,!C&&O>=Z?y:Ya(y,C,O)}var SB=tie||function(y){return An.clearTimeout(y)};function _B(y,C){if(C)return y.slice();var O=y.length,Z=$5?$5(O):new y.constructor(O);return y.copy(Z),Z}function G2(y){var C=new y.constructor(y.byteLength);return new v1(C).set(new v1(y)),C}function moe(y,C){var O=C?G2(y.buffer):y.buffer;return new y.constructor(O,y.byteOffset,y.byteLength)}function goe(y){var C=new y.constructor(y.source,qr.exec(y));return C.lastIndex=y.lastIndex,C}function voe(y){return N0?ci(N0.call(y)):{}}function EB(y,C){var O=C?G2(y.buffer):y.buffer;return new y.constructor(O,y.byteOffset,y.length)}function CB(y,C){if(y!==C){var O=y!==n,Z=y===null,de=y===y,Se=ma(y),Be=C!==n,Ge=C===null,it=C===C,Et=ma(C);if(!Ge&&!Et&&!Se&&y>C||Se&&Be&&it&&!Ge&&!Et||Z&&Be&&it||!O&&it||!de)return 1;if(!Z&&!Se&&!Et&&y<C||Et&&O&&de&&!Z&&!Se||Ge&&O&&de||!Be&&de||!it)return-1}return 0}function yoe(y,C,O){for(var Z=-1,de=y.criteria,Se=C.criteria,Be=de.length,Ge=O.length;++Z<Be;){var it=CB(de[Z],Se[Z]);if(it){if(Z>=Ge)return it;var Et=O[Z];return it*(Et=="desc"?-1:1)}}return y.index-C.index}function AB(y,C,O,Z){for(var de=-1,Se=y.length,Be=O.length,Ge=-1,it=C.length,Et=xo(Se-Be,0),Ct=pt(it+Et),It=!Z;++Ge<it;)Ct[Ge]=C[Ge];for(;++de<Be;)(It||de<Se)&&(Ct[O[de]]=y[de]);for(;Et--;)Ct[Ge++]=y[de++];return Ct}function TB(y,C,O,Z){for(var de=-1,Se=y.length,Be=-1,Ge=O.length,it=-1,Et=C.length,Ct=xo(Se-Ge,0),It=pt(Ct+Et),Jt=!Z;++de<Ct;)It[de]=y[de];for(var bn=de;++it<Et;)It[bn+it]=C[it];for(;++Be<Ge;)(Jt||de<Se)&&(It[bn+O[Be]]=y[de++]);return It}function $s(y,C){var O=-1,Z=y.length;for(C||(C=pt(Z));++O<Z;)C[O]=y[O];return C}function Ec(y,C,O,Z){var de=!O;O||(O={});for(var Se=-1,Be=C.length;++Se<Be;){var Ge=C[Se],it=Z?Z(O[Ge],y[Ge],Ge,O,y):n;it===n&&(it=y[Ge]),de?Su(O,Ge,it):L0(O,Ge,it)}return O}function xoe(y,C){return Ec(y,J2(y),C)}function boe(y,C){return Ec(y,UB(y),C)}function k1(y,C){return function(O,Z){var de=Qn(O)?Sh:Vie,Se=C?C():{};return de(O,y,In(Z,2),Se)}}function Bm(y){return lr(function(C,O){var Z=-1,de=O.length,Se=de>1?O[de-1]:n,Be=de>2?O[2]:n;for(Se=y.length>3&&typeof Se=="function"?(de--,Se):n,Be&&bs(O[0],O[1],Be)&&(Se=de<3?n:Se,de=1),C=ci(C);++Z<de;){var Ge=O[Z];Ge&&y(C,Ge,Z,Se)}return C})}function MB(y,C){return function(O,Z){if(O==null)return O;if(!Hs(O))return y(O,Z);for(var de=O.length,Se=C?de:-1,Be=ci(O);(C?Se--:++Se<de)&&Z(Be[Se],Se,Be)!==!1;);return O}}function PB(y){return function(C,O,Z){for(var de=-1,Se=ci(C),Be=Z(C),Ge=Be.length;Ge--;){var it=Be[y?Ge:++de];if(O(Se[it],it,Se)===!1)break}return C}}function woe(y,C,O){var Z=C&m,de=V0(y);function Se(){var Be=this&&this!==An&&this instanceof Se?de:y;return Be.apply(Z?O:this,arguments)}return Se}function DB(y){return function(C){C=Yr(C);var O=Rm(C)?Bl(C):n,Z=O?O[0]:C.charAt(0),de=O?Hd(O,1).join(""):C.slice(1);return Z[y]()+de}}function jm(y){return function(C){return Ll(M4(T4(C).replace(Em,"")),y,"")}}function V0(y){return function(){var C=arguments;switch(C.length){case 0:return new y;case 1:return new y(C[0]);case 2:return new y(C[0],C[1]);case 3:return new y(C[0],C[1],C[2]);case 4:return new y(C[0],C[1],C[2],C[3]);case 5:return new y(C[0],C[1],C[2],C[3],C[4]);case 6:return new y(C[0],C[1],C[2],C[3],C[4],C[5]);case 7:return new y(C[0],C[1],C[2],C[3],C[4],C[5],C[6])}var O=Lm(y.prototype),Z=y.apply(O,C);return Mi(Z)?Z:O}}function Soe(y,C,O){var Z=V0(y);function de(){for(var Se=arguments.length,Be=pt(Se),Ge=Se,it=Um(de);Ge--;)Be[Ge]=arguments[Ge];var Et=Se<3&&Be[0]!==it&&Be[Se-1]!==it?[]:Ud(Be,it);if(Se-=Et.length,Se<O)return OB(y,C,I1,de.placeholder,n,Be,Et,n,n,O-Se);var Ct=this&&this!==An&&this instanceof de?Z:y;return Xo(Ct,this,Be)}return de}function RB(y){return function(C,O,Z){var de=ci(C);if(!Hs(C)){var Se=In(O,3);C=Mo(C),O=function(Ge){return Se(de[Ge],Ge,de)}}var Be=y(C,O,Z);return Be>-1?de[Se?C[Be]:Be]:n}}function kB(y){return Eu(function(C){var O=C.length,Z=O,de=qa.prototype.thru;for(y&&C.reverse();Z--;){var Se=C[Z];if(typeof Se!="function")throw new Ga(s);if(de&&!Be&&L1(Se)=="wrapper")var Be=new qa([],!0)}for(Z=Be?Z:O;++Z<O;){Se=C[Z];var Ge=L1(Se),it=Ge=="wrapper"?Q2(Se):n;it&&tM(it[0])&&it[1]==(P|w|D|M)&&!it[4].length&&it[9]==1?Be=Be[L1(it[0])].apply(Be,it[3]):Be=Se.length==1&&tM(Se)?Be[Ge]():Be.thru(Se)}return function(){var Et=arguments,Ct=Et[0];if(Be&&Et.length==1&&Qn(Ct))return Be.plant(Ct).value();for(var It=0,Jt=O?C[It].apply(this,Et):Ct;++It<O;)Jt=C[It].call(this,Jt);return Jt}})}function I1(y,C,O,Z,de,Se,Be,Ge,it,Et){var Ct=C&P,It=C&m,Jt=C&g,bn=C&(w|S),On=C&T,ir=Jt?n:V0(y);function Nn(){for(var pr=arguments.length,_r=pt(pr),ga=pr;ga--;)_r[ga]=arguments[ga];if(bn)var ws=Um(Nn),va=R0(_r,ws);if(Z&&(_r=AB(_r,Z,de,bn)),Se&&(_r=TB(_r,Se,Be,bn)),pr-=va,bn&&pr<Et){var Xi=Ud(_r,ws);return OB(y,C,I1,Nn.placeholder,O,_r,Xi,Ge,it,Et-pr)}var zl=It?O:this,Mu=Jt?zl[y]:y;return pr=_r.length,Ge?_r=Voe(_r,Ge):On&&pr>1&&_r.reverse(),Ct&&it<pr&&(_r.length=it),this&&this!==An&&this instanceof Nn&&(Mu=ir||V0(Mu)),Mu.apply(zl,_r)}return Nn}function IB(y,C){return function(O,Z){return Xie(O,y,C(Z),{})}}function F1(y,C){return function(O,Z){var de;if(O===n&&Z===n)return C;if(O!==n&&(de=O),Z!==n){if(de===n)return Z;typeof O=="string"||typeof Z=="string"?(O=pa(O),Z=pa(Z)):(O=yB(O),Z=yB(Z)),de=y(O,Z)}return de}}function q2(y){return Eu(function(C){return C=li(C,Kr(In())),lr(function(O){var Z=this;return y(C,function(de){return Xo(de,Z,O)})})})}function O1(y,C){C=C===n?" ":pa(C);var O=C.length;if(O<2)return O?U2(C,y):C;var Z=U2(C,w1(y/km(C)));return Rm(C)?Hd(Bl(Z),0,y).join(""):Z.slice(0,y)}function _oe(y,C,O,Z){var de=C&m,Se=V0(y);function Be(){for(var Ge=-1,it=arguments.length,Et=-1,Ct=Z.length,It=pt(Ct+it),Jt=this&&this!==An&&this instanceof Be?Se:y;++Et<Ct;)It[Et]=Z[Et];for(;it--;)It[Et++]=arguments[++Ge];return Xo(Jt,de?O:this,It)}return Be}function FB(y){return function(C,O,Z){return Z&&typeof Z!="number"&&bs(C,O,Z)&&(O=Z=n),C=Tu(C),O===n?(O=C,C=0):O=Tu(O),Z=Z===n?C<O?1:-1:Tu(Z),loe(C,O,Z,y)}}function N1(y){return function(C,O){return typeof C=="string"&&typeof O=="string"||(C=Qa(C),O=Qa(O)),y(C,O)}}function OB(y,C,O,Z,de,Se,Be,Ge,it,Et){var Ct=C&w,It=Ct?Be:n,Jt=Ct?n:Be,bn=Ct?Se:n,On=Ct?n:Se;C|=Ct?D:k,C&=~(Ct?k:D),C&x||(C&=-4);var ir=[y,C,de,bn,It,On,Jt,Ge,it,Et],Nn=O.apply(n,ir);return tM(y)&&qB(Nn,ir),Nn.placeholder=Z,KB(Nn,y,C)}function K2(y){var C=yo[y];return function(O,Z){if(O=Qa(O),Z=Z==null?0:Zo(nr(Z),292),Z&&K5(O)){var de=(Yr(O)+"e").split("e"),Se=C(de[0]+"e"+(+de[1]+Z));return de=(Yr(Se)+"e").split("e"),+(de[0]+"e"+(+de[1]-Z))}return C(O)}}var Eoe=Om&&1/d1(new Om([,-0]))[1]==H?function(y){return new Om(y)}:gM;function NB(y){return function(C){var O=Jo(C);return O==ee?E2(C):O==Q?zre(C):vo(C,y(C))}}function _u(y,C,O,Z,de,Se,Be,Ge){var it=C&g;if(!it&&typeof y!="function")throw new Ga(s);var Et=Z?Z.length:0;if(Et||(C&=-97,Z=de=n),Be=Be===n?Be:xo(nr(Be),0),Ge=Ge===n?Ge:nr(Ge),Et-=de?de.length:0,C&k){var Ct=Z,It=de;Z=de=n}var Jt=it?n:Q2(y),bn=[y,C,O,Z,de,Ct,It,Se,Be,Ge];if(Jt&&joe(bn,Jt),y=bn[0],C=bn[1],O=bn[2],Z=bn[3],de=bn[4],Ge=bn[9]=bn[9]===n?it?0:y.length:xo(bn[9]-Et,0),!Ge&&C&(w|S)&&(C&=-25),!C||C==m)var On=woe(y,C,O);else C==w||C==S?On=Soe(y,C,Ge):(C==D||C==(m|D))&&!de.length?On=_oe(y,C,O,Z):On=I1.apply(n,bn);var ir=Jt?gB:qB;return KB(ir(On,bn),y,C)}function LB(y,C,O,Z){return y===n||Ul(y,Fm[O])&&!Zr.call(Z,O)?C:y}function BB(y,C,O,Z,de,Se){return Mi(y)&&Mi(C)&&(Se.set(C,y),P1(y,C,n,BB,Se),Se.delete(C)),y}function Coe(y){return H0(y)?n:y}function jB(y,C,O,Z,de,Se){var Be=O&b,Ge=y.length,it=C.length;if(Ge!=it&&!(Be&&it>Ge))return!1;var Et=Se.get(y),Ct=Se.get(C);if(Et&&Ct)return Et==C&&Ct==y;var It=-1,Jt=!0,bn=O&v?new Mh:n;for(Se.set(y,C),Se.set(C,y);++It<Ge;){var On=y[It],ir=C[It];if(Z)var Nn=Be?Z(ir,On,It,C,y,Se):Z(On,ir,It,y,C,Se);if(Nn!==n){if(Nn)continue;Jt=!1;break}if(bn){if(!Pm(C,function(pr,_r){if(!Ha(bn,_r)&&(On===pr||de(On,pr,O,Z,Se)))return bn.push(_r)})){Jt=!1;break}}else if(!(On===ir||de(On,ir,O,Z,Se))){Jt=!1;break}}return Se.delete(y),Se.delete(C),Jt}function Aoe(y,C,O,Z,de,Se,Be){switch(O){case ke:if(y.byteLength!=C.byteLength||y.byteOffset!=C.byteOffset)return!1;y=y.buffer,C=C.buffer;case je:return!(y.byteLength!=C.byteLength||!Se(new v1(y),new v1(C)));case fe:case pe:case Oe:return Ul(+y,+C);case xe:return y.name==C.name&&y.message==C.message;case ge:case W:return y==C+"";case ee:var Ge=E2;case Q:var it=Z&b;if(Ge||(Ge=d1),y.size!=C.size&&!it)return!1;var Et=Be.get(y);if(Et)return Et==C;Z|=v,Be.set(y,C);var Ct=jB(Ge(y),Ge(C),Z,de,Se,Be);return Be.delete(y),Ct;case ve:if(N0)return N0.call(y)==N0.call(C)}return!1}function Toe(y,C,O,Z,de,Se){var Be=O&b,Ge=Y2(y),it=Ge.length,Et=Y2(C),Ct=Et.length;if(it!=Ct&&!Be)return!1;for(var It=it;It--;){var Jt=Ge[It];if(!(Be?Jt in C:Zr.call(C,Jt)))return!1}var bn=Se.get(y),On=Se.get(C);if(bn&&On)return bn==C&&On==y;var ir=!0;Se.set(y,C),Se.set(C,y);for(var Nn=Be;++It<it;){Jt=Ge[It];var pr=y[Jt],_r=C[Jt];if(Z)var ga=Be?Z(_r,pr,Jt,C,y,Se):Z(pr,_r,Jt,y,C,Se);if(!(ga===n?pr===_r||de(pr,_r,O,Z,Se):ga)){ir=!1;break}Nn||(Nn=Jt=="constructor")}if(ir&&!Nn){var ws=y.constructor,va=C.constructor;ws!=va&&"constructor"in y&&"constructor"in C&&!(typeof ws=="function"&&ws instanceof ws&&typeof va=="function"&&va instanceof va)&&(ir=!1)}return Se.delete(y),Se.delete(C),ir}function Eu(y){return rM(HB(y,n,e4),y+"")}function Y2(y){return oB(y,Mo,J2)}function X2(y){return oB(y,Gs,UB)}var Q2=_1?function(y){return _1.get(y)}:gM;function L1(y){for(var C=y.name+"",O=Nm[C],Z=Zr.call(Nm,C)?O.length:0;Z--;){var de=O[Z],Se=de.func;if(Se==null||Se==y)return de.name}return C}function Um(y){var C=Zr.call(ye,"placeholder")?ye:y;return C.placeholder}function In(){var y=ye.iteratee||pM;return y=y===pM?lB:y,arguments.length?y(arguments[0],arguments[1]):y}function B1(y,C){var O=y.__data__;return Ooe(C)?O[typeof C=="string"?"string":"hash"]:O.map}function Z2(y){for(var C=Mo(y),O=C.length;O--;){var Z=C[O],de=y[Z];C[O]=[Z,de,WB(de)]}return C}function Rh(y,C){var O=Bre(y,C);return aB(O)?O:n}function Moe(y){var C=Zr.call(y,Ah),O=y[Ah];try{y[Ah]=n;var Z=!0}catch(Se){}var de=m1.call(y);return Z&&(C?y[Ah]=O:delete y[Ah]),de}var J2=A2?function(y){return y==null?[]:(y=ci(y),$a(A2(y),function(C){return G5.call(y,C)}))}:vM,UB=A2?function(y){for(var C=[];y;)Nl(C,J2(y)),y=y1(y);return C}:vM,Jo=xs;(T2&&Jo(new T2(new ArrayBuffer(1)))!=ke||I0&&Jo(new I0)!=ee||M2&&Jo(M2.resolve())!=ne||Om&&Jo(new Om)!=Q||F0&&Jo(new F0)!=Me)&&(Jo=function(y){var C=xs(y),O=C==me?y.constructor:n,Z=O?kh(O):"";if(Z)switch(Z){case uie:return ke;case die:return ee;case fie:return ne;case hie:return Q;case pie:return Me}return C});function Poe(y,C,O){for(var Z=-1,de=O.length;++Z<de;){var Se=O[Z],Be=Se.size;switch(Se.type){case"drop":y+=Be;break;case"dropRight":C-=Be;break;case"take":C=Zo(C,y+Be);break;case"takeRight":y=xo(y,C-Be);break}}return{start:y,end:C}}function Doe(y){var C=y.match(Qt);return C?C[1].split(Vt):[]}function zB(y,C,O){C=$d(C,y);for(var Z=-1,de=C.length,Se=!1;++Z<de;){var Be=Cc(C[Z]);if(!(Se=y!=null&&O(y,Be)))break;y=y[Be]}return Se||++Z!=de?Se:(de=y==null?0:y.length,!!de&&H1(de)&&Cu(Be,de)&&(Qn(y)||Ih(y)))}function Roe(y){var C=y.length,O=new y.constructor(C);return C&&typeof y[0]=="string"&&Zr.call(y,"index")&&(O.index=y.index,O.input=y.input),O}function VB(y){return typeof y.constructor=="function"&&!W0(y)?Lm(y1(y)):{}}function koe(y,C,O){var Z=y.constructor;switch(C){case je:return G2(y);case fe:case pe:return new Z(+y);case ke:return moe(y,O);case De:case nt:case be:case Ne:case Ie:case Ve:case Ue:case tt:case st:return EB(y,O);case ee:return new Z;case Oe:case W:return new Z(y);case ge:return goe(y);case Q:return new Z;case ve:return voe(y)}}function Ioe(y,C){var O=C.length;if(!O)return y;var Z=O-1;return C[Z]=(O>1?"& ":"")+C[Z],C=C.join(O>2?", ":" "),y.replace(Ht,`{
/* [wrapped with `+C+`] */
`)}function Foe(y){return Qn(y)||Ih(y)||!!(q5&&y&&y[q5])}function Cu(y,C){var O=typeof y;return C=C==null?j:C,!!C&&(O=="number"||O!="symbol"&&Je.test(y))&&y>-1&&y%1==0&&y<C}function bs(y,C,O){if(!Mi(O))return!1;var Z=typeof C;return(Z=="number"?Hs(O)&&Cu(C,O.length):Z=="string"&&C in O)?Ul(O[C],y):!1}function eM(y,C){if(Qn(y))return!1;var O=typeof y;return O=="number"||O=="symbol"||O=="boolean"||y==null||ma(y)?!0:ze.test(y)||!Ce.test(y)||C!=null&&y in ci(C)}function Ooe(y){var C=typeof y;return C=="string"||C=="number"||C=="symbol"||C=="boolean"?y!=="__proto__":y===null}function tM(y){var C=L1(y),O=ye[C];if(typeof O!="function"||!(C in vr.prototype))return!1;if(y===O)return!0;var Z=Q2(O);return!!Z&&y===Z[0]}function Noe(y){return!!W5&&W5 in y}var Loe=h1?Au:yM;function W0(y){var C=y&&y.constructor,O=typeof C=="function"&&C.prototype||Fm;return y===O}function WB(y){return y===y&&!Mi(y)}function $B(y,C){return function(O){return O==null?!1:O[y]===C&&(C!==n||y in ci(O))}}function Boe(y){var C=W1(y,function(Z){return O.size===c&&O.clear(),Z}),O=C.cache;return C}function joe(y,C){var O=y[1],Z=C[1],de=O|Z,Se=de<(m|g|P),Be=Z==P&&O==w||Z==P&&O==M&&y[7].length<=C[8]||Z==(P|M)&&C[7].length<=C[8]&&O==w;if(!(Se||Be))return y;Z&m&&(y[2]=C[2],de|=O&m?0:x);var Ge=C[3];if(Ge){var it=y[3];y[3]=it?AB(it,Ge,C[4]):Ge,y[4]=it?Ud(y[3],u):C[4]}return Ge=C[5],Ge&&(it=y[5],y[5]=it?TB(it,Ge,C[6]):Ge,y[6]=it?Ud(y[5],u):C[6]),Ge=C[7],Ge&&(y[7]=Ge),Z&P&&(y[8]=y[8]==null?C[8]:Zo(y[8],C[8])),y[9]==null&&(y[9]=C[9]),y[0]=C[0],y[1]=de,y}function Uoe(y){var C=[];if(y!=null)for(var O in ci(y))C.push(O);return C}function zoe(y){return m1.call(y)}function HB(y,C,O){return C=xo(C===n?y.length-1:C,0),function(){for(var Z=arguments,de=-1,Se=xo(Z.length-C,0),Be=pt(Se);++de<Se;)Be[de]=Z[C+de];de=-1;for(var Ge=pt(C+1);++de<C;)Ge[de]=Z[de];return Ge[C]=O(Be),Xo(y,this,Ge)}}function GB(y,C){return C.length<2?y:Dh(y,Ya(C,0,-1))}function Voe(y,C){for(var O=y.length,Z=Zo(C.length,O),de=$s(y);Z--;){var Se=C[Z];y[Z]=Cu(Se,O)?de[Se]:n}return y}function nM(y,C){if(!(C==="constructor"&&typeof y[C]=="function")&&C!="__proto__")return y[C]}var qB=YB(gB),$0=rie||function(y,C){return An.setTimeout(y,C)},rM=YB(doe);function KB(y,C,O){var Z=C+"";return rM(y,Ioe(Z,Woe(Doe(Z),O)))}function YB(y){var C=0,O=0;return function(){var Z=aie(),de=F-(Z-O);if(O=Z,de>0){if(++C>=R)return arguments[0]}else C=0;return y.apply(n,arguments)}}function j1(y,C){var O=-1,Z=y.length,de=Z-1;for(C=C===n?Z:C;++O<C;){var Se=j2(O,de),Be=y[Se];y[Se]=y[O],y[O]=Be}return y.length=C,y}var XB=Boe(function(y){var C=[];return y.charCodeAt(0)===46&&C.push(""),y.replace(Qe,function(O,Z,de,Se){C.push(de?Se.replace(Wn,"$1"):Z||O)}),C});function Cc(y){if(typeof y=="string"||ma(y))return y;var C=y+"";return C=="0"&&1/y==-1/0?"-0":C}function kh(y){if(y!=null){try{return p1.call(y)}catch(C){}try{return y+""}catch(C){}}return""}function Woe(y,C){return ys(Y,function(O){var Z="_."+O[0];C&O[1]&&!_h(y,Z)&&y.push(Z)}),y.sort()}function QB(y){if(y instanceof vr)return y.clone();var C=new qa(y.__wrapped__,y.__chain__);return C.__actions__=$s(y.__actions__),C.__index__=y.__index__,C.__values__=y.__values__,C}function $oe(y,C,O){(O?bs(y,C,O):C===n)?C=1:C=xo(nr(C),0);var Z=y==null?0:y.length;if(!Z||C<1)return[];for(var de=0,Se=0,Be=pt(w1(Z/C));de<Z;)Be[Se++]=Ya(y,de,de+=C);return Be}function Hoe(y){for(var C=-1,O=y==null?0:y.length,Z=0,de=[];++C<O;){var Se=y[C];Se&&(de[Z++]=Se)}return de}function Goe(){var y=arguments.length;if(!y)return[];for(var C=pt(y-1),O=arguments[0],Z=y;Z--;)C[Z-1]=arguments[Z];return Nl(Qn(O)?$s(O):[O],No(C,1))}var qoe=lr(function(y,C){return Yi(y)?B0(y,No(C,1,Yi,!0)):[]}),Koe=lr(function(y,C){var O=Xa(C);return Yi(O)&&(O=n),Yi(y)?B0(y,No(C,1,Yi,!0),In(O,2)):[]}),Yoe=lr(function(y,C){var O=Xa(C);return Yi(O)&&(O=n),Yi(y)?B0(y,No(C,1,Yi,!0),n,O):[]});function Xoe(y,C,O){var Z=y==null?0:y.length;return Z?(C=O||C===n?1:nr(C),Ya(y,C<0?0:C,Z)):[]}function Qoe(y,C,O){var Z=y==null?0:y.length;return Z?(C=O||C===n?1:nr(C),C=Z-C,Ya(y,0,C<0?0:C)):[]}function Zoe(y,C){return y&&y.length?R1(y,In(C,3),!0,!0):[]}function Joe(y,C){return y&&y.length?R1(y,In(C,3),!0):[]}function ese(y,C,O,Z){var de=y==null?0:y.length;return de?(O&&typeof O!="number"&&bs(y,C,O)&&(O=0,Z=de),Gie(y,C,O,Z)):[]}function ZB(y,C,O){var Z=y==null?0:y.length;if(!Z)return-1;var de=O==null?0:nr(O);return de<0&&(de=xo(Z+de,0)),Eh(y,In(C,3),de)}function JB(y,C,O){var Z=y==null?0:y.length;if(!Z)return-1;var de=Z-1;return O!==n&&(de=nr(O),de=O<0?xo(Z+de,0):Zo(de,Z-1)),Eh(y,In(C,3),de,!0)}function e4(y){var C=y==null?0:y.length;return C?No(y,1):[]}function tse(y){var C=y==null?0:y.length;return C?No(y,H):[]}function nse(y,C){var O=y==null?0:y.length;return O?(C=C===n?1:nr(C),No(y,C)):[]}function rse(y){for(var C=-1,O=y==null?0:y.length,Z={};++C<O;){var de=y[C];Z[de[0]]=de[1]}return Z}function t4(y){return y&&y.length?y[0]:n}function ise(y,C,O){var Z=y==null?0:y.length;if(!Z)return-1;var de=O==null?0:nr(O);return de<0&&(de=xo(Z+de,0)),xu(y,C,de)}function ose(y){var C=y==null?0:y.length;return C?Ya(y,0,-1):[]}var sse=lr(function(y){var C=li(y,$2);return C.length&&C[0]===y[0]?F2(C):[]}),ase=lr(function(y){var C=Xa(y),O=li(y,$2);return C===Xa(O)?C=n:O.pop(),O.length&&O[0]===y[0]?F2(O,In(C,2)):[]}),lse=lr(function(y){var C=Xa(y),O=li(y,$2);return C=typeof C=="function"?C:n,C&&O.pop(),O.length&&O[0]===y[0]?F2(O,n,C):[]});function cse(y,C){return y==null?"":oie.call(y,C)}function Xa(y){var C=y==null?0:y.length;return C?y[C-1]:n}function use(y,C,O){var Z=y==null?0:y.length;if(!Z)return-1;var de=Z;return O!==n&&(de=nr(O),de=de<0?xo(Z+de,0):Zo(de,Z-1)),C===C?Wre(y,C,de):Eh(y,I,de,!0)}function dse(y,C){return y&&y.length?fB(y,nr(C)):n}var fse=lr(n4);function n4(y,C){return y&&y.length&&C&&C.length?B2(y,C):y}function hse(y,C,O){return y&&y.length&&C&&C.length?B2(y,C,In(O,2)):y}function pse(y,C,O){return y&&y.length&&C&&C.length?B2(y,C,n,O):y}var mse=Eu(function(y,C){var O=y==null?0:y.length,Z=D2(y,C);return mB(y,li(C,function(de){return Cu(de,O)?+de:de}).sort(CB)),Z});function gse(y,C){var O=[];if(!(y&&y.length))return O;var Z=-1,de=[],Se=y.length;for(C=In(C,3);++Z<Se;){var Be=y[Z];C(Be,Z,y)&&(O.push(Be),de.push(Z))}return mB(y,de),O}function iM(y){return y==null?y:cie.call(y)}function vse(y,C,O){var Z=y==null?0:y.length;return Z?(O&&typeof O!="number"&&bs(y,C,O)?(C=0,O=Z):(C=C==null?0:nr(C),O=O===n?Z:nr(O)),Ya(y,C,O)):[]}function yse(y,C){return D1(y,C)}function xse(y,C,O){return z2(y,C,In(O,2))}function bse(y,C){var O=y==null?0:y.length;if(O){var Z=D1(y,C);if(Z<O&&Ul(y[Z],C))return Z}return-1}function wse(y,C){return D1(y,C,!0)}function Sse(y,C,O){return z2(y,C,In(O,2),!0)}function _se(y,C){var O=y==null?0:y.length;if(O){var Z=D1(y,C,!0)-1;if(Ul(y[Z],C))return Z}return-1}function Ese(y){return y&&y.length?vB(y):[]}function Cse(y,C){return y&&y.length?vB(y,In(C,2)):[]}function Ase(y){var C=y==null?0:y.length;return C?Ya(y,1,C):[]}function Tse(y,C,O){return y&&y.length?(C=O||C===n?1:nr(C),Ya(y,0,C<0?0:C)):[]}function Mse(y,C,O){var Z=y==null?0:y.length;return Z?(C=O||C===n?1:nr(C),C=Z-C,Ya(y,C<0?0:C,Z)):[]}function Pse(y,C){return y&&y.length?R1(y,In(C,3),!1,!0):[]}function Dse(y,C){return y&&y.length?R1(y,In(C,3)):[]}var Rse=lr(function(y){return Wd(No(y,1,Yi,!0))}),kse=lr(function(y){var C=Xa(y);return Yi(C)&&(C=n),Wd(No(y,1,Yi,!0),In(C,2))}),Ise=lr(function(y){var C=Xa(y);return C=typeof C=="function"?C:n,Wd(No(y,1,Yi,!0),n,C)});function Fse(y){return y&&y.length?Wd(y):[]}function Ose(y,C){return y&&y.length?Wd(y,In(C,2)):[]}function Nse(y,C){return C=typeof C=="function"?C:n,y&&y.length?Wd(y,n,C):[]}function oM(y){if(!(y&&y.length))return[];var C=0;return y=$a(y,function(O){if(Yi(O))return C=xo(O.length,C),!0}),Ur(C,function(O){return li(y,ie(O))})}function r4(y,C){if(!(y&&y.length))return[];var O=oM(y);return C==null?O:li(O,function(Z){return Xo(C,n,Z)})}var Lse=lr(function(y,C){return Yi(y)?B0(y,C):[]}),Bse=lr(function(y){return W2($a(y,Yi))}),jse=lr(function(y){var C=Xa(y);return Yi(C)&&(C=n),W2($a(y,Yi),In(C,2))}),Use=lr(function(y){var C=Xa(y);return C=typeof C=="function"?C:n,W2($a(y,Yi),n,C)}),zse=lr(oM);function Vse(y,C){return wB(y||[],C||[],L0)}function Wse(y,C){return wB(y||[],C||[],z0)}var $se=lr(function(y){var C=y.length,O=C>1?y[C-1]:n;return O=typeof O=="function"?(y.pop(),O):n,r4(y,O)});function i4(y){var C=ye(y);return C.__chain__=!0,C}function Hse(y,C){return C(y),y}function U1(y,C){return C(y)}var Gse=Eu(function(y){var C=y.length,O=C?y[0]:0,Z=this.__wrapped__,de=function(Se){return D2(Se,y)};return C>1||this.__actions__.length||!(Z instanceof vr)||!Cu(O)?this.thru(de):(Z=Z.slice(O,+O+(C?1:0)),Z.__actions__.push({func:U1,args:[de],thisArg:n}),new qa(Z,this.__chain__).thru(function(Se){return C&&!Se.length&&Se.push(n),Se}))});function qse(){return i4(this)}function Kse(){return new qa(this.value(),this.__chain__)}function Yse(){this.__values__===n&&(this.__values__=y4(this.value()));var y=this.__index__>=this.__values__.length,C=y?n:this.__values__[this.__index__++];return{done:y,value:C}}function Xse(){return this}function Qse(y){for(var C,O=this;O instanceof C1;){var Z=QB(O);Z.__index__=0,Z.__values__=n,C?de.__wrapped__=Z:C=Z;var de=Z;O=O.__wrapped__}return de.__wrapped__=y,C}function Zse(){var y=this.__wrapped__;if(y instanceof vr){var C=y;return this.__actions__.length&&(C=new vr(this)),C=C.reverse(),C.__actions__.push({func:U1,args:[iM],thisArg:n}),new qa(C,this.__chain__)}return this.thru(iM)}function Jse(){return bB(this.__wrapped__,this.__actions__)}var eae=k1(function(y,C,O){Zr.call(y,O)?++y[O]:Su(y,O,1)});function tae(y,C,O){var Z=Qn(y)?Mm:Hie;return O&&bs(y,C,O)&&(C=n),Z(y,In(C,3))}function nae(y,C){var O=Qn(y)?$a:rB;return O(y,In(C,3))}var rae=RB(ZB),iae=RB(JB);function oae(y,C){return No(z1(y,C),1)}function sae(y,C){return No(z1(y,C),H)}function aae(y,C,O){return O=O===n?1:nr(O),No(z1(y,C),O)}function o4(y,C){var O=Qn(y)?ys:Vd;return O(y,In(C,3))}function s4(y,C){var O=Qn(y)?a1:nB;return O(y,In(C,3))}var lae=k1(function(y,C,O){Zr.call(y,O)?y[O].push(C):Su(y,O,[C])});function cae(y,C,O,Z){y=Hs(y)?y:Vm(y),O=O&&!Z?nr(O):0;var de=y.length;return O<0&&(O=xo(de+O,0)),G1(y)?O<=de&&y.indexOf(C,O)>-1:!!de&&xu(y,C,O)>-1}var uae=lr(function(y,C,O){var Z=-1,de=typeof C=="function",Se=Hs(y)?pt(y.length):[];return Vd(y,function(Be){Se[++Z]=de?Xo(C,Be,O):j0(Be,C,O)}),Se}),dae=k1(function(y,C,O){Su(y,O,C)});function z1(y,C){var O=Qn(y)?li:cB;return O(y,In(C,3))}function fae(y,C,O,Z){return y==null?[]:(Qn(C)||(C=C==null?[]:[C]),O=Z?n:O,Qn(O)||(O=O==null?[]:[O]),hB(y,C,O))}var hae=k1(function(y,C,O){y[O?0:1].push(C)},function(){return[[],[]]});function pae(y,C,O){var Z=Qn(y)?Ll:ot,de=arguments.length<3;return Z(y,In(C,4),O,de,Vd)}function mae(y,C,O){var Z=Qn(y)?l1:ot,de=arguments.length<3;return Z(y,In(C,4),O,de,nB)}function gae(y,C){var O=Qn(y)?$a:rB;return O(y,$1(In(C,3)))}function vae(y){var C=Qn(y)?Z5:coe;return C(y)}function yae(y,C,O){(O?bs(y,C,O):C===n)?C=1:C=nr(C);var Z=Qn(y)?Uie:uoe;return Z(y,C)}function xae(y){var C=Qn(y)?zie:foe;return C(y)}function bae(y){if(y==null)return 0;if(Hs(y))return G1(y)?km(y):y.length;var C=Jo(y);return C==ee||C==Q?y.size:N2(y).length}function wae(y,C,O){var Z=Qn(y)?Pm:hoe;return O&&bs(y,C,O)&&(C=n),Z(y,In(C,3))}var Sae=lr(function(y,C){if(y==null)return[];var O=C.length;return O>1&&bs(y,C[0],C[1])?C=[]:O>2&&bs(C[0],C[1],C[2])&&(C=[C[0]]),hB(y,No(C,1),[])}),V1=nie||function(){return An.Date.now()};function _ae(y,C){if(typeof C!="function")throw new Ga(s);return y=nr(y),function(){if(--y<1)return C.apply(this,arguments)}}function a4(y,C,O){return C=O?n:C,C=y&&C==null?y.length:C,_u(y,P,n,n,n,n,C)}function l4(y,C){var O;if(typeof C!="function")throw new Ga(s);return y=nr(y),function(){return--y>0&&(O=C.apply(this,arguments)),y<=1&&(C=n),O}}var sM=lr(function(y,C,O){var Z=m;if(O.length){var de=Ud(O,Um(sM));Z|=D}return _u(y,Z,C,O,de)}),c4=lr(function(y,C,O){var Z=m|g;if(O.length){var de=Ud(O,Um(c4));Z|=D}return _u(C,Z,y,O,de)});function u4(y,C,O){C=O?n:C;var Z=_u(y,w,n,n,n,n,n,C);return Z.placeholder=u4.placeholder,Z}function d4(y,C,O){C=O?n:C;var Z=_u(y,S,n,n,n,n,n,C);return Z.placeholder=d4.placeholder,Z}function f4(y,C,O){var Z,de,Se,Be,Ge,it,Et=0,Ct=!1,It=!1,Jt=!0;if(typeof y!="function")throw new Ga(s);C=Qa(C)||0,Mi(O)&&(Ct=!!O.leading,It="maxWait"in O,Se=It?xo(Qa(O.maxWait)||0,C):Se,Jt="trailing"in O?!!O.trailing:Jt);function bn(Xi){var zl=Z,Mu=de;return Z=de=n,Et=Xi,Be=y.apply(Mu,zl),Be}function On(Xi){return Et=Xi,Ge=$0(pr,C),Ct?bn(Xi):Be}function ir(Xi){var zl=Xi-it,Mu=Xi-Et,R4=C-zl;return It?Zo(R4,Se-Mu):R4}function Nn(Xi){var zl=Xi-it,Mu=Xi-Et;return it===n||zl>=C||zl<0||It&&Mu>=Se}function pr(){var Xi=V1();if(Nn(Xi))return _r(Xi);Ge=$0(pr,ir(Xi))}function _r(Xi){return Ge=n,Jt&&Z?bn(Xi):(Z=de=n,Be)}function ga(){Ge!==n&&SB(Ge),Et=0,Z=it=de=Ge=n}function ws(){return Ge===n?Be:_r(V1())}function va(){var Xi=V1(),zl=Nn(Xi);if(Z=arguments,de=this,it=Xi,zl){if(Ge===n)return On(it);if(It)return SB(Ge),Ge=$0(pr,C),bn(it)}return Ge===n&&(Ge=$0(pr,C)),Be}return va.cancel=ga,va.flush=ws,va}var Eae=lr(function(y,C){return tB(y,1,C)}),Cae=lr(function(y,C,O){return tB(y,Qa(C)||0,O)});function Aae(y){return _u(y,T)}function W1(y,C){if(typeof y!="function"||C!=null&&typeof C!="function")throw new Ga(s);var O=function(){var Z=arguments,de=C?C.apply(this,Z):Z[0],Se=O.cache;if(Se.has(de))return Se.get(de);var Be=y.apply(this,Z);return O.cache=Se.set(de,Be)||Se,Be};return O.cache=new(W1.Cache||wu),O}W1.Cache=wu;function $1(y){if(typeof y!="function")throw new Ga(s);return function(){var C=arguments;switch(C.length){case 0:return!y.call(this);case 1:return!y.call(this,C[0]);case 2:return!y.call(this,C[0],C[1]);case 3:return!y.call(this,C[0],C[1],C[2])}return!y.apply(this,C)}}function Tae(y){return l4(2,y)}var Mae=poe(function(y,C){C=C.length==1&&Qn(C[0])?li(C[0],Kr(In())):li(No(C,1),Kr(In()));var O=C.length;return lr(function(Z){for(var de=-1,Se=Zo(Z.length,O);++de<Se;)Z[de]=C[de].call(this,Z[de]);return Xo(y,this,Z)})}),aM=lr(function(y,C){var O=Ud(C,Um(aM));return _u(y,D,n,C,O)}),h4=lr(function(y,C){var O=Ud(C,Um(h4));return _u(y,k,n,C,O)}),Pae=Eu(function(y,C){return _u(y,M,n,n,n,C)});function Dae(y,C){if(typeof y!="function")throw new Ga(s);return C=C===n?C:nr(C),lr(y,C)}function Rae(y,C){if(typeof y!="function")throw new Ga(s);return C=C==null?0:xo(nr(C),0),lr(function(O){var Z=O[C],de=Hd(O,0,C);return Z&&Nl(de,Z),Xo(y,this,de)})}function kae(y,C,O){var Z=!0,de=!0;if(typeof y!="function")throw new Ga(s);return Mi(O)&&(Z="leading"in O?!!O.leading:Z,de="trailing"in O?!!O.trailing:de),f4(y,C,{leading:Z,maxWait:C,trailing:de})}function Iae(y){return a4(y,1)}function Fae(y,C){return aM(H2(C),y)}function Oae(){if(!arguments.length)return[];var y=arguments[0];return Qn(y)?y:[y]}function Nae(y){return Ka(y,p)}function Lae(y,C){return C=typeof C=="function"?C:n,Ka(y,p,C)}function Bae(y){return Ka(y,d|p)}function jae(y,C){return C=typeof C=="function"?C:n,Ka(y,d|p,C)}function Uae(y,C){return C==null||eB(y,C,Mo(C))}function Ul(y,C){return y===C||y!==y&&C!==C}var zae=N1(I2),Vae=N1(function(y,C){return y>=C}),Ih=sB(function(){return arguments}())?sB:function(y){return Bi(y)&&Zr.call(y,"callee")&&!G5.call(y,"callee")},Qn=pt.isArray,Wae=vu?Kr(vu):Qie;function Hs(y){return y!=null&&H1(y.length)&&!Au(y)}function Yi(y){return Bi(y)&&Hs(y)}function $ae(y){return y===!0||y===!1||Bi(y)&&xs(y)==fe}var Gd=iie||yM,Hae=yu?Kr(yu):Zie;function Gae(y){return Bi(y)&&y.nodeType===1&&!H0(y)}function qae(y){if(y==null)return!0;if(Hs(y)&&(Qn(y)||typeof y=="string"||typeof y.splice=="function"||Gd(y)||zm(y)||Ih(y)))return!y.length;var C=Jo(y);if(C==ee||C==Q)return!y.size;if(W0(y))return!N2(y).length;for(var O in y)if(Zr.call(y,O))return!1;return!0}function Kae(y,C){return U0(y,C)}function Yae(y,C,O){O=typeof O=="function"?O:n;var Z=O?O(y,C):n;return Z===n?U0(y,C,n,O):!!Z}function lM(y){if(!Bi(y))return!1;var C=xs(y);return C==xe||C==ce||typeof y.message=="string"&&typeof y.name=="string"&&!H0(y)}function Xae(y){return typeof y=="number"&&K5(y)}function Au(y){if(!Mi(y))return!1;var C=xs(y);return C==Ae||C==Ee||C==re||C==se}function p4(y){return typeof y=="number"&&y==nr(y)}function H1(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=j}function Mi(y){var C=typeof y;return y!=null&&(C=="object"||C=="function")}function Bi(y){return y!=null&&typeof y=="object"}var m4=bh?Kr(bh):eoe;function Qae(y,C){return y===C||O2(y,C,Z2(C))}function Zae(y,C,O){return O=typeof O=="function"?O:n,O2(y,C,Z2(C),O)}function Jae(y){return g4(y)&&y!=+y}function ele(y){if(Loe(y))throw new Kn(o);return aB(y)}function tle(y){return y===null}function nle(y){return y==null}function g4(y){return typeof y=="number"||Bi(y)&&xs(y)==Oe}function H0(y){if(!Bi(y)||xs(y)!=me)return!1;var C=y1(y);if(C===null)return!0;var O=Zr.call(C,"constructor")&&C.constructor;return typeof O=="function"&&O instanceof O&&p1.call(O)==Zre}var cM=D0?Kr(D0):toe;function rle(y){return p4(y)&&y>=-9007199254740991&&y<=j}var v4=wh?Kr(wh):noe;function G1(y){return typeof y=="string"||!Qn(y)&&Bi(y)&&xs(y)==W}function ma(y){return typeof y=="symbol"||Bi(y)&&xs(y)==ve}var zm=s1?Kr(s1):roe;function ile(y){return y===n}function ole(y){return Bi(y)&&Jo(y)==Me}function sle(y){return Bi(y)&&xs(y)==Pe}var ale=N1(L2),lle=N1(function(y,C){return y<=C});function y4(y){if(!y)return[];if(Hs(y))return G1(y)?Bl(y):$s(y);if(k0&&y[k0])return Ure(y[k0]());var C=Jo(y),O=C==ee?E2:C==Q?d1:Vm;return O(y)}function Tu(y){if(!y)return y===0?y:0;if(y=Qa(y),y===H||y===-1/0){var C=y<0?-1:1;return C*z}return y===y?y:0}function nr(y){var C=Tu(y),O=C%1;return C===C?O?C-O:C:0}function x4(y){return y?Ph(nr(y),0,$):0}function Qa(y){if(typeof y=="number")return y;if(ma(y))return q;if(Mi(y)){var C=typeof y.valueOf=="function"?y.valueOf():y;y=Mi(C)?C+"":C}if(typeof y!="string")return y===0?y:+y;y=Sr(y);var O=Jn.test(y);return O||Te.test(y)?ar(y.slice(2),O?2:8):hr.test(y)?q:+y}function b4(y){return Ec(y,Gs(y))}function cle(y){return y?Ph(nr(y),-9007199254740991,j):y===0?y:0}function Yr(y){return y==null?"":pa(y)}var ule=Bm(function(y,C){if(W0(C)||Hs(C)){Ec(C,Mo(C),y);return}for(var O in C)Zr.call(C,O)&&L0(y,O,C[O])}),w4=Bm(function(y,C){Ec(C,Gs(C),y)}),q1=Bm(function(y,C,O,Z){Ec(C,Gs(C),y,Z)}),dle=Bm(function(y,C,O,Z){Ec(C,Mo(C),y,Z)}),fle=Eu(D2);function hle(y,C){var O=Lm(y);return C==null?O:J5(O,C)}var ple=lr(function(y,C){y=ci(y);var O=-1,Z=C.length,de=Z>2?C[2]:n;for(de&&bs(C[0],C[1],de)&&(Z=1);++O<Z;)for(var Se=C[O],Be=Gs(Se),Ge=-1,it=Be.length;++Ge<it;){var Et=Be[Ge],Ct=y[Et];(Ct===n||Ul(Ct,Fm[Et])&&!Zr.call(y,Et))&&(y[Et]=Se[Et])}return y}),mle=lr(function(y){return y.push(n,BB),Xo(S4,n,y)});function gle(y,C){return Qo(y,In(C,3),_c)}function vle(y,C){return Qo(y,In(C,3),k2)}function yle(y,C){return y==null?y:R2(y,In(C,3),Gs)}function xle(y,C){return y==null?y:iB(y,In(C,3),Gs)}function ble(y,C){return y&&_c(y,In(C,3))}function wle(y,C){return y&&k2(y,In(C,3))}function Sle(y){return y==null?[]:M1(y,Mo(y))}function _le(y){return y==null?[]:M1(y,Gs(y))}function uM(y,C,O){var Z=y==null?n:Dh(y,C);return Z===n?O:Z}function Ele(y,C){return y!=null&&zB(y,C,qie)}function dM(y,C){return y!=null&&zB(y,C,Kie)}var Cle=IB(function(y,C,O){C!=null&&typeof C.toString!="function"&&(C=m1.call(C)),y[C]=O},hM(qs)),Ale=IB(function(y,C,O){C!=null&&typeof C.toString!="function"&&(C=m1.call(C)),Zr.call(y,C)?y[C].push(O):y[C]=[O]},In),Tle=lr(j0);function Mo(y){return Hs(y)?Q5(y):N2(y)}function Gs(y){return Hs(y)?Q5(y,!0):ioe(y)}function Mle(y,C){var O={};return C=In(C,3),_c(y,function(Z,de,Se){Su(O,C(Z,de,Se),Z)}),O}function Ple(y,C){var O={};return C=In(C,3),_c(y,function(Z,de,Se){Su(O,de,C(Z,de,Se))}),O}var Dle=Bm(function(y,C,O){P1(y,C,O)}),S4=Bm(function(y,C,O,Z){P1(y,C,O,Z)}),Rle=Eu(function(y,C){var O={};if(y==null)return O;var Z=!1;C=li(C,function(Se){return Se=$d(Se,y),Z||(Z=Se.length>1),Se}),Ec(y,X2(y),O),Z&&(O=Ka(O,d|f|p,Coe));for(var de=C.length;de--;)V2(O,C[de]);return O});function kle(y,C){return _4(y,$1(In(C)))}var Ile=Eu(function(y,C){return y==null?{}:soe(y,C)});function _4(y,C){if(y==null)return{};var O=li(X2(y),function(Z){return[Z]});return C=In(C),pB(y,O,function(Z,de){return C(Z,de[0])})}function Fle(y,C,O){C=$d(C,y);var Z=-1,de=C.length;for(de||(de=1,y=n);++Z<de;){var Se=y==null?n:y[Cc(C[Z])];Se===n&&(Z=de,Se=O),y=Au(Se)?Se.call(y):Se}return y}function Ole(y,C,O){return y==null?y:z0(y,C,O)}function Nle(y,C,O,Z){return Z=typeof Z=="function"?Z:n,y==null?y:z0(y,C,O,Z)}var E4=NB(Mo),C4=NB(Gs);function Lle(y,C,O){var Z=Qn(y),de=Z||Gd(y)||zm(y);if(C=In(C,4),O==null){var Se=y&&y.constructor;de?O=Z?new Se:[]:Mi(y)?O=Au(Se)?Lm(y1(y)):{}:O={}}return(de?ys:_c)(y,function(Be,Ge,it){return C(O,Be,Ge,it)}),O}function Ble(y,C){return y==null?!0:V2(y,C)}function jle(y,C,O){return y==null?y:xB(y,C,H2(O))}function Ule(y,C,O,Z){return Z=typeof Z=="function"?Z:n,y==null?y:xB(y,C,H2(O),Z)}function Vm(y){return y==null?[]:io(y,Mo(y))}function zle(y){return y==null?[]:io(y,Gs(y))}function Vle(y,C,O){return O===n&&(O=C,C=n),O!==n&&(O=Qa(O),O=O===O?O:0),C!==n&&(C=Qa(C),C=C===C?C:0),Ph(Qa(y),C,O)}function Wle(y,C,O){return C=Tu(C),O===n?(O=C,C=0):O=Tu(O),y=Qa(y),Yie(y,C,O)}function $le(y,C,O){if(O&&typeof O!="boolean"&&bs(y,C,O)&&(C=O=n),O===n&&(typeof C=="boolean"?(O=C,C=n):typeof y=="boolean"&&(O=y,y=n)),y===n&&C===n?(y=0,C=1):(y=Tu(y),C===n?(C=y,y=0):C=Tu(C)),y>C){var Z=y;y=C,C=Z}if(O||y%1||C%1){var de=Y5();return Zo(y+de*(C-y+dn("1e-"+((de+"").length-1))),C)}return j2(y,C)}var Hle=jm(function(y,C,O){return C=C.toLowerCase(),y+(O?A4(C):C)});function A4(y){return fM(Yr(y).toLowerCase())}function T4(y){return y=Yr(y),y&&y.replace(ae,Ore).replace(Fl,"")}function Gle(y,C,O){y=Yr(y),C=pa(C);var Z=y.length;O=O===n?Z:Ph(nr(O),0,Z);var de=O;return O-=C.length,O>=0&&y.slice(O,de)==C}function qle(y){return y=Yr(y),y&&lt.test(y)?y.replace(ft,Nre):y}function Kle(y){return y=Yr(y),y&&Rt.test(y)?y.replace(gt,"\\$&"):y}var Yle=jm(function(y,C,O){return y+(O?"-":"")+C.toLowerCase()}),Xle=jm(function(y,C,O){return y+(O?" ":"")+C.toLowerCase()}),Qle=DB("toLowerCase");function Zle(y,C,O){y=Yr(y),C=nr(C);var Z=C?km(y):0;if(!C||Z>=C)return y;var de=(C-Z)/2;return O1(S1(de),O)+y+O1(w1(de),O)}function Jle(y,C,O){y=Yr(y),C=nr(C);var Z=C?km(y):0;return C&&Z<C?y+O1(C-Z,O):y}function ece(y,C,O){y=Yr(y),C=nr(C);var Z=C?km(y):0;return C&&Z<C?O1(C-Z,O)+y:y}function tce(y,C,O){return O||C==null?C=0:C&&(C=+C),lie(Yr(y).replace(Bt,""),C||0)}function nce(y,C,O){return(O?bs(y,C,O):C===n)?C=1:C=nr(C),U2(Yr(y),C)}function rce(){var y=arguments,C=Yr(y[0]);return y.length<3?C:C.replace(y[1],y[2])}var ice=jm(function(y,C,O){return y+(O?"_":"")+C.toLowerCase()});function oce(y,C,O){return O&&typeof O!="number"&&bs(y,C,O)&&(C=O=n),O=O===n?$:O>>>0,O?(y=Yr(y),y&&(typeof C=="string"||C!=null&&!cM(C))&&(C=pa(C),!C&&Rm(y))?Hd(Bl(y),0,O):y.split(C,O)):[]}var sce=jm(function(y,C,O){return y+(O?" ":"")+fM(C)});function ace(y,C,O){return y=Yr(y),O=O==null?0:Ph(nr(O),0,y.length),C=pa(C),y.slice(O,O+C.length)==C}function lce(y,C,O){var Z=ye.templateSettings;O&&bs(y,C,O)&&(C=n),y=Yr(y),C=q1({},C,Z,LB);var de=q1({},C.imports,Z.imports,LB),Se=Mo(de),Be=io(de,Se),Ge,it,Et=0,Ct=C.interpolate||Le,It="__p += '",Jt=C2((C.escape||Le).source+"|"+Ct.source+"|"+(Ct===sn?tr:Le).source+"|"+(C.evaluate||Le).source+"|$","g"),bn="//# sourceURL="+(Zr.call(C,"sourceURL")?(C.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Am+"]")+`
`;y.replace(Jt,function(Nn,pr,_r,ga,ws,va){return _r||(_r=ga),It+=y.slice(Et,va).replace(et,Lre),pr&&(Ge=!0,It+=`' +
__e(`+pr+`) +
'`),ws&&(it=!0,It+=`';
`+ws+`;
__p += '`),_r&&(It+=`' +
((__t = (`+_r+`)) == null ? '' : __t) +
'`),Et=va+Nn.length,Nn}),It+=`';
`;var On=Zr.call(C,"variable")&&C.variable;if(!On)It=`with (obj) {
`+It+`
}
`;else if(vn.test(On))throw new Kn(a);It=(it?It.replace(vt,""):It).replace(Fe,"$1").replace(ct,"$1;"),It="function("+(On||"obj")+`) {
`+(On?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ge?", __e = _.escape":"")+(it?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+It+`return __p
}`;var ir=P4(function(){return zr(Se,bn+"return "+It).apply(n,Be)});if(ir.source=It,lM(ir))throw ir;return ir}function cce(y){return Yr(y).toLowerCase()}function uce(y){return Yr(y).toUpperCase()}function dce(y,C,O){if(y=Yr(y),y&&(O||C===n))return Sr(y);if(!y||!(C=pa(C)))return y;var Z=Bl(y),de=Bl(C),Se=Ws(Z,de),Be=Ch(Z,de)+1;return Hd(Z,Se,Be).join("")}function fce(y,C,O){if(y=Yr(y),y&&(O||C===n))return y.slice(0,V5(y)+1);if(!y||!(C=pa(C)))return y;var Z=Bl(y),de=Ch(Z,Bl(C))+1;return Hd(Z,0,de).join("")}function hce(y,C,O){if(y=Yr(y),y&&(O||C===n))return y.replace(Bt,"");if(!y||!(C=pa(C)))return y;var Z=Bl(y),de=Ws(Z,Bl(C));return Hd(Z,de).join("")}function pce(y,C){var O=_,Z=E;if(Mi(C)){var de="separator"in C?C.separator:de;O="length"in C?nr(C.length):O,Z="omission"in C?pa(C.omission):Z}y=Yr(y);var Se=y.length;if(Rm(y)){var Be=Bl(y);Se=Be.length}if(O>=Se)return y;var Ge=O-km(Z);if(Ge<1)return Z;var it=Be?Hd(Be,0,Ge).join(""):y.slice(0,Ge);if(de===n)return it+Z;if(Be&&(Ge+=it.length-Ge),cM(de)){if(y.slice(Ge).search(de)){var Et,Ct=it;for(de.global||(de=C2(de.source,Yr(qr.exec(de))+"g")),de.lastIndex=0;Et=de.exec(Ct);)var It=Et.index;it=it.slice(0,It===n?Ge:It)}}else if(y.indexOf(pa(de),Ge)!=Ge){var Jt=it.lastIndexOf(de);Jt>-1&&(it=it.slice(0,Jt))}return it+Z}function mce(y){return y=Yr(y),y&&_t.test(y)?y.replace(Ye,$re):y}var gce=jm(function(y,C,O){return y+(O?" ":"")+C.toUpperCase()}),fM=DB("toUpperCase");function M4(y,C,O){return y=Yr(y),C=O?n:C,C===n?jre(y)?qre(y):Dm(y):y.match(C)||[]}var P4=lr(function(y,C){try{return Xo(y,n,C)}catch(O){return lM(O)?O:new Kn(O)}}),vce=Eu(function(y,C){return ys(C,function(O){O=Cc(O),Su(y,O,sM(y[O],y))}),y});function yce(y){var C=y==null?0:y.length,O=In();return y=C?li(y,function(Z){if(typeof Z[1]!="function")throw new Ga(s);return[O(Z[0]),Z[1]]}):[],lr(function(Z){for(var de=-1;++de<C;){var Se=y[de];if(Xo(Se[0],this,Z))return Xo(Se[1],this,Z)}})}function xce(y){return $ie(Ka(y,d))}function hM(y){return function(){return y}}function bce(y,C){return y==null||y!==y?C:y}var wce=kB(),Sce=kB(!0);function qs(y){return y}function pM(y){return lB(typeof y=="function"?y:Ka(y,d))}function _ce(y){return uB(Ka(y,d))}function Ece(y,C){return dB(y,Ka(C,d))}var Cce=lr(function(y,C){return function(O){return j0(O,y,C)}}),Ace=lr(function(y,C){return function(O){return j0(y,O,C)}});function mM(y,C,O){var Z=Mo(C),de=M1(C,Z);O==null&&!(Mi(C)&&(de.length||!Z.length))&&(O=C,C=y,y=this,de=M1(C,Mo(C)));var Se=!(Mi(O)&&"chain"in O)||!!O.chain,Be=Au(y);return ys(de,function(Ge){var it=C[Ge];y[Ge]=it,Be&&(y.prototype[Ge]=function(){var Et=this.__chain__;if(Se||Et){var Ct=y(this.__wrapped__),It=Ct.__actions__=$s(this.__actions__);return It.push({func:it,args:arguments,thisArg:y}),Ct.__chain__=Et,Ct}return it.apply(y,Nl([this.value()],arguments))})}),y}function Tce(){return An._===this&&(An._=Jre),this}function gM(){}function Mce(y){return y=nr(y),lr(function(C){return fB(C,y)})}var Pce=q2(li),Dce=q2(Mm),Rce=q2(Pm);function D4(y){return eM(y)?ie(Cc(y)):aoe(y)}function kce(y){return function(C){return y==null?n:Dh(y,C)}}var Ice=FB(),Fce=FB(!0);function vM(){return[]}function yM(){return!1}function Oce(){return{}}function Nce(){return""}function Lce(){return!0}function Bce(y,C){if(y=nr(y),y<1||y>j)return[];var O=$,Z=Zo(y,$);C=In(C),y-=$;for(var de=Ur(Z,C);++O<y;)C(O);return de}function jce(y){return Qn(y)?li(y,Cc):ma(y)?[y]:$s(XB(Yr(y)))}function Uce(y){var C=++Qre;return Yr(y)+C}var zce=F1(function(y,C){return y+C},0),Vce=K2("ceil"),Wce=F1(function(y,C){return y/C},1),$ce=K2("floor");function Hce(y){return y&&y.length?T1(y,qs,I2):n}function Gce(y,C){return y&&y.length?T1(y,In(C,2),I2):n}function qce(y){return X(y,qs)}function Kce(y,C){return X(y,In(C,2))}function Yce(y){return y&&y.length?T1(y,qs,L2):n}function Xce(y,C){return y&&y.length?T1(y,In(C,2),L2):n}var Qce=F1(function(y,C){return y*C},1),Zce=K2("round"),Jce=F1(function(y,C){return y-C},0);function eue(y){return y&&y.length?Gt(y,qs):0}function tue(y,C){return y&&y.length?Gt(y,In(C,2)):0}return ye.after=_ae,ye.ary=a4,ye.assign=ule,ye.assignIn=w4,ye.assignInWith=q1,ye.assignWith=dle,ye.at=fle,ye.before=l4,ye.bind=sM,ye.bindAll=vce,ye.bindKey=c4,ye.castArray=Oae,ye.chain=i4,ye.chunk=$oe,ye.compact=Hoe,ye.concat=Goe,ye.cond=yce,ye.conforms=xce,ye.constant=hM,ye.countBy=eae,ye.create=hle,ye.curry=u4,ye.curryRight=d4,ye.debounce=f4,ye.defaults=ple,ye.defaultsDeep=mle,ye.defer=Eae,ye.delay=Cae,ye.difference=qoe,ye.differenceBy=Koe,ye.differenceWith=Yoe,ye.drop=Xoe,ye.dropRight=Qoe,ye.dropRightWhile=Zoe,ye.dropWhile=Joe,ye.fill=ese,ye.filter=nae,ye.flatMap=oae,ye.flatMapDeep=sae,ye.flatMapDepth=aae,ye.flatten=e4,ye.flattenDeep=tse,ye.flattenDepth=nse,ye.flip=Aae,ye.flow=wce,ye.flowRight=Sce,ye.fromPairs=rse,ye.functions=Sle,ye.functionsIn=_le,ye.groupBy=lae,ye.initial=ose,ye.intersection=sse,ye.intersectionBy=ase,ye.intersectionWith=lse,ye.invert=Cle,ye.invertBy=Ale,ye.invokeMap=uae,ye.iteratee=pM,ye.keyBy=dae,ye.keys=Mo,ye.keysIn=Gs,ye.map=z1,ye.mapKeys=Mle,ye.mapValues=Ple,ye.matches=_ce,ye.matchesProperty=Ece,ye.memoize=W1,ye.merge=Dle,ye.mergeWith=S4,ye.method=Cce,ye.methodOf=Ace,ye.mixin=mM,ye.negate=$1,ye.nthArg=Mce,ye.omit=Rle,ye.omitBy=kle,ye.once=Tae,ye.orderBy=fae,ye.over=Pce,ye.overArgs=Mae,ye.overEvery=Dce,ye.overSome=Rce,ye.partial=aM,ye.partialRight=h4,ye.partition=hae,ye.pick=Ile,ye.pickBy=_4,ye.property=D4,ye.propertyOf=kce,ye.pull=fse,ye.pullAll=n4,ye.pullAllBy=hse,ye.pullAllWith=pse,ye.pullAt=mse,ye.range=Ice,ye.rangeRight=Fce,ye.rearg=Pae,ye.reject=gae,ye.remove=gse,ye.rest=Dae,ye.reverse=iM,ye.sampleSize=yae,ye.set=Ole,ye.setWith=Nle,ye.shuffle=xae,ye.slice=vse,ye.sortBy=Sae,ye.sortedUniq=Ese,ye.sortedUniqBy=Cse,ye.split=oce,ye.spread=Rae,ye.tail=Ase,ye.take=Tse,ye.takeRight=Mse,ye.takeRightWhile=Pse,ye.takeWhile=Dse,ye.tap=Hse,ye.throttle=kae,ye.thru=U1,ye.toArray=y4,ye.toPairs=E4,ye.toPairsIn=C4,ye.toPath=jce,ye.toPlainObject=b4,ye.transform=Lle,ye.unary=Iae,ye.union=Rse,ye.unionBy=kse,ye.unionWith=Ise,ye.uniq=Fse,ye.uniqBy=Ose,ye.uniqWith=Nse,ye.unset=Ble,ye.unzip=oM,ye.unzipWith=r4,ye.update=jle,ye.updateWith=Ule,ye.values=Vm,ye.valuesIn=zle,ye.without=Lse,ye.words=M4,ye.wrap=Fae,ye.xor=Bse,ye.xorBy=jse,ye.xorWith=Use,ye.zip=zse,ye.zipObject=Vse,ye.zipObjectDeep=Wse,ye.zipWith=$se,ye.entries=E4,ye.entriesIn=C4,ye.extend=w4,ye.extendWith=q1,mM(ye,ye),ye.add=zce,ye.attempt=P4,ye.camelCase=Hle,ye.capitalize=A4,ye.ceil=Vce,ye.clamp=Vle,ye.clone=Nae,ye.cloneDeep=Bae,ye.cloneDeepWith=jae,ye.cloneWith=Lae,ye.conformsTo=Uae,ye.deburr=T4,ye.defaultTo=bce,ye.divide=Wce,ye.endsWith=Gle,ye.eq=Ul,ye.escape=qle,ye.escapeRegExp=Kle,ye.every=tae,ye.find=rae,ye.findIndex=ZB,ye.findKey=gle,ye.findLast=iae,ye.findLastIndex=JB,ye.findLastKey=vle,ye.floor=$ce,ye.forEach=o4,ye.forEachRight=s4,ye.forIn=yle,ye.forInRight=xle,ye.forOwn=ble,ye.forOwnRight=wle,ye.get=uM,ye.gt=zae,ye.gte=Vae,ye.has=Ele,ye.hasIn=dM,ye.head=t4,ye.identity=qs,ye.includes=cae,ye.indexOf=ise,ye.inRange=Wle,ye.invoke=Tle,ye.isArguments=Ih,ye.isArray=Qn,ye.isArrayBuffer=Wae,ye.isArrayLike=Hs,ye.isArrayLikeObject=Yi,ye.isBoolean=$ae,ye.isBuffer=Gd,ye.isDate=Hae,ye.isElement=Gae,ye.isEmpty=qae,ye.isEqual=Kae,ye.isEqualWith=Yae,ye.isError=lM,ye.isFinite=Xae,ye.isFunction=Au,ye.isInteger=p4,ye.isLength=H1,ye.isMap=m4,ye.isMatch=Qae,ye.isMatchWith=Zae,ye.isNaN=Jae,ye.isNative=ele,ye.isNil=nle,ye.isNull=tle,ye.isNumber=g4,ye.isObject=Mi,ye.isObjectLike=Bi,ye.isPlainObject=H0,ye.isRegExp=cM,ye.isSafeInteger=rle,ye.isSet=v4,ye.isString=G1,ye.isSymbol=ma,ye.isTypedArray=zm,ye.isUndefined=ile,ye.isWeakMap=ole,ye.isWeakSet=sle,ye.join=cse,ye.kebabCase=Yle,ye.last=Xa,ye.lastIndexOf=use,ye.lowerCase=Xle,ye.lowerFirst=Qle,ye.lt=ale,ye.lte=lle,ye.max=Hce,ye.maxBy=Gce,ye.mean=qce,ye.meanBy=Kce,ye.min=Yce,ye.minBy=Xce,ye.stubArray=vM,ye.stubFalse=yM,ye.stubObject=Oce,ye.stubString=Nce,ye.stubTrue=Lce,ye.multiply=Qce,ye.nth=dse,ye.noConflict=Tce,ye.noop=gM,ye.now=V1,ye.pad=Zle,ye.padEnd=Jle,ye.padStart=ece,ye.parseInt=tce,ye.random=$le,ye.reduce=pae,ye.reduceRight=mae,ye.repeat=nce,ye.replace=rce,ye.result=Fle,ye.round=Zce,ye.runInContext=Ze,ye.sample=vae,ye.size=bae,ye.snakeCase=ice,ye.some=wae,ye.sortedIndex=yse,ye.sortedIndexBy=xse,ye.sortedIndexOf=bse,ye.sortedLastIndex=wse,ye.sortedLastIndexBy=Sse,ye.sortedLastIndexOf=_se,ye.startCase=sce,ye.startsWith=ace,ye.subtract=Jce,ye.sum=eue,ye.sumBy=tue,ye.template=lce,ye.times=Bce,ye.toFinite=Tu,ye.toInteger=nr,ye.toLength=x4,ye.toLower=cce,ye.toNumber=Qa,ye.toSafeInteger=cle,ye.toString=Yr,ye.toUpper=uce,ye.trim=dce,ye.trimEnd=fce,ye.trimStart=hce,ye.truncate=pce,ye.unescape=mce,ye.uniqueId=Uce,ye.upperCase=gce,ye.upperFirst=fM,ye.each=o4,ye.eachRight=s4,ye.first=t4,mM(ye,function(){var y={};return _c(ye,function(C,O){Zr.call(ye.prototype,O)||(y[O]=C)}),y}(),{chain:!1}),ye.VERSION=r,ys(["bind","bindKey","curry","curryRight","partial","partialRight"],function(y){ye[y].placeholder=ye}),ys(["drop","take"],function(y,C){vr.prototype[y]=function(O){O=O===n?1:xo(nr(O),0);var Z=this.__filtered__&&!C?new vr(this):this.clone();return Z.__filtered__?Z.__takeCount__=Zo(O,Z.__takeCount__):Z.__views__.push({size:Zo(O,$),type:y+(Z.__dir__<0?"Right":"")}),Z},vr.prototype[y+"Right"]=function(O){return this.reverse()[y](O).reverse()}}),ys(["filter","map","takeWhile"],function(y,C){var O=C+1,Z=O==L||O==U;vr.prototype[y]=function(de){var Se=this.clone();return Se.__iteratees__.push({iteratee:In(de,3),type:O}),Se.__filtered__=Se.__filtered__||Z,Se}}),ys(["head","last"],function(y,C){var O="take"+(C?"Right":"");vr.prototype[y]=function(){return this[O](1).value()[0]}}),ys(["initial","tail"],function(y,C){var O="drop"+(C?"":"Right");vr.prototype[y]=function(){return this.__filtered__?new vr(this):this[O](1)}}),vr.prototype.compact=function(){return this.filter(qs)},vr.prototype.find=function(y){return this.filter(y).head()},vr.prototype.findLast=function(y){return this.reverse().find(y)},vr.prototype.invokeMap=lr(function(y,C){return typeof y=="function"?new vr(this):this.map(function(O){return j0(O,y,C)})}),vr.prototype.reject=function(y){return this.filter($1(In(y)))},vr.prototype.slice=function(y,C){y=nr(y);var O=this;return O.__filtered__&&(y>0||C<0)?new vr(O):(y<0?O=O.takeRight(-y):y&&(O=O.drop(y)),C!==n&&(C=nr(C),O=C<0?O.dropRight(-C):O.take(C-y)),O)},vr.prototype.takeRightWhile=function(y){return this.reverse().takeWhile(y).reverse()},vr.prototype.toArray=function(){return this.take($)},_c(vr.prototype,function(y,C){var O=/^(?:filter|find|map|reject)|While$/.test(C),Z=/^(?:head|last)$/.test(C),de=ye[Z?"take"+(C=="last"?"Right":""):C],Se=Z||/^find/.test(C);de&&(ye.prototype[C]=function(){var Be=this.__wrapped__,Ge=Z?[1]:arguments,it=Be instanceof vr,Et=Ge[0],Ct=it||Qn(Be),It=function(pr){var _r=de.apply(ye,Nl([pr],Ge));return Z&&Jt?_r[0]:_r};Ct&&O&&typeof Et=="function"&&Et.length!=1&&(it=Ct=!1);var Jt=this.__chain__,bn=!!this.__actions__.length,On=Se&&!Jt,ir=it&&!bn;if(!Se&&Ct){Be=ir?Be:new vr(this);var Nn=y.apply(Be,Ge);return Nn.__actions__.push({func:U1,args:[It],thisArg:n}),new qa(Nn,Jt)}return On&&ir?y.apply(this,Ge):(Nn=this.thru(It),On?Z?Nn.value()[0]:Nn.value():Nn)})}),ys(["pop","push","shift","sort","splice","unshift"],function(y){var C=f1[y],O=/^(?:push|sort|unshift)$/.test(y)?"tap":"thru",Z=/^(?:pop|shift)$/.test(y);ye.prototype[y]=function(){var de=arguments;if(Z&&!this.__chain__){var Se=this.value();return C.apply(Qn(Se)?Se:[],de)}return this[O](function(Be){return C.apply(Qn(Be)?Be:[],de)})}}),_c(vr.prototype,function(y,C){var O=ye[C];if(O){var Z=O.name+"";Zr.call(Nm,Z)||(Nm[Z]=[]),Nm[Z].push({name:C,func:O})}}),Nm[I1(n,g).name]=[{name:"wrapper",func:n}],vr.prototype.clone=mie,vr.prototype.reverse=gie,vr.prototype.value=vie,ye.prototype.at=Gse,ye.prototype.chain=qse,ye.prototype.commit=Kse,ye.prototype.next=Yse,ye.prototype.plant=Qse,ye.prototype.reverse=Zse,ye.prototype.toJSON=ye.prototype.valueOf=ye.prototype.value=Jse,ye.prototype.first=ye.prototype.head,k0&&(ye.prototype[k0]=Xse),ye},Im=Kre();Qr?((Qr.exports=Im)._=Im,jr._=Im):An._=Im}).call($i)})(_A,_A.exports);var xst=_A.exports;const bst=`
  /* Global Apple-style design */
  .apple-container {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    max-width: 800px;
    margin: 0 auto;
  }
  
  /* Section styling */
  .apple-section {
    background-color: white;
    border-radius: 12px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    padding: 20px;
    margin-bottom: 24px;
    border: 1px solid #E2E8F0;
    transition: all 0.2s ease;
  }

  .apple-section:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  }
  
  /* Section header */
  .apple-section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    border-bottom: 1px solid #E2E8F0;
    padding-bottom: 12px;
  }
  
  /* Input fields */
  .apple-input {
    border-radius: 8px !important;
    border-color: #E2E8F0 !important;
    background-color: #F8F9FC !important;
    transition: all 0.2s ease !important;
  }
  
  .apple-input:focus-within {
    border-color: #007AFF !important;
    box-shadow: 0 0 0 1px #007AFF !important;
    background-color: white !important;
  }
  
  /* Number input fields */
  .chakra-numberinput__field {
    background-color: #F8F9FC !important;
    border-color: #E2E8F0 !important;
    border-radius: 8px !important;
  }
  
  .chakra-numberinput__field:focus-within {
    border-color: #007AFF !important;
    box-shadow: 0 0 0 1px #007AFF !important;
    background-color: white !important;
  }
  
  /* Textarea fields */
  .chakra-textarea {
    background-color: #F8F9FC !important;
    border-color: #E2E8F0 !important;
    border-radius: 8px !important;
  }
  
  .chakra-textarea:focus {
    border-color: #007AFF !important;
    box-shadow: 0 0 0 1px #007AFF !important;
    background-color: white !important;
  }
  
  /* Custom editor styling */
  .narrow-editor {
    width: 100%;
  }
  
  .narrow-editor [contenteditable="true"] {
    padding: 8px 12px;
    min-height: 38px;
    line-height: 1.5;
  }
  
  /* Ensure the formatting toolbar aligns with input field */
  .item-editor-wrapper .slate-toolbar {
    border-radius: 6px;
    margin-top: 2px;
  }
  
  /* Buttons */
  .apple-button {
    border-radius: 8px !important;
    font-weight: 500 !important;
    transition: all 0.2s ease !important;
  }
  
  .apple-button-primary {
    background-color: #007AFF !important;
    color: white !important;
  }
  
  .apple-button-primary:hover {
    background-color: #0063CC !important;
    transform: translateY(-1px) !important;
  }
  
  .apple-button-primary:active {
    transform: translateY(0) scale(0.98) !important;
  }
  
  .apple-button-secondary {
    background-color: #F1F5F9 !important;
    color: #1E293B !important;
    border: 1px solid #E2E8F0 !important;
  }
  
  .apple-button-secondary:hover {
    background-color: #E2E8F0 !important;
    transform: translateY(-1px) !important;
  }
  
  .apple-button-secondary:active {
    transform: translateY(0) scale(0.98) !important;
  }

  /* Add styling for active category */
  .category-box {
    transition: all 0.2s ease;
    border: 1px solid #E2E8F0;
  }
  
  .category-box:focus-within {
    border-color: #007AFF;
    box-shadow: 0 0 0 1px #007AFF;
    background-color: #F7FAFF;
  }

  /* Category header styling */
  .category-header {
    background-color: #f5f7fa;
    margin: -16px -16px 16px -16px;
    padding: 12px 16px;
    border-top-left-radius: 7px;
    border-top-right-radius: 7px;
    border-bottom: 1px solid #E2E8F0;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .category-box:focus-within .category-header {
    background-color: #EBF5FF;
    border-bottom-color: #C5E0FF;
  }
  
  /* Category order buttons */
  .order-buttons {
    display: flex;
    gap: 4px;
  }

  /* Switch styling */
  .chakra-switch__track[data-checked] {
    background-color: #007AFF !important;
  }
  
  .chakra-switch__track:not([data-checked]) {
    background-color: #CBD5E0 !important;
  }
`;if(!document.querySelector("#whack-a-mole-styles")){const t=document.createElement("style");t.id="whack-a-mole-styles",t.textContent=bst,document.head.appendChild(t)}const Jy={width:"32px",height:"32px",padding:"0",minWidth:"auto",borderRadius:"8px",fontWeight:"500",transition:"all 0.2s ease",color:"gray.500",_hover:{bg:"blue.50",color:"blue.500",transform:"translateY(-1px)"},_active:{transform:"scale(0.98)"}},C7=oe(B({},Jy),{color:"gray.500",_hover:{bg:"red.50",color:"red.500"}}),wst=A.createContext({activeEditorId:null,setActiveEditorId:()=>{},lastSelectionPath:null,setLastSelectionPath:()=>{}}),ap=()=>Math.random().toString(36).substring(2,9),Sst=({value:t,onChange:e,placeholder:n,onFocus:r,editorId:i})=>{const o=A.useRef(null),s=()=>{if(typeof t=="string")return t;if(Array.isArray(t))try{let l="";const c=u=>{for(const d of u)typeof d.text=="string"?l+=d.text:d.children&&c(d.children)};return c(t),l}catch(l){return console.error("Error extracting text from Slate content:",l),""}return""},a=l=>{e(l)};return A.useEffect(()=>{if(o.current){const l=o.current,c=u=>{r&&u.target instanceof HTMLDivElement&&r(u)};return l.addEventListener("focusin",c),()=>{l.removeEventListener("focusin",c)}}},[r]),h.jsx("div",{ref:o,className:"item-editor-wrapper","data-editor-id":i,style:{width:"100%"},children:h.jsx(U5,{value:s(),onChange:a,placeholder:n,className:"apple-input narrow-editor"})})},A7=A.memo(Sst,(t,e)=>{if(t.placeholder!==e.placeholder||t.editorId!==e.editorId)return!1;try{return xst.isEqual(t.value,e.value)}catch(n){return!1}}),_st=(t,e,n)=>t.map((r,i)=>{if(i!==e)return r;const o=[...r.items||[]];return o.splice(n,1),oe(B({},r),{items:o})}),Est=({formData:t,updateField:e,errors:n,saveAttempted:r})=>{var x,w,S,D,k,P,M;ro();const[i,o]=A.useState(null),[s,a]=A.useState(null),l=A.useRef({categoryIndex:0,itemIndex:0,id:null});if(!t.categories||t.categories.length!==2){console.log(" [CategoryManager] SYNC INIT - Creating default two categories");const T=[{id:"whack-these",title:"Whack These",items:[{id:ap(),content:""}]},{id:"do-not-whack",title:"Do Not Whack These",items:[{id:ap(),content:""}]}];e("categories",T),console.log(" [CategoryManager] SYNC INIT - Set formData.categories:",T)}let c=!1;const u=((x=t.categories)==null?void 0:x.map((T,_)=>{if(!T.items)return console.log(" [CategoryManager] SAFETY - Initializing missing items for category:",T.title),c=!0,oe(B({},T),{items:[{id:ap(),content:""}]});const E=B({},T);return _===0?(E.id="whack-these",E.title="Whack These"):_===1&&(E.id="do-not-whack",E.title="Do Not Whack These"),E}))||[];c&&e("categories",u);const d=u,f=(T,_,E)=>{console.log("Item content change:",{categoryIndex:T,itemIndex:_,content:E,contentType:typeof E});const R=[...d];let F="",L=E;if(typeof E=="string"){const N=document.createElement("div");N.innerHTML=E,F=N.textContent||N.innerText||"",L=E}else if(Array.isArray(E)){const N=U=>{let H="";for(const j of U)typeof j.text=="string"?H+=j.text:j.children&&Array.isArray(j.children)&&(H+=N(j.children));return H};F=N(E),L=F}else F=String(E||""),L=F;console.log("Processed content:",{plainText:F,serializableContent:typeof L=="string"?L:"Object (converted to plain text)",contentType:typeof L}),R[T].items[_]=oe(B({},R[T].items[_]),{content:L,text:F}),e("categories",R)},p=T=>{const _=[...d];if(_[T]){const E=ap();_[T].items.push({id:E,content:""}),e("categories",_),l.current={categoryIndex:T,itemIndex:_[T].items.length-1,id:E},setTimeout(()=>{const{categoryIndex:R,itemIndex:F,id:L}=l.current;console.log(`Attempting to focus new item at category ${R}, item ${F}, id ${L}`);const N=document.querySelector(`[data-editor-id="${L}"]`);if(N){console.log("Found item element, focusing");const U=N.querySelector('[contenteditable="true"]');U?(U.focus(),o(L),a([R,F])):console.log("Could not find editable element")}else console.log("Could not find item element with id:",L)},100)}},b=(T,_)=>{if(_<=0)return;const E=[...d],R=E[T];if(!R||!R.items)return;const F=R.items[_];R.items[_]=R.items[_-1],R.items[_-1]=F,e("categories",E)},v=(T,_)=>{const E=[...d],R=E[T];if(!R||!R.items||_>=R.items.length-1)return;const F=R.items[_];R.items[_]=R.items[_+1],R.items[_+1]=F,e("categories",E)},m=T=>_=>{o(T);for(let E=0;E<d.length;E++){const R=d[E];if(R.items){for(let F=0;F<R.items.length;F++)if(R.items[F].id===T){a([E,F]);break}}}},g=(T,_)=>{const E=_st(d,T,_);E[T]&&E[T].items.length===0&&E[T].items.push({id:ap(),content:""}),e("categories",E)};return h.jsx(wst.Provider,{value:{activeEditorId:i,setActiveEditorId:o,lastSelectionPath:s,setLastSelectionPath:a},children:h.jsxs($t,{spacing:6,align:"stretch",children:[h.jsx(dt,{fontSize:"sm",color:"gray.600",mb:4,children:'Create two categories of words or phrases: items students should "whack" and items they should avoid.'}),h.jsxs(Mw,{children:[h.jsxs(Pw,{children:[h.jsx(Ts,{children:h.jsxs(Ln,{children:[h.jsx(dt,{children:"Whack These"}),h.jsxs(po,{colorScheme:"green",variant:"subtle",children:[((S=(w=d[0])==null?void 0:w.items)==null?void 0:S.length)||0," items"]})]})}),h.jsx(Ts,{children:h.jsxs(Ln,{children:[h.jsx(dt,{children:"Do Not Whack These"}),h.jsxs(po,{colorScheme:"red",variant:"subtle",children:[((k=(D=d[1])==null?void 0:D.items)==null?void 0:k.length)||0," items"]})]})})]}),h.jsxs(ET,{children:[h.jsx(zf,{children:h.jsxs(yt,{p:4,borderWidth:"1px",borderRadius:"md",className:"category-box",children:[h.jsxs($t,{align:"start",spacing:1,mb:4,children:[h.jsx(Br,{size:"md",color:"green.600",children:"Whack These"}),h.jsx(dt,{fontSize:"sm",color:"gray.600",children:"Words or phrases that students should hit to earn points"})]}),h.jsxs(yt,{mb:4,children:[h.jsx(fr,{children:"Items"}),h.jsx(dt,{fontSize:"sm",color:"gray.600",mb:3,children:"Enter items to be displayed on moles that players should hit. (Minimum 1 Item)"}),(((P=d[0])==null?void 0:P.items)||[]).map((T,_)=>{var E,R;return h.jsx(yt,{mb:2,children:h.jsxs(gc,{align:"center",direction:"row",children:[h.jsxs(dt,{mr:2,fontWeight:"bold",width:"25px",color:"gray.500",children:[_+1,"."]}),h.jsx(yt,{flex:"1",mr:2,children:h.jsx(A7,{value:T.content,onChange:F=>f(0,_,F),onFocus:m(T.id),placeholder:`Enter word ${_+1}`,editorId:T.id})}),h.jsxs(Ln,{spacing:1,children:[h.jsx(Lr,{icon:h.jsx(jb,{boxSize:3}),"aria-label":"Move item up",size:"sm",variant:"ghost",isDisabled:_===0,onClick:()=>b(0,_),mr:1,sx:Jy,className:"apple-button"}),h.jsx(Lr,{icon:h.jsx(Yv,{boxSize:3}),"aria-label":"Move item down",size:"sm",variant:"ghost",isDisabled:!((E=d[0])!=null&&E.items)||_===d[0].items.length-1,onClick:()=>v(0,_),mr:1,sx:Jy,className:"apple-button"}),h.jsx(Lr,{icon:h.jsx(Tl,{boxSize:4}),"aria-label":"Delete item",size:"sm",variant:"ghost",isDisabled:!((R=d[0])!=null&&R.items)||d[0].items.length<=1,onClick:()=>g(0,_),sx:C7,className:"apple-button"})]})]})},T.id||`item-0-${_}`)}),h.jsx(hn,{leftIcon:h.jsx(Al,{}),onClick:()=>p(0),size:"sm",colorScheme:"green",_hover:{bg:"green.600"},className:"apple-button apple-button-primary",mt:4,children:"Add Item to Whack"})]})]})}),h.jsx(zf,{children:h.jsxs(yt,{p:4,borderWidth:"1px",borderRadius:"md",className:"category-box",children:[h.jsxs($t,{align:"start",spacing:1,mb:4,children:[h.jsx(Br,{size:"md",color:"red.600",children:"Do Not Whack These"}),h.jsx(dt,{fontSize:"sm",color:"gray.600",children:"Words or phrases that students should avoid (distractors that cause point penalties)"})]}),h.jsxs(yt,{mb:4,children:[h.jsx(fr,{children:"Items"}),h.jsx(dt,{fontSize:"sm",color:"gray.600",mb:3,children:"Enter items to be displayed on moles that players should avoid hitting. (Minimum 1 Item)"}),(((M=d[1])==null?void 0:M.items)||[]).map((T,_)=>{var E,R;return h.jsx(yt,{mb:2,children:h.jsxs(gc,{align:"center",direction:"row",children:[h.jsxs(dt,{mr:2,fontWeight:"bold",width:"25px",color:"gray.500",children:[_+1,"."]}),h.jsx(yt,{flex:"1",mr:2,children:h.jsx(A7,{value:T.content,onChange:F=>f(1,_,F),onFocus:m(T.id),placeholder:`Enter word ${_+1}`,editorId:T.id})}),h.jsxs(Ln,{spacing:1,children:[h.jsx(Lr,{icon:h.jsx(jb,{boxSize:3}),"aria-label":"Move item up",size:"sm",variant:"ghost",isDisabled:_===0,onClick:()=>b(1,_),mr:1,sx:Jy,className:"apple-button"}),h.jsx(Lr,{icon:h.jsx(Yv,{boxSize:3}),"aria-label":"Move item down",size:"sm",variant:"ghost",isDisabled:!((E=d[1])!=null&&E.items)||_===d[1].items.length-1,onClick:()=>v(1,_),mr:1,sx:Jy,className:"apple-button"}),h.jsx(Lr,{icon:h.jsx(Tl,{boxSize:4}),"aria-label":"Delete item",size:"sm",variant:"ghost",isDisabled:!((R=d[1])!=null&&R.items)||d[1].items.length<=1,onClick:()=>g(1,_),sx:C7,className:"apple-button"})]})]})},T.id||`item-1-${_}`)}),h.jsx(hn,{leftIcon:h.jsx(Al,{}),onClick:()=>p(1),size:"sm",colorScheme:"red",_hover:{bg:"red.600"},className:"apple-button apple-button-primary",mt:4,children:"Add Item to Avoid"})]})]})})]})]}),d.length===0&&h.jsxs(yt,{textAlign:"center",py:8,color:"gray.500",children:[h.jsx(dt,{children:"No categories created yet."}),h.jsx(dt,{fontSize:"sm",children:"Categories will be automatically created."})]})]})})},T7=t=>({title:t.title,words:(t.items||[]).map(e=>{if(e.text)return e.text;if(typeof e.content=="string"){const n=document.createElement("div");return n.innerHTML=e.content,n.textContent||n.innerText||""}try{let n="";const r=i=>{for(const o of i)typeof o.text=="string"?n+=o.text:o.children&&r(o.children)};return r(Array.isArray(e.content)?e.content:[]),n.trim()}catch(n){return console.error("Error extracting text from rich content:",n),""}}).filter(Boolean)}),Cst={gameType:"whack-a-mole",title:"Whack-a-Mole Configuration",description:'Create a 3D word categorization game where students "whack" the correct moles that appear.',sections:[{title:"Game Settings",description:"Configure basic game parameters",fields:[{name:"title",label:"Title",type:"text",required:!0,placeholder:"Enter a title for this game",defaultValue:""},{name:"gameTime",label:"Game Time",type:"select",required:!0,options:[{value:30,label:"30 seconds"},{value:45,label:"45 seconds"},{value:60,label:"1 minute"},{value:90,label:"1 minute 30 seconds"},{value:120,label:"2 minutes"}],defaultValue:30,width:"200px",helpText:"How long each game session lasts"},{name:"gameSpeed",label:"Game Speed",type:"select",required:!0,options:[{value:1,label:"Slow (10-12 moles)"},{value:2,label:"Medium (14-16 moles)"},{value:3,label:"Fast (17-19 moles)"},{value:4,label:"Very Fast (20-22 moles)"}],defaultValue:2,width:"300px",helpText:"Controls how frequently moles appear during the game"},{name:"instructions",label:"Game Instructions",type:"textarea",placeholder:"Enter custom instructions for players",helpText:"Custom instructions to show on the game start screen. If left empty, default instructions will be shown."}]},{title:"Scoring Settings",description:"Configure how points are awarded and deducted",fields:[{name:"pointsPerHit",label:"Points Per Hit",type:"number",required:!0,min:1,max:100,defaultValue:10,width:"150px",helpText:"Points awarded for hitting a correct mole"},{name:"penaltyPoints",label:"Penalty Points",type:"number",required:!0,min:0,max:50,defaultValue:5,width:"150px",helpText:"Points deducted for hitting an incorrect mole"},{name:"bonusPoints",label:"Bonus Points",type:"number",required:!0,min:0,max:100,defaultValue:10,width:"150px",helpText:"Extra points for hitting multiple correct moles in a row"},{name:"bonusThreshold",label:"Bonus Threshold",type:"number",required:!0,min:2,max:10,defaultValue:3,width:"150px",helpText:"How many consecutive hits needed to trigger bonus points"}]},{title:"Categories",description:'Create words that students should "whack" and words they should avoid',component:Est},{title:"Sharing",description:"Make your game available to other teachers",fields:[{name:"share",label:"Share this game publicly",type:"switch",defaultValue:!1,helpText:"Public games can be used by other teachers as templates"}]}],customValidation:t=>{if(!t||!t.title||!t.title.trim())return"Please enter a title for your game";if(!t.categories||t.categories.length!==2)return'Both "Whack These" and "Do Not Whack These" categories are required';const e=t.categories[0],n=t.categories[1];if(!e.items||e.items.length===0)return'"Whack These" category must have at least one item';if(!n.items||n.items.length===0)return'"Do Not Whack These" category must have at least one item';for(const[r,i]of t.categories.entries()){const o=r===0?"Whack These":"Do Not Whack These";for(const s of i.items)if(!(s.text||typeof s.content=="string"&&s.content.trim()||Array.isArray(s.content)&&s.content.some(l=>typeof l.text=="string"&&l.text.trim())))return`All items in "${o}" category must have content`}},generateConfig:(t,e)=>{var m,g;t||(t={}),t.share===void 0&&(t.share=!1);const n=B({title:"Whack-a-Mole Game",gameTime:30,pointsPerHit:10,penaltyPoints:5,bonusPoints:10,bonusThreshold:3,gameSpeed:2,instructions:"",share:!1,categories:[]},t),r=n.share!==void 0?!!n.share:!1,i=Number(n.gameTime)||30,o=Number(n.pointsPerHit)||10,s=Number(n.penaltyPoints)||5,a=Number(n.bonusPoints)||10,l=Number(n.bonusThreshold)||3,c=Number(n.gameSpeed)||2,u=n.instructions||"",d=(m=n.categories)==null?void 0:m[0],f=(g=n.categories)==null?void 0:g[1],p=[];d&&p.push(T7(d)),f&&p.push(T7(f));const b=x=>{if(x==null)return"";if(typeof x=="string"||typeof x=="number"||typeof x=="boolean")return x;if(Array.isArray(x))try{let w="";const S=D=>{for(const k of D)typeof k.text=="string"?w+=k.text:k.children&&Array.isArray(k.children)&&S(k.children)};return S(x),w}catch(w){return console.warn("Failed to extract text from array content:",w),String(x)}try{return String(x)}catch(w){return console.warn("Failed to serialize value:",x,w),""}},v={type:"whack-a-mole",title:n.title||"Whack-a-Mole Game",gameTime:i,pointsPerHit:o,penaltyPoints:s,bonusPoints:a,bonusThreshold:l,speed:c,instructions:u,categories:p,richCategories:[d,f].filter(Boolean).map(x=>({id:x.id||ap(),title:x.title||"",items:(x.items||[]).map(w=>{let S="";typeof w.text=="string"?S=w.text:w.content&&(S=b(w.content));const D={id:w.id||ap(),text:S||""};return w.content!==void 0&&w.content!==null&&(D.content=b(w.content)),D})})),share:r,description:'3D word categorization game with "Whack These" and "Do Not Whack These" categories',email:e==null?void 0:e.email,userId:e==null?void 0:e.uid,createdAt:_o(),updatedAt:_o()};return console.log("Generated Whack-a-Mole config (serialization-safe):",v),v}},$h=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,M7=()=>{const{templateId:t}=hu(),e=Fr(),n=ro(),{currentUser:r}=Pr(),[i,o]=A.useState({}),[s,a]=A.useState(!1),[l,c]=A.useState(!1),[u,d]=A.useState(!1);A.useEffect(()=>{te(rt,null,function*(){if(!t||t==="new"){a(!1),o({});return}if(!r){console.warn("No current user available for loading configuration");return}c(!0);try{const v=new URLSearchParams(window.location.search).get("copy")==="true";d(v),a(!v);const m=["userGameConfigs","gameConfigs","blankGameTemplates","categoryTemplates"];let g=null,x="",w=!1;for(const k of m)try{const P=an(xt,k,t),M=yield oi(P);if(M.exists()){g=B({id:M.id},M.data()),x=k,w=k==="gameConfigs"||k==="blankGameTemplates"||k==="categoryTemplates",console.log(` Found Whack-a-Mole config in ${k}:`,g);break}}catch(P){console.warn(`Failed to check ${k}:`,P);continue}if(!g){console.error(" Configuration not found in any collection"),n({title:"Configuration Not Found",description:"The requested game configuration could not be found.",status:"error",duration:5e3,isClosable:!0}),e("/configure/whack-a-mole");return}v?(a(!1),n({title:"Creating a copy",description:"Creating a new copy of this Whack-a-Mole configuration.",status:"info",duration:5e3})):w?(a(!1),d(!0),n({title:"Creating a copy",description:"This is an official template. You'll create a copy that you can customize.",status:"info",duration:5e3})):g.userId&&g.userId!==r.uid&&(a(!1),d(!0),n({title:"Creating a copy",description:"You're not the owner of this configuration, so you'll create a copy instead.",status:"info",duration:5e3}));const S=v||w||g.userId&&g.userId!==r.uid,D={title:S?`Copy of ${g.title||"Whack-a-Mole Game"}`:g.title||"Whack-a-Mole Game",gameTime:g.gameTime||30,gameSpeed:g.speed||g.gameSpeed||2,instructions:g.instructions||"",pointsPerHit:g.pointsPerHit||10,penaltyPoints:g.penaltyPoints||5,bonusPoints:g.bonusPoints||10,bonusThreshold:g.bonusThreshold||3,categories:[],share:S?!1:g.share||!1};g.categories&&Array.isArray(g.categories)?D.categories=g.categories.map((k,P)=>k.words&&Array.isArray(k.words)&&!k.items?(console.log("Converting legacy category format for:",k.title,"with words:",k.words),{id:P===0?"whack-these":"do-not-whack",title:P===0?"Whack These":"Do Not Whack These",items:k.words.map(M=>({id:$h(),content:M,text:M}))}):k.items&&Array.isArray(k.items)?(console.log("Ensuring proper structure for category:",k.title,"with items:",k.items),{id:P===0?"whack-these":"do-not-whack",title:P===0?"Whack These":"Do Not Whack These",items:k.items.map(M=>({id:M.id||$h(),content:typeof M.content=="string"?M.content:M.text||M,text:typeof M.text=="string"?M.text:M.content||M}))}):(console.log("Creating fallback category for:",k.title),{id:P===0?"whack-these":"do-not-whack",title:P===0?"Whack These":"Do Not Whack These",items:[{id:$h(),content:"",text:""}]})):g.richCategories&&Array.isArray(g.richCategories)&&(D.categories=g.richCategories.map((k,P)=>({id:P===0?"whack-these":"do-not-whack",title:P===0?"Whack These":"Do Not Whack These",items:(k.items||[]).map(M=>({id:M.id||$h(),content:typeof M.content=="string"?M.content:M.text||"",text:typeof M.text=="string"?M.text:M.content||""}))}))),D.categories.length===0?D.categories=[{id:"whack-these",title:"Whack These",items:[{id:$h(),content:"",text:""}]},{id:"do-not-whack",title:"Do Not Whack These",items:[{id:$h(),content:"",text:""}]}]:D.categories.length===1&&D.categories.push({id:"do-not-whack",title:"Do Not Whack These",items:[{id:$h(),content:"",text:""}]}),console.log(" Prepared Whack-a-Mole form data:",D),o(D)}catch(b){console.error(" Error loading Whack-a-Mole configuration:",b),n({title:"Error Loading Configuration",description:"Failed to load the game configuration. Please try again.",status:"error",duration:5e3,isClosable:!0}),e("/configure/whack-a-mole")}finally{c(!1)}})},[t,r,e,n]);const f=()=>{e("/")};return l?h.jsx("div",{children:"Loading configuration..."}):h.jsx(xm,{schema:Cst,initialData:i,isEditing:s,documentId:s&&!u?t:void 0,onCancel:f})},Ast=({formData:t,updateField:e,errors:n,saveAttempted:r})=>{const i=ro();t.categories||(e("categories",[]),t.categories=[]),A.useEffect(()=>{t&&!t.categories&&e("categories",[])},[t,e]);const o=(t==null?void 0:t.categories)||[],s=()=>{if(o.length>=Rx){i({title:"Maximum categories reached",description:`You can only add up to ${Rx} categories.`,status:"warning",duration:3e3,isClosable:!0});return}const v={id:Date.now().toString(),name:"",items:[""]};e("categories",[...o,v])},a=v=>{if(o.length<=kx){i({title:"Minimum categories required",description:`You must have at least ${kx} categories.`,status:"warning",duration:3e3,isClosable:!0});return}const m=o.filter((g,x)=>x!==v);e("categories",m)},l=(v,m,g)=>{const x=[...o];x[v]=oe(B({},x[v]),{[m]:g}),e("categories",x)},c=v=>{if(o[v].items.length>=kp){i({title:"Maximum items reached",description:`You can only add up to ${kp} items per category.`,status:"warning",duration:3e3,isClosable:!0});return}const g=[...o];g[v]=oe(B({},g[v]),{items:[...g[v].items,""]}),e("categories",g)},u=(v,m)=>{if(o[v].items.length<=Ip){i({title:"Minimum items required",description:`Each category must have at least ${Ip} items.`,status:"warning",duration:3e3,isClosable:!0});return}const x=[...o];x[v]=oe(B({},x[v]),{items:x[v].items.filter((w,S)=>S!==m)}),e("categories",x)},d=(v,m,g)=>{const x=[...o];x[v].items[m]=g,e("categories",x)},f=(v,m)=>{const g=[...o],x=m==="up"?v-1:v+1;[g[v],g[x]]=[g[x],g[v]],e("categories",g)},p=(v,m,g)=>{const x=[...o],w=g==="up"?m-1:m+1,S=x[v].items;[S[m],S[w]]=[S[w],S[m]],e("categories",x)},b=()=>o.reduce((v,m)=>v+m.items.length,0);return h.jsxs($t,{spacing:6,align:"stretch",children:[h.jsxs(Ir,{children:[h.jsx(fr,{children:"Categories"}),h.jsx(dt,{fontSize:"sm",color:"gray.600",mb:4,children:"Create categories and add items that belong in each category"}),h.jsxs(Ln,{justify:"space-between",mb:4,children:[h.jsxs(Ln,{children:[h.jsxs(po,{colorScheme:"blue",children:[o.length," categories"]}),h.jsxs(po,{colorScheme:"green",children:[b()," total items"]})]}),h.jsx(hn,{leftIcon:h.jsx(Al,{}),size:"sm",colorScheme:"blue",onClick:s,isDisabled:o.length>=Rx,children:"Add Category"})]})]}),o.length===0?h.jsxs(_i,{status:"info",borderRadius:"md",children:[h.jsx(Si,{}),h.jsx(bl,{children:'No categories created yet. Click "Add Category" to get started.'})]}):h.jsx(HN,{allowMultiple:!0,children:o.map((v,m)=>h.jsxs(WN,{border:"1px",borderColor:"gray.200",borderRadius:"md",mb:2,children:[h.jsxs(jN,{children:[h.jsx(yt,{flex:"1",textAlign:"left",children:h.jsxs(Ln,{justify:"space-between",children:[h.jsxs($t,{align:"start",spacing:1,children:[h.jsxs(dt,{fontWeight:"medium",children:[v.name||`Category ${m+1}`,h.jsxs(po,{ml:2,colorScheme:"blue",variant:"outline",children:[v.items.length," items"]})]}),h.jsxs(dt,{fontSize:"sm",color:"gray.600",children:[v.items.filter(g=>g.trim()).length," completed items"]})]}),h.jsx(Ln,{children:h.jsxs(zk,{size:"sm",isAttached:!0,children:[h.jsx(Ea,{label:"Move Up",children:h.jsx(Lr,{"aria-label":"Move category up",icon:h.jsx(jb,{}),onClick:g=>{g.stopPropagation(),f(m,"up")},isDisabled:m===0})}),h.jsx(Ea,{label:"Move Down",children:h.jsx(Lr,{"aria-label":"Move category down",icon:h.jsx(Yv,{}),onClick:g=>{g.stopPropagation(),f(m,"down")},isDisabled:m===o.length-1})}),h.jsx(Ea,{label:"Delete Category",children:h.jsx(Lr,{"aria-label":"Delete category",icon:h.jsx(Tl,{}),onClick:g=>{g.stopPropagation(),a(m)},colorScheme:"red",variant:"outline",isDisabled:o.length<=kx})})]})})]})}),h.jsx(VN,{})]}),h.jsx($N,{pb:4,children:h.jsxs($t,{spacing:4,align:"stretch",children:[h.jsxs(Ir,{children:[h.jsx(fr,{children:"Category Name"}),h.jsx(si,{value:v.name,onChange:g=>l(m,"name",g.target.value),placeholder:"Enter category name"})]}),h.jsxs(Ir,{children:[h.jsxs(fr,{children:["Items (",v.items.length,")"]}),h.jsx($t,{spacing:2,align:"stretch",children:v.items.map((g,x)=>h.jsxs(Ln,{spacing:2,children:[h.jsx(si,{value:g,onChange:w=>d(m,x,w.target.value),placeholder:`Item ${x+1}`,flex:1}),h.jsxs(zk,{size:"sm",isAttached:!0,children:[h.jsx(Ea,{label:"Move Up",children:h.jsx(Lr,{"aria-label":"Move item up",icon:h.jsx(jb,{}),onClick:()=>p(m,x,"up"),isDisabled:x===0})}),h.jsx(Ea,{label:"Move Down",children:h.jsx(Lr,{"aria-label":"Move item down",icon:h.jsx(Yv,{}),onClick:()=>p(m,x,"down"),isDisabled:x===v.items.length-1})}),h.jsx(Ea,{label:"Delete Item",children:h.jsx(Lr,{"aria-label":`Delete item #${x+1}`,icon:h.jsx(Tl,{}),onClick:()=>u(m,x),colorScheme:"red",variant:"outline",isDisabled:v.items.length<=Ip})})]})]},x))}),h.jsx(hn,{leftIcon:h.jsx(Al,{}),size:"sm",colorScheme:"blue",variant:"outline",onClick:()=>c(m),mt:2,isDisabled:v.items.length>=kp,children:"Add Item"})]})]})})]},v.id))})]})},Tst={gameType:"sort-categories-egg",title:"Sort Categories Egg Reveal",description:"Create a drag-and-drop categorization game where students sort items into categories and reveal eggs",sections:[{title:"Basic Settings",description:"Configure the basic game information",fields:[{name:"title",label:"Game Title",type:"text",required:!0,placeholder:"Enter game title",defaultValue:"Sort Categories Egg Reveal Game"},{name:"description",label:"Description",type:"textarea",placeholder:"Enter game description (optional)",helpText:"Brief description of what students will learn"},{name:"instructions",label:"Instructions",type:"textarea",placeholder:"Enter instructions for students (optional)",helpText:"Instructions that will be shown to students before they start"}]},{title:"Categories and Items",description:"Set up the categories and items for sorting",component:Ast},{title:"Game Settings",description:"Configure game-specific settings",fields:[{name:"containerType",label:"Container Type",type:"select",required:!0,defaultValue:"eggs",options:[{value:"eggs",label:"Eggs "},{value:"balloons",label:"Balloons "},{value:"presents",label:"Present Boxes "},{value:"amazon",label:"Amazon Boxes "}],width:"200px",helpText:"Choose the container graphic theme for your items"},{name:"eggQty",label:"Number of Containers",type:"select",required:!0,defaultValue:12,options:[{value:4,label:"4 containers"},{value:6,label:"6 containers"},{value:8,label:"8 containers"},{value:10,label:"10 containers"},{value:12,label:"12 containers"},{value:14,label:"14 containers"},{value:16,label:"16 containers"},{value:18,label:"18 containers"},{value:20,label:"20 containers"}],width:"150px",helpText:"How many containers will be revealed when categories are completed"},{name:"textToSpeechMode",label:"Text-to-Speech Mode",type:"select",required:!0,defaultValue:"amazon-polly-phonics",options:[{value:"disabled",label:"Disabled - No sound"},{value:"amazon-polly-phonics",label:"Amazon Polly with Phonics (Recommended)"},{value:"amazon-polly-regular",label:"Amazon Polly with Regular Pronunciation"},{value:"web-speech-phonics",label:"Web Speech API with Phonics"},{value:"web-speech-regular",label:"Web Speech API with Regular Pronunciation"}],width:"400px",helpText:'Amazon Polly provides professional-quality speech with accurate phonemes. Phonics mode makes "ck" sound like /k/, "th" like //, etc.'}]},{title:"Sharing Settings",description:"Control who can access this game",fields:[{name:"share",label:"Make Public",type:"switch",defaultValue:!1,helpText:"Allow other teachers to use this game"}]}],customValidation:t=>{if(!t.title||!t.title.trim())return"Please enter a title for your game";if(!t.categories||t.categories.length===0)return"Please add at least one category";const e=t.categories||[];if(e.length<kx)return`You need at least ${kx} categories`;if(e.length>Rx)return`You can have at most ${Rx} categories`;for(let n=0;n<e.length;n++){const r=e[n];if(!r.name||r.name.trim()==="")return`Category ${n+1} needs a name`;if(!r.items||r.items.length<Ip)return`Category "${r.name}" needs at least ${Ip} items`;if(r.items.length>kp)return`Category "${r.name}" can have at most ${kp} items`;if(r.items.filter(o=>!o||o.trim()==="").length>0)return`Category "${r.name}" has empty items that need to be filled`}},generateConfig:(t,e)=>{t||(t={});const n=B({title:"Sort Categories Egg Reveal Game",description:"",instructions:"",categories:[],eggQty:12,share:!1,textToSpeechMode:"amazon-polly-phonics",containerType:"eggs"},t),r=n.textToSpeechMode||"amazon-polly-phonics",i=r!=="disabled",o=r.includes("phonics"),s=r.includes("amazon-polly"),a=n.share!==void 0?!!n.share:!1,l=(n.categories||[]).map(u=>({name:u.name,items:u.items.filter(d=>d&&d.trim()!=="")}));return{title:n.title||"Sort Categories Egg Reveal Game",type:"sort-categories-egg",description:n.description||`Categorization game with ${l.length} categories`,instructions:n.instructions||"",categories:l,eggQty:Number(n.eggQty)||12,share:a,textToSpeechMode:r,containerType:n.containerType||"eggs",enableTextToSpeech:i,usePhonicsMode:o,useAmazonPolly:s,email:e==null?void 0:e.email,userId:e==null?void 0:e.uid,createdAt:_o(),updatedAt:_o()}}},P7=()=>{const{templateId:t}=hu(),e=Fr(),n=ro(),{currentUser:r}=Pr(),[i,o]=A.useState({}),[s,a]=A.useState(!1),[l,c]=A.useState(!1),[u,d]=A.useState(!1);return A.useEffect(()=>{te(rt,null,function*(){if(!t||t==="new"||t.trim()==="")return;const b=new URLSearchParams(window.location.search).get("copy")==="true";d(b),c(!0);try{let v=!1;const m=[{name:"userGameConfigs",ref:an(xt,"userGameConfigs",t)},{name:"gameConfigs",ref:an(xt,"gameConfigs",t)},{name:"blankGameTemplates",ref:an(xt,"blankGameTemplates",t)},{name:"categoryTemplates",ref:an(xt,"categoryTemplates",t)}];let g="",x=null;for(const w of m){const S=yield oi(w.ref);if(S.exists()){x=S,g=w.name,v=w.name==="gameConfigs"||w.name==="blankGameTemplates"||w.name==="categoryTemplates";break}}if(x&&x.exists()){const w=x.data();b?(a(!1),n({title:"Creating a copy",description:"Creating a new copy of this sort categories configuration.",status:"info",duration:5e3})):v||w.userId!==(r==null?void 0:r.uid)?(a(!1),d(!0),n({title:"Creating a copy",description:v?"This is an official template. You'll create a copy that you can customize.":"You're not the owner of this configuration, so you'll create a copy instead.",status:"info",duration:5e3})):a(!0);const S=oe(B({},w),{title:b||v||w.userId!==(r==null?void 0:r.uid)?`Copy of ${w.title||"Untitled Sort Categories Game"}`:w.title||"",share:b||v||w.userId!==(r==null?void 0:r.uid)?!1:w.share});o(S)}else n({title:"Configuration not found",description:"The requested configuration could not be found in any collection.",status:"error",duration:5e3}),e("/configure/sort-categories-egg")}catch(v){console.error("Error loading configuration:",v),n({title:"Error",description:"Failed to load the configuration.",status:"error",duration:5e3}),e("/configure/sort-categories-egg")}finally{c(!1)}})},[t,r,e,n]),t&&l?null:h.jsx(xm,{schema:Tst,initialData:i,isEditing:s,documentId:u?void 0:t})},Fre=()=>{const t=Fr(),e=A.useCallback(n=>{var r;if(console.log("[PWA] Received message:",n.data),((r=n.data)==null?void 0:r.type)==="NAVIGATE_TO_ASSIGNMENT"){const{url:i,token:o,timestamp:s,from:a}=n.data;console.log("[PWA]  Processing NAVIGATE_TO_ASSIGNMENT request",{url:i,token:o,timestamp:s,from:a,currentLocation:window.location.href}),console.log("[PWA] Attempting to focus window");try{window.focus(),console.log("[PWA]  Window focus completed"),"serviceWorker"in navigator&&navigator.serviceWorker.ready&&navigator.serviceWorker.ready.then(c=>{c.active&&(c.active.postMessage({type:"FOCUS_WINDOW"}),console.log("[PWA] Sent FOCUS_WINDOW message to service worker"))})}catch(c){console.warn("[PWA] Could not focus PWA window:",c)}"serviceWorker"in navigator&&navigator.serviceWorker.controller&&(console.log("[PWA] Sending ACK back to launcher via service worker"),navigator.serviceWorker.controller.postMessage({type:"NAVIGATE_TO_ASSIGNMENT_ACK",success:!0,timestamp:Date.now(),originalTimestamp:s})),console.log("[PWA] Sending BroadcastChannel ACK");const l=new BroadcastChannel("luminatelearn-pwa-navigation");l.postMessage({type:"PWA_NAVIGATION_ACK",timestamp:Date.now(),originalTimestamp:s}),l.close(),console.log("[PWA]  Navigation will be handled by usePWAMessageAck hook for full page reload")}},[t]);return A.useEffect(()=>{const n=i=>{var o;if(console.log("[PWA] Received service worker message:",i.data),((o=i.data)==null?void 0:o.type)==="NAVIGATE_TO_ASSIGNMENT"){const{url:s,token:a,timestamp:l,from:c}=i.data;console.log("[PWA]  Processing service worker navigation request",{url:s,token:a,timestamp:l,from:c}),e(i)}else console.log("[PWA] Ignoring non-navigation service worker message")},r=new BroadcastChannel("luminatelearn-pwa-navigation");return r.onmessage=e,"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",n),console.log("[PWA]  Listening for assignment navigation messages via service worker and BroadcastChannel"),()=>{r.close(),"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",n)}},[e]),null};function Mst(){A.useEffect(()=>{var e;if(console.log("[PWA-ACK]  Initializing PWA message ACK handler"),!((e=navigator==null?void 0:navigator.serviceWorker)!=null&&e.controller)){console.log("[PWA-ACK]  No service worker controller available");return}console.log("[PWA-ACK]  Service worker controller available, setting up listener");const t=n=>{var r,i;if(console.log("[PWA-ACK]  Received service worker message:",n.data),((r=n.data)==null?void 0:r.type)==="NAVIGATE_TO_ASSIGNMENT"){console.log("[PWA-ACK]  Processing NAVIGATE_TO_ASSIGNMENT message");const o=n.data.url;console.log("[PWA-ACK] Target URL:",o),console.log("[PWA-ACK] Current URL:",window.location.href),o?(console.log("[PWA-ACK]  Forcing navigation to target URL (fresh assignment load)"),window.location.href=o):console.log("[PWA-ACK]  No target URL provided"),console.log("[PWA-ACK]  Sending NAVIGATE_TO_ASSIGNMENT_ACK to service worker"),(i=navigator.serviceWorker.controller)==null||i.postMessage({type:"NAVIGATE_TO_ASSIGNMENT_ACK",success:!0,timestamp:Date.now()}),console.log("[PWA-ACK]  NAVIGATE_TO_ASSIGNMENT_ACK sent successfully")}else console.log("[PWA-ACK]  Ignoring non-navigation message")};return console.log("[PWA-ACK]  Adding service worker message listener"),navigator.serviceWorker.addEventListener("message",t),()=>{console.log("[PWA-ACK]  Removing service worker message listener"),navigator.serviceWorker.removeEventListener("message",t)}},[])}const Pst=({playerName:t,onGameComplete:e,config:n,onHighScoreProcessStart:r,onHighScoreProcessComplete:i})=>h.jsx(yt,{width:"100%",height:"100%",children:h.jsx(ane,{playerName:t,onGameComplete:e,config:n,onHighScoreProcessStart:r,onHighScoreProcessComplete:i})}),Dst=()=>{Fre(),Mst();const[t]=fh(),e=t.get("token")||"",n=Fr();vs();const{currentUser:r}=Pr();v2();const[i,o]=A.useState(!1),[s,a]=A.useState(!0),[l,c]=A.useState(null),[u,d]=A.useState(null),[f,p]=A.useState(null),[b,v]=A.useState(!1),[m,g]=A.useState(null),[x,w]=A.useState(!1),[S,D]=A.useState(""),[k,P]=A.useState(!0),[M,T]=A.useState(null),[_,E]=A.useState(""),[R,F]=A.useState(!1),[L,N]=A.useState(!1),[U,H]=A.useState(!1),[j,z]=A.useState(null),[q,$]=A.useState(!1),[K,G]=A.useState(!1),[Y,J]=A.useState(!1),[V,re]=A.useState(!1);E5({enabled:!0,studentEmail:(f==null?void 0:f.studentEmail)||(j==null?void 0:j.email)||"",source:"game_window",onDuplicateDetected:ge=>{console.log("[GameByToken]  PWA duplicate action:",ge)}}),A.useEffect(()=>{const ge=wZ(Jr,Q=>{const W=i||sessionStorage.getItem("direct_token_access")==="true"||t.get("directAccess")==="true";if(W)if(H(!0),console.log("Authentication state overridden for direct access:",{authenticated:!0}),!Q&&f){const ve={email:f.studentEmail||"student@example.com",displayName:f.studentName||"Student"};z(ve),console.log("Created synthetic user for direct access:",ve)}else z(Q);else H(!!Q),z(Q),console.log("Authentication state changed:",{authenticated:!!Q,email:Q==null?void 0:Q.email});(Q||W)&&$(!1)});return()=>ge()},[i,f,t]),A.useEffect(()=>{const ge=t.get("mode"),Q=t.get("source");if(ge&&Q==="email"&&e){console.log(" Detected legacy email format, redirecting to new EmailLinkRouter system");const vt=`/email-link?type=${ge}&target=assignment&token=${e}&source=email`;console.log(" Redirecting to:",vt),n(vt,{replace:!0});return}const W=window.location.href,ve=document.referrer,ue=ve.includes("oobCode="),Me=W.includes("oobCode=")||t.get("oobCode"),Pe=ve.includes("assignmentId=")||t.get("assignmentId"),je=W.includes("mode=signIn")||t.get("mode")==="signIn",ke=t.get("directAccess"),De=ke==="true"||sessionStorage.getItem("direct_token_access")==="true",nt=t.get("requireAuth"),be=nt==="true",Ne=t.get("from")==="launcher",Ie=t.get("emailAccess")==="true",Ve=t.get("pwa")==="true",Ue=t.get("pwa_type");t.get("forceBrowser"),console.log("GameByToken: Enhanced access mode detection:",{hasOobCodeInReferrer:ue,hasOobCodeInUrl:Me,hasAssignmentId:Pe,hasModeSignIn:je,directAccessParam:ke,hasDirectAccess:De,requireAuthParam:nt,hasRequireAuth:be,fromLauncher:Ne,emailAccess:Ie,pwaParam:Ve,pwaType:Ue,referrer:ve,tokenValue:e}),(ue||Me||Pe||je||De||be||Ne&&Ie||Ve&&e||Ue==="game"&&e)&&(console.log("GameByToken:  Enhanced special access mode detected - enabling email link access"),o(!0),sessionStorage.setItem("direct_token_access","true"));const tt=t.get("from")==="email";window.name="assignment-window",localStorage.setItem("pwa_origin",tt?"email_link":"javascript");const st=vt=>{var Fe,ct;((Fe=vt.data)==null?void 0:Fe.type)==="FORCE_CLOSE_LAUNCHER"&&(localStorage.getItem("pwa_origin")==="device_icon"?alert("Please close this tab manually. A newer game window has been launched."):window.close()),(ct=vt.data)==null||ct.type};return navigator.serviceWorker.addEventListener("message",st),()=>{navigator.serviceWorker.removeEventListener("message",st)}},[t,e]),A.useEffect(()=>{if(!("serviceWorker"in navigator))return;const ge=Q=>{Q.data&&Q.data.type};return navigator.serviceWorker.addEventListener("message",ge),()=>{navigator.serviceWorker.removeEventListener("message",ge)}},[e]),A.useEffect(()=>{if(!e){c("Invalid game link. Please check the URL and try again."),a(!1);return}if(j3(Jr,window.location.href)){let ge=window.localStorage.getItem("emailForSignIn");ge||(ge=window.prompt("Please provide your email for confirmation")),ge&&(F(!0),U3(Jr,ge,window.location.href).then(Q=>{window.localStorage.removeItem("emailForSignIn"),H(!0),z(Q.user),fe(e),F(!1)}).catch(Q=>{console.error("Error signing in with email link:",Q),c("Failed to authenticate. Please try accessing the game from your email again."),F(!1)}))}else fe(e)},[e]),A.useEffect(()=>{if(!s&&u&&f&&!U&&!j){if(i)return;f.studentEmail&&E(f.studentEmail),!R&&!q&&$(!0)}},[s,u,f,U,j,R,q,i]);const fe=ge=>te(rt,null,function*(){if(!ge){c("Invalid game token"),a(!1);return}(t.get("directAccess")==="true"||sessionStorage.getItem("direct_token_access")==="true")&&o(!0),a(!0),c(null);try{const W=yield OBe(ge);if(!W)throw new Error("Assignment not found");console.log(`GameByToken: Loading game config for gameId: ${W.gameId}`);const ve=an(xt,"userGameConfigs",W.gameId),ue=yield oi(ve);if(!ue.exists())throw new Error("Game configuration not found");const Me=B({id:ue.id},ue.data());if(d(Me),p(W),W.studentEmail&&(E(W.studentEmail),console.log("Pre-filled auth email:",W.studentEmail)),W.studentEmail)try{console.log("Fetching student name from users collection for email:",W.studentEmail);const Pe=xr(Pn(xt,"users"),Vn("email","==",W.studentEmail.toLowerCase()),Hf(1)),je=yield er(Pe);if(je.empty){const ke=W.studentEmail.split("@")[0];D(ke),console.log("No user found in users collection, using email prefix:",ke)}else{const ke=je.docs[0].data();if(ke.name)D(ke.name),console.log("Found student name in users collection:",ke.name);else{const De=W.studentEmail.split("@")[0];D(De),console.log("No name field in user document, using email prefix:",De)}}}catch(Pe){console.error("Error fetching student name from users collection:",Pe);const je=W.studentEmail.split("@")[0];D(je),console.log("Error fetching student name, using email prefix:",je)}}catch(W){console.error("Error loading game by token:",W),W instanceof Error&&W.message.includes("permissions")?c("Access denied. This link is specific to the email recipient and cannot be shared. Please check that you are using the correct link from your email or authenticate below."):W instanceof Error&&W.message.includes("not found")?c("Assignment not found. The link may be expired or invalid."):c("Failed to load the game. Please try again or contact your teacher.")}finally{a(!1)}}),pe=()=>te(rt,null,function*(){if(!_||!_.includes("@")){alert("Please enter a valid email address");return}if(!(f&&f.studentEmail&&_.toLowerCase()!==f.studentEmail.toLowerCase()&&!window.confirm(`The email you entered (${_}) doesn't match the assignment's recipient email (${f.studentEmail}). Are you sure you want to continue with this email?`)))try{F(!0),window.localStorage.setItem("emailForSignIn",_);const ge=window.location.href;yield UOe(Jr,_,{url:ge,handleCodeInApp:!0}),N(!0)}catch(ge){console.error("Error sending sign-in link:",ge);let Q="Failed to send authentication email. Please try again.";if(ge instanceof Error){const W=ge.message.includes("auth/")?ge.message.split("auth/")[1].split(")")[0]:"unknown";switch(console.error("Firebase auth error code:",W),W){case"operation-not-allowed":Q="Email authentication is not enabled on this application. Please contact the administrator.";break;case"invalid-email":Q="The email address provided is invalid. Please check and try again.";break;case"user-disabled":Q="This user account has been disabled. Please contact support.";break;case"missing-android-pkg-name":case"missing-ios-bundle-id":case"invalid-continue-uri":case"unauthorized-continue-uri":Q="There is a configuration issue with the authentication system. Please contact support.";break}}T(Q)}finally{F(!1)}}),ce=ge=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(ge),xe=()=>{v(!0),g(new Date),i&&f&&f.studentEmail&&(console.log("Using email from assignment for email link access:",f.studentEmail),!S&&f.studentName?(D(f.studentName),P(!0)):S||(D(f.studentEmail.split("@")[0]),P(!0)))};A.useEffect(()=>{te(rt,null,function*(){const Q={isEmailLinkAccess:i,loading:s,isPlaying:b,hasAssignment:!!f,hasGameConfig:!!u,hasStudentEmail:f==null?void 0:f.studentEmail,hasAutoStarted:Y,currentStudentName:S,isAuthenticated:U,hasCurrentUser:!!j,gameType:u==null?void 0:u.type};if(console.log("GameByToken: Enhanced auto-start effect triggered with:",Q),i&&!s&&!b&&f&&u&&f.studentEmail&&!Y){console.log("GameByToken:  All auto-start conditions met! Initiating auto-start sequence..."),console.log("GameByToken: Starting auto-start for game type:",u.type);let ve=S;if(!ve){try{const ue=xr(Pn(xt,"users"),Vn("email","==",f.studentEmail.toLowerCase()),Hf(1)),Me=yield er(ue);if(!Me.empty){const Pe=Me.docs[0].data();Pe.name&&(ve=Pe.name,D(Pe.name))}}catch(ue){console.error("Error fetching student name for auto-start:",ue)}!ve&&f.studentName?(ve=f.studentName,D(f.studentName)):ve||(ve=f.studentEmail.split("@")[0],D(f.studentEmail.split("@")[0]))}if(P(!0),U||H(!0),!j){const ue={email:f.studentEmail,displayName:f.studentName||f.studentEmail.split("@")[0]};z(ue)}setTimeout(()=>{v(!0),g(new Date),J(!0)},200)}})},[i,s,b,f,u,S,Y,U,j]),A.useEffect(()=>{te(rt,null,function*(){if(i&&f&&!s&&!Y){try{const Q=xr(Pn(xt,"users"),Vn("email","==",f.studentEmail.toLowerCase()),Hf(1)),W=yield er(Q);if(W.empty)f.studentName?D(f.studentName):f.studentEmail&&D(f.studentEmail.split("@")[0]);else{const ve=W.docs[0].data();ve.name?D(ve.name):f.studentName?D(f.studentName):f.studentEmail&&D(f.studentEmail.split("@")[0])}}catch(Q){console.error("Error fetching student name for immediate setup:",Q),f.studentName?D(f.studentName):f.studentEmail&&D(f.studentEmail.split("@")[0])}if(P(!0),H(!0),!j){const Q={email:f.studentEmail,displayName:f.studentName||f.studentEmail.split("@")[0]};z(Q)}}})},[i,f,s,Y,j]),A.useEffect(()=>{const ge=new URLSearchParams(window.location.search),Q=ge.get("directAccess")==="true",W=ge.get("token");(Q||W)&&(o(!0),H(!0),sessionStorage.setItem("direct_token_access","true"))},[]);const Ae=ge=>te(rt,null,function*(){if(T(null),!f||!m||!u){console.error("Cannot save attempt - missing required data",{hasAssignment:!!f,hasStartTime:!!m,hasGameConfig:!!u}),alert("Missing required data to save your progress. Please try again.");return}if(!U||!j){sessionStorage.setItem("pending_game_score",ge.toString()),sessionStorage.setItem("pending_start_time",m.toISOString()),f.studentEmail&&E(f.studentEmail),v(!1),$(!0);return}w(!0);try{const W=Math.floor((new Date().getTime()-m.getTime())/1e3);console.log("GameByToken: Attempting to save progress with data:",{assignmentId:f.id,studentEmail:f.studentEmail,studentName:S||"Unknown Student",duration:W,score:ge,scoreType:typeof ge,gameType:u.type,userAuthenticated:U,userEmail:j==null?void 0:j.email});const ve=typeof ge=="number"&&!isNaN(ge)?ge:0,ue=yield iD(f.id||"",{duration:W,score:ve,results:{score:ve},studentEmail:f.studentEmail,studentName:S||"Unknown Student"});console.log(`GameByToken: Successfully saved attempt with ID: ${ue}`),f.status==="assigned"&&(yield Jm(f.id||"",{status:"started"}));const Me=(f.completedCount||0)+1,Pe=Me>=f.timesRequired;yield Jm(f.id||"",{completedCount:Me,lastCompletedAt:Ar.now(),status:Pe?"completed":f.status}),console.log(`GameByToken: Updated assignment - attempts: ${Me}/${f.timesRequired}, completed: ${Pe}`),sessionStorage.removeItem("pending_game_score"),sessionStorage.removeItem("pending_start_time")}catch(Q){console.error("Error submitting attempt:",Q);let W="Failed to save your progress. Please try again.";Q instanceof Error&&(console.error("Error details:",Q.message),Q.message.includes("undefined")?W="There was an issue with your score data. Please try again.":Q.message.includes("permission")?(W='You have been authenticated, but there was a permission issue when updating your progress. Please use the "Continue without authentication" button below to save your progress anyway.',E(f.studentEmail||""),sessionStorage.setItem("pending_game_score",ge.toString()),sessionStorage.setItem("pending_start_time",m.toISOString()),$(!0)):Q.message.includes("network")&&(W="Network error while saving progress. Please check your connection and try again.")),T(W)}finally{w(!1)}});A.useEffect(()=>{if(U&&j&&!x){const ge=sessionStorage.getItem("pending_game_score"),Q=sessionStorage.getItem("pending_start_time");if(ge&&Q){console.log("Found pending game data. Resuming after authentication"),g(new Date(Q));const W=parseInt(ge);isNaN(W)||setTimeout(()=>{Ae(W)},500)}}},[U,j]);const Ee=()=>{console.log("GameByToken: High score process started"),re(!0)},ee=()=>{console.log("GameByToken: High score process completed"),re(!1),console.log("GameByToken: Waiting before cleaning up game state..."),setTimeout(()=>{console.log("GameByToken: Cleaning up game state and reloading assignment"),v(!1),g(null),e&&(G(!1),J(!1),fe(e))},1e3)},Oe=()=>{if(!f)return!1;const ge=new Date;return f.deadline.toDate()<ge},le=()=>f?f.completedCount>=f.timesRequired:!1,me=()=>{if(s)return h.jsx("div",{className:"text-center py-10",children:"Loading game..."});if(l)return h.jsxs("div",{className:"max-w-lg mx-auto my-8 p-6 bg-red-50 border border-red-300 rounded-lg",children:[h.jsx("h2",{className:"text-xl font-bold text-red-700 mb-2",children:"Error"}),h.jsx("p",{className:"text-red-700",children:l}),h.jsx("button",{onClick:()=>n("/"),className:"mt-4 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded",children:"Return Home"})]});if(u&&!b){const ge=i||sessionStorage.getItem("direct_token_access")==="true";return!U&&!j&&!ge?ne():Oe()?h.jsxs("div",{className:"max-w-lg mx-auto my-8 p-6 bg-yellow-50 border border-yellow-300 rounded-lg",children:[h.jsx("h2",{className:"text-xl font-bold text-yellow-700 mb-2",children:"Assignment Past Due"}),h.jsxs("p",{className:"text-yellow-700",children:["This assignment was due on ",f&&ce(f.deadline.toDate()),". You can still complete it, but it will be marked as late."]}),h.jsx("button",{onClick:xe,className:"mt-4 px-6 py-3 bg-green-500 hover:bg-green-600 text-white rounded-lg font-bold",children:"Start Game"})]}):le()?h.jsxs("div",{className:"max-w-lg mx-auto my-8 p-6 bg-green-50 border border-green-300 rounded-lg",children:[h.jsx("h2",{className:"text-xl font-bold text-green-700 mb-2",children:"Assignment Already Completed"}),h.jsxs("p",{className:"text-green-700 mb-4",children:["You have already completed this assignment with a score of ",f.score,"."]}),h.jsx("button",{onClick:xe,className:"mt-2 px-6 py-3 bg-green-500 hover:bg-green-600 text-white rounded-lg font-bold",children:"Play Again"})]}):h.jsxs("div",{className:"max-w-lg mx-auto my-8 p-6 bg-white border border-gray-200 shadow-md rounded-lg",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:u.title}),u.instructions&&h.jsxs("div",{className:"mb-6",children:[h.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Instructions:"}),h.jsx("div",{className:"prose prose-sm max-w-none",children:u.instructions})]}),f&&f.deadline&&h.jsxs("p",{className:"mb-4 text-sm text-gray-600",children:["Due date: ",new Date(f.deadline.seconds*1e3).toLocaleDateString()]}),h.jsx("button",{onClick:xe,className:"w-full px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-bold text-lg transition-colors",children:"Start Game"})]})}if(b&&f&&u)switch(console.log("GameByToken: Rendering game with type:",u.type),u.type){case"sentence-sense":return h.jsx(dne,{config:u,onGameComplete:Ae,playerName:S,onHighScoreProcessStart:Ee,onHighScoreProcessComplete:ee});case"whack-a-mole":return h.jsx(Pst,{config:u,onGameComplete:Ae,playerName:S,onHighScoreProcessStart:Ee,onHighScoreProcessComplete:ee});case"spinner-wheel":return h.jsx(cne,{config:u,onGameComplete:Ae});case"place-value-showdown":return h.jsx(fne,{config:u,onGameComplete:Ae,playerName:S,onHighScoreProcessStart:Ee,onHighScoreProcessComplete:ee});case"sort-categories-egg-reveal":return h.jsx(yte,{config:u,onGameComplete:Ae,playerName:S,onHighScoreProcessStart:Ee,onHighScoreProcessComplete:ee});case"anagram":return h.jsx(une,{config:u,onGameComplete:Ae,playerName:S,onHighScoreProcessStart:Ee,onHighScoreProcessComplete:ee});case"word-volley":return h.jsx(hne,{gameConfig:u,playerName:S,onGameComplete:Ae,onHighScoreProcessStart:Ee,onHighScoreProcessComplete:ee});default:return console.error("GameByToken: Unsupported game type:",u.type),h.jsxs("div",{children:["Unsupported game type: ",u.type]})}return h.jsx("div",{className:"text-center py-10",children:"Something went wrong. Please try again."})},ne=()=>h.jsxs("div",{style:{backgroundColor:"white",borderRadius:"var(--border-radius-md)",padding:"var(--spacing-6)",maxWidth:"500px",width:"100%",margin:"0 auto",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[h.jsx("h2",{style:{fontSize:"var(--font-size-xl)",color:"var(--color-gray-800)",marginBottom:"var(--spacing-4)",textAlign:"center"},children:"Authenticate to Access Your Assignment"}),M&&h.jsxs("div",{style:{margin:"var(--spacing-2) 0",padding:"var(--spacing-2)",backgroundColor:"var(--color-error-50)",color:"var(--color-error-700)",borderRadius:"var(--border-radius-sm)",fontSize:"var(--font-size-sm)",marginBottom:"var(--spacing-4)"},children:[" ",M]}),L?h.jsxs(h.Fragment,{children:[h.jsxs("div",{style:{padding:"var(--spacing-4)",backgroundColor:"var(--color-success-50)",borderRadius:"var(--border-radius-md)",marginBottom:"var(--spacing-4)"},children:[h.jsx("p",{style:{color:"var(--color-success-700)",marginBottom:"var(--spacing-2)"},children:" Authentication email sent!"}),h.jsxs("p",{style:{color:"var(--color-gray-700)"},children:["We've sent an email to ",h.jsx("strong",{children:_}),". Please check your inbox and click the link to continue to your assignment."]})]}),h.jsx("p",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-gray-500)"},children:"Don't see the email? Check your spam folder or try again."}),h.jsx("button",{onClick:()=>N(!1),style:{width:"100%",padding:"var(--spacing-3)",backgroundColor:"white",color:"var(--color-gray-700)",border:"1px solid var(--color-gray-300)",borderRadius:"var(--border-radius-sm)",fontSize:"var(--font-size-md)",marginTop:"var(--spacing-4)",cursor:"pointer"},children:"Try Again"})]}):h.jsxs(h.Fragment,{children:[h.jsx("p",{style:{marginBottom:"var(--spacing-4)",color:"var(--color-gray-600)"},children:"To confirm your identity and access your assignment, please enter your email address below. We'll send you a secure link to continue."}),h.jsxs("div",{style:{marginBottom:"var(--spacing-4)"},children:[h.jsx("label",{htmlFor:"authEmail",style:{display:"block",fontSize:"var(--font-size-sm)",color:"var(--color-gray-700)",marginBottom:"var(--spacing-1)"},children:"Your Email Address"}),h.jsx("input",{id:"authEmail",type:"email",value:_,onChange:ge=>E(ge.target.value),placeholder:"Enter your email",style:{width:"100%",padding:"var(--spacing-2)",border:"1px solid var(--color-gray-300)",borderRadius:"var(--border-radius-sm)",fontSize:"var(--font-size-md)"}}),h.jsx("p",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-gray-500)",marginTop:"var(--spacing-1)"},children:"Please use the same email address that your teacher sent the assignment to."})]}),h.jsx("button",{onClick:pe,disabled:R,style:{width:"100%",padding:"var(--spacing-3)",backgroundColor:"var(--color-primary-600)",color:"white",border:"none",borderRadius:"var(--border-radius-sm)",fontSize:"var(--font-size-md)",fontWeight:"bold",cursor:R?"not-allowed":"pointer",opacity:R?.7:1,marginBottom:"var(--spacing-3)"},children:R?"Sending...":"Send Authentication Link"}),h.jsxs("div",{style:{textAlign:"center",marginTop:"var(--spacing-3)"},children:[h.jsx("p",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-gray-500)",marginBottom:"var(--spacing-2)"},children:"If you're having trouble with authentication:"}),h.jsx("button",{onClick:()=>{const ge=sessionStorage.getItem("pending_game_score"),Q=ge?parseInt(ge):0;$(!1);const W={email:_||(f==null?void 0:f.studentEmail)||"student@example.com",displayName:S||"Student"};console.log("Bypassing authentication with temporary user:",W),sessionStorage.setItem("auth_bypass_mode","true"),w(!0);const ve=sessionStorage.getItem("pending_start_time"),ue=ve?new Date(ve):new Date,Pe=Math.floor((new Date().getTime()-ue.getTime())/1e3);f?iD(f.id||"",{duration:Pe,score:Q,results:{score:Q},studentEmail:f.studentEmail||_,studentName:S||"Anonymous Student"}).then(je=>(console.log(`Successfully saved attempt with ID: ${je} (auth bypassed)`),f.status==="assigned"?Jm(f.id||"",{status:"started"}):Promise.resolve())).then(()=>{const je=(f.completedCount||0)+1,ke=je>=f.timesRequired;return Jm(f.id||"",{completedCount:je,lastCompletedAt:Ar.now(),status:ke?"completed":f.status})}).then(()=>(sessionStorage.removeItem("pending_game_score"),sessionStorage.removeItem("pending_start_time"),e?fe(e):Promise.resolve())).catch(je=>{console.error("Error while bypassing authentication:",je),T("Failed to save your progress in bypass mode. Please try again.")}).finally(()=>{w(!1)}):(console.error("Cannot bypass authentication: No assignment data available"),T("Cannot proceed without assignment data. Please try refreshing the page."),w(!1))},style:{padding:"var(--spacing-2) var(--spacing-4)",backgroundColor:"var(--color-gray-100)",color:"var(--color-gray-700)",border:"1px solid var(--color-gray-300)",borderRadius:"var(--border-radius-sm)",fontSize:"var(--font-size-sm)",cursor:"pointer"},children:"Continue without authentication (temporary)"})]})]})]});if(R)return h.jsx("div",{style:{textAlign:"center",padding:"var(--spacing-8)"},children:h.jsx("p",{children:"Authenticating, please wait..."})});if(s)return h.jsx("div",{style:{textAlign:"center",padding:"var(--spacing-8)"},children:h.jsx("p",{children:"Loading game..."})});if(l)return h.jsxs("div",{style:{textAlign:"center",padding:"var(--spacing-8)",maxWidth:"600px",margin:"0 auto"},children:[h.jsx("p",{style:{color:"var(--color-error-600)",marginBottom:"var(--spacing-4)"},children:l}),l.includes("Access denied")?ne():h.jsx("button",{onClick:()=>n("/"),style:{marginTop:"var(--spacing-4)",padding:"var(--spacing-2) var(--spacing-4)",backgroundColor:"var(--color-primary-600)",color:"white",border:"none",borderRadius:"var(--border-radius-sm)",cursor:"pointer"},children:"Go Home"})]});if(le())return h.jsxs("div",{style:{textAlign:"center",padding:"var(--spacing-8)",color:"var(--color-success-600)"},children:[h.jsx("p",{children:"You have completed this assignment!"}),h.jsxs("p",{children:["Required attempts: ",f&&f.timesRequired]}),h.jsxs("p",{children:["Your attempts: ",f&&f.completedCount]}),h.jsx("button",{onClick:()=>n("/"),style:{marginTop:"var(--spacing-4)",padding:"var(--spacing-2) var(--spacing-4)",backgroundColor:"var(--color-primary-600)",color:"white",border:"none",borderRadius:"var(--border-radius-sm)",cursor:"pointer"},children:"Go Home"})]});const se=()=>f?h.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(5px)",boxShadow:"0 -2px 10px rgba(0, 0, 0, 0.1)",padding:"12px 20px",zIndex:10,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"10px",fontFamily:"'Roboto', 'Helvetica', sans-serif"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[h.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"#4CAF50",color:"white",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"10px",fontSize:"14px"},children:""}),h.jsx("div",{children:h.jsxs("div",{style:{fontWeight:"bold",fontSize:"14px"},children:["Authenticated as: ",f.studentEmail]})})]}),h.jsxs("div",{style:{display:"flex",gap:"20px",color:"#555",fontSize:"14px"},children:[h.jsxs("div",{children:[h.jsx("span",{style:{color:"#777"},children:"Due Date:"})," ",ce(f.deadline.toDate())]}),h.jsxs("div",{children:[h.jsx("span",{style:{color:"#777"},children:"Attempts:"})," ",f.completedCount||0,"/",f.timesRequired]})]})]}):null;return h.jsxs("div",{style:{padding:"var(--spacing-4)",maxWidth:"1200px",margin:"0 auto",paddingBottom:"60px"},children:[q&&h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"0 20px"},children:h.jsxs("div",{style:{backgroundColor:"white",borderRadius:"var(--border-radius-md)",padding:"var(--spacing-6)",maxWidth:"500px",width:"100%",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[h.jsx("h2",{style:{fontSize:"var(--font-size-xl)",color:"var(--color-gray-800)",marginBottom:"var(--spacing-4)",textAlign:"center"},children:"Authentication Required"}),M&&h.jsxs("div",{style:{margin:"var(--spacing-2) 0",padding:"var(--spacing-2)",backgroundColor:"var(--color-error-50)",color:"var(--color-error-700)",borderRadius:"var(--border-radius-sm)",fontSize:"var(--font-size-sm)",marginBottom:"var(--spacing-4)"},children:[" ",M]}),h.jsxs("p",{style:{color:"var(--color-gray-600)",marginBottom:"var(--spacing-4)",textAlign:"center"},children:["You need to authenticate to save your progress.",f!=null&&f.studentEmail?` Please authenticate as ${f.studentEmail}.`:""]}),L?h.jsxs(h.Fragment,{children:[h.jsxs("div",{style:{padding:"var(--spacing-4)",backgroundColor:"var(--color-success-50)",borderRadius:"var(--border-radius-md)",marginBottom:"var(--spacing-4)"},children:[h.jsx("p",{style:{color:"var(--color-success-700)",marginBottom:"var(--spacing-2)"},children:" Authentication email sent!"}),h.jsxs("p",{style:{color:"var(--color-gray-700)"},children:["We've sent an email to ",h.jsx("strong",{children:_}),". Please check your inbox and click the link to continue to your assignment."]})]}),h.jsx("p",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-gray-500)"},children:"Don't see the email? Check your spam folder or try again."}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"var(--spacing-2)",marginTop:"var(--spacing-4)"},children:[h.jsx("button",{onClick:()=>{$(!1),N(!1)},style:{padding:"var(--spacing-2) var(--spacing-4)",backgroundColor:"white",border:"1px solid var(--color-gray-300)",borderRadius:"var(--border-radius-sm)",color:"var(--color-gray-700)",cursor:"pointer"},children:"Close"}),h.jsx("button",{onClick:()=>N(!1),style:{padding:"var(--spacing-2) var(--spacing-4)",backgroundColor:"var(--color-primary-600)",color:"white",border:"none",borderRadius:"var(--border-radius-sm)",fontWeight:"bold",cursor:"pointer"},children:"Try Again"})]})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{style:{marginBottom:"var(--spacing-4)"},children:[h.jsx("label",{htmlFor:"authEmailModal",style:{display:"block",fontSize:"var(--font-size-sm)",color:"var(--color-gray-700)",marginBottom:"var(--spacing-1)"},children:"Your Email Address"}),h.jsx("input",{id:"authEmailModal",type:"email",value:_,onChange:ge=>E(ge.target.value),placeholder:"Enter your email",style:{width:"100%",padding:"var(--spacing-2)",border:"1px solid var(--color-gray-300)",borderRadius:"var(--border-radius-sm)",fontSize:"var(--font-size-md)"}}),h.jsx("p",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-gray-500)",marginTop:"var(--spacing-1)"},children:"Please use the same email address that your teacher sent the assignment to."})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"var(--spacing-2)",marginBottom:"var(--spacing-4)"},children:[h.jsx("button",{onClick:()=>$(!1),style:{padding:"var(--spacing-2) var(--spacing-4)",backgroundColor:"white",border:"1px solid var(--color-gray-300)",borderRadius:"var(--border-radius-sm)",color:"var(--color-gray-700)",cursor:"pointer"},children:"Cancel"}),h.jsx("button",{onClick:pe,disabled:R,style:{padding:"var(--spacing-2) var(--spacing-4)",backgroundColor:"var(--color-primary-600)",color:"white",border:"none",borderRadius:"var(--border-radius-sm)",fontWeight:"bold",cursor:R?"not-allowed":"pointer",opacity:R?.7:1},children:R?"Sending...":"Send Authentication Link"})]}),h.jsxs("div",{style:{borderTop:"1px solid var(--color-gray-200)",paddingTop:"var(--spacing-4)",marginTop:"var(--spacing-2)"},children:[h.jsxs("p",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-gray-600)",marginBottom:"var(--spacing-3)",textAlign:"center"},children:[h.jsx("strong",{children:"Temporary Solution:"})," If you're experiencing authentication issues, you can:"]}),h.jsx("button",{onClick:()=>{const ge=sessionStorage.getItem("pending_game_score"),Q=ge?parseInt(ge):0;$(!1);const W={email:_||(f==null?void 0:f.studentEmail)||"student@example.com",displayName:S||"Student"};console.log("Bypassing authentication with temporary user:",W),sessionStorage.setItem("auth_bypass_mode","true"),w(!0);const ve=sessionStorage.getItem("pending_start_time"),ue=ve?new Date(ve):new Date,Pe=Math.floor((new Date().getTime()-ue.getTime())/1e3);f?iD(f.id||"",{duration:Pe,score:Q,results:{score:Q},studentEmail:f.studentEmail||_,studentName:S||"Anonymous Student"}).then(je=>(console.log(`Successfully saved attempt with ID: ${je} (auth bypassed)`),f.status==="assigned"?Jm(f.id||"",{status:"started"}):Promise.resolve())).then(()=>{const je=(f.completedCount||0)+1,ke=je>=f.timesRequired;return Jm(f.id||"",{completedCount:je,lastCompletedAt:Ar.now(),status:ke?"completed":f.status})}).then(()=>(sessionStorage.removeItem("pending_game_score"),sessionStorage.removeItem("pending_start_time"),e?fe(e):Promise.resolve())).catch(je=>{console.error("Error while bypassing authentication:",je),T("Failed to save your progress in bypass mode. Please try again.")}).finally(()=>{w(!1)}):(console.error("Cannot bypass authentication: No assignment data available"),T("Cannot proceed without assignment data. Please try refreshing the page."),w(!1))},style:{width:"100%",padding:"var(--spacing-2)",backgroundColor:"var(--color-gray-100)",color:"var(--color-gray-700)",border:"1px solid var(--color-gray-300)",borderRadius:"var(--border-radius-sm)",fontSize:"var(--font-size-sm)",cursor:"pointer"},children:"Continue without authentication (Save progress anyway)"})]})]})]})}),f&&u?h.jsxs("div",{children:[h.jsx("h1",{style:{fontSize:"var(--font-size-2xl)",color:"var(--color-gray-800)",marginBottom:"var(--spacing-4)"},children:u.name}),M&&h.jsxs("div",{style:{margin:"var(--spacing-2) 0",padding:"var(--spacing-2)",backgroundColor:"var(--color-error-50)",color:"var(--color-error-700)",borderRadius:"var(--border-radius-sm)",fontSize:"var(--font-size-sm)"},children:[" ",M]}),b?h.jsx("div",{style:{backgroundColor:"white",borderRadius:"var(--border-radius-md)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",overflow:"hidden"},children:me()}):h.jsxs("div",{children:[h.jsxs("p",{style:{marginBottom:"var(--spacing-4)",color:"var(--color-gray-600)"},children:["Ready to start your assignment: ",h.jsx("strong",{children:u.name})]}),h.jsx("button",{onClick:xe,className:"mt-4 px-6 py-3 bg-green-500 hover:bg-green-600 text-white rounded-lg font-bold",children:"Start Game"})]})]}):h.jsx(h.Fragment,{children:U&&j?h.jsxs("div",{style:{backgroundColor:"var(--color-success-50)",color:"var(--color-success-700)",padding:"var(--spacing-4)",borderRadius:"var(--border-radius-md)",marginBottom:"var(--spacing-4)",textAlign:"center"},children:[h.jsxs("p",{children:["You are authenticated as: ",h.jsx("strong",{children:j.email})]}),h.jsx("p",{children:"Loading your assignment..."})]}):ne()}),f&&se()]})},Rst=()=>{const[t,e]=A.useState([]),[n,r]=A.useState(!0),[i,o]=A.useState(null),[s,a]=A.useState(null),[l,c]=A.useState(!1),[u,d]=A.useState(!1),[f,p]=A.useState(!1),[b,v]=A.useState(""),[m,g]=A.useState("user"),x=ro();A.useEffect(()=>{w()},[]);const w=()=>te(rt,null,function*(){r(!0),o(null);try{const N=Pn(xt,"users"),H=(yield er(N)).docs.map(j=>{const z=j.data();let q="Pending";return(z.authUid||z.linkedToAuth||z.lastLogin)&&(q="Active"),oe(B({id:j.id},z),{role:z.role||"user",status:q})});e(H)}catch(N){console.error("Error fetching users:",N),o("Failed to load users. Please try again.")}finally{r(!1)}}),S=N=>{a(N),g(N.role||"user"),c(!0)},D=N=>{a(N),p(!0)},k=()=>te(rt,null,function*(){if(s){r(!0);try{const N=an(xt,"users",s.id);yield Ns(N,{role:m,updatedAt:new Date().toISOString()}),e(t.map(U=>U.id===s.id?oe(B({},U),{role:m}):U)),x({title:"User updated",description:`${s.email}'s role has been changed to ${m}`,status:"success",duration:5e3,isClosable:!0})}catch(N){console.error("Error updating user:",N),x({title:"Error",description:"Failed to update user. Please try again.",status:"error",duration:5e3,isClosable:!0})}finally{r(!1),c(!1)}}}),P=()=>te(rt,null,function*(){if(s){r(!0);try{const N=an(xt,"users",s.id);yield ou(N),e(t.filter(U=>U.id!==s.id)),x({title:"User deleted",description:`${s.email} has been removed`,status:"success",duration:5e3,isClosable:!0})}catch(N){console.error("Error deleting user:",N),x({title:"Error",description:"Failed to delete user. Please try again.",status:"error",duration:5e3,isClosable:!0})}finally{r(!1),p(!1)}}}),M=()=>te(rt,null,function*(){if(!b||!m){x({title:"Missing information",description:"Please provide email and role",status:"warning",duration:5e3,isClosable:!0});return}r(!0);try{const N=Pn(xt,"users"),U=xr(N,Vn("email","==",b));if(!(yield er(U)).empty){x({title:"User already exists",description:"A user with this email already exists",status:"error",duration:5e3,isClosable:!0}),r(!1);return}const j=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),z={email:b,role:m,userId:j,displayName:b.split("@")[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),lastLogin:null,emailVerified:!1,disabled:!1,status:"Pending"};yield iu(an(xt,"users",j),z),e([...t,B({id:j},z)]),x({title:"User added",description:`${b} has been added with role: ${m}. They will need to sign in to activate their account.`,status:"success",duration:5e3,isClosable:!0}),v(""),g("user")}catch(N){console.error("Error adding user:",N),x({title:"Error",description:"Failed to add user. Please try again.",status:"error",duration:5e3,isClosable:!0})}finally{r(!1),d(!1)}}),T=()=>{w(),x({title:"Refreshed",description:"User list has been refreshed",status:"info",duration:3e3,isClosable:!0})},_=N=>{const H={admin:{bg:"#FED7D7",color:"#C53030",text:"ADMIN"},teacher:{bg:"#C6F6D5",color:"#2F855A",text:"TEACHER"},student:{bg:"#BEE3F8",color:"#2C5282",text:"STUDENT"}}[N]||{bg:"#F7FAFC",color:"#4A5568",text:N.toUpperCase()};return h.jsx("span",{style:{backgroundColor:H.bg,color:H.color,padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold"},children:H.text})},E=N=>{const H={active:{bg:"#C6F6D5",color:"#2F855A"},pending:{bg:"#FEEBC8",color:"#C05621"},disabled:{bg:"#FED7D7",color:"#C53030"}}[N]||{bg:"#F7FAFC",color:"#4A5568"};return h.jsx("span",{style:{backgroundColor:H.bg,color:H.color,padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold"},children:N.toUpperCase()})},R=N=>{if(N==null||typeof N=="string"&&N.trim()==="")return"N/A";try{let U;if(N&&typeof N.toDate=="function")U=N.toDate();else if(typeof N=="string")U=new Date(N);else if(N instanceof Date)U=N;else if(typeof N=="number")U=new Date(N);else return console.log("Unhandled date value type:",typeof N,N),"Invalid Date";return isNaN(U.getTime())?"Invalid Date":U.toLocaleDateString()}catch(U){return console.error("Error formatting date:",U,N),"Invalid Date"}},F=()=>te(rt,null,function*(){try{r(!0);let N=0;for(const U of t){const H=R(U.createdAt);if(!U.createdAt||U.createdAt===null||U.createdAt===void 0||typeof U.createdAt=="string"&&U.createdAt.trim()===""||H==="Invalid Date"||H==="N/A"){const z=new Date().toISOString();yield Ns(an(xt,"users",U.id),{createdAt:z,updatedAt:z}),N++}}yield w(),N>0?x({title:"Dates fixed",description:`Fixed creation dates for ${N} user(s)`,status:"success",duration:5e3,isClosable:!0}):x({title:"No fixes needed",description:"All users already have valid creation dates",status:"info",duration:3e3,isClosable:!0})}catch(N){console.error("Error fixing user dates:",N),x({title:"Error",description:"Failed to fix user dates",status:"error",duration:5e3,isClosable:!0})}finally{r(!1)}}),L=N=>te(rt,null,function*(){try{const U=new Date().toISOString();yield Ns(an(xt,"users",N.id),{createdAt:U,updatedAt:U}),yield w(),x({title:"User date fixed",description:`Fixed creation date for ${N.email}`,status:"success",duration:5e3,isClosable:!0})}catch(U){console.error("Error fixing single user date:",U),x({title:"Error",description:"Failed to fix user date",status:"error",duration:5e3,isClosable:!0})}});return h.jsxs(yt,{children:[h.jsxs(Ln,{justifyContent:"space-between",mb:4,children:[h.jsx(Br,{size:"md",children:"User Management"}),h.jsxs(Ln,{children:[h.jsx(hn,{leftIcon:h.jsx(Al,{}),colorScheme:"green",size:"sm",onClick:()=>d(!0),children:"Add User"}),h.jsx(hn,{colorScheme:"blue",size:"sm",onClick:T,isDisabled:n,children:"Refresh"}),h.jsx(hn,{colorScheme:"orange",size:"sm",onClick:F,isDisabled:n,children:"Fix Dates"})]})]}),h.jsx(yt,{mb:4,p:4,borderWidth:"1px",borderRadius:"md",bg:"blue.50",children:h.jsxs(Ln,{children:[h.jsx(F6e,{color:"blue.500"}),h.jsx(dt,{fontSize:"sm",children:'Users added through this admin interface need to sign in to fully activate their accounts. Their account status will change from "Pending" to "Active" after they sign in for the first time.'})]})}),i&&h.jsxs(_i,{status:"error",mb:4,children:[h.jsx(Si,{}),h.jsx(hT,{children:i})]}),n?h.jsxs(yt,{textAlign:"center",py:10,children:[h.jsx(Oa,{size:"xl"}),h.jsx(dt,{mt:4,children:"Loading users..."})]}):h.jsxs(nQ,{variant:"simple",children:[h.jsx(_De,{children:h.jsxs(jP,{children:[h.jsx(ly,{children:"Email"}),h.jsx(ly,{children:"Role"}),h.jsx(ly,{children:"Status"}),h.jsx(ly,{children:"Created"}),h.jsx(ly,{children:"Actions"})]})}),h.jsx(EDe,{children:t.length===0?h.jsx(jP,{children:h.jsx(Qm,{colSpan:5,textAlign:"center",children:"No users found"})}):t.map(N=>h.jsxs(jP,{children:[h.jsx(Qm,{children:N.email}),h.jsx(Qm,{children:_(N.role||"user")}),h.jsx(Qm,{children:h.jsx(Ea,{label:N.status==="Pending"?"User needs to sign in to activate their account":"User has signed in and account is active",children:E(N.status||"active")})}),h.jsx(Qm,{children:R(N.createdAt)}),h.jsx(Qm,{children:h.jsxs(Ln,{spacing:2,children:[h.jsx(Lr,{"aria-label":"Edit user",icon:h.jsx(k6e,{}),size:"sm",colorScheme:"blue",onClick:()=>S(N)}),h.jsx(Lr,{"aria-label":"Delete user",icon:h.jsx(Tl,{}),size:"sm",colorScheme:"red",onClick:()=>D(N)}),(R(N.createdAt)==="Invalid Date"||R(N.createdAt)==="N/A")&&h.jsx(Lr,{"aria-label":"Fix date",icon:h.jsx(dt,{fontSize:"xs",children:""}),size:"sm",colorScheme:"orange",onClick:()=>L(N),title:"Fix creation date"})]})})]},N.id))})]}),h.jsxs(Kc,{isOpen:l,onClose:()=>c(!1),children:[h.jsx(Qc,{}),h.jsxs(Yc,{children:[h.jsx(Xc,{children:"Edit User"}),h.jsx(Jc,{}),h.jsxs(Zc,{children:[h.jsxs(Ir,{mb:4,children:[h.jsx(fr,{children:"Email"}),h.jsx(si,{value:(s==null?void 0:s.email)||"",isReadOnly:!0})]}),h.jsxs(Ir,{children:[h.jsx(fr,{children:"Role"}),h.jsxs(Bv,{value:m,onChange:N=>g(N.target.value),children:[h.jsx("option",{value:"user",children:"User"}),h.jsx("option",{value:"teacher",children:"Teacher (can create assignments)"}),h.jsx("option",{value:"admin",children:"Admin (includes teacher privileges)"})]}),h.jsx(dt,{fontSize:"sm",color:"gray.600",mt:2,children:"Roles are hierarchical: admins have all teacher privileges, plus admin capabilities."})]})]}),h.jsxs(lv,{children:[h.jsx(hn,{variant:"ghost",mr:3,onClick:()=>c(!1),children:"Cancel"}),h.jsx(hn,{colorScheme:"blue",onClick:k,isLoading:n,children:"Save"})]})]})]}),h.jsxs(Kc,{isOpen:u,onClose:()=>d(!1),children:[h.jsx(Qc,{}),h.jsxs(Yc,{children:[h.jsx(Xc,{children:"Add New User"}),h.jsx(Jc,{}),h.jsxs(Zc,{children:[h.jsxs(_i,{status:"info",mb:4,children:[h.jsx(Si,{}),h.jsxs(yt,{fontSize:"sm",children:[h.jsx(dt,{children:"Users added here must sign in to activate their account."}),h.jsx(dt,{mt:1,children:"If using Google Auth, they should use the same email address."})]})]}),h.jsxs(Ir,{mb:4,children:[h.jsx(fr,{children:"Email"}),h.jsx(si,{value:b,onChange:N=>v(N.target.value),placeholder:"user@example.com"})]}),h.jsxs(Ir,{children:[h.jsx(fr,{children:"Role"}),h.jsxs(Bv,{value:m,onChange:N=>g(N.target.value),children:[h.jsx("option",{value:"user",children:"User"}),h.jsx("option",{value:"teacher",children:"Teacher (can create assignments)"}),h.jsx("option",{value:"admin",children:"Admin (includes teacher privileges)"})]}),h.jsx(dt,{fontSize:"sm",color:"gray.600",mt:2,children:"Roles are hierarchical: admins have all teacher privileges, plus admin capabilities."})]})]}),h.jsxs(lv,{children:[h.jsx(hn,{variant:"ghost",mr:3,onClick:()=>d(!1),children:"Cancel"}),h.jsx(hn,{colorScheme:"green",onClick:M,isLoading:n,children:"Add User"})]})]})]}),h.jsxs(Kc,{isOpen:f,onClose:()=>p(!1),children:[h.jsx(Qc,{}),h.jsxs(Yc,{children:[h.jsx(Xc,{children:"Confirm Delete"}),h.jsx(Jc,{}),h.jsxs(Zc,{children:["Are you sure you want to delete user ",h.jsx("strong",{children:s==null?void 0:s.email}),"? This action cannot be undone."]}),h.jsxs(lv,{children:[h.jsx(hn,{variant:"ghost",mr:3,onClick:()=>p(!1),children:"Cancel"}),h.jsx(hn,{colorScheme:"red",onClick:P,isLoading:n,children:"Delete"})]})]})]})]})},kst=()=>{const{currentUser:t}=Pr(),e=Fr(),[n,r]=A.useState(!0),[i,o]=A.useState(!1),s=ro();A.useEffect(()=>{if(!t){e("/login");return}te(rt,null,function*(){try{const c=an(xt,"users",t.uid),u=yield oi(c);if(!(u.exists()&&u.data().role==="admin")){s({title:"Access Denied",description:"You do not have permission to access the admin page.",status:"error",duration:5e3}),e("/");return}r(!1)}catch(c){console.error("Error checking admin status:",c),s({title:"Error",description:"An error occurred while checking permissions.",status:"error",duration:5e3}),e("/")}})},[t,e,s]);const a=()=>te(rt,null,function*(){try{o(!0);const l=yield fje();s({title:"Thumbnails Regenerated",description:`Successfully regenerated ${l.success} thumbnails. ${l.failed} failed.`,status:"success",duration:5e3})}catch(l){console.error("Error regenerating thumbnails:",l),s({title:"Error",description:"Failed to regenerate thumbnails.",status:"error",duration:5e3})}finally{o(!1)}});return n?h.jsx(Ml,{minHeight:"80vh",children:h.jsxs($t,{spacing:4,children:[h.jsx(Oa,{size:"xl"}),h.jsx(dt,{children:"Loading admin dashboard..."})]})}):h.jsx(yt,{maxW:"1200px",mx:"auto",p:6,children:h.jsxs($t,{align:"stretch",spacing:6,children:[h.jsx(Br,{as:"h1",size:"xl",mb:2,children:"Admin Dashboard"}),h.jsx(dt,{color:"gray.600",children:"Manage users, system settings, and maintenance tasks."}),h.jsx(vd,{my:2}),h.jsxs(Mw,{variant:"enclosed",colorScheme:"blue",children:[h.jsxs(Pw,{children:[h.jsx(Ts,{children:"User Management"}),h.jsx(Ts,{children:"System Settings"}),h.jsx(Ts,{children:"Maintenance"})]}),h.jsxs(ET,{children:[h.jsxs(zf,{children:[h.jsxs(yt,{mb:4,p:4,borderWidth:"1px",borderRadius:"md",bg:"blue.50",children:[h.jsx(Br,{size:"sm",mb:2,children:"Role Hierarchy"}),h.jsxs(dt,{children:[h.jsx("strong",{children:"Admin:"})," Has full system access including user management and all teacher privileges."]}),h.jsxs(dt,{children:[h.jsx("strong",{children:"Teacher:"})," Can create and manage assignments and educational content."]}),h.jsxs(dt,{children:[h.jsx("strong",{children:"User:"})," Basic access to use the platform and complete assignments."]})]}),h.jsx(Rst,{})]}),h.jsx(zf,{children:h.jsxs(yt,{p:4,borderWidth:"1px",borderRadius:"md",bg:"white",children:[h.jsx(Br,{size:"md",mb:4,children:"System Settings"}),h.jsx(dt,{mb:4,children:"System configuration and settings will be added here."})]})}),h.jsx(zf,{children:h.jsxs(yt,{p:4,borderWidth:"1px",borderRadius:"md",bg:"white",children:[h.jsx(Br,{size:"md",mb:4,children:"Maintenance Tasks"}),h.jsx(dt,{mb:4,children:"Perform system maintenance and optimization tasks."}),h.jsx($t,{align:"start",spacing:4,children:h.jsx(hn,{colorScheme:"blue",onClick:a,isLoading:i,loadingText:"Regenerating...",children:"Regenerate All Thumbnails"})})]})})]})]})]})})},Ist=()=>{const{currentUser:t,setCurrentUserAsAdmin:e}=Pr(),[n,r]=A.useState(!1),[i,o]=A.useState(""),[s,a]=A.useState(""),l=()=>te(rt,null,function*(){r(!0),o(""),a("");try{if(!t)throw new Error("You must be logged in to perform this action");yield e(),a(`User ${t.email} has been set as admin. Please refresh the page to see changes.`)}catch(c){o(`Failed to set admin role: ${c instanceof Error?c.message:"Unknown error"}`)}finally{r(!1)}});return h.jsx(yt,{maxW:"800px",mx:"auto",p:8,children:h.jsxs($t,{spacing:6,align:"stretch",children:[h.jsx(Br,{children:"Set Current User as Admin"}),t?h.jsxs(h.Fragment,{children:[h.jsxs(yt,{p:4,borderWidth:"1px",borderRadius:"md",children:[h.jsxs(dt,{children:["Current User: ",h.jsx(Jk,{children:t.email})]}),h.jsxs(dt,{children:["User ID: ",h.jsx(Jk,{children:t.uid})]})]}),h.jsx(dt,{children:"Clicking the button below will set your account as an administrator. This will give you access to administrative features."}),h.jsx(hn,{colorScheme:"blue",onClick:l,isLoading:n,loadingText:"Setting admin role...",children:"Set as Admin"}),i&&h.jsxs(_i,{status:"error",children:[h.jsx(Si,{}),i]}),s&&h.jsxs(_i,{status:"success",children:[h.jsx(Si,{}),s]})]}):h.jsxs(_i,{status:"warning",children:[h.jsx(Si,{}),"You must be logged in to use this page."]})]})})},sf=()=>Date.now().toString()+Math.random().toString(36).substr(2,9),Wu={primaryColors:["#FF6B6B","#FFD93D","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8"],pastelColors:["#FFB3BA","#BAFFC9","#BAE1FF","#FFFFBA","#FFDFBA","#E0BBE4","#FFC9DD","#C9FFC9"],brightColors:["#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080"],earthTones:["#8B4513","#A0522D","#CD853F","#DEB887","#F4A460","#D2691E","#BC8F8F","#F5DEB3"],ocean:["#006994","#0081A7","#00AFB9","#FDFCDC","#FED9B7","#F07167","#E29578","#83C5BE"],sunset:["#F72585","#B5179E","#7209B7","#480CA8","#3A0CA3","#3F37C9","#4361EE","#4895EF"],forest:["#2D5016","#3F6C23","#4F7C2F","#5F8A3A","#6F9946","#7FA752","#8FB65E","#9FC46A"],patriotic:["#DC143C","#FFFFFF","#000080","#B22222","#F8F8FF","#4169E1","#FF4500","#1E90FF"]};let Vi=[];const Fst=({formData:t,updateField:e,errors:n,saveAttempted:r})=>{var d;if(!t.items||t.items.length===0){console.log(" [WheelItemsManager] SYNC INIT - Creating default items");const f=[{id:sf(),text:"Item 1",color:"#FF6B6B"},{id:sf(),text:"Item 2",color:"#4ECDC4"},{id:sf(),text:"Item 3",color:"#45B7D1"},{id:sf(),text:"Item 4",color:"#96CEB4"}];t.items=f,Vi=f,console.log(" [WheelItemsManager] SYNC INIT - Set formData.items:",t.items)}else console.log(" [WheelItemsManager] SYNC INIT - Items already exist:",t.items),console.log(" [WheelItemsManager] SYNC INIT - First item structure:",t.items[0]),console.log(" [WheelItemsManager] SYNC INIT - First item has content field:",!!((d=t.items[0])!=null&&d.content)),Vi.length===0?(console.log(" [WheelItemsManager] SYNC INIT - Initializing currentWheelItems from formData"),Vi=t.items,console.log(" [WheelItemsManager] SYNC INIT - currentWheelItems set to:",Vi)):console.log(` [WheelItemsManager] SYNC INIT - Skipping currentWheelItems update (already has ${Vi.length} items)`);A.useEffect(()=>{if(!t.items||t.items.length===0){console.log(" [WheelItemsManager] USEEFFECT INIT - Creating default items");const f=[{id:sf(),text:"Item 1",color:"#FF6B6B"},{id:sf(),text:"Item 2",color:"#4ECDC4"},{id:sf(),text:"Item 3",color:"#45B7D1"},{id:sf(),text:"Item 4",color:"#96CEB4"}];e("items",f),t.items=f,Vi=f,console.log(" [WheelItemsManager] USEEFFECT INIT - Set formData.items:",t.items)}else console.log(" [WheelItemsManager] USEEFFECT INIT - Items already exist:",t.items),Vi.length===0?(console.log(" [WheelItemsManager] USEEFFECT INIT - Initializing currentWheelItems from formData"),Vi=t.items):console.log(` [WheelItemsManager] USEEFFECT INIT - Skipping currentWheelItems update (already has ${Vi.length} items)`)},[t.items,e]);const i=(t==null?void 0:t.items)||[],o=()=>{const f={id:Date.now().toString()+Math.random().toString(36).substr(2,9),text:`Item ${i.length+1}`,color:"#FF6B6B"},p=[...i,f];e("items",p),Vi=p,t.items=p},s=f=>{const p=i.filter(b=>b.id!==f);e("items",p),Vi=p,t.items=p},a=(f,p)=>{console.log(` [updateItem] Updated item id=${f} with text="${p}"`),console.log(" [updateItem] Text contains HTML tags:",p.includes("<")&&p.includes(">")),console.log(" [updateItem] Raw text content:",p);let b="";p.includes("<")&&p.includes(">")?(b=p.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').trim(),console.log(" [updateItem] Extracted plain text from HTML:",b)):(b=p.trim(),console.log(" [updateItem] Using text as-is (no HTML):",b)),Vi=Vi.map(g=>g.id===f?oe(B({},g),{text:b||p,content:p}):g),console.log(" [updateItem] Updated currentWheelItems:",Vi);const m=t.items.map(g=>g.id===f?oe(B({},g),{text:b||p,content:p}):g);t.items=m,console.log(" [updateItem] Directly updated formData.items:",t.items),e("items",m),console.log(" [updateItem] Verification - currentWheelItems matches formData.items:",JSON.stringify(Vi)===JSON.stringify(t.items))},l=f=>{if(f>0){const p=[...i];[p[f-1],p[f]]=[p[f],p[f-1]],e("items",p),Vi=p,t.items=p}},c=f=>{if(f<i.length-1){const p=[...i];[p[f],p[f+1]]=[p[f+1],p[f]],e("items",p),Vi=p,t.items=p}},u=f=>{const p=(t==null?void 0:t.wheelTheme)||"primaryColors",b=(t==null?void 0:t.customColors)||Wu.primaryColors,v=p==="custom"?b:Wu[p];return v[f%v.length]};return h.jsxs($t,{spacing:6,align:"stretch",children:[h.jsxs(Ir,{children:[h.jsx(fr,{mb:3,children:"Wheel Items"}),h.jsx(dt,{fontSize:"sm",color:"gray.600",mb:4,children:"Add items that will appear on the spinner wheel"})]}),h.jsxs($t,{spacing:3,align:"stretch",children:[i.map((f,p)=>h.jsx(yt,{w:"full",children:h.jsxs(gc,{align:"center",direction:"row",children:[h.jsx(yt,{w:4,h:4,borderRadius:"full",bg:u(p),mr:3,flexShrink:0}),h.jsxs(dt,{mr:2,fontWeight:"bold",width:"25px",color:"gray.500",flexShrink:0,children:[p+1,"."]}),h.jsx(yt,{flex:"1",mr:2,children:h.jsx(yt,{border:"1px",borderColor:"gray.200",borderRadius:"md",children:h.jsx(U5,{value:f.content||f.text,onChange:b=>a(f.id,b),placeholder:`Item ${p+1}`,compact:!0,showToolbar:!0,className:"apple-input"})})}),h.jsxs(Ln,{spacing:1,children:[h.jsx(Lr,{icon:h.jsx(jb,{boxSize:3}),"aria-label":"Move item up",size:"sm",variant:"ghost",isDisabled:p===0,onClick:()=>l(p)}),h.jsx(Lr,{icon:h.jsx(Yv,{boxSize:3}),"aria-label":"Move item down",size:"sm",variant:"ghost",isDisabled:p===i.length-1,onClick:()=>c(p)}),h.jsx(Lr,{"aria-label":"Remove item",icon:h.jsx(Tl,{}),onClick:()=>s(f.id),isDisabled:i.length<=2,colorScheme:"red",variant:"ghost",size:"sm"})]})]})},f.id)),h.jsx(hn,{leftIcon:h.jsx(Al,{}),onClick:o,variant:"outline",colorScheme:"blue",size:"sm",alignSelf:"flex-start",children:"Add Item"}),i.length<2&&h.jsxs(_i,{status:"info",size:"sm",children:[h.jsx(Si,{}),h.jsx(bl,{children:"Add at least 2 items to create a functional spinner wheel."})]}),h.jsxs(gc,{justify:"space-between",fontSize:"sm",color:"gray.500",children:[h.jsx(dt,{children:i.length===0?"No items added yet":i.length===1?"1 item added":`${i.length} items added`}),h.jsx(dt,{children:i.length>=20?"Maximum reached":`${20-i.length} remaining`})]})]}),(n==null?void 0:n.items)&&h.jsxs(_i,{status:"error",children:[h.jsx(Si,{}),h.jsx(bl,{children:n.items})]})]})},Ost=({formData:t,updateField:e,errors:n,saveAttempted:r})=>{t.wheelTheme||(e("wheelTheme","primaryColors"),t.wheelTheme="primaryColors"),t.customColors||(e("customColors",Wu.primaryColors),t.customColors=Wu.primaryColors),A.useEffect(()=>{t.wheelTheme||e("wheelTheme","primaryColors"),t.customColors||e("customColors",Wu.primaryColors)},[t.wheelTheme,t.customColors,e]);const i=(t==null?void 0:t.wheelTheme)||"primaryColors",o=(t==null?void 0:t.customColors)||Wu.primaryColors,s=u=>{e("wheelTheme",u)},a=(u,d)=>{const f=[...o];f[u]=d,e("customColors",f)},l=()=>{o.length<8&&e("customColors",[...o,"#FF6B6B"])},c=u=>{o.length>2&&e("customColors",o.filter((d,f)=>f!==u))};return h.jsxs($t,{spacing:6,align:"stretch",children:[h.jsxs(Ir,{children:[h.jsx(fr,{mb:3,children:"Color Theme"}),h.jsxs(Bv,{value:i,onChange:u=>s(u.target.value),children:[h.jsx("option",{value:"primaryColors",children:"Primary Colors"}),h.jsx("option",{value:"pastelColors",children:"Pastel Colors"}),h.jsx("option",{value:"brightColors",children:"Bright Colors"}),h.jsx("option",{value:"earthTones",children:"Earth Tones"}),h.jsx("option",{value:"ocean",children:"Ocean"}),h.jsx("option",{value:"sunset",children:"Sunset"}),h.jsx("option",{value:"forest",children:"Forest"}),h.jsx("option",{value:"patriotic",children:"Patriotic"}),h.jsx("option",{value:"custom",children:"Custom Colors"})]})]}),i==="custom"&&h.jsxs($t,{spacing:4,align:"stretch",children:[h.jsx(dt,{fontSize:"sm",fontWeight:"medium",children:"Custom Colors"}),h.jsxs($t,{spacing:2,align:"stretch",children:[o.map((u,d)=>h.jsxs(Ln,{align:"center",children:[h.jsxs(dt,{minW:"20px",fontSize:"sm",children:[d+1,"."]}),h.jsx(si,{type:"color",value:u,onChange:f=>a(d,f.target.value),width:"60px",height:"35px",padding:"2px",border:"1px solid",borderColor:"gray.300"}),h.jsx(si,{value:u,onChange:f=>a(d,f.target.value),placeholder:"#FF6B6B",flex:"1"}),h.jsx(Lr,{icon:h.jsx(Tl,{}),onClick:()=>c(d),isDisabled:o.length<=2,colorScheme:"red",variant:"ghost",size:"sm","aria-label":"Remove color"})]},d)),h.jsx(hn,{leftIcon:h.jsx(Al,{}),onClick:l,variant:"outline",colorScheme:"blue",size:"sm",alignSelf:"flex-start",isDisabled:o.length>=8,children:"Add Color"})]})]}),h.jsxs(yt,{children:[h.jsx(dt,{fontSize:"sm",fontWeight:"medium",mb:2,children:"Preview:"}),h.jsx(Ln,{spacing:2,flexWrap:"wrap",children:(i==="custom"?o:Wu[i]).map((u,d)=>h.jsx(yt,{w:6,h:6,bg:u,borderRadius:"md",border:"1px solid",borderColor:"gray.300"},d))})]})]})},Nst=(t,e)=>{console.log(" [generateConfig] ENTRY - Raw formData received:",t),console.log(" [generateConfig] Raw formData.items:",t.items),console.log(" [generateConfig] currentWheelItems:",Vi),t||(t={});const n=B({title:"My Spinner Wheel",instructions:"Click the SPIN button to randomly select an item from the wheel!",wheelTheme:"primaryColors",customColors:Wu.primaryColors,removeOnSelect:!1,soundEnabled:!0,maxSpins:0,share:!1},t);t.items&&t.items.length>0&&(console.log(" [generateConfig] Synchronizing currentWheelItems with formData.items"),Vi=t.items);const r=Vi.length>0?Vi:t.items||[];console.log(" [generateConfig] Using items from:",Vi.length>0?"currentWheelItems (most current)":"formData.items (fallback)"),console.log(" [generateConfig] Final itemsToUse:",r);const i=n.wheelTheme==="custom"?n.customColors:Wu[n.wheelTheme],o=r.map((a,l)=>{const c=a.content||a.text||"";let u="";c.includes("<")&&c.includes(">")?u=c.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').trim():u=c.trim();const d=u||`Item ${l+1}`;console.log(` [generateConfig] Processing item ${l}:`,{originalText:a.text,extractedPlainText:u,finalText:d,hasHtmlContent:c.includes("<")&&c.includes(">"),preservedHtmlContent:c.includes("<")?c:null});const f={id:a.id,text:d,color:i[l%i.length]};return c.includes("<")&&c.includes(">")&&(f.content=c),f}),s={title:n.title,type:"spinner-wheel",description:`Interactive spinner wheel with ${o.length} ${o.length===1?"item":"items"}`,items:o,removeOnSelect:!!n.removeOnSelect,wheelTheme:n.wheelTheme,customColors:n.customColors,soundEnabled:!!n.soundEnabled,maxSpins:Number(n.maxSpins)||0,instructions:n.instructions,share:!!n.share,email:e==null?void 0:e.email,userId:e==null?void 0:e.uid,createdAt:_o(),updatedAt:_o()};return console.log(" [generateConfig] Final config items:",s.items),console.log(" [generateConfig] Sample item for rich text check:",s.items[0]),s},Lst={gameType:"spinner-wheel",title:"Spinner Wheel",description:"Create an interactive spinner wheel for random selection, vocabulary practice, or decision making.",sections:[{title:"Game Settings",description:"Configure basic game parameters",fields:[{name:"title",label:"Title",type:"text",required:!0,placeholder:"Enter wheel title",defaultValue:"My Spinner Wheel"},{name:"instructions",label:"Instructions",type:"textarea",placeholder:"Enter instructions for students",defaultValue:"Click the SPIN button to randomly select an item from the wheel!"}]},{title:"Wheel Items",description:"Add items that will appear on the spinner wheel",fields:[],component:Fst},{title:"Appearance",description:"Customize the look of your spinner wheel",fields:[],component:Ost},{title:"Advanced Settings",description:"Additional game configuration options",fields:[{name:"removeOnSelect",label:"Remove selected items",type:"switch",defaultValue:!1,helpText:"Remove items from the wheel after they are selected"},{name:"soundEnabled",label:"Enable sound effects",type:"switch",defaultValue:!0,helpText:"Play sound effects during wheel spinning"},{name:"maxSpins",label:"Maximum spins (0 = unlimited)",type:"number",min:0,max:100,defaultValue:0,helpText:"Limit the number of spins allowed"}]},{title:"Sharing",description:"Make your game available to other teachers",fields:[{name:"share",label:"Share this game publicly",type:"switch",defaultValue:!1,helpText:"Public games can be used by other teachers as templates"}]}],customValidation:t=>{if(!t.title||!t.title.trim())return"Please enter a title for your wheel";if(!t.items||t.items.length===0)return"Please add at least one item to the wheel";if(t.items.length<2)return"Please add at least 2 items to create a functional spinner wheel";for(let e=0;e<t.items.length;e++){const n=t.items[e];if(!n.text||!n.text.trim())return`Item ${e+1}: Please enter text for this item`}},generateConfig:(t,e)=>Nst(t,e)},D7=()=>{const{templateId:t}=hu(),e=Fr(),n=ro(),{currentUser:r}=Pr(),[i,o]=A.useState({}),[s,a]=A.useState(!1),[l,c]=A.useState(!1),[u,d]=A.useState(!1);return A.useEffect(()=>{te(rt,null,function*(){if(!t||t==="new"||t.trim()==="")return;const b=new URLSearchParams(window.location.search).get("copy")==="true";d(b),c(!0);try{let v=!1;const m=[{name:"userGameConfigs",ref:an(xt,"userGameConfigs",t)},{name:"gameConfigs",ref:an(xt,"gameConfigs",t)},{name:"blankGameTemplates",ref:an(xt,"blankGameTemplates",t)},{name:"categoryTemplates",ref:an(xt,"categoryTemplates",t)}];let g="",x=null;for(const w of m){const S=yield oi(w.ref);if(S.exists()){x=S,g=w.name,v=w.name==="gameConfigs"||w.name==="blankGameTemplates"||w.name==="categoryTemplates";break}}if(x&&x.exists()){const w=x.data();b?(a(!1),n({title:"Creating a copy",description:"Creating a new copy of this spinner wheel configuration.",status:"info",duration:5e3})):v||w.userId!==(r==null?void 0:r.uid)?(a(!1),d(!0),n({title:"Creating a copy",description:v?"This is an official template. You'll create a copy that you can customize.":"You're not the owner of this configuration, so you'll create a copy instead.",status:"info",duration:5e3})):a(!0);const S=oe(B({},w),{title:b||v||w.userId!==(r==null?void 0:r.uid)?`Copy of ${w.title||"Untitled Spinner Wheel"}`:w.title||"",share:b||v||w.userId!==(r==null?void 0:r.uid)?!1:w.share});o(S)}else n({title:"Configuration not found",description:"The requested configuration could not be found in any collection.",status:"error",duration:5e3}),e("/configure/spinner-wheel")}catch(v){console.error("Error loading configuration:",v),n({title:"Error",description:"Failed to load the configuration.",status:"error",duration:5e3}),e("/configure/spinner-wheel")}finally{c(!1)}})},[t,r,e,n]),t&&l?null:h.jsx(xm,{schema:Lst,initialData:i,isEditing:s,documentId:u?void 0:t})},Bst=({formData:t,updateField:e,errors:n,saveAttempted:r})=>{var d;if(t.withDefinitions===void 0&&(e("withDefinitions",!1),t.withDefinitions=!1),!t.anagrams||t.anagrams.length===0){const f=[{id:"1",word:"LISTEN",definition:"To hear with attention"}];e("anagrams",f),t.anagrams=f}else if(t.anagrams.some(p=>p.original&&!p.word)){const p=t.anagrams.map(b=>({id:b.id||Date.now().toString(),word:b.original||b.word||"",definition:b.definition||""}));e("anagrams",p),t.anagrams=p}Ot.useEffect(()=>{if(t.withDefinitions===void 0&&e("withDefinitions",!1),!t.anagrams||t.anagrams.length===0)e("anagrams",[{id:"1",word:"LISTEN",definition:"To hear with attention"}]);else if(t.anagrams.some(p=>p.original&&!p.word)){const p=t.anagrams.map(b=>({id:b.id||Date.now().toString(),word:b.original||b.word||"",definition:b.definition||""}));e("anagrams",p)}},[t.withDefinitions,t.anagrams]);const i=(d=t.withDefinitions)!=null?d:!1,o=t.anagrams||[{id:"1",word:"LISTEN",definition:"To hear with attention"}],s=f=>{e("withDefinitions",f==="true")},a=(f,p)=>{const b=[...o];b[f].word=p,e("anagrams",b)},l=(f,p)=>{const b=[...o];b[f].definition=p,e("anagrams",b)},c=()=>{const f={id:Date.now().toString(),word:"",definition:""};e("anagrams",[...o,f])},u=f=>{if(o.length>1){const p=o.filter((b,v)=>v!==f);e("anagrams",p)}};return h.jsxs($t,{spacing:6,align:"stretch",children:[h.jsxs(Ir,{children:[h.jsx(fr,{mb:3,children:"Anagram Puzzles"}),h.jsx(GX,{value:i?"true":"false",onChange:s,children:h.jsxs(gT,{direction:"row",spacing:8,children:[h.jsx(iI,{value:"false",children:"Without definitions"}),h.jsx(iI,{value:"true",children:"With definitions"})]})})]}),h.jsxs($t,{spacing:4,align:"stretch",children:[o.map((f,p)=>h.jsx(yt,{p:4,border:"1px solid",borderColor:"gray.200",borderRadius:"md",children:h.jsxs(Ln,{spacing:4,align:"start",children:[h.jsxs(dt,{fontWeight:"bold",minW:"20px",children:[p+1,"."]}),h.jsxs($t,{spacing:3,flex:1,children:[h.jsxs(Ir,{children:[h.jsx(fr,{fontSize:"sm",children:"Word"}),h.jsx(si,{value:f.word,onChange:b=>a(p,b.target.value),placeholder:"Enter word",className:"apple-input"})]}),i&&h.jsxs(Ir,{children:[h.jsx(fr,{fontSize:"sm",children:"Definition"}),h.jsx(yt,{border:"1px",borderColor:"gray.200",borderRadius:"md",children:h.jsx(U5,{value:f.definition,onChange:b=>l(p,b),placeholder:"Enter definition",compact:!0,showToolbar:!0,className:"apple-input"})})]})]}),o.length>1&&h.jsx(Lr,{icon:h.jsx(Tl,{}),onClick:()=>u(p),colorScheme:"red",variant:"ghost",size:"sm","aria-label":"Remove anagram"})]})},f.id)),h.jsx(hn,{leftIcon:h.jsx(Al,{}),onClick:c,variant:"outline",colorScheme:"blue",size:"sm",alignSelf:"flex-start",children:"Add a new word"}),h.jsx(gc,{justify:"flex-end",fontSize:"sm",color:"gray.500",children:"min 1 max 100"})]}),n.anagrams&&h.jsxs(_i,{status:"error",children:[h.jsx(Si,{}),h.jsx(bl,{children:n.anagrams})]})]})},jst={gameType:"anagram",title:"Anagram",description:"Create letter-to-word anagram puzzles for your students to solve.",sections:[{title:"Game Settings",description:"Configure basic game parameters",fields:[{name:"title",label:"Title",type:"text",required:!0,placeholder:"Enter game title",defaultValue:"Anagram Game"},{name:"showHints",label:"Show Hint Button",type:"switch",defaultValue:!0,helpText:"Allow students to get hints during the game"},{name:"enableTextToSpeech",label:"Enable Text-to-Speech",type:"switch",defaultValue:!0,helpText:"Allow students to hear words and definitions spoken aloud"}]},{title:"Anagram Puzzles",description:"Create your anagram word puzzles",fields:[],component:Bst},{title:"Sharing",description:"Make your game available to other teachers",fields:[{name:"share",label:"Share this game publicly",type:"switch",defaultValue:!1,helpText:"Public games can be used by other teachers as templates"}]}],customValidation:t=>{if(!t.title||!t.title.trim())return"Please enter a title for your game";if(!t.anagrams||t.anagrams.length===0)return"Please add at least one anagram word";for(const e of t.anagrams){if(!e.word||!e.word.trim())return"All anagrams must have a word";if(t.withDefinitions&&(!e.definition||!e.definition.trim()))return'All anagrams must have a definition when "With definitions" is selected'}},generateConfig:(t,e)=>{t.withDefinitions===void 0&&(t.withDefinitions=!1),t.showHints===void 0&&(t.showHints=!0),t.enableTextToSpeech===void 0&&(t.enableTextToSpeech=!0),t.share===void 0&&(t.share=!1);const n=B({title:"Anagram Game",withDefinitions:!1,showHints:!0,enableTextToSpeech:!0,share:!1,anagrams:[{id:"1",word:"LISTEN",definition:"To hear with attention"}]},t),r=n.withDefinitions!==void 0?!!n.withDefinitions:!1,i=n.showHints!==void 0?!!n.showHints:!0,o=n.enableTextToSpeech!==void 0?!!n.enableTextToSpeech:!0,s=n.share!==void 0?!!n.share:!1,a=(n.anagrams||[]).map((c,u)=>({id:c.id||u.toString(),original:c.word,definition:c.definition||"",type:"word"}));return{title:n.title||"Anagram Game",type:"anagram",description:`Anagram game with ${a.length} ${a.length===1?"puzzle":"puzzles"}`,difficulty:"medium",timeLimit:300,targetScore:a.length*100,maxAttempts:3,shuffleIntensity:"medium",gameMode:"letters-to-word",showDefinitions:r,enableHints:i,enableTextToSpeech:o,correctFeedbackDuration:"momentary",anagrams:a,share:s,email:e==null?void 0:e.email,userId:e==null?void 0:e.uid,createdAt:_o()}}},R7=()=>{const{templateId:t}=hu(),e=Fr(),n=ro(),{currentUser:r}=Pr(),[i,o]=A.useState({}),[s,a]=A.useState(!1),[l,c]=A.useState(!1),[u,d]=A.useState(!1);return A.useEffect(()=>{te(rt,null,function*(){if(!t||t==="new"||t.trim()==="")return;const b=new URLSearchParams(window.location.search).get("copy")==="true";d(b),c(!0);try{let v=!1;const m=[{name:"userGameConfigs",ref:an(xt,"userGameConfigs",t)},{name:"gameConfigs",ref:an(xt,"gameConfigs",t)},{name:"blankGameTemplates",ref:an(xt,"blankGameTemplates",t)},{name:"categoryTemplates",ref:an(xt,"categoryTemplates",t)}];let g="",x=null;for(const w of m){const S=yield oi(w.ref);if(S.exists()){x=S,g=w.name,v=w.name==="gameConfigs"||w.name==="blankGameTemplates"||w.name==="categoryTemplates";break}}if(x&&x.exists()){const w=x.data();b?(a(!1),n({title:"Creating a copy",description:"Creating a new copy of this anagram game configuration.",status:"info",duration:5e3})):v||w.userId!==(r==null?void 0:r.uid)?(a(!1),d(!0),n({title:"Creating a copy",description:v?"This is an official template. You'll create a copy that you can customize.":"You're not the owner of this configuration, so you'll create a copy instead.",status:"info",duration:5e3})):a(!0);const S=oe(B({},w),{title:b||v||w.userId!==(r==null?void 0:r.uid)?`Copy of ${w.title||"Untitled Anagram Game"}`:w.title||"",share:b||v||w.userId!==(r==null?void 0:r.uid)?!1:w.share});o(S)}else n({title:"Configuration not found",description:"The requested configuration could not be found in any collection.",status:"error",duration:5e3}),e("/configure/anagram")}catch(v){console.error("Error loading configuration:",v),n({title:"Error",description:"Failed to load the configuration.",status:"error",duration:5e3}),e("/configure/anagram")}finally{c(!1)}})},[t,r,e,n]),t&&l?null:h.jsx(xm,{schema:jst,initialData:i,isEditing:s,documentId:u?void 0:t,onCancel:()=>e("/")})},Ust=({formData:t,updateField:e,errors:n,saveAttempted:r})=>{A.useEffect(()=>{t&&!t.sentences&&e("sentences",[])},[t,e]);const i=(t==null?void 0:t.sentences)||[],o=()=>{if(i.length>=50)return;const l={id:Date.now().toString(),original:"",difficulty:"medium"};e("sentences",[...i,l])},s=(l,c,u)=>{const d=[...i];d[l]=oe(B({},d[l]),{[c]:u}),e("sentences",d)},a=l=>{if(i.length>0){const c=i.filter((u,d)=>d!==l);e("sentences",c)}};return h.jsxs($t,{spacing:6,align:"stretch",children:[h.jsxs(Ir,{children:[h.jsx(fr,{mb:3,children:"Sentences"}),h.jsx(dt,{fontSize:"sm",color:"gray.600",mb:4,children:"Add sentences for students to arrange from scrambled words"})]}),h.jsxs($t,{spacing:4,align:"stretch",children:[i.length===0?h.jsxs(_i,{status:"info",borderRadius:"md",children:[h.jsx(Si,{}),h.jsx(bl,{children:'No sentences added yet. Click "Add Sentence" to get started.'})]}):h.jsx(HN,{allowMultiple:!0,children:i.map((l,c)=>h.jsxs(WN,{border:"1px",borderColor:"gray.200",borderRadius:"md",mb:2,children:[h.jsxs(jN,{children:[h.jsx(yt,{flex:"1",textAlign:"left",children:h.jsxs(Ln,{justify:"space-between",children:[h.jsxs($t,{align:"start",spacing:1,children:[h.jsxs(dt,{fontWeight:"medium",children:["Sentence ",c+1,l.original&&h.jsxs(po,{ml:2,colorScheme:"blue",variant:"outline",children:[l.original.split(" ").length," words"]})]}),l.original&&h.jsx(dt,{fontSize:"sm",color:"gray.600",noOfLines:1,children:l.original})]}),h.jsx(Lr,{"aria-label":"Delete sentence",icon:h.jsx(Tl,{}),size:"sm",colorScheme:"red",variant:"ghost",onClick:u=>{u.stopPropagation(),a(c)}})]})}),h.jsx(VN,{})]}),h.jsx($N,{pb:4,children:h.jsxs($t,{spacing:4,align:"stretch",children:[h.jsxs(Ir,{isRequired:!0,children:[h.jsx(fr,{children:"Sentence"}),h.jsx(w3,{value:l.original||"",onChange:u=>s(c,"original",u.target.value),placeholder:"Enter the complete sentence (e.g., 'The quick brown fox jumps over the lazy dog')",rows:2}),h.jsx(dt,{fontSize:"xs",color:"gray.500",mt:1,children:"This sentence will be broken into words and scrambled for the student to rearrange."})]}),l.original&&h.jsxs(yt,{bg:"gray.50",p:3,borderRadius:"md",children:[h.jsx(dt,{fontSize:"sm",fontWeight:"medium",mb:2,children:"Preview:"}),h.jsxs(dt,{fontSize:"sm",color:"gray.600",children:[h.jsx("strong",{children:"Words to arrange:"})," ",l.original.split(" ").map((u,d)=>h.jsx(po,{mr:1,mb:1,colorScheme:"blue",variant:"outline",style:{textTransform:"none"},children:u},d))]})]})]})})]},l.id))}),h.jsx(hn,{leftIcon:h.jsx(Al,{}),onClick:o,variant:"outline",colorScheme:"blue",size:"sm",alignSelf:"flex-start",isDisabled:i.length>=50,children:"Add Sentence"}),h.jsxs(gc,{justify:"space-between",fontSize:"sm",color:"gray.500",children:[h.jsx(dt,{children:i.length===0?"No sentences added yet":i.length===1?"1 sentence added":`${i.length} sentences added`}),h.jsx(dt,{children:i.length>=50?"Maximum reached":`${50-i.length} remaining`})]})]}),i.length>0&&h.jsxs(yt,{bg:"gray.50",p:4,borderRadius:"md",children:[h.jsx(dt,{fontSize:"sm",fontWeight:"medium",mb:2,children:"Configuration Summary:"}),h.jsxs($t,{spacing:1,align:"stretch",children:[h.jsxs(Ln,{justify:"space-between",children:[h.jsx(dt,{fontSize:"sm",children:"Total Sentences:"}),h.jsx(po,{colorScheme:"blue",children:i.length})]}),h.jsxs(Ln,{justify:"space-between",children:[h.jsx(dt,{fontSize:"sm",children:"Average Words per Sentence:"}),h.jsx(po,{colorScheme:"green",children:Math.round(i.reduce((l,c)=>{var u;return l+(((u=c.original)==null?void 0:u.split(" ").length)||0)},0)/i.length)})]})]})]}),(n==null?void 0:n.sentences)&&h.jsxs(_i,{status:"error",children:[h.jsx(Si,{}),h.jsx(bl,{children:n.sentences})]})]})},zst={gameType:"sentence-sense",title:"Sentence Sense",description:"Create word arrangement games where students arrange scrambled words into correct sentences.",sections:[{title:"Game Settings",description:"Configure basic game parameters",fields:[{name:"title",label:"Title",type:"text",required:!0,placeholder:"Enter game title",defaultValue:"Sentence Sense Game"},{name:"showHints",label:"Show Hint Button",type:"switch",defaultValue:!0,helpText:"Allow students to get hints during the game"},{name:"enableTextToSpeech",label:"Enable Text-to-Speech",type:"switch",defaultValue:!0,helpText:"Allow students to hear words and sentences spoken aloud"}]},{title:"Sentences",description:"Create your sentence arrangement challenges",fields:[],component:Ust},{title:"Sharing",description:"Make your game available to other teachers",fields:[{name:"share",label:"Share this game publicly",type:"switch",defaultValue:!1,helpText:"Public games can be used by other teachers as templates"}]}],customValidation:t=>{if(!t)return"Configuration data is not available";if(!t.title||!t.title.trim())return"Please enter a title for your game";if(!t.sentences||t.sentences.length===0)return"Please add at least one sentence";if(t.sentences.length>50)return"Maximum 50 sentences allowed";for(let e=0;e<t.sentences.length;e++){const n=t.sentences[e];if(!n.original||!n.original.trim())return`Sentence ${e+1}: Please enter sentence text`;if(n.original.trim().split(" ").length<2)return`Sentence ${e+1}: Sentence must contain at least 2 words`}},generateConfig:(t,e)=>{t||(t={}),t.showHints===void 0&&(t.showHints=!0),t.enableTextToSpeech===void 0&&(t.enableTextToSpeech=!0),t.share===void 0&&(t.share=!1);const n=B({title:"Sentence Sense Game",showHints:!0,enableTextToSpeech:!0,share:!1,sentences:[]},t),r=n.showHints!==void 0?!!n.showHints:!0,i=n.enableTextToSpeech!==void 0?!!n.enableTextToSpeech:!0,o=n.share!==void 0?!!n.share:!1,s=(n.sentences||[]).map((l,c)=>({id:l.id||c.toString(),original:l.original,definition:l.definition||"",difficulty:l.difficulty||"medium"}));return{title:n.title||"Sentence Sense Game",type:"sentence-sense",description:`Sentence arrangement game with ${s.length} ${s.length===1?"sentence":"sentences"}`,difficulty:"medium",timeLimit:300,targetScore:s.length*100,maxAttempts:3,showHints:r,enableTextToSpeech:i,sentences:s,share:o,email:e==null?void 0:e.email,userId:e==null?void 0:e.uid,createdAt:_o()}}},k7=()=>{const{templateId:t}=hu(),e=Fr(),n=ro(),{currentUser:r}=Pr(),[i,o]=A.useState({}),[s,a]=A.useState(!1),[l,c]=A.useState(!1),[u,d]=A.useState(!1),f=()=>{e("/teacher")};return A.useEffect(()=>{if(!t||t==="new")return;te(rt,null,function*(){d(!0);try{const b=new URLSearchParams(window.location.search).get("copy")==="true",v=[{name:"userGameConfigs",ref:"userGameConfigs"},{name:"gameConfigs",ref:"gameConfigs"},{name:"blankGameTemplates",ref:"blankGameTemplates"},{name:"categoryTemplates",ref:"categoryTemplates"}];let m=null,g="",x=!1;for(const w of v){const S=yield oi(an(xt,w.ref,t));if(S.exists()){m=S,g=w.name,x=w.name==="gameConfigs"||w.name==="blankGameTemplates"||w.name==="categoryTemplates";break}}if(m&&m.exists()){const w=m.data();b?(a(!1),n({title:"Creating a copy",description:"Creating a new copy of this Sentence Sense configuration.",status:"info",duration:5e3})):x||w.userId!==(r==null?void 0:r.uid)?(a(!1),c(!0),n({title:"Creating a copy",description:x?"This is an official template. You'll create a copy that you can customize.":"You're not the owner of this configuration, so you'll create a copy instead.",status:"info",duration:5e3})):a(!0);const S=oe(B({},w),{title:b||x||w.userId!==(r==null?void 0:r.uid)?`Copy of ${w.title||"Untitled Sentence Sense Game"}`:w.title||"",share:b||x||w.userId!==(r==null?void 0:r.uid)?!1:w.share});o(S)}else n({title:"Configuration not found",description:"The requested configuration could not be found in any collection.",status:"error",duration:5e3}),e("/configure/sentence-sense")}catch(b){console.error("Error loading configuration:",b),n({title:"Error",description:"Failed to load the configuration.",status:"error",duration:5e3}),e("/configure/sentence-sense")}finally{d(!1)}})},[t,r,e,n]),u?h.jsx("div",{children:"Loading configuration..."}):h.jsx(xm,{schema:zst,onCancel:f,initialData:i,isEditing:s,documentId:s?t:void 0})},Vst={gameType:"place-value-showdown",title:"Place Value Showdown",description:"Create an exciting competitive place value game where students challenge an AI teacher to build the largest or smallest numbers using digit positions!",sections:[{title:"Game Settings",description:"Configure basic game parameters",fields:[{name:"title",label:"Title",type:"text",required:!0,placeholder:"Enter game title",defaultValue:"Place Value Showdown"},{name:"numberOfCards",label:"Number of Digits",type:"select",required:!0,options:[{value:1,label:"1 Digit"},{value:2,label:"2 Digits"},{value:3,label:"3 Digits"},{value:4,label:"4 Digits"},{value:5,label:"5 Digits"}],defaultValue:3,helpText:"How many digits each player gets"},{name:"objective",label:"Objective",type:"select",required:!0,options:[{value:"largest",label:"Largest Number"},{value:"smallest",label:"Smallest Number"}],defaultValue:"largest",helpText:"Goal of the game"},{name:"winningScore",label:"Winning Score",type:"number",required:!0,min:1,max:20,defaultValue:5,helpText:"Points needed to win the game (1-20)",validation:t=>{const e=parseInt(t);if(isNaN(e)||e<1||e>20)return"Winning score must be between 1 and 20"}},{name:"gameMode",label:"Game Mode",type:"select",required:!0,options:[{value:"student-vs-teacher",label:"Student vs Teacher"},{value:"practice",label:"Practice Mode"}],defaultValue:"student-vs-teacher",helpText:"Single player practice or competitive mode"}]},{title:"Decimal Settings",description:"Optional decimal place value settings",fields:[{name:"includeDecimal",label:"Include Decimal Places",type:"switch",defaultValue:!1,helpText:"Add decimal places to the number"},{name:"decimalPlaces",label:"Decimal Places",type:"select",options:[{value:1,label:"1 Decimal Place"},{value:2,label:"2 Decimal Places"},{value:3,label:"3 Decimal Places"}],defaultValue:3,helpText:"Number of decimal places to include"}]},{title:"Learning Features",description:"Educational enhancement options",fields:[{name:"enableHints",label:"Enable Place Value Toggle Buttons",type:"switch",defaultValue:!0,helpText:"Allow students to toggle visual cues on/off during gameplay"}]},{title:"Sharing",description:"Make your game available to other teachers",fields:[{name:"share",label:"Share this game publicly",type:"switch",defaultValue:!1,helpText:"Public games can be used by other teachers as templates"}]}],customValidation:t=>{if(t.includeDecimal&&!t.decimalPlaces)return"Please select number of decimal places when including decimals"},generateConfig:(t,e)=>(t.includeDecimal?t.numberOfCards+t.decimalPlaces:t.numberOfCards,{title:t.title,type:"place-value-showdown",description:`Place value game with ${t.numberOfCards} digits${t.includeDecimal?` + ${t.decimalPlaces} decimal places`:""}, aiming for ${t.objective} number. First to ${t.winningScore} points wins!`,difficulty:"medium",timeLimit:300,targetScore:t.winningScore,numberOfCards:t.numberOfCards,objective:t.objective,winningScore:t.winningScore,aiDifficulty:"medium",playerName:"Student",teacherName:(e==null?void 0:e.displayName)||"Teacher",enableHints:t.enableHints,gameMode:t.gameMode,includeDecimal:t.includeDecimal,decimalPlaces:t.decimalPlaces,share:t.share,email:e==null?void 0:e.email,userId:e==null?void 0:e.uid,createdAt:_o()})},I7=()=>{const{templateId:t}=hu(),e=Fr(),n=ro(),{currentUser:r}=Pr(),[i,o]=A.useState({}),[s,a]=A.useState(!1),[l,c]=A.useState(!1),[u,d]=A.useState(!1),f=()=>{e("/teacher")};return A.useEffect(()=>{if(!t||t==="new")return;te(rt,null,function*(){d(!0);try{const b=new URLSearchParams(window.location.search).get("copy")==="true",v=[{name:"userGameConfigs",ref:"userGameConfigs"},{name:"gameConfigs",ref:"gameConfigs"},{name:"blankGameTemplates",ref:"blankGameTemplates"},{name:"categoryTemplates",ref:"categoryTemplates"}];let m=null,g="",x=!1;for(const w of v){const S=yield oi(an(xt,w.ref,t));if(S.exists()){m=S,g=w.name,x=w.name==="gameConfigs"||w.name==="blankGameTemplates"||w.name==="categoryTemplates";break}}if(m&&m.exists()){const w=m.data();b?(a(!1),n({title:"Creating a copy",description:"Creating a new copy of this Place Value Showdown configuration.",status:"info",duration:5e3})):x||w.userId!==(r==null?void 0:r.uid)?(a(!1),c(!0),n({title:"Creating a copy",description:x?"This is an official template. You'll create a copy that you can customize.":"You're not the owner of this configuration, so you'll create a copy instead.",status:"info",duration:5e3})):a(!0);const S=oe(B({},w),{title:b||x||w.userId!==(r==null?void 0:r.uid)?`Copy of ${w.title||"Untitled Place Value Showdown"}`:w.title||"",share:b||x||w.userId!==(r==null?void 0:r.uid)?!1:w.share});o(S)}else n({title:"Configuration not found",description:"The requested configuration could not be found in any collection.",status:"error",duration:5e3}),e("/configure/place-value-showdown")}catch(b){console.error("Error loading configuration:",b),n({title:"Error",description:"Failed to load the configuration.",status:"error",duration:5e3}),e("/configure/place-value-showdown")}finally{d(!1)}})},[t,r,e,n]),u?h.jsx("div",{children:"Loading configuration..."}):h.jsx(xm,{schema:Vst,onCancel:f,initialData:i,isEditing:s,documentId:s?t:void 0})},Wst=({formData:t,updateField:e})=>{t.targetCategory||e("targetCategory",{id:"target",name:"Short A Words",words:["cat","bat","hat","mat","rat","sat","fat","pat","lap","cap"],isTarget:!0}),t.nonTargetCategory||e("nonTargetCategory",{id:"non-target",name:"Other Words",words:["dog","tree","house","car","sun","moon","book","pen","cup","ball"],isTarget:!1});const n=t.targetCategory||{id:"target",name:"Short A Words",words:["cat","bat","hat","mat","rat"],isTarget:!0},r=t.nonTargetCategory||{id:"non-target",name:"Other Words",words:["dog","tree","house","car","sun"],isTarget:!1},i=(l,c,u)=>{if(l==="target"){const d=[...n.words||[]];d[c]=u,e("targetCategory",oe(B({},n),{words:d}))}else{const d=[...r.words||[]];d[c]=u,e("nonTargetCategory",oe(B({},r),{words:d}))}},o=l=>{if(l==="target"){const c=n.words||[];if(c.length>=50)return;const u=[...c,""];e("targetCategory",oe(B({},n),{words:u}))}else{const c=r.words||[];if(c.length>=50)return;const u=[...c,""];e("nonTargetCategory",oe(B({},r),{words:u}))}},s=(l,c)=>{if(l==="target"){const u=(n.words||[]).filter((d,f)=>f!==c);e("targetCategory",oe(B({},n),{words:u}))}else{const u=(r.words||[]).filter((d,f)=>f!==c);e("nonTargetCategory",oe(B({},r),{words:u}))}},a=(l,c)=>{l==="target"?e("targetCategory",oe(B({},n),{name:c})):e("nonTargetCategory",oe(B({},r),{name:c}))};return h.jsx(yt,{children:h.jsxs(Mw,{children:[h.jsxs(Pw,{children:[h.jsx(Ts,{children:"Target Words (Hit These)"}),h.jsx(Ts,{children:"Non-Target Words (Avoid These)"})]}),h.jsxs(ET,{children:[h.jsx(zf,{children:h.jsxs(mc,{children:[h.jsx(kv,{children:h.jsxs(Ln,{justify:"space-between",children:[h.jsxs($t,{align:"start",spacing:1,children:[h.jsx(Br,{size:"md",children:"Target Category"}),h.jsx(dt,{fontSize:"sm",color:"gray.600",children:"Words that students should hit with their paddle"})]}),h.jsxs(po,{colorScheme:"green",children:[(n.words||[]).filter(l=>l.trim()).length," / 50 words"]})]})}),h.jsx(pc,{children:h.jsxs($t,{spacing:4,children:[h.jsxs(Ir,{children:[h.jsx(fr,{children:"Category Name"}),h.jsx(si,{value:n.name||"",onChange:l=>a("target",l.target.value),placeholder:"e.g., Short A Words",className:"apple-input"})]}),h.jsxs(yt,{width:"100%",children:[h.jsx(fr,{children:"Words"}),h.jsx(CC,{columns:{base:1,sm:2,md:3},spacing:3,children:(n.words||[]).map((l,c)=>h.jsxs(Ln,{children:[h.jsx(si,{value:l,onChange:u=>i("target",c,u.target.value),placeholder:`Word ${c+1}`,className:"apple-input",size:"sm"}),h.jsx(Lr,{icon:h.jsx(Tl,{}),onClick:()=>s("target",c),size:"sm",colorScheme:"red",variant:"ghost","aria-label":"Remove word"})]},c))}),h.jsx(hn,{leftIcon:h.jsx(Al,{}),onClick:()=>o("target"),size:"sm",colorScheme:"green",variant:"outline",mt:3,isDisabled:(n.words||[]).length>=50,children:(n.words||[]).length>=50?"Maximum Reached (50)":"Add Target Word"}),(n.words||[]).length>=45&&(n.words||[]).length<50&&h.jsxs(dt,{fontSize:"sm",color:"orange.600",mt:1,children:[50-(n.words||[]).length," words remaining"]})]})]})})]})}),h.jsx(zf,{children:h.jsxs(mc,{children:[h.jsx(kv,{children:h.jsxs(Ln,{justify:"space-between",children:[h.jsxs($t,{align:"start",spacing:1,children:[h.jsx(Br,{size:"md",children:"Non-Target Category"}),h.jsx(dt,{fontSize:"sm",color:"gray.600",children:"Words that students should avoid hitting"})]}),h.jsxs(po,{colorScheme:"red",children:[(r.words||[]).filter(l=>l.trim()).length," / 50 words"]})]})}),h.jsx(pc,{children:h.jsxs($t,{spacing:4,children:[h.jsxs(Ir,{children:[h.jsx(fr,{children:"Category Name"}),h.jsx(si,{value:r.name||"",onChange:l=>a("nonTarget",l.target.value),placeholder:"e.g., Other Words",className:"apple-input"})]}),h.jsxs(yt,{width:"100%",children:[h.jsx(fr,{children:"Words"}),h.jsx(CC,{columns:{base:1,sm:2,md:3},spacing:3,children:(r.words||[]).map((l,c)=>h.jsxs(Ln,{children:[h.jsx(si,{value:l,onChange:u=>i("nonTarget",c,u.target.value),placeholder:`Word ${c+1}`,className:"apple-input",size:"sm"}),h.jsx(Lr,{icon:h.jsx(Tl,{}),onClick:()=>s("nonTarget",c),size:"sm",colorScheme:"red",variant:"ghost","aria-label":"Remove word"})]},c))}),h.jsx(hn,{leftIcon:h.jsx(Al,{}),onClick:()=>o("nonTarget"),size:"sm",colorScheme:"red",variant:"outline",mt:3,isDisabled:(r.words||[]).length>=50,children:(r.words||[]).length>=50?"Maximum Reached (50)":"Add Non-Target Word"}),(r.words||[]).length>=45&&(r.words||[]).length<50&&h.jsxs(dt,{fontSize:"sm",color:"orange.600",mt:1,children:[50-(r.words||[]).length," words remaining"]})]})]})})]})})]})]})})},$st=(t,e)=>{var o;const n={title:t.title||"Pong Game",description:t.description||"Educational Pong-style word categorization game",gameSpeed:t.gameSpeed||5,paddleSize:t.paddleSize||5,gameDuration:t.gameDuration||3,enableTextToSpeech:(o=t.enableTextToSpeech)!=null?o:!0,targetCategory:t.targetCategory||{id:"target",name:"Short A Words",words:["cat","bat","hat","mat","rat"],isTarget:!0},nonTargetCategory:t.nonTargetCategory||{id:"non-target",name:"Other Words",words:["dog","tree","house","car","sun"],isTarget:!1},share:t.share||!1},r=(n.targetCategory.words||[]).filter(s=>s&&s.trim()),i=(n.nonTargetCategory.words||[]).filter(s=>s&&s.trim());return{title:n.title,type:"word-volley",description:n.description,timeLimit:n.gameDuration*60,targetScore:Math.max(r.length,i.length)*10,gameSpeed:n.gameSpeed,paddleSize:n.paddleSize,gameDuration:n.gameDuration,enableTextToSpeech:n.enableTextToSpeech,targetCategory:oe(B({},n.targetCategory),{words:r}),nonTargetCategory:oe(B({},n.nonTargetCategory),{words:i}),share:n.share,email:(e==null?void 0:e.email)||"",userId:(e==null?void 0:e.uid)||"",createdAt:_o(),updatedAt:_o()}},Hst={gameType:"word-volley",title:"Word Volley Game",description:"Educational Pong-style word categorization game",sections:[{title:"Game Settings",description:"Configure the basic game settings and difficulty",fields:[{name:"title",label:"Game Title",type:"text",required:!0,placeholder:"Enter game title",defaultValue:"Pong Game",helpText:"Name for your Word Volley game"},{name:"description",label:"Description",type:"textarea",placeholder:"Enter game description",defaultValue:"Educational Pong-style word categorization game",helpText:"Brief description of the game"},{name:"gameSpeed",label:"Game Speed",type:"select",required:!0,options:[{value:2,label:"Slow"},{value:5,label:"Medium"},{value:8,label:"Normal"},{value:11,label:"Fast"},{value:15,label:"Very Fast"}],defaultValue:5,width:"140px",helpText:"Controls ball speed (Slow to Very Fast)"},{name:"paddleSize",label:"Paddle Size",type:"select",required:!0,options:[{value:1,label:"Small"},{value:3,label:"Medium"},{value:5,label:"Normal"},{value:7,label:"Large"},{value:10,label:"Extra Large"}],defaultValue:5,width:"140px",helpText:"Controls paddle size (Small to Extra Large)"},{name:"gameDuration",label:"Game Duration (minutes)",type:"select",required:!0,options:[{value:1,label:"1 minute"},{value:2,label:"2 minutes"},{value:3,label:"3 minutes"},{value:4,label:"4 minutes"},{value:5,label:"5 minutes"}],defaultValue:3,width:"140px",helpText:"How long each game session lasts"},{name:"enableTextToSpeech",label:"Enable Text-to-Speech for words",type:"switch",defaultValue:!0,helpText:"Enable audio pronunciation of words during gameplay"}]},{title:"Word Categories",description:"Configure target words (to hit) and non-target words (to avoid)",component:Wst},{title:"Sharing Settings",description:"Control who can access this configuration",fields:[{name:"share",label:"Share this configuration with other teachers",type:"switch",defaultValue:!1,helpText:"Allow other teachers to use this game configuration"}]}],generateConfig:$st},F7=()=>{const t=Fr(),{onError:e}=oke(),{templateId:n}=hu(),{currentUser:r}=Pr(),i=ro(),[o,s]=A.useState(null),[a,l]=A.useState(!1),[c,u]=A.useState(!1);A.useEffect(()=>{te(rt,null,function*(){var p;if(!n||n==="new"){l(!1),s(null);return}if(!r){console.warn("No current user available for loading configuration");return}u(!0);try{const v=new URLSearchParams(window.location.search).get("copy")==="true";l(!v);const m=["wordVolleyConfigs","gameConfigurations","templates","sharedTemplates"];let g=null,x="";for(const S of m)try{const D=an(xt,S,n),k=yield oi(D);if(k.exists()){g=B({id:k.id},k.data()),x=S,console.log(` Found Word Volley config in ${S}:`,g);break}}catch(D){console.warn(`Failed to check ${S}:`,D);continue}if(!g){console.error(" Configuration not found in any collection"),i({title:"Configuration Not Found",description:"The requested game configuration could not be found.",status:"error",duration:5e3,isClosable:!0}),t("/");return}if(x==="sharedTemplates"&&g.userId!==r.uid)console.log(" Loading shared template (read-only access)"),l(!1);else if(g.userId&&g.userId!==r.uid){console.error(" Permission denied: User does not own this configuration"),i({title:"Access Denied",description:"You do not have permission to edit this configuration.",status:"error",duration:5e3,isClosable:!0}),t("/");return}const w={title:g.title||"Word Volley Game",description:g.description||"",gameSpeed:g.gameSpeed||5,paddleSize:g.paddleSize||5,gameDuration:g.gameDuration||3,enableTextToSpeech:(p=g.enableTextToSpeech)!=null?p:!0,targetCategory:g.targetCategory||{id:"target",name:"Target Words",words:[],isTarget:!0},nonTargetCategory:g.nonTargetCategory||{id:"non-target",name:"Non-Target Words",words:[],isTarget:!1},share:g.share||!1};console.log(" Prepared form data:",w),s(w)}catch(b){console.error(" Error loading Word Volley configuration:",b),i({title:"Error Loading Configuration",description:"Failed to load the game configuration. Please try again.",status:"error",duration:5e3,isClosable:!0}),t("/")}finally{u(!1)}})},[n,r,t,i]);const d=()=>{t("/")};return c?h.jsx("div",{children:"Loading configuration..."}):h.jsx(xm,{schema:Hst,onCancel:d,initialData:o,isEditing:a,documentId:a?n:void 0})},Gst=()=>{const t=Fr(),e=vs(),[n,r]=A.useState("detecting");return A.useEffect(()=>{const i=()=>te(rt,null,function*(){const s=new URLSearchParams(e.search),a=s.get("target"),l=s.get("token"),c=s.get("pwa");if(!a){t("/student");return}if(r("redirecting"),!(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://"))&&"serviceWorker"in navigator)try{if(l){const d=`web+lumino://play?token=${l}`;window.location.href=d,setTimeout(()=>{r("fallback"),o(a,l,c)},1e3);return}}catch(d){console.log("Protocol handler not available, using fallback")}o(a,l,c)}),o=(s,a,l)=>{let c=s;a&&(c+=`?token=${a}`),l&&(c+=a?`&pwa=${l}`:`?pwa=${l}`),s.startsWith("/")?t(c):window.location.href=c};i()},[e,t]),h.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"20px",textAlign:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:[h.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.1)",borderRadius:"15px",padding:"30px",backdropFilter:"blur(10px)",maxWidth:"400px"},children:[h.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:""}),h.jsxs("h2",{style:{marginBottom:"15px"},children:[n==="detecting"&&"Opening LuminateLearn...",n==="redirecting"&&"Launching App...",n==="fallback"&&"Redirecting..."]}),h.jsxs("p",{style:{opacity:.9,lineHeight:1.5},children:[n==="detecting"&&"Detecting the best way to open your assignment...",n==="redirecting"&&"Attempting to open in the LuminateLearn app...",n==="fallback"&&"Opening in your browser..."]}),h.jsx("div",{style:{marginTop:"20px",display:"flex",justifyContent:"center"},children:h.jsx("div",{style:{width:"40px",height:"40px",border:"3px solid rgba(255, 255, 255, 0.3)",borderTop:"3px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}})})]}),h.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})};class qst{constructor(){oo(this,"sessionId");oo(this,"events",[]);this.sessionId=this.generateSessionId(),console.log(" Email Link Analytics initialized with session:",this.sessionId)}generateSessionId(){return`email_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}trackEmailLinkClick(e,n={}){try{const r=B({linkType:e,pwaInstalled:this.detectPWAInstallation(),userAgent:navigator.userAgent,fromEmail:this.detectEmailOrigin(),timestamp:Date.now(),sessionId:this.sessionId},n);this.events.push(r);const i=JSON.parse(localStorage.getItem("email_link_analytics")||"[]");i.push(r),localStorage.setItem("email_link_analytics",JSON.stringify(i)),console.log(" Email Link Analytics - Link clicked:",{linkType:r.linkType,pwaInstalled:r.pwaInstalled,fromEmail:r.fromEmail,sessionId:r.sessionId}),this.sendToBackend(r)}catch(r){console.error(" Email Link Analytics - Error tracking click:",r)}}trackSmartRouteDecision(e,n,r){try{const i={type:"smart_route_decision",routeType:e,decision:n,reason:r,pwaInstalled:this.detectPWAInstallation(),timestamp:Date.now(),sessionId:this.sessionId};console.log(" Email Link Analytics - Smart route decision:",i);const o=JSON.parse(localStorage.getItem("smart_route_decisions")||"[]");o.push(i),localStorage.setItem("smart_route_decisions",JSON.stringify(o)),this.sendToBackend(i)}catch(i){console.error(" Email Link Analytics - Error tracking smart route:",i)}}trackPWAInstallFromEmail(e,n){try{const r={type:"pwa_install_from_email",success:e,method:n,timestamp:Date.now(),sessionId:this.sessionId,userAgent:navigator.userAgent};console.log(" Email Link Analytics - PWA install tracked:",r);const i=JSON.parse(localStorage.getItem("pwa_install_analytics")||"[]");i.push(r),localStorage.setItem("pwa_install_analytics",JSON.stringify(i)),this.sendToBackend(r)}catch(r){console.error(" Email Link Analytics - Error tracking PWA install:",r)}}getSessionId(){return this.sessionId}detectPWAInstallation(){try{const e=window.matchMedia("(display-mode: standalone)").matches,n=window.navigator.standalone===!0,r=document.referrer.includes("android-app://");return e||n||r}catch(e){return!1}}detectEmailOrigin(){try{return new URLSearchParams(window.location.search).get("from")==="email"}catch(e){return!1}}sendToBackend(e){return te(this,null,function*(){try{if(!(window.location.hostname.includes("verse-dev-central.web.app")||window.location.hostname.includes("verse-central.web.app"))){console.log(" Analytics - Dev mode, skipping backend send:",e);return}console.log(" Analytics - Would send to backend:",e)}catch(n){console.warn(" Analytics - Backend send failed:",n)}})}generateAnalyticsReport(){return te(this,null,function*(){try{const e=JSON.parse(localStorage.getItem("email_link_analytics")||"[]"),n=JSON.parse(localStorage.getItem("smart_route_decisions")||"[]"),r=JSON.parse(localStorage.getItem("pwa_install_analytics")||"[]"),i={totalEmailLinkClicks:e.length,linkTypeBreakdown:this.calculateLinkTypeBreakdown(e),smartRouteEffectiveness:this.calculateSmartRouteEffectiveness(n),pwaInstallSuccess:this.calculatePWAInstallSuccess(r),userAgentBreakdown:this.calculateUserAgentBreakdown(e),sessionCount:new Set(e.map(o=>o.sessionId)).size,timeRange:{earliest:Math.min(...e.map(o=>o.timestamp)),latest:Math.max(...e.map(o=>o.timestamp))}};return console.log(" Email Link Analytics Report:",i),i}catch(e){return console.error(" Analytics - Error generating report:",e),null}})}calculateLinkTypeBreakdown(e){const n={};return e.forEach(r=>{n[r.linkType]=(n[r.linkType]||0)+1}),n}calculateSmartRouteEffectiveness(e){const n={totalDecisions:e.length,pwaRoutes:e.filter(r=>r.decision==="pwa").length,browserRoutes:e.filter(r=>r.decision==="browser").length};return oe(B({},n),{pwaPercentage:n.totalDecisions>0?(n.pwaRoutes/n.totalDecisions*100).toFixed(1):0})}calculatePWAInstallSuccess(e){const n=e.filter(i=>i.success).length,r=e.length;return{total:r,successful:n,successRate:r>0?(n/r*100).toFixed(1):0,methodBreakdown:e.reduce((i,o)=>(i[o.method]=(i[o.method]||0)+1,i),{})}}calculateUserAgentBreakdown(e){const n={};return e.forEach(r=>{const i=r.userAgent;let o="Other";i.includes("Chrome")?o="Chrome":i.includes("Safari")&&!i.includes("Chrome")?o="Safari":i.includes("Firefox")?o="Firefox":i.includes("Edge")&&(o="Edge"),n[o]=(n[o]||0)+1}),n}}const Kst=new qst,O7=()=>{const[t]=fh(),e=Fr(),{isInstalled:n,isInstallable:r}=v2(),[i,o]=A.useState(!0),[s,a]=A.useState(""),l=window.location.pathname.includes("/assignment")?"assignment":"dashboard",c=t.get("token"),u=t.get("mode"),d=t.get("forceBrowser")==="true",f=t.get("pwaMode"),p=t.get("showGuide")==="true",b=t.get("from")==="email",v=t.get("studentEmail");return A.useEffect(()=>{const m=()=>te(rt,null,function*(){console.log(" Smart Router - Starting intelligent routing",{routeType:l,token:c,mode:u,forceBrowser:d,pwaMode:f,showGuide:p,fromEmail:b,studentEmail:v,isInstalled:n,isInstallable:r}),console.log(" Smart Router - Enhanced PWA detection debug:",{"window.matchMedia standalone":window.matchMedia("(display-mode: standalone)").matches,"navigator.standalone":window.navigator.standalone,"document.referrer":document.referrer,"window.location.href":window.location.href,"window.location.hostname":window.location.hostname,"window.outerHeight - innerHeight":window.outerHeight-window.innerHeight,"serviceWorker available":"serviceWorker"in navigator,userAgent:navigator.userAgent,isInEmailClient:x()});function x(){const S=navigator.userAgent.toLowerCase();return S.includes("yahoo")||S.includes("gmail")||S.includes("outlook")||S.includes("mail")||document.referrer.includes("mail")||window.location.href.includes("from=email")}if(d){a(" Force Browser Mode");const S=v?`&studentEmail=${v}&emailAccess=true`:"",D=l==="assignment"?`/play?token=${c}&mode=browser&from=email&forceBrowser=true${S}`:`/student?mode=browser&from=email&forceBrowser=true${S}`;console.log(" Smart Router - Force browser mode, redirecting to:",D),Kst.trackEmailLinkClick(l==="assignment"?"browser-assignment":"browser-dashboard",{token:c||void 0,userId:void 0}),window.location.href=D;return}if(f==="required"){if(n){a(" PWA Required - Opening in App");const S=v?`&studentEmail=${v}&emailAccess=true`:"",D=l==="assignment"?`/play?token=${c}&pwa=true&pwa_type=game&from=email${S}`:`/student?pwa_type=student&from=email${S}`;console.log(" Smart Router - PWA required and installed, redirecting to:",D),window.location.href=D}else a(" PWA Required - Installing First"),console.log(" Smart Router - PWA required but not installed, redirecting to install"),e(`/student?pwa=install&from=email&showGuide=true&returnUrl=${encodeURIComponent(window.location.href)}`);return}if(p||u==="install"){n?(a(" Install Guide - Already Installed"),console.log(" Smart Router - Install requested but already installed"),e("/student?pwa=alreadyInstalled&showGuide=true")):(a(" Install Guide - Showing Installation"),console.log(" Smart Router - Showing install guide"),e("/student?pwa=install&showGuide=true"));return}yield new Promise(S=>setTimeout(S,2e3));const w=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0||document.referrer.includes("android-app://");if(console.log(" Smart Router - Universal routing (all browser loads get PWA guidance):",{"usePWA.isInstalled":n,isCurrentlyInPWA:w,routeType:l,fromEmail:b,timing:"After 2-second delay"}),n&&!w){a(" Smart Route - Using Installed PWA");const S=v?`&studentEmail=${v}&emailAccess=true`:"",D=l==="assignment"?`/play?token=${c}&pwa=true&pwa_type=game&from=email&emailAccess=true${S}`:`/student?pwa_type=student&from=email${S}`;console.log(" Smart Router - PWA detected, using PWA route:",D),l==="assignment"?window.location.href=`/launch.html?target=%2Fplay&token=${c}&pwa=true&from=email`:window.location.href=D}else{a(" Smart Route - Using Browser (Universal PWA guidance)");const S=v?`&studentEmail=${v}&emailAccess=true`:"",D=l==="assignment"?`/play?token=${c}&from=email&emailAccess=true${S}`:`/student?from=email${S}`;console.log(" Smart Router - Using browser route with universal PWA guidance:",D),window.location.href=D}}),g=setTimeout(()=>{m().finally(()=>{o(!1)})},1500);return()=>clearTimeout(g)},[l,c,u,d,f,p,b,n,r,e]),i?h.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"20px",fontFamily:"system-ui, sans-serif"},children:[h.jsx(IL,{}),h.jsx("h2",{style:{marginTop:"20px",color:"#374151"},children:"LuminateLearn"}),h.jsx("p",{style:{color:"#6b7280",textAlign:"center",maxWidth:"400px"},children:"Detecting your device capabilities and choosing the best way to open your content..."}),s&&h.jsx("p",{style:{color:"#059669",fontWeight:"bold",marginTop:"10px"},children:s}),h.jsxs("div",{style:{marginTop:"30px",padding:"15px",backgroundColor:"#f3f4f6",borderRadius:"8px",fontSize:"14px",color:"#4b5563"},children:[h.jsx("strong",{children:"What's happening:"}),h.jsxs("ul",{style:{margin:"10px 0",paddingLeft:"20px"},children:[h.jsx("li",{children:" Checking if LuminateLearn app is installed"}),h.jsx("li",{children:" Selecting the best way to open your content"}),h.jsx("li",{children:" Redirecting to your assignment or dashboard"})]})]})]}):h.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"20px",fontFamily:"system-ui, sans-serif"},children:[h.jsx("h2",{style:{color:"#374151"},children:"Redirecting..."}),h.jsx("p",{style:{color:"#6b7280"},children:"If you're not redirected automatically, please check your browser settings."}),h.jsx("button",{onClick:()=>window.location.href="/student",style:{marginTop:"20px",padding:"12px 24px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold"},children:"Go to Student Dashboard"})]})},lp=class lp{constructor(){oo(this,"assignmentChannel",null);oo(this,"serviceWorkerReady",!1);oo(this,"nativeConfig",{iosScheme:"luminatelearn://",androidPackage:"com.luminatelearn.student",fallbackDelay:2e3});if(new URLSearchParams(window.location.search).get("forceBrowser")==="true"){console.log("[EmailLink]  Browser-only mode detected - skipping service worker initialization");return}this.initializeBroadcastChannel(),this.checkServiceWorkerReady()}static getInstance(){return lp.instance||(lp.instance=new lp),lp.instance}initializeBroadcastChannel(){try{this.assignmentChannel=new BroadcastChannel("luminatelearn-assignments"),console.log("[EmailLink]  BroadcastChannel initialized")}catch(e){console.warn("[EmailLink]  BroadcastChannel not supported:",e)}}checkServiceWorkerReady(){return te(this,null,function*(){if("serviceWorker"in navigator)try{const e=yield navigator.serviceWorker.ready;this.serviceWorkerReady=!!e.active,console.log("[EmailLink]  Service Worker ready:",this.serviceWorkerReady)}catch(e){console.warn("[EmailLink]  Service Worker check failed:",e)}})}routeToStudent(e){return te(this,null,function*(){if(console.log("[EmailLink]  Smart routing started:",e),(!e.mode||e.mode==="native")&&(yield this.tryNativeApp(e))){console.log("[EmailLink]  Successfully routed to native app");return}if(e.mode!=="browser"){console.log("[EmailLink]  Falling back to PWA routing"),yield this.handlePWALink(e);return}console.log("[EmailLink]  Routing to browser mode"),yield this.handleBrowserLink(e)})}tryNativeApp(e){return te(this,null,function*(){return new Promise(n=>{const r=setTimeout(()=>{console.log("[EmailLink]  Native app timeout - assuming not installed"),n(!1)},this.nativeConfig.fallbackDelay);try{const i=this.buildNativeUrl(e);if(console.log("[EmailLink]  Trying native app:",i),/iPad|iPhone|iPod/.test(navigator.userAgent)){const s=document.createElement("iframe");s.style.display="none",s.src=i,document.body.appendChild(s),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s)},1e3)}else{const s=this.buildAndroidIntentUrl(e);window.location.href=s}setTimeout(()=>{document.visibilityState==="visible"?(clearTimeout(r),n(!1)):(clearTimeout(r),n(!0))},1e3);const o=()=>{document.visibilityState==="hidden"&&(clearTimeout(r),document.removeEventListener("visibilitychange",o),n(!0))};document.addEventListener("visibilitychange",o)}catch(i){console.error("[EmailLink]  Native app launch failed:",i),clearTimeout(r),n(!1)}})})}buildNativeUrl(e){const n=this.nativeConfig.iosScheme,r=e.target==="assignment"?"play":"student";let i=`${n}${r}`;const o=new URLSearchParams;e.studentEmail&&o.set("studentEmail",e.studentEmail),e.token&&o.set("token",e.token),e.source&&o.set("source",e.source);const s=o.toString();return s&&(i+=`?${s}`),i}buildAndroidIntentUrl(e){const n=e.target==="assignment"?"play":"student",r=`https://luminatelearn.com/${n}`,i=new URLSearchParams;e.studentEmail&&i.set("studentEmail",e.studentEmail),e.token&&i.set("token",e.token),e.source&&i.set("source",e.source);const o=i.toString(),s=o?`${r}?${o}`:r;return`intent://${n}?${o}#Intent;scheme=luminatelearn;package=${this.nativeConfig.androidPackage};S.browser_fallback_url=${encodeURIComponent(s)};end`}handlePWALink(e){return te(this,null,function*(){if(console.log("[EmailLink]  Handling PWA link with LAUNCHER BRIDGE approach:",e),this.serviceWorkerReady&&navigator.serviceWorker.controller){console.log("[EmailLink]  FOCUS-FIRST: Checking for existing PWA windows...");const n=yield this.tryFocusExistingPWA(e.studentEmail,e.source);if(n.success){console.log("[EmailLink]  FOCUS-FIRST SUCCESS: Found and focused existing PWA window"),e.token&&this.notifyPWAOfNewAssignment(e),this.showSuccessMessage(" Opened in existing app window");return}else console.log("[EmailLink]  FOCUS-FIRST: No existing PWA windows found:",n.reason)}else console.log("[EmailLink]  Service Worker not ready, skipping focus attempt");if(e.target==="dashboard"){console.log("[EmailLink]  Direct dashboard redirect for seamless UX");const n=this.buildDashboardURL(oe(B({},e),{mode:"pwa"}));console.log("[EmailLink]  Redirecting directly to dashboard:",n),window.location.href=n}else{console.log("[EmailLink]  Using launcher.html bridge for assignment authentication transfer");const n=this.buildLauncherURL(e);console.log("[EmailLink]  Redirecting to launcher bridge:",n),window.location.href=n}})}handleBrowserLink(e){return te(this,null,function*(){console.log("[EmailLink]  Handling Browser link:",e);const n=this.buildDashboardURL(oe(B({},e),{mode:"browser"}));console.log("[EmailLink]  Redirecting to browser-only mode:",n),window.location.href=n})}handleInstallLink(e){return te(this,null,function*(){console.log("[EmailLink]  Handling Install link:",e);const n=this.buildDashboardURL(oe(B({},e),{install:"guide",mode:"browser"}));console.log("[EmailLink]  Opening install guide:",n),window.open(n,"_blank")})}notifyPWAOfNewAssignment(e){var n;console.log("[EmailLink]  Notifying focused PWA about new assignment:",e),this.assignmentChannel&&this.assignmentChannel.postMessage({type:"ASSIGNMENT_AVAILABLE",studentEmail:e.studentEmail,token:e.token,source:e.source||"email",timestamp:Date.now()}),(n=navigator.serviceWorker)!=null&&n.controller&&navigator.serviceWorker.controller.postMessage({type:"NEW_ASSIGNMENT_NOTIFICATION",studentEmail:e.studentEmail,token:e.token,source:e.source||"email",timestamp:Date.now()})}tryFocusExistingPWA(e,n="email"){return te(this,null,function*(){return new Promise(r=>{var s;const i=setTimeout(()=>{r({success:!1,reason:"timeout"})},3e3),o=a=>{var l;((l=a.data)==null?void 0:l.type)==="PWA_WINDOW_FOCUSED"&&(clearTimeout(i),navigator.serviceWorker.removeEventListener("message",o),console.log("[EmailLink]  Service Worker response:",a.data),r({success:a.data.success,reason:a.data.reason}))};navigator.serviceWorker.addEventListener("message",o),(s=navigator.serviceWorker.controller)==null||s.postMessage({type:"CHECK_PWA_WINDOWS",studentEmail:e,source:n,timestamp:Date.now()})})})}attemptWindowClose(){if(!this.shouldCloseCurrentWindow()){console.log("[EmailLink]  Skipping window close - already in PWA context");return}setTimeout(()=>{try{console.log("[EmailLink]  Attempting to close email link window..."),window.close(),setTimeout(()=>{window.closed?console.log("[EmailLink]  Email link window closed successfully"):(console.warn("[EmailLink]  Window close blocked by COOP policy - showing user hint"),this.showCloseHint())},500)}catch(e){console.warn("[EmailLink]  Unable to close window due to COOP/CORB policy:",e),this.showCloseHint()}},1e3)}showSuccessMessage(e){const n=document.createElement("div");n.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background: #48BB78;
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      font-family: system-ui, sans-serif;
      font-size: 14px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      z-index: 10000;
      max-width: 300px;
    `,n.innerHTML=`
      <div style="font-weight: bold;">${e}</div>
      <div style="font-size: 12px; margin-top: 4px; opacity: 0.9;">You may safely close this tab.</div>
    `,document.body.appendChild(n),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n)},5e3)}showCloseHint(){const e=document.createElement("div");e.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background: #4299E1;
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      font-family: system-ui, sans-serif;
      font-size: 14px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      z-index: 10000;
      max-width: 300px;
    `,e.innerHTML=`
      <div style="font-weight: bold; margin-bottom: 4px;"> App Launched!</div>
      <div>You may safely close this tab.</div>
    `,document.body.appendChild(e),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},8e3),console.log('[EmailLink]  User hint displayed: "You may safely close this tab"')}checkPWAInstalled(){return te(this,null,function*(){console.log("[EmailLink]  Starting comprehensive PWA installation check...");const e=[];let n="low";if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0||document.referrer.includes("android-app://"))return console.log("[EmailLink]  PWA detected: Currently in standalone mode"),{isInstalled:!0,confidence:"high",reasons:["Currently running in standalone mode"]};const i=/iphone|ipad|ipod/.test(window.navigator.userAgent.toLowerCase());if(i&&window.navigator.standalone===!0)return console.log("[EmailLink]  PWA detected: iOS standalone mode"),{isInstalled:!0,confidence:"high",reasons:["iOS standalone mode detected"]};const o=navigator.userAgent.toLowerCase(),s=o.includes("chrome")&&!o.includes("edg"),a=o.includes("edg"),l=o.includes("safari")&&!o.includes("chrome"),c=o.includes("firefox"),u=/android|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(o);let d=0;const f={serviceWorker:!1,manifest:!1,https:!1,installedApps:!1,displayMode:!1};if((window.location.protocol==="https:"||window.location.hostname==="localhost")&&(f.https=!0,d++,e.push("HTTPS/localhost detected")),"serviceWorker"in navigator)try{const v=yield navigator.serviceWorker.getRegistrations();v.length>0&&(f.serviceWorker=!0,d++,e.push(`Service Worker registered (${v.length} registrations)`))}catch(v){console.warn("[EmailLink]  Service worker check failed:",v),e.push("Service Worker check failed")}const p=document.querySelector('link[rel="manifest"]');if(p&&(f.manifest=!0,d++,e.push("Manifest linked")),"getInstalledRelatedApps"in navigator)try{const v=yield navigator.getInstalledRelatedApps();if(console.log("[EmailLink]  getInstalledRelatedApps result:",v),v.length>0)return f.installedApps=!0,d+=3,n="high",e.push(`Related apps found (${v.length})`),console.log("[EmailLink]  PWA detected via getInstalledRelatedApps"),{isInstalled:!0,confidence:"high",reasons:e};e.push("No related apps found (may indicate uninstalled or cleared data)")}catch(v){console.warn("[EmailLink]  getInstalledRelatedApps check failed:",v),e.push("getInstalledRelatedApps check failed")}if(p)try{const m=yield(yield fetch(p.href)).json();(m.display==="standalone"||m.display==="fullscreen")&&(f.displayMode=!0,d++,e.push("Manifest has standalone/fullscreen display"))}catch(v){console.warn("[EmailLink]  Manifest fetch failed:",v),e.push("Manifest fetch failed")}d>=4&&f.serviceWorker&&f.manifest?n="medium":d>=2&&(n="low");let b=!1;return i||l?f.manifest&&f.https?(b=!0,n="medium",e.push("iOS/Safari detected - assuming PWA available (graceful fallback)"),console.log("[EmailLink]  iOS/Safari PWA assumed available - will attempt PWA launch")):(b=d>=2,e.push("iOS/Safari detected - using lenient detection criteria")):b=d>=3&&f.serviceWorker&&f.manifest,console.log("[EmailLink]  PWA detection results:",{pwaScore:d,confidence:n,indicators:f,reasons:e,userAgent:{isChrome:s,isEdge:a,isSafari:l,isFirefox:c,isMobile:u}}),console.log(`[EmailLink] ${b?"":""} PWA installation status: ${b?"INSTALLED":"NOT INSTALLED"} (score: ${d}/7, confidence: ${n})`),{isInstalled:b,confidence:n,reasons:e}})}buildLauncherURL(e){const n=window.location.origin,r=new URL("/launcher.html",n);if(e.target==="assignment"&&e.token)r.searchParams.set("target",encodeURIComponent(`/play?token=${e.token}&pwa=true&pwa_type=game&from=launcher&emailAccess=true`));else{let i="/student";const o=new URLSearchParams;e.studentEmail&&o.set("studentEmail",e.studentEmail),e.source&&o.set("source",e.source),o.set("pwa","true"),o.set("from","email"),o.set("emailAccess","true"),o.toString()&&(i+="?"+o.toString()),r.searchParams.set("target",encodeURIComponent(i))}return r.searchParams.set("pwa","true"),console.log("[EmailLink]  Built launcher URL:",r.toString()),r.toString()}buildDashboardURL(e){const n=window.location.origin,r="/student",i=new URL(r,n);return e.studentEmail&&i.searchParams.set("studentEmail",e.studentEmail),e.source&&i.searchParams.set("source",e.source),e.mode==="pwa"?(i.searchParams.set("pwa","true"),i.searchParams.set("from","email"),i.searchParams.set("emailAccess","true")):e.mode==="browser"?(i.searchParams.set("forceBrowser","true"),i.searchParams.set("from","email")):e.mode==="install"&&(i.searchParams.set("forceBrowser","true"),i.searchParams.set("from","email"),i.searchParams.set("showInstall","true")),i.toString()}notifyAssignmentAvailable(e){this.assignmentChannel&&(this.assignmentChannel.postMessage({type:"ASSIGNMENT_AVAILABLE",source:e,timestamp:Date.now()}),console.log("[EmailLink]  Assignment notification sent via BroadcastChannel"))}shouldCloseCurrentWindow(){return!(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0||window.location.pathname.includes("/student")||window.location.pathname.includes("/play"))}destroy(){this.assignmentChannel&&(this.assignmentChannel.close(),this.assignmentChannel=null)}};oo(lp,"instance");let eO=lp;const xR=eO.getInstance(),Yst=()=>{console.log(" EMERGENCY: EmailLinkRouter IS MOUNTING - COMPONENT IS WORKING! ");const[t]=fh(),[e,n]=A.useState("processing"),[r,i]=A.useState(""),[o,s]=A.useState([]),[a,l]=A.useState(null),[c,u]=A.useState("");E5({enabled:!0,studentEmail:t.get("studentEmail")||"",source:"email_link_router",onDuplicateDetected:v=>{console.log("[EmailLinkRouter]  PWA duplicate action:",v),v==="focused_existing"&&i("Opening existing app window...")}});const d=(v,m)=>{console.log(`[EmailLinkRouter]  Starting auto-close in ${v} seconds: ${m}`),u(m),l(v);const g=setInterval(()=>{l(x=>{if(x===null||x<=1){clearInterval(g),console.log("[EmailLinkRouter]  Auto-closing window now");try{window.close(),setTimeout(()=>{window.closed||(console.log("[EmailLinkRouter]  window.close() failed, trying history.back()"),window.history.back())},500),setTimeout(()=>{window.closed||(console.log("[EmailLinkRouter]  history.back() failed, redirecting to close page"),window.location.href="about:blank")},1e3)}catch(w){console.error("[EmailLinkRouter]  Auto-close failed:",w)}return null}return x-1})},1e3);return g},f=()=>{console.log("[EmailLinkRouter]  User cancelled auto-close"),l(null),u("")};A.useEffect(()=>{te(rt,null,function*(){try{console.log("[EmailLinkRouter]  EmailLinkRouter is executing!"),console.log("[EmailLinkRouter]  Current URL:",window.location.href),console.log("[EmailLinkRouter]  All URL parameters:",Object.fromEntries(t.entries()));const m=t.get("type")||t.get("mode"),g=t.get("target"),x=t.get("token"),w=t.get("studentEmail"),S=t.get("source")||"email";let D=g;D||(D=x?"assignment":"dashboard");const k=[`Type: ${m} (from ${t.get("type")?"type":"mode"} parameter)`,`Target: ${D} ${g?"":"(auto-detected)"}`,`Token: ${x?"Present":"Missing"}`,`Student Email: ${w||"Not specified"}`,`Source: ${S}`,`URL: ${window.location.href}`];if(s(k),!m)throw new Error("Missing type parameter (pwa/browser/install) - check email template");const P=B({studentEmail:w||void 0,source:S,mode:m,target:D},x&&{token:x});switch(console.log("[EmailLinkRouter] Processing email link:",P),console.log("[EmailLinkRouter]  About to process type:",m),i(`Processing ${m} link for ${D}...`),m){case"pwa":console.log("[EmailLinkRouter]  Processing PWA link..."),console.log("[EmailLinkRouter]  About to call handlePWALink..."),yield xR.handlePWALink(P),console.log("[EmailLinkRouter]  handlePWALink completed - this should not show if redirect works"),n("success"),i("Opening PWA or redirecting..."),setTimeout(()=>{if(e==="success"){console.log("[EmailLinkRouter]  EMERGENCY FALLBACK: Still here, forcing redirect");const M=`/student?pwa=true&from=email${w?`&studentEmail=${w}`:""}${S?`&source=${S}`:""}`;console.log("[EmailLinkRouter]  Emergency fallback URL:",M),window.location.href=M}},2e3),setTimeout(()=>{d(3,"PWA link processed - cleaning up")},5e3);break;case"browser":console.log("[EmailLinkRouter]  Processing Browser link..."),yield xR.handleBrowserLink(P),n("success"),i("Opening in browser..."),setTimeout(()=>{d(2,"Browser link opened successfully")},1e3);break;case"install":console.log("[EmailLinkRouter]  Processing Install link..."),yield xR.handleInstallLink(P),n("success"),i("Opening installation guide..."),setTimeout(()=>{d(3,"Installation guide opened successfully")},1e3);break;default:throw new Error(`Unknown type: ${m}`)}}catch(m){console.error("[EmailLinkRouter] Error handling email link:",m),n("error"),i(m instanceof Error?m.message:"Unknown error occurred"),setTimeout(()=>{d(10,"Error occurred - auto-closing for cleanup")},2e3)}})},[t]);const p=()=>{n("processing"),i("Retrying..."),window.location.reload()},b=()=>{const v=t.get("studentEmail"),m=v?`/student?studentEmail=${v}&source=email_fallback`:"/student?source=email_fallback";window.location.href=m};return h.jsx(yt,{minH:"100vh",bg:"gray.50",display:"flex",alignItems:"center",justifyContent:"center",p:4,children:h.jsx(yt,{bg:"white",p:8,borderRadius:"lg",boxShadow:"lg",maxW:"md",w:"full",textAlign:"center",children:h.jsxs($t,{spacing:6,children:[h.jsxs($t,{spacing:2,children:[h.jsx(dt,{fontSize:"2xl",fontWeight:"bold",color:"blue.600",children:" Processing Email Link"}),h.jsx(dt,{color:"gray.600",children:"LuminateLearn Assignment Access"})]}),e==="processing"&&h.jsxs($t,{spacing:4,children:[h.jsx(Oa,{size:"lg",color:"blue.500"}),h.jsx(dt,{color:"gray.700",children:r}),h.jsx(dt,{fontSize:"sm",color:"gray.500",children:"This may take a few seconds..."})]}),e==="success"&&h.jsxs($t,{spacing:4,children:[h.jsxs(_i,{status:"success",borderRadius:"md",children:[h.jsx(Si,{}),h.jsxs(yt,{children:[h.jsx(dt,{fontWeight:"bold",children:"Success!"}),h.jsx(dt,{children:r})]})]}),a!==null&&h.jsx(yt,{bg:"blue.50",p:3,borderRadius:"md",border:"1px solid",borderColor:"blue.200",children:h.jsxs($t,{spacing:2,children:[h.jsxs(dt,{fontSize:"sm",color:"blue.700",textAlign:"center",children:[h.jsxs("strong",{children:[" Auto-closing in ",a," second",a!==1?"s":""]}),h.jsx("br",{}),h.jsx(dt,{fontSize:"xs",color:"blue.600",mt:1,children:c})]}),h.jsx(hn,{size:"xs",variant:"outline",colorScheme:"blue",onClick:f,children:" Keep Window Open"})]})})]}),e==="error"&&h.jsxs($t,{spacing:4,children:[h.jsxs(_i,{status:"error",borderRadius:"md",children:[h.jsx(Si,{}),h.jsxs(yt,{textAlign:"left",children:[h.jsx(dt,{fontWeight:"bold",children:"Something went wrong"}),h.jsx(dt,{children:r})]})]}),a!==null&&h.jsx(yt,{bg:"orange.50",p:3,borderRadius:"md",border:"1px solid",borderColor:"orange.200",children:h.jsxs($t,{spacing:2,children:[h.jsxs(dt,{fontSize:"sm",color:"orange.700",textAlign:"center",children:[h.jsxs("strong",{children:[" Auto-closing in ",a," second",a!==1?"s":""]}),h.jsx("br",{}),h.jsx(dt,{fontSize:"xs",color:"orange.600",mt:1,children:c})]}),h.jsx(hn,{size:"xs",variant:"outline",colorScheme:"orange",onClick:f,children:" Keep Window Open"})]})}),h.jsxs($t,{spacing:3,children:[h.jsx(hn,{colorScheme:"blue",onClick:p,children:" Try Again"}),h.jsx(hn,{variant:"outline",onClick:b,children:" Go to Student Dashboard"})]})]}),!1,h.jsx(yt,{bg:"blue.50",p:4,borderRadius:"md",w:"full",children:h.jsxs(dt,{fontSize:"sm",color:"blue.700",children:[h.jsx("strong",{children:" Having trouble?"}),h.jsx("br",{}),`This page handles email links for assignments. If you're seeing this for more than a few seconds, try using the "Go to Student Dashboard" button above.`]})})]})})})},Xst=()=>{const[t]=fh(),e=Fr(),{currentUser:n}=Pr(),r=ro(),[i,o]=A.useState(""),[s,a]=A.useState(""),[l,c]=A.useState(""),[u,d]=A.useState(!1),[f,p]=A.useState(!1),[b,v]=A.useState(!1),[m,g]=A.useState(!0),[x,w]=A.useState(""),[S,D]=A.useState(!1);A.useEffect(()=>{te(rt,null,function*(){try{const M=t.get("email"),T=t.get("mode");if(!M||T!=="passwordSetup"){w("Invalid password setup link"),g(!1);return}o(M);const _=window.location.href;j3(Jr,_)?(D(!0),w("")):w("Invalid or expired password setup link")}catch(M){console.error("Error verifying email link:",M),w("Failed to verify password setup link")}finally{g(!1)}})},[t]);const k=P=>te(rt,null,function*(){if(P.preventDefault(),s!==l){w("Passwords do not match");return}if(s.length<6){w("Password must be at least 6 characters long");return}v(!0),w("");try{const M=window.location.href,T=yield U3(Jr,i,M);yield z3(T.user,s),r({title:"Password Set Successfully!",description:"You can now sign in with your email and password.",status:"success",duration:5e3,isClosable:!0}),e("/student")}catch(M){console.error("Error setting password:",M);let T="Failed to set password";M.code==="auth/invalid-action-code"?T="This password setup link has expired or is invalid":M.code==="auth/weak-password"?T="Password is too weak. Please choose a stronger password.":M.message&&(T=M.message),w(T)}finally{v(!1)}});return m?h.jsx(yt,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:h.jsxs($t,{spacing:4,children:[h.jsx(Oa,{size:"xl"}),h.jsx(dt,{children:"Verifying password setup link..."})]})}):S?h.jsx(yt,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",p:4,children:h.jsx(mc,{maxW:"md",w:"full",children:h.jsx(pc,{children:h.jsxs($t,{spacing:6,children:[h.jsx(Br,{size:"lg",textAlign:"center",children:"Set Your Password"}),h.jsx(dt,{textAlign:"center",color:"gray.600",children:"Welcome to LuminateLearn! Please set a password for your account."}),h.jsx(yt,{w:"full",p:3,bg:"blue.50",borderRadius:"md",children:h.jsxs(dt,{fontSize:"sm",color:"blue.800",children:[h.jsx("strong",{children:"Email:"})," ",i]})}),x&&h.jsxs(_i,{status:"error",children:[h.jsx(Si,{}),x]}),h.jsx("form",{onSubmit:k,style:{width:"100%"},children:h.jsxs($t,{spacing:4,children:[h.jsxs(Ir,{isRequired:!0,children:[h.jsx(fr,{children:"New Password"}),h.jsxs(sv,{children:[h.jsx(si,{type:u?"text":"password",value:s,onChange:P=>a(P.target.value),placeholder:"Enter your new password",minLength:6}),h.jsx(Mp,{children:h.jsx(Lr,{"aria-label":u?"Hide password":"Show password",icon:u?h.jsx(Dx,{}):h.jsx(Px,{}),onClick:()=>d(!u),variant:"ghost",size:"sm"})})]}),h.jsx(SC,{children:"Password must be at least 6 characters long"})]}),h.jsxs(Ir,{isRequired:!0,children:[h.jsx(fr,{children:"Confirm Password"}),h.jsxs(sv,{children:[h.jsx(si,{type:f?"text":"password",value:l,onChange:P=>c(P.target.value),placeholder:"Confirm your new password",minLength:6}),h.jsx(Mp,{children:h.jsx(Lr,{"aria-label":f?"Hide password":"Show password",icon:f?h.jsx(Dx,{}):h.jsx(Px,{}),onClick:()=>p(!f),variant:"ghost",size:"sm"})})]})]}),h.jsx(hn,{type:"submit",colorScheme:"blue",size:"lg",width:"full",isLoading:b,loadingText:"Setting Password...",children:"Set Password"})]})}),h.jsx(dt,{fontSize:"sm",color:"gray.500",textAlign:"center",children:"After setting your password, you'll be able to sign in with your email and password."})]})})})}):h.jsx(yt,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",p:4,children:h.jsx(mc,{maxW:"md",w:"full",children:h.jsx(pc,{children:h.jsxs($t,{spacing:4,children:[h.jsx(Br,{size:"lg",textAlign:"center",children:"Invalid Link"}),h.jsxs(_i,{status:"error",children:[h.jsx(Si,{}),x||"This password setup link is invalid or has expired."]}),h.jsx(dt,{textAlign:"center",children:"Please contact your teacher for a new password setup link."}),h.jsx(hn,{onClick:()=>e("/login"),colorScheme:"blue",children:"Go to Login"})]})})})})},Qst=()=>{const t=Fr(),{currentUser:e}=Pr(),n=ro(),[r,i]=A.useState(""),[o,s]=A.useState(""),[a,l]=A.useState(""),[c,u]=A.useState(!1),[d,f]=A.useState(!1),[p,b]=A.useState(!1),[v,m]=A.useState(!1),[g,x]=A.useState(""),[w,S]=A.useState(!1);A.useEffect(()=>{if(!e){t("/login");return}te(rt,null,function*(){try{const P=an(xt,"users",e.uid),M=yield oi(P);M.exists()&&M.data().hasTemporaryPassword?S(!0):t("/student")}catch(P){console.error("Error checking temporary password:",P),x("Failed to verify account status")}})},[e,t]);const D=k=>te(rt,null,function*(){if(k.preventDefault(),o!==a){x("New passwords do not match");return}if(o.length<6){x("New password must be at least 6 characters long");return}if(o===r){x("New password must be different from your current password");return}m(!0),x("");try{const P=hh.credential(e.email,r);yield LOe(e,P),yield z3(e,o);const M=an(xt,"users",e.uid);yield Ns(M,{hasTemporaryPassword:!1,temporaryPasswordSet:!1,passwordSetupComplete:!0,passwordSetupCompletedAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),n({title:"Password Updated Successfully!",description:"You can now use your new password to sign in, or use Google Sign-In.",status:"success",duration:5e3,isClosable:!0}),t("/student")}catch(P){console.error("Error updating password:",P);let M="Failed to update password";P.code==="auth/weak-password"?M="Password is too weak. Please choose a stronger password.":P.code==="auth/wrong-password"?M="Current password is incorrect. Please check your temporary password from the email.":P.code==="auth/requires-recent-login"?M="Please sign out and sign back in, then try changing your password again.":P.code==="auth/invalid-credential"?M="Current password is incorrect. Please check your temporary password from the email.":P.message&&(M=P.message),x(M)}finally{m(!1)}});return e?h.jsx(yt,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",p:4,children:h.jsx(mc,{maxW:"md",w:"full",children:h.jsx(pc,{children:h.jsxs($t,{spacing:6,children:[h.jsx(Br,{size:"lg",textAlign:"center",children:"Update Your Password"}),h.jsx(dt,{textAlign:"center",color:"gray.600",children:"Welcome to LuminateLearn! Please create a new password for your account."}),h.jsx(yt,{w:"full",p:3,bg:"blue.50",borderRadius:"md",children:h.jsxs(dt,{fontSize:"sm",color:"blue.800",children:[h.jsx("strong",{children:"Account:"})," ",e.email]})}),g&&h.jsxs(_i,{status:"error",children:[h.jsx(Si,{}),g]}),h.jsx("form",{onSubmit:D,style:{width:"100%"},children:h.jsxs($t,{spacing:4,children:[h.jsxs(Ir,{isRequired:!0,children:[h.jsx(fr,{children:"Current Password"}),h.jsxs(sv,{children:[h.jsx(si,{type:c?"text":"password",value:r,onChange:k=>i(k.target.value),placeholder:"Enter your current (temporary) password"}),h.jsx(Mp,{children:h.jsx(Lr,{"aria-label":c?"Hide password":"Show password",icon:c?h.jsx(Dx,{}):h.jsx(Px,{}),onClick:()=>u(!c),variant:"ghost",size:"sm"})})]}),h.jsx(SC,{children:"This is the temporary password from your email"})]}),h.jsxs(Ir,{isRequired:!0,children:[h.jsx(fr,{children:"New Password"}),h.jsxs(sv,{children:[h.jsx(si,{type:d?"text":"password",value:o,onChange:k=>s(k.target.value),placeholder:"Enter your new password",minLength:6}),h.jsx(Mp,{children:h.jsx(Lr,{"aria-label":d?"Hide password":"Show password",icon:d?h.jsx(Dx,{}):h.jsx(Px,{}),onClick:()=>f(!d),variant:"ghost",size:"sm"})})]}),h.jsx(SC,{children:"Password must be at least 6 characters long"})]}),h.jsxs(Ir,{isRequired:!0,children:[h.jsx(fr,{children:"Confirm New Password"}),h.jsxs(sv,{children:[h.jsx(si,{type:p?"text":"password",value:a,onChange:k=>l(k.target.value),placeholder:"Confirm your new password",minLength:6}),h.jsx(Mp,{children:h.jsx(Lr,{"aria-label":p?"Hide password":"Show password",icon:p?h.jsx(Dx,{}):h.jsx(Px,{}),onClick:()=>b(!p),variant:"ghost",size:"sm"})})]})]}),h.jsx(hn,{type:"submit",colorScheme:"blue",size:"lg",width:"full",isLoading:v,loadingText:"Updating Password...",children:"Update Password"})]})}),h.jsx(dt,{fontSize:"sm",color:"gray.500",textAlign:"center",children:"After updating your password, you'll be able to sign in with your email and new password, or you can use Google Sign-In."})]})})})}):null},ba=({children:t})=>(Fre(),A.useEffect(()=>{const e=window.matchMedia("(display-mode: standalone)").matches,n=window.navigator.standalone===!0,r=window.location.search.includes("pwa=true"),i=window.location.search.includes("emailAccess=true"),o=window.location.search.includes("from=email"),s=window.location.search.includes("forceBrowser=true"),a=window.location.search.includes("browserOnly=true"),l=window.location.search.includes("noPWA=true"),c=window.location.search.includes("redirector=true"),u=window.location.pathname==="/student",d=window.location.pathname==="/teacher",f=window.location.pathname==="/email-link",p=window.location.pathname==="/login"&&(i||o);if(!s&&!a&&!l&&!c&&(e||n||r||u||d||f||p)){window.name="standalone-pwa",localStorage.setItem("pwa_origin","device_icon");const m=g=>{var x;if(((x=g.data)==null?void 0:x.type)==="FORCE_CLOSE_LAUNCHER"){const{reason:w,canAutoClose:S,newWindowInfo:D}=g.data,M=localStorage.getItem("pwa_origin")==="device_icon"||window.name==="standalone-pwa";if(w==="focus_blocked_by_security"&&S)if(M)try{window.close(),setTimeout(()=>{alert(`Please close this tab manually. A newer assignment window has been opened.${D?` New: ${new URL(D.url).pathname}`:""}`)},100)}catch(T){alert(`Please close this tab manually. A newer assignment window has been opened.${D?` New: ${new URL(D.url).pathname}`:""}`)}else window.close();else if(M){const T=D?` A newer window has been opened: ${new URL(D.url).pathname}`:" A newer game window has been launched.";alert(`Please close this tab manually.${T}`)}else window.close()}};if("serviceWorker"in navigator)return navigator.serviceWorker.addEventListener("message",m),()=>{navigator.serviceWorker.removeEventListener("message",m)}}},[]),h.jsxs(h.Fragment,{children:[h.jsx(wBe,{}),t]})),Zst=({params:t})=>t.token?sI(`/play?token=${t.token}`):sI("/");function zi(){const t=_Q(),n=hu().token,r=Fr(),o=(()=>{var s;try{if(jv(t)){if(t.status===404&&t.data&&typeof t.data=="string"&&t.data.includes("No route matches URL")){const a=t.data.match(/URL "([^"]+)"/),l=a?a[1]:"unknown path";console.log(`Route error: No route matches URL "${l}"`);let c="";return l.startsWith("/play/")?c=l.replace("/play/",""):l.startsWith("/assignment/")&&(c=l.replace("/assignment/","")),{message:`Page not found: ${l}`,details:`The requested page does not exist. ${c?`Token: ${c}`:""}`,isRouteNotFound:!0,extractedToken:c}}return{message:`${t.status} ${t.statusText}`,details:((s=t.data)==null?void 0:s.message)||"No additional details available",isRouteNotFound:t.status===404}}return t instanceof Error?{message:t.message||"Unknown error",details:t.stack||"No stack trace available",isRouteNotFound:t.message.includes("No route matches URL")}:{message:"Unknown error type",details:String(t)||JSON.stringify(t,null,2),isRouteNotFound:!1}}catch(a){return{message:"Error while processing the error details",details:String(a),isRouteNotFound:!1}}})();return console.error("Route error:",o.message,t),A.useEffect(()=>{try{const s=o.message,a=sessionStorage.getItem("route_token");if(o.isRouteNotFound&&a){console.log(`Detected direct navigation with stored token: ${a}`),sessionStorage.removeItem("route_token"),sessionStorage.removeItem("route_path");const u=setTimeout(()=>{r(`/play?token=${a}`)},100);return()=>clearTimeout(u)}if((s.includes("handled by React Router default ErrorBoundary")||s.includes("Minified React error #419")||s.includes("Minified React error #421"))&&!sessionStorage.getItem("errorRefreshed")){console.log("Detected React Router error, refreshing page..."),sessionStorage.setItem("errorRefreshed","true"),window.location.reload();return}if(o.isRouteNotFound&&o.extractedToken){console.log(`Attempting to redirect with token: ${o.extractedToken}`);const u=setTimeout(()=>{r(`/play?token=${o.extractedToken}`)},100);return()=>clearTimeout(u)}const l=window.location.pathname,c=sessionStorage.getItem("errorPath");c&&c!==l&&sessionStorage.removeItem("errorRefreshed"),sessionStorage.setItem("errorPath",l)}catch(s){console.error("Error in ErrorBoundary useEffect:",s)}},[o.message,r,o.isRouteNotFound,o.extractedToken]),o.isRouteNotFound?h.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",padding:"40px 20px",textAlign:"center",fontFamily:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[h.jsx("h1",{style:{fontSize:"24px",marginBottom:"20px",color:"#333"},children:"Page Not Found"}),h.jsxs("p",{style:{fontSize:"16px",color:"#666",marginBottom:"30px"},children:["The page you're looking for doesn't exist.",o.extractedToken&&" We're trying to redirect you to the correct page..."]}),h.jsx("a",{href:"/",style:{display:"inline-block",padding:"10px 20px",background:"#2563eb",color:"white",textDecoration:"none",borderRadius:"4px",fontWeight:"bold"},children:"Go to Home"}),!1]}):h.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",padding:"40px 20px",textAlign:"center",fontFamily:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[h.jsx("h1",{style:{fontSize:"24px",marginBottom:"20px",color:"#333"},children:"Game not found"}),h.jsx("p",{style:{fontSize:"16px",color:"#666",marginBottom:"30px"},children:n?"We couldn't find this assignment. It may have been deleted or the link is incorrect.":"The game or assignment you're looking for doesn't exist or may have been deleted."}),h.jsx("a",{href:"/",style:{display:"inline-block",padding:"10px 20px",background:"#2563eb",color:"white",textDecoration:"none",borderRadius:"4px",fontWeight:"bold"},children:"Go to Home"}),!1]})}const Jst=Xke([{path:"/",element:h.jsx(ba,{children:h.jsx(gje,{})}),errorElement:h.jsx(zi,{})},{path:"/login",element:h.jsx(ba,{children:h.jsx(Eje,{})}),errorElement:h.jsx(zi,{})},{path:"/login-complete",element:h.jsx(ba,{children:h.jsx(Cje,{})}),errorElement:h.jsx(zi,{})},{path:"/feedback",element:h.jsx(ba,{children:h.jsx(s6e,{})}),errorElement:h.jsx(zi,{})},{path:"/forgot-password",element:h.jsx(ba,{children:h.jsx(Ije,{})}),errorElement:h.jsx(zi,{})},{path:"/password-setup",element:h.jsx(ba,{children:h.jsx(Xst,{})}),errorElement:h.jsx(zi,{})},{path:"/password-change",element:h.jsx(ba,{children:h.jsx(Qst,{})}),errorElement:h.jsx(zi,{})},{path:"/game/:configId",element:h.jsx(ba,{children:h.jsx(gZe,{})}),errorElement:h.jsx(zi,{})},{path:"/teacher",element:h.jsx(ba,{children:h.jsx(bet,{})}),errorElement:h.jsx(zi,{})},{path:"/student",element:h.jsx(ba,{children:h.jsx(_et,{})}),errorElement:h.jsx(zi,{})},{path:"/link",element:h.jsx(Gst,{}),errorElement:h.jsx(zi,{})},{path:"/play",element:h.jsx(Dst,{}),errorElement:h.jsx(zi,{})},{path:"/play/:token",loader:({params:t})=>sI(`/play?token=${t.token}`),errorElement:h.jsx(zi,{})},{path:"/assignment/:token",loader:Zst,errorElement:h.jsx(zi,{})},{path:"/assignment",element:h.jsx(l8,{to:"/",replace:!0}),errorElement:h.jsx(zi,{})},{path:"/configure",element:h.jsx(ba,{children:h.jsx(Eet,{})}),errorElement:h.jsx(zi,{}),children:[{path:"whack-a-mole",element:h.jsx(M7,{})},{path:"whack-a-mole/:templateId",element:h.jsx(M7,{})},{path:"sort-categories-egg",element:h.jsx(P7,{})},{path:"sort-categories-egg/:templateId",element:h.jsx(P7,{})},{path:"spinner-wheel",element:h.jsx(D7,{})},{path:"spinner-wheel/:templateId",element:h.jsx(D7,{})},{path:"anagram",element:h.jsx(R7,{})},{path:"anagram/:templateId",element:h.jsx(R7,{})},{path:"sentence-sense",element:h.jsx(k7,{})},{path:"sentence-sense/:templateId",element:h.jsx(k7,{})},{path:"place-value-showdown",element:h.jsx(I7,{})},{path:"place-value-showdown/:templateId",element:h.jsx(I7,{})},{path:"word-volley",element:h.jsx(F7,{})},{path:"word-volley/:templateId",element:h.jsx(F7,{})}]},{path:"/admin",element:h.jsx(ba,{children:h.jsx(kst,{})}),errorElement:h.jsx(zi,{})},{path:"/set-admin",element:h.jsx(ba,{children:h.jsx(Ist,{})}),errorElement:h.jsx(zi,{})},{path:"/smart-route/assignment",element:h.jsx(O7,{}),errorElement:h.jsx(zi,{})},{path:"/smart-route/dashboard",element:h.jsx(O7,{}),errorElement:h.jsx(zi,{})},{path:"/email-link",element:h.jsx(Yst,{}),errorElement:h.jsx(zi,{})},{path:"*",element:h.jsx(l8,{to:"/",replace:!0}),errorElement:h.jsx(zi,{})}]);function eat(){return h.jsx(fBe,{children:h.jsx(pBe,{children:h.jsx(mBe,{children:h.jsxs(vBe,{children:[h.jsx(lIe,{router:Jst}),h.jsx(aee,{})]})})})})}const N7=Vbe({config:{initialColorMode:"light",useSystemColorMode:!1},colors:{primary:{50:"#EBF8FF",100:"#BEE3F8",200:"#90CDF4",300:"#63B3ED",400:"#4299E1",500:"#3182CE",600:"#2B6CB0",700:"#2C5282",800:"#2A4365",900:"#1A365D"}}});bR.createRoot(document.getElementById("root")).render(h.jsxs(Ot.StrictMode,{children:[h.jsx(Xhe,{initialColorMode:N7.config.initialColorMode}),h.jsx(hCe,{theme:N7,children:h.jsx(eat,{})})]}))});export default tat();
//# sourceMappingURL=main-BzRElnW8.js.map
