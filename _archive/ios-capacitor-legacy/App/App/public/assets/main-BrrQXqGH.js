var wce=Object.defineProperty,Sce=Object.defineProperties;var _ce=Object.getOwnPropertyDescriptors;var z1=Object.getOwnPropertySymbols,Ece=Object.getPrototypeOf,c4=Object.prototype.hasOwnProperty,u4=Object.prototype.propertyIsEnumerable,Cce=Reflect.get;var oM=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),Ace=t=>{throw TypeError(t)},Cu=Math.pow,sM=(t,e,n)=>e in t?wce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,j=(t,e)=>{for(var n in e||(e={}))c4.call(e,n)&&sM(t,n,e[n]);if(z1)for(var n of z1(e))u4.call(e,n)&&sM(t,n,e[n]);return t},se=(t,e)=>Sce(t,_ce(e));var Dt=(t,e)=>{var n={};for(var r in t)c4.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&z1)for(var r of z1(t))e.indexOf(r)<0&&u4.call(t,r)&&(n[r]=t[r]);return n};var Tce=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var go=(t,e,n)=>sM(t,typeof e!="symbol"?e+"":e,n);var kh=(t,e,n)=>Cce(Ece(t),n,e);var te=(t,e,n)=>new Promise((r,i)=>{var o=l=>{try{a(n.next(l))}catch(c){i(c)}},s=l=>{try{a(n.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((n=n.apply(t,e)).next())}),Mce=function(t,e){this[0]=t,this[1]=e};var aM=t=>{var e=t[oM("asyncIterator")],n=!1,r,i={};return e==null?(e=t[oM("iterator")](),r=o=>i[o]=s=>e[o](s)):(e=e.call(t),r=o=>i[o]=s=>{if(n){if(n=!1,o==="throw")throw s;return s}return n=!0,{done:!1,value:new Mce(new Promise(a=>{var l=e[o](s);l instanceof Object||Ace("Object expected"),a(l)}),1)}}),i[oM("iterator")]=()=>i,r("next"),"throw"in e?r("throw"):i.throw=o=>{throw o},"return"in e&&r("return"),i};var Mot=Tce(nt=>{function Pce(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Wi=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Ad(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var u7={exports:{}},hA={},d7={exports:{}},fr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ew=Symbol.for("react.element"),Dce=Symbol.for("react.portal"),Rce=Symbol.for("react.fragment"),Ice=Symbol.for("react.strict_mode"),kce=Symbol.for("react.profiler"),Fce=Symbol.for("react.provider"),Oce=Symbol.for("react.context"),Nce=Symbol.for("react.forward_ref"),Lce=Symbol.for("react.suspense"),Bce=Symbol.for("react.memo"),jce=Symbol.for("react.lazy"),d4=Symbol.iterator;function Uce(t){return t===null||typeof t!="object"?null:(t=d4&&t[d4]||t["@@iterator"],typeof t=="function"?t:null)}var f7={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h7=Object.assign,p7={};function t0(t,e,n){this.props=t,this.context=e,this.refs=p7,this.updater=n||f7}t0.prototype.isReactComponent={};t0.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};t0.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function m7(){}m7.prototype=t0.prototype;function FF(t,e,n){this.props=t,this.context=e,this.refs=p7,this.updater=n||f7}var OF=FF.prototype=new m7;OF.constructor=FF;h7(OF,t0.prototype);OF.isPureReactComponent=!0;var f4=Array.isArray,g7=Object.prototype.hasOwnProperty,NF={current:null},v7={key:!0,ref:!0,__self:!0,__source:!0};function y7(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)g7.call(e,r)&&!v7.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ew,type:t,key:o,ref:s,props:i,_owner:NF.current}}function zce(t,e){return{$$typeof:ew,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function LF(t){return typeof t=="object"&&t!==null&&t.$$typeof===ew}function Vce(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var h4=/\/+/g;function lM(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Vce(""+t.key):e.toString(36)}function x_(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case ew:case Dce:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+lM(s,0):r,f4(i)?(n="",t!=null&&(n=t.replace(h4,"$&/")+"/"),x_(i,e,n,"",function(c){return c})):i!=null&&(LF(i)&&(i=zce(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(h4,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",f4(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+lM(o,a);s+=x_(o,e,n,l,i)}else if(l=Uce(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+lM(o,a++),s+=x_(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function V1(t,e,n){if(t==null)return t;var r=[],i=0;return x_(t,r,"","",function(o){return e.call(n,o,i++)}),r}function Wce(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ls={current:null},b_={transition:null},$ce={ReactCurrentDispatcher:Ls,ReactCurrentBatchConfig:b_,ReactCurrentOwner:NF};function x7(){throw Error("act(...) is not supported in production builds of React.")}fr.Children={map:V1,forEach:function(t,e,n){V1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return V1(t,function(){e++}),e},toArray:function(t){return V1(t,function(e){return e})||[]},only:function(t){if(!LF(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fr.Component=t0;fr.Fragment=Rce;fr.Profiler=kce;fr.PureComponent=FF;fr.StrictMode=Ice;fr.Suspense=Lce;fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$ce;fr.act=x7;fr.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=h7({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=NF.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)g7.call(e,l)&&!v7.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ew,type:t.type,key:i,ref:o,props:r,_owner:s}};fr.createContext=function(t){return t={$$typeof:Oce,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Fce,_context:t},t.Consumer=t};fr.createElement=y7;fr.createFactory=function(t){var e=y7.bind(null,t);return e.type=t,e};fr.createRef=function(){return{current:null}};fr.forwardRef=function(t){return{$$typeof:Nce,render:t}};fr.isValidElement=LF;fr.lazy=function(t){return{$$typeof:jce,_payload:{_status:-1,_result:t},_init:Wce}};fr.memo=function(t,e){return{$$typeof:Bce,type:t,compare:e===void 0?null:e}};fr.startTransition=function(t){var e=b_.transition;b_.transition={};try{t()}finally{b_.transition=e}};fr.unstable_act=x7;fr.useCallback=function(t,e){return Ls.current.useCallback(t,e)};fr.useContext=function(t){return Ls.current.useContext(t)};fr.useDebugValue=function(){};fr.useDeferredValue=function(t){return Ls.current.useDeferredValue(t)};fr.useEffect=function(t,e){return Ls.current.useEffect(t,e)};fr.useId=function(){return Ls.current.useId()};fr.useImperativeHandle=function(t,e,n){return Ls.current.useImperativeHandle(t,e,n)};fr.useInsertionEffect=function(t,e){return Ls.current.useInsertionEffect(t,e)};fr.useLayoutEffect=function(t,e){return Ls.current.useLayoutEffect(t,e)};fr.useMemo=function(t,e){return Ls.current.useMemo(t,e)};fr.useReducer=function(t,e,n){return Ls.current.useReducer(t,e,n)};fr.useRef=function(t){return Ls.current.useRef(t)};fr.useState=function(t){return Ls.current.useState(t)};fr.useSyncExternalStore=function(t,e,n){return Ls.current.useSyncExternalStore(t,e,n)};fr.useTransition=function(){return Ls.current.useTransition()};fr.version="18.3.1";d7.exports=fr;var T=d7.exports;const Lt=Ad(T),p4=Pce({__proto__:null,default:Lt},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hce=T,Gce=Symbol.for("react.element"),qce=Symbol.for("react.fragment"),Kce=Object.prototype.hasOwnProperty,Yce=Hce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xce={key:!0,ref:!0,__self:!0,__source:!0};function b7(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Kce.call(e,r)&&!Xce.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Gce,type:t,key:o,ref:s,props:i,_owner:Yce.current}}hA.Fragment=qce;hA.jsx=b7;hA.jsxs=b7;u7.exports=hA;var h=u7.exports,nR={},w7={exports:{}},ja={},S7={exports:{}},_7={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,H){var q=B.length;B.push(H);e:for(;0<q;){var z=q-1>>>1,G=B[z];if(0<i(G,H))B[z]=H,B[q]=G,q=z;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var H=B[0],q=B.pop();if(q!==H){B[0]=q;e:for(var z=0,G=B.length,K=G>>>1;z<K;){var Z=2*(z+1)-1,ee=B[Z],V=Z+1,J=B[V];if(0>i(ee,q))V<G&&0>i(J,ee)?(B[z]=J,B[V]=q,z=V):(B[z]=ee,B[Z]=q,z=Z);else if(V<G&&0>i(J,q))B[z]=J,B[V]=q,z=V;else break e}}return H}function i(B,H){var q=B.sortIndex-H.sortIndex;return q!==0?q:B.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,b=!1,v=!1,m=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(B){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=B)r(c),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(c)}}function S(B){if(v=!1,w(B),!b)if(n(l)!==null)b=!0,U(P);else{var H=n(c);H!==null&&$(S,H.startTime-B)}}function P(B,H){b=!1,v&&(v=!1,g(D),D=-1),p=!0;var q=f;try{for(w(H),d=n(l);d!==null&&(!(d.expirationTime>H)||B&&!A());){var z=d.callback;if(typeof z=="function"){d.callback=null,f=d.priorityLevel;var G=z(d.expirationTime<=H);H=t.unstable_now(),typeof G=="function"?d.callback=G:d===n(l)&&r(l),w(H)}else r(l);d=n(l)}if(d!==null)var K=!0;else{var Z=n(c);Z!==null&&$(S,Z.startTime-H),K=!1}return K}finally{d=null,f=q,p=!1}}var I=!1,M=null,D=-1,E=5,_=-1;function A(){return!(t.unstable_now()-_<E)}function R(){if(M!==null){var B=t.unstable_now();_=B;var H=!0;try{H=M(!0,B)}finally{H?F():(I=!1,M=null)}}else I=!1}var F;if(typeof x=="function")F=function(){x(R)};else if(typeof MessageChannel!="undefined"){var L=new MessageChannel,N=L.port2;L.port1.onmessage=R,F=function(){N.postMessage(null)}}else F=function(){m(R,0)};function U(B){M=B,I||(I=!0,F())}function $(B,H){D=m(function(){B(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){b||p||(b=!0,U(P))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var q=f;f=H;try{return B()}finally{f=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,H){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var q=f;f=B;try{return H()}finally{f=q}},t.unstable_scheduleCallback=function(B,H,q){var z=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?z+q:z):q=z,B){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=q+G,B={id:u++,callback:H,priorityLevel:B,startTime:q,expirationTime:G,sortIndex:-1},q>z?(B.sortIndex=q,e(c,B),n(l)===null&&B===n(c)&&(v?(g(D),D=-1):v=!0,$(S,q-z))):(B.sortIndex=G,e(l,B),b||p||(b=!0,U(P))),B},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(B){var H=f;return function(){var q=f;f=H;try{return B.apply(this,arguments)}finally{f=q}}}})(_7);S7.exports=_7;var Qce=S7.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zce=T,Ia=Qce;function Ut(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var E7=new Set,Ux={};function am(t,e){vv(t,e),vv(t+"Capture",e)}function vv(t,e){for(Ux[t]=e,t=0;t<e.length;t++)E7.add(e[t])}var cd=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),rR=Object.prototype.hasOwnProperty,Jce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m4={},g4={};function eue(t){return rR.call(g4,t)?!0:rR.call(m4,t)?!1:Jce.test(t)?g4[t]=!0:(m4[t]=!0,!1)}function tue(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nue(t,e,n,r){if(e===null||typeof e=="undefined"||tue(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bs(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var qo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qo[t]=new Bs(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qo[e]=new Bs(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qo[t]=new Bs(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qo[t]=new Bs(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qo[t]=new Bs(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qo[t]=new Bs(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qo[t]=new Bs(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qo[t]=new Bs(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qo[t]=new Bs(t,5,!1,t.toLowerCase(),null,!1,!1)});var BF=/[\-:]([a-z])/g;function jF(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(BF,jF);qo[e]=new Bs(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(BF,jF);qo[e]=new Bs(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(BF,jF);qo[e]=new Bs(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qo[t]=new Bs(t,1,!1,t.toLowerCase(),null,!1,!1)});qo.xlinkHref=new Bs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qo[t]=new Bs(t,1,!1,t.toLowerCase(),null,!0,!0)});function UF(t,e,n,r){var i=qo.hasOwnProperty(e)?qo[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nue(e,n,i,r)&&(n=null),r||i===null?eue(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Td=Zce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W1=Symbol.for("react.element"),yg=Symbol.for("react.portal"),xg=Symbol.for("react.fragment"),zF=Symbol.for("react.strict_mode"),iR=Symbol.for("react.profiler"),C7=Symbol.for("react.provider"),A7=Symbol.for("react.context"),VF=Symbol.for("react.forward_ref"),oR=Symbol.for("react.suspense"),sR=Symbol.for("react.suspense_list"),WF=Symbol.for("react.memo"),cf=Symbol.for("react.lazy"),T7=Symbol.for("react.offscreen"),v4=Symbol.iterator;function V0(t){return t===null||typeof t!="object"?null:(t=v4&&t[v4]||t["@@iterator"],typeof t=="function"?t:null)}var ki=Object.assign,cM;function Sy(t){if(cM===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);cM=e&&e[1]||""}return`
`+cM+t}var uM=!1;function dM(t,e){if(!t||uM)return"";uM=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{uM=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Sy(t):""}function rue(t){switch(t.tag){case 5:return Sy(t.type);case 16:return Sy("Lazy");case 13:return Sy("Suspense");case 19:return Sy("SuspenseList");case 0:case 2:case 15:return t=dM(t.type,!1),t;case 11:return t=dM(t.type.render,!1),t;case 1:return t=dM(t.type,!0),t;default:return""}}function aR(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xg:return"Fragment";case yg:return"Portal";case iR:return"Profiler";case zF:return"StrictMode";case oR:return"Suspense";case sR:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case A7:return(t.displayName||"Context")+".Consumer";case C7:return(t._context.displayName||"Context")+".Provider";case VF:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case WF:return e=t.displayName||null,e!==null?e:aR(t.type)||"Memo";case cf:e=t._payload,t=t._init;try{return aR(t(e))}catch(n){}}return null}function iue(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return aR(e);case 8:return e===zF?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yf(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function M7(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function oue(t){var e=M7(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $1(t){t._valueTracker||(t._valueTracker=oue(t))}function P7(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=M7(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _E(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch(e){return t.body}}function lR(t,e){var n=e.checked;return ki({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function y4(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Yf(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function D7(t,e){e=e.checked,e!=null&&UF(t,"checked",e,!1)}function cR(t,e){D7(t,e);var n=Yf(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?uR(t,e.type,n):e.hasOwnProperty("defaultValue")&&uR(t,e.type,Yf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function x4(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function uR(t,e,n){(e!=="number"||_E(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var _y=Array.isArray;function $g(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Yf(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function dR(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ut(91));return ki({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function b4(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ut(92));if(_y(n)){if(1<n.length)throw Error(Ut(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Yf(n)}}function R7(t,e){var n=Yf(e.value),r=Yf(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function w4(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function I7(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fR(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?I7(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var H1,k7=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(H1=H1||document.createElement("div"),H1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=H1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function zx(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sue=["Webkit","ms","Moz","O"];Object.keys(Xy).forEach(function(t){sue.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xy[e]=Xy[t]})});function F7(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xy.hasOwnProperty(t)&&Xy[t]?(""+e).trim():e+"px"}function O7(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=F7(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var aue=ki({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hR(t,e){if(e){if(aue[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ut(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ut(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ut(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ut(62))}}function pR(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mR=null;function $F(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gR=null,Hg=null,Gg=null;function S4(t){if(t=rw(t)){if(typeof gR!="function")throw Error(Ut(280));var e=t.stateNode;e&&(e=yA(e),gR(t.stateNode,t.type,e))}}function N7(t){Hg?Gg?Gg.push(t):Gg=[t]:Hg=t}function L7(){if(Hg){var t=Hg,e=Gg;if(Gg=Hg=null,S4(t),e)for(t=0;t<e.length;t++)S4(e[t])}}function B7(t,e){return t(e)}function j7(){}var fM=!1;function U7(t,e,n){if(fM)return t(e,n);fM=!0;try{return B7(t,e,n)}finally{fM=!1,(Hg!==null||Gg!==null)&&(j7(),L7())}}function Vx(t,e){var n=t.stateNode;if(n===null)return null;var r=yA(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ut(231,e,typeof n));return n}var vR=!1;if(cd)try{var W0={};Object.defineProperty(W0,"passive",{get:function(){vR=!0}}),window.addEventListener("test",W0,W0),window.removeEventListener("test",W0,W0)}catch(t){vR=!1}function lue(t,e,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Qy=!1,EE=null,CE=!1,yR=null,cue={onError:function(t){Qy=!0,EE=t}};function uue(t,e,n,r,i,o,s,a,l){Qy=!1,EE=null,lue.apply(cue,arguments)}function due(t,e,n,r,i,o,s,a,l){if(uue.apply(this,arguments),Qy){if(Qy){var c=EE;Qy=!1,EE=null}else throw Error(Ut(198));CE||(CE=!0,yR=c)}}function lm(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function z7(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function _4(t){if(lm(t)!==t)throw Error(Ut(188))}function fue(t){var e=t.alternate;if(!e){if(e=lm(t),e===null)throw Error(Ut(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return _4(i),t;if(o===r)return _4(i),e;o=o.sibling}throw Error(Ut(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(Ut(189))}}if(n.alternate!==r)throw Error(Ut(190))}if(n.tag!==3)throw Error(Ut(188));return n.stateNode.current===n?t:e}function V7(t){return t=fue(t),t!==null?W7(t):null}function W7(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=W7(t);if(e!==null)return e;t=t.sibling}return null}var $7=Ia.unstable_scheduleCallback,E4=Ia.unstable_cancelCallback,hue=Ia.unstable_shouldYield,pue=Ia.unstable_requestPaint,Qi=Ia.unstable_now,mue=Ia.unstable_getCurrentPriorityLevel,HF=Ia.unstable_ImmediatePriority,H7=Ia.unstable_UserBlockingPriority,AE=Ia.unstable_NormalPriority,gue=Ia.unstable_LowPriority,G7=Ia.unstable_IdlePriority,pA=null,Lc=null;function vue(t){if(Lc&&typeof Lc.onCommitFiberRoot=="function")try{Lc.onCommitFiberRoot(pA,t,void 0,(t.current.flags&128)===128)}catch(e){}}var oc=Math.clz32?Math.clz32:bue,yue=Math.log,xue=Math.LN2;function bue(t){return t>>>=0,t===0?32:31-(yue(t)/xue|0)|0}var G1=64,q1=4194304;function Ey(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function TE(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Ey(a):(o&=s,o!==0&&(r=Ey(o)))}else s=n&~i,s!==0?r=Ey(s):o!==0&&(r=Ey(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-oc(e),i=1<<n,r|=t[n],e&=~i;return r}function wue(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sue(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-oc(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=wue(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function xR(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function q7(){var t=G1;return G1<<=1,!(G1&4194240)&&(G1=64),t}function hM(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function tw(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-oc(e),t[e]=n}function _ue(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-oc(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function GF(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-oc(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Qr=0;function K7(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Y7,qF,X7,Q7,Z7,bR=!1,K1=[],Rf=null,If=null,kf=null,Wx=new Map,$x=new Map,mf=[],Eue="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function C4(t,e){switch(t){case"focusin":case"focusout":Rf=null;break;case"dragenter":case"dragleave":If=null;break;case"mouseover":case"mouseout":kf=null;break;case"pointerover":case"pointerout":Wx.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$x.delete(e.pointerId)}}function $0(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=rw(e),e!==null&&qF(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Cue(t,e,n,r,i){switch(e){case"focusin":return Rf=$0(Rf,t,e,n,r,i),!0;case"dragenter":return If=$0(If,t,e,n,r,i),!0;case"mouseover":return kf=$0(kf,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Wx.set(o,$0(Wx.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,$x.set(o,$0($x.get(o)||null,t,e,n,r,i)),!0}return!1}function J7(t){var e=ap(t.target);if(e!==null){var n=lm(e);if(n!==null){if(e=n.tag,e===13){if(e=z7(n),e!==null){t.blockedOn=e,Z7(t.priority,function(){X7(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function w_(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wR(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);mR=r,n.target.dispatchEvent(r),mR=null}else return e=rw(n),e!==null&&qF(e),t.blockedOn=n,!1;e.shift()}return!0}function A4(t,e,n){w_(t)&&n.delete(e)}function Aue(){bR=!1,Rf!==null&&w_(Rf)&&(Rf=null),If!==null&&w_(If)&&(If=null),kf!==null&&w_(kf)&&(kf=null),Wx.forEach(A4),$x.forEach(A4)}function H0(t,e){t.blockedOn===e&&(t.blockedOn=null,bR||(bR=!0,Ia.unstable_scheduleCallback(Ia.unstable_NormalPriority,Aue)))}function Hx(t){function e(i){return H0(i,t)}if(0<K1.length){H0(K1[0],t);for(var n=1;n<K1.length;n++){var r=K1[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Rf!==null&&H0(Rf,t),If!==null&&H0(If,t),kf!==null&&H0(kf,t),Wx.forEach(e),$x.forEach(e),n=0;n<mf.length;n++)r=mf[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<mf.length&&(n=mf[0],n.blockedOn===null);)J7(n),n.blockedOn===null&&mf.shift()}var qg=Td.ReactCurrentBatchConfig,ME=!0;function Tue(t,e,n,r){var i=Qr,o=qg.transition;qg.transition=null;try{Qr=1,KF(t,e,n,r)}finally{Qr=i,qg.transition=o}}function Mue(t,e,n,r){var i=Qr,o=qg.transition;qg.transition=null;try{Qr=4,KF(t,e,n,r)}finally{Qr=i,qg.transition=o}}function KF(t,e,n,r){if(ME){var i=wR(t,e,n,r);if(i===null)_M(t,e,r,PE,n),C4(t,r);else if(Cue(i,t,e,n,r))r.stopPropagation();else if(C4(t,r),e&4&&-1<Eue.indexOf(t)){for(;i!==null;){var o=rw(i);if(o!==null&&Y7(o),o=wR(t,e,n,r),o===null&&_M(t,e,r,PE,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else _M(t,e,r,null,n)}}var PE=null;function wR(t,e,n,r){if(PE=null,t=$F(r),t=ap(t),t!==null)if(e=lm(t),e===null)t=null;else if(n=e.tag,n===13){if(t=z7(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return PE=t,null}function eH(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mue()){case HF:return 1;case H7:return 4;case AE:case gue:return 16;case G7:return 536870912;default:return 16}default:return 16}}var Cf=null,YF=null,S_=null;function tH(){if(S_)return S_;var t,e=YF,n=e.length,r,i="value"in Cf?Cf.value:Cf.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return S_=i.slice(t,1<r?1-r:void 0)}function __(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Y1(){return!0}function T4(){return!1}function Ua(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Y1:T4,this.isPropagationStopped=T4,this}return ki(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Y1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Y1)},persist:function(){},isPersistent:Y1}),e}var n0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},XF=Ua(n0),nw=ki({},n0,{view:0,detail:0}),Pue=Ua(nw),pM,mM,G0,mA=ki({},nw,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:QF,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==G0&&(G0&&t.type==="mousemove"?(pM=t.screenX-G0.screenX,mM=t.screenY-G0.screenY):mM=pM=0,G0=t),pM)},movementY:function(t){return"movementY"in t?t.movementY:mM}}),M4=Ua(mA),Due=ki({},mA,{dataTransfer:0}),Rue=Ua(Due),Iue=ki({},nw,{relatedTarget:0}),gM=Ua(Iue),kue=ki({},n0,{animationName:0,elapsedTime:0,pseudoElement:0}),Fue=Ua(kue),Oue=ki({},n0,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Nue=Ua(Oue),Lue=ki({},n0,{data:0}),P4=Ua(Lue),Bue={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jue={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uue={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zue(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Uue[t])?!!e[t]:!1}function QF(){return zue}var Vue=ki({},nw,{key:function(t){if(t.key){var e=Bue[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=__(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jue[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:QF,charCode:function(t){return t.type==="keypress"?__(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?__(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Wue=Ua(Vue),$ue=ki({},mA,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),D4=Ua($ue),Hue=ki({},nw,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:QF}),Gue=Ua(Hue),que=ki({},n0,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kue=Ua(que),Yue=ki({},mA,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Xue=Ua(Yue),Que=[9,13,27,32],ZF=cd&&"CompositionEvent"in window,Zy=null;cd&&"documentMode"in document&&(Zy=document.documentMode);var Zue=cd&&"TextEvent"in window&&!Zy,nH=cd&&(!ZF||Zy&&8<Zy&&11>=Zy),R4=" ",I4=!1;function rH(t,e){switch(t){case"keyup":return Que.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iH(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bg=!1;function Jue(t,e){switch(t){case"compositionend":return iH(e);case"keypress":return e.which!==32?null:(I4=!0,R4);case"textInput":return t=e.data,t===R4&&I4?null:t;default:return null}}function ede(t,e){if(bg)return t==="compositionend"||!ZF&&rH(t,e)?(t=tH(),S_=YF=Cf=null,bg=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return nH&&e.locale!=="ko"?null:e.data;default:return null}}var tde={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function k4(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tde[t.type]:e==="textarea"}function oH(t,e,n,r){N7(r),e=DE(e,"onChange"),0<e.length&&(n=new XF("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Jy=null,Gx=null;function nde(t){gH(t,0)}function gA(t){var e=_g(t);if(P7(e))return t}function rde(t,e){if(t==="change")return e}var sH=!1;if(cd){var vM;if(cd){var yM="oninput"in document;if(!yM){var F4=document.createElement("div");F4.setAttribute("oninput","return;"),yM=typeof F4.oninput=="function"}vM=yM}else vM=!1;sH=vM&&(!document.documentMode||9<document.documentMode)}function O4(){Jy&&(Jy.detachEvent("onpropertychange",aH),Gx=Jy=null)}function aH(t){if(t.propertyName==="value"&&gA(Gx)){var e=[];oH(e,Gx,t,$F(t)),U7(nde,e)}}function ide(t,e,n){t==="focusin"?(O4(),Jy=e,Gx=n,Jy.attachEvent("onpropertychange",aH)):t==="focusout"&&O4()}function ode(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gA(Gx)}function sde(t,e){if(t==="click")return gA(e)}function ade(t,e){if(t==="input"||t==="change")return gA(e)}function lde(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cc=typeof Object.is=="function"?Object.is:lde;function qx(t,e){if(cc(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!rR.call(e,i)||!cc(t[i],e[i]))return!1}return!0}function N4(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function L4(t,e){var n=N4(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=N4(n)}}function lH(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?lH(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cH(){for(var t=window,e=_E();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch(r){n=!1}if(n)t=e.contentWindow;else break;e=_E(t.document)}return e}function JF(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cde(t){var e=cH(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&lH(n.ownerDocument.documentElement,n)){if(r!==null&&JF(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=L4(n,o);var s=L4(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ude=cd&&"documentMode"in document&&11>=document.documentMode,wg=null,SR=null,ex=null,_R=!1;function B4(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_R||wg==null||wg!==_E(r)||(r=wg,"selectionStart"in r&&JF(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ex&&qx(ex,r)||(ex=r,r=DE(SR,"onSelect"),0<r.length&&(e=new XF("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=wg)))}function X1(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Sg={animationend:X1("Animation","AnimationEnd"),animationiteration:X1("Animation","AnimationIteration"),animationstart:X1("Animation","AnimationStart"),transitionend:X1("Transition","TransitionEnd")},xM={},uH={};cd&&(uH=document.createElement("div").style,"AnimationEvent"in window||(delete Sg.animationend.animation,delete Sg.animationiteration.animation,delete Sg.animationstart.animation),"TransitionEvent"in window||delete Sg.transitionend.transition);function vA(t){if(xM[t])return xM[t];if(!Sg[t])return t;var e=Sg[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in uH)return xM[t]=e[n];return t}var dH=vA("animationend"),fH=vA("animationiteration"),hH=vA("animationstart"),pH=vA("transitionend"),mH=new Map,j4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oh(t,e){mH.set(t,e),am(e,[t])}for(var bM=0;bM<j4.length;bM++){var wM=j4[bM],dde=wM.toLowerCase(),fde=wM[0].toUpperCase()+wM.slice(1);oh(dde,"on"+fde)}oh(dH,"onAnimationEnd");oh(fH,"onAnimationIteration");oh(hH,"onAnimationStart");oh("dblclick","onDoubleClick");oh("focusin","onFocus");oh("focusout","onBlur");oh(pH,"onTransitionEnd");vv("onMouseEnter",["mouseout","mouseover"]);vv("onMouseLeave",["mouseout","mouseover"]);vv("onPointerEnter",["pointerout","pointerover"]);vv("onPointerLeave",["pointerout","pointerover"]);am("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));am("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));am("onBeforeInput",["compositionend","keypress","textInput","paste"]);am("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));am("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));am("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hde=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cy));function U4(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,due(r,e,void 0,t),t.currentTarget=null}function gH(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;U4(i,a,c),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;U4(i,a,c),o=l}}}if(CE)throw t=yR,CE=!1,yR=null,t}function hi(t,e){var n=e[MR];n===void 0&&(n=e[MR]=new Set);var r=t+"__bubble";n.has(r)||(vH(e,t,2,!1),n.add(r))}function SM(t,e,n){var r=0;e&&(r|=4),vH(n,t,r,e)}var Q1="_reactListening"+Math.random().toString(36).slice(2);function Kx(t){if(!t[Q1]){t[Q1]=!0,E7.forEach(function(n){n!=="selectionchange"&&(hde.has(n)||SM(n,!1,t),SM(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Q1]||(e[Q1]=!0,SM("selectionchange",!1,e))}}function vH(t,e,n,r){switch(eH(e)){case 1:var i=Tue;break;case 4:i=Mue;break;default:i=KF}n=i.bind(null,e,n,t),i=void 0,!vR||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function _M(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=ap(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}U7(function(){var c=o,u=$F(n),d=[];e:{var f=mH.get(t);if(f!==void 0){var p=XF,b=t;switch(t){case"keypress":if(__(n)===0)break e;case"keydown":case"keyup":p=Wue;break;case"focusin":b="focus",p=gM;break;case"focusout":b="blur",p=gM;break;case"beforeblur":case"afterblur":p=gM;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=M4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Rue;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Gue;break;case dH:case fH:case hH:p=Fue;break;case pH:p=Kue;break;case"scroll":p=Pue;break;case"wheel":p=Xue;break;case"copy":case"cut":case"paste":p=Nue;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=D4}var v=(e&4)!==0,m=!v&&t==="scroll",g=v?f!==null?f+"Capture":null:f;v=[];for(var x=c,w;x!==null;){w=x;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,g!==null&&(S=Vx(x,g),S!=null&&v.push(Yx(x,S,w)))),m)break;x=x.return}0<v.length&&(f=new p(f,b,null,n,u),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==mR&&(b=n.relatedTarget||n.fromElement)&&(ap(b)||b[ud]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(b=n.relatedTarget||n.toElement,p=c,b=b?ap(b):null,b!==null&&(m=lm(b),b!==m||b.tag!==5&&b.tag!==6)&&(b=null)):(p=null,b=c),p!==b)){if(v=M4,S="onMouseLeave",g="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(v=D4,S="onPointerLeave",g="onPointerEnter",x="pointer"),m=p==null?f:_g(p),w=b==null?f:_g(b),f=new v(S,x+"leave",p,n,u),f.target=m,f.relatedTarget=w,S=null,ap(u)===c&&(v=new v(g,x+"enter",b,n,u),v.target=w,v.relatedTarget=m,S=v),m=S,p&&b)t:{for(v=p,g=b,x=0,w=v;w;w=zm(w))x++;for(w=0,S=g;S;S=zm(S))w++;for(;0<x-w;)v=zm(v),x--;for(;0<w-x;)g=zm(g),w--;for(;x--;){if(v===g||g!==null&&v===g.alternate)break t;v=zm(v),g=zm(g)}v=null}else v=null;p!==null&&z4(d,f,p,v,!1),b!==null&&m!==null&&z4(d,m,b,v,!0)}}e:{if(f=c?_g(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var P=rde;else if(k4(f))if(sH)P=ade;else{P=ode;var I=ide}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(P=sde);if(P&&(P=P(t,c))){oH(d,P,n,u);break e}I&&I(t,f,c),t==="focusout"&&(I=f._wrapperState)&&I.controlled&&f.type==="number"&&uR(f,"number",f.value)}switch(I=c?_g(c):window,t){case"focusin":(k4(I)||I.contentEditable==="true")&&(wg=I,SR=c,ex=null);break;case"focusout":ex=SR=wg=null;break;case"mousedown":_R=!0;break;case"contextmenu":case"mouseup":case"dragend":_R=!1,B4(d,n,u);break;case"selectionchange":if(ude)break;case"keydown":case"keyup":B4(d,n,u)}var M;if(ZF)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else bg?rH(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(nH&&n.locale!=="ko"&&(bg||D!=="onCompositionStart"?D==="onCompositionEnd"&&bg&&(M=tH()):(Cf=u,YF="value"in Cf?Cf.value:Cf.textContent,bg=!0)),I=DE(c,D),0<I.length&&(D=new P4(D,t,null,n,u),d.push({event:D,listeners:I}),M?D.data=M:(M=iH(n),M!==null&&(D.data=M)))),(M=Zue?Jue(t,n):ede(t,n))&&(c=DE(c,"onBeforeInput"),0<c.length&&(u=new P4("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=M))}gH(d,e)})}function Yx(t,e,n){return{instance:t,listener:e,currentTarget:n}}function DE(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Vx(t,n),o!=null&&r.unshift(Yx(t,o,i)),o=Vx(t,e),o!=null&&r.push(Yx(t,o,i))),t=t.return}return r}function zm(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function z4(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Vx(n,o),l!=null&&s.unshift(Yx(n,l,a))):i||(l=Vx(n,o),l!=null&&s.push(Yx(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var pde=/\r\n?/g,mde=/\u0000|\uFFFD/g;function V4(t){return(typeof t=="string"?t:""+t).replace(pde,`
`).replace(mde,"")}function Z1(t,e,n){if(e=V4(e),V4(t)!==e&&n)throw Error(Ut(425))}function RE(){}var ER=null,CR=null;function AR(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var TR=typeof setTimeout=="function"?setTimeout:void 0,gde=typeof clearTimeout=="function"?clearTimeout:void 0,W4=typeof Promise=="function"?Promise:void 0,vde=typeof queueMicrotask=="function"?queueMicrotask:typeof W4!="undefined"?function(t){return W4.resolve(null).then(t).catch(yde)}:TR;function yde(t){setTimeout(function(){throw t})}function EM(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Hx(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Hx(e)}function Ff(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $4(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var r0=Math.random().toString(36).slice(2),kc="__reactFiber$"+r0,Xx="__reactProps$"+r0,ud="__reactContainer$"+r0,MR="__reactEvents$"+r0,xde="__reactListeners$"+r0,bde="__reactHandles$"+r0;function ap(t){var e=t[kc];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ud]||n[kc]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=$4(t);t!==null;){if(n=t[kc])return n;t=$4(t)}return e}t=n,n=t.parentNode}return null}function rw(t){return t=t[kc]||t[ud],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _g(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ut(33))}function yA(t){return t[Xx]||null}var PR=[],Eg=-1;function sh(t){return{current:t}}function yi(t){0>Eg||(t.current=PR[Eg],PR[Eg]=null,Eg--)}function li(t,e){Eg++,PR[Eg]=t.current,t.current=e}var Xf={},ps=sh(Xf),ra=sh(!1),Op=Xf;function yv(t,e){var n=t.type.contextTypes;if(!n)return Xf;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ia(t){return t=t.childContextTypes,t!=null}function IE(){yi(ra),yi(ps)}function H4(t,e,n){if(ps.current!==Xf)throw Error(Ut(168));li(ps,e),li(ra,n)}function yH(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ut(108,iue(t)||"Unknown",i));return ki({},n,r)}function kE(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xf,Op=ps.current,li(ps,t),li(ra,ra.current),!0}function G4(t,e,n){var r=t.stateNode;if(!r)throw Error(Ut(169));n?(t=yH(t,e,Op),r.__reactInternalMemoizedMergedChildContext=t,yi(ra),yi(ps),li(ps,t)):yi(ra),li(ra,n)}var Nu=null,xA=!1,CM=!1;function xH(t){Nu===null?Nu=[t]:Nu.push(t)}function wde(t){xA=!0,xH(t)}function ah(){if(!CM&&Nu!==null){CM=!0;var t=0,e=Qr;try{var n=Nu;for(Qr=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Nu=null,xA=!1}catch(i){throw Nu!==null&&(Nu=Nu.slice(t+1)),$7(HF,ah),i}finally{Qr=e,CM=!1}}return null}var Cg=[],Ag=0,FE=null,OE=0,sl=[],al=0,Np=null,zu=1,Vu="";function Wh(t,e){Cg[Ag++]=OE,Cg[Ag++]=FE,FE=t,OE=e}function bH(t,e,n){sl[al++]=zu,sl[al++]=Vu,sl[al++]=Np,Np=t;var r=zu;t=Vu;var i=32-oc(r)-1;r&=~(1<<i),n+=1;var o=32-oc(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,zu=1<<32-oc(e)+i|n<<i|r,Vu=o+t}else zu=1<<o|n<<i|r,Vu=t}function eO(t){t.return!==null&&(Wh(t,1),bH(t,1,0))}function tO(t){for(;t===FE;)FE=Cg[--Ag],Cg[Ag]=null,OE=Cg[--Ag],Cg[Ag]=null;for(;t===Np;)Np=sl[--al],sl[al]=null,Vu=sl[--al],sl[al]=null,zu=sl[--al],sl[al]=null}var Ma=null,Ca=null,Ei=!1,Kl=null;function wH(t,e){var n=fl(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function q4(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ma=t,Ca=Ff(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ma=t,Ca=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Np!==null?{id:zu,overflow:Vu}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=fl(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ma=t,Ca=null,!0):!1;default:return!1}}function DR(t){return(t.mode&1)!==0&&(t.flags&128)===0}function RR(t){if(Ei){var e=Ca;if(e){var n=e;if(!q4(t,e)){if(DR(t))throw Error(Ut(418));e=Ff(n.nextSibling);var r=Ma;e&&q4(t,e)?wH(r,n):(t.flags=t.flags&-4097|2,Ei=!1,Ma=t)}}else{if(DR(t))throw Error(Ut(418));t.flags=t.flags&-4097|2,Ei=!1,Ma=t}}}function K4(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ma=t}function J1(t){if(t!==Ma)return!1;if(!Ei)return K4(t),Ei=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!AR(t.type,t.memoizedProps)),e&&(e=Ca)){if(DR(t))throw SH(),Error(Ut(418));for(;e;)wH(t,e),e=Ff(e.nextSibling)}if(K4(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ut(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ca=Ff(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ca=null}}else Ca=Ma?Ff(t.stateNode.nextSibling):null;return!0}function SH(){for(var t=Ca;t;)t=Ff(t.nextSibling)}function xv(){Ca=Ma=null,Ei=!1}function nO(t){Kl===null?Kl=[t]:Kl.push(t)}var Sde=Td.ReactCurrentBatchConfig;function q0(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ut(309));var r=n.stateNode}if(!r)throw Error(Ut(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(Ut(284));if(!n._owner)throw Error(Ut(290,t))}return t}function eS(t,e){throw t=Object.prototype.toString.call(e),Error(Ut(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Y4(t){var e=t._init;return e(t._payload)}function _H(t){function e(g,x){if(t){var w=g.deletions;w===null?(g.deletions=[x],g.flags|=16):w.push(x)}}function n(g,x){if(!t)return null;for(;x!==null;)e(g,x),x=x.sibling;return null}function r(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function i(g,x){return g=Bf(g,x),g.index=0,g.sibling=null,g}function o(g,x,w){return g.index=w,t?(w=g.alternate,w!==null?(w=w.index,w<x?(g.flags|=2,x):w):(g.flags|=2,x)):(g.flags|=1048576,x)}function s(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,x,w,S){return x===null||x.tag!==6?(x=IM(w,g.mode,S),x.return=g,x):(x=i(x,w),x.return=g,x)}function l(g,x,w,S){var P=w.type;return P===xg?u(g,x,w.props.children,S,w.key):x!==null&&(x.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===cf&&Y4(P)===x.type)?(S=i(x,w.props),S.ref=q0(g,x,w),S.return=g,S):(S=D_(w.type,w.key,w.props,null,g.mode,S),S.ref=q0(g,x,w),S.return=g,S)}function c(g,x,w,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=kM(w,g.mode,S),x.return=g,x):(x=i(x,w.children||[]),x.return=g,x)}function u(g,x,w,S,P){return x===null||x.tag!==7?(x=xp(w,g.mode,S,P),x.return=g,x):(x=i(x,w),x.return=g,x)}function d(g,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=IM(""+x,g.mode,w),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case W1:return w=D_(x.type,x.key,x.props,null,g.mode,w),w.ref=q0(g,null,x),w.return=g,w;case yg:return x=kM(x,g.mode,w),x.return=g,x;case cf:var S=x._init;return d(g,S(x._payload),w)}if(_y(x)||V0(x))return x=xp(x,g.mode,w,null),x.return=g,x;eS(g,x)}return null}function f(g,x,w,S){var P=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return P!==null?null:a(g,x,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case W1:return w.key===P?l(g,x,w,S):null;case yg:return w.key===P?c(g,x,w,S):null;case cf:return P=w._init,f(g,x,P(w._payload),S)}if(_y(w)||V0(w))return P!==null?null:u(g,x,w,S,null);eS(g,w)}return null}function p(g,x,w,S,P){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(w)||null,a(x,g,""+S,P);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case W1:return g=g.get(S.key===null?w:S.key)||null,l(x,g,S,P);case yg:return g=g.get(S.key===null?w:S.key)||null,c(x,g,S,P);case cf:var I=S._init;return p(g,x,w,I(S._payload),P)}if(_y(S)||V0(S))return g=g.get(w)||null,u(x,g,S,P,null);eS(x,S)}return null}function b(g,x,w,S){for(var P=null,I=null,M=x,D=x=0,E=null;M!==null&&D<w.length;D++){M.index>D?(E=M,M=null):E=M.sibling;var _=f(g,M,w[D],S);if(_===null){M===null&&(M=E);break}t&&M&&_.alternate===null&&e(g,M),x=o(_,x,D),I===null?P=_:I.sibling=_,I=_,M=E}if(D===w.length)return n(g,M),Ei&&Wh(g,D),P;if(M===null){for(;D<w.length;D++)M=d(g,w[D],S),M!==null&&(x=o(M,x,D),I===null?P=M:I.sibling=M,I=M);return Ei&&Wh(g,D),P}for(M=r(g,M);D<w.length;D++)E=p(M,g,D,w[D],S),E!==null&&(t&&E.alternate!==null&&M.delete(E.key===null?D:E.key),x=o(E,x,D),I===null?P=E:I.sibling=E,I=E);return t&&M.forEach(function(A){return e(g,A)}),Ei&&Wh(g,D),P}function v(g,x,w,S){var P=V0(w);if(typeof P!="function")throw Error(Ut(150));if(w=P.call(w),w==null)throw Error(Ut(151));for(var I=P=null,M=x,D=x=0,E=null,_=w.next();M!==null&&!_.done;D++,_=w.next()){M.index>D?(E=M,M=null):E=M.sibling;var A=f(g,M,_.value,S);if(A===null){M===null&&(M=E);break}t&&M&&A.alternate===null&&e(g,M),x=o(A,x,D),I===null?P=A:I.sibling=A,I=A,M=E}if(_.done)return n(g,M),Ei&&Wh(g,D),P;if(M===null){for(;!_.done;D++,_=w.next())_=d(g,_.value,S),_!==null&&(x=o(_,x,D),I===null?P=_:I.sibling=_,I=_);return Ei&&Wh(g,D),P}for(M=r(g,M);!_.done;D++,_=w.next())_=p(M,g,D,_.value,S),_!==null&&(t&&_.alternate!==null&&M.delete(_.key===null?D:_.key),x=o(_,x,D),I===null?P=_:I.sibling=_,I=_);return t&&M.forEach(function(R){return e(g,R)}),Ei&&Wh(g,D),P}function m(g,x,w,S){if(typeof w=="object"&&w!==null&&w.type===xg&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case W1:e:{for(var P=w.key,I=x;I!==null;){if(I.key===P){if(P=w.type,P===xg){if(I.tag===7){n(g,I.sibling),x=i(I,w.props.children),x.return=g,g=x;break e}}else if(I.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===cf&&Y4(P)===I.type){n(g,I.sibling),x=i(I,w.props),x.ref=q0(g,I,w),x.return=g,g=x;break e}n(g,I);break}else e(g,I);I=I.sibling}w.type===xg?(x=xp(w.props.children,g.mode,S,w.key),x.return=g,g=x):(S=D_(w.type,w.key,w.props,null,g.mode,S),S.ref=q0(g,x,w),S.return=g,g=S)}return s(g);case yg:e:{for(I=w.key;x!==null;){if(x.key===I)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(g,x.sibling),x=i(x,w.children||[]),x.return=g,g=x;break e}else{n(g,x);break}else e(g,x);x=x.sibling}x=kM(w,g.mode,S),x.return=g,g=x}return s(g);case cf:return I=w._init,m(g,x,I(w._payload),S)}if(_y(w))return b(g,x,w,S);if(V0(w))return v(g,x,w,S);eS(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(g,x.sibling),x=i(x,w),x.return=g,g=x):(n(g,x),x=IM(w,g.mode,S),x.return=g,g=x),s(g)):n(g,x)}return m}var bv=_H(!0),EH=_H(!1),NE=sh(null),LE=null,Tg=null,rO=null;function iO(){rO=Tg=LE=null}function oO(t){var e=NE.current;yi(NE),t._currentValue=e}function IR(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Kg(t,e){LE=t,rO=Tg=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ta=!0),t.firstContext=null)}function yl(t){var e=t._currentValue;if(rO!==t)if(t={context:t,memoizedValue:e,next:null},Tg===null){if(LE===null)throw Error(Ut(308));Tg=t,LE.dependencies={lanes:0,firstContext:t}}else Tg=Tg.next=t;return e}var lp=null;function sO(t){lp===null?lp=[t]:lp.push(t)}function CH(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,sO(e)):(n.next=i.next,i.next=n),e.interleaved=n,dd(t,r)}function dd(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var uf=!1;function aO(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function AH(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zu(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Of(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Tr&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,dd(t,n)}return i=r.interleaved,i===null?(e.next=e,sO(r)):(e.next=i.next,i.next=e),r.interleaved=e,dd(t,n)}function E_(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,GF(t,n)}}function X4(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function BE(t,e,n,r){var i=t.updateQueue;uf=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==s&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;s=0,u=c=l=null,a=o;do{var f=a.lane,p=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=t,v=a;switch(f=e,p=n,v.tag){case 1:if(b=v.payload,typeof b=="function"){d=b.call(p,d,f);break e}d=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=v.payload,f=typeof b=="function"?b.call(p,d,f):b,f==null)break e;d=ki({},d,f);break e;case 2:uf=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,s|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Bp|=s,t.lanes=s,t.memoizedState=d}}function Q4(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ut(191,i));i.call(r)}}}var iw={},Bc=sh(iw),Qx=sh(iw),Zx=sh(iw);function cp(t){if(t===iw)throw Error(Ut(174));return t}function lO(t,e){switch(li(Zx,e),li(Qx,t),li(Bc,iw),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fR(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=fR(e,t)}yi(Bc),li(Bc,e)}function wv(){yi(Bc),yi(Qx),yi(Zx)}function TH(t){cp(Zx.current);var e=cp(Bc.current),n=fR(e,t.type);e!==n&&(li(Qx,t),li(Bc,n))}function cO(t){Qx.current===t&&(yi(Bc),yi(Qx))}var Pi=sh(0);function jE(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var AM=[];function uO(){for(var t=0;t<AM.length;t++)AM[t]._workInProgressVersionPrimary=null;AM.length=0}var C_=Td.ReactCurrentDispatcher,TM=Td.ReactCurrentBatchConfig,Lp=0,Ii=null,vo=null,Mo=null,UE=!1,tx=!1,Jx=0,_de=0;function es(){throw Error(Ut(321))}function dO(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!cc(t[n],e[n]))return!1;return!0}function fO(t,e,n,r,i,o){if(Lp=o,Ii=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,C_.current=t===null||t.memoizedState===null?Tde:Mde,t=n(r,i),tx){o=0;do{if(tx=!1,Jx=0,25<=o)throw Error(Ut(301));o+=1,Mo=vo=null,e.updateQueue=null,C_.current=Pde,t=n(r,i)}while(tx)}if(C_.current=zE,e=vo!==null&&vo.next!==null,Lp=0,Mo=vo=Ii=null,UE=!1,e)throw Error(Ut(300));return t}function hO(){var t=Jx!==0;return Jx=0,t}function Tc(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mo===null?Ii.memoizedState=Mo=t:Mo=Mo.next=t,Mo}function xl(){if(vo===null){var t=Ii.alternate;t=t!==null?t.memoizedState:null}else t=vo.next;var e=Mo===null?Ii.memoizedState:Mo.next;if(e!==null)Mo=e,vo=t;else{if(t===null)throw Error(Ut(310));vo=t,t={memoizedState:vo.memoizedState,baseState:vo.baseState,baseQueue:vo.baseQueue,queue:vo.queue,next:null},Mo===null?Ii.memoizedState=Mo=t:Mo=Mo.next=t}return Mo}function eb(t,e){return typeof e=="function"?e(t):e}function MM(t){var e=xl(),n=e.queue;if(n===null)throw Error(Ut(311));n.lastRenderedReducer=t;var r=vo,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,c=o;do{var u=c.lane;if((Lp&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,s=r):l=l.next=d,Ii.lanes|=u,Bp|=u}c=c.next}while(c!==null&&c!==o);l===null?s=r:l.next=a,cc(r,e.memoizedState)||(ta=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Ii.lanes|=o,Bp|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function PM(t){var e=xl(),n=e.queue;if(n===null)throw Error(Ut(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);cc(o,e.memoizedState)||(ta=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function MH(){}function PH(t,e){var n=Ii,r=xl(),i=e(),o=!cc(r.memoizedState,i);if(o&&(r.memoizedState=i,ta=!0),r=r.queue,pO(IH.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Mo!==null&&Mo.memoizedState.tag&1){if(n.flags|=2048,tb(9,RH.bind(null,n,r,i,e),void 0,null),Io===null)throw Error(Ut(349));Lp&30||DH(n,e,i)}return i}function DH(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ii.updateQueue,e===null?(e={lastEffect:null,stores:null},Ii.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function RH(t,e,n,r){e.value=n,e.getSnapshot=r,kH(e)&&FH(t)}function IH(t,e,n){return n(function(){kH(e)&&FH(t)})}function kH(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!cc(t,n)}catch(r){return!0}}function FH(t){var e=dd(t,1);e!==null&&sc(e,t,1,-1)}function Z4(t){var e=Tc();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eb,lastRenderedState:t},e.queue=t,t=t.dispatch=Ade.bind(null,Ii,t),[e.memoizedState,t]}function tb(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ii.updateQueue,e===null?(e={lastEffect:null,stores:null},Ii.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function OH(){return xl().memoizedState}function A_(t,e,n,r){var i=Tc();Ii.flags|=t,i.memoizedState=tb(1|e,n,void 0,r===void 0?null:r)}function bA(t,e,n,r){var i=xl();r=r===void 0?null:r;var o=void 0;if(vo!==null){var s=vo.memoizedState;if(o=s.destroy,r!==null&&dO(r,s.deps)){i.memoizedState=tb(e,n,o,r);return}}Ii.flags|=t,i.memoizedState=tb(1|e,n,o,r)}function J4(t,e){return A_(8390656,8,t,e)}function pO(t,e){return bA(2048,8,t,e)}function NH(t,e){return bA(4,2,t,e)}function LH(t,e){return bA(4,4,t,e)}function BH(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function jH(t,e,n){return n=n!=null?n.concat([t]):null,bA(4,4,BH.bind(null,e,t),n)}function mO(){}function UH(t,e){var n=xl();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dO(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function zH(t,e){var n=xl();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dO(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function VH(t,e,n){return Lp&21?(cc(n,e)||(n=q7(),Ii.lanes|=n,Bp|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ta=!0),t.memoizedState=n)}function Ede(t,e){var n=Qr;Qr=n!==0&&4>n?n:4,t(!0);var r=TM.transition;TM.transition={};try{t(!1),e()}finally{Qr=n,TM.transition=r}}function WH(){return xl().memoizedState}function Cde(t,e,n){var r=Lf(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$H(t))HH(e,n);else if(n=CH(t,e,n,r),n!==null){var i=Rs();sc(n,t,r,i),GH(n,e,r)}}function Ade(t,e,n){var r=Lf(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($H(t))HH(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,cc(a,s)){var l=e.interleaved;l===null?(i.next=i,sO(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch(c){}finally{}n=CH(t,e,i,r),n!==null&&(i=Rs(),sc(n,t,r,i),GH(n,e,r))}}function $H(t){var e=t.alternate;return t===Ii||e!==null&&e===Ii}function HH(t,e){tx=UE=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function GH(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,GF(t,n)}}var zE={readContext:yl,useCallback:es,useContext:es,useEffect:es,useImperativeHandle:es,useInsertionEffect:es,useLayoutEffect:es,useMemo:es,useReducer:es,useRef:es,useState:es,useDebugValue:es,useDeferredValue:es,useTransition:es,useMutableSource:es,useSyncExternalStore:es,useId:es,unstable_isNewReconciler:!1},Tde={readContext:yl,useCallback:function(t,e){return Tc().memoizedState=[t,e===void 0?null:e],t},useContext:yl,useEffect:J4,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,A_(4194308,4,BH.bind(null,e,t),n)},useLayoutEffect:function(t,e){return A_(4194308,4,t,e)},useInsertionEffect:function(t,e){return A_(4,2,t,e)},useMemo:function(t,e){var n=Tc();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Tc();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Cde.bind(null,Ii,t),[r.memoizedState,t]},useRef:function(t){var e=Tc();return t={current:t},e.memoizedState=t},useState:Z4,useDebugValue:mO,useDeferredValue:function(t){return Tc().memoizedState=t},useTransition:function(){var t=Z4(!1),e=t[0];return t=Ede.bind(null,t[1]),Tc().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ii,i=Tc();if(Ei){if(n===void 0)throw Error(Ut(407));n=n()}else{if(n=e(),Io===null)throw Error(Ut(349));Lp&30||DH(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,J4(IH.bind(null,r,o,t),[t]),r.flags|=2048,tb(9,RH.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Tc(),e=Io.identifierPrefix;if(Ei){var n=Vu,r=zu;n=(r&~(1<<32-oc(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Jx++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=_de++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Mde={readContext:yl,useCallback:UH,useContext:yl,useEffect:pO,useImperativeHandle:jH,useInsertionEffect:NH,useLayoutEffect:LH,useMemo:zH,useReducer:MM,useRef:OH,useState:function(){return MM(eb)},useDebugValue:mO,useDeferredValue:function(t){var e=xl();return VH(e,vo.memoizedState,t)},useTransition:function(){var t=MM(eb)[0],e=xl().memoizedState;return[t,e]},useMutableSource:MH,useSyncExternalStore:PH,useId:WH,unstable_isNewReconciler:!1},Pde={readContext:yl,useCallback:UH,useContext:yl,useEffect:pO,useImperativeHandle:jH,useInsertionEffect:NH,useLayoutEffect:LH,useMemo:zH,useReducer:PM,useRef:OH,useState:function(){return PM(eb)},useDebugValue:mO,useDeferredValue:function(t){var e=xl();return vo===null?e.memoizedState=t:VH(e,vo.memoizedState,t)},useTransition:function(){var t=PM(eb)[0],e=xl().memoizedState;return[t,e]},useMutableSource:MH,useSyncExternalStore:PH,useId:WH,unstable_isNewReconciler:!1};function Gl(t,e){if(t&&t.defaultProps){e=ki({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function kR(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ki({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wA={isMounted:function(t){return(t=t._reactInternals)?lm(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Rs(),i=Lf(t),o=Zu(r,i);o.payload=e,n!=null&&(o.callback=n),e=Of(t,o,i),e!==null&&(sc(e,t,i,r),E_(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Rs(),i=Lf(t),o=Zu(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Of(t,o,i),e!==null&&(sc(e,t,i,r),E_(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Rs(),r=Lf(t),i=Zu(n,r);i.tag=2,e!=null&&(i.callback=e),e=Of(t,i,r),e!==null&&(sc(e,t,r,n),E_(e,t,r))}};function ej(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!qx(n,r)||!qx(i,o):!0}function qH(t,e,n){var r=!1,i=Xf,o=e.contextType;return typeof o=="object"&&o!==null?o=yl(o):(i=ia(e)?Op:ps.current,r=e.contextTypes,o=(r=r!=null)?yv(t,i):Xf),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wA,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function tj(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&wA.enqueueReplaceState(e,e.state,null)}function FR(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},aO(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=yl(o):(o=ia(e)?Op:ps.current,i.context=yv(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(kR(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&wA.enqueueReplaceState(i,i.state,null),BE(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Sv(t,e){try{var n="",r=e;do n+=rue(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function DM(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function OR(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Dde=typeof WeakMap=="function"?WeakMap:Map;function KH(t,e,n){n=Zu(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){WE||(WE=!0,HR=r),OR(t,e)},n}function YH(t,e,n){n=Zu(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){OR(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){OR(t,e),typeof r!="function"&&(Nf===null?Nf=new Set([this]):Nf.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function nj(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Dde;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=$de.bind(null,t,e,n),e.then(t,t))}function rj(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ij(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zu(-1,1),e.tag=2,Of(n,e,1))),n.lanes|=1),t)}var Rde=Td.ReactCurrentOwner,ta=!1;function Cs(t,e,n,r){e.child=t===null?EH(e,null,n,r):bv(e,t.child,n,r)}function oj(t,e,n,r,i){n=n.render;var o=e.ref;return Kg(e,i),r=fO(t,e,n,r,o,i),n=hO(),t!==null&&!ta?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,fd(t,e,i)):(Ei&&n&&eO(e),e.flags|=1,Cs(t,e,r,i),e.child)}function sj(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!_O(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,XH(t,e,o,r,i)):(t=D_(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:qx,n(s,r)&&t.ref===e.ref)return fd(t,e,i)}return e.flags|=1,t=Bf(o,r),t.ref=e.ref,t.return=e,e.child=t}function XH(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(qx(o,r)&&t.ref===e.ref)if(ta=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(ta=!0);else return e.lanes=t.lanes,fd(t,e,i)}return NR(t,e,n,r,i)}function QH(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},li(Pg,wa),wa|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,li(Pg,wa),wa|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,li(Pg,wa),wa|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,li(Pg,wa),wa|=r;return Cs(t,e,i,n),e.child}function ZH(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function NR(t,e,n,r,i){var o=ia(n)?Op:ps.current;return o=yv(e,o),Kg(e,i),n=fO(t,e,n,r,o,i),r=hO(),t!==null&&!ta?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,fd(t,e,i)):(Ei&&r&&eO(e),e.flags|=1,Cs(t,e,n,i),e.child)}function aj(t,e,n,r,i){if(ia(n)){var o=!0;kE(e)}else o=!1;if(Kg(e,i),e.stateNode===null)T_(t,e),qH(e,n,r),FR(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=yl(c):(c=ia(n)?Op:ps.current,c=yv(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==c)&&tj(e,s,r,c),uf=!1;var f=e.memoizedState;s.state=f,BE(e,r,s,i),l=e.memoizedState,a!==r||f!==l||ra.current||uf?(typeof u=="function"&&(kR(e,n,u,r),l=e.memoizedState),(a=uf||ej(e,n,a,r,f,l,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,AH(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Gl(e.type,a),s.props=c,d=e.pendingProps,f=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=yl(l):(l=ia(n)?Op:ps.current,l=yv(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==l)&&tj(e,s,r,l),uf=!1,f=e.memoizedState,s.state=f,BE(e,r,s,i);var b=e.memoizedState;a!==d||f!==b||ra.current||uf?(typeof p=="function"&&(kR(e,n,p,r),b=e.memoizedState),(c=uf||ej(e,n,c,r,f,b,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,b,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,b,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),s.props=r,s.state=b,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return LR(t,e,n,r,o,i)}function LR(t,e,n,r,i,o){ZH(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&G4(e,n,!1),fd(t,e,o);r=e.stateNode,Rde.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=bv(e,t.child,null,o),e.child=bv(e,null,a,o)):Cs(t,e,a,o),e.memoizedState=r.state,i&&G4(e,n,!0),e.child}function JH(t){var e=t.stateNode;e.pendingContext?H4(t,e.pendingContext,e.pendingContext!==e.context):e.context&&H4(t,e.context,!1),lO(t,e.containerInfo)}function lj(t,e,n,r,i){return xv(),nO(i),e.flags|=256,Cs(t,e,n,r),e.child}var BR={dehydrated:null,treeContext:null,retryLane:0};function jR(t){return{baseLanes:t,cachePool:null,transitions:null}}function eG(t,e,n){var r=e.pendingProps,i=Pi.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),li(Pi,i&1),t===null)return RR(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=EA(s,r,0,null),t=xp(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=jR(n),e.memoizedState=BR,t):gO(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Ide(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Bf(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Bf(a,o):(o=xp(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?jR(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=BR,r}return o=t.child,t=o.sibling,r=Bf(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function gO(t,e){return e=EA({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function tS(t,e,n,r){return r!==null&&nO(r),bv(e,t.child,null,n),t=gO(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ide(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=DM(Error(Ut(422))),tS(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=EA({mode:"visible",children:r.children},i,0,null),o=xp(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&bv(e,t.child,null,s),e.child.memoizedState=jR(s),e.memoizedState=BR,o);if(!(e.mode&1))return tS(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(Ut(419)),r=DM(o,r,void 0),tS(t,e,s,r)}if(a=(s&t.childLanes)!==0,ta||a){if(r=Io,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,dd(t,i),sc(r,t,i,-1))}return SO(),r=DM(Error(Ut(421))),tS(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Hde.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Ca=Ff(i.nextSibling),Ma=e,Ei=!0,Kl=null,t!==null&&(sl[al++]=zu,sl[al++]=Vu,sl[al++]=Np,zu=t.id,Vu=t.overflow,Np=e),e=gO(e,r.children),e.flags|=4096,e)}function cj(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),IR(t.return,e,n)}function RM(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function tG(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Cs(t,e,r.children,n),r=Pi.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cj(t,n,e);else if(t.tag===19)cj(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(li(Pi,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&jE(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),RM(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&jE(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}RM(e,!0,n,null,o);break;case"together":RM(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function T_(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fd(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Bp|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ut(153));if(e.child!==null){for(t=e.child,n=Bf(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Bf(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function kde(t,e,n){switch(e.tag){case 3:JH(e),xv();break;case 5:TH(e);break;case 1:ia(e.type)&&kE(e);break;case 4:lO(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;li(NE,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(li(Pi,Pi.current&1),e.flags|=128,null):n&e.child.childLanes?eG(t,e,n):(li(Pi,Pi.current&1),t=fd(t,e,n),t!==null?t.sibling:null);li(Pi,Pi.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return tG(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),li(Pi,Pi.current),r)break;return null;case 22:case 23:return e.lanes=0,QH(t,e,n)}return fd(t,e,n)}var nG,UR,rG,iG;nG=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};UR=function(){};rG=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,cp(Bc.current);var o=null;switch(n){case"input":i=lR(t,i),r=lR(t,r),o=[];break;case"select":i=ki({},i,{value:void 0}),r=ki({},r,{value:void 0}),o=[];break;case"textarea":i=dR(t,i),r=dR(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=RE)}hR(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ux.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ux.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&hi("scroll",t),o||a===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};iG=function(t,e,n,r){n!==r&&(e.flags|=4)};function K0(t,e){if(!Ei)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ts(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Fde(t,e,n){var r=e.pendingProps;switch(tO(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ts(e),null;case 1:return ia(e.type)&&IE(),ts(e),null;case 3:return r=e.stateNode,wv(),yi(ra),yi(ps),uO(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(J1(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kl!==null&&(KR(Kl),Kl=null))),UR(t,e),ts(e),null;case 5:cO(e);var i=cp(Zx.current);if(n=e.type,t!==null&&e.stateNode!=null)rG(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ut(166));return ts(e),null}if(t=cp(Bc.current),J1(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[kc]=e,r[Xx]=o,t=(e.mode&1)!==0,n){case"dialog":hi("cancel",r),hi("close",r);break;case"iframe":case"object":case"embed":hi("load",r);break;case"video":case"audio":for(i=0;i<Cy.length;i++)hi(Cy[i],r);break;case"source":hi("error",r);break;case"img":case"image":case"link":hi("error",r),hi("load",r);break;case"details":hi("toggle",r);break;case"input":y4(r,o),hi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},hi("invalid",r);break;case"textarea":b4(r,o),hi("invalid",r)}hR(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Z1(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Z1(r.textContent,a,t),i=["children",""+a]):Ux.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&hi("scroll",r)}switch(n){case"input":$1(r),x4(r,o,!0);break;case"textarea":$1(r),w4(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=RE)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=I7(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[kc]=e,t[Xx]=r,nG(t,e,!1,!1),e.stateNode=t;e:{switch(s=pR(n,r),n){case"dialog":hi("cancel",t),hi("close",t),i=r;break;case"iframe":case"object":case"embed":hi("load",t),i=r;break;case"video":case"audio":for(i=0;i<Cy.length;i++)hi(Cy[i],t);i=r;break;case"source":hi("error",t),i=r;break;case"img":case"image":case"link":hi("error",t),hi("load",t),i=r;break;case"details":hi("toggle",t),i=r;break;case"input":y4(t,r),i=lR(t,r),hi("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ki({},r,{value:void 0}),hi("invalid",t);break;case"textarea":b4(t,r),i=dR(t,r),hi("invalid",t);break;default:i=r}hR(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?O7(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&k7(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&zx(t,l):typeof l=="number"&&zx(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ux.hasOwnProperty(o)?l!=null&&o==="onScroll"&&hi("scroll",t):l!=null&&UF(t,o,l,s))}switch(n){case"input":$1(t),x4(t,r,!1);break;case"textarea":$1(t),w4(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Yf(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?$g(t,!!r.multiple,o,!1):r.defaultValue!=null&&$g(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=RE)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ts(e),null;case 6:if(t&&e.stateNode!=null)iG(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ut(166));if(n=cp(Zx.current),cp(Bc.current),J1(e)){if(r=e.stateNode,n=e.memoizedProps,r[kc]=e,(o=r.nodeValue!==n)&&(t=Ma,t!==null))switch(t.tag){case 3:Z1(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Z1(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[kc]=e,e.stateNode=r}return ts(e),null;case 13:if(yi(Pi),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ei&&Ca!==null&&e.mode&1&&!(e.flags&128))SH(),xv(),e.flags|=98560,o=!1;else if(o=J1(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(Ut(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Ut(317));o[kc]=e}else xv(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ts(e),o=!1}else Kl!==null&&(KR(Kl),Kl=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pi.current&1?xo===0&&(xo=3):SO())),e.updateQueue!==null&&(e.flags|=4),ts(e),null);case 4:return wv(),UR(t,e),t===null&&Kx(e.stateNode.containerInfo),ts(e),null;case 10:return oO(e.type._context),ts(e),null;case 17:return ia(e.type)&&IE(),ts(e),null;case 19:if(yi(Pi),o=e.memoizedState,o===null)return ts(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)K0(o,!1);else{if(xo!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=jE(t),s!==null){for(e.flags|=128,K0(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return li(Pi,Pi.current&1|2),e.child}t=t.sibling}o.tail!==null&&Qi()>_v&&(e.flags|=128,r=!0,K0(o,!1),e.lanes=4194304)}else{if(!r)if(t=jE(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),K0(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Ei)return ts(e),null}else 2*Qi()-o.renderingStartTime>_v&&n!==1073741824&&(e.flags|=128,r=!0,K0(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Qi(),e.sibling=null,n=Pi.current,li(Pi,r?n&1|2:n&1),e):(ts(e),null);case 22:case 23:return wO(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wa&1073741824&&(ts(e),e.subtreeFlags&6&&(e.flags|=8192)):ts(e),null;case 24:return null;case 25:return null}throw Error(Ut(156,e.tag))}function Ode(t,e){switch(tO(e),e.tag){case 1:return ia(e.type)&&IE(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wv(),yi(ra),yi(ps),uO(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return cO(e),null;case 13:if(yi(Pi),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ut(340));xv()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return yi(Pi),null;case 4:return wv(),null;case 10:return oO(e.type._context),null;case 22:case 23:return wO(),null;case 24:return null;default:return null}}var nS=!1,ls=!1,Nde=typeof WeakSet=="function"?WeakSet:Set,dn=null;function Mg(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Vi(t,e,r)}else n.current=null}function zR(t,e,n){try{n()}catch(r){Vi(t,e,r)}}var uj=!1;function Lde(t,e){if(ER=ME,t=cH(),JF(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(S){n=null;break e}var s=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(a=s+i),d!==o||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=s),f===o&&++u===r&&(l=s),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(CR={focusedElem:t,selectionRange:n},ME=!1,dn=e;dn!==null;)if(e=dn,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,dn=t;else for(;dn!==null;){e=dn;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var v=b.memoizedProps,m=b.memoizedState,g=e.stateNode,x=g.getSnapshotBeforeUpdate(e.elementType===e.type?v:Gl(e.type,v),m);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ut(163))}}catch(S){Vi(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,dn=t;break}dn=e.return}return b=uj,uj=!1,b}function nx(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&zR(e,n,o)}i=i.next}while(i!==r)}}function SA(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function VR(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function oG(t){var e=t.alternate;e!==null&&(t.alternate=null,oG(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[kc],delete e[Xx],delete e[MR],delete e[xde],delete e[bde])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sG(t){return t.tag===5||t.tag===3||t.tag===4}function dj(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sG(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function WR(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=RE));else if(r!==4&&(t=t.child,t!==null))for(WR(t,e,n),t=t.sibling;t!==null;)WR(t,e,n),t=t.sibling}function $R(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for($R(t,e,n),t=t.sibling;t!==null;)$R(t,e,n),t=t.sibling}var Bo=null,ql=!1;function Gd(t,e,n){for(n=n.child;n!==null;)aG(t,e,n),n=n.sibling}function aG(t,e,n){if(Lc&&typeof Lc.onCommitFiberUnmount=="function")try{Lc.onCommitFiberUnmount(pA,n)}catch(a){}switch(n.tag){case 5:ls||Mg(n,e);case 6:var r=Bo,i=ql;Bo=null,Gd(t,e,n),Bo=r,ql=i,Bo!==null&&(ql?(t=Bo,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Bo.removeChild(n.stateNode));break;case 18:Bo!==null&&(ql?(t=Bo,n=n.stateNode,t.nodeType===8?EM(t.parentNode,n):t.nodeType===1&&EM(t,n),Hx(t)):EM(Bo,n.stateNode));break;case 4:r=Bo,i=ql,Bo=n.stateNode.containerInfo,ql=!0,Gd(t,e,n),Bo=r,ql=i;break;case 0:case 11:case 14:case 15:if(!ls&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&zR(n,e,s),i=i.next}while(i!==r)}Gd(t,e,n);break;case 1:if(!ls&&(Mg(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Vi(n,e,a)}Gd(t,e,n);break;case 21:Gd(t,e,n);break;case 22:n.mode&1?(ls=(r=ls)||n.memoizedState!==null,Gd(t,e,n),ls=r):Gd(t,e,n);break;default:Gd(t,e,n)}}function fj(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Nde),e.forEach(function(r){var i=Gde.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function zl(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:Bo=a.stateNode,ql=!1;break e;case 3:Bo=a.stateNode.containerInfo,ql=!0;break e;case 4:Bo=a.stateNode.containerInfo,ql=!0;break e}a=a.return}if(Bo===null)throw Error(Ut(160));aG(o,s,i),Bo=null,ql=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Vi(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)lG(e,t),e=e.sibling}function lG(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zl(e,t),Sc(t),r&4){try{nx(3,t,t.return),SA(3,t)}catch(v){Vi(t,t.return,v)}try{nx(5,t,t.return)}catch(v){Vi(t,t.return,v)}}break;case 1:zl(e,t),Sc(t),r&512&&n!==null&&Mg(n,n.return);break;case 5:if(zl(e,t),Sc(t),r&512&&n!==null&&Mg(n,n.return),t.flags&32){var i=t.stateNode;try{zx(i,"")}catch(v){Vi(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&D7(i,o),pR(a,s);var c=pR(a,o);for(s=0;s<l.length;s+=2){var u=l[s],d=l[s+1];u==="style"?O7(i,d):u==="dangerouslySetInnerHTML"?k7(i,d):u==="children"?zx(i,d):UF(i,u,d,c)}switch(a){case"input":cR(i,o);break;case"textarea":R7(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?$g(i,!!o.multiple,p,!1):f!==!!o.multiple&&(o.defaultValue!=null?$g(i,!!o.multiple,o.defaultValue,!0):$g(i,!!o.multiple,o.multiple?[]:"",!1))}i[Xx]=o}catch(v){Vi(t,t.return,v)}}break;case 6:if(zl(e,t),Sc(t),r&4){if(t.stateNode===null)throw Error(Ut(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(v){Vi(t,t.return,v)}}break;case 3:if(zl(e,t),Sc(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Hx(e.containerInfo)}catch(v){Vi(t,t.return,v)}break;case 4:zl(e,t),Sc(t);break;case 13:zl(e,t),Sc(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(xO=Qi())),r&4&&fj(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(ls=(c=ls)||u,zl(e,t),ls=c):zl(e,t),Sc(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(dn=t,u=t.child;u!==null;){for(d=dn=u;dn!==null;){switch(f=dn,p=f.child,f.tag){case 0:case 11:case 14:case 15:nx(4,f,f.return);break;case 1:Mg(f,f.return);var b=f.stateNode;if(typeof b.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(v){Vi(r,n,v)}}break;case 5:Mg(f,f.return);break;case 22:if(f.memoizedState!==null){pj(d);continue}}p!==null?(p.return=f,dn=p):pj(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=F7("display",s))}catch(v){Vi(t,t.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Vi(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:zl(e,t),Sc(t),r&4&&fj(t);break;case 21:break;default:zl(e,t),Sc(t)}}function Sc(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(sG(n)){var r=n;break e}n=n.return}throw Error(Ut(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(zx(i,""),r.flags&=-33);var o=dj(t);$R(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=dj(t);WR(t,a,s);break;default:throw Error(Ut(161))}}catch(l){Vi(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Bde(t,e,n){dn=t,cG(t)}function cG(t,e,n){for(var r=(t.mode&1)!==0;dn!==null;){var i=dn,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||nS;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ls;a=nS;var c=ls;if(nS=s,(ls=l)&&!c)for(dn=i;dn!==null;)s=dn,l=s.child,s.tag===22&&s.memoizedState!==null?mj(i):l!==null?(l.return=s,dn=l):mj(i);for(;o!==null;)dn=o,cG(o),o=o.sibling;dn=i,nS=a,ls=c}hj(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,dn=o):hj(t)}}function hj(t){for(;dn!==null;){var e=dn;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ls||SA(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ls)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Gl(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Q4(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Q4(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Hx(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ut(163))}ls||e.flags&512&&VR(e)}catch(f){Vi(e,e.return,f)}}if(e===t){dn=null;break}if(n=e.sibling,n!==null){n.return=e.return,dn=n;break}dn=e.return}}function pj(t){for(;dn!==null;){var e=dn;if(e===t){dn=null;break}var n=e.sibling;if(n!==null){n.return=e.return,dn=n;break}dn=e.return}}function mj(t){for(;dn!==null;){var e=dn;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{SA(4,e)}catch(l){Vi(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Vi(e,i,l)}}var o=e.return;try{VR(e)}catch(l){Vi(e,o,l)}break;case 5:var s=e.return;try{VR(e)}catch(l){Vi(e,s,l)}}}catch(l){Vi(e,e.return,l)}if(e===t){dn=null;break}var a=e.sibling;if(a!==null){a.return=e.return,dn=a;break}dn=e.return}}var jde=Math.ceil,VE=Td.ReactCurrentDispatcher,vO=Td.ReactCurrentOwner,pl=Td.ReactCurrentBatchConfig,Tr=0,Io=null,so=null,Ho=0,wa=0,Pg=sh(0),xo=0,nb=null,Bp=0,_A=0,yO=0,rx=null,Zs=null,xO=0,_v=1/0,Ou=null,WE=!1,HR=null,Nf=null,rS=!1,Af=null,$E=0,ix=0,GR=null,M_=-1,P_=0;function Rs(){return Tr&6?Qi():M_!==-1?M_:M_=Qi()}function Lf(t){return t.mode&1?Tr&2&&Ho!==0?Ho&-Ho:Sde.transition!==null?(P_===0&&(P_=q7()),P_):(t=Qr,t!==0||(t=window.event,t=t===void 0?16:eH(t.type)),t):1}function sc(t,e,n,r){if(50<ix)throw ix=0,GR=null,Error(Ut(185));tw(t,n,r),(!(Tr&2)||t!==Io)&&(t===Io&&(!(Tr&2)&&(_A|=n),xo===4&&gf(t,Ho)),oa(t,r),n===1&&Tr===0&&!(e.mode&1)&&(_v=Qi()+500,xA&&ah()))}function oa(t,e){var n=t.callbackNode;Sue(t,e);var r=TE(t,t===Io?Ho:0);if(r===0)n!==null&&E4(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&E4(n),e===1)t.tag===0?wde(gj.bind(null,t)):xH(gj.bind(null,t)),vde(function(){!(Tr&6)&&ah()}),n=null;else{switch(K7(r)){case 1:n=HF;break;case 4:n=H7;break;case 16:n=AE;break;case 536870912:n=G7;break;default:n=AE}n=vG(n,uG.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function uG(t,e){if(M_=-1,P_=0,Tr&6)throw Error(Ut(327));var n=t.callbackNode;if(Yg()&&t.callbackNode!==n)return null;var r=TE(t,t===Io?Ho:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=HE(t,r);else{e=r;var i=Tr;Tr|=2;var o=fG();(Io!==t||Ho!==e)&&(Ou=null,_v=Qi()+500,yp(t,e));do try{Vde();break}catch(a){dG(t,a)}while(!0);iO(),VE.current=o,Tr=i,so!==null?e=0:(Io=null,Ho=0,e=xo)}if(e!==0){if(e===2&&(i=xR(t),i!==0&&(r=i,e=qR(t,i))),e===1)throw n=nb,yp(t,0),gf(t,r),oa(t,Qi()),n;if(e===6)gf(t,r);else{if(i=t.current.alternate,!(r&30)&&!Ude(i)&&(e=HE(t,r),e===2&&(o=xR(t),o!==0&&(r=o,e=qR(t,o))),e===1))throw n=nb,yp(t,0),gf(t,r),oa(t,Qi()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ut(345));case 2:$h(t,Zs,Ou);break;case 3:if(gf(t,r),(r&130023424)===r&&(e=xO+500-Qi(),10<e)){if(TE(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Rs(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=TR($h.bind(null,t,Zs,Ou),e);break}$h(t,Zs,Ou);break;case 4:if(gf(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-oc(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Qi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jde(r/1960))-r,10<r){t.timeoutHandle=TR($h.bind(null,t,Zs,Ou),r);break}$h(t,Zs,Ou);break;case 5:$h(t,Zs,Ou);break;default:throw Error(Ut(329))}}}return oa(t,Qi()),t.callbackNode===n?uG.bind(null,t):null}function qR(t,e){var n=rx;return t.current.memoizedState.isDehydrated&&(yp(t,e).flags|=256),t=HE(t,e),t!==2&&(e=Zs,Zs=n,e!==null&&KR(e)),t}function KR(t){Zs===null?Zs=t:Zs.push.apply(Zs,t)}function Ude(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!cc(o(),i))return!1}catch(s){return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gf(t,e){for(e&=~yO,e&=~_A,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-oc(e),r=1<<n;t[n]=-1,e&=~r}}function gj(t){if(Tr&6)throw Error(Ut(327));Yg();var e=TE(t,0);if(!(e&1))return oa(t,Qi()),null;var n=HE(t,e);if(t.tag!==0&&n===2){var r=xR(t);r!==0&&(e=r,n=qR(t,r))}if(n===1)throw n=nb,yp(t,0),gf(t,e),oa(t,Qi()),n;if(n===6)throw Error(Ut(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$h(t,Zs,Ou),oa(t,Qi()),null}function bO(t,e){var n=Tr;Tr|=1;try{return t(e)}finally{Tr=n,Tr===0&&(_v=Qi()+500,xA&&ah())}}function jp(t){Af!==null&&Af.tag===0&&!(Tr&6)&&Yg();var e=Tr;Tr|=1;var n=pl.transition,r=Qr;try{if(pl.transition=null,Qr=1,t)return t()}finally{Qr=r,pl.transition=n,Tr=e,!(Tr&6)&&ah()}}function wO(){wa=Pg.current,yi(Pg)}function yp(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gde(n)),so!==null)for(n=so.return;n!==null;){var r=n;switch(tO(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&IE();break;case 3:wv(),yi(ra),yi(ps),uO();break;case 5:cO(r);break;case 4:wv();break;case 13:yi(Pi);break;case 19:yi(Pi);break;case 10:oO(r.type._context);break;case 22:case 23:wO()}n=n.return}if(Io=t,so=t=Bf(t.current,null),Ho=wa=e,xo=0,nb=null,yO=_A=Bp=0,Zs=rx=null,lp!==null){for(e=0;e<lp.length;e++)if(n=lp[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}lp=null}return t}function dG(t,e){do{var n=so;try{if(iO(),C_.current=zE,UE){for(var r=Ii.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}UE=!1}if(Lp=0,Mo=vo=Ii=null,tx=!1,Jx=0,vO.current=null,n===null||n.return===null){xo=1,nb=e,so=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=Ho,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=rj(s);if(p!==null){p.flags&=-257,ij(p,s,a,o,e),p.mode&1&&nj(o,c,e),e=p,l=c;var b=e.updateQueue;if(b===null){var v=new Set;v.add(l),e.updateQueue=v}else b.add(l);break e}else{if(!(e&1)){nj(o,c,e),SO();break e}l=Error(Ut(426))}}else if(Ei&&a.mode&1){var m=rj(s);if(m!==null){!(m.flags&65536)&&(m.flags|=256),ij(m,s,a,o,e),nO(Sv(l,a));break e}}o=l=Sv(l,a),xo!==4&&(xo=2),rx===null?rx=[o]:rx.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var g=KH(o,l,e);X4(o,g);break e;case 1:a=l;var x=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Nf===null||!Nf.has(w)))){o.flags|=65536,e&=-e,o.lanes|=e;var S=YH(o,a,e);X4(o,S);break e}}o=o.return}while(o!==null)}pG(n)}catch(P){e=P,so===n&&n!==null&&(so=n=n.return);continue}break}while(!0)}function fG(){var t=VE.current;return VE.current=zE,t===null?zE:t}function SO(){(xo===0||xo===3||xo===2)&&(xo=4),Io===null||!(Bp&268435455)&&!(_A&268435455)||gf(Io,Ho)}function HE(t,e){var n=Tr;Tr|=2;var r=fG();(Io!==t||Ho!==e)&&(Ou=null,yp(t,e));do try{zde();break}catch(i){dG(t,i)}while(!0);if(iO(),Tr=n,VE.current=r,so!==null)throw Error(Ut(261));return Io=null,Ho=0,xo}function zde(){for(;so!==null;)hG(so)}function Vde(){for(;so!==null&&!hue();)hG(so)}function hG(t){var e=gG(t.alternate,t,wa);t.memoizedProps=t.pendingProps,e===null?pG(t):so=e,vO.current=null}function pG(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Ode(n,e),n!==null){n.flags&=32767,so=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xo=6,so=null;return}}else if(n=Fde(n,e,wa),n!==null){so=n;return}if(e=e.sibling,e!==null){so=e;return}so=e=t}while(e!==null);xo===0&&(xo=5)}function $h(t,e,n){var r=Qr,i=pl.transition;try{pl.transition=null,Qr=1,Wde(t,e,n,r)}finally{pl.transition=i,Qr=r}return null}function Wde(t,e,n,r){do Yg();while(Af!==null);if(Tr&6)throw Error(Ut(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ut(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(_ue(t,o),t===Io&&(so=Io=null,Ho=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||rS||(rS=!0,vG(AE,function(){return Yg(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=pl.transition,pl.transition=null;var s=Qr;Qr=1;var a=Tr;Tr|=4,vO.current=null,Lde(t,n),lG(n,t),cde(CR),ME=!!ER,CR=ER=null,t.current=n,Bde(n),pue(),Tr=a,Qr=s,pl.transition=o}else t.current=n;if(rS&&(rS=!1,Af=t,$E=i),o=t.pendingLanes,o===0&&(Nf=null),vue(n.stateNode),oa(t,Qi()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(WE)throw WE=!1,t=HR,HR=null,t;return $E&1&&t.tag!==0&&Yg(),o=t.pendingLanes,o&1?t===GR?ix++:(ix=0,GR=t):ix=0,ah(),null}function Yg(){if(Af!==null){var t=K7($E),e=pl.transition,n=Qr;try{if(pl.transition=null,Qr=16>t?16:t,Af===null)var r=!1;else{if(t=Af,Af=null,$E=0,Tr&6)throw Error(Ut(331));var i=Tr;for(Tr|=4,dn=t.current;dn!==null;){var o=dn,s=o.child;if(dn.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(dn=c;dn!==null;){var u=dn;switch(u.tag){case 0:case 11:case 15:nx(8,u,o)}var d=u.child;if(d!==null)d.return=u,dn=d;else for(;dn!==null;){u=dn;var f=u.sibling,p=u.return;if(oG(u),u===c){dn=null;break}if(f!==null){f.return=p,dn=f;break}dn=p}}}var b=o.alternate;if(b!==null){var v=b.child;if(v!==null){b.child=null;do{var m=v.sibling;v.sibling=null,v=m}while(v!==null)}}dn=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,dn=s;else e:for(;dn!==null;){if(o=dn,o.flags&2048)switch(o.tag){case 0:case 11:case 15:nx(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,dn=g;break e}dn=o.return}}var x=t.current;for(dn=x;dn!==null;){s=dn;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,dn=w;else e:for(s=x;dn!==null;){if(a=dn,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:SA(9,a)}}catch(P){Vi(a,a.return,P)}if(a===s){dn=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,dn=S;break e}dn=a.return}}if(Tr=i,ah(),Lc&&typeof Lc.onPostCommitFiberRoot=="function")try{Lc.onPostCommitFiberRoot(pA,t)}catch(P){}r=!0}return r}finally{Qr=n,pl.transition=e}}return!1}function vj(t,e,n){e=Sv(n,e),e=KH(t,e,1),t=Of(t,e,1),e=Rs(),t!==null&&(tw(t,1,e),oa(t,e))}function Vi(t,e,n){if(t.tag===3)vj(t,t,n);else for(;e!==null;){if(e.tag===3){vj(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Nf===null||!Nf.has(r))){t=Sv(n,t),t=YH(e,t,1),e=Of(e,t,1),t=Rs(),e!==null&&(tw(e,1,t),oa(e,t));break}}e=e.return}}function $de(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Rs(),t.pingedLanes|=t.suspendedLanes&n,Io===t&&(Ho&n)===n&&(xo===4||xo===3&&(Ho&130023424)===Ho&&500>Qi()-xO?yp(t,0):yO|=n),oa(t,e)}function mG(t,e){e===0&&(t.mode&1?(e=q1,q1<<=1,!(q1&130023424)&&(q1=4194304)):e=1);var n=Rs();t=dd(t,e),t!==null&&(tw(t,e,n),oa(t,n))}function Hde(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),mG(t,n)}function Gde(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ut(314))}r!==null&&r.delete(e),mG(t,n)}var gG;gG=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ra.current)ta=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ta=!1,kde(t,e,n);ta=!!(t.flags&131072)}else ta=!1,Ei&&e.flags&1048576&&bH(e,OE,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;T_(t,e),t=e.pendingProps;var i=yv(e,ps.current);Kg(e,n),i=fO(null,e,r,t,i,n);var o=hO();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ia(r)?(o=!0,kE(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,aO(e),i.updater=wA,e.stateNode=i,i._reactInternals=e,FR(e,r,t,n),e=LR(null,e,r,!0,o,n)):(e.tag=0,Ei&&o&&eO(e),Cs(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(T_(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Kde(r),t=Gl(r,t),i){case 0:e=NR(null,e,r,t,n);break e;case 1:e=aj(null,e,r,t,n);break e;case 11:e=oj(null,e,r,t,n);break e;case 14:e=sj(null,e,r,Gl(r.type,t),n);break e}throw Error(Ut(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gl(r,i),NR(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gl(r,i),aj(t,e,r,i,n);case 3:e:{if(JH(e),t===null)throw Error(Ut(387));r=e.pendingProps,o=e.memoizedState,i=o.element,AH(t,e),BE(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Sv(Error(Ut(423)),e),e=lj(t,e,r,n,i);break e}else if(r!==i){i=Sv(Error(Ut(424)),e),e=lj(t,e,r,n,i);break e}else for(Ca=Ff(e.stateNode.containerInfo.firstChild),Ma=e,Ei=!0,Kl=null,n=EH(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xv(),r===i){e=fd(t,e,n);break e}Cs(t,e,r,n)}e=e.child}return e;case 5:return TH(e),t===null&&RR(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,AR(r,i)?s=null:o!==null&&AR(r,o)&&(e.flags|=32),ZH(t,e),Cs(t,e,s,n),e.child;case 6:return t===null&&RR(e),null;case 13:return eG(t,e,n);case 4:return lO(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=bv(e,null,r,n):Cs(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gl(r,i),oj(t,e,r,i,n);case 7:return Cs(t,e,e.pendingProps,n),e.child;case 8:return Cs(t,e,e.pendingProps.children,n),e.child;case 12:return Cs(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,li(NE,r._currentValue),r._currentValue=s,o!==null)if(cc(o.value,s)){if(o.children===i.children&&!ra.current){e=fd(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Zu(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),IR(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(Ut(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),IR(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Cs(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Kg(e,n),i=yl(i),r=r(i),e.flags|=1,Cs(t,e,r,n),e.child;case 14:return r=e.type,i=Gl(r,e.pendingProps),i=Gl(r.type,i),sj(t,e,r,i,n);case 15:return XH(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gl(r,i),T_(t,e),e.tag=1,ia(r)?(t=!0,kE(e)):t=!1,Kg(e,n),qH(e,r,i),FR(e,r,i,n),LR(null,e,r,!0,t,n);case 19:return tG(t,e,n);case 22:return QH(t,e,n)}throw Error(Ut(156,e.tag))};function vG(t,e){return $7(t,e)}function qde(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fl(t,e,n,r){return new qde(t,e,n,r)}function _O(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Kde(t){if(typeof t=="function")return _O(t)?1:0;if(t!=null){if(t=t.$$typeof,t===VF)return 11;if(t===WF)return 14}return 2}function Bf(t,e){var n=t.alternate;return n===null?(n=fl(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function D_(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")_O(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case xg:return xp(n.children,i,o,e);case zF:s=8,i|=8;break;case iR:return t=fl(12,n,e,i|2),t.elementType=iR,t.lanes=o,t;case oR:return t=fl(13,n,e,i),t.elementType=oR,t.lanes=o,t;case sR:return t=fl(19,n,e,i),t.elementType=sR,t.lanes=o,t;case T7:return EA(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case C7:s=10;break e;case A7:s=9;break e;case VF:s=11;break e;case WF:s=14;break e;case cf:s=16,r=null;break e}throw Error(Ut(130,t==null?t:typeof t,""))}return e=fl(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function xp(t,e,n,r){return t=fl(7,t,r,e),t.lanes=n,t}function EA(t,e,n,r){return t=fl(22,t,r,e),t.elementType=T7,t.lanes=n,t.stateNode={isHidden:!1},t}function IM(t,e,n){return t=fl(6,t,null,e),t.lanes=n,t}function kM(t,e,n){return e=fl(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Yde(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hM(0),this.expirationTimes=hM(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hM(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function EO(t,e,n,r,i,o,s,a,l){return t=new Yde(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=fl(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},aO(o),t}function Xde(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yg,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function yG(t){if(!t)return Xf;t=t._reactInternals;e:{if(lm(t)!==t||t.tag!==1)throw Error(Ut(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ia(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ut(171))}if(t.tag===1){var n=t.type;if(ia(n))return yH(t,n,e)}return e}function xG(t,e,n,r,i,o,s,a,l){return t=EO(n,r,!0,t,i,o,s,a,l),t.context=yG(null),n=t.current,r=Rs(),i=Lf(n),o=Zu(r,i),o.callback=e!=null?e:null,Of(n,o,i),t.current.lanes=i,tw(t,i,r),oa(t,r),t}function CA(t,e,n,r){var i=e.current,o=Rs(),s=Lf(i);return n=yG(n),e.context===null?e.context=n:e.pendingContext=n,e=Zu(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Of(i,e,s),t!==null&&(sc(t,i,s,o),E_(t,i,s)),s}function GE(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yj(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function CO(t,e){yj(t,e),(t=t.alternate)&&yj(t,e)}function Qde(){return null}var bG=typeof reportError=="function"?reportError:function(t){console.error(t)};function AO(t){this._internalRoot=t}AA.prototype.render=AO.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ut(409));CA(t,e,null,null)};AA.prototype.unmount=AO.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;jp(function(){CA(null,t,null,null)}),e[ud]=null}};function AA(t){this._internalRoot=t}AA.prototype.unstable_scheduleHydration=function(t){if(t){var e=Q7();t={blockedOn:null,target:t,priority:e};for(var n=0;n<mf.length&&e!==0&&e<mf[n].priority;n++);mf.splice(n,0,t),n===0&&J7(t)}};function TO(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function TA(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xj(){}function Zde(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=GE(s);o.call(c)}}var s=xG(e,r,t,0,null,!1,!1,"",xj);return t._reactRootContainer=s,t[ud]=s.current,Kx(t.nodeType===8?t.parentNode:t),jp(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=GE(l);a.call(c)}}var l=EO(t,0,!1,null,null,!1,!1,"",xj);return t._reactRootContainer=l,t[ud]=l.current,Kx(t.nodeType===8?t.parentNode:t),jp(function(){CA(e,l,n,r)}),l}function MA(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=GE(s);a.call(l)}}CA(e,s,t,i)}else s=Zde(n,e,t,i,r);return GE(s)}Y7=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ey(e.pendingLanes);n!==0&&(GF(e,n|1),oa(e,Qi()),!(Tr&6)&&(_v=Qi()+500,ah()))}break;case 13:jp(function(){var r=dd(t,1);if(r!==null){var i=Rs();sc(r,t,1,i)}}),CO(t,1)}};qF=function(t){if(t.tag===13){var e=dd(t,134217728);if(e!==null){var n=Rs();sc(e,t,134217728,n)}CO(t,134217728)}};X7=function(t){if(t.tag===13){var e=Lf(t),n=dd(t,e);if(n!==null){var r=Rs();sc(n,t,e,r)}CO(t,e)}};Q7=function(){return Qr};Z7=function(t,e){var n=Qr;try{return Qr=t,e()}finally{Qr=n}};gR=function(t,e,n){switch(e){case"input":if(cR(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=yA(r);if(!i)throw Error(Ut(90));P7(r),cR(r,i)}}}break;case"textarea":R7(t,n);break;case"select":e=n.value,e!=null&&$g(t,!!n.multiple,e,!1)}};B7=bO;j7=jp;var Jde={usingClientEntryPoint:!1,Events:[rw,_g,yA,N7,L7,bO]},Y0={findFiberByHostInstance:ap,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},efe={bundleType:Y0.bundleType,version:Y0.version,rendererPackageName:Y0.rendererPackageName,rendererConfig:Y0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Td.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=V7(t),t===null?null:t.stateNode},findFiberByHostInstance:Y0.findFiberByHostInstance||Qde,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var iS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iS.isDisabled&&iS.supportsFiber)try{pA=iS.inject(efe),Lc=iS}catch(t){}}ja.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jde;ja.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!TO(e))throw Error(Ut(200));return Xde(t,e,null,n)};ja.createRoot=function(t,e){if(!TO(t))throw Error(Ut(299));var n=!1,r="",i=bG;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=EO(t,1,!1,null,null,n,!1,r,i),t[ud]=e.current,Kx(t.nodeType===8?t.parentNode:t),new AO(e)};ja.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ut(188)):(t=Object.keys(t).join(","),Error(Ut(268,t)));return t=V7(e),t=t===null?null:t.stateNode,t};ja.flushSync=function(t){return jp(t)};ja.hydrate=function(t,e,n){if(!TA(e))throw Error(Ut(200));return MA(null,t,e,!0,n)};ja.hydrateRoot=function(t,e,n){if(!TO(t))throw Error(Ut(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=bG;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=xG(e,null,t,1,n!=null?n:null,i,!1,o,s),t[ud]=e.current,Kx(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new AA(e)};ja.render=function(t,e,n){if(!TA(e))throw Error(Ut(200));return MA(null,t,e,!1,n)};ja.unmountComponentAtNode=function(t){if(!TA(t))throw Error(Ut(40));return t._reactRootContainer?(jp(function(){MA(null,null,t,!1,function(){t._reactRootContainer=null,t[ud]=null})}),!0):!1};ja.unstable_batchedUpdates=bO;ja.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!TA(n))throw Error(Ut(200));if(t==null||t._reactInternals===void 0)throw Error(Ut(38));return MA(t,e,n,!1,r)};ja.version="18.3.1-next-f1338f8080-20240426";function wG(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wG)}catch(t){console.error(t)}}wG(),w7.exports=ja;var ec=w7.exports;const tfe=Ad(ec);var bj=ec;nR.createRoot=bj.createRoot,nR.hydrateRoot=bj.hydrateRoot;function nfe(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function rfe(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var ife=function(){function t(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(rfe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=nfe(i);try{o.insertRule(r,o.cssRules.length)}catch(s){}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),os="-ms-",qE="-moz-",Br="-webkit-",SG="comm",MO="rule",PO="decl",ofe="@import",_G="@keyframes",sfe="@layer",afe=Math.abs,PA=String.fromCharCode,lfe=Object.assign;function cfe(t,e){return Uo(t,0)^45?(((e<<2^Uo(t,0))<<2^Uo(t,1))<<2^Uo(t,2))<<2^Uo(t,3):0}function EG(t){return t.trim()}function ufe(t,e){return(t=e.exec(t))?t[0]:t}function jr(t,e,n){return t.replace(e,n)}function YR(t,e){return t.indexOf(e)}function Uo(t,e){return t.charCodeAt(e)|0}function rb(t,e,n){return t.slice(e,n)}function Pc(t){return t.length}function DO(t){return t.length}function oS(t,e){return e.push(t),t}function dfe(t,e){return t.map(e).join("")}var DA=1,Ev=1,CG=0,ua=0,oo=0,i0="";function RA(t,e,n,r,i,o,s){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:DA,column:Ev,length:s,return:""}}function X0(t,e){return lfe(RA("",null,null,"",null,null,0),t,{length:-t.length},e)}function ffe(){return oo}function hfe(){return oo=ua>0?Uo(i0,--ua):0,Ev--,oo===10&&(Ev=1,DA--),oo}function Pa(){return oo=ua<CG?Uo(i0,ua++):0,Ev++,oo===10&&(Ev=1,DA++),oo}function jc(){return Uo(i0,ua)}function R_(){return ua}function ow(t,e){return rb(i0,t,e)}function ib(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function AG(t){return DA=Ev=1,CG=Pc(i0=t),ua=0,[]}function TG(t){return i0="",t}function I_(t){return EG(ow(ua-1,XR(t===91?t+2:t===40?t+1:t)))}function pfe(t){for(;(oo=jc())&&oo<33;)Pa();return ib(t)>2||ib(oo)>3?"":" "}function mfe(t,e){for(;--e&&Pa()&&!(oo<48||oo>102||oo>57&&oo<65||oo>70&&oo<97););return ow(t,R_()+(e<6&&jc()==32&&Pa()==32))}function XR(t){for(;Pa();)switch(oo){case t:return ua;case 34:case 39:t!==34&&t!==39&&XR(oo);break;case 40:t===41&&XR(t);break;case 92:Pa();break}return ua}function gfe(t,e){for(;Pa()&&t+oo!==57;)if(t+oo===84&&jc()===47)break;return"/*"+ow(e,ua-1)+"*"+PA(t===47?t:Pa())}function vfe(t){for(;!ib(jc());)Pa();return ow(t,ua)}function yfe(t){return TG(k_("",null,null,null,[""],t=AG(t),0,[0],t))}function k_(t,e,n,r,i,o,s,a,l){for(var c=0,u=0,d=s,f=0,p=0,b=0,v=1,m=1,g=1,x=0,w="",S=i,P=o,I=r,M=w;m;)switch(b=x,x=Pa()){case 40:if(b!=108&&Uo(M,d-1)==58){YR(M+=jr(I_(x),"&","&\f"),"&\f")!=-1&&(g=-1);break}case 34:case 39:case 91:M+=I_(x);break;case 9:case 10:case 13:case 32:M+=pfe(b);break;case 92:M+=mfe(R_()-1,7);continue;case 47:switch(jc()){case 42:case 47:oS(xfe(gfe(Pa(),R_()),e,n),l);break;default:M+="/"}break;case 123*v:a[c++]=Pc(M)*g;case 125*v:case 59:case 0:switch(x){case 0:case 125:m=0;case 59+u:g==-1&&(M=jr(M,/\f/g,"")),p>0&&Pc(M)-d&&oS(p>32?Sj(M+";",r,n,d-1):Sj(jr(M," ","")+";",r,n,d-2),l);break;case 59:M+=";";default:if(oS(I=wj(M,e,n,c,u,i,a,w,S=[],P=[],d),o),x===123)if(u===0)k_(M,e,I,I,S,o,d,a,P);else switch(f===99&&Uo(M,3)===110?100:f){case 100:case 108:case 109:case 115:k_(t,I,I,r&&oS(wj(t,I,I,0,0,i,a,w,i,S=[],d),P),i,P,d,a,r?S:P);break;default:k_(M,I,I,I,[""],P,0,a,P)}}c=u=p=0,v=g=1,w=M="",d=s;break;case 58:d=1+Pc(M),p=b;default:if(v<1){if(x==123)--v;else if(x==125&&v++==0&&hfe()==125)continue}switch(M+=PA(x),x*v){case 38:g=u>0?1:(M+="\f",-1);break;case 44:a[c++]=(Pc(M)-1)*g,g=1;break;case 64:jc()===45&&(M+=I_(Pa())),f=jc(),u=d=Pc(w=M+=vfe(R_())),x++;break;case 45:b===45&&Pc(M)==2&&(v=0)}}return o}function wj(t,e,n,r,i,o,s,a,l,c,u){for(var d=i-1,f=i===0?o:[""],p=DO(f),b=0,v=0,m=0;b<r;++b)for(var g=0,x=rb(t,d+1,d=afe(v=s[b])),w=t;g<p;++g)(w=EG(v>0?f[g]+" "+x:jr(x,/&\f/g,f[g])))&&(l[m++]=w);return RA(t,e,n,i===0?MO:a,l,c,u)}function xfe(t,e,n){return RA(t,e,n,SG,PA(ffe()),rb(t,2,-2),0)}function Sj(t,e,n,r){return RA(t,e,n,PO,rb(t,0,r),rb(t,r+1,-1),r)}function Xg(t,e){for(var n="",r=DO(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function bfe(t,e,n,r){switch(t.type){case sfe:if(t.children.length)break;case ofe:case PO:return t.return=t.return||t.value;case SG:return"";case _G:return t.return=t.value+"{"+Xg(t.children,r)+"}";case MO:t.value=t.props.join(",")}return Pc(n=Xg(t.children,r))?t.return=t.value+"{"+n+"}":""}function wfe(t){var e=DO(t);return function(n,r,i,o){for(var s="",a=0;a<e;a++)s+=t[a](n,r,i,o)||"";return s}}function Sfe(t){return function(e){e.root||(e=e.return)&&t(e)}}function MG(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var _fe=function(e,n,r){for(var i=0,o=0;i=o,o=jc(),i===38&&o===12&&(n[r]=1),!ib(o);)Pa();return ow(e,ua)},Efe=function(e,n){var r=-1,i=44;do switch(ib(i)){case 0:i===38&&jc()===12&&(n[r]=1),e[r]+=_fe(ua-1,n,r);break;case 2:e[r]+=I_(i);break;case 4:if(i===44){e[++r]=jc()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=PA(i)}while(i=Pa());return e},Cfe=function(e,n){return TG(Efe(AG(e),n))},_j=new WeakMap,Afe=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!_j.get(r))&&!i){_j.set(e,!0);for(var o=[],s=Cfe(n,o),a=r.props,l=0,c=0;l<s.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=o[l]?s[l].replace(/&\f/g,a[u]):a[u]+" "+s[l]}}},Tfe=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function PG(t,e){switch(cfe(t,e)){case 5103:return Br+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Br+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Br+t+qE+t+os+t+t;case 6828:case 4268:return Br+t+os+t+t;case 6165:return Br+t+os+"flex-"+t+t;case 5187:return Br+t+jr(t,/(\w+).+(:[^]+)/,Br+"box-$1$2"+os+"flex-$1$2")+t;case 5443:return Br+t+os+"flex-item-"+jr(t,/flex-|-self/,"")+t;case 4675:return Br+t+os+"flex-line-pack"+jr(t,/align-content|flex-|-self/,"")+t;case 5548:return Br+t+os+jr(t,"shrink","negative")+t;case 5292:return Br+t+os+jr(t,"basis","preferred-size")+t;case 6060:return Br+"box-"+jr(t,"-grow","")+Br+t+os+jr(t,"grow","positive")+t;case 4554:return Br+jr(t,/([^-])(transform)/g,"$1"+Br+"$2")+t;case 6187:return jr(jr(jr(t,/(zoom-|grab)/,Br+"$1"),/(image-set)/,Br+"$1"),t,"")+t;case 5495:case 3959:return jr(t,/(image-set\([^]*)/,Br+"$1$`$1");case 4968:return jr(jr(t,/(.+:)(flex-)?(.*)/,Br+"box-pack:$3"+os+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Br+t+t;case 4095:case 3583:case 4068:case 2532:return jr(t,/(.+)-inline(.+)/,Br+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Pc(t)-1-e>6)switch(Uo(t,e+1)){case 109:if(Uo(t,e+4)!==45)break;case 102:return jr(t,/(.+:)(.+)-([^]+)/,"$1"+Br+"$2-$3$1"+qE+(Uo(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~YR(t,"stretch")?PG(jr(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Uo(t,e+1)!==115)break;case 6444:switch(Uo(t,Pc(t)-3-(~YR(t,"!important")&&10))){case 107:return jr(t,":",":"+Br)+t;case 101:return jr(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Br+(Uo(t,14)===45?"inline-":"")+"box$3$1"+Br+"$2$3$1"+os+"$2box$3")+t}break;case 5936:switch(Uo(t,e+11)){case 114:return Br+t+os+jr(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Br+t+os+jr(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Br+t+os+jr(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Br+t+os+t+t}return t}var Mfe=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case PO:e.return=PG(e.value,e.length);break;case _G:return Xg([X0(e,{value:jr(e.value,"@","@"+Br)})],i);case MO:if(e.length)return dfe(e.props,function(o){switch(ufe(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Xg([X0(e,{props:[jr(o,/:(read-\w+)/,":"+qE+"$1")]})],i);case"::placeholder":return Xg([X0(e,{props:[jr(o,/:(plac\w+)/,":"+Br+"input-$1")]}),X0(e,{props:[jr(o,/:(plac\w+)/,":"+qE+"$1")]}),X0(e,{props:[jr(o,/:(plac\w+)/,os+"input-$1")]})],i)}return""})}},Pfe=[Mfe],Dfe=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(v){var m=v.getAttribute("data-emotion");m.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var i=e.stylisPlugins||Pfe,o={},s,a=[];s=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(v){for(var m=v.getAttribute("data-emotion").split(" "),g=1;g<m.length;g++)o[m[g]]=!0;a.push(v)});var l,c=[Afe,Tfe];{var u,d=[bfe,Sfe(function(v){u.insert(v)})],f=wfe(c.concat(i,d)),p=function(m){return Xg(yfe(m),f)};l=function(m,g,x,w){u=x,p(m?m+"{"+g.styles+"}":g.styles),w&&(b.inserted[g.name]=!0)}}var b={key:n,sheet:new ife({key:n,container:s,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:l};return b.sheet.hydrate(a),b};function Up(){return Up=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Up.apply(null,arguments)}var Ej=function(e){var n=new WeakMap;return function(r){if(n.has(r))return n.get(r);var i=e(r);return n.set(r,i),i}},DG={exports:{}},Jr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fo=typeof Symbol=="function"&&Symbol.for,RO=Fo?Symbol.for("react.element"):60103,IO=Fo?Symbol.for("react.portal"):60106,IA=Fo?Symbol.for("react.fragment"):60107,kA=Fo?Symbol.for("react.strict_mode"):60108,FA=Fo?Symbol.for("react.profiler"):60114,OA=Fo?Symbol.for("react.provider"):60109,NA=Fo?Symbol.for("react.context"):60110,kO=Fo?Symbol.for("react.async_mode"):60111,LA=Fo?Symbol.for("react.concurrent_mode"):60111,BA=Fo?Symbol.for("react.forward_ref"):60112,jA=Fo?Symbol.for("react.suspense"):60113,Rfe=Fo?Symbol.for("react.suspense_list"):60120,UA=Fo?Symbol.for("react.memo"):60115,zA=Fo?Symbol.for("react.lazy"):60116,Ife=Fo?Symbol.for("react.block"):60121,kfe=Fo?Symbol.for("react.fundamental"):60117,Ffe=Fo?Symbol.for("react.responder"):60118,Ofe=Fo?Symbol.for("react.scope"):60119;function za(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case RO:switch(t=t.type,t){case kO:case LA:case IA:case FA:case kA:case jA:return t;default:switch(t=t&&t.$$typeof,t){case NA:case BA:case zA:case UA:case OA:return t;default:return e}}case IO:return e}}}function RG(t){return za(t)===LA}Jr.AsyncMode=kO;Jr.ConcurrentMode=LA;Jr.ContextConsumer=NA;Jr.ContextProvider=OA;Jr.Element=RO;Jr.ForwardRef=BA;Jr.Fragment=IA;Jr.Lazy=zA;Jr.Memo=UA;Jr.Portal=IO;Jr.Profiler=FA;Jr.StrictMode=kA;Jr.Suspense=jA;Jr.isAsyncMode=function(t){return RG(t)||za(t)===kO};Jr.isConcurrentMode=RG;Jr.isContextConsumer=function(t){return za(t)===NA};Jr.isContextProvider=function(t){return za(t)===OA};Jr.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===RO};Jr.isForwardRef=function(t){return za(t)===BA};Jr.isFragment=function(t){return za(t)===IA};Jr.isLazy=function(t){return za(t)===zA};Jr.isMemo=function(t){return za(t)===UA};Jr.isPortal=function(t){return za(t)===IO};Jr.isProfiler=function(t){return za(t)===FA};Jr.isStrictMode=function(t){return za(t)===kA};Jr.isSuspense=function(t){return za(t)===jA};Jr.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===IA||t===LA||t===FA||t===kA||t===jA||t===Rfe||typeof t=="object"&&t!==null&&(t.$$typeof===zA||t.$$typeof===UA||t.$$typeof===OA||t.$$typeof===NA||t.$$typeof===BA||t.$$typeof===kfe||t.$$typeof===Ffe||t.$$typeof===Ofe||t.$$typeof===Ife)};Jr.typeOf=za;DG.exports=Jr;var Nfe=DG.exports,IG=Nfe,Lfe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Bfe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},kG={};kG[IG.ForwardRef]=Lfe;kG[IG.Memo]=Bfe;var jfe=!0;function Ufe(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var FG=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||jfe===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},OG=function(e,n,r){FG(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var o=n;do e.insert(n===o?"."+i:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function zfe(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Vfe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Wfe=/[A-Z]|^ms/g,$fe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,NG=function(e){return e.charCodeAt(1)===45},Cj=function(e){return e!=null&&typeof e!="boolean"},FM=MG(function(t){return NG(t)?t:t.replace(Wfe,"-$&").toLowerCase()}),Aj=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace($fe,function(r,i,o){return Dc={name:i,styles:o,next:Dc},i})}return Vfe[e]!==1&&!NG(e)&&typeof n=="number"&&n!==0?n+"px":n};function ob(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Dc={name:i.name,styles:i.styles,next:Dc},i.name;var o=n;if(o.styles!==void 0){var s=o.next;if(s!==void 0)for(;s!==void 0;)Dc={name:s.name,styles:s.styles,next:Dc},s=s.next;var a=o.styles+";";return a}return Hfe(t,e,n)}case"function":{if(t!==void 0){var l=Dc,c=n(t);return Dc=l,ob(t,e,c)}break}}var u=n;if(e==null)return u;var d=e[u];return d!==void 0?d:u}function Hfe(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=ob(t,e,n[i])+";";else for(var o in n){var s=n[o];if(typeof s!="object"){var a=s;e!=null&&e[a]!==void 0?r+=o+"{"+e[a]+"}":Cj(a)&&(r+=FM(o)+":"+Aj(o,a)+";")}else if(Array.isArray(s)&&typeof s[0]=="string"&&(e==null||e[s[0]]===void 0))for(var l=0;l<s.length;l++)Cj(s[l])&&(r+=FM(o)+":"+Aj(o,s[l])+";");else{var c=ob(t,e,s);switch(o){case"animation":case"animationName":{r+=FM(o)+":"+c+";";break}default:r+=o+"{"+c+"}"}}}return r}var Tj=/label:\s*([^\s;{]+)\s*(;|$)/g,Dc;function FO(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";Dc=void 0;var o=t[0];if(o==null||o.raw===void 0)r=!1,i+=ob(n,e,o);else{var s=o;i+=s[0]}for(var a=1;a<t.length;a++)if(i+=ob(n,e,t[a]),r){var l=o;i+=l[a]}Tj.lastIndex=0;for(var c="",u;(u=Tj.exec(i))!==null;)c+="-"+u[1];var d=zfe(i)+c;return{name:d,styles:i,next:Dc}}var Gfe=function(e){return e()},LG=p4.useInsertionEffect?p4.useInsertionEffect:!1,qfe=LG||Gfe,Mj=LG||T.useLayoutEffect,BG=T.createContext(typeof HTMLElement!="undefined"?Dfe({key:"css"}):null);BG.Provider;var jG=function(e){return T.forwardRef(function(n,r){var i=T.useContext(BG);return e(n,i,r)})},sb=T.createContext({}),Kfe=function(e,n){if(typeof n=="function"){var r=n(e);return r}return Up({},e,n)},Yfe=Ej(function(t){return Ej(function(e){return Kfe(t,e)})}),Xfe=function(e){var n=T.useContext(sb);return e.theme!==n&&(n=Yfe(n)(e.theme)),T.createElement(sb.Provider,{value:n},e.children)},VA=jG(function(t,e){var n=t.styles,r=FO([n],void 0,T.useContext(sb)),i=T.useRef();return Mj(function(){var o=e.key+"-global",s=new e.sheet.constructor({key:o,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+o+" "+r.name+'"]');return e.sheet.tags.length&&(s.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",o),s.hydrate([l])),i.current=[s,a],function(){s.flush()}},[e]),Mj(function(){var o=i.current,s=o[0],a=o[1];if(a){o[1]=!1;return}if(r.next!==void 0&&OG(e,r.next,!0),s.tags.length){var l=s.tags[s.tags.length-1].nextElementSibling;s.before=l,s.flush()}e.insert("",r,s,!1)},[e,r.name]),null});function Qfe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return FO(e)}var sw=function(){var e=Qfe.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},UG=String.raw,zG=UG`
  :root,
  :host {
    --chakra-vh: 100vh;
  }

  @supports (height: -webkit-fill-available) {
    :root,
    :host {
      --chakra-vh: -webkit-fill-available;
    }
  }

  @supports (height: -moz-fill-available) {
    :root,
    :host {
      --chakra-vh: -moz-fill-available;
    }
  }

  @supports (height: 100dvh) {
    :root,
    :host {
      --chakra-vh: 100dvh;
    }
  }
`,Zfe=()=>h.jsx(VA,{styles:zG}),Jfe=({scope:t=""})=>h.jsx(VA,{styles:UG`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        touch-action: manipulation;
      }

      body {
        position: relative;
        min-height: 100%;
        margin: 0;
        font-feature-settings: "kern";
      }

      ${t} :where(*, *::before, *::after) {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
        word-wrap: break-word;
      }

      main {
        display: block;
      }

      ${t} hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      ${t} :where(pre, code, kbd,samp) {
        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      ${t} a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      ${t} abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      ${t} :where(b, strong) {
        font-weight: bold;
      }

      ${t} small {
        font-size: 80%;
      }

      ${t} :where(sub,sup) {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      ${t} sub {
        bottom: -0.25em;
      }

      ${t} sup {
        top: -0.5em;
      }

      ${t} img {
        border-style: none;
      }

      ${t} :where(button, input, optgroup, select, textarea) {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      ${t} :where(button, input) {
        overflow: visible;
      }

      ${t} :where(button, select) {
        text-transform: none;
      }

      ${t} :where(
          button::-moz-focus-inner,
          [type="button"]::-moz-focus-inner,
          [type="reset"]::-moz-focus-inner,
          [type="submit"]::-moz-focus-inner
        ) {
        border-style: none;
        padding: 0;
      }

      ${t} fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      ${t} legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      ${t} progress {
        vertical-align: baseline;
      }

      ${t} textarea {
        overflow: auto;
      }

      ${t} :where([type="checkbox"], [type="radio"]) {
        box-sizing: border-box;
        padding: 0;
      }

      ${t} input[type="number"]::-webkit-inner-spin-button,
      ${t} input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      ${t} input[type="number"] {
        -moz-appearance: textfield;
      }

      ${t} input[type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      ${t} input[type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ${t} ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      ${t} details {
        display: block;
      }

      ${t} summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      ${t} :where(
          blockquote,
          dl,
          dd,
          h1,
          h2,
          h3,
          h4,
          h5,
          h6,
          hr,
          figure,
          p,
          pre
        ) {
        margin: 0;
      }

      ${t} button {
        background: transparent;
        padding: 0;
      }

      ${t} fieldset {
        margin: 0;
        padding: 0;
      }

      ${t} :where(ol, ul) {
        margin: 0;
        padding: 0;
      }

      ${t} textarea {
        resize: vertical;
      }

      ${t} :where(button, [role="button"]) {
        cursor: pointer;
      }

      ${t} button::-moz-focus-inner {
        border: 0 !important;
      }

      ${t} table {
        border-collapse: collapse;
      }

      ${t} :where(h1, h2, h3, h4, h5, h6) {
        font-size: inherit;
        font-weight: inherit;
      }

      ${t} :where(button, input, optgroup, select, textarea) {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      ${t} :where(img, svg, video, canvas, audio, iframe, embed, object) {
        display: block;
      }

      ${t} :where(img, video) {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible]
        :focus:not([data-focus-visible-added]):not(
          [data-focus-visible-disabled]
        ) {
        outline: none;
        box-shadow: none;
      }

      ${t} select::-ms-expand {
        display: none;
      }

      ${zG}
    `});function ehe(t,e){return`${t} returned \`undefined\`. Seems you forgot to wrap component within ${e}`}function Ai(t={}){const{name:e,strict:n=!0,hookName:r="useContext",providerName:i="Provider",errorMessage:o,defaultValue:s}=t,a=T.createContext(s);a.displayName=e;function l(){var c;const u=T.useContext(a);if(!u&&n){const d=new Error(o!=null?o:ehe(r,i));throw d.name="ContextError",(c=Error.captureStackTrace)==null||c.call(Error,d,l),d}return u}return[a.Provider,l,a]}var[the,nhe]=Ai({strict:!1,name:"PortalManagerContext"});function VG(t){const{children:e,zIndex:n}=t;return h.jsx(the,{value:{zIndex:n},children:e})}VG.displayName="PortalManager";var Ju=globalThis!=null&&globalThis.document?T.useLayoutEffect:T.useEffect,[WG,rhe]=Ai({strict:!1,name:"PortalContext"}),OO="chakra-portal",ihe=".chakra-portal",ohe=t=>h.jsx("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:t.zIndex,top:0,left:0,right:0},children:t.children}),she=t=>{const{appendToParentPortal:e,children:n}=t,[r,i]=T.useState(null),o=T.useRef(null),[,s]=T.useState({});T.useEffect(()=>s({}),[]);const a=rhe(),l=nhe();Ju(()=>{if(!r)return;const u=r.ownerDocument,d=e&&a!=null?a:u.body;if(!d)return;o.current=u.createElement("div"),o.current.className=OO,d.appendChild(o.current),s({});const f=o.current;return()=>{d.contains(f)&&d.removeChild(f)}},[r]);const c=l!=null&&l.zIndex?h.jsx(ohe,{zIndex:l==null?void 0:l.zIndex,children:n}):n;return o.current?ec.createPortal(h.jsx(WG,{value:o.current,children:c}),o.current):h.jsx("span",{ref:u=>{u&&i(u)}})},ahe=t=>{const{children:e,containerRef:n,appendToParentPortal:r}=t,i=n.current,o=i!=null?i:typeof window!="undefined"?document.body:void 0,s=T.useMemo(()=>{const l=i==null?void 0:i.ownerDocument.createElement("div");return l&&(l.className=OO),l},[i]),[,a]=T.useState({});return Ju(()=>a({}),[]),Ju(()=>{if(!(!s||!o))return o.appendChild(s),()=>{o.removeChild(s)}},[s,o]),o&&s?ec.createPortal(h.jsx(WG,{value:r?s:null,children:e}),s):null};function o0(t){const i=j({appendToParentPortal:!0},t),{containerRef:n}=i,r=Dt(i,["containerRef"]);return n?h.jsx(ahe,j({containerRef:n},r)):h.jsx(she,j({},r))}o0.className=OO;o0.selector=ihe;o0.displayName="Portal";function aw(){const t=T.useContext(sb);if(!t)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return t}var NO=T.createContext({});NO.displayName="ColorModeContext";function WA(){const t=T.useContext(NO);if(t===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return t}function Xl(t,e){const{colorMode:n}=WA();return n==="dark"?e:t}var sS={light:"chakra-ui-light",dark:"chakra-ui-dark"};function lhe(t={}){const{preventTransition:e=!0}=t,n={setDataset:r=>{const i=e?n.preventTransition():void 0;document.documentElement.dataset.theme=r,document.documentElement.style.colorScheme=r,i==null||i()},setClassName(r){document.body.classList.add(r?sS.dark:sS.light),document.body.classList.remove(r?sS.light:sS.dark)},query(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme(r){var i;return((i=n.query().matches)!=null?i:r==="dark")?"dark":"light"},addListener(r){const i=n.query(),o=s=>{r(s.matches?"dark":"light")};return typeof i.addListener=="function"?i.addListener(o):i.addEventListener("change",o),()=>{typeof i.removeListener=="function"?i.removeListener(o):i.removeEventListener("change",o)}},preventTransition(){const r=document.createElement("style");return r.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(r),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(r)})})}}};return n}var che="chakra-ui-color-mode";function uhe(t){return{ssr:!1,type:"localStorage",get(e){if(!(globalThis!=null&&globalThis.document))return e;let n;try{n=localStorage.getItem(t)||e}catch(r){}return n||e},set(e){try{localStorage.setItem(t,e)}catch(n){}}}}var dhe=uhe(che),Pj=()=>{};function Dj(t,e){return t.type==="cookie"&&t.ssr?t.get(e):e}function $G(t){const{value:e,children:n,options:{useSystemColorMode:r,initialColorMode:i,disableTransitionOnChange:o}={},colorModeManager:s=dhe}=t,a=i==="dark"?"dark":"light",[l,c]=T.useState(()=>Dj(s,a)),[u,d]=T.useState(()=>Dj(s)),{getSystemTheme:f,setClassName:p,setDataset:b,addListener:v}=T.useMemo(()=>lhe({preventTransition:o}),[o]),m=i==="system"&&!l?u:l,g=T.useCallback(S=>{const P=S==="system"?f():S;c(P),p(P==="dark"),b(P),s.set(P)},[s,f,p,b]);Ju(()=>{i==="system"&&d(f())},[]),T.useEffect(()=>{const S=s.get();if(S){g(S);return}if(i==="system"){g("system");return}g(a)},[s,a,i,g]);const x=T.useCallback(()=>{g(m==="dark"?"light":"dark")},[m,g]);T.useEffect(()=>{if(r)return v(g)},[r,v,g]);const w=T.useMemo(()=>({colorMode:e!=null?e:m,toggleColorMode:e?Pj:x,setColorMode:e?Pj:g,forced:e!==void 0}),[m,x,g,e]);return h.jsx(NO.Provider,{value:w,children:n})}$G.displayName="ColorModeProvider";var fhe=new Set(["dark","light","system"]);function hhe(t){let e=t;return fhe.has(e)||(e="light"),e}function phe(t={}){const{initialColorMode:e="light",type:n="localStorage",storageKey:r="chakra-ui-color-mode"}=t,i=hhe(e),o=n==="cookie",s=`(function(){try{var a=function(o){var l="(prefers-color-scheme: dark)",v=window.matchMedia(l).matches?"dark":"light",e=o==="system"?v:o,d=document.documentElement,m=document.body,i="chakra-ui-light",n="chakra-ui-dark",s=e==="dark";return m.classList.add(s?n:i),m.classList.remove(s?i:n),d.style.colorScheme=e,d.dataset.theme=e,e},u=a,h="${i}",r="${r}",t=document.cookie.match(new RegExp("(^| )".concat(r,"=([^;]+)"))),c=t?t[2]:null;c?a(c):document.cookie="".concat(r,"=").concat(a(h),"; max-age=31536000; path=/")}catch(a){}})();
  `,a=`(function(){try{var a=function(c){var v="(prefers-color-scheme: dark)",h=window.matchMedia(v).matches?"dark":"light",r=c==="system"?h:c,o=document.documentElement,s=document.body,l="chakra-ui-light",d="chakra-ui-dark",i=r==="dark";return s.classList.add(i?d:l),s.classList.remove(i?l:d),o.style.colorScheme=r,o.dataset.theme=r,r},n=a,m="${i}",e="${r}",t=localStorage.getItem(e);t?a(t):localStorage.setItem(e,a(m))}catch(a){}})();
  `;return`!${o?s:a}`.trim()}function mhe(t={}){const{nonce:e}=t;return h.jsx("script",{id:"chakra-script",nonce:e,dangerouslySetInnerHTML:{__html:phe(t)}})}function HG(){const t=WA(),e=aw();return se(j({},t),{theme:e})}function ghe(t,e,n){var r,i;if(e==null)return e;const o=s=>{var a,l;return(l=(a=t.__cssMap)==null?void 0:a[s])==null?void 0:l.value};return(i=(r=o(e))!=null?r:o(n))!=null?i:n}function vhe(t,e,n){const r=Array.isArray(e)?e:[e],i=Array.isArray(n)?n:[n];return o=>{const s=i.filter(Boolean),a=r.map((l,c)=>{var u;const d=`${t}.${l}`;return ghe(o,d,(u=s[c])!=null?u:l)});return Array.isArray(e)?a:a[0]}}var Sn=(...t)=>t.filter(Boolean).join(" ");function us(t){const e=typeof t;return t!=null&&(e==="object"||e==="function")&&!Array.isArray(t)}var lw=t=>{const{condition:e,message:n}=t};function Nc(t,...e){return yhe(t)?t(...e):t}var yhe=t=>typeof t=="function",In=t=>t?"":void 0,ed=t=>t?!0:void 0;function Nn(...t){return function(n){t.some(r=>(r==null||r(n),n==null?void 0:n.defaultPrevented))}}function xhe(...t){return function(n){t.forEach(r=>{r==null||r(n)})}}var KE={exports:{}};KE.exports;(function(t,e){var n=200,r="__lodash_hash_undefined__",i=800,o=16,s=9007199254740991,a="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",u="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Function]",b="[object GeneratorFunction]",v="[object Map]",m="[object Number]",g="[object Null]",x="[object Object]",w="[object Proxy]",S="[object RegExp]",P="[object Set]",I="[object String]",M="[object Undefined]",D="[object WeakMap]",E="[object ArrayBuffer]",_="[object DataView]",A="[object Float32Array]",R="[object Float64Array]",F="[object Int8Array]",L="[object Int16Array]",N="[object Int32Array]",U="[object Uint8Array]",$="[object Uint8ClampedArray]",B="[object Uint16Array]",H="[object Uint32Array]",q=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,G=/^(?:0|[1-9]\d*)$/,K={};K[A]=K[R]=K[F]=K[L]=K[N]=K[U]=K[$]=K[B]=K[H]=!0,K[a]=K[l]=K[E]=K[u]=K[_]=K[d]=K[f]=K[p]=K[v]=K[m]=K[x]=K[S]=K[P]=K[I]=K[D]=!1;var Z=typeof Wi=="object"&&Wi&&Wi.Object===Object&&Wi,ee=typeof self=="object"&&self&&self.Object===Object&&self,V=Z||ee||Function("return this")(),J=e&&!e.nodeType&&e,oe=J&&!0&&t&&!t.nodeType&&t,ne=oe&&oe.exports===J,pe=ne&&Z.process,ye=function(){try{var De=oe&&oe.require&&oe.require("util").types;return De||pe&&pe.binding&&pe.binding("util")}catch(We){}}(),Ce=ye&&ye.isTypedArray;function _e(De,We,ut){switch(ut.length){case 0:return De.call(We);case 1:return De.call(We,ut[0]);case 2:return De.call(We,ut[0],ut[1]);case 3:return De.call(We,ut[0],ut[1],ut[2])}return De.apply(We,ut)}function ce(De,We){for(var ut=-1,un=Array(De);++ut<De;)un[ut]=We(ut);return un}function Be(De){return function(We){return De(We)}}function de(De,We){return De==null?void 0:De[We]}function me(De,We){return function(ut){return De(We(ut))}}var ie=Array.prototype,ae=Function.prototype,ge=Object.prototype,X=V["__core-js_shared__"],W=ae.toString,ve=ge.hasOwnProperty,ue=function(){var De=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||"");return De?"Symbol(src)_1."+De:""}(),Me=ge.toString,Ae=W.call(Object),Ne=RegExp("^"+W.call(ve).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Re=ne?V.Buffer:void 0,Ie=V.Symbol,it=V.Uint8Array;Re&&Re.allocUnsafe;var Ee=me(Object.getPrototypeOf,Object),Le=Object.create,Ge=ge.propertyIsEnumerable,Ke=ie.splice,je=Ie?Ie.toStringTag:void 0,et=function(){try{var De=cr(Object,"defineProperty");return De({},"",{}),De}catch(We){}}(),lt=Re?Re.isBuffer:void 0,ht=Math.max,ke=Date.now,gt=cr(V,"Map"),tt=cr(Object,"create"),yt=function(){function De(){}return function(We){if(!kl(We))return{};if(Le)return Le(We);De.prototype=We;var ut=new De;return De.prototype=void 0,ut}}();function at(De){var We=-1,ut=De==null?0:De.length;for(this.clear();++We<ut;){var un=De[We];this.set(un[0],un[1])}}function mt(){this.__data__=tt?tt(null):{},this.size=0}function Ot(De){var We=this.has(De)&&delete this.__data__[De];return this.size-=We?1:0,We}function rn(De){var We=this.__data__;if(tt){var ut=We[De];return ut===r?void 0:ut}return ve.call(We,De)?We[De]:void 0}function on(De){var We=this.__data__;return tt?We[De]!==void 0:ve.call(We,De)}function Pe(De,We){var ut=this.__data__;return this.size+=this.has(De)?0:1,ut[De]=tt&&We===void 0?r:We,this}at.prototype.clear=mt,at.prototype.delete=Ot,at.prototype.get=rn,at.prototype.has=on,at.prototype.set=Pe;function Ue(De){var We=-1,ut=De==null?0:De.length;for(this.clear();++We<ut;){var un=De[We];this.set(un[0],un[1])}}function Xe(){this.__data__=[],this.size=0}function vt(De){var We=this.__data__,ut=Je(We,De);if(ut<0)return!1;var un=We.length-1;return ut==un?We.pop():Ke.call(We,ut,1),--this.size,!0}function Pt(De){var We=this.__data__,ut=Je(We,De);return ut<0?void 0:We[ut][1]}function jt(De){return Je(this.__data__,De)>-1}function Nt(De,We){var ut=this.__data__,un=Je(ut,De);return un<0?(++this.size,ut.push([De,We])):ut[un][1]=We,this}Ue.prototype.clear=Xe,Ue.prototype.delete=vt,Ue.prototype.get=Pt,Ue.prototype.has=jt,Ue.prototype.set=Nt;function Yt(De){var We=-1,ut=De==null?0:De.length;for(this.clear();++We<ut;){var un=De[We];this.set(un[0],un[1])}}function en(){this.size=0,this.__data__={hash:new at,map:new(gt||Ue),string:new at}}function fn(De){var We=ai(this,De).delete(De);return this.size-=We?1:0,We}function hn(De){return ai(this,De).get(De)}function mn(De){return ai(this,De).has(De)}function jn(De,We){var ut=ai(this,De),un=ut.size;return ut.set(De,We),this.size+=ut.size==un?0:1,this}Yt.prototype.clear=en,Yt.prototype.delete=fn,Yt.prototype.get=hn,Yt.prototype.has=mn,Yt.prototype.set=jn;function er(De){var We=this.__data__=new Ue(De);this.size=We.size}function Wr(){this.__data__=new Ue,this.size=0}function lr(De){var We=this.__data__,ut=We.delete(De);return this.size=We.size,ut}function Yn(De){return this.__data__.get(De)}function yn(De){return this.__data__.has(De)}function Te(De,We){var ut=this.__data__;if(ut instanceof Ue){var un=ut.__data__;if(!gt||un.length<n-1)return un.push([De,We]),this.size=++ut.size,this;ut=this.__data__=new Yt(un)}return ut.set(De,We),this.size=ut.size,this}er.prototype.clear=Wr,er.prototype.delete=lr,er.prototype.get=Yn,er.prototype.has=yn,er.prototype.set=Te;function Ze(De,We){var ut=Fd(De),un=!ut&&Vs(De),rr=!ut&&!un&&Il(De),Ar=!ut&&!un&&!rr&&_m(De),qr=ut||un||rr||Ar,En=qr?ce(De.length,String):[],Fr=En.length;for(var Kr in De)qr&&(Kr=="length"||rr&&(Kr=="offset"||Kr=="parent")||Ar&&(Kr=="buffer"||Kr=="byteLength"||Kr=="byteOffset")||wi(Kr,Fr))||En.push(Kr);return En}function le(De,We,ut){(ut!==void 0&&!ha(De[We],ut)||ut===void 0&&!(We in De))&&qe(De,We,ut)}function Fe(De,We,ut){var un=De[We];(!(ve.call(De,We)&&ha(un,ut))||ut===void 0&&!(We in De))&&qe(De,We,ut)}function Je(De,We){for(var ut=De.length;ut--;)if(ha(De[ut][0],We))return ut;return-1}function qe(De,We,ut){We=="__proto__"&&et?et(De,We,{configurable:!0,enumerable:!0,value:ut,writable:!0}):De[We]=ut}var Ve=Gr();function wt(De){return De==null?De===void 0?M:g:je&&je in Object(De)?eo(De):ym(De)}function It(De){return Eo(De)&&wt(De)==a}function Ct(De){if(!kl(De)||fi(De))return!1;var We=yh(De)?Ne:z;return We.test(wm(De))}function Wt(De){return Eo(De)&&Sm(De.length)&&!!K[wt(De)]}function ln(De){if(!kl(De))return Oi(De);var We=Yo(De),ut=[];for(var un in De)un=="constructor"&&(We||!ve.call(De,un))||ut.push(un);return ut}function vn(De,We,ut,un,rr){De!==We&&Ve(We,function(Ar,qr){if(rr||(rr=new er),kl(Ar))cn(De,We,qr,ut,vn,un,rr);else{var En=un?un(gh(De,qr),Ar,qr+"",De,We,rr):void 0;En===void 0&&(En=Ar),le(De,qr,En)}},fu)}function cn(De,We,ut,un,rr,Ar,qr){var En=gh(De,ut),Fr=gh(We,ut),Kr=qr.get(Fr);if(Kr){le(De,ut,Kr);return}var fo=Ar?Ar(En,Fr,ut+"",De,We,qr):void 0,Fl=fo===void 0;if(Fl){var Ni=Fd(Fr),hu=!Ni&&Il(Fr),pu=!Ni&&!hu&&_m(Fr);fo=Fr,Ni||hu||pu?Fd(En)?fo=En:vh(En)?fo=St(En):hu?(Fl=!1,fo=zt(Fr)):pu?(Fl=!1,fo=Bt(Fr)):fo=[]:C0(Fr)||Vs(Fr)?(fo=En,Vs(En)?fo=Nd(En):(!kl(En)||yh(En))&&(fo=_r(Fr))):Fl=!1}Fl&&(qr.set(Fr,fo),rr(fo,Fr,un,Ar,qr),qr.delete(Fr)),le(De,ut,fo)}function be(De,We){return xm(mh(De,We,gr),De+"")}var st=et?function(De,We){return et(De,"toString",{configurable:!0,enumerable:!1,value:Cr(We),writable:!0})}:gr;function zt(De,We){return De.slice()}function At(De){var We=new De.constructor(De.byteLength);return new it(We).set(new it(De)),We}function Bt(De,We){var ut=At(De.buffer);return new De.constructor(ut,De.byteOffset,De.length)}function St(De,We){var ut=-1,un=De.length;for(We||(We=Array(un));++ut<un;)We[ut]=De[ut];return We}function Qn(De,We,ut,un){var rr=!ut;ut||(ut={});for(var Ar=-1,qr=We.length;++Ar<qr;){var En=We[Ar],Fr=void 0;Fr===void 0&&(Fr=De[En]),rr?qe(ut,En,Fr):Fe(ut,En,Fr)}return ut}function bn(De){return be(function(We,ut){var un=-1,rr=ut.length,Ar=rr>1?ut[rr-1]:void 0,qr=rr>2?ut[2]:void 0;for(Ar=De.length>3&&typeof Ar=="function"?(rr--,Ar):void 0,qr&&uo(ut[0],ut[1],qr)&&(Ar=rr<3?void 0:Ar,rr=1),We=Object(We);++un<rr;){var En=ut[un];En&&De(We,En,un,Ar)}return We})}function Gr(De){return function(We,ut,un){for(var rr=-1,Ar=Object(We),qr=un(We),En=qr.length;En--;){var Fr=qr[++rr];if(ut(Ar[Fr],Fr,Ar)===!1)break}return We}}function ai(De,We){var ut=De.__data__;return Un(We)?ut[typeof We=="string"?"string":"hash"]:ut.map}function cr(De,We){var ut=de(De,We);return Ct(ut)?ut:void 0}function eo(De){var We=ve.call(De,je),ut=De[je];try{De[je]=void 0;var un=!0}catch(Ar){}var rr=Me.call(De);return un&&(We?De[je]=ut:delete De[je]),rr}function _r(De){return typeof De.constructor=="function"&&!Yo(De)?yt(Ee(De)):{}}function wi(De,We){var ut=typeof De;return We=We==null?s:We,!!We&&(ut=="number"||ut!="symbol"&&G.test(De))&&De>-1&&De%1==0&&De<We}function uo(De,We,ut){if(!kl(ut))return!1;var un=typeof We;return(un=="number"?Od(ut)&&wi(We,ut.length):un=="string"&&We in ut)?ha(ut[We],De):!1}function Un(De){var We=typeof De;return We=="string"||We=="number"||We=="symbol"||We=="boolean"?De!=="__proto__":De===null}function fi(De){return!!ue&&ue in De}function Yo(De){var We=De&&De.constructor,ut=typeof We=="function"&&We.prototype||ge;return De===ut}function Oi(De){var We=[];if(De!=null)for(var ut in Object(De))We.push(ut);return We}function ym(De){return Me.call(De)}function mh(De,We,ut){return We=ht(We===void 0?De.length-1:We,0),function(){for(var un=arguments,rr=-1,Ar=ht(un.length-We,0),qr=Array(Ar);++rr<Ar;)qr[rr]=un[We+rr];rr=-1;for(var En=Array(We+1);++rr<We;)En[rr]=un[rr];return En[We]=ut(qr),_e(De,this,En)}}function gh(De,We){if(!(We==="constructor"&&typeof De[We]=="function")&&We!="__proto__")return De[We]}var xm=bm(st);function bm(De){var We=0,ut=0;return function(){var un=ke(),rr=o-(un-ut);if(ut=un,rr>0){if(++We>=i)return arguments[0]}else We=0;return De.apply(void 0,arguments)}}function wm(De){if(De!=null){try{return W.call(De)}catch(We){}try{return De+""}catch(We){}}return""}function ha(De,We){return De===We||De!==De&&We!==We}var Vs=It(function(){return arguments}())?It:function(De){return Eo(De)&&ve.call(De,"callee")&&!Ge.call(De,"callee")},Fd=Array.isArray;function Od(De){return De!=null&&Sm(De.length)&&!yh(De)}function vh(De){return Eo(De)&&Od(De)}var Il=lt||Cm;function yh(De){if(!kl(De))return!1;var We=wt(De);return We==p||We==b||We==c||We==w}function Sm(De){return typeof De=="number"&&De>-1&&De%1==0&&De<=s}function kl(De){var We=typeof De;return De!=null&&(We=="object"||We=="function")}function Eo(De){return De!=null&&typeof De=="object"}function C0(De){if(!Eo(De)||wt(De)!=x)return!1;var We=Ee(De);if(We===null)return!0;var ut=ve.call(We,"constructor")&&We.constructor;return typeof ut=="function"&&ut instanceof ut&&W.call(ut)==Ae}var _m=Ce?Be(Ce):Wt;function Nd(De){return Qn(De,fu(De))}function fu(De){return Od(De)?Ze(De):ln(De)}var Em=bn(function(De,We,ut,un){vn(De,We,ut,un)});function Cr(De){return function(){return De}}function gr(De){return De}function Cm(){return!1}t.exports=Em})(KE,KE.exports);var bhe=KE.exports;const hl=Ad(bhe);var whe=t=>/!(important)?$/.test(t),Rj=t=>typeof t=="string"?t.replace(/!(important)?$/,"").trim():t,She=(t,e)=>n=>{const r=String(e),i=whe(r),o=Rj(r),s=t?`${t}.${o}`:o;let a=us(n.__cssMap)&&s in n.__cssMap?n.__cssMap[s].varRef:e;return a=Rj(a),i?`${a} !important`:a};function LO(t){const{scale:e,transform:n,compose:r}=t;return(o,s)=>{var a;const l=She(e,o)(s);let c=(a=n==null?void 0:n(l,s))!=null?a:l;return r&&(c=r(c,s)),c}}var aS=(...t)=>e=>t.reduce((n,r)=>r(n),e);function Qa(t,e){return n=>{const r={property:n,scale:t};return r.transform=LO({scale:t,transform:e}),r}}var _he=({rtl:t,ltr:e})=>n=>n.direction==="rtl"?t:e;function Ehe(t){const{property:e,scale:n,transform:r}=t;return{scale:n,property:_he(e),transform:n?LO({scale:n,compose:r}):r}}var GG=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function Che(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...GG].join(" ")}function Ahe(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...GG].join(" ")}var The={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},Mhe={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function Phe(t){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":t,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}var Dhe={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},QR={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},Rhe=new Set(Object.values(QR)),ZR=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),Ihe=t=>t.trim();function khe(t,e){if(t==null||ZR.has(t))return t;if(!(JR(t)||ZR.has(t)))return`url('${t}')`;const i=/(^[a-z-A-Z]+)\((.*)\)/g.exec(t),o=i==null?void 0:i[1],s=i==null?void 0:i[2];if(!o||!s)return t;const a=o.includes("-gradient")?o:`${o}-gradient`,[l,...c]=s.split(",").map(Ihe).filter(Boolean);if((c==null?void 0:c.length)===0)return t;const u=l in QR?QR[l]:l;c.unshift(u);const d=c.map(f=>{if(Rhe.has(f))return f;const p=f.indexOf(" "),[b,v]=p!==-1?[f.substr(0,p),f.substr(p+1)]:[f],m=JR(v)?v:v&&v.split(" "),g=`colors.${b}`,x=g in e.__cssMap?e.__cssMap[g].varRef:b;return m?[x,...Array.isArray(m)?m:[m]].join(" "):x});return`${a}(${d.join(", ")})`}var JR=t=>typeof t=="string"&&t.includes("(")&&t.includes(")"),Fhe=(t,e)=>khe(t,e!=null?e:{});function Ohe(t){return/^var\(--.+\)$/.test(t)}var Nhe=t=>{const e=parseFloat(t.toString()),n=t.toString().replace(String(e),"");return{unitless:!n,value:e,unit:n}},_c=t=>e=>`${t}(${e})`,xr={filter(t){return t!=="auto"?t:The},backdropFilter(t){return t!=="auto"?t:Mhe},ring(t){return Phe(xr.px(t))},bgClip(t){return t==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:t}},transform(t){return t==="auto"?Che():t==="auto-gpu"?Ahe():t},vh(t){return t==="$100vh"?"var(--chakra-vh)":t},px(t){if(t==null)return t;const{unitless:e}=Nhe(t);return e||typeof t=="number"?`${t}px`:t},fraction(t){return typeof t!="number"||t>1?t:`${t*100}%`},float(t,e){const n={left:"right",right:"left"};return e.direction==="rtl"?n[t]:t},degree(t){if(Ohe(t)||t==null)return t;const e=typeof t=="string"&&!t.endsWith("deg");return typeof t=="number"||e?`${t}deg`:t},gradient:Fhe,blur:_c("blur"),opacity:_c("opacity"),brightness:_c("brightness"),contrast:_c("contrast"),dropShadow:_c("drop-shadow"),grayscale:_c("grayscale"),hueRotate:t=>_c("hue-rotate")(xr.degree(t)),invert:_c("invert"),saturate:_c("saturate"),sepia:_c("sepia"),bgImage(t){return t==null||JR(t)||ZR.has(t)?t:`url(${t})`},outline(t){const e=String(t)==="0"||String(t)==="none";return t!==null&&e?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:t}},flexDirection(t){var e;const{space:n,divide:r}=(e=Dhe[t])!=null?e:{},i={flexDirection:t};return n&&(i[n]=1),r&&(i[r]=1),i}},Ye={borderWidths:Qa("borderWidths"),borderStyles:Qa("borderStyles"),colors:Qa("colors"),borders:Qa("borders"),gradients:Qa("gradients",xr.gradient),radii:Qa("radii",xr.px),space:Qa("space",aS(xr.vh,xr.px)),spaceT:Qa("space",aS(xr.vh,xr.px)),degreeT(t){return{property:t,transform:xr.degree}},prop(t,e,n){return j({property:t,scale:e},e&&{transform:LO({scale:e,transform:n})})},propT(t,e){return{property:t,transform:e}},sizes:Qa("sizes",aS(xr.vh,xr.px)),sizesT:Qa("sizes",aS(xr.vh,xr.fraction)),shadows:Qa("shadows"),logical:Ehe,blur:Qa("blur",xr.blur)},F_={background:Ye.colors("background"),backgroundColor:Ye.colors("backgroundColor"),backgroundImage:Ye.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:xr.bgClip},bgSize:Ye.prop("backgroundSize"),bgPosition:Ye.prop("backgroundPosition"),bg:Ye.colors("background"),bgColor:Ye.colors("backgroundColor"),bgPos:Ye.prop("backgroundPosition"),bgRepeat:Ye.prop("backgroundRepeat"),bgAttachment:Ye.prop("backgroundAttachment"),bgGradient:Ye.gradients("backgroundImage"),bgClip:{transform:xr.bgClip}};Object.assign(F_,{bgImage:F_.backgroundImage,bgImg:F_.backgroundImage});var Lr={border:Ye.borders("border"),borderWidth:Ye.borderWidths("borderWidth"),borderStyle:Ye.borderStyles("borderStyle"),borderColor:Ye.colors("borderColor"),borderRadius:Ye.radii("borderRadius"),borderTop:Ye.borders("borderTop"),borderBlockStart:Ye.borders("borderBlockStart"),borderTopLeftRadius:Ye.radii("borderTopLeftRadius"),borderStartStartRadius:Ye.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:Ye.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:Ye.radii("borderTopRightRadius"),borderStartEndRadius:Ye.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:Ye.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:Ye.borders("borderRight"),borderInlineEnd:Ye.borders("borderInlineEnd"),borderBottom:Ye.borders("borderBottom"),borderBlockEnd:Ye.borders("borderBlockEnd"),borderBottomLeftRadius:Ye.radii("borderBottomLeftRadius"),borderBottomRightRadius:Ye.radii("borderBottomRightRadius"),borderLeft:Ye.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:Ye.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:Ye.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:Ye.borders(["borderLeft","borderRight"]),borderInline:Ye.borders("borderInline"),borderY:Ye.borders(["borderTop","borderBottom"]),borderBlock:Ye.borders("borderBlock"),borderTopWidth:Ye.borderWidths("borderTopWidth"),borderBlockStartWidth:Ye.borderWidths("borderBlockStartWidth"),borderTopColor:Ye.colors("borderTopColor"),borderBlockStartColor:Ye.colors("borderBlockStartColor"),borderTopStyle:Ye.borderStyles("borderTopStyle"),borderBlockStartStyle:Ye.borderStyles("borderBlockStartStyle"),borderBottomWidth:Ye.borderWidths("borderBottomWidth"),borderBlockEndWidth:Ye.borderWidths("borderBlockEndWidth"),borderBottomColor:Ye.colors("borderBottomColor"),borderBlockEndColor:Ye.colors("borderBlockEndColor"),borderBottomStyle:Ye.borderStyles("borderBottomStyle"),borderBlockEndStyle:Ye.borderStyles("borderBlockEndStyle"),borderLeftWidth:Ye.borderWidths("borderLeftWidth"),borderInlineStartWidth:Ye.borderWidths("borderInlineStartWidth"),borderLeftColor:Ye.colors("borderLeftColor"),borderInlineStartColor:Ye.colors("borderInlineStartColor"),borderLeftStyle:Ye.borderStyles("borderLeftStyle"),borderInlineStartStyle:Ye.borderStyles("borderInlineStartStyle"),borderRightWidth:Ye.borderWidths("borderRightWidth"),borderInlineEndWidth:Ye.borderWidths("borderInlineEndWidth"),borderRightColor:Ye.colors("borderRightColor"),borderInlineEndColor:Ye.colors("borderInlineEndColor"),borderRightStyle:Ye.borderStyles("borderRightStyle"),borderInlineEndStyle:Ye.borderStyles("borderInlineEndStyle"),borderTopRadius:Ye.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:Ye.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:Ye.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:Ye.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(Lr,{rounded:Lr.borderRadius,roundedTop:Lr.borderTopRadius,roundedTopLeft:Lr.borderTopLeftRadius,roundedTopRight:Lr.borderTopRightRadius,roundedTopStart:Lr.borderStartStartRadius,roundedTopEnd:Lr.borderStartEndRadius,roundedBottom:Lr.borderBottomRadius,roundedBottomLeft:Lr.borderBottomLeftRadius,roundedBottomRight:Lr.borderBottomRightRadius,roundedBottomStart:Lr.borderEndStartRadius,roundedBottomEnd:Lr.borderEndEndRadius,roundedLeft:Lr.borderLeftRadius,roundedRight:Lr.borderRightRadius,roundedStart:Lr.borderInlineStartRadius,roundedEnd:Lr.borderInlineEndRadius,borderStart:Lr.borderInlineStart,borderEnd:Lr.borderInlineEnd,borderTopStartRadius:Lr.borderStartStartRadius,borderTopEndRadius:Lr.borderStartEndRadius,borderBottomStartRadius:Lr.borderEndStartRadius,borderBottomEndRadius:Lr.borderEndEndRadius,borderStartRadius:Lr.borderInlineStartRadius,borderEndRadius:Lr.borderInlineEndRadius,borderStartWidth:Lr.borderInlineStartWidth,borderEndWidth:Lr.borderInlineEndWidth,borderStartColor:Lr.borderInlineStartColor,borderEndColor:Lr.borderInlineEndColor,borderStartStyle:Lr.borderInlineStartStyle,borderEndStyle:Lr.borderInlineEndStyle});var Lhe={color:Ye.colors("color"),textColor:Ye.colors("color"),fill:Ye.colors("fill"),stroke:Ye.colors("stroke")},eI={boxShadow:Ye.shadows("boxShadow"),mixBlendMode:!0,blendMode:Ye.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:Ye.prop("backgroundBlendMode"),opacity:!0};Object.assign(eI,{shadow:eI.boxShadow});var Bhe={filter:{transform:xr.filter},blur:Ye.blur("--chakra-blur"),brightness:Ye.propT("--chakra-brightness",xr.brightness),contrast:Ye.propT("--chakra-contrast",xr.contrast),hueRotate:Ye.propT("--chakra-hue-rotate",xr.hueRotate),invert:Ye.propT("--chakra-invert",xr.invert),saturate:Ye.propT("--chakra-saturate",xr.saturate),dropShadow:Ye.propT("--chakra-drop-shadow",xr.dropShadow),backdropFilter:{transform:xr.backdropFilter},backdropBlur:Ye.blur("--chakra-backdrop-blur"),backdropBrightness:Ye.propT("--chakra-backdrop-brightness",xr.brightness),backdropContrast:Ye.propT("--chakra-backdrop-contrast",xr.contrast),backdropHueRotate:Ye.propT("--chakra-backdrop-hue-rotate",xr.hueRotate),backdropInvert:Ye.propT("--chakra-backdrop-invert",xr.invert),backdropSaturate:Ye.propT("--chakra-backdrop-saturate",xr.saturate)},YE={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:xr.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:Ye.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:Ye.space("gap"),rowGap:Ye.space("rowGap"),columnGap:Ye.space("columnGap")};Object.assign(YE,{flexDir:YE.flexDirection});var qG={gridGap:Ye.space("gridGap"),gridColumnGap:Ye.space("gridColumnGap"),gridRowGap:Ye.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},jhe={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:xr.outline},outlineOffset:!0,outlineColor:Ye.colors("outlineColor")},el={width:Ye.sizesT("width"),inlineSize:Ye.sizesT("inlineSize"),height:Ye.sizes("height"),blockSize:Ye.sizes("blockSize"),boxSize:Ye.sizes(["width","height"]),minWidth:Ye.sizes("minWidth"),minInlineSize:Ye.sizes("minInlineSize"),minHeight:Ye.sizes("minHeight"),minBlockSize:Ye.sizes("minBlockSize"),maxWidth:Ye.sizes("maxWidth"),maxInlineSize:Ye.sizes("maxInlineSize"),maxHeight:Ye.sizes("maxHeight"),maxBlockSize:Ye.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(t,e)=>{var n,r,i;return{[`@media screen and (min-width: ${(i=(r=(n=e.__breakpoints)==null?void 0:n.get(t))==null?void 0:r.minW)!=null?i:t})`]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(t,e)=>{var n,r,i;return{[`@media screen and (max-width: ${(i=(r=(n=e.__breakpoints)==null?void 0:n.get(t))==null?void 0:r._minW)!=null?i:t})`]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:Ye.propT("float",xr.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(el,{w:el.width,h:el.height,minW:el.minWidth,maxW:el.maxWidth,minH:el.minHeight,maxH:el.maxHeight,overscroll:el.overscrollBehavior,overscrollX:el.overscrollBehaviorX,overscrollY:el.overscrollBehaviorY});var Uhe={listStyleType:!0,listStylePosition:!0,listStylePos:Ye.prop("listStylePosition"),listStyleImage:!0,listStyleImg:Ye.prop("listStyleImage")};function zhe(t,e,n,r){const i=typeof e=="string"?e.split("."):[e];for(r=0;r<i.length&&t;r+=1)t=t[i[r]];return t===void 0?n:t}var Vhe=t=>{const e=new WeakMap;return(r,i,o,s)=>{if(typeof r=="undefined")return t(r,i,o);e.has(r)||e.set(r,new Map);const a=e.get(r);if(a.has(i))return a.get(i);const l=t(r,i,o,s);return a.set(i,l),l}},Whe=Vhe(zhe),$he={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},Hhe={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},OM=(t,e,n)=>{const r={},i=Whe(t,e,{});for(const o in i)o in n&&n[o]!=null||(r[o]=i[o]);return r},Ghe={srOnly:{transform(t){return t===!0?$he:t==="focusable"?Hhe:{}}},layerStyle:{processResult:!0,transform:(t,e,n)=>OM(e,`layerStyles.${t}`,n)},textStyle:{processResult:!0,transform:(t,e,n)=>OM(e,`textStyles.${t}`,n)},apply:{processResult:!0,transform:(t,e,n)=>OM(e,t,n)}},ox={position:!0,pos:Ye.prop("position"),zIndex:Ye.prop("zIndex","zIndices"),inset:Ye.spaceT("inset"),insetX:Ye.spaceT(["left","right"]),insetInline:Ye.spaceT("insetInline"),insetY:Ye.spaceT(["top","bottom"]),insetBlock:Ye.spaceT("insetBlock"),top:Ye.spaceT("top"),insetBlockStart:Ye.spaceT("insetBlockStart"),bottom:Ye.spaceT("bottom"),insetBlockEnd:Ye.spaceT("insetBlockEnd"),left:Ye.spaceT("left"),insetInlineStart:Ye.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:Ye.spaceT("right"),insetInlineEnd:Ye.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(ox,{insetStart:ox.insetInlineStart,insetEnd:ox.insetInlineEnd});var qhe={ring:{transform:xr.ring},ringColor:Ye.colors("--chakra-ring-color"),ringOffset:Ye.prop("--chakra-ring-offset-width"),ringOffsetColor:Ye.colors("--chakra-ring-offset-color"),ringInset:Ye.prop("--chakra-ring-inset")},pi={margin:Ye.spaceT("margin"),marginTop:Ye.spaceT("marginTop"),marginBlockStart:Ye.spaceT("marginBlockStart"),marginRight:Ye.spaceT("marginRight"),marginInlineEnd:Ye.spaceT("marginInlineEnd"),marginBottom:Ye.spaceT("marginBottom"),marginBlockEnd:Ye.spaceT("marginBlockEnd"),marginLeft:Ye.spaceT("marginLeft"),marginInlineStart:Ye.spaceT("marginInlineStart"),marginX:Ye.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:Ye.spaceT("marginInline"),marginY:Ye.spaceT(["marginTop","marginBottom"]),marginBlock:Ye.spaceT("marginBlock"),padding:Ye.space("padding"),paddingTop:Ye.space("paddingTop"),paddingBlockStart:Ye.space("paddingBlockStart"),paddingRight:Ye.space("paddingRight"),paddingBottom:Ye.space("paddingBottom"),paddingBlockEnd:Ye.space("paddingBlockEnd"),paddingLeft:Ye.space("paddingLeft"),paddingInlineStart:Ye.space("paddingInlineStart"),paddingInlineEnd:Ye.space("paddingInlineEnd"),paddingX:Ye.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:Ye.space("paddingInline"),paddingY:Ye.space(["paddingTop","paddingBottom"]),paddingBlock:Ye.space("paddingBlock")};Object.assign(pi,{m:pi.margin,mt:pi.marginTop,mr:pi.marginRight,me:pi.marginInlineEnd,marginEnd:pi.marginInlineEnd,mb:pi.marginBottom,ml:pi.marginLeft,ms:pi.marginInlineStart,marginStart:pi.marginInlineStart,mx:pi.marginX,my:pi.marginY,p:pi.padding,pt:pi.paddingTop,py:pi.paddingY,px:pi.paddingX,pb:pi.paddingBottom,pl:pi.paddingLeft,ps:pi.paddingInlineStart,paddingStart:pi.paddingInlineStart,pr:pi.paddingRight,pe:pi.paddingInlineEnd,paddingEnd:pi.paddingInlineEnd});var Khe={textDecorationColor:Ye.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:Ye.shadows("textShadow")},Yhe={clipPath:!0,transform:Ye.propT("transform",xr.transform),transformOrigin:!0,translateX:Ye.spaceT("--chakra-translate-x"),translateY:Ye.spaceT("--chakra-translate-y"),skewX:Ye.degreeT("--chakra-skew-x"),skewY:Ye.degreeT("--chakra-skew-y"),scaleX:Ye.prop("--chakra-scale-x"),scaleY:Ye.prop("--chakra-scale-y"),scale:Ye.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:Ye.degreeT("--chakra-rotate")},Xhe={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:Ye.prop("transitionDuration","transition.duration"),transitionProperty:Ye.prop("transitionProperty","transition.property"),transitionTimingFunction:Ye.prop("transitionTimingFunction","transition.easing")},Qhe={fontFamily:Ye.prop("fontFamily","fonts"),fontSize:Ye.prop("fontSize","fontSizes",xr.px),fontWeight:Ye.prop("fontWeight","fontWeights"),lineHeight:Ye.prop("lineHeight","lineHeights"),letterSpacing:Ye.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(t){if(t===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},Zhe={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:Ye.spaceT("scrollMargin"),scrollMarginTop:Ye.spaceT("scrollMarginTop"),scrollMarginBottom:Ye.spaceT("scrollMarginBottom"),scrollMarginLeft:Ye.spaceT("scrollMarginLeft"),scrollMarginRight:Ye.spaceT("scrollMarginRight"),scrollMarginX:Ye.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:Ye.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:Ye.spaceT("scrollPadding"),scrollPaddingTop:Ye.spaceT("scrollPaddingTop"),scrollPaddingBottom:Ye.spaceT("scrollPaddingBottom"),scrollPaddingLeft:Ye.spaceT("scrollPaddingLeft"),scrollPaddingRight:Ye.spaceT("scrollPaddingRight"),scrollPaddingX:Ye.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:Ye.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function KG(t){return us(t)&&t.reference?t.reference:String(t)}var $A=(t,...e)=>e.map(KG).join(` ${t} `).replace(/calc/g,""),Ij=(...t)=>`calc(${$A("+",...t)})`,kj=(...t)=>`calc(${$A("-",...t)})`,tI=(...t)=>`calc(${$A("*",...t)})`,Fj=(...t)=>`calc(${$A("/",...t)})`,Oj=t=>{const e=KG(t);return e!=null&&!Number.isNaN(parseFloat(e))?String(e).startsWith("-")?String(e).slice(1):`-${e}`:tI(e,-1)},ep=Object.assign(t=>({add:(...e)=>ep(Ij(t,...e)),subtract:(...e)=>ep(kj(t,...e)),multiply:(...e)=>ep(tI(t,...e)),divide:(...e)=>ep(Fj(t,...e)),negate:()=>ep(Oj(t)),toString:()=>t.toString()}),{add:Ij,subtract:kj,multiply:tI,divide:Fj,negate:Oj});function Jhe(t,e="-"){return t.replace(/\s+/g,e)}function epe(t){const e=Jhe(t.toString());return npe(tpe(e))}function tpe(t){return t.includes("\\.")?t:!Number.isInteger(parseFloat(t.toString()))?t.replace(".","\\."):t}function npe(t){return t.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}function rpe(t,e=""){return[e,t].filter(Boolean).join("-")}function ipe(t,e){return`var(${t}${e?`, ${e}`:""})`}function ope(t,e=""){return epe(`--${rpe(t,e)}`)}function Dn(t,e,n){const r=ope(t,n);return{variable:r,reference:ipe(r,e)}}function spe(t,e){const n={};for(const r of e){if(Array.isArray(r)){const[i,o]=r;n[i]=Dn(`${t}-${i}`,o);continue}n[r]=Dn(`${t}-${r}`)}return n}function ape(t){const e=t==null?0:t.length;return e?t[e-1]:void 0}function lpe(t){const e=parseFloat(t.toString()),n=t.toString().replace(String(e),"");return{unitless:!n,value:e,unit:n}}function nI(t){if(t==null)return t;const{unitless:e}=lpe(t);return e||typeof t=="number"?`${t}px`:t}var YG=(t,e)=>parseInt(t[1],10)>parseInt(e[1],10)?1:-1,BO=t=>Object.fromEntries(Object.entries(t).sort(YG));function Nj(t){const e=BO(t);return Object.assign(Object.values(e),e)}function cpe(t){const e=Object.keys(BO(t));return new Set(e)}function Lj(t){var e;if(!t)return t;t=(e=nI(t))!=null?e:t;const n=-.02;return typeof t=="number"?`${t+n}`:t.replace(/(\d+\.?\d*)/u,r=>`${parseFloat(r)+n}`)}function Ay(t,e){const n=["@media screen"];return t&&n.push("and",`(min-width: ${nI(t)})`),e&&n.push("and",`(max-width: ${nI(e)})`),n.join(" ")}function upe(t){var e;if(!t)return null;t.base=(e=t.base)!=null?e:"0px";const n=Nj(t),r=Object.entries(t).sort(YG).map(([s,a],l,c)=>{var u;let[,d]=(u=c[l+1])!=null?u:[];return d=parseFloat(d)>0?Lj(d):void 0,{_minW:Lj(a),breakpoint:s,minW:a,maxW:d,maxWQuery:Ay(null,d),minWQuery:Ay(a),minMaxQuery:Ay(a,d)}}),i=cpe(t),o=Array.from(i.values());return{keys:i,normalized:n,isResponsive(s){const a=Object.keys(s);return a.length>0&&a.every(l=>i.has(l))},asObject:BO(t),asArray:Nj(t),details:r,get(s){return r.find(a=>a.breakpoint===s)},media:[null,...n.map(s=>Ay(s)).slice(1)],toArrayValue(s){if(!us(s))throw new Error("toArrayValue: value must be an object");const a=o.map(l=>{var c;return(c=s[l])!=null?c:null});for(;ape(a)===null;)a.pop();return a},toObjectValue(s){if(!Array.isArray(s))throw new Error("toObjectValue: value must be an array");return s.reduce((a,l,c)=>{const u=o[c];return u!=null&&l!=null&&(a[u]=l),a},{})}}}var No={hover:(t,e)=>`${t}:hover ${e}, ${t}[data-hover] ${e}`,focus:(t,e)=>`${t}:focus ${e}, ${t}[data-focus] ${e}`,focusVisible:(t,e)=>`${t}:focus-visible ${e}`,focusWithin:(t,e)=>`${t}:focus-within ${e}`,active:(t,e)=>`${t}:active ${e}, ${t}[data-active] ${e}`,disabled:(t,e)=>`${t}:disabled ${e}, ${t}[data-disabled] ${e}`,invalid:(t,e)=>`${t}:invalid ${e}, ${t}[data-invalid] ${e}`,checked:(t,e)=>`${t}:checked ${e}, ${t}[data-checked] ${e}`,placeholderShown:(t,e)=>`${t}:placeholder-shown ${e}`},qd=t=>XG(e=>t(e,"&"),"[role=group]","[data-group]",".group"),Au=t=>XG(e=>t(e,"~ &"),"[data-peer]",".peer"),XG=(t,...e)=>e.map(t).join(", "),HA={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:qd(No.hover),_peerHover:Au(No.hover),_groupFocus:qd(No.focus),_peerFocus:Au(No.focus),_groupFocusVisible:qd(No.focusVisible),_peerFocusVisible:Au(No.focusVisible),_groupActive:qd(No.active),_peerActive:Au(No.active),_groupDisabled:qd(No.disabled),_peerDisabled:Au(No.disabled),_groupInvalid:qd(No.invalid),_peerInvalid:Au(No.invalid),_groupChecked:qd(No.checked),_peerChecked:Au(No.checked),_groupFocusWithin:qd(No.focusWithin),_peerFocusWithin:Au(No.focusWithin),_peerPlaceholderShown:Au(No.placeholderShown),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]"},QG=Object.keys(HA);function Bj(t,e){return Dn(String(t).replace(/\./g,"-"),void 0,e)}function dpe(t,e){let n={};const r={};for(const[i,o]of Object.entries(t)){const{isSemantic:s,value:a}=o,{variable:l,reference:c}=Bj(i,e==null?void 0:e.cssVarPrefix);if(!s){if(i.startsWith("space")){const f=i.split("."),[p,...b]=f,v=`${p}.-${b.join(".")}`,m=ep.negate(a),g=ep.negate(c);r[v]={value:m,var:l,varRef:g}}n[l]=a,r[i]={value:a,var:l,varRef:c};continue}const u=f=>{const b=[String(i).split(".")[0],f].join(".");if(!t[b])return f;const{reference:m}=Bj(b,e==null?void 0:e.cssVarPrefix);return m},d=us(a)?a:{default:a};n=hl(n,Object.entries(d).reduce((f,[p,b])=>{var v,m;if(!b)return f;const g=u(`${b}`);if(p==="default")return f[l]=g,f;const x=(m=(v=HA)==null?void 0:v[p])!=null?m:p;return f[x]={[l]:g},f},{})),r[i]={value:c,var:l,varRef:c}}return{cssVars:n,cssMap:r}}function fpe(t,e=[]){const n=Object.assign({},t);for(const r of e)r in n&&delete n[r];return n}function hpe(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function ppe(t){return typeof t=="object"&&t!=null&&!Array.isArray(t)}function jj(t,e,n={}){const{stop:r,getKey:i}=n;function o(s,a=[]){var l;if(ppe(s)||Array.isArray(s)){const c={};for(const[u,d]of Object.entries(s)){const f=(l=i==null?void 0:i(u))!=null?l:u,p=[...a,f];if(r!=null&&r(s,p))return e(s,a);c[f]=o(d,p)}return c}return e(s,a)}return o(t)}var mpe=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function gpe(t){return hpe(t,mpe)}function vpe(t){return t.semanticTokens}function ype(t){const o=t,{__cssMap:e,__cssVars:n,__breakpoints:r}=o;return Dt(o,["__cssMap","__cssVars","__breakpoints"])}var xpe=t=>QG.includes(t)||t==="default";function bpe({tokens:t,semanticTokens:e}){const n={};return jj(t,(r,i)=>{r!=null&&(n[i.join(".")]={isSemantic:!1,value:r})}),jj(e,(r,i)=>{r!=null&&(n[i.join(".")]={isSemantic:!0,value:r})},{stop:r=>Object.keys(r).every(xpe)}),n}function wpe(t){var e;const n=ype(t),r=gpe(n),i=vpe(n),o=bpe({tokens:r,semanticTokens:i}),s=(e=n.config)==null?void 0:e.cssVarPrefix,{cssMap:a,cssVars:l}=dpe(o,{cssVarPrefix:s});return Object.assign(n,{__cssVars:j(j({},{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"}),l),__cssMap:a,__breakpoints:upe(n.breakpoints)}),n}var jO=hl({},F_,Lr,Lhe,YE,el,Bhe,qhe,jhe,qG,Ghe,ox,eI,pi,Zhe,Qhe,Khe,Yhe,Uhe,Xhe),Spe=Object.assign({},pi,el,YE,qG,ox),ZG=Object.keys(Spe),_pe=[...Object.keys(jO),...QG],Epe=j(j({},jO),HA),Cpe=t=>t in Epe,Ape=t=>e=>{if(!e.__breakpoints)return t;const{isResponsive:n,toArrayValue:r,media:i}=e.__breakpoints,o={};for(const s in t){let a=Nc(t[s],e);if(a==null)continue;if(a=us(a)&&n(a)?r(a):a,!Array.isArray(a)){o[s]=a;continue}const l=a.slice(0,i.length).length;for(let c=0;c<l;c+=1){const u=i==null?void 0:i[c];if(!u){o[s]=a[c];continue}o[u]=o[u]||{},a[c]!=null&&(o[u][s]=a[c])}}return o};function Tpe(t){const e=[];let n="",r=!1;for(let i=0;i<t.length;i++){const o=t[i];o==="("?(r=!0,n+=o):o===")"?(r=!1,n+=o):o===","&&!r?(e.push(n),n=""):n+=o}return n=n.trim(),n&&e.push(n),e}function Mpe(t){return/^var\(--.+\)$/.test(t)}var Ppe=(t,e)=>t.startsWith("--")&&typeof e=="string"&&!Mpe(e),Dpe=(t,e)=>{var n,r;if(e==null)return e;const i=l=>{var c,u;return(u=(c=t.__cssMap)==null?void 0:c[l])==null?void 0:u.varRef},o=l=>{var c;return(c=i(l))!=null?c:l},[s,a]=Tpe(e);return e=(r=(n=i(s))!=null?n:o(a))!=null?r:o(e),e};function Rpe(t){const{configs:e={},pseudos:n={},theme:r}=t,i=(o,s=!1)=>{var a,l,c;const u=Nc(o,r),d=Ape(u)(r);let f={};for(let p in d){const b=d[p];let v=Nc(b,r);p in n&&(p=n[p]),Ppe(p,v)&&(v=Dpe(r,v));let m=e[p];if(m===!0&&(m={property:p}),us(v)){f[p]=(a=f[p])!=null?a:{},f[p]=hl({},f[p],i(v,!0));continue}let g=(c=(l=m==null?void 0:m.transform)==null?void 0:l.call(m,v,r,u))!=null?c:v;g=m!=null&&m.processResult?i(g,!0):g;const x=Nc(m==null?void 0:m.property,r);if(!s&&(m!=null&&m.static)){const w=Nc(m.static,r);f=hl({},f,w)}if(x&&Array.isArray(x)){for(const w of x)f[w]=g;continue}if(x){x==="&"&&us(g)?f=hl({},f,g):f[x]=g;continue}if(us(g)){f=hl({},f,g);continue}f[p]=g}return f};return i}var JG=t=>e=>Rpe({theme:e,pseudos:HA,configs:jO})(t);function ui(t){return{definePartsStyle(e){return e},defineMultiStyleConfig(e){return j({parts:t},e)}}}function Ipe(t,e){if(Array.isArray(t))return t;if(us(t))return e(t);if(t!=null)return[t]}function kpe(t,e){for(let n=e+1;n<t.length;n++)if(t[n]!=null)return n;return-1}function Fpe(t){const e=t.__breakpoints;return function(r,i,o,s){var a,l;if(!e)return;const c={},u=Ipe(o,e.toArrayValue);if(!u)return c;const d=u.length,f=d===1,p=!!r.parts;for(let b=0;b<d;b++){const v=e.details[b],m=e.details[kpe(u,b)],g=Ay(v.minW,m==null?void 0:m._minW),x=Nc((a=r[i])==null?void 0:a[u[b]],s);if(x){if(p){(l=r.parts)==null||l.forEach(w=>{hl(c,{[w]:f?x[w]:{[g]:x[w]}})});continue}if(!p){f?hl(c,x):c[g]=x;continue}c[g]=x}}return c}}function Ope(t){return e=>{var n;const{variant:r,size:i,theme:o}=e,s=Fpe(o);return hl({},Nc((n=t.baseStyle)!=null?n:{},e),s(t,"sizes",i,e),s(t,"variants",r,e))}}function Npe(t,e,n){var r,i,o;return(o=(i=(r=t.__cssMap)==null?void 0:r[`${e}.${n}`])==null?void 0:i.varRef)!=null?o:n}function di(t){return fpe(t,["styleConfig","size","variant","colorScheme"])}var Lpe=["borders","breakpoints","colors","components","config","direction","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","shadows","sizes","space","styles","transition","zIndices"];function Bpe(t){return us(t)?Lpe.every(e=>Object.prototype.hasOwnProperty.call(t,e)):!1}var jpe={common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},Upe={"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},zpe={"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},Vpe={property:jpe,easing:Upe,duration:zpe},Wpe=Vpe,$pe={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},Hpe=$pe,Gpe={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},qpe=Gpe,Kpe={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},Ype=Kpe,Xpe={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},Qpe=Xpe,Zpe={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},Jpe=Zpe,eme={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},tme=eme,nme={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},rme=nme,ime={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},eq=ime,tq={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},ome={max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch"},sme={sm:"640px",md:"768px",lg:"1024px",xl:"1280px"},ame=se(j(j({},tq),ome),{container:sme}),nq=ame,lme=se(j({breakpoints:Ype,zIndices:Hpe,radii:Jpe,blur:rme,colors:Qpe},eq),{sizes:nq,shadows:tme,space:tq,borders:qpe,transition:Wpe}),{defineMultiStyleConfig:cme,definePartsStyle:Ty}=ui(["stepper","step","title","description","indicator","separator","icon","number"]),Bu=Dn("stepper-indicator-size"),Dg=Dn("stepper-icon-size"),Rg=Dn("stepper-title-font-size"),My=Dn("stepper-description-font-size"),Q0=Dn("stepper-accent-color"),ume=Ty(({colorScheme:t})=>({stepper:{display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"},[Q0.variable]:`colors.${t}.500`,_dark:{[Q0.variable]:`colors.${t}.200`}},title:{fontSize:Rg.reference,fontWeight:"medium"},description:{fontSize:My.reference,color:"chakra-subtle-text"},number:{fontSize:Rg.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:Dg.reference,height:Dg.reference},indicator:{flexShrink:0,borderRadius:"full",width:Bu.reference,height:Bu.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:Q0.reference},"&[data-status=complete]":{bg:Q0.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:Q0.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:`calc(100% - ${Bu.reference} - 8px)`,top:`calc(${Bu.reference} + 4px)`,insetStart:`calc(${Bu.reference} / 2 - 1px)`}}})),dme=cme({baseStyle:ume,sizes:{xs:Ty({stepper:{[Bu.variable]:"sizes.4",[Dg.variable]:"sizes.3",[Rg.variable]:"fontSizes.xs",[My.variable]:"fontSizes.xs"}}),sm:Ty({stepper:{[Bu.variable]:"sizes.6",[Dg.variable]:"sizes.4",[Rg.variable]:"fontSizes.sm",[My.variable]:"fontSizes.xs"}}),md:Ty({stepper:{[Bu.variable]:"sizes.8",[Dg.variable]:"sizes.5",[Rg.variable]:"fontSizes.md",[My.variable]:"fontSizes.sm"}}),lg:Ty({stepper:{[Bu.variable]:"sizes.10",[Dg.variable]:"sizes.6",[Rg.variable]:"fontSizes.lg",[My.variable]:"fontSizes.md"}})},defaultProps:{size:"md",colorScheme:"blue"}});function Vr(t,e={}){let n=!1;function r(){if(!n){n=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}function i(...u){r();for(const d of u)e[d]=l(d);return Vr(t,e)}function o(...u){for(const d of u)d in e||(e[d]=l(d));return Vr(t,e)}function s(){return Object.fromEntries(Object.entries(e).map(([d,f])=>[d,f.selector]))}function a(){return Object.fromEntries(Object.entries(e).map(([d,f])=>[d,f.className]))}function l(u){const p=`chakra-${(["container","root"].includes(u!=null?u:"")?[t]:[t,u]).filter(Boolean).join("__")}`;return{className:p,selector:`.${p}`,toString:()=>u}}return{parts:i,toPart:l,extend:o,selectors:s,classnames:a,get keys(){return Object.keys(e)},__type:{}}}var fme=Vr("accordion").parts("root","container","button","panel").extend("icon"),hme=Vr("alert").parts("title","description","container").extend("icon","spinner"),pme=Vr("avatar").parts("label","badge","container").extend("excessLabel","group"),mme=Vr("breadcrumb").parts("link","item","container").extend("separator");Vr("button").parts();var gme=Vr("checkbox").parts("control","icon","container").extend("label");Vr("progress").parts("track","filledTrack").extend("label");var vme=Vr("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),yme=Vr("editable").parts("preview","input","textarea"),xme=Vr("form").parts("container","requiredIndicator","helperText"),bme=Vr("formError").parts("text","icon"),wme=Vr("input").parts("addon","field","element","group"),Sme=Vr("list").parts("container","item","icon"),_me=Vr("menu").parts("button","list","item").extend("groupTitle","icon","command","divider"),Eme=Vr("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),Cme=Vr("numberinput").parts("root","field","stepperGroup","stepper");Vr("pininput").parts("field");var Ame=Vr("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton"),Tme=Vr("progress").parts("label","filledTrack","track"),Mme=Vr("radio").parts("container","control","label"),Pme=Vr("select").parts("field","icon"),Dme=Vr("slider").parts("container","track","thumb","filledTrack","mark"),Rme=Vr("stat").parts("container","label","helpText","number","icon"),Ime=Vr("switch").parts("container","track","thumb","label"),kme=Vr("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),Fme=Vr("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),Ome=Vr("tag").parts("container","label","closeButton"),Nme=Vr("card").parts("container","header","body","footer");Vr("stepper").parts("stepper","step","title","description","indicator","separator","icon","number");function up(t,e,n){return Math.min(Math.max(t,n),e)}class Lme extends Error{constructor(e){super(`Failed to parse color: "${e}"`)}}var Py=Lme;function UO(t){if(typeof t!="string")throw new Py(t);if(t.trim().toLowerCase()==="transparent")return[0,0,0,0];let e=t.trim();e=Hme.test(t)?Ume(t):t;const n=zme.exec(e);if(n){const s=Array.from(n).slice(1);return[...s.slice(0,3).map(a=>parseInt(ab(a,2),16)),parseInt(ab(s[3]||"f",2),16)/255]}const r=Vme.exec(e);if(r){const s=Array.from(r).slice(1);return[...s.slice(0,3).map(a=>parseInt(a,16)),parseInt(s[3]||"ff",16)/255]}const i=Wme.exec(e);if(i){const s=Array.from(i).slice(1);return[...s.slice(0,3).map(a=>parseInt(a,10)),parseFloat(s[3]||"1")]}const o=$me.exec(e);if(o){const[s,a,l,c]=Array.from(o).slice(1).map(parseFloat);if(up(0,100,a)!==a)throw new Py(t);if(up(0,100,l)!==l)throw new Py(t);return[...Gme(s,a,l),Number.isNaN(c)?1:c]}throw new Py(t)}function Bme(t){let e=5381,n=t.length;for(;n;)e=e*33^t.charCodeAt(--n);return(e>>>0)%2341}const Uj=t=>parseInt(t.replace(/_/g,""),36),jme="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((t,e)=>{const n=Uj(e.substring(0,3)),r=Uj(e.substring(3)).toString(16);let i="";for(let o=0;o<6-r.length;o++)i+="0";return t[n]=`${i}${r}`,t},{});function Ume(t){const e=t.toLowerCase().trim(),n=jme[Bme(e)];if(!n)throw new Py(t);return`#${n}`}const ab=(t,e)=>Array.from(Array(e)).map(()=>t).join(""),zme=new RegExp(`^#${ab("([a-f0-9])",3)}([a-f0-9])?$`,"i"),Vme=new RegExp(`^#${ab("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),Wme=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${ab(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),$me=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,Hme=/^[a-z]+$/i,zj=t=>Math.round(t*255),Gme=(t,e,n)=>{let r=n/100;if(e===0)return[r,r,r].map(zj);const i=(t%360+360)%360/60,o=(1-Math.abs(2*r-1))*(e/100),s=o*(1-Math.abs(i%2-1));let a=0,l=0,c=0;i>=0&&i<1?(a=o,l=s):i>=1&&i<2?(a=s,l=o):i>=2&&i<3?(l=o,c=s):i>=3&&i<4?(l=s,c=o):i>=4&&i<5?(a=s,c=o):i>=5&&i<6&&(a=o,c=s);const u=r-o/2,d=a+u,f=l+u,p=c+u;return[d,f,p].map(zj)};function qme(t,e,n,r){return`rgba(${up(0,255,t).toFixed()}, ${up(0,255,e).toFixed()}, ${up(0,255,n).toFixed()}, ${parseFloat(up(0,1,r).toFixed(3))})`}function Kme(t,e){const[n,r,i,o]=UO(t);return qme(n,r,i,o-e)}function Yme(t){const[e,n,r,i]=UO(t);let o=s=>{const a=up(0,255,s).toString(16);return a.length===1?`0${a}`:a};return`#${o(e)}${o(n)}${o(r)}${i<1?o(Math.round(i*255)):""}`}function Xme(t,e,n,r,i){for(e=e.split?e.split("."):e,r=0;r<e.length;r++)t=t?t[e[r]]:i;return t===i?n:t}var Qme=t=>Object.keys(t).length===0,Ds=(t,e,n)=>{const r=Xme(t,`colors.${e}`,e);try{return Yme(r),r}catch(i){return n!=null?n:"#000000"}},Zme=t=>{const[e,n,r]=UO(t);return(e*299+n*587+r*114)/1e3},Jme=t=>e=>{const n=Ds(e,t);return Zme(n)<128?"dark":"light"},ege=t=>e=>Jme(t)(e)==="dark",Cv=(t,e)=>n=>{const r=Ds(n,t);return Kme(r,1-e)};function Vj(t="1rem",e="rgba(255, 255, 255, 0.15)"){return{backgroundImage:`linear-gradient(
    45deg,
    ${e} 25%,
    transparent 25%,
    transparent 50%,
    ${e} 50%,
    ${e} 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:`${t} ${t}`}}var tge=()=>`#${Math.floor(Math.random()*16777215).toString(16).padEnd(6,"0")}`;function nge(t){const e=tge();return!t||Qme(t)?e:t.string&&t.colors?ige(t.string,t.colors):t.string&&!t.colors?rge(t.string):t.colors&&!t.string?oge(t.colors):e}function rge(t){let e=0;if(t.length===0)return e.toString();for(let r=0;r<t.length;r+=1)e=t.charCodeAt(r)+((e<<5)-e),e=e&e;let n="#";for(let r=0;r<3;r+=1){const i=e>>r*8&255;n+=`00${i.toString(16)}`.substr(-2)}return n}function ige(t,e){let n=0;if(t.length===0)return e[0];for(let r=0;r<t.length;r+=1)n=t.charCodeAt(r)+((n<<5)-n),n=n&n;return n=(n%e.length+e.length)%e.length,e[n]}function oge(t){return t[Math.floor(Math.random()*t.length)]}function Pn(t,e){return n=>n.colorMode==="dark"?e:t}function zO(t){const{orientation:e,vertical:n,horizontal:r}=t;return e?e==="vertical"?n:r:{}}function rq(t){return us(t)&&t.reference?t.reference:String(t)}var GA=(t,...e)=>e.map(rq).join(` ${t} `).replace(/calc/g,""),Wj=(...t)=>`calc(${GA("+",...t)})`,$j=(...t)=>`calc(${GA("-",...t)})`,rI=(...t)=>`calc(${GA("*",...t)})`,Hj=(...t)=>`calc(${GA("/",...t)})`,Gj=t=>{const e=rq(t);return e!=null&&!Number.isNaN(parseFloat(e))?String(e).startsWith("-")?String(e).slice(1):`-${e}`:rI(e,-1)},ju=Object.assign(t=>({add:(...e)=>ju(Wj(t,...e)),subtract:(...e)=>ju($j(t,...e)),multiply:(...e)=>ju(rI(t,...e)),divide:(...e)=>ju(Hj(t,...e)),negate:()=>ju(Gj(t)),toString:()=>t.toString()}),{add:Wj,subtract:$j,multiply:rI,divide:Hj,negate:Gj});function sge(t){return!Number.isInteger(parseFloat(t.toString()))}function age(t,e="-"){return t.replace(/\s+/g,e)}function iq(t){const e=age(t.toString());return e.includes("\\.")?t:sge(t)?e.replace(".","\\."):t}function lge(t,e=""){return[e,iq(t)].filter(Boolean).join("-")}function cge(t,e){return`var(${iq(t)}${e?`, ${e}`:""})`}function uge(t,e=""){return`--${lge(t,e)}`}function _o(t,e){const n=uge(t,void 0);return{variable:n,reference:cge(n,dge(void 0))}}function dge(t){return t==null?void 0:t.reference}var{defineMultiStyleConfig:fge,definePartsStyle:O_}=ui(Ime.keys),sx=_o("switch-track-width"),bp=_o("switch-track-height"),NM=_o("switch-track-diff"),hge=ju.subtract(sx,bp),iI=_o("switch-thumb-x"),Z0=_o("switch-bg"),pge=t=>{const{colorScheme:e}=t;return{borderRadius:"full",p:"0.5",width:[sx.reference],height:[bp.reference],transitionProperty:"common",transitionDuration:"fast",[Z0.variable]:"colors.gray.300",_dark:{[Z0.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[Z0.variable]:`colors.${e}.500`,_dark:{[Z0.variable]:`colors.${e}.200`}},bg:Z0.reference}},mge={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[bp.reference],height:[bp.reference],_checked:{transform:`translateX(${iI.reference})`}},gge=O_(t=>({container:{[NM.variable]:hge,[iI.variable]:NM.reference,_rtl:{[iI.variable]:ju(NM).negate().toString()}},track:pge(t),thumb:mge})),vge={sm:O_({container:{[sx.variable]:"1.375rem",[bp.variable]:"sizes.3"}}),md:O_({container:{[sx.variable]:"1.875rem",[bp.variable]:"sizes.4"}}),lg:O_({container:{[sx.variable]:"2.875rem",[bp.variable]:"sizes.6"}})},yge=fge({baseStyle:gge,sizes:vge,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:xge,definePartsStyle:Qg}=ui(kme.keys),bge=Qg({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),XE={"&[data-is-numeric=true]":{textAlign:"end"}},wge=Qg(t=>{const{colorScheme:e}=t;return{th:j({color:Pn("gray.600","gray.400")(t),borderBottom:"1px",borderColor:Pn(`${e}.100`,`${e}.700`)(t)},XE),td:j({borderBottom:"1px",borderColor:Pn(`${e}.100`,`${e}.700`)(t)},XE),caption:{color:Pn("gray.600","gray.100")(t)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),Sge=Qg(t=>{const{colorScheme:e}=t;return{th:j({color:Pn("gray.600","gray.400")(t),borderBottom:"1px",borderColor:Pn(`${e}.100`,`${e}.700`)(t)},XE),td:j({borderBottom:"1px",borderColor:Pn(`${e}.100`,`${e}.700`)(t)},XE),caption:{color:Pn("gray.600","gray.100")(t)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:Pn(`${e}.100`,`${e}.700`)(t)},td:{background:Pn(`${e}.100`,`${e}.700`)(t)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),_ge={simple:wge,striped:Sge,unstyled:{}},Ege={sm:Qg({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:Qg({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:Qg({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},Cge=xge({baseStyle:bge,variants:_ge,sizes:Ege,defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}}),Js=Dn("tabs-color"),Ql=Dn("tabs-bg"),lS=Dn("tabs-border-color"),{defineMultiStyleConfig:Age,definePartsStyle:Uc}=ui(Fme.keys),Tge=t=>{const{orientation:e}=t;return{display:e==="vertical"?"flex":"block"}},Mge=t=>{const{isFitted:e}=t;return{flex:e?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},Pge=t=>{const{align:e="start",orientation:n}=t;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[e],flexDirection:n==="vertical"?"column":"row"}},Dge={p:4},Rge=Uc(t=>({root:Tge(t),tab:Mge(t),tablist:Pge(t),tabpanel:Dge})),Ige={sm:Uc({tab:{py:1,px:4,fontSize:"sm"}}),md:Uc({tab:{fontSize:"md",py:2,px:4}}),lg:Uc({tab:{fontSize:"lg",py:3,px:4}})},kge=Uc(t=>{const{colorScheme:e,orientation:n}=t,r=n==="vertical",i=r?"borderStart":"borderBottom",o=r?"marginStart":"marginBottom";return{tablist:{[i]:"2px solid",borderColor:"inherit"},tab:{[i]:"2px solid",borderColor:"transparent",[o]:"-2px",_selected:{[Js.variable]:`colors.${e}.600`,_dark:{[Js.variable]:`colors.${e}.300`},borderColor:"currentColor"},_active:{[Ql.variable]:"colors.gray.200",_dark:{[Ql.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:Js.reference,bg:Ql.reference}}}),Fge=Uc(t=>{const{colorScheme:e}=t;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[lS.variable]:"transparent",_selected:{[Js.variable]:`colors.${e}.600`,[lS.variable]:"colors.white",_dark:{[Js.variable]:`colors.${e}.300`,[lS.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:lS.reference},color:Js.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),Oge=Uc(t=>{const{colorScheme:e}=t;return{tab:{border:"1px solid",borderColor:"inherit",[Ql.variable]:"colors.gray.50",_dark:{[Ql.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[Ql.variable]:"colors.white",[Js.variable]:`colors.${e}.600`,_dark:{[Ql.variable]:"colors.gray.800",[Js.variable]:`colors.${e}.300`},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:Js.reference,bg:Ql.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),Nge=Uc(t=>{const{colorScheme:e,theme:n}=t;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:Ds(n,`${e}.700`),bg:Ds(n,`${e}.100`)}}}}),Lge=Uc(t=>{const{colorScheme:e}=t;return{tab:{borderRadius:"full",fontWeight:"semibold",[Js.variable]:"colors.gray.600",_dark:{[Js.variable]:"inherit"},_selected:{[Js.variable]:"colors.white",[Ql.variable]:`colors.${e}.600`,_dark:{[Js.variable]:"colors.gray.800",[Ql.variable]:`colors.${e}.300`}},color:Js.reference,bg:Ql.reference}}}),Bge=Uc({}),jge={line:kge,enclosed:Fge,"enclosed-colored":Oge,"soft-rounded":Nge,"solid-rounded":Lge,unstyled:Bge},Uge=Age({baseStyle:Rge,sizes:Ige,variants:jge,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),Ji=spe("badge",["bg","color","shadow"]),zge={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:Ji.bg.reference,color:Ji.color.reference,boxShadow:Ji.shadow.reference},Vge=t=>{const{colorScheme:e,theme:n}=t,r=Cv(`${e}.500`,.6)(n);return{[Ji.bg.variable]:`colors.${e}.500`,[Ji.color.variable]:"colors.white",_dark:{[Ji.bg.variable]:r,[Ji.color.variable]:"colors.whiteAlpha.800"}}},Wge=t=>{const{colorScheme:e,theme:n}=t,r=Cv(`${e}.200`,.16)(n);return{[Ji.bg.variable]:`colors.${e}.100`,[Ji.color.variable]:`colors.${e}.800`,_dark:{[Ji.bg.variable]:r,[Ji.color.variable]:`colors.${e}.200`}}},$ge=t=>{const{colorScheme:e,theme:n}=t,r=Cv(`${e}.200`,.8)(n);return{[Ji.color.variable]:`colors.${e}.500`,_dark:{[Ji.color.variable]:r},[Ji.shadow.variable]:`inset 0 0 0px 1px ${Ji.color.reference}`}},Hge={solid:Vge,subtle:Wge,outline:$ge},ax={baseStyle:zge,variants:Hge,defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:Gge,definePartsStyle:wp}=ui(Ome.keys),qj=Dn("tag-bg"),Kj=Dn("tag-color"),LM=Dn("tag-shadow"),N_=Dn("tag-min-height"),L_=Dn("tag-min-width"),B_=Dn("tag-font-size"),j_=Dn("tag-padding-inline"),qge={fontWeight:"medium",lineHeight:1.2,outline:0,[Kj.variable]:Ji.color.reference,[qj.variable]:Ji.bg.reference,[LM.variable]:Ji.shadow.reference,color:Kj.reference,bg:qj.reference,boxShadow:LM.reference,borderRadius:"md",minH:N_.reference,minW:L_.reference,fontSize:B_.reference,px:j_.reference,_focusVisible:{[LM.variable]:"shadows.outline"}},Kge={lineHeight:1.2,overflow:"visible"},Yge={fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}},Xge=wp({container:qge,label:Kge,closeButton:Yge}),Qge={sm:wp({container:{[N_.variable]:"sizes.5",[L_.variable]:"sizes.5",[B_.variable]:"fontSizes.xs",[j_.variable]:"space.2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:wp({container:{[N_.variable]:"sizes.6",[L_.variable]:"sizes.6",[B_.variable]:"fontSizes.sm",[j_.variable]:"space.2"}}),lg:wp({container:{[N_.variable]:"sizes.8",[L_.variable]:"sizes.8",[B_.variable]:"fontSizes.md",[j_.variable]:"space.3"}})},Zge={subtle:wp(t=>{var e;return{container:(e=ax.variants)==null?void 0:e.subtle(t)}}),solid:wp(t=>{var e;return{container:(e=ax.variants)==null?void 0:e.solid(t)}}),outline:wp(t=>{var e;return{container:(e=ax.variants)==null?void 0:e.outline(t)}})},Jge=Gge({variants:Zge,baseStyle:Xge,sizes:Qge,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),{definePartsStyle:Wu,defineMultiStyleConfig:eve}=ui(wme.keys),Ig=Dn("input-height"),kg=Dn("input-font-size"),Fg=Dn("input-padding"),Og=Dn("input-border-radius"),tve=Wu({addon:{height:Ig.reference,fontSize:kg.reference,px:Fg.reference,borderRadius:Og.reference},field:{width:"100%",height:Ig.reference,fontSize:kg.reference,px:Fg.reference,borderRadius:Og.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),Kd={lg:{[kg.variable]:"fontSizes.lg",[Fg.variable]:"space.4",[Og.variable]:"radii.md",[Ig.variable]:"sizes.12"},md:{[kg.variable]:"fontSizes.md",[Fg.variable]:"space.4",[Og.variable]:"radii.md",[Ig.variable]:"sizes.10"},sm:{[kg.variable]:"fontSizes.sm",[Fg.variable]:"space.3",[Og.variable]:"radii.sm",[Ig.variable]:"sizes.8"},xs:{[kg.variable]:"fontSizes.xs",[Fg.variable]:"space.2",[Og.variable]:"radii.sm",[Ig.variable]:"sizes.6"}},nve={lg:Wu({field:Kd.lg,group:Kd.lg}),md:Wu({field:Kd.md,group:Kd.md}),sm:Wu({field:Kd.sm,group:Kd.sm}),xs:Wu({field:Kd.xs,group:Kd.xs})};function VO(t){const{focusBorderColor:e,errorBorderColor:n}=t;return{focusBorderColor:e||Pn("blue.500","blue.300")(t),errorBorderColor:n||Pn("red.500","red.300")(t)}}var rve=Wu(t=>{const{theme:e}=t,{focusBorderColor:n,errorBorderColor:r}=VO(t);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:Pn("gray.300","whiteAlpha.400")(t)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Ds(e,r),boxShadow:`0 0 0 1px ${Ds(e,r)}`},_focusVisible:{zIndex:1,borderColor:Ds(e,n),boxShadow:`0 0 0 1px ${Ds(e,n)}`}},addon:{border:"1px solid",borderColor:Pn("inherit","whiteAlpha.50")(t),bg:Pn("gray.100","whiteAlpha.300")(t)}}}),ive=Wu(t=>{const{theme:e}=t,{focusBorderColor:n,errorBorderColor:r}=VO(t);return{field:{border:"2px solid",borderColor:"transparent",bg:Pn("gray.100","whiteAlpha.50")(t),_hover:{bg:Pn("gray.200","whiteAlpha.100")(t)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Ds(e,r)},_focusVisible:{bg:"transparent",borderColor:Ds(e,n)}},addon:{border:"2px solid",borderColor:"transparent",bg:Pn("gray.100","whiteAlpha.50")(t)}}}),ove=Wu(t=>{const{theme:e}=t,{focusBorderColor:n,errorBorderColor:r}=VO(t);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Ds(e,r),boxShadow:`0px 1px 0px 0px ${Ds(e,r)}`},_focusVisible:{borderColor:Ds(e,n),boxShadow:`0px 1px 0px 0px ${Ds(e,n)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}}),sve=Wu({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}}),ave={outline:rve,filled:ive,flushed:ove,unstyled:sve},Ur=eve({baseStyle:tve,sizes:nve,variants:ave,defaultProps:{size:"md",variant:"outline"}}),Yj,lve=se(j({},(Yj=Ur.baseStyle)==null?void 0:Yj.field),{paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"}),Xj,Qj,cve={outline:t=>{var e,n;return(n=(e=Ur.variants)==null?void 0:e.outline(t).field)!=null?n:{}},flushed:t=>{var e,n;return(n=(e=Ur.variants)==null?void 0:e.flushed(t).field)!=null?n:{}},filled:t=>{var e,n;return(n=(e=Ur.variants)==null?void 0:e.filled(t).field)!=null?n:{}},unstyled:(Qj=(Xj=Ur.variants)==null?void 0:Xj.unstyled.field)!=null?Qj:{}},Zj,Jj,eU,tU,nU,rU,iU,oU,uve={xs:(Jj=(Zj=Ur.sizes)==null?void 0:Zj.xs.field)!=null?Jj:{},sm:(tU=(eU=Ur.sizes)==null?void 0:eU.sm.field)!=null?tU:{},md:(rU=(nU=Ur.sizes)==null?void 0:nU.md.field)!=null?rU:{},lg:(oU=(iU=Ur.sizes)==null?void 0:iU.lg.field)!=null?oU:{}},dve={baseStyle:lve,sizes:uve,variants:cve,defaultProps:{size:"md",variant:"outline"}},cS=_o("tooltip-bg"),BM=_o("tooltip-fg"),fve=_o("popper-arrow-bg"),hve={bg:cS.reference,color:BM.reference,[cS.variable]:"colors.gray.700",[BM.variable]:"colors.whiteAlpha.900",_dark:{[cS.variable]:"colors.gray.300",[BM.variable]:"colors.gray.900"},[fve.variable]:cS.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"},pve={baseStyle:hve},{defineMultiStyleConfig:mve,definePartsStyle:Dy}=ui(Tme.keys),gve=t=>{const{colorScheme:e,theme:n,isIndeterminate:r,hasStripe:i}=t,o=Pn(Vj(),Vj("1rem","rgba(0,0,0,0.1)"))(t),s=Pn(`${e}.500`,`${e}.200`)(t),a=`linear-gradient(
    to right,
    transparent 0%,
    ${Ds(n,s)} 50%,
    transparent 100%
  )`;return j(j({},!r&&i&&o),r?{bgImage:a}:{bgColor:s})},vve={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},yve=t=>({bg:Pn("gray.100","whiteAlpha.300")(t)}),xve=t=>j({transitionProperty:"common",transitionDuration:"slow"},gve(t)),bve=Dy(t=>({label:vve,filledTrack:xve(t),track:yve(t)})),wve={xs:Dy({track:{h:"1"}}),sm:Dy({track:{h:"2"}}),md:Dy({track:{h:"3"}}),lg:Dy({track:{h:"4"}})},Sve=mve({sizes:wve,baseStyle:bve,defaultProps:{size:"md",colorScheme:"blue"}}),_ve=t=>typeof t=="function";function Is(t,...e){return _ve(t)?t(...e):t}var{definePartsStyle:U_,defineMultiStyleConfig:Eve}=ui(gme.keys),lx=Dn("checkbox-size"),Cve=t=>{const{colorScheme:e}=t;return{w:lx.reference,h:lx.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:Pn(`${e}.500`,`${e}.200`)(t),borderColor:Pn(`${e}.500`,`${e}.200`)(t),color:Pn("white","gray.900")(t),_hover:{bg:Pn(`${e}.600`,`${e}.300`)(t),borderColor:Pn(`${e}.600`,`${e}.300`)(t)},_disabled:{borderColor:Pn("gray.200","transparent")(t),bg:Pn("gray.200","whiteAlpha.300")(t),color:Pn("gray.500","whiteAlpha.500")(t)}},_indeterminate:{bg:Pn(`${e}.500`,`${e}.200`)(t),borderColor:Pn(`${e}.500`,`${e}.200`)(t),color:Pn("white","gray.900")(t)},_disabled:{bg:Pn("gray.100","whiteAlpha.100")(t),borderColor:Pn("gray.100","transparent")(t)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:Pn("red.500","red.300")(t)}}},Ave={_disabled:{cursor:"not-allowed"}},Tve={userSelect:"none",_disabled:{opacity:.4}},Mve={transitionProperty:"transform",transitionDuration:"normal"},Pve=U_(t=>({icon:Mve,container:Ave,control:Is(Cve,t),label:Tve})),Dve={sm:U_({control:{[lx.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:U_({control:{[lx.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:U_({control:{[lx.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},QE=Eve({baseStyle:Pve,sizes:Dve,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:Rve,definePartsStyle:z_}=ui(Mme.keys),Ive=t=>{var e;const n=(e=Is(QE.baseStyle,t))==null?void 0:e.control;return se(j({},n),{borderRadius:"full",_checked:se(j({},n==null?void 0:n._checked),{_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}})})},kve=z_(t=>{var e,n,r,i;return{label:(n=(e=QE).baseStyle)==null?void 0:n.call(e,t).label,container:(i=(r=QE).baseStyle)==null?void 0:i.call(r,t).container,control:Ive(t)}}),Fve={md:z_({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:z_({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:z_({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},Ove=Rve({baseStyle:kve,sizes:Fve,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:Nve,definePartsStyle:Lve}=ui(Pme.keys),uS=Dn("select-bg"),sU,Bve=se(j({},(sU=Ur.baseStyle)==null?void 0:sU.field),{appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:uS.reference,[uS.variable]:"colors.white",_dark:{[uS.variable]:"colors.gray.700"},"> option, > optgroup":{bg:uS.reference}}),jve={width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}},Uve=Lve({field:Bve,icon:jve}),dS={paddingInlineEnd:"8"},aU,lU,cU,uU,dU,fU,hU,pU,zve={lg:se(j({},(aU=Ur.sizes)==null?void 0:aU.lg),{field:j(j({},(lU=Ur.sizes)==null?void 0:lU.lg.field),dS)}),md:se(j({},(cU=Ur.sizes)==null?void 0:cU.md),{field:j(j({},(uU=Ur.sizes)==null?void 0:uU.md.field),dS)}),sm:se(j({},(dU=Ur.sizes)==null?void 0:dU.sm),{field:j(j({},(fU=Ur.sizes)==null?void 0:fU.sm.field),dS)}),xs:se(j({},(hU=Ur.sizes)==null?void 0:hU.xs),{field:j(j({},(pU=Ur.sizes)==null?void 0:pU.xs.field),dS),icon:{insetEnd:"1"}})},Vve=Nve({baseStyle:Uve,sizes:zve,variants:Ur.variants,defaultProps:Ur.defaultProps}),jM=Dn("skeleton-start-color"),UM=Dn("skeleton-end-color"),Wve={[jM.variable]:"colors.gray.100",[UM.variable]:"colors.gray.400",_dark:{[jM.variable]:"colors.gray.800",[UM.variable]:"colors.gray.600"},background:jM.reference,borderColor:UM.reference,opacity:.7,borderRadius:"sm"},$ve={baseStyle:Wve},zM=Dn("skip-link-bg"),Hve={borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[zM.variable]:"colors.white",_dark:{[zM.variable]:"colors.gray.700"},bg:zM.reference}},Gve={baseStyle:Hve},{defineMultiStyleConfig:qve,definePartsStyle:qA}=ui(Dme.keys),lb=Dn("slider-thumb-size"),cb=Dn("slider-track-size"),vf=Dn("slider-bg"),Kve=t=>{const{orientation:e}=t;return j({display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"}},zO({orientation:e,vertical:{h:"100%"},horizontal:{w:"100%"}}))},Yve=t=>{const e=zO({orientation:t.orientation,horizontal:{h:cb.reference},vertical:{w:cb.reference}});return se(j({},e),{overflow:"hidden",borderRadius:"sm",[vf.variable]:"colors.gray.200",_dark:{[vf.variable]:"colors.whiteAlpha.200"},_disabled:{[vf.variable]:"colors.gray.300",_dark:{[vf.variable]:"colors.whiteAlpha.300"}},bg:vf.reference})},Xve=t=>{const{orientation:e}=t,n=zO({orientation:e,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}});return se(j({},n),{w:lb.reference,h:lb.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}})},Qve=t=>{const{colorScheme:e}=t;return{width:"inherit",height:"inherit",[vf.variable]:`colors.${e}.500`,_dark:{[vf.variable]:`colors.${e}.200`},bg:vf.reference}},Zve=qA(t=>({container:Kve(t),track:Yve(t),thumb:Xve(t),filledTrack:Qve(t)})),Jve=qA({container:{[lb.variable]:"sizes.4",[cb.variable]:"sizes.1"}}),e0e=qA({container:{[lb.variable]:"sizes.3.5",[cb.variable]:"sizes.1"}}),t0e=qA({container:{[lb.variable]:"sizes.2.5",[cb.variable]:"sizes.0.5"}}),n0e={lg:Jve,md:e0e,sm:t0e},r0e=qve({baseStyle:Zve,sizes:n0e,defaultProps:{size:"md",colorScheme:"blue"}}),tp=_o("spinner-size"),i0e={width:[tp.reference],height:[tp.reference]},o0e={xs:{[tp.variable]:"sizes.3"},sm:{[tp.variable]:"sizes.4"},md:{[tp.variable]:"sizes.6"},lg:{[tp.variable]:"sizes.8"},xl:{[tp.variable]:"sizes.12"}},s0e={baseStyle:i0e,sizes:o0e,defaultProps:{size:"md"}},{defineMultiStyleConfig:a0e,definePartsStyle:oq}=ui(Rme.keys),l0e={fontWeight:"medium"},c0e={opacity:.8,marginBottom:"2"},u0e={verticalAlign:"baseline",fontWeight:"semibold"},d0e={marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"},f0e=oq({container:{},label:l0e,helpText:c0e,number:u0e,icon:d0e}),h0e={md:oq({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},p0e=a0e({baseStyle:f0e,sizes:h0e,defaultProps:{size:"md"}}),VM=Dn("kbd-bg"),m0e={[VM.variable]:"colors.gray.100",_dark:{[VM.variable]:"colors.whiteAlpha.100"},bg:VM.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"},g0e={baseStyle:m0e},v0e={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}},y0e={baseStyle:v0e},{defineMultiStyleConfig:x0e,definePartsStyle:b0e}=ui(Sme.keys),w0e={marginEnd:"2",display:"inline",verticalAlign:"text-bottom"},S0e=b0e({icon:w0e}),_0e=x0e({baseStyle:S0e}),{defineMultiStyleConfig:E0e,definePartsStyle:C0e}=ui(_me.keys),Mc=Dn("menu-bg"),WM=Dn("menu-shadow"),A0e={[Mc.variable]:"#fff",[WM.variable]:"shadows.sm",_dark:{[Mc.variable]:"colors.gray.700",[WM.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px",bg:Mc.reference,boxShadow:WM.reference},T0e={py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[Mc.variable]:"colors.gray.100",_dark:{[Mc.variable]:"colors.whiteAlpha.100"}},_active:{[Mc.variable]:"colors.gray.200",_dark:{[Mc.variable]:"colors.whiteAlpha.200"}},_expanded:{[Mc.variable]:"colors.gray.100",_dark:{[Mc.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:Mc.reference},M0e={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},P0e={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},D0e={opacity:.6},R0e={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6},I0e={transitionProperty:"common",transitionDuration:"normal"},k0e=C0e({button:I0e,list:A0e,item:T0e,groupTitle:M0e,icon:P0e,command:D0e,divider:R0e}),F0e=E0e({baseStyle:k0e}),{defineMultiStyleConfig:O0e,definePartsStyle:oI}=ui(Eme.keys),$M=Dn("modal-bg"),HM=Dn("modal-shadow"),N0e={bg:"blackAlpha.600",zIndex:"modal"},L0e=t=>{const{isCentered:e,scrollBehavior:n}=t;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:e?"center":"flex-start",overflow:n==="inside"?"hidden":"auto",overscrollBehaviorY:"none"}},B0e=t=>{const{isCentered:e,scrollBehavior:n}=t;return{borderRadius:"md",color:"inherit",my:e?"auto":"16",mx:e?"auto":void 0,zIndex:"modal",maxH:n==="inside"?"calc(100% - 7.5rem)":void 0,[$M.variable]:"colors.white",[HM.variable]:"shadows.lg",_dark:{[$M.variable]:"colors.gray.700",[HM.variable]:"shadows.dark-lg"},bg:$M.reference,boxShadow:HM.reference}},j0e={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},U0e={position:"absolute",top:"2",insetEnd:"3"},z0e=t=>{const{scrollBehavior:e}=t;return{px:"6",py:"2",flex:"1",overflow:e==="inside"?"auto":void 0}},V0e={px:"6",py:"4"},W0e=oI(t=>({overlay:N0e,dialogContainer:Is(L0e,t),dialog:Is(B0e,t),header:j0e,closeButton:U0e,body:Is(z0e,t),footer:V0e}));function Vl(t){return oI(t==="full"?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:t}})}var $0e={xs:Vl("xs"),sm:Vl("sm"),md:Vl("md"),lg:Vl("lg"),xl:Vl("xl"),"2xl":Vl("2xl"),"3xl":Vl("3xl"),"4xl":Vl("4xl"),"5xl":Vl("5xl"),"6xl":Vl("6xl"),full:Vl("full")},H0e=O0e({baseStyle:W0e,sizes:$0e,defaultProps:{size:"md"}}),{defineMultiStyleConfig:G0e,definePartsStyle:sq}=ui(Cme.keys),WO=_o("number-input-stepper-width"),aq=_o("number-input-input-padding"),q0e=ju(WO).add("0.5rem").toString(),GM=_o("number-input-bg"),qM=_o("number-input-color"),KM=_o("number-input-border-color"),K0e={[WO.variable]:"sizes.6",[aq.variable]:q0e},Y0e=t=>{var e,n;return(n=(e=Is(Ur.baseStyle,t))==null?void 0:e.field)!=null?n:{}},X0e={width:WO.reference},Q0e={borderStart:"1px solid",borderStartColor:KM.reference,color:qM.reference,bg:GM.reference,[qM.variable]:"colors.chakra-body-text",[KM.variable]:"colors.chakra-border-color",_dark:{[qM.variable]:"colors.whiteAlpha.800",[KM.variable]:"colors.whiteAlpha.300"},_active:{[GM.variable]:"colors.gray.200",_dark:{[GM.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},Z0e=sq(t=>{var e;return{root:K0e,field:(e=Is(Y0e,t))!=null?e:{},stepperGroup:X0e,stepper:Q0e}});function fS(t){var e,n,r;const i=(e=Ur.sizes)==null?void 0:e[t],o={lg:"md",md:"md",sm:"sm",xs:"sm"},s=(r=(n=i.field)==null?void 0:n.fontSize)!=null?r:"md",a=eq.fontSizes[s];return sq({field:se(j({},i.field),{paddingInlineEnd:aq.reference,verticalAlign:"top"}),stepper:{fontSize:ju(a).multiply(.75).toString(),_first:{borderTopEndRadius:o[t]},_last:{borderBottomEndRadius:o[t],mt:"-1px",borderTopWidth:1}}})}var J0e={xs:fS("xs"),sm:fS("sm"),md:fS("md"),lg:fS("lg")},eye=G0e({baseStyle:Z0e,sizes:J0e,variants:Ur.variants,defaultProps:Ur.defaultProps}),mU,tye=se(j({},(mU=Ur.baseStyle)==null?void 0:mU.field),{textAlign:"center"}),nye={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},gU,vU,rye={outline:t=>{var e,n,r;return(r=(n=Is((e=Ur.variants)==null?void 0:e.outline,t))==null?void 0:n.field)!=null?r:{}},flushed:t=>{var e,n,r;return(r=(n=Is((e=Ur.variants)==null?void 0:e.flushed,t))==null?void 0:n.field)!=null?r:{}},filled:t=>{var e,n,r;return(r=(n=Is((e=Ur.variants)==null?void 0:e.filled,t))==null?void 0:n.field)!=null?r:{}},unstyled:(vU=(gU=Ur.variants)==null?void 0:gU.unstyled.field)!=null?vU:{}},iye={baseStyle:tye,sizes:nye,variants:rye,defaultProps:Ur.defaultProps},{defineMultiStyleConfig:oye,definePartsStyle:sye}=ui(Ame.keys),hS=_o("popper-bg"),aye=_o("popper-arrow-bg"),yU=_o("popper-arrow-shadow-color"),lye={zIndex:10},cye={[hS.variable]:"colors.white",bg:hS.reference,[aye.variable]:hS.reference,[yU.variable]:"colors.gray.200",_dark:{[hS.variable]:"colors.gray.700",[yU.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},uye={px:3,py:2,borderBottomWidth:"1px"},dye={px:3,py:2},fye={px:3,py:2,borderTopWidth:"1px"},hye={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},pye=sye({popper:lye,content:cye,header:uye,body:dye,footer:fye,closeButton:hye}),mye=oye({baseStyle:pye}),{definePartsStyle:sI,defineMultiStyleConfig:gye}=ui(vme.keys),YM=Dn("drawer-bg"),XM=Dn("drawer-box-shadow");function Vm(t){return sI(t==="full"?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:t}})}var vye={bg:"blackAlpha.600",zIndex:"modal"},yye={display:"flex",zIndex:"modal",justifyContent:"center"},xye=t=>{const{isFullHeight:e}=t;return se(j({},e&&{height:"100vh"}),{zIndex:"modal",maxH:"100vh",color:"inherit",[YM.variable]:"colors.white",[XM.variable]:"shadows.lg",_dark:{[YM.variable]:"colors.gray.700",[XM.variable]:"shadows.dark-lg"},bg:YM.reference,boxShadow:XM.reference})},bye={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},wye={position:"absolute",top:"2",insetEnd:"3"},Sye={px:"6",py:"2",flex:"1",overflow:"auto"},_ye={px:"6",py:"4"},Eye=sI(t=>({overlay:vye,dialogContainer:yye,dialog:Is(xye,t),header:bye,closeButton:wye,body:Sye,footer:_ye})),Cye={xs:Vm("xs"),sm:Vm("md"),md:Vm("lg"),lg:Vm("2xl"),xl:Vm("4xl"),full:Vm("full")},Aye=gye({baseStyle:Eye,sizes:Cye,defaultProps:{size:"xs"}}),{definePartsStyle:Tye,defineMultiStyleConfig:Mye}=ui(yme.keys),Pye={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},Dye={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},Rye={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},Iye=Tye({preview:Pye,input:Dye,textarea:Rye}),kye=Mye({baseStyle:Iye}),{definePartsStyle:Fye,defineMultiStyleConfig:Oye}=ui(xme.keys),Zg=Dn("form-control-color"),Nye={marginStart:"1",[Zg.variable]:"colors.red.500",_dark:{[Zg.variable]:"colors.red.300"},color:Zg.reference},Lye={mt:"2",[Zg.variable]:"colors.gray.600",_dark:{[Zg.variable]:"colors.whiteAlpha.600"},color:Zg.reference,lineHeight:"normal",fontSize:"sm"},Bye=Fye({container:{width:"100%",position:"relative"},requiredIndicator:Nye,helperText:Lye}),jye=Oye({baseStyle:Bye}),{definePartsStyle:Uye,defineMultiStyleConfig:zye}=ui(bme.keys),Jg=Dn("form-error-color"),Vye={[Jg.variable]:"colors.red.500",_dark:{[Jg.variable]:"colors.red.300"},color:Jg.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},Wye={marginEnd:"0.5em",[Jg.variable]:"colors.red.500",_dark:{[Jg.variable]:"colors.red.300"},color:Jg.reference},$ye=Uye({text:Vye,icon:Wye}),Hye=zye({baseStyle:$ye}),Gye={fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}},qye={baseStyle:Gye},Kye={fontFamily:"heading",fontWeight:"bold"},Yye={"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},Xye={baseStyle:Kye,sizes:Yye,defaultProps:{size:"xl"}},{defineMultiStyleConfig:Qye,definePartsStyle:Zye}=ui(mme.keys),QM=Dn("breadcrumb-link-decor"),Jye={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:QM.reference,[QM.variable]:"none","&:not([aria-current=page])":{cursor:"pointer",_hover:{[QM.variable]:"underline"},_focusVisible:{boxShadow:"outline"}}},exe=Zye({link:Jye}),txe=Qye({baseStyle:exe}),nxe={lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},lq=t=>{const{colorScheme:e,theme:n}=t;if(e==="gray")return{color:Pn("gray.800","whiteAlpha.900")(t),_hover:{bg:Pn("gray.100","whiteAlpha.200")(t)},_active:{bg:Pn("gray.200","whiteAlpha.300")(t)}};const r=Cv(`${e}.200`,.12)(n),i=Cv(`${e}.200`,.24)(n);return{color:Pn(`${e}.600`,`${e}.200`)(t),bg:"transparent",_hover:{bg:Pn(`${e}.50`,r)(t)},_active:{bg:Pn(`${e}.100`,i)(t)}}},rxe=t=>{const{colorScheme:e}=t,n=Pn("gray.200","whiteAlpha.300")(t);return j({border:"1px solid",borderColor:e==="gray"?n:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"}},Is(lq,t))},ixe={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},oxe=t=>{var e;const{colorScheme:n}=t;if(n==="gray"){const l=Pn("gray.100","whiteAlpha.200")(t);return{bg:l,color:Pn("gray.800","whiteAlpha.900")(t),_hover:{bg:Pn("gray.200","whiteAlpha.300")(t),_disabled:{bg:l}},_active:{bg:Pn("gray.300","whiteAlpha.400")(t)}}}const{bg:r=`${n}.500`,color:i="white",hoverBg:o=`${n}.600`,activeBg:s=`${n}.700`}=(e=ixe[n])!=null?e:{},a=Pn(r,`${n}.200`)(t);return{bg:a,color:Pn(i,"gray.800")(t),_hover:{bg:Pn(o,`${n}.300`)(t),_disabled:{bg:a}},_active:{bg:Pn(s,`${n}.400`)(t)}}},sxe=t=>{const{colorScheme:e}=t;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:Pn(`${e}.500`,`${e}.200`)(t),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:Pn(`${e}.700`,`${e}.500`)(t)}}},axe={bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"},lxe={ghost:lq,outline:rxe,solid:oxe,link:sxe,unstyled:axe},cxe={lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},uxe={baseStyle:nxe,variants:lxe,sizes:cxe,defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:Sp,defineMultiStyleConfig:dxe}=ui(Nme.keys),ZE=Dn("card-bg"),td=Dn("card-padding"),cq=Dn("card-shadow"),V_=Dn("card-radius"),uq=Dn("card-border-width","0"),dq=Dn("card-border-color"),fxe=Sp({container:{[ZE.variable]:"colors.chakra-body-bg",backgroundColor:ZE.reference,boxShadow:cq.reference,borderRadius:V_.reference,color:"chakra-body-text",borderWidth:uq.reference,borderColor:dq.reference},body:{padding:td.reference,flex:"1 1 0%"},header:{padding:td.reference},footer:{padding:td.reference}}),hxe={sm:Sp({container:{[V_.variable]:"radii.base",[td.variable]:"space.3"}}),md:Sp({container:{[V_.variable]:"radii.md",[td.variable]:"space.5"}}),lg:Sp({container:{[V_.variable]:"radii.xl",[td.variable]:"space.7"}})},pxe={elevated:Sp({container:{[cq.variable]:"shadows.base",_dark:{[ZE.variable]:"colors.gray.700"}}}),outline:Sp({container:{[uq.variable]:"1px",[dq.variable]:"colors.chakra-border-color"}}),filled:Sp({container:{[ZE.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[td.variable]:0},header:{[td.variable]:0},footer:{[td.variable]:0}}},mxe=dxe({baseStyle:fxe,variants:pxe,sizes:hxe,defaultProps:{variant:"elevated",size:"md"}}),cx=_o("close-button-size"),J0=_o("close-button-bg"),gxe={w:[cx.reference],h:[cx.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[J0.variable]:"colors.blackAlpha.100",_dark:{[J0.variable]:"colors.whiteAlpha.100"}},_active:{[J0.variable]:"colors.blackAlpha.200",_dark:{[J0.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:J0.reference},vxe={lg:{[cx.variable]:"sizes.10",fontSize:"md"},md:{[cx.variable]:"sizes.8",fontSize:"xs"},sm:{[cx.variable]:"sizes.6",fontSize:"2xs"}},yxe={baseStyle:gxe,sizes:vxe,defaultProps:{size:"md"}},{variants:xxe,defaultProps:bxe}=ax,wxe={fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:Ji.bg.reference,color:Ji.color.reference,boxShadow:Ji.shadow.reference},Sxe={baseStyle:wxe,variants:xxe,defaultProps:bxe},_xe={w:"100%",mx:"auto",maxW:"prose",px:"4"},Exe={baseStyle:_xe},Cxe={opacity:.6,borderColor:"inherit"},Axe={borderStyle:"solid"},Txe={borderStyle:"dashed"},Mxe={solid:Axe,dashed:Txe},Pxe={baseStyle:Cxe,variants:Mxe,defaultProps:{variant:"solid"}},{definePartsStyle:Dxe,defineMultiStyleConfig:Rxe}=ui(fme.keys),Ixe={borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},kxe={transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},Fxe={pt:"2",px:"4",pb:"5"},Oxe={fontSize:"1.25em"},Nxe=Dxe({container:Ixe,button:kxe,panel:Fxe,icon:Oxe}),Lxe=Rxe({baseStyle:Nxe}),{definePartsStyle:cw,defineMultiStyleConfig:Bxe}=ui(hme.keys),Da=Dn("alert-fg"),hd=Dn("alert-bg"),jxe=cw({container:{bg:hd.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:Da.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:Da.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function $O(t){const{theme:e,colorScheme:n}=t,r=Cv(`${n}.200`,.16)(e);return{light:`colors.${n}.100`,dark:r}}var Uxe=cw(t=>{const{colorScheme:e}=t,n=$O(t);return{container:{[Da.variable]:`colors.${e}.600`,[hd.variable]:n.light,_dark:{[Da.variable]:`colors.${e}.200`,[hd.variable]:n.dark}}}}),zxe=cw(t=>{const{colorScheme:e}=t,n=$O(t);return{container:{[Da.variable]:`colors.${e}.600`,[hd.variable]:n.light,_dark:{[Da.variable]:`colors.${e}.200`,[hd.variable]:n.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:Da.reference}}}),Vxe=cw(t=>{const{colorScheme:e}=t,n=$O(t);return{container:{[Da.variable]:`colors.${e}.600`,[hd.variable]:n.light,_dark:{[Da.variable]:`colors.${e}.200`,[hd.variable]:n.dark},pt:"2",borderTopWidth:"4px",borderTopColor:Da.reference}}}),Wxe=cw(t=>{const{colorScheme:e}=t;return{container:{[Da.variable]:"colors.white",[hd.variable]:`colors.${e}.600`,_dark:{[Da.variable]:"colors.gray.900",[hd.variable]:`colors.${e}.200`},color:Da.reference}}}),$xe={subtle:Uxe,"left-accent":zxe,"top-accent":Vxe,solid:Wxe},Hxe=Bxe({baseStyle:jxe,variants:$xe,defaultProps:{variant:"subtle",colorScheme:"blue"}}),{definePartsStyle:fq,defineMultiStyleConfig:Gxe}=ui(pme.keys),ev=Dn("avatar-border-color"),ux=Dn("avatar-bg"),ub=Dn("avatar-font-size"),Av=Dn("avatar-size"),qxe={borderRadius:"full",border:"0.2em solid",borderColor:ev.reference,[ev.variable]:"white",_dark:{[ev.variable]:"colors.gray.800"}},Kxe={bg:ux.reference,fontSize:ub.reference,width:Av.reference,height:Av.reference,lineHeight:"1",[ux.variable]:"colors.gray.200",_dark:{[ux.variable]:"colors.whiteAlpha.400"}},Yxe=t=>{const{name:e,theme:n}=t,r=e?nge({string:e}):"colors.gray.400",i=ege(r)(n);let o="white";return i||(o="gray.800"),{bg:ux.reference,fontSize:ub.reference,color:o,borderColor:ev.reference,verticalAlign:"top",width:Av.reference,height:Av.reference,"&:not([data-loaded])":{[ux.variable]:r},[ev.variable]:"colors.white",_dark:{[ev.variable]:"colors.gray.800"}}},Xxe={fontSize:ub.reference,lineHeight:"1"},Qxe=fq(t=>({badge:Is(qxe,t),excessLabel:Is(Kxe,t),container:Is(Yxe,t),label:Xxe}));function Yd(t){const e=t!=="100%"?nq[t]:void 0;return fq({container:{[Av.variable]:e!=null?e:t,[ub.variable]:`calc(${e!=null?e:t} / 2.5)`},excessLabel:{[Av.variable]:e!=null?e:t,[ub.variable]:`calc(${e!=null?e:t} / 2.5)`}})}var Zxe={"2xs":Yd(4),xs:Yd(6),sm:Yd(8),md:Yd(12),lg:Yd(16),xl:Yd(24),"2xl":Yd(32),full:Yd("100%")},Jxe=Gxe({baseStyle:Qxe,sizes:Zxe,defaultProps:{size:"md"}}),ebe={Accordion:Lxe,Alert:Hxe,Avatar:Jxe,Badge:ax,Breadcrumb:txe,Button:uxe,Checkbox:QE,CloseButton:yxe,Code:Sxe,Container:Exe,Divider:Pxe,Drawer:Aye,Editable:kye,Form:jye,FormError:Hye,FormLabel:qye,Heading:Xye,Input:Ur,Kbd:g0e,Link:y0e,List:_0e,Menu:F0e,Modal:H0e,NumberInput:eye,PinInput:iye,Popover:mye,Progress:Sve,Radio:Ove,Select:Vve,Skeleton:$ve,SkipLink:Gve,Slider:r0e,Spinner:s0e,Stat:p0e,Switch:yge,Table:Cge,Tabs:Uge,Tag:Jge,Textarea:dve,Tooltip:pve,Card:mxe,Stepper:dme},tbe={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},nbe={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},rbe="ltr",ibe={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},hq=se(j({semanticTokens:tbe,direction:rbe},lme),{components:ebe,styles:nbe,config:ibe});function Ry(t){return typeof t=="function"}function obe(...t){return e=>t.reduce((n,r)=>r(n),e)}var sbe=t=>function(...n){let r=[...n],i=n[n.length-1];return Bpe(i)&&r.length>1?r=r.slice(0,r.length-1):i=t,obe(...r.map(o=>s=>Ry(o)?o(s):lbe(s,o)))(i)},abe=sbe(hq);function lbe(...t){return hl({},...t,pq)}function pq(t,e,n,r){if((Ry(t)||Ry(e))&&Object.prototype.hasOwnProperty.call(r,n))return(...i)=>{const o=Ry(t)?t(...i):t,s=Ry(e)?e(...i):e;return hl({},o,s,pq)}}function cbe(t,e){const n={};return Object.keys(t).forEach(r=>{e.includes(r)||(n[r]=t[r])}),n}function ube(t,e,n,r){const i=typeof e=="string"?e.split("."):[e];for(r=0;r<i.length&&t;r+=1)t=t[i[r]];return t===void 0?n:t}var dbe=t=>{const e=new WeakMap;return(r,i,o,s)=>{if(typeof r=="undefined")return t(r,i,o);e.has(r)||e.set(r,new Map);const a=e.get(r);if(a.has(i))return a.get(i);const l=t(r,i,o,s);return a.set(i,l),l}},mq=dbe(ube);function gq(t,e){const n={};return Object.keys(t).forEach(r=>{const i=t[r];e(i,r,t)&&(n[r]=i)}),n}var vq=t=>gq(t,e=>e!=null);function fbe(t){return typeof t=="function"}function yq(t,...e){return fbe(t)?t(...e):t}var hbe=typeof Element!="undefined",pbe=typeof Map=="function",mbe=typeof Set=="function",gbe=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function W_(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,i;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!W_(t[r],e[r]))return!1;return!0}var o;if(pbe&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(o=t.entries();!(r=o.next()).done;)if(!e.has(r.value[0]))return!1;for(o=t.entries();!(r=o.next()).done;)if(!W_(r.value[1],e.get(r.value[0])))return!1;return!0}if(mbe&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(o=t.entries();!(r=o.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(gbe&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;if(hbe&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&t.$$typeof)&&!W_(t[i[r]],e[i[r]]))return!1;return!0}return t!==t&&e!==e}var vbe=function(e,n){try{return W_(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const ybe=Ad(vbe);function xq(t,e={}){var n;const d=e,{styleConfig:r}=d,i=Dt(d,["styleConfig"]),{theme:o,colorMode:s}=HG(),a=t?mq(o,`components.${t}`):void 0,l=r||a,c=hl({theme:o,colorMode:s},(n=l==null?void 0:l.defaultProps)!=null?n:{},vq(cbe(i,["children"]))),u=T.useRef({});if(l){const p=Ope(l)(c);ybe(u.current,p)||(u.current=p)}return u.current}function Va(t,e={}){return xq(t,e)}function js(t,e={}){return xq(t,e)}var xbe=new Set([..._pe,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),bbe=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function wbe(t){return bbe.has(t)||!xbe.has(t)}function Sbe(t,...e){if(t==null)throw new TypeError("Cannot convert undefined or null to object");const n=j({},t);for(const r of e)if(r!=null)for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(i in n&&delete n[i],n[i]=r[i]);return n}function bq(t){const e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}var _be=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Ebe=MG(function(t){return _be.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),Cbe=Ebe,Abe=function(e){return e!=="theme"},xU=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?Cbe:Abe},bU=function(e,n,r){var i;if(n){var o=n.shouldForwardProp;i=e.__emotion_forwardProp&&o?function(s){return e.__emotion_forwardProp(s)&&o(s)}:o}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},Tbe=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return FG(n,r,i),qfe(function(){return OG(n,r,i)}),null},Mbe=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,o,s;n!==void 0&&(o=n.label,s=n.target);var a=bU(e,n,r),l=a||xU(i),c=!l("as");return function(){var u=arguments,d=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&d.push("label:"+o+";"),u[0]==null||u[0].raw===void 0)d.push.apply(d,u);else{d.push(u[0][0]);for(var f=u.length,p=1;p<f;p++)d.push(u[p],u[0][p])}var b=jG(function(v,m,g){var x=c&&v.as||i,w="",S=[],P=v;if(v.theme==null){P={};for(var I in v)P[I]=v[I];P.theme=T.useContext(sb)}typeof v.className=="string"?w=Ufe(m.registered,S,v.className):v.className!=null&&(w=v.className+" ");var M=FO(d.concat(S),m.registered,P);w+=m.key+"-"+M.name,s!==void 0&&(w+=" "+s);var D=c&&a===void 0?xU(x):l,E={};for(var _ in v)c&&_==="as"||D(_)&&(E[_]=v[_]);return E.className=w,E.ref=g,T.createElement(T.Fragment,null,T.createElement(Tbe,{cache:m,serialized:M,isStringTag:typeof x=="string"}),T.createElement(x,E))});return b.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",b.defaultProps=e.defaultProps,b.__emotion_real=b,b.__emotion_base=i,b.__emotion_styles=d,b.__emotion_forwardProp=a,Object.defineProperty(b,"toString",{value:function(){return"."+s}}),b.withComponent=function(v,m){return t(v,Up({},n,m,{shouldForwardProp:bU(b,m,!0)})).apply(void 0,d)},b}},Pbe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],JE=Mbe.bind();Pbe.forEach(function(t){JE[t]=JE(t)});var wU,Dbe=(wU=JE.default)!=null?wU:JE,Rbe=({baseStyle:t})=>e=>{const d=e,{theme:n,css:r,__css:i,sx:o}=d,s=Dt(d,["theme","css","__css","sx"]),a=gq(s,(f,p)=>Cpe(p)),l=yq(t,e),c=Sbe({},i,l,vq(a),o),u=JG(c)(e.theme);return r?[u,r]:u};function ZM(t,e){const a=e!=null?e:{},{baseStyle:n}=a,r=Dt(a,["baseStyle"]);r.shouldForwardProp||(r.shouldForwardProp=wbe);const i=Rbe({baseStyle:n}),o=Dbe(t,r)(i);return Lt.forwardRef(function(c,u){const{colorMode:d,forced:f}=WA();return Lt.createElement(o,j({ref:u,"data-theme":f?d:void 0},c))})}function Ibe(){const t=new Map;return new Proxy(ZM,{apply(e,n,r){return ZM(...r)},get(e,n){return t.has(n)||t.set(n,ZM(n)),t.get(n)}})}var $t=Ibe();function Qt(t){return T.forwardRef(t)}function wq(t={}){const{strict:e=!0,errorMessage:n="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:r}=t,i=T.createContext(void 0);i.displayName=r;function o(){var s;const a=T.useContext(i);if(!a&&e){const l=new Error(n);throw l.name="ContextError",(s=Error.captureStackTrace)==null||s.call(Error,l,o),l}return a}return[i.Provider,o,i]}function kbe(t){const{cssVarsRoot:e,theme:n,children:r}=t,i=T.useMemo(()=>wpe(n),[n]);return h.jsxs(Xfe,{theme:i,children:[h.jsx(Fbe,{root:e}),r]})}function Fbe({root:t=":host, :root"}){const e=[t,"[data-theme]"].join(",");return h.jsx(VA,{styles:n=>({[e]:n.__cssVars})})}wq({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function Obe(t){return wq({name:`${t}StylesContext`,errorMessage:`useStyles: "styles" is undefined. Seems you forgot to wrap the components in "<${t} />" `})}function Nbe(){const{colorMode:t}=WA();return h.jsx(VA,{styles:e=>{const n=mq(e,"styles.global"),r=yq(n,{theme:e,colorMode:t});return r?JG(r)(e):void 0}})}var HO=T.createContext({getDocument(){return document},getWindow(){return window}});HO.displayName="EnvironmentContext";function Lbe({defer:t}={}){const[,e]=T.useReducer(n=>n+1,0);return Ju(()=>{t&&e()},[t]),T.useContext(HO)}function Sq(t){const{children:e,environment:n,disabled:r}=t,i=T.useRef(null),o=T.useMemo(()=>n||{getDocument:()=>{var a,l;return(l=(a=i.current)==null?void 0:a.ownerDocument)!=null?l:document},getWindow:()=>{var a,l;return(l=(a=i.current)==null?void 0:a.ownerDocument.defaultView)!=null?l:window}},[n]),s=!r||!n;return h.jsxs(HO.Provider,{value:o,children:[e,s&&h.jsx("span",{id:"__chakra_env",hidden:!0,ref:i})]})}Sq.displayName="EnvironmentProvider";var Bbe=t=>{const{children:e,colorModeManager:n,portalZIndex:r,resetScope:i,resetCSS:o=!0,theme:s={},environment:a,cssVarsRoot:l,disableEnvironment:c,disableGlobalStyle:u}=t,d=h.jsx(Sq,{environment:a,disabled:c,children:e});return h.jsx(kbe,{theme:s,cssVarsRoot:l,children:h.jsxs($G,{colorModeManager:n,options:s.config,children:[o?h.jsx(Jfe,{scope:i}):h.jsx(Zfe,{}),!u&&h.jsx(Nbe,{}),r?h.jsx(VG,{zIndex:r,children:d}):d]})})},jbe=(t,e)=>t.find(n=>n.id===e);function SU(t,e){const n=_q(t,e),r=n?t[n].findIndex(i=>i.id===e):-1;return{position:n,index:r}}function _q(t,e){for(const[n,r]of Object.entries(t))if(jbe(r,e))return n}function Ube(t){const e=t.includes("right"),n=t.includes("left");let r="center";return e&&(r="flex-end"),n&&(r="flex-start"),{display:"flex",flexDirection:"column",alignItems:r}}function zbe(t){const n=t==="top"||t==="bottom"?"0 auto":void 0,r=t.includes("top")?"env(safe-area-inset-top, 0px)":void 0,i=t.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,o=t.includes("left")?void 0:"env(safe-area-inset-right, 0px)",s=t.includes("right")?void 0:"env(safe-area-inset-left, 0px)";return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:n,top:r,bottom:i,right:o,left:s}}function Wo(t,e=[]){const n=T.useRef(t);return T.useEffect(()=>{n.current=t}),T.useCallback((...r)=>{var i;return(i=n.current)==null?void 0:i.call(n,...r)},e)}function Vbe(t,e){const n=Wo(t);T.useEffect(()=>{if(e==null)return;let r=null;return r=window.setTimeout(()=>{n()},e),()=>{r&&window.clearTimeout(r)}},[e,n])}function eC(t,e){const n=T.useRef(!1),r=T.useRef(!1);T.useEffect(()=>{if(n.current&&r.current)return t();r.current=!0},e),T.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[])}const Eq=T.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),KA=T.createContext({}),uw=T.createContext(null),YA=typeof document!="undefined",GO=YA?T.useLayoutEffect:T.useEffect,Cq=T.createContext({strict:!1}),qO=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Wbe="framerAppearId",Aq="data-"+qO(Wbe);function $be(t,e,n,r){const{visualElement:i}=T.useContext(KA),o=T.useContext(Cq),s=T.useContext(uw),a=T.useContext(Eq).reducedMotion,l=T.useRef();r=r||o.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:i,props:n,presenceContext:s,blockInitialAnimation:s?s.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;T.useInsertionEffect(()=>{c&&c.update(n,s)});const u=T.useRef(!!(n[Aq]&&!window.HandoffComplete));return GO(()=>{c&&(c.render(),u.current&&c.animationState&&c.animationState.animateChanges())}),T.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),c}function Ng(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Hbe(t,e,n){return T.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ng(n)&&(n.current=r))},[e])}function db(t){return typeof t=="string"||Array.isArray(t)}function XA(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const KO=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],YO=["initial",...KO];function QA(t){return XA(t.animate)||YO.some(e=>db(t[e]))}function Tq(t){return!!(QA(t)||t.variants)}function Gbe(t,e){if(QA(t)){const{initial:n,animate:r}=t;return{initial:n===!1||db(n)?n:void 0,animate:db(r)?r:void 0}}return t.inherit!==!1?e:{}}function qbe(t){const{initial:e,animate:n}=Gbe(t,T.useContext(KA));return T.useMemo(()=>({initial:e,animate:n}),[_U(e),_U(n)])}function _U(t){return Array.isArray(t)?t.join(" "):t}const EU={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},fb={};for(const t in EU)fb[t]={isEnabled:e=>EU[t].some(n=>!!e[n])};function Kbe(t){for(const e in t)fb[e]=j(j({},fb[e]),t[e])}const XO=T.createContext({}),Mq=T.createContext({}),Ybe=Symbol.for("motionComponentSymbol");function Xbe({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&Kbe(t);function o(a,l){let c;const u=se(j(j({},T.useContext(Eq)),a),{layoutId:Qbe(a)}),{isStatic:d}=u,f=qbe(a),p=r(a,d);if(!d&&YA){f.visualElement=$be(i,p,u,e);const b=T.useContext(Mq),v=T.useContext(Cq).strict;f.visualElement&&(c=f.visualElement.loadFeatures(u,v,t,b))}return T.createElement(KA.Provider,{value:f},c&&f.visualElement?T.createElement(c,j({visualElement:f.visualElement},u)):null,n(i,a,Hbe(p,f.visualElement,l),p,d,f.visualElement))}const s=T.forwardRef(o);return s[Ybe]=i,s}function Qbe({layoutId:t}){const e=T.useContext(XO).id;return e&&t!==void 0?e+"-"+t:t}function Zbe(t){function e(r,i={}){return Xbe(t(r,i))}if(typeof Proxy=="undefined")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const Jbe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function QO(t){return typeof t!="string"||t.includes("-")?!1:!!(Jbe.indexOf(t)>-1||/[A-Z]/.test(t))}const tC={};function ewe(t){Object.assign(tC,t)}const dw=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],cm=new Set(dw);function Pq(t,{layout:e,layoutId:n}){return cm.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!tC[t]||t==="opacity")}const da=t=>!!(t&&t.getVelocity),twe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},nwe=dw.length;function rwe(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let o="";for(let s=0;s<nwe;s++){const a=dw[s];if(t[a]!==void 0){const l=twe[a]||a;o+=`${l}(${t[a]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),i?o=i(t,r?"":o):n&&r&&(o="none"),o}const Dq=t=>e=>typeof e=="string"&&e.startsWith(t),Rq=Dq("--"),aI=Dq("var(--"),iwe=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,owe=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Qf=(t,e,n)=>Math.min(Math.max(n,t),e),um={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},dx=se(j({},um),{transform:t=>Qf(0,1,t)}),pS=se(j({},um),{default:1}),fx=t=>Math.round(t*1e5)/1e5,ZA=/(-)?([\d]*\.?[\d])+/g,Iq=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,swe=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function fw(t){return typeof t=="string"}const hw=t=>({test:e=>fw(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),sf=hw("deg"),zc=hw("%"),On=hw("px"),awe=hw("vh"),lwe=hw("vw"),CU=se(j({},zc),{parse:t=>zc.parse(t)/100,transform:t=>zc.transform(t*100)}),AU=se(j({},um),{transform:Math.round}),kq={borderWidth:On,borderTopWidth:On,borderRightWidth:On,borderBottomWidth:On,borderLeftWidth:On,borderRadius:On,radius:On,borderTopLeftRadius:On,borderTopRightRadius:On,borderBottomRightRadius:On,borderBottomLeftRadius:On,width:On,maxWidth:On,height:On,maxHeight:On,size:On,top:On,right:On,bottom:On,left:On,padding:On,paddingTop:On,paddingRight:On,paddingBottom:On,paddingLeft:On,margin:On,marginTop:On,marginRight:On,marginBottom:On,marginLeft:On,rotate:sf,rotateX:sf,rotateY:sf,rotateZ:sf,scale:pS,scaleX:pS,scaleY:pS,scaleZ:pS,skew:sf,skewX:sf,skewY:sf,distance:On,translateX:On,translateY:On,translateZ:On,x:On,y:On,z:On,perspective:On,transformPerspective:On,opacity:dx,originX:CU,originY:CU,originZ:On,zIndex:AU,fillOpacity:dx,strokeOpacity:dx,numOctaves:AU};function ZO(t,e,n,r){const{style:i,vars:o,transform:s,transformOrigin:a}=t;let l=!1,c=!1,u=!0;for(const d in e){const f=e[d];if(Rq(d)){o[d]=f;continue}const p=kq[d],b=owe(f,p);if(cm.has(d)){if(l=!0,s[d]=b,!u)continue;f!==(p.default||0)&&(u=!1)}else d.startsWith("origin")?(c=!0,a[d]=b):i[d]=b}if(e.transform||(l||r?i.transform=rwe(t.transform,n,u,r):i.transform&&(i.transform="none")),c){const{originX:d="50%",originY:f="50%",originZ:p=0}=a;i.transformOrigin=`${d} ${f} ${p}`}}const JO=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Fq(t,e,n){for(const r in e)!da(e[r])&&!Pq(r,n)&&(t[r]=e[r])}function cwe({transformTemplate:t},e,n){return T.useMemo(()=>{const r=JO();return ZO(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function uwe(t,e,n){const r=t.style||{},i={};return Fq(i,r,t),Object.assign(i,cwe(t,e,n)),t.transformValues?t.transformValues(i):i}function dwe(t,e,n){const r={},i=uwe(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const fwe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function nC(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||fwe.has(t)}let Oq=t=>!nC(t);function hwe(t){t&&(Oq=e=>e.startsWith("on")?!nC(e):t(e))}try{hwe(require("@emotion/is-prop-valid").default)}catch(t){}function pwe(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(Oq(i)||n===!0&&nC(i)||!e&&!nC(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function TU(t,e,n){return typeof t=="string"?t:On.transform(e+n*t)}function mwe(t,e,n){const r=TU(e,t.x,t.width),i=TU(n,t.y,t.height);return`${r} ${i}`}const gwe={offset:"stroke-dashoffset",array:"stroke-dasharray"},vwe={offset:"strokeDashoffset",array:"strokeDasharray"};function ywe(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?gwe:vwe;t[o.offset]=On.transform(-r);const s=On.transform(e),a=On.transform(n);t[o.array]=`${s} ${a}`}function eN(t,p,u,d,f){var b=p,{attrX:e,attrY:n,attrScale:r,originX:i,originY:o,pathLength:s,pathSpacing:a=1,pathOffset:l=0}=b,c=Dt(b,["attrX","attrY","attrScale","originX","originY","pathLength","pathSpacing","pathOffset"]);if(ZO(t,c,u,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:v,style:m,dimensions:g}=t;v.transform&&(g&&(m.transform=v.transform),delete v.transform),g&&(i!==void 0||o!==void 0||m.transform)&&(m.transformOrigin=mwe(g,i!==void 0?i:.5,o!==void 0?o:.5)),e!==void 0&&(v.x=e),n!==void 0&&(v.y=n),r!==void 0&&(v.scale=r),s!==void 0&&ywe(v,s,a,l,!1)}const Nq=()=>se(j({},JO()),{attrs:{}}),tN=t=>typeof t=="string"&&t.toLowerCase()==="svg";function xwe(t,e,n,r){const i=T.useMemo(()=>{const o=Nq();return eN(o,e,{enableHardwareAcceleration:!1},tN(r),t.transformTemplate),se(j({},o.attrs),{style:j({},o.style)})},[e]);if(t.style){const o={};Fq(o,t.style,t),i.style=j(j({},o),i.style)}return i}function bwe(t=!1){return(n,r,i,{latestValues:o},s)=>{const l=(QO(n)?xwe:dwe)(r,o,s,n),c=pwe(r,typeof n=="string",t),u=se(j(j({},c),l),{ref:i}),{children:d}=r,f=T.useMemo(()=>da(d)?d.get():d,[d]);return T.createElement(n,se(j({},u),{children:f}))}}function Lq(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const Bq=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function jq(t,e,n,r){Lq(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Bq.has(i)?i:qO(i),e.attrs[i])}function nN(t,e){const{style:n}=t,r={};for(const i in n)(da(n[i])||e.style&&da(e.style[i])||Pq(i,t))&&(r[i]=n[i]);return r}function Uq(t,e){const n=nN(t,e);for(const r in t)if(da(t[r])||da(e[r])){const i=dw.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function rN(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function zq(t){const e=T.useRef(null);return e.current===null&&(e.current=t()),e.current}const rC=t=>Array.isArray(t),wwe=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Swe=t=>rC(t)?t[t.length-1]||0:t;function $_(t){const e=da(t)?t.get():t;return wwe(e)?e.toValue():e}function _we({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,o){const s={latestValues:Ewe(r,i,o,t),renderState:e()};return n&&(s.mount=a=>n(r,a,s)),s}const Vq=t=>(e,n)=>{const r=T.useContext(KA),i=T.useContext(uw),o=()=>_we(t,e,r,i);return n?o():zq(o)};function Ewe(t,e,n,r){const i={},o=r(t,{});for(const f in o)i[f]=$_(o[f]);let{initial:s,animate:a}=t;const l=QA(t),c=Tq(t);e&&c&&!l&&t.inherit!==!1&&(s===void 0&&(s=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||s===!1;const d=u?a:s;return d&&typeof d!="boolean"&&!XA(d)&&(Array.isArray(d)?d:[d]).forEach(p=>{const b=rN(t,p);if(!b)return;const x=b,{transitionEnd:v,transition:m}=x,g=Dt(x,["transitionEnd","transition"]);for(const w in g){let S=g[w];if(Array.isArray(S)){const P=u?S.length-1:0;S=S[P]}S!==null&&(i[w]=S)}for(const w in v)i[w]=v[w]}),i}const Zi=t=>t;class MU{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function Cwe(t){let e=new MU,n=new MU,r=0,i=!1,o=!1;const s=new WeakSet,a={schedule:(l,c=!1,u=!1)=>{const d=u&&i,f=d?e:n;return c&&s.add(l),f.add(l)&&d&&i&&(r=e.order.length),l},cancel:l=>{n.remove(l),s.delete(l)},process:l=>{if(i){o=!0;return}if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const u=e.order[c];u(l),s.has(u)&&(a.schedule(u),t())}i=!1,o&&(o=!1,a.process(l))}};return a}const mS=["prepare","read","update","preRender","render","postRender"],Awe=40;function Twe(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=mS.reduce((d,f)=>(d[f]=Cwe(()=>n=!0),d),{}),s=d=>o[d].process(i),a=()=>{const d=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(d-i.timestamp,Awe),1),i.timestamp=d,i.isProcessing=!0,mS.forEach(s),i.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,i.isProcessing||t(a)};return{schedule:mS.reduce((d,f)=>{const p=o[f];return d[f]=(b,v=!1,m=!1)=>(n||l(),p.schedule(b,v,m)),d},{}),cancel:d=>mS.forEach(f=>o[f].cancel(d)),state:i,steps:o}}const{schedule:ci,cancel:pd,state:ss,steps:JM}=Twe(typeof requestAnimationFrame!="undefined"?requestAnimationFrame:Zi,!0),Mwe={useVisualState:Vq({scrapeMotionValuesFromProps:Uq,createRenderState:Nq,onMount:(t,e,{renderState:n,latestValues:r})=>{ci.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch(i){n.dimensions={x:0,y:0,width:0,height:0}}}),ci.render(()=>{eN(n,r,{enableHardwareAcceleration:!1},tN(e.tagName),t.transformTemplate),jq(e,n)})}})},Pwe={useVisualState:Vq({scrapeMotionValuesFromProps:nN,createRenderState:JO})};function Dwe(t,{forwardMotionProps:e=!1},n,r){const i=QO(t)?Mwe:Pwe;return se(j({},i),{preloadedFeatures:n,useRender:bwe(e),createVisualElement:r,Component:t})}function $u(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const Wq=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function JA(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const Rwe=t=>e=>Wq(e)&&t(e,JA(e));function nd(t,e,n,r){return $u(t,e,Rwe(n),r)}const Iwe=(t,e)=>n=>e(t(n)),jf=(...t)=>t.reduce(Iwe);function $q(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const PU=$q("dragHorizontal"),DU=$q("dragVertical");function Hq(t){let e=!1;if(t==="y")e=DU();else if(t==="x")e=PU();else{const n=PU(),r=DU();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function Gq(){const t=Hq(!0);return t?(t(),!1):!0}class lh{constructor(e){this.isMounted=!1,this.node=e}update(){}}function RU(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(o,s)=>{if(o.pointerType==="touch"||Gq())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&ci.update(()=>a[r](o,s))};return nd(t.current,n,i,{passive:!t.getProps()[r]})}class kwe extends lh{mount(){this.unmount=jf(RU(this.node,!0),RU(this.node,!1))}unmount(){}}class Fwe extends lh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(n){e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=jf($u(this.node.current,"focus",()=>this.onFocus()),$u(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const qq=(t,e)=>e?t===e?!0:qq(t,e.parentElement):!1;function eP(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,JA(n))}class Owe extends lh{constructor(){super(...arguments),this.removeStartListeners=Zi,this.removeEndListeners=Zi,this.removeAccessibleListeners=Zi,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),o=nd(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:d}=this.node.getProps();ci.update(()=>{!d&&!qq(this.node.current,a.target)?u&&u(a,l):c&&c(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),s=nd(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=jf(o,s),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const s=a=>{a.key!=="Enter"||!this.checkPressEnd()||eP("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&ci.update(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=$u(this.node.current,"keyup",s),eP("down",(a,l)=>{this.startPress(a,l)})},n=$u(this.node.current,"keydown",e),r=()=>{this.isPressing&&eP("cancel",(o,s)=>this.cancelPress(o,s))},i=$u(this.node.current,"blur",r);this.removeAccessibleListeners=jf(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&ci.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Gq()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&ci.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=nd(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=$u(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=jf(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const lI=new WeakMap,tP=new WeakMap,Nwe=t=>{const e=lI.get(t.target);e&&e(t)},Lwe=t=>{t.forEach(Nwe)};function Bwe(n){var r=n,{root:t}=r,e=Dt(r,["root"]);const i=t||document;tP.has(i)||tP.set(i,{});const o=tP.get(i),s=JSON.stringify(e);return o[s]||(o[s]=new IntersectionObserver(Lwe,j({root:t},e))),o[s]}function jwe(t,e,n){const r=Bwe(e);return lI.set(t,n),r.observe(t),()=>{lI.delete(t),r.unobserve(t)}}const Uwe={some:0,all:1};class zwe extends lh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Uwe[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,o&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),f=c?u:d;f&&f(l)};return jwe(this.node.current,s,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver=="undefined")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Vwe(e,n))&&this.startObserver()}unmount(){}}function Vwe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Wwe={inView:{Feature:zwe},tap:{Feature:Owe},focus:{Feature:Fwe},hover:{Feature:kwe}};function Kq(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function $we(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function Hwe(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function eT(t,e,n){const r=t.getProps();return rN(r,e,n!==void 0?n:r.custom,$we(t),Hwe(t))}let iN=Zi;const _p=t=>t*1e3,rd=t=>t/1e3,Gwe={current:!1},Yq=t=>Array.isArray(t)&&typeof t[0]=="number";function Xq(t){return!!(!t||typeof t=="string"&&Qq[t]||Yq(t)||Array.isArray(t)&&t.every(Xq))}const Iy=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Qq={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Iy([0,.65,.55,1]),circOut:Iy([.55,0,1,.45]),backIn:Iy([.31,.01,.66,-.59]),backOut:Iy([.33,1.53,.69,.99])};function Zq(t){if(t)return Yq(t)?Iy(t):Array.isArray(t)?t.map(Zq):Qq[t]}function qwe(t,e,n,{delay:r=0,duration:i,repeat:o=0,repeatType:s="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=Zq(a);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:o+1,direction:s==="reverse"?"alternate":"normal"})}function Kwe(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const Jq=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Ywe=1e-7,Xwe=12;function Qwe(t,e,n,r,i){let o,s,a=0;do s=e+(n-e)/2,o=Jq(s,r,i)-t,o>0?n=s:e=s;while(Math.abs(o)>Ywe&&++a<Xwe);return s}function pw(t,e,n,r){if(t===e&&n===r)return Zi;const i=o=>Qwe(o,0,1,t,n);return o=>o===0||o===1?o:Jq(i(o),e,r)}const Zwe=pw(.42,0,1,1),Jwe=pw(0,0,.58,1),eK=pw(.42,0,.58,1),e1e=t=>Array.isArray(t)&&typeof t[0]!="number",tK=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,nK=t=>e=>1-t(1-e),oN=t=>1-Math.sin(Math.acos(t)),rK=nK(oN),t1e=tK(oN),iK=pw(.33,1.53,.69,.99),sN=nK(iK),n1e=tK(sN),r1e=t=>(t*=2)<1?.5*sN(t):.5*(2-Math.pow(2,-10*(t-1))),i1e={linear:Zi,easeIn:Zwe,easeInOut:eK,easeOut:Jwe,circIn:oN,circInOut:t1e,circOut:rK,backIn:sN,backInOut:n1e,backOut:iK,anticipate:r1e},IU=t=>{if(Array.isArray(t)){iN(t.length===4);const[e,n,r,i]=t;return pw(e,n,r,i)}else if(typeof t=="string")return i1e[t];return t},aN=(t,e)=>n=>!!(fw(n)&&swe.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),oK=(t,e,n)=>r=>{if(!fw(r))return r;const[i,o,s,a]=r.match(ZA);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(s),alpha:a!==void 0?parseFloat(a):1}},o1e=t=>Qf(0,255,t),nP=se(j({},um),{transform:t=>Math.round(o1e(t))}),dp={test:aN("rgb","red"),parse:oK("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+nP.transform(t)+", "+nP.transform(e)+", "+nP.transform(n)+", "+fx(dx.transform(r))+")"};function s1e(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const cI={test:aN("#"),parse:s1e,transform:dp.transform},Lg={test:aN("hsl","hue"),parse:oK("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+zc.transform(fx(e))+", "+zc.transform(fx(n))+", "+fx(dx.transform(r))+")"},Es={test:t=>dp.test(t)||cI.test(t)||Lg.test(t),parse:t=>dp.test(t)?dp.parse(t):Lg.test(t)?Lg.parse(t):cI.parse(t),transform:t=>fw(t)?t:t.hasOwnProperty("red")?dp.transform(t):Lg.transform(t)},Di=(t,e,n)=>-n*t+n*e+t;function rP(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function a1e({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,s=0;if(!e)i=o=s=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=rP(l,a,t+1/3),o=rP(l,a,t),s=rP(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(s*255),alpha:r}}const iP=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},l1e=[cI,dp,Lg],c1e=t=>l1e.find(e=>e.test(t));function kU(t){const e=c1e(t);let n=e.parse(t);return e===Lg&&(n=a1e(n)),n}const sK=(t,e)=>{const n=kU(t),r=kU(e),i=j({},n);return o=>(i.red=iP(n.red,r.red,o),i.green=iP(n.green,r.green,o),i.blue=iP(n.blue,r.blue,o),i.alpha=Di(n.alpha,r.alpha,o),dp.transform(i))};function u1e(t){var e,n;return isNaN(t)&&fw(t)&&(((e=t.match(ZA))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Iq))===null||n===void 0?void 0:n.length)||0)>0}const aK={regex:iwe,countKey:"Vars",token:"${v}",parse:Zi},lK={regex:Iq,countKey:"Colors",token:"${c}",parse:Es.parse},cK={regex:ZA,countKey:"Numbers",token:"${n}",parse:um.parse};function oP(t,{regex:e,countKey:n,token:r,parse:i}){const o=t.tokenised.match(e);o&&(t["num"+n]=o.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...o.map(i)))}function iC(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&oP(n,aK),oP(n,lK),oP(n,cK),n}function uK(t){return iC(t).values}function dK(t){const{values:e,numColors:n,numVars:r,tokenised:i}=iC(t),o=e.length;return s=>{let a=i;for(let l=0;l<o;l++)l<r?a=a.replace(aK.token,s[l]):l<r+n?a=a.replace(lK.token,Es.transform(s[l])):a=a.replace(cK.token,fx(s[l]));return a}}const d1e=t=>typeof t=="number"?0:t;function f1e(t){const e=uK(t);return dK(t)(e.map(d1e))}const Zf={test:u1e,parse:uK,createTransformer:dK,getAnimatableNone:f1e},fK=(t,e)=>n=>`${n>0?e:t}`;function hK(t,e){return typeof t=="number"?n=>Di(t,e,n):Es.test(t)?sK(t,e):t.startsWith("var(")?fK(t,e):mK(t,e)}const pK=(t,e)=>{const n=[...t],r=n.length,i=t.map((o,s)=>hK(o,e[s]));return o=>{for(let s=0;s<r;s++)n[s]=i[s](o);return n}},h1e=(t,e)=>{const n=j(j({},t),e),r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=hK(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}},mK=(t,e)=>{const n=Zf.createTransformer(e),r=iC(t),i=iC(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?jf(pK(r.values,i.values),n):fK(t,e)},hb=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},FU=(t,e)=>n=>Di(t,e,n);function p1e(t){return typeof t=="number"?FU:typeof t=="string"?Es.test(t)?sK:mK:Array.isArray(t)?pK:typeof t=="object"?h1e:FU}function m1e(t,e,n){const r=[],i=n||p1e(t[0]),o=t.length-1;for(let s=0;s<o;s++){let a=i(t[s],t[s+1]);if(e){const l=Array.isArray(e)?e[s]||Zi:e;a=jf(l,a)}r.push(a)}return r}function gK(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(iN(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const s=m1e(e,r,i),a=s.length,l=c=>{let u=0;if(a>1)for(;u<t.length-2&&!(c<t[u+1]);u++);const d=hb(t[u],t[u+1],c);return s[u](d)};return n?c=>l(Qf(t[0],t[o-1],c)):l}function g1e(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=hb(0,e,r);t.push(Di(n,1,i))}}function v1e(t){const e=[0];return g1e(e,t.length-1),e}function y1e(t,e){return t.map(n=>n*e)}function x1e(t,e){return t.map(()=>e||eK).splice(0,t.length-1)}function oC({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=e1e(r)?r.map(IU):IU(r),o={done:!1,value:e[0]},s=y1e(n&&n.length===e.length?n:v1e(e),t),a=gK(s,e,{ease:Array.isArray(i)?i:x1e(e,i)});return{calculatedDuration:t,next:l=>(o.value=a(l),o.done=l>=t,o)}}function vK(t,e){return e?t*(1e3/e):0}const b1e=5;function yK(t,e,n){const r=Math.max(e-b1e,0);return vK(n-t(r),e-r)}const OU=.001,w1e=.01,S1e=10,_1e=.05,E1e=1;function C1e({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,o,s=1-e;s=Qf(_1e,E1e,s),t=Qf(w1e,S1e,rd(t)),s<1?(i=c=>{const u=c*s,d=u*t,f=u-n,p=uI(c,s),b=Math.exp(-d);return OU-f/p*b},o=c=>{const d=c*s*t,f=d*n+n,p=Math.pow(s,2)*Math.pow(c,2)*t,b=Math.exp(-d),v=uI(Math.pow(c,2),s);return(-i(c)+OU>0?-1:1)*((f-p)*b)/v}):(i=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-.001+u*d},o=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const a=5/t,l=T1e(i,o,a);if(t=_p(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:s*2*Math.sqrt(r*c),duration:t}}}const A1e=12;function T1e(t,e,n){let r=n;for(let i=1;i<A1e;i++)r=r-t(r)/e(r);return r}function uI(t,e){return t*Math.sqrt(1-e*e)}const M1e=["duration","bounce"],P1e=["stiffness","damping","mass"];function NU(t,e){return e.some(n=>t[n]!==void 0)}function D1e(t){let e=j({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},t);if(!NU(t,P1e)&&NU(t,M1e)){const n=C1e(t);e=se(j(j({},e),n),{mass:1}),e.isResolvedFromDuration=!0}return e}function xK(i){var o=i,{keyframes:t,restDelta:e,restSpeed:n}=o,r=Dt(o,["keyframes","restDelta","restSpeed"]);const s=t[0],a=t[t.length-1],l={done:!1,value:s},{stiffness:c,damping:u,mass:d,duration:f,velocity:p,isResolvedFromDuration:b}=D1e(se(j({},r),{velocity:-rd(r.velocity||0)})),v=p||0,m=u/(2*Math.sqrt(c*d)),g=a-s,x=rd(Math.sqrt(c/d)),w=Math.abs(g)<5;n||(n=w?.01:2),e||(e=w?.005:.5);let S;if(m<1){const P=uI(x,m);S=I=>{const M=Math.exp(-m*x*I);return a-M*((v+m*x*g)/P*Math.sin(P*I)+g*Math.cos(P*I))}}else if(m===1)S=P=>a-Math.exp(-x*P)*(g+(v+x*g)*P);else{const P=x*Math.sqrt(m*m-1);S=I=>{const M=Math.exp(-m*x*I),D=Math.min(P*I,300);return a-M*((v+m*x*g)*Math.sinh(D)+P*g*Math.cosh(D))/P}}return{calculatedDuration:b&&f||null,next:P=>{const I=S(P);if(b)l.done=P>=f;else{let M=v;P!==0&&(m<1?M=yK(S,P,I):M=0);const D=Math.abs(M)<=n,E=Math.abs(a-I)<=e;l.done=D&&E}return l.value=l.done?a:I,l}}}function LU({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:s,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],f={done:!1,value:d},p=D=>a!==void 0&&D<a||l!==void 0&&D>l,b=D=>a===void 0?l:l===void 0||Math.abs(a-D)<Math.abs(l-D)?a:l;let v=n*e;const m=d+v,g=s===void 0?m:s(m);g!==m&&(v=g-d);const x=D=>-v*Math.exp(-D/r),w=D=>g+x(D),S=D=>{const E=x(D),_=w(D);f.done=Math.abs(E)<=c,f.value=f.done?g:_};let P,I;const M=D=>{p(f.value)&&(P=D,I=xK({keyframes:[f.value,b(f.value)],velocity:yK(w,D,f.value),damping:i,stiffness:o,restDelta:c,restSpeed:u}))};return M(0),{calculatedDuration:null,next:D=>{let E=!1;return!I&&P===void 0&&(E=!0,S(D),M(D)),P!==void 0&&D>P?I.next(D-P):(!E&&S(D),f)}}}const R1e=t=>{const e=({timestamp:n})=>t(n);return{start:()=>ci.update(e,!0),stop:()=>pd(e),now:()=>ss.isProcessing?ss.timestamp:performance.now()}},BU=2e4;function jU(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<BU;)e+=n,r=t.next(e);return e>=BU?1/0:e}const I1e={decay:LU,inertia:LU,tween:oC,keyframes:oC,spring:xK};function sC(p){var b=p,{autoplay:t=!0,delay:e=0,driver:n=R1e,keyframes:r,type:i="keyframes",repeat:o=0,repeatDelay:s=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:u,onUpdate:d}=b,f=Dt(b,["autoplay","delay","driver","keyframes","type","repeat","repeatDelay","repeatType","onPlay","onStop","onComplete","onUpdate"]);let v=1,m=!1,g,x;const w=()=>{x=new Promise(K=>{g=K})};w();let S;const P=I1e[i]||oC;let I;P!==oC&&typeof r[0]!="number"&&(I=gK([0,100],r,{clamp:!1}),r=[0,100]);const M=P(se(j({},f),{keyframes:r}));let D;a==="mirror"&&(D=P(se(j({},f),{keyframes:[...r].reverse(),velocity:-(f.velocity||0)})));let E="idle",_=null,A=null,R=null;M.calculatedDuration===null&&o&&(M.calculatedDuration=jU(M));const{calculatedDuration:F}=M;let L=1/0,N=1/0;F!==null&&(L=F+s,N=L*(o+1)-s);let U=0;const $=K=>{if(A===null)return;v>0&&(A=Math.min(A,K)),v<0&&(A=Math.min(K-N/v,A)),_!==null?U=_:U=Math.round(K-A)*v;const Z=U-e*(v>=0?1:-1),ee=v>=0?Z<0:Z>N;U=Math.max(Z,0),E==="finished"&&_===null&&(U=N);let V=U,J=M;if(o){const ye=Math.min(U,N)/L;let Ce=Math.floor(ye),_e=ye%1;!_e&&ye>=1&&(_e=1),_e===1&&Ce--,Ce=Math.min(Ce,o+1),!!(Ce%2)&&(a==="reverse"?(_e=1-_e,s&&(_e-=s/L)):a==="mirror"&&(J=D)),V=Qf(0,1,_e)*L}const oe=ee?{done:!1,value:r[0]}:J.next(V);I&&(oe.value=I(oe.value));let{done:ne}=oe;!ee&&F!==null&&(ne=v>=0?U>=N:U<=0);const pe=_===null&&(E==="finished"||E==="running"&&ne);return d&&d(oe.value),pe&&q(),oe},B=()=>{S&&S.stop(),S=void 0},H=()=>{E="idle",B(),g(),w(),A=R=null},q=()=>{E="finished",u&&u(),B(),g()},z=()=>{if(m)return;S||(S=n($));const K=S.now();l&&l(),_!==null?A=K-_:(!A||E==="finished")&&(A=K),E==="finished"&&w(),R=A,_=null,E="running",S.start()};t&&z();const G={then(K,Z){return x.then(K,Z)},get time(){return rd(U)},set time(K){K=_p(K),U=K,_!==null||!S||v===0?_=K:A=S.now()-K/v},get duration(){const K=M.calculatedDuration===null?jU(M):M.calculatedDuration;return rd(K)},get speed(){return v},set speed(K){K===v||!S||(v=K,G.time=rd(U))},get state(){return E},play:z,pause:()=>{E="paused",_=U},stop:()=>{m=!0,E!=="idle"&&(E="idle",c&&c(),H())},cancel:()=>{R!==null&&$(R),H()},complete:()=>{E="finished"},sample:K=>(A=0,$(K))};return G}function k1e(t){let e;return()=>(e===void 0&&(e=t()),e)}const F1e=k1e(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),O1e=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),gS=10,N1e=2e4,L1e=(t,e)=>e.type==="spring"||t==="backgroundColor"||!Xq(e.ease);function B1e(t,e,o){var s=o,{onUpdate:n,onComplete:r}=s,i=Dt(s,["onUpdate","onComplete"]);if(!(F1e()&&O1e.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let l=!1,c,u,d=!1;const f=()=>{u=new Promise(P=>{c=P})};f();let{keyframes:p,duration:b=300,ease:v,times:m}=i;if(L1e(e,i)){const P=sC(se(j({},i),{repeat:0,delay:0}));let I={done:!1,value:p[0]};const M=[];let D=0;for(;!I.done&&D<N1e;)I=P.sample(D),M.push(I.value),D+=gS;m=void 0,p=M,b=D-gS,v="linear"}const g=qwe(t.owner.current,e,p,se(j({},i),{duration:b,ease:v,times:m})),x=()=>{d=!1,g.cancel()},w=()=>{d=!0,ci.update(x),c(),f()};return g.onfinish=()=>{d||(t.set(Kwe(p,i)),r&&r(),w())},{then(P,I){return u.then(P,I)},attachTimeline(P){return g.timeline=P,g.onfinish=null,Zi},get time(){return rd(g.currentTime||0)},set time(P){g.currentTime=_p(P)},get speed(){return g.playbackRate},set speed(P){g.playbackRate=P},get duration(){return rd(b)},play:()=>{l||(g.play(),pd(x))},pause:()=>g.pause(),stop:()=>{if(l=!0,g.playState==="idle")return;const{currentTime:P}=g;if(P){const I=sC(se(j({},i),{autoplay:!1}));t.setWithVelocity(I.sample(P-gS).value,I.sample(P).value,gS)}w()},complete:()=>{d||g.finish()},cancel:w}}function j1e({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Zi,pause:Zi,stop:Zi,then:o=>(o(),Promise.resolve()),cancel:Zi,complete:Zi});return e?sC({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const U1e={type:"spring",stiffness:500,damping:25,restSpeed:10},z1e=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),V1e={type:"keyframes",duration:.8},W1e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},$1e=(t,{keyframes:e})=>e.length>2?V1e:cm.has(t)?t.startsWith("scale")?z1e(e[1]):U1e:W1e,dI=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Zf.test(e)||e==="0")&&!e.startsWith("url(")),H1e=new Set(["brightness","contrast","saturate","opacity"]);function G1e(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(ZA)||[];if(!r)return t;const i=n.replace(r,"");let o=H1e.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const q1e=/([a-z-]*)\(.*?\)/g,fI=se(j({},Zf),{getAnimatableNone:t=>{const e=t.match(q1e);return e?e.map(G1e).join(" "):t}}),K1e=se(j({},kq),{color:Es,backgroundColor:Es,outlineColor:Es,fill:Es,stroke:Es,borderColor:Es,borderTopColor:Es,borderRightColor:Es,borderBottomColor:Es,borderLeftColor:Es,filter:fI,WebkitFilter:fI}),lN=t=>K1e[t];function bK(t,e){let n=lN(t);return n!==fI&&(n=Zf),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const wK=t=>/^0[^.\s]+$/.test(t);function Y1e(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||wK(t)}function X1e(t,e,n,r){const i=dI(e,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const s=r.from!==void 0?r.from:t.get();let a;const l=[];for(let c=0;c<o.length;c++)o[c]===null&&(o[c]=c===0?s:o[c-1]),Y1e(o[c])&&l.push(c),typeof o[c]=="string"&&o[c]!=="none"&&o[c]!=="0"&&(a=o[c]);if(i&&l.length&&a)for(let c=0;c<l.length;c++){const u=l[c];o[u]=bK(e,a)}return o}function Q1e(d){var f=d,{when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:s,repeatDelay:a,from:l,elapsed:c}=f,u=Dt(f,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"]);return!!Object.keys(u).length}function cN(t,e){return t[e]||t.default||t}const Z1e={skipAnimations:!1},uN=(t,e,n,r={})=>i=>{const o=cN(r,t)||{},s=o.delay||r.delay||0;let{elapsed:a=0}=r;a=a-_p(s);const l=X1e(e,t,n,o),c=l[0],u=l[l.length-1],d=dI(t,c),f=dI(t,u);let p=se(j({keyframes:l,velocity:e.getVelocity(),ease:"easeOut"},o),{delay:-a,onUpdate:b=>{e.set(b),o.onUpdate&&o.onUpdate(b)},onComplete:()=>{i(),o.onComplete&&o.onComplete()}});if(Q1e(o)||(p=j(j({},p),$1e(t,p))),p.duration&&(p.duration=_p(p.duration)),p.repeatDelay&&(p.repeatDelay=_p(p.repeatDelay)),!d||!f||Gwe.current||o.type===!1||Z1e.skipAnimations)return j1e(p);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const b=B1e(e,t,p);if(b)return b}return sC(p)};function aC(t){return!!(da(t)&&t.add)}const SK=t=>/^\-?\d*\.?\d+$/.test(t);function dN(t,e){t.indexOf(e)===-1&&t.push(e)}function fN(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class hN{constructor(){this.subscriptions=[]}add(e){return dN(this.subscriptions,e),()=>fN(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const s=this.subscriptions[o];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const J1e=t=>!isNaN(parseFloat(t));class eSe{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:o,timestamp:s}=ss;this.lastUpdated!==s&&(this.timeDelta=o,this.lastUpdated=s,ci.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ci.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=J1e(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new hN);const r=this.events[e].add(n);return e==="change"?()=>{r(),ci.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?vK(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Tv(t,e){return new eSe(t,e)}const _K=t=>e=>e.test(t),tSe={test:t=>t==="auto",parse:t=>t},EK=[um,On,zc,sf,lwe,awe,tSe],ey=t=>EK.find(_K(t)),nSe=[...EK,Es,Zf],rSe=t=>nSe.find(_K(t));function iSe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Tv(n))}function oSe(t,e){const n=eT(t,e);let s=n?t.makeTargetAnimatable(n,!1):{},{transitionEnd:r={},transition:i={}}=s,o=Dt(s,["transitionEnd","transition"]);o=j(j({},o),r);for(const a in o){const l=Swe(o[a]);iSe(t,a,l)}}function sSe(t,e,n){var r,i;const o=Object.keys(e).filter(a=>!t.hasValue(a)),s=o.length;if(s)for(let a=0;a<s;a++){const l=o[a],c=e[l];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(i=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&i!==void 0?i:e[l]),u!=null&&(typeof u=="string"&&(SK(u)||wK(u))?u=parseFloat(u):!rSe(u)&&Zf.test(c)&&(u=bK(l,c)),t.addValue(l,Tv(u,{owner:t})),n[l]===void 0&&(n[l]=u),u!==null&&t.setBaseTarget(l,u))}}function aSe(t,e){return e?(e[t]||e.default||e).from:void 0}function lSe(t,e,n){const r={};for(const i in t){const o=aSe(i,e);if(o!==void 0)r[i]=o;else{const s=n.getValue(i);s&&(r[i]=s.get())}}return r}function cSe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function uSe(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function CK(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let d=t.makeTargetAnimatable(e),{transition:o=t.getDefaultTransition(),transitionEnd:s}=d,a=Dt(d,["transition","transitionEnd"]);const l=t.getValue("willChange");r&&(o=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const f in a){const p=t.getValue(f),b=a[f];if(!p||b===void 0||u&&cSe(u,f))continue;const v=j({delay:n,elapsed:0},cN(o||{},f));if(window.HandoffAppearAnimations){const x=t.getProps()[Aq];if(x){const w=window.HandoffAppearAnimations(x,f,p,ci);w!==null&&(v.elapsed=w,v.isHandoff=!0)}}let m=!v.isHandoff&&!uSe(p,b);if(v.type==="spring"&&(p.getVelocity()||v.velocity)&&(m=!1),p.animation&&(m=!1),m)continue;p.start(uN(f,p,b,t.shouldReduceMotion&&cm.has(f)?{type:!1}:v));const g=p.animation;aC(l)&&(l.add(f),g.then(()=>l.remove(f))),c.push(g)}return s&&Promise.all(c).then(()=>{s&&oSe(t,s)}),c}function hI(t,e,n={}){const r=eT(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(CK(t,r,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:d}=i;return dSe(t,e,c+l,u,d,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,c]=a==="beforeChildren"?[o,s]:[s,o];return l().then(()=>c())}else return Promise.all([o(),s(n.delay)])}function dSe(t,e,n=0,r=0,i=1,o){const s=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(fSe).forEach((c,u)=>{c.notify("AnimationStart",e),s.push(hI(c,e,se(j({},o),{delay:n+l(u)})).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(s)}function fSe(t,e){return t.sortNodePosition(e)}function hSe(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>hI(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=hI(t,e,n);else{const i=typeof e=="function"?eT(t,e,n.custom):e;r=Promise.all(CK(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const pSe=[...KO].reverse(),mSe=KO.length;function gSe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>hSe(t,n,r)))}function vSe(t){let e=gSe(t);const n=xSe();let r=!0;const i=(l,c)=>{const u=eT(t,c);if(u){const d=u,{transition:f,transitionEnd:p}=d,b=Dt(d,["transition","transitionEnd"]);l=j(j(j({},l),b),p)}return l};function o(l){e=l(t)}function s(l,c){const u=t.getProps(),d=t.getVariantContext(!0)||{},f=[],p=new Set;let b={},v=1/0;for(let g=0;g<mSe;g++){const x=pSe[g],w=n[x],S=u[x]!==void 0?u[x]:d[x],P=db(S),I=x===c?w.isActive:null;I===!1&&(v=g);let M=S===d[x]&&S!==u[x]&&P;if(M&&r&&t.manuallyAnimateOnMount&&(M=!1),w.protectedKeys=j({},b),!w.isActive&&I===null||!S&&!w.prevProp||XA(S)||typeof S=="boolean")continue;let E=ySe(w.prevProp,S)||x===c&&w.isActive&&!M&&P||g>v&&P,_=!1;const A=Array.isArray(S)?S:[S];let R=A.reduce(i,{});I===!1&&(R={});const{prevResolvedValues:F={}}=w,L=j(j({},F),R),N=U=>{E=!0,p.has(U)&&(_=!0,p.delete(U)),w.needsAnimating[U]=!0};for(const U in L){const $=R[U],B=F[U];if(b.hasOwnProperty(U))continue;let H=!1;rC($)&&rC(B)?H=!Kq($,B):H=$!==B,H?$!==void 0?N(U):p.add(U):$!==void 0&&p.has(U)?N(U):w.protectedKeys[U]=!0}w.prevProp=S,w.prevResolvedValues=R,w.isActive&&(b=j(j({},b),R)),r&&t.blockInitialAnimation&&(E=!1),E&&(!M||_)&&f.push(...A.map(U=>({animation:U,options:j({type:x},l)})))}if(p.size){const g={};p.forEach(x=>{const w=t.getBaseTarget(x);w!==void 0&&(g[x]=w)}),f.push({animation:g})}let m=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(m=!1),r=!1,m?e(f):Promise.resolve()}function a(l,c,u){var d;if(n[l].isActive===c)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(p=>{var b;return(b=p.animationState)===null||b===void 0?void 0:b.setActive(l,c)}),n[l].isActive=c;const f=s(u,l);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:s,setActive:a,setAnimateFunction:o,getState:()=>n}}function ySe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Kq(e,t):!1}function Fh(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function xSe(){return{animate:Fh(!0),whileInView:Fh(),whileHover:Fh(),whileTap:Fh(),whileDrag:Fh(),whileFocus:Fh(),exit:Fh()}}class bSe extends lh{constructor(e){super(e),e.animationState||(e.animationState=vSe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),XA(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let wSe=0;class SSe extends lh{constructor(){super(...arguments),this.id=wSe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const o=this.node.animationState.setActive("exit",!e,{custom:r!=null?r:this.node.getProps().custom});n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const _Se={animation:{Feature:bSe},exit:{Feature:SSe}},UU=(t,e)=>Math.abs(t-e);function ESe(t,e){const n=UU(t.x,e.x),r=UU(t.y,e.y);return Math.sqrt(Cu(n,2)+Cu(r,2))}class AK{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=aP(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=ESe(d.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:b}=d,{timestamp:v}=ss;this.history.push(se(j({},b),{timestamp:v}));const{onStart:m,onMove:g}=this.handlers;f||(m&&m(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=sP(f,this.transformPagePoint),ci.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:p,onSessionEnd:b,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=aP(d.type==="pointercancel"?this.lastMoveEventInfo:sP(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,m),b&&b(d,m)},!Wq(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=JA(e),a=sP(s,this.transformPagePoint),{point:l}=a,{timestamp:c}=ss;this.history=[se(j({},l),{timestamp:c})];const{onSessionStart:u}=n;u&&u(e,aP(a,this.history)),this.removeListeners=jf(nd(this.contextWindow,"pointermove",this.handlePointerMove),nd(this.contextWindow,"pointerup",this.handlePointerUp),nd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),pd(this.updatePoint)}}function sP(t,e){return e?{point:e(t.point)}:t}function zU(t,e){return{x:t.x-e.x,y:t.y-e.y}}function aP({point:t},e){return{point:t,delta:zU(t,TK(e)),offset:zU(t,CSe(e)),velocity:ASe(e,.1)}}function CSe(t){return t[0]}function TK(t){return t[t.length-1]}function ASe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=TK(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>_p(e)));)n--;if(!r)return{x:0,y:0};const o=rd(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const s={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function ka(t){return t.max-t.min}function pI(t,e=0,n=.01){return Math.abs(t-e)<=n}function VU(t,e,n,r=.5){t.origin=r,t.originPoint=Di(e.min,e.max,t.origin),t.scale=ka(n)/ka(e),(pI(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Di(n.min,n.max,t.origin)-t.originPoint,(pI(t.translate)||isNaN(t.translate))&&(t.translate=0)}function hx(t,e,n,r){VU(t.x,e.x,n.x,r?r.originX:void 0),VU(t.y,e.y,n.y,r?r.originY:void 0)}function WU(t,e,n){t.min=n.min+e.min,t.max=t.min+ka(e)}function TSe(t,e,n){WU(t.x,e.x,n.x),WU(t.y,e.y,n.y)}function $U(t,e,n){t.min=e.min-n.min,t.max=t.min+ka(e)}function px(t,e,n){$U(t.x,e.x,n.x),$U(t.y,e.y,n.y)}function MSe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Di(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Di(n,t,r.max):Math.min(t,n)),t}function HU(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function PSe(t,{top:e,left:n,bottom:r,right:i}){return{x:HU(t.x,n,i),y:HU(t.y,e,r)}}function GU(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function DSe(t,e){return{x:GU(t.x,e.x),y:GU(t.y,e.y)}}function RSe(t,e){let n=.5;const r=ka(t),i=ka(e);return i>r?n=hb(e.min,e.max-r,t.min):r>i&&(n=hb(t.min,t.max-i,e.min)),Qf(0,1,n)}function ISe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const mI=.35;function kSe(t=mI){return t===!1?t=0:t===!0&&(t=mI),{x:qU(t,"left","right"),y:qU(t,"top","bottom")}}function qU(t,e,n){return{min:KU(t,e),max:KU(t,n)}}function KU(t,e){return typeof t=="number"?t:t[e]||0}const YU=()=>({translate:0,scale:1,origin:0,originPoint:0}),Bg=()=>({x:YU(),y:YU()}),XU=()=>({min:0,max:0}),io=()=>({x:XU(),y:XU()});function tl(t){return[t("x"),t("y")]}function MK({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function FSe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function OSe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function lP(t){return t===void 0||t===1}function gI({scale:t,scaleX:e,scaleY:n}){return!lP(t)||!lP(e)||!lP(n)}function Hh(t){return gI(t)||PK(t)||t.z||t.rotate||t.rotateX||t.rotateY}function PK(t){return QU(t.x)||QU(t.y)}function QU(t){return t&&t!=="0%"}function lC(t,e,n){const r=t-n,i=e*r;return n+i}function ZU(t,e,n,r,i){return i!==void 0&&(t=lC(t,i,r)),lC(t,n,r)+e}function vI(t,e=0,n=1,r,i){t.min=ZU(t.min,e,n,r,i),t.max=ZU(t.max,e,n,r,i)}function DK(t,{x:e,y:n}){vI(t.x,e.translate,e.scale,e.originPoint),vI(t.y,n.translate,n.scale,n.originPoint)}function NSe(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,s;for(let a=0;a<i;a++){o=n[a],s=o.projectionDelta;const l=o.instance;l&&l.style&&l.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&jg(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,DK(t,s)),r&&Hh(o.latestValues)&&jg(t,o.latestValues))}e.x=JU(e.x),e.y=JU(e.y)}function JU(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function df(t,e){t.min=t.min+e,t.max=t.max+e}function e6(t,e,[n,r,i]){const o=e[i]!==void 0?e[i]:.5,s=Di(t.min,t.max,o);vI(t,e[n],e[r],s,e.scale)}const LSe=["x","scaleX","originX"],BSe=["y","scaleY","originY"];function jg(t,e){e6(t.x,e,LSe),e6(t.y,e,BSe)}function RK(t,e){return MK(OSe(t.getBoundingClientRect(),e))}function jSe(t,e,n){const r=RK(t,n),{scroll:i}=e;return i&&(df(r.x,i.offset.x),df(r.y,i.offset.y)),r}const IK=({current:t})=>t?t.ownerDocument.defaultView:null,USe=new WeakMap;class zSe{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=io(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(JA(u,"page").point)},o=(u,d)=>{const{drag:f,dragPropagation:p,onDragStart:b}=this.getProps();if(f&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Hq(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),tl(m=>{let g=this.getAxisMotionValue(m).get()||0;if(zc.test(g)){const{projection:x}=this.visualElement;if(x&&x.layout){const w=x.layout.layoutBox[m];w&&(g=ka(w)*(parseFloat(g)/100))}}this.originPoint[m]=g}),b&&ci.update(()=>b(u,d),!1,!0);const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},s=(u,d)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:b,onDrag:v}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:m}=d;if(p&&this.currentDirection===null){this.currentDirection=VSe(m),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",d.point,m),this.updateAxis("y",d.point,m),this.visualElement.render(),v&&v(u,d)},a=(u,d)=>this.stop(u,d),l=()=>tl(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new AK(e,{onSessionStart:i,onStart:o,onMove:s,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:IK(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&ci.update(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!vS(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=MSe(s,this.constraints[e],this.elastic[e])),o.set(s)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&Ng(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=PSe(i.layoutBox,n):this.constraints=!1,this.elastic=kSe(r),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&tl(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=ISe(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ng(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=jSe(r,i.root,this.visualElement.getTransformPagePoint());let s=DSe(i.layout.layoutBox,o);if(n){const a=n(FSe(s));this.hasMutatedConstraints=!!a,a&&(s=MK(a))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=tl(u=>{if(!vS(u,n,this.currentDirection))return;let d=l&&l[u]||{};s&&(d={min:0,max:0});const f=i?200:1e6,p=i?40:1e7,b=j(j({type:"inertia",velocity:r?e[u]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10},o),d);return this.startAxisValueAnimation(u,b)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(uN(e,r,0,n))}stopAnimation(){tl(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){tl(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){tl(n=>{const{drag:r}=this.getProps();if(!vS(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:a}=i.layout.layoutBox[n];o.set(e[n]-Di(s,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ng(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};tl(s=>{const a=this.getAxisMotionValue(s);if(a){const l=a.get();i[s]=RSe({min:l,max:l},this.constraints[s])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),tl(s=>{if(!vS(s,e,null))return;const a=this.getAxisMotionValue(s),{min:l,max:c}=this.constraints[s];a.set(Di(l,c,i[s]))})}addListeners(){if(!this.visualElement.current)return;USe.set(this.visualElement,this);const e=this.visualElement.current,n=nd(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ng(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const s=$u(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(tl(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{s(),n(),o(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:s=mI,dragMomentum:a=!0}=e;return se(j({},e),{drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:s,dragMomentum:a})}}function vS(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function VSe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class WSe extends lh{constructor(e){super(e),this.removeGroupControls=Zi,this.removeListeners=Zi,this.controls=new zSe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zi}unmount(){this.removeGroupControls(),this.removeListeners()}}const t6=t=>(e,n)=>{t&&ci.update(()=>t(e,n))};class $Se extends lh{constructor(){super(...arguments),this.removePointerDownListener=Zi}onPointerDown(e){this.session=new AK(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:IK(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:t6(e),onStart:t6(n),onMove:r,onEnd:(o,s)=>{delete this.session,i&&ci.update(()=>i(o,s))}}}mount(){this.removePointerDownListener=nd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function kK(){const t=T.useContext(uw);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=T.useId();return T.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}function HSe(){return GSe(T.useContext(uw))}function GSe(t){return t===null?!0:t.isPresent}const H_={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function n6(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ty={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(On.test(t))t=parseFloat(t);else return t;const n=n6(t,e.target.x),r=n6(t,e.target.y);return`${n}% ${r}%`}},qSe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Zf.parse(t);if(i.length>5)return r;const o=Zf.createTransformer(t),s=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+s]/=a,i[1+s]/=l;const c=Di(a,l,.5);return typeof i[2+s]=="number"&&(i[2+s]/=c),typeof i[3+s]=="number"&&(i[3+s]/=c),o(i)}};class KSe extends Lt.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;ewe(YSe),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions(se(j({},o.options),{onExitComplete:()=>this.safeToRemove()}))),H_.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,s=r.projection;return s&&(s.isPresent=o,i||e.layoutDependency!==n||n===void 0?s.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?s.promote():s.relegate()||ci.postRender(()=>{const a=s.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function FK(t){const[e,n]=kK(),r=T.useContext(XO);return Lt.createElement(KSe,se(j({},t),{layoutGroup:r,switchLayoutGroup:T.useContext(Mq),isPresent:e,safeToRemove:n}))}const YSe={borderRadius:se(j({},ty),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:ty,borderTopRightRadius:ty,borderBottomLeftRadius:ty,borderBottomRightRadius:ty,boxShadow:qSe},OK=["TopLeft","TopRight","BottomLeft","BottomRight"],XSe=OK.length,r6=t=>typeof t=="string"?parseFloat(t):t,i6=t=>typeof t=="number"||On.test(t);function QSe(t,e,n,r,i,o){i?(t.opacity=Di(0,n.opacity!==void 0?n.opacity:1,ZSe(r)),t.opacityExit=Di(e.opacity!==void 0?e.opacity:1,0,JSe(r))):o&&(t.opacity=Di(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let s=0;s<XSe;s++){const a=`border${OK[s]}Radius`;let l=o6(e,a),c=o6(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||i6(l)===i6(c)?(t[a]=Math.max(Di(r6(l),r6(c),r),0),(zc.test(c)||zc.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Di(e.rotate||0,n.rotate||0,r))}function o6(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const ZSe=NK(0,.5,rK),JSe=NK(.5,.95,Zi);function NK(t,e,n){return r=>r<t?0:r>e?1:n(hb(t,e,r))}function s6(t,e){t.min=e.min,t.max=e.max}function Za(t,e){s6(t.x,e.x),s6(t.y,e.y)}function a6(t,e,n,r,i){return t-=e,t=lC(t,1/n,r),i!==void 0&&(t=lC(t,1/i,r)),t}function e_e(t,e=0,n=1,r=.5,i,o=t,s=t){if(zc.test(e)&&(e=parseFloat(e),e=Di(s.min,s.max,e/100)-s.min),typeof e!="number")return;let a=Di(o.min,o.max,r);t===o&&(a-=e),t.min=a6(t.min,e,n,a,i),t.max=a6(t.max,e,n,a,i)}function l6(t,e,[n,r,i],o,s){e_e(t,e[n],e[r],e[i],e.scale,o,s)}const t_e=["x","scaleX","originX"],n_e=["y","scaleY","originY"];function c6(t,e,n,r){l6(t.x,e,t_e,n?n.x:void 0,r?r.x:void 0),l6(t.y,e,n_e,n?n.y:void 0,r?r.y:void 0)}function u6(t){return t.translate===0&&t.scale===1}function LK(t){return u6(t.x)&&u6(t.y)}function r_e(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function BK(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function d6(t){return ka(t.x)/ka(t.y)}class i_e{constructor(){this.members=[]}add(e){dN(this.members,e),e.scheduleRender()}remove(e){if(fN(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function f6(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y;if((i||o)&&(r=`translate3d(${i}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:c,rotateY:u}=n;l&&(r+=`rotate(${l}deg) `),c&&(r+=`rotateX(${c}deg) `),u&&(r+=`rotateY(${u}deg) `)}const s=t.x.scale*e.x,a=t.y.scale*e.y;return(s!==1||a!==1)&&(r+=`scale(${s}, ${a})`),r||"none"}const o_e=(t,e)=>t.depth-e.depth;class s_e{constructor(){this.children=[],this.isDirty=!1}add(e){dN(this.children,e),this.isDirty=!0}remove(e){fN(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(o_e),this.isDirty=!1,this.children.forEach(e)}}function a_e(t,e){const n=performance.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(pd(r),t(o-e))};return ci.read(r,!0),()=>pd(r)}function l_e(t){window.MotionDebug&&window.MotionDebug.record(t)}function c_e(t){return t instanceof SVGElement&&t.tagName!=="svg"}function u_e(t,e,n){const r=da(t)?t:Tv(t);return r.start(uN("",r,e,n)),r.animation}const h6=["","X","Y","Z"],d_e={visibility:"hidden"},p6=1e3;let f_e=0;const Gh={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function jK({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},a=e==null?void 0:e()){this.id=f_e++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Gh.totalNodes=Gh.resolvedTargetDeltas=Gh.recalculatedProjection=0,this.nodes.forEach(m_e),this.nodes.forEach(b_e),this.nodes.forEach(w_e),this.nodes.forEach(g_e),l_e(Gh)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new s_e)}addEventListener(s,a){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new hN),this.eventHandlers.get(s).add(a)}notifyListeners(s,...a){const l=this.eventHandlers.get(s);l&&l.notify(...a)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=c_e(s),this.instance=s;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(s,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=a_e(f,250),H_.hasAnimatedSinceResize&&(H_.hasAnimatedSinceResize=!1,this.nodes.forEach(g6))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||A_e,{onLayoutAnimationStart:m,onLayoutAnimationComplete:g}=u.getProps(),x=!this.targetLayout||!BK(this.targetLayout,b)||p,w=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||f&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,w);const S=se(j({},cN(v,"layout")),{onPlay:m,onComplete:g});(u.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else f||g6(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,pd(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(S_e),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(m6);return}this.isUpdating||this.nodes.forEach(y_e),this.isUpdating=!1,this.nodes.forEach(x_e),this.nodes.forEach(h_e),this.nodes.forEach(p_e),this.clearAllSnapshots();const a=performance.now();ss.delta=Qf(0,1e3/60,a-ss.timestamp),ss.timestamp=a,ss.isProcessing=!0,JM.update.process(ss),JM.preRender.process(ss),JM.render.process(ss),ss.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(v_e),this.sharedNodes.forEach(__e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ci.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ci.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=io(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:s,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!LK(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;s&&(a||Hh(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return s&&(l=this.removeTransform(l)),T_e(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return io();const a=s.measureViewportBox(),{scroll:l}=this.root;return l&&(df(a.x,l.offset.x),df(a.y,l.offset.y)),a}removeElementScroll(s){const a=io();Za(a,s);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:d}=c;if(c!==this.root&&u&&d.layoutScroll){if(u.isRoot){Za(a,s);const{scroll:f}=this.root;f&&(df(a.x,-f.offset.x),df(a.y,-f.offset.y))}df(a.x,u.offset.x),df(a.y,u.offset.y)}}return a}applyTransform(s,a=!1){const l=io();Za(l,s);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&jg(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Hh(u.latestValues)&&jg(l,u.latestValues)}return Hh(this.latestValues)&&jg(l,this.latestValues),l}removeTransform(s){const a=io();Za(a,s);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Hh(c.latestValues))continue;gI(c.latestValues)&&c.updateSnapshot();const u=io(),d=c.measurePageBox();Za(u,d),c6(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Hh(this.latestValues)&&c6(a,this.latestValues),a}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options=se(j(j({},this.options),s),{crossfade:s.crossfade!==void 0?s.crossfade:!0})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ss.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=ss.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=io(),this.relativeTargetOrigin=io(),px(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Za(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=io(),this.targetWithTransforms=io()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),TSe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Za(this.target,this.layout.layoutBox),DK(this.target,this.targetDelta)):Za(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=io(),this.relativeTargetOrigin=io(),px(this.relativeTargetOrigin,this.target,p.target),Za(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Gh.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||gI(this.parent.latestValues)||PK(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ss.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Za(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;NSe(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:b}=a;if(!b){this.projectionTransform&&(this.projectionDelta=Bg(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Bg(),this.projectionDeltaWithTransform=Bg());const v=this.projectionTransform;hx(this.projectionDelta,this.layoutCorrected,b,this.latestValues),this.projectionTransform=f6(this.projectionDelta,this.treeScale),(this.projectionTransform!==v||this.treeScale.x!==f||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),Gh.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),s){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(s,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u=j({},this.latestValues),d=Bg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=io(),p=l?l.source:void 0,b=this.layout?this.layout.source:void 0,v=p!==b,m=this.getStack(),g=!m||m.members.length<=1,x=!!(v&&!g&&this.options.crossfade===!0&&!this.path.some(C_e));this.animationProgress=0;let w;this.mixTargetDelta=S=>{const P=S/1e3;v6(d.x,s.x,P),v6(d.y,s.y,P),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(px(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),E_e(this.relativeTarget,this.relativeTargetOrigin,f,P),w&&r_e(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=io()),Za(w,this.relativeTarget)),v&&(this.animationValues=u,QSe(u,c,this.latestValues,P,x,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(pd(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ci.update(()=>{H_.hasAnimatedSinceResize=!0,this.currentAnimation=u_e(0,p6,se(j({},s),{onUpdate:a=>{this.mixTargetDelta(a),s.onUpdate&&s.onUpdate(a)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(p6),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=s;if(!(!a||!l||!c)){if(this!==s&&this.layout&&c&&UK(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||io();const d=ka(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+d;const f=ka(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+f}Za(a,l),jg(a,u),hx(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(s,a){this.sharedNodes.has(s)||this.sharedNodes.set(s,new i_e),this.sharedNodes.get(s).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:a}=this.options;return a?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:a}=this.options;return a?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetRotation(){const{visualElement:s}=this.options;if(!s)return;let a=!1;const{latestValues:l}=s;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let u=0;u<h6.length;u++){const d="rotate"+h6[u];l[d]&&(c[d]=l[d],s.setStaticValue(d,0))}s.render();for(const u in c)s.setStaticValue(u,c[u]);s.scheduleRender()}getProjectionStyles(s){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return d_e;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=$_(s==null?void 0:s.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=$_(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!Hh(this.latestValues)&&(v.transform=u?u({},""):"none",this.hasProjected=!1),v}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=f6(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:p,y:b}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${b.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const v in tC){if(f[v]===void 0)continue;const{correct:m,applyTo:g}=tC[v],x=c.transform==="none"?f[v]:m(f[v],d);if(g){const w=g.length;for(let S=0;S<w;S++)c[g[S]]=x}else c[v]=x}return this.options.layoutId&&(c.pointerEvents=d===this?$_(s==null?void 0:s.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var a;return(a=s.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(m6),this.root.sharedNodes.clear()}}}function h_e(t){t.updateLayout()}function p_e(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,s=n.source!==t.layout.source;o==="size"?tl(d=>{const f=s?n.measuredBox[d]:n.layoutBox[d],p=ka(f);f.min=r[d].min,f.max=f.min+p}):UK(o,n.layoutBox,r)&&tl(d=>{const f=s?n.measuredBox[d]:n.layoutBox[d],p=ka(r[d]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+p)});const a=Bg();hx(a,r,n.layoutBox);const l=Bg();s?hx(l,t.applyTransform(i,!0),n.measuredBox):hx(l,r,n.layoutBox);const c=!LK(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const b=io();px(b,n.layoutBox,f.layoutBox);const v=io();px(v,r,p.layoutBox),BK(b,v)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=b,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function m_e(t){Gh.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function g_e(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function v_e(t){t.clearSnapshot()}function m6(t){t.clearMeasurements()}function y_e(t){t.isLayoutDirty=!1}function x_e(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function g6(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function b_e(t){t.resolveTargetDelta()}function w_e(t){t.calcProjection()}function S_e(t){t.resetRotation()}function __e(t){t.removeLeadSnapshot()}function v6(t,e,n){t.translate=Di(e.translate,0,n),t.scale=Di(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function y6(t,e,n,r){t.min=Di(e.min,n.min,r),t.max=Di(e.max,n.max,r)}function E_e(t,e,n,r){y6(t.x,e.x,n.x,r),y6(t.y,e.y,n.y,r)}function C_e(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const A_e={duration:.45,ease:[.4,0,.1,1]},x6=t=>typeof navigator!="undefined"&&navigator.userAgent.toLowerCase().includes(t),b6=x6("applewebkit/")&&!x6("chrome/")?Math.round:Zi;function w6(t){t.min=b6(t.min),t.max=b6(t.max)}function T_e(t){w6(t.x),w6(t.y)}function UK(t,e,n){return t==="position"||t==="preserve-aspect"&&!pI(d6(e),d6(n),.2)}const M_e=jK({attachResizeListener:(t,e)=>$u(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),cP={current:void 0},zK=jK({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!cP.current){const t=new M_e({});t.mount(window),t.setOptions({layoutScroll:!0}),cP.current=t}return cP.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),P_e={pan:{Feature:$Se},drag:{Feature:WSe,ProjectionNode:zK,MeasureLayout:FK}},D_e=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function R_e(t){const e=D_e.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function yI(t,e,n=1){const[r,i]=R_e(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const s=o.trim();return SK(s)?parseFloat(s):s}else return aI(i)?yI(i,e,n+1):i}function I_e(t,r,n){var e=Dt(r,[]);const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n=j({},n)),t.values.forEach(o=>{const s=o.get();if(!aI(s))return;const a=yI(s,i);a&&o.set(a)});for(const o in e){const s=e[o];if(!aI(s))continue;const a=yI(s,i);a&&(e[o]=a,n||(n={}),n[o]===void 0&&(n[o]=s))}return{target:e,transitionEnd:n}}const k_e=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),VK=t=>k_e.has(t),F_e=t=>Object.keys(t).some(VK),S6=t=>t===um||t===On,_6=(t,e)=>parseFloat(t.split(", ")[e]),E6=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return _6(i[1],e);{const o=r.match(/^matrix\((.+)\)$/);return o?_6(o[1],t):0}},O_e=new Set(["x","y","z"]),N_e=dw.filter(t=>!O_e.has(t));function L_e(t){const e=[];return N_e.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Mv={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:E6(4,13),y:E6(5,14)};Mv.translateX=Mv.x;Mv.translateY=Mv.y;const B_e=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,o=getComputedStyle(i),{display:s}=o,a={};s==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=Mv[c](r,o)}),e.render();const l=e.measureViewportBox();return n.forEach(c=>{const u=e.getValue(c);u&&u.jump(a[c]),t[c]=Mv[c](l,o)}),t},j_e=(t,e,n={},r={})=>{e=j({},e),r=j({},r);const i=Object.keys(e).filter(VK);let o=[],s=!1;const a=[];if(i.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let u=n[l],d=ey(u);const f=e[l];let p;if(rC(f)){const b=f.length,v=f[0]===null?1:0;u=f[v],d=ey(u);for(let m=v;m<b&&f[m]!==null;m++)p?iN(ey(f[m])===p):p=ey(f[m])}else p=ey(f);if(d!==p)if(S6(d)&&S6(p)){const b=c.get();typeof b=="string"&&c.set(parseFloat(b)),typeof f=="string"?e[l]=parseFloat(f):Array.isArray(f)&&p===On&&(e[l]=f.map(parseFloat))}else d!=null&&d.transform&&(p!=null&&p.transform)&&(u===0||f===0)?u===0?c.set(p.transform(u)):e[l]=d.transform(f):(s||(o=L_e(t),s=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],c.jump(f))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=B_e(e,t,a);return o.length&&o.forEach(([u,d])=>{t.getValue(u).set(d)}),t.render(),YA&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function U_e(t,e,n,r){return F_e(e)?j_e(t,e,n,r):{target:e,transitionEnd:r}}const z_e=(t,e,n,r)=>{const i=I_e(t,e,r);return e=i.target,r=i.transitionEnd,U_e(t,e,n,r)},xI={current:null},WK={current:!1};function V_e(){if(WK.current=!0,!!YA)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>xI.current=t.matches;t.addListener(e),e()}else xI.current=!1}function W_e(t,e,n){const{willChange:r}=e;for(const i in e){const o=e[i],s=n[i];if(da(o))t.addValue(i,o),aC(r)&&r.add(i);else if(da(s))t.addValue(i,Tv(o,{owner:t})),aC(r)&&r.remove(i);else if(s!==o)if(t.hasValue(i)){const a=t.getValue(i);!a.hasAnimated&&a.set(o)}else{const a=t.getStaticValue(i);t.addValue(i,Tv(a!==void 0?a:o,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const C6=new WeakMap,$K=Object.keys(fb),$_e=$K.length,A6=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],H_e=YO.length;class G_e{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:o},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ci.render(this.render,!1,!0);const{latestValues:a,renderState:l}=o;this.latestValues=a,this.baseTarget=j({},a),this.initialValues=n.initial?j({},a):{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=s,this.isControllingVariants=QA(n),this.isVariantNode=Tq(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const d=this.scrapeMotionValuesFromProps(n,{}),{willChange:c}=d,u=Dt(d,["willChange"]);for(const f in u){const p=u[f];a[f]!==void 0&&da(p)&&(p.set(a[f],!1),aC(c)&&c.add(f))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,C6.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),WK.current||V_e(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:xI.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){C6.delete(this.current),this.projection&&this.projection.unmount(),pd(this.notifyUpdate),pd(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=cm.has(e),i=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&ci.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures(s,r,i,o){var a=s,{children:e}=a,n=Dt(a,["children"]);let l,c;for(let u=0;u<$_e;u++){const d=$K[u],{isEnabled:f,Feature:p,ProjectionNode:b,MeasureLayout:v}=fb[d];b&&(l=b),f(n)&&(!this.features[d]&&p&&(this.features[d]=new p(this)),v&&(c=v))}if((this.type==="html"||this.type==="svg")&&!this.projection&&l){this.projection=new l(this.latestValues,this.parent&&this.parent.projection);const{layoutId:u,layout:d,drag:f,dragConstraints:p,layoutScroll:b,layoutRoot:v}=n;this.projection.setOptions({layoutId:u,layout:d,alwaysMeasureLayout:!!f||p&&Ng(p),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof d=="string"?d:"both",initialPromotionConfig:o,layoutScroll:b,layoutRoot:v})}return c}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):io()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<A6.length;r++){const i=A6[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o=e["on"+i];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=W_e(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<H_e;r++){const i=YO[r],o=this.props[i];(db(o)||o===!1)&&(n[i]=o)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Tv(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=rN(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!da(o)?o:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new hN),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class HK extends G_e{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance(s,{transformValues:i},o){var a=s,{transition:e,transitionEnd:n}=a,r=Dt(a,["transition","transitionEnd"]);let l=lSe(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),l&&(l=i(l))),o){sSe(this,r,l);const c=z_e(this,r,l,n);n=c.transitionEnd,r=c.target}return j({transition:e,transitionEnd:n},r)}}function q_e(t){return window.getComputedStyle(t)}class K_e extends HK{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(cm.has(n)){const r=lN(n);return r&&r.default||0}else{const r=q_e(e),i=(Rq(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return RK(e,n)}build(e,n,r,i){ZO(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return nN(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;da(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){Lq(e,n,r,i)}}class Y_e extends HK{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(cm.has(n)){const r=lN(n);return r&&r.default||0}return n=Bq.has(n)?n:qO(n),e.getAttribute(n)}measureInstanceViewportBox(){return io()}scrapeMotionValuesFromProps(e,n){return Uq(e,n)}build(e,n,r,i){eN(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){jq(e,n,r,i)}mount(e){this.isSVGTag=tN(e.tagName),super.mount(e)}}const X_e=(t,e)=>QO(t)?new Y_e(e,{enableHardwareAcceleration:!1}):new K_e(e,{enableHardwareAcceleration:!0}),Q_e={layout:{ProjectionNode:zK,MeasureLayout:FK}},Z_e=j(j(j(j({},_Se),Wwe),P_e),Q_e),ml=Zbe((t,e)=>Dwe(t,e,Z_e,X_e));function GK(){const t=T.useRef(!1);return GO(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function J_e(){const t=GK(),[e,n]=T.useState(0),r=T.useCallback(()=>{t.current&&n(e+1)},[e]);return[T.useCallback(()=>ci.postRender(r),[r]),e]}class eEe extends T.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function tEe({children:t,isPresent:e}){const n=T.useId(),r=T.useRef(null),i=T.useRef({width:0,height:0,top:0,left:0});return T.useInsertionEffect(()=>{const{width:o,height:s,top:a,left:l}=i.current;if(e||!r.current||!o||!s)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${s}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),T.createElement(eEe,{isPresent:e,childRef:r,sizeRef:i},T.cloneElement(t,{ref:r}))}const uP=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:s})=>{const a=zq(nEe),l=T.useId(),c=T.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:u=>{a.set(u,!0);for(const d of a.values())if(!d)return;r&&r()},register:u=>(a.set(u,!1),()=>a.delete(u))}),o?void 0:[n]);return T.useMemo(()=>{a.forEach((u,d)=>a.set(d,!1))},[n]),T.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),s==="popLayout"&&(t=T.createElement(tEe,{isPresent:n},t)),T.createElement(uw.Provider,{value:c},t)};function nEe(){return new Map}function rEe(t){return T.useEffect(()=>()=>t(),[])}const qh=t=>t.key||"";function iEe(t,e){t.forEach(n=>{const r=qh(n);e.set(r,n)})}function oEe(t){const e=[];return T.Children.forEach(t,n=>{T.isValidElement(n)&&e.push(n)}),e}const Vc=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:o=!0,mode:s="sync"})=>{const a=T.useContext(XO).forceRender||J_e()[0],l=GK(),c=oEe(t);let u=c;const d=T.useRef(new Map).current,f=T.useRef(u),p=T.useRef(new Map).current,b=T.useRef(!0);if(GO(()=>{b.current=!1,iEe(c,p),f.current=u}),rEe(()=>{b.current=!0,p.clear(),d.clear()}),b.current)return T.createElement(T.Fragment,null,u.map(x=>T.createElement(uP,{key:qh(x),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:s},x)));u=[...u];const v=f.current.map(qh),m=c.map(qh),g=v.length;for(let x=0;x<g;x++){const w=v[x];m.indexOf(w)===-1&&!d.has(w)&&d.set(w,void 0)}return s==="wait"&&d.size&&(u=[]),d.forEach((x,w)=>{if(m.indexOf(w)!==-1)return;const S=p.get(w);if(!S)return;const P=v.indexOf(w);let I=x;if(!I){const M=()=>{d.delete(w);const D=Array.from(p.keys()).filter(E=>!m.includes(E));if(D.forEach(E=>p.delete(E)),f.current=c.filter(E=>{const _=qh(E);return _===w||D.includes(_)}),!d.size){if(l.current===!1)return;a(),r&&r()}};I=T.createElement(uP,{key:qh(S),isPresent:!1,onExitComplete:M,custom:e,presenceAffectsLayout:o,mode:s},S),d.set(w,I)}u.splice(P,0,I)}),u=u.map(x=>{const w=x.key;return d.has(w)?x:T.createElement(uP,{key:qh(x),isPresent:!0,presenceAffectsLayout:o,mode:s},x)}),T.createElement(T.Fragment,null,d.size?u:u.map(x=>T.cloneElement(x)))};var sEe={initial:t=>{const{position:e}=t,n=["top","bottom"].includes(e)?"y":"x";let r=["top-right","bottom-right"].includes(e)?1:-1;return e==="bottom"&&(r=1),{opacity:0,[n]:r*24}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},qK=T.memo(t=>{const{id:e,message:n,onCloseComplete:r,onRequestRemove:i,requestClose:o=!1,position:s="bottom",duration:a=5e3,containerStyle:l,motionVariants:c=sEe,toastSpacing:u="0.5rem"}=t,[d,f]=T.useState(a),p=HSe();eC(()=>{p||r==null||r()},[p]),eC(()=>{f(a)},[a]);const b=()=>f(null),v=()=>f(a),m=()=>{p&&i()};T.useEffect(()=>{p&&o&&i()},[p,o,i]),Vbe(m,d);const g=T.useMemo(()=>j({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:u},l),[l,u]),x=T.useMemo(()=>Ube(s),[s]);return h.jsx(ml.div,{layout:!0,className:"chakra-toast",variants:c,initial:"initial",animate:"animate",exit:"exit",onHoverStart:b,onHoverEnd:v,custom:{position:s},style:x,children:h.jsx($t.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:g,children:Nc(n,{id:e,onClose:m})})})});qK.displayName="ToastComponent";function aEe(t,e){var n;const r=t!=null?t:"bottom",o={"top-start":{ltr:"top-left",rtl:"top-right"},"top-end":{ltr:"top-right",rtl:"top-left"},"bottom-start":{ltr:"bottom-left",rtl:"bottom-right"},"bottom-end":{ltr:"bottom-right",rtl:"bottom-left"}}[r];return(n=o==null?void 0:o[e])!=null?n:r}var T6={path:h.jsxs("g",{stroke:"currentColor",strokeWidth:"1.5",children:[h.jsx("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),h.jsx("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),h.jsx("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},Md=Qt((t,e)=>{const m=t,{as:n,viewBox:r,color:i="currentColor",focusable:o=!1,children:s,className:a,__css:l}=m,c=Dt(m,["as","viewBox","color","focusable","children","className","__css"]),u=Sn("chakra-icon",a),d=Va("Icon",t),f=j(j({w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:i},l),d),p={ref:e,focusable:o,className:u,__css:f},b=r!=null?r:T6.viewBox;if(n&&typeof n!="string")return h.jsx($t.svg,j(j({as:n},p),c));const v=s!=null?s:T6.path;return h.jsx($t.svg,se(j(j({verticalAlign:"middle",viewBox:b},p),c),{children:v}))});Md.displayName="Icon";function mc(t){const{viewBox:e="0 0 24 24",d:n,displayName:r,defaultProps:i={}}=t,o=T.Children.toArray(t.path),s=Qt((a,l)=>h.jsx(Md,se(j(j({ref:l,viewBox:e},i),a),{children:o.length?o:h.jsx("path",{fill:"currentColor",d:n})})));return s.displayName=r,s}function lEe(t){return h.jsx(Md,se(j({viewBox:"0 0 24 24"},t),{children:h.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})}))}function cEe(t){return h.jsx(Md,se(j({viewBox:"0 0 24 24"},t),{children:h.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})}))}function M6(t){return h.jsx(Md,se(j({viewBox:"0 0 24 24"},t),{children:h.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})}))}var uEe=sw({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),Fa=Qt((t,e)=>{const n=Va("Spinner",t),d=di(t),{label:r="Loading...",thickness:i="2px",speed:o="0.45s",emptyColor:s="transparent",className:a}=d,l=Dt(d,["label","thickness","speed","emptyColor","className"]),c=Sn("chakra-spinner",a),u=j({display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:i,borderBottomColor:s,borderLeftColor:s,animation:`${uEe} ${o} linear infinite`},n);return h.jsx($t.div,se(j({ref:e,__css:u,className:c},l),{children:r&&h.jsx($t.span,{srOnly:!0,children:r})}))});Fa.displayName="Spinner";var[dEe,pN]=Ai({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[fEe,mN]=Ai({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),KK={info:{icon:cEe,colorScheme:"blue"},warning:{icon:M6,colorScheme:"orange"},success:{icon:lEe,colorScheme:"green"},error:{icon:M6,colorScheme:"red"},loading:{icon:Fa,colorScheme:"blue"}};function hEe(t){return KK[t].colorScheme}function pEe(t){return KK[t].icon}var bl=Qt(function(e,n){const r=mN(),{status:i}=pN(),o=j({display:"inline"},r.description);return h.jsx($t.div,se(j({ref:n,"data-status":i},e),{className:Sn("chakra-alert__desc",e.className),__css:o}))});bl.displayName="AlertDescription";function xi(t){const{status:e}=pN(),n=pEe(e),r=mN(),i=e==="loading"?r.spinner:r.icon;return h.jsx($t.span,se(j({display:"inherit","data-status":e},t),{className:Sn("chakra-alert__icon",t.className),__css:i,children:t.children||h.jsx(n,{h:"100%",w:"100%"})}))}xi.displayName="AlertIcon";var tT=Qt(function(e,n){const r=mN(),{status:i}=pN();return h.jsx($t.div,se(j({ref:n,"data-status":i},e),{className:Sn("chakra-alert__title",e.className),__css:r.title}))});tT.displayName="AlertTitle";var bi=Qt(function(e,n){var r;const u=di(e),{status:i="info",addRole:o=!0}=u,s=Dt(u,["status","addRole"]),a=(r=e.colorScheme)!=null?r:hEe(i),l=js("Alert",se(j({},e),{colorScheme:a})),c=j({width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden"},l.container);return h.jsx(dEe,{value:{status:i},children:h.jsx(fEe,{value:l,children:h.jsx($t.div,se(j({"data-status":i,role:o?"alert":void 0,ref:n},s),{className:Sn("chakra-alert",e.className),__css:c}))})})});bi.displayName="Alert";function mEe(t){return h.jsx(Md,se(j({focusable:"false","aria-hidden":!0},t),{children:h.jsx("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})}))}var gN=Qt(function(e,n){const r=Va("CloseButton",e),c=di(e),{children:i,isDisabled:o,__css:s}=c,a=Dt(c,["children","isDisabled","__css"]),l={outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0};return h.jsx($t.button,se(j({type:"button","aria-label":"Close",ref:n,disabled:o,__css:j(j(j({},l),r),s)},a),{children:i||h.jsx(mEe,{width:"1em",height:"1em"})}))});gN.displayName="CloseButton";var gEe={top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]},Fc=vEe(gEe);function vEe(t){let e=t;const n=new Set,r=i=>{e=i(e),n.forEach(o=>o())};return{getState:()=>e,subscribe:i=>(n.add(i),()=>{r(()=>t),n.delete(i)}),removeToast:(i,o)=>{r(s=>se(j({},s),{[o]:s[o].filter(a=>a.id!=i)}))},notify:(i,o)=>{const s=yEe(i,o),{position:a,id:l}=s;return r(c=>{var u,d;const p=a.includes("top")?[s,...(u=c[a])!=null?u:[]]:[...(d=c[a])!=null?d:[],s];return se(j({},c),{[a]:p})}),l},update:(i,o)=>{i&&r(s=>{const a=j({},s),{position:l,index:c}=SU(a,i);return l&&c!==-1&&(a[l][c]=se(j(j({},a[l][c]),o),{message:YK(o)})),a})},closeAll:({positions:i}={})=>{r(o=>{const s=["bottom","bottom-right","bottom-left","top","top-left","top-right"];return(i!=null?i:s).reduce((l,c)=>(l[c]=o[c].map(u=>se(j({},u),{requestClose:!0})),l),j({},o))})},close:i=>{r(o=>{const s=_q(o,i);return s?se(j({},o),{[s]:o[s].map(a=>a.id==i?se(j({},a),{requestClose:!0}):a)}):o})},isActive:i=>!!SU(Fc.getState(),i).position}}var P6=0;function yEe(t,e={}){var n,r;P6+=1;const i=(n=e.id)!=null?n:P6,o=(r=e.position)!=null?r:"bottom";return{id:i,message:t,position:o,duration:e.duration,onCloseComplete:e.onCloseComplete,onRequestRemove:()=>Fc.removeToast(String(i),o),status:e.status,requestClose:!1,containerStyle:e.containerStyle}}var xEe=t=>{const{status:e,variant:n="solid",id:r,title:i,isClosable:o,onClose:s,description:a,colorScheme:l,icon:c}=t,u=r?{root:`toast-${r}`,title:`toast-${r}-title`,description:`toast-${r}-description`}:void 0;return h.jsxs(bi,{addRole:!1,status:e,variant:n,id:u==null?void 0:u.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:l,children:[h.jsx(xi,{children:c}),h.jsxs($t.div,{flex:"1",maxWidth:"100%",children:[i&&h.jsx(tT,{id:u==null?void 0:u.title,children:i}),a&&h.jsx(bl,{id:u==null?void 0:u.description,display:"block",children:a})]}),o&&h.jsx(gN,{size:"sm",onClick:s,position:"absolute",insetEnd:1,top:1})]})};function YK(t={}){const{render:e,toastComponent:n=xEe}=t;return i=>typeof e=="function"?e(j(j({},i),t)):h.jsx(n,j(j({},i),t))}function bEe(t,e){const n=i=>{var o;return se(j(j({},e),i),{position:aEe((o=i==null?void 0:i.position)!=null?o:e==null?void 0:e.position,t)})},r=i=>{const o=n(i),s=YK(o);return Fc.notify(s,o)};return r.update=(i,o)=>{Fc.update(i,n(o))},r.promise=(i,o)=>{const s=r(se(j({},o.loading),{status:"loading",duration:null}));i.then(a=>r.update(s,j({status:"success",duration:5e3},Nc(o.success,a)))).catch(a=>r.update(s,j({status:"error",duration:5e3},Nc(o.error,a))))},r.closeAll=Fc.closeAll,r.close=Fc.close,r.isActive=Fc.isActive,r}var[wEe,SEe]=Ai({name:"ToastOptionsContext",strict:!1}),_Ee=t=>{const e=T.useSyncExternalStore(Fc.subscribe,Fc.getState,Fc.getState),{motionVariants:n,component:r=qK,portalProps:i}=t,s=Object.keys(e).map(a=>{const l=e[a];return h.jsx("div",{role:"region","aria-live":"polite","aria-label":`Notifications-${a}`,id:`chakra-toast-manager-${a}`,style:zbe(a),children:h.jsx(Vc,{initial:!1,children:l.map(c=>h.jsx(r,j({motionVariants:n},c),c.id))})},a)});return h.jsx(o0,se(j({},i),{children:s}))};function co(t){const{theme:e}=HG(),n=SEe();return T.useMemo(()=>bEe(e.direction,j(j({},n),t)),[t,e.direction,n])}var EEe=t=>function(s){var a=s,{children:n,theme:r=t,toastOptions:i}=a,o=Dt(a,["children","theme","toastOptions"]);return h.jsxs(Bbe,se(j({theme:r},o),{children:[h.jsx(wEe,{value:i==null?void 0:i.defaultOptions,children:n}),h.jsx(_Ee,j({},i))]}))},CEe=EEe(hq),AEe=Object.defineProperty,TEe=(t,e,n)=>e in t?AEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bi=(t,e,n)=>(TEe(t,typeof e!="symbol"?e+"":e,n),n);function D6(t){return t.sort((e,n)=>{const r=e.compareDocumentPosition(n);if(r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(r&Node.DOCUMENT_POSITION_DISCONNECTED||r&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}var MEe=t=>typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE;function R6(t,e,n){let r=t+1;return n&&r>=e&&(r=0),r}function I6(t,e,n){let r=t-1;return n&&r<0&&(r=e),r}var bI=typeof window!="undefined"?T.useLayoutEffect:T.useEffect,cC=t=>t,PEe=class{constructor(){Bi(this,"descendants",new Map),Bi(this,"register",t=>{if(t!=null)return MEe(t)?this.registerNode(t):e=>{this.registerNode(e,t)}}),Bi(this,"unregister",t=>{this.descendants.delete(t);const e=D6(Array.from(this.descendants.keys()));this.assignIndex(e)}),Bi(this,"destroy",()=>{this.descendants.clear()}),Bi(this,"assignIndex",t=>{this.descendants.forEach(e=>{const n=t.indexOf(e.node);e.index=n,e.node.dataset.index=e.index.toString()})}),Bi(this,"count",()=>this.descendants.size),Bi(this,"enabledCount",()=>this.enabledValues().length),Bi(this,"values",()=>Array.from(this.descendants.values()).sort((e,n)=>e.index-n.index)),Bi(this,"enabledValues",()=>this.values().filter(t=>!t.disabled)),Bi(this,"item",t=>{if(this.count()!==0)return this.values()[t]}),Bi(this,"enabledItem",t=>{if(this.enabledCount()!==0)return this.enabledValues()[t]}),Bi(this,"first",()=>this.item(0)),Bi(this,"firstEnabled",()=>this.enabledItem(0)),Bi(this,"last",()=>this.item(this.descendants.size-1)),Bi(this,"lastEnabled",()=>{const t=this.enabledValues().length-1;return this.enabledItem(t)}),Bi(this,"indexOf",t=>{var e,n;return t&&(n=(e=this.descendants.get(t))==null?void 0:e.index)!=null?n:-1}),Bi(this,"enabledIndexOf",t=>t==null?-1:this.enabledValues().findIndex(e=>e.node.isSameNode(t))),Bi(this,"next",(t,e=!0)=>{const n=R6(t,this.count(),e);return this.item(n)}),Bi(this,"nextEnabled",(t,e=!0)=>{const n=this.item(t);if(!n)return;const r=this.enabledIndexOf(n.node),i=R6(r,this.enabledCount(),e);return this.enabledItem(i)}),Bi(this,"prev",(t,e=!0)=>{const n=I6(t,this.count()-1,e);return this.item(n)}),Bi(this,"prevEnabled",(t,e=!0)=>{const n=this.item(t);if(!n)return;const r=this.enabledIndexOf(n.node),i=I6(r,this.enabledCount()-1,e);return this.enabledItem(i)}),Bi(this,"registerNode",(t,e)=>{if(!t||this.descendants.has(t))return;const n=Array.from(this.descendants.keys()).concat(t),r=D6(n);e!=null&&e.disabled&&(e.disabled=!!e.disabled);const i=j({node:t,index:-1},e);this.descendants.set(t,i),this.assignIndex(r)})}};function DEe(t,e){if(t!=null){if(typeof t=="function"){t(e);return}try{t.current=e}catch(n){throw new Error(`Cannot assign value '${e}' to ref '${t}'`)}}}function ko(...t){return e=>{t.forEach(n=>{DEe(n,e)})}}function REe(...t){return T.useMemo(()=>ko(...t),t)}function IEe(){const t=T.useRef(new PEe);return bI(()=>()=>t.current.destroy()),t.current}var[kEe,XK]=Ai({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});function FEe(t){const e=XK(),[n,r]=T.useState(-1),i=T.useRef(null);bI(()=>()=>{i.current&&e.unregister(i.current)},[]),bI(()=>{if(!i.current)return;const s=Number(i.current.dataset.index);n!=s&&!Number.isNaN(s)&&r(s)});const o=cC(t?e.register(t):e.register);return{descendants:e,index:n,enabledIndex:e.enabledIndexOf(i.current),register:ko(o,i)}}function QK(){return[cC(kEe),()=>cC(XK()),()=>IEe(),i=>FEe(i)]}var[OEe,nT]=Ai({name:"AccordionStylesContext",hookName:"useAccordionStyles",providerName:"<Accordion />"}),[NEe,vN]=Ai({name:"AccordionItemContext",hookName:"useAccordionItemContext",providerName:"<AccordionItem />"}),[LEe,Rot,BEe,jEe]=QK(),yN=Qt(function(e,n){const{getButtonProps:r}=vN(),i=r(e,n),o=nT(),s=j({display:"flex",alignItems:"center",width:"100%",outline:0},o.button);return h.jsx($t.button,se(j({},i),{className:Sn("chakra-accordion__button",e.className),__css:s}))});yN.displayName="AccordionButton";function ZK(t){const{value:e,defaultValue:n,onChange:r,shouldUpdate:i=(f,p)=>f!==p}=t,o=Wo(r),s=Wo(i),[a,l]=T.useState(n),c=e!==void 0,u=c?e:a,d=Wo(f=>{const b=typeof f=="function"?f(u):f;s(u,b)&&(c||l(b),o(b))},[c,o,u,s]);return[u,d]}function UEe(t){const p=t,{onChange:e,defaultIndex:n,index:r,allowMultiple:i,allowToggle:o}=p,s=Dt(p,["onChange","defaultIndex","index","allowMultiple","allowToggle"]);WEe(t),$Ee(t);const a=BEe(),[l,c]=T.useState(-1);T.useEffect(()=>()=>{c(-1)},[]);const[u,d]=ZK({value:r,defaultValue(){return i?n!=null?n:[]:n!=null?n:-1},onChange:e});return{index:u,setIndex:d,htmlProps:s,getAccordionItemProps:b=>{let v=!1;return b!==null&&(v=Array.isArray(u)?u.includes(b):u===b),{isOpen:v,onChange:g=>{if(b!==null)if(i&&Array.isArray(u)){const x=g?u.concat(b):u.filter(w=>w!==b);d(x)}else g?d(b):o&&d(-1)}}},focusedIndex:l,setFocusedIndex:c,descendants:a}}var[zEe,xN]=Ai({name:"AccordionContext",hookName:"useAccordionContext",providerName:"Accordion"});function VEe(t){const D=t,{isDisabled:e,isFocusable:n,id:r}=D,i=Dt(D,["isDisabled","isFocusable","id"]),{getAccordionItemProps:o,setFocusedIndex:s}=xN(),a=T.useRef(null),l=T.useId(),c=r!=null?r:l,u=`accordion-button-${c}`,d=`accordion-panel-${c}`;HEe(t);const{register:f,index:p,descendants:b}=jEe({disabled:e&&!n}),{isOpen:v,onChange:m}=o(p===-1?null:p);GEe({isOpen:v,isDisabled:e});const g=()=>{m==null||m(!0)},x=()=>{m==null||m(!1)},w=T.useCallback(()=>{m==null||m(!v),s(p)},[p,s,v,m]),S=T.useCallback(E=>{const A={ArrowDown:()=>{const R=b.nextEnabled(p);R==null||R.node.focus()},ArrowUp:()=>{const R=b.prevEnabled(p);R==null||R.node.focus()},Home:()=>{const R=b.firstEnabled();R==null||R.node.focus()},End:()=>{const R=b.lastEnabled();R==null||R.node.focus()}}[E.key];A&&(E.preventDefault(),A(E))},[b,p]),P=T.useCallback(()=>{s(p)},[s,p]),I=T.useCallback(function(_={},A=null){return se(j({},_),{type:"button",ref:ko(f,a,A),id:u,disabled:!!e,"aria-expanded":!!v,"aria-controls":d,onClick:Nn(_.onClick,w),onFocus:Nn(_.onFocus,P),onKeyDown:Nn(_.onKeyDown,S)})},[u,e,v,w,P,S,d,f]),M=T.useCallback(function(_={},A=null){return se(j({},_),{ref:A,role:"region",id:d,"aria-labelledby":u,hidden:!v})},[u,v,d]);return{isOpen:v,isDisabled:e,isFocusable:n,onOpen:g,onClose:x,getButtonProps:I,getPanelProps:M,htmlProps:i}}function WEe(t){const e=t.index||t.defaultIndex,n=e!=null&&!Array.isArray(e)&&t.allowMultiple;lw({condition:!!n,message:`If 'allowMultiple' is passed, then 'index' or 'defaultIndex' must be an array. You passed: ${typeof e},`})}function $Ee(t){lw({condition:!!(t.allowMultiple&&t.allowToggle),message:"If 'allowMultiple' is passed, 'allowToggle' will be ignored. Either remove 'allowToggle' or 'allowMultiple' depending on whether you want multiple accordions visible or not"})}function HEe(t){lw({condition:!!(t.isFocusable&&!t.isDisabled),message:`Using only 'isFocusable', this prop is reserved for situations where you pass 'isDisabled' but you still want the element to receive focus (A11y). Either remove it or pass 'isDisabled' as well.
    `})}function GEe(t){lw({condition:t.isOpen&&!!t.isDisabled,message:"Cannot open a disabled accordion item"})}function bN(t){const{isOpen:e,isDisabled:n}=vN(),{reduceMotion:r}=xN(),i=Sn("chakra-accordion__icon",t.className),o=nT(),s=j({opacity:n?.4:1,transform:e?"rotate(-180deg)":void 0,transition:r?void 0:"transform 0.2s",transformOrigin:"center"},o.icon);return h.jsx(Md,se(j({viewBox:"0 0 24 24","aria-hidden":!0,className:i,__css:s},t),{children:h.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}))}bN.displayName="AccordionIcon";var wN=Qt(function(e,n){const{children:r,className:i}=e,u=VEe(e),{htmlProps:o}=u,s=Dt(u,["htmlProps"]),a=nT(),l=se(j({},a.container),{overflowAnchor:"none"}),c=T.useMemo(()=>s,[s]);return h.jsx(NEe,{value:c,children:h.jsx($t.div,se(j({ref:n},o),{className:Sn("chakra-accordion__item",i),__css:l,children:typeof r=="function"?r({isExpanded:!!s.isOpen,isDisabled:!!s.isDisabled}):r}))})});wN.displayName="AccordionItem";var Ug={ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1]},Ep={enter:{duration:.2,ease:Ug.easeOut},exit:{duration:.1,ease:Ug.easeIn}},id={enter:(t,e)=>se(j({},t),{delay:typeof e=="number"?e:e==null?void 0:e.enter}),exit:(t,e)=>se(j({},t),{delay:typeof e=="number"?e:e==null?void 0:e.exit})},qEe=t=>t!=null&&parseInt(t.toString(),10)>0,k6={exit:{height:{duration:.2,ease:Ug.ease},opacity:{duration:.3,ease:Ug.ease}},enter:{height:{duration:.3,ease:Ug.ease},opacity:{duration:.4,ease:Ug.ease}}},KEe={exit:({animateOpacity:t,startingHeight:e,transition:n,transitionEnd:r,delay:i})=>{var o;return se(j({},t&&{opacity:qEe(e)?1:0}),{height:e,transitionEnd:r==null?void 0:r.exit,transition:(o=n==null?void 0:n.exit)!=null?o:id.exit(k6.exit,i)})},enter:({animateOpacity:t,endingHeight:e,transition:n,transitionEnd:r,delay:i})=>{var o;return se(j({},t&&{opacity:1}),{height:e,transitionEnd:r==null?void 0:r.enter,transition:(o=n==null?void 0:n.enter)!=null?o:id.enter(k6.enter,i)})}},uC=T.forwardRef((t,e)=>{const x=t,{in:n,unmountOnExit:r,animateOpacity:i=!0,startingHeight:o=0,endingHeight:s="auto",style:a,className:l,transition:c,transitionEnd:u}=x,d=Dt(x,["in","unmountOnExit","animateOpacity","startingHeight","endingHeight","style","className","transition","transitionEnd"]),[f,p]=T.useState(!1);T.useEffect(()=>{const w=setTimeout(()=>{p(!0)});return()=>clearTimeout(w)},[]),lw({condition:Number(o)>0&&!!r,message:"startingHeight and unmountOnExit are mutually exclusive. You can't use them together"});const b=parseFloat(o.toString())>0,v={startingHeight:o,endingHeight:s,animateOpacity:i,transition:f?c:{enter:{duration:0}},transitionEnd:{enter:u==null?void 0:u.enter,exit:r?u==null?void 0:u.exit:se(j({},u==null?void 0:u.exit),{display:b?"block":"none"})}},m=r?n:!0,g=n||r?"enter":"exit";return h.jsx(Vc,{initial:!1,custom:v,children:m&&h.jsx(ml.div,se(j({ref:e},d),{className:Sn("chakra-collapse",l),style:j({overflow:"hidden",display:"block"},a),custom:v,variants:KEe,initial:r?"exit":!1,animate:g,exit:"exit"}))})});uC.displayName="Collapse";var YEe={enter:({transition:t,transitionEnd:e,delay:n}={})=>{var r;return{opacity:1,transition:(r=t==null?void 0:t.enter)!=null?r:id.enter(Ep.enter,n),transitionEnd:e==null?void 0:e.enter}},exit:({transition:t,transitionEnd:e,delay:n}={})=>{var r;return{opacity:0,transition:(r=t==null?void 0:t.exit)!=null?r:id.exit(Ep.exit,n),transitionEnd:e==null?void 0:e.exit}}},JK={initial:"exit",animate:"enter",exit:"exit",variants:YEe},XEe=T.forwardRef(function(e,n){const p=e,{unmountOnExit:r,in:i,className:o,transition:s,transitionEnd:a,delay:l}=p,c=Dt(p,["unmountOnExit","in","className","transition","transitionEnd","delay"]),u=i||r?"enter":"exit",d=r?i&&r:!0,f={transition:s,transitionEnd:a,delay:l};return h.jsx(Vc,{custom:f,children:d&&h.jsx(ml.div,j(se(j({ref:n,className:Sn("chakra-fade",o),custom:f},JK),{animate:u}),c))})});XEe.displayName="Fade";var QEe={exit:({reverse:t,initialScale:e,transition:n,transitionEnd:r,delay:i})=>{var o;return se(j({opacity:0},t?{scale:e,transitionEnd:r==null?void 0:r.exit}:{transitionEnd:j({scale:e},r==null?void 0:r.exit)}),{transition:(o=n==null?void 0:n.exit)!=null?o:id.exit(Ep.exit,i)})},enter:({transitionEnd:t,transition:e,delay:n})=>{var r;return{opacity:1,scale:1,transition:(r=e==null?void 0:e.enter)!=null?r:id.enter(Ep.enter,n),transitionEnd:t==null?void 0:t.enter}}},eY={initial:"exit",animate:"enter",exit:"exit",variants:QEe},ZEe=T.forwardRef(function(e,n){const v=e,{unmountOnExit:r,in:i,reverse:o=!0,initialScale:s=.95,className:a,transition:l,transitionEnd:c,delay:u}=v,d=Dt(v,["unmountOnExit","in","reverse","initialScale","className","transition","transitionEnd","delay"]),f=r?i&&r:!0,p=i||r?"enter":"exit",b={initialScale:s,reverse:o,transition:l,transitionEnd:c,delay:u};return h.jsx(Vc,{custom:b,children:f&&h.jsx(ml.div,j(se(j({ref:n,className:Sn("chakra-offset-slide",a)},eY),{animate:p,custom:b}),d))})});ZEe.displayName="ScaleFade";var JEe={initial:({offsetX:t,offsetY:e,transition:n,transitionEnd:r,delay:i})=>{var o;return{opacity:0,x:t,y:e,transition:(o=n==null?void 0:n.exit)!=null?o:id.exit(Ep.exit,i),transitionEnd:r==null?void 0:r.exit}},enter:({transition:t,transitionEnd:e,delay:n})=>{var r;return{opacity:1,x:0,y:0,transition:(r=t==null?void 0:t.enter)!=null?r:id.enter(Ep.enter,n),transitionEnd:e==null?void 0:e.enter}},exit:({offsetY:t,offsetX:e,transition:n,transitionEnd:r,reverse:i,delay:o})=>{var s;const a={x:e,y:t};return j({opacity:0,transition:(s=n==null?void 0:n.exit)!=null?s:id.exit(Ep.exit,o)},i?se(j({},a),{transitionEnd:r==null?void 0:r.exit}):{transitionEnd:j(j({},a),r==null?void 0:r.exit)})}},ky={initial:"initial",animate:"enter",exit:"exit",variants:JEe},eCe=T.forwardRef(function(e,n){const m=e,{unmountOnExit:r,in:i,reverse:o=!0,className:s,offsetX:a=0,offsetY:l=8,transition:c,transitionEnd:u,delay:d}=m,f=Dt(m,["unmountOnExit","in","reverse","className","offsetX","offsetY","transition","transitionEnd","delay"]),p=r?i&&r:!0,b=i||r?"enter":"exit",v={offsetX:a,offsetY:l,reverse:o,transition:c,transitionEnd:u,delay:d};return h.jsx(Vc,{custom:v,children:p&&h.jsx(ml.div,j(se(j({ref:n,className:Sn("chakra-offset-slide",s),custom:v},ky),{animate:b}),f))})});eCe.displayName="SlideFade";var SN=Qt(function(e,n){const p=e,{className:r,motionProps:i}=p,o=Dt(p,["className","motionProps"]),{reduceMotion:s}=xN(),{getPanelProps:a,isOpen:l}=vN(),c=a(o,n),u=Sn("chakra-accordion__panel",r),d=nT();s||delete c.hidden;const f=h.jsx($t.div,se(j({},c),{__css:d.panel,className:u}));return s?f:h.jsx(uC,se(j({in:l},i),{children:f}))});SN.displayName="AccordionPanel";var _N=Qt(function(o,i){var s=o,{children:e,reduceMotion:n}=s,r=Dt(s,["children","reduceMotion"]);const a=js("Accordion",r),l=di(r),p=UEe(l),{htmlProps:c,descendants:u}=p,d=Dt(p,["htmlProps","descendants"]),f=T.useMemo(()=>se(j({},d),{reduceMotion:!!n}),[d,n]);return h.jsx(LEe,{value:u,children:h.jsx(zEe,{value:f,children:h.jsx(OEe,{value:a,children:h.jsx($t.div,se(j({ref:i},c),{className:Sn("chakra-accordion",r.className),__css:a.root,children:e}))})})})});_N.displayName="Accordion";function EN(t){return T.Children.toArray(t).filter(e=>T.isValidElement(e))}var[tCe,nCe]=Ai({strict:!1,name:"ButtonGroupContext"}),rCe={horizontal:{"> *:first-of-type:not(:last-of-type)":{borderEndRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderStartRadius:0}},vertical:{"> *:first-of-type:not(:last-of-type)":{borderBottomRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderTopRadius:0}}},iCe={horizontal:t=>({"& > *:not(style) ~ *:not(style)":{marginStart:t}}),vertical:t=>({"& > *:not(style) ~ *:not(style)":{marginTop:t}})},wI=Qt(function(e,n){const m=e,{size:r,colorScheme:i,variant:o,className:s,spacing:a="0.5rem",isAttached:l,isDisabled:c,orientation:u="horizontal"}=m,d=Dt(m,["size","colorScheme","variant","className","spacing","isAttached","isDisabled","orientation"]),f=Sn("chakra-button__group",s),p=T.useMemo(()=>({size:r,colorScheme:i,variant:o,isDisabled:c}),[r,i,o,c]);let b=j({display:"inline-flex"},l?rCe[u]:iCe[u](a));const v=u==="vertical";return h.jsx(tCe,{value:p,children:h.jsx($t.div,j({ref:n,role:"group",__css:b,className:f,"data-attached":l?"":void 0,"data-orientation":u,flexDir:v?"column":void 0},d))})});wI.displayName="ButtonGroup";function oCe(t){const[e,n]=T.useState(!t);return{ref:T.useCallback(o=>{o&&n(o.tagName==="BUTTON")},[]),type:e?"button":void 0}}function SI(t){const s=t,{children:e,className:n}=s,r=Dt(s,["children","className"]),i=T.isValidElement(e)?T.cloneElement(e,{"aria-hidden":!0,focusable:!1}):e,o=Sn("chakra-button__icon",n);return h.jsx($t.span,se(j({display:"inline-flex",alignSelf:"center",flexShrink:0},r),{className:o,children:i}))}SI.displayName="ButtonIcon";function _I(t){const d=t,{label:e,placement:n,spacing:r="0.5rem",children:i=h.jsx(Fa,{color:"currentColor",width:"1em",height:"1em"}),className:o,__css:s}=d,a=Dt(d,["label","placement","spacing","children","className","__css"]),l=Sn("chakra-button__spinner",o),c=n==="start"?"marginEnd":"marginStart",u=T.useMemo(()=>j({display:"flex",alignItems:"center",position:e?"relative":"absolute",[c]:e?r:0,fontSize:"1em",lineHeight:"normal"},s),[s,e,c,r]);return h.jsx($t.div,se(j({className:l},a),{__css:u,children:i}))}_I.displayName="ButtonSpinner";var pn=Qt((t,e)=>{const n=nCe(),r=Va("Button",j(j({},n),t)),I=di(t),{isDisabled:i=n==null?void 0:n.isDisabled,isLoading:o,isActive:s,children:a,leftIcon:l,rightIcon:c,loadingText:u,iconSpacing:d="0.5rem",type:f,spinner:p,spinnerPlacement:b="start",className:v,as:m}=I,g=Dt(I,["isDisabled","isLoading","isActive","children","leftIcon","rightIcon","loadingText","iconSpacing","type","spinner","spinnerPlacement","className","as"]),x=T.useMemo(()=>{const M=se(j({},r==null?void 0:r._focus),{zIndex:1});return j(j({display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none"},r),!!n&&{_focus:M})},[r,n]),{ref:w,type:S}=oCe(m),P={rightIcon:c,leftIcon:l,iconSpacing:d,children:a};return h.jsxs($t.button,se(j({ref:REe(e,w),as:m,type:f!=null?f:S,"data-active":In(s),"data-loading":In(o),__css:x,className:Sn("chakra-button",v)},g),{disabled:i||o,children:[o&&b==="start"&&h.jsx(_I,{className:"chakra-button__spinner--start",label:u,placement:"start",spacing:d,children:p}),o?u||h.jsx($t.span,{opacity:0,children:h.jsx(F6,j({},P))}):h.jsx(F6,j({},P)),o&&b==="end"&&h.jsx(_I,{className:"chakra-button__spinner--end",label:u,placement:"end",spacing:d,children:p})]}))});pn.displayName="Button";function F6(t){const{leftIcon:e,rightIcon:n,children:r,iconSpacing:i}=t;return h.jsxs(h.Fragment,{children:[e&&h.jsx(SI,{marginEnd:i,children:e}),r,n&&h.jsx(SI,{marginStart:i,children:n})]})}var kr=Qt((t,e)=>{const c=t,{icon:n,children:r,isRound:i,"aria-label":o}=c,s=Dt(c,["icon","children","isRound","aria-label"]),a=n||r,l=T.isValidElement(a)?T.cloneElement(a,{"aria-hidden":!0,focusable:!1}):null;return h.jsx(pn,se(j({padding:"0",borderRadius:i?"full":void 0,ref:e,"aria-label":o},s),{children:l}))});kr.displayName="IconButton";var[sCe,tY]=Obe("Card"),uc=Qt(function(e,n){const s=e,{className:r}=s,i=Dt(s,["className"]),o=tY();return h.jsx($t.div,j({ref:n,className:Sn("chakra-card__body",r),__css:o.body},i))}),Pv=Qt(function(e,n){const s=e,{className:r}=s,i=Dt(s,["className"]),o=tY();return h.jsx($t.div,j({ref:n,className:Sn("chakra-card__header",r),__css:o.header},i))}),dc=Qt(function(e,n){const u=di(e),{className:r,children:i,direction:o="column",justify:s,align:a}=u,l=Dt(u,["className","children","direction","justify","align"]),c=js("Card",e);return h.jsx($t.div,se(j({ref:n,className:Sn("chakra-card",r),__css:j({display:"flex",flexDirection:o,justifyContent:s,alignItems:a,position:"relative",minWidth:0,wordWrap:"break-word"},c.container)},l),{children:h.jsx(sCe,{value:c,children:i})}))}),[aCe,nY]=Ai({name:"FormControlStylesContext",errorMessage:`useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormControl />" `}),[lCe,mw]=Ai({strict:!1,name:"FormControlContext"});function cCe(t){const M=t,{id:e,isRequired:n,isInvalid:r,isDisabled:i,isReadOnly:o}=M,s=Dt(M,["id","isRequired","isInvalid","isDisabled","isReadOnly"]),a=T.useId(),l=e||`field-${a}`,c=`${l}-label`,u=`${l}-feedback`,d=`${l}-helptext`,[f,p]=T.useState(!1),[b,v]=T.useState(!1),[m,g]=T.useState(!1),x=T.useCallback((D={},E=null)=>se(j({id:d},D),{ref:ko(E,_=>{_&&v(!0)})}),[d]),w=T.useCallback((D={},E=null)=>se(j({},D),{ref:E,"data-focus":In(m),"data-disabled":In(i),"data-invalid":In(r),"data-readonly":In(o),id:D.id!==void 0?D.id:c,htmlFor:D.htmlFor!==void 0?D.htmlFor:l}),[l,i,m,r,o,c]),S=T.useCallback((D={},E=null)=>se(j({id:u},D),{ref:ko(E,_=>{_&&p(!0)}),"aria-live":"polite"}),[u]),P=T.useCallback((D={},E=null)=>se(j(j({},D),s),{ref:E,role:"group","data-focus":In(m),"data-disabled":In(i),"data-invalid":In(r),"data-readonly":In(o)}),[s,i,m,r,o]),I=T.useCallback((D={},E=null)=>se(j({},D),{ref:E,role:"presentation","aria-hidden":!0,children:D.children||"*"}),[]);return{isRequired:!!n,isInvalid:!!r,isReadOnly:!!o,isDisabled:!!i,isFocused:!!m,onFocus:()=>g(!0),onBlur:()=>g(!1),hasFeedbackText:f,setHasFeedbackText:p,hasHelpText:b,setHasHelpText:v,id:l,labelId:c,feedbackId:u,helpTextId:d,htmlProps:s,getHelpTextProps:x,getErrorMessageProps:S,getRootProps:P,getLabelProps:w,getRequiredIndicatorProps:I}}var Mr=Qt(function(e,n){const r=js("Form",e),i=di(e),c=cCe(i),{getRootProps:o,htmlProps:s}=c,a=Dt(c,["getRootProps","htmlProps"]),l=Sn("chakra-form-control",e.className);return h.jsx(lCe,{value:a,children:h.jsx(aCe,{value:r,children:h.jsx($t.div,se(j({},o({},n)),{className:l,__css:r.container}))})})});Mr.displayName="FormControl";var dC=Qt(function(e,n){const r=mw(),i=nY(),o=Sn("chakra-form__helper-text",e.className);return h.jsx($t.div,se(j({},r==null?void 0:r.getHelpTextProps(e,n)),{__css:i.helperText,className:o}))});dC.displayName="FormHelperText";var ar=Qt(function(e,n){var r;const i=Va("FormLabel",e),o=di(e),p=o,{className:s,children:a,requiredIndicator:l=h.jsx(rY,{}),optionalIndicator:c=null}=p,u=Dt(p,["className","children","requiredIndicator","optionalIndicator"]),d=mw(),f=(r=d==null?void 0:d.getLabelProps(u,n))!=null?r:j({ref:n},u);return h.jsxs($t.label,se(j({},f),{className:Sn("chakra-form__label",o.className),__css:j({display:"block",textAlign:"start"},i),children:[a,d!=null&&d.isRequired?l:c]}))});ar.displayName="FormLabel";var rY=Qt(function(e,n){const r=mw(),i=nY();if(!(r!=null&&r.isRequired))return null;const o=Sn("chakra-form__required-indicator",e.className);return h.jsx($t.span,se(j({},r==null?void 0:r.getRequiredIndicatorProps(e,n)),{__css:i.requiredIndicator,className:o}))});rY.displayName="RequiredIndicator";function CN(t){const s=AN(t),{isDisabled:e,isInvalid:n,isReadOnly:r,isRequired:i}=s,o=Dt(s,["isDisabled","isInvalid","isReadOnly","isRequired"]);return se(j({},o),{disabled:e,readOnly:r,required:i,"aria-invalid":ed(n),"aria-required":ed(i),"aria-readonly":ed(r)})}function AN(t){var e,n,r;const i=mw(),g=t,{id:o,disabled:s,readOnly:a,required:l,isRequired:c,isInvalid:u,isReadOnly:d,isDisabled:f,onFocus:p,onBlur:b}=g,v=Dt(g,["id","disabled","readOnly","required","isRequired","isInvalid","isReadOnly","isDisabled","onFocus","onBlur"]),m=t["aria-describedby"]?[t["aria-describedby"]]:[];return i!=null&&i.hasFeedbackText&&(i!=null&&i.isInvalid)&&m.push(i.feedbackId),i!=null&&i.hasHelpText&&m.push(i.helpTextId),se(j({},v),{"aria-describedby":m.join(" ")||void 0,id:o!=null?o:i==null?void 0:i.id,isDisabled:(e=s!=null?s:f)!=null?e:i==null?void 0:i.isDisabled,isReadOnly:(n=a!=null?a:d)!=null?n:i==null?void 0:i.isReadOnly,isRequired:(r=l!=null?l:c)!=null?r:i==null?void 0:i.isRequired,isInvalid:u!=null?u:i==null?void 0:i.isInvalid,onFocus:Nn(i==null?void 0:i.onFocus,p),onBlur:Nn(i==null?void 0:i.onBlur,b)})}var uCe={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},dCe=()=>typeof document!="undefined",O6=!1,gw=null,zp=!1,EI=!1,CI=new Set;function TN(t,e){CI.forEach(n=>n(t,e))}var fCe=typeof window!="undefined"&&window.navigator!=null?/^Mac/.test(window.navigator.platform):!1;function hCe(t){return!(t.metaKey||!fCe&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function N6(t){zp=!0,hCe(t)&&(gw="keyboard",TN("keyboard",t))}function Wm(t){if(gw="pointer",t.type==="mousedown"||t.type==="pointerdown"){zp=!0;const e=t.composedPath?t.composedPath()[0]:t.target;let n=!1;try{n=e.matches(":focus-visible")}catch(r){}if(n)return;TN("pointer",t)}}function pCe(t){return t.mozInputSource===0&&t.isTrusted?!0:t.detail===0&&!t.pointerType}function mCe(t){pCe(t)&&(zp=!0,gw="virtual")}function gCe(t){t.target===window||t.target===document||(!zp&&!EI&&(gw="virtual",TN("virtual",t)),zp=!1,EI=!1)}function vCe(){zp=!1,EI=!0}function L6(){return gw!=="pointer"}function yCe(){if(!dCe()||O6)return;const{focus:t}=HTMLElement.prototype;HTMLElement.prototype.focus=function(...n){zp=!0,t.apply(this,n)},document.addEventListener("keydown",N6,!0),document.addEventListener("keyup",N6,!0),document.addEventListener("click",mCe,!0),window.addEventListener("focus",gCe,!0),window.addEventListener("blur",vCe,!1),typeof PointerEvent!="undefined"?(document.addEventListener("pointerdown",Wm,!0),document.addEventListener("pointermove",Wm,!0),document.addEventListener("pointerup",Wm,!0)):(document.addEventListener("mousedown",Wm,!0),document.addEventListener("mousemove",Wm,!0),document.addEventListener("mouseup",Wm,!0)),O6=!0}function iY(t){yCe(),t(L6());const e=()=>t(L6());return CI.add(e),()=>{CI.delete(e)}}function xCe(t,e=[]){const n=Object.assign({},t);for(const r of e)r in n&&delete n[r];return n}function bCe(t={}){const e=AN(t),{isDisabled:n,isReadOnly:r,isRequired:i,isInvalid:o,id:s,onBlur:a,onFocus:l,"aria-describedby":c}=e,Be=t,{defaultChecked:u,isChecked:d,isFocusable:f,onChange:p,isIndeterminate:b,name:v,value:m,tabIndex:g=void 0,"aria-label":x,"aria-labelledby":w,"aria-invalid":S}=Be,P=Dt(Be,["defaultChecked","isChecked","isFocusable","onChange","isIndeterminate","name","value","tabIndex","aria-label","aria-labelledby","aria-invalid"]),I=xCe(P,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),M=Wo(p),D=Wo(a),E=Wo(l),[_,A]=T.useState(!1),[R,F]=T.useState(!1),[L,N]=T.useState(!1),[U,$]=T.useState(!1);T.useEffect(()=>iY(A),[]);const B=T.useRef(null),[H,q]=T.useState(!0),[z,G]=T.useState(!!u),K=d!==void 0,Z=K?d:z,ee=T.useCallback(de=>{if(r||n){de.preventDefault();return}K||G(Z?de.target.checked:b?!0:de.target.checked),M==null||M(de)},[r,n,Z,K,b,M]);Ju(()=>{B.current&&(B.current.indeterminate=!!b)},[b]),eC(()=>{n&&F(!1)},[n,F]),Ju(()=>{const de=B.current;if(!(de!=null&&de.form))return;const me=()=>{G(!!u)};return de.form.addEventListener("reset",me),()=>{var ie;return(ie=de.form)==null?void 0:ie.removeEventListener("reset",me)}},[]);const V=n&&!f,J=T.useCallback(de=>{de.key===" "&&$(!0)},[$]),oe=T.useCallback(de=>{de.key===" "&&$(!1)},[$]);Ju(()=>{if(!B.current)return;B.current.checked!==Z&&G(B.current.checked)},[B.current]);const ne=T.useCallback((de={},me=null)=>{const ie=ae=>{R&&ae.preventDefault(),$(!0)};return se(j({},de),{ref:me,"data-active":In(U),"data-hover":In(L),"data-checked":In(Z),"data-focus":In(R),"data-focus-visible":In(R&&_),"data-indeterminate":In(b),"data-disabled":In(n),"data-invalid":In(o),"data-readonly":In(r),"aria-hidden":!0,onMouseDown:Nn(de.onMouseDown,ie),onMouseUp:Nn(de.onMouseUp,()=>$(!1)),onMouseEnter:Nn(de.onMouseEnter,()=>N(!0)),onMouseLeave:Nn(de.onMouseLeave,()=>N(!1))})},[U,Z,n,R,_,L,b,o,r]),pe=T.useCallback((de={},me=null)=>se(j({},de),{ref:me,"data-active":In(U),"data-hover":In(L),"data-checked":In(Z),"data-focus":In(R),"data-focus-visible":In(R&&_),"data-indeterminate":In(b),"data-disabled":In(n),"data-invalid":In(o),"data-readonly":In(r)}),[U,Z,n,R,_,L,b,o,r]),ye=T.useCallback((de={},me=null)=>se(j(j({},I),de),{ref:ko(me,ie=>{ie&&q(ie.tagName==="LABEL")}),onClick:Nn(de.onClick,()=>{var ie;H||((ie=B.current)==null||ie.click(),requestAnimationFrame(()=>{var ae;(ae=B.current)==null||ae.focus({preventScroll:!0})}))}),"data-disabled":In(n),"data-checked":In(Z),"data-invalid":In(o)}),[I,n,Z,o,H]),Ce=T.useCallback((de={},me=null)=>se(j({},de),{ref:ko(B,me),type:"checkbox",name:v,value:m,id:s,tabIndex:g,onChange:Nn(de.onChange,ee),onBlur:Nn(de.onBlur,D,()=>F(!1)),onFocus:Nn(de.onFocus,E,()=>F(!0)),onKeyDown:Nn(de.onKeyDown,J),onKeyUp:Nn(de.onKeyUp,oe),required:i,checked:Z,disabled:V,readOnly:r,"aria-label":x,"aria-labelledby":w,"aria-invalid":S?!!S:o,"aria-describedby":c,"aria-disabled":n,style:uCe}),[v,m,s,ee,D,E,J,oe,i,Z,V,r,x,w,S,o,c,n,g]),_e=T.useCallback((de={},me=null)=>se(j({},de),{ref:me,onMouseDown:Nn(de.onMouseDown,wCe),"data-disabled":In(n),"data-checked":In(Z),"data-invalid":In(o)}),[Z,n,o]);return{state:{isInvalid:o,isFocused:R,isChecked:Z,isActive:U,isHovered:L,isIndeterminate:b,isDisabled:n,isReadOnly:r,isRequired:i},getRootProps:ye,getCheckboxProps:ne,getIndicatorProps:pe,getInputProps:Ce,getLabelProps:_e,htmlProps:I}}function wCe(t){t.preventDefault(),t.stopPropagation()}function SCe(t){const e=parseFloat(t);return typeof e!="number"||Number.isNaN(e)?0:e}function oY(t,e){let n=SCe(t);const r=Cu(10,e!=null?e:10);return n=Math.round(n*r)/r,e?n.toFixed(e):n.toString()}function B6(t){if(!Number.isFinite(t))return 0;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n+=1;return n}function _Ce(t,e,n){return t==null?t:(n<e&&console.warn("clamp: max cannot be less than min"),Math.min(Math.max(t,e),n))}function ECe(t={}){const{onChange:e,precision:n,defaultValue:r,value:i,step:o=1,min:s=Number.MIN_SAFE_INTEGER,max:a=Number.MAX_SAFE_INTEGER,keepWithinRange:l=!0}=t,c=Wo(e),[u,d]=T.useState(()=>{var _;return r==null?"":(_=dP(r,o,n))!=null?_:""}),f=typeof i!="undefined",p=f?i:u,b=sY(af(p),o),v=n!=null?n:b,m=T.useCallback(_=>{_!==p&&(f||d(_.toString()),c==null||c(_.toString(),af(_)))},[c,f,p]),g=T.useCallback(_=>{let A=_;return l&&(A=_Ce(A,s,a)),oY(A,v)},[v,l,a,s]),x=T.useCallback((_=o)=>{let A;p===""?A=af(_):A=af(p)+_,A=g(A),m(A)},[g,o,m,p]),w=T.useCallback((_=o)=>{let A;p===""?A=af(-_):A=af(p)-_,A=g(A),m(A)},[g,o,m,p]),S=T.useCallback(()=>{var _;let A;r==null?A="":A=(_=dP(r,o,n))!=null?_:s,m(A)},[r,n,o,m,s]),P=T.useCallback(_=>{var A;const R=(A=dP(_,o,v))!=null?A:s;m(R)},[v,o,m,s]),I=af(p);return{isOutOfRange:I>a||I<s,isAtMax:I===a,isAtMin:I===s,precision:v,value:p,valueAsNumber:I,update:m,reset:S,increment:x,decrement:w,clamp:g,cast:P,setValue:d}}function af(t){return parseFloat(t.toString().replace(/[^\w.-]+/g,""))}function sY(t,e){return Math.max(B6(e),B6(t))}function dP(t,e,n){const r=af(t);if(Number.isNaN(r))return;const i=sY(r,e);return oY(r,n!=null?n:i)}function G_(t,e,n,r){const i=Wo(n);return T.useEffect(()=>{const o=typeof t=="function"?t():t!=null?t:document;if(!(!n||!o))return o.addEventListener(e,i,r),()=>{o.removeEventListener(e,i,r)}},[e,t,r,i,n]),()=>{const o=typeof t=="function"?t():t!=null?t:document;o==null||o.removeEventListener(e,i,r)}}function CCe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var AI="data-focus-lock",aY="data-focus-lock-disabled",ACe="data-no-focus-lock",TCe="data-autofocus-inside",MCe="data-no-autofocus";function fP(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function PCe(t,e){var n=T.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var DCe=typeof window!="undefined"?T.useLayoutEffect:T.useEffect,j6=new WeakMap;function lY(t,e){var n=PCe(null,function(r){return t.forEach(function(i){return fP(i,r)})});return DCe(function(){var r=j6.get(n);if(r){var i=new Set(r),o=new Set(t),s=n.current;i.forEach(function(a){o.has(a)||fP(a,null)}),o.forEach(function(a){i.has(a)||fP(a,s)})}j6.set(n,t)},[t]),n}var hP={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},Oc=function(){return Oc=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Oc.apply(this,arguments)};function vw(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function RCe(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function cY(t){return t}function uY(t,e){e===void 0&&(e=cY);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var s=e(o,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(o){for(r=!0;n.length;){var s=n;n=[],s.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(o),s=n}var l=function(){var u=s;s=[],u.forEach(o)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){s.push(u),c()},filter:function(u){return s=s.filter(u),n}}}};return i}function MN(t,e){return e===void 0&&(e=cY),uY(t,e)}function dY(t){t===void 0&&(t={});var e=uY(null);return e.options=Oc({async:!0,ssr:!1},t),e}var fY=function(t){var e=t.sideCar,n=vw(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return T.createElement(r,Oc({},n))};fY.isSideCarExport=!0;function ICe(t,e){return t.useMedium(e),fY}var hY=MN({},function(t){var e=t.target,n=t.currentTarget;return{target:e,currentTarget:n}}),pY=MN(),kCe=MN(),FCe=dY({async:!0,ssr:typeof document!="undefined"}),OCe=T.createContext(void 0),NCe=[],PN=T.forwardRef(function(e,n){var r,i=T.useState(),o=i[0],s=i[1],a=T.useRef(),l=T.useRef(!1),c=T.useRef(null),u=T.useState({}),d=u[1],f=e.children,p=e.disabled,b=p===void 0?!1:p,v=e.noFocusGuards,m=v===void 0?!1:v,g=e.persistentFocus,x=g===void 0?!1:g,w=e.crossFrame,S=w===void 0?!0:w,P=e.autoFocus,I=P===void 0?!0:P;e.allowTextSelection;var M=e.group,D=e.className,E=e.whiteList,_=e.hasPositiveIndices,A=e.shards,R=A===void 0?NCe:A,F=e.as,L=F===void 0?"div":F,N=e.lockProps,U=N===void 0?{}:N,$=e.sideCar,B=e.returnFocus,H=B===void 0?!1:B,q=e.focusOptions,z=e.onActivation,G=e.onDeactivation,K=T.useState({}),Z=K[0],ee=T.useCallback(function(de){var me=de.captureFocusRestore;if(!c.current){var ie,ae=(ie=document)==null?void 0:ie.activeElement;c.current=ae,ae!==document.body&&(c.current=me(ae))}a.current&&z&&z(a.current),l.current=!0,d()},[z]),V=T.useCallback(function(){l.current=!1,G&&G(a.current),d()},[G]),J=T.useCallback(function(de){var me=c.current;if(me){var ie=(typeof me=="function"?me():me)||document.body,ae=typeof H=="function"?H(ie):H;if(ae){var ge=typeof ae=="object"?ae:void 0;c.current=null,de?Promise.resolve().then(function(){return ie.focus(ge)}):ie.focus(ge)}}},[H]),oe=T.useCallback(function(de){l.current&&hY.useMedium(de)},[]),ne=pY.useMedium,pe=T.useCallback(function(de){a.current!==de&&(a.current=de,s(de))},[]),ye=Up((r={},r[aY]=b&&"disabled",r[AI]=M,r),U),Ce=m!==!0,_e=Ce&&m!=="tail",ce=lY([n,pe]),Be=T.useMemo(function(){return{observed:a,shards:R,enabled:!b,active:l.current}},[b,l.current,R,o]);return Lt.createElement(T.Fragment,null,Ce&&[Lt.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:b?-1:0,style:hP}),_?Lt.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:b?-1:1,style:hP}):null],!b&&Lt.createElement($,{id:Z,sideCar:FCe,observed:o,disabled:b,persistentFocus:x,crossFrame:S,autoFocus:I,whiteList:E,shards:R,onActivation:ee,onDeactivation:V,returnFocus:J,focusOptions:q,noFocusGuards:m}),Lt.createElement(L,Up({ref:ce},ye,{className:D,onBlur:ne,onFocus:oe}),Lt.createElement(OCe.Provider,{value:Be},f)),_e&&Lt.createElement("div",{"data-focus-guard":!0,tabIndex:b?-1:0,style:hP}))});PN.propTypes={};function TI(t,e){return TI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},TI(t,e)}function LCe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,TI(t,e)}function pb(t){"@babel/helpers - typeof";return pb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pb(t)}function BCe(t,e){if(pb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jCe(t){var e=BCe(t,"string");return pb(e)=="symbol"?e:e+""}function UCe(t,e,n){return(e=jCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zCe(t,e){function n(r){return r.displayName||r.name||"Component"}return function(i){var o=[],s;function a(){s=t(o.map(function(c){return c.props})),e(s)}var l=function(c){LCe(u,c);function u(){return c.apply(this,arguments)||this}u.peek=function(){return s};var d=u.prototype;return d.componentDidMount=function(){o.push(this),a()},d.componentDidUpdate=function(){a()},d.componentWillUnmount=function(){var p=o.indexOf(this);o.splice(p,1),a()},d.render=function(){return Lt.createElement(i,this.props)},u}(T.PureComponent);return UCe(l,"displayName","SideEffect("+n(i)+")"),l}}var lu=function(t){for(var e=Array(t.length),n=0;n<t.length;++n)e[n]=t[n];return e},Vp=function(t){return Array.isArray(t)?t:[t]},mY=function(t){return Array.isArray(t)?t[0]:t},VCe=function(t){if(t.nodeType!==Node.ELEMENT_NODE)return!1;var e=window.getComputedStyle(t,null);return!e||!e.getPropertyValue?!1:e.getPropertyValue("display")==="none"||e.getPropertyValue("visibility")==="hidden"},gY=function(t){return t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?t.parentNode.host:t.parentNode},vY=function(t){return t===document||t&&t.nodeType===Node.DOCUMENT_NODE},WCe=function(t){return t.hasAttribute("inert")},$Ce=function(t,e){return!t||vY(t)||!VCe(t)&&!WCe(t)&&e(gY(t))},yY=function(t,e){var n=t.get(e);if(n!==void 0)return n;var r=$Ce(e,yY.bind(void 0,t));return t.set(e,r),r},HCe=function(t,e){return t&&!vY(t)?KCe(t)?e(gY(t)):!1:!0},xY=function(t,e){var n=t.get(e);if(n!==void 0)return n;var r=HCe(e,xY.bind(void 0,t));return t.set(e,r),r},bY=function(t){return t.dataset},GCe=function(t){return t.tagName==="BUTTON"},wY=function(t){return t.tagName==="INPUT"},SY=function(t){return wY(t)&&t.type==="radio"},qCe=function(t){return!((wY(t)||GCe(t))&&(t.type==="hidden"||t.disabled))},KCe=function(t){var e=t.getAttribute(MCe);return![!0,"true",""].includes(e)},DN=function(t){var e;return!!(t&&(!((e=bY(t))===null||e===void 0)&&e.focusGuard))},MI=function(t){return!DN(t)},YCe=function(t){return!!t},XCe=function(t,e){var n=Math.max(0,t.tabIndex),r=Math.max(0,e.tabIndex),i=n-r,o=t.index-e.index;if(i){if(!n)return 1;if(!r)return-1}return i||o},QCe=function(t){return t.tabIndex<0&&!t.hasAttribute("tabindex")?0:t.tabIndex},RN=function(t,e,n){return lu(t).map(function(r,i){var o=QCe(r);return{node:r,index:i,tabIndex:n&&o===-1?(r.dataset||{}).focusGuard?0:-1:o}}).filter(function(r){return!e||r.tabIndex>=0}).sort(XCe)},ZCe=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],IN=ZCe.join(","),JCe="".concat(IN,", [data-focus-guard]"),_Y=function(t,e){return lu((t.shadowRoot||t).children).reduce(function(n,r){return n.concat(r.matches(e?JCe:IN)?[r]:[],_Y(r))},[])},eAe=function(t,e){var n;return t instanceof HTMLIFrameElement&&(!((n=t.contentDocument)===null||n===void 0)&&n.body)?Dv([t.contentDocument.body],e):[t]},Dv=function(t,e){return t.reduce(function(n,r){var i,o=_Y(r,e),s=(i=[]).concat.apply(i,o.map(function(a){return eAe(a,e)}));return n.concat(s,r.parentNode?lu(r.parentNode.querySelectorAll(IN)).filter(function(a){return a===r}):[])},[])},tAe=function(t){var e=t.querySelectorAll("[".concat(TCe,"]"));return lu(e).map(function(n){return Dv([n])}).reduce(function(n,r){return n.concat(r)},[])},kN=function(t,e){return lu(t).filter(function(n){return yY(e,n)}).filter(function(n){return qCe(n)})},U6=function(t,e){return e===void 0&&(e=new Map),lu(t).filter(function(n){return xY(e,n)})},FN=function(t,e,n){return RN(kN(Dv(t,n),e),!0,n)},mb=function(t,e){return RN(kN(Dv(t),e),!1)},nAe=function(t,e){return kN(tAe(t),e)},Cp=function(t,e){return t.shadowRoot?Cp(t.shadowRoot,e):Object.getPrototypeOf(t).contains!==void 0&&Object.getPrototypeOf(t).contains.call(t,e)?!0:lu(t.children).some(function(n){var r;if(n instanceof HTMLIFrameElement){var i=(r=n.contentDocument)===null||r===void 0?void 0:r.body;return i?Cp(i,e):!1}return Cp(n,e)})},rAe=function(t){for(var e=new Set,n=t.length,r=0;r<n;r+=1)for(var i=r+1;i<n;i+=1){var o=t[r].compareDocumentPosition(t[i]);(o&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&e.add(i),(o&Node.DOCUMENT_POSITION_CONTAINS)>0&&e.add(r)}return t.filter(function(s,a){return!e.has(a)})},EY=function(t){return t.parentNode?EY(t.parentNode):t},ON=function(t){var e=Vp(t);return e.filter(Boolean).reduce(function(n,r){var i=r.getAttribute(AI);return n.push.apply(n,i?rAe(lu(EY(r).querySelectorAll("[".concat(AI,'="').concat(i,'"]:not([').concat(aY,'="disabled"])')))):[r]),n},[])},iAe=function(t){try{return t()}catch(e){return}},gb=function(t){if(t===void 0&&(t=document),!(!t||!t.activeElement)){var e=t.activeElement;return e.shadowRoot?gb(e.shadowRoot):e instanceof HTMLIFrameElement&&iAe(function(){return e.contentWindow.document})?gb(e.contentWindow.document):e}},oAe=function(t,e){return t===e},sAe=function(t,e){return!!lu(t.querySelectorAll("iframe")).some(function(n){return oAe(n,e)})},CY=function(t,e){return e===void 0&&(e=gb(mY(t).ownerDocument)),!e||e.dataset&&e.dataset.focusGuard?!1:ON(t).some(function(n){return Cp(n,e)||sAe(n,e)})},aAe=function(t){t===void 0&&(t=document);var e=gb(t);return e?lu(t.querySelectorAll("[".concat(ACe,"]"))).some(function(n){return Cp(n,e)}):!1},lAe=function(t,e){return e.filter(SY).filter(function(n){return n.name===t.name}).filter(function(n){return n.checked})[0]||t},NN=function(t,e){return SY(t)&&t.name?lAe(t,e):t},cAe=function(t){var e=new Set;return t.forEach(function(n){return e.add(NN(n,t))}),t.filter(function(n){return e.has(n)})},z6=function(t){return t[0]&&t.length>1?NN(t[0],t):t[0]},V6=function(t,e){return t.indexOf(NN(e,t))},PI="NEW_FOCUS",uAe=function(t,e,n,r,i){var o=t.length,s=t[0],a=t[o-1],l=DN(r);if(!(r&&t.indexOf(r)>=0)){var c=r!==void 0?n.indexOf(r):-1,u=i?n.indexOf(i):c,d=i?t.indexOf(i):-1;if(c===-1)return d!==-1?d:PI;if(d===-1)return PI;var f=c-u,p=n.indexOf(s),b=n.indexOf(a),v=cAe(n),m=r!==void 0?v.indexOf(r):-1,g=i?v.indexOf(i):m,x=v.filter(function(D){return D.tabIndex>=0}),w=r!==void 0?x.indexOf(r):-1,S=i?x.indexOf(i):w,P=w>=0&&S>=0?S-w:g-m;if(!f&&d>=0||e.length===0)return d;var I=V6(t,e[0]),M=V6(t,e[e.length-1]);if(c<=p&&l&&Math.abs(f)>1)return M;if(c>=b&&l&&Math.abs(f)>1)return I;if(f&&Math.abs(P)>1)return d;if(c<=p)return M;if(c>b)return I;if(f)return Math.abs(f)>1?d:(o+d+f)%o}},dAe=function(t){return function(e){var n,r=(n=bY(e))===null||n===void 0?void 0:n.autofocus;return e.autofocus||r!==void 0&&r!=="false"||t.indexOf(e)>=0}},W6=function(t,e,n){var r=t.map(function(o){var s=o.node;return s}),i=U6(r.filter(dAe(n)));return i&&i.length?z6(i):z6(U6(e))},DI=function(t,e){return e===void 0&&(e=[]),e.push(t),t.parentNode&&DI(t.parentNode.host||t.parentNode,e),e},pP=function(t,e){for(var n=DI(t),r=DI(e),i=0;i<n.length;i+=1){var o=n[i];if(r.indexOf(o)>=0)return o}return!1},AY=function(t,e,n){var r=Vp(t),i=Vp(e),o=r[0],s=!1;return i.filter(Boolean).forEach(function(a){s=pP(s||a,a)||s,n.filter(Boolean).forEach(function(l){var c=pP(o,l);c&&(!s||Cp(c,s)?s=c:s=pP(c,s))})}),s},$6=function(t,e){return t.reduce(function(n,r){return n.concat(nAe(r,e))},[])},fAe=function(t,e){var n=new Map;return e.forEach(function(r){return n.set(r.node,r)}),t.map(function(r){return n.get(r)}).filter(YCe)},hAe=function(t,e){var n=gb(Vp(t).length>0?document:mY(t).ownerDocument),r=ON(t).filter(MI),i=AY(n||t,t,r),o=new Map,s=mb(r,o),a=s.filter(function(b){var v=b.node;return MI(v)});if(a[0]){var l=mb([i],o).map(function(b){var v=b.node;return v}),c=fAe(l,a),u=c.map(function(b){var v=b.node;return v}),d=c.filter(function(b){var v=b.tabIndex;return v>=0}).map(function(b){var v=b.node;return v}),f=uAe(u,d,l,n,e);if(f===PI){var p=W6(s,d,$6(r,o))||W6(s,u,$6(r,o));if(p)return{node:p};console.warn("focus-lock: cannot find any node to move focus into");return}return f===void 0?f:c[f]}},pAe=function(t){var e=ON(t).filter(MI),n=AY(t,t,e),r=RN(Dv([n],!0),!0,!0),i=Dv(e,!1);return r.map(function(o){var s=o.node,a=o.index;return{node:s,index:a,lockItem:i.indexOf(s)>=0,guard:DN(s)}})},LN=function(t,e){t&&("focus"in t&&t.focus(e),"contentWindow"in t&&t.contentWindow&&t.contentWindow.focus())},mP=0,gP=!1,TY=function(t,e,n){n===void 0&&(n={});var r=hAe(t,e);if(!gP&&r){if(mP>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),gP=!0,setTimeout(function(){gP=!1},1);return}mP++,LN(r.node,n.focusOptions),mP--}};function ny(t){if(!t)return null;if(typeof WeakRef=="undefined")return function(){return t||null};var e=t?new WeakRef(t):null;return function(){return(e==null?void 0:e.deref())||null}}var mAe=function(t){if(!t)return null;for(var e=[],n=t;n&&n!==document.body;)e.push({current:ny(n),parent:ny(n.parentElement),left:ny(n.previousElementSibling),right:ny(n.nextElementSibling)}),n=n.parentElement;return{element:ny(t),stack:e,ownerDocument:t.ownerDocument}},gAe=function(t){var e,n,r,i,o;if(t)for(var s=t.stack,a=t.ownerDocument,l=new Map,c=0,u=s;c<u.length;c++){var d=u[c],f=(e=d.parent)===null||e===void 0?void 0:e.call(d);if(f&&a.contains(f)){for(var p=(n=d.left)===null||n===void 0?void 0:n.call(d),b=d.current(),v=f.contains(b)?b:void 0,m=(r=d.right)===null||r===void 0?void 0:r.call(d),g=FN([f],l),x=(o=(i=v!=null?v:p==null?void 0:p.nextElementSibling)!==null&&i!==void 0?i:m)!==null&&o!==void 0?o:p;x;){for(var w=0,S=g;w<S.length;w++){var P=S[w];if(x!=null&&x.contains(P.node))return P.node}x=x.nextElementSibling}if(g.length)return g[0].node}}},MY=function(t){var e=mAe(t);return function(){return gAe(e)}},vAe=function(t,e,n){if(!t||!e)return console.error("no element or scope given"),{};var r=Vp(e);if(r.every(function(s){return!Cp(s,t)}))return console.error("Active element is not contained in the scope"),{};var i=n?FN(r,new Map):mb(r,new Map),o=i.findIndex(function(s){var a=s.node;return a===t});if(o!==-1)return{prev:i[o-1],next:i[o+1],first:i[0],last:i[i.length-1]}},yAe=function(t,e){var n=e?FN(Vp(t),new Map):mb(Vp(t),new Map);return{first:n[0],last:n[n.length-1]}},xAe=function(t){return Object.assign({scope:document.body,cycle:!0,onlyTabbable:!0},t)},PY=function(t,e,n){e===void 0&&(e={});var r=xAe(e),i=vAe(t,r.scope,r.onlyTabbable);if(i){var o=n(i,r.cycle);o&&LN(o.node,r.focusOptions)}},bAe=function(t,e){e===void 0&&(e={}),PY(t,e,function(n,r){var i=n.next,o=n.first;return i||r&&o})},wAe=function(t,e){e===void 0&&(e={}),PY(t,e,function(n,r){var i=n.prev,o=n.last;return i||r&&o})},DY=function(t,e,n){var r,i=yAe(t,(r=e.onlyTabbable)!==null&&r!==void 0?r:!0),o=i[n];o&&LN(o.node,e.focusOptions)},SAe=function(t,e){e===void 0&&(e={}),DY(t,e,"first")},_Ae=function(t,e){e===void 0&&(e={}),DY(t,e,"last")};function BN(t){setTimeout(t,1)}var EAe=function(e){return e&&"current"in e?e.current:e},RY=function(){return document&&document.activeElement===document.body},CAe=function(){return RY()||aAe()},tv=null,Ys=null,H6=function(){return null},nv=null,vb=!1,jN=!1,AAe=function(){return!0},TAe=function(e){return(tv.whiteList||AAe)(e)},MAe=function(e,n){nv={observerNode:e,portaledElement:n}},PAe=function(e){return nv&&nv.portaledElement===e};function G6(t,e,n,r){var i=null,o=t;do{var s=r[o];if(s.guard)s.node.dataset.focusAutoGuard&&(i=s);else if(s.lockItem){if(o!==t)return;i=null}else break}while((o+=n)!==e);i&&(i.node.tabIndex=0)}var DAe=function(e){return e?!!vb:vb==="meanwhile"},RAe=function t(e,n,r){return n&&(n.host===e&&(!n.activeElement||r.contains(n.activeElement))||n.parentNode&&t(e,n.parentNode,r))},IAe=function(e,n){return n.some(function(r){return RAe(e,r,r)})},IY=function(e){return mb(e,new Map)},kAe=function(e){return!IY([e.parentNode]).some(function(n){return n.node===e})},fC=function(){var e=!1;if(tv){var n=tv,r=n.observed,i=n.persistentFocus,o=n.autoFocus,s=n.shards,a=n.crossFrame,l=n.focusOptions,c=n.noFocusGuards,u=r||nv&&nv.portaledElement;if(RY()&&Ys&&Ys!==document.body&&(!document.body.contains(Ys)||kAe(Ys))){var d=H6();d&&d.focus()}var f=document&&document.activeElement;if(u){var p=[u].concat(s.map(EAe).filter(Boolean)),b=function(){if(!DAe(a)||!c||!Ys||jN)return!1;var w=IY(p),S=w.findIndex(function(P){var I=P.node;return I===Ys});return S===0||S===w.length-1};if((!f||TAe(f))&&(i||b()||!CAe()||!Ys&&o)&&(u&&!(CY(p)||f&&IAe(f,p)||PAe(f))&&(document&&!Ys&&f&&!o?(f.blur&&f.blur(),document.body.focus()):(e=TY(p,Ys,{focusOptions:l}),nv={})),Ys=document&&document.activeElement,Ys!==document.body&&(H6=MY(Ys)),vb=!1),document&&f!==document.activeElement&&document.querySelector("[data-focus-auto-guard]")){var v=document&&document.activeElement,m=pAe(p),g=m.map(function(x){var w=x.node;return w}).indexOf(v);g>-1&&(m.filter(function(x){var w=x.guard,S=x.node;return w&&S.dataset.focusAutoGuard}).forEach(function(x){var w=x.node;return w.removeAttribute("tabIndex")}),G6(g,m.length,1,m),G6(g,-1,-1,m))}}}return e},kY=function(e){fC()&&e&&(e.stopPropagation(),e.preventDefault())},UN=function(){return BN(fC)},FAe=function(e){var n=e.target,r=e.currentTarget;r.contains(n)||MAe(r,n)},OAe=function(){return null},FY=function(){jN=!0},OY=function(){jN=!1,vb="just",BN(function(){vb="meanwhile"})},NAe=function(){document.addEventListener("focusin",kY),document.addEventListener("focusout",UN),window.addEventListener("focus",FY),window.addEventListener("blur",OY)},LAe=function(){document.removeEventListener("focusin",kY),document.removeEventListener("focusout",UN),window.removeEventListener("focus",FY),window.removeEventListener("blur",OY)};function BAe(t){return t.filter(function(e){var n=e.disabled;return!n})}var NY={moveFocusInside:TY,focusInside:CY,focusNextElement:bAe,focusPrevElement:wAe,focusFirstElement:SAe,focusLastElement:_Ae,captureFocusRestore:MY};function jAe(t){var e=t.slice(-1)[0];e&&!tv&&NAe();var n=tv,r=n&&e&&e.id===n.id;tv=e,n&&!r&&(n.onDeactivation(),t.filter(function(i){var o=i.id;return o===n.id}).length||n.returnFocus(!e)),e?(Ys=null,(!r||n.observed!==e.observed)&&e.onActivation(NY),fC(),BN(fC)):(LAe(),Ys=null)}hY.assignSyncMedium(FAe);pY.assignMedium(UN);kCe.assignMedium(function(t){return t(NY)});const UAe=zCe(BAe,jAe)(OAe);var RI=T.forwardRef(function(e,n){return Lt.createElement(PN,Up({sideCar:UAe,ref:n},e))}),LY=PN.propTypes||{};LY.sideCar;CCe(LY,["sideCar"]);RI.propTypes={};function zAe(t){return t!=null&&typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE}function BY(t){var e;if(!zAe(t))return!1;const n=(e=t.ownerDocument.defaultView)!=null?e:window;return t instanceof n.HTMLElement}function VAe(t){const e=t.ownerDocument.defaultView||window,{overflow:n,overflowX:r,overflowY:i}=e.getComputedStyle(t);return/auto|scroll|overlay|hidden/.test(n+i+r)}function WAe(t){return t.localName==="html"?t:t.assignedSlot||t.parentElement||t.ownerDocument.documentElement}function jY(t){return["html","body","#document"].includes(t.localName)?t.ownerDocument.body:BY(t)&&VAe(t)?t:jY(WAe(t))}var $Ae=t=>t.hasAttribute("tabindex");function HAe(t){return!!t.getAttribute("disabled")||!!t.getAttribute("aria-disabled")}function UY(t){return t.parentElement&&UY(t.parentElement)?!0:t.hidden}function GAe(t){const e=t.getAttribute("contenteditable");return e!=="false"&&e!=null}function qAe(t){if(!BY(t)||UY(t)||HAe(t))return!1;const{localName:e}=t;if(["input","select","textarea","button"].indexOf(e)>=0)return!0;const r={a:()=>t.hasAttribute("href"),audio:()=>t.hasAttribute("controls"),video:()=>t.hasAttribute("controls")};return e in r?r[e]():GAe(t)?!0:$Ae(t)}var KAe=["input:not(:disabled):not([disabled])","select:not(:disabled):not([disabled])","textarea:not(:disabled):not([disabled])","embed","iframe","object","a[href]","area[href]","button:not(:disabled):not([disabled])","[tabindex]","audio[controls]","video[controls]","*[tabindex]:not([aria-disabled])","*[contenteditable]"],YAe=KAe.join(),XAe=t=>t.offsetWidth>0&&t.offsetHeight>0;function QAe(t){const e=Array.from(t.querySelectorAll(YAe));return e.unshift(t),e.filter(n=>qAe(n)&&XAe(n))}var q6,ZAe=(q6=RI.default)!=null?q6:RI,zY=t=>{const{initialFocusRef:e,finalFocusRef:n,contentRef:r,restoreFocus:i,children:o,isDisabled:s,autoFocus:a,persistentFocus:l,lockFocusAcrossFrames:c}=t,u=T.useCallback(()=>{e!=null&&e.current?e.current.focus():r!=null&&r.current&&QAe(r.current).length===0&&requestAnimationFrame(()=>{var b;(b=r.current)==null||b.focus()})},[e,r]),d=T.useCallback(()=>{var p;(p=n==null?void 0:n.current)==null||p.focus()},[n]),f=i&&!n;return h.jsx(ZAe,{crossFrame:c,persistentFocus:l,autoFocus:a,disabled:s,onActivation:u,onDeactivation:d,returnFocus:f,children:o})};zY.displayName="FocusLock";var[JAe,eTe]=Ai({name:"InputGroupStylesContext",errorMessage:`useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in "<InputGroup />" `}),rv=Qt(function(e,n){const r=js("Input",e),f=di(e),{children:i,className:o}=f,s=Dt(f,["children","className"]),a=Sn("chakra-input__group",o),l={},c=EN(i),u=r.field;c.forEach(p=>{var b,v;r&&(u&&p.type.id==="InputLeftElement"&&(l.paddingStart=(b=u.height)!=null?b:u.h),u&&p.type.id==="InputRightElement"&&(l.paddingEnd=(v=u.height)!=null?v:u.h),p.type.id==="InputRightAddon"&&(l.borderEndRadius=0),p.type.id==="InputLeftAddon"&&(l.borderStartRadius=0))});const d=c.map(p=>{var b,v;const m=bq({size:((b=p.props)==null?void 0:b.size)||e.size,variant:((v=p.props)==null?void 0:v.variant)||e.variant});return p.type.id!=="Input"?T.cloneElement(p,m):T.cloneElement(p,Object.assign(m,l,p.props))});return h.jsx($t.div,se(j({className:a,ref:n,__css:j({width:"100%",display:"flex",position:"relative",isolation:"isolate"},r.group),"data-group":!0},s),{children:h.jsx(JAe,{value:r,children:d})}))});rv.displayName="InputGroup";var tTe=$t("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),rT=Qt(function(e,n){var r,i;const d=e,{placement:o="left"}=d,s=Dt(d,["placement"]),a=eTe(),l=a.field,u=j({[o==="left"?"insetStart":"insetEnd"]:"0",width:(r=l==null?void 0:l.height)!=null?r:l==null?void 0:l.h,height:(i=l==null?void 0:l.height)!=null?i:l==null?void 0:l.h,fontSize:l==null?void 0:l.fontSize},a.element);return h.jsx(tTe,j({ref:n,__css:u},s))});rT.id="InputElement";rT.displayName="InputElement";var VY=Qt(function(e,n){const s=e,{className:r}=s,i=Dt(s,["className"]),o=Sn("chakra-input__left-element",r);return h.jsx(rT,j({ref:n,placement:"left",className:o},i))});VY.id="InputLeftElement";VY.displayName="InputLeftElement";var Ap=Qt(function(e,n){const s=e,{className:r}=s,i=Dt(s,["className"]),o=Sn("chakra-input__right-element",r);return h.jsx(rT,j({ref:n,placement:"right",className:o},i))});Ap.id="InputRightElement";Ap.displayName="InputRightElement";var ti=Qt(function(e,n){const c=e,{htmlSize:r}=c,i=Dt(c,["htmlSize"]),o=js("Input",i),s=di(i),a=CN(s),l=Sn("chakra-input",e.className);return h.jsx($t.input,se(j({size:r},a),{__css:o.field,ref:n,className:l}))});ti.displayName="Input";ti.id="Input";var hC=Qt(function(e,n){const m=e,{templateAreas:r,gap:i,rowGap:o,columnGap:s,column:a,row:l,autoFlow:c,autoRows:u,templateRows:d,autoColumns:f,templateColumns:p}=m,b=Dt(m,["templateAreas","gap","rowGap","columnGap","column","row","autoFlow","autoRows","templateRows","autoColumns","templateColumns"]),v={display:"grid",gridTemplateAreas:r,gridGap:i,gridRowGap:o,gridColumnGap:s,gridAutoColumns:f,gridColumn:a,gridRow:l,gridAutoFlow:c,gridAutoRows:u,gridTemplateRows:d,gridTemplateColumns:p};return h.jsx($t.div,j({ref:n,__css:v},b))});hC.displayName="Grid";var WY=Object.freeze(["base","sm","md","lg","xl","2xl"]);function zN(t,e){return Array.isArray(t)?t.map(n=>n===null?null:e(n)):us(t)?Object.keys(t).reduce((n,r)=>(n[r]=e(t[r]),n),{}):t!=null?e(t):null}function nTe(t,e=WY){const n={};return t.forEach((r,i)=>{const o=e[i];r!=null&&(n[o]=r)}),n}var pC=Qt(function(e,n){const d=e,{columns:r,spacingX:i,spacingY:o,spacing:s,minChildWidth:a}=d,l=Dt(d,["columns","spacingX","spacingY","spacing","minChildWidth"]),c=aw(),u=a?iTe(a,c):oTe(r);return h.jsx(hC,j({ref:n,gap:s,columnGap:i,rowGap:o,templateColumns:u},l))});pC.displayName="SimpleGrid";function rTe(t){return typeof t=="number"?`${t}px`:t}function iTe(t,e){return zN(t,n=>{const r=vhe("sizes",n,rTe(n))(e);return n===null?null:`repeat(auto-fit, minmax(${r}, 1fr))`})}function oTe(t){return zN(t,e=>e===null?null:`repeat(${e}, minmax(0, 1fr))`)}var ft=Qt(function(e,n){const r=Va("Text",e),u=di(e),{className:i,align:o,decoration:s,casing:a}=u,l=Dt(u,["className","align","decoration","casing"]),c=bq({textAlign:e.align,textDecoration:e.decoration,textTransform:e.casing});return h.jsx($t.p,se(j(j({ref:n,className:Sn("chakra-text",e.className)},c),l),{__css:r}))});ft.displayName="Text";var $Y=t=>h.jsx($t.div,se(j({className:"chakra-stack__item"},t),{__css:j({display:"inline-block",flex:"0 0 auto",minWidth:0},t.__css)}));$Y.displayName="StackItem";function sTe(t){const{spacing:e,direction:n}=t,r={column:{my:e,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:e,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:e,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:e,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":zN(n,i=>r[i])}}var iT=Qt((t,e)=>{const w=t,{isInline:n,direction:r,align:i,justify:o,spacing:s="0.5rem",wrap:a,children:l,divider:c,className:u,shouldWrapChildren:d}=w,f=Dt(w,["isInline","direction","align","justify","spacing","wrap","children","divider","className","shouldWrapChildren"]),p=n?"row":r!=null?r:"column",b=T.useMemo(()=>sTe({spacing:s,direction:p}),[s,p]),v=!!c,m=!d&&!v,g=T.useMemo(()=>{const S=EN(l);return m?S:S.map((P,I)=>{const M=typeof P.key!="undefined"?P.key:I,D=I+1===S.length,_=d?h.jsx($Y,{children:P},M):P;if(!v)return _;const A=T.cloneElement(c,{__css:b}),R=D?null:A;return h.jsxs(T.Fragment,{children:[_,R]},M)})},[c,b,v,m,d,l]),x=Sn("chakra-stack",u);return h.jsx($t.div,se(j({ref:e,display:"flex",alignItems:i,justifyContent:o,flexDirection:p,flexWrap:a,gap:v?void 0:s,className:x},f),{children:g}))});iT.displayName="Stack";var Kt=Qt((t,e)=>h.jsx(iT,se(j({align:"center"},t),{direction:"column",ref:e})));Kt.displayName="VStack";var Ln=Qt((t,e)=>h.jsx(iT,se(j({align:"center"},t),{direction:"row",ref:e})));Ln.displayName="HStack";var zr=Qt(function(e,n){const r=Va("Heading",e),s=di(e),{className:i}=s,o=Dt(s,["className"]);return h.jsx($t.h2,se(j({ref:n,className:Sn("chakra-heading",e.className)},o),{__css:r}))});zr.displayName="Heading";var Et=$t("div");Et.displayName="Box";var HY=Qt(function(e,n){const a=e,{size:r,centerContent:i=!0}=a,o=Dt(a,["size","centerContent"]),s=i?{display:"flex",alignItems:"center",justifyContent:"center"}:{};return h.jsx(Et,j({ref:n,boxSize:r,__css:se(j({},s),{flexShrink:0,flexGrow:0})},o))});HY.displayName="Square";var aTe=Qt(function(e,n){const o=e,{size:r}=o,i=Dt(o,["size"]);return h.jsx(HY,j({size:r,ref:n,borderRadius:"9999px"},i))});aTe.displayName="Circle";var lo=Qt(function(e,n){const r=Va("Badge",e),s=di(e),{className:i}=s,o=Dt(s,["className"]);return h.jsx($t.span,se(j({ref:n,className:Sn("chakra-badge",e.className)},o),{__css:j({display:"inline-block",whiteSpace:"nowrap",verticalAlign:"middle"},r)}))});lo.displayName="Badge";var cu=$t("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});cu.displayName="Center";var lTe={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};Qt(function(e,n){const o=e,{axis:r="both"}=o,i=Dt(o,["axis"]);return h.jsx($t.div,se(j({ref:n,__css:lTe[r]},i),{position:"absolute"}))});var II=Qt(function(e,n){const r=Va("Code",e),s=di(e),{className:i}=s,o=Dt(s,["className"]);return h.jsx($t.code,se(j({ref:n,className:Sn("chakra-code",e.className)},o),{__css:j({display:"inline-block"},r)}))});II.displayName="Code";var mC=Qt(function(e,n){const a=di(e),{className:r,centerContent:i}=a,o=Dt(a,["className","centerContent"]),s=Va("Container",e);return h.jsx($t.div,se(j({ref:n,className:Sn("chakra-container",r)},o),{__css:j(j({},s),i&&{display:"flex",flexDirection:"column",alignItems:"center"})}))});mC.displayName="Container";var md=Qt(function(e,n){const m=Va("Divider",e),{borderLeftWidth:r,borderBottomWidth:i,borderTopWidth:o,borderRightWidth:s,borderWidth:a,borderStyle:l,borderColor:c}=m,u=Dt(m,["borderLeftWidth","borderBottomWidth","borderTopWidth","borderRightWidth","borderWidth","borderStyle","borderColor"]),g=di(e),{className:d,orientation:f="horizontal",__css:p}=g,b=Dt(g,["className","orientation","__css"]),v={vertical:{borderLeftWidth:r||s||a||"1px",height:"100%"},horizontal:{borderBottomWidth:i||o||a||"1px",width:"100%"}};return h.jsx($t.hr,se(j({ref:n,"aria-orientation":f},b),{__css:j(j(se(j({},u),{border:"0",borderColor:c,borderStyle:l}),v[f]),p),className:Sn("chakra-divider",d)}))});md.displayName="Divider";var fc=Qt(function(e,n){const f=e,{direction:r,align:i,justify:o,wrap:s,basis:a,grow:l,shrink:c}=f,u=Dt(f,["direction","align","justify","wrap","basis","grow","shrink"]),d={display:"flex",flexDirection:r,alignItems:i,justifyContent:o,flexWrap:s,flexBasis:a,flexGrow:l,flexShrink:c};return h.jsx($t.div,j({ref:n,__css:d},u))});fc.displayName="Flex";function cTe(t,e={}){const{ssr:n=!0,fallback:r}=e,{getWindow:i}=Lbe(),o=Array.isArray(t)?t:[t];let s=Array.isArray(r)?r:[r];s=s.filter(c=>c!=null);const[a,l]=T.useState(()=>o.map((c,u)=>({media:c,matches:n?!!s[u]:i().matchMedia(c).matches})));return T.useEffect(()=>{const c=i();l(o.map(f=>({media:f,matches:c.matchMedia(f).matches})));const u=o.map(f=>c.matchMedia(f)),d=f=>{l(p=>p.slice().map(b=>b.media===f.media?se(j({},b),{matches:f.matches}):b))};return u.forEach(f=>{typeof f.addListener=="function"?f.addListener(d):f.addEventListener("change",d)}),()=>{u.forEach(f=>{typeof f.removeListener=="function"?f.removeListener(d):f.removeEventListener("change",d)})}},[i]),a.map(c=>c.matches)}function uTe(t,e,n=WY){let r=Object.keys(t).indexOf(e);if(r!==-1)return t[e];let i=n.indexOf(e);for(;i>=0;){const o=n[i];if(t.hasOwnProperty(o)){r=i;break}i-=1}if(r!==-1){const o=n[r];return t[o]}}function dTe(t){var e,n;const r=us(t)?t:{fallback:t!=null?t:"base"},o=aw().__breakpoints.details.map(({minMaxQuery:c,breakpoint:u})=>({breakpoint:u,query:c.replace("@media screen and ","")})),s=o.map(c=>c.breakpoint===r.fallback),l=cTe(o.map(c=>c.query),{fallback:s,ssr:r.ssr}).findIndex(c=>c==!0);return(n=(e=o[l])==null?void 0:e.breakpoint)!=null?n:r.fallback}function Ro(t,e){var n;const r=us(e)?e:{fallback:"base"},i=dTe(r),o=aw();if(!i)return;const s=Array.from(((n=o.__breakpoints)==null?void 0:n.keys)||[]),a=Array.isArray(t)?Object.fromEntries(Object.entries(nTe(t,s)).map(([l,c])=>[l,c])):t;return uTe(a,i,s)}function fTe(){const t=T.useRef(new Map),e=t.current,n=T.useCallback((i,o,s,a)=>{t.current.set(s,{type:o,el:i,options:a}),i.addEventListener(o,s,a)},[]),r=T.useCallback((i,o,s,a)=>{i.removeEventListener(o,s,a),t.current.delete(s)},[]);return T.useEffect(()=>()=>{e.forEach((i,o)=>{r(i.el,i.type,o,i.options)})},[r,e]),{add:n,remove:r}}function vP(t){const e=t.target,{tagName:n,isContentEditable:r}=e;return n!=="INPUT"&&n!=="TEXTAREA"&&r!==!0}function hTe(t={}){const $=t,{ref:e,isDisabled:n,isFocusable:r,clickOnEnter:i=!0,clickOnSpace:o=!0,onMouseDown:s,onMouseUp:a,onClick:l,onKeyDown:c,onKeyUp:u,tabIndex:d,onMouseOver:f,onMouseLeave:p}=$,b=Dt($,["ref","isDisabled","isFocusable","clickOnEnter","clickOnSpace","onMouseDown","onMouseUp","onClick","onKeyDown","onKeyUp","tabIndex","onMouseOver","onMouseLeave"]),[v,m]=T.useState(!0),[g,x]=T.useState(!1),w=fTe(),S=B=>{B&&B.tagName!=="BUTTON"&&m(!1)},P=v?d:d||0,I=n&&!r,M=T.useCallback(B=>{if(n){B.stopPropagation(),B.preventDefault();return}B.currentTarget.focus(),l==null||l(B)},[n,l]),D=T.useCallback(B=>{g&&vP(B)&&(B.preventDefault(),B.stopPropagation(),x(!1),w.remove(document,"keyup",D,!1))},[g,w]),E=T.useCallback(B=>{if(c==null||c(B),n||B.defaultPrevented||B.metaKey||!vP(B.nativeEvent)||v)return;const H=i&&B.key==="Enter";o&&B.key===" "&&(B.preventDefault(),x(!0)),H&&(B.preventDefault(),B.currentTarget.click()),w.add(document,"keyup",D,!1)},[n,v,c,i,o,w,D]),_=T.useCallback(B=>{if(u==null||u(B),n||B.defaultPrevented||B.metaKey||!vP(B.nativeEvent)||v)return;o&&B.key===" "&&(B.preventDefault(),x(!1),B.currentTarget.click())},[o,v,n,u]),A=T.useCallback(B=>{B.button===0&&(x(!1),w.remove(document,"mouseup",A,!1))},[w]),R=T.useCallback(B=>{if(B.button!==0)return;if(n){B.stopPropagation(),B.preventDefault();return}v||x(!0),B.currentTarget.focus({preventScroll:!0}),w.add(document,"mouseup",A,!1),s==null||s(B)},[n,v,s,w,A]),F=T.useCallback(B=>{B.button===0&&(v||x(!1),a==null||a(B))},[a,v]),L=T.useCallback(B=>{if(n){B.preventDefault();return}f==null||f(B)},[n,f]),N=T.useCallback(B=>{g&&(B.preventDefault(),x(!1)),p==null||p(B)},[g,p]),U=ko(e,S);return v?se(j({},b),{ref:U,type:"button","aria-disabled":I?void 0:n,disabled:I,onClick:M,onMouseDown:s,onMouseUp:a,onKeyUp:u,onKeyDown:c,onMouseOver:f,onMouseLeave:p}):se(j({},b),{ref:U,role:"button","data-active":In(g),"aria-disabled":n?"true":void 0,tabIndex:I?void 0:P,onClick:M,onMouseDown:R,onMouseUp:F,onKeyUp:_,onKeyDown:E,onMouseOver:L,onMouseLeave:N})}var $m=(t,e)=>({var:t,varRef:e?`var(${t}, ${e})`:`var(${t})`}),Vo={arrowShadowColor:$m("--popper-arrow-shadow-color"),arrowSize:$m("--popper-arrow-size","8px"),arrowSizeHalf:$m("--popper-arrow-size-half"),arrowBg:$m("--popper-arrow-bg"),transformOrigin:$m("--popper-transform-origin"),arrowOffset:$m("--popper-arrow-offset")};function pTe(t){if(t.includes("top"))return"1px 1px 0px 0 var(--popper-arrow-shadow-color)";if(t.includes("bottom"))return"-1px -1px 0px 0 var(--popper-arrow-shadow-color)";if(t.includes("right"))return"-1px 1px 0px 0 var(--popper-arrow-shadow-color)";if(t.includes("left"))return"1px -1px 0px 0 var(--popper-arrow-shadow-color)"}var mTe={top:"bottom center","top-start":"bottom left","top-end":"bottom right",bottom:"top center","bottom-start":"top left","bottom-end":"top right",left:"right center","left-start":"right top","left-end":"right bottom",right:"left center","right-start":"left top","right-end":"left bottom"},gTe=t=>mTe[t],K6={scroll:!0,resize:!0};function vTe(t){let e;return typeof t=="object"?e={enabled:!0,options:j(j({},K6),t)}:e={enabled:t,options:K6},e}var yTe={name:"matchWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:t})=>{t.styles.popper.width=`${t.rects.reference.width}px`},effect:({state:t})=>()=>{const e=t.elements.reference;t.elements.popper.style.width=`${e.offsetWidth}px`}},xTe={name:"transformOrigin",enabled:!0,phase:"write",fn:({state:t})=>{Y6(t)},effect:({state:t})=>()=>{Y6(t)}},Y6=t=>{t.elements.popper.style.setProperty(Vo.transformOrigin.var,gTe(t.placement))},bTe={name:"positionArrow",enabled:!0,phase:"afterWrite",fn:({state:t})=>{wTe(t)}},wTe=t=>{var e;if(!t.placement)return;const n=STe(t.placement);if((e=t.elements)!=null&&e.arrow&&n){Object.assign(t.elements.arrow.style,{[n.property]:n.value,width:Vo.arrowSize.varRef,height:Vo.arrowSize.varRef,zIndex:-1});const r={[Vo.arrowSizeHalf.var]:`calc(${Vo.arrowSize.varRef} / 2 - 1px)`,[Vo.arrowOffset.var]:`calc(${Vo.arrowSizeHalf.varRef} * -1)`};for(const i in r)t.elements.arrow.style.setProperty(i,r[i])}},STe=t=>{if(t.startsWith("top"))return{property:"bottom",value:Vo.arrowOffset.varRef};if(t.startsWith("bottom"))return{property:"top",value:Vo.arrowOffset.varRef};if(t.startsWith("left"))return{property:"right",value:Vo.arrowOffset.varRef};if(t.startsWith("right"))return{property:"left",value:Vo.arrowOffset.varRef}},_Te={name:"innerArrow",enabled:!0,phase:"main",requires:["arrow"],fn:({state:t})=>{X6(t)},effect:({state:t})=>()=>{X6(t)}},X6=t=>{if(!t.elements.arrow)return;const e=t.elements.arrow.querySelector("[data-popper-arrow-inner]");if(!e)return;const n=pTe(t.placement);n&&e.style.setProperty("--popper-arrow-default-shadow",n),Object.assign(e.style,{transform:"rotate(45deg)",background:Vo.arrowBg.varRef,top:0,left:0,width:"100%",height:"100%",position:"absolute",zIndex:"inherit",boxShadow:"var(--popper-arrow-shadow, var(--popper-arrow-default-shadow))"})},ETe={"start-start":{ltr:"left-start",rtl:"right-start"},"start-end":{ltr:"left-end",rtl:"right-end"},"end-start":{ltr:"right-start",rtl:"left-start"},"end-end":{ltr:"right-end",rtl:"left-end"},start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}},CTe={"auto-start":"auto-end","auto-end":"auto-start","top-start":"top-end","top-end":"top-start","bottom-start":"bottom-end","bottom-end":"bottom-start"};function ATe(t,e="ltr"){var n,r;const i=((n=ETe[t])==null?void 0:n[e])||t;return e==="ltr"?i:(r=CTe[t])!=null?r:i}var sa="top",wl="bottom",Sl="right",aa="left",VN="auto",yw=[sa,wl,Sl,aa],Rv="start",yb="end",TTe="clippingParents",GY="viewport",ry="popper",MTe="reference",Q6=yw.reduce(function(t,e){return t.concat([e+"-"+Rv,e+"-"+yb])},[]),qY=[].concat(yw,[VN]).reduce(function(t,e){return t.concat([e,e+"-"+Rv,e+"-"+yb])},[]),PTe="beforeRead",DTe="read",RTe="afterRead",ITe="beforeMain",kTe="main",FTe="afterMain",OTe="beforeWrite",NTe="write",LTe="afterWrite",BTe=[PTe,DTe,RTe,ITe,kTe,FTe,OTe,NTe,LTe];function iu(t){return t?(t.nodeName||"").toLowerCase():null}function Oa(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Wp(t){var e=Oa(t).Element;return t instanceof e||t instanceof Element}function gl(t){var e=Oa(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function WN(t){if(typeof ShadowRoot=="undefined")return!1;var e=Oa(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function jTe(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},o=e.elements[n];!gl(o)||!iu(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var a=i[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function UTe(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},s=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=s.reduce(function(l,c){return l[c]="",l},{});!gl(i)||!iu(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}const zTe={name:"applyStyles",enabled:!0,phase:"write",fn:jTe,effect:UTe,requires:["computeStyles"]};function Wc(t){return t.split("-")[0]}var Tp=Math.max,gC=Math.min,Iv=Math.round;function kI(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function KY(){return!/^((?!chrome|android).)*safari/i.test(kI())}function kv(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,o=1;e&&gl(t)&&(i=t.offsetWidth>0&&Iv(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Iv(r.height)/t.offsetHeight||1);var s=Wp(t)?Oa(t):window,a=s.visualViewport,l=!KY()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,u=(r.top+(l&&a?a.offsetTop:0))/o,d=r.width/i,f=r.height/o;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c,x:c,y:u}}function $N(t){var e=kv(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function YY(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&WN(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function gd(t){return Oa(t).getComputedStyle(t)}function VTe(t){return["table","td","th"].indexOf(iu(t))>=0}function ch(t){return((Wp(t)?t.ownerDocument:t.document)||window.document).documentElement}function oT(t){return iu(t)==="html"?t:t.assignedSlot||t.parentNode||(WN(t)?t.host:null)||ch(t)}function Z6(t){return!gl(t)||gd(t).position==="fixed"?null:t.offsetParent}function WTe(t){var e=/firefox/i.test(kI()),n=/Trident/i.test(kI());if(n&&gl(t)){var r=gd(t);if(r.position==="fixed")return null}var i=oT(t);for(WN(i)&&(i=i.host);gl(i)&&["html","body"].indexOf(iu(i))<0;){var o=gd(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function xw(t){for(var e=Oa(t),n=Z6(t);n&&VTe(n)&&gd(n).position==="static";)n=Z6(n);return n&&(iu(n)==="html"||iu(n)==="body"&&gd(n).position==="static")?e:n||WTe(t)||e}function HN(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function mx(t,e,n){return Tp(t,gC(e,n))}function $Te(t,e,n){var r=mx(t,e,n);return r>n?n:r}function XY(){return{top:0,right:0,bottom:0,left:0}}function QY(t){return Object.assign({},XY(),t)}function ZY(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var HTe=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,QY(typeof e!="number"?e:ZY(e,yw))};function GTe(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=Wc(n.placement),l=HN(a),c=[aa,Sl].indexOf(a)>=0,u=c?"height":"width";if(!(!o||!s)){var d=HTe(i.padding,n),f=$N(o),p=l==="y"?sa:aa,b=l==="y"?wl:Sl,v=n.rects.reference[u]+n.rects.reference[l]-s[l]-n.rects.popper[u],m=s[l]-n.rects.reference[l],g=xw(o),x=g?l==="y"?g.clientHeight||0:g.clientWidth||0:0,w=v/2-m/2,S=d[p],P=x-f[u]-d[b],I=x/2-f[u]/2+w,M=mx(S,I,P),D=l;n.modifiersData[r]=(e={},e[D]=M,e.centerOffset=M-I,e)}}function qTe(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||YY(e.elements.popper,i)&&(e.elements.arrow=i))}const KTe={name:"arrow",enabled:!0,phase:"main",fn:GTe,effect:qTe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Fv(t){return t.split("-")[1]}var YTe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function XTe(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Iv(n*i)/i||0,y:Iv(r*i)/i||0}}function J6(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,s=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,f=s.x,p=f===void 0?0:f,b=s.y,v=b===void 0?0:b,m=typeof u=="function"?u({x:p,y:v}):{x:p,y:v};p=m.x,v=m.y;var g=s.hasOwnProperty("x"),x=s.hasOwnProperty("y"),w=aa,S=sa,P=window;if(c){var I=xw(n),M="clientHeight",D="clientWidth";if(I===Oa(n)&&(I=ch(n),gd(I).position!=="static"&&a==="absolute"&&(M="scrollHeight",D="scrollWidth")),I=I,i===sa||(i===aa||i===Sl)&&o===yb){S=wl;var E=d&&I===P&&P.visualViewport?P.visualViewport.height:I[M];v-=E-r.height,v*=l?1:-1}if(i===aa||(i===sa||i===wl)&&o===yb){w=Sl;var _=d&&I===P&&P.visualViewport?P.visualViewport.width:I[D];p-=_-r.width,p*=l?1:-1}}var A=Object.assign({position:a},c&&YTe),R=u===!0?XTe({x:p,y:v},Oa(n)):{x:p,y:v};if(p=R.x,v=R.y,l){var F;return Object.assign({},A,(F={},F[S]=x?"0":"",F[w]=g?"0":"",F.transform=(P.devicePixelRatio||1)<=1?"translate("+p+"px, "+v+"px)":"translate3d("+p+"px, "+v+"px, 0)",F))}return Object.assign({},A,(e={},e[S]=x?v+"px":"",e[w]=g?p+"px":"",e.transform="",e))}function QTe(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,s=o===void 0?!0:o,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:Wc(e.placement),variation:Fv(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,J6(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,J6(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const ZTe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:QTe,data:{}};var yS={passive:!0};function JTe(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=i===void 0?!0:i,s=r.resize,a=s===void 0?!0:s,l=Oa(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach(function(u){u.addEventListener("scroll",n.update,yS)}),a&&l.addEventListener("resize",n.update,yS),function(){o&&c.forEach(function(u){u.removeEventListener("scroll",n.update,yS)}),a&&l.removeEventListener("resize",n.update,yS)}}const e2e={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:JTe,data:{}};var t2e={left:"right",right:"left",bottom:"top",top:"bottom"};function q_(t){return t.replace(/left|right|bottom|top/g,function(e){return t2e[e]})}var n2e={start:"end",end:"start"};function ez(t){return t.replace(/start|end/g,function(e){return n2e[e]})}function GN(t){var e=Oa(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function qN(t){return kv(ch(t)).left+GN(t).scrollLeft}function r2e(t,e){var n=Oa(t),r=ch(t),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;var c=KY();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a+qN(t),y:l}}function i2e(t){var e,n=ch(t),r=GN(t),i=(e=t.ownerDocument)==null?void 0:e.body,o=Tp(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Tp(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+qN(t),l=-r.scrollTop;return gd(i||n).direction==="rtl"&&(a+=Tp(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}function KN(t){var e=gd(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function JY(t){return["html","body","#document"].indexOf(iu(t))>=0?t.ownerDocument.body:gl(t)&&KN(t)?t:JY(oT(t))}function gx(t,e){var n;e===void 0&&(e=[]);var r=JY(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),o=Oa(r),s=i?[o].concat(o.visualViewport||[],KN(r)?r:[]):r,a=e.concat(s);return i?a:a.concat(gx(oT(s)))}function FI(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function o2e(t,e){var n=kv(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function tz(t,e,n){return e===GY?FI(r2e(t,n)):Wp(e)?o2e(e,n):FI(i2e(ch(t)))}function s2e(t){var e=gx(oT(t)),n=["absolute","fixed"].indexOf(gd(t).position)>=0,r=n&&gl(t)?xw(t):t;return Wp(r)?e.filter(function(i){return Wp(i)&&YY(i,r)&&iu(i)!=="body"}):[]}function a2e(t,e,n,r){var i=e==="clippingParents"?s2e(t):[].concat(e),o=[].concat(i,[n]),s=o[0],a=o.reduce(function(l,c){var u=tz(t,c,r);return l.top=Tp(u.top,l.top),l.right=gC(u.right,l.right),l.bottom=gC(u.bottom,l.bottom),l.left=Tp(u.left,l.left),l},tz(t,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function eX(t){var e=t.reference,n=t.element,r=t.placement,i=r?Wc(r):null,o=r?Fv(r):null,s=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case sa:l={x:s,y:e.y-n.height};break;case wl:l={x:s,y:e.y+e.height};break;case Sl:l={x:e.x+e.width,y:a};break;case aa:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?HN(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(o){case Rv:l[c]=l[c]-(e[u]/2-n[u]/2);break;case yb:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function xb(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,o=n.strategy,s=o===void 0?t.strategy:o,a=n.boundary,l=a===void 0?TTe:a,c=n.rootBoundary,u=c===void 0?GY:c,d=n.elementContext,f=d===void 0?ry:d,p=n.altBoundary,b=p===void 0?!1:p,v=n.padding,m=v===void 0?0:v,g=QY(typeof m!="number"?m:ZY(m,yw)),x=f===ry?MTe:ry,w=t.rects.popper,S=t.elements[b?x:f],P=a2e(Wp(S)?S:S.contextElement||ch(t.elements.popper),l,u,s),I=kv(t.elements.reference),M=eX({reference:I,element:w,placement:i}),D=FI(Object.assign({},w,M)),E=f===ry?D:I,_={top:P.top-E.top+g.top,bottom:E.bottom-P.bottom+g.bottom,left:P.left-E.left+g.left,right:E.right-P.right+g.right},A=t.modifiersData.offset;if(f===ry&&A){var R=A[i];Object.keys(_).forEach(function(F){var L=[Sl,wl].indexOf(F)>=0?1:-1,N=[sa,wl].indexOf(F)>=0?"y":"x";_[F]+=R[N]*L})}return _}function l2e(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?qY:l,u=Fv(r),d=u?a?Q6:Q6.filter(function(b){return Fv(b)===u}):yw,f=d.filter(function(b){return c.indexOf(b)>=0});f.length===0&&(f=d);var p=f.reduce(function(b,v){return b[v]=xb(t,{placement:v,boundary:i,rootBoundary:o,padding:s})[Wc(v)],b},{});return Object.keys(p).sort(function(b,v){return p[b]-p[v]})}function c2e(t){if(Wc(t)===VN)return[];var e=q_(t);return[ez(t),e,ez(e)]}function u2e(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!0:s,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,p=n.flipVariations,b=p===void 0?!0:p,v=n.allowedAutoPlacements,m=e.options.placement,g=Wc(m),x=g===m,w=l||(x||!b?[q_(m)]:c2e(m)),S=[m].concat(w).reduce(function(Z,ee){return Z.concat(Wc(ee)===VN?l2e(e,{placement:ee,boundary:u,rootBoundary:d,padding:c,flipVariations:b,allowedAutoPlacements:v}):ee)},[]),P=e.rects.reference,I=e.rects.popper,M=new Map,D=!0,E=S[0],_=0;_<S.length;_++){var A=S[_],R=Wc(A),F=Fv(A)===Rv,L=[sa,wl].indexOf(R)>=0,N=L?"width":"height",U=xb(e,{placement:A,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),$=L?F?Sl:aa:F?wl:sa;P[N]>I[N]&&($=q_($));var B=q_($),H=[];if(o&&H.push(U[R]<=0),a&&H.push(U[$]<=0,U[B]<=0),H.every(function(Z){return Z})){E=A,D=!1;break}M.set(A,H)}if(D)for(var q=b?3:1,z=function(ee){var V=S.find(function(J){var oe=M.get(J);if(oe)return oe.slice(0,ee).every(function(ne){return ne})});if(V)return E=V,"break"},G=q;G>0;G--){var K=z(G);if(K==="break")break}e.placement!==E&&(e.modifiersData[r]._skip=!0,e.placement=E,e.reset=!0)}}const d2e={name:"flip",enabled:!0,phase:"main",fn:u2e,requiresIfExists:["offset"],data:{_skip:!1}};function nz(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function rz(t){return[sa,Sl,wl,aa].some(function(e){return t[e]>=0})}function f2e(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=xb(e,{elementContext:"reference"}),a=xb(e,{altBoundary:!0}),l=nz(s,r),c=nz(a,i,o),u=rz(l),d=rz(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const h2e={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:f2e};function p2e(t,e,n){var r=Wc(t),i=[aa,sa].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[aa,Sl].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function m2e(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=i===void 0?[0,0]:i,s=qY.reduce(function(u,d){return u[d]=p2e(d,e.rects,o),u},{}),a=s[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=s}const g2e={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:m2e};function v2e(t){var e=t.state,n=t.name;e.modifiersData[n]=eX({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const y2e={name:"popperOffsets",enabled:!0,phase:"read",fn:v2e,data:{}};function x2e(t){return t==="x"?"y":"x"}function b2e(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!1:s,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,f=n.tether,p=f===void 0?!0:f,b=n.tetherOffset,v=b===void 0?0:b,m=xb(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),g=Wc(e.placement),x=Fv(e.placement),w=!x,S=HN(g),P=x2e(S),I=e.modifiersData.popperOffsets,M=e.rects.reference,D=e.rects.popper,E=typeof v=="function"?v(Object.assign({},e.rects,{placement:e.placement})):v,_=typeof E=="number"?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),A=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,R={x:0,y:0};if(I){if(o){var F,L=S==="y"?sa:aa,N=S==="y"?wl:Sl,U=S==="y"?"height":"width",$=I[S],B=$+m[L],H=$-m[N],q=p?-D[U]/2:0,z=x===Rv?M[U]:D[U],G=x===Rv?-D[U]:-M[U],K=e.elements.arrow,Z=p&&K?$N(K):{width:0,height:0},ee=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:XY(),V=ee[L],J=ee[N],oe=mx(0,M[U],Z[U]),ne=w?M[U]/2-q-oe-V-_.mainAxis:z-oe-V-_.mainAxis,pe=w?-M[U]/2+q+oe+J+_.mainAxis:G+oe+J+_.mainAxis,ye=e.elements.arrow&&xw(e.elements.arrow),Ce=ye?S==="y"?ye.clientTop||0:ye.clientLeft||0:0,_e=(F=A==null?void 0:A[S])!=null?F:0,ce=$+ne-_e-Ce,Be=$+pe-_e,de=mx(p?gC(B,ce):B,$,p?Tp(H,Be):H);I[S]=de,R[S]=de-$}if(a){var me,ie=S==="x"?sa:aa,ae=S==="x"?wl:Sl,ge=I[P],X=P==="y"?"height":"width",W=ge+m[ie],ve=ge-m[ae],ue=[sa,aa].indexOf(g)!==-1,Me=(me=A==null?void 0:A[P])!=null?me:0,Ae=ue?W:ge-M[X]-D[X]-Me+_.altAxis,Ne=ue?ge+M[X]+D[X]-Me-_.altAxis:ve,Re=p&&ue?$Te(Ae,ge,Ne):mx(p?Ae:W,ge,p?Ne:ve);I[P]=Re,R[P]=Re-ge}e.modifiersData[r]=R}}const w2e={name:"preventOverflow",enabled:!0,phase:"main",fn:b2e,requiresIfExists:["offset"]};function S2e(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function _2e(t){return t===Oa(t)||!gl(t)?GN(t):S2e(t)}function E2e(t){var e=t.getBoundingClientRect(),n=Iv(e.width)/t.offsetWidth||1,r=Iv(e.height)/t.offsetHeight||1;return n!==1||r!==1}function C2e(t,e,n){n===void 0&&(n=!1);var r=gl(e),i=gl(e)&&E2e(e),o=ch(e),s=kv(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((iu(e)!=="body"||KN(o))&&(a=_2e(e)),gl(e)?(l=kv(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=qN(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function A2e(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function i(o){n.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||i(o)}),r}function T2e(t){var e=A2e(t);return BTe.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function M2e(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function P2e(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var iz={placement:"bottom",modifiers:[],strategy:"absolute"};function oz(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function D2e(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,o=i===void 0?iz:i;return function(a,l,c){c===void 0&&(c=o);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},iz,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,p={state:u,setOptions:function(g){var x=typeof g=="function"?g(u.options):g;v(),u.options=Object.assign({},o,u.options,x),u.scrollParents={reference:Wp(a)?gx(a):a.contextElement?gx(a.contextElement):[],popper:gx(l)};var w=T2e(P2e([].concat(r,u.options.modifiers)));return u.orderedModifiers=w.filter(function(S){return S.enabled}),b(),p.update()},forceUpdate:function(){if(!f){var g=u.elements,x=g.reference,w=g.popper;if(oz(x,w)){u.rects={reference:C2e(x,xw(w),u.options.strategy==="fixed"),popper:$N(w)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(_){return u.modifiersData[_.name]=Object.assign({},_.data)});for(var S=0;S<u.orderedModifiers.length;S++){if(u.reset===!0){u.reset=!1,S=-1;continue}var P=u.orderedModifiers[S],I=P.fn,M=P.options,D=M===void 0?{}:M,E=P.name;typeof I=="function"&&(u=I({state:u,options:D,name:E,instance:p})||u)}}}},update:M2e(function(){return new Promise(function(m){p.forceUpdate(),m(u)})}),destroy:function(){v(),f=!0}};if(!oz(a,l))return p;p.setOptions(c).then(function(m){!f&&c.onFirstUpdate&&c.onFirstUpdate(m)});function b(){u.orderedModifiers.forEach(function(m){var g=m.name,x=m.options,w=x===void 0?{}:x,S=m.effect;if(typeof S=="function"){var P=S({state:u,name:g,instance:p,options:w}),I=function(){};d.push(P||I)}})}function v(){d.forEach(function(m){return m()}),d=[]}return p}}var R2e=[e2e,y2e,ZTe,zTe,g2e,d2e,w2e,KTe,h2e],I2e=D2e({defaultModifiers:R2e});function k2e(t={}){const{enabled:e=!0,modifiers:n,placement:r="bottom",strategy:i="absolute",arrowPadding:o=8,eventListeners:s=!0,offset:a,gutter:l=8,flip:c=!0,boundary:u="clippingParents",preventOverflow:d=!0,matchWidth:f,direction:p="ltr"}=t,b=T.useRef(null),v=T.useRef(null),m=T.useRef(null),g=ATe(r,p),x=T.useRef(()=>{}),w=T.useCallback(()=>{var _;!e||!b.current||!v.current||((_=x.current)==null||_.call(x),m.current=I2e(b.current,v.current,{placement:g,modifiers:[_Te,bTe,xTe,se(j({},yTe),{enabled:!!f}),j({name:"eventListeners"},vTe(s)),{name:"arrow",options:{padding:o}},{name:"offset",options:{offset:a!=null?a:[0,l]}},{name:"flip",enabled:!!c,options:{padding:8}},{name:"preventOverflow",enabled:!!d,options:{boundary:u}},...n!=null?n:[]],strategy:i}),m.current.forceUpdate(),x.current=m.current.destroy)},[g,e,n,f,s,o,a,l,c,d,u,i]);T.useEffect(()=>()=>{var _;!b.current&&!v.current&&((_=m.current)==null||_.destroy(),m.current=null)},[]);const S=T.useCallback(_=>{b.current=_,w()},[w]),P=T.useCallback((_={},A=null)=>se(j({},_),{ref:ko(S,A)}),[S]),I=T.useCallback(_=>{v.current=_,w()},[w]),M=T.useCallback((_={},A=null)=>se(j({},_),{ref:ko(I,A),style:se(j({},_.style),{position:i,minWidth:f?void 0:"max-content",inset:"0 auto auto 0"})}),[i,I,f]),D=T.useCallback((_={},A=null)=>{const $=_,{size:R,shadowColor:F,bg:L,style:N}=$,U=Dt($,["size","shadowColor","bg","style"]);return se(j({},U),{ref:A,"data-popper-arrow":"",style:F2e(_)})},[]),E=T.useCallback((_={},A=null)=>se(j({},_),{ref:A,"data-popper-arrow-inner":""}),[]);return{update(){var _;(_=m.current)==null||_.update()},forceUpdate(){var _;(_=m.current)==null||_.forceUpdate()},transformOrigin:Vo.transformOrigin.varRef,referenceRef:S,popperRef:I,getPopperProps:M,getArrowProps:D,getArrowInnerProps:E,getReferenceProps:P}}function F2e(t){const{size:e,shadowColor:n,bg:r,style:i}=t,o=se(j({},i),{position:"absolute"});return e&&(o["--popper-arrow-size"]=e),n&&(o["--popper-arrow-shadow-color"]=n),r&&(o["--popper-arrow-bg"]=r),o}function O2e(t={}){const{onClose:e,onOpen:n,isOpen:r,id:i}=t,o=Wo(n),s=Wo(e),[a,l]=T.useState(t.defaultIsOpen||!1),c=r!==void 0?r:a,u=r!==void 0,d=T.useId(),f=i!=null?i:`disclosure-${d}`,p=T.useCallback(()=>{u||l(!1),s==null||s()},[u,s]),b=T.useCallback(()=>{u||l(!0),o==null||o()},[u,o]),v=T.useCallback(()=>{c?p():b()},[c,b,p]);function m(x={}){return se(j({},x),{"aria-expanded":c,"aria-controls":f,onClick(w){var S;(S=x.onClick)==null||S.call(x,w),v()}})}function g(x={}){return se(j({},x),{hidden:!c,id:f})}return{isOpen:c,onOpen:b,onClose:p,onToggle:v,isControlled:u,getButtonProps:m,getDisclosureProps:g}}function N2e(t){const{wasSelected:e,enabled:n,isSelected:r,mode:i="unmount"}=t;return!!(!n||r||i==="keepMounted"&&e)}var L2e={slideInBottom:se(j({},ky),{custom:{offsetY:16,reverse:!0}}),slideInRight:se(j({},ky),{custom:{offsetX:16,reverse:!0}}),slideInTop:se(j({},ky),{custom:{offsetY:-16,reverse:!0}}),slideInLeft:se(j({},ky),{custom:{offsetX:-16,reverse:!0}}),scale:se(j({},eY),{custom:{initialScale:.95,reverse:!0}}),none:{}},B2e=$t(ml.section),j2e=t=>L2e[t||"none"],tX=T.forwardRef((t,e)=>{const o=t,{preset:n,motionProps:r=j2e(n)}=o,i=Dt(o,["preset","motionProps"]);return h.jsx(B2e,j(j({ref:e},r),i))});tX.displayName="ModalTransition";var U2e=Object.defineProperty,z2e=(t,e,n)=>e in t?U2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,V2e=(t,e,n)=>(z2e(t,e+"",n),n),W2e=class{constructor(){V2e(this,"modals"),this.modals=new Map}add(t){return this.modals.set(t,this.modals.size+1),this.modals.size}remove(t){this.modals.delete(t)}isTopModal(t){return t?this.modals.get(t)===this.modals.size:!1}},OI=new W2e;function nX(t,e){const[n,r]=T.useState(0);return T.useEffect(()=>{const i=t.current;if(i){if(e){const o=OI.add(i);r(o)}return()=>{OI.remove(i),r(0)}}},[e,t]),n}var $2e=function(t){if(typeof document=="undefined")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Hm=new WeakMap,xS=new WeakMap,bS={},yP=0,rX=function(t){return t&&(t.host||rX(t.parentNode))},H2e=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=rX(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},G2e=function(t,e,n,r){var i=H2e(e,Array.isArray(t)?t:[t]);bS[n]||(bS[n]=new WeakMap);var o=bS[n],s=[],a=new Set,l=new Set(i),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(r),b=p!==null&&p!=="false",v=(Hm.get(f)||0)+1,m=(o.get(f)||0)+1;Hm.set(f,v),o.set(f,m),s.push(f),v===1&&b&&xS.set(f,!0),m===1&&f.setAttribute(n,"true"),b||f.setAttribute(r,"true")}catch(g){console.error("aria-hidden: cannot operate on ",f,g)}})};return u(e),a.clear(),yP++,function(){s.forEach(function(d){var f=Hm.get(d)-1,p=o.get(d)-1;Hm.set(d,f),o.set(d,p),f||(xS.has(d)||d.removeAttribute(r),xS.delete(d)),p||d.removeAttribute(n)}),yP--,yP||(Hm=new WeakMap,Hm=new WeakMap,xS=new WeakMap,bS={})}},q2e=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=$2e(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),G2e(r,i,n,"aria-hidden")):function(){return null}};function K2e(t){const{isOpen:e,onClose:n,id:r,closeOnOverlayClick:i=!0,closeOnEsc:o=!0,useInert:s=!0,onOverlayClick:a,onEsc:l}=t,c=T.useRef(null),u=T.useRef(null),[d,f,p]=X2e(r,"chakra-modal","chakra-modal--header","chakra-modal--body");Y2e(c,e&&s);const b=nX(c,e),v=T.useRef(null),m=T.useCallback(E=>{v.current=E.target},[]),g=T.useCallback(E=>{E.key==="Escape"&&(E.stopPropagation(),o&&(n==null||n()),l==null||l())},[o,n,l]),[x,w]=T.useState(!1),[S,P]=T.useState(!1),I=T.useCallback((E={},_=null)=>se(j({role:"dialog"},E),{ref:ko(_,c),id:d,tabIndex:-1,"aria-modal":!0,"aria-labelledby":x?f:void 0,"aria-describedby":S?p:void 0,onClick:Nn(E.onClick,A=>A.stopPropagation())}),[p,S,d,f,x]),M=T.useCallback(E=>{E.stopPropagation(),v.current===E.target&&OI.isTopModal(c.current)&&(i&&(n==null||n()),a==null||a())},[n,i,a]),D=T.useCallback((E={},_=null)=>se(j({},E),{ref:ko(_,u),onClick:Nn(E.onClick,M),onKeyDown:Nn(E.onKeyDown,g),onMouseDown:Nn(E.onMouseDown,m)}),[g,m,M]);return{isOpen:e,onClose:n,headerId:f,bodyId:p,setBodyMounted:P,setHeaderMounted:w,dialogRef:c,overlayRef:u,getDialogProps:I,getDialogContainerProps:D,index:b}}function Y2e(t,e){const n=t.current;T.useEffect(()=>{if(!(!t.current||!e))return q2e(t.current)},[e,t,n])}function X2e(t,...e){const n=T.useId(),r=t||n;return T.useMemo(()=>e.map(i=>`${i}-${r}`),[r,e])}var[Q2e,s0]=Ai({name:"ModalStylesContext",errorMessage:`useModalStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Modal />" `}),[Z2e,$p]=Ai({strict:!0,name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap modal components in `<Modal />`"}),$c=t=>{const e=j({scrollBehavior:"outside",autoFocus:!0,trapFocus:!0,returnFocusOnClose:!0,blockScrollOnMount:!0,allowPinchZoom:!1,motionPreset:"scale",lockFocusAcrossFrames:!0},t),{portalProps:n,children:r,autoFocus:i,trapFocus:o,initialFocusRef:s,finalFocusRef:a,returnFocusOnClose:l,blockScrollOnMount:c,allowPinchZoom:u,preserveScrollBarGap:d,motionPreset:f,lockFocusAcrossFrames:p,onCloseComplete:b}=e,v=js("Modal",e),m=K2e(e),g=se(j({},m),{autoFocus:i,trapFocus:o,initialFocusRef:s,finalFocusRef:a,returnFocusOnClose:l,blockScrollOnMount:c,allowPinchZoom:u,preserveScrollBarGap:d,motionPreset:f,lockFocusAcrossFrames:p});return h.jsx(Z2e,{value:g,children:h.jsx(Q2e,{value:v,children:h.jsx(Vc,{onExitComplete:b,children:g.isOpen&&h.jsx(o0,se(j({},n),{children:r}))})})})};$c.displayName="Modal";var K_="right-scroll-bar-position",Y_="width-before-scroll-bar",J2e="with-scroll-bars-hidden",eMe="--removed-body-scroll-bar-size",iX=dY(),xP=function(){},sT=T.forwardRef(function(t,e){var n=T.useRef(null),r=T.useState({onScrollCapture:xP,onWheelCapture:xP,onTouchMoveCapture:xP}),i=r[0],o=r[1],s=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,p=t.noIsolation,b=t.inert,v=t.allowPinchZoom,m=t.as,g=m===void 0?"div":m,x=t.gapMode,w=vw(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,P=lY([n,e]),I=Oc(Oc({},w),i);return T.createElement(T.Fragment,null,u&&T.createElement(S,{sideCar:iX,removeScrollBar:c,shards:d,noIsolation:p,inert:b,setCallbacks:o,allowPinchZoom:!!v,lockRef:n,gapMode:x}),s?T.cloneElement(T.Children.only(a),Oc(Oc({},I),{ref:P})):T.createElement(g,Oc({},I,{className:l,ref:P}),a))});sT.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};sT.classNames={fullWidth:Y_,zeroRight:K_};var tMe=function(){if(typeof __webpack_nonce__!="undefined")return __webpack_nonce__};function nMe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=tMe();return e&&t.setAttribute("nonce",e),t}function rMe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function iMe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var oMe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=nMe())&&(rMe(e,n),iMe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},sMe=function(){var t=oMe();return function(e,n){T.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},oX=function(){var t=sMe(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},aMe={left:0,top:0,right:0,gap:0},bP=function(t){return parseInt(t||"",10)||0},lMe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[bP(n),bP(r),bP(i)]},cMe=function(t){if(t===void 0&&(t="margin"),typeof window=="undefined")return aMe;var e=lMe(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},uMe=oX(),iv="data-scroll-locked",dMe=function(t,e,n,r){var i=t.left,o=t.top,s=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(J2e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(iv,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(K_,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Y_,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(K_," .").concat(K_,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Y_," .").concat(Y_,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(iv,`] {
    `).concat(eMe,": ").concat(a,`px;
  }
`)},sz=function(){var t=parseInt(document.body.getAttribute(iv)||"0",10);return isFinite(t)?t:0},fMe=function(){T.useEffect(function(){return document.body.setAttribute(iv,(sz()+1).toString()),function(){var t=sz()-1;t<=0?document.body.removeAttribute(iv):document.body.setAttribute(iv,t.toString())}},[])},hMe=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;fMe();var o=T.useMemo(function(){return cMe(i)},[i]);return T.createElement(uMe,{styles:dMe(o,!e,i,n?"":"!important")})},NI=!1;if(typeof window!="undefined")try{var wS=Object.defineProperty({},"passive",{get:function(){return NI=!0,!0}});window.addEventListener("test",wS,wS),window.removeEventListener("test",wS,wS)}catch(t){NI=!1}var Gm=NI?{passive:!1}:!1,pMe=function(t){return t.tagName==="TEXTAREA"},sX=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!pMe(t)&&n[e]==="visible")},mMe=function(t){return sX(t,"overflowY")},gMe=function(t){return sX(t,"overflowX")},az=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot!="undefined"&&r instanceof ShadowRoot&&(r=r.host);var i=aX(t,r);if(i){var o=lX(t,r),s=o[1],a=o[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},vMe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},yMe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},aX=function(t,e){return t==="v"?mMe(e):gMe(e)},lX=function(t,e){return t==="v"?vMe(e):yMe(e)},xMe=function(t,e){return t==="h"&&e==="rtl"?-1:1},bMe=function(t,e,n,r,i){var o=xMe(t,window.getComputedStyle(e).direction),s=o*r,a=n.target,l=e.contains(a),c=!1,u=s>0,d=0,f=0;do{var p=lX(t,a),b=p[0],v=p[1],m=p[2],g=v-m-o*b;(b||g)&&aX(t,a)&&(d+=g,f+=b),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(c=!0),c},SS=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},lz=function(t){return[t.deltaX,t.deltaY]},cz=function(t){return t&&"current"in t?t.current:t},wMe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},SMe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},_Me=0,qm=[];function EMe(t){var e=T.useRef([]),n=T.useRef([0,0]),r=T.useRef(),i=T.useState(_Me++)[0],o=T.useState(oX)[0],s=T.useRef(t);T.useEffect(function(){s.current=t},[t]),T.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var v=RCe([t.lockRef.current],(t.shards||[]).map(cz),!0).filter(Boolean);return v.forEach(function(m){return m.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(m){return m.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=T.useCallback(function(v,m){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!s.current.allowPinchZoom;var g=SS(v),x=n.current,w="deltaX"in v?v.deltaX:x[0]-g[0],S="deltaY"in v?v.deltaY:x[1]-g[1],P,I=v.target,M=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in v&&M==="h"&&I.type==="range")return!1;var D=az(M,I);if(!D)return!0;if(D?P=M:(P=M==="v"?"h":"v",D=az(M,I)),!D)return!1;if(!r.current&&"changedTouches"in v&&(w||S)&&(r.current=P),!P)return!0;var E=r.current||P;return bMe(E,m,v,E==="h"?w:S)},[]),l=T.useCallback(function(v){var m=v;if(!(!qm.length||qm[qm.length-1]!==o)){var g="deltaY"in m?lz(m):SS(m),x=e.current.filter(function(P){return P.name===m.type&&(P.target===m.target||m.target===P.shadowParent)&&wMe(P.delta,g)})[0];if(x&&x.should){m.cancelable&&m.preventDefault();return}if(!x){var w=(s.current.shards||[]).map(cz).filter(Boolean).filter(function(P){return P.contains(m.target)}),S=w.length>0?a(m,w[0]):!s.current.noIsolation;S&&m.cancelable&&m.preventDefault()}}},[]),c=T.useCallback(function(v,m,g,x){var w={name:v,delta:m,target:g,should:x,shadowParent:CMe(g)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(S){return S!==w})},1)},[]),u=T.useCallback(function(v){n.current=SS(v),r.current=void 0},[]),d=T.useCallback(function(v){c(v.type,lz(v),v.target,a(v,t.lockRef.current))},[]),f=T.useCallback(function(v){c(v.type,SS(v),v.target,a(v,t.lockRef.current))},[]);T.useEffect(function(){return qm.push(o),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Gm),document.addEventListener("touchmove",l,Gm),document.addEventListener("touchstart",u,Gm),function(){qm=qm.filter(function(v){return v!==o}),document.removeEventListener("wheel",l,Gm),document.removeEventListener("touchmove",l,Gm),document.removeEventListener("touchstart",u,Gm)}},[]);var p=t.removeScrollBar,b=t.inert;return T.createElement(T.Fragment,null,b?T.createElement(o,{styles:SMe(i)}):null,p?T.createElement(hMe,{gapMode:t.gapMode}):null)}function CMe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const AMe=ICe(iX,EMe);var cX=T.forwardRef(function(t,e){return T.createElement(sT,Oc({},t,{ref:e,sideCar:AMe}))});cX.classNames=sT.classNames;function TMe(t){const{autoFocus:e,trapFocus:n,dialogRef:r,initialFocusRef:i,blockScrollOnMount:o,allowPinchZoom:s,finalFocusRef:a,returnFocusOnClose:l,preserveScrollBarGap:c,lockFocusAcrossFrames:u,isOpen:d}=$p(),[f,p]=kK();T.useEffect(()=>{!f&&p&&setTimeout(p)},[f,p]);const b=nX(r,d);return h.jsx(zY,{autoFocus:e,isDisabled:!n,initialFocusRef:i,finalFocusRef:a,restoreFocus:l,contentRef:r,lockFocusAcrossFrames:u,children:h.jsx(cX,{removeScrollBar:!c,allowPinchZoom:s,enabled:b===1&&o,forwardProps:!0,children:t.children})})}var Hc=Qt((t,e)=>{const m=t,{className:n,children:r,containerProps:i,motionProps:o}=m,s=Dt(m,["className","children","containerProps","motionProps"]),{getDialogProps:a,getDialogContainerProps:l}=$p(),c=a(s,e),u=l(i),d=Sn("chakra-modal__content",n),f=s0(),p=j({display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0},f.dialog),b=j({display:"flex",width:"100vw",height:"$100vh",position:"fixed",left:0,top:0},f.dialogContainer),{motionPreset:v}=$p();return h.jsx(TMe,{children:h.jsx($t.div,se(j({},u),{className:"chakra-modal__content-container",tabIndex:-1,__css:b,children:h.jsx(tX,se(j({preset:v,motionProps:o,className:d},c),{__css:p,children:r}))}))})});Hc.displayName="ModalContent";var ov=Qt((t,e)=>{const a=t,{className:n}=a,r=Dt(a,["className"]),i=Sn("chakra-modal__footer",n),o=s0(),s=j({display:"flex",alignItems:"center",justifyContent:"flex-end"},o.footer);return h.jsx($t.footer,se(j({ref:e},r),{__css:s,className:i}))});ov.displayName="ModalFooter";var Gc=Qt((t,e)=>{const c=t,{className:n}=c,r=Dt(c,["className"]),{headerId:i,setHeaderMounted:o}=$p();T.useEffect(()=>(o(!0),()=>o(!1)),[o]);const s=Sn("chakra-modal__header",n),a=s0(),l=j({flex:0},a.header);return h.jsx($t.header,se(j({ref:e,className:s,id:i},r),{__css:l}))});Gc.displayName="ModalHeader";var MMe=$t(ml.div),qc=Qt((t,e)=>{const f=t,{className:n,transition:r,motionProps:i}=f,o=Dt(f,["className","transition","motionProps"]),s=Sn("chakra-modal__overlay",n),a=s0(),l=j({pos:"fixed",left:"0",top:"0",w:"100vw",h:"100vh"},a.overlay),{motionPreset:c}=$p(),d=i||(c==="none"?{}:JK);return h.jsx(MMe,j(se(j({},d),{__css:l,ref:e,className:s}),o))});qc.displayName="ModalOverlay";var Kc=Qt((t,e)=>{const l=t,{className:n}=l,r=Dt(l,["className"]),{bodyId:i,setBodyMounted:o}=$p();T.useEffect(()=>(o(!0),()=>o(!1)),[o]);const s=Sn("chakra-modal__body",n),a=s0();return h.jsx($t.div,se(j({ref:e,className:s,id:i},r),{__css:a.body}))});Kc.displayName="ModalBody";var Yc=Qt((t,e)=>{const l=t,{onClick:n,className:r}=l,i=Dt(l,["onClick","className"]),{onClose:o}=$p(),s=Sn("chakra-modal__close-btn",r),a=s0();return h.jsx(gN,j({ref:e,__css:a.closeButton,className:s,onClick:Nn(n,c=>{c.stopPropagation(),o()})},i))});Yc.displayName="ModalCloseButton";var PMe=t=>h.jsx(Md,se(j({viewBox:"0 0 24 24"},t),{children:h.jsx("path",{fill:"currentColor",d:"M21,5H3C2.621,5,2.275,5.214,2.105,5.553C1.937,5.892,1.973,6.297,2.2,6.6l9,12 c0.188,0.252,0.485,0.4,0.8,0.4s0.611-0.148,0.8-0.4l9-12c0.228-0.303,0.264-0.708,0.095-1.047C21.725,5.214,21.379,5,21,5z"})})),DMe=t=>h.jsx(Md,se(j({viewBox:"0 0 24 24"},t),{children:h.jsx("path",{fill:"currentColor",d:"M12.8,5.4c-0.377-0.504-1.223-0.504-1.6,0l-9,12c-0.228,0.303-0.264,0.708-0.095,1.047 C2.275,18.786,2.621,19,3,19h18c0.379,0,0.725-0.214,0.895-0.553c0.169-0.339,0.133-0.744-0.095-1.047L12.8,5.4z"})}));function uz(t,e,n,r){T.useEffect(()=>{var i;if(!t.current||!r)return;const o=(i=t.current.ownerDocument.defaultView)!=null?i:window,s=Array.isArray(e)?e:[e],a=new o.MutationObserver(l=>{for(const c of l)c.type==="attributes"&&c.attributeName&&s.includes(c.attributeName)&&n(c)});return a.observe(t.current,{attributes:!0,attributeFilter:s}),()=>a.disconnect()})}function RMe(t,e){const n=Wo(t);T.useEffect(()=>{let r=null;const i=()=>n();return e!==null&&(r=window.setInterval(i,e)),()=>{r&&window.clearInterval(r)}},[e,n])}var IMe=50,dz=300;function kMe(t,e){const[n,r]=T.useState(!1),[i,o]=T.useState(null),[s,a]=T.useState(!0),l=T.useRef(null),c=()=>clearTimeout(l.current);RMe(()=>{i==="increment"&&t(),i==="decrement"&&e()},n?IMe:null);const u=T.useCallback(()=>{s&&t(),l.current=setTimeout(()=>{a(!1),r(!0),o("increment")},dz)},[t,s]),d=T.useCallback(()=>{s&&e(),l.current=setTimeout(()=>{a(!1),r(!0),o("decrement")},dz)},[e,s]),f=T.useCallback(()=>{a(!0),r(!1),c()},[]);return T.useEffect(()=>()=>c(),[]),{up:u,down:d,stop:f,isSpinning:n}}var FMe=/^[Ee0-9+\-.]$/;function OMe(t){return FMe.test(t)}function NMe(t,e){if(t.key==null)return!0;const n=t.ctrlKey||t.altKey||t.metaKey;return!(t.key.length===1)||n?!0:e(t.key)}function LMe(t={}){const Re=t,{focusInputOnChange:e=!0,clampValueOnBlur:n=!0,keepWithinRange:r=!0,min:i=Number.MIN_SAFE_INTEGER,max:o=Number.MAX_SAFE_INTEGER,step:s=1,isReadOnly:a,isDisabled:l,isRequired:c,isInvalid:u,pattern:d="[0-9]*(.[0-9]+)?",inputMode:f="decimal",allowMouseWheel:p,id:b,onChange:v,precision:m,name:g,"aria-describedby":x,"aria-label":w,"aria-labelledby":S,onFocus:P,onBlur:I,onInvalid:M,getAriaValueText:D,isValidCharacter:E,format:_,parse:A}=Re,R=Dt(Re,["focusInputOnChange","clampValueOnBlur","keepWithinRange","min","max","step","isReadOnly","isDisabled","isRequired","isInvalid","pattern","inputMode","allowMouseWheel","id","onChange","precision","name","aria-describedby","aria-label","aria-labelledby","onFocus","onBlur","onInvalid","getAriaValueText","isValidCharacter","format","parse"]),F=Wo(P),L=Wo(I),N=Wo(M),U=Wo(E!=null?E:OMe),$=Wo(D),B=ECe(t),{update:H,increment:q,decrement:z}=B,[G,K]=T.useState(!1),Z=!(a||l),ee=T.useRef(null),V=T.useRef(null),J=T.useRef(null),oe=T.useRef(null),ne=T.useCallback(Ie=>Ie.split("").filter(U).join(""),[U]),pe=T.useCallback(Ie=>{var it;return(it=A==null?void 0:A(Ie))!=null?it:Ie},[A]),ye=T.useCallback(Ie=>{var it;return((it=_==null?void 0:_(Ie))!=null?it:Ie).toString()},[_]);eC(()=>{(B.valueAsNumber>o||B.valueAsNumber<i)&&(N==null||N("rangeOverflow",ye(B.value),B.valueAsNumber))},[B.valueAsNumber,B.value,ye,N]),Ju(()=>{if(!ee.current)return;if(ee.current.value!=B.value){const it=pe(ee.current.value);B.setValue(ne(it))}},[pe,ne]);const Ce=T.useCallback((Ie=s)=>{Z&&q(Ie)},[q,Z,s]),_e=T.useCallback((Ie=s)=>{Z&&z(Ie)},[z,Z,s]),ce=kMe(Ce,_e);uz(J,"disabled",ce.stop,ce.isSpinning),uz(oe,"disabled",ce.stop,ce.isSpinning);const Be=T.useCallback(Ie=>{if(Ie.nativeEvent.isComposing)return;const Ee=pe(Ie.currentTarget.value);H(ne(Ee)),V.current={start:Ie.currentTarget.selectionStart,end:Ie.currentTarget.selectionEnd}},[H,ne,pe]),de=T.useCallback(Ie=>{var it,Ee,Le;F==null||F(Ie),V.current&&(Ie.target.selectionStart=(Ee=V.current.start)!=null?Ee:(it=Ie.currentTarget.value)==null?void 0:it.length,Ie.currentTarget.selectionEnd=(Le=V.current.end)!=null?Le:Ie.currentTarget.selectionStart)},[F]),me=T.useCallback(Ie=>{if(Ie.nativeEvent.isComposing)return;NMe(Ie,U)||Ie.preventDefault();const it=ie(Ie)*s,Ee=Ie.key,Ge={ArrowUp:()=>Ce(it),ArrowDown:()=>_e(it),Home:()=>H(i),End:()=>H(o)}[Ee];Ge&&(Ie.preventDefault(),Ge(Ie))},[U,s,Ce,_e,H,i,o]),ie=Ie=>{let it=1;return(Ie.metaKey||Ie.ctrlKey)&&(it=.1),Ie.shiftKey&&(it=10),it},ae=T.useMemo(()=>{const Ie=$==null?void 0:$(B.value);if(Ie!=null)return Ie;const it=B.value.toString();return it||void 0},[B.value,$]),ge=T.useCallback(()=>{let Ie=B.value;if(B.value==="")return;/^[eE]/.test(B.value.toString())?B.setValue(""):(B.valueAsNumber<i&&(Ie=i),B.valueAsNumber>o&&(Ie=o),B.cast(Ie))},[B,o,i]),X=T.useCallback(()=>{K(!1),n&&ge()},[n,K,ge]),W=T.useCallback(()=>{e&&requestAnimationFrame(()=>{var Ie;(Ie=ee.current)==null||Ie.focus()})},[e]),ve=T.useCallback(Ie=>{Ie.preventDefault(),ce.up(),W()},[W,ce]),ue=T.useCallback(Ie=>{Ie.preventDefault(),ce.down(),W()},[W,ce]);G_(()=>ee.current,"wheel",Ie=>{var it,Ee;const Ge=((Ee=(it=ee.current)==null?void 0:it.ownerDocument)!=null?Ee:document).activeElement===ee.current;if(!p||!Ge)return;Ie.preventDefault();const Ke=ie(Ie)*s,je=Math.sign(Ie.deltaY);je===-1?Ce(Ke):je===1&&_e(Ke)},{passive:!1});const Me=T.useCallback((Ie={},it=null)=>{const Ee=l||r&&B.isAtMax;return se(j({},Ie),{ref:ko(it,J),role:"button",tabIndex:-1,onPointerDown:Nn(Ie.onPointerDown,Le=>{Le.button!==0||Ee||ve(Le)}),onPointerLeave:Nn(Ie.onPointerLeave,ce.stop),onPointerUp:Nn(Ie.onPointerUp,ce.stop),disabled:Ee,"aria-disabled":ed(Ee)})},[B.isAtMax,r,ve,ce.stop,l]),Ae=T.useCallback((Ie={},it=null)=>{const Ee=l||r&&B.isAtMin;return se(j({},Ie),{ref:ko(it,oe),role:"button",tabIndex:-1,onPointerDown:Nn(Ie.onPointerDown,Le=>{Le.button!==0||Ee||ue(Le)}),onPointerLeave:Nn(Ie.onPointerLeave,ce.stop),onPointerUp:Nn(Ie.onPointerUp,ce.stop),disabled:Ee,"aria-disabled":ed(Ee)})},[B.isAtMin,r,ue,ce.stop,l]),Ne=T.useCallback((Ie={},it=null)=>{var Ee,Le,Ge,Ke;return se(j({name:g,inputMode:f,type:"text",pattern:d,"aria-labelledby":S,"aria-label":w,"aria-describedby":x,id:b,disabled:l},Ie),{readOnly:(Ee=Ie.readOnly)!=null?Ee:a,"aria-readonly":(Le=Ie.readOnly)!=null?Le:a,"aria-required":(Ge=Ie.required)!=null?Ge:c,required:(Ke=Ie.required)!=null?Ke:c,ref:ko(ee,it),value:ye(B.value),role:"spinbutton","aria-valuemin":i,"aria-valuemax":o,"aria-valuenow":Number.isNaN(B.valueAsNumber)?void 0:B.valueAsNumber,"aria-invalid":ed(u!=null?u:B.isOutOfRange),"aria-valuetext":ae,autoComplete:"off",autoCorrect:"off",onChange:Nn(Ie.onChange,Be),onKeyDown:Nn(Ie.onKeyDown,me),onFocus:Nn(Ie.onFocus,de,()=>K(!0)),onBlur:Nn(Ie.onBlur,L,X)})},[g,f,d,S,w,ye,x,b,l,c,a,u,B.value,B.valueAsNumber,B.isOutOfRange,i,o,ae,Be,me,de,L,X]);return{value:ye(B.value),valueAsNumber:B.valueAsNumber,isFocused:G,isDisabled:l,isReadOnly:a,getIncrementButtonProps:Me,getDecrementButtonProps:Ae,getInputProps:Ne,htmlProps:R}}var[BMe,aT]=Ai({name:"NumberInputStylesContext",errorMessage:`useNumberInputStyles returned is 'undefined'. Seems you forgot to wrap the components in "<NumberInput />" `}),[jMe,YN]=Ai({name:"NumberInputContext",errorMessage:"useNumberInputContext: `context` is undefined. Seems you forgot to wrap number-input's components within <NumberInput />"}),uX=Qt(function(e,n){const r=js("NumberInput",e),i=di(e),o=AN(i),c=LMe(o),{htmlProps:s}=c,a=Dt(c,["htmlProps"]),l=T.useMemo(()=>a,[a]);return h.jsx(jMe,{value:l,children:h.jsx(BMe,{value:r,children:h.jsx($t.div,se(j({},s),{ref:n,className:Sn("chakra-numberinput",e.className),__css:j({position:"relative",zIndex:0},r.root)}))})})});uX.displayName="NumberInput";var dX=Qt(function(e,n){const r=aT();return h.jsx($t.div,se(j({"aria-hidden":!0,ref:n},e),{__css:j({display:"flex",flexDirection:"column",position:"absolute",top:"0",insetEnd:"0px",margin:"1px",height:"calc(100% - 2px)",zIndex:1},r.stepperGroup)}))});dX.displayName="NumberInputStepper";var fX=Qt(function(e,n){const{getInputProps:r}=YN(),i=r(e,n),o=aT();return h.jsx($t.input,se(j({},i),{className:Sn("chakra-numberinput__field",e.className),__css:j({width:"100%"},o.field)}))});fX.displayName="NumberInputField";var hX=$t("div",{baseStyle:{display:"flex",justifyContent:"center",alignItems:"center",flex:1,transitionProperty:"common",transitionDuration:"normal",userSelect:"none",cursor:"pointer",lineHeight:"normal"}}),pX=Qt(function(e,n){var r;const i=aT(),{getDecrementButtonProps:o}=YN(),s=o(e,n);return h.jsx(hX,se(j({},s),{__css:i.stepper,children:(r=e.children)!=null?r:h.jsx(PMe,{})}))});pX.displayName="NumberDecrementStepper";var mX=Qt(function(e,n){var r;const{getIncrementButtonProps:i}=YN(),o=i(e,n),s=aT();return h.jsx(hX,se(j({},o),{__css:s.stepper,children:(r=e.children)!=null?r:h.jsx(DMe,{})}))});mX.displayName="NumberIncrementStepper";function UMe(t,e,n){return(t-e)*100/(n-e)}sw({"0%":{strokeDasharray:"1, 400",strokeDashoffset:"0"},"50%":{strokeDasharray:"400, 400",strokeDashoffset:"-100"},"100%":{strokeDasharray:"400, 400",strokeDashoffset:"-260"}});sw({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}});var zMe=sw({"0%":{left:"-40%"},"100%":{left:"100%"}}),VMe=sw({from:{backgroundPosition:"1rem 0"},to:{backgroundPosition:"0 0"}});function WMe(t){const{value:e=0,min:n,max:r,valueText:i,getValueText:o,isIndeterminate:s,role:a="progressbar"}=t,l=UMe(e,n,r);return{bind:{"data-indeterminate":s?"":void 0,"aria-valuemax":r,"aria-valuemin":n,"aria-valuenow":s?void 0:e,"aria-valuetext":(()=>{if(e!=null)return typeof o=="function"?o(e,l):i})(),role:a},percent:l,value:e}}var[$Me,HMe]=Ai({name:"ProgressStylesContext",errorMessage:`useProgressStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Progress />" `}),GMe=Qt((t,e)=>{const d=t,{min:n,max:r,value:i,isIndeterminate:o,role:s}=d,a=Dt(d,["min","max","value","isIndeterminate","role"]),l=WMe({value:i,min:n,max:r,isIndeterminate:o,role:s}),c=HMe(),u=j({height:"100%"},c.filledTrack);return h.jsx($t.div,se(j(j({ref:e,style:j({width:`${l.percent}%`},a.style)},l.bind),a),{__css:u}))}),gX=Qt((t,e)=>{var n;const D=di(t),{value:r,min:i=0,max:o=100,hasStripe:s,isAnimated:a,children:l,borderRadius:c,isIndeterminate:u,"aria-label":d,"aria-labelledby":f,"aria-valuetext":p,title:b,role:v}=D,m=Dt(D,["value","min","max","hasStripe","isAnimated","children","borderRadius","isIndeterminate","aria-label","aria-labelledby","aria-valuetext","title","role"]),g=js("Progress",t),x=c!=null?c:(n=g.track)==null?void 0:n.borderRadius,w={animation:`${VMe} 1s linear infinite`},I=j(j({},!u&&s&&a&&w),u&&{position:"absolute",willChange:"left",minWidth:"50%",animation:`${zMe} 1s ease infinite normal none running`}),M=j({overflow:"hidden",position:"relative"},g.track);return h.jsx($t.div,se(j({ref:e,borderRadius:x,__css:M},m),{children:h.jsxs($Me,{value:g,children:[h.jsx(GMe,{"aria-label":d,"aria-labelledby":f,"aria-valuetext":p,min:i,max:o,value:r,isIndeterminate:u,css:I,borderRadius:x,title:b,role:v}),l]})}))});gX.displayName="Progress";function qMe(t){return t&&us(t)&&us(t.target)}function KMe(t={}){const P=t,{onChange:e,value:n,defaultValue:r,name:i,isDisabled:o,isFocusable:s,isNative:a}=P,l=Dt(P,["onChange","value","defaultValue","name","isDisabled","isFocusable","isNative"]),[c,u]=T.useState(r||""),d=typeof n!="undefined",f=d?n:c,p=T.useRef(null),b=T.useCallback(()=>{const I=p.current;if(!I)return;let M="input:not(:disabled):checked";const D=I.querySelector(M);if(D){D.focus();return}M="input:not(:disabled)";const E=I.querySelector(M);E==null||E.focus()},[]),m=`radio-${T.useId()}`,g=i||m,x=T.useCallback(I=>{const M=qMe(I)?I.target.value:I;d||u(M),e==null||e(String(M))},[e,d]),w=T.useCallback((I={},M=null)=>se(j({},I),{ref:ko(M,p),role:"radiogroup"}),[]),S=T.useCallback((I={},M=null)=>{const D=a?"checked":"isChecked";return se(j({},I),{ref:M,name:g,[D]:f!=null?I.value===f:void 0,onChange(E){x(E)},"data-radiogroup":!0})},[a,g,x,f]);return{getRootProps:w,getRadioProps:S,name:g,ref:p,focus:b,setValue:u,value:f,onChange:x,isDisabled:o,isFocusable:s,htmlProps:l}}var[YMe,vX]=Ai({name:"RadioGroupContext",strict:!1}),yX=Qt((t,e)=>{const m=t,{colorScheme:n,size:r,variant:i,children:o,className:s,isDisabled:a,isFocusable:l}=m,c=Dt(m,["colorScheme","size","variant","children","className","isDisabled","isFocusable"]),{value:u,onChange:d,getRootProps:f,name:p,htmlProps:b}=KMe(c),v=T.useMemo(()=>({name:p,size:r,onChange:d,colorScheme:n,value:u,variant:i,isDisabled:a,isFocusable:l}),[p,r,d,n,u,i,a,l]);return h.jsx(YMe,{value:v,children:h.jsx($t.div,se(j({},f(b,e)),{className:Sn("chakra-radio-group",s),children:o}))})});yX.displayName="RadioGroup";var XMe={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};function QMe(t={}){const ye=t,{defaultChecked:e,isChecked:n,isFocusable:r,isDisabled:i,isReadOnly:o,isRequired:s,onChange:a,isInvalid:l,name:c,value:u,id:d,"data-radiogroup":f,"aria-describedby":p}=ye,b=Dt(ye,["defaultChecked","isChecked","isFocusable","isDisabled","isReadOnly","isRequired","onChange","isInvalid","name","value","id","data-radiogroup","aria-describedby"]),v=`radio-${T.useId()}`,m=mw(),x=!!vX()||!!f;let S=!!m&&!x?m.id:v;S=d!=null?d:S;const P=i!=null?i:m==null?void 0:m.isDisabled,I=o!=null?o:m==null?void 0:m.isReadOnly,M=s!=null?s:m==null?void 0:m.isRequired,D=l!=null?l:m==null?void 0:m.isInvalid,[E,_]=T.useState(!1),[A,R]=T.useState(!1),[F,L]=T.useState(!1),[N,U]=T.useState(!1),[$,B]=T.useState(!!e),H=typeof n!="undefined",q=H?n:$;T.useEffect(()=>iY(_),[]);const z=T.useCallback(Ce=>{if(I||P){Ce.preventDefault();return}H||B(Ce.target.checked),a==null||a(Ce)},[H,P,I,a]),G=T.useCallback(Ce=>{Ce.key===" "&&U(!0)},[U]),K=T.useCallback(Ce=>{Ce.key===" "&&U(!1)},[U]),Z=T.useCallback((Ce={},_e=null)=>se(j({},Ce),{ref:_e,"data-active":In(N),"data-hover":In(F),"data-disabled":In(P),"data-invalid":In(D),"data-checked":In(q),"data-focus":In(A),"data-focus-visible":In(A&&E),"data-readonly":In(I),"aria-hidden":!0,onMouseDown:Nn(Ce.onMouseDown,()=>U(!0)),onMouseUp:Nn(Ce.onMouseUp,()=>U(!1)),onMouseEnter:Nn(Ce.onMouseEnter,()=>L(!0)),onMouseLeave:Nn(Ce.onMouseLeave,()=>L(!1))}),[N,F,P,D,q,A,I,E]),{onFocus:ee,onBlur:V}=m!=null?m:{},J=T.useCallback((Ce={},_e=null)=>{const ce=P&&!r;return se(j({},Ce),{id:S,ref:_e,type:"radio",name:c,value:u,onChange:Nn(Ce.onChange,z),onBlur:Nn(V,Ce.onBlur,()=>R(!1)),onFocus:Nn(ee,Ce.onFocus,()=>R(!0)),onKeyDown:Nn(Ce.onKeyDown,G),onKeyUp:Nn(Ce.onKeyUp,K),checked:q,disabled:ce,readOnly:I,required:M,"aria-invalid":ed(D),"aria-disabled":ed(ce),"aria-required":ed(M),"data-readonly":In(I),"aria-describedby":p,style:XMe})},[P,r,S,c,u,z,V,ee,G,K,q,I,M,D,p]);return{state:{isInvalid:D,isFocused:A,isChecked:q,isActive:N,isHovered:F,isDisabled:P,isReadOnly:I,isRequired:M},getCheckboxProps:Z,getRadioProps:Z,getInputProps:J,getLabelProps:(Ce={},_e=null)=>se(j({},Ce),{ref:_e,onMouseDown:Nn(Ce.onMouseDown,ZMe),"data-disabled":In(P),"data-checked":In(q),"data-invalid":In(D)}),getRootProps:(Ce,_e=null)=>se(j({},Ce),{ref:_e,"data-disabled":In(P),"data-checked":In(q),"data-invalid":In(D)}),htmlProps:b}}function ZMe(t){t.preventDefault(),t.stopPropagation()}function JMe(t,e){const n={},r={};for(const[i,o]of Object.entries(t))e.includes(i)?n[i]=o:r[i]=o;return[n,r]}var LI=Qt((t,e)=>{var n;const r=vX(),{onChange:i,value:o}=t,s=js("Radio",j(j({},r),t)),N=di(t),{spacing:l="0.5rem",children:c,isDisabled:u=r==null?void 0:r.isDisabled,isFocusable:d=r==null?void 0:r.isFocusable,inputProps:f}=N,p=Dt(N,["spacing","children","isDisabled","isFocusable","inputProps"]);let b=t.isChecked;(r==null?void 0:r.value)!=null&&o!=null&&(b=r.value===o);let v=i;r!=null&&r.onChange&&o!=null&&(v=xhe(r.onChange,i));const m=(n=t==null?void 0:t.name)!=null?n:r==null?void 0:r.name,{getInputProps:g,getCheckboxProps:x,getLabelProps:w,getRootProps:S,htmlProps:P}=QMe(se(j({},p),{isChecked:b,isFocusable:d,isDisabled:u,onChange:v,name:m})),[I,M]=JMe(P,ZG),D=x(M),E=g(f,e),_=w(),A=Object.assign({},I,S()),R=j({display:"inline-flex",alignItems:"center",verticalAlign:"top",cursor:"pointer",position:"relative"},s.container),F=j({display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},s.control),L=j({userSelect:"none",marginStart:l},s.label);return h.jsxs($t.label,se(j({className:"chakra-radio"},A),{__css:R,children:[h.jsx("input",j({className:"chakra-radio__input"},E)),h.jsx($t.span,se(j({className:"chakra-radio__control"},D),{__css:F})),c&&h.jsx($t.span,se(j({className:"chakra-radio__label"},_),{__css:L,children:c}))]}))});LI.displayName="Radio";var xX=Qt(function(e,n){const a=e,{children:r,placeholder:i,className:o}=a,s=Dt(a,["children","placeholder","className"]);return h.jsxs($t.select,se(j({},s),{ref:n,className:Sn("chakra-select",o),children:[i&&h.jsx("option",{value:"",children:i}),r]}))});xX.displayName="SelectField";function ePe(t,e){const n={},r={};for(const[i,o]of Object.entries(t))e.includes(i)?n[i]=o:r[i]=o;return[n,r]}var Ov=Qt((t,e)=>{var n;const r=js("Select",t),S=di(t),{rootProps:i,placeholder:o,icon:s,color:a,height:l,h:c,minH:u,minHeight:d,iconColor:f,iconSize:p}=S,b=Dt(S,["rootProps","placeholder","icon","color","height","h","minH","minHeight","iconColor","iconSize"]),[v,m]=ePe(b,ZG),g=CN(m),x={width:"100%",height:"fit-content",position:"relative",color:a},w=se(j({paddingEnd:"2rem"},r.field),{_focus:j({zIndex:"unset"},(n=r.field)==null?void 0:n._focus)});return h.jsxs($t.div,se(j(j({className:"chakra-select__wrapper",__css:x},v),i),{children:[h.jsx(xX,se(j({ref:e,height:c!=null?c:l,minH:u!=null?u:d,placeholder:o},g),{__css:w,children:t.children})),h.jsx(bX,se(j(se(j({"data-disabled":In(g.disabled)},(f||a)&&{color:f||a}),{__css:r.icon}),p&&{fontSize:p}),{children:s}))]}))});Ov.displayName="Select";var tPe=t=>h.jsx("svg",se(j({viewBox:"0 0 24 24"},t),{children:h.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})})),nPe=$t("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),bX=t=>{const i=t,{children:e=h.jsx(tPe,{})}=i,n=Dt(i,["children"]),r=T.cloneElement(e,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return h.jsx(nPe,se(j({},n),{className:"chakra-select__icon-wrapper",children:T.isValidElement(e)?r:null}))};bX.displayName="SelectIcon";var[rPe,XN]=Ai({name:"StatStylesContext",errorMessage:`useStatStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Stat />" `}),Fy=Qt(function(e,n){const r=js("Stat",e),i=j({position:"relative",flex:"1 1 0%"},r.container),l=di(e),{className:o,children:s}=l,a=Dt(l,["className","children"]);return h.jsx(rPe,{value:r,children:h.jsx($t.div,se(j({ref:n},a),{className:Sn("chakra-stat",o),__css:i,children:h.jsx("dl",{children:s})}))})});Fy.displayName="Stat";var Oy=Qt(function(e,n){const r=XN();return h.jsx($t.dd,se(j({ref:n},e),{className:Sn("chakra-stat__help-text",e.className),__css:r.helpText}))});Oy.displayName="StatHelpText";var Ny=Qt(function(e,n){const r=XN();return h.jsx($t.dt,se(j({ref:n},e),{className:Sn("chakra-stat__label",e.className),__css:r.label}))});Ny.displayName="StatLabel";var Ly=Qt(function(e,n){const r=XN();return h.jsx($t.dd,se(j({ref:n},e),{className:Sn("chakra-stat__number",e.className),__css:se(j({},r.number),{fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums"})}))});Ly.displayName="StatNumber";var QN=Qt(function(e,n){const r=js("Switch",e),v=di(e),{spacing:i="0.5rem",children:o}=v,s=Dt(v,["spacing","children"]),{getIndicatorProps:a,getInputProps:l,getCheckboxProps:c,getRootProps:u,getLabelProps:d}=bCe(s),f=T.useMemo(()=>j({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0},r.container),[r.container]),p=T.useMemo(()=>j({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer"},r.track),[r.track]),b=T.useMemo(()=>j({userSelect:"none",marginStart:i},r.label),[i,r.label]);return h.jsxs($t.label,se(j({},u()),{className:Sn("chakra-switch",e.className),__css:f,children:[h.jsx("input",j({className:"chakra-switch__input"},l({},n))),h.jsx($t.span,se(j({},c()),{className:"chakra-switch__track",__css:p,children:h.jsx($t.span,j({__css:r.thumb,className:"chakra-switch__thumb"},a()))})),o&&h.jsx($t.span,se(j({className:"chakra-switch__label"},d()),{__css:b,children:o}))]}))});QN.displayName="Switch";var[iPe,bw]=Ai({name:"TableStylesContext",errorMessage:`useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Table />" `}),wX=Qt((t,e)=>{const n=js("Table",t),s=di(t),{className:r,layout:i}=s,o=Dt(s,["className","layout"]);return h.jsx(iPe,{value:n,children:h.jsx($t.table,j({ref:e,__css:j({tableLayout:i},n.table),className:Sn("chakra-table",r)},o))})});wX.displayName="Table";var oPe=Qt((t,e)=>{const n=bw();return h.jsx($t.thead,se(j({},t),{ref:e,__css:n.thead}))}),wP=Qt((t,e)=>{const n=bw();return h.jsx($t.tr,se(j({},t),{ref:e,__css:n.tr}))}),sPe=Qt((t,e)=>{const n=bw();return h.jsx($t.tbody,se(j({},t),{ref:e,__css:n.tbody}))}),Km=Qt((r,n)=>{var i=r,{isNumeric:t}=i,e=Dt(i,["isNumeric"]);const o=bw();return h.jsx($t.td,se(j({},e),{ref:n,__css:o.td,"data-is-numeric":t}))}),iy=Qt((r,n)=>{var i=r,{isNumeric:t}=i,e=Dt(i,["isNumeric"]);const o=bw();return h.jsx($t.th,se(j({},e),{ref:n,__css:o.th,"data-is-numeric":t}))}),[aPe,lPe,cPe,uPe]=QK();function dPe(t){var e;const w=t,{defaultIndex:n,onChange:r,index:i,isManual:o,isLazy:s,lazyBehavior:a="unmount",orientation:l="horizontal",direction:c="ltr"}=w,u=Dt(w,["defaultIndex","onChange","index","isManual","isLazy","lazyBehavior","orientation","direction"]),[d,f]=T.useState(n!=null?n:0),[p,b]=ZK({defaultValue:n!=null?n:0,value:i,onChange:r});T.useEffect(()=>{i!=null&&f(i)},[i]);const v=cPe(),m=T.useId();return{id:`tabs-${(e=t.id)!=null?e:m}`,selectedIndex:p,focusedIndex:d,setSelectedIndex:b,setFocusedIndex:f,isManual:o,isLazy:s,lazyBehavior:a,orientation:l,descendants:v,direction:c,htmlProps:u}}var[fPe,lT]=Ai({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"});function hPe(t){const{focusedIndex:e,orientation:n,direction:r}=lT(),i=lPe(),o=T.useCallback(s=>{const a=()=>{var x;const w=i.nextEnabled(e);w&&((x=w.node)==null||x.focus())},l=()=>{var x;const w=i.prevEnabled(e);w&&((x=w.node)==null||x.focus())},c=()=>{var x;const w=i.firstEnabled();w&&((x=w.node)==null||x.focus())},u=()=>{var x;const w=i.lastEnabled();w&&((x=w.node)==null||x.focus())},d=n==="horizontal",f=n==="vertical",p=s.key,b=r==="ltr"?"ArrowLeft":"ArrowRight",v=r==="ltr"?"ArrowRight":"ArrowLeft",g={[b]:()=>d&&l(),[v]:()=>d&&a(),ArrowDown:()=>f&&a(),ArrowUp:()=>f&&l(),Home:c,End:u}[p];g&&(s.preventDefault(),g(s))},[i,e,n,r]);return se(j({},t),{role:"tablist","aria-orientation":n,onKeyDown:Nn(t.onKeyDown,o)})}function pPe(t){const m=t,{isDisabled:e=!1,isFocusable:n=!1}=m,r=Dt(m,["isDisabled","isFocusable"]),{setSelectedIndex:i,isManual:o,id:s,setFocusedIndex:a,selectedIndex:l}=lT(),{index:c,register:u}=uPe({disabled:e&&!n}),d=c===l,f=()=>{i(c)},p=()=>{a(c),!o&&!(e&&n)&&i(c)},b=hTe(se(j({},r),{ref:ko(u,t.ref),isDisabled:e,isFocusable:n,onClick:Nn(t.onClick,f)}));return se(j({},b),{id:SX(s,c),role:"tab",tabIndex:d?0:-1,type:"button","aria-selected":d,"aria-controls":_X(s,c),onFocus:e?void 0:Nn(t.onFocus,p)})}var[mPe,gPe]=Ai({});function vPe(t){const e=lT(),{id:n,selectedIndex:r}=e,o=EN(t.children).map((s,a)=>T.createElement(mPe,{key:a,value:{isSelected:a===r,id:_X(n,a),tabId:SX(n,a),selectedIndex:r}},s));return se(j({},t),{children:o})}function yPe(t){const u=t,{children:e}=u,n=Dt(u,["children"]),{isLazy:r,lazyBehavior:i}=lT(),{isSelected:o,id:s,tabId:a}=gPe(),l=T.useRef(!1);o&&(l.current=!0);const c=N2e({wasSelected:l.current,isSelected:o,enabled:r,mode:i});return se(j({tabIndex:0},n),{children:c?e:null,role:"tabpanel","aria-labelledby":a,hidden:!o,id:s})}function SX(t,e){return`${t}--tab-${e}`}function _X(t,e){return`${t}--tabpanel-${e}`}var[xPe,cT]=Ai({name:"TabsStylesContext",errorMessage:`useTabsStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tabs />" `}),ww=Qt(function(e,n){const r=js("Tabs",e),b=di(e),{children:i,className:o}=b,s=Dt(b,["children","className"]),v=dPe(s),{htmlProps:a,descendants:l}=v,c=Dt(v,["htmlProps","descendants"]),u=T.useMemo(()=>c,[c]),m=a,{isFitted:d}=m,f=Dt(m,["isFitted"]),p=j({position:"relative"},r.root);return h.jsx(aPe,{value:l,children:h.jsx(fPe,{value:u,children:h.jsx(xPe,{value:r,children:h.jsx($t.div,se(j({className:Sn("chakra-tabs",o),ref:n},f),{__css:p,children:i}))})})})});ww.displayName="Tabs";var Sw=Qt(function(e,n){const r=hPe(se(j({},e),{ref:n})),i=cT(),o=j({display:"flex"},i.tablist);return h.jsx($t.div,se(j({},r),{className:Sn("chakra-tabs__tablist",e.className),__css:o}))});Sw.displayName="TabList";var Uf=Qt(function(e,n){const r=yPe(se(j({},e),{ref:n})),i=cT();return h.jsx($t.div,se(j({outline:"0"},r),{className:Sn("chakra-tabs__tab-panel",e.className),__css:i.tabpanel}))});Uf.displayName="TabPanel";var uT=Qt(function(e,n){const r=vPe(e),i=cT();return h.jsx($t.div,se(j({},r),{width:"100%",ref:n,className:Sn("chakra-tabs__tab-panels",e.className),__css:i.tabpanels}))});uT.displayName="TabPanels";var As=Qt(function(e,n){const r=cT(),i=pPe(se(j({},e),{ref:n})),o=j({outline:"0",display:"flex",alignItems:"center",justifyContent:"center"},r.tab);return h.jsx($t.button,se(j({},i),{className:Sn("chakra-tabs__tab",e.className),__css:o}))});As.displayName="Tab";function bPe(t,e=[]){const n=Object.assign({},t);for(const r of e)r in n&&delete n[r];return n}var wPe=["h","minH","height","minHeight"],ZN=Qt((t,e)=>{const n=Va("Textarea",t),l=di(t),{className:r,rows:i}=l,o=Dt(l,["className","rows"]),s=CN(o),a=i?bPe(n,wPe):n;return h.jsx($t.textarea,se(j({ref:e,rows:i},s),{className:Sn("chakra-textarea",r),__css:a}))});ZN.displayName="Textarea";var SPe={exit:{scale:.85,opacity:0,transition:{opacity:{duration:.15,easings:"easeInOut"},scale:{duration:.2,easings:"easeInOut"}}},enter:{scale:1,opacity:1,transition:{opacity:{easings:"easeOut",duration:.2},scale:{duration:.2,ease:[.175,.885,.4,1.1]}}}},BI=t=>{var e;return((e=t.current)==null?void 0:e.ownerDocument)||document},X_=t=>{var e,n;return((n=(e=t.current)==null?void 0:e.ownerDocument)==null?void 0:n.defaultView)||window};function _Pe(t={}){const Ce=t,{openDelay:e=0,closeDelay:n=0,closeOnClick:r=!0,closeOnMouseDown:i,closeOnScroll:o,closeOnPointerDown:s=i,closeOnEsc:a=!0,onOpen:l,onClose:c,placement:u,id:d,isOpen:f,defaultIsOpen:p,arrowSize:b=10,arrowShadowColor:v,arrowPadding:m,modifiers:g,isDisabled:x,gutter:w,offset:S,direction:P}=Ce,I=Dt(Ce,["openDelay","closeDelay","closeOnClick","closeOnMouseDown","closeOnScroll","closeOnPointerDown","closeOnEsc","onOpen","onClose","placement","id","isOpen","defaultIsOpen","arrowSize","arrowShadowColor","arrowPadding","modifiers","isDisabled","gutter","offset","direction"]),{isOpen:M,onOpen:D,onClose:E}=O2e({isOpen:f,defaultIsOpen:p,onOpen:l,onClose:c}),{referenceRef:_,getPopperProps:A,getArrowInnerProps:R,getArrowProps:F}=k2e({enabled:M,placement:u,arrowPadding:m,modifiers:g,gutter:w,offset:S,direction:P}),L=T.useId(),U=`tooltip-${d!=null?d:L}`,$=T.useRef(null),B=T.useRef(),H=T.useCallback(()=>{B.current&&(clearTimeout(B.current),B.current=void 0)},[]),q=T.useRef(),z=T.useCallback(()=>{q.current&&(clearTimeout(q.current),q.current=void 0)},[]),G=T.useCallback(()=>{z(),E()},[E,z]),K=EPe($,G),Z=T.useCallback(()=>{if(!x&&!B.current){M&&K();const _e=X_($);B.current=_e.setTimeout(D,e)}},[K,x,M,D,e]),ee=T.useCallback(()=>{H();const _e=X_($);q.current=_e.setTimeout(G,n)},[n,G,H]),V=T.useCallback(()=>{M&&r&&ee()},[r,ee,M]),J=T.useCallback(()=>{M&&s&&ee()},[s,ee,M]),oe=T.useCallback(_e=>{M&&_e.key==="Escape"&&ee()},[M,ee]);G_(()=>BI($),"keydown",a?oe:void 0),G_(()=>{if(!o)return null;const _e=$.current;if(!_e)return null;const ce=jY(_e);return ce.localName==="body"?X_($):ce},"scroll",()=>{M&&o&&G()},{passive:!0,capture:!0}),T.useEffect(()=>{x&&(H(),M&&E())},[x,M,E,H]),T.useEffect(()=>()=>{H(),z()},[H,z]),G_(()=>$.current,"pointerleave",ee);const ne=T.useCallback((_e={},ce=null)=>se(j({},_e),{ref:ko($,ce,_),onPointerEnter:Nn(_e.onPointerEnter,de=>{de.pointerType!=="touch"&&Z()}),onClick:Nn(_e.onClick,V),onPointerDown:Nn(_e.onPointerDown,J),onFocus:Nn(_e.onFocus,Z),onBlur:Nn(_e.onBlur,ee),"aria-describedby":M?U:void 0}),[Z,ee,J,M,U,V,_]),pe=T.useCallback((_e={},ce=null)=>A(se(j({},_e),{style:se(j({},_e.style),{[Vo.arrowSize.var]:b?`${b}px`:void 0,[Vo.arrowShadowColor.var]:v})}),ce),[A,b,v]),ye=T.useCallback((_e={},ce=null)=>{const Be=se(j({},_e.style),{position:"relative",transformOrigin:Vo.transformOrigin.varRef});return se(j(j({ref:ce},I),_e),{id:U,role:"tooltip",style:Be})},[I,U]);return{isOpen:M,show:Z,hide:ee,getTriggerProps:ne,getTooltipProps:ye,getTooltipPositionerProps:pe,getArrowProps:F,getArrowInnerProps:R}}var SP="chakra-ui:close-tooltip";function EPe(t,e){return T.useEffect(()=>{const n=BI(t);return n.addEventListener(SP,e),()=>n.removeEventListener(SP,e)},[e,t]),()=>{const n=BI(t),r=X_(t);n.dispatchEvent(new r.CustomEvent(SP))}}function CPe(t,e=[]){const n=Object.assign({},t);for(const r of e)r in n&&delete n[r];return n}function APe(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}var TPe=$t(ml.div),ll=Qt((t,e)=>{var n,r;const i=Va("Tooltip",t),o=di(t),s=aw(),A=o,{children:a,label:l,shouldWrapChildren:c,"aria-label":u,hasArrow:d,bg:f,portalProps:p,background:b,backgroundColor:v,bgColor:m,motionProps:g}=A,x=Dt(A,["children","label","shouldWrapChildren","aria-label","hasArrow","bg","portalProps","background","backgroundColor","bgColor","motionProps"]),w=(r=(n=b!=null?b:v)!=null?n:f)!=null?r:m;if(w){i.bg=w;const R=Npe(s,"colors",w);i[Vo.arrowBg.var]=R}const S=_Pe(se(j({},x),{direction:s.direction})),P=typeof a=="string"||c;let I;if(P)I=h.jsx($t.span,se(j({display:"inline-block",tabIndex:0},S.getTriggerProps()),{children:a}));else{const R=T.Children.only(a);I=T.cloneElement(R,S.getTriggerProps(R.props,R.ref))}const M=!!u,D=S.getTooltipProps({},e),E=M?CPe(D,["role","id"]):D,_=APe(D,["role","id"]);return l?h.jsxs(h.Fragment,{children:[I,h.jsx(Vc,{children:S.isOpen&&h.jsx(o0,se(j({},p),{children:h.jsx($t.div,se(j({},S.getTooltipPositionerProps()),{__css:{zIndex:i.zIndex,pointerEvents:"none"},children:h.jsxs(TPe,se(j(j({variants:SPe,initial:"exit",animate:"enter",exit:"exit"},g),E),{__css:i,children:[l,M&&h.jsx($t.span,se(j({srOnly:!0},_),{children:u})),d&&h.jsx($t.div,{"data-popper-arrow":!0,className:"chakra-tooltip__arrow-wrapper",children:h.jsx($t.div,{"data-popper-arrow-inner":!0,className:"chakra-tooltip__arrow",__css:{bg:i.bg}})})]}))}))}))})]}):h.jsx(h.Fragment,{children:a})});ll.displayName="Tooltip";var JN={};Object.defineProperty(JN,"__esModule",{value:!0});JN.parse=FPe;JN.serialize=OPe;const MPe=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,PPe=/^[\u0021-\u003A\u003C-\u007E]*$/,DPe=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,RPe=/^[\u0020-\u003A\u003D-\u007E]*$/,IPe=Object.prototype.toString,kPe=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function FPe(t,e){const n=new kPe,r=t.length;if(r<2)return n;const i=(e==null?void 0:e.decode)||NPe;let o=0;do{const s=t.indexOf("=",o);if(s===-1)break;const a=t.indexOf(";",o),l=a===-1?r:a;if(s>l){o=t.lastIndexOf(";",s-1)+1;continue}const c=fz(t,o,s),u=hz(t,s,c),d=t.slice(c,u);if(n[d]===void 0){let f=fz(t,s+1,l),p=hz(t,l,f);const b=i(t.slice(f,p));n[d]=b}o=l+1}while(o<r);return n}function fz(t,e,n){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<n);return n}function hz(t,e,n){for(;e>n;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return n}function OPe(t,e,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!MPe.test(t))throw new TypeError(`argument name is invalid: ${t}`);const i=r(e);if(!PPe.test(i))throw new TypeError(`argument val is invalid: ${e}`);let o=t+"="+i;if(!n)return o;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);o+="; Max-Age="+n.maxAge}if(n.domain){if(!DPe.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);o+="; Domain="+n.domain}if(n.path){if(!RPe.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);o+="; Path="+n.path}if(n.expires){if(!LPe(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);o+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.partitioned&&(o+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"none":o+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return o}function NPe(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch(e){return t}}function LPe(t){return IPe.call(t)==="[object Date]"}/**
 * react-router v7.5.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var EX=t=>{throw TypeError(t)},BPe=(t,e,n)=>e.has(t)||EX("Cannot "+n),_P=(t,e,n)=>(BPe(t,e,"read from private field"),n?n.call(t):e.get(t)),jPe=(t,e,n)=>e.has(t)?EX("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),pz="popstate";function UPe(t={}){function e(r,i){let{pathname:o,search:s,hash:a}=r.location;return bb("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Jf(i)}return VPe(e,n,null,t)}function sr(t,e){if(t===!1||t===null||typeof t=="undefined")throw new Error(e)}function Hi(t,e){if(!t){typeof console!="undefined"&&console.warn(e);try{throw new Error(e)}catch(n){}}}function zPe(){return Math.random().toString(36).substring(2,10)}function mz(t,e){return{usr:t.state,key:t.key,idx:e}}function bb(t,e,n=null,r){return se(j({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?uh(e):e),{state:n,key:e&&e.key||r||zPe()})}function Jf({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function uh(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function VPe(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a="POP",l=null,c=u();c==null&&(c=0,s.replaceState(se(j({},s.state),{idx:c}),""));function u(){return(s.state||{idx:null}).idx}function d(){a="POP";let m=u(),g=m==null?null:m-c;c=m,l&&l({action:a,location:v.location,delta:g})}function f(m,g){a="PUSH";let x=bb(v.location,m,g);c=u()+1;let w=mz(x,c),S=v.createHref(x);try{s.pushState(w,"",S)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(S)}o&&l&&l({action:a,location:v.location,delta:1})}function p(m,g){a="REPLACE";let x=bb(v.location,m,g);c=u();let w=mz(x,c),S=v.createHref(x);s.replaceState(w,"",S),o&&l&&l({action:a,location:v.location,delta:0})}function b(m){let g=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof m=="string"?m:Jf(m);return x=x.replace(/ $/,"%20"),sr(g,`No window.location.(origin|href) available to create URL for href: ${x}`),new URL(x,g)}let v={get action(){return a},get location(){return t(i,s)},listen(m){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(pz,d),l=m,()=>{i.removeEventListener(pz,d),l=null}},createHref(m){return e(i,m)},createURL:b,encodeLocation(m){let g=b(m);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:p,go(m){return s.go(m)}};return v}var By,gz=class{constructor(t){if(jPe(this,By,new Map),t)for(let[e,n]of t)this.set(e,n)}get(t){if(_P(this,By).has(t))return _P(this,By).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,e){_P(this,By).set(t,e)}};By=new WeakMap;var WPe=new Set(["lazy","caseSensitive","path","id","index","children"]);function $Pe(t){return WPe.has(t)}var HPe=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function GPe(t){return HPe.has(t)}function qPe(t){return t.index===!0}function vC(t,e,n=[],r={}){return t.map((i,o)=>{let s=[...n,String(o)],a=typeof i.id=="string"?i.id:s.join("-");if(sr(i.index!==!0||!i.children,"Cannot specify children on an index route"),sr(!r[a],`Found a route id collision on id "${a}".  Route id's must be globally unique within Data Router usages`),qPe(i)){let l=se(j(j({},i),e(i)),{id:a});return r[a]=l,l}else{let l=se(j(j({},i),e(i)),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=vC(i.children,e,s,r)),l}})}function yf(t,e,n="/"){return Q_(t,e,n,!1)}function Q_(t,e,n,r){let i=typeof e=="string"?uh(e):e,o=_l(i.pathname||"/",n);if(o==null)return null;let s=CX(t);YPe(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let c=sDe(o);a=iDe(s[l],c,r)}return a}function KPe(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function CX(t,e=[],n=[],r=""){let i=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&(sr(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=Xc([r,l.relativePath]),u=n.concat(l);o.children&&o.children.length>0&&(sr(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),CX(o.children,e,u,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:nDe(c,o.index),routesMeta:u})};return t.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let l of AX(o.path))i(o,s,l)}),e}function AX(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=AX(r.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),i&&a.push(...s),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function YPe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:rDe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var XPe=/^:[\w-]+$/,QPe=3,ZPe=2,JPe=1,eDe=10,tDe=-2,vz=t=>t==="*";function nDe(t,e){let n=t.split("/"),r=n.length;return n.some(vz)&&(r+=tDe),e&&(r+=ZPe),n.filter(i=>!vz(i)).reduce((i,o)=>i+(XPe.test(o)?QPe:o===""?JPe:eDe),r)}function rDe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function iDe(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=o==="/"?e:e.slice(o.length)||"/",d=yC({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=yC({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),s.push({params:i,pathname:Xc([o,d.pathname]),pathnameBase:cDe(Xc([o,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(o=Xc([o,d.pathnameBase]))}return s}function yC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=oDe(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:d},f)=>{if(u==="*"){let b=a[f]||"";s=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const p=a[f];return d&&!p?c[u]=void 0:c[u]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:s,pattern:t}}function oDe(t,e=!1,n=!0){Hi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function sDe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Hi(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function _l(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function aDe(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?uh(t):t;return{pathname:n?n.startsWith("/")?n:lDe(n,e):e,search:uDe(r),hash:dDe(i)}}function lDe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function EP(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function TX(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function dT(t){let e=TX(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function fT(t,e,n,r=!1){let i;typeof t=="string"?i=uh(t):(i=j({},t),sr(!i.pathname||!i.pathname.includes("?"),EP("?","pathname","search",i)),sr(!i.pathname||!i.pathname.includes("#"),EP("#","pathname","hash",i)),sr(!i.search||!i.search.includes("#"),EP("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let d=e.length-1;if(!r&&s.startsWith("..")){let f=s.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=aDe(i,a),c=s&&s!=="/"&&s.endsWith("/"),u=(o||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var Xc=t=>t.join("/").replace(/\/\/+/g,"/"),cDe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uDe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,dDe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,jI=(t,e=302)=>{let n=e;typeof n=="number"?n={status:n}:typeof n.status=="undefined"&&(n.status=302);let r=new Headers(n.headers);return r.set("Location",t),new Response(null,se(j({},n),{headers:r}))},xC=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Nv(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var MX=["POST","PUT","PATCH","DELETE"],fDe=new Set(MX),hDe=["GET",...MX],pDe=new Set(hDe),mDe=new Set([301,302,303,307,308]),gDe=new Set([307,308]),CP={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},vDe={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},oy={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},e3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yDe=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),PX="remix-router-transitions",DX=Symbol("ResetLoaderData");function xDe(t){const e=t.window?t.window:typeof window!="undefined"?window:void 0,n=typeof e!="undefined"&&typeof e.document!="undefined"&&typeof e.document.createElement!="undefined";sr(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=t.hydrationRouteProperties||[],i=t.mapRouteProperties||yDe,o={},s=vC(t.routes,i,void 0,o),a,l=t.basename||"/",c=t.dataStrategy||EDe,u=j({unstable_middleware:!1},t.future),d=null,f=new Set,p=null,b=null,v=null,m=t.hydrationData!=null,g=yf(s,t.history.location,l),x=!1,w=null;if(g==null&&!t.patchRoutesOnNavigation){let Pe=nl(404,{pathname:t.history.location.pathname}),{matches:Ue,route:Xe}=Pz(s);g=Ue,w={[Xe.id]:Pe}}g&&!t.hydrationData&&mt(g,s,t.history.location.pathname).active&&(g=null);let S;if(g)if(g.some(Pe=>Pe.route.lazy))S=!1;else if(!g.some(Pe=>Pe.route.loader))S=!0;else{let Pe=t.hydrationData?t.hydrationData.loaderData:null,Ue=t.hydrationData?t.hydrationData.errors:null;if(Ue){let Xe=g.findIndex(vt=>Ue[vt.route.id]!==void 0);S=g.slice(0,Xe+1).every(vt=>!zI(vt.route,Pe,Ue))}else S=g.every(Xe=>!zI(Xe.route,Pe,Ue))}else{S=!1,g=[];let Pe=mt(null,s,t.history.location.pathname);Pe.active&&Pe.matches&&(x=!0,g=Pe.matches)}let P,I={historyAction:t.history.action,location:t.history.location,matches:g,initialized:S,navigation:CP,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||w,fetchers:new Map,blockers:new Map},M="POP",D=!1,E,_=!1,A=new Map,R=null,F=!1,L=!1,N=new Set,U=new Map,$=0,B=-1,H=new Map,q=new Set,z=new Map,G=new Map,K=new Set,Z=new Map,ee,V=null;function J(){if(d=t.history.listen(({action:Pe,location:Ue,delta:Xe})=>{if(ee){ee(),ee=void 0;return}Hi(Z.size===0||Xe!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let vt=ht({currentLocation:I.location,nextLocation:Ue,historyAction:Pe});if(vt&&Xe!=null){let Pt=new Promise(jt=>{ee=jt});t.history.go(Xe*-1),lt(vt,{state:"blocked",location:Ue,proceed(){lt(vt,{state:"proceeding",proceed:void 0,reset:void 0,location:Ue}),Pt.then(()=>t.history.go(Xe))},reset(){let jt=new Map(I.blockers);jt.set(vt,oy),pe({blockers:jt})}});return}return ce(Pe,Ue)}),n){ODe(e,A);let Pe=()=>NDe(e,A);e.addEventListener("pagehide",Pe),R=()=>e.removeEventListener("pagehide",Pe)}return I.initialized||ce("POP",I.location,{initialHydration:!0}),P}function oe(){d&&d(),R&&R(),f.clear(),E&&E.abort(),I.fetchers.forEach((Pe,Ue)=>Ie(Ue)),I.blockers.forEach((Pe,Ue)=>et(Ue))}function ne(Pe){return f.add(Pe),()=>f.delete(Pe)}function pe(Pe,Ue={}){I=j(j({},I),Pe);let Xe=[],vt=[];I.fetchers.forEach((Pt,jt)=>{Pt.state==="idle"&&(K.has(jt)?Xe.push(jt):vt.push(jt))}),K.forEach(Pt=>{!I.fetchers.has(Pt)&&!U.has(Pt)&&Xe.push(Pt)}),[...f].forEach(Pt=>Pt(I,{deletedFetchers:Xe,viewTransitionOpts:Ue.viewTransitionOpts,flushSync:Ue.flushSync===!0})),Xe.forEach(Pt=>Ie(Pt)),vt.forEach(Pt=>I.fetchers.delete(Pt))}function ye(Pe,Ue,{flushSync:Xe}={}){var fn,hn;let vt=I.actionData!=null&&I.navigation.formMethod!=null&&_a(I.navigation.formMethod)&&I.navigation.state==="loading"&&((fn=Pe.state)==null?void 0:fn._isRedirect)!==!0,Pt;Ue.actionData?Object.keys(Ue.actionData).length>0?Pt=Ue.actionData:Pt=null:vt?Pt=I.actionData:Pt=null;let jt=Ue.loaderData?Tz(I.loaderData,Ue.loaderData,Ue.matches||[],Ue.errors):I.loaderData,Nt=I.blockers;Nt.size>0&&(Nt=new Map(Nt),Nt.forEach((mn,jn)=>Nt.set(jn,oy)));let Yt=D===!0||I.navigation.formMethod!=null&&_a(I.navigation.formMethod)&&((hn=Pe.state)==null?void 0:hn._isRedirect)!==!0;a&&(s=a,a=void 0),F||M==="POP"||(M==="PUSH"?t.history.push(Pe,Pe.state):M==="REPLACE"&&t.history.replace(Pe,Pe.state));let en;if(M==="POP"){let mn=A.get(I.location.pathname);mn&&mn.has(Pe.pathname)?en={currentLocation:I.location,nextLocation:Pe}:A.has(Pe.pathname)&&(en={currentLocation:Pe,nextLocation:I.location})}else if(_){let mn=A.get(I.location.pathname);mn?mn.add(Pe.pathname):(mn=new Set([Pe.pathname]),A.set(I.location.pathname,mn)),en={currentLocation:I.location,nextLocation:Pe}}pe(se(j({},Ue),{actionData:Pt,loaderData:jt,historyAction:M,location:Pe,initialized:!0,navigation:CP,revalidation:"idle",restoreScrollPosition:at(Pe,Ue.matches||I.matches),preventScrollReset:Yt,blockers:Nt}),{viewTransitionOpts:en,flushSync:Xe===!0}),M="POP",D=!1,_=!1,F=!1,L=!1,V==null||V.resolve(),V=null}function Ce(Pe,Ue){return te(this,null,function*(){if(typeof Pe=="number"){t.history.go(Pe);return}let Xe=UI(I.location,I.matches,l,Pe,Ue==null?void 0:Ue.fromRouteId,Ue==null?void 0:Ue.relative),{path:vt,submission:Pt,error:jt}=yz(!1,Xe,Ue),Nt=I.location,Yt=bb(I.location,vt,Ue&&Ue.state);Yt=j(j({},Yt),t.history.encodeLocation(Yt));let en=Ue&&Ue.replace!=null?Ue.replace:void 0,fn="PUSH";en===!0?fn="REPLACE":en===!1||Pt!=null&&_a(Pt.formMethod)&&Pt.formAction===I.location.pathname+I.location.search&&(fn="REPLACE");let hn=Ue&&"preventScrollReset"in Ue?Ue.preventScrollReset===!0:void 0,mn=(Ue&&Ue.flushSync)===!0,jn=ht({currentLocation:Nt,nextLocation:Yt,historyAction:fn});if(jn){lt(jn,{state:"blocked",location:Yt,proceed(){lt(jn,{state:"proceeding",proceed:void 0,reset:void 0,location:Yt}),Ce(Pe,Ue)},reset(){let er=new Map(I.blockers);er.set(jn,oy),pe({blockers:er})}});return}yield ce(fn,Yt,{submission:Pt,pendingError:jt,preventScrollReset:hn,replace:Ue&&Ue.replace,enableViewTransition:Ue&&Ue.viewTransition,flushSync:mn})})}function _e(){V||(V=LDe()),Me(),pe({revalidation:"loading"});let Pe=V.promise;return I.navigation.state==="submitting"?Pe:I.navigation.state==="idle"?(ce(I.historyAction,I.location,{startUninterruptedRevalidation:!0}),Pe):(ce(M||I.historyAction,I.navigation.location,{overrideNavigation:I.navigation,enableViewTransition:_===!0}),Pe)}function ce(Pe,Ue,Xe){return te(this,null,function*(){E&&E.abort(),E=null,M=Pe,F=(Xe&&Xe.startUninterruptedRevalidation)===!0,yt(I.location,I.matches),D=(Xe&&Xe.preventScrollReset)===!0,_=(Xe&&Xe.enableViewTransition)===!0;let vt=a||s,Pt=Xe&&Xe.overrideNavigation,jt=Xe!=null&&Xe.initialHydration&&I.matches&&I.matches.length>0&&!x?I.matches:yf(vt,Ue,l),Nt=(Xe&&Xe.flushSync)===!0;if(jt&&I.initialized&&!L&&DDe(I.location,Ue)&&!(Xe&&Xe.submission&&_a(Xe.submission.formMethod))){ye(Ue,{matches:jt},{flushSync:Nt});return}let Yt=mt(jt,vt,Ue.pathname);if(Yt.active&&Yt.matches&&(jt=Yt.matches),!jt){let{error:lr,notFoundMatches:Yn,route:yn}=ke(Ue.pathname);ye(Ue,{matches:Yn,loaderData:{},errors:{[yn.id]:lr}},{flushSync:Nt});return}E=new AbortController;let en=pg(t.history,Ue,E.signal,Xe&&Xe.submission),fn=new gz(t.unstable_getContext?yield t.unstable_getContext():void 0),hn;if(Xe&&Xe.pendingError)hn=[np(jt).route.id,{type:"error",error:Xe.pendingError}];else if(Xe&&Xe.submission&&_a(Xe.submission.formMethod)){let lr=yield Be(en,Ue,Xe.submission,jt,fn,Yt.active,Xe&&Xe.initialHydration===!0,{replace:Xe.replace,flushSync:Nt});if(lr.shortCircuited)return;if(lr.pendingActionResult){let[Yn,yn]=lr.pendingActionResult;if(Sa(yn)&&Nv(yn.error)&&yn.error.status===404){E=null,ye(Ue,{matches:lr.matches,loaderData:{},errors:{[Yn]:yn.error}});return}}jt=lr.matches||jt,hn=lr.pendingActionResult,Pt=AP(Ue,Xe.submission),Nt=!1,Yt.active=!1,en=pg(t.history,en.url,en.signal)}let{shortCircuited:mn,matches:jn,loaderData:er,errors:Wr}=yield de(en,Ue,jt,fn,Yt.active,Pt,Xe&&Xe.submission,Xe&&Xe.fetcherSubmission,Xe&&Xe.replace,Xe&&Xe.initialHydration===!0,Nt,hn);mn||(E=null,ye(Ue,se(j({matches:jn||jt},Mz(hn)),{loaderData:er,errors:Wr})))})}function Be(en,fn,hn,mn,jn,er,Wr){return te(this,arguments,function*(Pe,Ue,Xe,vt,Pt,jt,Nt,Yt={}){Me();let lr=kDe(Ue,Xe);if(pe({navigation:lr},{flushSync:Yt.flushSync===!0}),jt){let Te=yield Ot(vt,Ue.pathname,Pe.signal);if(Te.type==="aborted")return{shortCircuited:!0};if(Te.type==="error"){let Ze=np(Te.partialMatches).route.id;return{matches:Te.partialMatches,pendingActionResult:[Ze,{type:"error",error:Te.error}]}}else if(Te.matches)vt=Te.matches;else{let{notFoundMatches:Ze,error:le,route:Fe}=ke(Ue.pathname);return{matches:Ze,pendingActionResult:[Fe.id,{type:"error",error:le}]}}}let Yn,yn=jy(vt,Ue);if(!yn.route.action&&!yn.route.lazy)Yn={type:"error",error:nl(405,{method:Pe.method,pathname:Ue.pathname,routeId:yn.route.id})};else{let Te=sv(i,o,Pe,vt,yn,Nt?[]:r,Pt),Ze=yield ve(Pe,Te,Pt,null);if(Yn=Ze[yn.route.id],!Yn){for(let le of vt)if(Ze[le.route.id]){Yn=Ze[le.route.id];break}}if(Pe.signal.aborted)return{shortCircuited:!0}}if(fp(Yn)){let Te;return Yt&&Yt.replace!=null?Te=Yt.replace:Te=Ez(Yn.response.headers.get("Location"),new URL(Pe.url),l)===I.location.pathname+I.location.search,yield W(Pe,Yn,!0,{submission:Xe,replace:Te}),{shortCircuited:!0}}if(Sa(Yn)){let Te=np(vt,yn.route.id);return(Yt&&Yt.replace)!==!0&&(M="PUSH"),{matches:vt,pendingActionResult:[Te.route.id,Yn]}}return{matches:vt,pendingActionResult:[yn.route.id,Yn]}})}function de(Pe,Ue,Xe,vt,Pt,jt,Nt,Yt,en,fn,hn,mn){return te(this,null,function*(){let jn=jt||AP(Ue,Nt),er=Nt||Yt||Rz(jn),Wr=!F&&!fn;if(Pt){if(Wr){let Wt=me(mn);pe(j({navigation:jn},Wt!==void 0?{actionData:Wt}:{}),{flushSync:hn})}let Ct=yield Ot(Xe,Ue.pathname,Pe.signal);if(Ct.type==="aborted")return{shortCircuited:!0};if(Ct.type==="error"){let Wt=np(Ct.partialMatches).route.id;return{matches:Ct.partialMatches,loaderData:{},errors:{[Wt]:Ct.error}}}else if(Ct.matches)Xe=Ct.matches;else{let{error:Wt,notFoundMatches:ln,route:vn}=ke(Ue.pathname);return{matches:ln,loaderData:{},errors:{[vn.id]:Wt}}}}let lr=a||s,{dsMatches:Yn,revalidatingFetchers:yn}=xz(Pe,vt,i,o,t.history,I,Xe,er,Ue,fn?[]:r,fn===!0,L,N,K,z,q,lr,l,mn);if(B=++$,!t.dataStrategy&&!Yn.some(Ct=>Ct.shouldLoad)&&yn.length===0){let Ct=Ge();return ye(Ue,j(j({matches:Xe,loaderData:{},errors:mn&&Sa(mn[1])?{[mn[0]]:mn[1].error}:null},Mz(mn)),Ct?{fetchers:new Map(I.fetchers)}:{}),{flushSync:hn}),{shortCircuited:!0}}if(Wr){let Ct={};if(!Pt){Ct.navigation=jn;let Wt=me(mn);Wt!==void 0&&(Ct.actionData=Wt)}yn.length>0&&(Ct.fetchers=ie(yn)),pe(Ct,{flushSync:hn})}yn.forEach(Ct=>{Ee(Ct.key),Ct.controller&&U.set(Ct.key,Ct.controller)});let Te=()=>yn.forEach(Ct=>Ee(Ct.key));E&&E.signal.addEventListener("abort",Te);let{loaderResults:Ze,fetcherResults:le}=yield ue(Yn,yn,Pe,vt);if(Pe.signal.aborted)return{shortCircuited:!0};E&&E.signal.removeEventListener("abort",Te),yn.forEach(Ct=>U.delete(Ct.key));let Fe=_S(Ze);if(Fe)return yield W(Pe,Fe.result,!0,{replace:en}),{shortCircuited:!0};if(Fe=_S(le),Fe)return q.add(Fe.key),yield W(Pe,Fe.result,!0,{replace:en}),{shortCircuited:!0};let{loaderData:Je,errors:qe}=Az(I,Xe,Ze,mn,yn,le);fn&&I.errors&&(qe=j(j({},I.errors),qe));let Ve=Ge(),wt=Ke(B),It=Ve||wt||yn.length>0;return j({matches:Xe,loaderData:Je,errors:qe},It?{fetchers:new Map(I.fetchers)}:{})})}function me(Pe){if(Pe&&!Sa(Pe[1]))return{[Pe[0]]:Pe[1].data};if(I.actionData)return Object.keys(I.actionData).length===0?null:I.actionData}function ie(Pe){return Pe.forEach(Ue=>{let Xe=I.fetchers.get(Ue.key),vt=sy(void 0,Xe?Xe.data:void 0);I.fetchers.set(Ue.key,vt)}),new Map(I.fetchers)}function ae(Pe,Ue,Xe,vt){return te(this,null,function*(){Ee(Pe);let Pt=(vt&&vt.flushSync)===!0,jt=a||s,Nt=UI(I.location,I.matches,l,Xe,Ue,vt==null?void 0:vt.relative),Yt=yf(jt,Nt,l),en=mt(Yt,jt,Nt);if(en.active&&en.matches&&(Yt=en.matches),!Yt){Ne(Pe,Ue,nl(404,{pathname:Nt}),{flushSync:Pt});return}let{path:fn,submission:hn,error:mn}=yz(!0,Nt,vt);if(mn){Ne(Pe,Ue,mn,{flushSync:Pt});return}let jn=jy(Yt,fn),er=new gz(t.unstable_getContext?yield t.unstable_getContext():void 0),Wr=(vt&&vt.preventScrollReset)===!0;if(hn&&_a(hn.formMethod)){yield ge(Pe,Ue,fn,jn,Yt,er,en.active,Pt,Wr,hn);return}z.set(Pe,{routeId:Ue,path:fn}),yield X(Pe,Ue,fn,jn,Yt,er,en.active,Pt,Wr,hn)})}function ge(Pe,Ue,Xe,vt,Pt,jt,Nt,Yt,en,fn){return te(this,null,function*(){Me(),z.delete(Pe);function hn(be){if(!be.route.action&&!be.route.lazy){let st=nl(405,{method:fn.formMethod,pathname:Xe,routeId:Ue});return Ne(Pe,Ue,st,{flushSync:Yt}),!0}return!1}if(!Nt&&hn(vt))return;let mn=I.fetchers.get(Pe);Ae(Pe,FDe(fn,mn),{flushSync:Yt});let jn=new AbortController,er=pg(t.history,Xe,jn.signal,fn);if(Nt){let be=yield Ot(Pt,Xe,er.signal,Pe);if(be.type==="aborted")return;if(be.type==="error"){Ne(Pe,Ue,be.error,{flushSync:Yt});return}else if(be.matches){if(Pt=be.matches,vt=jy(Pt,Xe),hn(vt))return}else{Ne(Pe,Ue,nl(404,{pathname:Xe}),{flushSync:Yt});return}}U.set(Pe,jn);let Wr=$,lr=sv(i,o,er,Pt,vt,r,jt),yn=(yield ve(er,lr,jt,Pe))[vt.route.id];if(er.signal.aborted){U.get(Pe)===jn&&U.delete(Pe);return}if(K.has(Pe)){if(fp(yn)||Sa(yn)){Ae(Pe,lf(void 0));return}}else{if(fp(yn))if(U.delete(Pe),B>Wr){Ae(Pe,lf(void 0));return}else return q.add(Pe),Ae(Pe,sy(fn)),W(er,yn,!1,{fetcherSubmission:fn,preventScrollReset:en});if(Sa(yn)){Ne(Pe,Ue,yn.error);return}}let Te=I.navigation.location||I.location,Ze=pg(t.history,Te,jn.signal),le=a||s,Fe=I.navigation.state!=="idle"?yf(le,I.navigation.location,l):I.matches;sr(Fe,"Didn't find any matches after fetcher action");let Je=++$;H.set(Pe,Je);let qe=sy(fn,yn.data);I.fetchers.set(Pe,qe);let{dsMatches:Ve,revalidatingFetchers:wt}=xz(Ze,jt,i,o,t.history,I,Fe,fn,Te,r,!1,L,N,K,z,q,le,l,[vt.route.id,yn]);wt.filter(be=>be.key!==Pe).forEach(be=>{let st=be.key,zt=I.fetchers.get(st),At=sy(void 0,zt?zt.data:void 0);I.fetchers.set(st,At),Ee(st),be.controller&&U.set(st,be.controller)}),pe({fetchers:new Map(I.fetchers)});let It=()=>wt.forEach(be=>Ee(be.key));jn.signal.addEventListener("abort",It);let{loaderResults:Ct,fetcherResults:Wt}=yield ue(Ve,wt,Ze,jt);if(jn.signal.aborted)return;jn.signal.removeEventListener("abort",It),H.delete(Pe),U.delete(Pe),wt.forEach(be=>U.delete(be.key));let ln=_S(Ct);if(ln)return W(Ze,ln.result,!1,{preventScrollReset:en});if(ln=_S(Wt),ln)return q.add(ln.key),W(Ze,ln.result,!1,{preventScrollReset:en});let{loaderData:vn,errors:cn}=Az(I,Fe,Ct,void 0,wt,Wt);if(I.fetchers.has(Pe)){let be=lf(yn.data);I.fetchers.set(Pe,be)}Ke(Je),I.navigation.state==="loading"&&Je>B?(sr(M,"Expected pending action"),E&&E.abort(),ye(I.navigation.location,{matches:Fe,loaderData:vn,errors:cn,fetchers:new Map(I.fetchers)})):(pe({errors:cn,loaderData:Tz(I.loaderData,vn,Fe,cn),fetchers:new Map(I.fetchers)}),L=!1)})}function X(Pe,Ue,Xe,vt,Pt,jt,Nt,Yt,en,fn){return te(this,null,function*(){let hn=I.fetchers.get(Pe);Ae(Pe,sy(fn,hn?hn.data:void 0),{flushSync:Yt});let mn=new AbortController,jn=pg(t.history,Xe,mn.signal);if(Nt){let yn=yield Ot(Pt,Xe,jn.signal,Pe);if(yn.type==="aborted")return;if(yn.type==="error"){Ne(Pe,Ue,yn.error,{flushSync:Yt});return}else if(yn.matches)Pt=yn.matches,vt=jy(Pt,Xe);else{Ne(Pe,Ue,nl(404,{pathname:Xe}),{flushSync:Yt});return}}U.set(Pe,mn);let er=$,Wr=sv(i,o,jn,Pt,vt,r,jt),Yn=(yield ve(jn,Wr,jt,Pe))[vt.route.id];if(U.get(Pe)===mn&&U.delete(Pe),!jn.signal.aborted){if(K.has(Pe)){Ae(Pe,lf(void 0));return}if(fp(Yn))if(B>er){Ae(Pe,lf(void 0));return}else{q.add(Pe),yield W(jn,Yn,!1,{preventScrollReset:en});return}if(Sa(Yn)){Ne(Pe,Ue,Yn.error);return}Ae(Pe,lf(Yn.data))}})}function W(Yt,en,fn){return te(this,arguments,function*(Pe,Ue,Xe,{submission:vt,fetcherSubmission:Pt,preventScrollReset:jt,replace:Nt}={}){Ue.response.headers.has("X-Remix-Revalidate")&&(L=!0);let hn=Ue.response.headers.get("Location");sr(hn,"Expected a Location header on the redirect Response"),hn=Ez(hn,new URL(Pe.url),l);let mn=bb(I.location,hn,{_isRedirect:!0});if(n){let yn=!1;if(Ue.response.headers.has("X-Remix-Reload-Document"))yn=!0;else if(e3.test(hn)){const Te=t.history.createURL(hn);yn=Te.origin!==e.location.origin||_l(Te.pathname,l)==null}if(yn){Nt?e.location.replace(hn):e.location.assign(hn);return}}E=null;let jn=Nt===!0||Ue.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:er,formAction:Wr,formEncType:lr}=I.navigation;!vt&&!Pt&&er&&Wr&&lr&&(vt=Rz(I.navigation));let Yn=vt||Pt;if(gDe.has(Ue.response.status)&&Yn&&_a(Yn.formMethod))yield ce(jn,mn,{submission:se(j({},Yn),{formAction:hn}),preventScrollReset:jt||D,enableViewTransition:Xe?_:void 0});else{let yn=AP(mn,vt);yield ce(jn,mn,{overrideNavigation:yn,fetcherSubmission:Pt,preventScrollReset:jt||D,enableViewTransition:Xe?_:void 0})}})}function ve(Pe,Ue,Xe,vt){return te(this,null,function*(){let Pt,jt={};try{Pt=yield CDe(c,Pe,Ue,vt,Xe,!1)}catch(Nt){return Ue.filter(Yt=>Yt.shouldLoad).forEach(Yt=>{jt[Yt.route.id]={type:"error",error:Nt}}),jt}for(let[Nt,Yt]of Object.entries(Pt))if(RDe(Yt)){let en=Yt.result;jt[Nt]={type:"redirect",response:MDe(en,Pe,Nt,Ue,l)}}else jt[Nt]=yield TDe(Yt);return jt})}function ue(Pe,Ue,Xe,vt){return te(this,null,function*(){let Pt=ve(Xe,Pe,vt,null),jt=Promise.all(Ue.map(en=>te(this,null,function*(){if(en.matches&&en.match&&en.request&&en.controller){let hn=(yield ve(en.request,en.matches,vt,en.key))[en.match.route.id];return{[en.key]:hn}}else return Promise.resolve({[en.key]:{type:"error",error:nl(404,{pathname:en.path})}})}))),Nt=yield Pt,Yt=(yield jt).reduce((en,fn)=>Object.assign(en,fn),{});return{loaderResults:Nt,fetcherResults:Yt}})}function Me(){L=!0,z.forEach((Pe,Ue)=>{U.has(Ue)&&N.add(Ue),Ee(Ue)})}function Ae(Pe,Ue,Xe={}){I.fetchers.set(Pe,Ue),pe({fetchers:new Map(I.fetchers)},{flushSync:(Xe&&Xe.flushSync)===!0})}function Ne(Pe,Ue,Xe,vt={}){let Pt=np(I.matches,Ue);Ie(Pe),pe({errors:{[Pt.route.id]:Xe},fetchers:new Map(I.fetchers)},{flushSync:(vt&&vt.flushSync)===!0})}function Re(Pe){return G.set(Pe,(G.get(Pe)||0)+1),K.has(Pe)&&K.delete(Pe),I.fetchers.get(Pe)||vDe}function Ie(Pe){let Ue=I.fetchers.get(Pe);U.has(Pe)&&!(Ue&&Ue.state==="loading"&&H.has(Pe))&&Ee(Pe),z.delete(Pe),H.delete(Pe),q.delete(Pe),K.delete(Pe),N.delete(Pe),I.fetchers.delete(Pe)}function it(Pe){let Ue=(G.get(Pe)||0)-1;Ue<=0?(G.delete(Pe),K.add(Pe)):G.set(Pe,Ue),pe({fetchers:new Map(I.fetchers)})}function Ee(Pe){let Ue=U.get(Pe);Ue&&(Ue.abort(),U.delete(Pe))}function Le(Pe){for(let Ue of Pe){let Xe=Re(Ue),vt=lf(Xe.data);I.fetchers.set(Ue,vt)}}function Ge(){let Pe=[],Ue=!1;for(let Xe of q){let vt=I.fetchers.get(Xe);sr(vt,`Expected fetcher: ${Xe}`),vt.state==="loading"&&(q.delete(Xe),Pe.push(Xe),Ue=!0)}return Le(Pe),Ue}function Ke(Pe){let Ue=[];for(let[Xe,vt]of H)if(vt<Pe){let Pt=I.fetchers.get(Xe);sr(Pt,`Expected fetcher: ${Xe}`),Pt.state==="loading"&&(Ee(Xe),H.delete(Xe),Ue.push(Xe))}return Le(Ue),Ue.length>0}function je(Pe,Ue){let Xe=I.blockers.get(Pe)||oy;return Z.get(Pe)!==Ue&&Z.set(Pe,Ue),Xe}function et(Pe){I.blockers.delete(Pe),Z.delete(Pe)}function lt(Pe,Ue){let Xe=I.blockers.get(Pe)||oy;sr(Xe.state==="unblocked"&&Ue.state==="blocked"||Xe.state==="blocked"&&Ue.state==="blocked"||Xe.state==="blocked"&&Ue.state==="proceeding"||Xe.state==="blocked"&&Ue.state==="unblocked"||Xe.state==="proceeding"&&Ue.state==="unblocked",`Invalid blocker state transition: ${Xe.state} -> ${Ue.state}`);let vt=new Map(I.blockers);vt.set(Pe,Ue),pe({blockers:vt})}function ht({currentLocation:Pe,nextLocation:Ue,historyAction:Xe}){if(Z.size===0)return;Z.size>1&&Hi(!1,"A router only supports one blocker at a time");let vt=Array.from(Z.entries()),[Pt,jt]=vt[vt.length-1],Nt=I.blockers.get(Pt);if(!(Nt&&Nt.state==="proceeding")&&jt({currentLocation:Pe,nextLocation:Ue,historyAction:Xe}))return Pt}function ke(Pe){let Ue=nl(404,{pathname:Pe}),Xe=a||s,{matches:vt,route:Pt}=Pz(Xe);return{notFoundMatches:vt,route:Pt,error:Ue}}function gt(Pe,Ue,Xe){if(p=Pe,v=Ue,b=Xe||null,!m&&I.navigation===CP){m=!0;let vt=at(I.location,I.matches);vt!=null&&pe({restoreScrollPosition:vt})}return()=>{p=null,v=null,b=null}}function tt(Pe,Ue){return b&&b(Pe,Ue.map(vt=>KPe(vt,I.loaderData)))||Pe.key}function yt(Pe,Ue){if(p&&v){let Xe=tt(Pe,Ue);p[Xe]=v()}}function at(Pe,Ue){if(p){let Xe=tt(Pe,Ue),vt=p[Xe];if(typeof vt=="number")return vt}return null}function mt(Pe,Ue,Xe){if(t.patchRoutesOnNavigation)if(Pe){if(Object.keys(Pe[0].params).length>0)return{active:!0,matches:Q_(Ue,Xe,l,!0)}}else return{active:!0,matches:Q_(Ue,Xe,l,!0)||[]};return{active:!1,matches:null}}function Ot(Pe,Ue,Xe,vt){return te(this,null,function*(){if(!t.patchRoutesOnNavigation)return{type:"success",matches:Pe};let Pt=Pe;for(;;){let jt=a==null,Nt=a||s,Yt=o;try{yield t.patchRoutesOnNavigation({signal:Xe,path:Ue,matches:Pt,fetcherKey:vt,patch:(hn,mn)=>{Xe.aborted||bz(hn,mn,Nt,Yt,i)}})}catch(hn){return{type:"error",error:hn,partialMatches:Pt}}finally{jt&&!Xe.aborted&&(s=[...s])}if(Xe.aborted)return{type:"aborted"};let en=yf(Nt,Ue,l);if(en)return{type:"success",matches:en};let fn=Q_(Nt,Ue,l,!0);if(!fn||Pt.length===fn.length&&Pt.every((hn,mn)=>hn.route.id===fn[mn].route.id))return{type:"success",matches:null};Pt=fn}})}function rn(Pe){o={},a=vC(Pe,i,void 0,o)}function on(Pe,Ue){let Xe=a==null;bz(Pe,Ue,a||s,o,i),Xe&&(s=[...s],pe({}))}return P={get basename(){return l},get future(){return u},get state(){return I},get routes(){return s},get window(){return e},initialize:J,subscribe:ne,enableScrollRestoration:gt,navigate:Ce,fetch:ae,revalidate:_e,createHref:Pe=>t.history.createHref(Pe),encodeLocation:Pe=>t.history.encodeLocation(Pe),getFetcher:Re,deleteFetcher:it,dispose:oe,getBlocker:je,deleteBlocker:et,patchRoutes:on,_internalFetchControllers:U,_internalSetRoutes:rn},P}function bDe(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function UI(t,e,n,r,i,o){let s,a;if(i){s=[];for(let c of e)if(s.push(c),c.route.id===i){a=c;break}}else s=e,a=e[e.length-1];let l=fT(r||".",dT(s),_l(t.pathname,n)||t.pathname,o==="path");if(r==null&&(l.search=t.search,l.hash=t.hash),(r==null||r===""||r===".")&&a){let c=t3(l.search);if(a.route.index&&!c)l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index";else if(!a.route.index&&c){let u=new URLSearchParams(l.search),d=u.getAll("index");u.delete("index"),d.filter(p=>p).forEach(p=>u.append("index",p));let f=u.toString();l.search=f?`?${f}`:""}}return n!=="/"&&(l.pathname=l.pathname==="/"?n:Xc([n,l.pathname])),Jf(l)}function yz(t,e,n){if(!n||!bDe(n))return{path:e};if(n.formMethod&&!IDe(n.formMethod))return{path:e,error:nl(405,{method:n.formMethod})};let r=()=>({path:e,error:nl(400,{type:"invalid-body"})}),o=(n.formMethod||"get").toUpperCase(),s=NX(e);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!_a(o))return r();let d=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((f,[p,b])=>`${f}${p}=${b}
`,""):String(n.body);return{path:e,submission:{formMethod:o,formAction:s,formEncType:n.formEncType,formData:void 0,json:void 0,text:d}}}else if(n.formEncType==="application/json"){if(!_a(o))return r();try{let d=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:e,submission:{formMethod:o,formAction:s,formEncType:n.formEncType,formData:void 0,json:d,text:void 0}}}catch(d){return r()}}}sr(typeof FormData=="function","FormData is not available in this environment");let a,l;if(n.formData)a=WI(n.formData),l=n.formData;else if(n.body instanceof FormData)a=WI(n.body),l=n.body;else if(n.body instanceof URLSearchParams)a=n.body,l=Cz(a);else if(n.body==null)a=new URLSearchParams,l=new FormData;else try{a=new URLSearchParams(n.body),l=Cz(a)}catch(d){return r()}let c={formMethod:o,formAction:s,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:l,json:void 0,text:void 0};if(_a(c.formMethod))return{path:e,submission:c};let u=uh(e);return t&&u.search&&t3(u.search)&&a.append("index",""),u.search=`?${a}`,{path:Jf(u),submission:c}}function xz(t,e,n,r,i,o,s,a,l,c,u,d,f,p,b,v,m,g,x){var R;let w=x?Sa(x[1])?x[1].error:x[1].data:void 0,S=i.createURL(o.location),P=i.createURL(l),I;if(u&&o.errors){let F=Object.keys(o.errors)[0];I=s.findIndex(L=>L.route.id===F)}else if(x&&Sa(x[1])){let F=x[0];I=s.findIndex(L=>L.route.id===F)-1}let M=x?x[1].statusCode:void 0,D=M&&M>=400,E=se(j({currentUrl:S,currentParams:((R=o.matches[0])==null?void 0:R.params)||{},nextUrl:P,nextParams:s[0].params},a),{actionResult:w,actionStatus:M}),_=s.map((F,L)=>{let{route:N}=F,U=null;if(I!=null&&L>I?U=!1:N.lazy?U=!0:N.loader==null?U=!1:u?U=zI(N,o.loaderData,o.errors):wDe(o.loaderData,o.matches[L],F)&&(U=!0),U!==null)return VI(n,r,t,F,c,e,U);let $=D?!1:d||S.pathname+S.search===P.pathname+P.search||S.search!==P.search||SDe(o.matches[L],F),B=se(j({},E),{defaultShouldRevalidate:$}),H=bC(F,B);return VI(n,r,t,F,c,e,H,B)}),A=[];return b.forEach((F,L)=>{if(u||!s.some(z=>z.route.id===F.routeId)||p.has(L))return;let N=yf(m,F.path,g);if(!N){A.push({key:L,routeId:F.routeId,path:F.path,matches:null,match:null,request:null,controller:null});return}if(v.has(L))return;let U=o.fetchers.get(L),$=jy(N,F.path),B=new AbortController,H=pg(i,F.path,B.signal),q=null;if(f.has(L))f.delete(L),q=sv(n,r,H,N,$,c,e);else if(U&&U.state!=="idle"&&U.data===void 0)d&&(q=sv(n,r,H,N,$,c,e));else{let z=se(j({},E),{defaultShouldRevalidate:D?!1:d});bC($,z)&&(q=sv(n,r,H,N,$,c,e,z))}q&&A.push({key:L,routeId:F.routeId,path:F.path,matches:q,match:$,request:H,controller:B})}),{dsMatches:_,revalidatingFetchers:A}}function zI(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function wDe(t,e,n){let r=!e||n.route.id!==e.route.id,i=!t.hasOwnProperty(n.route.id);return r||i}function SDe(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function bC(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function bz(t,e,n,r,i){let o;if(t){let l=r[t];sr(l,`No route found to patch children into: routeId = ${t}`),l.children||(l.children=[]),o=l.children}else o=n;let s=e.filter(l=>!o.some(c=>RX(l,c))),a=vC(s,i,[t||"_","patch",String((o==null?void 0:o.length)||"0")],r);o.push(...a)}function RX(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(o=>RX(n,o))}):!1}var wz=new WeakMap,IX=({key:t,route:e,manifest:n,mapRouteProperties:r})=>{let i=n[e.id];if(sr(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let o=i.lazy[t];if(!o)return;let s=wz.get(i);s||(s={},wz.set(i,s));let a=s[t];if(a)return a;let l=te(nt,null,function*(){let c=$Pe(t),d=i[t]!==void 0&&t!=="hasErrorBoundary";if(c)Hi(!c,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),s[t]=Promise.resolve();else if(d)Hi(!1,`Route "${i.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let f=yield o();f!=null&&(Object.assign(i,{[t]:f}),Object.assign(i,r(i)))}typeof i.lazy=="object"&&(i.lazy[t]=void 0,Object.values(i.lazy).every(f=>f===void 0)&&(i.lazy=void 0))});return s[t]=l,l},Sz=new WeakMap;function _De(t,e,n,r,i){let o=n[t.id];if(sr(o,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let u=Sz.get(o);if(u)return{lazyRoutePromise:u,lazyHandlerPromise:u};let d=te(this,null,function*(){sr(typeof t.lazy=="function","No lazy route function found");let f=yield t.lazy(),p={};for(let b in f){let v=f[b];if(v===void 0)continue;let m=GPe(b),x=o[b]!==void 0&&b!=="hasErrorBoundary";m?Hi(!m,"Route property "+b+" is not a supported property to be returned from a lazy route function. This property will be ignored."):x?Hi(!x,`Route "${o.id}" has a static property "${b}" defined but its lazy function is also returning a value for this property. The lazy route property "${b}" will be ignored.`):p[b]=v}Object.assign(o,p),Object.assign(o,se(j({},r(o)),{lazy:void 0}))});return Sz.set(o,d),d.catch(()=>{}),{lazyRoutePromise:d,lazyHandlerPromise:d}}let s=Object.keys(t.lazy),a=[],l;for(let u of s){if(i&&i.includes(u))continue;let d=IX({key:u,route:t,manifest:n,mapRouteProperties:r});d&&(a.push(d),u===e&&(l=d))}let c=a.length>0?Promise.all(a).then(()=>{}):void 0;return c==null||c.catch(()=>{}),l==null||l.catch(()=>{}),{lazyRoutePromise:c,lazyHandlerPromise:l}}function _z(t){return te(this,null,function*(){let e=t.matches.filter(i=>i.shouldLoad),n={};return(yield Promise.all(e.map(i=>i.resolve()))).forEach((i,o)=>{n[e[o].route.id]=i}),n})}function EDe(t){return te(this,null,function*(){return t.matches.some(e=>e.route.unstable_middleware)?kX(t,!1,()=>_z(t),(e,n)=>({[n]:{type:"error",result:e}})):_z(t)})}function kX(t,e,n,r){return te(this,null,function*(){let{matches:i,request:o,params:s,context:a}=t,l={handlerResult:void 0};try{let c=i.flatMap(d=>d.route.unstable_middleware?d.route.unstable_middleware.map(f=>[d.route.id,f]):[]),u=yield FX({request:o,params:s,context:a},c,e,l,n);return e?u:l.handlerResult}catch(c){if(!l.middlewareError)throw c;let u=yield r(l.middlewareError.error,l.middlewareError.routeId);return l.handlerResult?Object.assign(l.handlerResult,u):u}})}function FX(t,e,n,r,i,o=0){return te(this,null,function*(){let{request:s}=t;if(s.signal.aborted)throw s.signal.reason?s.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${s.method} ${s.url}`);let a=e[o];if(!a)return r.handlerResult=yield i(),r.handlerResult;let[l,c]=a,u=!1,d,f=()=>te(this,null,function*(){if(u)throw new Error("You may only call `next()` once per middleware");u=!0,yield FX(t,e,n,r,i,o+1)});try{let p=yield c({request:t.request,params:t.params,context:t.context},f);return u?p===void 0?d:p:f()}catch(p){throw r.middlewareError?r.middlewareError.error!==p&&(r.middlewareError={routeId:l,error:p}):r.middlewareError={routeId:l,error:p},p}})}function OX(t,e,n,r,i){let o=IX({key:"unstable_middleware",route:r.route,manifest:e,mapRouteProperties:t}),s=_De(r.route,_a(n.method)?"action":"loader",e,t,i);return{middleware:o,route:s.lazyRoutePromise,handler:s.lazyHandlerPromise}}function VI(t,e,n,r,i,o,s,a=null){let l=!1,c=OX(t,e,n,r,i);return se(j({},r),{_lazyPromises:c,shouldLoad:s,unstable_shouldRevalidateArgs:a,unstable_shouldCallHandler(u){return l=!0,a?typeof u=="boolean"?bC(r,se(j({},a),{defaultShouldRevalidate:u})):bC(r,a):s},resolve(u){return l||s||u&&n.method==="GET"&&(r.route.lazy||r.route.loader)?ADe({request:n,match:r,lazyHandlerPromise:c==null?void 0:c.handler,lazyRoutePromise:c==null?void 0:c.route,handlerOverride:u,scopedContext:o}):Promise.resolve({type:"data",result:void 0})}})}function sv(t,e,n,r,i,o,s,a=null){return r.map(l=>l.route.id!==i.route.id?se(j({},l),{shouldLoad:!1,unstable_shouldRevalidateArgs:a,unstable_shouldCallHandler:()=>!1,_lazyPromises:OX(t,e,n,l,o),resolve:()=>Promise.resolve({type:"data",result:void 0})}):VI(t,e,n,l,o,s,!0,a))}function CDe(t,e,n,r,i,o){return te(this,null,function*(){n.some(c=>{var u;return(u=c._lazyPromises)==null?void 0:u.middleware})&&(yield Promise.all(n.map(c=>{var u;return(u=c._lazyPromises)==null?void 0:u.middleware})));let s={request:e,params:n[0].params,context:i,matches:n},a=c=>{let u=s;return kX(u,!1,()=>c(se(j({},u),{fetcherKey:r,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}})),(d,f)=>({[f]:{type:"error",result:d}}))},l=yield t(se(j({},s),{fetcherKey:r,unstable_runClientMiddleware:a}));try{yield Promise.all(n.flatMap(c=>{var u,d;return[(u=c._lazyPromises)==null?void 0:u.handler,(d=c._lazyPromises)==null?void 0:d.route]}))}catch(c){}return l})}function ADe(s){return te(this,arguments,function*({request:t,match:e,lazyHandlerPromise:n,lazyRoutePromise:r,handlerOverride:i,scopedContext:o}){let a,l,c=_a(t.method),u=c?"action":"loader",d=f=>{let p,b=new Promise((g,x)=>p=x);l=()=>p(),t.signal.addEventListener("abort",l);let v=g=>typeof f!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${u}" [routeId: ${e.route.id}]`)):f({request:t,params:e.params,context:o},...g!==void 0?[g]:[]),m=te(this,null,function*(){try{return{type:"data",result:yield i?i(x=>v(x)):v()}}catch(g){return{type:"error",result:g}}});return Promise.race([m,b])};try{let f=c?e.route.action:e.route.loader;if(n||r)if(f){let p,[b]=yield Promise.all([d(f).catch(v=>{p=v}),n,r]);if(p!==void 0)throw p;a=b}else{yield n;let p=c?e.route.action:e.route.loader;if(p)[a]=yield Promise.all([d(p),r]);else if(u==="action"){let b=new URL(t.url),v=b.pathname+b.search;throw nl(405,{method:t.method,pathname:v,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(f)a=yield d(f);else{let p=new URL(t.url),b=p.pathname+p.search;throw nl(404,{pathname:b})}}catch(f){return{type:"error",result:f}}finally{l&&t.signal.removeEventListener("abort",l)}return a})}function TDe(t){return te(this,null,function*(){var r,i,o,s,a,l;let{result:e,type:n}=t;if(LX(e)){let c;try{let u=e.headers.get("Content-Type");u&&/\bapplication\/json\b/.test(u)?e.body==null?c=null:c=yield e.json():c=yield e.text()}catch(u){return{type:"error",error:u}}return n==="error"?{type:"error",error:new xC(e.status,e.statusText,c),statusCode:e.status,headers:e.headers}:{type:"data",data:c,statusCode:e.status,headers:e.headers}}return n==="error"?Dz(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new xC(((o=e.init)==null?void 0:o.status)||500,void 0,e.data),statusCode:Nv(e)?e.status:void 0,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Nv(e)?e.status:void 0}:Dz(e)?{type:"data",data:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}})}function MDe(t,e,n,r,i){let o=t.headers.get("Location");if(sr(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!e3.test(o)){let s=r.slice(0,r.findIndex(a=>a.route.id===n)+1);o=UI(new URL(e.url),s,i,o),t.headers.set("Location",o)}return t}function Ez(t,e,n){if(e3.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),o=_l(i.pathname,n)!=null;if(i.origin===e.origin&&o)return i.pathname+i.search+i.hash}return t}function pg(t,e,n,r){let i=t.createURL(NX(e)).toString(),o={signal:n};if(r&&_a(r.formMethod)){let{formMethod:s,formEncType:a}=r;o.method=s.toUpperCase(),a==="application/json"?(o.headers=new Headers({"Content-Type":a}),o.body=JSON.stringify(r.json)):a==="text/plain"?o.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?o.body=WI(r.formData):o.body=r.formData}return new Request(i,o)}function WI(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function Cz(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function PDe(t,e,n,r=!1,i=!1){let o={},s=null,a,l=!1,c={},u=n&&Sa(n[1])?n[1].error:void 0;return t.forEach(d=>{if(!(d.route.id in e))return;let f=d.route.id,p=e[f];if(sr(!fp(p),"Cannot handle redirect results in processLoaderData"),Sa(p)){let b=p.error;if(u!==void 0&&(b=u,u=void 0),s=s||{},i)s[f]=b;else{let v=np(t,f);s[v.route.id]==null&&(s[v.route.id]=b)}r||(o[f]=DX),l||(l=!0,a=Nv(p.error)?p.error.status:500),p.headers&&(c[f]=p.headers)}else o[f]=p.data,p.statusCode&&p.statusCode!==200&&!l&&(a=p.statusCode),p.headers&&(c[f]=p.headers)}),u!==void 0&&n&&(s={[n[0]]:u},o[n[0]]=void 0),{loaderData:o,errors:s,statusCode:a||200,loaderHeaders:c}}function Az(t,e,n,r,i,o){let{loaderData:s,errors:a}=PDe(e,n,r);return i.filter(l=>!l.matches||l.matches.some(c=>c.shouldLoad)).forEach(l=>{let{key:c,match:u,controller:d}=l,f=o[c];if(sr(f,"Did not find corresponding fetcher result"),!(d&&d.signal.aborted))if(Sa(f)){let p=np(t.matches,u==null?void 0:u.route.id);a&&a[p.route.id]||(a=se(j({},a),{[p.route.id]:f.error})),t.fetchers.delete(c)}else if(fp(f))sr(!1,"Unhandled fetcher revalidation redirect");else{let p=lf(f.data);t.fetchers.set(c,p)}}),{loaderData:s,errors:a}}function Tz(t,e,n,r){let i=Object.entries(e).filter(([,o])=>o!==DX).reduce((o,[s,a])=>(o[s]=a,o),{});for(let o of n){let s=o.route.id;if(!e.hasOwnProperty(s)&&t.hasOwnProperty(s)&&o.route.loader&&(i[s]=t[s]),r&&r.hasOwnProperty(s))break}return i}function Mz(t){return t?Sa(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function np(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Pz(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function nl(t,{pathname:e,routeId:n,method:r,type:i,message:o}={}){let s="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(s="Bad Request",r&&e&&n?a=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:i==="invalid-body"&&(a="Unable to encode submission body")):t===403?(s="Forbidden",a=`Route "${n}" does not match URL "${e}"`):t===404?(s="Not Found",a=`No route matches URL "${e}"`):t===405&&(s="Method Not Allowed",r&&e&&n?a=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:r&&(a=`Invalid request method "${r.toUpperCase()}"`)),new xC(t||500,s,new Error(a),!0)}function _S(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(fp(i))return{key:r,result:i}}}function NX(t){let e=typeof t=="string"?uh(t):t;return Jf(se(j({},e),{hash:""}))}function DDe(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function RDe(t){return LX(t.result)&&mDe.has(t.result.status)}function Sa(t){return t.type==="error"}function fp(t){return(t&&t.type)==="redirect"}function Dz(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function LX(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body!="undefined"}function IDe(t){return pDe.has(t.toUpperCase())}function _a(t){return fDe.has(t.toUpperCase())}function t3(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function jy(t,e){let n=typeof e=="string"?uh(e).search:e.search;if(t[t.length-1].route.index&&t3(n||""))return t[t.length-1];let r=TX(t);return r[r.length-1]}function Rz(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:o,json:s}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:e,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0};if(s!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:s,text:void 0}}}function AP(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function kDe(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function sy(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function FDe(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function lf(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function ODe(t,e){try{let n=t.sessionStorage.getItem(PX);if(n){let r=JSON.parse(n);for(let[i,o]of Object.entries(r||{}))o&&Array.isArray(o)&&e.set(i,new Set(o||[]))}}catch(n){}}function NDe(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(PX,JSON.stringify(n))}catch(r){Hi(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function LDe(){let t,e,n=new Promise((r,i)=>{t=o=>te(this,null,function*(){r(o);try{yield n}catch(s){}}),e=o=>te(this,null,function*(){i(o);try{yield n}catch(s){}})});return{promise:n,resolve:t,reject:e}}var dm=T.createContext(null);dm.displayName="DataRouter";var _w=T.createContext(null);_w.displayName="DataRouterState";var n3=T.createContext({isTransitioning:!1});n3.displayName="ViewTransition";var BX=T.createContext(new Map);BX.displayName="Fetchers";var BDe=T.createContext(null);BDe.displayName="Await";var gc=T.createContext(null);gc.displayName="Navigation";var hT=T.createContext(null);hT.displayName="Location";var Ml=T.createContext({outlet:null,matches:[],isDataRoute:!1});Ml.displayName="Route";var r3=T.createContext(null);r3.displayName="RouteError";function jDe(t,{relative:e}={}){sr(a0(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=T.useContext(gc),{hash:i,pathname:o,search:s}=Ew(t,{relative:e}),a=o;return n!=="/"&&(a=o==="/"?n:Xc([n,o])),r.createHref({pathname:a,search:s,hash:i})}function a0(){return T.useContext(hT)!=null}function gs(){return sr(a0(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(hT).location}var jX="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function UX(t){T.useContext(gc).static||T.useLayoutEffect(t)}function Pr(){let{isDataRoute:t}=T.useContext(Ml);return t?JDe():UDe()}function UDe(){sr(a0(),"useNavigate() may be used only in the context of a <Router> component.");let t=T.useContext(dm),{basename:e,navigator:n}=T.useContext(gc),{matches:r}=T.useContext(Ml),{pathname:i}=gs(),o=JSON.stringify(dT(r)),s=T.useRef(!1);return UX(()=>{s.current=!0}),T.useCallback((l,c={})=>{if(Hi(s.current,jX),!s.current)return;if(typeof l=="number"){n.go(l);return}let u=fT(l,JSON.parse(o),i,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Xc([e,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[e,n,o,i,t])}var zX=T.createContext(null);function zDe(){return T.useContext(zX)}function VDe(t){let e=T.useContext(Ml).outlet;return e&&T.createElement(zX.Provider,{value:t},e)}function Pd(){let{matches:t}=T.useContext(Ml),e=t[t.length-1];return e?e.params:{}}function Ew(t,{relative:e}={}){let{matches:n}=T.useContext(Ml),{pathname:r}=gs(),i=JSON.stringify(dT(n));return T.useMemo(()=>fT(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function WDe(t,e,n,r){sr(a0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:o}=T.useContext(gc),{matches:s}=T.useContext(Ml),a=s[s.length-1],l=a?a.params:{},c=a?a.pathname:"/",u=a?a.pathnameBase:"/",d=a&&a.route;{let x=d&&d.path||"";WX(c,!d||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let f=gs(),p;p=f;let b=p.pathname||"/",v=b;if(u!=="/"){let x=u.replace(/^\//,"").split("/");v="/"+b.replace(/^\//,"").split("/").slice(x.length).join("/")}let m=!o&&n&&n.matches&&n.matches.length>0?n.matches:yf(t,{pathname:v});return Hi(d||m!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Hi(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),KDe(m&&m.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Xc([u,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?u:Xc([u,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r)}function $De(){let t=VX(),e=Nv(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=T.createElement(T.Fragment,null,T.createElement("p",null,"💿 Hey developer 👋"),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:o},"ErrorBoundary")," or"," ",T.createElement("code",{style:o},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),n?T.createElement("pre",{style:i},n):null,s)}var HDe=T.createElement($De,null),GDe=class extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?T.createElement(Ml.Provider,{value:this.props.routeContext},T.createElement(r3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function qDe({routeContext:t,match:e,children:n}){let r=T.useContext(dm);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),T.createElement(Ml.Provider,{value:t},n)}function KDe(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let l=i.findIndex(c=>c.route.id&&(o==null?void 0:o[c.route.id])!==void 0);sr(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let s=!1,a=-1;if(n)for(let l=0;l<i.length;l++){let c=i[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:u,errors:d}=n,f=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!d||d[c.route.id]===void 0);if(c.route.lazy||f){s=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,c,u)=>{let d,f=!1,p=null,b=null;n&&(d=o&&c.route.id?o[c.route.id]:void 0,p=c.route.errorElement||HDe,s&&(a<0&&u===0?(WX("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,b=null):a===u&&(f=!0,b=c.route.hydrateFallbackElement||null)));let v=e.concat(i.slice(0,u+1)),m=()=>{let g;return d?g=p:f?g=b:c.route.Component?g=T.createElement(c.route.Component,null):c.route.element?g=c.route.element:g=l,T.createElement(qDe,{match:c,routeContext:{outlet:l,matches:v,isDataRoute:n!=null},children:g})};return n&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?T.createElement(GDe,{location:n.location,revalidation:n.revalidation,component:p,error:d,children:m(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):m()},null)}function i3(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YDe(t){let e=T.useContext(dm);return sr(e,i3(t)),e}function XDe(t){let e=T.useContext(_w);return sr(e,i3(t)),e}function QDe(t){let e=T.useContext(Ml);return sr(e,i3(t)),e}function o3(t){let e=QDe(t),n=e.matches[e.matches.length-1];return sr(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function ZDe(){return o3("useRouteId")}function VX(){var r;let t=T.useContext(r3),e=XDe("useRouteError"),n=o3("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function JDe(){let{router:t}=YDe("useNavigate"),e=o3("useNavigate"),n=T.useRef(!1);return UX(()=>{n.current=!0}),T.useCallback((s,...a)=>te(this,[s,...a],function*(i,o={}){Hi(n.current,jX),n.current&&(typeof i=="number"?t.navigate(i):yield t.navigate(i,j({fromRouteId:e},o)))}),[t,e])}var Iz={};function WX(t,e,n){!e&&!Iz[t]&&(Iz[t]=!0,Hi(!1,n))}var kz={};function Fz(t,e){!t&&!kz[e]&&(kz[e]=!0,console.warn(e))}function eRe(t){let e={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&Hi(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:T.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&Hi(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:T.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&Hi(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:T.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),e}var tRe=["HydrateFallback","hydrateFallbackElement"],nRe=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function rRe({router:t,flushSync:e}){let[n,r]=T.useState(t.state),[i,o]=T.useState(),[s,a]=T.useState({isTransitioning:!1}),[l,c]=T.useState(),[u,d]=T.useState(),[f,p]=T.useState(),b=T.useRef(new Map),v=T.useCallback((w,{deletedFetchers:S,flushSync:P,viewTransitionOpts:I})=>{w.fetchers.forEach((D,E)=>{D.data!==void 0&&b.current.set(E,D.data)}),S.forEach(D=>b.current.delete(D)),Fz(P===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let M=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(Fz(I==null||M,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!I||!M){e&&P?e(()=>r(w)):T.startTransition(()=>r(w));return}if(e&&P){e(()=>{u&&(l&&l.resolve(),u.skipTransition()),a({isTransitioning:!0,flushSync:!0,currentLocation:I.currentLocation,nextLocation:I.nextLocation})});let D=t.window.document.startViewTransition(()=>{e(()=>r(w))});D.finished.finally(()=>{e(()=>{c(void 0),d(void 0),o(void 0),a({isTransitioning:!1})})}),e(()=>d(D));return}u?(l&&l.resolve(),u.skipTransition(),p({state:w,currentLocation:I.currentLocation,nextLocation:I.nextLocation})):(o(w),a({isTransitioning:!0,flushSync:!1,currentLocation:I.currentLocation,nextLocation:I.nextLocation}))},[t.window,e,u,l]);T.useLayoutEffect(()=>t.subscribe(v),[t,v]),T.useEffect(()=>{s.isTransitioning&&!s.flushSync&&c(new nRe)},[s]),T.useEffect(()=>{if(l&&i&&t.window){let w=i,S=l.promise,P=t.window.document.startViewTransition(()=>te(this,null,function*(){T.startTransition(()=>r(w)),yield S}));P.finished.finally(()=>{c(void 0),d(void 0),o(void 0),a({isTransitioning:!1})}),d(P)}},[i,l,t.window]),T.useEffect(()=>{l&&i&&n.location.key===i.location.key&&l.resolve()},[l,u,n.location,i]),T.useEffect(()=>{!s.isTransitioning&&f&&(o(f.state),a({isTransitioning:!0,flushSync:!1,currentLocation:f.currentLocation,nextLocation:f.nextLocation}),p(void 0))},[s.isTransitioning,f]);let m=T.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:w=>t.navigate(w),push:(w,S,P)=>t.navigate(w,{state:S,preventScrollReset:P==null?void 0:P.preventScrollReset}),replace:(w,S,P)=>t.navigate(w,{replace:!0,state:S,preventScrollReset:P==null?void 0:P.preventScrollReset})}),[t]),g=t.basename||"/",x=T.useMemo(()=>({router:t,navigator:m,static:!1,basename:g}),[t,m,g]);return T.createElement(T.Fragment,null,T.createElement(dm.Provider,{value:x},T.createElement(_w.Provider,{value:n},T.createElement(BX.Provider,{value:b.current},T.createElement(n3.Provider,{value:s},T.createElement(aRe,{basename:g,location:n.location,navigationType:n.historyAction,navigator:m},T.createElement(iRe,{routes:t.routes,future:t.future,state:n})))))),null)}var iRe=T.memo(oRe);function oRe({routes:t,future:e,state:n}){return WDe(t,void 0,n,e)}function Oz({to:t,replace:e,state:n,relative:r}){sr(a0(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=T.useContext(gc);Hi(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=T.useContext(Ml),{pathname:s}=gs(),a=Pr(),l=fT(t,dT(o),s,r==="path"),c=JSON.stringify(l);return T.useEffect(()=>{a(JSON.parse(c),{replace:e,state:n,relative:r})},[a,c,r,e,n]),null}function sRe(t){return VDe(t.context)}function aRe({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){sr(!a0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),a=T.useMemo(()=>({basename:s,navigator:i,static:o,future:{}}),[s,i,o]);typeof n=="string"&&(n=uh(n));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:f="default"}=n,p=T.useMemo(()=>{let b=_l(l,s);return b==null?null:{location:{pathname:b,search:c,hash:u,state:d,key:f},navigationType:r}},[s,l,c,u,d,f,r]);return Hi(p!=null,`<Router basename="${s}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:T.createElement(gc.Provider,{value:a},T.createElement(hT.Provider,{children:e,value:p}))}var Z_="get",J_="application/x-www-form-urlencoded";function pT(t){return t!=null&&typeof t.tagName=="string"}function lRe(t){return pT(t)&&t.tagName.toLowerCase()==="button"}function cRe(t){return pT(t)&&t.tagName.toLowerCase()==="form"}function uRe(t){return pT(t)&&t.tagName.toLowerCase()==="input"}function dRe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function fRe(t,e){return t.button===0&&(!e||e==="_self")&&!dRe(t)}function $I(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function hRe(t,e){let n=$I(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(o=>{n.append(i,o)})}),n}var ES=null;function pRe(){if(ES===null)try{new FormData(document.createElement("form"),0),ES=!1}catch(t){ES=!0}return ES}var mRe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function TP(t){return t!=null&&!mRe.has(t)?(Hi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${J_}"`),null):t}function gRe(t,e){let n,r,i,o,s;if(cRe(t)){let a=t.getAttribute("action");r=a?_l(a,e):null,n=t.getAttribute("method")||Z_,i=TP(t.getAttribute("enctype"))||J_,o=new FormData(t)}else if(lRe(t)||uRe(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?_l(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||Z_,i=TP(t.getAttribute("formenctype"))||TP(a.getAttribute("enctype"))||J_,o=new FormData(a,t),!pRe()){let{name:c,type:u,value:d}=t;if(u==="image"){let f=c?`${c}.`:"";o.append(`${f}x`,"0"),o.append(`${f}y`,"0")}else c&&o.append(c,d)}}else{if(pT(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Z_,r=null,i=J_,s=t}return o&&i==="text/plain"&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}function s3(t,e){if(t===!1||t===null||typeof t=="undefined")throw new Error(e)}function vRe(t,e){return te(this,null,function*(){if(t.id in e)return e[t.id];try{let n=yield import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}})}function yRe(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}function xRe(t,e,n){return te(this,null,function*(){let r=yield Promise.all(t.map(i=>te(this,null,function*(){let o=e.routes[i.route.id];if(o){let s=yield vRe(o,n);return s.links?s.links():[]}return[]})));return _Re(r.flat(1).filter(yRe).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?se(j({},i),{rel:"prefetch",as:"style"}):se(j({},i),{rel:"prefetch"})))})}function Nz(t,e,n,r,i,o){let s=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var u;return n[c].pathname!==l.pathname||((u=n[c].route.path)==null?void 0:u.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return o==="assets"?e.filter((l,c)=>s(l,c)||a(l,c)):o==="data"?e.filter((l,c)=>{var d;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(s(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function bRe(t,e,{includeHydrateFallback:n}={}){return wRe(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function wRe(t){return[...new Set(t)]}function SRe(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function _Re(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let o=JSON.stringify(SRe(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}var ERe=new Set([100,101,204,205]);function CRe(t,e){let n=typeof t=="string"?new URL(t,typeof window=="undefined"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&_l(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function $X(){let t=T.useContext(dm);return s3(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function ARe(){let t=T.useContext(_w);return s3(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var a3=T.createContext(void 0);a3.displayName="FrameworkContext";function HX(){let t=T.useContext(a3);return s3(t,"You must render this element inside a <HydratedRouter> element"),t}function TRe(t,e){let n=T.useContext(a3),[r,i]=T.useState(!1),[o,s]=T.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=e,f=T.useRef(null);T.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let v=g=>{g.forEach(x=>{s(x.isIntersecting)})},m=new IntersectionObserver(v,{threshold:.5});return f.current&&m.observe(f.current),()=>{m.disconnect()}}},[t]),T.useEffect(()=>{if(r){let v=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(v)}}},[r]);let p=()=>{i(!0)},b=()=>{i(!1),s(!1)};return n?t!=="intent"?[o,f,{}]:[o,f,{onFocus:ay(a,p),onBlur:ay(l,b),onMouseEnter:ay(c,p),onMouseLeave:ay(u,b),onTouchStart:ay(d,p)}]:[!1,f,{}]}function ay(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function MRe(n){var r=n,{page:t}=r,e=Dt(r,["page"]);let{router:i}=$X(),o=T.useMemo(()=>yf(i.routes,t,i.basename),[i.routes,t,i.basename]);return o?T.createElement(DRe,j({page:t,matches:o},e)):null}function PRe(t){let{manifest:e,routeModules:n}=HX(),[r,i]=T.useState([]);return T.useEffect(()=>{let o=!1;return xRe(t,e,n).then(s=>{o||i(s)}),()=>{o=!0}},[t,e,n]),r}function DRe(r){var i=r,{page:t,matches:e}=i,n=Dt(i,["page","matches"]);let o=gs(),{manifest:s,routeModules:a}=HX(),{basename:l}=$X(),{loaderData:c,matches:u}=ARe(),d=T.useMemo(()=>Nz(t,e,u,s,o,"data"),[t,e,u,s,o]),f=T.useMemo(()=>Nz(t,e,u,s,o,"assets"),[t,e,u,s,o]),p=T.useMemo(()=>{if(t===o.pathname+o.search+o.hash)return[];let m=new Set,g=!1;if(e.forEach(w=>{var P;let S=s.routes[w.route.id];!S||!S.hasLoader||(!d.some(I=>I.route.id===w.route.id)&&w.route.id in c&&((P=a[w.route.id])!=null&&P.shouldRevalidate)||S.hasClientLoader?g=!0:m.add(w.route.id))}),m.size===0)return[];let x=CRe(t,l);return g&&m.size>0&&x.searchParams.set("_routes",e.filter(w=>m.has(w.route.id)).map(w=>w.route.id).join(",")),[x.pathname+x.search]},[l,c,o,s,d,e,t,a]),b=T.useMemo(()=>bRe(f,s),[f,s]),v=PRe(f);return T.createElement(T.Fragment,null,p.map(m=>T.createElement("link",j({key:m,rel:"prefetch",as:"fetch",href:m},n))),b.map(m=>T.createElement("link",j({key:m,rel:"modulepreload",href:m},n))),v.map(({key:m,link:g})=>T.createElement("link",j({key:m},g))))}function RRe(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var GX=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";try{GX&&(window.__reactRouterVersion="7.5.2")}catch(t){}function IRe(t,e){return xDe({basename:e==null?void 0:e.basename,unstable_getContext:e==null?void 0:e.unstable_getContext,future:e==null?void 0:e.future,history:UPe({window:e==null?void 0:e.window}),hydrationData:kRe(),routes:t,mapRouteProperties:eRe,hydrationRouteProperties:tRe,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function kRe(){let t=window==null?void 0:window.__staticRouterHydrationData;return t&&t.errors&&(t=se(j({},t),{errors:FRe(t.errors)})),t}function FRe(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new xC(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let s=new o(i.message);s.stack="",n[r]=s}catch(s){}}if(n[r]==null){let o=new Error(i.message);o.stack="",n[r]=o}}else n[r]=i;return n}var qX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hu=T.forwardRef(function(b,p){var v=b,{onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:s,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d}=v,f=Dt(v,["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"]);let{basename:m}=T.useContext(gc),g=typeof c=="string"&&qX.test(c),x,w=!1;if(typeof c=="string"&&g&&(x=c,GX))try{let A=new URL(window.location.href),R=c.startsWith("//")?new URL(A.protocol+c):new URL(c),F=_l(R.pathname,m);R.origin===A.origin&&F!=null?c=F+R.search+R.hash:w=!0}catch(A){Hi(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=jDe(c,{relative:i}),[P,I,M]=TRe(r,f),D=BRe(c,{replace:s,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:d});function E(A){e&&e(A),A.defaultPrevented||D(A)}let _=T.createElement("a",se(j(j({},f),M),{href:x||S,onClick:w||o?e:E,ref:RRe(p,I),target:l,"data-discover":!g&&n==="render"?"true":void 0}));return P&&!g?T.createElement(T.Fragment,null,_,T.createElement(MRe,{page:S})):_});Hu.displayName="Link";var ORe=T.forwardRef(function(d,u){var f=d,{"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:s,viewTransition:a,children:l}=f,c=Dt(f,["aria-current","caseSensitive","className","end","style","to","viewTransition","children"]);let p=Ew(s,{relative:c.relative}),b=gs(),v=T.useContext(_w),{navigator:m,basename:g}=T.useContext(gc),x=v!=null&&WRe(p)&&a===!0,w=m.encodeLocation?m.encodeLocation(p).pathname:p.pathname,S=b.pathname,P=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(S=S.toLowerCase(),P=P?P.toLowerCase():null,w=w.toLowerCase()),P&&g&&(P=_l(P,g)||P);const I=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let M=S===w||!i&&S.startsWith(w)&&S.charAt(I)==="/",D=P!=null&&(P===w||!i&&P.startsWith(w)&&P.charAt(w.length)==="/"),E={isActive:M,isPending:D,isTransitioning:x},_=M?e:void 0,A;typeof r=="function"?A=r(E):A=[r,M?"active":null,D?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let R=typeof o=="function"?o(E):o;return T.createElement(Hu,se(j({},c),{"aria-current":_,className:A,ref:u,style:R,to:s,viewTransition:a}),typeof l=="function"?l(E):l)});ORe.displayName="NavLink";var NRe=T.forwardRef((b,p)=>{var v=b,{discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:s=Z_,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d}=v,f=Dt(v,["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"]);let m=zRe(),g=VRe(a,{relative:c}),x=s.toLowerCase()==="get"?"get":"post",w=typeof a=="string"&&qX.test(a),S=P=>{if(l&&l(P),P.defaultPrevented)return;P.preventDefault();let I=P.nativeEvent.submitter,M=(I==null?void 0:I.getAttribute("formmethod"))||s;m(I||P.currentTarget,{fetcherKey:e,method:M,navigate:n,replace:i,state:o,relative:c,preventScrollReset:u,viewTransition:d})};return T.createElement("form",se(j({ref:p,method:x,action:g,onSubmit:r?l:S},f),{"data-discover":!w&&t==="render"?"true":void 0}))});NRe.displayName="Form";function LRe(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KX(t){let e=T.useContext(dm);return sr(e,LRe(t)),e}function BRe(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:s}={}){let a=Pr(),l=gs(),c=Ew(t,{relative:o});return T.useCallback(u=>{if(fRe(u,e)){u.preventDefault();let d=n!==void 0?n:Jf(l)===Jf(c);a(t,{replace:d,state:r,preventScrollReset:i,relative:o,viewTransition:s})}},[l,a,c,n,r,e,t,i,o,s])}function dh(t){Hi(typeof URLSearchParams!="undefined","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=T.useRef($I(t)),n=T.useRef(!1),r=gs(),i=T.useMemo(()=>hRe(r.search,n.current?null:e.current),[r.search]),o=Pr(),s=T.useCallback((a,l)=>{const c=$I(typeof a=="function"?a(i):a);n.current=!0,o("?"+c,l)},[o,i]);return[i,s]}var jRe=0,URe=()=>`__${String(++jRe)}__`;function zRe(){let{router:t}=KX("useSubmit"),{basename:e}=T.useContext(gc),n=ZDe();return T.useCallback((o,...s)=>te(this,[o,...s],function*(r,i={}){let{action:a,method:l,encType:c,formData:u,body:d}=gRe(r,e);if(i.navigate===!1){let f=i.fetcherKey||URe();yield t.fetch(f,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||l,formEncType:i.encType||c,flushSync:i.flushSync})}else yield t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||l,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})}),[t,e,n])}function VRe(t,{relative:e}={}){let{basename:n}=T.useContext(gc),r=T.useContext(Ml);sr(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o=j({},Ew(t||".",{relative:e})),s=gs();if(t==null){o.search=s.search;let a=new URLSearchParams(o.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let u=a.toString();o.search=u?`?${u}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Xc([n,o.pathname])),Jf(o)}function WRe(t,e={}){let n=T.useContext(n3);sr(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=KX("useViewTransitionState"),i=Ew(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=_l(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=_l(n.nextLocation.pathname,r)||n.nextLocation.pathname;return yC(i.pathname,s)!=null||yC(i.pathname,o)!=null}new TextEncoder;[...ERe];/**
 * react-router v7.5.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $Re(t){return T.createElement(rRe,j({flushSync:ec.flushSync},t))}var Lz={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YX=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},HRe=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],a=t[n++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},XX={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,s||(f=64)),r.push(n[u],n[d],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(YX(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):HRe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||c==null||d==null)throw new GRe;const f=o<<2|a>>4;if(r.push(f),c!==64){const p=a<<4&240|c>>2;if(r.push(p),d!==64){const b=c<<6&192|d;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class GRe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qRe=function(t){const e=YX(t);return XX.encodeByteArray(e,!0)},wC=function(t){return qRe(t).replace(/\./g,"")},QX=function(t){try{return XX.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KRe(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YRe=()=>KRe().__FIREBASE_DEFAULTS__,XRe=()=>{if(typeof process=="undefined"||typeof Lz=="undefined")return;const t=Lz.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},QRe=()=>{if(typeof document=="undefined")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&QX(t[1]);return e&&JSON.parse(e)},mT=()=>{try{return YRe()||XRe()||QRe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ZX=t=>{var e,n;return(n=(e=mT())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},l3=t=>{const e=ZX(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},JX=()=>{var t;return(t=mT())===null||t===void 0?void 0:t.config},eQ=t=>{var e;return(e=mT())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZRe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tQ(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[wC(JSON.stringify(n)),wC(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JRe(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ms())}function eIe(){var t;const e=(t=mT())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(n){return!1}}function tIe(){return typeof navigator!="undefined"&&navigator.userAgent==="Cloudflare-Workers"}function nQ(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nIe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rIe(){const t=ms();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function iIe(){return!eIe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rQ(){try{return typeof indexedDB=="object"}catch(t){return!1}}function iQ(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function oIe(){return!(typeof navigator=="undefined"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sIe="FirebaseError";class Pl extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=sIe,Object.setPrototypeOf(this,Pl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fm.prototype.create)}}class fm{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?aIe(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Pl(i,a,r)}}function aIe(t,e){return t.replace(lIe,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const lIe=/\{\$([^}]+)}/g;function cIe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wb(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(Bz(o)&&Bz(s)){if(!wb(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Bz(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Uy(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function zy(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function uIe(t,e){const n=new dIe(t,e);return n.subscribe.bind(n)}class dIe{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");fIe(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=MP),i.error===void 0&&(i.error=MP),i.complete===void 0&&(i.complete=MP);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(s){}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fIe(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function MP(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hIe=1e3,pIe=2,mIe=4*60*60*1e3,gIe=.5;function jz(t,e=hIe,n=pIe){const r=e*Math.pow(n,t),i=Math.round(gIe*r*(Math.random()-.5)*2);return Math.min(mIe,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(t){return t&&t._delegate?t._delegate:t}class Na{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vIe{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ZRe;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch(i){}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xIe(e))try{this.getOrInitializeService({instanceIdentifier:Kh})}catch(n){}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch(o){}}}}clearInstance(e=Kh){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return te(this,null,function*(){const e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Kh){return this.instances.has(e)}getOptions(e=Kh){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch(o){}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yIe(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(i){}return r||null}normalizeInstanceIdentifier(e=Kh){return this.component?this.component.multipleInstances?e:Kh:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yIe(t){return t===Kh?void 0:t}function xIe(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bIe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new vIe(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var br;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(br||(br={}));const wIe={debug:br.DEBUG,verbose:br.VERBOSE,info:br.INFO,warn:br.WARN,error:br.ERROR,silent:br.SILENT},SIe=br.INFO,_Ie={[br.DEBUG]:"log",[br.VERBOSE]:"log",[br.INFO]:"info",[br.WARN]:"warn",[br.ERROR]:"error"},EIe=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=_Ie[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gT{constructor(e){this.name=e,this._logLevel=SIe,this._logHandler=EIe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in br))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wIe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,br.DEBUG,...e),this._logHandler(this,br.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,br.VERBOSE,...e),this._logHandler(this,br.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,br.INFO,...e),this._logHandler(this,br.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,br.WARN,...e),this._logHandler(this,br.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,br.ERROR,...e),this._logHandler(this,br.ERROR,...e)}}const CIe=(t,e)=>e.some(n=>t instanceof n);let Uz,zz;function AIe(){return Uz||(Uz=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TIe(){return zz||(zz=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oQ=new WeakMap,HI=new WeakMap,sQ=new WeakMap,PP=new WeakMap,c3=new WeakMap;function MIe(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(zf(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&oQ.set(n,t)}).catch(()=>{}),c3.set(e,t),e}function PIe(t){if(HI.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});HI.set(t,e)}let GI={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return HI.get(t);if(e==="objectStoreNames")return t.objectStoreNames||sQ.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zf(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function DIe(t){GI=t(GI)}function RIe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(DP(this),e,...n);return sQ.set(r,e.sort?e.sort():[e]),zf(r)}:TIe().includes(t)?function(...e){return t.apply(DP(this),e),zf(oQ.get(this))}:function(...e){return zf(t.apply(DP(this),e))}}function IIe(t){return typeof t=="function"?RIe(t):(t instanceof IDBTransaction&&PIe(t),CIe(t,AIe())?new Proxy(t,GI):t)}function zf(t){if(t instanceof IDBRequest)return MIe(t);if(PP.has(t))return PP.get(t);const e=IIe(t);return e!==t&&(PP.set(t,e),c3.set(e,t)),e}const DP=t=>c3.get(t);function aQ(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=zf(s);return r&&s.addEventListener("upgradeneeded",l=>{r(zf(s.result),l.oldVersion,l.newVersion,zf(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const kIe=["get","getKey","getAll","getAllKeys","count"],FIe=["put","add","delete","clear"],RP=new Map;function Vz(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(RP.get(e))return RP.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=FIe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||kIe.includes(n)))return;const o=function(s,...a){return te(this,null,function*(){const l=this.transaction(s,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(yield Promise.all([c[n](...a),i&&l.done]))[0]})};return RP.set(e,o),o}DIe(t=>se(j({},t),{get:(e,n,r)=>Vz(e,n)||t.get(e,n,r),has:(e,n)=>!!Vz(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OIe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(NIe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function NIe(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qI="@firebase/app",Wz="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=new gT("@firebase/app"),LIe="@firebase/app-compat",BIe="@firebase/analytics-compat",jIe="@firebase/analytics",UIe="@firebase/app-check-compat",zIe="@firebase/app-check",VIe="@firebase/auth",WIe="@firebase/auth-compat",$Ie="@firebase/database",HIe="@firebase/data-connect",GIe="@firebase/database-compat",qIe="@firebase/functions",KIe="@firebase/functions-compat",YIe="@firebase/installations",XIe="@firebase/installations-compat",QIe="@firebase/messaging",ZIe="@firebase/messaging-compat",JIe="@firebase/performance",eke="@firebase/performance-compat",tke="@firebase/remote-config",nke="@firebase/remote-config-compat",rke="@firebase/storage",ike="@firebase/storage-compat",oke="@firebase/firestore",ske="@firebase/vertexai-preview",ake="@firebase/firestore-compat",lke="firebase",cke="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="[DEFAULT]",uke={[qI]:"fire-core",[LIe]:"fire-core-compat",[jIe]:"fire-analytics",[BIe]:"fire-analytics-compat",[zIe]:"fire-app-check",[UIe]:"fire-app-check-compat",[VIe]:"fire-auth",[WIe]:"fire-auth-compat",[$Ie]:"fire-rtdb",[HIe]:"fire-data-connect",[GIe]:"fire-rtdb-compat",[qIe]:"fire-fn",[KIe]:"fire-fn-compat",[YIe]:"fire-iid",[XIe]:"fire-iid-compat",[QIe]:"fire-fcm",[ZIe]:"fire-fcm-compat",[JIe]:"fire-perf",[eke]:"fire-perf-compat",[tke]:"fire-rc",[nke]:"fire-rc-compat",[rke]:"fire-gcs",[ike]:"fire-gcs-compat",[oke]:"fire-fst",[ake]:"fire-fst-compat",[ske]:"fire-vertex","fire-js":"fire-js",[lke]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=new Map,dke=new Map,YI=new Map;function $z(t,e){try{t.container.addComponent(e)}catch(n){vd.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function El(t){const e=t.name;if(YI.has(e))return vd.debug(`There were multiple attempts to register component ${e}.`),!1;YI.set(e,t);for(const n of SC.values())$z(n,t);for(const n of dke.values())$z(n,t);return!0}function Dd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function na(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fke={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vf=new fm("app","Firebase",fke);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hke{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Na("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm=cke;function lQ(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:KI,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Vf.create("bad-app-name",{appName:String(i)});if(n||(n=JX()),!n)throw Vf.create("no-options");const o=SC.get(i);if(o){if(wb(n,o.options)&&wb(r,o.config))return o;throw Vf.create("duplicate-app",{appName:i})}const s=new bIe(i);for(const l of YI.values())s.addComponent(l);const a=new hke(n,r,s);return SC.set(i,a),a}function Aw(t=KI){const e=SC.get(t);if(!e&&t===KI&&JX())return lQ();if(!e)throw Vf.create("no-app",{appName:t});return e}function ds(t,e,n){var r;let i=(r=uke[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vd.warn(a.join(" "));return}El(new Na(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pke="firebase-heartbeat-database",mke=1,Sb="firebase-heartbeat-store";let IP=null;function cQ(){return IP||(IP=aQ(pke,mke,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Sb)}catch(n){console.warn(n)}}}}).catch(t=>{throw Vf.create("idb-open",{originalErrorMessage:t.message})})),IP}function gke(t){return te(this,null,function*(){try{const n=(yield cQ()).transaction(Sb),r=yield n.objectStore(Sb).get(uQ(t));return yield n.done,r}catch(e){if(e instanceof Pl)vd.warn(e.message);else{const n=Vf.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vd.warn(n.message)}}})}function Hz(t,e){return te(this,null,function*(){try{const r=(yield cQ()).transaction(Sb,"readwrite");yield r.objectStore(Sb).put(e,uQ(t)),yield r.done}catch(n){if(n instanceof Pl)vd.warn(n.message);else{const r=Vf.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});vd.warn(r.message)}}})}function uQ(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vke=1024,yke=30*24*60*60*1e3;class xke{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wke(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return te(this,null,function*(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Gz();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=yke}),this._storage.overwrite(this._heartbeatsCache))}catch(r){vd.warn(r)}})}getHeartbeatsHeader(){return te(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Gz(),{heartbeatsToSend:r,unsentEntries:i}=bke(this._heartbeatsCache.heartbeats),o=wC(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return vd.warn(n),""}})}}function Gz(){return new Date().toISOString().substring(0,10)}function bke(t,e=vke){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),qz(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),qz(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class wke{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return te(this,null,function*(){return rQ()?iQ().then(()=>!0).catch(()=>!1):!1})}read(){return te(this,null,function*(){if(yield this._canUseIndexedDBPromise){const n=yield gke(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return te(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){const i=yield this.read();return Hz(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return te(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){const i=yield this.read();return Hz(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}}function qz(t){return wC(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ske(t){El(new Na("platform-logger",e=>new OIe(e),"PRIVATE")),El(new Na("heartbeat",e=>new xke(e),"PRIVATE")),ds(qI,Wz,t),ds(qI,Wz,"esm2017"),ds("fire-js","")}Ske("");function dQ(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _ke=dQ,fQ=new fm("auth","Firebase",dQ());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=new gT("@firebase/auth");function Eke(t,...e){_C.logLevel<=br.WARN&&_C.warn(`Auth (${hm}): ${t}`,...e)}function eE(t,...e){_C.logLevel<=br.ERROR&&_C.error(`Auth (${hm}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t,...e){throw d3(t,...e)}function ac(t,...e){return d3(t,...e)}function u3(t,e,n){const r=Object.assign(Object.assign({},_ke()),{[e]:n});return new fm("auth","Firebase",r).create(e,{appName:t.name})}function vl(t){return u3(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hQ(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Cl(t,"argument-error"),u3(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function d3(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return fQ.create(t,...e)}function Cn(t,e,...n){if(!t)throw d3(e,...n)}function Gu(t){const e="INTERNAL ASSERTION FAILED: "+t;throw eE(e),new Error(e)}function yd(t,e){t||Gu(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Cke(){return Kz()==="http:"||Kz()==="https:"}function Kz(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ake(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Cke()||nQ()||"connection"in navigator)?navigator.onLine:!0}function Tke(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n){this.shortDelay=e,this.longDelay=n,yd(n>e,"Short delay should be less than long delay!"),this.isMobile=JRe()||nIe()}get(){return Ake()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f3(t,e){yd(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pQ{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;if(typeof globalThis!="undefined"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch!="undefined")return fetch;Gu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;if(typeof globalThis!="undefined"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers!="undefined")return Headers;Gu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;if(typeof globalThis!="undefined"&&globalThis.Response)return globalThis.Response;if(typeof Response!="undefined")return Response;Gu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mke={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pke=new Tw(3e4,6e4);function Rd(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function vc(o,s,a,l){return te(this,arguments,function*(t,e,n,r,i={}){return mQ(t,i,()=>te(this,null,function*(){let c={},u={};r&&(e==="GET"?u=r:c={body:JSON.stringify(r)});const d=Cw(Object.assign({key:t.config.apiKey},u)).slice(1),f=yield t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:f},c);return tIe()||(p.referrerPolicy="no-referrer"),pQ.fetch()(gQ(t,t.config.apiHost,n,d),p)}))})}function mQ(t,e,n){return te(this,null,function*(){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Mke),e);try{const i=new Rke(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw CS(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw CS(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw CS(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw CS(t,"user-disabled",s);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw u3(t,u,c);Cl(t,u)}}catch(i){if(i instanceof Pl)throw i;Cl(t,"network-request-failed",{message:String(i)})}})}function Mw(o,s,a,l){return te(this,arguments,function*(t,e,n,r,i={}){const c=yield vc(t,e,n,r,i);return"mfaPendingCredential"in c&&Cl(t,"multi-factor-auth-required",{_serverResponse:c}),c})}function gQ(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?f3(t.config,i):`${t.config.apiScheme}://${i}`}function Dke(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Rke{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ac(this.auth,"network-request-failed")),Pke.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function CS(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ac(t,e,r);return i.customData._tokenResponse=n,i}function Yz(t){return t!==void 0&&t.enterprise!==void 0}class Ike{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Dke(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}function kke(t,e){return te(this,null,function*(){return vc(t,"GET","/v2/recaptchaConfig",Rd(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fke(t,e){return te(this,null,function*(){return vc(t,"POST","/v1/accounts:delete",e)})}function vQ(t,e){return te(this,null,function*(){return vc(t,"POST","/v1/accounts:lookup",e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function Oke(t,e=!1){return te(this,null,function*(){const n=Sr(t),r=yield n.getIdToken(e),i=h3(r);Cn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:vx(kP(i.auth_time)),issuedAtTime:vx(kP(i.iat)),expirationTime:vx(kP(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}})}function kP(t){return Number(t)*1e3}function h3(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return eE("JWT malformed, contained fewer than 3 sections"),null;try{const i=QX(n);return i?JSON.parse(i):(eE("Failed to decode base64 JWT payload"),null)}catch(i){return eE("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Xz(t){const e=h3(t);return Cn(e,"internal-error"),Cn(typeof e.exp!="undefined","internal-error"),Cn(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(t,e,n=!1){return te(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Pl&&Nke(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function Nke({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lke{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(()=>te(this,null,function*(){yield this.iteration()}),n)}iteration(){return te(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vx(this.lastLoginAt),this.creationTime=vx(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(t){return te(this,null,function*(){var e;const n=t.auth,r=yield t.getIdToken(),i=yield Hp(t,vQ(n,{idToken:r}));Cn(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?yQ(o.providerUserInfo):[],a=jke(t.providerData,s),l=t.isAnonymous,c=!(t.email&&o.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new XI(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function Bke(t){return te(this,null,function*(){const e=Sr(t);yield CC(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function jke(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function yQ(t){return t.map(e=>{var{providerId:n}=e,r=vw(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uke(t,e){return te(this,null,function*(){const n=yield mQ(t,{},()=>te(this,null,function*(){const r=Cw({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=gQ(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",pQ.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function zke(t,e){return te(this,null,function*(){return vc(t,"POST","/v2/accounts:revokeToken",Rd(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Cn(e.idToken,"internal-error"),Cn(typeof e.idToken!="undefined","internal-error"),Cn(typeof e.refreshToken!="undefined","internal-error");const n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):Xz(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Cn(e.length!==0,"internal-error");const n=Xz(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return te(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Cn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return te(this,null,function*(){const{accessToken:r,refreshToken:i,expiresIn:o}=yield Uke(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new av;return r&&(Cn(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Cn(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Cn(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new av,this.toJSON())}_performRefresh(){return Gu("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(t,e){Cn(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class qu{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=vw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Lke(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new XI(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return te(this,null,function*(){const n=yield Hp(this,this.stsTokenManager.getToken(this.auth,e));return Cn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Oke(this,e)}reload(){return Bke(this)}_assign(e){this!==e&&(Cn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qu(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Cn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return te(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield CC(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return te(this,null,function*(){if(na(this.auth.app))return Promise.reject(vl(this.auth));const e=yield this.getIdToken();return yield Hp(this,Fke(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,l,c,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,p=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,b=(s=n.photoURL)!==null&&s!==void 0?s:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,m=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,g=(c=n.createdAt)!==null&&c!==void 0?c:void 0,x=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:w,emailVerified:S,isAnonymous:P,providerData:I,stsTokenManager:M}=n;Cn(w&&M,e,"internal-error");const D=av.fromJSON(this.name,M);Cn(typeof w=="string",e,"internal-error"),Xd(d,e.name),Xd(f,e.name),Cn(typeof S=="boolean",e,"internal-error"),Cn(typeof P=="boolean",e,"internal-error"),Xd(p,e.name),Xd(b,e.name),Xd(v,e.name),Xd(m,e.name),Xd(g,e.name),Xd(x,e.name);const E=new qu({uid:w,auth:e,email:f,emailVerified:S,displayName:d,isAnonymous:P,photoURL:b,phoneNumber:p,tenantId:v,stsTokenManager:D,createdAt:g,lastLoginAt:x});return I&&Array.isArray(I)&&(E.providerData=I.map(_=>Object.assign({},_))),m&&(E._redirectEventId=m),E}static _fromIdTokenResponse(e,n,r=!1){return te(this,null,function*(){const i=new av;i.updateFromServerResponse(n);const o=new qu({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield CC(o),o})}static _fromGetAccountInfoResponse(e,n,r){return te(this,null,function*(){const i=n.users[0];Cn(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?yQ(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),a=new av;a.updateFromIdToken(r);const l=new qu({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new XI(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(l,c),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qz=new Map;function Ku(t){yd(t instanceof Function,"Expected a class definition");let e=Qz.get(t);return e?(yd(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Qz.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xQ{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return te(this,null,function*(){return!0})}_set(e,n){return te(this,null,function*(){this.storage[e]=n})}_get(e){return te(this,null,function*(){const n=this.storage[e];return n===void 0?null:n})}_remove(e){return te(this,null,function*(){delete this.storage[e]})}_addListener(e,n){}_removeListener(e,n){}}xQ.type="NONE";const Zz=xQ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(t,e,n){return`firebase:${t}:${e}:${n}`}class lv{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=tE(this.userKey,i.apiKey,o),this.fullPersistenceKey=tE("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return te(this,null,function*(){const e=yield this.persistence._get(this.fullUserKey);return e?qu._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return te(this,null,function*(){if(this.persistence===e)return;const n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return te(this,null,function*(){if(!n.length)return new lv(Ku(Zz),e,r);const i=(yield Promise.all(n.map(c=>te(this,null,function*(){if(yield c._isAvailable())return c})))).filter(c=>c);let o=i[0]||Ku(Zz);const s=tE(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=yield c._get(s);if(u){const d=qu._fromJSON(e,u);c!==o&&(a=d),o=c;break}}catch(u){}const l=i.filter(c=>c._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new lv(o,e,r):(o=l[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(c=>te(this,null,function*(){if(c!==o)try{yield c._remove(s)}catch(u){}}))),new lv(o,e,r))})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jz(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_Q(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bQ(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CQ(e))return"Blackberry";if(AQ(e))return"Webos";if(wQ(e))return"Safari";if((e.includes("chrome/")||SQ(e))&&!e.includes("edge/"))return"Chrome";if(EQ(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function bQ(t=ms()){return/firefox\//i.test(t)}function wQ(t=ms()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function SQ(t=ms()){return/crios\//i.test(t)}function _Q(t=ms()){return/iemobile/i.test(t)}function EQ(t=ms()){return/android/i.test(t)}function CQ(t=ms()){return/blackberry/i.test(t)}function AQ(t=ms()){return/webos/i.test(t)}function p3(t=ms()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Vke(t=ms()){var e;return p3(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Wke(){return rIe()&&document.documentMode===10}function TQ(t=ms()){return p3(t)||EQ(t)||AQ(t)||CQ(t)||/windows phone/i.test(t)||_Q(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MQ(t,e=[]){let n;switch(t){case"Browser":n=Jz(ms());break;case"Worker":n=`${Jz(ms())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${hm}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ke{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{const l=e(o);s(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return te(this,null,function*(){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch(o){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}})}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hke(n){return te(this,arguments,function*(t,e={}){return vc(t,"GET","/v2/passwordPolicy",Rd(t,e))})}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gke=6;class qke{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:Gke,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kke{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new e8(this),this.idTokenSubscription=new e8(this),this.beforeStateQueue=new $ke(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fQ,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ku(n)),this._initializationPromise=this.queue(()=>te(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield lv.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch(o){}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return te(this,null,function*(){if(this._deleted)return;const e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return te(this,null,function*(){try{const n=yield vQ(this,{idToken:e}),r=yield qu._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return te(this,null,function*(){var n;if(na(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const r=yield this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=yield this.tryRedirectSignIn(e);(!s||s===a)&&(l!=null&&l.user)&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Cn(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return te(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(r){yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return te(this,null,function*(){try{yield CC(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Tke()}_delete(){return te(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return te(this,null,function*(){if(na(this.app))return Promise.reject(vl(this));const n=e?Sr(e):null;return n&&Cn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return te(this,null,function*(){if(!this._deleted)return e&&Cn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>te(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return te(this,null,function*(){return na(this.app)?Promise.reject(vl(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return na(this.app)?Promise.reject(vl(this)):this.queue(()=>te(this,null,function*(){yield this.assertedPersistence.setPersistence(Ku(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return te(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return te(this,null,function*(){const e=yield Hke(this),n=new qke(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new fm("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return te(this,null,function*(){if(this.currentUser){const n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield zke(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return te(this,null,function*(){const r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return te(this,null,function*(){if(!this.redirectPersistenceManager){const n=e&&Ku(e)||this._popupRedirectResolver;Cn(n,this,"argument-error"),this.redirectPersistenceManager=yield lv.create(this,[Ku(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return te(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>te(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return te(this,null,function*(){if(e===this.currentUser)return this.queue(()=>te(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Cn(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{s=!0,l()}}else{const l=e.addObserver(n);return()=>{s=!0,l()}}}directlySetCurrentUser(e){return te(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Cn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=MQ(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return te(this,null,function*(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);const i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return te(this,null,function*(){var e;const n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n!=null&&n.error&&Eke(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token})}}function Dl(t){return Sr(t)}class e8{constructor(e){this.auth=e,this.observer=null,this.addObserver=uIe(n=>this.observer=n)}get next(){return Cn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vT={loadJS(){return te(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Yke(t){vT=t}function PQ(t){return vT.loadJS(t)}function Xke(){return vT.recaptchaEnterpriseScript}function Qke(){return vT.gapiScript}function Zke(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Jke="recaptcha-enterprise",eFe="NO_RECAPTCHA";class tFe{constructor(e){this.type=Jke,this.auth=Dl(e)}verify(e="verify",n=!1){return te(this,null,function*(){function r(o){return te(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>te(this,null,function*(){kke(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new Ike(l);return o.tenantId==null?o._agentRecaptchaConfig=c:o._tenantRecaptchaConfigs[o.tenantId]=c,s(c.siteKey)}}).catch(l=>{a(l)})}))})}function i(o,s,a){const l=window.grecaptcha;Yz(l)?l.enterprise.ready(()=>{l.enterprise.execute(o,{action:e}).then(c=>{s(c)}).catch(()=>{s(eFe)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&Yz(window.grecaptcha))i(a,o,s);else{if(typeof window=="undefined"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Xke();l.length!==0&&(l+=a),PQ(l).then(()=>{i(a,o,s)}).catch(c=>{s(c)})}}).catch(a=>{s(a)})})})}}function t8(t,e,n,r=!1){return te(this,null,function*(){const i=new tFe(t);let o;try{o=yield i.verify(n)}catch(a){o=yield i.verify(n,!0)}const s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})}function _b(t,e,n,r){return te(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=yield t8(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(o=>te(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=yield t8(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(o)}))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nFe(t,e){const n=Dd(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(wb(o,e!=null?e:{}))return i;Cl(i,"already-initialized")}return n.initialize({options:e})}function rFe(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ku);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function iFe(t,e,n){const r=Dl(t);Cn(r._canInitEmulator,r,"emulator-config-failed"),Cn(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=DQ(e),{host:s,port:a}=oFe(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),sFe()}function DQ(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function oFe(t){const e=DQ(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:n8(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:n8(s)}}}function n8(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function sFe(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Gu("not implemented")}_getIdTokenResponse(e){return Gu("not implemented")}_linkToIdToken(e,n){return Gu("not implemented")}_getReauthenticationResolver(e){return Gu("not implemented")}}function aFe(t,e){return te(this,null,function*(){return vc(t,"POST","/v1/accounts:update",e)})}function lFe(t,e){return te(this,null,function*(){return vc(t,"POST","/v1/accounts:signUp",e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cFe(t,e){return te(this,null,function*(){return Mw(t,"POST","/v1/accounts:signInWithPassword",Rd(t,e))})}function RQ(t,e){return te(this,null,function*(){return vc(t,"POST","/v1/accounts:sendOobCode",Rd(t,e))})}function uFe(t,e){return te(this,null,function*(){return RQ(t,e)})}function dFe(t,e){return te(this,null,function*(){return RQ(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fFe(t,e){return te(this,null,function*(){return Mw(t,"POST","/v1/accounts:signInWithEmailLink",Rd(t,e))})}function hFe(t,e){return te(this,null,function*(){return Mw(t,"POST","/v1/accounts:signInWithEmailLink",Rd(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb extends m3{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Eb(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Eb(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return te(this,null,function*(){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _b(e,n,"signInWithPassword",cFe);case"emailLink":return fFe(e,{email:this._email,oobCode:this._password});default:Cl(e,"internal-error")}})}_linkToIdToken(e,n){return te(this,null,function*(){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _b(e,r,"signUpPassword",lFe);case"emailLink":return hFe(e,{idToken:n,email:this._email,oobCode:this._password});default:Cl(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(t,e){return te(this,null,function*(){return Mw(t,"POST","/v1/accounts:signInWithIdp",Rd(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pFe="http://localhost";class Gp extends m3{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Gp(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Cl("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=vw(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Gp(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return cv(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,cv(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,cv(e,n)}buildRequest(){const e={requestUri:pFe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Cw(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mFe(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gFe(t){const e=Uy(zy(t)).link,n=e?Uy(zy(e)).deep_link_id:null,r=Uy(zy(t)).deep_link_id;return(r?Uy(zy(r)).link:null)||r||n||e||t}class yT{constructor(e){var n,r,i,o,s,a;const l=Uy(zy(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,d=mFe((i=l.mode)!==null&&i!==void 0?i:null);Cn(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(o=l.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=l.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=gFe(e);try{return new yT(n)}catch(r){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(){this.providerId=fh.PROVIDER_ID}static credential(e,n){return Eb._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=yT.parseLink(n);return Cn(r,"argument-error"),Eb._fromEmailAndCode(e,r.code,r.tenantId)}}fh.PROVIDER_ID="password";fh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";fh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw extends xT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf extends Pw{constructor(){super("facebook.com")}static credential(e){return Gp._fromParams({providerId:xf.PROVIDER_ID,signInMethod:xf.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xf.credentialFromTaggedObject(e)}static credentialFromError(e){return xf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xf.credential(e.oauthAccessToken)}catch(n){return null}}}xf.FACEBOOK_SIGN_IN_METHOD="facebook.com";xf.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul extends Pw{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Gp._fromParams({providerId:ul.PROVIDER_ID,signInMethod:ul.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ul.credentialFromTaggedObject(e)}static credentialFromError(e){return ul.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ul.credential(n,r)}catch(i){return null}}}ul.GOOGLE_SIGN_IN_METHOD="google.com";ul.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf extends Pw{constructor(){super("github.com")}static credential(e){return Gp._fromParams({providerId:bf.PROVIDER_ID,signInMethod:bf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bf.credentialFromTaggedObject(e)}static credentialFromError(e){return bf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bf.credential(e.oauthAccessToken)}catch(n){return null}}}bf.GITHUB_SIGN_IN_METHOD="github.com";bf.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf extends Pw{constructor(){super("twitter.com")}static credential(e,n){return Gp._fromParams({providerId:wf.PROVIDER_ID,signInMethod:wf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return wf.credentialFromTaggedObject(e)}static credentialFromError(e){return wf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return wf.credential(n,r)}catch(i){return null}}}wf.TWITTER_SIGN_IN_METHOD="twitter.com";wf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vFe(t,e){return te(this,null,function*(){return Mw(t,"POST","/v1/accounts:signUp",Rd(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return te(this,null,function*(){const o=yield qu._fromIdTokenResponse(e,r,i),s=r8(r);return new qp({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return te(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);const i=r8(r);return new qp({user:e,providerId:i,_tokenResponse:r,operationType:n})})}}function r8(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC extends Pl{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,AC.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new AC(e,n,r,i)}}function IQ(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?AC._fromErrorAndOperation(t,o,e,r):o})}function yFe(t,e,n=!1){return te(this,null,function*(){const r=yield Hp(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return qp._forOperation(t,"link",r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kQ(t,e,n=!1){return te(this,null,function*(){const{auth:r}=t;if(na(r.app))return Promise.reject(vl(r));const i="reauthenticate";try{const o=yield Hp(t,IQ(r,i,e,t),n);Cn(o.idToken,r,"internal-error");const s=h3(o.idToken);Cn(s,r,"internal-error");const{sub:a}=s;return Cn(t.uid===a,r,"user-mismatch"),qp._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Cl(r,"user-mismatch"),o}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FQ(t,e,n=!1){return te(this,null,function*(){if(na(t.app))return Promise.reject(vl(t));const r="signIn",i=yield IQ(t,r,e),o=yield qp._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function OQ(t,e){return te(this,null,function*(){return FQ(Dl(t),e)})}function xFe(t,e){return te(this,null,function*(){return kQ(Sr(t),e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bFe(t,e,n){var r;Cn(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),Cn(typeof n.dynamicLinkDomain=="undefined"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Cn(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Cn(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NQ(t){return te(this,null,function*(){const e=Dl(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function wFe(t,e,n){return te(this,null,function*(){const r=Dl(t);yield _b(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",uFe)})}function LQ(t,e,n){return te(this,null,function*(){if(na(t.app))return Promise.reject(vl(t));const r=Dl(t),s=yield _b(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vFe).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&NQ(t),l}),a=yield qp._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function BQ(t,e,n){return na(t.app)?Promise.reject(vl(t)):OQ(Sr(t),fh.credential(e,n)).catch(r=>te(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&NQ(t),r}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SFe(t,e,n){return te(this,null,function*(){const r=Dl(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(s,a){Cn(a.handleCodeInApp,r,"argument-error"),a&&bFe(r,s,a)}o(i,n),yield _b(r,i,"getOobCode",dFe)})}function g3(t,e){const n=yT.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}function v3(t,e,n){return te(this,null,function*(){if(na(t.app))return Promise.reject(vl(t));const r=Sr(t),i=fh.credentialWithLink(e,n||EC());return Cn(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),OQ(r,i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Fe(t,e){return te(this,null,function*(){return vc(t,"POST","/v1/accounts:update",e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EFe(r,i){return te(this,arguments,function*(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const o=Sr(t),a={idToken:yield o.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=yield Hp(o,_Fe(o.auth,a));o.displayName=l.displayName||null,o.photoURL=l.photoUrl||null;const c=o.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=o.displayName,c.photoURL=o.photoURL),yield o._updateTokensIfNecessary(l)})}function CFe(t,e){const n=Sr(t);return na(n.auth.app)?Promise.reject(vl(n.auth)):jQ(n,e,null)}function y3(t,e){return jQ(Sr(t),null,e)}function jQ(t,e,n){return te(this,null,function*(){const{auth:r}=t,o={idToken:yield t.getIdToken(),returnSecureToken:!0};e&&(o.email=e),n&&(o.password=n);const s=yield Hp(t,aFe(r,o));yield t._updateTokensIfNecessary(s,!0)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AFe(t,e){return Sr(t).setPersistence(e)}function TFe(t,e,n,r){return Sr(t).onIdTokenChanged(e,n,r)}function MFe(t,e,n){return Sr(t).beforeAuthStateChanged(e,n)}function UQ(t,e,n,r){return Sr(t).onAuthStateChanged(e,n,r)}function PFe(t){return Sr(t).signOut()}const TC="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zQ{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(TC,"1"),this.storage.removeItem(TC),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DFe=1e3,RFe=10;class uv extends zQ{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TQ(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,a,l)=>{this.notifyListeners(s,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);Wke()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,RFe):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},DFe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(e,n){return te(this,null,function*(){yield kh(uv.prototype,this,"_set").call(this,e,n),this.localCache[e]=JSON.stringify(n)})}_get(e){return te(this,null,function*(){const n=yield kh(uv.prototype,this,"_get").call(this,e);return this.localCache[e]=JSON.stringify(n),n})}_remove(e){return te(this,null,function*(){yield kh(uv.prototype,this,"_remove").call(this,e),delete this.localCache[e]})}}uv.type="LOCAL";const VQ=uv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WQ extends zQ{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}WQ.type="SESSION";const $Q=WQ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IFe(t){return Promise.all(t.map(e=>te(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new bT(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){return te(this,null,function*(){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(c=>te(this,null,function*(){return c(n.origin,o)})),l=yield IFe(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bT.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kFe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return te(this,null,function*(){const i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,l)=>{const c=x3("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(f.data.response);break;default:clearTimeout(u),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(){return window}function FFe(t){Qc().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HQ(){return typeof Qc().WorkerGlobalScope!="undefined"&&typeof Qc().importScripts=="function"}function OFe(){return te(this,null,function*(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(t){return null}})}function NFe(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function LFe(){return HQ()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GQ="firebaseLocalStorageDb",BFe=1,MC="firebaseLocalStorage",qQ="fbase_key";class Dw{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function wT(t,e){return t.transaction([MC],e?"readwrite":"readonly").objectStore(MC)}function jFe(){const t=indexedDB.deleteDatabase(GQ);return new Dw(t).toPromise()}function QI(){const t=indexedDB.open(GQ,BFe);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(MC,{keyPath:qQ})}catch(i){n(i)}}),t.addEventListener("success",()=>te(this,null,function*(){const r=t.result;r.objectStoreNames.contains(MC)?e(r):(r.close(),yield jFe(),e(yield QI()))}))})}function i8(t,e,n){return te(this,null,function*(){const r=wT(t,!0).put({[qQ]:e,value:n});return new Dw(r).toPromise()})}function UFe(t,e){return te(this,null,function*(){const n=wT(t,!1).get(e),r=yield new Dw(n).toPromise();return r===void 0?null:r.value})}function o8(t,e){const n=wT(t,!0).delete(e);return new Dw(n).toPromise()}const zFe=800,VFe=3;class KQ{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return te(this,null,function*(){return this.db?this.db:(this.db=yield QI(),this.db)})}_withRetries(e){return te(this,null,function*(){let n=0;for(;;)try{const r=yield this._openDb();return yield e(r)}catch(r){if(n++>VFe)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return te(this,null,function*(){return HQ()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return te(this,null,function*(){this.receiver=bT._getInstance(LFe()),this.receiver._subscribe("keyChanged",(e,n)=>te(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(n.key)}})),this.receiver._subscribe("ping",(e,n)=>te(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return te(this,null,function*(){var e,n;if(this.activeServiceWorker=yield OFe(),!this.activeServiceWorker)return;this.sender=new kFe(this.activeServiceWorker);const r=yield this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(e){return te(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||NFe()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(n){}})}_isAvailable(){return te(this,null,function*(){try{if(!indexedDB)return!1;const e=yield QI();return yield i8(e,TC,"1"),yield o8(e,TC),!0}catch(e){}return!1})}_withPendingWrite(e){return te(this,null,function*(){this.pendingWrites++;try{yield e()}finally{this.pendingWrites--}})}_set(e,n){return te(this,null,function*(){return this._withPendingWrite(()=>te(this,null,function*(){return yield this._withRetries(r=>i8(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)}))})}_get(e){return te(this,null,function*(){const n=yield this._withRetries(r=>UFe(r,e));return this.localCache[e]=n,n})}_remove(e){return te(this,null,function*(){return this._withPendingWrite(()=>te(this,null,function*(){return yield this._withRetries(n=>o8(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)}))})}_poll(){return te(this,null,function*(){const e=yield this._withRetries(i=>{const o=wT(i,!1).getAll();return new Dw(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n})}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>te(this,null,function*(){return this._poll()}),zFe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KQ.type="LOCAL";const WFe=KQ;new Tw(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(t,e){return e?Ku(e):(Cn(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3 extends m3{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cv(e,this._buildIdpRequest())}_linkToIdToken(e,n){return cv(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return cv(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function $Fe(t){return FQ(t.auth,new w3(t),t.bypassAuthState)}function HFe(t){const{auth:e,user:n}=t;return Cn(n,e,"internal-error"),kQ(n,new w3(t),t.bypassAuthState)}function GFe(t){return te(this,null,function*(){const{auth:e,user:n}=t;return Cn(n,e,"internal-error"),yFe(n,new w3(t),t.bypassAuthState)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YQ{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>te(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return te(this,null,function*(){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(l))}catch(c){this.reject(c)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $Fe;case"linkViaPopup":case"linkViaRedirect":return GFe;case"reauthViaPopup":case"reauthViaRedirect":return HFe;default:Cl(this.auth,"internal-error")}}resolve(e){yd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qFe=new Tw(2e3,1e4);function PC(t,e,n){return te(this,null,function*(){if(na(t.app))return Promise.reject(ac(t,"operation-not-supported-in-this-environment"));const r=Dl(t);hQ(t,e,xT);const i=b3(r,n);return new hp(r,"signInViaPopup",e,i).executeNotNull()})}class hp extends YQ{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,hp.currentPopupAction&&hp.currentPopupAction.cancel(),hp.currentPopupAction=this}executeNotNull(){return te(this,null,function*(){const e=yield this.execute();return Cn(e,this.auth,"internal-error"),e})}onExecution(){return te(this,null,function*(){yd(this.filter.length===1,"Popup operations only handle one event");const e=x3();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ac(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ac(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hp.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ac(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qFe.get())};e()}}hp.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KFe="pendingRedirect",nE=new Map;class yx extends YQ{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return te(this,null,function*(){let e=nE.get(this.auth._key());if(!e){try{const r=(yield YFe(this.resolver,this.auth))?yield kh(yx.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}nE.set(this.auth._key(),e)}return this.bypassAuthState||nE.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return te(this,null,function*(){if(e.type==="signInViaRedirect")return kh(yx.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,kh(yx.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return te(this,null,function*(){})}cleanUp(){}}function YFe(t,e){return te(this,null,function*(){const n=QQ(e),r=XQ(t);if(!(yield r._isAvailable()))return!1;const i=(yield r._get(n))==="true";return yield r._remove(n),i})}function XFe(t,e){return te(this,null,function*(){return XQ(t)._set(QQ(e),"true")})}function QFe(t,e){nE.set(t._key(),e)}function XQ(t){return Ku(t._redirectPersistence)}function QQ(t){return tE(KFe,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZQ(t,e,n){return ZFe(t,e,n)}function ZFe(t,e,n){return te(this,null,function*(){if(na(t.app))return Promise.reject(vl(t));const r=Dl(t);hQ(t,e,xT),yield r._initializationPromise;const i=b3(r,n);return yield XFe(i,r),i._openRedirect(r,e,"signInViaRedirect")})}function JQ(t,e){return te(this,null,function*(){return yield Dl(t)._initializationPromise,eZ(t,e,!1)})}function eZ(t,e,n=!1){return te(this,null,function*(){if(na(t.app))return Promise.reject(vl(t));const r=Dl(t),i=b3(r,e),s=yield new yx(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JFe=10*60*1e3;class eOe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tOe(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!tZ(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ac(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JFe&&this.cachedEventUids.clear(),this.cachedEventUids.has(s8(e))}saveEventToCache(e){this.cachedEventUids.add(s8(e)),this.lastProcessedEventTime=Date.now()}}function s8(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tZ({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tOe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tZ(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nOe(n){return te(this,arguments,function*(t,e={}){return vc(t,"GET","/v1/projects",e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rOe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iOe=/^https?/;function oOe(t){return te(this,null,function*(){if(t.config.emulator)return;const{authorizedDomains:e}=yield nOe(t);for(const n of e)try{if(sOe(n))return}catch(r){}Cl(t,"unauthorized-domain")})}function sOe(t){const e=EC(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!iOe.test(n))return!1;if(rOe.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aOe=new Tw(3e4,6e4);function a8(){const t=Qc().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function lOe(t){return new Promise((e,n)=>{var r,i,o;function s(){a8(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{a8(),n(ac(t,"network-request-failed"))},timeout:aOe.get()})}if(!((i=(r=Qc().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Qc().gapi)===null||o===void 0)&&o.load)s();else{const a=Zke("iframefcb");return Qc()[a]=()=>{gapi.load?s():n(ac(t,"network-request-failed"))},PQ(`${Qke()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw rE=null,e})}let rE=null;function cOe(t){return rE=rE||lOe(t),rE}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uOe=new Tw(5e3,15e3),dOe="__/auth/iframe",fOe="emulator/auth/iframe",hOe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pOe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mOe(t){const e=t.config;Cn(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?f3(e,fOe):`https://${t.config.authDomain}/${dOe}`,r={apiKey:e.apiKey,appName:t.name,v:hm},i=pOe.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Cw(r).slice(1)}`}function gOe(t){return te(this,null,function*(){const e=yield cOe(t),n=Qc().gapi;return Cn(n,t,"internal-error"),e.open({where:document.body,url:mOe(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hOe,dontclear:!0},r=>new Promise((i,o)=>te(this,null,function*(){yield r.restyle({setHideOnLeave:!1});const s=ac(t,"network-request-failed"),a=Qc().setTimeout(()=>{o(s)},uOe.get());function l(){Qc().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{o(s)})})))})}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vOe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yOe=500,xOe=600,bOe="_blank",wOe="http://localhost";class l8{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function SOe(t,e,n,r=yOe,i=xOe){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},vOe),{width:r.toString(),height:i.toString(),top:o,left:s}),c=ms().toLowerCase();n&&(a=SQ(c)?bOe:n),bQ(c)&&(e=e||wOe,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[p,b])=>`${f}${p}=${b},`,"");if(Vke(c)&&a!=="_self")return _Oe(e||"",a),new l8(null);const d=window.open(e||"",a,u);Cn(d,t,"popup-blocked");try{d.focus()}catch(f){}return new l8(d)}function _Oe(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EOe="__/auth/handler",COe="emulator/auth/handler",AOe=encodeURIComponent("fac");function c8(t,e,n,r,i,o){return te(this,null,function*(){Cn(t.config.authDomain,t,"auth-domain-config-required"),Cn(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:hm,eventId:i};if(e instanceof xT){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",cIe(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))s[u]=d}if(e instanceof Pw){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(s.scopes=u.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=yield t._getAppCheckToken(),c=l?`#${AOe}=${encodeURIComponent(l)}`:"";return`${TOe(t)}?${Cw(a).slice(1)}${c}`})}function TOe({config:t}){return t.emulator?f3(t,COe):`https://${t.authDomain}/${EOe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP="webStorageSupport";class MOe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$Q,this._completeRedirectFn=eZ,this._overrideRedirectResult=QFe}_openPopup(e,n,r,i){return te(this,null,function*(){var o;yd((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=yield c8(e,n,r,EC(),i);return SOe(e,s,x3())})}_openRedirect(e,n,r,i){return te(this,null,function*(){yield this._originValidation(e);const o=yield c8(e,n,r,EC(),i);return FFe(o),new Promise(()=>{})})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(yd(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return te(this,null,function*(){const n=yield gOe(e),r=new eOe(e);return n.register("authEvent",i=>(Cn(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(FP,{type:FP},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[FP];s!==void 0&&n(!!s),Cl(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oOe(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return TQ()||wQ()||p3()}}const POe=MOe;var u8="@firebase/auth",d8="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DOe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return te(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Cn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ROe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function IOe(t){El(new Na("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Cn(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MQ(t)},c=new Kke(r,i,o,l);return rFe(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),El(new Na("auth-internal",e=>{const n=Dl(e.getProvider("auth").getImmediate());return(r=>new DOe(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ds(u8,d8,ROe(t)),ds(u8,d8,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kOe=5*60,FOe=eQ("authIdTokenMaxAge")||kOe;let f8=null;const OOe=t=>e=>te(nt,null,function*(){const n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>FOe)return;const i=n==null?void 0:n.token;f8!==i&&(f8=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function DC(t=Aw()){const e=Dd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=nFe(t,{popupRedirectResolver:POe,persistence:[WFe,VQ,$Q]}),r=eQ("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=OOe(o.toString());MFe(n,s,()=>s(n.currentUser)),TFe(n,a=>s(a))}}const i=ZX("auth");return i&&iFe(n,`http://${i}`),n}function NOe(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Yke({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=ac("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",NOe().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});IOe("Browser");var LOe="firebase",BOe="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ds(LOe,BOe,"app");var h8=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mp,nZ;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,D){function E(){}E.prototype=D.prototype,M.D=D.prototype,M.prototype=new E,M.prototype.constructor=M,M.C=function(_,A,R){for(var F=Array(arguments.length-2),L=2;L<arguments.length;L++)F[L-2]=arguments[L];return D.prototype[A].apply(_,F)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,D,E){E||(E=0);var _=Array(16);if(typeof D=="string")for(var A=0;16>A;++A)_[A]=D.charCodeAt(E++)|D.charCodeAt(E++)<<8|D.charCodeAt(E++)<<16|D.charCodeAt(E++)<<24;else for(A=0;16>A;++A)_[A]=D[E++]|D[E++]<<8|D[E++]<<16|D[E++]<<24;D=M.g[0],E=M.g[1],A=M.g[2];var R=M.g[3],F=D+(R^E&(A^R))+_[0]+3614090360&4294967295;D=E+(F<<7&4294967295|F>>>25),F=R+(A^D&(E^A))+_[1]+3905402710&4294967295,R=D+(F<<12&4294967295|F>>>20),F=A+(E^R&(D^E))+_[2]+606105819&4294967295,A=R+(F<<17&4294967295|F>>>15),F=E+(D^A&(R^D))+_[3]+3250441966&4294967295,E=A+(F<<22&4294967295|F>>>10),F=D+(R^E&(A^R))+_[4]+4118548399&4294967295,D=E+(F<<7&4294967295|F>>>25),F=R+(A^D&(E^A))+_[5]+1200080426&4294967295,R=D+(F<<12&4294967295|F>>>20),F=A+(E^R&(D^E))+_[6]+2821735955&4294967295,A=R+(F<<17&4294967295|F>>>15),F=E+(D^A&(R^D))+_[7]+4249261313&4294967295,E=A+(F<<22&4294967295|F>>>10),F=D+(R^E&(A^R))+_[8]+1770035416&4294967295,D=E+(F<<7&4294967295|F>>>25),F=R+(A^D&(E^A))+_[9]+2336552879&4294967295,R=D+(F<<12&4294967295|F>>>20),F=A+(E^R&(D^E))+_[10]+4294925233&4294967295,A=R+(F<<17&4294967295|F>>>15),F=E+(D^A&(R^D))+_[11]+2304563134&4294967295,E=A+(F<<22&4294967295|F>>>10),F=D+(R^E&(A^R))+_[12]+1804603682&4294967295,D=E+(F<<7&4294967295|F>>>25),F=R+(A^D&(E^A))+_[13]+4254626195&4294967295,R=D+(F<<12&4294967295|F>>>20),F=A+(E^R&(D^E))+_[14]+2792965006&4294967295,A=R+(F<<17&4294967295|F>>>15),F=E+(D^A&(R^D))+_[15]+1236535329&4294967295,E=A+(F<<22&4294967295|F>>>10),F=D+(A^R&(E^A))+_[1]+4129170786&4294967295,D=E+(F<<5&4294967295|F>>>27),F=R+(E^A&(D^E))+_[6]+3225465664&4294967295,R=D+(F<<9&4294967295|F>>>23),F=A+(D^E&(R^D))+_[11]+643717713&4294967295,A=R+(F<<14&4294967295|F>>>18),F=E+(R^D&(A^R))+_[0]+3921069994&4294967295,E=A+(F<<20&4294967295|F>>>12),F=D+(A^R&(E^A))+_[5]+3593408605&4294967295,D=E+(F<<5&4294967295|F>>>27),F=R+(E^A&(D^E))+_[10]+38016083&4294967295,R=D+(F<<9&4294967295|F>>>23),F=A+(D^E&(R^D))+_[15]+3634488961&4294967295,A=R+(F<<14&4294967295|F>>>18),F=E+(R^D&(A^R))+_[4]+3889429448&4294967295,E=A+(F<<20&4294967295|F>>>12),F=D+(A^R&(E^A))+_[9]+568446438&4294967295,D=E+(F<<5&4294967295|F>>>27),F=R+(E^A&(D^E))+_[14]+3275163606&4294967295,R=D+(F<<9&4294967295|F>>>23),F=A+(D^E&(R^D))+_[3]+4107603335&4294967295,A=R+(F<<14&4294967295|F>>>18),F=E+(R^D&(A^R))+_[8]+1163531501&4294967295,E=A+(F<<20&4294967295|F>>>12),F=D+(A^R&(E^A))+_[13]+2850285829&4294967295,D=E+(F<<5&4294967295|F>>>27),F=R+(E^A&(D^E))+_[2]+4243563512&4294967295,R=D+(F<<9&4294967295|F>>>23),F=A+(D^E&(R^D))+_[7]+1735328473&4294967295,A=R+(F<<14&4294967295|F>>>18),F=E+(R^D&(A^R))+_[12]+2368359562&4294967295,E=A+(F<<20&4294967295|F>>>12),F=D+(E^A^R)+_[5]+4294588738&4294967295,D=E+(F<<4&4294967295|F>>>28),F=R+(D^E^A)+_[8]+2272392833&4294967295,R=D+(F<<11&4294967295|F>>>21),F=A+(R^D^E)+_[11]+1839030562&4294967295,A=R+(F<<16&4294967295|F>>>16),F=E+(A^R^D)+_[14]+4259657740&4294967295,E=A+(F<<23&4294967295|F>>>9),F=D+(E^A^R)+_[1]+2763975236&4294967295,D=E+(F<<4&4294967295|F>>>28),F=R+(D^E^A)+_[4]+1272893353&4294967295,R=D+(F<<11&4294967295|F>>>21),F=A+(R^D^E)+_[7]+4139469664&4294967295,A=R+(F<<16&4294967295|F>>>16),F=E+(A^R^D)+_[10]+3200236656&4294967295,E=A+(F<<23&4294967295|F>>>9),F=D+(E^A^R)+_[13]+681279174&4294967295,D=E+(F<<4&4294967295|F>>>28),F=R+(D^E^A)+_[0]+3936430074&4294967295,R=D+(F<<11&4294967295|F>>>21),F=A+(R^D^E)+_[3]+3572445317&4294967295,A=R+(F<<16&4294967295|F>>>16),F=E+(A^R^D)+_[6]+76029189&4294967295,E=A+(F<<23&4294967295|F>>>9),F=D+(E^A^R)+_[9]+3654602809&4294967295,D=E+(F<<4&4294967295|F>>>28),F=R+(D^E^A)+_[12]+3873151461&4294967295,R=D+(F<<11&4294967295|F>>>21),F=A+(R^D^E)+_[15]+530742520&4294967295,A=R+(F<<16&4294967295|F>>>16),F=E+(A^R^D)+_[2]+3299628645&4294967295,E=A+(F<<23&4294967295|F>>>9),F=D+(A^(E|~R))+_[0]+4096336452&4294967295,D=E+(F<<6&4294967295|F>>>26),F=R+(E^(D|~A))+_[7]+1126891415&4294967295,R=D+(F<<10&4294967295|F>>>22),F=A+(D^(R|~E))+_[14]+2878612391&4294967295,A=R+(F<<15&4294967295|F>>>17),F=E+(R^(A|~D))+_[5]+4237533241&4294967295,E=A+(F<<21&4294967295|F>>>11),F=D+(A^(E|~R))+_[12]+1700485571&4294967295,D=E+(F<<6&4294967295|F>>>26),F=R+(E^(D|~A))+_[3]+2399980690&4294967295,R=D+(F<<10&4294967295|F>>>22),F=A+(D^(R|~E))+_[10]+4293915773&4294967295,A=R+(F<<15&4294967295|F>>>17),F=E+(R^(A|~D))+_[1]+2240044497&4294967295,E=A+(F<<21&4294967295|F>>>11),F=D+(A^(E|~R))+_[8]+1873313359&4294967295,D=E+(F<<6&4294967295|F>>>26),F=R+(E^(D|~A))+_[15]+4264355552&4294967295,R=D+(F<<10&4294967295|F>>>22),F=A+(D^(R|~E))+_[6]+2734768916&4294967295,A=R+(F<<15&4294967295|F>>>17),F=E+(R^(A|~D))+_[13]+1309151649&4294967295,E=A+(F<<21&4294967295|F>>>11),F=D+(A^(E|~R))+_[4]+4149444226&4294967295,D=E+(F<<6&4294967295|F>>>26),F=R+(E^(D|~A))+_[11]+3174756917&4294967295,R=D+(F<<10&4294967295|F>>>22),F=A+(D^(R|~E))+_[2]+718787259&4294967295,A=R+(F<<15&4294967295|F>>>17),F=E+(R^(A|~D))+_[9]+3951481745&4294967295,M.g[0]=M.g[0]+D&4294967295,M.g[1]=M.g[1]+(A+(F<<21&4294967295|F>>>11))&4294967295,M.g[2]=M.g[2]+A&4294967295,M.g[3]=M.g[3]+R&4294967295}r.prototype.u=function(M,D){D===void 0&&(D=M.length);for(var E=D-this.blockSize,_=this.B,A=this.h,R=0;R<D;){if(A==0)for(;R<=E;)i(this,M,R),R+=this.blockSize;if(typeof M=="string"){for(;R<D;)if(_[A++]=M.charCodeAt(R++),A==this.blockSize){i(this,_),A=0;break}}else for(;R<D;)if(_[A++]=M[R++],A==this.blockSize){i(this,_),A=0;break}}this.h=A,this.o+=D},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var D=1;D<M.length-8;++D)M[D]=0;var E=8*this.o;for(D=M.length-8;D<M.length;++D)M[D]=E&255,E/=256;for(this.u(M),M=Array(16),D=E=0;4>D;++D)for(var _=0;32>_;_+=8)M[E++]=this.g[D]>>>_&255;return M};function o(M,D){var E=a;return Object.prototype.hasOwnProperty.call(E,M)?E[M]:E[M]=D(M)}function s(M,D){this.h=D;for(var E=[],_=!0,A=M.length-1;0<=A;A--){var R=M[A]|0;_&&R==D||(E[A]=R,_=!1)}this.g=E}var a={};function l(M){return-128<=M&&128>M?o(M,function(D){return new s([D|0],0>D?-1:0)}):new s([M|0],0>M?-1:0)}function c(M){if(isNaN(M)||!isFinite(M))return d;if(0>M)return m(c(-M));for(var D=[],E=1,_=0;M>=E;_++)D[_]=M/E|0,E*=4294967296;return new s(D,0)}function u(M,D){if(M.length==0)throw Error("number format error: empty string");if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(M.charAt(0)=="-")return m(u(M.substring(1),D));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(D,8)),_=d,A=0;A<M.length;A+=8){var R=Math.min(8,M.length-A),F=parseInt(M.substring(A,A+R),D);8>R?(R=c(Math.pow(D,R)),_=_.j(R).add(c(F))):(_=_.j(E),_=_.add(c(F)))}return _}var d=l(0),f=l(1),p=l(16777216);t=s.prototype,t.m=function(){if(v(this))return-m(this).m();for(var M=0,D=1,E=0;E<this.g.length;E++){var _=this.i(E);M+=(0<=_?_:4294967296+_)*D,D*=4294967296}return M},t.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(b(this))return"0";if(v(this))return"-"+m(this).toString(M);for(var D=c(Math.pow(M,6)),E=this,_="";;){var A=S(E,D).g;E=g(E,A.j(D));var R=((0<E.g.length?E.g[0]:E.h)>>>0).toString(M);if(E=A,b(E))return R+_;for(;6>R.length;)R="0"+R;_=R+_}},t.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function b(M){if(M.h!=0)return!1;for(var D=0;D<M.g.length;D++)if(M.g[D]!=0)return!1;return!0}function v(M){return M.h==-1}t.l=function(M){return M=g(this,M),v(M)?-1:b(M)?0:1};function m(M){for(var D=M.g.length,E=[],_=0;_<D;_++)E[_]=~M.g[_];return new s(E,~M.h).add(f)}t.abs=function(){return v(this)?m(this):this},t.add=function(M){for(var D=Math.max(this.g.length,M.g.length),E=[],_=0,A=0;A<=D;A++){var R=_+(this.i(A)&65535)+(M.i(A)&65535),F=(R>>>16)+(this.i(A)>>>16)+(M.i(A)>>>16);_=F>>>16,R&=65535,F&=65535,E[A]=F<<16|R}return new s(E,E[E.length-1]&-2147483648?-1:0)};function g(M,D){return M.add(m(D))}t.j=function(M){if(b(this)||b(M))return d;if(v(this))return v(M)?m(this).j(m(M)):m(m(this).j(M));if(v(M))return m(this.j(m(M)));if(0>this.l(p)&&0>M.l(p))return c(this.m()*M.m());for(var D=this.g.length+M.g.length,E=[],_=0;_<2*D;_++)E[_]=0;for(_=0;_<this.g.length;_++)for(var A=0;A<M.g.length;A++){var R=this.i(_)>>>16,F=this.i(_)&65535,L=M.i(A)>>>16,N=M.i(A)&65535;E[2*_+2*A]+=F*N,x(E,2*_+2*A),E[2*_+2*A+1]+=R*N,x(E,2*_+2*A+1),E[2*_+2*A+1]+=F*L,x(E,2*_+2*A+1),E[2*_+2*A+2]+=R*L,x(E,2*_+2*A+2)}for(_=0;_<D;_++)E[_]=E[2*_+1]<<16|E[2*_];for(_=D;_<2*D;_++)E[_]=0;return new s(E,0)};function x(M,D){for(;(M[D]&65535)!=M[D];)M[D+1]+=M[D]>>>16,M[D]&=65535,D++}function w(M,D){this.g=M,this.h=D}function S(M,D){if(b(D))throw Error("division by zero");if(b(M))return new w(d,d);if(v(M))return D=S(m(M),D),new w(m(D.g),m(D.h));if(v(D))return D=S(M,m(D)),new w(m(D.g),D.h);if(30<M.g.length){if(v(M)||v(D))throw Error("slowDivide_ only works with positive integers.");for(var E=f,_=D;0>=_.l(M);)E=P(E),_=P(_);var A=I(E,1),R=I(_,1);for(_=I(_,2),E=I(E,2);!b(_);){var F=R.add(_);0>=F.l(M)&&(A=A.add(E),R=F),_=I(_,1),E=I(E,1)}return D=g(M,A.j(D)),new w(A,D)}for(A=d;0<=M.l(D);){for(E=Math.max(1,Math.floor(M.m()/D.m())),_=Math.ceil(Math.log(E)/Math.LN2),_=48>=_?1:Math.pow(2,_-48),R=c(E),F=R.j(D);v(F)||0<F.l(M);)E-=_,R=c(E),F=R.j(D);b(R)&&(R=f),A=A.add(R),M=g(M,F)}return new w(A,M)}t.A=function(M){return S(this,M).h},t.and=function(M){for(var D=Math.max(this.g.length,M.g.length),E=[],_=0;_<D;_++)E[_]=this.i(_)&M.i(_);return new s(E,this.h&M.h)},t.or=function(M){for(var D=Math.max(this.g.length,M.g.length),E=[],_=0;_<D;_++)E[_]=this.i(_)|M.i(_);return new s(E,this.h|M.h)},t.xor=function(M){for(var D=Math.max(this.g.length,M.g.length),E=[],_=0;_<D;_++)E[_]=this.i(_)^M.i(_);return new s(E,this.h^M.h)};function P(M){for(var D=M.g.length+1,E=[],_=0;_<D;_++)E[_]=M.i(_)<<1|M.i(_-1)>>>31;return new s(E,M.h)}function I(M,D){var E=D>>5;D%=32;for(var _=M.g.length-E,A=[],R=0;R<_;R++)A[R]=0<D?M.i(R+E)>>>D|M.i(R+E+1)<<32-D:M.i(R+E);return new s(A,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,nZ=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=c,s.fromString=u,Mp=s}).apply(typeof h8!="undefined"?h8:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var AS=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rZ,Vy,iZ,iE,ZI,oZ,sZ,aZ;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(k,Y,re){return k==Array.prototype||k==Object.prototype||(k[Y]=re.value),k};function n(k){k=[typeof globalThis=="object"&&globalThis,k,typeof window=="object"&&window,typeof self=="object"&&self,typeof AS=="object"&&AS];for(var Y=0;Y<k.length;++Y){var re=k[Y];if(re&&re.Math==Math)return re}throw Error("Cannot find global object")}var r=n(this);function i(k,Y){if(Y)e:{var re=r;k=k.split(".");for(var we=0;we<k.length-1;we++){var ot=k[we];if(!(ot in re))break e;re=re[ot]}k=k[k.length-1],we=re[k],Y=Y(we),Y!=we&&Y!=null&&e(re,k,{configurable:!0,writable:!0,value:Y})}}function o(k,Y){k instanceof String&&(k+="");var re=0,we=!1,ot={next:function(){if(!we&&re<k.length){var pt=re++;return{value:Y(pt,k[pt]),done:!1}}return we=!0,{done:!0,value:void 0}}};return ot[Symbol.iterator]=function(){return ot},ot}i("Array.prototype.values",function(k){return k||function(){return o(this,function(Y,re){return re})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(k){var Y=typeof k;return Y=Y!="object"?Y:k?Array.isArray(k)?"array":Y:"null",Y=="array"||Y=="object"&&typeof k.length=="number"}function c(k){var Y=typeof k;return Y=="object"&&k!=null||Y=="function"}function u(k,Y,re){return k.call.apply(k.bind,arguments)}function d(k,Y,re){if(!k)throw Error();if(2<arguments.length){var we=Array.prototype.slice.call(arguments,2);return function(){var ot=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ot,we),k.apply(Y,ot)}}return function(){return k.apply(Y,arguments)}}function f(k,Y,re){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function p(k,Y){var re=Array.prototype.slice.call(arguments,1);return function(){var we=re.slice();return we.push.apply(we,arguments),k.apply(this,we)}}function b(k,Y){function re(){}re.prototype=Y.prototype,k.aa=Y.prototype,k.prototype=new re,k.prototype.constructor=k,k.Qb=function(we,ot,pt){for(var Ht=Array(arguments.length-2),Or=2;Or<arguments.length;Or++)Ht[Or-2]=arguments[Or];return Y.prototype[ot].apply(we,Ht)}}function v(k){const Y=k.length;if(0<Y){const re=Array(Y);for(let we=0;we<Y;we++)re[we]=k[we];return re}return[]}function m(k,Y){for(let re=1;re<arguments.length;re++){const we=arguments[re];if(l(we)){const ot=k.length||0,pt=we.length||0;k.length=ot+pt;for(let Ht=0;Ht<pt;Ht++)k[ot+Ht]=we[Ht]}else k.push(we)}}class g{constructor(Y,re){this.i=Y,this.j=re,this.h=0,this.g=null}get(){let Y;return 0<this.h?(this.h--,Y=this.g,this.g=Y.next,Y.next=null):Y=this.i(),Y}}function x(k){return/^[\s\xa0]*$/.test(k)}function w(){var k=a.navigator;return k&&(k=k.userAgent)?k:""}function S(k){return S[" "](k),k}S[" "]=function(){};var P=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function I(k,Y,re){for(const we in k)Y.call(re,k[we],we,k)}function M(k,Y){for(const re in k)Y.call(void 0,k[re],re,k)}function D(k){const Y={};for(const re in k)Y[re]=k[re];return Y}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(k,Y){let re,we;for(let ot=1;ot<arguments.length;ot++){we=arguments[ot];for(re in we)k[re]=we[re];for(let pt=0;pt<E.length;pt++)re=E[pt],Object.prototype.hasOwnProperty.call(we,re)&&(k[re]=we[re])}}function A(k){var Y=1;k=k.split(":");const re=[];for(;0<Y&&k.length;)re.push(k.shift()),Y--;return k.length&&re.push(k.join(":")),re}function R(k){a.setTimeout(()=>{throw k},0)}function F(){var k=H;let Y=null;return k.g&&(Y=k.g,k.g=k.g.next,k.g||(k.h=null),Y.next=null),Y}class L{constructor(){this.h=this.g=null}add(Y,re){const we=N.get();we.set(Y,re),this.h?this.h.next=we:this.g=we,this.h=we}}var N=new g(()=>new U,k=>k.reset());class U{constructor(){this.next=this.g=this.h=null}set(Y,re){this.h=Y,this.g=re,this.next=null}reset(){this.next=this.g=this.h=null}}let $,B=!1,H=new L,q=()=>{const k=a.Promise.resolve(void 0);$=()=>{k.then(z)}};var z=()=>{for(var k;k=F();){try{k.h.call(k.g)}catch(re){R(re)}var Y=N;Y.j(k),100>Y.h&&(Y.h++,k.next=Y.g,Y.g=k)}B=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(k,Y){this.type=k,this.g=this.target=Y,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var Z=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var k=!1,Y=Object.defineProperty({},"passive",{get:function(){k=!0}});try{const re=()=>{};a.addEventListener("test",re,Y),a.removeEventListener("test",re,Y)}catch(re){}return k}();function ee(k,Y){if(K.call(this,k?k.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,k){var re=this.type=k.type,we=k.changedTouches&&k.changedTouches.length?k.changedTouches[0]:null;if(this.target=k.target||k.srcElement,this.g=Y,Y=k.relatedTarget){if(P){e:{try{S(Y.nodeName);var ot=!0;break e}catch(pt){}ot=!1}ot||(Y=null)}}else re=="mouseover"?Y=k.fromElement:re=="mouseout"&&(Y=k.toElement);this.relatedTarget=Y,we?(this.clientX=we.clientX!==void 0?we.clientX:we.pageX,this.clientY=we.clientY!==void 0?we.clientY:we.pageY,this.screenX=we.screenX||0,this.screenY=we.screenY||0):(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0),this.button=k.button,this.key=k.key||"",this.ctrlKey=k.ctrlKey,this.altKey=k.altKey,this.shiftKey=k.shiftKey,this.metaKey=k.metaKey,this.pointerId=k.pointerId||0,this.pointerType=typeof k.pointerType=="string"?k.pointerType:V[k.pointerType]||"",this.state=k.state,this.i=k,k.defaultPrevented&&ee.aa.h.call(this)}}b(ee,K);var V={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.aa.h.call(this);var k=this.i;k.preventDefault?k.preventDefault():k.returnValue=!1};var J="closure_listenable_"+(1e6*Math.random()|0),oe=0;function ne(k,Y,re,we,ot){this.listener=k,this.proxy=null,this.src=Y,this.type=re,this.capture=!!we,this.ha=ot,this.key=++oe,this.da=this.fa=!1}function pe(k){k.da=!0,k.listener=null,k.proxy=null,k.src=null,k.ha=null}function ye(k){this.src=k,this.g={},this.h=0}ye.prototype.add=function(k,Y,re,we,ot){var pt=k.toString();k=this.g[pt],k||(k=this.g[pt]=[],this.h++);var Ht=_e(k,Y,we,ot);return-1<Ht?(Y=k[Ht],re||(Y.fa=!1)):(Y=new ne(Y,this.src,pt,!!we,ot),Y.fa=re,k.push(Y)),Y};function Ce(k,Y){var re=Y.type;if(re in k.g){var we=k.g[re],ot=Array.prototype.indexOf.call(we,Y,void 0),pt;(pt=0<=ot)&&Array.prototype.splice.call(we,ot,1),pt&&(pe(Y),k.g[re].length==0&&(delete k.g[re],k.h--))}}function _e(k,Y,re,we){for(var ot=0;ot<k.length;++ot){var pt=k[ot];if(!pt.da&&pt.listener==Y&&pt.capture==!!re&&pt.ha==we)return ot}return-1}var ce="closure_lm_"+(1e6*Math.random()|0),Be={};function de(k,Y,re,we,ot){if(Array.isArray(Y)){for(var pt=0;pt<Y.length;pt++)de(k,Y[pt],re,we,ot);return null}return re=Me(re),k&&k[J]?k.K(Y,re,c(we)?!!we.capture:!1,ot):me(k,Y,re,!1,we,ot)}function me(k,Y,re,we,ot,pt){if(!Y)throw Error("Invalid event type");var Ht=c(ot)?!!ot.capture:!!ot,Or=ve(k);if(Or||(k[ce]=Or=new ye(k)),re=Or.add(Y,re,we,Ht,pt),re.proxy)return re;if(we=ie(),re.proxy=we,we.src=k,we.listener=re,k.addEventListener)Z||(ot=Ht),ot===void 0&&(ot=!1),k.addEventListener(Y.toString(),we,ot);else if(k.attachEvent)k.attachEvent(X(Y.toString()),we);else if(k.addListener&&k.removeListener)k.addListener(we);else throw Error("addEventListener and attachEvent are unavailable.");return re}function ie(){function k(re){return Y.call(k.src,k.listener,re)}const Y=W;return k}function ae(k,Y,re,we,ot){if(Array.isArray(Y))for(var pt=0;pt<Y.length;pt++)ae(k,Y[pt],re,we,ot);else we=c(we)?!!we.capture:!!we,re=Me(re),k&&k[J]?(k=k.i,Y=String(Y).toString(),Y in k.g&&(pt=k.g[Y],re=_e(pt,re,we,ot),-1<re&&(pe(pt[re]),Array.prototype.splice.call(pt,re,1),pt.length==0&&(delete k.g[Y],k.h--)))):k&&(k=ve(k))&&(Y=k.g[Y.toString()],k=-1,Y&&(k=_e(Y,re,we,ot)),(re=-1<k?Y[k]:null)&&ge(re))}function ge(k){if(typeof k!="number"&&k&&!k.da){var Y=k.src;if(Y&&Y[J])Ce(Y.i,k);else{var re=k.type,we=k.proxy;Y.removeEventListener?Y.removeEventListener(re,we,k.capture):Y.detachEvent?Y.detachEvent(X(re),we):Y.addListener&&Y.removeListener&&Y.removeListener(we),(re=ve(Y))?(Ce(re,k),re.h==0&&(re.src=null,Y[ce]=null)):pe(k)}}}function X(k){return k in Be?Be[k]:Be[k]="on"+k}function W(k,Y){if(k.da)k=!0;else{Y=new ee(Y,this);var re=k.listener,we=k.ha||k.src;k.fa&&ge(k),k=re.call(we,Y)}return k}function ve(k){return k=k[ce],k instanceof ye?k:null}var ue="__closure_events_fn_"+(1e9*Math.random()>>>0);function Me(k){return typeof k=="function"?k:(k[ue]||(k[ue]=function(Y){return k.handleEvent(Y)}),k[ue])}function Ae(){G.call(this),this.i=new ye(this),this.M=this,this.F=null}b(Ae,G),Ae.prototype[J]=!0,Ae.prototype.removeEventListener=function(k,Y,re,we){ae(this,k,Y,re,we)};function Ne(k,Y){var re,we=k.F;if(we)for(re=[];we;we=we.F)re.push(we);if(k=k.M,we=Y.type||Y,typeof Y=="string")Y=new K(Y,k);else if(Y instanceof K)Y.target=Y.target||k;else{var ot=Y;Y=new K(we,k),_(Y,ot)}if(ot=!0,re)for(var pt=re.length-1;0<=pt;pt--){var Ht=Y.g=re[pt];ot=Re(Ht,we,!0,Y)&&ot}if(Ht=Y.g=k,ot=Re(Ht,we,!0,Y)&&ot,ot=Re(Ht,we,!1,Y)&&ot,re)for(pt=0;pt<re.length;pt++)Ht=Y.g=re[pt],ot=Re(Ht,we,!1,Y)&&ot}Ae.prototype.N=function(){if(Ae.aa.N.call(this),this.i){var k=this.i,Y;for(Y in k.g){for(var re=k.g[Y],we=0;we<re.length;we++)pe(re[we]);delete k.g[Y],k.h--}}this.F=null},Ae.prototype.K=function(k,Y,re,we){return this.i.add(String(k),Y,!1,re,we)},Ae.prototype.L=function(k,Y,re,we){return this.i.add(String(k),Y,!0,re,we)};function Re(k,Y,re,we){if(Y=k.i.g[String(Y)],!Y)return!0;Y=Y.concat();for(var ot=!0,pt=0;pt<Y.length;++pt){var Ht=Y[pt];if(Ht&&!Ht.da&&Ht.capture==re){var Or=Ht.listener,ho=Ht.ha||Ht.src;Ht.fa&&Ce(k.i,Ht),ot=Or.call(ho,we)!==!1&&ot}}return ot&&!we.defaultPrevented}function Ie(k,Y,re){if(typeof k=="function")re&&(k=f(k,re));else if(k&&typeof k.handleEvent=="function")k=f(k.handleEvent,k);else throw Error("Invalid listener argument");return 2147483647<Number(Y)?-1:a.setTimeout(k,Y||0)}function it(k){k.g=Ie(()=>{k.g=null,k.i&&(k.i=!1,it(k))},k.l);const Y=k.h;k.h=null,k.m.apply(null,Y)}class Ee extends G{constructor(Y,re){super(),this.m=Y,this.l=re,this.h=null,this.i=!1,this.g=null}j(Y){this.h=arguments,this.g?this.i=!0:it(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Le(k){G.call(this),this.h=k,this.g={}}b(Le,G);var Ge=[];function Ke(k){I(k.g,function(Y,re){this.g.hasOwnProperty(re)&&ge(Y)},k),k.g={}}Le.prototype.N=function(){Le.aa.N.call(this),Ke(this)},Le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var je=a.JSON.stringify,et=a.JSON.parse,lt=class{stringify(k){return a.JSON.stringify(k,void 0)}parse(k){return a.JSON.parse(k,void 0)}};function ht(){}ht.prototype.h=null;function ke(k){return k.h||(k.h=k.i())}function gt(){}var tt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yt(){K.call(this,"d")}b(yt,K);function at(){K.call(this,"c")}b(at,K);var mt={},Ot=null;function rn(){return Ot=Ot||new Ae}mt.La="serverreachability";function on(k){K.call(this,mt.La,k)}b(on,K);function Pe(k){const Y=rn();Ne(Y,new on(Y))}mt.STAT_EVENT="statevent";function Ue(k,Y){K.call(this,mt.STAT_EVENT,k),this.stat=Y}b(Ue,K);function Xe(k){const Y=rn();Ne(Y,new Ue(Y,k))}mt.Ma="timingevent";function vt(k,Y){K.call(this,mt.Ma,k),this.size=Y}b(vt,K);function Pt(k,Y){if(typeof k!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){k()},Y)}function jt(){this.g=!0}jt.prototype.xa=function(){this.g=!1};function Nt(k,Y,re,we,ot,pt){k.info(function(){if(k.g)if(pt)for(var Ht="",Or=pt.split("&"),ho=0;ho<Or.length;ho++){var vr=Or[ho].split("=");if(1<vr.length){var $r=vr[0];vr=vr[1];var to=$r.split("_");Ht=2<=to.length&&to[1]=="type"?Ht+($r+"="+vr+"&"):Ht+($r+"=redacted&")}}else Ht=null;else Ht=pt;return"XMLHTTP REQ ("+we+") [attempt "+ot+"]: "+Y+`
`+re+`
`+Ht})}function Yt(k,Y,re,we,ot,pt,Ht){k.info(function(){return"XMLHTTP RESP ("+we+") [ attempt "+ot+"]: "+Y+`
`+re+`
`+pt+" "+Ht})}function en(k,Y,re,we){k.info(function(){return"XMLHTTP TEXT ("+Y+"): "+hn(k,re)+(we?" "+we:"")})}function fn(k,Y){k.info(function(){return"TIMEOUT: "+Y})}jt.prototype.info=function(){};function hn(k,Y){if(!k.g)return Y;if(!Y)return null;try{var re=JSON.parse(Y);if(re){for(k=0;k<re.length;k++)if(Array.isArray(re[k])){var we=re[k];if(!(2>we.length)){var ot=we[1];if(Array.isArray(ot)&&!(1>ot.length)){var pt=ot[0];if(pt!="noop"&&pt!="stop"&&pt!="close")for(var Ht=1;Ht<ot.length;Ht++)ot[Ht]=""}}}}return je(re)}catch(Or){return Y}}var mn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},er;function Wr(){}b(Wr,ht),Wr.prototype.g=function(){return new XMLHttpRequest},Wr.prototype.i=function(){return{}},er=new Wr;function lr(k,Y,re,we){this.j=k,this.i=Y,this.l=re,this.R=we||1,this.U=new Le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yn}function Yn(){this.i=null,this.g="",this.h=!1}var yn={},Te={};function Ze(k,Y,re){k.L=1,k.v=fi(eo(Y)),k.m=re,k.P=!0,le(k,null)}function le(k,Y){k.F=Date.now(),qe(k),k.A=eo(k.v);var re=k.A,we=k.R;Array.isArray(we)||(we=[String(we)]),vh(re.i,"t",we),k.C=0,re=k.j.J,k.h=new Yn,k.g=n1(k.j,re?Y:null,!k.m),0<k.O&&(k.M=new Ee(f(k.Y,k,k.g),k.O)),Y=k.U,re=k.g,we=k.ca;var ot="readystatechange";Array.isArray(ot)||(ot&&(Ge[0]=ot.toString()),ot=Ge);for(var pt=0;pt<ot.length;pt++){var Ht=de(re,ot[pt],we||Y.handleEvent,!1,Y.h||Y);if(!Ht)break;Y.g[Ht.key]=Ht}Y=k.H?D(k.H):{},k.m?(k.u||(k.u="POST"),Y["Content-Type"]="application/x-www-form-urlencoded",k.g.ea(k.A,k.u,k.m,Y)):(k.u="GET",k.g.ea(k.A,k.u,null,Y)),Pe(),Nt(k.i,k.u,k.A,k.l,k.R,k.m)}lr.prototype.ca=function(k){k=k.target;const Y=this.M;Y&&Kr(k)==3?Y.j():this.Y(k)},lr.prototype.Y=function(k){try{if(k==this.g)e:{const to=Kr(this.g);var Y=this.g.Ba();const $a=this.g.Z();if(!(3>to)&&(to!=3||this.g&&(this.h.h||this.g.oa()||fo(this.g)))){this.J||to!=4||Y==7||(Y==8||0>=$a?Pe(3):Pe(2)),wt(this);var re=this.g.Z();this.X=re;t:if(Fe(this)){var we=fo(this.g);k="";var ot=we.length,pt=Kr(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){Ct(this),It(this);var Ht="";break t}this.h.i=new a.TextDecoder}for(Y=0;Y<ot;Y++)this.h.h=!0,k+=this.h.i.decode(we[Y],{stream:!(pt&&Y==ot-1)});we.length=0,this.h.g+=k,this.C=0,Ht=this.h.g}else Ht=this.g.oa();if(this.o=re==200,Yt(this.i,this.u,this.A,this.l,this.R,to,re),this.o){if(this.T&&!this.K){t:{if(this.g){var Or,ho=this.g;if((Or=ho.g?ho.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Or)){var vr=Or;break t}}vr=null}if(re=vr)en(this.i,this.l,re,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wt(this,re);else{this.o=!1,this.s=3,Xe(12),Ct(this),It(this);break e}}if(this.P){re=!0;let Ws;for(;!this.J&&this.C<Ht.length;)if(Ws=Je(this,Ht),Ws==Te){to==4&&(this.s=4,Xe(14),re=!1),en(this.i,this.l,null,"[Incomplete Response]");break}else if(Ws==yn){this.s=4,Xe(15),en(this.i,this.l,Ht,"[Invalid Chunk]"),re=!1;break}else en(this.i,this.l,Ws,null),Wt(this,Ws);if(Fe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),to!=4||Ht.length!=0||this.h.h||(this.s=1,Xe(16),re=!1),this.o=this.o&&re,!re)en(this.i,this.l,Ht,"[Invalid Chunked Response]"),Ct(this),It(this);else if(0<Ht.length&&!this.W){this.W=!0;var $r=this.j;$r.g==this&&$r.ba&&!$r.M&&($r.j.info("Great, no buffering proxy detected. Bytes received: "+Ht.length),Wa($r),$r.M=!0,Xe(11))}}else en(this.i,this.l,Ht,null),Wt(this,Ht);to==4&&Ct(this),this.o&&!this.J&&(to==4?ri(this.j,this):(this.o=!1,qe(this)))}else Fl(this.g),re==400&&0<Ht.indexOf("Unknown SID")?(this.s=3,Xe(12)):(this.s=0,Xe(13)),Ct(this),It(this)}}}catch(to){}finally{}};function Fe(k){return k.g?k.u=="GET"&&k.L!=2&&k.j.Ca:!1}function Je(k,Y){var re=k.C,we=Y.indexOf(`
`,re);return we==-1?Te:(re=Number(Y.substring(re,we)),isNaN(re)?yn:(we+=1,we+re>Y.length?Te:(Y=Y.slice(we,we+re),k.C=we+re,Y)))}lr.prototype.cancel=function(){this.J=!0,Ct(this)};function qe(k){k.S=Date.now()+k.I,Ve(k,k.I)}function Ve(k,Y){if(k.B!=null)throw Error("WatchDog timer not null");k.B=Pt(f(k.ba,k),Y)}function wt(k){k.B&&(a.clearTimeout(k.B),k.B=null)}lr.prototype.ba=function(){this.B=null;const k=Date.now();0<=k-this.S?(fn(this.i,this.A),this.L!=2&&(Pe(),Xe(17)),Ct(this),this.s=2,It(this)):Ve(this,this.S-k)};function It(k){k.j.G==0||k.J||ri(k.j,k)}function Ct(k){wt(k);var Y=k.M;Y&&typeof Y.ma=="function"&&Y.ma(),k.M=null,Ke(k.U),k.g&&(Y=k.g,k.g=null,Y.abort(),Y.ma())}function Wt(k,Y){try{var re=k.j;if(re.G!=0&&(re.g==k||st(re.h,k))){if(!k.K&&st(re.h,k)&&re.G==3){try{var we=re.Da.g.parse(Y)}catch(vr){we=null}if(Array.isArray(we)&&we.length==3){var ot=we;if(ot[0]==0){e:if(!re.u){if(re.g)if(re.g.F+3e3<k.F)Ld(re),xh(re);else break e;Am(re),Xe(18)}}else re.za=ot[1],0<re.za-re.T&&37500>ot[2]&&re.F&&re.v==0&&!re.C&&(re.C=Pt(f(re.Za,re),6e3));if(1>=be(re.h)&&re.ca){try{re.ca()}catch(vr){}re.ca=void 0}}else Nl(re,11)}else if((k.K||re.g==k)&&Ld(re),!x(Y))for(ot=re.Da.g.parse(Y),Y=0;Y<ot.length;Y++){let vr=ot[Y];if(re.T=vr[0],vr=vr[1],re.G==2)if(vr[0]=="c"){re.K=vr[1],re.ia=vr[2];const $r=vr[3];$r!=null&&(re.la=$r,re.j.info("VER="+re.la));const to=vr[4];to!=null&&(re.Aa=to,re.j.info("SVER="+re.Aa));const $a=vr[5];$a!=null&&typeof $a=="number"&&0<$a&&(we=1.5*$a,re.L=we,re.j.info("backChannelRequestTimeoutMs_="+we)),we=re;const Ws=k.g;if(Ws){const Eh=Ws.g?Ws.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Eh){var pt=we.h;pt.g||Eh.indexOf("spdy")==-1&&Eh.indexOf("quic")==-1&&Eh.indexOf("h2")==-1||(pt.j=pt.l,pt.g=new Set,pt.h&&(zt(pt,pt.h),pt.h=null))}if(we.D){const T0=Ws.g?Ws.g.getResponseHeader("X-HTTP-Session-Id"):null;T0&&(we.ya=T0,Un(we.I,we.D,T0))}}re.G=3,re.l&&re.l.ua(),re.ba&&(re.R=Date.now()-k.F,re.j.info("Handshake RTT: "+re.R+"ms")),we=re;var Ht=k;if(we.qa=Tm(we,we.J?we.ia:null,we.W),Ht.K){At(we.h,Ht);var Or=Ht,ho=we.L;ho&&(Or.I=ho),Or.B&&(wt(Or),qe(Or)),we.g=Ht}else e1(we);0<re.i.length&&bh(re)}else vr[0]!="stop"&&vr[0]!="close"||Nl(re,7);else re.G==3&&(vr[0]=="stop"||vr[0]=="close"?vr[0]=="stop"?Nl(re,7):pu(re):vr[0]!="noop"&&re.l&&re.l.ta(vr),re.v=0)}}Pe(4)}catch(vr){}}var ln=class{constructor(k,Y){this.g=k,this.map=Y}};function vn(k){this.l=k||10,a.PerformanceNavigationTiming?(k=a.performance.getEntriesByType("navigation"),k=0<k.length&&(k[0].nextHopProtocol=="hq"||k[0].nextHopProtocol=="h2")):k=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=k?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cn(k){return k.h?!0:k.g?k.g.size>=k.j:!1}function be(k){return k.h?1:k.g?k.g.size:0}function st(k,Y){return k.h?k.h==Y:k.g?k.g.has(Y):!1}function zt(k,Y){k.g?k.g.add(Y):k.h=Y}function At(k,Y){k.h&&k.h==Y?k.h=null:k.g&&k.g.has(Y)&&k.g.delete(Y)}vn.prototype.cancel=function(){if(this.i=Bt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const k of this.g.values())k.cancel();this.g.clear()}};function Bt(k){if(k.h!=null)return k.i.concat(k.h.D);if(k.g!=null&&k.g.size!==0){let Y=k.i;for(const re of k.g.values())Y=Y.concat(re.D);return Y}return v(k.i)}function St(k){if(k.V&&typeof k.V=="function")return k.V();if(typeof Map!="undefined"&&k instanceof Map||typeof Set!="undefined"&&k instanceof Set)return Array.from(k.values());if(typeof k=="string")return k.split("");if(l(k)){for(var Y=[],re=k.length,we=0;we<re;we++)Y.push(k[we]);return Y}Y=[],re=0;for(we in k)Y[re++]=k[we];return Y}function Qn(k){if(k.na&&typeof k.na=="function")return k.na();if(!k.V||typeof k.V!="function"){if(typeof Map!="undefined"&&k instanceof Map)return Array.from(k.keys());if(!(typeof Set!="undefined"&&k instanceof Set)){if(l(k)||typeof k=="string"){var Y=[];k=k.length;for(var re=0;re<k;re++)Y.push(re);return Y}Y=[],re=0;for(const we in k)Y[re++]=we;return Y}}}function bn(k,Y){if(k.forEach&&typeof k.forEach=="function")k.forEach(Y,void 0);else if(l(k)||typeof k=="string")Array.prototype.forEach.call(k,Y,void 0);else for(var re=Qn(k),we=St(k),ot=we.length,pt=0;pt<ot;pt++)Y.call(void 0,we[pt],re&&re[pt],k)}var Gr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ai(k,Y){if(k){k=k.split("&");for(var re=0;re<k.length;re++){var we=k[re].indexOf("="),ot=null;if(0<=we){var pt=k[re].substring(0,we);ot=k[re].substring(we+1)}else pt=k[re];Y(pt,ot?decodeURIComponent(ot.replace(/\+/g," ")):"")}}}function cr(k){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,k instanceof cr){this.h=k.h,_r(this,k.j),this.o=k.o,this.g=k.g,wi(this,k.s),this.l=k.l;var Y=k.i,re=new ha;re.i=Y.i,Y.g&&(re.g=new Map(Y.g),re.h=Y.h),uo(this,re),this.m=k.m}else k&&(Y=String(k).match(Gr))?(this.h=!1,_r(this,Y[1]||"",!0),this.o=Yo(Y[2]||""),this.g=Yo(Y[3]||"",!0),wi(this,Y[4]),this.l=Yo(Y[5]||"",!0),uo(this,Y[6]||"",!0),this.m=Yo(Y[7]||"")):(this.h=!1,this.i=new ha(null,this.h))}cr.prototype.toString=function(){var k=[],Y=this.j;Y&&k.push(Oi(Y,mh,!0),":");var re=this.g;return(re||Y=="file")&&(k.push("//"),(Y=this.o)&&k.push(Oi(Y,mh,!0),"@"),k.push(encodeURIComponent(String(re)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),re=this.s,re!=null&&k.push(":",String(re))),(re=this.l)&&(this.g&&re.charAt(0)!="/"&&k.push("/"),k.push(Oi(re,re.charAt(0)=="/"?xm:gh,!0))),(re=this.i.toString())&&k.push("?",re),(re=this.m)&&k.push("#",Oi(re,wm)),k.join("")};function eo(k){return new cr(k)}function _r(k,Y,re){k.j=re?Yo(Y,!0):Y,k.j&&(k.j=k.j.replace(/:$/,""))}function wi(k,Y){if(Y){if(Y=Number(Y),isNaN(Y)||0>Y)throw Error("Bad port number "+Y);k.s=Y}else k.s=null}function uo(k,Y,re){Y instanceof ha?(k.i=Y,yh(k.i,k.h)):(re||(Y=Oi(Y,bm)),k.i=new ha(Y,k.h))}function Un(k,Y,re){k.i.set(Y,re)}function fi(k){return Un(k,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),k}function Yo(k,Y){return k?Y?decodeURI(k.replace(/%25/g,"%2525")):decodeURIComponent(k):""}function Oi(k,Y,re){return typeof k=="string"?(k=encodeURI(k).replace(Y,ym),re&&(k=k.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k):null}function ym(k){return k=k.charCodeAt(0),"%"+(k>>4&15).toString(16)+(k&15).toString(16)}var mh=/[#\/\?@]/g,gh=/[#\?:]/g,xm=/[#\?]/g,bm=/[#\?@]/g,wm=/#/g;function ha(k,Y){this.h=this.g=null,this.i=k||null,this.j=!!Y}function Vs(k){k.g||(k.g=new Map,k.h=0,k.i&&ai(k.i,function(Y,re){k.add(decodeURIComponent(Y.replace(/\+/g," ")),re)}))}t=ha.prototype,t.add=function(k,Y){Vs(this),this.i=null,k=Il(this,k);var re=this.g.get(k);return re||this.g.set(k,re=[]),re.push(Y),this.h+=1,this};function Fd(k,Y){Vs(k),Y=Il(k,Y),k.g.has(Y)&&(k.i=null,k.h-=k.g.get(Y).length,k.g.delete(Y))}function Od(k,Y){return Vs(k),Y=Il(k,Y),k.g.has(Y)}t.forEach=function(k,Y){Vs(this),this.g.forEach(function(re,we){re.forEach(function(ot){k.call(Y,ot,we,this)},this)},this)},t.na=function(){Vs(this);const k=Array.from(this.g.values()),Y=Array.from(this.g.keys()),re=[];for(let we=0;we<Y.length;we++){const ot=k[we];for(let pt=0;pt<ot.length;pt++)re.push(Y[we])}return re},t.V=function(k){Vs(this);let Y=[];if(typeof k=="string")Od(this,k)&&(Y=Y.concat(this.g.get(Il(this,k))));else{k=Array.from(this.g.values());for(let re=0;re<k.length;re++)Y=Y.concat(k[re])}return Y},t.set=function(k,Y){return Vs(this),this.i=null,k=Il(this,k),Od(this,k)&&(this.h-=this.g.get(k).length),this.g.set(k,[Y]),this.h+=1,this},t.get=function(k,Y){return k?(k=this.V(k),0<k.length?String(k[0]):Y):Y};function vh(k,Y,re){Fd(k,Y),0<re.length&&(k.i=null,k.g.set(Il(k,Y),v(re)),k.h+=re.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const k=[],Y=Array.from(this.g.keys());for(var re=0;re<Y.length;re++){var we=Y[re];const pt=encodeURIComponent(String(we)),Ht=this.V(we);for(we=0;we<Ht.length;we++){var ot=pt;Ht[we]!==""&&(ot+="="+encodeURIComponent(String(Ht[we]))),k.push(ot)}}return this.i=k.join("&")};function Il(k,Y){return Y=String(Y),k.j&&(Y=Y.toLowerCase()),Y}function yh(k,Y){Y&&!k.j&&(Vs(k),k.i=null,k.g.forEach(function(re,we){var ot=we.toLowerCase();we!=ot&&(Fd(this,we),vh(this,ot,re))},k)),k.j=Y}function Sm(k,Y){const re=new jt;if(a.Image){const we=new Image;we.onload=p(Eo,re,"TestLoadImage: loaded",!0,Y,we),we.onerror=p(Eo,re,"TestLoadImage: error",!1,Y,we),we.onabort=p(Eo,re,"TestLoadImage: abort",!1,Y,we),we.ontimeout=p(Eo,re,"TestLoadImage: timeout",!1,Y,we),a.setTimeout(function(){we.ontimeout&&we.ontimeout()},1e4),we.src=k}else Y(!1)}function kl(k,Y){const re=new jt,we=new AbortController,ot=setTimeout(()=>{we.abort(),Eo(re,"TestPingServer: timeout",!1,Y)},1e4);fetch(k,{signal:we.signal}).then(pt=>{clearTimeout(ot),pt.ok?Eo(re,"TestPingServer: ok",!0,Y):Eo(re,"TestPingServer: server error",!1,Y)}).catch(()=>{clearTimeout(ot),Eo(re,"TestPingServer: error",!1,Y)})}function Eo(k,Y,re,we,ot){try{ot&&(ot.onload=null,ot.onerror=null,ot.onabort=null,ot.ontimeout=null),we(re)}catch(pt){}}function C0(){this.g=new lt}function _m(k,Y,re){const we=re||"";try{bn(k,function(ot,pt){let Ht=ot;c(ot)&&(Ht=je(ot)),Y.push(we+pt+"="+encodeURIComponent(Ht))})}catch(ot){throw Y.push(we+"type="+encodeURIComponent("_badmap")),ot}}function Nd(k){this.l=k.Ub||null,this.j=k.eb||!1}b(Nd,ht),Nd.prototype.g=function(){return new fu(this.l,this.j)},Nd.prototype.i=function(k){return function(){return k}}({});function fu(k,Y){Ae.call(this),this.D=k,this.o=Y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(fu,Ae),t=fu.prototype,t.open=function(k,Y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=k,this.A=Y,this.readyState=1,gr(this)},t.send=function(k){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const Y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};k&&(Y.body=k),(this.D||a).fetch(new Request(this.A,Y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cr(this)),this.readyState=0},t.Sa=function(k){if(this.g&&(this.l=k,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=k.headers,this.readyState=2,gr(this)),this.g&&(this.readyState=3,gr(this),this.g)))if(this.responseType==="arraybuffer")k.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream!="undefined"&&"body"in k){if(this.j=k.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Em(this)}else k.text().then(this.Ra.bind(this),this.ga.bind(this))};function Em(k){k.j.read().then(k.Pa.bind(k)).catch(k.ga.bind(k))}t.Pa=function(k){if(this.g){if(this.o&&k.value)this.response.push(k.value);else if(!this.o){var Y=k.value?k.value:new Uint8Array(0);(Y=this.v.decode(Y,{stream:!k.done}))&&(this.response=this.responseText+=Y)}k.done?Cr(this):gr(this),this.readyState==3&&Em(this)}},t.Ra=function(k){this.g&&(this.response=this.responseText=k,Cr(this))},t.Qa=function(k){this.g&&(this.response=k,Cr(this))},t.ga=function(){this.g&&Cr(this)};function Cr(k){k.readyState=4,k.l=null,k.j=null,k.v=null,gr(k)}t.setRequestHeader=function(k,Y){this.u.append(k,Y)},t.getResponseHeader=function(k){return this.h&&this.h.get(k.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const k=[],Y=this.h.entries();for(var re=Y.next();!re.done;)re=re.value,k.push(re[0]+": "+re[1]),re=Y.next();return k.join(`\r
`)};function gr(k){k.onreadystatechange&&k.onreadystatechange.call(k)}Object.defineProperty(fu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(k){this.m=k?"include":"same-origin"}});function Cm(k){let Y="";return I(k,function(re,we){Y+=we,Y+=":",Y+=re,Y+=`\r
`}),Y}function De(k,Y,re){e:{for(we in re){var we=!1;break e}we=!0}we||(re=Cm(re),typeof k=="string"?re!=null&&encodeURIComponent(String(re)):Un(k,Y,re))}function We(k){Ae.call(this),this.headers=new Map,this.o=k||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(We,Ae);var ut=/^https?$/i,un=["POST","PUT"];t=We.prototype,t.Ha=function(k){this.J=k},t.ea=function(k,Y,re,we){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+k);Y=Y?Y.toUpperCase():"GET",this.D=k,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():er.g(),this.v=this.o?ke(this.o):ke(er),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(Y,String(k),!0),this.B=!1}catch(pt){rr(this,pt);return}if(k=re||"",re=new Map(this.headers),we)if(Object.getPrototypeOf(we)===Object.prototype)for(var ot in we)re.set(ot,we[ot]);else if(typeof we.keys=="function"&&typeof we.get=="function")for(const pt of we.keys())re.set(pt,we.get(pt));else throw Error("Unknown input type for opt_headers: "+String(we));we=Array.from(re.keys()).find(pt=>pt.toLowerCase()=="content-type"),ot=a.FormData&&k instanceof a.FormData,!(0<=Array.prototype.indexOf.call(un,Y,void 0))||we||ot||re.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[pt,Ht]of re)this.g.setRequestHeader(pt,Ht);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fr(this),this.u=!0,this.g.send(k),this.u=!1}catch(pt){rr(this,pt)}};function rr(k,Y){k.h=!1,k.g&&(k.j=!0,k.g.abort(),k.j=!1),k.l=Y,k.m=5,Ar(k),En(k)}function Ar(k){k.A||(k.A=!0,Ne(k,"complete"),Ne(k,"error"))}t.abort=function(k){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=k||7,Ne(this,"complete"),Ne(this,"abort"),En(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),En(this,!0)),We.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?qr(this):this.bb())},t.bb=function(){qr(this)};function qr(k){if(k.h&&typeof s!="undefined"&&(!k.v[1]||Kr(k)!=4||k.Z()!=2)){if(k.u&&Kr(k)==4)Ie(k.Ea,0,k);else if(Ne(k,"readystatechange"),Kr(k)==4){k.h=!1;try{const Ht=k.Z();e:switch(Ht){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var Y=!0;break e;default:Y=!1}var re;if(!(re=Y)){var we;if(we=Ht===0){var ot=String(k.D).match(Gr)[1]||null;!ot&&a.self&&a.self.location&&(ot=a.self.location.protocol.slice(0,-1)),we=!ut.test(ot?ot.toLowerCase():"")}re=we}if(re)Ne(k,"complete"),Ne(k,"success");else{k.m=6;try{var pt=2<Kr(k)?k.g.statusText:""}catch(Or){pt=""}k.l=pt+" ["+k.Z()+"]",Ar(k)}}finally{En(k)}}}}function En(k,Y){if(k.g){Fr(k);const re=k.g,we=k.v[0]?()=>{}:null;k.g=null,k.v=null,Y||Ne(k,"ready");try{re.onreadystatechange=we}catch(ot){}}}function Fr(k){k.I&&(a.clearTimeout(k.I),k.I=null)}t.isActive=function(){return!!this.g};function Kr(k){return k.g?k.g.readyState:0}t.Z=function(){try{return 2<Kr(this)?this.g.status:-1}catch(k){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(k){return""}},t.Oa=function(k){if(this.g){var Y=this.g.responseText;return k&&Y.indexOf(k)==0&&(Y=Y.substring(k.length)),et(Y)}};function fo(k){try{if(!k.g)return null;if("response"in k.g)return k.g.response;switch(k.H){case"":case"text":return k.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in k.g)return k.g.mozResponseArrayBuffer}return null}catch(Y){return null}}function Fl(k){const Y={};k=(k.g&&2<=Kr(k)&&k.g.getAllResponseHeaders()||"").split(`\r
`);for(let we=0;we<k.length;we++){if(x(k[we]))continue;var re=A(k[we]);const ot=re[0];if(re=re[1],typeof re!="string")continue;re=re.trim();const pt=Y[ot]||[];Y[ot]=pt,pt.push(re)}M(Y,function(we){return we.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ni(k,Y,re){return re&&re.internalChannelParams&&re.internalChannelParams[k]||Y}function hu(k){this.Aa=0,this.i=[],this.j=new jt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ni("failFast",!1,k),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ni("baseRetryDelayMs",5e3,k),this.cb=Ni("retryDelaySeedMs",1e4,k),this.Wa=Ni("forwardChannelMaxRetries",2,k),this.wa=Ni("forwardChannelRequestTimeoutMs",2e4,k),this.pa=k&&k.xmlHttpFactory||void 0,this.Xa=k&&k.Tb||void 0,this.Ca=k&&k.useFetchStreams||!1,this.L=void 0,this.J=k&&k.supportsCrossDomainXhr||!1,this.K="",this.h=new vn(k&&k.concurrentRequestLimit),this.Da=new C0,this.P=k&&k.fastHandshake||!1,this.O=k&&k.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=k&&k.Rb||!1,k&&k.xa&&this.j.xa(),k&&k.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&k&&k.detectBufferingProxy||!1,this.ja=void 0,k&&k.longPollingTimeout&&0<k.longPollingTimeout&&(this.ja=k.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=hu.prototype,t.la=8,t.G=1,t.connect=function(k,Y,re,we){Xe(0),this.W=k,this.H=Y||{},re&&we!==void 0&&(this.H.OSID=re,this.H.OAID=we),this.F=this.X,this.I=Tm(this,null,this.W),bh(this)};function pu(k){if(A0(k),k.G==3){var Y=k.U++,re=eo(k.I);if(Un(re,"SID",k.K),Un(re,"RID",Y),Un(re,"TYPE","terminate"),wh(k,re),Y=new lr(k,k.j,Y),Y.L=2,Y.v=fi(eo(re)),re=!1,a.navigator&&a.navigator.sendBeacon)try{re=a.navigator.sendBeacon(Y.v.toString(),"")}catch(we){}!re&&a.Image&&(new Image().src=Y.v,re=!0),re||(Y.g=n1(Y.j,null),Y.g.ea(Y.v)),Y.F=Date.now(),qe(Y)}t1(k)}function xh(k){k.g&&(Wa(k),k.g.cancel(),k.g=null)}function A0(k){xh(k),k.u&&(a.clearTimeout(k.u),k.u=null),Ld(k),k.h.cancel(),k.s&&(typeof k.s=="number"&&a.clearTimeout(k.s),k.s=null)}function bh(k){if(!cn(k.h)&&!k.s){k.s=!0;var Y=k.Ga;$||q(),B||($(),B=!0),H.add(Y,k),k.B=0}}function Jw(k,Y){return be(k.h)>=k.h.j-(k.s?1:0)?!1:k.s?(k.i=Y.D.concat(k.i),!0):k.G==1||k.G==2||k.B>=(k.Va?0:k.Wa)?!1:(k.s=Pt(f(k.Ga,k,Y),Ol(k,k.B)),k.B++,!0)}t.Ga=function(k){if(this.s)if(this.s=null,this.G==1){if(!k){this.U=Math.floor(1e5*Math.random()),k=this.U++;const ot=new lr(this,this.j,k);let pt=this.o;if(this.S&&(pt?(pt=D(pt),_(pt,this.S)):pt=this.S),this.m!==null||this.O||(ot.H=pt,pt=null),this.P)e:{for(var Y=0,re=0;re<this.i.length;re++){t:{var we=this.i[re];if("__data__"in we.map&&(we=we.map.__data__,typeof we=="string")){we=we.length;break t}we=void 0}if(we===void 0)break;if(Y+=we,4096<Y){Y=re;break e}if(Y===4096||re===this.i.length-1){Y=re+1;break e}}Y=1e3}else Y=1e3;Y=vs(this,ot,Y),re=eo(this.I),Un(re,"RID",k),Un(re,"CVER",22),this.D&&Un(re,"X-HTTP-Session-Id",this.D),wh(this,re),pt&&(this.O?Y="headers="+encodeURIComponent(String(Cm(pt)))+"&"+Y:this.m&&De(re,this.m,pt)),zt(this.h,ot),this.Ua&&Un(re,"TYPE","init"),this.P?(Un(re,"$req",Y),Un(re,"SID","null"),ot.T=!0,Ze(ot,re,null)):Ze(ot,re,Y),this.G=2}}else this.G==3&&(k?Xo(this,k):this.i.length==0||cn(this.h)||Xo(this))};function Xo(k,Y){var re;Y?re=Y.l:re=k.U++;const we=eo(k.I);Un(we,"SID",k.K),Un(we,"RID",re),Un(we,"AID",k.T),wh(k,we),k.m&&k.o&&De(we,k.m,k.o),re=new lr(k,k.j,re,k.B+1),k.m===null&&(re.H=k.o),Y&&(k.i=Y.D.concat(k.i)),Y=vs(k,re,1e3),re.I=Math.round(.5*k.wa)+Math.round(.5*k.wa*Math.random()),zt(k.h,re),Ze(re,we,Y)}function wh(k,Y){k.H&&I(k.H,function(re,we){Un(Y,we,re)}),k.l&&bn({},function(re,we){Un(Y,we,re)})}function vs(k,Y,re){re=Math.min(k.i.length,re);var we=k.l?f(k.l.Na,k.l,k):null;e:{var ot=k.i;let pt=-1;for(;;){const Ht=["count="+re];pt==-1?0<re?(pt=ot[0].g,Ht.push("ofs="+pt)):pt=0:Ht.push("ofs="+pt);let Or=!0;for(let ho=0;ho<re;ho++){let vr=ot[ho].g;const $r=ot[ho].map;if(vr-=pt,0>vr)pt=Math.max(0,ot[ho].g-100),Or=!1;else try{_m($r,Ht,"req"+vr+"_")}catch(to){we&&we($r)}}if(Or){we=Ht.join("&");break e}}}return k=k.i.splice(0,re),Y.D=k,we}function e1(k){if(!k.g&&!k.u){k.Y=1;var Y=k.Fa;$||q(),B||($(),B=!0),H.add(Y,k),k.v=0}}function Am(k){return k.g||k.u||3<=k.v?!1:(k.Y++,k.u=Pt(f(k.Fa,k),Ol(k,k.v)),k.v++,!0)}t.Fa=function(){if(this.u=null,Sh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var k=2*this.R;this.j.info("BP detection timer enabled: "+k),this.A=Pt(f(this.ab,this),k)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Xe(10),xh(this),Sh(this))};function Wa(k){k.A!=null&&(a.clearTimeout(k.A),k.A=null)}function Sh(k){k.g=new lr(k,k.j,"rpc",k.Y),k.m===null&&(k.g.H=k.o),k.g.O=0;var Y=eo(k.qa);Un(Y,"RID","rpc"),Un(Y,"SID",k.K),Un(Y,"AID",k.T),Un(Y,"CI",k.F?"0":"1"),!k.F&&k.ja&&Un(Y,"TO",k.ja),Un(Y,"TYPE","xmlhttp"),wh(k,Y),k.m&&k.o&&De(Y,k.m,k.o),k.L&&(k.g.I=k.L);var re=k.g;k=k.ia,re.L=1,re.v=fi(eo(Y)),re.m=null,re.P=!0,le(re,k)}t.Za=function(){this.C!=null&&(this.C=null,xh(this),Am(this),Xe(19))};function Ld(k){k.C!=null&&(a.clearTimeout(k.C),k.C=null)}function ri(k,Y){var re=null;if(k.g==Y){Ld(k),Wa(k),k.g=null;var we=2}else if(st(k.h,Y))re=Y.D,At(k.h,Y),we=1;else return;if(k.G!=0){if(Y.o)if(we==1){re=Y.m?Y.m.length:0,Y=Date.now()-Y.F;var ot=k.B;we=rn(),Ne(we,new vt(we,re)),bh(k)}else e1(k);else if(ot=Y.s,ot==3||ot==0&&0<Y.X||!(we==1&&Jw(k,Y)||we==2&&Am(k)))switch(re&&0<re.length&&(Y=k.h,Y.i=Y.i.concat(re)),ot){case 1:Nl(k,5);break;case 4:Nl(k,10);break;case 3:Nl(k,6);break;default:Nl(k,2)}}}function Ol(k,Y){let re=k.Ta+Math.floor(Math.random()*k.cb);return k.isActive()||(re*=2),re*Y}function Nl(k,Y){if(k.j.info("Error code "+Y),Y==2){var re=f(k.fb,k),we=k.Xa;const ot=!we;we=new cr(we||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||_r(we,"https"),fi(we),ot?Sm(we.toString(),re):kl(we.toString(),re)}else Xe(2);k.G=0,k.l&&k.l.sa(Y),t1(k),A0(k)}t.fb=function(k){k?(this.j.info("Successfully pinged google.com"),Xe(2)):(this.j.info("Failed to ping google.com"),Xe(1))};function t1(k){if(k.G=0,k.ka=[],k.l){const Y=Bt(k.h);(Y.length!=0||k.i.length!=0)&&(m(k.ka,Y),m(k.ka,k.i),k.h.i.length=0,v(k.i),k.i.length=0),k.l.ra()}}function Tm(k,Y,re){var we=re instanceof cr?eo(re):new cr(re);if(we.g!="")Y&&(we.g=Y+"."+we.g),wi(we,we.s);else{var ot=a.location;we=ot.protocol,Y=Y?Y+"."+ot.hostname:ot.hostname,ot=+ot.port;var pt=new cr(null);we&&_r(pt,we),Y&&(pt.g=Y),ot&&wi(pt,ot),re&&(pt.l=re),we=pt}return re=k.D,Y=k.ya,re&&Y&&Un(we,re,Y),Un(we,"VER",k.la),wh(k,we),we}function n1(k,Y,re){if(Y&&!k.J)throw Error("Can't create secondary domain capable XhrIo object.");return Y=k.Ca&&!k.pa?new We(new Nd({eb:re})):new We(k.pa),Y.Ha(k.J),Y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function r1(){}t=r1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Mm(){}Mm.prototype.g=function(k,Y){return new Qo(k,Y)};function Qo(k,Y){Ae.call(this),this.g=new hu(Y),this.l=k,this.h=Y&&Y.messageUrlParams||null,k=Y&&Y.messageHeaders||null,Y&&Y.clientProtocolHeaderRequired&&(k?k["X-Client-Protocol"]="webchannel":k={"X-Client-Protocol":"webchannel"}),this.g.o=k,k=Y&&Y.initMessageHeaders||null,Y&&Y.messageContentType&&(k?k["X-WebChannel-Content-Type"]=Y.messageContentType:k={"X-WebChannel-Content-Type":Y.messageContentType}),Y&&Y.va&&(k?k["X-WebChannel-Client-Profile"]=Y.va:k={"X-WebChannel-Client-Profile":Y.va}),this.g.S=k,(k=Y&&Y.Sb)&&!x(k)&&(this.g.m=k),this.v=Y&&Y.supportsCrossDomainXhr||!1,this.u=Y&&Y.sendRawJson||!1,(Y=Y&&Y.httpSessionIdParam)&&!x(Y)&&(this.g.D=Y,k=this.h,k!==null&&Y in k&&(k=this.h,Y in k&&delete k[Y])),this.j=new Bd(this)}b(Qo,Ae),Qo.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qo.prototype.close=function(){pu(this.g)},Qo.prototype.o=function(k){var Y=this.g;if(typeof k=="string"){var re={};re.__data__=k,k=re}else this.u&&(re={},re.__data__=je(k),k=re);Y.i.push(new ln(Y.Ya++,k)),Y.G==3&&bh(Y)},Qo.prototype.N=function(){this.g.l=null,delete this.j,pu(this.g),delete this.g,Qo.aa.N.call(this)};function _h(k){yt.call(this),k.__headers__&&(this.headers=k.__headers__,this.statusCode=k.__status__,delete k.__headers__,delete k.__status__);var Y=k.__sm__;if(Y){e:{for(const re in Y){k=re;break e}k=void 0}(this.i=k)&&(k=this.i,Y=Y!==null&&k in Y?Y[k]:void 0),this.data=Y}else this.data=k}b(_h,yt);function mu(){at.call(this),this.status=1}b(mu,at);function Bd(k){this.g=k}b(Bd,r1),Bd.prototype.ua=function(){Ne(this.g,"a")},Bd.prototype.ta=function(k){Ne(this.g,new _h(k))},Bd.prototype.sa=function(k){Ne(this.g,new mu)},Bd.prototype.ra=function(){Ne(this.g,"b")},Mm.prototype.createWebChannel=Mm.prototype.g,Qo.prototype.send=Qo.prototype.o,Qo.prototype.open=Qo.prototype.m,Qo.prototype.close=Qo.prototype.close,aZ=function(){return new Mm},sZ=function(){return rn()},oZ=mt,ZI={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},mn.NO_ERROR=0,mn.TIMEOUT=8,mn.HTTP_ERROR=6,iE=mn,jn.COMPLETE="complete",iZ=jn,gt.EventType=tt,tt.OPEN="a",tt.CLOSE="b",tt.ERROR="c",tt.MESSAGE="d",Ae.prototype.listen=Ae.prototype.K,Vy=gt,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,rZ=We}).apply(typeof AS!="undefined"?AS:typeof self!="undefined"?self:typeof window!="undefined"?window:{});const p8="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}as.UNAUTHENTICATED=new as(null),as.GOOGLE_CREDENTIALS=new as("google-credentials-uid"),as.FIRST_PARTY=new as("first-party-uid"),as.MOCK_USER=new as("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let l0="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp=new gT("@firebase/firestore");function ly(){return Kp.logLevel}function gn(t,...e){if(Kp.logLevel<=br.DEBUG){const n=e.map(S3);Kp.debug(`Firestore (${l0}): ${t}`,...n)}}function xd(t,...e){if(Kp.logLevel<=br.ERROR){const n=e.map(S3);Kp.error(`Firestore (${l0}): ${t}`,...n)}}function Lv(t,...e){if(Kp.logLevel<=br.WARN){const n=e.map(S3);Kp.warn(`Firestore (${l0}): ${t}`,...n)}}function S3(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch(e){return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(t="Unexpected state"){const e=`FIRESTORE (${l0}) INTERNAL ASSERTION FAILED: `+t;throw xd(e),new Error(e)}function Zr(t,e){t||zn()}function Hn(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tn extends Pl{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lZ{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jOe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(as.UNAUTHENTICATED))}shutdown(){}}class UOe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class zOe{constructor(e){this.t=e,this.currentUser=as.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Zr(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let o=new od;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new od,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=o;e.enqueueRetryable(()=>te(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},a=l=>{gn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(gn("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new od)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(gn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Zr(typeof r.accessToken=="string"),new lZ(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Zr(e===null||typeof e=="string"),new as(e)}}class VOe{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=as.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class WOe{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new VOe(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(as.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $Oe{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HOe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Zr(this.o===void 0);const r=o=>{o.error!=null&&gn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,gn("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{gn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):gn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Zr(typeof n.token=="string"),this.R=n.token,new $Oe(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GOe(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cZ{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=GOe(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function Ir(t,e){return t<e?-1:t>e?1:0}function Bv(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new tn(Mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new tn(Mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new tn(Mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new tn(Mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return wr.fromMillis(Date.now())}static fromDate(e){return wr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new wr(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ir(this.nanoseconds,e.nanoseconds):Ir(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new $n(e)}static min(){return new $n(new wr(0,0))}static max(){return new $n(new wr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,n,r){n===void 0?n=0:n>e.length&&zn(),r===void 0?r=e.length-n:r>e.length-n&&zn(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Cb.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Cb?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class vi extends Cb{construct(e,n,r){return new vi(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new tn(Mt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new vi(n)}static emptyPath(){return new vi([])}}const qOe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $o extends Cb{construct(e,n,r){return new $o(e,n,r)}static isValidIdentifier(e){return qOe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$o.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $o(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new tn(Mt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new tn(Mt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new tn(Mt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new tn(Mt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $o(n)}static emptyPath(){return new $o([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.path=e}static fromPath(e){return new An(vi.fromString(e))}static fromName(e){return new An(vi.fromString(e).popFirst(5))}static empty(){return new An(vi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vi.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return vi.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new An(new vi(e.slice()))}}function KOe(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=$n.fromTimestamp(r===1e9?new wr(n+1,0):new wr(n,r));return new eh(i,An.empty(),e)}function YOe(t){return new eh(t.readTime,t.key,-1)}class eh{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new eh($n.min(),An.empty(),-1)}static max(){return new eh($n.max(),An.empty(),-1)}}function XOe(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=An.comparator(t.documentKey,e.documentKey),n!==0?n:Ir(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QOe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZOe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(t){return te(this,null,function*(){if(t.code!==Mt.FAILED_PRECONDITION||t.message!==QOe)throw t;gn("LocalStore","Unexpectedly lost primary lease")})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&zn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ft((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Ft?n:Ft.resolve(n)}catch(n){return Ft.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Ft.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Ft.reject(n)}static resolve(e){return new Ft((n,r)=>{n(e)})}static reject(e){return new Ft((n,r)=>{r(e)})}static waitFor(e){return new Ft((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},l=>r(l))}),s=!0,o===i&&n()})}static or(e){let n=Ft.resolve(!1);for(const r of e)n=n.next(i=>i?Ft.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new Ft((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const c=l;n(e[c]).next(u=>{s[c]=u,++a,a===o&&r(s)},u=>i(u))}})}static doWhile(e,n){return new Ft((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function JOe(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Iw(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}_3.oe=-1;function ST(t){return t==null}function RC(t){return t===0&&1/t==-1/0}function eNe(t){return typeof t=="number"&&Number.isInteger(t)&&!RC(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function pm(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function uZ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n){this.comparator=e,this.root=n||jo.EMPTY}insert(e,n){return new Fi(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jo.BLACK,null,null))}remove(e){return new Fi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jo.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new TS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new TS(this.root,e,this.comparator,!1)}getReverseIterator(){return new TS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new TS(this.root,e,this.comparator,!0)}}class TS{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jo{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r!=null?r:jo.RED,this.left=i!=null?i:jo.EMPTY,this.right=o!=null?o:jo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new jo(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,o!=null?o:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return jo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return jo.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw zn();const e=this.left.check();if(e!==this.right.check())throw zn();return e+(this.isRed()?0:1)}}jo.EMPTY=null,jo.RED=!0,jo.BLACK=!1;jo.EMPTY=new class{constructor(){this.size=0}get key(){throw zn()}get value(){throw zn()}get color(){throw zn()}get left(){throw zn()}get right(){throw zn()}copy(e,n,r,i,o){return this}insert(e,n,r){return new jo(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.comparator=e,this.data=new Fi(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new g8(this.data.getIterator())}getIteratorFrom(e){return new g8(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Go)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Go(this.comparator);return n.data=e,n}}class g8{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this.fields=e,e.sort($o.comparator)}static empty(){return new Aa([])}unionWith(e){let n=new Go($o.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Aa(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Bv(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dZ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException!="undefined"&&o instanceof DOMException?new dZ("Invalid base64 string: "+o):o}}(e);return new Ko(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new Ko(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ir(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ko.EMPTY_BYTE_STRING=new Ko("");const tNe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function th(t){if(Zr(!!t),typeof t=="string"){let e=0;const n=tNe.exec(t);if(Zr(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xi(t.seconds),nanos:Xi(t.nanos)}}function Xi(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Yp(t){return typeof t=="string"?Ko.fromBase64String(t):Ko.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E3(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function C3(t){const e=t.mapValue.fields.__previous_value__;return E3(e)?C3(e):e}function Ab(t){const e=th(t.mapValue.fields.__local_write_time__.timestampValue);return new wr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nNe{constructor(e,n,r,i,o,s,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Tb{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Tb("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Tb&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS={mapValue:{}};function Xp(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?E3(t)?4:iNe(t)?9007199254740991:rNe(t)?10:11:zn()}function ou(t,e){if(t===e)return!0;const n=Xp(t);if(n!==Xp(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ab(t).isEqual(Ab(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=th(i.timestampValue),a=th(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Yp(i.bytesValue).isEqual(Yp(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Xi(i.geoPointValue.latitude)===Xi(o.geoPointValue.latitude)&&Xi(i.geoPointValue.longitude)===Xi(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Xi(i.integerValue)===Xi(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Xi(i.doubleValue),a=Xi(o.doubleValue);return s===a?RC(s)===RC(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Bv(t.arrayValue.values||[],e.arrayValue.values||[],ou);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(m8(s)!==m8(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!ou(s[l],a[l])))return!1;return!0}(t,e);default:return zn()}}function Mb(t,e){return(t.values||[]).find(n=>ou(n,e))!==void 0}function jv(t,e){if(t===e)return 0;const n=Xp(t),r=Xp(e);if(n!==r)return Ir(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ir(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=Xi(o.integerValue||o.doubleValue),l=Xi(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return v8(t.timestampValue,e.timestampValue);case 4:return v8(Ab(t),Ab(e));case 5:return Ir(t.stringValue,e.stringValue);case 6:return function(o,s){const a=Yp(o),l=Yp(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Ir(a[c],l[c]);if(u!==0)return u}return Ir(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=Ir(Xi(o.latitude),Xi(s.latitude));return a!==0?a:Ir(Xi(o.longitude),Xi(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return y8(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,l,c,u;const d=o.fields||{},f=s.fields||{},p=(a=d.value)===null||a===void 0?void 0:a.arrayValue,b=(l=f.value)===null||l===void 0?void 0:l.arrayValue,v=Ir(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=b==null?void 0:b.values)===null||u===void 0?void 0:u.length)||0);return v!==0?v:y8(p,b)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===MS.mapValue&&s===MS.mapValue)return 0;if(o===MS.mapValue)return 1;if(s===MS.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),c=s.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=Ir(l[d],u[d]);if(f!==0)return f;const p=jv(a[l[d]],c[u[d]]);if(p!==0)return p}return Ir(l.length,u.length)}(t.mapValue,e.mapValue);default:throw zn()}}function v8(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ir(t,e);const n=th(t),r=th(e),i=Ir(n.seconds,r.seconds);return i!==0?i:Ir(n.nanos,r.nanos)}function y8(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=jv(n[i],r[i]);if(o)return o}return Ir(n.length,r.length)}function Uv(t){return JI(t)}function JI(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=th(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Yp(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return An.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=JI(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${JI(n.fields[s])}`;return i+"}"}(t.mapValue):zn()}function x8(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ek(t){return!!t&&"integerValue"in t}function A3(t){return!!t&&"arrayValue"in t}function b8(t){return!!t&&"nullValue"in t}function w8(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function oE(t){return!!t&&"mapValue"in t}function rNe(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function xx(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return pm(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=xx(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xx(t.arrayValue.values[n]);return e}return Object.assign({},t)}function iNe(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.value=e}static empty(){return new ea({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!oE(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xx(n)}setAll(e){let n=$o.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=xx(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());oE(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ou(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];oE(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){pm(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new ea(xx(this.value))}}function fZ(t){const e=[];return pm(t.fields,(n,r)=>{const i=new $o([n]);if(oE(r)){const o=fZ(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Aa(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new cs(e,0,$n.min(),$n.min(),$n.min(),ea.empty(),0)}static newFoundDocument(e,n,r,i){return new cs(e,1,n,$n.min(),r,i,0)}static newNoDocument(e,n){return new cs(e,2,n,$n.min(),$n.min(),ea.empty(),0)}static newUnknownDocument(e,n){return new cs(e,3,n,$n.min(),$n.min(),ea.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual($n.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ea.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ea.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$n.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n){this.position=e,this.inclusive=n}}function S8(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=An.comparator(An.fromName(s.referenceValue),n.key):r=jv(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function _8(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ou(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,n="asc"){this.field=e,this.dir=n}}function oNe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hZ{}class ao extends hZ{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new aNe(e,n,r):n==="array-contains"?new uNe(e,r):n==="in"?new dNe(e,r):n==="not-in"?new fNe(e,r):n==="array-contains-any"?new hNe(e,r):new ao(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new lNe(e,r):new cNe(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(jv(n,this.value)):n!==null&&Xp(this.value)===Xp(n)&&this.matchesComparison(jv(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return zn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hc extends hZ{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new hc(e,n)}matches(e){return pZ(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function pZ(t){return t.op==="and"}function mZ(t){return sNe(t)&&pZ(t)}function sNe(t){for(const e of t.filters)if(e instanceof hc)return!1;return!0}function tk(t){if(t instanceof ao)return t.field.canonicalString()+t.op.toString()+Uv(t.value);if(mZ(t))return t.filters.map(e=>tk(e)).join(",");{const e=t.filters.map(n=>tk(n)).join(",");return`${t.op}(${e})`}}function gZ(t,e){return t instanceof ao?function(r,i){return i instanceof ao&&r.op===i.op&&r.field.isEqual(i.field)&&ou(r.value,i.value)}(t,e):t instanceof hc?function(r,i){return i instanceof hc&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&gZ(s,i.filters[a]),!0):!1}(t,e):void zn()}function vZ(t){return t instanceof ao?function(n){return`${n.field.canonicalString()} ${n.op} ${Uv(n.value)}`}(t):t instanceof hc?function(n){return n.op.toString()+" {"+n.getFilters().map(vZ).join(" ,")+"}"}(t):"Filter"}class aNe extends ao{constructor(e,n,r){super(e,n,r),this.key=An.fromName(r.referenceValue)}matches(e){const n=An.comparator(e.key,this.key);return this.matchesComparison(n)}}class lNe extends ao{constructor(e,n){super(e,"in",n),this.keys=yZ("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class cNe extends ao{constructor(e,n){super(e,"not-in",n),this.keys=yZ("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yZ(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>An.fromName(r.referenceValue))}class uNe extends ao{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return A3(n)&&Mb(n.arrayValue,this.value)}}class dNe extends ao{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Mb(this.value.arrayValue,n)}}class fNe extends ao{constructor(e,n){super(e,"not-in",n)}matches(e){if(Mb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Mb(this.value.arrayValue,n)}}class hNe extends ao{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!A3(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Mb(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pNe{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function E8(t,e=null,n=[],r=[],i=null,o=null,s=null){return new pNe(t,e,n,r,i,o,s)}function T3(t){const e=Hn(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>tk(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),ST(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Uv(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Uv(r)).join(",")),e.ue=n}return e.ue}function M3(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oNe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gZ(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_8(t.startAt,e.startAt)&&_8(t.endAt,e.endAt)}function nk(t){return An.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function mNe(t,e,n,r,i,o,s,a){return new c0(t,e,n,r,i,o,s,a)}function _T(t){return new c0(t)}function C8(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xZ(t){return t.collectionGroup!==null}function bx(t){const e=Hn(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Go($o.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Pb(o,r))}),n.has($o.keyField().canonicalString())||e.ce.push(new Pb($o.keyField(),r))}return e.ce}function Zc(t){const e=Hn(t);return e.le||(e.le=gNe(e,bx(t))),e.le}function gNe(t,e){if(t.limitType==="F")return E8(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Pb(i.field,o)});const n=t.endAt?new IC(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new IC(t.startAt.position,t.startAt.inclusive):null;return E8(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function rk(t,e){const n=t.filters.concat([e]);return new c0(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function kC(t,e,n){return new c0(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ET(t,e){return M3(Zc(t),Zc(e))&&t.limitType===e.limitType}function bZ(t){return`${T3(Zc(t))}|lt:${t.limitType}`}function mg(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>vZ(i)).join(", ")}]`),ST(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Uv(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Uv(i)).join(",")),`Target(${r})`}(Zc(t))}; limitType=${t.limitType})`}function CT(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):An.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of bx(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,l){const c=S8(s,a,l);return s.inclusive?c<=0:c<0}(r.startAt,bx(r),i)||r.endAt&&!function(s,a,l){const c=S8(s,a,l);return s.inclusive?c>=0:c>0}(r.endAt,bx(r),i))}(t,e)}function vNe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function wZ(t){return(e,n)=>{let r=!1;for(const i of bx(t)){const o=yNe(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function yNe(t,e,n){const r=t.field.isKeyField()?An.comparator(e.key,n.key):function(o,s,a){const l=s.data.field(o),c=a.data.field(o);return l!==null&&c!==null?jv(l,c):zn()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return zn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pm(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return uZ(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xNe=new Fi(An.comparator);function bd(){return xNe}const SZ=new Fi(An.comparator);function Wy(...t){let e=SZ;for(const n of t)e=e.insert(n.key,n);return e}function _Z(t){let e=SZ;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function pp(){return wx()}function EZ(){return wx()}function wx(){return new u0(t=>t.toString(),(t,e)=>t.isEqual(e))}const bNe=new Fi(An.comparator),wNe=new Go(An.comparator);function pr(...t){let e=wNe;for(const n of t)e=e.add(n);return e}const SNe=new Go(Ir);function _Ne(){return SNe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:RC(e)?"-0":e}}function CZ(t){return{integerValue:""+t}}function ENe(t,e){return eNe(e)?CZ(e):P3(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(){this._=void 0}}function CNe(t,e,n){return t instanceof Db?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&E3(o)&&(o=C3(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Rb?TZ(t,e):t instanceof Ib?MZ(t,e):function(i,o){const s=AZ(i,o),a=A8(s)+A8(i.Pe);return ek(s)&&ek(i.Pe)?CZ(a):P3(i.serializer,a)}(t,e)}function ANe(t,e,n){return t instanceof Rb?TZ(t,e):t instanceof Ib?MZ(t,e):n}function AZ(t,e){return t instanceof FC?function(r){return ek(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Db extends AT{}class Rb extends AT{constructor(e){super(),this.elements=e}}function TZ(t,e){const n=PZ(e);for(const r of t.elements)n.some(i=>ou(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ib extends AT{constructor(e){super(),this.elements=e}}function MZ(t,e){let n=PZ(e);for(const r of t.elements)n=n.filter(i=>!ou(i,r));return{arrayValue:{values:n}}}class FC extends AT{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function A8(t){return Xi(t.integerValue||t.doubleValue)}function PZ(t){return A3(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TNe{constructor(e,n){this.field=e,this.transform=n}}function MNe(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Rb&&i instanceof Rb||r instanceof Ib&&i instanceof Ib?Bv(r.elements,i.elements,ou):r instanceof FC&&i instanceof FC?ou(r.Pe,i.Pe):r instanceof Db&&i instanceof Db}(t.transform,e.transform)}class PNe{constructor(e,n){this.version=e,this.transformResults=n}}class ks{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ks}static exists(e){return new ks(void 0,e)}static updateTime(e){return new ks(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sE(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class TT{}function DZ(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new MT(t.key,ks.none()):new kw(t.key,t.data,ks.none());{const n=t.data,r=ea.empty();let i=new Go($o.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new hh(t.key,r,new Aa(i.toArray()),ks.none())}}function DNe(t,e,n){t instanceof kw?function(i,o,s){const a=i.value.clone(),l=M8(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof hh?function(i,o,s){if(!sE(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=M8(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(RZ(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Sx(t,e,n,r){return t instanceof kw?function(o,s,a,l){if(!sE(o.precondition,s))return a;const c=o.value.clone(),u=P8(o.fieldTransforms,l,s);return c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof hh?function(o,s,a,l){if(!sE(o.precondition,s))return a;const c=P8(o.fieldTransforms,l,s),u=s.data;return u.setAll(RZ(o)),u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(o,s,a){return sE(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function RNe(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=AZ(r.transform,i||null);o!=null&&(n===null&&(n=ea.empty()),n.set(r.field,o))}return n||null}function T8(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Bv(r,i,(o,s)=>MNe(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class kw extends TT{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class hh extends TT{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function RZ(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function M8(t,e,n){const r=new Map;Zr(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,ANe(s,a,n[i]))}return r}function P8(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,CNe(o,s,e))}return r}class MT extends TT{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class INe extends TT{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kNe{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&DNe(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Sx(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Sx(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=EZ();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const l=DZ(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument($n.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pr())}isEqual(e){return this.batchId===e.batchId&&Bv(this.mutations,e.mutations,(n,r)=>T8(n,r))&&Bv(this.baseMutations,e.baseMutations,(n,r)=>T8(n,r))}}class D3{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Zr(e.mutations.length===r.length);let i=function(){return bNe}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new D3(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FNe{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ONe{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ro,Er;function NNe(t){switch(t){default:return zn();case Mt.CANCELLED:case Mt.UNKNOWN:case Mt.DEADLINE_EXCEEDED:case Mt.RESOURCE_EXHAUSTED:case Mt.INTERNAL:case Mt.UNAVAILABLE:case Mt.UNAUTHENTICATED:return!1;case Mt.INVALID_ARGUMENT:case Mt.NOT_FOUND:case Mt.ALREADY_EXISTS:case Mt.PERMISSION_DENIED:case Mt.FAILED_PRECONDITION:case Mt.ABORTED:case Mt.OUT_OF_RANGE:case Mt.UNIMPLEMENTED:case Mt.DATA_LOSS:return!0}}function IZ(t){if(t===void 0)return xd("GRPC error has no .code"),Mt.UNKNOWN;switch(t){case ro.OK:return Mt.OK;case ro.CANCELLED:return Mt.CANCELLED;case ro.UNKNOWN:return Mt.UNKNOWN;case ro.DEADLINE_EXCEEDED:return Mt.DEADLINE_EXCEEDED;case ro.RESOURCE_EXHAUSTED:return Mt.RESOURCE_EXHAUSTED;case ro.INTERNAL:return Mt.INTERNAL;case ro.UNAVAILABLE:return Mt.UNAVAILABLE;case ro.UNAUTHENTICATED:return Mt.UNAUTHENTICATED;case ro.INVALID_ARGUMENT:return Mt.INVALID_ARGUMENT;case ro.NOT_FOUND:return Mt.NOT_FOUND;case ro.ALREADY_EXISTS:return Mt.ALREADY_EXISTS;case ro.PERMISSION_DENIED:return Mt.PERMISSION_DENIED;case ro.FAILED_PRECONDITION:return Mt.FAILED_PRECONDITION;case ro.ABORTED:return Mt.ABORTED;case ro.OUT_OF_RANGE:return Mt.OUT_OF_RANGE;case ro.UNIMPLEMENTED:return Mt.UNIMPLEMENTED;case ro.DATA_LOSS:return Mt.DATA_LOSS;default:return zn()}}(Er=ro||(ro={}))[Er.OK=0]="OK",Er[Er.CANCELLED=1]="CANCELLED",Er[Er.UNKNOWN=2]="UNKNOWN",Er[Er.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Er[Er.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Er[Er.NOT_FOUND=5]="NOT_FOUND",Er[Er.ALREADY_EXISTS=6]="ALREADY_EXISTS",Er[Er.PERMISSION_DENIED=7]="PERMISSION_DENIED",Er[Er.UNAUTHENTICATED=16]="UNAUTHENTICATED",Er[Er.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Er[Er.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Er[Er.ABORTED=10]="ABORTED",Er[Er.OUT_OF_RANGE=11]="OUT_OF_RANGE",Er[Er.UNIMPLEMENTED=12]="UNIMPLEMENTED",Er[Er.INTERNAL=13]="INTERNAL",Er[Er.UNAVAILABLE=14]="UNAVAILABLE",Er[Er.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LNe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BNe=new Mp([4294967295,4294967295],0);function D8(t){const e=LNe().encode(t),n=new nZ;return n.update(e),new Uint8Array(n.digest())}function R8(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Mp([n,r],0),new Mp([i,o],0)]}class R3{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new $y(`Invalid padding: ${n}`);if(r<0)throw new $y(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $y(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new $y(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Mp.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Mp.fromNumber(r)));return i.compare(BNe)===1&&(i=new Mp([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=D8(e),[r,i]=R8(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new R3(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;const n=D8(e),[r,i]=R8(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class $y extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Fw.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new PT($n.min(),i,new Fi(Ir),bd(),pr())}}class Fw{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Fw(r,n,pr(),pr(),pr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class kZ{constructor(e,n){this.targetId=e,this.me=n}}class FZ{constructor(e,n,r=Ko.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class I8{constructor(){this.fe=0,this.ge=F8(),this.pe=Ko.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pr(),n=pr(),r=pr();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:zn()}}),new Fw(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=F8()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Zr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class jNe{constructor(e){this.Le=e,this.Be=new Map,this.ke=bd(),this.qe=k8(),this.Qe=new Fi(Ir)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:zn()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const o=i.target;if(nk(o))if(r===0){const s=new An(o.path);this.Ue(n,s,cs.newNoDocument(s,$n.min()))}else Zr(r===1);else{const s=this.Ye(n);if(s!==r){const a=this.Ze(e),l=a?this.Xe(a,e,s):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=Yp(r).toUint8Array()}catch(l){if(l instanceof dZ)return Lv("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new R3(s,i,o)}catch(l){return Lv(l instanceof $y?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((o,s)=>{const a=this.Je(s);if(a){if(o.current&&nk(a.target)){const l=new An(a.target.path);this.ke.get(l)!==null||this.it(s,l)||this.Ue(s,l,cs.newNoDocument(l,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=pr();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new PT(e,n,this.Qe,this.ke,r);return this.ke=bd(),this.qe=k8(),this.Qe=new Fi(Ir),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new I8,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Go(Ir),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||gn("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new I8),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function k8(){return new Fi(An.comparator)}function F8(){return new Fi(An.comparator)}const UNe={asc:"ASCENDING",desc:"DESCENDING"},zNe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VNe={and:"AND",or:"OR"};class WNe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ik(t,e){return t.useProto3Json||ST(e)?e:{value:e}}function OC(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OZ(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $Ne(t,e){return OC(t,e.toTimestamp())}function Jc(t){return Zr(!!t),$n.fromTimestamp(function(n){const r=th(n);return new wr(r.seconds,r.nanos)}(t))}function I3(t,e){return ok(t,e).canonicalString()}function ok(t,e){const n=function(i){return new vi(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function NZ(t){const e=vi.fromString(t);return Zr(zZ(e)),e}function sk(t,e){return I3(t.databaseId,e.path)}function OP(t,e){const n=NZ(e);if(n.get(1)!==t.databaseId.projectId)throw new tn(Mt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new tn(Mt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new An(BZ(n))}function LZ(t,e){return I3(t.databaseId,e)}function HNe(t){const e=NZ(t);return e.length===4?vi.emptyPath():BZ(e)}function ak(t){return new vi(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function BZ(t){return Zr(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function O8(t,e,n){return{name:sk(t,e),fields:n.value.mapValue.fields}}function GNe(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:zn()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(c,u){return c.useProto3Json?(Zr(u===void 0||typeof u=="string"),Ko.fromBase64String(u||"")):(Zr(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Ko.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){const u=c.code===void 0?Mt.UNKNOWN:IZ(c.code);return new tn(u,c.message||"")}(s);n=new FZ(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=OP(t,r.document.name),o=Jc(r.document.updateTime),s=r.document.createTime?Jc(r.document.createTime):$n.min(),a=new ea({mapValue:{fields:r.document.fields}}),l=cs.newFoundDocument(i,o,s,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new aE(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=OP(t,r.document),o=r.readTime?Jc(r.readTime):$n.min(),s=cs.newNoDocument(i,o),a=r.removedTargetIds||[];n=new aE([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=OP(t,r.document),o=r.removedTargetIds||[];n=new aE([],o,i,null)}else{if(!("filter"in e))return zn();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new ONe(i,o),a=r.targetId;n=new kZ(a,s)}}return n}function qNe(t,e){let n;if(e instanceof kw)n={update:O8(t,e.key,e.value)};else if(e instanceof MT)n={delete:sk(t,e.key)};else if(e instanceof hh)n={update:O8(t,e.key,e.data),updateMask:n3e(e.fieldMask)};else{if(!(e instanceof INe))return zn();n={verify:sk(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof Db)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Rb)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ib)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof FC)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw zn()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:$Ne(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:zn()}(t,e.precondition)),n}function KNe(t,e){return t&&t.length>0?(Zr(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Jc(i.updateTime):Jc(o);return s.isEqual($n.min())&&(s=Jc(o)),new PNe(s,i.transformResults||[])}(n,e))):[]}function YNe(t,e){return{documents:[LZ(t,e.path)]}}function XNe(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=LZ(t,i);const o=function(c){if(c.length!==0)return UZ(hc.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:gg(f.field),direction:JNe(f.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=ik(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function QNe(t){let e=HNe(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Zr(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let o=[];n.where&&(o=function(d){const f=jZ(d);return f instanceof hc&&mZ(f)?f.getFilters():[f]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(f=>function(b){return new Pb(vg(b.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,ST(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,p=d.values||[];return new IC(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,p=d.values||[];return new IC(p,f)}(n.endAt)),mNe(e,i,s,o,a,"F",l,c)}function ZNe(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return zn()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jZ(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=vg(n.unaryFilter.field);return ao.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=vg(n.unaryFilter.field);return ao.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=vg(n.unaryFilter.field);return ao.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=vg(n.unaryFilter.field);return ao.create(s,"!=",{nullValue:"NULL_VALUE"});default:return zn()}}(t):t.fieldFilter!==void 0?function(n){return ao.create(vg(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return zn()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return hc.create(n.compositeFilter.filters.map(r=>jZ(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return zn()}}(n.compositeFilter.op))}(t):zn()}function JNe(t){return UNe[t]}function e3e(t){return zNe[t]}function t3e(t){return VNe[t]}function gg(t){return{fieldPath:t.canonicalString()}}function vg(t){return $o.fromServerFormat(t.fieldPath)}function UZ(t){return t instanceof ao?function(n){if(n.op==="=="){if(w8(n.value))return{unaryFilter:{field:gg(n.field),op:"IS_NAN"}};if(b8(n.value))return{unaryFilter:{field:gg(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(w8(n.value))return{unaryFilter:{field:gg(n.field),op:"IS_NOT_NAN"}};if(b8(n.value))return{unaryFilter:{field:gg(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gg(n.field),op:e3e(n.op),value:n.value}}}(t):t instanceof hc?function(n){const r=n.getFilters().map(i=>UZ(i));return r.length===1?r[0]:{compositeFilter:{op:t3e(n.op),filters:r}}}(t):zn()}function n3e(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function zZ(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,n,r,i,o=$n.min(),s=$n.min(),a=Ko.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Tf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Tf(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3e{constructor(e){this.ct=e}}function i3e(t){const e=QNe({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?kC(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3e{constructor(){this.un=new s3e}addToCollectionParentIndex(e,n){return this.un.add(n),Ft.resolve()}getCollectionParents(e,n){return Ft.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Ft.resolve()}deleteFieldIndex(e,n){return Ft.resolve()}deleteAllFieldIndexes(e){return Ft.resolve()}createTargetIndexes(e,n){return Ft.resolve()}getDocumentsMatchingTarget(e,n){return Ft.resolve(null)}getIndexType(e,n){return Ft.resolve(0)}getFieldIndexes(e,n){return Ft.resolve([])}getNextCollectionGroupToUpdate(e){return Ft.resolve(null)}getMinOffset(e,n){return Ft.resolve(eh.min())}getMinOffsetFromCollectionGroup(e,n){return Ft.resolve(eh.min())}updateCollectionGroup(e,n,r){return Ft.resolve()}updateIndexEntries(e,n){return Ft.resolve()}}class s3e{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Go(vi.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Go(vi.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new zv(0)}static kn(){return new zv(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3e{constructor(){this.changes=new u0(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cs.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ft.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3e{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3e{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Sx(r.mutation,i,Aa.empty(),wr.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pr()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pr()){const i=pp();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Wy();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=pp();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pr()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=bd();const s=wx(),a=function(){return wx()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof hh)?o=o.insert(c.key,c):u!==void 0?(s.set(c.key,u.mutation.getFieldMask()),Sx(u.mutation,c,u.mutation.getFieldMask(),wr.now())):s.set(c.key,Aa.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((c,u)=>s.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new l3e(u,(d=s.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=wx();let i=new Fi((s,a)=>s-a),o=pr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||Aa.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(i.get(a.batchId)||pr()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=EZ();u.forEach(f=>{if(!o.has(f)){const p=DZ(n.get(f),r.get(f));p!==null&&d.set(f,p),o=o.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,d))}return Ft.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return An.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xZ(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):Ft.resolve(pp());let a=-1,l=o;return s.next(c=>Ft.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(u)?Ft.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,l,c,pr())).next(u=>({batchId:a,changes:_Z(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new An(n)).next(r=>{let i=Wy();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=Wy();return this.indexManager.getCollectionParents(e,o).next(a=>Ft.forEach(a,l=>{const c=function(d,f){return new c0(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((d,f)=>{s=s.insert(d,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((l,c)=>{const u=c.getKey();s.get(u)===null&&(s=s.insert(u,cs.newInvalidDocument(u)))});let a=Wy();return s.forEach((l,c)=>{const u=o.get(l);u!==void 0&&Sx(u.mutation,c,Aa.empty(),wr.now()),CT(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3e{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Ft.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Jc(i.createTime)}}(n)),Ft.resolve()}getNamedQuery(e,n){return Ft.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:i3e(i.bundledQuery),readTime:Jc(i.readTime)}}(n)),Ft.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3e{constructor(){this.overlays=new Fi(An.comparator),this.Ir=new Map}getOverlay(e,n){return Ft.resolve(this.overlays.get(n))}getOverlays(e,n){const r=pp();return Ft.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),Ft.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),Ft.resolve()}getOverlaysForCollection(e,n,r){const i=pp(),o=n.length+1,s=new An(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Ft.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Fi((c,u)=>c-u);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=o.get(c.largestBatchId);u===null&&(u=pp(),o=o.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=pp(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return Ft.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new FNe(n,r));let o=this.Ir.get(n);o===void 0&&(o=pr(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3e{constructor(){this.sessionToken=Ko.EMPTY_BYTE_STRING}getSessionToken(e){return Ft.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ft.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(){this.Tr=new Go(To.Er),this.dr=new Go(To.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new To(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new To(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new An(new vi([])),r=new To(n,e),i=new To(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new An(new vi([])),r=new To(n,e),i=new To(n,e+1);let o=pr();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new To(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class To{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return An.comparator(e.key,n.key)||Ir(e.wr,n.wr)}static Ar(e,n){return Ir(e.wr,n.wr)||An.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3e{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Go(To.Er)}checkEmpty(e){return Ft.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new kNe(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.br=this.br.add(new To(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ft.resolve(s)}lookupMutationBatch(e,n){return Ft.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),o=i<0?0:i;return Ft.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Ft.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ft.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new To(n,0),i=new To(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{const a=this.Dr(s.wr);o.push(a)}),Ft.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Go(Ir);return n.forEach(i=>{const o=new To(i,0),s=new To(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),Ft.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;An.isDocumentKey(o)||(o=o.child(""));const s=new To(new An(o),0);let a=new Go(Ir);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},s),Ft.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Zr(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Ft.forEach(n.mutations,i=>{const o=new To(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new To(n,0),i=this.br.firstAfterOrEqual(r);return Ft.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ft.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3e{constructor(e){this.Mr=e,this.docs=function(){return new Fi(An.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ft.resolve(r?r.document.mutableCopy():cs.newInvalidDocument(n))}getEntries(e,n){let r=bd();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():cs.newInvalidDocument(i))}),Ft.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=bd();const s=n.path,a=new An(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||XOe(YOe(u),r)<=0||(i.has(u.key)||CT(n,u))&&(o=o.insert(u.key,u.mutableCopy()))}return Ft.resolve(o)}getAllFromCollectionGroup(e,n,r,i){zn()}Or(e,n){return Ft.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new m3e(this)}getSize(e){return Ft.resolve(this.size)}}class m3e extends a3e{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Ft.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3e{constructor(e){this.persistence=e,this.Nr=new u0(n=>T3(n),M3),this.lastRemoteSnapshotVersion=$n.min(),this.highestTargetId=0,this.Lr=0,this.Br=new k3,this.targetCount=0,this.kr=zv.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),Ft.resolve()}getLastRemoteSnapshotVersion(e){return Ft.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ft.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ft.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Ft.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new zv(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Ft.resolve()}updateTargetData(e,n){return this.Kn(n),Ft.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Ft.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Ft.waitFor(o).next(()=>i)}getTargetCount(e){return Ft.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Ft.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Ft.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),Ft.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Ft.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Ft.resolve(r)}containsKey(e,n){return Ft.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3e{constructor(e,n){this.qr={},this.overlays={},this.Qr=new _3(0),this.Kr=!1,this.Kr=!0,this.$r=new f3e,this.referenceDelegate=e(this),this.Ur=new g3e(this),this.indexManager=new o3e,this.remoteDocumentCache=function(i){return new p3e(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new r3e(n),this.Gr=new u3e(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new d3e,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new h3e(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){gn("MemoryPersistence","Starting transaction:",e);const i=new y3e(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return Ft.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class y3e extends ZOe{constructor(e){super(),this.currentSequenceNumber=e}}class F3{constructor(e){this.persistence=e,this.Jr=new k3,this.Yr=null}static Zr(e){return new F3(e)}get Xr(){if(this.Yr)return this.Yr;throw zn()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Ft.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Ft.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Ft.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ft.forEach(this.Xr,r=>{const i=An.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,$n.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Ft.or([()=>Ft.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=pr(),i=pr();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new O3(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3e{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3e{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return iIe()?8:JOe(ms())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new x3e;return this.Xi(e,n,s).next(a=>{if(o.result=a,this.zi)return this.es(e,n,s,a.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ly()<=br.DEBUG&&gn("QueryEngine","SDK will not create cache indexes for query:",mg(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ft.resolve()):(ly()<=br.DEBUG&&gn("QueryEngine","Query:",mg(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ly()<=br.DEBUG&&gn("QueryEngine","The SDK decides to create cache indexes for query:",mg(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zc(n))):Ft.resolve())}Yi(e,n){if(C8(n))return Ft.resolve(null);let r=Zc(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=kC(n,null,"F"),r=Zc(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=pr(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,s,l.readTime)?this.Yi(e,kC(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return C8(n)||i.isEqual($n.min())?Ft.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const s=this.ts(n,o);return this.ns(n,s,r,i)?Ft.resolve(null):(ly()<=br.DEBUG&&gn("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),mg(n)),this.rs(e,s,n,KOe(i,-1)).next(a=>a))})}ts(e,n){let r=new Go(wZ(e));return n.forEach((i,o)=>{CT(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return ly()<=br.DEBUG&&gn("QueryEngine","Using full collection scan to execute query:",mg(n)),this.Ji.getDocumentsMatchingQuery(e,n,eh.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3e{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Fi(Ir),this._s=new u0(o=>T3(o),M3),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new c3e(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function S3e(t,e,n,r){return new w3e(t,e,n,r)}function VZ(t,e){return te(this,null,function*(){const n=Hn(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let l=pr();for(const c of i){s.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of o){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:s,addedBatchIds:a}))})})})}function _3e(t,e){const n=Hn(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,f=d.keys();let p=Ft.resolve();return f.forEach(b=>{p=p.next(()=>u.getEntry(l,b)).next(v=>{const m=c.docVersions.get(b);Zr(m!==null),v.version.compareTo(m)<0&&(d.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=pr();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function WZ(t){const e=Hn(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function E3e(t,e){const n=Hn(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((u,d)=>{const f=i.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(o,u.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(o,u.addedDocuments,d)));let p=f.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(Ko.EMPTY_BYTE_STRING,$n.min()).withLastLimboFreeSnapshotVersion($n.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),i=i.insert(d,p),function(v,m,g){return v.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(f,p,u)&&a.push(n.Ur.updateTargetData(o,p))});let l=bd(),c=pr();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(C3e(o,s,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual($n.min())){const u=n.Ur.getLastRemoteSnapshotVersion(o).next(d=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(u)}return Ft.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(n.os=i,o))}function C3e(t,e,n){let r=pr(),i=pr();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=bd();return n.forEach((a,l)=>{const c=o.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual($n.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):gn("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:s,Is:i}})}function A3e(t,e){const n=Hn(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function T3e(t,e){const n=Hn(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,Ft.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new Tf(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function lk(t,e,n){return te(this,null,function*(){const r=Hn(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Iw(s))throw s;gn("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function N8(t,e,n){const r=Hn(t);let i=$n.min(),o=pr();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,c,u){const d=Hn(l),f=d._s.get(u);return f!==void 0?Ft.resolve(d.os.get(f)):d.Ur.getTargetData(c,u)}(r,s,Zc(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:$n.min(),n?o:pr())).next(a=>(M3e(r,vNe(e),a),{documents:a,Ts:o})))}function M3e(t,e,n){let r=t.us.get(e)||$n.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}class L8{constructor(){this.activeTargetIds=_Ne()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class P3e{constructor(){this.so=new L8,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new L8,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3e{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){gn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){gn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PS=null;function NP(){return PS===null?PS=function(){return 268435456+Math.round(2147483648*Math.random())}():PS++,"0x"+PS.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3e{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="WebChannelConnection";class k3e extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){const a=NP(),l=this.xo(n,r.toUriEncodedString());gn("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,o,s),this.No(n,l,c,i).then(u=>(gn("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Lv("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}Lo(n,r,i,o,s,a){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+l0}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){const i=R3e[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const o=NP();return new Promise((s,a)=>{const l=new rZ;l.setWithCredentials(!0),l.listenOnce(iZ.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case iE.NO_ERROR:const u=l.getResponseJson();gn(ns,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(u)),s(u);break;case iE.TIMEOUT:gn(ns,`RPC '${e}' ${o} timed out`),a(new tn(Mt.DEADLINE_EXCEEDED,"Request time out"));break;case iE.HTTP_ERROR:const d=l.getStatus();if(gn(ns,`RPC '${e}' ${o} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const p=f==null?void 0:f.error;if(p&&p.status&&p.message){const b=function(m){const g=m.toLowerCase().replace(/_/g,"-");return Object.values(Mt).indexOf(g)>=0?g:Mt.UNKNOWN}(p.status);a(new tn(b,p.message))}else a(new tn(Mt.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new tn(Mt.UNAVAILABLE,"Connection failed."));break;default:zn()}}finally{gn(ns,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);gn(ns,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=NP(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=aZ(),a=sZ(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=o.join("");gn(ns,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=s.createWebChannel(u,l);let f=!1,p=!1;const b=new I3e({Io:m=>{p?gn(ns,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(f||(gn(ns,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),gn(ns,`RPC '${e}' stream ${i} sending:`,m),d.send(m))},To:()=>d.close()}),v=(m,g,x)=>{m.listen(g,w=>{try{x(w)}catch(S){setTimeout(()=>{throw S},0)}})};return v(d,Vy.EventType.OPEN,()=>{p||(gn(ns,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),v(d,Vy.EventType.CLOSE,()=>{p||(p=!0,gn(ns,`RPC '${e}' stream ${i} transport closed`),b.So())}),v(d,Vy.EventType.ERROR,m=>{p||(p=!0,Lv(ns,`RPC '${e}' stream ${i} transport errored:`,m),b.So(new tn(Mt.UNAVAILABLE,"The operation could not be completed")))}),v(d,Vy.EventType.MESSAGE,m=>{var g;if(!p){const x=m.data[0];Zr(!!x);const w=x,S=w.error||((g=w[0])===null||g===void 0?void 0:g.error);if(S){gn(ns,`RPC '${e}' stream ${i} received error:`,S);const P=S.status;let I=function(E){const _=ro[E];if(_!==void 0)return IZ(_)}(P),M=S.message;I===void 0&&(I=Mt.INTERNAL,M="Unknown error status: "+P+" with message "+S.message),p=!0,b.So(new tn(I,M)),d.close()}else gn(ns,`RPC '${e}' stream ${i} received:`,x),b.bo(x)}}),v(a,oZ.STAT_EVENT,m=>{m.stat===ZI.PROXY?gn(ns,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===ZI.NOPROXY&&gn(ns,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function LP(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(t){return new WNe(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Z{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&gn("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HZ{constructor(e,n,r,i,o,s,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new $Z(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return te(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return te(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return te(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Mt.RESOURCE_EXHAUSTED?(xd(n.toString()),xd("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Mt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new tn(Mt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>te(this,null,function*(){this.state=0,this.start()}))}I_(e){return gn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(gn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class F3e extends HZ{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=GNe(this.serializer,e),r=function(o){if(!("targetChange"in o))return $n.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?$n.min():s.readTime?Jc(s.readTime):$n.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=ak(this.serializer),n.addTarget=function(o,s){let a;const l=s.target;if(a=nk(l)?{documents:YNe(o,l)}:{query:XNe(o,l)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=OZ(o,s.resumeToken);const c=ik(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo($n.min())>0){a.readTime=OC(o,s.snapshotVersion.toTimestamp());const c=ik(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=ZNe(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=ak(this.serializer),n.removeTarget=e,this.a_(n)}}class O3e extends HZ{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Zr(!!e.streamToken),this.lastStreamToken=e.streamToken,Zr(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Zr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=KNe(e.writeResults,e.commitTime),r=Jc(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=ak(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>qNe(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3e extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new tn(Mt.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,ok(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new tn(Mt.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,ok(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new tn(Mt.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class L3e{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(xd(n),this.D_=!1):gn("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3e{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>te(this,null,function*(){mm(this)&&(gn("RemoteStore","Restarting streams for network reachability change."),yield function(l){return te(this,null,function*(){const c=Hn(l);c.L_.add(4),yield Ow(c),c.q_.set("Unknown"),c.L_.delete(4),yield RT(c)})}(this))}))}),this.q_=new L3e(r,i)}}function RT(t){return te(this,null,function*(){if(mm(t))for(const e of t.B_)yield e(!0)})}function Ow(t){return te(this,null,function*(){for(const e of t.B_)yield e(!1)})}function GZ(t,e){const n=Hn(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),j3(n)?B3(n):d0(n).r_()&&L3(n,e))}function N3(t,e){const n=Hn(t),r=d0(n);n.N_.delete(e),r.r_()&&qZ(n,e),n.N_.size===0&&(r.r_()?r.o_():mm(n)&&n.q_.set("Unknown"))}function L3(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($n.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}d0(t).A_(e)}function qZ(t,e){t.Q_.xe(e),d0(t).R_(e)}function B3(t){t.Q_=new jNe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),d0(t).start(),t.q_.v_()}function j3(t){return mm(t)&&!d0(t).n_()&&t.N_.size>0}function mm(t){return Hn(t).L_.size===0}function KZ(t){t.Q_=void 0}function j3e(t){return te(this,null,function*(){t.q_.set("Online")})}function U3e(t){return te(this,null,function*(){t.N_.forEach((e,n)=>{L3(t,e)})})}function z3e(t,e){return te(this,null,function*(){KZ(t),j3(t)?(t.q_.M_(e),B3(t)):t.q_.set("Unknown")})}function V3e(t,e,n){return te(this,null,function*(){if(t.q_.set("Online"),e instanceof FZ&&e.state===2&&e.cause)try{yield function(i,o){return te(this,null,function*(){const s=o.cause;for(const a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){gn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield NC(t,r)}else if(e instanceof aE?t.Q_.Ke(e):e instanceof kZ?t.Q_.He(e):t.Q_.We(e),!n.isEqual($n.min()))try{const r=yield WZ(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){const a=o.Q_.rt(s);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=o.N_.get(c);u&&o.N_.set(c,u.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,c)=>{const u=o.N_.get(l);if(!u)return;o.N_.set(l,u.withResumeToken(Ko.EMPTY_BYTE_STRING,u.snapshotVersion)),qZ(o,l);const d=new Tf(u.target,l,c,u.sequenceNumber);L3(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){gn("RemoteStore","Failed to raise snapshot:",r),yield NC(t,r)}})}function NC(t,e,n){return te(this,null,function*(){if(!Iw(e))throw e;t.L_.add(1),yield Ow(t),t.q_.set("Offline"),n||(n=()=>WZ(t.localStore)),t.asyncQueue.enqueueRetryable(()=>te(this,null,function*(){gn("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield RT(t)}))})}function YZ(t,e){return e().catch(n=>NC(t,n,e))}function IT(t){return te(this,null,function*(){const e=Hn(t),n=nh(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;W3e(e);)try{const i=yield A3e(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,$3e(e,i)}catch(i){yield NC(e,i)}XZ(e)&&QZ(e)})}function W3e(t){return mm(t)&&t.O_.length<10}function $3e(t,e){t.O_.push(e);const n=nh(t);n.r_()&&n.V_&&n.m_(e.mutations)}function XZ(t){return mm(t)&&!nh(t).n_()&&t.O_.length>0}function QZ(t){nh(t).start()}function H3e(t){return te(this,null,function*(){nh(t).p_()})}function G3e(t){return te(this,null,function*(){const e=nh(t);for(const n of t.O_)e.m_(n.mutations)})}function q3e(t,e,n){return te(this,null,function*(){const r=t.O_.shift(),i=D3.from(r,e,n);yield YZ(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield IT(t)})}function K3e(t,e){return te(this,null,function*(){e&&nh(t).V_&&(yield function(r,i){return te(this,null,function*(){if(function(s){return NNe(s)&&s!==Mt.ABORTED}(i.code)){const o=r.O_.shift();nh(r).s_(),yield YZ(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield IT(r)}})}(t,e)),XZ(t)&&QZ(t)})}function j8(t,e){return te(this,null,function*(){const n=Hn(t);n.asyncQueue.verifyOperationInProgress(),gn("RemoteStore","RemoteStore received new credentials");const r=mm(n);n.L_.add(3),yield Ow(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield RT(n)})}function Y3e(t,e){return te(this,null,function*(){const n=Hn(t);e?(n.L_.delete(2),yield RT(n)):e||(n.L_.add(2),yield Ow(n),n.q_.set("Unknown"))})}function d0(t){return t.K_||(t.K_=function(n,r,i){const o=Hn(n);return o.w_(),new F3e(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:j3e.bind(null,t),Ro:U3e.bind(null,t),mo:z3e.bind(null,t),d_:V3e.bind(null,t)}),t.B_.push(e=>te(this,null,function*(){e?(t.K_.s_(),j3(t)?B3(t):t.q_.set("Unknown")):(yield t.K_.stop(),KZ(t))}))),t.K_}function nh(t){return t.U_||(t.U_=function(n,r,i){const o=Hn(n);return o.w_(),new O3e(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:H3e.bind(null,t),mo:K3e.bind(null,t),f_:G3e.bind(null,t),g_:q3e.bind(null,t)}),t.B_.push(e=>te(this,null,function*(){e?(t.U_.s_(),yield IT(t)):(yield t.U_.stop(),t.O_.length>0&&(gn("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new od,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new U3(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new tn(Mt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function z3(t,e){if(xd("AsyncQueue",`${e}: ${t}`),Iw(t))return new tn(Mt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e){this.comparator=e?(n,r)=>e(n,r)||An.comparator(n.key,r.key):(n,r)=>An.comparator(n.key,r.key),this.keyedMap=Wy(),this.sortedSet=new Fi(this.comparator)}static emptySet(e){return new dv(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof dv)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new dv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(){this.W_=new Fi(An.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):zn():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Vv{constructor(e,n,r,i,o,s,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new Vv(e,n,dv.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ET(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3e{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Q3e{constructor(){this.queries=z8(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Hn(n),o=i.queries;i.queries=z8(),o.forEach((s,a)=>{for(const l of a.j_)l.onError(r)})})(this,new tn(Mt.ABORTED,"Firestore shutting down"))}}function z8(){return new u0(t=>bZ(t),ET)}function V3(t,e){return te(this,null,function*(){const n=Hn(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new X3e,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield n.onListen(i,!0);break;case 1:o.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){const a=z3(s,`Initialization of query '${mg(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&$3(n)})}function W3(t,e){return te(this,null,function*(){const n=Hn(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function Z3e(t,e){const n=Hn(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&$3(n)}function J3e(t,e,n){const r=Hn(t),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(e)}function $3(t){t.Y_.forEach(e=>{e.next()})}var ck,V8;(V8=ck||(ck={})).ea="default",V8.Cache="cache";class H3{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Vv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Vv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ck.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZZ{constructor(e){this.key=e}}class JZ{constructor(e){this.key=e}}class eLe{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pr(),this.mutatedKeys=pr(),this.Aa=wZ(e),this.Ra=new dv(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new U8,i=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const f=i.get(u),p=CT(this.query,d)?d:null,b=!!f&&this.mutatedKeys.has(f.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let m=!1;f&&p?f.data.isEqual(p.data)?b!==v&&(r.track({type:3,doc:p}),m=!0):this.ga(f,p)||(r.track({type:2,doc:p}),m=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),m=!0):f&&!p&&(r.track({type:1,doc:f}),m=!0,(l||c)&&(a=!0)),m&&(p?(s=s.add(p),o=v?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),r.track({type:1,doc:u})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((u,d)=>function(p,b){const v=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zn()}};return v(p)-v(b)}(u.type,d.type)||this.Aa(u.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,s.length!==0||c?{snapshot:new Vv(this.query,e.Ra,o,s,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new U8,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=pr(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new JZ(r))}),this.da.forEach(r=>{e.has(r)||n.push(new ZZ(r))}),n}ba(e){this.Ta=e.Ts,this.da=pr();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Vv.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class tLe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class nLe{constructor(e){this.key=e,this.va=!1}}class rLe{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new u0(a=>bZ(a),ET),this.Ma=new Map,this.xa=new Set,this.Oa=new Fi(An.comparator),this.Na=new Map,this.La=new k3,this.Ba={},this.ka=new Map,this.qa=zv.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}function iLe(t,e,n=!0){return te(this,null,function*(){const r=oJ(t);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield eJ(r,e,n,!0),i})}function oLe(t,e){return te(this,null,function*(){const n=oJ(t);yield eJ(n,e,!0,!1)})}function eJ(t,e,n,r){return te(this,null,function*(){const i=yield T3e(t.localStore,Zc(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=yield sLe(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&GZ(t.remoteStore,i),a})}function sLe(t,e,n,r,i){return te(this,null,function*(){t.Ka=(d,f,p)=>function(v,m,g,x){return te(this,null,function*(){let w=m.view.ma(g);w.ns&&(w=yield N8(v.localStore,m.query,!1).then(({documents:M})=>m.view.ma(M,w)));const S=x&&x.targetChanges.get(m.targetId),P=x&&x.targetMismatches.get(m.targetId)!=null,I=m.view.applyChanges(w,v.isPrimaryClient,S,P);return $8(v,m.targetId,I.wa),I.snapshot})}(t,d,f,p);const o=yield N8(t.localStore,e,!0),s=new eLe(e,o.Ts),a=s.ma(o.documents),l=Fw.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=s.applyChanges(a,t.isPrimaryClient,l);$8(t,n,c.wa);const u=new tLe(e,n,s);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot})}function aLe(t,e,n){return te(this,null,function*(){const r=Hn(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!ET(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield lk(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&N3(r.remoteStore,i.targetId),uk(r,i.targetId)}).catch(Rw))):(uk(r,i.targetId),yield lk(r.localStore,i.targetId,!0))})}function lLe(t,e){return te(this,null,function*(){const n=Hn(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),N3(n.remoteStore,r.targetId))})}function cLe(t,e,n){return te(this,null,function*(){const r=gLe(t);try{const i=yield function(s,a){const l=Hn(s),c=wr.now(),u=a.reduce((p,b)=>p.add(b.key),pr());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let b=bd(),v=pr();return l.cs.getEntries(p,u).next(m=>{b=m,b.forEach((g,x)=>{x.isValidDocument()||(v=v.add(g))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,b)).next(m=>{d=m;const g=[];for(const x of a){const w=RNe(x,d.get(x.key).overlayedDocument);w!=null&&g.push(new hh(x.key,w,fZ(w.value.mapValue),ks.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,g,a)}).next(m=>{f=m;const g=m.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(p,m.batchId,g)})}).then(()=>({batchId:f.batchId,changes:_Z(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let c=s.Ba[s.currentUser.toKey()];c||(c=new Fi(Ir)),c=c.insert(a,l),s.Ba[s.currentUser.toKey()]=c}(r,i.batchId,n),yield Nw(r,i.changes),yield IT(r.remoteStore)}catch(i){const o=z3(i,"Failed to persist write");n.reject(o)}})}function tJ(t,e){return te(this,null,function*(){const n=Hn(t);try{const r=yield E3e(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Na.get(o);s&&(Zr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Zr(s.va):i.removedDocuments.size>0&&(Zr(s.va),s.va=!1))}),yield Nw(n,r,e)}catch(r){yield Rw(r)}})}function W8(t,e,n){const r=Hn(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((o,s)=>{const a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const l=Hn(s);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.j_)f.Z_(a)&&(c=!0)}),c&&$3(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function uLe(t,e,n){return te(this,null,function*(){const r=Hn(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),o=i&&i.key;if(o){let s=new Fi(An.comparator);s=s.insert(o,cs.newNoDocument(o,$n.min()));const a=pr().add(o),l=new PT($n.min(),new Map,new Fi(Ir),s,a);yield tJ(r,l),r.Oa=r.Oa.remove(o),r.Na.delete(e),G3(r)}else yield lk(r.localStore,e,!1).then(()=>uk(r,e,n)).catch(Rw)})}function dLe(t,e){return te(this,null,function*(){const n=Hn(t),r=e.batch.batchId;try{const i=yield _3e(n.localStore,e);rJ(n,r,null),nJ(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Nw(n,i)}catch(i){yield Rw(i)}})}function fLe(t,e,n){return te(this,null,function*(){const r=Hn(t);try{const i=yield function(s,a){const l=Hn(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Zr(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);rJ(r,e,n),nJ(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Nw(r,i)}catch(i){yield Rw(i)}})}function nJ(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function rJ(t,e,n){const r=Hn(t);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function uk(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||iJ(t,r)})}function iJ(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(N3(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),G3(t))}function $8(t,e,n){for(const r of n)r instanceof ZZ?(t.La.addReference(r.key,e),hLe(t,r)):r instanceof JZ?(gn("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||iJ(t,r.key)):zn()}function hLe(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(gn("SyncEngine","New document in limbo: "+n),t.xa.add(r),G3(t))}function G3(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new An(vi.fromString(e)),r=t.qa.next();t.Na.set(r,new nLe(n)),t.Oa=t.Oa.insert(n,r),GZ(t.remoteStore,new Tf(Zc(_T(n.path)),r,"TargetPurposeLimboResolution",_3.oe))}}function Nw(t,e,n){return te(this,null,function*(){const r=Hn(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{s.push(r.Ka(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=O3.Wi(l.targetId,c);o.push(d)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(l,c){return te(this,null,function*(){const u=Hn(l);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Ft.forEach(c,f=>Ft.forEach(f.$i,p=>u.persistence.referenceDelegate.addReference(d,f.targetId,p)).next(()=>Ft.forEach(f.Ui,p=>u.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))}catch(d){if(!Iw(d))throw d;gn("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const p=u.os.get(f),b=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(b);u.os=u.os.insert(f,v)}}})}(r.localStore,o))})}function pLe(t,e){return te(this,null,function*(){const n=Hn(t);if(!n.currentUser.isEqual(e)){gn("SyncEngine","User change. New user:",e.toKey());const r=yield VZ(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(l=>{l.reject(new tn(Mt.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Nw(n,r.hs)}})}function mLe(t,e){const n=Hn(t),r=n.Na.get(e);if(r&&r.va)return pr().add(r.key);{let i=pr();const o=n.Ma.get(e);if(!o)return i;for(const s of o){const a=n.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function oJ(t){const e=Hn(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tJ.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mLe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uLe.bind(null,e),e.Ca.d_=Z3e.bind(null,e.eventManager),e.Ca.$a=J3e.bind(null,e.eventManager),e}function gLe(t){const e=Hn(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dLe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fLe.bind(null,e),e}class LC{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(e){return te(this,null,function*(){this.serializer=DT(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),yield this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)})}ja(e,n){return null}Ha(e,n){return null}za(e){return S3e(this.persistence,new b3e,e.initialUser,this.serializer)}Ga(e){return new v3e(F3.Zr,this.serializer)}Wa(e){return new P3e}terminate(){return te(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}LC.provider={build:()=>new LC};class dk{initialize(e,n){return te(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>W8(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=pLe.bind(null,this.syncEngine),yield Y3e(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Q3e}()}createDatastore(e){const n=DT(e.databaseInfo.databaseId),r=function(o){return new k3e(o)}(e.databaseInfo);return function(o,s,a,l){return new N3e(o,s,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new B3e(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>W8(this.syncEngine,n,0),function(){return B8.D()?new B8:new D3e}())}createSyncEngine(e,n){return function(i,o,s,a,l,c,u){const d=new rLe(i,o,s,a,l,c);return u&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return te(this,null,function*(){var e,n;yield function(i){return te(this,null,function*(){const o=Hn(i);gn("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Ow(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}}dk.provider={build:()=>new dk};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):xd("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vLe{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=as.UNAUTHENTICATED,this.clientId=cZ.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>te(this,null,function*(){gn("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(gn("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new od;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>te(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=z3(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function BP(t,e){return te(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),gn("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>te(this,null,function*(){r.isEqual(i)||(yield VZ(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function H8(t,e){return te(this,null,function*(){t.asyncQueue.verifyOperationInProgress();const n=yield yLe(t);gn("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>j8(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>j8(e.remoteStore,i)),t._onlineComponents=e})}function yLe(t){return te(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){gn("FirestoreClient","Using user provided OfflineComponentProvider");try{yield BP(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Mt.FAILED_PRECONDITION||i.code===Mt.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Lv("Error using user provided cache. Falling back to memory cache: "+n),yield BP(t,new LC)}}else gn("FirestoreClient","Using default OfflineComponentProvider"),yield BP(t,new LC);return t._offlineComponents})}function sJ(t){return te(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(gn("FirestoreClient","Using user provided OnlineComponentProvider"),yield H8(t,t._uninitializedComponentsProvider._online)):(gn("FirestoreClient","Using default OnlineComponentProvider"),yield H8(t,new dk))),t._onlineComponents})}function xLe(t){return sJ(t).then(e=>e.syncEngine)}function BC(t){return te(this,null,function*(){const e=yield sJ(t),n=e.eventManager;return n.onListen=iLe.bind(null,e.syncEngine),n.onUnlisten=aLe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=oLe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=lLe.bind(null,e.syncEngine),n})}function bLe(t,e,n={}){const r=new od;return t.asyncQueue.enqueueAndForget(()=>te(this,null,function*(){return function(o,s,a,l,c){const u=new q3({next:f=>{u.Za(),s.enqueueAndForget(()=>W3(o,d));const p=f.docs.has(a);!p&&f.fromCache?c.reject(new tn(Mt.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new tn(Mt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new H3(_T(a.path),u,{includeMetadataChanges:!0,_a:!0});return V3(o,d)}(yield BC(t),t.asyncQueue,e,n,r)})),r.promise}function wLe(t,e,n={}){const r=new od;return t.asyncQueue.enqueueAndForget(()=>te(this,null,function*(){return function(o,s,a,l,c){const u=new q3({next:f=>{u.Za(),s.enqueueAndForget(()=>W3(o,d)),f.fromCache&&l.source==="server"?c.reject(new tn(Mt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new H3(a,u,{includeMetadataChanges:!0,_a:!0});return V3(o,d)}(yield BC(t),t.asyncQueue,e,n,r)})),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aJ(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lJ(t,e,n){if(!n)throw new tn(Mt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function SLe(t,e,n,r){if(e===!0&&r===!0)throw new tn(Mt.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function q8(t){if(!An.isDocumentKey(t))throw new tn(Mt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function K8(t){if(An.isDocumentKey(t))throw new tn(Mt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function kT(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":zn()}function Fs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new tn(Mt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kT(t);throw new tn(Mt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function _Le(t,e){if(e<=0)throw new tn(Mt.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new tn(Mt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new tn(Mt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SLe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aJ((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new tn(Mt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new tn(Mt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new tn(Mt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class FT{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Y8({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new tn(Mt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new tn(Mt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Y8(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new jOe;switch(r.type){case"firstParty":return new WOe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new tn(Mt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return te(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=G8.get(n);r&&(gn("ComponentProvider","Removing Datastore"),G8.delete(n),r.terminate())}(this),Promise.resolve()}}function ELe(t,e,n,r={}){var i;const o=(t=Fs(t,FT))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Lv("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=as.MOCK_USER;else{a=tQ(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new tn(Mt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new as(c)}t._authCredentials=new UOe(new lZ(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Id(this.firestore,e,this._query)}}class fs{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fs(this.firestore,e,this._key)}}class Wf extends Id{constructor(e,n,r){super(e,n,_T(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fs(this.firestore,null,new An(e))}withConverter(e){return new Wf(this.firestore,e,this._path)}}function Tn(t,e,...n){if(t=Sr(t),lJ("collection","path",e),t instanceof FT){const r=vi.fromString(e,...n);return K8(r),new Wf(t,null,r)}{if(!(t instanceof fs||t instanceof Wf))throw new tn(Mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(vi.fromString(e,...n));return K8(r),new Wf(t.firestore,null,r)}}function an(t,e,...n){if(t=Sr(t),arguments.length===1&&(e=cZ.newId()),lJ("doc","path",e),t instanceof FT){const r=vi.fromString(e,...n);return q8(r),new fs(t,null,new An(r))}{if(!(t instanceof fs||t instanceof Wf))throw new tn(Mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(vi.fromString(e,...n));return q8(r),new fs(t.firestore,t instanceof Wf?t.converter:null,new An(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new $Z(this,"async_queue_retry"),this.Vu=()=>{const r=LP();r&&gn("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=LP();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=LP();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new od;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return te(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Iw(e))throw e;gn("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw xd("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=U3.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&zn()}verifyOperationInProgress(){}wu(){return te(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Q8(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class su extends FT{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new X8,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return te(this,null,function*(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new X8(e),this._firestoreClient=void 0,yield e}})}}function CLe(t,e){const n=typeof t=="object"?t:Aw(),r=typeof t=="string"?t:"(default)",i=Dd(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=l3("firestore");o&&ELe(i,...o)}return i}function Lw(t){if(t._terminated)throw new tn(Mt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ALe(t),t._firestoreClient}function ALe(t){var e,n,r;const i=t._freezeSettings(),o=function(a,l,c,u){return new nNe(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,aJ(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new vLe(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wv(Ko.fromBase64String(e))}catch(n){throw new tn(Mt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wv(Ko.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new tn(Mt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $o(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new tn(Mt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new tn(Mt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ir(this._lat,e._lat)||Ir(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TLe=/^__.*__$/;class MLe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new hh(e,this.data,this.fieldMask,n,this.fieldTransforms):new kw(e,this.data,n,this.fieldTransforms)}}class cJ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new hh(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function uJ(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zn()}}class X3{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new X3(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return jC(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(uJ(this.Cu)&&TLe.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class PLe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||DT(e)}Qu(e,n,r,i=!1){return new X3({Cu:e,methodName:n,qu:r,path:$o.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jw(t){const e=t._freezeSettings(),n=DT(t._databaseId);return new PLe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Q3(t,e,n,r,i,o={}){const s=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);J3("Data must be an object, but it was:",s,r);const a=hJ(r,s);let l,c;if(o.merge)l=new Aa(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const u=[];for(const d of o.mergeFields){const f=fk(e,d,n);if(!s.contains(f))throw new tn(Mt.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);mJ(u,f)||u.push(f)}l=new Aa(u),c=s.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=s.fieldTransforms;return new MLe(new ea(a),l,c)}class NT extends OT{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof NT}}class Z3 extends OT{_toFieldTransform(e){return new TNe(e.path,new Db)}isEqual(e){return e instanceof Z3}}function dJ(t,e,n,r){const i=t.Qu(1,e,n);J3("Data must be an object, but it was:",i,r);const o=[],s=ea.empty();pm(r,(l,c)=>{const u=eL(e,l,n);c=Sr(c);const d=i.Nu(u);if(c instanceof NT)o.push(u);else{const f=Uw(c,d);f!=null&&(o.push(u),s.set(u,f))}});const a=new Aa(o);return new cJ(s,a,i.fieldTransforms)}function fJ(t,e,n,r,i,o){const s=t.Qu(1,e,n),a=[fk(e,r,n)],l=[i];if(o.length%2!=0)throw new tn(Mt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<o.length;f+=2)a.push(fk(e,o[f])),l.push(o[f+1]);const c=[],u=ea.empty();for(let f=a.length-1;f>=0;--f)if(!mJ(c,a[f])){const p=a[f];let b=l[f];b=Sr(b);const v=s.Nu(p);if(b instanceof NT)c.push(p);else{const m=Uw(b,v);m!=null&&(c.push(p),u.set(p,m))}}const d=new Aa(c);return new cJ(u,d,s.fieldTransforms)}function DLe(t,e,n,r=!1){return Uw(n,t.Qu(r?4:3,e))}function Uw(t,e){if(pJ(t=Sr(t)))return J3("Unsupported field value:",e,t),hJ(t,e);if(t instanceof OT)return function(r,i){if(!uJ(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let l=Uw(a,i.Lu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Sr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ENe(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=wr.fromDate(r);return{timestampValue:OC(i.serializer,o)}}if(r instanceof wr){const o=new wr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:OC(i.serializer,o)}}if(r instanceof K3)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wv)return{bytesValue:OZ(i.serializer,r._byteString)};if(r instanceof fs){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:I3(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Y3)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return P3(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${kT(r)}`)}(t,e)}function hJ(t,e){const n={};return uZ(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pm(t,(r,i)=>{const o=Uw(i,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function pJ(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof wr||t instanceof K3||t instanceof Wv||t instanceof fs||t instanceof OT||t instanceof Y3)}function J3(t,e,n){if(!pJ(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=kT(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function fk(t,e,n){if((e=Sr(e))instanceof Bw)return e._internalPath;if(typeof e=="string")return eL(t,e);throw jC("Field path arguments must be of type string or ",t,!1,void 0,n)}const RLe=new RegExp("[~\\*/\\[\\]]");function eL(t,e,n){if(e.search(RLe)>=0)throw jC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bw(...e.split("."))._internalPath}catch(r){throw jC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jC(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new tn(Mt.INVALID_ARGUMENT,a+t+l)}function mJ(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gJ{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new fs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ILe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(LT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ILe extends gJ{data(){return super.data()}}function LT(t,e){return typeof e=="string"?eL(t,e):e instanceof Bw?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vJ(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new tn(Mt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tL{}class nL extends tL{}function mr(t,e,...n){let r=[];e instanceof tL&&r.push(e),r=r.concat(n),function(o){const s=o.filter(l=>l instanceof rL).length,a=o.filter(l=>l instanceof BT).length;if(s>1||s>0&&a>0)throw new tn(Mt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class BT extends nL{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new BT(e,n,r)}_apply(e){const n=this._parse(e);return yJ(e._query,n),new Id(e.firestore,e.converter,rk(e._query,n))}_parse(e){const n=jw(e.firestore);return function(o,s,a,l,c,u,d){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new tn(Mt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){J8(d,u);const p=[];for(const b of d)p.push(Z8(l,o,b));f={arrayValue:{values:p}}}else f=Z8(l,o,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||J8(d,u),f=DLe(a,s,d,u==="in"||u==="not-in");return ao.create(c,u,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Bn(t,e,n){const r=e,i=LT("where",t);return BT._create(i,r,n)}class rL extends tL{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new rL(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:hc.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const l of a)yJ(s,l),s=rk(s,l)}(e._query,n),new Id(e.firestore,e.converter,rk(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class iL extends nL{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new iL(e,n)}_apply(e){const n=function(i,o,s){if(i.startAt!==null)throw new tn(Mt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new tn(Mt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Pb(o,s)}(e._query,this._field,this._direction);return new Id(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new c0(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function f0(t,e="asc"){const n=e,r=LT("orderBy",t);return iL._create(r,n)}class oL extends nL{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new oL(e,n,r)}_apply(e){return new Id(e.firestore,e.converter,kC(e._query,this._limit,this._limitType))}}function $f(t){return _Le("limit",t),oL._create("limit",t,"F")}function Z8(t,e,n){if(typeof(n=Sr(n))=="string"){if(n==="")throw new tn(Mt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xZ(e)&&n.indexOf("/")!==-1)throw new tn(Mt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(vi.fromString(n));if(!An.isDocumentKey(r))throw new tn(Mt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return x8(t,new An(r))}if(n instanceof fs)return x8(t,n._key);throw new tn(Mt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kT(n)}.`)}function J8(t,e){if(!Array.isArray(t)||t.length===0)throw new tn(Mt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yJ(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new tn(Mt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new tn(Mt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class kLe{convertValue(e,n="none"){switch(Xp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Yp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw zn()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return pm(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Xi(s.doubleValue));return new Y3(o)}convertGeoPoint(e){return new K3(Xi(e.latitude),Xi(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=C3(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ab(e));default:return null}}convertTimestamp(e){const n=th(e);return new wr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=vi.fromString(e);Zr(zZ(r));const i=new Tb(r.get(1),r.get(3)),o=new An(r.popFirst(5));return i.isEqual(n)||xd(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sL(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xJ extends gJ{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new lE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(LT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class lE extends xJ{data(e={}){return super.data(e)}}class bJ{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Hy(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new lE(this._firestore,this._userDataWriter,r.key,r,new Hy(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new tn(Mt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{const l=new lE(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Hy(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const l=new lE(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Hy(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:FLe(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function FLe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(t){t=Fs(t,fs);const e=Fs(t.firestore,su);return bLe(Lw(e),t._key).then(n=>wJ(e,t,n))}class aL extends kLe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wv(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new fs(this.firestore,null,n)}}function Xn(t){t=Fs(t,Id);const e=Fs(t.firestore,su),n=Lw(e),r=new aL(e);return vJ(t._query),wLe(n,t._query).then(i=>new bJ(e,r,t,i))}function eu(t,e,n){t=Fs(t,fs);const r=Fs(t.firestore,su),i=sL(t.converter,e,n);return zw(r,[Q3(jw(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ks.none())])}function Os(t,e,n,...r){t=Fs(t,fs);const i=Fs(t.firestore,su),o=jw(i);let s;return s=typeof(e=Sr(e))=="string"||e instanceof Bw?fJ(o,"updateDoc",t._key,e,n,r):dJ(o,"updateDoc",t._key,e),zw(i,[s.toMutation(t._key,ks.exists(!0))])}function tu(t){return zw(Fs(t.firestore,su),[new MT(t._key,ks.none())])}function yc(t,e){const n=Fs(t.firestore,su),r=an(t),i=sL(t.converter,e);return zw(n,[Q3(jw(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ks.exists(!1))]).then(()=>r)}function OLe(t,...e){var n,r,i;t=Sr(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Q8(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Q8(e[s])){const d=e[s];e[s]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[s+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[s+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,u;if(t instanceof fs)c=Fs(t.firestore,su),u=_T(t._key.path),l={next:d=>{e[s]&&e[s](wJ(c,t,d))},error:e[s+1],complete:e[s+2]};else{const d=Fs(t,Id);c=Fs(d.firestore,su),u=d._query;const f=new aL(c);l={next:p=>{e[s]&&e[s](new bJ(c,f,d,p))},error:e[s+1],complete:e[s+2]},vJ(t._query)}return function(f,p,b,v){const m=new q3(v),g=new H3(p,m,b);return f.asyncQueue.enqueueAndForget(()=>te(this,null,function*(){return V3(yield BC(f),g)})),()=>{m.Za(),f.asyncQueue.enqueueAndForget(()=>te(this,null,function*(){return W3(yield BC(f),g)}))}}(Lw(c),u,a,l)}function zw(t,e){return function(r,i){const o=new od;return r.asyncQueue.enqueueAndForget(()=>te(this,null,function*(){return cLe(yield xLe(r),i,o)})),o.promise}(Lw(t),e)}function wJ(t,e,n){const r=n.docs.get(e._key),i=new aL(t);return new xJ(t,i,e._key,r,new Hy(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NLe{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=jw(e)}set(e,n,r){this._verifyNotCommitted();const i=jP(e,this._firestore),o=sL(i.converter,n,r),s=Q3(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,ks.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=jP(e,this._firestore);let s;return s=typeof(n=Sr(n))=="string"||n instanceof Bw?fJ(this._dataReader,"WriteBatch.update",o._key,n,r,i):dJ(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,ks.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=jP(e,this._firestore);return this._mutations=this._mutations.concat(new MT(n._key,ks.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new tn(Mt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jP(t,e){if((t=Sr(t)).firestore!==e)throw new tn(Mt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function bo(){return new Z3("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(t){return Lw(t=Fs(t,su)),new NLe(t,e=>zw(t,e))}(function(e,n=!0){(function(i){l0=i})(hm),El(new Na("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new su(new zOe(r.getProvider("auth-internal")),new HOe(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new tn(Mt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tb(c.options.projectId,u)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ds(p8,"4.7.3",e),ds(p8,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SJ="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LLe{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){return te(this,null,function*(){if(this.auth)try{const e=yield this.auth.getToken();return e==null?void 0:e.accessToken}catch(e){return}})}getMessagingToken(){return te(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch(e){return}})}getAppCheckToken(e){return te(this,null,function*(){if(this.appCheck){const n=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return n.error?null:n.token}return null})}getContext(e){return te(this,null,function*(){const n=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk="us-central1";class BLe{constructor(e,n,r,i,o=hk,s){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new LLe(n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(o);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=hk}catch(a){this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function jLe(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}const eV="@firebase/functions",tV="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ULe="auth-internal",zLe="app-check-internal",VLe="messaging-internal";function WLe(t,e){const n=(r,{instanceIdentifier:i})=>{const o=r.getProvider("app").getImmediate(),s=r.getProvider(ULe),a=r.getProvider(VLe),l=r.getProvider(zLe);return new BLe(o,s,a,l,i,t)};El(new Na(SJ,n,"PUBLIC").setMultipleInstances(!0)),ds(eV,tV,e),ds(eV,tV,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Le(t=Aw(),e=hk){const r=Dd(Sr(t),SJ).getImmediate({identifier:e}),i=l3("functions");return i&&HLe(r,...i),r}function HLe(t,e,n){jLe(Sr(t),e,n)}WLe(fetch.bind(self));const GLe={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ENVIRONMENT:"production",VITE_FIREBASE_API_KEY:"AIzaSyCv7lD3FR7xfw5WtJjElRbt5msOisG6iaM",VITE_FIREBASE_APP_ID:"1:169991609633:web:e933755e3423186450f260",VITE_FIREBASE_AUTH_DOMAIN:"verse-dev-central.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"169991609633",VITE_FIREBASE_PROJECT_ID:"verse-dev-central",VITE_FIREBASE_STORAGE_BUCKET:"verse-dev-central.firebasestorage.app",VITE_USER_NODE_ENV:"production"},Ym=t=>{const e=GLe[t];return!e||e===void 0||e==="undefined"||e===""?(console.error(`Required environment variable ${t} is missing or empty!`),""):e},pk={apiKey:Ym("VITE_FIREBASE_API_KEY"),authDomain:Ym("VITE_FIREBASE_AUTH_DOMAIN"),projectId:Ym("VITE_FIREBASE_PROJECT_ID"),storageBucket:Ym("VITE_FIREBASE_STORAGE_BUCKET"),messagingSenderId:Ym("VITE_FIREBASE_MESSAGING_SENDER_ID"),appId:Ym("VITE_FIREBASE_APP_ID")};pk.projectId!=="verse-dev-central"&&console.error(`WARNING: Using project ${pk.projectId} instead of verse-dev-central!`);const cL=lQ(pk),bt=CLe(cL),Xr=DC(cL);$Le(cL);AFe(Xr,VQ).catch(t=>{console.error("Error setting auth persistence:",t)});const qLe=["teacher@example.com","admin@example.com"],_J=T.createContext({currentUser:null,isTeacher:!1,isStudent:!1,loginWithGoogle:()=>te(nt,null,function*(){return null}),login:()=>te(nt,null,function*(){}),logout:()=>te(nt,null,function*(){}),resetPassword:()=>te(nt,null,function*(){}),updateEmail:()=>te(nt,null,function*(){}),updatePassword:()=>te(nt,null,function*(){}),signup:()=>te(nt,null,function*(){return{}}),setCurrentUserAsAdmin:()=>te(nt,null,function*(){return!1})}),Dr=()=>T.useContext(_J);function KLe({children:t}){const[e,n]=T.useState(null),[r,i]=T.useState(!1),[o,s]=T.useState(!1),[a,l]=T.useState(!0),c=w=>te(this,null,function*(){var S,P,I;if(!w){i(!1),s(!1);return}try{if(qLe.includes(w.email||"")){i(!0),s(!1);return}try{const M=an(bt,"users",w.uid),D=yield si(M);if(D.exists()){const E=D.data();try{const _={lastLogin:new Date().toISOString(),updatedAt:new Date().toISOString(),authUid:w.uid,userId:w.uid,displayName:w.displayName||E.displayName||((S=w.email)==null?void 0:S.split("@")[0]),email:w.email,emailVerified:w.emailVerified,linkedToAuth:!0};E.createdAt?_.createdAt=E.createdAt:_.createdAt=new Date().toISOString(),yield Os(M,_)}catch(_){console.error("Error updating user login timestamp:",_)}if(E.role==="teacher"){i(!0),s(!1);return}else if(E.role==="student"){if(i(!1),s(!0),E.hasTemporaryPassword&&window.location.pathname!=="/password-change"){console.log("🔑 Student has temporary password - redirecting to password change"),setTimeout(()=>{window.location.href="/password-change"},100);return}return}}}catch(M){console.error("Error checking user document by UID:",M)}try{const M=Tn(bt,"users"),D=mr(M,Bn("email","==",w.email)),E=yield Xn(D);if(E.empty)console.log("❌ DEBUG: No user documents found by email search");else{const _=E.docs[0],A=_.data();if(_.id===w.uid){console.log("✅ Found user document by email, but it already has correct UID - no migration needed");try{const R={lastLogin:new Date().toISOString(),updatedAt:new Date().toISOString(),authUid:w.uid,userId:w.uid,displayName:w.displayName||A.displayName||((P=w.email)==null?void 0:P.split("@")[0]),email:w.email,emailVerified:w.emailVerified,linkedToAuth:!0};if(A.createdAt?R.createdAt=A.createdAt:R.createdAt=new Date().toISOString(),yield Os(_.ref,R),A.role==="teacher"||A.role==="admin")i(!0),s(!1);else if(A.role==="student"&&(i(!1),s(!0),A.hasTemporaryPassword&&window.location.pathname!=="/password-change")){console.log("🔑 Student has temporary password - redirecting to password change"),setTimeout(()=>{window.location.href="/password-change"},100);return}return}catch(R){console.error("Error updating existing user document:",R)}}else{console.log("🔄 Found legacy user document with different UID - performing migration"),console.log(`   Legacy UID: ${_.id}`),console.log(`   Current UID: ${w.uid}`);try{const R=se(j({},A),{userId:w.uid,authUid:w.uid,updatedAt:new Date().toISOString(),lastLogin:new Date().toISOString(),displayName:w.displayName||A.displayName||((I=w.email)==null?void 0:I.split("@")[0]),email:w.email,emailVerified:w.emailVerified,linkedToAuth:!0,role:A.role});if(A.createdAt?R.createdAt=A.createdAt:R.createdAt=new Date().toISOString(),yield eu(an(bt,"users",w.uid),R),yield tu(_.ref),console.log("✅ Successfully migrated legacy user document"),A.role==="teacher"||A.role==="admin")i(!0),s(!1);else if(A.role==="student"&&(i(!1),s(!0),A.hasTemporaryPassword&&window.location.pathname!=="/password-change")){console.log("🔑 Migrated student has temporary password - redirecting to password change"),setTimeout(()=>{window.location.href="/password-change"},100);return}return}catch(R){console.error("Error creating new user document with correct UID:",R)}}}}catch(M){console.error("Error checking user by email:",M)}i(!1),s(!1)}catch(M){console.error("Error in checkUserRole:",M),i(!1),s(!1)}});T.useEffect(()=>(JQ(Xr).then(S=>{}).catch(S=>{console.error("Redirect sign-in error:",S)}),UQ(Xr,S=>{n(S),c(S),l(!1)})),[]);const u=(w,S,P)=>te(this,null,function*(){try{P||console.log("No reCAPTCHA token provided, proceeding with signup without verification");const I=yield LQ(Xr,w,S);return yield eu(an(bt,"users",I.user.uid),{email:w,createdAt:new Date().toISOString(),userId:I.user.uid,verifiedByRecaptcha:!!P}),I}catch(I){throw console.error("Error creating user with email and password:",I),I}}),d=(w,S)=>te(this,null,function*(){try{yield BQ(Xr,w,S)}catch(P){throw console.error("Error signing in with email and password:",P),P}}),f=(w=!1,S)=>te(this,null,function*(){var M;const P=new ul;P.addScope("profile"),P.addScope("email");const I={prompt:"select_account"};if(S&&S.trim()&&(I.login_hint=S.toLowerCase().trim()),P.setCustomParameters(I),w)try{return yield ZQ(Xr,P),null}catch(D){throw console.error("Redirect sign-in failed:",D),D}try{const D=window.open("","_blank","width=1,height=1");if(!D||D.closed)return D==null||D.close(),yield f(!0);D.close();const E=PC(Xr,P),_=new Promise((R,F)=>{setTimeout(()=>F(new Error("Google Sign-In popup timed out after 30 seconds")),3e4)});return yield Promise.race([E,_])}catch(D){if(console.error("Google Sign-In error occurred:",D),D.code==="auth/popup-closed-by-user")throw new Error("Sign-in was cancelled. Please try again.");if(D.code==="auth/popup-blocked")throw new Error("Popup was blocked by your browser. Please allow popups for this site and try again.");if(D.message&&D.message.includes("timed out"))try{return yield f(!0)}catch(E){throw console.error("Redirect fallback also failed:",E),new Error("Both popup and redirect sign-in methods failed. Please try again or contact support.")}if(D.message&&D.message.includes("IndexedDB"))throw new Error("Browser storage issue detected. Please clear your browser data (F12 → Application → Storage → Clear site data) and try again.");if(D.message&&(D.message.includes("storage")||D.message.includes("quota")))throw new Error("Browser storage is full or corrupted. Please clear your browser data and try again.");if(D.code==="auth/account-exists-with-different-credential"){const E=(M=D.customData)==null?void 0:M.email;if(E)throw new Error(`You already have an account with ${E}. Please sign in with your email and password to link your Google account.`)}throw D}}),x={currentUser:e,isTeacher:r,isStudent:o,loginWithGoogle:f,login:d,logout:()=>te(this,null,function*(){try{yield PFe(Xr)}catch(w){throw console.error("Error signing out:",w),w}}),resetPassword:w=>te(this,null,function*(){try{yield wFe(Xr,w)}catch(S){throw console.error("Error resetting password:",S),S}}),updateEmail:w=>te(this,null,function*(){try{if(e)yield CFe(e,w);else throw new Error("No user logged in")}catch(S){throw console.error("Error updating email:",S),S}}),updatePassword:w=>te(this,null,function*(){try{if(e)yield y3(e,w);else throw new Error("No user logged in")}catch(S){throw console.error("Error updating password:",S),S}}),signup:u,setCurrentUserAsAdmin:()=>te(this,null,function*(){try{if(!e)throw new Error("No user logged in");return yield eu(an(bt,"users",e.uid),{email:e.email,role:"admin",updatedAt:new Date().toISOString()},{merge:!0}),i(!0),console.log("User set as admin and teacher flag activated"),!0}catch(w){throw console.error("Error setting user as admin:",w),w}})};return h.jsx(_J.Provider,{value:x,children:!a&&t})}const EJ=T.createContext({hasUnsavedChanges:!1,setHasUnsavedChanges:()=>{},promptBeforeLeaving:()=>te(nt,null,function*(){return!0})}),YLe=()=>T.useContext(EJ),XLe=({children:t})=>{const[e,n]=T.useState(!1),[r,i]=T.useState(!1),[o,s]=T.useState(null),[a,l]=T.useState("You have unsaved changes. Are you sure you want to leave this page?"),[c,u]=T.useState(!1);T.useEffect(()=>{if(e){const v=m=>(m.preventDefault(),m.returnValue=a,a);return window.addEventListener("beforeunload",v),()=>window.removeEventListener("beforeunload",v)}},[e,a]);const d=(v,m=!1)=>te(nt,null,function*(){return e?(v&&l(v),u(m),i(!0),new Promise(g=>{s(()=>g)})):!0}),f=()=>{i(!1),o&&(o(!0),s(null))},p=()=>{i(!1),o&&(o(!1),s(null))},b=()=>{i(!1),n(!1),o&&(o(!0),s(null))};return h.jsxs(EJ.Provider,{value:{hasUnsavedChanges:e,setHasUnsavedChanges:n,promptBeforeLeaving:d},children:[t,r&&h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:h.jsxs("div",{style:{backgroundColor:"white",padding:"var(--spacing-6)",borderRadius:"var(--border-radius-md)",maxWidth:"500px",width:"90%",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[h.jsx("h2",{style:{fontSize:"var(--font-size-xl)",marginBottom:"var(--spacing-4)",color:"var(--color-warning-700)"},children:"Unsaved Changes"}),h.jsx("p",{style:{marginBottom:"var(--spacing-6)"},children:a}),h.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"var(--spacing-3)",flexWrap:"wrap"},children:[h.jsx("button",{onClick:p,style:{padding:"var(--spacing-2) var(--spacing-4)",borderRadius:"var(--border-radius-sm)",border:"1px solid var(--color-gray-300)",backgroundColor:"white",cursor:"pointer"},children:"Stay on This Page"}),h.jsx("button",{onClick:b,style:{padding:"var(--spacing-2) var(--spacing-4)",borderRadius:"var(--border-radius-sm)",border:"1px solid var(--color-error-400)",backgroundColor:"white",color:"var(--color-error-600)",cursor:"pointer"},children:"Leave Without Saving"}),c&&h.jsx("button",{onClick:f,style:{padding:"var(--spacing-2) var(--spacing-4)",borderRadius:"var(--border-radius-sm)",border:"none",backgroundColor:"var(--color-warning-600)",color:"white",cursor:"pointer"},children:"Save & Leave"})]})]})})]})},CJ=T.createContext(null),QLe=({children:t})=>{const[e,n]=T.useState(null),[r,i]=T.useState({}),[o,s]=T.useState(!1),a=T.useCallback((u,d={})=>{console.log("🔵 ModalManager: showModal called with",u,d),requestAnimationFrame(()=>{console.log("🔵 ModalManager: Setting modal state",u),n(u),i(d),requestAnimationFrame(()=>{s(!0),console.log("🔵 ModalManager: Modal is ready for interaction",u)})})},[]),l=T.useCallback(()=>{console.log("🔵 ModalManager: hideModal called"),s(!1),n(null),i({})},[]);T.useEffect(()=>{e||s(!1)},[e]);const c={showModal:a,hideModal:l,modalId:e,modalProps:r,isModalReady:o};return h.jsx(CJ.Provider,{value:c,children:t})},Rl=()=>{const t=T.useContext(CJ);if(!t)throw new Error("useModal must be used within ModalProvider");return t},uL=({message:t="",size:e="medium",fullScreen:n=!1})=>{const i={small:{logo:"40px",text:"14px"},medium:{logo:"80px",text:"18px"},large:{logo:"120px",text:"24px"}}[e],o=n?{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.95)",zIndex:9999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"48px"};return h.jsxs("div",{style:o,children:[h.jsxs("div",{style:{position:"relative",marginBottom:"24px",display:"flex",alignItems:"center",justifyContent:"center"},children:[h.jsx("div",{style:{position:"absolute",width:i.logo,height:i.logo,backgroundColor:"#EBF8FF",borderRadius:"50%",animation:"pulse 2s ease-in-out infinite",zIndex:2}}),h.jsx("img",{src:"/android-chrome-192x192.png",alt:"Loading...",style:{width:i.logo,height:i.logo,borderRadius:"50%",animation:"bounce 1.5s ease-in-out infinite",zIndex:3,position:"relative"}})]}),h.jsx("div",{style:{display:"flex",gap:"8px",marginTop:"16px"},children:[0,1,2].map(s=>h.jsx("div",{style:{width:"8px",height:"8px",backgroundColor:"#4299E1",borderRadius:"50%",animation:`dotBounce 1.4s ease-in-out infinite ${s*.2}s`}},s))}),h.jsx("style",{children:`
        @keyframes bounce {
          0%, 20%, 53%, 80%, 100% {
            transform: translate(0, 0) scale(1);
          }
          40%, 43% {
            transform: translate(0, -8px) scale(1.1);
          }
          70% {
            transform: translate(0, -4px) scale(1.05);
          }
          90% {
            transform: translate(0, -2px) scale(1.02);
          }
        }
        
        @keyframes pulse {
          0% {
            transform: scale(0.95);
            opacity: 0.7;
          }
          50% {
            transform: scale(1.05);
            opacity: 0.9;
          }
          100% {
            transform: scale(0.95);
            opacity: 0.7;
          }
        }
        
        @keyframes dotBounce {
          0%, 80%, 100% {
            transform: scale(0.8);
            opacity: 0.5;
          }
          40% {
            transform: scale(1.2);
            opacity: 1;
          }
        }
      `})]})},ZLe=T.createContext(void 0),JLe=({children:t})=>{const[e,n]=T.useState(!1),[r,i]=T.useState("Loading..."),o=(a="Loading...")=>{i(a),n(!0)},s=()=>{n(!1)};return h.jsxs(ZLe.Provider,{value:{showLoading:o,hideLoading:s,isLoading:e},children:[t,e&&h.jsx(uL,{message:r,size:"large",fullScreen:!0})]})},e5e=({isOpen:t,onClose:e,teacherName:n,setTeacherName:r,teacherEmail:i,setTeacherEmail:o,teacherPassword:s,setTeacherPassword:a,teacherConfirmPassword:l,setTeacherConfirmPassword:c,isLoading:u,onEmailSignup:d,onGoogleSignup:f})=>h.jsxs($c,{isOpen:t,onClose:e,size:"md",children:[h.jsx(qc,{}),h.jsxs(Hc,{children:[h.jsx(Gc,{children:h.jsxs(Kt,{spacing:2,align:"center",children:[h.jsx(ft,{fontSize:"2xl",fontWeight:"bold",color:"blue.600",children:"👨‍🏫 Get Started as a Teacher"}),h.jsx(ft,{fontSize:"sm",color:"gray.600",textAlign:"center",children:"Create your educator account and start building custom learning games"})]})}),h.jsx(Yc,{}),h.jsx(Kc,{pb:6,children:h.jsxs(Kt,{spacing:4,children:[h.jsxs(Mr,{children:[h.jsx(ar,{children:"Full Name"}),h.jsx(ti,{type:"text",value:n,onChange:p=>r(p.target.value),placeholder:"Enter your full name",disabled:u})]}),h.jsxs(Mr,{children:[h.jsx(ar,{children:"Email Address"}),h.jsx(ti,{type:"email",value:i,onChange:p=>o(p.target.value),placeholder:"Enter your email",disabled:u})]}),h.jsxs(Mr,{children:[h.jsx(ar,{children:"Password"}),h.jsx(ti,{type:"password",value:s,onChange:p=>a(p.target.value),placeholder:"Create a password (min 6 characters)",disabled:u})]}),h.jsxs(Mr,{children:[h.jsx(ar,{children:"Confirm Password"}),h.jsx(ti,{type:"password",value:l,onChange:p=>c(p.target.value),placeholder:"Confirm your password",disabled:u})]}),h.jsx(pn,{colorScheme:"blue",width:"100%",onClick:d,isLoading:u,loadingText:"Creating Account...",children:"Create Teacher Account"}),h.jsxs(Ln,{width:"100%",children:[h.jsx(md,{}),h.jsx(ft,{fontSize:"sm",color:"gray.500",children:"or"}),h.jsx(md,{})]}),h.jsx(pn,{variant:"outline",width:"100%",onClick:f,isLoading:u,leftIcon:h.jsxs("svg",{width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",children:[h.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),h.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),h.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),h.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),children:"Sign up with Google"})]})})]})]}),t5e=({isOpen:t,onClose:e,memberEmail:n,setMemberEmail:r,memberPassword:i,setMemberPassword:o,isLoading:s,onEmailLogin:a,onGoogleLogin:l})=>h.jsxs($c,{isOpen:t,onClose:e,size:"md",children:[h.jsx(qc,{}),h.jsxs(Hc,{children:[h.jsx(Gc,{children:h.jsxs(Kt,{spacing:2,align:"center",children:[h.jsx(ft,{fontSize:"2xl",fontWeight:"bold",color:"blue.600",children:"🔐 Members Login"}),h.jsx(ft,{fontSize:"sm",color:"gray.600",textAlign:"center",children:"Sign in to access your dashboard and continue learning"})]})}),h.jsx(Yc,{}),h.jsx(Kc,{pb:6,children:h.jsxs(Kt,{spacing:4,children:[h.jsxs(Mr,{children:[h.jsx(ar,{children:"Email Address"}),h.jsx(ti,{type:"email",value:n,onChange:c=>r(c.target.value),placeholder:"Enter your email",disabled:s})]}),h.jsxs(Mr,{children:[h.jsx(ar,{children:"Password"}),h.jsx(ti,{type:"password",value:i,onChange:c=>o(c.target.value),placeholder:"Enter your password",disabled:s})]}),h.jsx(pn,{colorScheme:"blue",width:"100%",onClick:a,isLoading:s,loadingText:"Signing In...",children:"Sign In"}),h.jsxs(Ln,{width:"100%",children:[h.jsx(md,{}),h.jsx(ft,{fontSize:"sm",color:"gray.500",children:"or"}),h.jsx(md,{})]}),h.jsx(pn,{variant:"outline",width:"100%",onClick:l,isLoading:s,leftIcon:h.jsxs("svg",{width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",children:[h.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),h.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),h.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),h.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),children:"Sign in with Google"})]})})]})]}),n5e=()=>{const{currentUser:t,isTeacher:e,isStudent:n,logout:r}=Dr(),i=gs(),o=Pr(),{hasUnsavedChanges:s,promptBeforeLeaving:a}=YLe(),[l,c]=T.useState(!1),[u,d]=T.useState(!1),[f,p]=T.useState(!1),[b,v]=T.useState(!1),[m,g]=T.useState(""),[x,w]=T.useState(""),[S,P]=T.useState(""),[I,M]=T.useState(""),[D,E]=T.useState(""),[_,A]=T.useState(""),R=co(),L=(()=>{if(t&&n)return!0;const J=new URLSearchParams(i.search),oe=i.pathname==="/play",ne=J.get("token"),pe=sessionStorage.getItem("direct_token_access")==="true";return oe&&(ne||pe)})(),N=!t&&!L;T.useEffect(()=>{te(nt,null,function*(){if(!t){c(!1);return}try{const oe=an(bt,"users",t.uid),ne=yield si(oe);ne.exists()&&ne.data().role==="admin"?c(!0):c(!1)}catch(oe){console.error("Error checking admin status:",oe),c(!1)}})},[t]);const U=J=>({color:"white",fontWeight:"bold",textDecoration:"none",transition:"opacity 0.2s ease-in-out",padding:"var(--spacing-2) var(--spacing-3)",borderRadius:"var(--border-radius-sm)",backgroundColor:i.pathname===J?"rgba(255, 255, 255, 0.2)":"transparent"}),$={backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white",padding:"var(--spacing-2) var(--spacing-4)",border:"none",borderRadius:"var(--border-radius-md)",cursor:"pointer",fontWeight:"bold",transition:"opacity 0.2s ease-in-out",marginLeft:"var(--spacing-2)"},B=se(j({},$),{backgroundColor:"rgba(255, 255, 255, 0.9)",color:"var(--color-primary-600)",fontWeight:"bold"}),H=(J,oe)=>te(nt,null,function*(){if(i.pathname===oe||!s)return;J.preventDefault(),(yield a())&&o(oe)}),q=()=>te(nt,null,function*(){s&&!(yield a("You have unsaved changes. Are you sure you want to log out?"))||(yield r(),o("/"))}),z=()=>{g(""),w(""),P(""),M(""),E(""),A(""),v(!1)},G=()=>{d(!1),p(!1),z()},K=()=>te(nt,null,function*(){if(!m||!x||!I){R({title:"Missing Information",description:"Please fill in all fields.",status:"error",duration:3e3});return}if(x!==S){R({title:"Password Mismatch",description:"Passwords do not match.",status:"error",duration:3e3});return}if(x.length<6){R({title:"Weak Password",description:"Password must be at least 6 characters.",status:"error",duration:3e3});return}v(!0);try{const oe=(yield LQ(Xr,m,x)).user;yield EFe(oe,{displayName:I}),yield eu(an(bt,"users",oe.uid),{name:I,email:m,role:"teacher",createdAt:new Date().toISOString(),createdBy:"signup"}),R({title:"Welcome to LuminateLearn!",description:"Your teacher account has been created successfully.",status:"success",duration:3e3}),G(),o("/teacher")}catch(J){console.error("Teacher signup error:",J);let oe="Signup Error",ne="Failed to create account. Please try again.";J.code==="auth/email-already-in-use"?(oe="Account Already Exists",ne='This email already has an account. Please use "Members Login" to sign in instead, or use a different email address.'):J.code==="auth/invalid-email"?ne="Please enter a valid email address.":J.code==="auth/weak-password"?ne="Password is too weak. Please choose a stronger password.":J.code==="auth/operation-not-allowed"?ne="Email/password accounts are not enabled. Please contact support.":J.code==="auth/network-request-failed"?ne="Network error. Please check your internet connection and try again.":J.message&&(ne=J.message),R({title:oe,description:ne,status:"error",duration:5e3})}finally{v(!1)}}),Z=()=>te(nt,null,function*(){v(!0);try{const J=new ul,ne=(yield PC(Xr,J)).user,pe=an(bt,"users",ne.uid),ye=yield si(pe);if(ye.exists()){const Ce=ye.data();if(Ce.role!=="teacher"){const _e=se(j({},Ce),{role:"teacher",updatedAt:new Date().toISOString()});yield eu(pe,_e,{merge:!0})}}else{const Ce={name:ne.displayName||"Teacher",email:ne.email||"",role:"teacher",createdAt:new Date().toISOString(),createdBy:"google-signup"};yield eu(pe,Ce)}R({title:"Welcome to LuminateLearn!",description:"Successfully signed up with Google.",status:"success",duration:3e3}),G(),o("/teacher")}catch(J){console.error("🔴 NAVBAR: Teacher Google signup error:",J);let oe="Google Signup Error",ne="Failed to sign up with Google. Please try again.";J.code==="auth/popup-closed-by-user"?(oe="Signup Cancelled",ne="Google sign-up was cancelled."):J.code==="auth/account-exists-with-different-credential"?(oe="Account Already Exists",ne='An account already exists with this email using a different sign-in method. Please use "Members Login" instead.'):J.code==="auth/popup-blocked"?ne="Popup was blocked by your browser. Please allow popups and try again.":J.code==="auth/network-request-failed"?ne="Network error. Please check your internet connection and try again.":J.message&&(ne=J.message),R({title:oe,description:ne,status:J.code==="auth/popup-closed-by-user"?"info":"error",duration:5e3})}finally{v(!1)}}),ee=()=>te(nt,null,function*(){if(!D||!_){R({title:"Missing Information",description:"Please enter your email and password.",status:"error",duration:3e3});return}v(!0);try{const oe=(yield BQ(Xr,D,_)).user,ne=an(bt,"users",oe.uid),pe=yield si(ne);if(!pe.exists()){yield Xr.signOut(),R({title:"Account Not Found",description:"Your account is not found in our system. Please contact your administrator or create a new account.",status:"error",duration:5e3}),G();return}const ye=pe.data();if(!ye.role||ye.role!=="teacher"&&ye.role!=="student"&&ye.role!=="admin"){yield Xr.signOut(),R({title:"Invalid Account",description:"Your account is not properly configured. Please contact your administrator.",status:"error",duration:5e3}),G();return}R({title:"Welcome Back!",description:"Successfully logged in.",status:"success",duration:3e3}),G()}catch(J){console.error("Login error:",J);let oe="Failed to log in. Please try again.";J.code==="auth/user-not-found"?oe="No account found with this email address.":J.code==="auth/wrong-password"?oe="Incorrect password. Please try again.":J.code==="auth/invalid-email"?oe="Invalid email address format.":J.code==="auth/user-disabled"&&(oe="This account has been disabled. Please contact support."),R({title:"Login Error",description:oe,status:"error",duration:3e3})}finally{v(!1)}}),V=()=>te(nt,null,function*(){v(!0);try{const J=new ul,ne=(yield PC(Xr,J)).user,pe=an(bt,"users",ne.uid),ye=yield si(pe);if(!ye.exists()){yield ne.delete(),R({title:"Account Not Found",description:'You need to create an account first. Please use "Get Started as a Teacher" to create your account.',status:"error",duration:5e3}),G();return}const Ce=ye.data();if(!Ce.role||Ce.role!=="teacher"&&Ce.role!=="student"&&Ce.role!=="admin"){yield ne.delete(),R({title:"Invalid Account",description:"Your account is not properly configured. Please contact your administrator.",status:"error",duration:5e3}),G();return}R({title:"Welcome Back!",description:"Successfully logged in with Google.",status:"success",duration:3e3}),G()}catch(J){console.error("Google login error:",J),J.code==="auth/popup-closed-by-user"?R({title:"Login Cancelled",description:"Google sign-in was cancelled.",status:"info",duration:3e3}):R({title:"Login Error",description:"Failed to log in with Google. Please try again.",status:"error",duration:3e3})}finally{v(!1)}});return h.jsxs(h.Fragment,{children:[h.jsx("nav",{style:{backgroundColor:"var(--color-primary-500)",padding:"var(--spacing-4)"},children:h.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[h.jsxs("div",{style:{display:"flex",gap:"var(--spacing-4)"},children:[!t&&!L&&h.jsx(Hu,{to:"/",style:U("/"),onClick:J=>H(J,"/"),onMouseOver:J=>J.currentTarget.style.opacity="0.8",onMouseOut:J=>J.currentTarget.style.opacity="1",children:"Home"}),e&&h.jsx(h.Fragment,{children:h.jsx(Hu,{to:"/teacher",style:U("/teacher"),onClick:J=>H(J,"/teacher"),onMouseOver:J=>J.currentTarget.style.opacity="0.8",onMouseOut:J=>J.currentTarget.style.opacity="1",children:"Create"})}),n&&h.jsx(Hu,{to:"/student",style:U("/student"),onClick:J=>H(J,"/student"),onMouseOver:J=>J.currentTarget.style.opacity="0.8",onMouseOut:J=>J.currentTarget.style.opacity="1",children:"Dashboard"}),l&&h.jsx(Hu,{to:"/admin",style:se(j({},U("/admin")),{color:"#FFD700"}),onClick:J=>H(J,"/admin"),onMouseOver:J=>J.currentTarget.style.opacity="0.8",onMouseOut:J=>J.currentTarget.style.opacity="1",children:"Admin"})]}),h.jsx("div",{style:{display:"flex",gap:"var(--spacing-2)",alignItems:"center"},children:t?h.jsxs(h.Fragment,{children:[h.jsx("div",{style:{color:"white"},children:t.email}),h.jsx("button",{onClick:q,style:$,onMouseOver:J=>J.currentTarget.style.opacity="0.8",onMouseOut:J=>J.currentTarget.style.opacity="1",children:"Logout"})]}):N?h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>d(!0),style:B,onMouseOver:J=>J.currentTarget.style.opacity="0.8",onMouseOut:J=>J.currentTarget.style.opacity="1",children:"Get Started as a Teacher"}),h.jsx("button",{onClick:()=>p(!0),style:$,onMouseOver:J=>J.currentTarget.style.opacity="0.8",onMouseOut:J=>J.currentTarget.style.opacity="1",children:"Members Login"})]}):null})]})}),h.jsx(e5e,{isOpen:u,onClose:G,teacherName:I,setTeacherName:M,teacherEmail:m,setTeacherEmail:g,teacherPassword:x,setTeacherPassword:w,teacherConfirmPassword:S,setTeacherConfirmPassword:P,isLoading:b,onEmailSignup:K,onGoogleSignup:Z}),h.jsx(t5e,{isOpen:f,onClose:G,memberEmail:D,setMemberEmail:E,memberPassword:_,setMemberPassword:A,isLoading:b,onEmailLogin:ee,onGoogleLogin:V})]})},DS=["#3182CE","#38A169","#805AD5","#D69E2E","#E53E3E","#DD6B20","#319795","#ED64A6"],nV=({title:t,itemName:e,itemType:n,warningMessage:r,onDelete:i,onCancel:o})=>{const{hideModal:s,isModalReady:a}=Rl(),l=d=>{if(d.preventDefault(),d.stopPropagation(),!a){console.warn("🟡 DeleteConfirmationModal: Modal not ready, ignoring click");return}console.log("🔴 DeleteConfirmationModal: Executing delete"),i(),s()},c=d=>{d.preventDefault(),d.stopPropagation(),o(),s()},u=d=>{d.target===d.currentTarget&&c(d)};return h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:u,children:h.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"8px",maxWidth:"400px",width:"100%",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",opacity:a?1:.7,transition:"opacity 0.1s ease-in-out"},onClick:d=>d.stopPropagation(),children:[h.jsx("h3",{style:{marginBottom:"16px",fontSize:"18px",fontWeight:"bold"},children:t}),h.jsxs("p",{style:{marginBottom:"8px",color:"#4A5568"},children:["Are you sure you want to delete ",h.jsx("strong",{children:e}),"?"]}),r&&h.jsx("p",{style:{marginBottom:"16px",color:"#E53E3E",fontSize:"14px"},children:r}),h.jsx("p",{style:{marginBottom:"24px",color:"#4A5568",fontSize:"14px"},children:"This action cannot be undone."}),h.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[h.jsx("button",{onClick:c,disabled:!a,style:{padding:"8px 16px",backgroundColor:"#E2E8F0",color:"#4A5568",border:"none",borderRadius:"4px",cursor:a?"pointer":"not-allowed",opacity:a?1:.6},children:"Cancel"}),h.jsx("button",{onClick:l,disabled:!a,style:{padding:"8px 16px",backgroundColor:"#F56565",color:"white",border:"none",borderRadius:"4px",cursor:a?"pointer":"not-allowed",opacity:a?1:.6},children:"Delete"})]})]})})},RS=({folder:t,onSave:e,onCancel:n})=>{const{hideModal:r,isModalReady:i}=Rl(),[o,s]=T.useState((t==null?void 0:t.name)||""),[a,l]=T.useState((t==null?void 0:t.description)||""),[c,u]=T.useState((t==null?void 0:t.color)||DS[0]),d=T.useRef(null);console.log("🔵 FolderModal: Component initialized with props:",{hasFolder:!!t,folderId:t==null?void 0:t.id,folderName:t==null?void 0:t.name,hasOnSave:typeof e,hasOnCancel:typeof n,isModalReady:i}),T.useEffect(()=>{t?(s(t.name||""),l(t.description||""),u(t.color||DS[0])):(s(""),l(""),u(DS[0]))},[t==null?void 0:t.id]),T.useEffect(()=>{if(i&&!(t!=null&&t.id)&&d.current){const m=setTimeout(()=>{var g;(g=d.current)==null||g.focus()},100);return()=>clearTimeout(m)}},[i,t==null?void 0:t.id]);const f=m=>{console.log("🔵 FolderModal: Form submit triggered!",m),m.preventDefault();const g=o.trim();if(!g){console.log("🔵 FolderModal: Form validation failed - empty name");return}const x={name:g,description:a.trim(),color:c};console.log("🔵 FolderModal: Submitting folder data:",x,"folderId:",t==null?void 0:t.id),e(x,t==null?void 0:t.id),r()},p=m=>{console.log("🔵 FolderModal: Cancel button clicked"),m.preventDefault(),m.stopPropagation(),n(),r()},b=m=>{m.target===m.currentTarget&&p(m)},v=m=>{m.stopPropagation()};return h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:b,children:h.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"8px",maxWidth:"500px",width:"100%",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",opacity:i?1:.7,transition:"opacity 0.1s ease-in-out"},onClick:v,children:[h.jsx("h3",{style:{marginBottom:"20px",fontSize:"20px",fontWeight:"bold"},children:t!=null&&t.id?"Edit Folder":"Create New Folder"}),h.jsxs("form",{onSubmit:f,children:[h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Folder Name *"}),h.jsx("input",{ref:d,type:"text",value:o,onChange:m=>s(m.target.value),placeholder:"Enter folder name",required:!0,disabled:!i,style:{width:"100%",padding:"8px 12px",border:"1px solid #E2E8F0",borderRadius:"4px",fontSize:"16px",opacity:i?1:.6}})]}),h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Description"}),h.jsx("textarea",{value:a,onChange:m=>l(m.target.value),placeholder:"Enter folder description (optional)",rows:3,disabled:!i,style:{width:"100%",padding:"8px 12px",border:"1px solid #E2E8F0",borderRadius:"4px",fontSize:"16px",resize:"vertical",opacity:i?1:.6}})]}),h.jsxs("div",{style:{marginBottom:"24px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Color"}),h.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:DS.map(m=>h.jsx("button",{type:"button",onClick:()=>u(m),disabled:!i,style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:m,border:c===m?"3px solid #000":"2px solid #E2E8F0",cursor:i?"pointer":"not-allowed",transition:"border-color 0.2s",opacity:i?1:.6},title:m},m))})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"12px"},children:[h.jsx("button",{type:"button",onClick:p,disabled:!i,style:{padding:"10px 20px",backgroundColor:"white",color:"#4A5568",border:"1px solid #E2E8F0",borderRadius:"4px",cursor:i?"pointer":"not-allowed",fontSize:"16px",opacity:i?1:.6},children:"Cancel"}),h.jsx("button",{type:"submit",disabled:!i,onClick:m=>{console.log("🔵 FolderModal: Create Folder button clicked!",{isModalReady:i,buttonDisabled:!i,folderName:o,event:m})},style:{padding:"10px 20px",backgroundColor:"#3182CE",color:"white",border:"none",borderRadius:"4px",cursor:i?"pointer":"not-allowed",fontSize:"16px",opacity:i?1:.6},children:t!=null&&t.id?"Update Folder":"Create Folder"})]})]})]})})},r5e=({student:t,onSave:e,onCancel:n})=>{const{hideModal:r,isModalReady:i}=Rl(),[o,s]=T.useState((t==null?void 0:t.name)||""),[a,l]=T.useState((t==null?void 0:t.email)||""),[c,u]=T.useState((t==null?void 0:t.grade)||""),[d,f]=T.useState(t==null?void 0:t.age),[p,b]=T.useState((t==null?void 0:t.notes)||""),v=!(t!=null&&t.id);T.useEffect(()=>{t?(s(t.name||""),l(t.email||""),u(t.grade||""),f(t.age),b(t.notes||"")):(s(""),l(""),u(""),f(void 0),b(""))},[t==null?void 0:t.id]);const m=w=>{w.preventDefault();const S={name:o.trim(),email:a.trim(),grade:c.trim(),age:d||0,notes:p.trim()};e(S,t==null?void 0:t.id),r()},g=w=>{w.preventDefault(),w.stopPropagation(),n(),r()},x=w=>{const S=w.target.value;if(S==="")f(void 0);else{const P=Number(S);isNaN(P)||f(P)}};return h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:w=>{w.target===w.currentTarget&&g(w)},children:h.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"8px",maxWidth:"500px",width:"100%",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",opacity:i?1:.7,transition:"opacity 0.1s ease-in-out",maxHeight:"90vh",overflowY:"auto"},onClick:w=>w.stopPropagation(),children:[h.jsx("h3",{style:{marginBottom:"16px",fontSize:"20px"},children:t?"Edit Student":"Add New Student"}),v&&h.jsx("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"#EBF8FF",borderRadius:"6px",fontSize:"14px",color:"#1E40AF"},children:"📧 After adding this student, they will receive an email to set up their password."}),h.jsxs("form",{onSubmit:m,children:[h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Name *"}),h.jsx("input",{type:"text",value:o,onChange:w=>s(w.target.value),required:!0,disabled:!i,style:{width:"100%",padding:"8px 12px",border:"1px solid #E2E8F0",borderRadius:"4px",backgroundColor:"#F8FAFC"}})]}),h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Email *"}),h.jsx("input",{type:"email",value:a,onChange:w=>l(w.target.value),required:!0,disabled:!i,style:{width:"100%",padding:"8px 12px",border:"1px solid #E2E8F0",borderRadius:"4px",backgroundColor:"#F8FAFC"}}),v&&h.jsx("p",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:"A password setup email will be sent to this address"})]}),h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Grade/Class"}),h.jsx("input",{type:"text",value:c,onChange:w=>u(w.target.value),disabled:!i,style:{width:"100%",padding:"8px 12px",border:"1px solid #E2E8F0",borderRadius:"4px",backgroundColor:"#F8FAFC"}})]}),h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Age"}),h.jsx("input",{type:"number",value:d!==void 0?d:"",onChange:x,min:"0",max:"100",placeholder:"Enter age",disabled:!i,style:{width:"120px",padding:"8px 12px",border:"1px solid #E2E8F0",borderRadius:"4px",backgroundColor:"#F8FAFC"}})]}),h.jsxs("div",{style:{marginBottom:"24px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Notes"}),h.jsx("textarea",{value:p,onChange:w=>b(w.target.value),disabled:!i,style:{width:"100%",padding:"8px 12px",border:"1px solid #E2E8F0",borderRadius:"4px",backgroundColor:"#F8FAFC",minHeight:"100px",resize:"vertical"}})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[h.jsx("button",{type:"button",onClick:g,disabled:!i,style:{padding:"8px 16px",backgroundColor:"#E2E8F0",color:"#4A5568",border:"none",borderRadius:"4px",cursor:i?"pointer":"not-allowed",opacity:i?1:.6},children:"Cancel"}),h.jsx("button",{type:"submit",disabled:!i,style:{padding:"8px 16px",backgroundColor:"#4299E1",color:"white",border:"none",borderRadius:"4px",cursor:i?"pointer":"not-allowed",opacity:i?1:.6},children:t?"Update Student":"Add Student"})]})]})]})})},i5e=({gameName:t,onUpdate:e,onCopy:n,onCancel:r})=>{const{hideModal:i,isModalReady:o}=Rl(),s=()=>{e(),i()},a=()=>{n(),i()},l=()=>{r(),i()};return h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:c=>{c.target===c.currentTarget&&l()},children:h.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"8px",maxWidth:"500px",width:"100%",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",opacity:o?1:.7,transition:"opacity 0.1s ease-in-out"},onClick:c=>c.stopPropagation(),children:[h.jsx("h3",{style:{marginBottom:"16px",fontSize:"20px",fontWeight:"bold"},children:"Edit Game Configuration"}),h.jsxs("p",{style:{marginBottom:"8px",color:"#4A5568"},children:["You're about to edit ",h.jsx("strong",{children:t}),". Choose how you'd like to proceed:"]}),h.jsx("p",{style:{marginBottom:"24px",color:"#4A5568",fontSize:"14px"},children:"Update will modify the existing game, while Create Copy will make a new version."}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"12px"},children:[h.jsx("button",{onClick:l,disabled:!o,style:{padding:"8px 16px",backgroundColor:"#E2E8F0",color:"#4A5568",border:"none",borderRadius:"4px",cursor:o?"pointer":"not-allowed",flex:1,opacity:o?1:.6},children:"Cancel"}),h.jsx("button",{onClick:a,disabled:!o,style:{padding:"8px 16px",backgroundColor:"#4299E1",color:"white",border:"none",borderRadius:"4px",cursor:o?"pointer":"not-allowed",flex:1,opacity:o?1:.6},children:"Create Copy"}),h.jsx("button",{onClick:s,disabled:!o,style:{padding:"8px 16px",backgroundColor:"#38A169",color:"white",border:"none",borderRadius:"4px",cursor:o?"pointer":"not-allowed",flex:1,opacity:o?1:.6},children:"Update Game"})]})]})})},o5e=({assignment:t,attempts:e,isLoadingAttempts:n,onClose:r})=>{var a,l;const{hideModal:i}=Rl(),o=c=>{if(c<60)return`${c} sec`;const u=Math.floor(c/60),d=c%60;return`${u} min ${d} sec`},s=()=>{r(),i()};return h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:c=>{c.target===c.currentTarget&&s()},children:h.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"8px",maxWidth:"700px",width:"100%",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",maxHeight:"80vh",overflowY:"auto"},onClick:c=>c.stopPropagation(),children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[h.jsx("h2",{style:{fontSize:"24px",margin:0},children:"Assignment Details"}),h.jsx("button",{onClick:s,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#718096"},children:"×"})]}),h.jsxs("div",{style:{marginBottom:"24px"},children:[h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[h.jsx("div",{style:{fontWeight:"bold"},children:"Title:"}),h.jsx("div",{children:t.gameName})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[h.jsx("div",{style:{fontWeight:"bold"},children:"Game Type:"}),h.jsx("div",{children:t.gameType})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[h.jsx("div",{style:{fontWeight:"bold"},children:"Student Email:"}),h.jsx("div",{children:t.studentEmail})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[h.jsx("div",{style:{fontWeight:"bold"},children:"Due Date:"}),h.jsx("div",{children:(a=t.deadline)==null?void 0:a.toDate().toLocaleDateString()})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[h.jsx("div",{style:{fontWeight:"bold"},children:"Status:"}),h.jsx("div",{children:t.status})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[h.jsx("div",{style:{fontWeight:"bold"},children:"Times Required:"}),h.jsx("div",{children:t.timesRequired})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[h.jsx("div",{style:{fontWeight:"bold"},children:"Times Completed:"}),h.jsx("div",{children:t.completedCount})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[h.jsx("div",{style:{fontWeight:"bold"},children:"Created At:"}),h.jsx("div",{children:(l=t.createdAt)==null?void 0:l.toDate().toLocaleString()})]}),t.lastCompletedAt&&h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[h.jsx("div",{style:{fontWeight:"bold"},children:"Last Completed At:"}),h.jsx("div",{children:t.lastCompletedAt.toDate().toLocaleString()})]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[h.jsx("div",{style:{fontWeight:"bold"},children:"Assignment Link:"}),h.jsx("div",{children:`${window.location.origin}/assignment/${t.linkToken}`})]})]}),h.jsxs("div",{style:{marginTop:"24px"},children:[h.jsx("h3",{style:{fontSize:"18px",marginBottom:"16px"},children:"Attempt History"}),n?h.jsx("div",{style:{textAlign:"center",padding:"20px"},children:"Loading attempts..."}):e.length>0?h.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[h.jsx("thead",{children:h.jsxs("tr",{style:{borderBottom:"1px solid #E2E8F0"},children:[h.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Date & Time"}),h.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Duration"}),h.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Score"})]})}),h.jsx("tbody",{children:e.sort((c,u)=>u.timestamp.seconds-c.timestamp.seconds).map(c=>h.jsxs("tr",{style:{borderBottom:"1px solid #E2E8F0"},children:[h.jsx("td",{style:{padding:"12px",textAlign:"left"},children:c.timestamp.toDate().toLocaleString()}),h.jsx("td",{style:{padding:"12px",textAlign:"right"},children:o(c.duration)}),h.jsx("td",{style:{padding:"12px",textAlign:"right"},children:c.score!==void 0?c.score:"N/A"})]},c.id))})]}):h.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#718096"},children:"No attempts yet"})]}),h.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"24px"},children:h.jsx("button",{onClick:s,style:{padding:"8px 16px",backgroundColor:"#3182CE",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Close"})})]})})},s5e=({game:t,onAssign:e,onCancel:n,showToast:r})=>{const{hideModal:i,isModalReady:o}=Rl(),{currentUser:s}=Dr(),[a,l]=T.useState([]),[c,u]=T.useState([]),[d,f]=T.useState(""),[p,b]=T.useState(""),[v,m]=T.useState(1),[g,x]=T.useState([]),[w,S]=T.useState(!1);T.useEffect(()=>{s&&P()},[s]);const P=()=>te(nt,null,function*(){if(s){S(!0);try{const A=Tn(bt,"users"),R=mr(A,Bn("role","==","student"),Bn("teacherId","==",s.uid)),L=(yield Xn(R)).docs.map(N=>{const U=N.data();return{id:N.id,name:U.name||"",email:U.email||"",grade:U.grade||"",age:U.age||0,notes:U.notes||"",createdAt:U.createdAt||wr.now()}});x(L)}catch(A){console.error("Error fetching students for assignment:",A),r({title:"Error fetching students",status:"error",duration:3e3})}finally{S(!1)}}}),I=A=>{const R=Array.from(A.target.selectedOptions,L=>L.value);l(R);const F=g.filter(L=>R.includes(L.id));u(F)},M=A=>{l(a.filter(R=>R!==A)),u(c.filter(R=>R.id!==A))},D=()=>te(nt,null,function*(){if(c.length===0||!p){r({title:"Missing required fields",description:"Please select at least one student and set a deadline",status:"error",duration:3e3});return}try{const A=c.map(R=>R.email);yield e(t,A,new Date(p),v),r({title:"Assignments created",description:`Created assignments for ${c.length} student(s)`,status:"success",duration:3e3}),i()}catch(A){console.error("Error creating assignments:",A),r({title:"Error creating assignments",status:"error",duration:3e3})}}),E=()=>{n(),i()},_=A=>{A.target===A.currentTarget&&E()};return h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:_,children:h.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"8px",maxWidth:"600px",width:"100%",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",opacity:o?1:.7,transition:"opacity 0.1s ease-in-out"},onClick:A=>A.stopPropagation(),children:[h.jsx("h2",{style:{marginBottom:"16px",fontSize:"24px",textAlign:"center"},children:"Assign Game to Student"}),h.jsxs("div",{style:{marginBottom:"20px"},children:[h.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold"},children:["Game: ",t.title]}),h.jsxs("div",{style:{color:"#666"},children:["Type: ",t.gameType]})]}),h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Student Email *"}),w?h.jsx("div",{style:{padding:"8px 0"},children:"Loading students..."}):g.length>0?h.jsxs(h.Fragment,{children:[h.jsx("select",{multiple:!0,value:a,onChange:I,disabled:!o,style:{width:"100%",padding:"8px 12px",border:"1px solid #E2E8F0",borderRadius:"4px",backgroundColor:"#F7FAFC",minHeight:"120px",opacity:o?1:.6},required:!0,children:g.map(A=>h.jsxs("option",{value:A.id,children:[A.name," (",A.email,") ",A.grade?`- ${A.grade}`:""," ",A.age?`- Age ${A.age}`:""]},A.id))}),h.jsxs("div",{style:{marginTop:"8px"},children:[h.jsxs("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:["Selected Students (",c.length,"):"]}),h.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",minHeight:"40px",maxHeight:"100px",overflowY:"auto",padding:"8px",backgroundColor:"#EDF2F7",borderRadius:"4px"},children:c.length>0?c.map(A=>h.jsxs("div",{style:{display:"flex",alignItems:"center",backgroundColor:"#E2E8F0",padding:"4px 8px",borderRadius:"16px",fontSize:"14px"},children:[A.name,h.jsx("button",{onClick:()=>M(A.id),disabled:!o,style:{marginLeft:"4px",background:"none",border:"none",cursor:o?"pointer":"not-allowed",fontSize:"14px",color:"#4A5568",opacity:o?1:.6},children:"×"})]},A.id)):h.jsx("div",{style:{color:"#718096",fontSize:"14px",width:"100%",textAlign:"center",padding:"6px 0"},children:"No students selected"})})]}),h.jsx("div",{style:{fontSize:"14px",color:"#666",marginTop:"4px",fontStyle:"italic"},children:"Hold Ctrl/Cmd key to select multiple students"})]}):h.jsxs("div",{children:[h.jsx("div",{style:{marginBottom:"8px",color:"#E53E3E"},children:"No students found. Please add students in the My Students tab first."}),h.jsx("input",{type:"email",placeholder:"student@example.com",style:{width:"100%",padding:"8px 12px",border:"1px solid #E2E8F0",borderRadius:"4px",backgroundColor:"#F7FAFC",opacity:o?1:.6},value:d,onChange:A=>f(A.target.value),disabled:!o,required:!0})]}),h.jsx("div",{style:{fontSize:"14px",color:"#666",marginTop:"4px"},children:"An email notification with assignment details will be sent to each selected student."})]}),h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Deadline *"}),h.jsx("input",{type:"date",style:{width:"200px",padding:"8px 12px",border:"1px solid #E2E8F0",borderRadius:"4px",backgroundColor:"#F7FAFC",opacity:o?1:.6},value:p,onChange:A=>b(A.target.value),disabled:!o,required:!0})]}),h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Number of Times to Complete"}),h.jsxs("select",{style:{width:"120px",padding:"8px 12px",border:"1px solid #E2E8F0",borderRadius:"4px",backgroundColor:"#F7FAFC",opacity:o?1:.6},value:v,onChange:A=>m(Number(A.target.value)),disabled:!o,children:[h.jsx("option",{value:1,children:"1"}),h.jsx("option",{value:2,children:"2"}),h.jsx("option",{value:3,children:"3"}),h.jsx("option",{value:5,children:"5"}),h.jsx("option",{value:10,children:"10"})]})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[h.jsx("button",{onClick:E,disabled:!o,style:{padding:"8px 16px",backgroundColor:"white",color:"#4A5568",border:"1px solid #E2E8F0",borderRadius:"4px",cursor:o?"pointer":"not-allowed",opacity:o?1:.6},children:"Cancel"}),h.jsx("button",{onClick:D,disabled:!o,style:{padding:"8px 16px",backgroundColor:"#3182CE",color:"white",border:"none",borderRadius:"4px",cursor:o?"pointer":"not-allowed",opacity:o?1:.6},children:"Assign Game"})]})]})})},a5e=({student:t,onSave:e,onCancel:n})=>{const{hideModal:r,isModalReady:i}=Rl(),[o,s]=T.useState((t==null?void 0:t.notes)||"");T.useEffect(()=>{s(t&&t.notes||"")},[t==null?void 0:t.id]);const a=u=>{u.preventDefault(),e(t.id,o.trim()),r()},l=u=>{u.preventDefault(),u.stopPropagation(),n(),r()},c=u=>{u.target===u.currentTarget&&l(u)};return h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:c,children:h.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"8px",maxWidth:"500px",width:"100%",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",opacity:i?1:.7,transition:"opacity 0.1s ease-in-out",maxHeight:"70vh",overflowY:"auto"},onClick:u=>u.stopPropagation(),children:[h.jsx("h3",{style:{marginBottom:"16px",fontSize:"20px",fontWeight:"bold"},children:"📝 Student Notes"}),h.jsxs("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"#F8FAFC",borderRadius:"6px"},children:[h.jsx("div",{style:{fontWeight:"bold",fontSize:"16px",marginBottom:"4px"},children:t.name}),h.jsx("div",{style:{fontSize:"14px",color:"#6B7280"},children:t.email})]}),h.jsxs("form",{onSubmit:a,children:[h.jsxs("div",{style:{marginBottom:"24px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Notes"}),h.jsx("textarea",{value:o,onChange:u=>s(u.target.value),placeholder:"Add notes about this student's progress, behavior, or other observations...",disabled:!i,style:{width:"100%",padding:"12px",border:"1px solid #E2E8F0",borderRadius:"4px",backgroundColor:"#F8FAFC",minHeight:"120px",resize:"vertical",fontSize:"14px",lineHeight:"1.5",fontFamily:"inherit"}}),h.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:"These notes are private and only visible to you"})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[h.jsx("button",{type:"button",onClick:l,disabled:!i,style:{padding:"8px 16px",backgroundColor:"#E2E8F0",color:"#4A5568",border:"none",borderRadius:"4px",cursor:i?"pointer":"not-allowed",opacity:i?1:.6},children:"Cancel"}),h.jsx("button",{type:"submit",disabled:!i,style:{padding:"8px 16px",backgroundColor:"#4299E1",color:"white",border:"none",borderRadius:"4px",cursor:i?"pointer":"not-allowed",opacity:i?1:.6},children:"Save Notes"})]})]})]})})},AJ=({onDeleteFolder:t,onSaveFolder:e,onCancelFolder:n,onSaveStudent:r,onCancelStudent:i,onSaveStudentNotes:o,onDelete:s,onCancelDelete:a,onUpdateGame:l,onCopyGame:c,onCancelEdit:u,onCloseAssignmentDetails:d,onAssignGame:f,onCancelAssignment:p,showToast:b})=>{const{modalId:v,modalProps:m}=Rl();if(v==="delete-folder"){const{folderId:g,folderName:x,gamesCount:w}=m;return!g||!t?(console.warn("🟡 GlobalModals: Missing folderId or onDeleteFolder for delete-folder modal"),null):h.jsx(nV,{title:"Delete Folder?",itemName:x||"(Unnamed Folder)",itemType:"folder",warningMessage:w>0?`This folder contains ${w} game(s). They will be moved to "All Games".`:void 0,onDelete:()=>t(g),onCancel:n||(()=>{})})}if(v==="folder-modal"){const{folder:g}=m;return e?h.jsx(RS,{folder:g,onSave:e,onCancel:n||(()=>{})}):(console.warn("🟡 GlobalModals: Missing onSaveFolder for folder-modal"),null)}if(v==="createFolder"){const{onSave:g}=m;return!g||typeof g!="function"?(console.warn("🟡 GlobalModals: Missing onSave function for createFolder modal"),null):h.jsx(RS,{folder:void 0,onSave:g,onCancel:n||(()=>{})})}if(v==="editFolder"){const{folder:g,onSave:x}=m;return!x||typeof x!="function"?(console.warn("🟡 GlobalModals: Missing onSave function for editFolder modal"),null):h.jsx(RS,{folder:g,onSave:x,onCancel:n||(()=>{})})}if(v==="assignment-folder-modal"){const{folder:g,onSave:x}=m;return!x||typeof x!="function"?(console.warn("🟡 GlobalModals: Missing onSave function for assignment-folder-modal"),null):h.jsx(RS,{folder:g,onSave:x,onCancel:n||(()=>{})})}if(v==="student-modal"){const{student:g}=m;return r?h.jsx(r5e,{student:g,onSave:r,onCancel:i||(()=>{})}):(console.warn("🟡 GlobalModals: Missing onSaveStudent for student-modal"),null)}if(v==="delete-confirmation"){const{title:g,itemName:x,itemType:w,warningMessage:S,onDelete:P}=m;return!P||typeof P!="function"?(console.warn("🟡 GlobalModals: Missing onDelete function in modalProps for delete-confirmation modal"),null):h.jsx(nV,{title:g,itemName:x,itemType:w,warningMessage:S,onDelete:P,onCancel:a||(()=>{})})}if(v==="edit-choice"){const{gameName:g}=m;return!l||!c?(console.warn("🟡 GlobalModals: Missing edit handlers for edit-choice modal"),null):h.jsx(i5e,{gameName:g,onUpdate:l,onCopy:c,onCancel:u||(()=>{})})}if(v==="assignment-details"){const{assignment:g,attempts:x,isLoadingAttempts:w}=m;return d?h.jsx(o5e,{assignment:g,attempts:x||[],isLoadingAttempts:w||!1,onClose:d}):(console.warn("🟡 GlobalModals: Missing onCloseAssignmentDetails for assignment-details modal"),null)}if(v==="assignment-creation"){const{game:g}=m;return!f||!p||!b?null:h.jsx(s5e,{game:g,onAssign:f,onCancel:p,showToast:b})}if(v==="student-notes"){const{student:g}=m;return o?h.jsx(a5e,{student:g,onSave:o,onCancel:i||(()=>{})}):(console.warn("🟡 GlobalModals: Missing onSaveStudentNotes for student-notes modal"),null)}return null};let IS;const l5e=new Uint8Array(16);function c5e(){if(!IS&&(IS=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!IS))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return IS(l5e)}const Lo=[];for(let t=0;t<256;++t)Lo.push((t+256).toString(16).slice(1));function u5e(t,e=0){return Lo[t[e+0]]+Lo[t[e+1]]+Lo[t[e+2]]+Lo[t[e+3]]+"-"+Lo[t[e+4]]+Lo[t[e+5]]+"-"+Lo[t[e+6]]+Lo[t[e+7]]+"-"+Lo[t[e+8]]+Lo[t[e+9]]+"-"+Lo[t[e+10]]+Lo[t[e+11]]+Lo[t[e+12]]+Lo[t[e+13]]+Lo[t[e+14]]+Lo[t[e+15]]}const d5e=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),rV={randomUUID:d5e};function f5e(t,e,n){if(rV.randomUUID&&!t)return rV.randomUUID();t=t||{};const r=t.random||(t.rng||c5e)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,u5e(r)}const h5e=t=>te(nt,null,function*(){try{const e=Tn(bt,"assignments"),n=mr(e,Bn("teacherId","==",t)),r=yield Xn(n),i=[];return r.forEach(o=>{const s=o.data();i.push(j({id:o.id},s))}),i}catch(e){throw console.error("Error getting teacher assignments:",e),e}}),TJ=t=>te(nt,null,function*(){try{const e=f5e(),n=se(j({},t),{linkToken:e,status:"assigned",completedCount:0,createdAt:wr.now(),emailSent:!1}),r=yield yc(Tn(bt,"assignments"),n);return console.log("Assignment created with ID:",r.id),console.log("Email will be sent automatically via Firebase Cloud Functions"),r.id}catch(e){throw console.error("Error creating assignment:",e),e}}),Xm=(t,e)=>te(nt,null,function*(){try{const n=an(bt,"assignments",t);yield Os(n,e)}catch(n){throw console.error("Error updating assignment:",n),n}}),p5e=t=>te(nt,null,function*(){try{const e=an(bt,"assignments",t);yield tu(e)}catch(e){throw console.error("Error deleting assignment:",e),e}}),m5e=t=>te(nt,null,function*(){try{const e=Tn(bt,"attempts"),n=mr(e,Bn("assignmentId","==",t)),r=yield Xn(n),i=[];return r.forEach(o=>{const s=o.data();i.push(j({id:o.id},s))}),i}catch(e){throw console.error("Error getting assignment attempts:",e),e}}),UP=(t,e)=>te(nt,null,function*(){try{if(!t)throw new Error("Missing assignmentId parameter");const n={assignmentId:t,studentEmail:e.studentEmail||"unknown@email.com",studentName:e.studentName||"Unknown Student",duration:typeof e.duration=="number"?e.duration:0,score:typeof e.score=="number"&&!isNaN(e.score)?e.score:null,results:e.results||null,timestamp:wr.now()};console.log("Creating attempt with validated data:",n);const r=yield yc(Tn(bt,"attempts"),n);return console.log("Successfully created attempt with ID:",r.id),r.id}catch(n){throw console.error("Error creating attempt:",n),n}}),g5e=t=>te(nt,null,function*(){if(!t)return console.error("getAssignmentByToken: Missing token parameter"),null;try{console.log(`getAssignmentByToken: Searching for assignment with token: ${t}`);const e=Tn(bt,"assignments"),n=mr(e,Bn("linkToken","==",t)),r=yield Xn(n);if(r.empty)return console.warn(`getAssignmentByToken: No assignment found with token: ${t}`),null;const i=r.docs[0];return console.log(`getAssignmentByToken: Found assignment with ID: ${i.id}`),j({id:i.id},i.data())}catch(e){throw console.error(`getAssignmentByToken: Error searching for token ${t}:`,e),e}}),mk=t=>te(nt,null,function*(){try{const e=Tn(bt,"assignments"),n=mr(e,Bn("teacherId","==",t)),r=yield Xn(n),i=[];r.forEach(u=>{const d=u.data();i.push(j({id:u.id},d))});const o=Tn(bt,"assignmentFolderAssignments"),s=mr(o,Bn("userId","==",t)),a=yield Xn(s),l=new Map;a.forEach(u=>{const d=u.data();l.set(d.assignmentId,d.folderId)});const c=i.map(u=>se(j({},u),{folderId:l.get(u.id||"")||void 0}));return console.log("Loaded assignments with folder info:",{totalAssignments:c.length,assignmentsInFolders:c.filter(u=>u.folderId).length,unorganizedAssignments:c.filter(u=>!u.folderId).length}),c}catch(e){throw console.error("Error getting teacher assignments with folders:",e),e}}),zP=({game:t,onSuccess:e,onCancel:n})=>{const{currentUser:r}=Dr(),[i,o]=T.useState(""),[s,a]=T.useState(""),[l,c]=T.useState(1),[u,d]=T.useState(!1),[f,p]=T.useState(null),[b,v]=T.useState(!1);if(!r)return h.jsx("div",{style:{padding:"var(--spacing-4)",textAlign:"center",color:"var(--color-gray-500)"},children:"You must be logged in to assign games."});const m=x=>te(nt,null,function*(){if(x.preventDefault(),!i||!s){p("Please fill out all required fields");return}d(!0),p(null);try{const w=new Date(s);w.setHours(23,59,59,999);const S={teacherId:r.uid,studentEmail:i,gameId:t.id||"",gameName:t.title,gameType:t.type,deadline:wr.fromDate(w),timesRequired:l},P=yield TJ(S);v(!0),setTimeout(()=>{e()},1500)}catch(w){console.error("Error assigning game:",w),p("Failed to create assignment. Please try again.")}finally{d(!1)}}),g=new Date().toISOString().split("T")[0];return b?h.jsxs("div",{style:{padding:"var(--spacing-4)",textAlign:"center",backgroundColor:"white",borderRadius:"var(--border-radius-md)",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[h.jsx("div",{style:{color:"var(--color-success-500)",fontSize:"var(--font-size-xl)",marginBottom:"var(--spacing-2)"},children:"✓"}),h.jsxs("div",{style:{color:"var(--color-gray-800)",fontSize:"var(--font-size-md)"},children:["Game successfully assigned to ",i,"!"]}),h.jsx("div",{style:{color:"var(--color-gray-500)",fontSize:"var(--font-size-sm)",marginTop:"var(--spacing-2)"},children:"An email with instructions has been sent to the student."})]}):h.jsxs("div",{style:{padding:"var(--spacing-4)",backgroundColor:"white",borderRadius:"var(--border-radius-md)",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[h.jsx("h2",{style:{fontSize:"var(--font-size-xl)",color:"var(--color-gray-800)",marginBottom:"var(--spacing-4)",textAlign:"center"},children:"Assign Game to Student"}),h.jsxs("form",{onSubmit:m,children:[f&&h.jsx("div",{style:{backgroundColor:"var(--color-error-100)",color:"var(--color-error-700)",padding:"var(--spacing-2)",borderRadius:"var(--border-radius-sm)",marginBottom:"var(--spacing-4)"},children:f}),h.jsxs("div",{style:{marginBottom:"var(--spacing-4)"},children:[h.jsxs("div",{style:{fontSize:"var(--font-size-md)",fontWeight:"bold",color:"var(--color-gray-800)",marginBottom:"var(--spacing-2)"},children:["Game: ",t.title]}),h.jsxs("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-gray-600)"},children:["Type: ",t.type==="sort-categories-egg"?"Categories":"Whack-a-Mole"]})]}),h.jsxs("div",{style:{marginBottom:"var(--spacing-4)"},children:[h.jsx("label",{htmlFor:"studentEmail",style:{display:"block",fontSize:"var(--font-size-sm)",color:"var(--color-gray-700)",marginBottom:"var(--spacing-1)"},children:"Student Email *"}),h.jsx("input",{id:"studentEmail",type:"email",value:i,onChange:x=>o(x.target.value),required:!0,style:{width:"100%",padding:"var(--spacing-2)",border:"1px solid var(--color-gray-300)",borderRadius:"var(--border-radius-sm)",fontSize:"var(--font-size-md)"},placeholder:"student@example.com"}),h.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-gray-500)",marginTop:"var(--spacing-1)"},children:"An email notification with assignment details will be sent to this address."})]}),h.jsxs("div",{style:{marginBottom:"var(--spacing-4)"},children:[h.jsx("label",{htmlFor:"deadline",style:{display:"block",fontSize:"var(--font-size-sm)",color:"var(--color-gray-700)",marginBottom:"var(--spacing-1)"},children:"Deadline *"}),h.jsx("input",{id:"deadline",type:"date",value:s,onChange:x=>a(x.target.value),min:g,required:!0,style:{width:"100%",padding:"var(--spacing-2)",border:"1px solid var(--color-gray-300)",borderRadius:"var(--border-radius-sm)",fontSize:"var(--font-size-md)"}})]}),h.jsxs("div",{style:{marginBottom:"var(--spacing-4)"},children:[h.jsx("label",{htmlFor:"timesRequired",style:{display:"block",fontSize:"var(--font-size-sm)",color:"var(--color-gray-700)",marginBottom:"var(--spacing-1)"},children:"Number of Times to Complete"}),h.jsx("select",{id:"timesRequired",value:l,onChange:x=>c(Number(x.target.value)),style:{width:"100%",padding:"var(--spacing-2)",border:"1px solid var(--color-gray-300)",borderRadius:"var(--border-radius-sm)",fontSize:"var(--font-size-md)"},children:[1,2,3,4,5].map(x=>h.jsx("option",{value:x,children:x},x))})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"var(--spacing-4)"},children:[h.jsx("button",{type:"button",onClick:n,style:{padding:"var(--spacing-2) var(--spacing-4)",backgroundColor:"white",border:"1px solid var(--color-gray-300)",borderRadius:"var(--border-radius-sm)",cursor:"pointer",color:"var(--color-gray-700)"},children:"Cancel"}),h.jsx("button",{type:"submit",disabled:u,style:{padding:"var(--spacing-2) var(--spacing-4)",backgroundColor:"var(--color-primary-600)",border:"none",borderRadius:"var(--border-radius-sm)",cursor:u?"not-allowed":"pointer",color:"white",fontWeight:"bold",opacity:u?.7:1},children:u?"Assigning...":"Assign Game"})]}),h.jsxs("div",{style:{backgroundColor:"var(--color-info-50)",borderRadius:"var(--border-radius-sm)",padding:"var(--spacing-2)",marginTop:"var(--spacing-4)",fontSize:"var(--font-size-sm)",color:"var(--color-info-700)",display:"flex",alignItems:"center"},children:[h.jsx("div",{style:{marginRight:"var(--spacing-2)"},children:"ℹ️"}),h.jsx("div",{children:"When you assign a game, the student will receive an email with instructions and a link to access the assignment."})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MJ="firebasestorage.googleapis.com",PJ="storageBucket",v5e=2*60*1e3,y5e=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Pl{constructor(e,n,r=0){super(VP(e),`Firebase Storage: ${n} (${VP(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return VP(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Gi;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Gi||(Gi={}));function VP(t){return"storage/"+t}function dL(){const t="An unknown error occurred, please check the error payload for server response.";return new qi(Gi.UNKNOWN,t)}function x5e(t){return new qi(Gi.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function b5e(t){return new qi(Gi.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function w5e(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new qi(Gi.UNAUTHENTICATED,t)}function S5e(){return new qi(Gi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function _5e(t){return new qi(Gi.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function E5e(){return new qi(Gi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function C5e(){return new qi(Gi.CANCELED,"User canceled the upload/download.")}function A5e(t){return new qi(Gi.INVALID_URL,"Invalid URL '"+t+"'.")}function T5e(t){return new qi(Gi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function M5e(){return new qi(Gi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+PJ+"' property when initializing the app?")}function P5e(){return new qi(Gi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function D5e(){return new qi(Gi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function R5e(t){return new qi(Gi.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function gk(t){return new qi(Gi.INVALID_ARGUMENT,t)}function DJ(){return new qi(Gi.APP_DELETED,"The Firebase app was deleted.")}function I5e(t){return new qi(Gi.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _x(t,e){return new qi(Gi.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function cy(t){throw new qi(Gi.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ta.makeFromUrl(e,n)}catch(i){return new Ta(e,"")}if(r.path==="")return r;throw T5e(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),l={bucket:1,path:3};function c(S){S.path_=decodeURIComponent(S.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${u}/b/${i}/o${f}`,"i"),b={bucket:1,path:3},v=n===MJ?"(?:storage.googleapis.com|storage.cloud.google.com)":n,m="([^?#]*)",g=new RegExp(`^https?://${v}/${i}/${m}`,"i"),w=[{regex:a,indices:l,postModify:o},{regex:p,indices:b,postModify:c},{regex:g,indices:{bucket:1,path:2},postModify:c}];for(let S=0;S<w.length;S++){const P=w[S],I=P.regex.exec(e);if(I){const M=I[P.indices.bucket];let D=I[P.indices.path];D||(D=""),r=new Ta(M,D),P.postModify(r);break}}if(r==null)throw A5e(e);return r}}class k5e{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F5e(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function l(){return a===2}let c=!1;function u(...m){c||(c=!0,e.apply(null,m))}function d(m){i=setTimeout(()=>{i=null,t(p,l())},m)}function f(){o&&clearTimeout(o)}function p(m,...g){if(c){f();return}if(m){f(),u.call(null,m,...g);return}if(l()||s){f(),u.call(null,m,...g);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,d(w)}let b=!1;function v(m){b||(b=!0,f(),!c&&(i!==null?(m||(a=2),clearTimeout(i),d(0)):m||(a=1)))}return d(0),o=setTimeout(()=>{s=!0,v(!0)},n),v}function O5e(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N5e(t){return t!==void 0}function L5e(t){return typeof t=="object"&&!Array.isArray(t)}function fL(t){return typeof t=="string"||t instanceof String}function iV(t){return hL()&&t instanceof Blob}function hL(){return typeof Blob!="undefined"}function oV(t,e,n,r){if(r<e)throw gk(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw gk(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pL(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function RJ(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Pp;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Pp||(Pp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B5e(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5e{constructor(e,n,r,i,o,s,a,l,c,u,d,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,b)=>{this.resolve_=p,this.reject_=b,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new kS(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===Pp.NO_ERROR,l=o.getStatus();if(!a||B5e(l,this.additionalRetryCodes_)&&this.retry){const u=o.getErrorCode()===Pp.ABORT;r(!1,new kS(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new kS(c,o))})},n=(r,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());N5e(l)?o(l):o()}catch(l){s(l)}else if(a!==null){const l=dL();l.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,l)):s(l)}else if(i.canceled){const l=this.appDelete_?DJ():C5e();s(l)}else{const l=E5e();s(l)}};this.canceled_?n(!1,new kS(!1,null,!0)):this.backoffId_=F5e(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&O5e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class kS{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function U5e(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function z5e(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function V5e(t,e){e&&(t["X-Firebase-GMPID"]=e)}function W5e(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function $5e(t,e,n,r,i,o,s=!0){const a=RJ(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return V5e(c,e),U5e(c,n),z5e(c,o),W5e(c,r),new j5e(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H5e(){return typeof BlobBuilder!="undefined"?BlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:void 0}function G5e(...t){const e=H5e();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(hL())return new Blob(t);throw new qi(Gi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function q5e(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K5e(t){if(typeof atob=="undefined")throw R5e("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class WP{constructor(e,n){this.data=e,this.contentType=n||null}}function IJ(t,e){switch(t){case tc.RAW:return new WP(kJ(e));case tc.BASE64:case tc.BASE64URL:return new WP(FJ(t,e));case tc.DATA_URL:return new WP(X5e(e),Q5e(e))}throw dL()}function kJ(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Y5e(t){let e;try{e=decodeURIComponent(t)}catch(n){throw _x(tc.DATA_URL,"Malformed data URL.")}return kJ(e)}function FJ(t,e){switch(t){case tc.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw _x(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case tc.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw _x(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=K5e(e)}catch(i){throw i.message.includes("polyfill")?i:_x(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class OJ{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw _x(tc.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Z5e(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function X5e(t){const e=new OJ(t);return e.base64?FJ(tc.BASE64,e.rest):Y5e(e.rest)}function Q5e(t){return new OJ(t).contentType}function Z5e(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,n){let r=0,i="";iV(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(iV(this.data_)){const r=this.data_,i=q5e(r,e,n);return i===null?null:new Sf(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Sf(r,!0)}}static getBlob(...e){if(hL()){const n=e.map(r=>r instanceof Sf?r.data_:r);return new Sf(G5e.apply(null,n))}else{const n=e.map(s=>fL(s)?IJ(tc.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new Sf(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NJ(t){let e;try{e=JSON.parse(t)}catch(n){return null}return L5e(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5e(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function eBe(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function LJ(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tBe(t,e){return e}class ws{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||tBe}}let FS=null;function nBe(t){return!fL(t)||t.length<2?t:LJ(t)}function BJ(){if(FS)return FS;const t=[];t.push(new ws("bucket")),t.push(new ws("generation")),t.push(new ws("metageneration")),t.push(new ws("name","fullPath",!0));function e(o,s){return nBe(s)}const n=new ws("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}const i=new ws("size");return i.xform=r,t.push(i),t.push(new ws("timeCreated")),t.push(new ws("updated")),t.push(new ws("md5Hash",null,!0)),t.push(new ws("cacheControl",null,!0)),t.push(new ws("contentDisposition",null,!0)),t.push(new ws("contentEncoding",null,!0)),t.push(new ws("contentLanguage",null,!0)),t.push(new ws("contentType",null,!0)),t.push(new ws("metadata","customMetadata",!0)),FS=t,FS}function rBe(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new Ta(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function iBe(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,e[s.server])}return rBe(r,t),r}function jJ(t,e,n){const r=NJ(e);return r===null?null:iBe(t,r,n)}function oBe(t,e,n,r){const i=NJ(e);if(i===null||!fL(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(c=>{const u=t.bucket,d=t.fullPath,f="/b/"+s(u)+"/o/"+s(d),p=pL(f,n,r),b=RJ({alt:"media",token:c});return p+b})[0]}function sBe(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class UJ{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zJ(t){if(!t)throw dL()}function aBe(t,e){function n(r,i){const o=jJ(t,i,e);return zJ(o!==null),o}return n}function lBe(t,e){function n(r,i){const o=jJ(t,i,e);return zJ(o!==null),oBe(o,i,t.host,t._protocol)}return n}function VJ(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=S5e():i=w5e():n.getStatus()===402?i=b5e(t.bucket):n.getStatus()===403?i=_5e(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function cBe(t){const e=VJ(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=x5e(t.path)),o.serverResponse=i.serverResponse,o}return n}function uBe(t,e,n){const r=e.fullServerUrl(),i=pL(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new UJ(i,o,lBe(t,n),s);return a.errorHandler=cBe(e),a}function dBe(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function fBe(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=dBe(null,e)),r}function hBe(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let S=0;S<2;S++)w=w+Math.random().toString().slice(2);return w}const l=a();s["Content-Type"]="multipart/related; boundary="+l;const c=fBe(e,r,i),u=sBe(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",p=Sf.getBlob(d,r,f);if(p===null)throw P5e();const b={name:c.fullPath},v=pL(o,t.host,t._protocol),m="POST",g=t.maxUploadRetryTime,x=new UJ(v,m,aBe(t,n),g);return x.urlParams=b,x.headers=s,x.body=p.uploadData(),x.errorHandler=VJ(e),x}class pBe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Pp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Pp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Pp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw cy("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw cy("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw cy("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw cy("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw cy("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class mBe extends pBe{initXhr(){this.xhr_.responseType="text"}}function WJ(){return new mBe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,n){this._service=e,n instanceof Ta?this._location=n:this._location=Ta.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Qp(e,n)}get root(){const e=new Ta(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return LJ(this._location.path)}get storage(){return this._service}get parent(){const e=J5e(this._location.path);if(e===null)return null;const n=new Ta(this._location.bucket,e);return new Qp(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw I5e(e)}}function gBe(t,e,n){t._throwIfRoot("uploadBytes");const r=hBe(t.storage,t._location,BJ(),new Sf(e,!0),n);return t.storage.makeRequestWithTokens(r,WJ).then(i=>({metadata:i,ref:t}))}function vBe(t,e,n=tc.RAW,r){t._throwIfRoot("uploadString");const i=IJ(n,e),o=Object.assign({},r);return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),gBe(t,i.data,o)}function yBe(t){t._throwIfRoot("getDownloadURL");const e=uBe(t.storage,t._location,BJ());return t.storage.makeRequestWithTokens(e,WJ).then(n=>{if(n===null)throw D5e();return n})}function xBe(t,e){const n=eBe(t._location.path,e),r=new Ta(t._location.bucket,n);return new Qp(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bBe(t){return/^[A-Za-z]+:\/\//.test(t)}function wBe(t,e){return new Qp(t,e)}function $J(t,e){if(t instanceof mL){const n=t;if(n._bucket==null)throw M5e();const r=new Qp(n,n._bucket);return e!=null?$J(r,e):r}else return e!==void 0?xBe(t,e):t}function SBe(t,e){if(e&&bBe(e)){if(t instanceof mL)return wBe(t,e);throw gk("To use ref(service, url), the first argument must be a Storage instance.")}else return $J(t,e)}function sV(t,e){const n=e==null?void 0:e[PJ];return n==null?null:Ta.makeFromBucketSpec(n,t)}function _Be(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:tQ(i,t.app.options.projectId))}class mL{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=MJ,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=v5e,this._maxUploadRetryTime=y5e,this._requests=new Set,i!=null?this._bucket=Ta.makeFromBucketSpec(i,this._host):this._bucket=sV(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ta.makeFromBucketSpec(this._url,e):this._bucket=sV(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){oV("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){oV("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return te(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return te(this,null,function*(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qp(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new k5e(DJ());{const s=$5e(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,n){return te(this,null,function*(){const[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}}const aV="@firebase/storage",lV="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HJ="storage";function EBe(t,e,n,r){return t=Sr(t),vBe(t,e,n,r)}function CBe(t){return t=Sr(t),yBe(t)}function ABe(t,e){return t=Sr(t),SBe(t,e)}function TBe(t=Aw(),e){t=Sr(t);const r=Dd(t,HJ).getImmediate({identifier:e}),i=l3("storage");return i&&MBe(r,...i),r}function MBe(t,e,n,r={}){_Be(t,e,n,r)}function PBe(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new mL(n,r,i,e,hm)}function DBe(){El(new Na(HJ,PBe,"PUBLIC").setMultipleInstances(!0)),ds(aV,lV,""),ds(aV,lV,"esm2017")}DBe();function RBe(t){const e=document.createElement("canvas"),n=e.getContext("2d");if(e.width=300,e.height=200,!n)return GBe(t.type);const r={"sort-categories-egg":"#e1c3ff","whack-a-mole":"#b8ffcc","spinner-wheel":"#ffe1b3",anagram:"#b3d4ff","place-value-showdown":"#ffe6e6"};return n.fillStyle=r[t.type]||"#f0f0f0",n.fillRect(0,0,e.width,e.height),t.type==="sort-categories-egg"?kBe(n,t,e.width,e.height):t.type==="whack-a-mole"?FBe(n,t,e.width,e.height):t.type==="spinner-wheel"?NBe(n,t,e.width,e.height):t.type==="anagram"?OBe(n,t,e.width,e.height):t.type==="place-value-showdown"&&LBe(n,t,e.width,e.height),n.fillStyle="#333333",n.font="bold 20px Arial",n.textAlign="center",n.fillText($v(t.title,20),e.width/2,30),e.toDataURL("image/png")}function IBe(t,e,n){return te(this,null,function*(){try{const r=TBe(),i=`thumbnails/${n}/${e}.png`,o=ABe(r,i);return yield EBe(o,t,"data_url"),yield CBe(o)}catch(r){return console.error("Error uploading thumbnail:",r),""}})}function kBe(t,e,n,r){BBe(t,n,r),e.categories&&e.categories.length>0&&UBe(t,e.categories,n,r)}function FBe(t,e,n,r){if(jBe(t,n,r),e.wordCategories&&e.wordCategories.length>0){const i=e.wordCategories.flatMap(o=>o.words).slice(0,8);zBe(t,i,n,r)}}function OBe(t,e,n,r){VBe(t,n,r),e.anagrams&&e.anagrams.length>0&&WBe(t,e.anagrams,n,r)}function NBe(t,e,n,r){var u;const i=n*.5,o=r*.6,s=60,a=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFD93D","#DDA0DD"],l=((u=e.spinnerItems)==null?void 0:u.length)||6,c=2*Math.PI/l;for(let d=0;d<l;d++){const f=d*c,p=(d+1)*c;t.beginPath(),t.moveTo(i,o),t.arc(i,o,s,f,p),t.closePath(),t.fillStyle=a[d%a.length],t.fill(),t.strokeStyle="#fff",t.lineWidth=2,t.stroke()}if(t.beginPath(),t.arc(i,o,8,0,2*Math.PI),t.fillStyle="#333",t.fill(),t.beginPath(),t.moveTo(i,o-s-20),t.lineTo(i-8,o-s-5),t.lineTo(i+8,o-s-5),t.closePath(),t.fillStyle="#333",t.fill(),e.spinnerItems&&e.spinnerItems.length>0){const d=e.spinnerItems.slice(0,4);t.fillStyle="#555555",t.font="12px Arial",t.textAlign="center",d.forEach((f,p)=>{const b=p*c+c/2,v=s*.7,m=i+v*Math.cos(b),g=o+v*Math.sin(b);t.fillText($v(f.text,6),m,g)})}}function LBe(t,e,n,r){var d,f;const a=((d=e.placeValueConfig)==null?void 0:d.numberOfCards)||3,l=(n-a*35)/2;for(let p=0;p<a;p++){const b=l+p*35,v=r*.4;t.fillStyle="#ffffff",t.strokeStyle="#333333",t.lineWidth=2,t.fillRect(b,v,30,40),t.strokeRect(b,v,30,40),t.fillStyle="#333333",t.font="bold 20px Arial",t.textAlign="center";const m=Math.floor(Math.random()*10);t.fillText(m.toString(),b+30/2,v+40/2+6)}t.fillStyle="#ff6b6b",t.font="bold 16px Arial",t.textAlign="center",t.fillText("VS",n*.5,r*.7);const c=((f=e.placeValueConfig)==null?void 0:f.objective)||"largest";t.fillStyle="#666666",t.font="12px Arial",t.fillText(`Create ${c} number`,n*.5,r*.8),t.fillStyle="#ffd700",t.font="24px Arial",t.fillText("🏆",n*.5,r*.25),t.fillStyle="#888888",t.font="10px Arial";const u=a===2?["10s","1s"]:a===3?["100s","10s","1s"]:a===4?["1000s","100s","10s","1s"]:["10000s","1000s","100s","10s","1s"];for(let p=0;p<a;p++){const b=l+p*35,v=r*.4;t.fillText(u[p],b+30/2,v-5)}}function BBe(t,e,n){[{x:e*.2,y:n*.5},{x:e*.5,y:n*.4},{x:e*.8,y:n*.6}].forEach(i=>{t.fillStyle="#ffffff",t.strokeStyle="#dddddd",t.lineWidth=2,t.beginPath(),t.ellipse(i.x,i.y,30,40,0,0,2*Math.PI),t.fill(),t.stroke(),i.x===e*.5&&(t.strokeStyle="#888888",t.beginPath(),t.moveTo(i.x-15,i.y-20),t.lineTo(i.x+5,i.y),t.lineTo(i.x-5,i.y+10),t.stroke())})}function jBe(t,e,n){const r=e*.5,i=n*.6;t.fillStyle="#654321",t.beginPath(),t.ellipse(r,i+10,40,20,0,0,2*Math.PI),t.fill(),t.fillStyle="#8B4513",t.beginPath(),t.arc(r,i-20,30,0,Math.PI,!1),t.fill(),t.fillStyle="#FFFFFF",t.beginPath(),t.arc(r-10,i-30,5,0,2*Math.PI),t.arc(r+10,i-30,5,0,2*Math.PI),t.fill(),t.fillStyle="#A0522D",t.fillRect(e*.7,n*.3,10,50),t.fillStyle="#708090",t.fillRect(e*.65,n*.2,20,30)}function UBe(t,e,n,r){const i=e.slice(0,3);t.fillStyle="#555555",t.font="14px Arial",t.textAlign="center",i.forEach((o,s)=>{const a=n*.25,l=30,c=30+s*(a+20),u=r*.8;t.fillStyle="rgba(255, 255, 255, 0.7)",t.fillRect(c,u,a,l),t.fillStyle="#333333",t.fillText($v(o.name,10),c+a/2,u+20)}),e.length>3&&(t.fillStyle="#555555",t.textAlign="center",t.fillText(`+${e.length-3} more`,n*.8,r*.85))}function zBe(t,e,n,r){const i=e.slice(0,8);t.font="12px Arial",t.textAlign="center",i.forEach((o,s)=>{const a=Math.floor(s/4),l=s%4,c=n*.2+l*n*.2,u=r*.4+a*30,d=s*40%360;t.fillStyle=`hsla(${d}, 70%, 40%, 0.8)`,t.fillText($v(o,8),c,u)}),e.length>8&&(t.fillStyle="#555555",t.fillText(`+${e.length-8} more words`,n*.5,r*.9))}function VBe(t,e,n){[{x:e*.3,y:n*.5,rotation:0},{x:e*.7,y:n*.4,rotation:Math.PI/6},{x:e*.5,y:n*.6,rotation:-Math.PI/4}].forEach(i=>{t.save(),t.translate(i.x,i.y),t.rotate(i.rotation),t.fillStyle="#ffffff",t.strokeStyle="#cccccc",t.lineWidth=2,t.beginPath(),t.roundRect(-20,-15,40,30,5),t.fill(),t.stroke(),t.fillStyle="#e0e0e0",t.beginPath(),t.arc(20,0,8,0,2*Math.PI),t.fill(),t.restore()}),t.strokeStyle="#aaaaaa",t.lineWidth=1,t.setLineDash([5,5]),t.beginPath(),t.moveTo(e*.3,n*.5),t.lineTo(e*.7,n*.4),t.stroke(),t.setLineDash([])}function WBe(t,e,n,r){const i=e.slice(0,3);t.font="14px Arial",t.textAlign="center",i.forEach((o,s)=>{const a=n*.2+s*n*.3,l=r*.8,c=o.type==="word"?$Be(o.original):HBe(o.original);t.fillStyle="#666666",t.fillText($v(c,8),a,l),t.fillStyle="#888888",t.fillText("↓",a,l+15),t.fillStyle="#333333",t.fillText($v(o.original,8),a,l+30)}),e.length>3&&(t.fillStyle="#555555",t.fillText(`+${e.length-3} more`,n*.85,r*.85))}function $Be(t){const e=t.split("");for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e.join("")}function HBe(t){const e=t.split(" ");for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e.join(" ")}function $v(t,e){return t?t.length<=e?t:t.substring(0,e-3)+"...":""}function GBe(t){const e={"sort-categories-egg":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+P+/HgAFdwI2QM1kHwAAAABJRU5ErkJggg==","whack-a-mole":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+P+/HgAFdwI2QM1kHwAAAABJRU5ErkJggg==","spinner-wheel":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+P+/HgAFdwI2QM1kHwAAAABJRU5ErkJggg==",anagram:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+P+/HgAFdwI2QM1kHwAAAABJRU5ErkJggg==","place-value-showdown":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+P+/HgAFdwI2QM1kHwAAAABJRU5ErkJggg=="};return e[t]||e["sort-categories-egg"]}function gL(t,e){return te(this,null,function*(){try{const n={type:e.type,title:e.title||"Game"};n.type==="sort-categories-egg"&&e.categories?n.categories=e.categories:n.type==="whack-a-mole"&&e.categories?n.wordCategories=e.categories:n.type==="spinner-wheel"&&e.items?n.spinnerItems=e.items:n.type==="anagram"&&e.anagrams?n.anagrams=e.anagrams:n.type==="place-value-showdown"&&(n.placeValueConfig={numberOfCards:e.numberOfCards||3,objective:e.objective||"largest",winningScore:e.winningScore||5});const r=RBe(n);return yield IBe(r,t,n.type)}catch(n){return console.error("Error generating thumbnail:",n),""}})}function qBe(){return te(this,null,function*(){try{const t=yield Xn(Tn(bt,"userGameConfigs"));let e=0,n=0;const r=t.docs.map(i=>te(this,null,function*(){const o=i.data(),s=i.id;try{const a=yield gL(s,o);a?(yield Os(an(bt,"userGameConfigs",s),{thumbnail:a}),console.log(`Successfully regenerated thumbnail for game: ${s}`),e++):(console.error(`Failed to generate thumbnail for game: ${s}`),n++)}catch(a){console.error(`Error regenerating thumbnail for game ${s}:`,a),n++}}));return yield Promise.all(r),{success:e,failed:n}}catch(t){throw console.error("Error in regenerateAllThumbnails:",t),t}})}function KBe(t){return te(this,null,function*(){try{const e=an(bt,"userGameConfigs",t),n=yield si(e);if(!n.exists())return console.error(`Game with ID ${t} not found`),!1;const r=n.data(),i=yield gL(t,r);return i?(yield Os(an(bt,"userGameConfigs",t),{thumbnail:i}),console.log(`Successfully regenerated thumbnail for game: ${t}`),!0):(console.error(`Failed to generate thumbnail for game: ${t}`),!1)}catch(e){return console.error(`Error regenerating thumbnail for game ${t}:`,e),!1}})}function YBe(t){const e={"sort-categories-egg":"#f0e6ff","whack-a-mole":"#e6fff0",default:"var(--color-primary-100)"};return e[t]||e.default}function XBe(t){switch(t){case"sort-categories-egg":return"🥚";case"whack-a-mole":return"🔨";default:return""}}const $P=({title:t,type:e,thumbnail:n,id:r,isPlayable:i,onClick:o,isOwner:s,onDelete:a})=>{const{isTeacher:l,currentUser:c}=Dr(),[u,d]=T.useState(!1),[f,p]=T.useState(!1),[b,v]=T.useState(!1);T.useEffect(()=>{te(nt,null,function*(){if(!c){p(!1);return}try{const _=an(bt,"users",c.uid),A=yield si(_);A.exists()&&A.data().role==="admin"?p(!0):p(!1)}catch(_){console.error("Error checking admin status:",_),p(!1)}})},[c]);const m=XBe(e)||t.charAt(0),g=YBe(e),x=E=>te(nt,null,function*(){if(E.preventDefault(),E.stopPropagation(),!!r){v(!0);try{if(yield KBe(r)){const A=document.querySelector(`[data-game-id="${r}"] .game-thumbnail`);A&&(A.classList.add("thumbnail-regenerated"),setTimeout(()=>{A.classList.remove("thumbnail-regenerated")},2e3)),window.location.reload()}else console.error("Failed to regenerate thumbnail")}catch(_){console.error("Error regenerating thumbnail:",_)}finally{v(!1)}}}),w=()=>h.jsx("div",{className:"game-thumbnail",style:{width:"60px",height:"60px",backgroundColor:g,borderRadius:"var(--border-radius-md)",marginRight:"var(--spacing-3)",overflow:"hidden",flexShrink:0,position:"relative"},children:n?h.jsx("img",{src:n,alt:t,style:{width:"100%",height:"100%",objectFit:"cover"}}):h.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--color-primary-700)",fontSize:"var(--font-size-xl)"},children:m})}),S=()=>h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"var(--spacing-1)",flex:1},children:[h.jsx("h3",{style:{fontSize:"var(--font-size-md)",color:"var(--color-gray-800)",margin:0},children:t}),h.jsxs("span",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-gray-600)"},children:["Type: ",e]})]}),P={display:"flex",alignItems:"center",padding:"var(--spacing-3)",backgroundColor:"white",borderRadius:"var(--border-radius-md)",margin:"var(--spacing-2) 0",border:"1px solid var(--color-gray-200)",cursor:i||o?"pointer":"default",transition:"all 0.2s ease-in-out",textDecoration:"none",color:"inherit",boxShadow:"0 1px 3px rgba(0,0,0,0.05)"},I=()=>s&&a&&h.jsx("button",{onClick:E=>{E.preventDefault(),E.stopPropagation(),a()},style:{position:"absolute",top:"50%",right:"16px",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--color-gray-500)",padding:"var(--spacing-1)",borderRadius:"var(--border-radius-sm)",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},"aria-label":"Delete",title:"Delete",children:h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z",fill:"currentColor"})})}),M=()=>!l||!r?null:h.jsx("button",{onClick:E=>{E.preventDefault(),E.stopPropagation(),d(!0)},style:{position:"absolute",top:"50%",right:s?"48px":"16px",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--color-primary-600)",padding:"var(--spacing-1)",borderRadius:"var(--border-radius-sm)",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},"aria-label":"Assign",title:"Assign to Student",children:h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM7 10H9V17H7V10ZM11 7H13V17H11V7ZM15 13H17V17H15V13Z",fill:"currentColor"})})}),D=()=>!f||!r?null:h.jsx("button",{onClick:x,disabled:b,style:{position:"absolute",top:"50%",right:s?"80px":l?"48px":"16px",transform:"translateY(-50%)",background:"none",border:"none",cursor:b?"default":"pointer",color:b?"var(--color-gray-400)":"var(--color-blue-600)",padding:"var(--spacing-1)",borderRadius:"var(--border-radius-sm)",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},"aria-label":"Regenerate thumbnail",title:"Regenerate thumbnail",children:b?h.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"loading-spinner",children:[h.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z",fill:"currentColor"}),h.jsx("path",{d:"M12 2V4C16.41 4 20 7.59 20 12H22C22 6.48 17.52 2 12 2Z",fill:"currentColor"})]}):h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4C7.58 4 4.01 7.58 4.01 12C4.01 16.42 7.58 20 12 20C15.73 20 18.84 17.45 19.73 14H17.65C16.83 16.33 14.61 18 12 18C8.69 18 6 15.31 6 12C6 8.69 8.69 6 12 6C13.66 6 15.14 6.69 16.22 7.78L13 11H20V4L17.65 6.35Z",fill:"currentColor"})})});return o?h.jsxs("div",{style:{position:"relative"},"data-game-id":r,children:[h.jsxs("div",{style:P,onClick:o,onMouseOver:E=>{E.currentTarget.style.boxShadow="0 2px 5px rgba(0,0,0,0.1)"},onMouseOut:E=>{E.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.05)"},children:[w(),S()]}),I(),M(),D(),u&&h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"var(--spacing-4)"},children:h.jsx(zP,{game:{id:r||"",title:t,type:e,thumbnail:n},onSuccess:()=>d(!1),onCancel:()=>d(!1)})})]}):i&&r?h.jsxs("div",{style:{position:"relative"},"data-game-id":r,children:[h.jsxs(Hu,{to:`/game/${r}`,style:P,onMouseOver:E=>{E.currentTarget.style.boxShadow="0 2px 5px rgba(0,0,0,0.1)"},onMouseOut:E=>{E.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.05)"},children:[w(),S()]}),I(),M(),D(),u&&h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"var(--spacing-4)"},children:h.jsx(zP,{game:{id:r||"",title:t,type:e,thumbnail:n},onSuccess:()=>d(!1),onCancel:()=>d(!1)})})]}):h.jsxs("div",{style:{position:"relative"},"data-game-id":r,children:[h.jsxs("div",{style:P,children:[w(),S()]}),I(),M(),D(),u&&h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"var(--spacing-4)"},children:h.jsx(zP,{game:{id:r||"",title:t,type:e,thumbnail:n},onSuccess:()=>d(!1),onCancel:()=>d(!1)})})]})},HP=({onSearch:t})=>h.jsx("div",{style:{marginBottom:"var(--spacing-4)",position:"relative"},children:h.jsx("input",{type:"text",placeholder:"Search...",onChange:e=>t(e.target.value),style:{width:"100%",padding:"var(--spacing-2) var(--spacing-3)",borderRadius:"var(--border-radius-md)",border:"1px solid var(--color-gray-200)",fontSize:"var(--font-size-md)",outline:"none"}})}),QBe=()=>{const[t,e]=T.useState([]),[n,r]=T.useState(""),[i,o]=T.useState(""),[s,a]=T.useState(""),[l,c]=T.useState(!0),u=Pr(),{currentUser:d,isTeacher:f,isStudent:p}=Dr(),b=co(),[v,m]=T.useState([]),[g,x]=T.useState([]),[w,S]=T.useState(!1),[P,I]=T.useState(null);T.useEffect(()=>{p&&d&&u("/student")},[p,d,u]),T.useEffect(()=>{f&&d&&u("/teacher")},[f,d,u]);const M=(N,U,$)=>{I({id:N,type:U,title:$}),S(!0)},D=()=>te(nt,null,function*(){if(!(!P||!d))try{if(c(!0),P.type==="template"){yield tu(an(bt,"categoryTemplates",P.id));const N=mr(Tn(bt,"userGameConfigs"),Bn("userId","==",d.uid),Bn("title","==",P.title)),$=(yield Xn(N)).docs.map(B=>tu(B.ref));yield Promise.all($),m(B=>B.filter(H=>H.id!==P.id)),e(B=>B.filter(H=>!(H.userId===d.uid&&H.title===P.title))),b({title:"Deleted Successfully",description:`Deleted template "${P.title}" and its associated games`,status:"success",duration:3e3})}else P.type==="game"&&(yield tu(an(bt,"userGameConfigs",P.id)),e(N=>N.filter(U=>U.id!==P.id)),b({title:"Deleted Successfully",description:`Deleted game "${P.title}"`,status:"success",duration:3e3}))}catch(N){console.error("Error deleting:",N),b({title:"Error",description:"Failed to delete. Please try again.",status:"error",duration:5e3})}finally{c(!1),S(!1),I(null)}}),E=()=>h.jsxs($c,{isOpen:w,onClose:()=>S(!1),children:[h.jsx(qc,{}),h.jsxs(Hc,{children:[h.jsx(Gc,{children:"Confirm Deletion"}),h.jsx(Yc,{}),h.jsx(Kc,{children:(P==null?void 0:P.type)==="template"?h.jsxs("p",{children:['Are you sure you want to delete the template "',P==null?void 0:P.title,'"? This will also delete any associated games with the same title.']}):h.jsxs("p",{children:['Are you sure you want to delete the game "',P==null?void 0:P.title,'"?']})}),h.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",padding:"1rem"},children:[h.jsx(pn,{onClick:()=>S(!1),style:{marginRight:"0.5rem"},children:"Cancel"}),h.jsx(pn,{colorScheme:"red",onClick:D,isLoading:l,children:"Delete"})]})]})]});T.useEffect(()=>{te(nt,null,function*(){try{c(!0),console.log("Starting fetchGames function");const U=[d?te(nt,null,function*(){console.log("Attempting to fetch current user's games");try{const G=mr(Tn(bt,"userGameConfigs"),Bn("userId","==",d.uid));console.log("User games query:",G);const K=yield Xn(G);return console.log(`Successfully fetched ${K.docs.length} user games`),K}catch(G){return console.error("Error fetching user's games:",G),{docs:[]}}}):Promise.resolve({docs:[]}),te(nt,null,function*(){console.log("Attempting to fetch public games with share=true");try{const G=mr(Tn(bt,"userGameConfigs"),Bn("share","==",!0));console.log("Public games query:",G);const K=yield Xn(G);return console.log(`Successfully fetched ${K.docs.length} public games`),K}catch(G){throw console.error("Error fetching public games:",G),G}})];f&&(console.log("User is teacher, attempting to fetch templates"),U.push(te(nt,null,function*(){console.log("Attempting to fetch sort-categories-egg templates");try{const G=yield Xn(mr(Tn(bt,"categoryTemplates"),Bn("type","==","sort-categories-egg")));return console.log(`Successfully fetched ${G.docs.length} sort-categories-egg templates`),G}catch(G){return console.error("Error fetching sort-categories-egg templates:",G),{docs:[]}}}),te(nt,null,function*(){console.log("Attempting to fetch whack-a-mole templates");try{const G=yield Xn(mr(Tn(bt,"categoryTemplates"),Bn("type","==","whack-a-mole")));return console.log(`Successfully fetched ${G.docs.length} whack-a-mole templates`),G}catch(G){return console.error("Error fetching whack-a-mole templates:",G),{docs:[]}}}),te(nt,null,function*(){console.log("Attempting to fetch blank templates");try{const G=yield Xn(Tn(bt,"blankGameTemplates"));return console.log(`Successfully fetched ${G.docs.length} blank templates`),G}catch(G){return console.error("Error fetching blank templates:",G),{docs:[]}}}))),console.log("Executing all promises");const $=yield Promise.all(U);console.log("All promises resolved successfully");const B=$[0],H=$[1],q=B.docs.map(G=>({id:G.id,title:G.data().title||"Untitled Game",type:G.data().type||"sort-categories-egg",thumbnail:G.data().thumbnail||void 0,userId:G.data().userId||void 0,share:G.data().share||!1})),z=H.docs.filter(G=>!d||G.data().userId!==d.uid).map(G=>({id:G.id,title:G.data().title||"Untitled Game",type:G.data().type||"sort-categories-egg",thumbnail:G.data().thumbnail||void 0,userId:G.data().userId||void 0,share:G.data().share||!1}));if(e([...q,...z]),console.log(`Set publicGames with ${q.length} user games and ${z.length} other games`),f&&U.length>2){const G=$[2],K=$[3],Z=$[4],ee=G.docs.map(oe=>({id:oe.id,title:oe.data().title||"Untitled Template",type:oe.data().type||"sort-categories-egg",thumbnail:oe.data().thumbnail,userId:oe.data().userId,categories:oe.data().categories||[],eggQty:oe.data().eggQty||6,share:oe.data().share||!1})),V=K.docs.map(oe=>({id:oe.id,title:oe.data().title||"Untitled Template",type:oe.data().type||"whack-a-mole",thumbnail:oe.data().thumbnail,userId:oe.data().userId,words:oe.data().words||[],share:oe.data().share||!1}));m([...ee,...V]);const J=Z.docs.map(oe=>{const ne=oe.data();console.log("🔍 Processing blank template:",{id:oe.id,title:ne.title,originalType:ne.type,allData:ne});let pe=ne.type||"sort-categories-egg";["whack-a-mole","sort-categories-egg","spinner-wheel","anagram","sentence-sense","place-value-showdown","word-volley"].includes(pe)||(console.warn("🚨 Unsupported blank template type:",pe,"for template:",oe.id),pe="sort-categories-egg");const Ce={id:oe.id,title:ne.title||"Untitled Template",type:pe,thumbnail:ne.thumbnail,categories:ne.categories||[],eggQty:ne.eggQty||6,share:ne.share||!1};return console.log("🔍 Processed blank template:",Ce),Ce});console.log("🔍 All processed blank templates:",J),console.log("🔍 Setting blankTemplates state with:",J.length,"templates"),x(J)}else m([]),x([])}catch(U){console.error("Error fetching games:",U),U.code&&console.error(`Firebase error code: ${U.code}`),U.message&&console.error(`Error message: ${U.message}`),b({title:"Error",description:"Could not load games and templates.",status:"error",duration:5e3})}finally{c(!1),console.log("Finished fetchGames function")}})},[b,d,f]);const _=t.filter(N=>d&&N.userId===d.uid&&N.title.toLowerCase().includes(n.toLowerCase())),A=t.filter(N=>(!d||N.userId!==d.uid)&&N.share===!0&&N.title.toLowerCase().includes(n.toLowerCase()));v.filter(N=>d&&N.userId===d.uid&&N.title.toLowerCase().includes(i.toLowerCase())),v.filter(N=>!d||N.userId!==d.uid&&N.title.toLowerCase().includes(i.toLowerCase())),g.filter(N=>N.title.toLowerCase().includes(s.toLowerCase()));const R=(N,U=!1)=>{if(console.log("🔍 handleTemplateClick called with:",{template:N,isBlankTemplate:U,templateId:N==null?void 0:N.id,templateType:N==null?void 0:N.type,templateTitle:N==null?void 0:N.title}),!d){b({title:"Authentication Required",description:"Please sign in to access templates.",status:"error",duration:5e3});return}const $=N.type;console.log("🔍 Template type:",$);const B=["whack-a-mole","sort-categories-egg","spinner-wheel","anagram","sentence-sense","place-value-showdown","word-volley"];if(console.log("🔍 Supported game types:",B),console.log("🔍 Is templateType supported?",B.includes($)),B.includes($))if(N.id){const H=`/configure/${$}/${N.id}`;console.log("🔍 Navigating to:",H),u(H)}else{const H=`/configure/${$}`;console.log("🔍 Navigating to (no ID):",H),u(H)}else{const H="sort-categories-egg";console.warn(`🚨 Unsupported template type: ${$}, falling back to ${H}`),console.log("🔍 Template object causing fallback:",N),u(`/configure/${H}`)}},F=(N,U,$)=>N.length>0?h.jsx("div",{children:N.map(B=>h.jsx($P,{id:B.id,title:B.title,type:B.type,thumbnail:B.thumbnail,isPlayable:!0,isOwner:U,onDelete:()=>$(B.id,"game",B.title)},B.id))}):h.jsx("div",{style:{textAlign:"center",padding:"var(--spacing-4)",color:"var(--color-gray-500)"},children:"No games found"}),L=(N,U,$,B)=>(console.log("🔍 renderTemplatesList called with:",{templatesCount:N.length,isOwner:U,hasOnTemplateClick:!!$,hasDeleteHandler:!!B,templates:N.map(H=>({id:H.id,title:H.title,type:H.type}))}),N.length>0?h.jsx("div",{children:N.map(H=>(console.log("🔍 Rendering GameItemDisplay for template:",{id:H.id,title:H.title,type:H.type,hasClickHandler:!!$}),h.jsx($P,{title:H.title,type:H.type,thumbnail:H.thumbnail,isPlayable:!1,onClick:()=>{console.log("🔍 GameItemDisplay onClick triggered for:",H.title,H.type),$(H)},isOwner:U,onDelete:B?()=>B(H.id,"template",H.title):void 0},H.id)))}):h.jsx("div",{style:{textAlign:"center",padding:"var(--spacing-4)",color:"var(--color-gray-500)"},children:"No templates found"}));return h.jsxs("div",{style:{width:"100vw",overflow:"hidden"},children:[h.jsx("div",{style:{backgroundColor:"var(--color-primary-500)",color:"white",padding:"var(--spacing-20) 0",width:"100%"},children:h.jsx("div",{style:{width:"100%",margin:"0 auto",padding:"0 var(--spacing-4)"},children:h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"var(--spacing-6)",alignItems:"center",width:"100%"},children:[h.jsx("h1",{style:{fontSize:"var(--font-size-5xl)",fontWeight:"bold"},children:"LuminateLearn"}),h.jsx("p",{style:{fontSize:"var(--font-size-xl)"},children:"Create Efficiently. Spark Curiosity. Shape Minds."})]})})}),h.jsx("div",{style:{padding:"var(--spacing-16) var(--spacing-4)",backgroundColor:"var(--color-gray-50)",width:"100%"},children:p&&d||f&&d?h.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",textAlign:"center",padding:"var(--spacing-8)",backgroundColor:"white",borderRadius:"var(--border-radius-lg)",boxShadow:"var(--shadow-md)"},children:[h.jsx("div",{style:{fontSize:"var(--font-size-2xl)",marginBottom:"var(--spacing-4)",color:"var(--color-primary-600)"},children:p?"🎓":"👨‍🏫"}),h.jsx("h2",{style:{fontSize:"var(--font-size-xl)",color:"var(--color-gray-800)",marginBottom:"var(--spacing-2)"},children:p?"Redirecting to Your Dashboard":"Redirecting to Create"}),h.jsx("p",{style:{color:"var(--color-gray-600)"},children:p?"Taking you to your personal learning dashboard...":"Taking you to your creation and management dashboard..."})]}):h.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",display:"grid",gridTemplateColumns:f?"repeat(3, 1fr)":"1fr",gap:"var(--spacing-8)",width:"100%"},children:[p&&d&&h.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto 40px auto",textAlign:"center",padding:"var(--spacing-6)",backgroundColor:"linear-gradient(135deg, #4299E1 0%, #3182CE 100%)",background:"linear-gradient(135deg, #4299E1 0%, #3182CE 100%)",borderRadius:"var(--border-radius-lg)",boxShadow:"0 4px 12px rgba(66, 153, 225, 0.3)",color:"white"},children:[h.jsx("div",{style:{fontSize:"2rem",marginBottom:"var(--spacing-4)"},children:"📱"}),h.jsx("h2",{style:{fontSize:"var(--font-size-xl)",marginBottom:"var(--spacing-2)",color:"white"},children:"Ready for the App Experience?"}),h.jsx("p",{style:{marginBottom:"var(--spacing-4)",opacity:.9},children:"Access your assignments and install the LuminateLearn app from your dashboard!"}),h.jsx("a",{href:"/student",style:{display:"inline-block",padding:"12px 24px",backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white",textDecoration:"none",borderRadius:"8px",fontWeight:"bold",border:"1px solid rgba(255, 255, 255, 0.3)",transition:"all 0.2s ease"},onMouseOver:N=>{N.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.3)"},onMouseOut:N=>{N.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.2)"},children:"Go to My Dashboard →"})]}),h.jsxs("div",{style:{padding:"var(--spacing-6)",backgroundColor:"white",borderRadius:"var(--border-radius-lg)",boxShadow:"var(--shadow-md)"},children:[h.jsx("h2",{style:{fontSize:"var(--font-size-2xl)",color:"var(--color-gray-800)",marginBottom:"var(--spacing-4)"},children:"Free Games"}),h.jsx(HP,{onSearch:r}),h.jsx("div",{style:{maxHeight:"600px",overflowY:"auto"},children:l?h.jsx("div",{style:{textAlign:"center",padding:"var(--spacing-4)"},children:"Loading games..."}):h.jsxs(h.Fragment,{children:[d&&_.length>0&&h.jsxs("div",{children:[h.jsx("h3",{style:{fontSize:"var(--font-size-lg)",color:"var(--color-gray-700)",margin:"var(--spacing-4) 0",paddingBottom:"var(--spacing-2)",borderBottom:"1px solid var(--color-gray-200)"},children:"My Games"}),F(_,!0,M)]}),A.length>0&&h.jsxs("div",{children:[d&&_.length>0&&h.jsx("h3",{style:{fontSize:"var(--font-size-lg)",color:"var(--color-gray-700)",margin:"var(--spacing-4) 0",paddingBottom:"var(--spacing-2)",borderBottom:"1px solid var(--color-gray-200)"},children:"Other Public Games"}),F(A,!1,M)]})]})})]}),f&&h.jsxs("div",{style:{padding:"var(--spacing-6)",backgroundColor:"white",borderRadius:"var(--border-radius-lg)",boxShadow:"var(--shadow-md)"},children:[h.jsx("h2",{style:{fontSize:"var(--font-size-2xl)",color:"var(--color-gray-800)",marginBottom:"var(--spacing-4)"},children:"Modifiable Game Templates"}),h.jsx(HP,{onSearch:o}),h.jsx("div",{style:{maxHeight:"600px",overflowY:"auto"},children:l?h.jsx("div",{style:{textAlign:"center",padding:"var(--spacing-4)"},children:"Loading templates..."}):L(v.filter(N=>N.title.toLowerCase().includes(i.toLowerCase())),!1,N=>R(N),M)})]}),f&&h.jsxs("div",{style:{padding:"var(--spacing-6)",backgroundColor:"white",borderRadius:"var(--border-radius-lg)",boxShadow:"var(--shadow-md)"},children:[h.jsx("h2",{style:{fontSize:"var(--font-size-2xl)",color:"var(--color-gray-800)",marginBottom:"var(--spacing-4)"},children:"Blank Game Templates"}),h.jsx(HP,{onSearch:a}),h.jsx("div",{style:{maxHeight:"600px",overflowY:"auto"},children:l?h.jsx("div",{style:{textAlign:"center",padding:"var(--spacing-4)"},children:"Loading templates..."}):h.jsxs(h.Fragment,{children:[h.jsx($P,{title:"Sentence Sense - Word Arrangement",type:"sentence-sense",isPlayable:!1,onClick:()=>{console.log("🔍 Clicking hard-coded Sentence Sense template"),u("/configure/sentence-sense")}}),(()=>{const N=g.filter(U=>U.title.toLowerCase().includes(s.toLowerCase()));return console.log("🔍 Filtered blank templates for rendering:",{totalBlankTemplates:g.length,filteredCount:N.length,searchTerm:s,filteredTemplates:N}),L(N,!1,U=>(console.log("🔍 Template click handler created for:",U.title,U.type),R(U,!0)))})()]})})]})]})}),h.jsx(E,{})]})},vk=DC();function ZBe(t){return te(this,null,function*(){const e=new ul,n={prompt:"select_account"};t&&t.trim()&&(n.login_hint=t.toLowerCase().trim(),console.log("[Google Sign-In] Using login hint:",n.login_hint)),e.setCustomParameters(n);try{console.log("[Google Sign-In] Starting with account selection...");try{const r=new Promise((o,s)=>{setTimeout(()=>{s(new Error("auth/popup-timeout"))},8e3)}),i=yield Promise.race([PC(vk,e),r]);if(console.log("[Google Sign-In] ✅ Popup Success:",i.user.email),t&&t.trim()&&i.user.email!==t.toLowerCase().trim()){console.warn("[Google Sign-In] ⚠️ Account mismatch detected"),console.warn(`   Expected: ${t.toLowerCase().trim()}`),console.warn(`   Received: ${i.user.email}`);const o=new Error(`Account mismatch: You signed in with ${i.user.email}, but this login is for ${t}. Please try again and select the correct account.`);throw o.code="auth/account-mismatch",o}return i}catch(r){if(console.log("[Google Sign-In] Popup failed or timed out, trying redirect...",r.message||r.code),r.code==="auth/popup-blocked"||r.code==="auth/popup-closed-by-user"||r.code==="auth/cancelled-popup-request"||r.message==="auth/popup-timeout")return console.log("[Google Sign-In] Using redirect method..."),yield ZQ(vk,e),null;throw r}}catch(r){throw console.error("[Google Sign-In] ❌ Error:",r.code,r.message),r.code==="auth/popup-closed-by-user"?new Error("Sign-in was cancelled. Please try again."):r.code==="auth/popup-blocked"?new Error("Popup was blocked by your browser. Please allow popups for this site and try again."):(r.code==="auth/account-mismatch",r)}})}function JBe(){return te(this,null,function*(){try{const t=yield JQ(vk);return t?(console.log("[Google Sign-In] ✅ Redirect Success:",t.user.email),t):null}catch(t){throw console.error("[Google Sign-In] ❌ Redirect Error:",t.code,t.message),t}})}const e4e="6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI",cV={maxWidth:"400px",margin:"0 auto",padding:"2rem",backgroundColor:"white",borderRadius:"var(--border-radius-lg)",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},t4e={display:"flex",flexDirection:"column",gap:"1rem"},uV={padding:"0.75rem",borderRadius:"var(--border-radius-md)",border:"1px solid var(--color-gray-300)",fontSize:"1rem"},GJ={padding:"0.75rem",borderRadius:"var(--border-radius-md)",backgroundColor:"var(--color-primary-500)",color:"white",border:"none",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",transition:"background-color 0.2s"},n4e=se(j({},GJ),{backgroundColor:"#4285F4",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"}),r4e={color:"var(--color-error)",fontSize:"0.875rem",marginTop:"0.25rem"},dV={marginTop:"1rem",textAlign:"center",fontSize:"0.875rem",color:"var(--color-gray-600)"},GP={color:"var(--color-primary-500)",textDecoration:"none",fontWeight:"bold"},i4e=()=>new Promise(t=>{if(window.grecaptcha){console.log("reCAPTCHA already loaded"),t();return}console.log("Loading reCAPTCHA script dynamically"),window.onRecaptchaLoaded=()=>{console.log("reCAPTCHA script loaded successfully"),t()};const e=document.createElement("script");e.src="https://www.google.com/recaptcha/api.js?onload=onRecaptchaLoaded&render=explicit",e.async=!0,e.defer=!0,document.head.appendChild(e)}),o4e=()=>{const[t,e]=T.useState(""),[n,r]=T.useState(""),[i,o]=T.useState(""),[s,a]=T.useState(!1),[l,c]=T.useState("login"),[u,d]=T.useState(!1),[f,p]=T.useState(!1),[b,v]=T.useState(!1),[m,g]=T.useState(!1),x=T.useRef(null),w=T.useRef(null),{login:S,signup:P,loginWithGoogle:I,isTeacher:M,isStudent:D,currentUser:E}=Dr(),_=Pr(),[A]=dh(),R=A.get("assignmentId"),F=A.get("email"),L=A.get("temp")==="true",N=Z=>te(nt,null,function*(){if(!Z||!Z.includes("@")){g(!1);return}try{const ee=Tn(bt,"users"),V=mr(ee,Bn("email","==",Z.toLowerCase())),J=yield Xn(V);if(J.empty)g(!1);else{const ne=J.docs[0].data().hasTemporaryPassword===!0;g(ne)}}catch(ee){console.error("Error checking temporary password:",ee),g(!1)}});T.useEffect(()=>{if(t&&l==="login"){const Z=setTimeout(()=>{N(t)},500);return()=>clearTimeout(Z)}else g(!1)},[t,l]),T.useEffect(()=>{F&&l==="login"&&(e(F),L&&N(F))},[F,L,l]),T.useEffect(()=>{te(nt,null,function*(){try{const ee=yield JBe();if(ee){if(console.log("✅ Google Sign-In redirect success:",ee.user.email),t&&t.trim()&&ee.user.email!==t.toLowerCase().trim()){o(`Account mismatch: You signed in with ${ee.user.email}, but this login is for ${t}. Please try again and select the correct account.`);return}B(!0)}}catch(ee){console.error("❌ Google Sign-In redirect failed:",ee),ee.message?o(ee.message):o("Google Sign-In failed. Please try again.")}})},[t]);const U=()=>D?"/student":M?"/teacher":"/",[$,B]=T.useState(!1);T.useEffect(()=>{$&&(M||D)&&(B(!1),_(U()))},[$,M,D,_,E]),T.useEffect(()=>{te(nt,null,function*(){const ee=window.location.href.includes("oobCode="),V=window.location.href.includes("mode=signIn"),J=!!R,oe=!!A.get("email");if(console.log("URL parameters check:",{hasOobCode:ee,hasSignInMode:V,hasAssignmentId:J,hasEmailParam:oe,assignmentId:R,fullUrl:window.location.href}),J&&ee){a(!0),console.log("Direct assignment access path detected");try{console.log("Trying direct assignment token access for ID:",R);const pe=an(bt,"assignments",R),ye=yield si(pe);if(!ye.exists()){console.error("Assignment not found:",R),o("Assignment not found. Please contact your teacher."),a(!1);return}const Ce=ye.data();if(console.log("Assignment data retrieved directly:",Ce),!Ce.linkToken){console.error("Assignment has no link token:",R),o("This assignment cannot be accessed via email link. Please contact your teacher."),a(!1);return}console.log("Redirecting to game with direct token access"),_(`/play?token=${Ce.linkToken}&directAccess=true`);return}catch(pe){console.error("Error in direct assignment access:",pe)}}if(ee&&V||g3(DC(),window.location.href)){a(!0),console.log("Email link authentication detected");const pe=Date.now();let ye=localStorage.getItem("emailForSignIn");if(console.log("Retrieved email from localStorage:",ye?"Yes":"No"),!ye){const Ce=A.get("email");if(console.log("Email parameter in URL:",Ce?"Yes":"No"),Ce)ye=decodeURIComponent(Ce),localStorage.setItem("emailForSignIn",ye),console.log("Using email from URL parameter:",ye);else{const _e=window.prompt("Please provide your email for confirmation");if(!_e){o("Email is required to complete sign-in"),a(!1);return}ye=_e,localStorage.setItem("emailForSignIn",ye)}}try{console.log("Attempting to complete email link sign-in with email:",ye),yield v3(DC(),ye,window.location.href);const Ce=Date.now()-pe;if(console.log("Authentication completed in",Ce,"ms"),v(!0),R){console.log("Assignment ID found in URL:",R);try{const _e=an(bt,"assignments",R),Be=(yield si(_e)).data(),de=Be==null?void 0:Be.linkToken;console.log("Retrieved assignment token successfully:",de);const me=an(bt,"assignments",R),ae=(yield si(me)).data();console.log("Assignment data retrieved:",ae),ae&&ae.beta===!0?(console.log("Beta assignment detected, redirecting to feedback form"),_(`/feedback?assignmentId=${R}&timeToComplete=${Ce}`)):(console.log("Redirecting to game with token"),_(`/play?token=${de}`))}catch(_e){console.error("Error fetching assignment:",_e),o("Error loading assignment"),a(!1)}}else console.log("No assignment ID found, setting pending redirect"),B(!0)}catch(Ce){console.error("Error signing in with email link:",Ce),o("Error completing email link sign-in. The link may be invalid or expired."),a(!1)}}else console.log("No email link authentication detected in current URL")})},[_,R,bt,A]),T.useEffect(()=>{i4e().then(()=>{p(!0)})},[]),T.useEffect(()=>{if(l==="signup"&&f){if(console.log("In signup mode, setting up reCAPTCHA..."),!window.grecaptcha){console.error("reCAPTCHA not loaded yet"),o("reCAPTCHA verification could not be loaded. Please refresh the page and try again.");return}setTimeout(()=>{try{w.current&&!x.current?(console.log("Rendering reCAPTCHA..."),x.current=window.grecaptcha.render(w.current,{sitekey:e4e,callback:()=>{console.log("reCAPTCHA callback success"),d(!0)},"expired-callback":()=>{console.log("reCAPTCHA expired"),d(!1)},"error-callback":()=>{console.log("reCAPTCHA error"),o("Error loading reCAPTCHA verification")}})):w.current?x.current&&(console.log("reCAPTCHA already rendered, resetting"),window.grecaptcha.reset(x.current)):console.error("reCAPTCHA container ref not available")}catch(Z){console.error("Error rendering reCAPTCHA:",Z)}},100)}else l==="login"&&x.current&&window.grecaptcha&&(console.log("Switching to login mode, resetting reCAPTCHA"),window.grecaptcha.reset(x.current),d(!1),x.current=null)},[l,f]);const H=()=>{if(o(""),!t.trim())return o("Email is required"),!1;if(!n.trim())return o("Password is required"),!1;if(l==="signup"){if(n.length<6)return o("Password must be at least 6 characters"),!1;if(!u)return o("Please complete the reCAPTCHA verification"),!1;if(!f)return o("reCAPTCHA verification is still loading"),!1}return!0},q=Z=>te(nt,null,function*(){if(Z.preventDefault(),!!H())try{if(a(!0),o(""),l==="login")yield S(t,n);else{const ee=x.current&&window.grecaptcha?window.grecaptcha.getResponse(x.current):void 0;yield P(t,n,ee)}B(!0)}catch(ee){let V="Failed to ";if(V+=l==="login"?"log in":"sign up",ee.code)switch(ee.code){case"auth/user-not-found":V="No account found with this email";break;case"auth/wrong-password":V="Incorrect password";break;case"auth/email-already-in-use":V="An account with this email already exists";break;case"auth/invalid-email":V="Invalid email address";break;case"auth/weak-password":V="Password is too weak";break;default:V+=`: ${ee.message}`}o(V),l==="signup"&&x.current&&window.grecaptcha&&(window.grecaptcha.reset(x.current),d(!1))}finally{a(!1)}}),z=()=>te(nt,null,function*(){try{a(!0),o("");const Z=yield ZBe(t||void 0);if(Z&&Z.user)B(!0);else if(Z===null)return}catch(Z){console.error("Google Sign-In failed:",Z),Z.code==="auth/account-mismatch"||Z.message==="Sign-in was cancelled. Please try again."||Z.message==="Popup was blocked by your browser. Please allow popups for this site and try again."?o(Z.message):o("Failed to sign in with Google. Please try again.")}finally{a(!1)}}),G=()=>{c(l==="login"?"signup":"login"),o(""),d(!1),x.current&&window.grecaptcha&&(window.grecaptcha.reset(x.current),x.current=null)},K=()=>l==="signup"?h.jsxs("div",{style:{marginTop:"0.5rem",marginBottom:"0.5rem"},children:[h.jsx("div",{ref:w,id:"recaptcha-container"}),!f&&h.jsx("div",{style:{color:"var(--color-gray-500)",fontSize:"0.875rem",textAlign:"center"},children:"Loading verification..."}),u&&h.jsxs("div",{style:{color:"var(--color-success)",fontSize:"0.875rem",marginTop:"0.25rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",fill:"currentColor"})}),h.jsx("span",{children:"Verification complete"})]})]}):null;return b?h.jsxs("div",{style:cV,children:[h.jsx("h2",{style:{textAlign:"center",color:"var(--color-success-600)"},children:"Sign-in Successful!"}),h.jsx("p",{style:{textAlign:"center"},children:"Redirecting to your assignment..."})]}):h.jsx("div",{style:{padding:"2rem",backgroundColor:"var(--color-gray-100)",minHeight:"calc(100vh - 64px)"},children:h.jsxs("div",{style:cV,children:[h.jsx("h2",{style:{textAlign:"center",marginBottom:"1.5rem",color:"var(--color-primary-700)"},children:l==="login"?"Log In":"Sign Up"}),i&&h.jsx("div",{style:r4e,children:i}),h.jsxs("form",{onSubmit:q,style:t4e,children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",style:{display:"block",marginBottom:"0.25rem",fontSize:"0.875rem"},children:"Email"}),h.jsx("input",{id:"email",type:"email",value:t,onChange:Z=>e(Z.target.value),style:uV,required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"password",style:{display:"block",marginBottom:"0.25rem",fontSize:"0.875rem"},children:"Password"}),h.jsx("input",{id:"password",type:"password",value:n,onChange:Z=>r(Z.target.value),style:uV,required:!0})]}),K(),h.jsx("button",{type:"submit",style:se(j({},GJ),{opacity:l==="signup"&&!u?.5:1}),disabled:s||l==="signup"&&!u,children:s?"Processing...":l==="login"?"Log In":"Sign Up"}),l==="signup"&&!u&&h.jsx("div",{style:{color:"var(--color-error)",fontSize:"0.75rem",textAlign:"center",marginTop:"0.5rem"},children:"Please complete the reCAPTCHA verification to sign up"})]}),!m&&!L&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{style:{margin:"1rem 0",textAlign:"center",position:"relative"},children:[h.jsx("hr",{style:{border:"1px solid var(--color-gray-200)"}}),h.jsx("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"0 0.5rem",color:"var(--color-gray-500)",fontSize:"0.875rem"},children:"OR"})]}),h.jsxs("button",{onClick:z,style:n4e,disabled:s,children:[h.jsxs("svg",{width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",children:[h.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),h.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),h.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),h.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),h.jsx("span",{children:"Continue with Google"})]})]}),(m||L)&&l==="login"&&h.jsxs("div",{style:{background:"#fff3cd",border:"1px solid #ffeaa7",borderRadius:"5px",padding:"15px",margin:"20px 0",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"14px",color:"#856404",marginBottom:"10px"},children:h.jsx("strong",{children:"⚠️ First Time Login"})}),h.jsx("div",{style:{fontSize:"12px",color:"#856404"},children:"Please use your email and temporary password from the email your teacher sent you. You'll be asked to create a new password after signing in."})]}),h.jsx("div",{style:dV,children:l==="login"?h.jsxs(h.Fragment,{children:["Don't have an account?"," ",h.jsx("a",{href:"#",onClick:G,style:GP,children:"Sign up"})]}):h.jsxs(h.Fragment,{children:["Already have an account?"," ",h.jsx("a",{href:"#",onClick:G,style:GP,children:"Log in"})]})}),l==="login"&&h.jsx("div",{style:se(j({},dV),{marginTop:"0.5rem"}),children:h.jsx(Hu,{to:"/forgot-password",style:GP,children:"Forgot password?"})})]})})},s4e=()=>{const t=Pr(),[e]=dh(),{currentUser:n}=Dr();return T.useEffect(()=>{if(n){const r=e.get("redirectTo"),i=e.get("assignmentId");t(i?`/feedback?assignmentId=${i}`:r||"/")}else t("/login")},[n,t,e]),h.jsxs("div",{style:{maxWidth:"600px",margin:"2rem auto",padding:"2rem",textAlign:"center",backgroundColor:"white",borderRadius:"var(--border-radius-lg)",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[h.jsx("h1",{children:"Completing Login..."}),h.jsx("p",{children:"Please wait while we redirect you."})]})},a4e={maxWidth:"400px",margin:"0 auto",padding:"2rem",backgroundColor:"white",borderRadius:"var(--border-radius-lg)",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},l4e={display:"flex",flexDirection:"column",gap:"1rem"},c4e={padding:"0.75rem",borderRadius:"var(--border-radius-md)",border:"1px solid var(--color-gray-300)",fontSize:"1rem"},u4e={padding:"0.75rem",borderRadius:"var(--border-radius-md)",backgroundColor:"var(--color-primary-500)",color:"white",border:"none",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",transition:"background-color 0.2s"},d4e={color:"var(--color-error)",fontSize:"0.875rem",marginTop:"0.25rem"},f4e={color:"var(--color-success)",fontSize:"0.875rem",marginTop:"0.25rem"},h4e={color:"var(--color-primary-500)",textDecoration:"none",fontWeight:"bold"},p4e=()=>{const[t,e]=T.useState(""),[n,r]=T.useState(""),[i,o]=T.useState(""),[s,a]=T.useState(!1),{resetPassword:l}=Dr(),c=u=>te(nt,null,function*(){if(u.preventDefault(),!t.trim()){r("Email is required");return}try{r(""),o(""),a(!0),yield l(t),o("Check your email inbox for further instructions")}catch(d){let f="Failed to reset password";if(d.code)switch(d.code){case"auth/user-not-found":f="No account found with this email";break;case"auth/invalid-email":f="Invalid email address";break;default:f+=`: ${d.message}`}r(f)}finally{a(!1)}});return h.jsx("div",{style:{padding:"2rem",backgroundColor:"var(--color-gray-100)",minHeight:"calc(100vh - 64px)"},children:h.jsxs("div",{style:a4e,children:[h.jsx("h2",{style:{textAlign:"center",marginBottom:"1.5rem",color:"var(--color-primary-700)"},children:"Reset Password"}),n&&h.jsx("div",{style:d4e,children:n}),i&&h.jsx("div",{style:f4e,children:i}),h.jsxs("form",{onSubmit:c,style:l4e,children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",style:{display:"block",marginBottom:"0.25rem",fontSize:"0.875rem"},children:"Email"}),h.jsx("input",{id:"email",type:"email",value:t,onChange:u=>e(u.target.value),style:c4e,required:!0})]}),h.jsx("button",{type:"submit",style:u4e,disabled:s,children:s?"Processing...":"Reset Password"})]}),h.jsx("div",{style:{marginTop:"1.5rem",textAlign:"center",fontSize:"0.875rem"},children:h.jsx(Hu,{to:"/login",style:h4e,children:"Back to Login"})})]})})},qJ="@firebase/installations",vL="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KJ=1e4,YJ=`w:${vL}`,XJ="FIS_v2",m4e="https://firebaseinstallations.googleapis.com/v1",g4e=60*60*1e3,v4e="installations",y4e="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4e={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Zp=new fm(v4e,y4e,x4e);function QJ(t){return t instanceof Pl&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZJ({projectId:t}){return`${m4e}/projects/${t}/installations`}function JJ(t){return{token:t.token,requestStatus:2,expiresIn:w4e(t.expiresIn),creationTime:Date.now()}}function eee(t,e){return te(this,null,function*(){const r=(yield e.json()).error;return Zp.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function tee({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function b4e(t,{refreshToken:e}){const n=tee(t);return n.append("Authorization",S4e(e)),n}function nee(t){return te(this,null,function*(){const e=yield t();return e.status>=500&&e.status<600?t():e})}function w4e(t){return Number(t.replace("s","000"))}function S4e(t){return`${XJ} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4e(r,i){return te(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const o=ZJ(t),s=tee(t),a=e.getImmediate({optional:!0});if(a){const d=yield a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const l={fid:n,authVersion:XJ,appId:t.appId,sdkVersion:YJ},c={method:"POST",headers:s,body:JSON.stringify(l)},u=yield nee(()=>fetch(o,c));if(u.ok){const d=yield u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:JJ(d.authToken)}}else throw yield eee("Create Installation",u)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ree(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4e(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4e=/^[cdef][\w-]{21}$/,yk="";function A4e(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=T4e(t);return C4e.test(n)?n:yk}catch(t){return yk}}function T4e(t){return E4e(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iee=new Map;function oee(t,e){const n=jT(t);see(n,e),M4e(n,e)}function see(t,e){const n=iee.get(t);if(n)for(const r of n)r(e)}function M4e(t,e){const n=P4e();n&&n.postMessage({key:t,fid:e}),D4e()}let mp=null;function P4e(){return!mp&&"BroadcastChannel"in self&&(mp=new BroadcastChannel("[Firebase] FID Change"),mp.onmessage=t=>{see(t.data.key,t.data.fid)}),mp}function D4e(){iee.size===0&&mp&&(mp.close(),mp=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4e="firebase-installations-database",I4e=1,Jp="firebase-installations-store";let qP=null;function yL(){return qP||(qP=aQ(R4e,I4e,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Jp)}}})),qP}function UC(t,e){return te(this,null,function*(){const n=jT(t),i=(yield yL()).transaction(Jp,"readwrite"),o=i.objectStore(Jp),s=yield o.get(n);return yield o.put(e,n),yield i.done,(!s||s.fid!==e.fid)&&oee(t,e.fid),e})}function aee(t){return te(this,null,function*(){const e=jT(t),r=(yield yL()).transaction(Jp,"readwrite");yield r.objectStore(Jp).delete(e),yield r.done})}function UT(t,e){return te(this,null,function*(){const n=jT(t),i=(yield yL()).transaction(Jp,"readwrite"),o=i.objectStore(Jp),s=yield o.get(n),a=e(s);return a===void 0?yield o.delete(n):yield o.put(a,n),yield i.done,a&&(!s||s.fid!==a.fid)&&oee(t,a.fid),a})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(t){return te(this,null,function*(){let e;const n=yield UT(t.appConfig,r=>{const i=k4e(r),o=F4e(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===yk?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function k4e(t){const e=t||{fid:A4e(),registrationStatus:0};return lee(e)}function F4e(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Zp.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=O4e(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:N4e(t)}:{installationEntry:e}}function O4e(t,e){return te(this,null,function*(){try{const n=yield _4e(t,e);return UC(t.appConfig,n)}catch(n){throw QJ(n)&&n.customData.serverCode===409?yield aee(t.appConfig):yield UC(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function N4e(t){return te(this,null,function*(){let e=yield fV(t.appConfig);for(;e.registrationStatus===1;)yield ree(100),e=yield fV(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=yield xL(t);return r||n}return e})}function fV(t){return UT(t,e=>{if(!e)throw Zp.create("installation-not-found");return lee(e)})}function lee(t){return L4e(t)?{fid:t.fid,registrationStatus:0}:t}function L4e(t){return t.registrationStatus===1&&t.registrationTime+KJ<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4e(r,i){return te(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){const o=j4e(t,n),s=b4e(t,n),a=e.getImmediate({optional:!0});if(a){const d=yield a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const l={installation:{sdkVersion:YJ,appId:t.appId}},c={method:"POST",headers:s,body:JSON.stringify(l)},u=yield nee(()=>fetch(o,c));if(u.ok){const d=yield u.json();return JJ(d)}else throw yield eee("Generate Auth Token",u)})}function j4e(t,{fid:e}){return`${ZJ(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(t,e=!1){return te(this,null,function*(){let n;const r=yield UT(t.appConfig,o=>{if(!cee(o))throw Zp.create("not-registered");const s=o.authToken;if(!e&&V4e(s))return o;if(s.requestStatus===1)return n=U4e(t,e),o;{if(!navigator.onLine)throw Zp.create("app-offline");const a=$4e(o);return n=z4e(t,a),a}});return n?yield n:r.authToken})}function U4e(t,e){return te(this,null,function*(){let n=yield hV(t.appConfig);for(;n.authToken.requestStatus===1;)yield ree(100),n=yield hV(t.appConfig);const r=n.authToken;return r.requestStatus===0?bL(t,e):r})}function hV(t){return UT(t,e=>{if(!cee(e))throw Zp.create("not-registered");const n=e.authToken;return H4e(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function z4e(t,e){return te(this,null,function*(){try{const n=yield B4e(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield UC(t.appConfig,r),n}catch(n){if(QJ(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield aee(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield UC(t.appConfig,r)}throw n}})}function cee(t){return t!==void 0&&t.registrationStatus===2}function V4e(t){return t.requestStatus===2&&!W4e(t)}function W4e(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+g4e}function $4e(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function H4e(t){return t.requestStatus===1&&t.requestTime+KJ<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4e(t){return te(this,null,function*(){const e=t,{installationEntry:n,registrationPromise:r}=yield xL(e);return r?r.catch(console.error):bL(e).catch(console.error),n.fid})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4e(t,e=!1){return te(this,null,function*(){const n=t;return yield K4e(n),(yield bL(n,e)).token})}function K4e(t){return te(this,null,function*(){const{registrationPromise:e}=yield xL(t);e&&(yield e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y4e(t){if(!t||!t.options)throw KP("App Configuration");if(!t.name)throw KP("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw KP(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function KP(t){return Zp.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uee="installations",X4e="installations-internal",Q4e=t=>{const e=t.getProvider("app").getImmediate(),n=Y4e(e),r=Dd(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Z4e=t=>{const e=t.getProvider("app").getImmediate(),n=Dd(e,uee).getImmediate();return{getId:()=>G4e(n),getToken:i=>q4e(n,i)}};function J4e(){El(new Na(uee,Q4e,"PUBLIC")),El(new Na(X4e,Z4e,"PRIVATE"))}J4e();ds(qJ,vL);ds(qJ,vL,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="analytics",eje="firebase_id",tje="origin",nje=60*1e3,rje="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",wL="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=new gT("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ije={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ra=new fm("analytics","Analytics",ije);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oje(t){if(!t.startsWith(wL)){const e=Ra.create("invalid-gtag-resource",{gtagURL:t});return la.warn(e.message),""}return t}function dee(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function sje(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function aje(t,e){const n=sje("firebase-js-sdk-policy",{createScriptURL:oje}),r=document.createElement("script"),i=`${wL}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function lje(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function cje(t,e,n,r,i,o){return te(this,null,function*(){const s=r[i];try{if(s)yield e[s];else{const l=(yield dee(n)).find(c=>c.measurementId===i);l&&(yield e[l.appId])}}catch(a){la.error(a)}t("config",i,o)})}function uje(t,e,n,r,i){return te(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);const a=yield dee(n);for(const l of s){const c=a.find(d=>d.measurementId===l),u=c&&e[c.appId];if(u)o.push(u);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),t("event",r,i||{})}catch(o){la.error(o)}})}function dje(t,e,n,r){function i(o,...s){return te(this,null,function*(){try{if(o==="event"){const[a,l]=s;yield uje(t,e,n,a,l)}else if(o==="config"){const[a,l]=s;yield cje(t,e,n,r,a,l)}else if(o==="consent"){const[a,l]=s;t("consent",a,l)}else if(o==="get"){const[a,l,c]=s;t("get",a,l,c)}else if(o==="set"){const[a]=s;t("set",a)}else t(o,...s)}catch(a){la.error(a)}})}return i}function fje(t,e,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=dje(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}function hje(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(wL)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pje=30,mje=1e3;class gje{constructor(e={},n=mje){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const fee=new gje;function vje(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function yje(t){return te(this,null,function*(){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:vje(r)},o=rje.replace("{app-id}",n),s=yield fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{const l=yield s.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch(l){}throw Ra.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})}function xje(r){return te(this,arguments,function*(t,e=fee,n){const{appId:i,apiKey:o,measurementId:s}=t.options;if(!i)throw Ra.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw Ra.create("no-api-key")}const a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new Sje;return setTimeout(()=>te(this,null,function*(){l.abort()}),nje),hee({appId:i,apiKey:o,measurementId:s},a,l,e)})}function hee(o,s,a){return te(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=fee){var l;const{appId:c,measurementId:u}=t;try{yield bje(r,e)}catch(d){if(u)return la.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:c,measurementId:u};throw d}try{const d=yield yje(t);return i.deleteThrottleMetadata(c),d}catch(d){const f=d;if(!wje(f)){if(i.deleteThrottleMetadata(c),u)return la.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:c,measurementId:u};throw d}const p=Number((l=f==null?void 0:f.customData)===null||l===void 0?void 0:l.httpStatus)===503?jz(n,i.intervalMillis,pje):jz(n,i.intervalMillis),b={throttleEndTimeMillis:Date.now()+p,backoffCount:n+1};return i.setThrottleMetadata(c,b),la.debug(`Calling attemptFetch again in ${p} millis`),hee(t,b,r,i)}})}function bje(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(o),r(Ra.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function wje(t){if(!(t instanceof Pl)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class Sje{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}function _je(t,e,n,r,i){return te(this,null,function*(){if(i&&i.global){t("event",n,r);return}else{const o=yield e,s=Object.assign(Object.assign({},r),{send_to:o});t("event",n,s)}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eje(){return te(this,null,function*(){if(rQ())try{yield iQ()}catch(t){return la.warn(Ra.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return la.warn(Ra.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function Cje(t,e,n,r,i,o,s){return te(this,null,function*(){var a;const l=xje(t);l.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&la.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>la.error(p)),e.push(l);const c=Eje().then(p=>{if(p)return r.getId()}),[u,d]=yield Promise.all([l,c]);hje(o)||aje(o,u.measurementId),i("js",new Date);const f=(a=s==null?void 0:s.config)!==null&&a!==void 0?a:{};return f[tje]="firebase",f.update=!0,d!=null&&(f[eje]=d),i("config",u.measurementId,f),u.measurementId})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aje{constructor(e){this.app=e}_delete(){return delete Ex[this.app.options.appId],Promise.resolve()}}let Ex={},pV=[];const mV={};let YP="dataLayer",Tje="gtag",gV,pee,vV=!1;function Mje(){const t=[];if(nQ()&&t.push("This is a browser extension environment."),oIe()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Ra.create("invalid-analytics-context",{errorInfo:e});la.warn(n.message)}}function Pje(t,e,n){Mje();const r=t.options.appId;if(!r)throw Ra.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)la.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ra.create("no-api-key");if(Ex[r]!=null)throw Ra.create("already-exists",{id:r});if(!vV){lje(YP);const{wrappedGtag:o,gtagCore:s}=fje(Ex,pV,mV,YP,Tje);pee=o,gV=s,vV=!0}return Ex[r]=Cje(t,pV,mV,e,gV,YP,n),new Aje(t)}function Dje(t=Aw()){t=Sr(t);const e=Dd(t,zC);return e.isInitialized()?e.getImmediate():Rje(t)}function Rje(t,e={}){const n=Dd(t,zC);if(n.isInitialized()){const i=n.getImmediate();if(wb(e,n.getOptions()))return i;throw Ra.create("already-initialized")}return n.initialize({options:e})}function mee(t,e,n,r){t=Sr(t),_je(pee,Ex[t.app.options.appId],e,n,r).catch(i=>la.error(i))}const yV="@firebase/analytics",xV="0.10.8";function Ije(){El(new Na(zC,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return Pje(r,i,n)},"PUBLIC")),El(new Na("analytics-internal",t,"PRIVATE")),ds(yV,xV),ds(yV,xV,"esm2017");function t(e){try{const n=e.getProvider(zC).getImmediate();return{logEvent:(r,i,o)=>mee(n,r,i,o)}}catch(n){throw Ra.create("interop-component-reg-failed",{reason:n})}}}Ije();const kje=Dje(),Fje=(t,e)=>{try{const n=Xr.currentUser;mee(kje,"email_link_auth_completed",{assignmentId:t,timeToComplete:e,userAuthenticated:!!n,userEmail:(n==null?void 0:n.email)||"unknown",timestamp:new Date().toISOString()})}catch(n){console.error("Error logging email_link_auth_completed event:",n)}},Oje={maxWidth:"600px",margin:"2rem auto",padding:"2rem",backgroundColor:"white",borderRadius:"var(--border-radius-lg)",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},Nje={display:"flex",flexDirection:"column",gap:"1.5rem"},OS={display:"flex",flexDirection:"column",gap:"0.5rem"},NS={fontWeight:"bold",fontSize:"1rem"},Lje={padding:"0.75rem",borderRadius:"var(--border-radius-md)",border:"1px solid var(--color-gray-300)",fontSize:"1rem"},bV=se(j({},Lje),{minHeight:"120px"}),Bje={padding:"0.75rem",borderRadius:"var(--border-radius-md)",backgroundColor:"var(--color-primary-500)",color:"white",border:"none",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",transition:"background-color 0.2s"},gee={padding:"1rem",borderRadius:"var(--border-radius-md)",marginBottom:"1rem"},jje=se(j({},gee),{backgroundColor:"#d4edda",color:"#155724"}),Uje=se(j({},gee),{backgroundColor:"#f8d7da",color:"#721c24"}),zje=()=>{const[t,e]=T.useState(0),[n,r]=T.useState(0),[i,o]=T.useState(""),[s,a]=T.useState(""),[l,c]=T.useState(""),[u,d]=T.useState(!1),[f,p]=T.useState(!1),[b]=dh(),{currentUser:v}=Dr(),m=Pr(),g=b.get("assignmentId"),x=b.get("timeToComplete");T.useEffect(()=>{(!g||!v)&&m("/"),g&&x&&v&&Fje(g,parseInt(x,10))},[g,v,m,x]);const w=S=>te(nt,null,function*(){if(S.preventDefault(),t===0||n===0){c("Please provide ratings for all questions");return}d(!0),c("");try{const P=`${g}_${(v==null?void 0:v.uid)||"anonymous"}`;yield eu(an(bt,"emailAuthFeedback",P),{assignmentId:g,userId:(v==null?void 0:v.uid)||"anonymous",userEmail:(v==null?void 0:v.email)||"unknown",rating:t,easeOfUse:n,issuesReported:i,comments:s,createdAt:bo(),timeToComplete:x?parseInt(x,10):null}),p(!0),setTimeout(()=>{m(g?`/play?id=${g}`:"/")},3e3)}catch(P){console.error("Error submitting feedback:",P),c("Error submitting feedback. Please try again.")}finally{d(!1)}});return h.jsxs("div",{style:Oje,children:[h.jsx("h1",{children:"Email Authentication Feedback"}),h.jsx("p",{children:"Thank you for participating in our beta test! Please take a moment to provide feedback on your experience with the passwordless login."}),l&&h.jsx("div",{style:Uje,children:l}),f&&h.jsx("div",{style:jje,children:h.jsx("p",{children:"Thank you for your feedback! You will be redirected to your assignment shortly."})}),!f&&h.jsxs("form",{style:Nje,onSubmit:w,children:[h.jsxs("div",{style:OS,children:[h.jsx("label",{style:NS,children:"How would you rate your overall experience with the email link authentication?"}),h.jsx("div",{children:[1,2,3,4,5].map(S=>h.jsxs("label",{style:{marginRight:"1rem"},children:[h.jsx("input",{type:"radio",name:"rating",value:S,checked:t===S,onChange:()=>e(S)}),S," ",S===1?"(Poor)":S===5?"(Excellent)":""]},S))})]}),h.jsxs("div",{style:OS,children:[h.jsx("label",{style:NS,children:"How easy was it to access your assignment?"}),h.jsx("div",{children:[1,2,3,4,5].map(S=>h.jsxs("label",{style:{marginRight:"1rem"},children:[h.jsx("input",{type:"radio",name:"easeOfUse",value:S,checked:n===S,onChange:()=>r(S)}),S," ",S===1?"(Very Difficult)":S===5?"(Very Easy)":""]},S))})]}),h.jsxs("div",{style:OS,children:[h.jsx("label",{style:NS,children:"Did you encounter any issues? Please describe."}),h.jsx("textarea",{style:bV,value:i,onChange:S=>o(S.target.value),placeholder:"Describe any issues you encountered..."})]}),h.jsxs("div",{style:OS,children:[h.jsx("label",{style:NS,children:"Any additional comments or suggestions?"}),h.jsx("textarea",{style:bV,value:s,onChange:S=>a(S.target.value),placeholder:"Share your thoughts..."})]}),h.jsx("button",{type:"submit",style:Bje,disabled:u,children:u?"Submitting...":"Submit Feedback"})]})]})},vee=["ass","fuck","shit","bitch","piss","dick","cunt"],wV={a:["@","4","α","а"],i:["1","!","|","і"],o:["0","о","θ"],u:["υ","ų"],e:["3","е","э"],s:["$","5","ѕ"]},Vje=t=>{let e="";for(const n of t.toLowerCase())n in wV?e+=`[${n}${wV[n].join("")}]`:e+=n;return new RegExp(e,"i")},Wje=vee.map(Vje),$je=t=>{const e=t.toLowerCase();return!!(vee.some(r=>e.includes(r))||Wje.some(r=>r.test(e))||/(.)\1{3,}/.test(e))},yee=t=>{let e=t.trim().replace(/\s+/g," ");return e=e.replace(/[^a-zA-Z0-9\s]/g,""),e},Hje=t=>{const e=yee(t);return!(e.length<3||e.length>12||$je(e))},Gje=t=>{let e=t.categories,n=!1;t.richCategories&&Array.isArray(t.richCategories)&&(e=t.richCategories,n=!0);const r=[];e.forEach(x=>{n&&x.items&&Array.isArray(x.items)?x.items.forEach(w=>{r.push({text:w.content||w.text||w,category:x.name})}):Array.isArray(x.items)&&x.items.forEach(w=>{r.push({text:w,category:x.name})})});const i=[],o=Math.min(t.eggQty,r.length),s=8,l=100-s-45,c=8,u=100-2*c,d=6,f=8,p=9,b=[...r].sort(()=>Math.random()-.5),v=[],m=(x,w)=>v.some(S=>Math.sqrt(Cu(x-S.x,2)+Cu(w-S.y,2))<p),g=()=>{const x=c+Math.random()*u,w=s+Math.random()*l;return{x,y:w}};for(let x=0;x<o;x++){const w=b[x];let S,P=0;const I=100;do S=g(),P++;while(m(S.x,S.y)&&P<I);if(P>=I){const _=Math.ceil(Math.sqrt(o)),A=Math.floor(x/_),R=x%_,F=u/_,L=l/Math.ceil(o/_);S={x:c+R*F+F/2,y:s+A*L+L/2}}const M=2,D=Math.max(c+d/2,Math.min(100-c-d/2,S.x+(Math.random()-.5)*M)),E=Math.max(s+f/2,Math.min(s+l-f/2,S.y+(Math.random()-.5)*M));v.push({x:D,y:E}),i.push({id:`egg-${Date.now()}-${x}`,word:w,cracked:!1,position:{x:D,y:E}})}return i},SV=t=>{let e=t.categories;return t.richCategories&&Array.isArray(t.richCategories)&&(e=t.richCategories),e.map((n,r)=>({id:`basket-${r}`,name:n.name,items:[]}))},xee=(t,e)=>t.category===e.name,qje=(t,e)=>xee(t,e)?10:0,Kje=(t,e)=>{const n=t.every(o=>o.cracked),r=e.reduce((o,s)=>o+s.items.length,0),i=t.filter(o=>o.cracked).length;return n&&r===i},Yje=()=>[{id:"fallback1",type:"sort-categories-egg",title:"Animals",description:"Sort animals into categories",difficulty:"medium",timeLimit:300,targetScore:100,eggQty:12,categories:[{name:"Mammals",items:["dog","cat","elephant","giraffe"]},{name:"Birds",items:["eagle","parrot","penguin","owl"]},{name:"Reptiles",items:["snake","lizard","turtle","crocodile"]}],share:!0,createdAt:wr.fromDate(new Date)},{id:"fallback2",type:"sort-categories-egg",title:"Colors",description:"Sort items by color",difficulty:"easy",timeLimit:240,targetScore:80,eggQty:9,categories:[{name:"Red",items:["apple","strawberry","fire truck"]},{name:"Blue",items:["sky","ocean","blueberry"]},{name:"Green",items:["grass","leaf","frog"]}],share:!0,createdAt:wr.fromDate(new Date)}],Xje=(t,e)=>e.length<10?!0:t>Math.min(...e.map(n=>n.score)),Qje=(t,e,n,r,i)=>{const{currentUser:o}=Dr(),s=co(),a=T.useRef(null),[l,c]=T.useState({score:0,eggs:[],crackedEggs:[],selectedWord:null,isWordSelected:!1,baskets:[],gameConfig:{title:"Default Configuration",type:"sort-categories-egg",description:"Sort items into categories by cracking eggs",difficulty:"medium",timeLimit:300,targetScore:100,eggQty:6,categories:[{name:"Category 1",items:["Item 1","Item 2","Item 3"]},{name:"Category 2",items:["Item 4","Item 5","Item 6"]}],share:!1,createdAt:t.createdAt},gameStarted:!1,savedConfigs:[],isConfigModalOpen:!1,isLoading:!1,ghostPosition:{x:0,y:0},targetBasket:null,isGameComplete:!1,highScores:[],isHighScore:!1,showHighScoreDisplayModal:!1,isSubmittingScore:!1}),u=T.useCallback(_=>te(nt,null,function*(){try{const A=mr(Tn(bt,"highScores"),Bn("configId","==",_),Bn("gameType","==","sort-categories-egg"),f0("score","desc"),$f(10)),R=yield Xn(A),F=[];R.forEach(L=>{F.push(j({id:L.id},L.data()))}),c(L=>se(j({},L),{highScores:F}))}catch(A){console.error("Error loading high scores:",A)}}),[]),d=T.useCallback(()=>te(nt,null,function*(){try{c(F=>se(j({},F),{isLoading:!0}));const _=mr(Tn(bt,"userGameConfigs"),Bn("type","==","sort-categories-egg"),Bn("share","==",!0)),A=yield Xn(_),R=[];A.forEach(F=>{R.push(j({id:F.id},F.data()))}),c(F=>se(j({},F),{savedConfigs:R}))}catch(_){console.error("Error loading configurations:",_),c(A=>se(j({},A),{savedConfigs:Yje()}))}finally{c(_=>se(j({},_),{isLoading:!1}))}}),[]),f=T.useCallback(_=>{console.log("Initializing game with config:",_),c(F=>se(j({},F),{gameConfig:se(j({},_),{id:_.id})})),_.id?(console.log("Loading high scores for config ID:",_.id),u(_.id)):console.error("No config ID available for game initialization");const A=SV(_),R=Gje(_);c(F=>se(j({},F),{baskets:A,eggs:R,crackedEggs:[],score:0,gameStarted:!0,isGameComplete:!1,selectedWord:null,isWordSelected:!1}))},[u]);T.useEffect(()=>{d()},[]),T.useEffect(()=>{const _=SV(t);c(A=>se(j({},A),{baskets:_})),f(t)},[t]),T.useEffect(()=>{const _=A=>{if(l.isWordSelected&&a.current){const R=a.current.getBoundingClientRect();c(F=>se(j({},F),{ghostPosition:{x:A.clientX-R.left,y:A.clientY-R.top}}))}};return l.isWordSelected&&document.addEventListener("mousemove",_),()=>{document.removeEventListener("mousemove",_)}},[l.isWordSelected]);const p=T.useCallback(_=>{_.cracked||c(A=>{const R=A.eggs.map(N=>N.id===_.id?se(j({},N),{cracked:!0}):N),F=R.find(N=>N.id===_.id),L=F?[...A.crackedEggs,F]:A.crackedEggs;return se(j({},A),{eggs:R,crackedEggs:L,selectedWord:null,isWordSelected:!1})})},[]),b=T.useCallback((_,A)=>{if(A.stopPropagation(),a.current){const R=a.current.getBoundingClientRect();c(F=>se(j({},F),{selectedWord:_,isWordSelected:!0,ghostPosition:{x:A.clientX-R.left,y:A.clientY-R.top}}))}},[]),v=T.useCallback(_=>{if(l.isWordSelected&&a.current){const A=a.current.getBoundingClientRect();c(R=>se(j({},R),{ghostPosition:{x:_.clientX-A.left,y:_.clientY-A.top}}))}},[l.isWordSelected]),m=T.useCallback(_=>{if(!l.isWordSelected||!l.selectedWord)return;const R=_.target.closest(".basket");if(R){const F=R.getAttribute("data-basket-id"),L=l.baskets.find(N=>N.name===F);L&&g(l.selectedWord,L)}c(F=>se(j({},F),{selectedWord:null,isWordSelected:!1}))},[l.isWordSelected,l.selectedWord,l.baskets]),g=T.useCallback((_,A)=>{xee(_,A);const R=qje(_,A);c(F=>{const L=F.baskets.map($=>$.id===A.id?se(j({},$),{items:[...$.items,_]}):$),N=F.score+R,U=Kje(F.eggs,L);return se(j({},F),{baskets:L,score:N,isGameComplete:U,selectedWord:null,isWordSelected:!1})})},[]),x=T.useCallback(_=>{f(_),c(A=>se(j({},A),{isConfigModalOpen:!1}))},[]),w=T.useCallback(()=>{f(l.gameConfig)},[l.gameConfig]),S=T.useCallback(()=>{n(l.score)},[l.score,n]),P=T.useCallback(_=>Xje(_,l.highScores),[l.highScores]),I=T.useCallback(_=>te(nt,null,function*(){const A=_!=null?_:l.score;if(!Hje(e)){s({title:"Invalid Name",description:"Please enter a valid player name.",status:"error",duration:3e3,isClosable:!0});return}const R=yee(e),F=P(A);if(F&&r&&r(),F)try{c(N=>se(j({},N),{isSubmittingScore:!0}));const L={playerName:R,score:A,configId:l.gameConfig.id||"unknown",gameType:"sort-categories-egg",userId:(o==null?void 0:o.uid)||null,createdAt:bo()};yield yc(Tn(bt,"highScores"),L),c(N=>se(j({},N),{isHighScore:!0,showHighScoreDisplayModal:!0})),l.gameConfig.id&&(yield u(l.gameConfig.id)),s({title:"High Score Saved!",description:`Congratulations ${R}! Your score of ${A} has been saved.`,status:"success",duration:5e3,isClosable:!0})}catch(L){console.error("Error saving high score:",L),s({title:"Error",description:"Failed to save high score. Please try again.",status:"error",duration:3e3,isClosable:!0})}finally{c(L=>se(j({},L),{isSubmittingScore:!1}))}else c(L=>se(j({},L),{isHighScore:!1,showHighScoreDisplayModal:!0}));i&&i(),n(A)}),[l.score,l.gameConfig.id,l.highScores,e,o,P,u,r,i,n,s]),M=T.useCallback(()=>{c(_=>se(j({},_),{showHighScoreDisplayModal:!1,isHighScore:!1}))},[]),D=T.useCallback(()=>{c(_=>se(j({},_),{isConfigModalOpen:!0}))},[]),E=T.useCallback(()=>{c(_=>se(j({},_),{isConfigModalOpen:!1}))},[]);return T.useEffect(()=>{l.isGameComplete&&!l.showHighScoreDisplayModal&&I()},[l.isGameComplete,l.showHighScoreDisplayModal,I]),{gameState:l,gameAreaRef:a,handleEggClick:p,handleWordClick:b,handleMouseMove:v,handleGameAreaClick:m,handleConfigSelect:x,handleResetGame:w,handleCloseGame:S,handleHighScoreDisplayModalClose:M,openConfigModal:D,closeConfigModal:E,loadSavedConfigs:d}},Zje=({onStartGame:t,onLoadConfig:e})=>{const n=Ro({base:2,md:3,lg:4}),r=Ro({base:"sm",md:"md"});return h.jsx(Et,{width:"100vw",maxWidth:"100%",position:"relative",left:"50%",transform:"translateX(-50%)",bg:"gray.50",children:h.jsx(Et,{width:"100%",maxW:"1400px",mx:"auto",px:n,py:8,children:h.jsxs(Kt,{spacing:6,align:"center",width:"100%",children:[h.jsx(zr,{size:r,textAlign:"center",fontFamily:"'Comic Neue', sans-serif",children:"Sort Categories Egg Reveal"}),h.jsx(ft,{fontSize:{base:"sm",md:"md"},textAlign:"center",maxW:"600px",fontFamily:"'Comic Neue', sans-serif",children:"Find eggs, crack them open, and sort words into the correct categories!"}),h.jsxs(pC,{columns:{base:1,md:2},spacing:4,width:"100%",maxW:"600px",mt:4,children:[h.jsx(pn,{colorScheme:"blue",size:{base:"md",md:"lg"},onClick:t,width:"100%",fontFamily:"'Comic Neue', sans-serif",children:"Start Game"}),h.jsx(pn,{variant:"outline",size:{base:"md",md:"lg"},onClick:e,width:"100%",fontFamily:"'Comic Neue', sans-serif",children:"Load Saved Configuration"})]})]})})})},Jje={ck:"k",ch:"tʃ",sh:"ʃ",th:"θ",th_voiced:"ð",wh:"hw",ph:"f",ng:"ŋ",ll:"l",gh:"",kn:"n",wr:"r",mb:"m",bt:"t",mn:"n",ai:"eɪ",ay:"eɪ",ee:"i",ea:"i",ie:"i",oa:"oʊ",ow:"oʊ",ou:"aʊ",ow_sound:"aʊ",ue:"u",ew:"u",oo:"u",oo_short:"ʊ",au:"ɔ",aw:"ɔ",oi:"ɔɪ",oy:"ɔɪ",ar:"ɑr",er:"ɝ",ir:"ɝ",or:"ɔr",ur:"ɝ",are:"ɛr",eer:"ɪr",ire:"aɪr",ore:"ɔr",ure:"ʊr",tion:"ʃən",sion:"ʒən",ture:"tʃər",cious:"ʃəs",tious:"ʃəs",ough:"ʌf",augh:"æf",eigh:"eɪ",ight:"aɪt",c_soft:"s",g_soft:"dʒ",y_vowel:"aɪ",y_short:"ɪ"},eUe={voiceId:"Joanna",engine:"neural"};class tUe{constructor(e={}){go(this,"config");go(this,"currentAudio",null);go(this,"firestoreAvailable",!1);this.config=j(j({},eUe),e),this.initializeFirestore()}initializeFirestore(){try{bt?(this.firestoreAvailable=!0,console.log("Firestore TTS service initialized successfully")):(this.firestoreAvailable=!1,console.warn("Firestore not available for TTS"))}catch(e){console.warn("Failed to initialize Firestore TTS service:",e),this.firestoreAvailable=!1}}generateRequestId(){return Date.now().toString()+"_"+Math.random().toString(36).substr(2,9)}waitForTTSResult(e){return te(this,null,function*(){return new Promise((n,r)=>{const i=an(bt,"ttsResults",e),o=setTimeout(()=>{s(),console.warn("TTS request timed out:",e),n(null)},3e4),s=OLe(i,a=>{if(a.exists()){clearTimeout(o),s();const l=a.data();console.log("TTS result received:",l),l.success&&l.audioData?(tu(i).catch(console.warn),n(l.audioData)):(console.error("TTS processing failed:",l.error),n(null))}},a=>{clearTimeout(o),s(),console.error("Error listening for TTS result:",a),r(a)})})})}convertToPhonemeSSML(e){let n="",r=0;const i=Object.entries(Jje).sort(([o],[s])=>s.length-o.length);for(;r<e.length;){let o=!1;for(const[s,a]of i){const l=e.substring(r,r+s.length);if(l.toLowerCase()===s.toLowerCase()){a&&(s==="ph"||s==="ck"||s==="kn"||s==="wr"||s==="mb"||s==="bt"||s==="mn"||s==="ll"||s==="wh"?n+=`<prosody rate="slow" volume="+9dB"><phoneme alphabet="ipa" ph="${a}">${l}</phoneme></prosody>`:n+=`<prosody volume="+9dB"><phoneme alphabet="ipa" ph="${a}">${l}</phoneme></prosody>`),r+=s.length,o=!0;break}}o||(n+=e[r],r++)}return`<speak><prosody volume="0dB">${n}</prosody></speak>`}speakWithPhonemes(r){return te(this,arguments,function*(e,n={}){if(!this.firestoreAvailable)return console.warn("Firestore TTS not available, falling back to Web Speech API with phonics"),this.fallbackToWebSpeech(e,n);try{const i=this.convertToPhonemeSSML(e),o=this.generateRequestId();console.log("Creating TTS request:",{requestId:o,ssmlText:i,voiceId:this.config.voiceId,engine:this.config.engine});const s=an(bt,"ttsRequests",o);yield eu(s,{ssmlText:i,voiceId:this.config.voiceId,engine:this.config.engine,userId:"anonymous",timestamp:new Date});const a=yield this.waitForTTSResult(o);if(a)console.log("Playing audio from Firestore TTS"),yield this.playBase64Audio(a);else return console.warn("No audio data received from Firestore TTS, falling back to Web Speech API"),this.fallbackToWebSpeech(e,n)}catch(i){console.error("Firestore TTS error details:",i);const o=i instanceof Error?i.message:String(i);return console.warn("Firestore TTS failed, falling back to Web Speech API with phonics:",o),this.fallbackToWebSpeech(e,n)}})}playBase64Audio(e){return te(this,null,function*(){try{const n=atob(e),r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);const i=new Blob([r],{type:"audio/mp3"}),o=URL.createObjectURL(i);this.currentAudio&&(this.currentAudio.pause(),this.currentAudio.currentTime=0),this.currentAudio=new Audio(o),this.currentAudio.play(),this.currentAudio.onended=()=>{URL.revokeObjectURL(o)}}catch(n){throw console.error("Error playing base64 audio:",n),n}})}fallbackToWebSpeech(e,n={}){return new Promise((r,i)=>{if(!("speechSynthesis"in window)){i(new Error("Speech synthesis not supported"));return}const o=new SpeechSynthesisUtterance(e);o.rate=n.rate||1,o.pitch=n.pitch||1,o.volume=n.volume||1,o.lang="en-US",o.onend=()=>r(),o.onerror=s=>i(s),speechSynthesis.speak(o)})}speakRegular(r){return te(this,arguments,function*(e,n={}){if(!this.firestoreAvailable)return console.warn("Firestore TTS not available, falling back to Web Speech API"),this.fallbackToWebSpeech(e,n);try{const i=this.generateRequestId();console.log("Creating regular TTS request:",{requestId:i,text:e,voiceId:this.config.voiceId,engine:this.config.engine});const o=an(bt,"ttsRequests",i);yield eu(o,{text:e,voiceId:this.config.voiceId,engine:this.config.engine,userId:"anonymous",timestamp:new Date});const s=yield this.waitForTTSResult(i);if(s)console.log("Playing regular audio from Firestore TTS"),yield this.playBase64Audio(s);else return console.warn("No audio data received from Firestore TTS, falling back to Web Speech API"),this.fallbackToWebSpeech(e,n)}catch(i){const o=i instanceof Error?i.message:String(i);return console.warn("Firestore TTS failed, falling back to Web Speech API:",o),this.fallbackToWebSpeech(e,n)}})}isPollyAvailable(){return this.firestoreAvailable}stop(){this.currentAudio&&(this.currentAudio.pause(),this.currentAudio.currentTime=0),"speechSynthesis"in window&&speechSynthesis.cancel()}updateConfig(e){this.config=j(j({},this.config),e)}}let Ea=null;try{Ea=new tUe}catch(t){console.warn("Failed to initialize Polly TTS service:",t)}const nUe={ck:"k",ch:"ch",sh:"sh",th:"th",ph:"f",ng:"ng",gh:"",ai:"ay",ay:"ay",ee:"ee",ea:"ee",ie:"ee",oa:"oh",ow:"oh",ou:"ow",ue:"oo",ew:"oo",oo:"oo",au:"aw",aw:"aw",oi:"oy",oy:"oy",ar:"ar",er:"ur",ir:"ur",or:"or",ur:"ur",are:"air",eer:"ear",ire:"ire",ore:"ore",ure:"ure",tion:"shun",sion:"zhun",ture:"chur",cious:"shus",tious:"shus",ough:"uff",augh:"aff",eigh:"ay",ight:"ite",c:"s",g:"j",y:"i",y_short:"i"};function rUe(t){let e=t.toLowerCase();return Object.entries(nUe).forEach(([n,r])=>{if(r){const i=new RegExp(`\\b${n}\\b`,"g");e=e.replace(i,r)}}),e}function Hv(){return"speechSynthesis"in window||Ea!==null&&Ea.isPollyAvailable()}function wd(t,e={}){return new Promise((n,r)=>{if(!Hv()){r(new Error("Text-to-speech is not available"));return}const i=new SpeechSynthesisUtterance(t);i.rate=e.rate||1,i.pitch=e.pitch||1,i.volume=e.volume||1,i.lang=e.lang||"en-US",e.voice&&(i.voice=e.voice),i.onend=()=>n(),i.onerror=o=>r(o),speechSynthesis.speak(i)})}function em(t,e={}){const n=rUe(t);return wd(n,e)}function _V(n){return te(this,arguments,function*(t,e={}){if(!Ea)return console.warn("Polly TTS service not available, falling back to phonics TTS"),em(t,e);try{yield Ea.speakWithPhonemes(t,{rate:e.rate,pitch:e.pitch,volume:e.volume})}catch(r){return console.error("Polly TTS error, falling back to phonics TTS:",r),em(t,e)}})}function EV(n){return te(this,arguments,function*(t,e={}){if(!Ea)return console.warn("Polly TTS service not available, falling back to regular TTS"),wd(t,e);try{yield Ea.speakRegular(t,{rate:e.rate,pitch:e.pitch,volume:e.volume})}catch(r){return console.error("Polly TTS error, falling back to regular TTS:",r),wd(t,e)}})}function iUe(r){return te(this,arguments,function*(t,e=!1,n={}){if(e){if(Ea&&Ea.isPollyAvailable())try{yield Ea.speakWithPhonemes(t,n);return}catch(i){console.warn("Polly phonemes failed, falling back to Web Speech phonics:",i)}return em(t,n)}else{if(Ea&&Ea.isPollyAvailable())try{yield Ea.speakRegular(t,n);return}catch(i){console.warn("Polly regular failed, falling back to Web Speech API:",i)}return wd(t,n)}})}function bee(t,e,n=!1){const r={rate:.8,pitch:1,volume:.8};n?em(t,r).catch(console.error):wd(t,r).catch(console.error)}function oUe(t,e=!1){const n=t.replace(/<[^>]*>/g,""),r={rate:.7,pitch:1,volume:.9};e?em(n,r).catch(console.error):wd(n,r).catch(console.error)}const sUe=({onClick:t,item:e,category:n,cracked:r,onWordClick:i,enableTextToSpeech:o=!1,usePhonicsMode:s=!1,useAmazonPolly:a=!1,textToSpeechMode:l,containerType:c="eggs"})=>{const[u,d]=T.useState(!1),[f,p]=T.useState(!1),[b]=T.useState(M()),[v,m]=T.useState(!1),g=()=>{switch(c){case"balloons":return{borderRadius:"50%",background:`linear-gradient(135deg, ${b}, ${w(b,-20)})`,boxShadow:"inset -2px -2px 4px rgba(0, 0, 0, 0.1), inset 2px 2px 4px rgba(255, 255, 255, 0.5)",border:"2px solid rgba(255, 255, 255, 0.4)"};case"presents":return{borderRadius:"8px",background:`linear-gradient(135deg, ${b}, ${w(b,-15)})`,boxShadow:"inset -2px -2px 4px rgba(0, 0, 0, 0.1), inset 2px 2px 4px rgba(255, 255, 255, 0.3)",border:"2px solid rgba(255, 255, 255, 0.3)"};case"amazon":return{borderRadius:"4px",background:"linear-gradient(135deg, #ffd89b, #d4a76a)",boxShadow:"inset -2px -2px 4px rgba(0, 0, 0, 0.1), inset 2px 2px 4px rgba(255, 255, 255, 0.3)",border:"2px solid rgba(139, 69, 19, 0.3)"};default:return{borderRadius:"50% 50% 50% 50% / 60% 60% 40% 40%",background:b,boxShadow:"inset -2px -2px 4px rgba(0, 0, 0, 0.1), inset 2px 2px 4px rgba(255, 255, 255, 0.3)",border:"2px solid rgba(255, 255, 255, 0.3)"}}},x=()=>{switch(c){case"balloons":return"/sounds/pop.mp3";case"presents":return"/sounds/unwrap.mp3";case"amazon":return"/sounds/cardboard.mp3";default:return"/sounds/crack.mp3"}},w=(E,_)=>{const A=E.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(A){const[,R,F,L]=A,N=Math.max(0,Math.min(100,parseInt(L)+_));return`hsl(${R}, ${F}%, ${N}%)`}return E},S=Ro({base:"45px",md:"55px",lg:"65px"}),P=Ro({base:"60px",md:"73px",lg:"86px"}),I=Ro({base:"xs",md:"sm",lg:"md"});T.useEffect(()=>{let E,_=null;if(r){const A=l||(o?"amazon-polly-phonics":"disabled");try{_=new Audio(x()),_.volume=.5,_.addEventListener("error",R=>{console.warn(`Sound file not found: ${x()}. Please add sound files to public/sounds/`)}),_.play().catch(R=>{console.warn("Could not play container sound:",R)})}catch(R){console.error("Error creating audio element:",R)}d(!0),p(!0),A!=="disabled"&&Hv()&&(E=setTimeout(()=>te(nt,null,function*(){const R={rate:.8,pitch:1,volume:.8};try{switch(A){case"amazon-polly-phonics":yield _V(e,R);break;case"amazon-polly-regular":yield EV(e,R);break;case"web-speech-phonics":yield em(e,R);break;case"web-speech-regular":yield wd(e,R);break;default:a?s?yield _V(e,R):yield EV(e,R):s?yield em(e,R):yield wd(e,R);break}}catch(F){console.error("TTS error:",F);try{yield iUe(e,s,R)}catch(L){console.error("Fallback TTS error:",L)}}}),800))}return()=>{E&&clearTimeout(E),_&&(_.pause(),_.currentTime=0)}},[r,o,s,a,e,l,c]);function M(){const E=Math.floor(Math.random()*360),_=Math.floor(Math.random()*30)+40,A=Math.floor(Math.random()*20)+70;return`hsl(${E}, ${_}%, ${A}%)`}const D=E=>{E.stopPropagation(),m(!0),i(e,n,E)};return h.jsxs(Et,{position:"relative",cursor:"pointer",onClick:r?void 0:t,width:S,height:P,display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none",transition:"all 0.3s ease",_hover:{transform:r?"none":"scale(1.05)",filter:r?"none":"brightness(1.1)"},children:[h.jsx(Vc,{children:!r&&h.jsxs(ml.div,{initial:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.3},style:se(j({position:"absolute",width:"100%",height:"100%"},g()),{display:"flex",alignItems:"center",justifyContent:"center"}),children:[h.jsx(Et,{position:"absolute",top:"20%",left:"30%",width:"20%",height:"20%",borderRadius:c==="presents"||c==="amazon"?"4px":"50%",backgroundColor:"rgba(255, 255, 255, 0.4)",filter:"blur(2px)"}),c==="presents"&&h.jsxs(h.Fragment,{children:[h.jsx(Et,{position:"absolute",top:"0",left:"50%",width:"15%",height:"100%",backgroundColor:"rgba(255, 0, 0, 0.6)",transform:"translateX(-50%)"}),h.jsx(Et,{position:"absolute",top:"50%",left:"0",width:"100%",height:"15%",backgroundColor:"rgba(255, 0, 0, 0.6)",transform:"translateY(-50%)"})]}),c==="amazon"&&h.jsxs(h.Fragment,{children:[h.jsx(Et,{position:"absolute",top:"50%",left:"0",width:"100%",height:"10%",backgroundColor:"rgba(139, 69, 19, 0.4)",transform:"translateY(-50%)"}),h.jsx(Et,{position:"absolute",bottom:"15%",right:"15%",width:"20%",height:"15%",borderRadius:"50%",backgroundColor:"rgba(255, 255, 255, 0.8)",fontSize:"6px",display:"flex",alignItems:"center",justifyContent:"center",color:"orange",fontWeight:"bold",children:"📦"})]}),c==="balloons"&&h.jsx(h.Fragment,{children:h.jsx(Et,{position:"absolute",bottom:"-5px",left:"50%",width:"2px",height:"15px",backgroundColor:"rgba(0, 0, 0, 0.3)",transform:"translateX(-50%)"})})]})}),h.jsx(Vc,{children:u&&h.jsx(ml.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.2},transition:{duration:.5},style:{position:"absolute",width:"100%",height:"100%",pointerEvents:"none",zIndex:2},children:h.jsxs("svg",{width:"100%",height:"100%",style:{position:"absolute",top:0,left:0},children:[h.jsx("path",{d:"M20,30 L25,45 L30,35 L35,50 L40,40",stroke:"#8B4513",strokeWidth:"1",fill:"none",opacity:"0.7"}),h.jsx("path",{d:"M50,25 L45,40 L55,35 L50,55",stroke:"#8B4513",strokeWidth:"1",fill:"none",opacity:"0.7"}),h.jsx("path",{d:"M15,45 L25,50 L20,60 L30,55",stroke:"#8B4513",strokeWidth:"1",fill:"none",opacity:"0.7"})]})})}),h.jsx(Vc,{children:r&&h.jsx(ml.div,{initial:{opacity:0,y:10,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.8},transition:{duration:.4,delay:.2},style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3},children:h.jsx(ft,{fontSize:I,fontWeight:"bold",color:"gray.800",textAlign:"center",cursor:"pointer",onClick:D,padding:"2px",borderRadius:"4px",backgroundColor:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",transition:"all 0.2s ease",_hover:{backgroundColor:"rgba(255, 255, 255, 1)",transform:"scale(1.05)",boxShadow:"0 3px 6px rgba(0, 0, 0, 0.15)"},opacity:v?.5:1,pointerEvents:v?"none":"auto",children:e})})})]})},aUe=({content:t,fontSize:e})=>typeof t=="string"&&t.includes("<")?(i=>{const o={bold:i.includes("<strong>")||i.includes("<b>"),italic:i.includes("<em>")||i.includes("<i>"),underline:i.includes("<u>")&&i.includes("</u>"),superscript:i.includes("<sup>")&&i.includes("</sup>"),subscript:i.includes("<sub>")&&i.includes("</sub>")},s=document.createElement("div");s.innerHTML=i;let a=s.textContent||s.innerText||i;if(o.superscript||o.subscript){let l="",c="",u="";if(o.superscript){const d=i.match(/^(.*?)<sup>(.*?)<\/sup>(.*)$/);d&&(l=d[1].replace(/<[^>]*>/g,""),c=d[2],u=d[3].replace(/<[^>]*>/g,""))}else if(o.subscript){const d=i.match(/^(.*?)<sub>(.*?)<\/sub>(.*)$/);d&&(l=d[1].replace(/<[^>]*>/g,""),c=d[2],u=d[3].replace(/<[^>]*>/g,""))}return h.jsxs(ft,{fontSize:e,color:"gray.800",fontWeight:o.bold?"bold":"medium",fontStyle:o.italic?"italic":"normal",textDecoration:o.underline?"underline":"none",textAlign:"center",px:2,py:.5,bg:"rgba(255,255,255,0.8)",borderRadius:"md",maxW:"90%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxShadow:"sm",fontFamily:"'Comic Neue', sans-serif",display:"inline-flex",alignItems:"baseline",children:[l,h.jsx(ft,{as:"span",fontSize:"0.7em",verticalAlign:o.superscript?"super":"sub",lineHeight:"1",children:c}),u]})}return h.jsx(ft,{fontSize:e,color:"gray.800",fontWeight:o.bold?"bold":"medium",fontStyle:o.italic?"italic":"normal",textDecoration:o.underline?"underline":"none",textAlign:"center",px:2,py:.5,bg:"rgba(255,255,255,0.8)",borderRadius:"md",maxW:"90%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxShadow:"sm",fontFamily:"'Comic Neue', sans-serif",children:a})})(t):h.jsx(ft,{fontSize:e,color:"gray.800",fontWeight:"medium",textAlign:"center",px:2,py:.5,bg:"rgba(255,255,255,0.8)",borderRadius:"md",maxW:"90%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxShadow:"sm",fontFamily:"'Comic Neue', sans-serif",children:t}),lUe=({category:t,items:e,onClick:n})=>{const r=Ro({base:"sm",md:"md"}),i=Ro({base:"xs",md:"sm"}),o=Ro({base:"80px",md:"90px",lg:"100px"});return h.jsxs(Kt,{spacing:1,align:"center",className:"basket","data-basket-id":t.name,position:"relative",children:[h.jsx(ft,{fontSize:r,fontWeight:"bold",color:"gray.700",textAlign:"center",mb:1,position:"absolute",top:"-25px",left:"50%",transform:"translateX(-50%)",whiteSpace:"nowrap",fontFamily:"'Comic Neue', sans-serif",children:t.name}),h.jsx(Et,{as:ml.div,whileHover:{scale:1.02},position:"relative",width:"100%",height:o,cursor:"pointer",onClick:n,sx:{position:"relative",borderRadius:"35% 35% 40% 40% / 30% 30% 70% 70%",background:"linear-gradient(180deg, #E3B778 0%, #D4A76A 100%)",overflow:"visible",transform:"perspective(1000px) rotateX(15deg)",transformOrigin:"bottom",boxShadow:`
            inset 0 5px 10px rgba(255,255,255,0.3),
            inset 0 -10px 20px rgba(139, 69, 19, 0.3),
            0 5px 15px rgba(0,0,0,0.1)
          `,transition:"all 0.3s ease","&::before":{content:'""',position:"absolute",top:"0",left:"0",right:"0",bottom:"0",background:`
              repeating-linear-gradient(
                45deg,
                transparent,
                transparent 5px,
                rgba(139, 69, 19, 0.1) 5px,
                rgba(139, 69, 19, 0.1) 10px
              )
            `,borderRadius:"inherit",opacity:.5}},children:h.jsx(Kt,{spacing:.5,align:"center",justify:"center",height:"100%",pt:2,pb:1,px:2,children:e.map((s,a)=>h.jsx(aUe,{content:s,fontSize:i},a))})})]})},cUe=({content:t,fontSize:e,noPadding:n=!1})=>typeof t=="string"&&t.includes("<")?(o=>{const s={bold:o.includes("<strong>")||o.includes("<b>"),italic:o.includes("<em>")||o.includes("<i>"),underline:o.includes("<u>")&&o.includes("</u>"),superscript:o.includes("<sup>")&&o.includes("</sup>"),subscript:o.includes("<sub>")&&o.includes("</sub>")},a=document.createElement("div");a.innerHTML=o;let l=a.textContent||a.innerText||o;if(s.superscript||s.subscript){let c="",u="",d="";if(s.superscript){const f=o.match(/^(.*?)<sup>(.*?)<\/sup>(.*)$/);f&&(c=f[1].replace(/<[^>]*>/g,""),u=f[2],d=f[3].replace(/<[^>]*>/g,""))}else if(s.subscript){const f=o.match(/^(.*?)<sub>(.*?)<\/sub>(.*)$/);f&&(c=f[1].replace(/<[^>]*>/g,""),u=f[2],d=f[3].replace(/<[^>]*>/g,""))}return h.jsxs(ft,{fontSize:e,color:"gray.700",letterSpacing:"0.5px",fontWeight:s.bold?"bold":"medium",fontStyle:s.italic?"italic":"normal",textDecoration:s.underline?"underline":"none",px:n?0:2,py:n?0:1,borderRadius:"md",fontFamily:"'Comic Neue', sans-serif",display:"inline-flex",alignItems:"baseline",children:[c,h.jsx(ft,{as:"span",fontSize:"0.7em",verticalAlign:s.superscript?"super":"sub",lineHeight:"1",children:u}),d]})}return h.jsx(ft,{fontSize:e,color:"gray.700",letterSpacing:"0.5px",fontWeight:s.bold?"bold":"medium",fontStyle:s.italic?"italic":"normal",textDecoration:s.underline?"underline":"none",px:n?0:2,py:n?0:1,borderRadius:"md",fontFamily:"'Comic Neue', sans-serif",children:l})})(t):h.jsx(ft,{fontSize:e,color:"gray.700",letterSpacing:"0.5px",fontWeight:"medium",px:n?0:2,py:n?0:1,borderRadius:"md",fontFamily:"'Comic Neue', sans-serif",children:t}),uUe=({gameState:t,gameAreaRef:e,onMouseMove:n,onGameAreaClick:r,onEggClick:i,onWordClick:o,enableTextToSpeech:s=!1,usePhonicsMode:a=!1,useAmazonPolly:l=!1,textToSpeechMode:c,containerType:u="eggs"})=>{const d=Ro({base:2,md:3,lg:4}),f=Ro({base:"300px",md:"400px",lg:"450px"}),p=Ro({base:"column",md:"row"}),b=Ro({base:"45px",md:"50px",lg:"55px"}),v=Ro({base:"120px",md:"140px",lg:"160px"}),m=Ro({base:2,md:3,lg:4});return h.jsx(Et,{width:"100vw",maxWidth:"100%",position:"relative",left:"50%",transform:"translateX(-50%)",bg:"blue.50",children:h.jsx(Et,{width:"100%",maxW:"1400px",mx:"auto",px:d,py:4,children:h.jsxs(Et,{ref:e,position:"relative",width:"100%",height:f,bg:"blue.100",borderRadius:"lg",overflow:"hidden",onMouseMove:n,onClick:r,cursor:t.isWordSelected?"pointer":"default",boxShadow:"lg",children:[h.jsx(Et,{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",opacity:.1,backgroundImage:"radial-gradient(circle at 1px 1px, gray 1px, transparent 0)",backgroundSize:"40px 40px"}),t.eggs.map(g=>h.jsx(Et,{position:"absolute",left:`${g.position.x}%`,top:`${g.position.y}%`,transform:"translate(-50%, -50%)",width:b,height:b,zIndex:g.cracked?2:1,children:h.jsx(sUe,{onClick:()=>i(g),item:g.word.text,category:g.word.category,cracked:g.cracked,onWordClick:(x,w,S)=>o({text:x,category:w},S),enableTextToSpeech:s,usePhonicsMode:a,useAmazonPolly:l,textToSpeechMode:c,containerType:u})},g.id)),h.jsx(fc,{position:"absolute",bottom:"10px",left:"0",right:"0",direction:p,justify:"center",align:"center",px:m,gap:m,children:t.baskets.map(g=>h.jsx(Et,{width:v,mb:{base:2,md:0},flex:{base:"1",md:"0 1 auto"},className:`basket-${g.id}`,children:h.jsx(lUe,{category:{name:g.name},items:g.items.map(x=>x.text),onClick:()=>{}})},g.id))}),t.isWordSelected&&t.selectedWord&&h.jsx(Et,{position:"absolute",left:`${t.ghostPosition.x}px`,top:`${t.ghostPosition.y}px`,transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:1e3,bg:"white",borderRadius:"md",boxShadow:"lg",p:2,children:h.jsx(cUe,{content:t.selectedWord.text,fontSize:{base:"sm",md:"md"},noPadding:!0})})]})})})},dUe=({gameState:t,onResetGame:e,onCloseGame:n})=>h.jsxs(fc,{position:"absolute",top:4,right:4,direction:{base:"column",md:"row"},justify:"flex-end",align:"center",gap:2,bg:"white",p:3,borderRadius:"lg",boxShadow:"md",fontFamily:"'Comic Neue', sans-serif",width:"auto",zIndex:10,children:[h.jsx(Ln,{spacing:4,children:h.jsxs(ft,{fontSize:{base:"md",md:"lg"},fontWeight:"bold",color:"blue.600",children:["Score: ",t.score]})}),t.isGameComplete&&h.jsxs(Ln,{spacing:4,ml:4,children:[h.jsx(pn,{colorScheme:"blue",onClick:e,size:{base:"sm",md:"md"},fontFamily:"'Comic Neue', sans-serif",children:"Play Again"}),h.jsx(pn,{colorScheme:"gray",onClick:n,size:{base:"sm",md:"md"},fontFamily:"'Comic Neue', sans-serif",children:"Close Game"})]})]}),fUe=({gameState:t,onClose:e})=>{const n=Ro({base:"sm",md:"md",lg:"xl"}),r=Pr(),{isTeacher:i,isStudent:o}=Dr(),s=()=>{e(),r(i?"/teacher":o?"/student":"/")};return h.jsxs($c,{isOpen:t.showHighScoreDisplayModal,onClose:s,size:n,children:[h.jsx(qc,{}),h.jsxs(Hc,{fontFamily:"'Comic Neue', sans-serif",children:[h.jsx(Gc,{textAlign:"center",children:t.isHighScore?"🏆 New High Score!":"🎉 Game Complete!"}),h.jsx(Yc,{}),h.jsx(Kc,{children:h.jsxs(Kt,{spacing:6,children:[h.jsxs(Kt,{spacing:2,children:[h.jsxs(ft,{fontSize:"xl",fontWeight:"bold",color:"blue.600",children:["Final Score: ",t.score]}),h.jsx(ft,{fontSize:"md",color:"gray.600",children:"Great job sorting the categories!"})]}),t.highScores.length>0&&h.jsxs(Et,{w:"full",children:[h.jsx(zr,{size:"md",mb:4,textAlign:"center",color:"purple.600",children:"🏆 High Scores"}),h.jsx(Kt,{spacing:2,w:"full",children:t.highScores.slice(0,10).map((a,l)=>h.jsxs(Ln,{w:"full",justify:"space-between",p:3,bg:l===0?"yellow.50":"gray.50",borderRadius:"md",border:l===0?"2px solid gold":"1px solid gray.200",children:[h.jsxs(Ln,{children:[h.jsxs(ft,{fontWeight:"bold",color:"purple.600",children:["#",l+1]}),h.jsx(ft,{fontWeight:"medium",children:a.playerName})]}),h.jsxs(lo,{colorScheme:l===0?"yellow":"blue",fontSize:"sm",px:2,py:1,children:[a.score," pts"]})]},a.id))})]})]})}),h.jsx(ov,{children:h.jsx(pn,{colorScheme:"blue",onClick:s,fontFamily:"'Comic Neue', sans-serif",children:"Close"})})]})]})},Al=mc({d:"M0,12a1.5,1.5,0,0,0,1.5,1.5h8.75a.25.25,0,0,1,.25.25V22.5a1.5,1.5,0,0,0,3,0V13.75a.25.25,0,0,1,.25-.25H22.5a1.5,1.5,0,0,0,0-3H13.75a.25.25,0,0,1-.25-.25V1.5a1.5,1.5,0,0,0-3,0v8.75a.25.25,0,0,1-.25.25H1.5A1.5,1.5,0,0,0,0,12Z",displayName:"AddIcon"}),Cx=mc({displayName:"ViewIcon",path:h.jsxs("g",{fill:"currentColor",children:[h.jsx("path",{d:"M23.432,10.524C20.787,7.614,16.4,4.538,12,4.6,7.6,4.537,3.213,7.615.568,10.524a2.211,2.211,0,0,0,0,2.948C3.182,16.351,7.507,19.4,11.839,19.4h.308c4.347,0,8.671-3.049,11.288-5.929A2.21,2.21,0,0,0,23.432,10.524ZM7.4,12A4.6,4.6,0,1,1,12,16.6,4.6,4.6,0,0,1,7.4,12Z"}),h.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),Ax=mc({displayName:"ViewOffIcon",path:h.jsxs("g",{fill:"currentColor",children:[h.jsx("path",{d:"M23.2,10.549a20.954,20.954,0,0,0-4.3-3.6l4-3.995a1,1,0,1,0-1.414-1.414l-.018.018a.737.737,0,0,1-.173.291l-19.5,19.5c-.008.007-.018.009-.026.017a1,1,0,0,0,1.631,1.088l4.146-4.146a11.26,11.26,0,0,0,4.31.939h.3c4.256,0,8.489-2.984,11.051-5.8A2.171,2.171,0,0,0,23.2,10.549ZM16.313,13.27a4.581,4.581,0,0,1-3,3.028,4.3,4.3,0,0,1-3.1-.19.253.253,0,0,1-.068-.407l5.56-5.559a.252.252,0,0,1,.407.067A4.3,4.3,0,0,1,16.313,13.27Z"}),h.jsx("path",{d:"M7.615,13.4a.244.244,0,0,0,.061-.24A4.315,4.315,0,0,1,7.5,12,4.5,4.5,0,0,1,12,7.5a4.276,4.276,0,0,1,1.16.173.244.244,0,0,0,.24-.062l1.941-1.942a.254.254,0,0,0-.1-.421A10.413,10.413,0,0,0,12,4.75C7.7,4.692,3.4,7.7.813,10.549a2.15,2.15,0,0,0-.007,2.9,21.209,21.209,0,0,0,3.438,3.03.256.256,0,0,0,.326-.029Z"})]})}),Tl=mc({displayName:"DeleteIcon",path:h.jsx("g",{fill:"currentColor",children:h.jsx("path",{d:"M19.452 7.5H4.547a.5.5 0 00-.5.545l1.287 14.136A2 2 0 007.326 24h9.347a2 2 0 001.992-1.819L19.95 8.045a.5.5 0 00-.129-.382.5.5 0 00-.369-.163zm-9.2 13a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zm5 0a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zM22 4h-4.75a.25.25 0 01-.25-.25V2.5A2.5 2.5 0 0014.5 0h-5A2.5 2.5 0 007 2.5v1.25a.25.25 0 01-.25.25H2a1 1 0 000 2h20a1 1 0 000-2zM9 3.75V2.5a.5.5 0 01.5-.5h5a.5.5 0 01.5.5v1.25a.25.25 0 01-.25.25h-5.5A.25.25 0 019 3.75z"})})}),wee=mc({displayName:"RepeatIcon",path:h.jsxs("g",{fill:"currentColor",children:[h.jsx("path",{d:"M10.319,4.936a7.239,7.239,0,0,1,7.1,2.252,1.25,1.25,0,1,0,1.872-1.657A9.737,9.737,0,0,0,9.743,2.5,10.269,10.269,0,0,0,2.378,9.61a.249.249,0,0,1-.271.178l-1.033-.13A.491.491,0,0,0,.6,9.877a.5.5,0,0,0-.019.526l2.476,4.342a.5.5,0,0,0,.373.248.43.43,0,0,0,.062,0,.5.5,0,0,0,.359-.152l3.477-3.593a.5.5,0,0,0-.3-.844L5.15,10.172a.25.25,0,0,1-.2-.333A7.7,7.7,0,0,1,10.319,4.936Z"}),h.jsx("path",{d:"M23.406,14.1a.5.5,0,0,0,.015-.526l-2.5-4.329A.5.5,0,0,0,20.546,9a.489.489,0,0,0-.421.151l-3.456,3.614a.5.5,0,0,0,.3.842l1.848.221a.249.249,0,0,1,.183.117.253.253,0,0,1,.023.216,7.688,7.688,0,0,1-5.369,4.9,7.243,7.243,0,0,1-7.1-2.253,1.25,1.25,0,1,0-1.872,1.656,9.74,9.74,0,0,0,9.549,3.03,10.261,10.261,0,0,0,7.369-7.12.251.251,0,0,1,.27-.179l1.058.127a.422.422,0,0,0,.06,0A.5.5,0,0,0,23.406,14.1Z"})]})}),hUe=mc({displayName:"EditIcon",path:h.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",children:[h.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),h.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),pUe=mc({d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z",displayName:"ChevronRightIcon"}),Gv=mc({displayName:"ChevronDownIcon",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}),kb=mc({d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z",displayName:"ChevronUpIcon"}),CV=mc({d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z",displayName:"ArrowBackIcon"}),mUe=mc({d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"}),Dp=50,Rp=3,Tx=10,Mx=2;function gUe(){this.__data__=[],this.size=0}var vUe=gUe;function yUe(t,e){return t===e||t!==t&&e!==e}var See=yUe,xUe=See;function bUe(t,e){for(var n=t.length;n--;)if(xUe(t[n][0],e))return n;return-1}var zT=bUe,wUe=zT,SUe=Array.prototype,_Ue=SUe.splice;function EUe(t){var e=this.__data__,n=wUe(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():_Ue.call(e,n,1),--this.size,!0}var CUe=EUe,AUe=zT;function TUe(t){var e=this.__data__,n=AUe(e,t);return n<0?void 0:e[n][1]}var MUe=TUe,PUe=zT;function DUe(t){return PUe(this.__data__,t)>-1}var RUe=DUe,IUe=zT;function kUe(t,e){var n=this.__data__,r=IUe(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var FUe=kUe,OUe=vUe,NUe=CUe,LUe=MUe,BUe=RUe,jUe=FUe;function h0(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}h0.prototype.clear=OUe;h0.prototype.delete=NUe;h0.prototype.get=LUe;h0.prototype.has=BUe;h0.prototype.set=jUe;var VT=h0,UUe=VT;function zUe(){this.__data__=new UUe,this.size=0}var VUe=zUe;function WUe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var $Ue=WUe;function HUe(t){return this.__data__.get(t)}var GUe=HUe;function qUe(t){return this.__data__.has(t)}var KUe=qUe,YUe=typeof Wi=="object"&&Wi&&Wi.Object===Object&&Wi,_ee=YUe,XUe=_ee,QUe=typeof self=="object"&&self&&self.Object===Object&&self,ZUe=XUe||QUe||Function("return this")(),uu=ZUe,JUe=uu,e6e=JUe.Symbol,SL=e6e,AV=SL,Eee=Object.prototype,t6e=Eee.hasOwnProperty,n6e=Eee.toString,uy=AV?AV.toStringTag:void 0;function r6e(t){var e=t6e.call(t,uy),n=t[uy];try{t[uy]=void 0;var r=!0}catch(o){}var i=n6e.call(t);return r&&(e?t[uy]=n:delete t[uy]),i}var i6e=r6e,o6e=Object.prototype,s6e=o6e.toString;function a6e(t){return s6e.call(t)}var l6e=a6e,TV=SL,c6e=i6e,u6e=l6e,d6e="[object Null]",f6e="[object Undefined]",MV=TV?TV.toStringTag:void 0;function h6e(t){return t==null?t===void 0?f6e:d6e:MV&&MV in Object(t)?c6e(t):u6e(t)}var Vw=h6e;function p6e(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Ww=p6e,m6e=Vw,g6e=Ww,v6e="[object AsyncFunction]",y6e="[object Function]",x6e="[object GeneratorFunction]",b6e="[object Proxy]";function w6e(t){if(!g6e(t))return!1;var e=m6e(t);return e==y6e||e==x6e||e==v6e||e==b6e}var Cee=w6e,S6e=uu,_6e=S6e["__core-js_shared__"],E6e=_6e,XP=E6e,PV=function(){var t=/[^.]+$/.exec(XP&&XP.keys&&XP.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function C6e(t){return!!PV&&PV in t}var A6e=C6e,T6e=Function.prototype,M6e=T6e.toString;function P6e(t){if(t!=null){try{return M6e.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var Aee=P6e,D6e=Cee,R6e=A6e,I6e=Ww,k6e=Aee,F6e=/[\\^$.*+?()[\]{}|]/g,O6e=/^\[object .+?Constructor\]$/,N6e=Function.prototype,L6e=Object.prototype,B6e=N6e.toString,j6e=L6e.hasOwnProperty,U6e=RegExp("^"+B6e.call(j6e).replace(F6e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function z6e(t){if(!I6e(t)||R6e(t))return!1;var e=D6e(t)?U6e:O6e;return e.test(k6e(t))}var V6e=z6e;function W6e(t,e){return t==null?void 0:t[e]}var $6e=W6e,H6e=V6e,G6e=$6e;function q6e(t,e){var n=G6e(t,e);return H6e(n)?n:void 0}var p0=q6e,K6e=p0,Y6e=uu,X6e=K6e(Y6e,"Map"),_L=X6e,Q6e=p0,Z6e=Q6e(Object,"create"),WT=Z6e,DV=WT;function J6e(){this.__data__=DV?DV(null):{},this.size=0}var eze=J6e;function tze(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var nze=tze,rze=WT,ize="__lodash_hash_undefined__",oze=Object.prototype,sze=oze.hasOwnProperty;function aze(t){var e=this.__data__;if(rze){var n=e[t];return n===ize?void 0:n}return sze.call(e,t)?e[t]:void 0}var lze=aze,cze=WT,uze=Object.prototype,dze=uze.hasOwnProperty;function fze(t){var e=this.__data__;return cze?e[t]!==void 0:dze.call(e,t)}var hze=fze,pze=WT,mze="__lodash_hash_undefined__";function gze(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=pze&&e===void 0?mze:e,this}var vze=gze,yze=eze,xze=nze,bze=lze,wze=hze,Sze=vze;function m0(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}m0.prototype.clear=yze;m0.prototype.delete=xze;m0.prototype.get=bze;m0.prototype.has=wze;m0.prototype.set=Sze;var _ze=m0,RV=_ze,Eze=VT,Cze=_L;function Aze(){this.size=0,this.__data__={hash:new RV,map:new(Cze||Eze),string:new RV}}var Tze=Aze;function Mze(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Pze=Mze,Dze=Pze;function Rze(t,e){var n=t.__data__;return Dze(e)?n[typeof e=="string"?"string":"hash"]:n.map}var $T=Rze,Ize=$T;function kze(t){var e=Ize(this,t).delete(t);return this.size-=e?1:0,e}var Fze=kze,Oze=$T;function Nze(t){return Oze(this,t).get(t)}var Lze=Nze,Bze=$T;function jze(t){return Bze(this,t).has(t)}var Uze=jze,zze=$T;function Vze(t,e){var n=zze(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Wze=Vze,$ze=Tze,Hze=Fze,Gze=Lze,qze=Uze,Kze=Wze;function g0(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}g0.prototype.clear=$ze;g0.prototype.delete=Hze;g0.prototype.get=Gze;g0.prototype.has=qze;g0.prototype.set=Kze;var Tee=g0,Yze=VT,Xze=_L,Qze=Tee,Zze=200;function Jze(t,e){var n=this.__data__;if(n instanceof Yze){var r=n.__data__;if(!Xze||r.length<Zze-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Qze(r)}return n.set(t,e),this.size=n.size,this}var e8e=Jze,t8e=VT,n8e=VUe,r8e=$Ue,i8e=GUe,o8e=KUe,s8e=e8e;function v0(t){var e=this.__data__=new t8e(t);this.size=e.size}v0.prototype.clear=n8e;v0.prototype.delete=r8e;v0.prototype.get=i8e;v0.prototype.has=o8e;v0.prototype.set=s8e;var a8e=v0,l8e="__lodash_hash_undefined__";function c8e(t){return this.__data__.set(t,l8e),this}var u8e=c8e;function d8e(t){return this.__data__.has(t)}var f8e=d8e,h8e=Tee,p8e=u8e,m8e=f8e;function VC(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new h8e;++e<n;)this.add(t[e])}VC.prototype.add=VC.prototype.push=p8e;VC.prototype.has=m8e;var g8e=VC;function v8e(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var y8e=v8e;function x8e(t,e){return t.has(e)}var b8e=x8e,w8e=g8e,S8e=y8e,_8e=b8e,E8e=1,C8e=2;function A8e(t,e,n,r,i,o){var s=n&E8e,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(t),u=o.get(e);if(c&&u)return c==e&&u==t;var d=-1,f=!0,p=n&C8e?new w8e:void 0;for(o.set(t,e),o.set(e,t);++d<a;){var b=t[d],v=e[d];if(r)var m=s?r(v,b,d,e,t,o):r(b,v,d,t,e,o);if(m!==void 0){if(m)continue;f=!1;break}if(p){if(!S8e(e,function(g,x){if(!_8e(p,x)&&(b===g||i(b,g,n,r,o)))return p.push(x)})){f=!1;break}}else if(!(b===v||i(b,v,n,r,o))){f=!1;break}}return o.delete(t),o.delete(e),f}var Mee=A8e,T8e=uu,M8e=T8e.Uint8Array,P8e=M8e;function D8e(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var R8e=D8e;function I8e(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var k8e=I8e,IV=SL,kV=P8e,F8e=See,O8e=Mee,N8e=R8e,L8e=k8e,B8e=1,j8e=2,U8e="[object Boolean]",z8e="[object Date]",V8e="[object Error]",W8e="[object Map]",$8e="[object Number]",H8e="[object RegExp]",G8e="[object Set]",q8e="[object String]",K8e="[object Symbol]",Y8e="[object ArrayBuffer]",X8e="[object DataView]",FV=IV?IV.prototype:void 0,QP=FV?FV.valueOf:void 0;function Q8e(t,e,n,r,i,o,s){switch(n){case X8e:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Y8e:return!(t.byteLength!=e.byteLength||!o(new kV(t),new kV(e)));case U8e:case z8e:case $8e:return F8e(+t,+e);case V8e:return t.name==e.name&&t.message==e.message;case H8e:case q8e:return t==e+"";case W8e:var a=N8e;case G8e:var l=r&B8e;if(a||(a=L8e),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;r|=j8e,s.set(t,e);var u=O8e(a(t),a(e),r,i,o,s);return s.delete(t),u;case K8e:if(QP)return QP.call(t)==QP.call(e)}return!1}var Z8e=Q8e;function J8e(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var eVe=J8e,tVe=Array.isArray,EL=tVe,nVe=eVe,rVe=EL;function iVe(t,e,n){var r=e(t);return rVe(t)?r:nVe(r,n(t))}var oVe=iVe;function sVe(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}var aVe=sVe;function lVe(){return[]}var cVe=lVe,uVe=aVe,dVe=cVe,fVe=Object.prototype,hVe=fVe.propertyIsEnumerable,OV=Object.getOwnPropertySymbols,pVe=OV?function(t){return t==null?[]:(t=Object(t),uVe(OV(t),function(e){return hVe.call(t,e)}))}:dVe,mVe=pVe;function gVe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var vVe=gVe;function yVe(t){return t!=null&&typeof t=="object"}var $w=yVe,xVe=Vw,bVe=$w,wVe="[object Arguments]";function SVe(t){return bVe(t)&&xVe(t)==wVe}var _Ve=SVe,NV=_Ve,EVe=$w,Pee=Object.prototype,CVe=Pee.hasOwnProperty,AVe=Pee.propertyIsEnumerable,TVe=NV(function(){return arguments}())?NV:function(t){return EVe(t)&&CVe.call(t,"callee")&&!AVe.call(t,"callee")},MVe=TVe,WC={exports:{}};function PVe(){return!1}var DVe=PVe;WC.exports;(function(t,e){var n=uu,r=DVe,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,s=o&&o.exports===i,a=s?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;t.exports=c})(WC,WC.exports);var Dee=WC.exports,RVe=9007199254740991,IVe=/^(?:0|[1-9]\d*)$/;function kVe(t,e){var n=typeof t;return e=e==null?RVe:e,!!e&&(n=="number"||n!="symbol"&&IVe.test(t))&&t>-1&&t%1==0&&t<e}var FVe=kVe,OVe=9007199254740991;function NVe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=OVe}var Ree=NVe,LVe=Vw,BVe=Ree,jVe=$w,UVe="[object Arguments]",zVe="[object Array]",VVe="[object Boolean]",WVe="[object Date]",$Ve="[object Error]",HVe="[object Function]",GVe="[object Map]",qVe="[object Number]",KVe="[object Object]",YVe="[object RegExp]",XVe="[object Set]",QVe="[object String]",ZVe="[object WeakMap]",JVe="[object ArrayBuffer]",e9e="[object DataView]",t9e="[object Float32Array]",n9e="[object Float64Array]",r9e="[object Int8Array]",i9e="[object Int16Array]",o9e="[object Int32Array]",s9e="[object Uint8Array]",a9e="[object Uint8ClampedArray]",l9e="[object Uint16Array]",c9e="[object Uint32Array]",gi={};gi[t9e]=gi[n9e]=gi[r9e]=gi[i9e]=gi[o9e]=gi[s9e]=gi[a9e]=gi[l9e]=gi[c9e]=!0;gi[UVe]=gi[zVe]=gi[JVe]=gi[VVe]=gi[e9e]=gi[WVe]=gi[$Ve]=gi[HVe]=gi[GVe]=gi[qVe]=gi[KVe]=gi[YVe]=gi[XVe]=gi[QVe]=gi[ZVe]=!1;function u9e(t){return jVe(t)&&BVe(t.length)&&!!gi[LVe(t)]}var d9e=u9e;function f9e(t){return function(e){return t(e)}}var h9e=f9e,$C={exports:{}};$C.exports;(function(t,e){var n=_ee,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,s=o&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch(c){}}();t.exports=a})($C,$C.exports);var p9e=$C.exports,m9e=d9e,g9e=h9e,LV=p9e,BV=LV&&LV.isTypedArray,v9e=BV?g9e(BV):m9e,Iee=v9e,y9e=vVe,x9e=MVe,b9e=EL,w9e=Dee,S9e=FVe,_9e=Iee,E9e=Object.prototype,C9e=E9e.hasOwnProperty;function A9e(t,e){var n=b9e(t),r=!n&&x9e(t),i=!n&&!r&&w9e(t),o=!n&&!r&&!i&&_9e(t),s=n||r||i||o,a=s?y9e(t.length,String):[],l=a.length;for(var c in t)(e||C9e.call(t,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||S9e(c,l)))&&a.push(c);return a}var T9e=A9e,M9e=Object.prototype;function P9e(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||M9e;return t===n}var D9e=P9e;function R9e(t,e){return function(n){return t(e(n))}}var I9e=R9e,k9e=I9e,F9e=k9e(Object.keys,Object),O9e=F9e,N9e=D9e,L9e=O9e,B9e=Object.prototype,j9e=B9e.hasOwnProperty;function U9e(t){if(!N9e(t))return L9e(t);var e=[];for(var n in Object(t))j9e.call(t,n)&&n!="constructor"&&e.push(n);return e}var z9e=U9e,V9e=Cee,W9e=Ree;function $9e(t){return t!=null&&W9e(t.length)&&!V9e(t)}var H9e=$9e,G9e=T9e,q9e=z9e,K9e=H9e;function Y9e(t){return K9e(t)?G9e(t):q9e(t)}var X9e=Y9e,Q9e=oVe,Z9e=mVe,J9e=X9e;function eWe(t){return Q9e(t,J9e,Z9e)}var tWe=eWe,jV=tWe,nWe=1,rWe=Object.prototype,iWe=rWe.hasOwnProperty;function oWe(t,e,n,r,i,o){var s=n&nWe,a=jV(t),l=a.length,c=jV(e),u=c.length;if(l!=u&&!s)return!1;for(var d=l;d--;){var f=a[d];if(!(s?f in e:iWe.call(e,f)))return!1}var p=o.get(t),b=o.get(e);if(p&&b)return p==e&&b==t;var v=!0;o.set(t,e),o.set(e,t);for(var m=s;++d<l;){f=a[d];var g=t[f],x=e[f];if(r)var w=s?r(x,g,f,e,t,o):r(g,x,f,t,e,o);if(!(w===void 0?g===x||i(g,x,n,r,o):w)){v=!1;break}m||(m=f=="constructor")}if(v&&!m){var S=t.constructor,P=e.constructor;S!=P&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof P=="function"&&P instanceof P)&&(v=!1)}return o.delete(t),o.delete(e),v}var sWe=oWe,aWe=p0,lWe=uu,cWe=aWe(lWe,"DataView"),uWe=cWe,dWe=p0,fWe=uu,hWe=dWe(fWe,"Promise"),pWe=hWe,mWe=p0,gWe=uu,vWe=mWe(gWe,"Set"),yWe=vWe,xWe=p0,bWe=uu,wWe=xWe(bWe,"WeakMap"),SWe=wWe,xk=uWe,bk=_L,wk=pWe,Sk=yWe,_k=SWe,kee=Vw,y0=Aee,UV="[object Map]",_We="[object Object]",zV="[object Promise]",VV="[object Set]",WV="[object WeakMap]",$V="[object DataView]",EWe=y0(xk),CWe=y0(bk),AWe=y0(wk),TWe=y0(Sk),MWe=y0(_k),Yh=kee;(xk&&Yh(new xk(new ArrayBuffer(1)))!=$V||bk&&Yh(new bk)!=UV||wk&&Yh(wk.resolve())!=zV||Sk&&Yh(new Sk)!=VV||_k&&Yh(new _k)!=WV)&&(Yh=function(t){var e=kee(t),n=e==_We?t.constructor:void 0,r=n?y0(n):"";if(r)switch(r){case EWe:return $V;case CWe:return UV;case AWe:return zV;case TWe:return VV;case MWe:return WV}return e});var PWe=Yh,ZP=a8e,DWe=Mee,RWe=Z8e,IWe=sWe,HV=PWe,GV=EL,qV=Dee,kWe=Iee,FWe=1,KV="[object Arguments]",YV="[object Array]",LS="[object Object]",OWe=Object.prototype,XV=OWe.hasOwnProperty;function NWe(t,e,n,r,i,o){var s=GV(t),a=GV(e),l=s?YV:HV(t),c=a?YV:HV(e);l=l==KV?LS:l,c=c==KV?LS:c;var u=l==LS,d=c==LS,f=l==c;if(f&&qV(t)){if(!qV(e))return!1;s=!0,u=!1}if(f&&!u)return o||(o=new ZP),s||kWe(t)?DWe(t,e,n,r,i,o):RWe(t,e,l,n,r,i,o);if(!(n&FWe)){var p=u&&XV.call(t,"__wrapped__"),b=d&&XV.call(e,"__wrapped__");if(p||b){var v=p?t.value():t,m=b?e.value():e;return o||(o=new ZP),i(v,m,n,r,o)}}return f?(o||(o=new ZP),IWe(t,e,n,r,i,o)):!1}var LWe=NWe,BWe=LWe,QV=$w;function Fee(t,e,n,r,i){return t===e?!0:t==null||e==null||!QV(t)&&!QV(e)?t!==t&&e!==e:BWe(t,e,n,r,Fee,i)}var jWe=Fee,UWe=jWe;function zWe(t,e){return UWe(t,e)}var Oee=zWe;const JP=Ad(Oee);var Nee={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(t,e){(function(r,i){t.exports=i()})(typeof self!="undefined"?self:Wi,function(){return function(n){var r={};function i(o){if(r[o])return r[o].exports;var s=r[o]={i:o,l:!1,exports:{}};return n[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=n,i.c=r,i.d=function(o,s,a){i.o(o,s)||Object.defineProperty(o,s,{configurable:!1,enumerable:!0,get:a})},i.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(s,"a",s),s},i.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},i.p="",i(i.s=109)}([function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(17),s=i(18),a=i(19),l=i(45),c=i(46),u=i(47),d=i(48),f=i(49),p=i(12),b=i(32),v=i(33),m=i(31),g=i(1),x={Scope:g.Scope,create:g.create,find:g.find,query:g.query,register:g.register,Container:o.default,Format:s.default,Leaf:a.default,Embed:d.default,Scroll:l.default,Block:u.default,Inline:c.default,Text:f.default,Attributor:{Attribute:p.default,Class:b.default,Style:v.default,Store:m.default}};r.default=x},function(n,r,i){var o=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,x){g.__proto__=x}||function(g,x){for(var w in x)x.hasOwnProperty(w)&&(g[w]=x[w])};return function(g,x){m(g,x);function w(){this.constructor=g}g.prototype=x===null?Object.create(x):(w.prototype=x.prototype,new w)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=function(m){o(g,m);function g(x){var w=this;return x="[Parchment] "+x,w=m.call(this,x)||this,w.message=x,w.name=w.constructor.name,w}return g}(Error);r.ParchmentError=s;var a={},l={},c={},u={};r.DATA_KEY="__blot";var d;(function(m){m[m.TYPE=3]="TYPE",m[m.LEVEL=12]="LEVEL",m[m.ATTRIBUTE=13]="ATTRIBUTE",m[m.BLOT=14]="BLOT",m[m.INLINE=7]="INLINE",m[m.BLOCK=11]="BLOCK",m[m.BLOCK_BLOT=10]="BLOCK_BLOT",m[m.INLINE_BLOT=6]="INLINE_BLOT",m[m.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",m[m.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",m[m.ANY=15]="ANY"})(d=r.Scope||(r.Scope={}));function f(m,g){var x=b(m);if(x==null)throw new s("Unable to create "+m+" blot");var w=x,S=m instanceof Node||m.nodeType===Node.TEXT_NODE?m:w.create(g);return new w(S,g)}r.create=f;function p(m,g){return g===void 0&&(g=!1),m==null?null:m[r.DATA_KEY]!=null?m[r.DATA_KEY].blot:g?p(m.parentNode,g):null}r.find=p;function b(m,g){g===void 0&&(g=d.ANY);var x;if(typeof m=="string")x=u[m]||a[m];else if(m instanceof Text||m.nodeType===Node.TEXT_NODE)x=u.text;else if(typeof m=="number")m&d.LEVEL&d.BLOCK?x=u.block:m&d.LEVEL&d.INLINE&&(x=u.inline);else if(m instanceof HTMLElement){var w=(m.getAttribute("class")||"").split(/\s+/);for(var S in w)if(x=l[w[S]],x)break;x=x||c[m.tagName]}return x==null?null:g&d.LEVEL&x.scope&&g&d.TYPE&x.scope?x:null}r.query=b;function v(){for(var m=[],g=0;g<arguments.length;g++)m[g]=arguments[g];if(m.length>1)return m.map(function(S){return v(S)});var x=m[0];if(typeof x.blotName!="string"&&typeof x.attrName!="string")throw new s("Invalid definition");if(x.blotName==="abstract")throw new s("Cannot register abstract class");if(u[x.blotName||x.attrName]=x,typeof x.keyName=="string")a[x.keyName]=x;else if(x.className!=null&&(l[x.className]=x),x.tagName!=null){Array.isArray(x.tagName)?x.tagName=x.tagName.map(function(S){return S.toUpperCase()}):x.tagName=x.tagName.toUpperCase();var w=Array.isArray(x.tagName)?x.tagName:[x.tagName];w.forEach(function(S){(c[S]==null||x.className==null)&&(c[S]=x)})}return x}r.register=v},function(n,r,i){var o=i(51),s=i(11),a=i(3),l=i(20),c="\0",u=function(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]};u.prototype.insert=function(d,f){var p={};return d.length===0?this:(p.insert=d,f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(p.attributes=f),this.push(p))},u.prototype.delete=function(d){return d<=0?this:this.push({delete:d})},u.prototype.retain=function(d,f){if(d<=0)return this;var p={retain:d};return f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(p.attributes=f),this.push(p)},u.prototype.push=function(d){var f=this.ops.length,p=this.ops[f-1];if(d=a(!0,{},d),typeof p=="object"){if(typeof d.delete=="number"&&typeof p.delete=="number")return this.ops[f-1]={delete:p.delete+d.delete},this;if(typeof p.delete=="number"&&d.insert!=null&&(f-=1,p=this.ops[f-1],typeof p!="object"))return this.ops.unshift(d),this;if(s(d.attributes,p.attributes)){if(typeof d.insert=="string"&&typeof p.insert=="string")return this.ops[f-1]={insert:p.insert+d.insert},typeof d.attributes=="object"&&(this.ops[f-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof p.retain=="number")return this.ops[f-1]={retain:p.retain+d.retain},typeof d.attributes=="object"&&(this.ops[f-1].attributes=d.attributes),this}}return f===this.ops.length?this.ops.push(d):this.ops.splice(f,0,d),this},u.prototype.chop=function(){var d=this.ops[this.ops.length-1];return d&&d.retain&&!d.attributes&&this.ops.pop(),this},u.prototype.filter=function(d){return this.ops.filter(d)},u.prototype.forEach=function(d){this.ops.forEach(d)},u.prototype.map=function(d){return this.ops.map(d)},u.prototype.partition=function(d){var f=[],p=[];return this.forEach(function(b){var v=d(b)?f:p;v.push(b)}),[f,p]},u.prototype.reduce=function(d,f){return this.ops.reduce(d,f)},u.prototype.changeLength=function(){return this.reduce(function(d,f){return f.insert?d+l.length(f):f.delete?d-f.delete:d},0)},u.prototype.length=function(){return this.reduce(function(d,f){return d+l.length(f)},0)},u.prototype.slice=function(d,f){d=d||0,typeof f!="number"&&(f=1/0);for(var p=[],b=l.iterator(this.ops),v=0;v<f&&b.hasNext();){var m;v<d?m=b.next(d-v):(m=b.next(f-v),p.push(m)),v+=l.length(m)}return new u(p)},u.prototype.compose=function(d){var f=l.iterator(this.ops),p=l.iterator(d.ops),b=[],v=p.peek();if(v!=null&&typeof v.retain=="number"&&v.attributes==null){for(var m=v.retain;f.peekType()==="insert"&&f.peekLength()<=m;)m-=f.peekLength(),b.push(f.next());v.retain-m>0&&p.next(v.retain-m)}for(var g=new u(b);f.hasNext()||p.hasNext();)if(p.peekType()==="insert")g.push(p.next());else if(f.peekType()==="delete")g.push(f.next());else{var x=Math.min(f.peekLength(),p.peekLength()),w=f.next(x),S=p.next(x);if(typeof S.retain=="number"){var P={};typeof w.retain=="number"?P.retain=x:P.insert=w.insert;var I=l.attributes.compose(w.attributes,S.attributes,typeof w.retain=="number");if(I&&(P.attributes=I),g.push(P),!p.hasNext()&&s(g.ops[g.ops.length-1],P)){var M=new u(f.rest());return g.concat(M).chop()}}else typeof S.delete=="number"&&typeof w.retain=="number"&&g.push(S)}return g.chop()},u.prototype.concat=function(d){var f=new u(this.ops.slice());return d.ops.length>0&&(f.push(d.ops[0]),f.ops=f.ops.concat(d.ops.slice(1))),f},u.prototype.diff=function(d,f){if(this.ops===d.ops)return new u;var p=[this,d].map(function(x){return x.map(function(w){if(w.insert!=null)return typeof w.insert=="string"?w.insert:c;var S=x===d?"on":"with";throw new Error("diff() called "+S+" non-document")}).join("")}),b=new u,v=o(p[0],p[1],f),m=l.iterator(this.ops),g=l.iterator(d.ops);return v.forEach(function(x){for(var w=x[1].length;w>0;){var S=0;switch(x[0]){case o.INSERT:S=Math.min(g.peekLength(),w),b.push(g.next(S));break;case o.DELETE:S=Math.min(w,m.peekLength()),m.next(S),b.delete(S);break;case o.EQUAL:S=Math.min(m.peekLength(),g.peekLength(),w);var P=m.next(S),I=g.next(S);s(P.insert,I.insert)?b.retain(S,l.attributes.diff(P.attributes,I.attributes)):b.push(I).delete(S);break}w-=S}}),b.chop()},u.prototype.eachLine=function(d,f){f=f||`
`;for(var p=l.iterator(this.ops),b=new u,v=0;p.hasNext();){if(p.peekType()!=="insert")return;var m=p.peek(),g=l.length(m)-p.peekLength(),x=typeof m.insert=="string"?m.insert.indexOf(f,g)-g:-1;if(x<0)b.push(p.next());else if(x>0)b.push(p.next(x));else{if(d(b,p.next(1).attributes||{},v)===!1)return;v+=1,b=new u}}b.length()>0&&d(b,{},v)},u.prototype.transform=function(d,f){if(f=!!f,typeof d=="number")return this.transformPosition(d,f);for(var p=l.iterator(this.ops),b=l.iterator(d.ops),v=new u;p.hasNext()||b.hasNext();)if(p.peekType()==="insert"&&(f||b.peekType()!=="insert"))v.retain(l.length(p.next()));else if(b.peekType()==="insert")v.push(b.next());else{var m=Math.min(p.peekLength(),b.peekLength()),g=p.next(m),x=b.next(m);if(g.delete)continue;x.delete?v.push(x):v.retain(m,l.attributes.transform(g.attributes,x.attributes,f))}return v.chop()},u.prototype.transformPosition=function(d,f){f=!!f;for(var p=l.iterator(this.ops),b=0;p.hasNext()&&b<=d;){var v=p.peekLength(),m=p.peekType();if(p.next(),m==="delete"){d-=Math.min(v,d-b);continue}else m==="insert"&&(b<d||!f)&&(d+=v);b+=v}return d},n.exports=u},function(n,r){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=function(p){return typeof Array.isArray=="function"?Array.isArray(p):o.call(p)==="[object Array]"},c=function(p){if(!p||o.call(p)!=="[object Object]")return!1;var b=i.call(p,"constructor"),v=p.constructor&&p.constructor.prototype&&i.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!b&&!v)return!1;var m;for(m in p);return typeof m=="undefined"||i.call(p,m)},u=function(p,b){s&&b.name==="__proto__"?s(p,b.name,{enumerable:!0,configurable:!0,value:b.newValue,writable:!0}):p[b.name]=b.newValue},d=function(p,b){if(b==="__proto__")if(i.call(p,b)){if(a)return a(p,b).value}else return;return p[b]};n.exports=function f(){var p,b,v,m,g,x,w=arguments[0],S=1,P=arguments.length,I=!1;for(typeof w=="boolean"&&(I=w,w=arguments[1]||{},S=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});S<P;++S)if(p=arguments[S],p!=null)for(b in p)v=d(w,b),m=d(p,b),w!==m&&(I&&m&&(c(m)||(g=l(m)))?(g?(g=!1,x=v&&l(v)?v:[]):x=v&&c(v)?v:{},u(w,{name:b,newValue:f(I,x,m)})):typeof m!="undefined"&&u(w,{name:b,newValue:m}));return w}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var o=function(){function A(R,F){for(var L=0;L<F.length;L++){var N=F[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(R,N.key,N)}}return function(R,F,L){return F&&A(R.prototype,F),L&&A(R,L),R}}(),s=function A(R,F,L){R===null&&(R=Function.prototype);var N=Object.getOwnPropertyDescriptor(R,F);if(N===void 0){var U=Object.getPrototypeOf(R);return U===null?void 0:A(U,F,L)}else{if("value"in N)return N.value;var $=N.get;return $===void 0?void 0:$.call(L)}},a=i(3),l=w(a),c=i(2),u=w(c),d=i(0),f=w(d),p=i(16),b=w(p),v=i(6),m=w(v),g=i(7),x=w(g);function w(A){return A&&A.__esModule?A:{default:A}}function S(A,R){if(!(A instanceof R))throw new TypeError("Cannot call a class as a function")}function P(A,R){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:A}function I(A,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);A.prototype=Object.create(R&&R.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(A,R):A.__proto__=R)}var M=1,D=function(A){I(R,A);function R(){return S(this,R),P(this,(R.__proto__||Object.getPrototypeOf(R)).apply(this,arguments))}return o(R,[{key:"attach",value:function(){s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"attach",this).call(this),this.attributes=new f.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new u.default().insert(this.value(),(0,l.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(L,N){var U=f.default.query(L,f.default.Scope.BLOCK_ATTRIBUTE);U!=null&&this.attributes.attribute(U,N)}},{key:"formatAt",value:function(L,N,U,$){this.format(U,$)}},{key:"insertAt",value:function(L,N,U){if(typeof N=="string"&&N.endsWith(`
`)){var $=f.default.create(E.blotName);this.parent.insertBefore($,L===0?this:this.next),$.insertAt(0,N.slice(0,-1))}else s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,L,N,U)}}]),R}(f.default.Embed);D.scope=f.default.Scope.BLOCK_BLOT;var E=function(A){I(R,A);function R(F){S(this,R);var L=P(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,F));return L.cache={},L}return o(R,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(f.default.Leaf).reduce(function(L,N){return N.length()===0?L:L.insert(N.value(),_(N))},new u.default).insert(`
`,_(this))),this.cache.delta}},{key:"deleteAt",value:function(L,N){s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"deleteAt",this).call(this,L,N),this.cache={}}},{key:"formatAt",value:function(L,N,U,$){N<=0||(f.default.query(U,f.default.Scope.BLOCK)?L+N===this.length()&&this.format(U,$):s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"formatAt",this).call(this,L,Math.min(N,this.length()-L-1),U,$),this.cache={})}},{key:"insertAt",value:function(L,N,U){if(U!=null)return s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,L,N,U);if(N.length!==0){var $=N.split(`
`),B=$.shift();B.length>0&&(L<this.length()-1||this.children.tail==null?s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,Math.min(L,this.length()-1),B):this.children.tail.insertAt(this.children.tail.length(),B),this.cache={});var H=this;$.reduce(function(q,z){return H=H.split(q,!0),H.insertAt(0,z),z.length},L+B.length)}}},{key:"insertBefore",value:function(L,N){var U=this.children.head;s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertBefore",this).call(this,L,N),U instanceof b.default&&U.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"length",this).call(this)+M),this.cache.length}},{key:"moveChildren",value:function(L,N){s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"moveChildren",this).call(this,L,N),this.cache={}}},{key:"optimize",value:function(L){s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"optimize",this).call(this,L),this.cache={}}},{key:"path",value:function(L){return s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"path",this).call(this,L,!0)}},{key:"removeChild",value:function(L){s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"removeChild",this).call(this,L),this.cache={}}},{key:"split",value:function(L){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(N&&(L===0||L>=this.length()-M)){var U=this.clone();return L===0?(this.parent.insertBefore(U,this),this):(this.parent.insertBefore(U,this.next),U)}else{var $=s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"split",this).call(this,L,N);return this.cache={},$}}}]),R}(f.default.Block);E.blotName="block",E.tagName="P",E.defaultChild="break",E.allowedChildren=[m.default,f.default.Embed,x.default];function _(A){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return A==null||(typeof A.formats=="function"&&(R=(0,l.default)(R,A.formats())),A.parent==null||A.parent.blotName=="scroll"||A.parent.statics.scope!==A.statics.scope)?R:_(A.parent,R)}r.bubbleFormats=_,r.BlockEmbed=D,r.default=E},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},s=function(){function H(q,z){var G=[],K=!0,Z=!1,ee=void 0;try{for(var V=q[Symbol.iterator](),J;!(K=(J=V.next()).done)&&(G.push(J.value),!(z&&G.length===z));K=!0);}catch(oe){Z=!0,ee=oe}finally{try{!K&&V.return&&V.return()}finally{if(Z)throw ee}}return G}return function(q,z){if(Array.isArray(q))return q;if(Symbol.iterator in Object(q))return H(q,z);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function H(q,z){for(var G=0;G<z.length;G++){var K=z[G];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(q,K.key,K)}}return function(q,z,G){return z&&H(q.prototype,z),G&&H(q,G),q}}();i(50);var l=i(2),c=_(l),u=i(14),d=_(u),f=i(8),p=_(f),b=i(9),v=_(b),m=i(0),g=_(m),x=i(15),w=_(x),S=i(3),P=_(S),I=i(10),M=_(I),D=i(34),E=_(D);function _(H){return H&&H.__esModule?H:{default:H}}function A(H,q,z){return q in H?Object.defineProperty(H,q,{value:z,enumerable:!0,configurable:!0,writable:!0}):H[q]=z,H}function R(H,q){if(!(H instanceof q))throw new TypeError("Cannot call a class as a function")}var F=(0,M.default)("quill"),L=function(){a(H,null,[{key:"debug",value:function(z){z===!0&&(z="log"),M.default.level(z)}},{key:"find",value:function(z){return z.__quill||g.default.find(z)}},{key:"import",value:function(z){return this.imports[z]==null&&F.error("Cannot import "+z+". Are you sure it was registered?"),this.imports[z]}},{key:"register",value:function(z,G){var K=this,Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof z!="string"){var ee=z.attrName||z.blotName;typeof ee=="string"?this.register("formats/"+ee,z,G):Object.keys(z).forEach(function(V){K.register(V,z[V],G)})}else this.imports[z]!=null&&!Z&&F.warn("Overwriting "+z+" with",G),this.imports[z]=G,(z.startsWith("blots/")||z.startsWith("formats/"))&&G.blotName!=="abstract"?g.default.register(G):z.startsWith("modules")&&typeof G.register=="function"&&G.register()}}]);function H(q){var z=this,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(R(this,H),this.options=N(q,G),this.container=this.options.container,this.container==null)return F.error("Invalid Quill container",q);this.options.debug&&H.debug(this.options.debug);var K=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new p.default,this.scroll=g.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new d.default(this.scroll),this.selection=new w.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(p.default.events.EDITOR_CHANGE,function(ee){ee===p.default.events.TEXT_CHANGE&&z.root.classList.toggle("ql-blank",z.editor.isBlank())}),this.emitter.on(p.default.events.SCROLL_UPDATE,function(ee,V){var J=z.selection.lastRange,oe=J&&J.length===0?J.index:void 0;U.call(z,function(){return z.editor.update(null,V,oe)},ee)});var Z=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+K+"<p><br></p></div>");this.setContents(Z),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return a(H,[{key:"addContainer",value:function(z){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof z=="string"){var K=z;z=document.createElement("div"),z.classList.add(K)}return this.container.insertBefore(z,G),z}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(z,G,K){var Z=this,ee=$(z,G,K),V=s(ee,4);return z=V[0],G=V[1],K=V[3],U.call(this,function(){return Z.editor.deleteText(z,G)},K,z,-1*G)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(z),this.container.classList.toggle("ql-disabled",!z)}},{key:"focus",value:function(){var z=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=z,this.scrollIntoView()}},{key:"format",value:function(z,G){var K=this,Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;return U.call(this,function(){var ee=K.getSelection(!0),V=new c.default;if(ee==null)return V;if(g.default.query(z,g.default.Scope.BLOCK))V=K.editor.formatLine(ee.index,ee.length,A({},z,G));else{if(ee.length===0)return K.selection.format(z,G),V;V=K.editor.formatText(ee.index,ee.length,A({},z,G))}return K.setSelection(ee,p.default.sources.SILENT),V},Z)}},{key:"formatLine",value:function(z,G,K,Z,ee){var V=this,J=void 0,oe=$(z,G,K,Z,ee),ne=s(oe,4);return z=ne[0],G=ne[1],J=ne[2],ee=ne[3],U.call(this,function(){return V.editor.formatLine(z,G,J)},ee,z,0)}},{key:"formatText",value:function(z,G,K,Z,ee){var V=this,J=void 0,oe=$(z,G,K,Z,ee),ne=s(oe,4);return z=ne[0],G=ne[1],J=ne[2],ee=ne[3],U.call(this,function(){return V.editor.formatText(z,G,J)},ee,z,0)}},{key:"getBounds",value:function(z){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,K=void 0;typeof z=="number"?K=this.selection.getBounds(z,G):K=this.selection.getBounds(z.index,z.length);var Z=this.container.getBoundingClientRect();return{bottom:K.bottom-Z.top,height:K.height,left:K.left-Z.left,right:K.right-Z.left,top:K.top-Z.top,width:K.width}}},{key:"getContents",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-z,K=$(z,G),Z=s(K,2);return z=Z[0],G=Z[1],this.editor.getContents(z,G)}},{key:"getFormat",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof z=="number"?this.editor.getFormat(z,G):this.editor.getFormat(z.index,z.length)}},{key:"getIndex",value:function(z){return z.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(z){return this.scroll.leaf(z)}},{key:"getLine",value:function(z){return this.scroll.line(z)}},{key:"getLines",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof z!="number"?this.scroll.lines(z.index,z.length):this.scroll.lines(z,G)}},{key:"getModule",value:function(z){return this.theme.modules[z]}},{key:"getSelection",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return z&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-z,K=$(z,G),Z=s(K,2);return z=Z[0],G=Z[1],this.editor.getText(z,G)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(z,G,K){var Z=this,ee=arguments.length>3&&arguments[3]!==void 0?arguments[3]:H.sources.API;return U.call(this,function(){return Z.editor.insertEmbed(z,G,K)},ee,z)}},{key:"insertText",value:function(z,G,K,Z,ee){var V=this,J=void 0,oe=$(z,0,K,Z,ee),ne=s(oe,4);return z=ne[0],J=ne[2],ee=ne[3],U.call(this,function(){return V.editor.insertText(z,G,J)},ee,z,G.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(z,G,K){this.clipboard.dangerouslyPasteHTML(z,G,K)}},{key:"removeFormat",value:function(z,G,K){var Z=this,ee=$(z,G,K),V=s(ee,4);return z=V[0],G=V[1],K=V[3],U.call(this,function(){return Z.editor.removeFormat(z,G)},K,z)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(z){var G=this,K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return U.call(this,function(){z=new c.default(z);var Z=G.getLength(),ee=G.editor.deleteText(0,Z),V=G.editor.applyDelta(z),J=V.ops[V.ops.length-1];J!=null&&typeof J.insert=="string"&&J.insert[J.insert.length-1]===`
`&&(G.editor.deleteText(G.getLength()-1,1),V.delete(1));var oe=ee.compose(V);return oe},K)}},{key:"setSelection",value:function(z,G,K){if(z==null)this.selection.setRange(null,G||H.sources.API);else{var Z=$(z,G,K),ee=s(Z,4);z=ee[0],G=ee[1],K=ee[3],this.selection.setRange(new x.Range(z,G),K),K!==p.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(z){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API,K=new c.default().insert(z);return this.setContents(K,G)}},{key:"update",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,G=this.scroll.update(z);return this.selection.update(z),G}},{key:"updateContents",value:function(z){var G=this,K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return U.call(this,function(){return z=new c.default(z),G.editor.applyDelta(z,K)},K,!0)}}]),H}();L.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},L.events=p.default.events,L.sources=p.default.sources,L.version="1.3.7",L.imports={delta:c.default,parchment:g.default,"core/module":v.default,"core/theme":E.default};function N(H,q){if(q=(0,P.default)(!0,{container:H,modules:{clipboard:!0,keyboard:!0,history:!0}},q),!q.theme||q.theme===L.DEFAULTS.theme)q.theme=E.default;else if(q.theme=L.import("themes/"+q.theme),q.theme==null)throw new Error("Invalid theme "+q.theme+". Did you register it?");var z=(0,P.default)(!0,{},q.theme.DEFAULTS);[z,q].forEach(function(Z){Z.modules=Z.modules||{},Object.keys(Z.modules).forEach(function(ee){Z.modules[ee]===!0&&(Z.modules[ee]={})})});var G=Object.keys(z.modules).concat(Object.keys(q.modules)),K=G.reduce(function(Z,ee){var V=L.import("modules/"+ee);return V==null?F.error("Cannot load "+ee+" module. Are you sure you registered it?"):Z[ee]=V.DEFAULTS||{},Z},{});return q.modules!=null&&q.modules.toolbar&&q.modules.toolbar.constructor!==Object&&(q.modules.toolbar={container:q.modules.toolbar}),q=(0,P.default)(!0,{},L.DEFAULTS,{modules:K},z,q),["bounds","container","scrollingContainer"].forEach(function(Z){typeof q[Z]=="string"&&(q[Z]=document.querySelector(q[Z]))}),q.modules=Object.keys(q.modules).reduce(function(Z,ee){return q.modules[ee]&&(Z[ee]=q.modules[ee]),Z},{}),q}function U(H,q,z,G){if(this.options.strict&&!this.isEnabled()&&q===p.default.sources.USER)return new c.default;var K=z==null?null:this.getSelection(),Z=this.editor.delta,ee=H();if(K!=null&&(z===!0&&(z=K.index),G==null?K=B(K,ee,q):G!==0&&(K=B(K,z,G,q)),this.setSelection(K,p.default.sources.SILENT)),ee.length()>0){var V,J=[p.default.events.TEXT_CHANGE,ee,Z,q];if((V=this.emitter).emit.apply(V,[p.default.events.EDITOR_CHANGE].concat(J)),q!==p.default.sources.SILENT){var oe;(oe=this.emitter).emit.apply(oe,J)}}return ee}function $(H,q,z,G,K){var Z={};return typeof H.index=="number"&&typeof H.length=="number"?typeof q!="number"?(K=G,G=z,z=q,q=H.length,H=H.index):(q=H.length,H=H.index):typeof q!="number"&&(K=G,G=z,z=q,q=0),(typeof z=="undefined"?"undefined":o(z))==="object"?(Z=z,K=G):typeof z=="string"&&(G!=null?Z[z]=G:K=z),K=K||p.default.sources.API,[H,q,Z,K]}function B(H,q,z,G){if(H==null)return null;var K=void 0,Z=void 0;if(q instanceof c.default){var ee=[H.index,H.index+H.length].map(function(ne){return q.transformPosition(ne,G!==p.default.sources.USER)}),V=s(ee,2);K=V[0],Z=V[1]}else{var J=[H.index,H.index+H.length].map(function(ne){return ne<q||ne===q&&G===p.default.sources.USER?ne:z>=0?ne+z:Math.max(q,ne+z)}),oe=s(J,2);K=oe[0],Z=oe[1]}return new x.Range(K,Z-K)}r.expandConfig=N,r.overload=$,r.default=L},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function m(g,x){for(var w=0;w<x.length;w++){var S=x[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,S.key,S)}}return function(g,x,w){return x&&m(g.prototype,x),w&&m(g,w),g}}(),s=function m(g,x,w){g===null&&(g=Function.prototype);var S=Object.getOwnPropertyDescriptor(g,x);if(S===void 0){var P=Object.getPrototypeOf(g);return P===null?void 0:m(P,x,w)}else{if("value"in S)return S.value;var I=S.get;return I===void 0?void 0:I.call(w)}},a=i(7),l=d(a),c=i(0),u=d(c);function d(m){return m&&m.__esModule?m:{default:m}}function f(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function p(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function b(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var v=function(m){b(g,m);function g(){return f(this,g),p(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"formatAt",value:function(w,S,P,I){if(g.compare(this.statics.blotName,P)<0&&u.default.query(P,u.default.Scope.BLOT)){var M=this.isolate(w,S);I&&M.wrap(P,I)}else s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"formatAt",this).call(this,w,S,P,I)}},{key:"optimize",value:function(w){if(s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"optimize",this).call(this,w),this.parent instanceof g&&g.compare(this.statics.blotName,this.parent.statics.blotName)>0){var S=this.parent.isolate(this.offset(),this.length());this.moveChildren(S),S.wrap(this)}}}],[{key:"compare",value:function(w,S){var P=g.order.indexOf(w),I=g.order.indexOf(S);return P>=0||I>=0?P-I:w===S?0:w<S?-1:1}}]),g}(u.default.Inline);v.allowedChildren=[v,u.default.Embed,l.default],v.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function c(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function u(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var d=function(f){u(p,f);function p(){return l(this,p),c(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(s.default.Text);r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function x(w,S){for(var P=0;P<S.length;P++){var I=S[P];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(w,I.key,I)}}return function(w,S,P){return S&&x(w.prototype,S),P&&x(w,P),w}}(),s=function x(w,S,P){w===null&&(w=Function.prototype);var I=Object.getOwnPropertyDescriptor(w,S);if(I===void 0){var M=Object.getPrototypeOf(w);return M===null?void 0:x(M,S,P)}else{if("value"in I)return I.value;var D=I.get;return D===void 0?void 0:D.call(P)}},a=i(54),l=d(a),c=i(10),u=d(c);function d(x){return x&&x.__esModule?x:{default:x}}function f(x,w){if(!(x instanceof w))throw new TypeError("Cannot call a class as a function")}function p(x,w){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:x}function b(x,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);x.prototype=Object.create(w&&w.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(x,w):x.__proto__=w)}var v=(0,u.default)("quill:events"),m=["selectionchange","mousedown","mouseup","click"];m.forEach(function(x){document.addEventListener(x,function(){for(var w=arguments.length,S=Array(w),P=0;P<w;P++)S[P]=arguments[P];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(I){if(I.__quill&&I.__quill.emitter){var M;(M=I.__quill.emitter).handleDOM.apply(M,S)}})})});var g=function(x){b(w,x);function w(){f(this,w);var S=p(this,(w.__proto__||Object.getPrototypeOf(w)).call(this));return S.listeners={},S.on("error",v.error),S}return o(w,[{key:"emit",value:function(){v.log.apply(v,arguments),s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(P){for(var I=arguments.length,M=Array(I>1?I-1:0),D=1;D<I;D++)M[D-1]=arguments[D];(this.listeners[P.type]||[]).forEach(function(E){var _=E.node,A=E.handler;(P.target===_||_.contains(P.target))&&A.apply(void 0,[P].concat(M))})}},{key:"listenDOM",value:function(P,I,M){this.listeners[P]||(this.listeners[P]=[]),this.listeners[P].push({node:I,handler:M})}}]),w}(l.default);g.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},g.sources={API:"api",SILENT:"silent",USER:"user"},r.default=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});function o(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}var s=function a(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o(this,a),this.quill=l,this.options=c};s.DEFAULTS={},r.default=s},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=["error","warn","log","info"],s="warn";function a(c){if(o.indexOf(c)<=o.indexOf(s)){for(var u,d=arguments.length,f=Array(d>1?d-1:0),p=1;p<d;p++)f[p-1]=arguments[p];(u=console)[c].apply(u,f)}}function l(c){return o.reduce(function(u,d){return u[d]=a.bind(console,d,c),u},{})}a.level=l.level=function(c){s=c},r.default=l},function(n,r,i){var o=Array.prototype.slice,s=i(52),a=i(53),l=n.exports=function(f,p,b){return b||(b={}),f===p?!0:f instanceof Date&&p instanceof Date?f.getTime()===p.getTime():!f||!p||typeof f!="object"&&typeof p!="object"?b.strict?f===p:f==p:d(f,p,b)};function c(f){return f==null}function u(f){return!(!f||typeof f!="object"||typeof f.length!="number"||typeof f.copy!="function"||typeof f.slice!="function"||f.length>0&&typeof f[0]!="number")}function d(f,p,b){var v,m;if(c(f)||c(p)||f.prototype!==p.prototype)return!1;if(a(f))return a(p)?(f=o.call(f),p=o.call(p),l(f,p,b)):!1;if(u(f)){if(!u(p)||f.length!==p.length)return!1;for(v=0;v<f.length;v++)if(f[v]!==p[v])return!1;return!0}try{var g=s(f),x=s(p)}catch(w){return!1}if(g.length!=x.length)return!1;for(g.sort(),x.sort(),v=g.length-1;v>=0;v--)if(g[v]!=x[v])return!1;for(v=g.length-1;v>=0;v--)if(m=g[v],!l(f[m],p[m],b))return!1;return typeof f==typeof p}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(1),s=function(){function a(l,c,u){u===void 0&&(u={}),this.attrName=l,this.keyName=c;var d=o.Scope.TYPE&o.Scope.ATTRIBUTE;u.scope!=null?this.scope=u.scope&o.Scope.LEVEL|d:this.scope=o.Scope.ATTRIBUTE,u.whitelist!=null&&(this.whitelist=u.whitelist)}return a.keys=function(l){return[].map.call(l.attributes,function(c){return c.name})},a.prototype.add=function(l,c){return this.canAdd(l,c)?(l.setAttribute(this.keyName,c),!0):!1},a.prototype.canAdd=function(l,c){var u=o.query(l,o.Scope.BLOT&(this.scope|o.Scope.TYPE));return u==null?!1:this.whitelist==null?!0:typeof c=="string"?this.whitelist.indexOf(c.replace(/["']/g,""))>-1:this.whitelist.indexOf(c)>-1},a.prototype.remove=function(l){l.removeAttribute(this.keyName)},a.prototype.value=function(l){var c=l.getAttribute(this.keyName);return this.canAdd(l,c)&&c?c:""},a}();r.default=s},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var o=function(){function D(E,_){var A=[],R=!0,F=!1,L=void 0;try{for(var N=E[Symbol.iterator](),U;!(R=(U=N.next()).done)&&(A.push(U.value),!(_&&A.length===_));R=!0);}catch($){F=!0,L=$}finally{try{!R&&N.return&&N.return()}finally{if(F)throw L}}return A}return function(E,_){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return D(E,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function D(E,_){for(var A=0;A<_.length;A++){var R=_[A];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(E,R.key,R)}}return function(E,_,A){return _&&D(E.prototype,_),A&&D(E,A),E}}(),a=function D(E,_,A){E===null&&(E=Function.prototype);var R=Object.getOwnPropertyDescriptor(E,_);if(R===void 0){var F=Object.getPrototypeOf(E);return F===null?void 0:D(F,_,A)}else{if("value"in R)return R.value;var L=R.get;return L===void 0?void 0:L.call(A)}},l=i(2),c=x(l),u=i(0),d=x(u),f=i(4),p=x(f),b=i(6),v=x(b),m=i(7),g=x(m);function x(D){return D&&D.__esModule?D:{default:D}}function w(D,E){if(!(D instanceof E))throw new TypeError("Cannot call a class as a function")}function S(D,E){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:D}function P(D,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);D.prototype=Object.create(E&&E.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(D,E):D.__proto__=E)}var I=function(D){P(E,D);function E(){return w(this,E),S(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return E}(v.default);I.blotName="code",I.tagName="CODE";var M=function(D){P(E,D);function E(){return w(this,E),S(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return s(E,[{key:"delta",value:function(){var A=this,R=this.domNode.textContent;return R.endsWith(`
`)&&(R=R.slice(0,-1)),R.split(`
`).reduce(function(F,L){return F.insert(L).insert(`
`,A.formats())},new c.default)}},{key:"format",value:function(A,R){if(!(A===this.statics.blotName&&R)){var F=this.descendant(g.default,this.length()-1),L=o(F,1),N=L[0];N!=null&&N.deleteAt(N.length()-1,1),a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,A,R)}}},{key:"formatAt",value:function(A,R,F,L){if(R!==0&&!(d.default.query(F,d.default.Scope.BLOCK)==null||F===this.statics.blotName&&L===this.statics.formats(this.domNode))){var N=this.newlineIndex(A);if(!(N<0||N>=A+R)){var U=this.newlineIndex(A,!0)+1,$=N-U+1,B=this.isolate(U,$),H=B.next;B.format(F,L),H instanceof E&&H.formatAt(0,A-U+R-$,F,L)}}}},{key:"insertAt",value:function(A,R,F){if(F==null){var L=this.descendant(g.default,A),N=o(L,2),U=N[0],$=N[1];U.insertAt($,R)}}},{key:"length",value:function(){var A=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?A:A+1}},{key:"newlineIndex",value:function(A){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(R)return this.domNode.textContent.slice(0,A).lastIndexOf(`
`);var F=this.domNode.textContent.slice(A).indexOf(`
`);return F>-1?A+F:-1}},{key:"optimize",value:function(A){this.domNode.textContent.endsWith(`
`)||this.appendChild(d.default.create("text",`
`)),a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,A);var R=this.next;R!=null&&R.prev===this&&R.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===R.statics.formats(R.domNode)&&(R.optimize(A),R.moveChildren(this),R.remove())}},{key:"replace",value:function(A){a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replace",this).call(this,A),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(R){var F=d.default.find(R);F==null?R.parentNode.removeChild(R):F instanceof d.default.Embed?F.remove():F.unwrap()})}}],[{key:"create",value:function(A){var R=a(E.__proto__||Object.getPrototypeOf(E),"create",this).call(this,A);return R.setAttribute("spellcheck",!1),R}},{key:"formats",value:function(){return!0}}]),E}(p.default);M.blotName="code-block",M.tagName="PRE",M.TAB="  ",r.Code=I,r.default=M},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},s=function(){function H(q,z){var G=[],K=!0,Z=!1,ee=void 0;try{for(var V=q[Symbol.iterator](),J;!(K=(J=V.next()).done)&&(G.push(J.value),!(z&&G.length===z));K=!0);}catch(oe){Z=!0,ee=oe}finally{try{!K&&V.return&&V.return()}finally{if(Z)throw ee}}return G}return function(q,z){if(Array.isArray(q))return q;if(Symbol.iterator in Object(q))return H(q,z);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function H(q,z){for(var G=0;G<z.length;G++){var K=z[G];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(q,K.key,K)}}return function(q,z,G){return z&&H(q.prototype,z),G&&H(q,G),q}}(),l=i(2),c=R(l),u=i(20),d=R(u),f=i(0),p=R(f),b=i(13),v=R(b),m=i(24),g=R(m),x=i(4),w=R(x),S=i(16),P=R(S),I=i(21),M=R(I),D=i(11),E=R(D),_=i(3),A=R(_);function R(H){return H&&H.__esModule?H:{default:H}}function F(H,q,z){return q in H?Object.defineProperty(H,q,{value:z,enumerable:!0,configurable:!0,writable:!0}):H[q]=z,H}function L(H,q){if(!(H instanceof q))throw new TypeError("Cannot call a class as a function")}var N=/^[ -~]*$/,U=function(){function H(q){L(this,H),this.scroll=q,this.delta=this.getDelta()}return a(H,[{key:"applyDelta",value:function(z){var G=this,K=!1;this.scroll.update();var Z=this.scroll.length();return this.scroll.batchStart(),z=B(z),z.reduce(function(ee,V){var J=V.retain||V.delete||V.insert.length||1,oe=V.attributes||{};if(V.insert!=null){if(typeof V.insert=="string"){var ne=V.insert;ne.endsWith(`
`)&&K&&(K=!1,ne=ne.slice(0,-1)),ee>=Z&&!ne.endsWith(`
`)&&(K=!0),G.scroll.insertAt(ee,ne);var pe=G.scroll.line(ee),ye=s(pe,2),Ce=ye[0],_e=ye[1],ce=(0,A.default)({},(0,x.bubbleFormats)(Ce));if(Ce instanceof w.default){var Be=Ce.descendant(p.default.Leaf,_e),de=s(Be,1),me=de[0];ce=(0,A.default)(ce,(0,x.bubbleFormats)(me))}oe=d.default.attributes.diff(ce,oe)||{}}else if(o(V.insert)==="object"){var ie=Object.keys(V.insert)[0];if(ie==null)return ee;G.scroll.insertAt(ee,ie,V.insert[ie])}Z+=J}return Object.keys(oe).forEach(function(ae){G.scroll.formatAt(ee,J,ae,oe[ae])}),ee+J},0),z.reduce(function(ee,V){return typeof V.delete=="number"?(G.scroll.deleteAt(ee,V.delete),ee):ee+(V.retain||V.insert.length||1)},0),this.scroll.batchEnd(),this.update(z)}},{key:"deleteText",value:function(z,G){return this.scroll.deleteAt(z,G),this.update(new c.default().retain(z).delete(G))}},{key:"formatLine",value:function(z,G){var K=this,Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(Z).forEach(function(ee){if(!(K.scroll.whitelist!=null&&!K.scroll.whitelist[ee])){var V=K.scroll.lines(z,Math.max(G,1)),J=G;V.forEach(function(oe){var ne=oe.length();if(!(oe instanceof v.default))oe.format(ee,Z[ee]);else{var pe=z-oe.offset(K.scroll),ye=oe.newlineIndex(pe+J)-pe+1;oe.formatAt(pe,ye,ee,Z[ee])}J-=ne})}}),this.scroll.optimize(),this.update(new c.default().retain(z).retain(G,(0,M.default)(Z)))}},{key:"formatText",value:function(z,G){var K=this,Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(Z).forEach(function(ee){K.scroll.formatAt(z,G,ee,Z[ee])}),this.update(new c.default().retain(z).retain(G,(0,M.default)(Z)))}},{key:"getContents",value:function(z,G){return this.delta.slice(z,z+G)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(z,G){return z.concat(G.delta())},new c.default)}},{key:"getFormat",value:function(z){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,K=[],Z=[];G===0?this.scroll.path(z).forEach(function(V){var J=s(V,1),oe=J[0];oe instanceof w.default?K.push(oe):oe instanceof p.default.Leaf&&Z.push(oe)}):(K=this.scroll.lines(z,G),Z=this.scroll.descendants(p.default.Leaf,z,G));var ee=[K,Z].map(function(V){if(V.length===0)return{};for(var J=(0,x.bubbleFormats)(V.shift());Object.keys(J).length>0;){var oe=V.shift();if(oe==null)return J;J=$((0,x.bubbleFormats)(oe),J)}return J});return A.default.apply(A.default,ee)}},{key:"getText",value:function(z,G){return this.getContents(z,G).filter(function(K){return typeof K.insert=="string"}).map(function(K){return K.insert}).join("")}},{key:"insertEmbed",value:function(z,G,K){return this.scroll.insertAt(z,G,K),this.update(new c.default().retain(z).insert(F({},G,K)))}},{key:"insertText",value:function(z,G){var K=this,Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return G=G.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(z,G),Object.keys(Z).forEach(function(ee){K.scroll.formatAt(z,G.length,ee,Z[ee])}),this.update(new c.default().retain(z).insert(G,(0,M.default)(Z)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var z=this.scroll.children.head;return z.statics.blotName!==w.default.blotName||z.children.length>1?!1:z.children.head instanceof P.default}},{key:"removeFormat",value:function(z,G){var K=this.getText(z,G),Z=this.scroll.line(z+G),ee=s(Z,2),V=ee[0],J=ee[1],oe=0,ne=new c.default;V!=null&&(V instanceof v.default?oe=V.newlineIndex(J)-J+1:oe=V.length()-J,ne=V.delta().slice(J,J+oe-1).insert(`
`));var pe=this.getContents(z,G+oe),ye=pe.diff(new c.default().insert(K).concat(ne)),Ce=new c.default().retain(z).concat(ye);return this.applyDelta(Ce)}},{key:"update",value:function(z){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,Z=this.delta;if(G.length===1&&G[0].type==="characterData"&&G[0].target.data.match(N)&&p.default.find(G[0].target)){var ee=p.default.find(G[0].target),V=(0,x.bubbleFormats)(ee),J=ee.offset(this.scroll),oe=G[0].oldValue.replace(g.default.CONTENTS,""),ne=new c.default().insert(oe),pe=new c.default().insert(ee.value()),ye=new c.default().retain(J).concat(ne.diff(pe,K));z=ye.reduce(function(Ce,_e){return _e.insert?Ce.insert(_e.insert,V):Ce.push(_e)},new c.default),this.delta=Z.compose(z)}else this.delta=this.getDelta(),(!z||!(0,E.default)(Z.compose(z),this.delta))&&(z=Z.diff(this.delta,K));return z}}]),H}();function $(H,q){return Object.keys(q).reduce(function(z,G){return H[G]==null||(q[G]===H[G]?z[G]=q[G]:Array.isArray(q[G])?q[G].indexOf(H[G])<0&&(z[G]=q[G].concat([H[G]])):z[G]=[q[G],H[G]]),z},{})}function B(H){return H.reduce(function(q,z){if(z.insert===1){var G=(0,M.default)(z.attributes);return delete G.image,q.insert({image:z.attributes.image},G)}if(z.attributes!=null&&(z.attributes.list===!0||z.attributes.bullet===!0)&&(z=(0,M.default)(z),z.attributes.list?z.attributes.list="ordered":(z.attributes.list="bullet",delete z.attributes.bullet)),typeof z.insert=="string"){var K=z.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return q.insert(K,z.attributes)}return q.push(z)},new c.default)}r.default=U},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var o=function(){function D(E,_){var A=[],R=!0,F=!1,L=void 0;try{for(var N=E[Symbol.iterator](),U;!(R=(U=N.next()).done)&&(A.push(U.value),!(_&&A.length===_));R=!0);}catch($){F=!0,L=$}finally{try{!R&&N.return&&N.return()}finally{if(F)throw L}}return A}return function(E,_){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return D(E,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function D(E,_){for(var A=0;A<_.length;A++){var R=_[A];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(E,R.key,R)}}return function(E,_,A){return _&&D(E.prototype,_),A&&D(E,A),E}}(),a=i(0),l=g(a),c=i(21),u=g(c),d=i(11),f=g(d),p=i(8),b=g(p),v=i(10),m=g(v);function g(D){return D&&D.__esModule?D:{default:D}}function x(D){if(Array.isArray(D)){for(var E=0,_=Array(D.length);E<D.length;E++)_[E]=D[E];return _}else return Array.from(D)}function w(D,E){if(!(D instanceof E))throw new TypeError("Cannot call a class as a function")}var S=(0,m.default)("quill:selection"),P=function D(E){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;w(this,D),this.index=E,this.length=_},I=function(){function D(E,_){var A=this;w(this,D),this.emitter=_,this.scroll=E,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=l.default.create("cursor",this),this.lastRange=this.savedRange=new P(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){A.mouseDown||setTimeout(A.update.bind(A,b.default.sources.USER),1)}),this.emitter.on(b.default.events.EDITOR_CHANGE,function(R,F){R===b.default.events.TEXT_CHANGE&&F.length()>0&&A.update(b.default.sources.SILENT)}),this.emitter.on(b.default.events.SCROLL_BEFORE_UPDATE,function(){if(A.hasFocus()){var R=A.getNativeRange();R!=null&&R.start.node!==A.cursor.textNode&&A.emitter.once(b.default.events.SCROLL_UPDATE,function(){try{A.setNativeRange(R.start.node,R.start.offset,R.end.node,R.end.offset)}catch(F){}})}}),this.emitter.on(b.default.events.SCROLL_OPTIMIZE,function(R,F){if(F.range){var L=F.range,N=L.startNode,U=L.startOffset,$=L.endNode,B=L.endOffset;A.setNativeRange(N,U,$,B)}}),this.update(b.default.sources.SILENT)}return s(D,[{key:"handleComposition",value:function(){var _=this;this.root.addEventListener("compositionstart",function(){_.composing=!0}),this.root.addEventListener("compositionend",function(){if(_.composing=!1,_.cursor.parent){var A=_.cursor.restore();if(!A)return;setTimeout(function(){_.setNativeRange(A.startNode,A.startOffset,A.endNode,A.endOffset)},1)}})}},{key:"handleDragging",value:function(){var _=this;this.emitter.listenDOM("mousedown",document.body,function(){_.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){_.mouseDown=!1,_.update(b.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(_,A){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[_])){this.scroll.update();var R=this.getNativeRange();if(!(R==null||!R.native.collapsed||l.default.query(_,l.default.Scope.BLOCK))){if(R.start.node!==this.cursor.textNode){var F=l.default.find(R.start.node,!1);if(F==null)return;if(F instanceof l.default.Leaf){var L=F.split(R.start.offset);F.parent.insertBefore(this.cursor,L)}else F.insertBefore(this.cursor,R.start.node);this.cursor.attach()}this.cursor.format(_,A),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(_){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=this.scroll.length();_=Math.min(_,R-1),A=Math.min(_+A,R-1)-_;var F=void 0,L=this.scroll.leaf(_),N=o(L,2),U=N[0],$=N[1];if(U==null)return null;var B=U.position($,!0),H=o(B,2);F=H[0],$=H[1];var q=document.createRange();if(A>0){q.setStart(F,$);var z=this.scroll.leaf(_+A),G=o(z,2);if(U=G[0],$=G[1],U==null)return null;var K=U.position($,!0),Z=o(K,2);return F=Z[0],$=Z[1],q.setEnd(F,$),q.getBoundingClientRect()}else{var ee="left",V=void 0;return F instanceof Text?($<F.data.length?(q.setStart(F,$),q.setEnd(F,$+1)):(q.setStart(F,$-1),q.setEnd(F,$),ee="right"),V=q.getBoundingClientRect()):(V=U.domNode.getBoundingClientRect(),$>0&&(ee="right")),{bottom:V.top+V.height,height:V.height,left:V[ee],right:V[ee],top:V.top,width:0}}}},{key:"getNativeRange",value:function(){var _=document.getSelection();if(_==null||_.rangeCount<=0)return null;var A=_.getRangeAt(0);if(A==null)return null;var R=this.normalizeNative(A);return S.info("getNativeRange",R),R}},{key:"getRange",value:function(){var _=this.getNativeRange();if(_==null)return[null,null];var A=this.normalizedToRange(_);return[A,_]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(_){var A=this,R=[[_.start.node,_.start.offset]];_.native.collapsed||R.push([_.end.node,_.end.offset]);var F=R.map(function(U){var $=o(U,2),B=$[0],H=$[1],q=l.default.find(B,!0),z=q.offset(A.scroll);return H===0?z:q instanceof l.default.Container?z+q.length():z+q.index(B,H)}),L=Math.min(Math.max.apply(Math,x(F)),this.scroll.length()-1),N=Math.min.apply(Math,[L].concat(x(F)));return new P(N,L-N)}},{key:"normalizeNative",value:function(_){if(!M(this.root,_.startContainer)||!_.collapsed&&!M(this.root,_.endContainer))return null;var A={start:{node:_.startContainer,offset:_.startOffset},end:{node:_.endContainer,offset:_.endOffset},native:_};return[A.start,A.end].forEach(function(R){for(var F=R.node,L=R.offset;!(F instanceof Text)&&F.childNodes.length>0;)if(F.childNodes.length>L)F=F.childNodes[L],L=0;else if(F.childNodes.length===L)F=F.lastChild,L=F instanceof Text?F.data.length:F.childNodes.length+1;else break;R.node=F,R.offset=L}),A}},{key:"rangeToNative",value:function(_){var A=this,R=_.collapsed?[_.index]:[_.index,_.index+_.length],F=[],L=this.scroll.length();return R.forEach(function(N,U){N=Math.min(L-1,N);var $=void 0,B=A.scroll.leaf(N),H=o(B,2),q=H[0],z=H[1],G=q.position(z,U!==0),K=o(G,2);$=K[0],z=K[1],F.push($,z)}),F.length<2&&(F=F.concat(F)),F}},{key:"scrollIntoView",value:function(_){var A=this.lastRange;if(A!=null){var R=this.getBounds(A.index,A.length);if(R!=null){var F=this.scroll.length()-1,L=this.scroll.line(Math.min(A.index,F)),N=o(L,1),U=N[0],$=U;if(A.length>0){var B=this.scroll.line(Math.min(A.index+A.length,F)),H=o(B,1);$=H[0]}if(!(U==null||$==null)){var q=_.getBoundingClientRect();R.top<q.top?_.scrollTop-=q.top-R.top:R.bottom>q.bottom&&(_.scrollTop+=R.bottom-q.bottom)}}}}},{key:"setNativeRange",value:function(_,A){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_,F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:A,L=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(S.info("setNativeRange",_,A,R,F),!(_!=null&&(this.root.parentNode==null||_.parentNode==null||R.parentNode==null))){var N=document.getSelection();if(N!=null)if(_!=null){this.hasFocus()||this.root.focus();var U=(this.getNativeRange()||{}).native;if(U==null||L||_!==U.startContainer||A!==U.startOffset||R!==U.endContainer||F!==U.endOffset){_.tagName=="BR"&&(A=[].indexOf.call(_.parentNode.childNodes,_),_=_.parentNode),R.tagName=="BR"&&(F=[].indexOf.call(R.parentNode.childNodes,R),R=R.parentNode);var $=document.createRange();$.setStart(_,A),$.setEnd(R,F),N.removeAllRanges(),N.addRange($)}}else N.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(_){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b.default.sources.API;if(typeof A=="string"&&(R=A,A=!1),S.info("setRange",_),_!=null){var F=this.rangeToNative(_);this.setNativeRange.apply(this,x(F).concat([A]))}else this.setNativeRange(null);this.update(R)}},{key:"update",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b.default.sources.USER,A=this.lastRange,R=this.getRange(),F=o(R,2),L=F[0],N=F[1];if(this.lastRange=L,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,f.default)(A,this.lastRange)){var U;!this.composing&&N!=null&&N.native.collapsed&&N.start.node!==this.cursor.textNode&&this.cursor.restore();var $=[b.default.events.SELECTION_CHANGE,(0,u.default)(this.lastRange),(0,u.default)(A),_];if((U=this.emitter).emit.apply(U,[b.default.events.EDITOR_CHANGE].concat($)),_!==b.default.sources.SILENT){var B;(B=this.emitter).emit.apply(B,$)}}}}]),D}();function M(D,E){try{E.parentNode}catch(_){return!1}return E instanceof Text&&(E=E.parentNode),D.contains(E)}r.Range=P,r.default=I},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function b(v,m){for(var g=0;g<m.length;g++){var x=m[g];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(v,x.key,x)}}return function(v,m,g){return m&&b(v.prototype,m),g&&b(v,g),v}}(),s=function b(v,m,g){v===null&&(v=Function.prototype);var x=Object.getOwnPropertyDescriptor(v,m);if(x===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:b(w,m,g)}else{if("value"in x)return x.value;var S=x.get;return S===void 0?void 0:S.call(g)}},a=i(0),l=c(a);function c(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function d(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function f(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var p=function(b){f(v,b);function v(){return u(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return o(v,[{key:"insertInto",value:function(g,x){g.children.length===0?s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertInto",this).call(this,g,x):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),v}(l.default.Embed);p.blotName="break",p.tagName="BR",r.default=p},function(n,r,i){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var b in p)p.hasOwnProperty(b)&&(f[b]=p[b])};return function(f,p){d(f,p);function b(){this.constructor=f}f.prototype=p===null?Object.create(p):(b.prototype=p.prototype,new b)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(44),a=i(30),l=i(1),c=function(d){o(f,d);function f(p){var b=d.call(this,p)||this;return b.build(),b}return f.prototype.appendChild=function(p){this.insertBefore(p)},f.prototype.attach=function(){d.prototype.attach.call(this),this.children.forEach(function(p){p.attach()})},f.prototype.build=function(){var p=this;this.children=new s.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(b){try{var v=u(b);p.insertBefore(v,p.children.head||void 0)}catch(m){if(m instanceof l.ParchmentError)return;throw m}})},f.prototype.deleteAt=function(p,b){if(p===0&&b===this.length())return this.remove();this.children.forEachAt(p,b,function(v,m,g){v.deleteAt(m,g)})},f.prototype.descendant=function(p,b){var v=this.children.find(b),m=v[0],g=v[1];return p.blotName==null&&p(m)||p.blotName!=null&&m instanceof p?[m,g]:m instanceof f?m.descendant(p,g):[null,-1]},f.prototype.descendants=function(p,b,v){b===void 0&&(b=0),v===void 0&&(v=Number.MAX_VALUE);var m=[],g=v;return this.children.forEachAt(b,v,function(x,w,S){(p.blotName==null&&p(x)||p.blotName!=null&&x instanceof p)&&m.push(x),x instanceof f&&(m=m.concat(x.descendants(p,w,g))),g-=S}),m},f.prototype.detach=function(){this.children.forEach(function(p){p.detach()}),d.prototype.detach.call(this)},f.prototype.formatAt=function(p,b,v,m){this.children.forEachAt(p,b,function(g,x,w){g.formatAt(x,w,v,m)})},f.prototype.insertAt=function(p,b,v){var m=this.children.find(p),g=m[0],x=m[1];if(g)g.insertAt(x,b,v);else{var w=v==null?l.create("text",b):l.create(b,v);this.appendChild(w)}},f.prototype.insertBefore=function(p,b){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(v){return p instanceof v}))throw new l.ParchmentError("Cannot insert "+p.statics.blotName+" into "+this.statics.blotName);p.insertInto(this,b)},f.prototype.length=function(){return this.children.reduce(function(p,b){return p+b.length()},0)},f.prototype.moveChildren=function(p,b){this.children.forEach(function(v){p.insertBefore(v,b)})},f.prototype.optimize=function(p){if(d.prototype.optimize.call(this,p),this.children.length===0)if(this.statics.defaultChild!=null){var b=l.create(this.statics.defaultChild);this.appendChild(b),b.optimize(p)}else this.remove()},f.prototype.path=function(p,b){b===void 0&&(b=!1);var v=this.children.find(p,b),m=v[0],g=v[1],x=[[this,p]];return m instanceof f?x.concat(m.path(g,b)):(m!=null&&x.push([m,g]),x)},f.prototype.removeChild=function(p){this.children.remove(p)},f.prototype.replace=function(p){p instanceof f&&p.moveChildren(this),d.prototype.replace.call(this,p)},f.prototype.split=function(p,b){if(b===void 0&&(b=!1),!b){if(p===0)return this;if(p===this.length())return this.next}var v=this.clone();return this.parent.insertBefore(v,this.next),this.children.forEachAt(p,this.length(),function(m,g,x){m=m.split(g,b),v.appendChild(m)}),v},f.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},f.prototype.update=function(p,b){var v=this,m=[],g=[];p.forEach(function(x){x.target===v.domNode&&x.type==="childList"&&(m.push.apply(m,x.addedNodes),g.push.apply(g,x.removedNodes))}),g.forEach(function(x){if(!(x.parentNode!=null&&x.tagName!=="IFRAME"&&document.body.compareDocumentPosition(x)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var w=l.find(x);w!=null&&(w.domNode.parentNode==null||w.domNode.parentNode===v.domNode)&&w.detach()}}),m.filter(function(x){return x.parentNode==v.domNode}).sort(function(x,w){return x===w?0:x.compareDocumentPosition(w)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(x){var w=null;x.nextSibling!=null&&(w=l.find(x.nextSibling));var S=u(x);(S.next!=w||S.next==null)&&(S.parent!=null&&S.parent.removeChild(v),v.insertBefore(S,w||void 0))})},f}(a.default);function u(d){var f=l.find(d);if(f==null)try{f=l.create(d)}catch(p){f=l.create(l.Scope.INLINE),[].slice.call(d.childNodes).forEach(function(b){f.domNode.appendChild(b)}),d.parentNode&&d.parentNode.replaceChild(f.domNode,d),f.attach()}return f}r.default=c},function(n,r,i){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var b in p)p.hasOwnProperty(b)&&(f[b]=p[b])};return function(f,p){d(f,p);function b(){this.constructor=f}f.prototype=p===null?Object.create(p):(b.prototype=p.prototype,new b)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12),a=i(31),l=i(17),c=i(1),u=function(d){o(f,d);function f(p){var b=d.call(this,p)||this;return b.attributes=new a.default(b.domNode),b}return f.formats=function(p){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return p.tagName.toLowerCase()},f.prototype.format=function(p,b){var v=c.query(p);v instanceof s.default?this.attributes.attribute(v,b):b&&v!=null&&(p!==this.statics.blotName||this.formats()[p]!==b)&&this.replaceWith(p,b)},f.prototype.formats=function(){var p=this.attributes.values(),b=this.statics.formats(this.domNode);return b!=null&&(p[this.statics.blotName]=b),p},f.prototype.replaceWith=function(p,b){var v=d.prototype.replaceWith.call(this,p,b);return this.attributes.copy(v),v},f.prototype.update=function(p,b){var v=this;d.prototype.update.call(this,p,b),p.some(function(m){return m.target===v.domNode&&m.type==="attributes"})&&this.attributes.build()},f.prototype.wrap=function(p,b){var v=d.prototype.wrap.call(this,p,b);return v instanceof f&&v.statics.scope===this.statics.scope&&this.attributes.move(v),v},f}(l.default);r.default=u},function(n,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var f in d)d.hasOwnProperty(f)&&(u[f]=d[f])};return function(u,d){c(u,d);function f(){this.constructor=u}u.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(30),a=i(1),l=function(c){o(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.value=function(d){return!0},u.prototype.index=function(d,f){return this.domNode===d||this.domNode.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(f,1):-1},u.prototype.position=function(d,f){var p=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return d>0&&(p+=1),[this.parent.domNode,p]},u.prototype.value=function(){var d;return d={},d[this.statics.blotName]=this.statics.value(this.domNode)||!0,d},u.scope=a.Scope.INLINE_BLOT,u}(s.default);r.default=l},function(n,r,i){var o=i(11),s=i(3),a={attributes:{compose:function(c,u,d){typeof c!="object"&&(c={}),typeof u!="object"&&(u={});var f=s(!0,{},u);d||(f=Object.keys(f).reduce(function(b,v){return f[v]!=null&&(b[v]=f[v]),b},{}));for(var p in c)c[p]!==void 0&&u[p]===void 0&&(f[p]=c[p]);return Object.keys(f).length>0?f:void 0},diff:function(c,u){typeof c!="object"&&(c={}),typeof u!="object"&&(u={});var d=Object.keys(c).concat(Object.keys(u)).reduce(function(f,p){return o(c[p],u[p])||(f[p]=u[p]===void 0?null:u[p]),f},{});return Object.keys(d).length>0?d:void 0},transform:function(c,u,d){if(typeof c!="object")return u;if(typeof u=="object"){if(!d)return u;var f=Object.keys(u).reduce(function(p,b){return c[b]===void 0&&(p[b]=u[b]),p},{});return Object.keys(f).length>0?f:void 0}}},iterator:function(c){return new l(c)},length:function(c){return typeof c.delete=="number"?c.delete:typeof c.retain=="number"?c.retain:typeof c.insert=="string"?c.insert.length:1}};function l(c){this.ops=c,this.index=0,this.offset=0}l.prototype.hasNext=function(){return this.peekLength()<1/0},l.prototype.next=function(c){c||(c=1/0);var u=this.ops[this.index];if(u){var d=this.offset,f=a.length(u);if(c>=f-d?(c=f-d,this.index+=1,this.offset=0):this.offset+=c,typeof u.delete=="number")return{delete:c};var p={};return u.attributes&&(p.attributes=u.attributes),typeof u.retain=="number"?p.retain=c:typeof u.insert=="string"?p.insert=u.insert.substr(d,c):p.insert=u.insert,p}else return{retain:1/0}},l.prototype.peek=function(){return this.ops[this.index]},l.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},l.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},l.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var c=this.offset,u=this.index,d=this.next(),f=this.ops.slice(this.index);return this.offset=c,this.index=u,[d].concat(f)}else return[]},n.exports=a},function(n,r){var i=function(){function o(v,m){return m!=null&&v instanceof m}var s;try{s=Map}catch(v){s=function(){}}var a;try{a=Set}catch(v){a=function(){}}var l;try{l=Promise}catch(v){l=function(){}}function c(v,m,g,x,w){typeof m=="object"&&(g=m.depth,x=m.prototype,w=m.includeNonEnumerable,m=m.circular);var S=[],P=[],I=typeof Buffer!="undefined";typeof m=="undefined"&&(m=!0),typeof g=="undefined"&&(g=1/0);function M(D,E){if(D===null)return null;if(E===0)return D;var _,A;if(typeof D!="object")return D;if(o(D,s))_=new s;else if(o(D,a))_=new a;else if(o(D,l))_=new l(function(q,z){D.then(function(G){q(M(G,E-1))},function(G){z(M(G,E-1))})});else if(c.__isArray(D))_=[];else if(c.__isRegExp(D))_=new RegExp(D.source,b(D)),D.lastIndex&&(_.lastIndex=D.lastIndex);else if(c.__isDate(D))_=new Date(D.getTime());else{if(I&&Buffer.isBuffer(D))return Buffer.allocUnsafe?_=Buffer.allocUnsafe(D.length):_=new Buffer(D.length),D.copy(_),_;o(D,Error)?_=Object.create(D):typeof x=="undefined"?(A=Object.getPrototypeOf(D),_=Object.create(A)):(_=Object.create(x),A=x)}if(m){var R=S.indexOf(D);if(R!=-1)return P[R];S.push(D),P.push(_)}o(D,s)&&D.forEach(function(q,z){var G=M(z,E-1),K=M(q,E-1);_.set(G,K)}),o(D,a)&&D.forEach(function(q){var z=M(q,E-1);_.add(z)});for(var F in D){var L;A&&(L=Object.getOwnPropertyDescriptor(A,F)),!(L&&L.set==null)&&(_[F]=M(D[F],E-1))}if(Object.getOwnPropertySymbols)for(var N=Object.getOwnPropertySymbols(D),F=0;F<N.length;F++){var U=N[F],$=Object.getOwnPropertyDescriptor(D,U);$&&!$.enumerable&&!w||(_[U]=M(D[U],E-1),$.enumerable||Object.defineProperty(_,U,{enumerable:!1}))}if(w)for(var B=Object.getOwnPropertyNames(D),F=0;F<B.length;F++){var H=B[F],$=Object.getOwnPropertyDescriptor(D,H);$&&$.enumerable||(_[H]=M(D[H],E-1),Object.defineProperty(_,H,{enumerable:!1}))}return _}return M(v,g)}c.clonePrototype=function(m){if(m===null)return null;var g=function(){};return g.prototype=m,new g};function u(v){return Object.prototype.toString.call(v)}c.__objToStr=u;function d(v){return typeof v=="object"&&u(v)==="[object Date]"}c.__isDate=d;function f(v){return typeof v=="object"&&u(v)==="[object Array]"}c.__isArray=f;function p(v){return typeof v=="object"&&u(v)==="[object RegExp]"}c.__isRegExp=p;function b(v){var m="";return v.global&&(m+="g"),v.ignoreCase&&(m+="i"),v.multiline&&(m+="m"),m}return c.__getRegExpFlags=b,c}();typeof n=="object"&&n.exports&&(n.exports=i)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function _(A,R){var F=[],L=!0,N=!1,U=void 0;try{for(var $=A[Symbol.iterator](),B;!(L=(B=$.next()).done)&&(F.push(B.value),!(R&&F.length===R));L=!0);}catch(H){N=!0,U=H}finally{try{!L&&$.return&&$.return()}finally{if(N)throw U}}return F}return function(A,R){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return _(A,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function _(A,R){for(var F=0;F<R.length;F++){var L=R[F];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(A,L.key,L)}}return function(A,R,F){return R&&_(A.prototype,R),F&&_(A,F),A}}(),a=function _(A,R,F){A===null&&(A=Function.prototype);var L=Object.getOwnPropertyDescriptor(A,R);if(L===void 0){var N=Object.getPrototypeOf(A);return N===null?void 0:_(N,R,F)}else{if("value"in L)return L.value;var U=L.get;return U===void 0?void 0:U.call(F)}},l=i(0),c=S(l),u=i(8),d=S(u),f=i(4),p=S(f),b=i(16),v=S(b),m=i(13),g=S(m),x=i(25),w=S(x);function S(_){return _&&_.__esModule?_:{default:_}}function P(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")}function I(_,A){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:_}function M(_,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);_.prototype=Object.create(A&&A.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(_,A):_.__proto__=A)}function D(_){return _ instanceof p.default||_ instanceof f.BlockEmbed}var E=function(_){M(A,_);function A(R,F){P(this,A);var L=I(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,R));return L.emitter=F.emitter,Array.isArray(F.whitelist)&&(L.whitelist=F.whitelist.reduce(function(N,U){return N[U]=!0,N},{})),L.domNode.addEventListener("DOMNodeInserted",function(){}),L.optimize(),L.enable(),L}return s(A,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(F,L){var N=this.line(F),U=o(N,2),$=U[0],B=U[1],H=this.line(F+L),q=o(H,1),z=q[0];if(a(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"deleteAt",this).call(this,F,L),z!=null&&$!==z&&B>0){if($ instanceof f.BlockEmbed||z instanceof f.BlockEmbed){this.optimize();return}if($ instanceof g.default){var G=$.newlineIndex($.length(),!0);if(G>-1&&($=$.split(G+1),$===z)){this.optimize();return}}else if(z instanceof g.default){var K=z.newlineIndex(0);K>-1&&z.split(K+1)}var Z=z.children.head instanceof v.default?null:z.children.head;$.moveChildren(z,Z),$.remove()}this.optimize()}},{key:"enable",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",F)}},{key:"formatAt",value:function(F,L,N,U){this.whitelist!=null&&!this.whitelist[N]||(a(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"formatAt",this).call(this,F,L,N,U),this.optimize())}},{key:"insertAt",value:function(F,L,N){if(!(N!=null&&this.whitelist!=null&&!this.whitelist[L])){if(F>=this.length())if(N==null||c.default.query(L,c.default.Scope.BLOCK)==null){var U=c.default.create(this.statics.defaultChild);this.appendChild(U),N==null&&L.endsWith(`
`)&&(L=L.slice(0,-1)),U.insertAt(0,L,N)}else{var $=c.default.create(L,N);this.appendChild($)}else a(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,F,L,N);this.optimize()}}},{key:"insertBefore",value:function(F,L){if(F.statics.scope===c.default.Scope.INLINE_BLOT){var N=c.default.create(this.statics.defaultChild);N.appendChild(F),F=N}a(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertBefore",this).call(this,F,L)}},{key:"leaf",value:function(F){return this.path(F).pop()||[null,-1]}},{key:"line",value:function(F){return F===this.length()?this.line(F-1):this.descendant(D,F)}},{key:"lines",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,N=function U($,B,H){var q=[],z=H;return $.children.forEachAt(B,H,function(G,K,Z){D(G)?q.push(G):G instanceof c.default.Container&&(q=q.concat(U(G,K,z))),z-=Z}),q};return N(this,F,L)}},{key:"optimize",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(a(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,F,L),F.length>0&&this.emitter.emit(d.default.events.SCROLL_OPTIMIZE,F,L))}},{key:"path",value:function(F){return a(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"path",this).call(this,F).slice(1)}},{key:"update",value:function(F){if(this.batch!==!0){var L=d.default.sources.USER;typeof F=="string"&&(L=F),Array.isArray(F)||(F=this.observer.takeRecords()),F.length>0&&this.emitter.emit(d.default.events.SCROLL_BEFORE_UPDATE,L,F),a(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"update",this).call(this,F.concat([])),F.length>0&&this.emitter.emit(d.default.events.SCROLL_UPDATE,L,F)}}}]),A}(c.default.Scroll);E.blotName="scroll",E.className="ql-editor",E.tagName="DIV",E.defaultChild="block",E.allowedChildren=[p.default,f.BlockEmbed,w.default],r.default=E},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},s=function(){function V(J,oe){var ne=[],pe=!0,ye=!1,Ce=void 0;try{for(var _e=J[Symbol.iterator](),ce;!(pe=(ce=_e.next()).done)&&(ne.push(ce.value),!(oe&&ne.length===oe));pe=!0);}catch(Be){ye=!0,Ce=Be}finally{try{!pe&&_e.return&&_e.return()}finally{if(ye)throw Ce}}return ne}return function(J,oe){if(Array.isArray(J))return J;if(Symbol.iterator in Object(J))return V(J,oe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function V(J,oe){for(var ne=0;ne<oe.length;ne++){var pe=oe[ne];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(J,pe.key,pe)}}return function(J,oe,ne){return oe&&V(J.prototype,oe),ne&&V(J,ne),J}}(),l=i(21),c=_(l),u=i(11),d=_(u),f=i(3),p=_(f),b=i(2),v=_(b),m=i(20),g=_(m),x=i(0),w=_(x),S=i(5),P=_(S),I=i(10),M=_(I),D=i(9),E=_(D);function _(V){return V&&V.__esModule?V:{default:V}}function A(V,J,oe){return J in V?Object.defineProperty(V,J,{value:oe,enumerable:!0,configurable:!0,writable:!0}):V[J]=oe,V}function R(V,J){if(!(V instanceof J))throw new TypeError("Cannot call a class as a function")}function F(V,J){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return J&&(typeof J=="object"||typeof J=="function")?J:V}function L(V,J){if(typeof J!="function"&&J!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof J);V.prototype=Object.create(J&&J.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),J&&(Object.setPrototypeOf?Object.setPrototypeOf(V,J):V.__proto__=J)}var N=(0,M.default)("quill:keyboard"),U=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",$=function(V){L(J,V),a(J,null,[{key:"match",value:function(ne,pe){return pe=ee(pe),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ye){return!!pe[ye]!==ne[ye]&&pe[ye]!==null})?!1:pe.key===(ne.which||ne.keyCode)}}]);function J(oe,ne){R(this,J);var pe=F(this,(J.__proto__||Object.getPrototypeOf(J)).call(this,oe,ne));return pe.bindings={},Object.keys(pe.options.bindings).forEach(function(ye){ye==="list autofill"&&oe.scroll.whitelist!=null&&!oe.scroll.whitelist.list||pe.options.bindings[ye]&&pe.addBinding(pe.options.bindings[ye])}),pe.addBinding({key:J.keys.ENTER,shiftKey:null},G),pe.addBinding({key:J.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(pe.addBinding({key:J.keys.BACKSPACE},{collapsed:!0},H),pe.addBinding({key:J.keys.DELETE},{collapsed:!0},q)):(pe.addBinding({key:J.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},H),pe.addBinding({key:J.keys.DELETE},{collapsed:!0,suffix:/^.?$/},q)),pe.addBinding({key:J.keys.BACKSPACE},{collapsed:!1},z),pe.addBinding({key:J.keys.DELETE},{collapsed:!1},z),pe.addBinding({key:J.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},H),pe.listen(),pe}return a(J,[{key:"addBinding",value:function(ne){var pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ce=ee(ne);if(Ce==null||Ce.key==null)return N.warn("Attempted to add invalid keyboard binding",Ce);typeof pe=="function"&&(pe={handler:pe}),typeof ye=="function"&&(ye={handler:ye}),Ce=(0,p.default)(Ce,pe,ye),this.bindings[Ce.key]=this.bindings[Ce.key]||[],this.bindings[Ce.key].push(Ce)}},{key:"listen",value:function(){var ne=this;this.quill.root.addEventListener("keydown",function(pe){if(!pe.defaultPrevented){var ye=pe.which||pe.keyCode,Ce=(ne.bindings[ye]||[]).filter(function(it){return J.match(pe,it)});if(Ce.length!==0){var _e=ne.quill.getSelection();if(!(_e==null||!ne.quill.hasFocus())){var ce=ne.quill.getLine(_e.index),Be=s(ce,2),de=Be[0],me=Be[1],ie=ne.quill.getLeaf(_e.index),ae=s(ie,2),ge=ae[0],X=ae[1],W=_e.length===0?[ge,X]:ne.quill.getLeaf(_e.index+_e.length),ve=s(W,2),ue=ve[0],Me=ve[1],Ae=ge instanceof w.default.Text?ge.value().slice(0,X):"",Ne=ue instanceof w.default.Text?ue.value().slice(Me):"",Re={collapsed:_e.length===0,empty:_e.length===0&&de.length()<=1,format:ne.quill.getFormat(_e),offset:me,prefix:Ae,suffix:Ne},Ie=Ce.some(function(it){if(it.collapsed!=null&&it.collapsed!==Re.collapsed||it.empty!=null&&it.empty!==Re.empty||it.offset!=null&&it.offset!==Re.offset)return!1;if(Array.isArray(it.format)){if(it.format.every(function(Ee){return Re.format[Ee]==null}))return!1}else if(o(it.format)==="object"&&!Object.keys(it.format).every(function(Ee){return it.format[Ee]===!0?Re.format[Ee]!=null:it.format[Ee]===!1?Re.format[Ee]==null:(0,d.default)(it.format[Ee],Re.format[Ee])}))return!1;return it.prefix!=null&&!it.prefix.test(Re.prefix)||it.suffix!=null&&!it.suffix.test(Re.suffix)?!1:it.handler.call(ne,_e,Re)!==!0});Ie&&pe.preventDefault()}}}})}}]),J}(E.default);$.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},$.DEFAULTS={bindings:{bold:Z("bold"),italic:Z("italic"),underline:Z("underline"),indent:{key:$.keys.TAB,format:["blockquote","indent","list"],handler:function(J,oe){if(oe.collapsed&&oe.offset!==0)return!0;this.quill.format("indent","+1",P.default.sources.USER)}},outdent:{key:$.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(J,oe){if(oe.collapsed&&oe.offset!==0)return!0;this.quill.format("indent","-1",P.default.sources.USER)}},"outdent backspace":{key:$.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(J,oe){oe.format.indent!=null?this.quill.format("indent","-1",P.default.sources.USER):oe.format.list!=null&&this.quill.format("list",!1,P.default.sources.USER)}},"indent code-block":K(!0),"outdent code-block":K(!1),"remove tab":{key:$.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(J){this.quill.deleteText(J.index-1,1,P.default.sources.USER)}},tab:{key:$.keys.TAB,handler:function(J){this.quill.history.cutoff();var oe=new v.default().retain(J.index).delete(J.length).insert("	");this.quill.updateContents(oe,P.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(J.index+1,P.default.sources.SILENT)}},"list empty enter":{key:$.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(J,oe){this.quill.format("list",!1,P.default.sources.USER),oe.format.indent&&this.quill.format("indent",!1,P.default.sources.USER)}},"checklist enter":{key:$.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(J){var oe=this.quill.getLine(J.index),ne=s(oe,2),pe=ne[0],ye=ne[1],Ce=(0,p.default)({},pe.formats(),{list:"checked"}),_e=new v.default().retain(J.index).insert(`
`,Ce).retain(pe.length()-ye-1).retain(1,{list:"unchecked"});this.quill.updateContents(_e,P.default.sources.USER),this.quill.setSelection(J.index+1,P.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:$.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(J,oe){var ne=this.quill.getLine(J.index),pe=s(ne,2),ye=pe[0],Ce=pe[1],_e=new v.default().retain(J.index).insert(`
`,oe.format).retain(ye.length()-Ce-1).retain(1,{header:null});this.quill.updateContents(_e,P.default.sources.USER),this.quill.setSelection(J.index+1,P.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(J,oe){var ne=oe.prefix.length,pe=this.quill.getLine(J.index),ye=s(pe,2),Ce=ye[0],_e=ye[1];if(_e>ne)return!0;var ce=void 0;switch(oe.prefix.trim()){case"[]":case"[ ]":ce="unchecked";break;case"[x]":ce="checked";break;case"-":case"*":ce="bullet";break;default:ce="ordered"}this.quill.insertText(J.index," ",P.default.sources.USER),this.quill.history.cutoff();var Be=new v.default().retain(J.index-_e).delete(ne+1).retain(Ce.length()-2-_e).retain(1,{list:ce});this.quill.updateContents(Be,P.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(J.index-ne,P.default.sources.SILENT)}},"code exit":{key:$.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(J){var oe=this.quill.getLine(J.index),ne=s(oe,2),pe=ne[0],ye=ne[1],Ce=new v.default().retain(J.index+pe.length()-ye-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Ce,P.default.sources.USER)}},"embed left":B($.keys.LEFT,!1),"embed left shift":B($.keys.LEFT,!0),"embed right":B($.keys.RIGHT,!1),"embed right shift":B($.keys.RIGHT,!0)}};function B(V,J){var oe,ne=V===$.keys.LEFT?"prefix":"suffix";return oe={key:V,shiftKey:J,altKey:null},A(oe,ne,/^$/),A(oe,"handler",function(ye){var Ce=ye.index;V===$.keys.RIGHT&&(Ce+=ye.length+1);var _e=this.quill.getLeaf(Ce),ce=s(_e,1),Be=ce[0];return Be instanceof w.default.Embed?(V===$.keys.LEFT?J?this.quill.setSelection(ye.index-1,ye.length+1,P.default.sources.USER):this.quill.setSelection(ye.index-1,P.default.sources.USER):J?this.quill.setSelection(ye.index,ye.length+1,P.default.sources.USER):this.quill.setSelection(ye.index+ye.length+1,P.default.sources.USER),!1):!0}),oe}function H(V,J){if(!(V.index===0||this.quill.getLength()<=1)){var oe=this.quill.getLine(V.index),ne=s(oe,1),pe=ne[0],ye={};if(J.offset===0){var Ce=this.quill.getLine(V.index-1),_e=s(Ce,1),ce=_e[0];if(ce!=null&&ce.length()>1){var Be=pe.formats(),de=this.quill.getFormat(V.index-1,1);ye=g.default.attributes.diff(Be,de)||{}}}var me=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(J.prefix)?2:1;this.quill.deleteText(V.index-me,me,P.default.sources.USER),Object.keys(ye).length>0&&this.quill.formatLine(V.index-me,me,ye,P.default.sources.USER),this.quill.focus()}}function q(V,J){var oe=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(J.suffix)?2:1;if(!(V.index>=this.quill.getLength()-oe)){var ne={},pe=0,ye=this.quill.getLine(V.index),Ce=s(ye,1),_e=Ce[0];if(J.offset>=_e.length()-1){var ce=this.quill.getLine(V.index+1),Be=s(ce,1),de=Be[0];if(de){var me=_e.formats(),ie=this.quill.getFormat(V.index,1);ne=g.default.attributes.diff(me,ie)||{},pe=de.length()}}this.quill.deleteText(V.index,oe,P.default.sources.USER),Object.keys(ne).length>0&&this.quill.formatLine(V.index+pe-1,oe,ne,P.default.sources.USER)}}function z(V){var J=this.quill.getLines(V),oe={};if(J.length>1){var ne=J[0].formats(),pe=J[J.length-1].formats();oe=g.default.attributes.diff(pe,ne)||{}}this.quill.deleteText(V,P.default.sources.USER),Object.keys(oe).length>0&&this.quill.formatLine(V.index,1,oe,P.default.sources.USER),this.quill.setSelection(V.index,P.default.sources.SILENT),this.quill.focus()}function G(V,J){var oe=this;V.length>0&&this.quill.scroll.deleteAt(V.index,V.length);var ne=Object.keys(J.format).reduce(function(pe,ye){return w.default.query(ye,w.default.Scope.BLOCK)&&!Array.isArray(J.format[ye])&&(pe[ye]=J.format[ye]),pe},{});this.quill.insertText(V.index,`
`,ne,P.default.sources.USER),this.quill.setSelection(V.index+1,P.default.sources.SILENT),this.quill.focus(),Object.keys(J.format).forEach(function(pe){ne[pe]==null&&(Array.isArray(J.format[pe])||pe!=="link"&&oe.quill.format(pe,J.format[pe],P.default.sources.USER))})}function K(V){return{key:$.keys.TAB,shiftKey:!V,format:{"code-block":!0},handler:function(oe){var ne=w.default.query("code-block"),pe=oe.index,ye=oe.length,Ce=this.quill.scroll.descendant(ne,pe),_e=s(Ce,2),ce=_e[0],Be=_e[1];if(ce!=null){var de=this.quill.getIndex(ce),me=ce.newlineIndex(Be,!0)+1,ie=ce.newlineIndex(de+Be+ye),ae=ce.domNode.textContent.slice(me,ie).split(`
`);Be=0,ae.forEach(function(ge,X){V?(ce.insertAt(me+Be,ne.TAB),Be+=ne.TAB.length,X===0?pe+=ne.TAB.length:ye+=ne.TAB.length):ge.startsWith(ne.TAB)&&(ce.deleteAt(me+Be,ne.TAB.length),Be-=ne.TAB.length,X===0?pe-=ne.TAB.length:ye-=ne.TAB.length),Be+=ge.length+1}),this.quill.update(P.default.sources.USER),this.quill.setSelection(pe,ye,P.default.sources.SILENT)}}}}function Z(V){return{key:V[0].toUpperCase(),shortKey:!0,handler:function(oe,ne){this.quill.format(V,!ne.format[V],P.default.sources.USER)}}}function ee(V){if(typeof V=="string"||typeof V=="number")return ee({key:V});if((typeof V=="undefined"?"undefined":o(V))==="object"&&(V=(0,c.default)(V,!1)),typeof V.key=="string")if($.keys[V.key.toUpperCase()]!=null)V.key=$.keys[V.key.toUpperCase()];else if(V.key.length===1)V.key=V.key.toUpperCase().charCodeAt(0);else return null;return V.shortKey&&(V[U]=V.shortKey,delete V.shortKey),V}r.default=$,r.SHORTKEY=U},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function g(x,w){var S=[],P=!0,I=!1,M=void 0;try{for(var D=x[Symbol.iterator](),E;!(P=(E=D.next()).done)&&(S.push(E.value),!(w&&S.length===w));P=!0);}catch(_){I=!0,M=_}finally{try{!P&&D.return&&D.return()}finally{if(I)throw M}}return S}return function(x,w){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return g(x,w);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function g(x,w,S){x===null&&(x=Function.prototype);var P=Object.getOwnPropertyDescriptor(x,w);if(P===void 0){var I=Object.getPrototypeOf(x);return I===null?void 0:g(I,w,S)}else{if("value"in P)return P.value;var M=P.get;return M===void 0?void 0:M.call(S)}},a=function(){function g(x,w){for(var S=0;S<w.length;S++){var P=w[S];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(x,P.key,P)}}return function(x,w,S){return w&&g(x.prototype,w),S&&g(x,S),x}}(),l=i(0),c=f(l),u=i(7),d=f(u);function f(g){return g&&g.__esModule?g:{default:g}}function p(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function b(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function v(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var m=function(g){v(x,g),a(x,null,[{key:"value",value:function(){}}]);function x(w,S){p(this,x);var P=b(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,w));return P.selection=S,P.textNode=document.createTextNode(x.CONTENTS),P.domNode.appendChild(P.textNode),P._length=0,P}return a(x,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(S,P){if(this._length!==0)return s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"format",this).call(this,S,P);for(var I=this,M=0;I!=null&&I.statics.scope!==c.default.Scope.BLOCK_BLOT;)M+=I.offset(I.parent),I=I.parent;I!=null&&(this._length=x.CONTENTS.length,I.optimize(),I.formatAt(M,x.CONTENTS.length,S,P),this._length=0)}},{key:"index",value:function(S,P){return S===this.textNode?0:s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"index",this).call(this,S,P)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var S=this.textNode,P=this.selection.getNativeRange(),I=void 0,M=void 0,D=void 0;if(P!=null&&P.start.node===S&&P.end.node===S){var E=[S,P.start.offset,P.end.offset];I=E[0],M=E[1],D=E[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==x.CONTENTS){var _=this.textNode.data.split(x.CONTENTS).join("");this.next instanceof d.default?(I=this.next.domNode,this.next.insertAt(0,_),this.textNode.data=x.CONTENTS):(this.textNode.data=_,this.parent.insertBefore(c.default.create(this.textNode),this),this.textNode=document.createTextNode(x.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),M!=null){var A=[M,D].map(function(F){return Math.max(0,Math.min(I.data.length,F-1))}),R=o(A,2);return M=R[0],D=R[1],{startNode:I,startOffset:M,endNode:I,endOffset:D}}}}},{key:"update",value:function(S,P){var I=this;if(S.some(function(D){return D.type==="characterData"&&D.target===I.textNode})){var M=this.restore();M&&(P.range=M)}}},{key:"value",value:function(){return""}}]),x}(c.default.Embed);m.blotName="cursor",m.className="ql-cursor",m.tagName="span",m.CONTENTS="\uFEFF",r.default=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),s=c(o),a=i(4),l=c(a);function c(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function d(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function f(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var p=function(b){f(v,b);function v(){return u(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return v}(s.default.Container);p.allowedChildren=[l.default,a.BlockEmbed,p],r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var o=function(){function m(g,x){for(var w=0;w<x.length;w++){var S=x[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,S.key,S)}}return function(g,x,w){return x&&m(g.prototype,x),w&&m(g,w),g}}(),s=function m(g,x,w){g===null&&(g=Function.prototype);var S=Object.getOwnPropertyDescriptor(g,x);if(S===void 0){var P=Object.getPrototypeOf(g);return P===null?void 0:m(P,x,w)}else{if("value"in S)return S.value;var I=S.get;return I===void 0?void 0:I.call(w)}},a=i(0),l=c(a);function c(m){return m&&m.__esModule?m:{default:m}}function u(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function d(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function f(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var p=function(m){f(g,m);function g(){return u(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"value",value:function(w){var S=s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,w);return S.startsWith("rgb(")?(S=S.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+S.split(",").map(function(P){return("00"+parseInt(P).toString(16)).slice(-2)}).join("")):S}}]),g}(l.default.Attributor.Style),b=new l.default.Attributor.Class("color","ql-color",{scope:l.default.Scope.INLINE}),v=new p("color","color",{scope:l.default.Scope.INLINE});r.ColorAttributor=p,r.ColorClass=b,r.ColorStyle=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var o=function(){function v(m,g){for(var x=0;x<g.length;x++){var w=g[x];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(m,w.key,w)}}return function(m,g,x){return g&&v(m.prototype,g),x&&v(m,x),m}}(),s=function v(m,g,x){m===null&&(m=Function.prototype);var w=Object.getOwnPropertyDescriptor(m,g);if(w===void 0){var S=Object.getPrototypeOf(m);return S===null?void 0:v(S,g,x)}else{if("value"in w)return w.value;var P=w.get;return P===void 0?void 0:P.call(x)}},a=i(6),l=c(a);function c(v){return v&&v.__esModule?v:{default:v}}function u(v,m){if(!(v instanceof m))throw new TypeError("Cannot call a class as a function")}function d(v,m){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:v}function f(v,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);v.prototype=Object.create(m&&m.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(v,m):v.__proto__=m)}var p=function(v){f(m,v);function m(){return u(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"format",value:function(x,w){if(x!==this.statics.blotName||!w)return s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,x,w);w=this.constructor.sanitize(w),this.domNode.setAttribute("href",w)}}],[{key:"create",value:function(x){var w=s(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,x);return x=this.sanitize(x),w.setAttribute("href",x),w.setAttribute("rel","noopener noreferrer"),w.setAttribute("target","_blank"),w}},{key:"formats",value:function(x){return x.getAttribute("href")}},{key:"sanitize",value:function(x){return b(x,this.PROTOCOL_WHITELIST)?x:this.SANITIZED_URL}}]),m}(l.default);p.blotName="link",p.tagName="A",p.SANITIZED_URL="about:blank",p.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function b(v,m){var g=document.createElement("a");g.href=v;var x=g.href.slice(0,g.href.indexOf(":"));return m.indexOf(x)>-1}r.default=p,r.sanitize=b},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},s=function(){function m(g,x){for(var w=0;w<x.length;w++){var S=x[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,S.key,S)}}return function(g,x,w){return x&&m(g.prototype,x),w&&m(g,w),g}}(),a=i(23),l=d(a),c=i(107),u=d(c);function d(m){return m&&m.__esModule?m:{default:m}}function f(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}var p=0;function b(m,g){m.setAttribute(g,m.getAttribute(g)!=="true")}var v=function(){function m(g){var x=this;f(this,m),this.select=g,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){x.togglePicker()}),this.label.addEventListener("keydown",function(w){switch(w.keyCode){case l.default.keys.ENTER:x.togglePicker();break;case l.default.keys.ESCAPE:x.escape(),w.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return s(m,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),b(this.label,"aria-expanded"),b(this.options,"aria-hidden")}},{key:"buildItem",value:function(x){var w=this,S=document.createElement("span");return S.tabIndex="0",S.setAttribute("role","button"),S.classList.add("ql-picker-item"),x.hasAttribute("value")&&S.setAttribute("data-value",x.getAttribute("value")),x.textContent&&S.setAttribute("data-label",x.textContent),S.addEventListener("click",function(){w.selectItem(S,!0)}),S.addEventListener("keydown",function(P){switch(P.keyCode){case l.default.keys.ENTER:w.selectItem(S,!0),P.preventDefault();break;case l.default.keys.ESCAPE:w.escape(),P.preventDefault();break}}),S}},{key:"buildLabel",value:function(){var x=document.createElement("span");return x.classList.add("ql-picker-label"),x.innerHTML=u.default,x.tabIndex="0",x.setAttribute("role","button"),x.setAttribute("aria-expanded","false"),this.container.appendChild(x),x}},{key:"buildOptions",value:function(){var x=this,w=document.createElement("span");w.classList.add("ql-picker-options"),w.setAttribute("aria-hidden","true"),w.tabIndex="-1",w.id="ql-picker-options-"+p,p+=1,this.label.setAttribute("aria-controls",w.id),this.options=w,[].slice.call(this.select.options).forEach(function(S){var P=x.buildItem(S);w.appendChild(P),S.selected===!0&&x.selectItem(P)}),this.container.appendChild(w)}},{key:"buildPicker",value:function(){var x=this;[].slice.call(this.select.attributes).forEach(function(w){x.container.setAttribute(w.name,w.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var x=this;this.close(),setTimeout(function(){return x.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(x){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,S=this.container.querySelector(".ql-selected");if(x!==S&&(S!=null&&S.classList.remove("ql-selected"),x!=null&&(x.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(x.parentNode.children,x),x.hasAttribute("data-value")?this.label.setAttribute("data-value",x.getAttribute("data-value")):this.label.removeAttribute("data-value"),x.hasAttribute("data-label")?this.label.setAttribute("data-label",x.getAttribute("data-label")):this.label.removeAttribute("data-label"),w))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event=="undefined"?"undefined":o(Event))==="object"){var P=document.createEvent("Event");P.initEvent("change",!0,!0),this.select.dispatchEvent(P)}this.close()}}},{key:"update",value:function(){var x=void 0;if(this.select.selectedIndex>-1){var w=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];x=this.select.options[this.select.selectedIndex],this.selectItem(w)}else this.selectItem(null);var S=x!=null&&x!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",S)}}]),m}();r.default=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),s=N(o),a=i(5),l=N(a),c=i(4),u=N(c),d=i(16),f=N(d),p=i(25),b=N(p),v=i(24),m=N(v),g=i(35),x=N(g),w=i(6),S=N(w),P=i(22),I=N(P),M=i(7),D=N(M),E=i(55),_=N(E),A=i(42),R=N(A),F=i(23),L=N(F);function N(U){return U&&U.__esModule?U:{default:U}}l.default.register({"blots/block":u.default,"blots/block/embed":c.BlockEmbed,"blots/break":f.default,"blots/container":b.default,"blots/cursor":m.default,"blots/embed":x.default,"blots/inline":S.default,"blots/scroll":I.default,"blots/text":D.default,"modules/clipboard":_.default,"modules/history":R.default,"modules/keyboard":L.default}),s.default.register(u.default,f.default,m.default,S.default,I.default,D.default),r.default=l.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(1),s=function(){function a(l){this.domNode=l,this.domNode[o.DATA_KEY]={blot:this}}return Object.defineProperty(a.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),a.create=function(l){if(this.tagName==null)throw new o.ParchmentError("Blot definition missing tagName");var c;return Array.isArray(this.tagName)?(typeof l=="string"&&(l=l.toUpperCase(),parseInt(l).toString()===l&&(l=parseInt(l))),typeof l=="number"?c=document.createElement(this.tagName[l-1]):this.tagName.indexOf(l)>-1?c=document.createElement(l):c=document.createElement(this.tagName[0])):c=document.createElement(this.tagName),this.className&&c.classList.add(this.className),c},a.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},a.prototype.clone=function(){var l=this.domNode.cloneNode(!1);return o.create(l)},a.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[o.DATA_KEY]},a.prototype.deleteAt=function(l,c){var u=this.isolate(l,c);u.remove()},a.prototype.formatAt=function(l,c,u,d){var f=this.isolate(l,c);if(o.query(u,o.Scope.BLOT)!=null&&d)f.wrap(u,d);else if(o.query(u,o.Scope.ATTRIBUTE)!=null){var p=o.create(this.statics.scope);f.wrap(p),p.format(u,d)}},a.prototype.insertAt=function(l,c,u){var d=u==null?o.create("text",c):o.create(c,u),f=this.split(l);this.parent.insertBefore(d,f)},a.prototype.insertInto=function(l,c){c===void 0&&(c=null),this.parent!=null&&this.parent.children.remove(this);var u=null;l.children.insertBefore(this,c),c!=null&&(u=c.domNode),(this.domNode.parentNode!=l.domNode||this.domNode.nextSibling!=u)&&l.domNode.insertBefore(this.domNode,u),this.parent=l,this.attach()},a.prototype.isolate=function(l,c){var u=this.split(l);return u.split(c),u},a.prototype.length=function(){return 1},a.prototype.offset=function(l){return l===void 0&&(l=this.parent),this.parent==null||this==l?0:this.parent.children.offset(this)+this.parent.offset(l)},a.prototype.optimize=function(l){this.domNode[o.DATA_KEY]!=null&&delete this.domNode[o.DATA_KEY].mutations},a.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},a.prototype.replace=function(l){l.parent!=null&&(l.parent.insertBefore(this,l.next),l.remove())},a.prototype.replaceWith=function(l,c){var u=typeof l=="string"?o.create(l,c):l;return u.replace(this),u},a.prototype.split=function(l,c){return l===0?this:this.next},a.prototype.update=function(l,c){},a.prototype.wrap=function(l,c){var u=typeof l=="string"?o.create(l,c):l;return this.parent!=null&&this.parent.insertBefore(u,this.next),u.appendChild(this),u},a.blotName="abstract",a}();r.default=s},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(12),s=i(32),a=i(33),l=i(1),c=function(){function u(d){this.attributes={},this.domNode=d,this.build()}return u.prototype.attribute=function(d,f){f?d.add(this.domNode,f)&&(d.value(this.domNode)!=null?this.attributes[d.attrName]=d:delete this.attributes[d.attrName]):(d.remove(this.domNode),delete this.attributes[d.attrName])},u.prototype.build=function(){var d=this;this.attributes={};var f=o.default.keys(this.domNode),p=s.default.keys(this.domNode),b=a.default.keys(this.domNode);f.concat(p).concat(b).forEach(function(v){var m=l.query(v,l.Scope.ATTRIBUTE);m instanceof o.default&&(d.attributes[m.attrName]=m)})},u.prototype.copy=function(d){var f=this;Object.keys(this.attributes).forEach(function(p){var b=f.attributes[p].value(f.domNode);d.format(p,b)})},u.prototype.move=function(d){var f=this;this.copy(d),Object.keys(this.attributes).forEach(function(p){f.attributes[p].remove(f.domNode)}),this.attributes={}},u.prototype.values=function(){var d=this;return Object.keys(this.attributes).reduce(function(f,p){return f[p]=d.attributes[p].value(d.domNode),f},{})},u}();r.default=c},function(n,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var f in d)d.hasOwnProperty(f)&&(u[f]=d[f])};return function(u,d){c(u,d);function f(){this.constructor=u}u.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12);function a(c,u){var d=c.getAttribute("class")||"";return d.split(/\s+/).filter(function(f){return f.indexOf(u+"-")===0})}var l=function(c){o(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.keys=function(d){return(d.getAttribute("class")||"").split(/\s+/).map(function(f){return f.split("-").slice(0,-1).join("-")})},u.prototype.add=function(d,f){return this.canAdd(d,f)?(this.remove(d),d.classList.add(this.keyName+"-"+f),!0):!1},u.prototype.remove=function(d){var f=a(d,this.keyName);f.forEach(function(p){d.classList.remove(p)}),d.classList.length===0&&d.removeAttribute("class")},u.prototype.value=function(d){var f=a(d,this.keyName)[0]||"",p=f.slice(this.keyName.length+1);return this.canAdd(d,p)?p:""},u}(s.default);r.default=l},function(n,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var f in d)d.hasOwnProperty(f)&&(u[f]=d[f])};return function(u,d){c(u,d);function f(){this.constructor=u}u.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12);function a(c){var u=c.split("-"),d=u.slice(1).map(function(f){return f[0].toUpperCase()+f.slice(1)}).join("");return u[0]+d}var l=function(c){o(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.keys=function(d){return(d.getAttribute("style")||"").split(";").map(function(f){var p=f.split(":");return p[0].trim()})},u.prototype.add=function(d,f){return this.canAdd(d,f)?(d.style[a(this.keyName)]=f,!0):!1},u.prototype.remove=function(d){d.style[a(this.keyName)]="",d.getAttribute("style")||d.removeAttribute("style")},u.prototype.value=function(d){var f=d.style[a(this.keyName)];return this.canAdd(d,f)?f:""},u}(s.default);r.default=l},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function l(c,u){for(var d=0;d<u.length;d++){var f=u[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}return function(c,u,d){return u&&l(c.prototype,u),d&&l(c,d),c}}();function s(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var a=function(){function l(c,u){s(this,l),this.quill=c,this.options=u,this.modules={}}return o(l,[{key:"init",value:function(){var u=this;Object.keys(this.options.modules).forEach(function(d){u.modules[d]==null&&u.addModule(d)})}},{key:"addModule",value:function(u){var d=this.quill.constructor.import("modules/"+u);return this.modules[u]=new d(this.quill,this.options.modules[u]||{}),this.modules[u]}}]),l}();a.DEFAULTS={modules:{}},a.themes={default:a},r.default=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function g(x,w){for(var S=0;S<w.length;S++){var P=w[S];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(x,P.key,P)}}return function(x,w,S){return w&&g(x.prototype,w),S&&g(x,S),x}}(),s=function g(x,w,S){x===null&&(x=Function.prototype);var P=Object.getOwnPropertyDescriptor(x,w);if(P===void 0){var I=Object.getPrototypeOf(x);return I===null?void 0:g(I,w,S)}else{if("value"in P)return P.value;var M=P.get;return M===void 0?void 0:M.call(S)}},a=i(0),l=d(a),c=i(7),u=d(c);function d(g){return g&&g.__esModule?g:{default:g}}function f(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function p(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function b(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var v="\uFEFF",m=function(g){b(x,g);function x(w){f(this,x);var S=p(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,w));return S.contentNode=document.createElement("span"),S.contentNode.setAttribute("contenteditable",!1),[].slice.call(S.domNode.childNodes).forEach(function(P){S.contentNode.appendChild(P)}),S.leftGuard=document.createTextNode(v),S.rightGuard=document.createTextNode(v),S.domNode.appendChild(S.leftGuard),S.domNode.appendChild(S.contentNode),S.domNode.appendChild(S.rightGuard),S}return o(x,[{key:"index",value:function(S,P){return S===this.leftGuard?0:S===this.rightGuard?1:s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"index",this).call(this,S,P)}},{key:"restore",value:function(S){var P=void 0,I=void 0,M=S.data.split(v).join("");if(S===this.leftGuard)if(this.prev instanceof u.default){var D=this.prev.length();this.prev.insertAt(D,M),P={startNode:this.prev.domNode,startOffset:D+M.length}}else I=document.createTextNode(M),this.parent.insertBefore(l.default.create(I),this),P={startNode:I,startOffset:M.length};else S===this.rightGuard&&(this.next instanceof u.default?(this.next.insertAt(0,M),P={startNode:this.next.domNode,startOffset:M.length}):(I=document.createTextNode(M),this.parent.insertBefore(l.default.create(I),this.next),P={startNode:I,startOffset:M.length}));return S.data=v,P}},{key:"update",value:function(S,P){var I=this;S.forEach(function(M){if(M.type==="characterData"&&(M.target===I.leftGuard||M.target===I.rightGuard)){var D=I.restore(M.target);D&&(P.range=D)}})}}]),x}(l.default.Embed);r.default=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var o=i(0),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}var l={scope:s.default.Scope.BLOCK,whitelist:["right","center","justify"]},c=new s.default.Attributor.Attribute("align","align",l),u=new s.default.Attributor.Class("align","ql-align",l),d=new s.default.Attributor.Style("align","text-align",l);r.AlignAttribute=c,r.AlignClass=u,r.AlignStyle=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var o=i(0),s=l(o),a=i(26);function l(d){return d&&d.__esModule?d:{default:d}}var c=new s.default.Attributor.Class("background","ql-bg",{scope:s.default.Scope.INLINE}),u=new a.ColorAttributor("background","background-color",{scope:s.default.Scope.INLINE});r.BackgroundClass=c,r.BackgroundStyle=u},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var o=i(0),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}var l={scope:s.default.Scope.BLOCK,whitelist:["rtl"]},c=new s.default.Attributor.Attribute("direction","dir",l),u=new s.default.Attributor.Class("direction","ql-direction",l),d=new s.default.Attributor.Style("direction","direction",l);r.DirectionAttribute=c,r.DirectionClass=u,r.DirectionStyle=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var o=function(){function g(x,w){for(var S=0;S<w.length;S++){var P=w[S];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(x,P.key,P)}}return function(x,w,S){return w&&g(x.prototype,w),S&&g(x,S),x}}(),s=function g(x,w,S){x===null&&(x=Function.prototype);var P=Object.getOwnPropertyDescriptor(x,w);if(P===void 0){var I=Object.getPrototypeOf(x);return I===null?void 0:g(I,w,S)}else{if("value"in P)return P.value;var M=P.get;return M===void 0?void 0:M.call(S)}},a=i(0),l=c(a);function c(g){return g&&g.__esModule?g:{default:g}}function u(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function d(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function f(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var p={scope:l.default.Scope.INLINE,whitelist:["serif","monospace"]},b=new l.default.Attributor.Class("font","ql-font",p),v=function(g){f(x,g);function x(){return u(this,x),d(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return o(x,[{key:"value",value:function(S){return s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"value",this).call(this,S).replace(/["']/g,"")}}]),x}(l.default.Attributor.Style),m=new v("font","font-family",p);r.FontStyle=m,r.FontClass=b},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var o=i(0),s=a(o);function a(u){return u&&u.__esModule?u:{default:u}}var l=new s.default.Attributor.Class("size","ql-size",{scope:s.default.Scope.INLINE,whitelist:["small","large","huge"]}),c=new s.default.Attributor.Style("size","font-size",{scope:s.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=l,r.SizeStyle=c},function(n,r,i){n.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var o=function(){function w(S,P){for(var I=0;I<P.length;I++){var M=P[I];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(S,M.key,M)}}return function(S,P,I){return P&&w(S.prototype,P),I&&w(S,I),S}}(),s=i(0),a=f(s),l=i(5),c=f(l),u=i(9),d=f(u);function f(w){return w&&w.__esModule?w:{default:w}}function p(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function b(w,S){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:w}function v(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(w,S):w.__proto__=S)}var m=function(w){v(S,w);function S(P,I){p(this,S);var M=b(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,P,I));return M.lastRecorded=0,M.ignoreChange=!1,M.clear(),M.quill.on(c.default.events.EDITOR_CHANGE,function(D,E,_,A){D!==c.default.events.TEXT_CHANGE||M.ignoreChange||(!M.options.userOnly||A===c.default.sources.USER?M.record(E,_):M.transform(E))}),M.quill.keyboard.addBinding({key:"Z",shortKey:!0},M.undo.bind(M)),M.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},M.redo.bind(M)),/Win/i.test(navigator.platform)&&M.quill.keyboard.addBinding({key:"Y",shortKey:!0},M.redo.bind(M)),M}return o(S,[{key:"change",value:function(I,M){if(this.stack[I].length!==0){var D=this.stack[I].pop();this.stack[M].push(D),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(D[I],c.default.sources.USER),this.ignoreChange=!1;var E=x(D[I]);this.quill.setSelection(E)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(I,M){if(I.ops.length!==0){this.stack.redo=[];var D=this.quill.getContents().diff(M),E=Date.now();if(this.lastRecorded+this.options.delay>E&&this.stack.undo.length>0){var _=this.stack.undo.pop();D=D.compose(_.undo),I=_.redo.compose(I)}else this.lastRecorded=E;this.stack.undo.push({redo:I,undo:D}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(I){this.stack.undo.forEach(function(M){M.undo=I.transform(M.undo,!0),M.redo=I.transform(M.redo,!0)}),this.stack.redo.forEach(function(M){M.undo=I.transform(M.undo,!0),M.redo=I.transform(M.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),S}(d.default);m.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function g(w){var S=w.ops[w.ops.length-1];return S==null?!1:S.insert!=null?typeof S.insert=="string"&&S.insert.endsWith(`
`):S.attributes!=null?Object.keys(S.attributes).some(function(P){return a.default.query(P,a.default.Scope.BLOCK)!=null}):!1}function x(w){var S=w.reduce(function(I,M){return I+=M.delete||0,I},0),P=w.length()-S;return g(w)&&(P-=1),P}r.default=m,r.getLastChangeIndex=x},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var o=function(){function G(K,Z){for(var ee=0;ee<Z.length;ee++){var V=Z[ee];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(K,V.key,V)}}return function(K,Z,ee){return Z&&G(K.prototype,Z),ee&&G(K,ee),K}}(),s=function G(K,Z,ee){K===null&&(K=Function.prototype);var V=Object.getOwnPropertyDescriptor(K,Z);if(V===void 0){var J=Object.getPrototypeOf(K);return J===null?void 0:G(J,Z,ee)}else{if("value"in V)return V.value;var oe=V.get;return oe===void 0?void 0:oe.call(ee)}},a=i(3),l=E(a),c=i(2),u=E(c),d=i(8),f=E(d),p=i(23),b=E(p),v=i(34),m=E(v),g=i(59),x=E(g),w=i(60),S=E(w),P=i(28),I=E(P),M=i(61),D=E(M);function E(G){return G&&G.__esModule?G:{default:G}}function _(G,K){if(!(G instanceof K))throw new TypeError("Cannot call a class as a function")}function A(G,K){if(!G)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return K&&(typeof K=="object"||typeof K=="function")?K:G}function R(G,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof K);G.prototype=Object.create(K&&K.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),K&&(Object.setPrototypeOf?Object.setPrototypeOf(G,K):G.__proto__=K)}var F=[!1,"center","right","justify"],L=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],N=[!1,"serif","monospace"],U=["1","2","3",!1],$=["small",!1,"large","huge"],B=function(G){R(K,G);function K(Z,ee){_(this,K);var V=A(this,(K.__proto__||Object.getPrototypeOf(K)).call(this,Z,ee)),J=function oe(ne){if(!document.body.contains(Z.root))return document.body.removeEventListener("click",oe);V.tooltip!=null&&!V.tooltip.root.contains(ne.target)&&document.activeElement!==V.tooltip.textbox&&!V.quill.hasFocus()&&V.tooltip.hide(),V.pickers!=null&&V.pickers.forEach(function(pe){pe.container.contains(ne.target)||pe.close()})};return Z.emitter.listenDOM("click",document.body,J),V}return o(K,[{key:"addModule",value:function(ee){var V=s(K.prototype.__proto__||Object.getPrototypeOf(K.prototype),"addModule",this).call(this,ee);return ee==="toolbar"&&this.extendToolbar(V),V}},{key:"buildButtons",value:function(ee,V){ee.forEach(function(J){var oe=J.getAttribute("class")||"";oe.split(/\s+/).forEach(function(ne){if(ne.startsWith("ql-")&&(ne=ne.slice(3),V[ne]!=null))if(ne==="direction")J.innerHTML=V[ne][""]+V[ne].rtl;else if(typeof V[ne]=="string")J.innerHTML=V[ne];else{var pe=J.value||"";pe!=null&&V[ne][pe]&&(J.innerHTML=V[ne][pe])}})})}},{key:"buildPickers",value:function(ee,V){var J=this;this.pickers=ee.map(function(ne){if(ne.classList.contains("ql-align"))return ne.querySelector("option")==null&&z(ne,F),new S.default(ne,V.align);if(ne.classList.contains("ql-background")||ne.classList.contains("ql-color")){var pe=ne.classList.contains("ql-background")?"background":"color";return ne.querySelector("option")==null&&z(ne,L,pe==="background"?"#ffffff":"#000000"),new x.default(ne,V[pe])}else return ne.querySelector("option")==null&&(ne.classList.contains("ql-font")?z(ne,N):ne.classList.contains("ql-header")?z(ne,U):ne.classList.contains("ql-size")&&z(ne,$)),new I.default(ne)});var oe=function(){J.pickers.forEach(function(pe){pe.update()})};this.quill.on(f.default.events.EDITOR_CHANGE,oe)}}]),K}(m.default);B.DEFAULTS=(0,l.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var K=this,Z=this.container.querySelector("input.ql-image[type=file]");Z==null&&(Z=document.createElement("input"),Z.setAttribute("type","file"),Z.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),Z.classList.add("ql-image"),Z.addEventListener("change",function(){if(Z.files!=null&&Z.files[0]!=null){var ee=new FileReader;ee.onload=function(V){var J=K.quill.getSelection(!0);K.quill.updateContents(new u.default().retain(J.index).delete(J.length).insert({image:V.target.result}),f.default.sources.USER),K.quill.setSelection(J.index+1,f.default.sources.SILENT),Z.value=""},ee.readAsDataURL(Z.files[0])}}),this.container.appendChild(Z)),Z.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var H=function(G){R(K,G);function K(Z,ee){_(this,K);var V=A(this,(K.__proto__||Object.getPrototypeOf(K)).call(this,Z,ee));return V.textbox=V.root.querySelector('input[type="text"]'),V.listen(),V}return o(K,[{key:"listen",value:function(){var ee=this;this.textbox.addEventListener("keydown",function(V){b.default.match(V,"enter")?(ee.save(),V.preventDefault()):b.default.match(V,"escape")&&(ee.cancel(),V.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),V!=null?this.textbox.value=V:ee!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+ee)||""),this.root.setAttribute("data-mode",ee)}},{key:"restoreFocus",value:function(){var ee=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=ee}},{key:"save",value:function(){var ee=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var V=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",ee,f.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",ee,f.default.sources.USER)),this.quill.root.scrollTop=V;break}case"video":ee=q(ee);case"formula":{if(!ee)break;var J=this.quill.getSelection(!0);if(J!=null){var oe=J.index+J.length;this.quill.insertEmbed(oe,this.root.getAttribute("data-mode"),ee,f.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(oe+1," ",f.default.sources.USER),this.quill.setSelection(oe+2,f.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),K}(D.default);function q(G){var K=G.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||G.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return K?(K[1]||"https")+"://www.youtube.com/embed/"+K[2]+"?showinfo=0":(K=G.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(K[1]||"https")+"://player.vimeo.com/video/"+K[2]+"/":G}function z(G,K){var Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;K.forEach(function(ee){var V=document.createElement("option");ee===Z?V.setAttribute("selected","selected"):V.setAttribute("value",ee),G.appendChild(V)})}r.BaseTooltip=H,r.default=B},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function s(){this.head=this.tail=null,this.length=0}return s.prototype.append=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];this.insertBefore(a[0],null),a.length>1&&this.append.apply(this,a.slice(1))},s.prototype.contains=function(a){for(var l,c=this.iterator();l=c();)if(l===a)return!0;return!1},s.prototype.insertBefore=function(a,l){a&&(a.next=l,l!=null?(a.prev=l.prev,l.prev!=null&&(l.prev.next=a),l.prev=a,l===this.head&&(this.head=a)):this.tail!=null?(this.tail.next=a,a.prev=this.tail,this.tail=a):(a.prev=null,this.head=this.tail=a),this.length+=1)},s.prototype.offset=function(a){for(var l=0,c=this.head;c!=null;){if(c===a)return l;l+=c.length(),c=c.next}return-1},s.prototype.remove=function(a){this.contains(a)&&(a.prev!=null&&(a.prev.next=a.next),a.next!=null&&(a.next.prev=a.prev),a===this.head&&(this.head=a.next),a===this.tail&&(this.tail=a.prev),this.length-=1)},s.prototype.iterator=function(a){return a===void 0&&(a=this.head),function(){var l=a;return a!=null&&(a=a.next),l}},s.prototype.find=function(a,l){l===void 0&&(l=!1);for(var c,u=this.iterator();c=u();){var d=c.length();if(a<d||l&&a===d&&(c.next==null||c.next.length()!==0))return[c,a];a-=d}return[null,0]},s.prototype.forEach=function(a){for(var l,c=this.iterator();l=c();)a(l)},s.prototype.forEachAt=function(a,l,c){if(!(l<=0))for(var u=this.find(a),d=u[0],f=u[1],p,b=a-f,v=this.iterator(d);(p=v())&&b<a+l;){var m=p.length();a>b?c(p,a-b,Math.min(l,b+m-a)):c(p,0,Math.min(m,a+l-b)),b+=m}},s.prototype.map=function(a){return this.reduce(function(l,c){return l.push(a(c)),l},[])},s.prototype.reduce=function(a,l){for(var c,u=this.iterator();c=u();)l=a(l,c);return l},s}();r.default=o},function(n,r,i){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var b in p)p.hasOwnProperty(b)&&(f[b]=p[b])};return function(f,p){d(f,p);function b(){this.constructor=f}f.prototype=p===null?Object.create(p):(b.prototype=p.prototype,new b)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(17),a=i(1),l={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},c=100,u=function(d){o(f,d);function f(p){var b=d.call(this,p)||this;return b.scroll=b,b.observer=new MutationObserver(function(v){b.update(v)}),b.observer.observe(b.domNode,l),b.attach(),b}return f.prototype.detach=function(){d.prototype.detach.call(this),this.observer.disconnect()},f.prototype.deleteAt=function(p,b){this.update(),p===0&&b===this.length()?this.children.forEach(function(v){v.remove()}):d.prototype.deleteAt.call(this,p,b)},f.prototype.formatAt=function(p,b,v,m){this.update(),d.prototype.formatAt.call(this,p,b,v,m)},f.prototype.insertAt=function(p,b,v){this.update(),d.prototype.insertAt.call(this,p,b,v)},f.prototype.optimize=function(p,b){var v=this;p===void 0&&(p=[]),b===void 0&&(b={}),d.prototype.optimize.call(this,b);for(var m=[].slice.call(this.observer.takeRecords());m.length>0;)p.push(m.pop());for(var g=function(P,I){I===void 0&&(I=!0),!(P==null||P===v)&&P.domNode.parentNode!=null&&(P.domNode[a.DATA_KEY].mutations==null&&(P.domNode[a.DATA_KEY].mutations=[]),I&&g(P.parent))},x=function(P){P.domNode[a.DATA_KEY]==null||P.domNode[a.DATA_KEY].mutations==null||(P instanceof s.default&&P.children.forEach(x),P.optimize(b))},w=p,S=0;w.length>0;S+=1){if(S>=c)throw new Error("[Parchment] Maximum optimize iterations reached");for(w.forEach(function(P){var I=a.find(P.target,!0);I!=null&&(I.domNode===P.target&&(P.type==="childList"?(g(a.find(P.previousSibling,!1)),[].forEach.call(P.addedNodes,function(M){var D=a.find(M,!1);g(D,!1),D instanceof s.default&&D.children.forEach(function(E){g(E,!1)})})):P.type==="attributes"&&g(I.prev)),g(I))}),this.children.forEach(x),w=[].slice.call(this.observer.takeRecords()),m=w.slice();m.length>0;)p.push(m.pop())}},f.prototype.update=function(p,b){var v=this;b===void 0&&(b={}),p=p||this.observer.takeRecords(),p.map(function(m){var g=a.find(m.target,!0);return g==null?null:g.domNode[a.DATA_KEY].mutations==null?(g.domNode[a.DATA_KEY].mutations=[m],g):(g.domNode[a.DATA_KEY].mutations.push(m),null)}).forEach(function(m){m==null||m===v||m.domNode[a.DATA_KEY]==null||m.update(m.domNode[a.DATA_KEY].mutations||[],b)}),this.domNode[a.DATA_KEY].mutations!=null&&d.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,b),this.optimize(p,b)},f.blotName="scroll",f.defaultChild="block",f.scope=a.Scope.BLOCK_BLOT,f.tagName="DIV",f}(s.default);r.default=u},function(n,r,i){var o=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var p in f)f.hasOwnProperty(p)&&(d[p]=f[p])};return function(d,f){u(d,f);function p(){this.constructor=d}d.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(18),a=i(1);function l(u,d){if(Object.keys(u).length!==Object.keys(d).length)return!1;for(var f in u)if(u[f]!==d[f])return!1;return!0}var c=function(u){o(d,u);function d(){return u!==null&&u.apply(this,arguments)||this}return d.formats=function(f){if(f.tagName!==d.tagName)return u.formats.call(this,f)},d.prototype.format=function(f,p){var b=this;f===this.statics.blotName&&!p?(this.children.forEach(function(v){v instanceof s.default||(v=v.wrap(d.blotName,!0)),b.attributes.copy(v)}),this.unwrap()):u.prototype.format.call(this,f,p)},d.prototype.formatAt=function(f,p,b,v){if(this.formats()[b]!=null||a.query(b,a.Scope.ATTRIBUTE)){var m=this.isolate(f,p);m.format(b,v)}else u.prototype.formatAt.call(this,f,p,b,v)},d.prototype.optimize=function(f){u.prototype.optimize.call(this,f);var p=this.formats();if(Object.keys(p).length===0)return this.unwrap();var b=this.next;b instanceof d&&b.prev===this&&l(p,b.formats())&&(b.moveChildren(this),b.remove())},d.blotName="inline",d.scope=a.Scope.INLINE_BLOT,d.tagName="SPAN",d}(s.default);r.default=c},function(n,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var f in d)d.hasOwnProperty(f)&&(u[f]=d[f])};return function(u,d){c(u,d);function f(){this.constructor=u}u.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(18),a=i(1),l=function(c){o(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.formats=function(d){var f=a.query(u.blotName).tagName;if(d.tagName!==f)return c.formats.call(this,d)},u.prototype.format=function(d,f){a.query(d,a.Scope.BLOCK)!=null&&(d===this.statics.blotName&&!f?this.replaceWith(u.blotName):c.prototype.format.call(this,d,f))},u.prototype.formatAt=function(d,f,p,b){a.query(p,a.Scope.BLOCK)!=null?this.format(p,b):c.prototype.formatAt.call(this,d,f,p,b)},u.prototype.insertAt=function(d,f,p){if(p==null||a.query(f,a.Scope.INLINE)!=null)c.prototype.insertAt.call(this,d,f,p);else{var b=this.split(d),v=a.create(f,p);b.parent.insertBefore(v,b)}},u.prototype.update=function(d,f){navigator.userAgent.match(/Trident/)?this.build():c.prototype.update.call(this,d,f)},u.blotName="block",u.scope=a.Scope.BLOCK_BLOT,u.tagName="P",u}(s.default);r.default=l},function(n,r,i){var o=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var d in u)u.hasOwnProperty(d)&&(c[d]=u[d])};return function(c,u){l(c,u);function d(){this.constructor=c}c.prototype=u===null?Object.create(u):(d.prototype=u.prototype,new d)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(19),a=function(l){o(c,l);function c(){return l!==null&&l.apply(this,arguments)||this}return c.formats=function(u){},c.prototype.format=function(u,d){l.prototype.formatAt.call(this,0,this.length(),u,d)},c.prototype.formatAt=function(u,d,f,p){u===0&&d===this.length()?this.format(f,p):l.prototype.formatAt.call(this,u,d,f,p)},c.prototype.formats=function(){return this.statics.formats(this.domNode)},c}(s.default);r.default=a},function(n,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var f in d)d.hasOwnProperty(f)&&(u[f]=d[f])};return function(u,d){c(u,d);function f(){this.constructor=u}u.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(19),a=i(1),l=function(c){o(u,c);function u(d){var f=c.call(this,d)||this;return f.text=f.statics.value(f.domNode),f}return u.create=function(d){return document.createTextNode(d)},u.value=function(d){var f=d.data;return f.normalize&&(f=f.normalize()),f},u.prototype.deleteAt=function(d,f){this.domNode.data=this.text=this.text.slice(0,d)+this.text.slice(d+f)},u.prototype.index=function(d,f){return this.domNode===d?f:-1},u.prototype.insertAt=function(d,f,p){p==null?(this.text=this.text.slice(0,d)+f+this.text.slice(d),this.domNode.data=this.text):c.prototype.insertAt.call(this,d,f,p)},u.prototype.length=function(){return this.text.length},u.prototype.optimize=function(d){c.prototype.optimize.call(this,d),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof u&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},u.prototype.position=function(d,f){return[this.domNode,d]},u.prototype.split=function(d,f){if(f===void 0&&(f=!1),!f){if(d===0)return this;if(d===this.length())return this.next}var p=a.create(this.domNode.splitText(d));return this.parent.insertBefore(p,this.next),this.text=this.statics.value(this.domNode),p},u.prototype.update=function(d,f){var p=this;d.some(function(b){return b.type==="characterData"&&b.target===p.domNode})&&(this.text=this.statics.value(this.domNode))},u.prototype.value=function(){return this.text},u.blotName="text",u.scope=a.Scope.INLINE_BLOT,u}(s.default);r.default=l},function(n,r,i){var o=document.createElement("div");if(o.classList.toggle("test-class",!1),o.classList.contains("test-class")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,l){return arguments.length>1&&!this.contains(a)==!l?l:s.call(this,a)}}String.prototype.startsWith||(String.prototype.startsWith=function(a,l){return l=l||0,this.substr(l,a.length)===a}),String.prototype.endsWith||(String.prototype.endsWith=function(a,l){var c=this.toString();(typeof l!="number"||!isFinite(l)||Math.floor(l)!==l||l>c.length)&&(l=c.length),l-=a.length;var u=c.indexOf(a,l);return u!==-1&&u===l}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("predicate must be a function");for(var c=Object(this),u=c.length>>>0,d=arguments[1],f,p=0;p<u;p++)if(f=c[p],l.call(d,f,p,c))return f}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(n,r){var i=-1,o=1,s=0;function a(S,P,I){if(S==P)return S?[[s,S]]:[];(I<0||S.length<I)&&(I=null);var M=d(S,P),D=S.substring(0,M);S=S.substring(M),P=P.substring(M),M=f(S,P);var E=S.substring(S.length-M);S=S.substring(0,S.length-M),P=P.substring(0,P.length-M);var _=l(S,P);return D&&_.unshift([s,D]),E&&_.push([s,E]),b(_),I!=null&&(_=g(_,I)),_=x(_),_}function l(S,P){var I;if(!S)return[[o,P]];if(!P)return[[i,S]];var M=S.length>P.length?S:P,D=S.length>P.length?P:S,E=M.indexOf(D);if(E!=-1)return I=[[o,M.substring(0,E)],[s,D],[o,M.substring(E+D.length)]],S.length>P.length&&(I[0][0]=I[2][0]=i),I;if(D.length==1)return[[i,S],[o,P]];var _=p(S,P);if(_){var A=_[0],R=_[1],F=_[2],L=_[3],N=_[4],U=a(A,F),$=a(R,L);return U.concat([[s,N]],$)}return c(S,P)}function c(S,P){for(var I=S.length,M=P.length,D=Math.ceil((I+M)/2),E=D,_=2*D,A=new Array(_),R=new Array(_),F=0;F<_;F++)A[F]=-1,R[F]=-1;A[E+1]=0,R[E+1]=0;for(var L=I-M,N=L%2!=0,U=0,$=0,B=0,H=0,q=0;q<D;q++){for(var z=-q+U;z<=q-$;z+=2){var G=E+z,K;z==-q||z!=q&&A[G-1]<A[G+1]?K=A[G+1]:K=A[G-1]+1;for(var Z=K-z;K<I&&Z<M&&S.charAt(K)==P.charAt(Z);)K++,Z++;if(A[G]=K,K>I)$+=2;else if(Z>M)U+=2;else if(N){var ee=E+L-z;if(ee>=0&&ee<_&&R[ee]!=-1){var V=I-R[ee];if(K>=V)return u(S,P,K,Z)}}}for(var J=-q+B;J<=q-H;J+=2){var ee=E+J,V;J==-q||J!=q&&R[ee-1]<R[ee+1]?V=R[ee+1]:V=R[ee-1]+1;for(var oe=V-J;V<I&&oe<M&&S.charAt(I-V-1)==P.charAt(M-oe-1);)V++,oe++;if(R[ee]=V,V>I)H+=2;else if(oe>M)B+=2;else if(!N){var G=E+L-J;if(G>=0&&G<_&&A[G]!=-1){var K=A[G],Z=E+K-G;if(V=I-V,K>=V)return u(S,P,K,Z)}}}}return[[i,S],[o,P]]}function u(S,P,I,M){var D=S.substring(0,I),E=P.substring(0,M),_=S.substring(I),A=P.substring(M),R=a(D,E),F=a(_,A);return R.concat(F)}function d(S,P){if(!S||!P||S.charAt(0)!=P.charAt(0))return 0;for(var I=0,M=Math.min(S.length,P.length),D=M,E=0;I<D;)S.substring(E,D)==P.substring(E,D)?(I=D,E=I):M=D,D=Math.floor((M-I)/2+I);return D}function f(S,P){if(!S||!P||S.charAt(S.length-1)!=P.charAt(P.length-1))return 0;for(var I=0,M=Math.min(S.length,P.length),D=M,E=0;I<D;)S.substring(S.length-D,S.length-E)==P.substring(P.length-D,P.length-E)?(I=D,E=I):M=D,D=Math.floor((M-I)/2+I);return D}function p(S,P){var I=S.length>P.length?S:P,M=S.length>P.length?P:S;if(I.length<4||M.length*2<I.length)return null;function D($,B,H){for(var q=$.substring(H,H+Math.floor($.length/4)),z=-1,G="",K,Z,ee,V;(z=B.indexOf(q,z+1))!=-1;){var J=d($.substring(H),B.substring(z)),oe=f($.substring(0,H),B.substring(0,z));G.length<oe+J&&(G=B.substring(z-oe,z)+B.substring(z,z+J),K=$.substring(0,H-oe),Z=$.substring(H+J),ee=B.substring(0,z-oe),V=B.substring(z+J))}return G.length*2>=$.length?[K,Z,ee,V,G]:null}var E=D(I,M,Math.ceil(I.length/4)),_=D(I,M,Math.ceil(I.length/2)),A;if(!E&&!_)return null;_?E?A=E[4].length>_[4].length?E:_:A=_:A=E;var R,F,L,N;S.length>P.length?(R=A[0],F=A[1],L=A[2],N=A[3]):(L=A[0],N=A[1],R=A[2],F=A[3]);var U=A[4];return[R,F,L,N,U]}function b(S){S.push([s,""]);for(var P=0,I=0,M=0,D="",E="",_;P<S.length;)switch(S[P][0]){case o:M++,E+=S[P][1],P++;break;case i:I++,D+=S[P][1],P++;break;case s:I+M>1?(I!==0&&M!==0&&(_=d(E,D),_!==0&&(P-I-M>0&&S[P-I-M-1][0]==s?S[P-I-M-1][1]+=E.substring(0,_):(S.splice(0,0,[s,E.substring(0,_)]),P++),E=E.substring(_),D=D.substring(_)),_=f(E,D),_!==0&&(S[P][1]=E.substring(E.length-_)+S[P][1],E=E.substring(0,E.length-_),D=D.substring(0,D.length-_))),I===0?S.splice(P-M,I+M,[o,E]):M===0?S.splice(P-I,I+M,[i,D]):S.splice(P-I-M,I+M,[i,D],[o,E]),P=P-I-M+(I?1:0)+(M?1:0)+1):P!==0&&S[P-1][0]==s?(S[P-1][1]+=S[P][1],S.splice(P,1)):P++,M=0,I=0,D="",E="";break}S[S.length-1][1]===""&&S.pop();var A=!1;for(P=1;P<S.length-1;)S[P-1][0]==s&&S[P+1][0]==s&&(S[P][1].substring(S[P][1].length-S[P-1][1].length)==S[P-1][1]?(S[P][1]=S[P-1][1]+S[P][1].substring(0,S[P][1].length-S[P-1][1].length),S[P+1][1]=S[P-1][1]+S[P+1][1],S.splice(P-1,1),A=!0):S[P][1].substring(0,S[P+1][1].length)==S[P+1][1]&&(S[P-1][1]+=S[P+1][1],S[P][1]=S[P][1].substring(S[P+1][1].length)+S[P+1][1],S.splice(P+1,1),A=!0)),P++;A&&b(S)}var v=a;v.INSERT=o,v.DELETE=i,v.EQUAL=s,n.exports=v;function m(S,P){if(P===0)return[s,S];for(var I=0,M=0;M<S.length;M++){var D=S[M];if(D[0]===i||D[0]===s){var E=I+D[1].length;if(P===E)return[M+1,S];if(P<E){S=S.slice();var _=P-I,A=[D[0],D[1].slice(0,_)],R=[D[0],D[1].slice(_)];return S.splice(M,1,A,R),[M+1,S]}else I=E}}throw new Error("cursor_pos is out of bounds!")}function g(S,P){var I=m(S,P),M=I[1],D=I[0],E=M[D],_=M[D+1];if(E==null)return S;if(E[0]!==s)return S;if(_!=null&&E[1]+_[1]===_[1]+E[1])return M.splice(D,2,_,E),w(M,D,2);if(_!=null&&_[1].indexOf(E[1])===0){M.splice(D,2,[_[0],E[1]],[0,E[1]]);var A=_[1].slice(E[1].length);return A.length>0&&M.splice(D+2,0,[_[0],A]),w(M,D,3)}else return S}function x(S){for(var P=!1,I=function(_){return _.charCodeAt(0)>=56320&&_.charCodeAt(0)<=57343},M=function(_){return _.charCodeAt(_.length-1)>=55296&&_.charCodeAt(_.length-1)<=56319},D=2;D<S.length;D+=1)S[D-2][0]===s&&M(S[D-2][1])&&S[D-1][0]===i&&I(S[D-1][1])&&S[D][0]===o&&I(S[D][1])&&(P=!0,S[D-1][1]=S[D-2][1].slice(-1)+S[D-1][1],S[D][1]=S[D-2][1].slice(-1)+S[D][1],S[D-2][1]=S[D-2][1].slice(0,-1));if(!P)return S;for(var E=[],D=0;D<S.length;D+=1)S[D][1].length>0&&E.push(S[D]);return E}function w(S,P,I){for(var M=P+I-1;M>=0&&M>=P-1;M--)if(M+1<S.length){var D=S[M],E=S[M+1];D[0]===E[1]&&S.splice(M,2,[D[0],D[1]+E[1]])}return S}},function(n,r){r=n.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(o){var s=[];for(var a in o)s.push(a);return s}},function(n,r){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=n.exports=i?o:s,r.supported=o;function o(a){return Object.prototype.toString.call(a)=="[object Arguments]"}r.unsupported=s;function s(a){return a&&typeof a=="object"&&typeof a.length=="number"&&Object.prototype.hasOwnProperty.call(a,"callee")&&!Object.prototype.propertyIsEnumerable.call(a,"callee")||!1}},function(n,r){var i=Object.prototype.hasOwnProperty,o="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(o=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)i.call(d,f)&&u.push(o?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u,d){var f=o?o+u:u,p=this._events[f];if(d)return!!p;if(!p)return[];if(p.fn)return[p.fn];for(var b=0,v=p.length,m=new Array(v);b<v;b++)m[b]=p[b].fn;return m},l.prototype.emit=function(u,d,f,p,b,v){var m=o?o+u:u;if(!this._events[m])return!1;var g=this._events[m],x=arguments.length,w,S;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),x){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,f),!0;case 4:return g.fn.call(g.context,d,f,p),!0;case 5:return g.fn.call(g.context,d,f,p,b),!0;case 6:return g.fn.call(g.context,d,f,p,b,v),!0}for(S=1,w=new Array(x-1);S<x;S++)w[S-1]=arguments[S];g.fn.apply(g.context,w)}else{var P=g.length,I;for(S=0;S<P;S++)switch(g[S].once&&this.removeListener(u,g[S].fn,void 0,!0),x){case 1:g[S].fn.call(g[S].context);break;case 2:g[S].fn.call(g[S].context,d);break;case 3:g[S].fn.call(g[S].context,d,f);break;case 4:g[S].fn.call(g[S].context,d,f,p);break;default:if(!w)for(I=1,w=new Array(x-1);I<x;I++)w[I-1]=arguments[I];g[S].fn.apply(g[S].context,w)}}return!0},l.prototype.on=function(u,d,f){var p=new a(d,f||this),b=o?o+u:u;return this._events[b]?this._events[b].fn?this._events[b]=[this._events[b],p]:this._events[b].push(p):(this._events[b]=p,this._eventsCount++),this},l.prototype.once=function(u,d,f){var p=new a(d,f||this,!0),b=o?o+u:u;return this._events[b]?this._events[b].fn?this._events[b]=[this._events[b],p]:this._events[b].push(p):(this._events[b]=p,this._eventsCount++),this},l.prototype.removeListener=function(u,d,f,p){var b=o?o+u:u;if(!this._events[b])return this;if(!d)return--this._eventsCount===0?this._events=new s:delete this._events[b],this;var v=this._events[b];if(v.fn)v.fn===d&&(!p||v.once)&&(!f||v.context===f)&&(--this._eventsCount===0?this._events=new s:delete this._events[b]);else{for(var m=0,g=[],x=v.length;m<x;m++)(v[m].fn!==d||p&&!v[m].once||f&&v[m].context!==f)&&g.push(v[m]);g.length?this._events[b]=g.length===1?g[0]:g:--this._eventsCount===0?this._events=new s:delete this._events[b]}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=o?o+u:u,this._events[d]&&(--this._eventsCount===0?this._events=new s:delete this._events[d])):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prototype.setMaxListeners=function(){return this},l.prefixed=o,l.EventEmitter=l,typeof n!="undefined"&&(n.exports=l)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ie){return typeof ie}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},s=function(){function ie(ae,ge){var X=[],W=!0,ve=!1,ue=void 0;try{for(var Me=ae[Symbol.iterator](),Ae;!(W=(Ae=Me.next()).done)&&(X.push(Ae.value),!(ge&&X.length===ge));W=!0);}catch(Ne){ve=!0,ue=Ne}finally{try{!W&&Me.return&&Me.return()}finally{if(ve)throw ue}}return X}return function(ae,ge){if(Array.isArray(ae))return ae;if(Symbol.iterator in Object(ae))return ie(ae,ge);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function ie(ae,ge){for(var X=0;X<ge.length;X++){var W=ge[X];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(ae,W.key,W)}}return function(ae,ge,X){return ge&&ie(ae.prototype,ge),X&&ie(ae,X),ae}}(),l=i(3),c=R(l),u=i(2),d=R(u),f=i(0),p=R(f),b=i(5),v=R(b),m=i(10),g=R(m),x=i(9),w=R(x),S=i(36),P=i(37),I=i(13),M=R(I),D=i(26),E=i(38),_=i(39),A=i(40);function R(ie){return ie&&ie.__esModule?ie:{default:ie}}function F(ie,ae,ge){return ae in ie?Object.defineProperty(ie,ae,{value:ge,enumerable:!0,configurable:!0,writable:!0}):ie[ae]=ge,ie}function L(ie,ae){if(!(ie instanceof ae))throw new TypeError("Cannot call a class as a function")}function N(ie,ae){if(!ie)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ae&&(typeof ae=="object"||typeof ae=="function")?ae:ie}function U(ie,ae){if(typeof ae!="function"&&ae!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ae);ie.prototype=Object.create(ae&&ae.prototype,{constructor:{value:ie,enumerable:!1,writable:!0,configurable:!0}}),ae&&(Object.setPrototypeOf?Object.setPrototypeOf(ie,ae):ie.__proto__=ae)}var $=(0,g.default)("quill:clipboard"),B="__ql-matcher",H=[[Node.TEXT_NODE,me],[Node.TEXT_NODE,ce],["br",ye],[Node.ELEMENT_NODE,ce],[Node.ELEMENT_NODE,pe],[Node.ELEMENT_NODE,Be],[Node.ELEMENT_NODE,ne],[Node.ELEMENT_NODE,de],["li",_e],["b",oe.bind(oe,"bold")],["i",oe.bind(oe,"italic")],["style",Ce]],q=[S.AlignAttribute,E.DirectionAttribute].reduce(function(ie,ae){return ie[ae.keyName]=ae,ie},{}),z=[S.AlignStyle,P.BackgroundStyle,D.ColorStyle,E.DirectionStyle,_.FontStyle,A.SizeStyle].reduce(function(ie,ae){return ie[ae.keyName]=ae,ie},{}),G=function(ie){U(ae,ie);function ae(ge,X){L(this,ae);var W=N(this,(ae.__proto__||Object.getPrototypeOf(ae)).call(this,ge,X));return W.quill.root.addEventListener("paste",W.onPaste.bind(W)),W.container=W.quill.addContainer("ql-clipboard"),W.container.setAttribute("contenteditable",!0),W.container.setAttribute("tabindex",-1),W.matchers=[],H.concat(W.options.matchers).forEach(function(ve){var ue=s(ve,2),Me=ue[0],Ae=ue[1];!X.matchVisual&&Ae===Be||W.addMatcher(Me,Ae)}),W}return a(ae,[{key:"addMatcher",value:function(X,W){this.matchers.push([X,W])}},{key:"convert",value:function(X){if(typeof X=="string")return this.container.innerHTML=X.replace(/\>\r?\n +\</g,"><"),this.convert();var W=this.quill.getFormat(this.quill.selection.savedRange.index);if(W[M.default.blotName]){var ve=this.container.innerText;return this.container.innerHTML="",new d.default().insert(ve,F({},M.default.blotName,W[M.default.blotName]))}var ue=this.prepareMatching(),Me=s(ue,2),Ae=Me[0],Ne=Me[1],Re=J(this.container,Ae,Ne);return ee(Re,`
`)&&Re.ops[Re.ops.length-1].attributes==null&&(Re=Re.compose(new d.default().retain(Re.length()-1).delete(1))),$.log("convert",this.container.innerHTML,Re),this.container.innerHTML="",Re}},{key:"dangerouslyPasteHTML",value:function(X,W){var ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.default.sources.API;if(typeof X=="string")this.quill.setContents(this.convert(X),W),this.quill.setSelection(0,v.default.sources.SILENT);else{var ue=this.convert(W);this.quill.updateContents(new d.default().retain(X).concat(ue),ve),this.quill.setSelection(X+ue.length(),v.default.sources.SILENT)}}},{key:"onPaste",value:function(X){var W=this;if(!(X.defaultPrevented||!this.quill.isEnabled())){var ve=this.quill.getSelection(),ue=new d.default().retain(ve.index),Me=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(v.default.sources.SILENT),setTimeout(function(){ue=ue.concat(W.convert()).delete(ve.length),W.quill.updateContents(ue,v.default.sources.USER),W.quill.setSelection(ue.length()-ve.length,v.default.sources.SILENT),W.quill.scrollingContainer.scrollTop=Me,W.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var X=this,W=[],ve=[];return this.matchers.forEach(function(ue){var Me=s(ue,2),Ae=Me[0],Ne=Me[1];switch(Ae){case Node.TEXT_NODE:ve.push(Ne);break;case Node.ELEMENT_NODE:W.push(Ne);break;default:[].forEach.call(X.container.querySelectorAll(Ae),function(Re){Re[B]=Re[B]||[],Re[B].push(Ne)});break}}),[W,ve]}}]),ae}(w.default);G.DEFAULTS={matchers:[],matchVisual:!0};function K(ie,ae,ge){return(typeof ae=="undefined"?"undefined":o(ae))==="object"?Object.keys(ae).reduce(function(X,W){return K(X,W,ae[W])},ie):ie.reduce(function(X,W){return W.attributes&&W.attributes[ae]?X.push(W):X.insert(W.insert,(0,c.default)({},F({},ae,ge),W.attributes))},new d.default)}function Z(ie){if(ie.nodeType!==Node.ELEMENT_NODE)return{};var ae="__ql-computed-style";return ie[ae]||(ie[ae]=window.getComputedStyle(ie))}function ee(ie,ae){for(var ge="",X=ie.ops.length-1;X>=0&&ge.length<ae.length;--X){var W=ie.ops[X];if(typeof W.insert!="string")break;ge=W.insert+ge}return ge.slice(-1*ae.length)===ae}function V(ie){if(ie.childNodes.length===0)return!1;var ae=Z(ie);return["block","list-item"].indexOf(ae.display)>-1}function J(ie,ae,ge){return ie.nodeType===ie.TEXT_NODE?ge.reduce(function(X,W){return W(ie,X)},new d.default):ie.nodeType===ie.ELEMENT_NODE?[].reduce.call(ie.childNodes||[],function(X,W){var ve=J(W,ae,ge);return W.nodeType===ie.ELEMENT_NODE&&(ve=ae.reduce(function(ue,Me){return Me(W,ue)},ve),ve=(W[B]||[]).reduce(function(ue,Me){return Me(W,ue)},ve)),X.concat(ve)},new d.default):new d.default}function oe(ie,ae,ge){return K(ge,ie,!0)}function ne(ie,ae){var ge=p.default.Attributor.Attribute.keys(ie),X=p.default.Attributor.Class.keys(ie),W=p.default.Attributor.Style.keys(ie),ve={};return ge.concat(X).concat(W).forEach(function(ue){var Me=p.default.query(ue,p.default.Scope.ATTRIBUTE);Me!=null&&(ve[Me.attrName]=Me.value(ie),ve[Me.attrName])||(Me=q[ue],Me!=null&&(Me.attrName===ue||Me.keyName===ue)&&(ve[Me.attrName]=Me.value(ie)||void 0),Me=z[ue],Me!=null&&(Me.attrName===ue||Me.keyName===ue)&&(Me=z[ue],ve[Me.attrName]=Me.value(ie)||void 0))}),Object.keys(ve).length>0&&(ae=K(ae,ve)),ae}function pe(ie,ae){var ge=p.default.query(ie);if(ge==null)return ae;if(ge.prototype instanceof p.default.Embed){var X={},W=ge.value(ie);W!=null&&(X[ge.blotName]=W,ae=new d.default().insert(X,ge.formats(ie)))}else typeof ge.formats=="function"&&(ae=K(ae,ge.blotName,ge.formats(ie)));return ae}function ye(ie,ae){return ee(ae,`
`)||ae.insert(`
`),ae}function Ce(){return new d.default}function _e(ie,ae){var ge=p.default.query(ie);if(ge==null||ge.blotName!=="list-item"||!ee(ae,`
`))return ae;for(var X=-1,W=ie.parentNode;!W.classList.contains("ql-clipboard");)(p.default.query(W)||{}).blotName==="list"&&(X+=1),W=W.parentNode;return X<=0?ae:ae.compose(new d.default().retain(ae.length()-1).retain(1,{indent:X}))}function ce(ie,ae){return ee(ae,`
`)||(V(ie)||ae.length()>0&&ie.nextSibling&&V(ie.nextSibling))&&ae.insert(`
`),ae}function Be(ie,ae){if(V(ie)&&ie.nextElementSibling!=null&&!ee(ae,`

`)){var ge=ie.offsetHeight+parseFloat(Z(ie).marginTop)+parseFloat(Z(ie).marginBottom);ie.nextElementSibling.offsetTop>ie.offsetTop+ge*1.5&&ae.insert(`
`)}return ae}function de(ie,ae){var ge={},X=ie.style||{};return X.fontStyle&&Z(ie).fontStyle==="italic"&&(ge.italic=!0),X.fontWeight&&(Z(ie).fontWeight.startsWith("bold")||parseInt(Z(ie).fontWeight)>=700)&&(ge.bold=!0),Object.keys(ge).length>0&&(ae=K(ae,ge)),parseFloat(X.textIndent||0)>0&&(ae=new d.default().insert("	").concat(ae)),ae}function me(ie,ae){var ge=ie.data;if(ie.parentNode.tagName==="O:P")return ae.insert(ge.trim());if(ge.trim().length===0&&ie.parentNode.classList.contains("ql-clipboard"))return ae;if(!Z(ie.parentNode).whiteSpace.startsWith("pre")){var X=function(ve,ue){return ue=ue.replace(/[^\u00a0]/g,""),ue.length<1&&ve?" ":ue};ge=ge.replace(/\r\n/g," ").replace(/\n/g," "),ge=ge.replace(/\s\s+/g,X.bind(X,!0)),(ie.previousSibling==null&&V(ie.parentNode)||ie.previousSibling!=null&&V(ie.previousSibling))&&(ge=ge.replace(/^\s+/,X.bind(X,!1))),(ie.nextSibling==null&&V(ie.parentNode)||ie.nextSibling!=null&&V(ie.nextSibling))&&(ge=ge.replace(/\s+$/,X.bind(X,!1)))}return ae.insert(ge)}r.default=G,r.matchAttributor=ne,r.matchBlot=pe,r.matchNewline=ce,r.matchSpacing=Be,r.matchText=me},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function b(v,m){for(var g=0;g<m.length;g++){var x=m[g];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(v,x.key,x)}}return function(v,m,g){return m&&b(v.prototype,m),g&&b(v,g),v}}(),s=function b(v,m,g){v===null&&(v=Function.prototype);var x=Object.getOwnPropertyDescriptor(v,m);if(x===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:b(w,m,g)}else{if("value"in x)return x.value;var S=x.get;return S===void 0?void 0:S.call(g)}},a=i(6),l=c(a);function c(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function d(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function f(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var p=function(b){f(v,b);function v(){return u(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return o(v,[{key:"optimize",value:function(g){s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,g),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return s(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),v}(l.default);p.blotName="bold",p.tagName=["STRONG","B"],r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var o=function(){function A(R,F){var L=[],N=!0,U=!1,$=void 0;try{for(var B=R[Symbol.iterator](),H;!(N=(H=B.next()).done)&&(L.push(H.value),!(F&&L.length===F));N=!0);}catch(q){U=!0,$=q}finally{try{!N&&B.return&&B.return()}finally{if(U)throw $}}return L}return function(R,F){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return A(R,F);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function A(R,F){for(var L=0;L<F.length;L++){var N=F[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(R,N.key,N)}}return function(R,F,L){return F&&A(R.prototype,F),L&&A(R,L),R}}(),a=i(2),l=g(a),c=i(0),u=g(c),d=i(5),f=g(d),p=i(10),b=g(p),v=i(9),m=g(v);function g(A){return A&&A.__esModule?A:{default:A}}function x(A,R,F){return R in A?Object.defineProperty(A,R,{value:F,enumerable:!0,configurable:!0,writable:!0}):A[R]=F,A}function w(A,R){if(!(A instanceof R))throw new TypeError("Cannot call a class as a function")}function S(A,R){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:A}function P(A,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);A.prototype=Object.create(R&&R.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(A,R):A.__proto__=R)}var I=(0,b.default)("quill:toolbar"),M=function(A){P(R,A);function R(F,L){w(this,R);var N=S(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,F,L));if(Array.isArray(N.options.container)){var U=document.createElement("div");E(U,N.options.container),F.container.parentNode.insertBefore(U,F.container),N.container=U}else typeof N.options.container=="string"?N.container=document.querySelector(N.options.container):N.container=N.options.container;if(!(N.container instanceof HTMLElement)){var $;return $=I.error("Container required for toolbar",N.options),S(N,$)}return N.container.classList.add("ql-toolbar"),N.controls=[],N.handlers={},Object.keys(N.options.handlers).forEach(function(B){N.addHandler(B,N.options.handlers[B])}),[].forEach.call(N.container.querySelectorAll("button, select"),function(B){N.attach(B)}),N.quill.on(f.default.events.EDITOR_CHANGE,function(B,H){B===f.default.events.SELECTION_CHANGE&&N.update(H)}),N.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){var B=N.quill.selection.getRange(),H=o(B,1),q=H[0];N.update(q)}),N}return s(R,[{key:"addHandler",value:function(L,N){this.handlers[L]=N}},{key:"attach",value:function(L){var N=this,U=[].find.call(L.classList,function(B){return B.indexOf("ql-")===0});if(U){if(U=U.slice(3),L.tagName==="BUTTON"&&L.setAttribute("type","button"),this.handlers[U]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[U]==null){I.warn("ignoring attaching to disabled format",U,L);return}if(u.default.query(U)==null){I.warn("ignoring attaching to nonexistent format",U,L);return}}var $=L.tagName==="SELECT"?"change":"click";L.addEventListener($,function(B){var H=void 0;if(L.tagName==="SELECT"){if(L.selectedIndex<0)return;var q=L.options[L.selectedIndex];q.hasAttribute("selected")?H=!1:H=q.value||!1}else L.classList.contains("ql-active")?H=!1:H=L.value||!L.hasAttribute("value"),B.preventDefault();N.quill.focus();var z=N.quill.selection.getRange(),G=o(z,1),K=G[0];if(N.handlers[U]!=null)N.handlers[U].call(N,H);else if(u.default.query(U).prototype instanceof u.default.Embed){if(H=prompt("Enter "+U),!H)return;N.quill.updateContents(new l.default().retain(K.index).delete(K.length).insert(x({},U,H)),f.default.sources.USER)}else N.quill.format(U,H,f.default.sources.USER);N.update(K)}),this.controls.push([U,L])}}},{key:"update",value:function(L){var N=L==null?{}:this.quill.getFormat(L);this.controls.forEach(function(U){var $=o(U,2),B=$[0],H=$[1];if(H.tagName==="SELECT"){var q=void 0;if(L==null)q=null;else if(N[B]==null)q=H.querySelector("option[selected]");else if(!Array.isArray(N[B])){var z=N[B];typeof z=="string"&&(z=z.replace(/\"/g,'\\"')),q=H.querySelector('option[value="'+z+'"]')}q==null?(H.value="",H.selectedIndex=-1):q.selected=!0}else if(L==null)H.classList.remove("ql-active");else if(H.hasAttribute("value")){var G=N[B]===H.getAttribute("value")||N[B]!=null&&N[B].toString()===H.getAttribute("value")||N[B]==null&&!H.getAttribute("value");H.classList.toggle("ql-active",G)}else H.classList.toggle("ql-active",N[B]!=null)})}}]),R}(m.default);M.DEFAULTS={};function D(A,R,F){var L=document.createElement("button");L.setAttribute("type","button"),L.classList.add("ql-"+R),F!=null&&(L.value=F),A.appendChild(L)}function E(A,R){Array.isArray(R[0])||(R=[R]),R.forEach(function(F){var L=document.createElement("span");L.classList.add("ql-formats"),F.forEach(function(N){if(typeof N=="string")D(L,N);else{var U=Object.keys(N)[0],$=N[U];Array.isArray($)?_(L,U,$):D(L,U,$)}}),A.appendChild(L)})}function _(A,R,F){var L=document.createElement("select");L.classList.add("ql-"+R),F.forEach(function(N){var U=document.createElement("option");N!==!1?U.setAttribute("value",N):U.setAttribute("selected","selected"),L.appendChild(U)}),A.appendChild(L)}M.DEFAULTS={container:null,handlers:{clean:function(){var R=this,F=this.quill.getSelection();if(F!=null)if(F.length==0){var L=this.quill.getFormat();Object.keys(L).forEach(function(N){u.default.query(N,u.default.Scope.INLINE)!=null&&R.quill.format(N,!1)})}else this.quill.removeFormat(F,f.default.sources.USER)},direction:function(R){var F=this.quill.getFormat().align;R==="rtl"&&F==null?this.quill.format("align","right",f.default.sources.USER):!R&&F==="right"&&this.quill.format("align",!1,f.default.sources.USER),this.quill.format("direction",R,f.default.sources.USER)},indent:function(R){var F=this.quill.getSelection(),L=this.quill.getFormat(F),N=parseInt(L.indent||0);if(R==="+1"||R==="-1"){var U=R==="+1"?1:-1;L.direction==="rtl"&&(U*=-1),this.quill.format("indent",N+U,f.default.sources.USER)}},link:function(R){R===!0&&(R=prompt("Enter link URL:")),this.quill.format("link",R,f.default.sources.USER)},list:function(R){var F=this.quill.getSelection(),L=this.quill.getFormat(F);R==="check"?L.list==="checked"||L.list==="unchecked"?this.quill.format("list",!1,f.default.sources.USER):this.quill.format("list","unchecked",f.default.sources.USER):this.quill.format("list",R,f.default.sources.USER)}}},r.default=M,r.addControls=E},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function b(v,m){for(var g=0;g<m.length;g++){var x=m[g];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(v,x.key,x)}}return function(v,m,g){return m&&b(v.prototype,m),g&&b(v,g),v}}(),s=function b(v,m,g){v===null&&(v=Function.prototype);var x=Object.getOwnPropertyDescriptor(v,m);if(x===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:b(w,m,g)}else{if("value"in x)return x.value;var S=x.get;return S===void 0?void 0:S.call(g)}},a=i(28),l=c(a);function c(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function d(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function f(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var p=function(b){f(v,b);function v(m,g){u(this,v);var x=d(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,m));return x.label.innerHTML=g,x.container.classList.add("ql-color-picker"),[].slice.call(x.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(w){w.classList.add("ql-primary")}),x}return o(v,[{key:"buildItem",value:function(g){var x=s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"buildItem",this).call(this,g);return x.style.backgroundColor=g.getAttribute("value")||"",x}},{key:"selectItem",value:function(g,x){s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,g,x);var w=this.label.querySelector(".ql-color-label"),S=g&&g.getAttribute("data-value")||"";w&&(w.tagName==="line"?w.style.stroke=S:w.style.fill=S)}}]),v}(l.default);r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function b(v,m){for(var g=0;g<m.length;g++){var x=m[g];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(v,x.key,x)}}return function(v,m,g){return m&&b(v.prototype,m),g&&b(v,g),v}}(),s=function b(v,m,g){v===null&&(v=Function.prototype);var x=Object.getOwnPropertyDescriptor(v,m);if(x===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:b(w,m,g)}else{if("value"in x)return x.value;var S=x.get;return S===void 0?void 0:S.call(g)}},a=i(28),l=c(a);function c(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function d(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function f(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var p=function(b){f(v,b);function v(m,g){u(this,v);var x=d(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,m));return x.container.classList.add("ql-icon-picker"),[].forEach.call(x.container.querySelectorAll(".ql-picker-item"),function(w){w.innerHTML=g[w.getAttribute("data-value")||""]}),x.defaultItem=x.container.querySelector(".ql-selected"),x.selectItem(x.defaultItem),x}return o(v,[{key:"selectItem",value:function(g,x){s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,g,x),g=g||this.defaultItem,this.label.innerHTML=g.innerHTML}}]),v}(l.default);r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function l(c,u){for(var d=0;d<u.length;d++){var f=u[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}return function(c,u,d){return u&&l(c.prototype,u),d&&l(c,d),c}}();function s(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var a=function(){function l(c,u){var d=this;s(this,l),this.quill=c,this.boundsContainer=u||document.body,this.root=c.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){d.root.style.marginTop=-1*d.quill.root.scrollTop+"px"}),this.hide()}return o(l,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(u){var d=u.left+u.width/2-this.root.offsetWidth/2,f=u.bottom+this.quill.root.scrollTop;this.root.style.left=d+"px",this.root.style.top=f+"px",this.root.classList.remove("ql-flip");var p=this.boundsContainer.getBoundingClientRect(),b=this.root.getBoundingClientRect(),v=0;if(b.right>p.right&&(v=p.right-b.right,this.root.style.left=d+v+"px"),b.left<p.left&&(v=p.left-b.left,this.root.style.left=d+v+"px"),b.bottom>p.bottom){var m=b.bottom-b.top,g=u.bottom-u.top+m;this.root.style.top=f-g+"px",this.root.classList.add("ql-flip")}return v}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),l}();r.default=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function _(A,R){var F=[],L=!0,N=!1,U=void 0;try{for(var $=A[Symbol.iterator](),B;!(L=(B=$.next()).done)&&(F.push(B.value),!(R&&F.length===R));L=!0);}catch(H){N=!0,U=H}finally{try{!L&&$.return&&$.return()}finally{if(N)throw U}}return F}return function(A,R){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return _(A,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function _(A,R,F){A===null&&(A=Function.prototype);var L=Object.getOwnPropertyDescriptor(A,R);if(L===void 0){var N=Object.getPrototypeOf(A);return N===null?void 0:_(N,R,F)}else{if("value"in L)return L.value;var U=L.get;return U===void 0?void 0:U.call(F)}},a=function(){function _(A,R){for(var F=0;F<R.length;F++){var L=R[F];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(A,L.key,L)}}return function(A,R,F){return R&&_(A.prototype,R),F&&_(A,F),A}}(),l=i(3),c=w(l),u=i(8),d=w(u),f=i(43),p=w(f),b=i(27),v=w(b),m=i(15),g=i(41),x=w(g);function w(_){return _&&_.__esModule?_:{default:_}}function S(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")}function P(_,A){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:_}function I(_,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);_.prototype=Object.create(A&&A.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(_,A):_.__proto__=A)}var M=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],D=function(_){I(A,_);function A(R,F){S(this,A),F.modules.toolbar!=null&&F.modules.toolbar.container==null&&(F.modules.toolbar.container=M);var L=P(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,R,F));return L.quill.container.classList.add("ql-snow"),L}return a(A,[{key:"extendToolbar",value:function(F){F.container.classList.add("ql-snow"),this.buildButtons([].slice.call(F.container.querySelectorAll("button")),x.default),this.buildPickers([].slice.call(F.container.querySelectorAll("select")),x.default),this.tooltip=new E(this.quill,this.options.bounds),F.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(L,N){F.handlers.link.call(F,!N.format.link)})}}]),A}(p.default);D.DEFAULTS=(0,c.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(A){if(A){var R=this.quill.getSelection();if(R==null||R.length==0)return;var F=this.quill.getText(R);/^\S+@\S+\.\S+$/.test(F)&&F.indexOf("mailto:")!==0&&(F="mailto:"+F);var L=this.quill.theme.tooltip;L.edit("link",F)}else this.quill.format("link",!1)}}}}});var E=function(_){I(A,_);function A(R,F){S(this,A);var L=P(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,R,F));return L.preview=L.root.querySelector("a.ql-preview"),L}return a(A,[{key:"listen",value:function(){var F=this;s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(L){F.root.classList.contains("ql-editing")?F.save():F.edit("link",F.preview.textContent),L.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(L){if(F.linkRange!=null){var N=F.linkRange;F.restoreFocus(),F.quill.formatText(N,"link",!1,d.default.sources.USER),delete F.linkRange}L.preventDefault(),F.hide()}),this.quill.on(d.default.events.SELECTION_CHANGE,function(L,N,U){if(L!=null){if(L.length===0&&U===d.default.sources.USER){var $=F.quill.scroll.descendant(v.default,L.index),B=o($,2),H=B[0],q=B[1];if(H!=null){F.linkRange=new m.Range(L.index-q,H.length());var z=v.default.formats(H.domNode);F.preview.textContent=z,F.preview.setAttribute("href",z),F.show(),F.position(F.quill.getBounds(F.linkRange));return}}else delete F.linkRange;F.hide()}})}},{key:"show",value:function(){s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),A}(f.BaseTooltip);E.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=D},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(29),s=W(o),a=i(36),l=i(38),c=i(64),u=i(65),d=W(u),f=i(66),p=W(f),b=i(67),v=W(b),m=i(37),g=i(26),x=i(39),w=i(40),S=i(56),P=W(S),I=i(68),M=W(I),D=i(27),E=W(D),_=i(69),A=W(_),R=i(70),F=W(R),L=i(71),N=W(L),U=i(72),$=W(U),B=i(73),H=W(B),q=i(13),z=W(q),G=i(74),K=W(G),Z=i(75),ee=W(Z),V=i(57),J=W(V),oe=i(41),ne=W(oe),pe=i(28),ye=W(pe),Ce=i(59),_e=W(Ce),ce=i(60),Be=W(ce),de=i(61),me=W(de),ie=i(108),ae=W(ie),ge=i(62),X=W(ge);function W(ve){return ve&&ve.__esModule?ve:{default:ve}}s.default.register({"attributors/attribute/direction":l.DirectionAttribute,"attributors/class/align":a.AlignClass,"attributors/class/background":m.BackgroundClass,"attributors/class/color":g.ColorClass,"attributors/class/direction":l.DirectionClass,"attributors/class/font":x.FontClass,"attributors/class/size":w.SizeClass,"attributors/style/align":a.AlignStyle,"attributors/style/background":m.BackgroundStyle,"attributors/style/color":g.ColorStyle,"attributors/style/direction":l.DirectionStyle,"attributors/style/font":x.FontStyle,"attributors/style/size":w.SizeStyle},!0),s.default.register({"formats/align":a.AlignClass,"formats/direction":l.DirectionClass,"formats/indent":c.IndentClass,"formats/background":m.BackgroundStyle,"formats/color":g.ColorStyle,"formats/font":x.FontClass,"formats/size":w.SizeClass,"formats/blockquote":d.default,"formats/code-block":z.default,"formats/header":p.default,"formats/list":v.default,"formats/bold":P.default,"formats/code":q.Code,"formats/italic":M.default,"formats/link":E.default,"formats/script":A.default,"formats/strike":F.default,"formats/underline":N.default,"formats/image":$.default,"formats/video":H.default,"formats/list/item":b.ListItem,"modules/formula":K.default,"modules/syntax":ee.default,"modules/toolbar":J.default,"themes/bubble":ae.default,"themes/snow":X.default,"ui/icons":ne.default,"ui/picker":ye.default,"ui/icon-picker":Be.default,"ui/color-picker":_e.default,"ui/tooltip":me.default},!0),r.default=s.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var o=function(){function v(m,g){for(var x=0;x<g.length;x++){var w=g[x];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(m,w.key,w)}}return function(m,g,x){return g&&v(m.prototype,g),x&&v(m,x),m}}(),s=function v(m,g,x){m===null&&(m=Function.prototype);var w=Object.getOwnPropertyDescriptor(m,g);if(w===void 0){var S=Object.getPrototypeOf(m);return S===null?void 0:v(S,g,x)}else{if("value"in w)return w.value;var P=w.get;return P===void 0?void 0:P.call(x)}},a=i(0),l=c(a);function c(v){return v&&v.__esModule?v:{default:v}}function u(v,m){if(!(v instanceof m))throw new TypeError("Cannot call a class as a function")}function d(v,m){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:v}function f(v,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);v.prototype=Object.create(m&&m.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(v,m):v.__proto__=m)}var p=function(v){f(m,v);function m(){return u(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"add",value:function(x,w){if(w==="+1"||w==="-1"){var S=this.value(x)||0;w=w==="+1"?S+1:S-1}return w===0?(this.remove(x),!0):s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"add",this).call(this,x,w)}},{key:"canAdd",value:function(x,w){return s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"canAdd",this).call(this,x,w)||s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"canAdd",this).call(this,x,parseInt(w))}},{key:"value",value:function(x){return parseInt(s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,x))||void 0}}]),m}(l.default.Attributor.Class),b=new p("indent","ql-indent",{scope:l.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=b},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(4),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function c(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function u(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var d=function(f){u(p,f);function p(){return l(this,p),c(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(s.default);d.blotName="blockquote",d.tagName="blockquote",r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function p(b,v){for(var m=0;m<v.length;m++){var g=v[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(b,g.key,g)}}return function(b,v,m){return v&&p(b.prototype,v),m&&p(b,m),b}}(),s=i(4),a=l(s);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,b){if(!(p instanceof b))throw new TypeError("Cannot call a class as a function")}function u(p,b){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:p}function d(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);p.prototype=Object.create(b&&b.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(p,b):p.__proto__=b)}var f=function(p){d(b,p);function b(){return c(this,b),u(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return o(b,null,[{key:"formats",value:function(m){return this.tagName.indexOf(m.tagName)+1}}]),b}(a.default);f.blotName="header",f.tagName=["H1","H2","H3","H4","H5","H6"],r.default=f},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var o=function(){function S(P,I){for(var M=0;M<I.length;M++){var D=I[M];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(P,D.key,D)}}return function(P,I,M){return I&&S(P.prototype,I),M&&S(P,M),P}}(),s=function S(P,I,M){P===null&&(P=Function.prototype);var D=Object.getOwnPropertyDescriptor(P,I);if(D===void 0){var E=Object.getPrototypeOf(P);return E===null?void 0:S(E,I,M)}else{if("value"in D)return D.value;var _=D.get;return _===void 0?void 0:_.call(M)}},a=i(0),l=p(a),c=i(4),u=p(c),d=i(25),f=p(d);function p(S){return S&&S.__esModule?S:{default:S}}function b(S,P,I){return P in S?Object.defineProperty(S,P,{value:I,enumerable:!0,configurable:!0,writable:!0}):S[P]=I,S}function v(S,P){if(!(S instanceof P))throw new TypeError("Cannot call a class as a function")}function m(S,P){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:S}function g(S,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);S.prototype=Object.create(P&&P.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(S,P):S.__proto__=P)}var x=function(S){g(P,S);function P(){return v(this,P),m(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return o(P,[{key:"format",value:function(M,D){M===w.blotName&&!D?this.replaceWith(l.default.create(this.statics.scope)):s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"format",this).call(this,M,D)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(M,D){return this.parent.isolate(this.offset(this.parent),this.length()),M===this.parent.statics.blotName?(this.parent.replaceWith(M,D),this):(this.parent.unwrap(),s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"replaceWith",this).call(this,M,D))}}],[{key:"formats",value:function(M){return M.tagName===this.tagName?void 0:s(P.__proto__||Object.getPrototypeOf(P),"formats",this).call(this,M)}}]),P}(u.default);x.blotName="list-item",x.tagName="LI";var w=function(S){g(P,S),o(P,null,[{key:"create",value:function(M){var D=M==="ordered"?"OL":"UL",E=s(P.__proto__||Object.getPrototypeOf(P),"create",this).call(this,D);return(M==="checked"||M==="unchecked")&&E.setAttribute("data-checked",M==="checked"),E}},{key:"formats",value:function(M){if(M.tagName==="OL")return"ordered";if(M.tagName==="UL")return M.hasAttribute("data-checked")?M.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function P(I){v(this,P);var M=m(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,I)),D=function(_){if(_.target.parentNode===I){var A=M.statics.formats(I),R=l.default.find(_.target);A==="checked"?R.format("list","unchecked"):A==="unchecked"&&R.format("list","checked")}};return I.addEventListener("touchstart",D),I.addEventListener("mousedown",D),M}return o(P,[{key:"format",value:function(M,D){this.children.length>0&&this.children.tail.format(M,D)}},{key:"formats",value:function(){return b({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(M,D){if(M instanceof x)s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertBefore",this).call(this,M,D);else{var E=D==null?this.length():D.offset(this),_=this.split(E);_.parent.insertBefore(M,_)}}},{key:"optimize",value:function(M){s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"optimize",this).call(this,M);var D=this.next;D!=null&&D.prev===this&&D.statics.blotName===this.statics.blotName&&D.domNode.tagName===this.domNode.tagName&&D.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(D.moveChildren(this),D.remove())}},{key:"replace",value:function(M){if(M.statics.blotName!==this.statics.blotName){var D=l.default.create(this.statics.defaultChild);M.moveChildren(D),this.appendChild(D)}s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"replace",this).call(this,M)}}]),P}(f.default);w.blotName="list",w.scope=l.default.Scope.BLOCK_BLOT,w.tagName=["OL","UL"],w.defaultChild="list-item",w.allowedChildren=[x],r.ListItem=x,r.default=w},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(56),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function c(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function u(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var d=function(f){u(p,f);function p(){return l(this,p),c(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(s.default);d.blotName="italic",d.tagName=["EM","I"],r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function b(v,m){for(var g=0;g<m.length;g++){var x=m[g];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(v,x.key,x)}}return function(v,m,g){return m&&b(v.prototype,m),g&&b(v,g),v}}(),s=function b(v,m,g){v===null&&(v=Function.prototype);var x=Object.getOwnPropertyDescriptor(v,m);if(x===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:b(w,m,g)}else{if("value"in x)return x.value;var S=x.get;return S===void 0?void 0:S.call(g)}},a=i(6),l=c(a);function c(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function d(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function f(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var p=function(b){f(v,b);function v(){return u(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return o(v,null,[{key:"create",value:function(g){return g==="super"?document.createElement("sup"):g==="sub"?document.createElement("sub"):s(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,g)}},{key:"formats",value:function(g){if(g.tagName==="SUB")return"sub";if(g.tagName==="SUP")return"super"}}]),v}(l.default);p.blotName="script",p.tagName=["SUB","SUP"],r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function c(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function u(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var d=function(f){u(p,f);function p(){return l(this,p),c(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(s.default);d.blotName="strike",d.tagName="S",r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),s=a(o);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function c(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function u(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var d=function(f){u(p,f);function p(){return l(this,p),c(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(s.default);d.blotName="underline",d.tagName="U",r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function m(g,x){for(var w=0;w<x.length;w++){var S=x[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,S.key,S)}}return function(g,x,w){return x&&m(g.prototype,x),w&&m(g,w),g}}(),s=function m(g,x,w){g===null&&(g=Function.prototype);var S=Object.getOwnPropertyDescriptor(g,x);if(S===void 0){var P=Object.getPrototypeOf(g);return P===null?void 0:m(P,x,w)}else{if("value"in S)return S.value;var I=S.get;return I===void 0?void 0:I.call(w)}},a=i(0),l=u(a),c=i(27);function u(m){return m&&m.__esModule?m:{default:m}}function d(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function f(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function p(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var b=["alt","height","width"],v=function(m){p(g,m);function g(){return d(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"format",value:function(w,S){b.indexOf(w)>-1?S?this.domNode.setAttribute(w,S):this.domNode.removeAttribute(w):s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,w,S)}}],[{key:"create",value:function(w){var S=s(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,w);return typeof w=="string"&&S.setAttribute("src",this.sanitize(w)),S}},{key:"formats",value:function(w){return b.reduce(function(S,P){return w.hasAttribute(P)&&(S[P]=w.getAttribute(P)),S},{})}},{key:"match",value:function(w){return/\.(jpe?g|gif|png)$/.test(w)||/^data:image\/.+;base64/.test(w)}},{key:"sanitize",value:function(w){return(0,c.sanitize)(w,["http","https","data"])?w:"//:0"}},{key:"value",value:function(w){return w.getAttribute("src")}}]),g}(l.default.Embed);v.blotName="image",v.tagName="IMG",r.default=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function m(g,x){for(var w=0;w<x.length;w++){var S=x[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,S.key,S)}}return function(g,x,w){return x&&m(g.prototype,x),w&&m(g,w),g}}(),s=function m(g,x,w){g===null&&(g=Function.prototype);var S=Object.getOwnPropertyDescriptor(g,x);if(S===void 0){var P=Object.getPrototypeOf(g);return P===null?void 0:m(P,x,w)}else{if("value"in S)return S.value;var I=S.get;return I===void 0?void 0:I.call(w)}},a=i(4),l=i(27),c=u(l);function u(m){return m&&m.__esModule?m:{default:m}}function d(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function f(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function p(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var b=["height","width"],v=function(m){p(g,m);function g(){return d(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"format",value:function(w,S){b.indexOf(w)>-1?S?this.domNode.setAttribute(w,S):this.domNode.removeAttribute(w):s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,w,S)}}],[{key:"create",value:function(w){var S=s(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,w);return S.setAttribute("frameborder","0"),S.setAttribute("allowfullscreen",!0),S.setAttribute("src",this.sanitize(w)),S}},{key:"formats",value:function(w){return b.reduce(function(S,P){return w.hasAttribute(P)&&(S[P]=w.getAttribute(P)),S},{})}},{key:"sanitize",value:function(w){return c.default.sanitize(w)}},{key:"value",value:function(w){return w.getAttribute("src")}}]),g}(a.BlockEmbed);v.blotName="video",v.className="ql-video",v.tagName="IFRAME",r.default=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var o=function(){function w(S,P){for(var I=0;I<P.length;I++){var M=P[I];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(S,M.key,M)}}return function(S,P,I){return P&&w(S.prototype,P),I&&w(S,I),S}}(),s=function w(S,P,I){S===null&&(S=Function.prototype);var M=Object.getOwnPropertyDescriptor(S,P);if(M===void 0){var D=Object.getPrototypeOf(S);return D===null?void 0:w(D,P,I)}else{if("value"in M)return M.value;var E=M.get;return E===void 0?void 0:E.call(I)}},a=i(35),l=p(a),c=i(5),u=p(c),d=i(9),f=p(d);function p(w){return w&&w.__esModule?w:{default:w}}function b(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function v(w,S){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:w}function m(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(w,S):w.__proto__=S)}var g=function(w){m(S,w);function S(){return b(this,S),v(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return o(S,null,[{key:"create",value:function(I){var M=s(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,I);return typeof I=="string"&&(window.katex.render(I,M,{throwOnError:!1,errorColor:"#f00"}),M.setAttribute("data-value",I)),M}},{key:"value",value:function(I){return I.getAttribute("data-value")}}]),S}(l.default);g.blotName="formula",g.className="ql-formula",g.tagName="SPAN";var x=function(w){m(S,w),o(S,null,[{key:"register",value:function(){u.default.register(g,!0)}}]);function S(){b(this,S);var P=v(this,(S.__proto__||Object.getPrototypeOf(S)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return P}return S}(f.default);r.FormulaBlot=g,r.default=x},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var o=function(){function I(M,D){for(var E=0;E<D.length;E++){var _=D[E];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(M,_.key,_)}}return function(M,D,E){return D&&I(M.prototype,D),E&&I(M,E),M}}(),s=function I(M,D,E){M===null&&(M=Function.prototype);var _=Object.getOwnPropertyDescriptor(M,D);if(_===void 0){var A=Object.getPrototypeOf(M);return A===null?void 0:I(A,D,E)}else{if("value"in _)return _.value;var R=_.get;return R===void 0?void 0:R.call(E)}},a=i(0),l=v(a),c=i(5),u=v(c),d=i(9),f=v(d),p=i(13),b=v(p);function v(I){return I&&I.__esModule?I:{default:I}}function m(I,M){if(!(I instanceof M))throw new TypeError("Cannot call a class as a function")}function g(I,M){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:I}function x(I,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);I.prototype=Object.create(M&&M.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(I,M):I.__proto__=M)}var w=function(I){x(M,I);function M(){return m(this,M),g(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}return o(M,[{key:"replaceWith",value:function(E){this.domNode.textContent=this.domNode.textContent,this.attach(),s(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"replaceWith",this).call(this,E)}},{key:"highlight",value:function(E){var _=this.domNode.textContent;this.cachedText!==_&&((_.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=E(_),this.domNode.normalize(),this.attach()),this.cachedText=_)}}]),M}(b.default);w.className="ql-syntax";var S=new l.default.Attributor.Class("token","hljs",{scope:l.default.Scope.INLINE}),P=function(I){x(M,I),o(M,null,[{key:"register",value:function(){u.default.register(S,!0),u.default.register(w,!0)}}]);function M(D,E){m(this,M);var _=g(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,D,E));if(typeof _.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var A=null;return _.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(A),A=setTimeout(function(){_.highlight(),A=null},_.options.interval)}),_.highlight(),_}return o(M,[{key:"highlight",value:function(){var E=this;if(!this.quill.selection.composing){this.quill.update(u.default.sources.USER);var _=this.quill.getSelection();this.quill.scroll.descendants(w).forEach(function(A){A.highlight(E.options.highlight)}),this.quill.update(u.default.sources.SILENT),_!=null&&this.quill.setSelection(_,u.default.sources.SILENT)}}}]),M}(f.default);P.DEFAULTS={highlight:function(){return window.hljs==null?null:function(I){var M=window.hljs.highlightAuto(I);return M.value}}(),interval:1e3},r.CodeBlock=w,r.CodeToken=S,r.default=P},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var o=function M(D,E,_){D===null&&(D=Function.prototype);var A=Object.getOwnPropertyDescriptor(D,E);if(A===void 0){var R=Object.getPrototypeOf(D);return R===null?void 0:M(R,E,_)}else{if("value"in A)return A.value;var F=A.get;return F===void 0?void 0:F.call(_)}},s=function(){function M(D,E){for(var _=0;_<E.length;_++){var A=E[_];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(D,A.key,A)}}return function(D,E,_){return E&&M(D.prototype,E),_&&M(D,_),D}}(),a=i(3),l=m(a),c=i(8),u=m(c),d=i(43),f=m(d),p=i(15),b=i(41),v=m(b);function m(M){return M&&M.__esModule?M:{default:M}}function g(M,D){if(!(M instanceof D))throw new TypeError("Cannot call a class as a function")}function x(M,D){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:M}function w(M,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);M.prototype=Object.create(D&&D.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(M,D):M.__proto__=D)}var S=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],P=function(M){w(D,M);function D(E,_){g(this,D),_.modules.toolbar!=null&&_.modules.toolbar.container==null&&(_.modules.toolbar.container=S);var A=x(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,E,_));return A.quill.container.classList.add("ql-bubble"),A}return s(D,[{key:"extendToolbar",value:function(_){this.tooltip=new I(this.quill,this.options.bounds),this.tooltip.root.appendChild(_.container),this.buildButtons([].slice.call(_.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(_.container.querySelectorAll("select")),v.default)}}]),D}(f.default);P.DEFAULTS=(0,l.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(D){D?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var I=function(M){w(D,M);function D(E,_){g(this,D);var A=x(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,E,_));return A.quill.on(u.default.events.EDITOR_CHANGE,function(R,F,L,N){if(R===u.default.events.SELECTION_CHANGE)if(F!=null&&F.length>0&&N===u.default.sources.USER){A.show(),A.root.style.left="0px",A.root.style.width="",A.root.style.width=A.root.offsetWidth+"px";var U=A.quill.getLines(F.index,F.length);if(U.length===1)A.position(A.quill.getBounds(F));else{var $=U[U.length-1],B=A.quill.getIndex($),H=Math.min($.length()-1,F.index+F.length-B),q=A.quill.getBounds(new p.Range(B,H));A.position(q)}}else document.activeElement!==A.textbox&&A.quill.hasFocus()&&A.hide()}),A}return s(D,[{key:"listen",value:function(){var _=this;o(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){_.root.classList.remove("ql-editing")}),this.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!_.root.classList.contains("ql-hidden")){var A=_.quill.getSelection();A!=null&&_.position(_.quill.getBounds(A))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(_){var A=o(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"position",this).call(this,_),R=this.root.querySelector(".ql-tooltip-arrow");if(R.style.marginLeft="",A===0)return A;R.style.marginLeft=-1*A-R.offsetWidth/2+"px"}}]),D}(d.BaseTooltip);I.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=I,r.default=P},function(n,r,i){n.exports=i(63)}]).default})})(Nee);var VWe=Nee.exports,WWe=Wi&&Wi.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),HC=Wi&&Wi.__assign||function(){return HC=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},HC.apply(this,arguments)},$We=Wi&&Wi.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},HT=Wi&&Wi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Ec=HT(T),HWe=HT(ec),dy=HT(Oee),ZV=HT(VWe),GWe=function(t){WWe(e,t);function e(n){var r=t.call(this,n)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(o,s,a,l){var c,u,d,f;o==="text-change"?(u=(c=r).onEditorChangeText)===null||u===void 0||u.call(c,r.editor.root.innerHTML,s,l,r.unprivilegedEditor):o==="selection-change"&&((f=(d=r).onEditorChangeSelection)===null||f===void 0||f.call(d,s,l,r.unprivilegedEditor))};var i=r.isControlled()?n.value:n.defaultValue;return r.value=i!=null?i:"",r}return e.prototype.validateProps=function(n){var r;if(Ec.default.Children.count(n.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Ec.default.Children.count(n.children)){var i=Ec.default.Children.only(n.children);if(((r=i)===null||r===void 0?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&n.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},e.prototype.shouldComponentUpdate=function(n,r){var i=this,o;if(this.validateProps(n),!this.editor||this.state.generation!==r.generation)return!0;if("value"in n){var s=this.getEditorContents(),a=(o=n.value,o!=null?o:"");this.isEqualValue(a,s)||this.setEditorContents(this.editor,a)}return n.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,n.readOnly),$We(this.cleanProps,this.dirtyProps).some(function(l){return!dy.default(n[l],i.props[l])})},e.prototype.shouldComponentRegenerate=function(n){var r=this;return this.dirtyProps.some(function(i){return!dy.default(n[i],r.props[i])})},e.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},e.prototype.componentWillUnmount=function(){this.destroyEditor()},e.prototype.componentDidUpdate=function(n,r){var i=this;if(this.editor&&this.shouldComponentRegenerate(n)){var o=this.editor.getContents(),s=this.editor.getSelection();this.regenerationSnapshot={delta:o,selection:s},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==r.generation){var a=this.regenerationSnapshot,o=a.delta,l=a.selection;delete this.regenerationSnapshot,this.instantiateEditor();var c=this.editor;c.setContents(o),JV(function(){return i.setEditorSelection(c,l)})}},e.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},e.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},e.prototype.isControlled=function(){return"value"in this.props},e.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},e.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},e.prototype.createEditor=function(n,r){var i=new ZV.default(n,r);return r.tabIndex!=null&&this.setEditorTabIndex(i,r.tabIndex),this.hookEditor(i),i},e.prototype.hookEditor=function(n){this.unprivilegedEditor=this.makeUnprivilegedEditor(n),n.on("editor-change",this.onEditorChange)},e.prototype.unhookEditor=function(n){n.off("editor-change",this.onEditorChange)},e.prototype.getEditorContents=function(){return this.value},e.prototype.getEditorSelection=function(){return this.selection},e.prototype.isDelta=function(n){return n&&n.ops},e.prototype.isEqualValue=function(n,r){return this.isDelta(n)&&this.isDelta(r)?dy.default(n.ops,r.ops):dy.default(n,r)},e.prototype.setEditorContents=function(n,r){var i=this;this.value=r;var o=this.getEditorSelection();typeof r=="string"?n.setContents(n.clipboard.convert(r)):n.setContents(r),JV(function(){return i.setEditorSelection(n,o)})},e.prototype.setEditorSelection=function(n,r){if(this.selection=r,r){var i=n.getLength();r.index=Math.max(0,Math.min(r.index,i-1)),r.length=Math.max(0,Math.min(r.length,i-1-r.index)),n.setSelection(r)}},e.prototype.setEditorTabIndex=function(n,r){var i,o;!((o=(i=n)===null||i===void 0?void 0:i.scroll)===null||o===void 0)&&o.domNode&&(n.scroll.domNode.tabIndex=r)},e.prototype.setEditorReadOnly=function(n,r){r?n.disable():n.enable()},e.prototype.makeUnprivilegedEditor=function(n){var r=n;return{getHTML:function(){return r.root.innerHTML},getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}},e.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var n=HWe.default.findDOMNode(this.editingArea);if(!n)throw new Error("Cannot find element for editing area");if(n.nodeType===3)throw new Error("Editing area cannot be a text node");return n},e.prototype.renderEditingArea=function(){var n=this,r=this.props,i=r.children,o=r.preserveWhitespace,s=this.state.generation,a={key:s,ref:function(l){n.editingArea=l}};return Ec.default.Children.count(i)?Ec.default.cloneElement(Ec.default.Children.only(i),a):o?Ec.default.createElement("pre",HC({},a)):Ec.default.createElement("div",HC({},a))},e.prototype.render=function(){var n;return Ec.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(n=this.props.className,n!=null?n:""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},e.prototype.onEditorChangeText=function(n,r,i,o){var s,a;if(this.editor){var l=this.isDelta(this.value)?o.getContents():o.getHTML();l!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=l,(a=(s=this.props).onChange)===null||a===void 0||a.call(s,n,r,i,o))}},e.prototype.onEditorChangeSelection=function(n,r,i){var o,s,a,l,c,u;if(this.editor){var d=this.getEditorSelection(),f=!d&&n,p=d&&!n;dy.default(n,d)||(this.selection=n,(s=(o=this.props).onChangeSelection)===null||s===void 0||s.call(o,n,r,i),f?(l=(a=this.props).onFocus)===null||l===void 0||l.call(a,n,r,i):p&&((u=(c=this.props).onBlur)===null||u===void 0||u.call(c,d,r,i)))}},e.prototype.focus=function(){this.editor&&this.editor.focus()},e.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},e.displayName="React Quill",e.Quill=ZV.default,e.defaultProps={theme:"snow",modules:{},readOnly:!1},e}(Ec.default.Component);function JV(t){Promise.resolve().then(t)}var qWe=GWe;const KWe=Ad(qWe),YWe=({isOpen:t,onClose:e,onConfigSelect:n})=>{const[r,i]=T.useState(""),[o,s]=T.useState(6),[a,l]=T.useState([{name:"",items:[]}]),[c,u]=T.useState(!1),[d,f]=T.useState([]),[p,b]=T.useState(!1),v=co();T.useEffect(()=>{m()},[]);const m=()=>te(nt,null,function*(){try{b(!0);const[_,A]=yield Promise.all([Xn(mr(Tn(bt,"gameConfigs"),Bn("type","==","sort-categories-egg"),Bn("share","==",!0))),Xn(mr(Tn(bt,"userGameConfigs"),Bn("type","==","sort-categories-egg"),Bn("share","==",!0)))]),R=[];_.forEach(F=>{const L=F.data(),N=L.categories.map(U=>se(j({},U),{items:Array.isArray(U.items)?U.items:U.items.split(",").map($=>$.trim())}));R.push(se(j({id:F.id},L),{categories:N,isAdminConfig:!0}))}),A.forEach(F=>{const L=F.data(),N=L.categories.map(U=>se(j({},U),{items:Array.isArray(U.items)?U.items:U.items.split(",").map($=>$.trim())}));R.push(se(j({id:F.id},L),{categories:N,isAdminConfig:!1}))}),f(R)}catch(_){console.error("Error loading configurations:",_),f([{id:"fallback1",type:"sort-categories-egg",title:"Animals",eggQty:12,categories:[{name:"Mammals",items:["dog","cat","elephant","giraffe"]},{name:"Birds",items:["eagle","parrot","penguin","owl"]},{name:"Reptiles",items:["snake","lizard","turtle","crocodile"]}],share:!0,createdAt:new Date,isAdminConfig:!0}]),v({title:"Using Sample Configurations",description:"Could not load configurations from server. Using sample configurations instead.",status:"info",duration:5e3})}finally{b(!1)}}),g=()=>{l([...a,{name:"",items:[]}])},x=(_,A,R)=>{const F=[...a];F[_].name=R,l(F)},w=_=>{const A=[...a];A[_].items.push({content:"",text:""}),l(A)},S=(_,A)=>{const R=[...a];R[_].items.splice(A,1),l(R)},P=(_,A,R)=>{const F=[...a],L=document.createElement("div");L.innerHTML=R;const N=L.textContent||L.innerText||"";F[_].items[A]={content:R,text:N.trim()},l(F)},I=()=>te(nt,null,function*(){var _,A;if(console.log("Auth state:",{currentUser:Xr.currentUser,isAuthenticated:!!Xr.currentUser,uid:(_=Xr.currentUser)==null?void 0:_.uid,email:(A=Xr.currentUser)==null?void 0:A.email}),!Xr.currentUser){v({title:"Authentication Required",description:"Please sign in to save configurations.",status:"error",duration:5e3});return}if(!r.trim()){v({title:"Error",description:"Please enter a configuration title.",status:"error",duration:3e3});return}if(a.some(R=>!R.name.trim()||!R.items.length)){v({title:"Error",description:"Please fill in all category names and items.",status:"error",duration:3e3});return}try{const R=a.map(H=>({name:H.name.trim(),items:H.items.map(q=>({content:q.content,text:q.text}))})),F=a.map(H=>({name:H.name.trim(),items:H.items.map(q=>q.text).filter(q=>q.length>0)}));if(R.filter(H=>H.items.length<Rp).length>0){v({title:"Not Enough Items",description:`Each category must have at least ${Rp} items.`,status:"warning",duration:5e3});return}if(R.filter(H=>H.items.length>Dp).length>0){v({title:"Too Many Items",description:`A category cannot have more than ${Dp} items.`,status:"warning",duration:5e3});return}const U={type:"sort-categories-egg",title:r.trim(),eggQty:Number(o),categories:F,richCategories:R,share:c,userId:Xr.currentUser.uid,email:Xr.currentUser.email||void 0,createdAt:bo()},$=R.reduce((H,q)=>H+q.items.length,0);if($<U.eggQty){v({title:"Error",description:`Not enough items. You need at least ${U.eggQty} items total, but only have ${$}.`,status:"error",duration:5e3});return}const B=yield yc(Tn(bt,"userGameConfigs"),U);console.log("Successfully saved config with ID:",B.id),v({title:"Success",description:"Configuration saved successfully",status:"success",duration:3e3}),yield m()}catch(R){console.error("Error saving configuration:",R),R instanceof Error&&console.error("Error details:",{message:R.message,code:R.code,name:R.name,stack:R.stack}),v({title:"Error",description:"Could not save configuration. Please try again.",status:"error",duration:5e3})}}),M=_=>{i(_.title||""),s(_.eggQty||6),u(_.share||!1);let A=[];_.richCategories&&Array.isArray(_.richCategories)?A=_.richCategories.map(R=>({name:R.name,items:R.items.map(F=>({content:F.content||"",text:F.text||""}))})):_.categories&&Array.isArray(_.categories)&&(A=_.categories.map(R=>({name:R.name,items:(Array.isArray(R.items)?R.items:[]).map(F=>({content:F,text:F}))}))),A.length===0?A=[{name:"",items:[{content:"",text:""}]}]:A=A.map(R=>se(j({},R),{items:R.items.length>0?R.items:[{content:"",text:""}]})),l(A)},D={toolbar:[["bold","italic","underline"],[{script:"sub"},{script:"super"}],["clean"]]},E=["bold","italic","underline","script"];return h.jsxs(Kt,{spacing:4,pb:6,children:[h.jsxs(Et,{w:"100%",children:[h.jsx(zr,{size:"md",mb:2,children:"Load Saved Configuration"}),h.jsx(Ov,{placeholder:"Select a saved configuration",onChange:_=>{const A=d.find(R=>R.id===_.target.value);A&&(M(A),n(A))},isDisabled:p||d.length===0,children:d.map(_=>h.jsxs("option",{value:_.id,children:[_.title," ",_.isAdminConfig?"(Official)":`(by ${_.email||"Unknown"})`]},_.id))}),d.length===0&&!p&&h.jsx(ft,{fontSize:"sm",color:"gray.500",mt:1,children:"No saved configurations found. Create one below."})]}),h.jsx(md,{}),h.jsxs(Et,{w:"100%",children:[h.jsx(zr,{size:"md",mb:4,children:"Create New Configuration"}),h.jsxs(Mr,{mb:4,children:[h.jsx(ar,{children:"Configuration Title"}),h.jsx(ti,{value:r,onChange:_=>i(_.target.value),placeholder:"Enter configuration title"})]}),h.jsxs(Mr,{mb:4,children:[h.jsx(ar,{children:"Number of Eggs"}),h.jsx(ti,{type:"number",value:o,onChange:_=>s(Number(_.target.value)),min:1})]}),h.jsx(zr,{size:"sm",mb:2,children:"Categories"}),a.map((_,A)=>h.jsxs(Kt,{w:"100%",spacing:2,mb:4,p:4,border:"1px",borderColor:"gray.200",borderRadius:"md",children:[h.jsxs(Mr,{children:[h.jsxs(ar,{children:["Category ",A+1," Name"]}),h.jsx(ti,{value:_.name,onChange:R=>x(A,"name",R.target.value),placeholder:"Category name"})]}),h.jsx(ar,{alignSelf:"flex-start",children:"Items"}),_.items.map((R,F)=>h.jsxs(Et,{w:"100%",p:3,border:"1px",borderColor:"gray.100",borderRadius:"md",children:[h.jsxs(Ln,{mb:2,justify:"space-between",children:[h.jsxs(ft,{fontSize:"sm",fontWeight:"medium",children:["Item ",F+1]}),_.items.length>1&&h.jsx(kr,{"aria-label":"Remove item",icon:h.jsx(Tl,{}),size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>S(A,F)})]}),h.jsx(KWe,{value:R.content,onChange:L=>P(A,F,L),modules:D,formats:E,placeholder:"Enter item text (supports bold, italic, underline, superscript, subscript)",style:{minHeight:"60px",backgroundColor:"white"}})]},F)),h.jsx(pn,{leftIcon:h.jsx(Al,{}),onClick:()=>w(A),colorScheme:"blue",variant:"outline",size:"sm",alignSelf:"flex-start",children:"Add Item"})]},A)),h.jsx(pn,{onClick:g,colorScheme:"blue",mb:4,children:"Add Category"}),h.jsxs(Mr,{display:"flex",alignItems:"center",mb:4,children:[h.jsx(ar,{mb:"0",children:"Share Configuration"}),h.jsx(QN,{isChecked:c,onChange:_=>u(_.target.checked)})]}),h.jsx(pn,{onClick:I,colorScheme:"green",w:"100%",children:"Save Configuration"})]})]})},XWe=({gameState:t,onClose:e,onConfigSelect:n})=>{const r=Ro({base:"sm",md:"md",lg:"xl"});return h.jsxs($c,{isOpen:t.isConfigModalOpen,onClose:e,size:r,children:[h.jsx(qc,{}),h.jsxs(Hc,{maxH:"90vh",overflow:"hidden",children:[h.jsx(Gc,{fontFamily:"'Comic Neue', sans-serif",children:"Select Game Configuration"}),h.jsx(Yc,{}),h.jsx(Kc,{p:0,overflow:"auto",children:h.jsx(YWe,{isOpen:t.isConfigModalOpen,onClose:e,onConfigSelect:n})})]})]})},sd=({gameTitle:t,showHomeButton:e=!0,showBackButton:n=!0,onBack:r,children:i,variant:o="full"})=>{const s=Pr(),{isTeacher:a,isStudent:l}=Dr(),[c]=dh(),u=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||c.get("pwa")==="true";c.get("from");const d=c.get("emailAccess")==="true",f=Ro({base:"sm",md:"md"}),p=Ro({base:"md",md:"lg"}),b=()=>{s(a?"/teacher":l?"/student":"/")},v=()=>{r?r():window.history.length>1?window.history.back():b()},m=()=>u&&d?"Return to App Dashboard":a?"Return to Create Dashboard":l?"Return to Student Dashboard":"Return to Home";return o==="compact"?h.jsx(Et,{w:"full",bg:"white",boxShadow:"sm",borderBottom:"1px solid",borderColor:"gray.200",px:{base:3,md:4},py:{base:2,md:3},position:"sticky",top:0,zIndex:10,paddingTop:u?"max(8px, env(safe-area-inset-top))":void 0,paddingLeft:u?"max(12px, env(safe-area-inset-left))":void 0,paddingRight:u?"max(12px, env(safe-area-inset-right))":void 0,children:h.jsxs(Ln,{spacing:{base:2,md:3},justify:"space-between",w:"full",children:[h.jsxs(Ln,{spacing:{base:1,md:2},flex:1,minW:0,children:[n&&h.jsx(ll,{label:"Go Back",placement:"bottom",children:h.jsx(kr,{"aria-label":"Go back",icon:h.jsx(CV,{}),size:f,variant:"ghost",onClick:v,colorScheme:"blue",flexShrink:0})}),h.jsx(ft,{fontSize:p,fontWeight:"bold",color:"blue.600",noOfLines:1,flex:1,children:t})]}),h.jsxs(Ln,{spacing:{base:1,md:2},flexShrink:0,children:[i,e&&h.jsx(ll,{label:m(),placement:"bottom",children:h.jsx(kr,{"aria-label":"Go to dashboard",icon:h.jsx("span",{children:"🏠"}),size:f,colorScheme:"blue",variant:"solid",onClick:b,flexShrink:0})})]})]})}):h.jsx(Et,{w:"full",bg:"white",boxShadow:"sm",borderRadius:"lg",p:4,border:"1px solid",borderColor:"gray.200",children:h.jsxs(Ln,{spacing:4,justify:"space-between",w:"full",children:[h.jsxs(Ln,{spacing:3,children:[n&&h.jsx(ll,{label:"Go Back",placement:"bottom",children:h.jsx(pn,{leftIcon:h.jsx(CV,{}),size:f,variant:"ghost",onClick:v,colorScheme:"blue",children:"Back"})}),h.jsx(ft,{fontSize:p,fontWeight:"bold",color:"gray.800",children:t}),u&&h.jsx(ft,{fontSize:"sm",color:"blue.500",fontWeight:"medium",children:"📱 App Mode"})]}),h.jsxs(Ln,{spacing:3,children:[i,e&&h.jsx(ll,{label:m(),placement:"bottom",children:h.jsx(pn,{leftIcon:h.jsx("span",{children:"🏠"}),size:f,colorScheme:"blue",variant:"solid",onClick:b,children:a?"Create":l?"Dashboard":"Home"})})]})]})})},QWe=({playerName:t,onGameComplete:e,config:n,onHighScoreProcessStart:r,onHighScoreProcessComplete:i})=>{const o=Qje(n,t,e,r,i);return h.jsxs(Et,{width:"100vw",maxWidth:"100%",overflow:"hidden",height:"auto",children:[h.jsx(sd,{gameTitle:"Sort Categories Egg Reveal",variant:"compact"}),h.jsx(XWe,{gameState:o.gameState,onClose:o.closeConfigModal,onConfigSelect:o.handleConfigSelect}),o.gameState.gameStarted?h.jsxs(Et,{position:"relative",children:[h.jsx(uUe,{gameState:o.gameState,gameAreaRef:o.gameAreaRef,onMouseMove:o.handleMouseMove,onGameAreaClick:o.handleGameAreaClick,onEggClick:o.handleEggClick,onWordClick:o.handleWordClick,enableTextToSpeech:n.enableTextToSpeech,usePhonicsMode:n.usePhonicsMode,useAmazonPolly:n.useAmazonPolly,textToSpeechMode:n.textToSpeechMode,containerType:n.containerType}),h.jsx(dUe,{gameState:o.gameState,onResetGame:o.handleResetGame,onCloseGame:o.handleCloseGame})]}):h.jsx(Zje,{onStartGame:o.openConfigModal,onLoadConfig:o.openConfigModal}),h.jsx(fUe,{gameState:o.gameState,onClose:o.handleHighScoreDisplayModalClose})]})},Lee=({playerName:t,onGameComplete:e,config:n,onHighScoreProcessStart:r,onHighScoreProcessComplete:i})=>h.jsx(Et,{width:"100%",height:"100%",children:h.jsx(QWe,{playerName:t,onGameComplete:e,config:n,onHighScoreProcessStart:r,onHighScoreProcessComplete:i})});/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const CL="175",ZWe=0,e9=1,JWe=2,Bee=1,jee=2,Fu=3,Sd=0,ca=1,Ms=2,Hf=0,fv=1,t9=2,n9=3,r9=4,e$e=5,rp=100,t$e=101,n$e=102,r$e=103,i$e=104,o$e=200,s$e=201,a$e=202,l$e=203,Ek=204,Ck=205,c$e=206,u$e=207,d$e=208,f$e=209,h$e=210,p$e=211,m$e=212,g$e=213,v$e=214,Ak=0,Tk=1,Mk=2,qv=3,Pk=4,Dk=5,Rk=6,Ik=7,Uee=0,y$e=1,x$e=2,Gf=0,b$e=1,w$e=2,S$e=3,_$e=4,E$e=5,C$e=6,A$e=7,zee=300,Kv=301,Yv=302,kk=303,Fk=304,GT=306,Fb=1e3,gp=1001,Ok=1002,lc=1003,T$e=1004,BS=1005,nc=1006,eD=1007,Mf=1008,_d=1009,Vee=1010,Wee=1011,Ob=1012,AL=1013,tm=1014,Yu=1015,Hw=1016,TL=1017,ML=1018,Nb=1020,$ee=35902,Hee=1021,Gee=1022,rc=1023,qee=1024,Kee=1025,Lb=1026,Bb=1027,Yee=1028,PL=1029,Xee=1030,DL=1031,RL=1033,cE=33776,uE=33777,dE=33778,fE=33779,Nk=35840,Lk=35841,Bk=35842,jk=35843,Uk=36196,zk=37492,Vk=37496,Wk=37808,$k=37809,Hk=37810,Gk=37811,qk=37812,Kk=37813,Yk=37814,Xk=37815,Qk=37816,Zk=37817,Jk=37818,eF=37819,tF=37820,nF=37821,hE=36492,rF=36494,iF=36495,Qee=36283,oF=36284,sF=36285,aF=36286,M$e=3200,P$e=3201,Zee=0,D$e=1,_f="",rl="srgb",Xv="srgb-linear",GC="linear",ei="srgb",Qm=7680,i9=519,R$e=512,I$e=513,k$e=514,Jee=515,F$e=516,O$e=517,N$e=518,L$e=519,o9=35044,s9="300 es",Xu=2e3,qC=2001;class x0{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){const r=this._listeners;if(r===void 0)return;const i=r[e];if(i!==void 0){const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const r=n[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,s=i.length;o<s;o++)i[o].call(this,e);e.target=null}}}const rs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],tD=Math.PI/180,lF=180/Math.PI;function b0(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(rs[t&255]+rs[t>>8&255]+rs[t>>16&255]+rs[t>>24&255]+"-"+rs[e&255]+rs[e>>8&255]+"-"+rs[e>>16&15|64]+rs[e>>24&255]+"-"+rs[n&63|128]+rs[n>>8&255]+"-"+rs[n>>16&255]+rs[n>>24&255]+rs[r&255]+rs[r>>8&255]+rs[r>>16&255]+rs[r>>24&255]).toLowerCase()}function dr(t,e,n){return Math.max(e,Math.min(n,t))}function B$e(t,e){return(t%e+e)%e}function nD(t,e,n){return(1-n)*t+n*e}function fy(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Ks(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}class qt{constructor(e=0,n=0){qt.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=dr(this.x,e.x,n.x),this.y=dr(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=dr(this.x,e,n),this.y=dr(this.y,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(dr(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(dr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),o=this.x-e.x,s=this.y-e.y;return this.x=o*r-s*i+e.x,this.y=o*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Jn{constructor(e,n,r,i,o,s,a,l,c){Jn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,s,a,l,c)}set(e,n,r,i,o,s,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=n,u[4]=o,u[5]=l,u[6]=r,u[7]=s,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,s=r[0],a=r[3],l=r[6],c=r[1],u=r[4],d=r[7],f=r[2],p=r[5],b=r[8],v=i[0],m=i[3],g=i[6],x=i[1],w=i[4],S=i[7],P=i[2],I=i[5],M=i[8];return o[0]=s*v+a*x+l*P,o[3]=s*m+a*w+l*I,o[6]=s*g+a*S+l*M,o[1]=c*v+u*x+d*P,o[4]=c*m+u*w+d*I,o[7]=c*g+u*S+d*M,o[2]=f*v+p*x+b*P,o[5]=f*m+p*w+b*I,o[8]=f*g+p*S+b*M,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return n*s*u-n*a*c-r*o*u+r*a*l+i*o*c-i*s*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*s-a*c,f=a*l-u*o,p=c*o-s*l,b=n*d+r*f+i*p;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/b;return e[0]=d*v,e[1]=(i*c-u*r)*v,e[2]=(a*r-i*s)*v,e[3]=f*v,e[4]=(u*n-i*l)*v,e[5]=(i*o-a*n)*v,e[6]=p*v,e[7]=(r*l-c*n)*v,e[8]=(s*n-r*o)*v,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,o,s,a){const l=Math.cos(o),c=Math.sin(o);return this.set(r*l,r*c,-r*(l*s+c*a)+s+e,-i*c,i*l,-i*(-c*s+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(rD.makeScale(e,n)),this}rotate(e){return this.premultiply(rD.makeRotation(-e)),this}translate(e,n){return this.premultiply(rD.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const rD=new Jn;function ete(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function KC(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function j$e(){const t=KC("canvas");return t.style.display="block",t}const a9={};function pE(t){t in a9||(a9[t]=!0,console.warn(t))}function U$e(t,e,n){return new Promise(function(r,i){function o(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:i();break;case t.TIMEOUT_EXPIRED:setTimeout(o,n);break;default:r()}}setTimeout(o,n)})}function z$e(t){const e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function V$e(t){const e=t.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const l9=new Jn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),c9=new Jn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function W$e(){const t={enabled:!0,workingColorSpace:Xv,spaces:{},convert:function(i,o,s){return this.enabled===!1||o===s||!o||!s||(this.spaces[o].transfer===ei&&(i.r=ad(i.r),i.g=ad(i.g),i.b=ad(i.b)),this.spaces[o].primaries!==this.spaces[s].primaries&&(i.applyMatrix3(this.spaces[o].toXYZ),i.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===ei&&(i.r=hv(i.r),i.g=hv(i.g),i.b=hv(i.b))),i},fromWorkingColorSpace:function(i,o){return this.convert(i,this.workingColorSpace,o)},toWorkingColorSpace:function(i,o){return this.convert(i,o,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===_f?GC:this.spaces[i].transfer},getLuminanceCoefficients:function(i,o=this.workingColorSpace){return i.fromArray(this.spaces[o].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,o,s){return i.copy(this.spaces[o].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return t.define({[Xv]:{primaries:e,whitePoint:r,transfer:GC,toXYZ:l9,fromXYZ:c9,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:rl},outputColorSpaceConfig:{drawingBufferColorSpace:rl}},[rl]:{primaries:e,whitePoint:r,transfer:ei,toXYZ:l9,fromXYZ:c9,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:rl}}}),t}const Rr=W$e();function ad(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function hv(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let Zm;class $$e{static getDataURL(e,n="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{Zm===void 0&&(Zm=KC("canvas")),Zm.width=e.width,Zm.height=e.height;const i=Zm.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),r=Zm}return r.toDataURL(n)}static sRGBToLinear(e){if(typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap){const n=KC("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),o=i.data;for(let s=0;s<o.length;s++)o[s]=ad(o[s]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(ad(n[r]/255)*255):n[r]=ad(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let H$e=0;class IL{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:H$e++}),this.uuid=b0(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let s=0,a=i.length;s<a;s++)i[s].isDataTexture?o.push(iD(i[s].image)):o.push(iD(i[s]))}else o=iD(i);r.url=o}return n||(e.images[this.uuid]=r),r}}function iD(t){return typeof HTMLImageElement!="undefined"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&t instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&t instanceof ImageBitmap?$$e.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let G$e=0;class Ns extends x0{constructor(e=Ns.DEFAULT_IMAGE,n=Ns.DEFAULT_MAPPING,r=gp,i=gp,o=nc,s=Mf,a=rc,l=_d,c=Ns.DEFAULT_ANISOTROPY,u=_f){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:G$e++}),this.uuid=b0(),this.name="",this.source=new IL(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=o,this.minFilter=s,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new qt(0,0),this.repeat=new qt(1,1),this.center=new qt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Jn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==zee)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Fb:e.x=e.x-Math.floor(e.x);break;case gp:e.x=e.x<0?0:1;break;case Ok:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Fb:e.y=e.y-Math.floor(e.y);break;case gp:e.y=e.y<0?0:1;break;case Ok:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Ns.DEFAULT_IMAGE=null;Ns.DEFAULT_MAPPING=zee;Ns.DEFAULT_ANISOTROPY=1;class $i{constructor(e=0,n=0,r=0,i=1){$i.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=this.w,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i+s[12]*o,this.y=s[1]*n+s[5]*r+s[9]*i+s[13]*o,this.z=s[2]*n+s[6]*r+s[10]*i+s[14]*o,this.w=s[3]*n+s[7]*r+s[11]*i+s[15]*o,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,o;const l=e.elements,c=l[0],u=l[4],d=l[8],f=l[1],p=l[5],b=l[9],v=l[2],m=l[6],g=l[10];if(Math.abs(u-f)<.01&&Math.abs(d-v)<.01&&Math.abs(b-m)<.01){if(Math.abs(u+f)<.1&&Math.abs(d+v)<.1&&Math.abs(b+m)<.1&&Math.abs(c+p+g-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const w=(c+1)/2,S=(p+1)/2,P=(g+1)/2,I=(u+f)/4,M=(d+v)/4,D=(b+m)/4;return w>S&&w>P?w<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(w),i=I/r,o=M/r):S>P?S<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(S),r=I/i,o=D/i):P<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(P),r=M/o,i=D/o),this.set(r,i,o,n),this}let x=Math.sqrt((m-b)*(m-b)+(d-v)*(d-v)+(f-u)*(f-u));return Math.abs(x)<.001&&(x=1),this.x=(m-b)/x,this.y=(d-v)/x,this.z=(f-u)/x,this.w=Math.acos((c+p+g-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=dr(this.x,e.x,n.x),this.y=dr(this.y,e.y,n.y),this.z=dr(this.z,e.z,n.z),this.w=dr(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=dr(this.x,e,n),this.y=dr(this.y,e,n),this.z=dr(this.z,e,n),this.w=dr(this.w,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(dr(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class q$e extends x0{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new $i(0,0,e,n),this.scissorTest=!1,this.viewport=new $i(0,0,e,n);const i={width:e,height:n,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:nc,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const o=new Ns(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);o.flipY=!1,o.generateMipmaps=r.generateMipmaps,o.internalFormat=r.internalFormat,this.textures=[];const s=r.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,o=this.textures.length;i<o;i++)this.textures[i].image.width=e,this.textures[i].image.height=n,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const i=Object.assign({},e.textures[n].image);this.textures[n].source=new IL(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class nm extends q$e{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class tte extends Ns{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=lc,this.minFilter=lc,this.wrapR=gp,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class K$e extends Ns{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=lc,this.minFilter=lc,this.wrapR=gp,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Gw{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,o,s,a){let l=r[i+0],c=r[i+1],u=r[i+2],d=r[i+3];const f=o[s+0],p=o[s+1],b=o[s+2],v=o[s+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d;return}if(a===1){e[n+0]=f,e[n+1]=p,e[n+2]=b,e[n+3]=v;return}if(d!==v||l!==f||c!==p||u!==b){let m=1-a;const g=l*f+c*p+u*b+d*v,x=g>=0?1:-1,w=1-g*g;if(w>Number.EPSILON){const P=Math.sqrt(w),I=Math.atan2(P,g*x);m=Math.sin(m*I)/P,a=Math.sin(a*I)/P}const S=a*x;if(l=l*m+f*S,c=c*m+p*S,u=u*m+b*S,d=d*m+v*S,m===1-a){const P=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=P,c*=P,u*=P,d*=P}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d}static multiplyQuaternionsFlat(e,n,r,i,o,s){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],d=o[s],f=o[s+1],p=o[s+2],b=o[s+3];return e[n]=a*b+u*d+l*p-c*f,e[n+1]=l*b+u*f+c*d-a*p,e[n+2]=c*b+u*p+a*f-l*d,e[n+3]=u*b-a*d-l*f-c*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),d=a(o/2),f=l(r/2),p=l(i/2),b=l(o/2);switch(s){case"XYZ":this._x=f*u*d+c*p*b,this._y=c*p*d-f*u*b,this._z=c*u*b+f*p*d,this._w=c*u*d-f*p*b;break;case"YXZ":this._x=f*u*d+c*p*b,this._y=c*p*d-f*u*b,this._z=c*u*b-f*p*d,this._w=c*u*d+f*p*b;break;case"ZXY":this._x=f*u*d-c*p*b,this._y=c*p*d+f*u*b,this._z=c*u*b+f*p*d,this._w=c*u*d-f*p*b;break;case"ZYX":this._x=f*u*d-c*p*b,this._y=c*p*d+f*u*b,this._z=c*u*b-f*p*d,this._w=c*u*d+f*p*b;break;case"YZX":this._x=f*u*d+c*p*b,this._y=c*p*d+f*u*b,this._z=c*u*b-f*p*d,this._w=c*u*d-f*p*b;break;case"XZY":this._x=f*u*d-c*p*b,this._y=c*p*d-f*u*b,this._z=c*u*b+f*p*d,this._w=c*u*d+f*p*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],o=n[8],s=n[1],a=n[5],l=n[9],c=n[2],u=n[6],d=n[10],f=r+a+d;if(f>0){const p=.5/Math.sqrt(f+1);this._w=.25/p,this._x=(u-l)*p,this._y=(o-c)*p,this._z=(s-i)*p}else if(r>a&&r>d){const p=2*Math.sqrt(1+r-a-d);this._w=(u-l)/p,this._x=.25*p,this._y=(i+s)/p,this._z=(o+c)/p}else if(a>d){const p=2*Math.sqrt(1+a-r-d);this._w=(o-c)/p,this._x=(i+s)/p,this._y=.25*p,this._z=(l+u)/p}else{const p=2*Math.sqrt(1+d-r-a);this._w=(s-i)/p,this._x=(o+c)/p,this._y=(l+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(dr(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,o=e._z,s=e._w,a=n._x,l=n._y,c=n._z,u=n._w;return this._x=r*u+s*a+i*c-o*l,this._y=i*u+s*l+o*a-r*c,this._z=o*u+s*c+r*l-i*a,this._w=s*u-r*a-i*l-o*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,o=this._z,s=this._w;let a=s*e._w+r*e._x+i*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=r,this._y=i,this._z=o,this;const l=1-a*a;if(l<=Number.EPSILON){const p=1-n;return this._w=p*s+n*this._w,this._x=p*r+n*this._x,this._y=p*i+n*this._y,this._z=p*o+n*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-n)*u)/c,f=Math.sin(n*u)/c;return this._w=s*d+this._w*f,this._x=r*d+this._x*f,this._y=i*d+this._y*f,this._z=o*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),o=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),o*Math.sin(n),o*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class He{constructor(e=0,n=0,r=0){He.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(u9.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(u9.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[3]*r+o[6]*i,this.y=o[1]*n+o[4]*r+o[7]*i,this.z=o[2]*n+o[5]*r+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=e.elements,s=1/(o[3]*n+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*n+o[4]*r+o[8]*i+o[12])*s,this.y=(o[1]*n+o[5]*r+o[9]*i+o[13])*s,this.z=(o[2]*n+o[6]*r+o[10]*i+o[14])*s,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,o=e.x,s=e.y,a=e.z,l=e.w,c=2*(s*i-a*r),u=2*(a*n-o*i),d=2*(o*r-s*n);return this.x=n+l*c+s*d-a*u,this.y=r+l*u+a*c-o*d,this.z=i+l*d+o*u-s*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i,this.y=o[1]*n+o[5]*r+o[9]*i,this.z=o[2]*n+o[6]*r+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=dr(this.x,e.x,n.x),this.y=dr(this.y,e.y,n.y),this.z=dr(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=dr(this.x,e,n),this.y=dr(this.y,e,n),this.z=dr(this.z,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(dr(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,o=e.z,s=n.x,a=n.y,l=n.z;return this.x=i*l-o*a,this.y=o*s-r*l,this.z=r*a-i*s,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return oD.copy(this).projectOnVector(e),this.sub(oD)}reflect(e){return this.sub(oD.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(dr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const oD=new He,u9=new Gw;class qw{constructor(e=new He(1/0,1/0,1/0),n=new He(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(Wl.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(Wl.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=Wl.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const o=r.getAttribute("position");if(n===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)e.isMesh===!0?e.getVertexPosition(s,Wl):Wl.fromBufferAttribute(o,s),Wl.applyMatrix4(e.matrixWorld),this.expandByPoint(Wl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),jS.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),jS.copy(r.boundingBox)),jS.applyMatrix4(e.matrixWorld),this.union(jS)}const i=e.children;for(let o=0,s=i.length;o<s;o++)this.expandByObject(i[o],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Wl),Wl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(hy),US.subVectors(this.max,hy),Jm.subVectors(e.a,hy),eg.subVectors(e.b,hy),tg.subVectors(e.c,hy),Qd.subVectors(eg,Jm),Zd.subVectors(tg,eg),Oh.subVectors(Jm,tg);let n=[0,-Qd.z,Qd.y,0,-Zd.z,Zd.y,0,-Oh.z,Oh.y,Qd.z,0,-Qd.x,Zd.z,0,-Zd.x,Oh.z,0,-Oh.x,-Qd.y,Qd.x,0,-Zd.y,Zd.x,0,-Oh.y,Oh.x,0];return!sD(n,Jm,eg,tg,US)||(n=[1,0,0,0,1,0,0,0,1],!sD(n,Jm,eg,tg,US))?!1:(zS.crossVectors(Qd,Zd),n=[zS.x,zS.y,zS.z],sD(n,Jm,eg,tg,US))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Wl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Wl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Tu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Tu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Tu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Tu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Tu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Tu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Tu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Tu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Tu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Tu=[new He,new He,new He,new He,new He,new He,new He,new He],Wl=new He,jS=new qw,Jm=new He,eg=new He,tg=new He,Qd=new He,Zd=new He,Oh=new He,hy=new He,US=new He,zS=new He,Nh=new He;function sD(t,e,n,r,i){for(let o=0,s=t.length-3;o<=s;o+=3){Nh.fromArray(t,o);const a=i.x*Math.abs(Nh.x)+i.y*Math.abs(Nh.y)+i.z*Math.abs(Nh.z),l=e.dot(Nh),c=n.dot(Nh),u=r.dot(Nh);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const Y$e=new qw,py=new He,aD=new He;class kL{constructor(e=new He,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):Y$e.setFromPoints(e).getCenter(r);let i=0;for(let o=0,s=e.length;o<s;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;py.subVectors(e,this.center);const n=py.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(py,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(aD.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(py.copy(e.center).add(aD)),this.expandByPoint(py.copy(e.center).sub(aD))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Mu=new He,lD=new He,VS=new He,Jd=new He,cD=new He,WS=new He,uD=new He;class nte{constructor(e=new He,n=new He(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Mu)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Mu.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Mu.copy(this.origin).addScaledVector(this.direction,n),Mu.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){lD.copy(e).add(n).multiplyScalar(.5),VS.copy(n).sub(e).normalize(),Jd.copy(this.origin).sub(lD);const o=e.distanceTo(n)*.5,s=-this.direction.dot(VS),a=Jd.dot(this.direction),l=-Jd.dot(VS),c=Jd.lengthSq(),u=Math.abs(1-s*s);let d,f,p,b;if(u>0)if(d=s*l-a,f=s*a-l,b=o*u,d>=0)if(f>=-b)if(f<=b){const v=1/u;d*=v,f*=v,p=d*(d+s*f+2*a)+f*(s*d+f+2*l)+c}else f=o,d=Math.max(0,-(s*f+a)),p=-d*d+f*(f+2*l)+c;else f=-o,d=Math.max(0,-(s*f+a)),p=-d*d+f*(f+2*l)+c;else f<=-b?(d=Math.max(0,-(-s*o+a)),f=d>0?-o:Math.min(Math.max(-o,-l),o),p=-d*d+f*(f+2*l)+c):f<=b?(d=0,f=Math.min(Math.max(-o,-l),o),p=f*(f+2*l)+c):(d=Math.max(0,-(s*o+a)),f=d>0?o:Math.min(Math.max(-o,-l),o),p=-d*d+f*(f+2*l)+c);else f=s>0?-o:o,d=Math.max(0,-(s*f+a)),p=-d*d+f*(f+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(lD).addScaledVector(VS,f),p}intersectSphere(e,n){Mu.subVectors(e.center,this.origin);const r=Mu.dot(this.direction),i=Mu.dot(Mu)-r*r,o=e.radius*e.radius;if(i>o)return null;const s=Math.sqrt(o-i),a=r-s,l=r+s;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,o,s,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,f=this.origin;return c>=0?(r=(e.min.x-f.x)*c,i=(e.max.x-f.x)*c):(r=(e.max.x-f.x)*c,i=(e.min.x-f.x)*c),u>=0?(o=(e.min.y-f.y)*u,s=(e.max.y-f.y)*u):(o=(e.max.y-f.y)*u,s=(e.min.y-f.y)*u),r>s||o>i||((o>r||isNaN(r))&&(r=o),(s<i||isNaN(i))&&(i=s),d>=0?(a=(e.min.z-f.z)*d,l=(e.max.z-f.z)*d):(a=(e.max.z-f.z)*d,l=(e.min.z-f.z)*d),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Mu)!==null}intersectTriangle(e,n,r,i,o){cD.subVectors(n,e),WS.subVectors(r,e),uD.crossVectors(cD,WS);let s=this.direction.dot(uD),a;if(s>0){if(i)return null;a=1}else if(s<0)a=-1,s=-s;else return null;Jd.subVectors(this.origin,e);const l=a*this.direction.dot(WS.crossVectors(Jd,WS));if(l<0)return null;const c=a*this.direction.dot(cD.cross(Jd));if(c<0||l+c>s)return null;const u=-a*Jd.dot(uD);return u<0?null:this.at(u/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ci{constructor(e,n,r,i,o,s,a,l,c,u,d,f,p,b,v,m){Ci.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,s,a,l,c,u,d,f,p,b,v,m)}set(e,n,r,i,o,s,a,l,c,u,d,f,p,b,v,m){const g=this.elements;return g[0]=e,g[4]=n,g[8]=r,g[12]=i,g[1]=o,g[5]=s,g[9]=a,g[13]=l,g[2]=c,g[6]=u,g[10]=d,g[14]=f,g[3]=p,g[7]=b,g[11]=v,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ci().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/ng.setFromMatrixColumn(e,0).length(),o=1/ng.setFromMatrixColumn(e,1).length(),s=1/ng.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*s,n[9]=r[9]*s,n[10]=r[10]*s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,o=e.z,s=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(o),d=Math.sin(o);if(e.order==="XYZ"){const f=s*u,p=s*d,b=a*u,v=a*d;n[0]=l*u,n[4]=-l*d,n[8]=c,n[1]=p+b*c,n[5]=f-v*c,n[9]=-a*l,n[2]=v-f*c,n[6]=b+p*c,n[10]=s*l}else if(e.order==="YXZ"){const f=l*u,p=l*d,b=c*u,v=c*d;n[0]=f+v*a,n[4]=b*a-p,n[8]=s*c,n[1]=s*d,n[5]=s*u,n[9]=-a,n[2]=p*a-b,n[6]=v+f*a,n[10]=s*l}else if(e.order==="ZXY"){const f=l*u,p=l*d,b=c*u,v=c*d;n[0]=f-v*a,n[4]=-s*d,n[8]=b+p*a,n[1]=p+b*a,n[5]=s*u,n[9]=v-f*a,n[2]=-s*c,n[6]=a,n[10]=s*l}else if(e.order==="ZYX"){const f=s*u,p=s*d,b=a*u,v=a*d;n[0]=l*u,n[4]=b*c-p,n[8]=f*c+v,n[1]=l*d,n[5]=v*c+f,n[9]=p*c-b,n[2]=-c,n[6]=a*l,n[10]=s*l}else if(e.order==="YZX"){const f=s*l,p=s*c,b=a*l,v=a*c;n[0]=l*u,n[4]=v-f*d,n[8]=b*d+p,n[1]=d,n[5]=s*u,n[9]=-a*u,n[2]=-c*u,n[6]=p*d+b,n[10]=f-v*d}else if(e.order==="XZY"){const f=s*l,p=s*c,b=a*l,v=a*c;n[0]=l*u,n[4]=-d,n[8]=c*u,n[1]=f*d+v,n[5]=s*u,n[9]=p*d-b,n[2]=b*d-p,n[6]=a*u,n[10]=v*d+f}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(X$e,e,Q$e)}lookAt(e,n,r){const i=this.elements;return ya.subVectors(e,n),ya.lengthSq()===0&&(ya.z=1),ya.normalize(),ef.crossVectors(r,ya),ef.lengthSq()===0&&(Math.abs(r.z)===1?ya.x+=1e-4:ya.z+=1e-4,ya.normalize(),ef.crossVectors(r,ya)),ef.normalize(),$S.crossVectors(ya,ef),i[0]=ef.x,i[4]=$S.x,i[8]=ya.x,i[1]=ef.y,i[5]=$S.y,i[9]=ya.y,i[2]=ef.z,i[6]=$S.z,i[10]=ya.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,s=r[0],a=r[4],l=r[8],c=r[12],u=r[1],d=r[5],f=r[9],p=r[13],b=r[2],v=r[6],m=r[10],g=r[14],x=r[3],w=r[7],S=r[11],P=r[15],I=i[0],M=i[4],D=i[8],E=i[12],_=i[1],A=i[5],R=i[9],F=i[13],L=i[2],N=i[6],U=i[10],$=i[14],B=i[3],H=i[7],q=i[11],z=i[15];return o[0]=s*I+a*_+l*L+c*B,o[4]=s*M+a*A+l*N+c*H,o[8]=s*D+a*R+l*U+c*q,o[12]=s*E+a*F+l*$+c*z,o[1]=u*I+d*_+f*L+p*B,o[5]=u*M+d*A+f*N+p*H,o[9]=u*D+d*R+f*U+p*q,o[13]=u*E+d*F+f*$+p*z,o[2]=b*I+v*_+m*L+g*B,o[6]=b*M+v*A+m*N+g*H,o[10]=b*D+v*R+m*U+g*q,o[14]=b*E+v*F+m*$+g*z,o[3]=x*I+w*_+S*L+P*B,o[7]=x*M+w*A+S*N+P*H,o[11]=x*D+w*R+S*U+P*q,o[15]=x*E+w*F+S*$+P*z,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],o=e[12],s=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],f=e[10],p=e[14],b=e[3],v=e[7],m=e[11],g=e[15];return b*(+o*l*d-i*c*d-o*a*f+r*c*f+i*a*p-r*l*p)+v*(+n*l*p-n*c*f+o*s*f-i*s*p+i*c*u-o*l*u)+m*(+n*c*d-n*a*p-o*s*d+r*s*p+o*a*u-r*c*u)+g*(-i*a*u-n*l*d+n*a*f+i*s*d-r*s*f+r*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],p=e[11],b=e[12],v=e[13],m=e[14],g=e[15],x=d*m*c-v*f*c+v*l*p-a*m*p-d*l*g+a*f*g,w=b*f*c-u*m*c-b*l*p+s*m*p+u*l*g-s*f*g,S=u*v*c-b*d*c+b*a*p-s*v*p-u*a*g+s*d*g,P=b*d*l-u*v*l-b*a*f+s*v*f+u*a*m-s*d*m,I=n*x+r*w+i*S+o*P;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/I;return e[0]=x*M,e[1]=(v*f*o-d*m*o-v*i*p+r*m*p+d*i*g-r*f*g)*M,e[2]=(a*m*o-v*l*o+v*i*c-r*m*c-a*i*g+r*l*g)*M,e[3]=(d*l*o-a*f*o-d*i*c+r*f*c+a*i*p-r*l*p)*M,e[4]=w*M,e[5]=(u*m*o-b*f*o+b*i*p-n*m*p-u*i*g+n*f*g)*M,e[6]=(b*l*o-s*m*o-b*i*c+n*m*c+s*i*g-n*l*g)*M,e[7]=(s*f*o-u*l*o+u*i*c-n*f*c-s*i*p+n*l*p)*M,e[8]=S*M,e[9]=(b*d*o-u*v*o-b*r*p+n*v*p+u*r*g-n*d*g)*M,e[10]=(s*v*o-b*a*o+b*r*c-n*v*c-s*r*g+n*a*g)*M,e[11]=(u*a*o-s*d*o-u*r*c+n*d*c+s*r*p-n*a*p)*M,e[12]=P*M,e[13]=(u*v*i-b*d*i+b*r*f-n*v*f-u*r*m+n*d*m)*M,e[14]=(b*a*i-s*v*i-b*r*l+n*v*l+s*r*m-n*a*m)*M,e[15]=(s*d*i-u*a*i+u*r*l-n*d*l-s*r*f+n*a*f)*M,this}scale(e){const n=this.elements,r=e.x,i=e.y,o=e.z;return n[0]*=r,n[4]*=i,n[8]*=o,n[1]*=r,n[5]*=i,n[9]*=o,n[2]*=r,n[6]*=i,n[10]*=o,n[3]*=r,n[7]*=i,n[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),o=1-r,s=e.x,a=e.y,l=e.z,c=o*s,u=o*a;return this.set(c*s+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*s,0,c*l-i*a,u*l+i*s,o*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,o,s){return this.set(1,r,o,0,e,1,s,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,o=n._x,s=n._y,a=n._z,l=n._w,c=o+o,u=s+s,d=a+a,f=o*c,p=o*u,b=o*d,v=s*u,m=s*d,g=a*d,x=l*c,w=l*u,S=l*d,P=r.x,I=r.y,M=r.z;return i[0]=(1-(v+g))*P,i[1]=(p+S)*P,i[2]=(b-w)*P,i[3]=0,i[4]=(p-S)*I,i[5]=(1-(f+g))*I,i[6]=(m+x)*I,i[7]=0,i[8]=(b+w)*M,i[9]=(m-x)*M,i[10]=(1-(f+v))*M,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let o=ng.set(i[0],i[1],i[2]).length();const s=ng.set(i[4],i[5],i[6]).length(),a=ng.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],$l.copy(this);const c=1/o,u=1/s,d=1/a;return $l.elements[0]*=c,$l.elements[1]*=c,$l.elements[2]*=c,$l.elements[4]*=u,$l.elements[5]*=u,$l.elements[6]*=u,$l.elements[8]*=d,$l.elements[9]*=d,$l.elements[10]*=d,n.setFromRotationMatrix($l),r.x=o,r.y=s,r.z=a,this}makePerspective(e,n,r,i,o,s,a=Xu){const l=this.elements,c=2*o/(n-e),u=2*o/(r-i),d=(n+e)/(n-e),f=(r+i)/(r-i);let p,b;if(a===Xu)p=-(s+o)/(s-o),b=-2*s*o/(s-o);else if(a===qC)p=-s/(s-o),b=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=b,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,o,s,a=Xu){const l=this.elements,c=1/(n-e),u=1/(r-i),d=1/(s-o),f=(n+e)*c,p=(r+i)*u;let b,v;if(a===Xu)b=(s+o)*d,v=-2*d;else if(a===qC)b=o*d,v=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=v,l[14]=-b,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const ng=new He,$l=new Ci,X$e=new He(0,0,0),Q$e=new He(1,1,1),ef=new He,$S=new He,ya=new He,d9=new Ci,f9=new Gw;class au{constructor(e=0,n=0,r=0,i=au.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,o=i[0],s=i[4],a=i[8],l=i[1],c=i[5],u=i[9],d=i[2],f=i[6],p=i[10];switch(n){case"XYZ":this._y=Math.asin(dr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-dr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,o),this._z=0);break;case"ZXY":this._x=Math.asin(dr(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-dr(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-s,c));break;case"YZX":this._z=Math.asin(dr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,o)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-dr(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return d9.makeRotationFromQuaternion(e),this.setFromRotationMatrix(d9,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return f9.setFromEuler(this),this.setFromQuaternion(f9,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}au.DEFAULT_ORDER="XYZ";class FL{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Z$e=0;const h9=new He,rg=new Gw,Pu=new Ci,HS=new He,my=new He,J$e=new He,e7e=new Gw,p9=new He(1,0,0),m9=new He(0,1,0),g9=new He(0,0,1),v9={type:"added"},t7e={type:"removed"},ig={type:"childadded",child:null},dD={type:"childremoved",child:null};class hs extends x0{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Z$e++}),this.uuid=b0(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=hs.DEFAULT_UP.clone();const e=new He,n=new au,r=new Gw,i=new He(1,1,1);function o(){r.setFromEuler(n,!1)}function s(){n.setFromQuaternion(r,void 0,!1)}n._onChange(o),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ci},normalMatrix:{value:new Jn}}),this.matrix=new Ci,this.matrixWorld=new Ci,this.matrixAutoUpdate=hs.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=hs.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new FL,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return rg.setFromAxisAngle(e,n),this.quaternion.multiply(rg),this}rotateOnWorldAxis(e,n){return rg.setFromAxisAngle(e,n),this.quaternion.premultiply(rg),this}rotateX(e){return this.rotateOnAxis(p9,e)}rotateY(e){return this.rotateOnAxis(m9,e)}rotateZ(e){return this.rotateOnAxis(g9,e)}translateOnAxis(e,n){return h9.copy(e).applyQuaternion(this.quaternion),this.position.add(h9.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(p9,e)}translateY(e){return this.translateOnAxis(m9,e)}translateZ(e){return this.translateOnAxis(g9,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Pu.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?HS.copy(e):HS.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),my.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Pu.lookAt(my,HS,this.up):Pu.lookAt(HS,my,this.up),this.quaternion.setFromRotationMatrix(Pu),i&&(Pu.extractRotation(i.matrixWorld),rg.setFromRotationMatrix(Pu),this.quaternion.premultiply(rg.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(v9),ig.child=e,this.dispatchEvent(ig),ig.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(t7e),dD.child=e,this.dispatchEvent(dD),dD.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Pu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Pu.multiply(e.parent.matrixWorld)),e.applyMatrix4(Pu),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(v9),ig.child=e,this.dispatchEvent(ig),ig.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectByProperty(e,n);if(s!==void 0)return s}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let o=0,s=i.length;o<s;o++)i[o].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(my,e,J$e),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(my,e7e,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const i=this.children;for(let o=0,s=i.length;o<s;o++)i[o].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function o(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];o(e.shapes,d)}else o(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(o(e.materials,this.material[l]));i.material=a}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(o(e.animations,l))}}if(n){const a=s(e.geometries),l=s(e.materials),c=s(e.textures),u=s(e.images),d=s(e.shapes),f=s(e.skeletons),p=s(e.animations),b=s(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),f.length>0&&(r.skeletons=f),p.length>0&&(r.animations=p),b.length>0&&(r.nodes=b)}return r.object=i,r;function s(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}hs.DEFAULT_UP=new He(0,1,0);hs.DEFAULT_MATRIX_AUTO_UPDATE=!0;hs.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Hl=new He,Du=new He,fD=new He,Ru=new He,og=new He,sg=new He,y9=new He,hD=new He,pD=new He,mD=new He,gD=new $i,vD=new $i,yD=new $i;class Zl{constructor(e=new He,n=new He,r=new He){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),Hl.subVectors(e,n),i.cross(Hl);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,n,r,i,o){Hl.subVectors(i,n),Du.subVectors(r,n),fD.subVectors(e,n);const s=Hl.dot(Hl),a=Hl.dot(Du),l=Hl.dot(fD),c=Du.dot(Du),u=Du.dot(fD),d=s*c-a*a;if(d===0)return o.set(0,0,0),null;const f=1/d,p=(c*l-a*u)*f,b=(s*u-a*l)*f;return o.set(1-p-b,b,p)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Ru)===null?!1:Ru.x>=0&&Ru.y>=0&&Ru.x+Ru.y<=1}static getInterpolation(e,n,r,i,o,s,a,l){return this.getBarycoord(e,n,r,i,Ru)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,Ru.x),l.addScaledVector(s,Ru.y),l.addScaledVector(a,Ru.z),l)}static getInterpolatedAttribute(e,n,r,i,o,s){return gD.setScalar(0),vD.setScalar(0),yD.setScalar(0),gD.fromBufferAttribute(e,n),vD.fromBufferAttribute(e,r),yD.fromBufferAttribute(e,i),s.setScalar(0),s.addScaledVector(gD,o.x),s.addScaledVector(vD,o.y),s.addScaledVector(yD,o.z),s}static isFrontFacing(e,n,r,i){return Hl.subVectors(r,n),Du.subVectors(e,n),Hl.cross(Du).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Hl.subVectors(this.c,this.b),Du.subVectors(this.a,this.b),Hl.cross(Du).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Zl.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Zl.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,o){return Zl.getInterpolation(e,this.a,this.b,this.c,n,r,i,o)}containsPoint(e){return Zl.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Zl.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,o=this.c;let s,a;og.subVectors(i,r),sg.subVectors(o,r),hD.subVectors(e,r);const l=og.dot(hD),c=sg.dot(hD);if(l<=0&&c<=0)return n.copy(r);pD.subVectors(e,i);const u=og.dot(pD),d=sg.dot(pD);if(u>=0&&d<=u)return n.copy(i);const f=l*d-u*c;if(f<=0&&l>=0&&u<=0)return s=l/(l-u),n.copy(r).addScaledVector(og,s);mD.subVectors(e,o);const p=og.dot(mD),b=sg.dot(mD);if(b>=0&&p<=b)return n.copy(o);const v=p*c-l*b;if(v<=0&&c>=0&&b<=0)return a=c/(c-b),n.copy(r).addScaledVector(sg,a);const m=u*b-p*d;if(m<=0&&d-u>=0&&p-b>=0)return y9.subVectors(o,i),a=(d-u)/(d-u+(p-b)),n.copy(i).addScaledVector(y9,a);const g=1/(m+v+f);return s=v*g,a=f*g,n.copy(r).addScaledVector(og,s).addScaledVector(sg,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const rte={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},tf={h:0,s:0,l:0},GS={h:0,s:0,l:0};function xD(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class wn{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=rl){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Rr.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=Rr.workingColorSpace){return this.r=e,this.g=n,this.b=r,Rr.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=Rr.workingColorSpace){if(e=B$e(e,1),n=dr(n,0,1),r=dr(r,0,1),n===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,s=2*r-o;this.r=xD(s,o,e+1/3),this.g=xD(s,o,e),this.b=xD(s,o,e-1/3)}return Rr.toWorkingColorSpace(this,i),this}setStyle(e,n=rl){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const s=i[1],a=i[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,n);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,n);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=i[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,n);if(s===6)return this.setHex(parseInt(o,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=rl){const r=rte[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ad(e.r),this.g=ad(e.g),this.b=ad(e.b),this}copyLinearToSRGB(e){return this.r=hv(e.r),this.g=hv(e.g),this.b=hv(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=rl){return Rr.fromWorkingColorSpace(is.copy(this),e),Math.round(dr(is.r*255,0,255))*65536+Math.round(dr(is.g*255,0,255))*256+Math.round(dr(is.b*255,0,255))}getHexString(e=rl){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Rr.workingColorSpace){Rr.fromWorkingColorSpace(is.copy(this),n);const r=is.r,i=is.g,o=is.b,s=Math.max(r,i,o),a=Math.min(r,i,o);let l,c;const u=(a+s)/2;if(a===s)l=0,c=0;else{const d=s-a;switch(c=u<=.5?d/(s+a):d/(2-s-a),s){case r:l=(i-o)/d+(i<o?6:0);break;case i:l=(o-r)/d+2;break;case o:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=Rr.workingColorSpace){return Rr.fromWorkingColorSpace(is.copy(this),n),e.r=is.r,e.g=is.g,e.b=is.b,e}getStyle(e=rl){Rr.fromWorkingColorSpace(is.copy(this),e);const n=is.r,r=is.g,i=is.b;return e!==rl?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(tf),this.setHSL(tf.h+e,tf.s+n,tf.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(tf),e.getHSL(GS);const r=nD(tf.h,GS.h,n),i=nD(tf.s,GS.s,n),o=nD(tf.l,GS.l,n);return this.setHSL(r,i,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,o=e.elements;return this.r=o[0]*n+o[3]*r+o[6]*i,this.g=o[1]*n+o[4]*r+o[7]*i,this.b=o[2]*n+o[5]*r+o[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const is=new wn;wn.NAMES=rte;let n7e=0;class gm extends x0{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:n7e++}),this.uuid=b0(),this.name="",this.type="Material",this.blending=fv,this.side=Sd,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Ek,this.blendDst=Ck,this.blendEquation=rp,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new wn(0,0,0),this.blendAlpha=0,this.depthFunc=qv,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=i9,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Qm,this.stencilZFail=Qm,this.stencilZPass=Qm,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==fv&&(r.blending=this.blending),this.side!==Sd&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==Ek&&(r.blendSrc=this.blendSrc),this.blendDst!==Ck&&(r.blendDst=this.blendDst),this.blendEquation!==rp&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==qv&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==i9&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Qm&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Qm&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Qm&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(o){const s=[];for(const a in o){const l=o[a];delete l.metadata,s.push(l)}return s}if(n){const o=i(e.textures),s=i(e.images);o.length>0&&(r.textures=o),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=n[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Ts extends gm{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new wn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new au,this.combine=Uee,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const no=new He,qS=new qt;let r7e=0;class nu{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:r7e++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=o9,this.updateRanges=[],this.gpuType=Yu,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)qS.fromBufferAttribute(this,n),qS.applyMatrix3(e),this.setXY(n,qS.x,qS.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)no.fromBufferAttribute(this,n),no.applyMatrix3(e),this.setXYZ(n,no.x,no.y,no.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)no.fromBufferAttribute(this,n),no.applyMatrix4(e),this.setXYZ(n,no.x,no.y,no.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)no.fromBufferAttribute(this,n),no.applyNormalMatrix(e),this.setXYZ(n,no.x,no.y,no.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)no.fromBufferAttribute(this,n),no.transformDirection(e),this.setXYZ(n,no.x,no.y,no.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=fy(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Ks(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=fy(n,this.array)),n}setX(e,n){return this.normalized&&(n=Ks(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=fy(n,this.array)),n}setY(e,n){return this.normalized&&(n=Ks(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=fy(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Ks(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=fy(n,this.array)),n}setW(e,n){return this.normalized&&(n=Ks(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Ks(n,this.array),r=Ks(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Ks(n,this.array),r=Ks(r,this.array),i=Ks(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,o){return e*=this.itemSize,this.normalized&&(n=Ks(n,this.array),r=Ks(r,this.array),i=Ks(i,this.array),o=Ks(o,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==o9&&(e.usage=this.usage),e}}class ite extends nu{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class ote extends nu{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class ni extends nu{constructor(e,n,r){super(new Float32Array(e),n,r)}}let i7e=0;const Ja=new Ci,bD=new hs,ag=new He,xa=new qw,gy=new qw,Ao=new He;class fa extends x0{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:i7e++}),this.uuid=b0(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(ete(e)?ote:ite)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new Jn().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ja.makeRotationFromQuaternion(e),this.applyMatrix4(Ja),this}rotateX(e){return Ja.makeRotationX(e),this.applyMatrix4(Ja),this}rotateY(e){return Ja.makeRotationY(e),this.applyMatrix4(Ja),this}rotateZ(e){return Ja.makeRotationZ(e),this.applyMatrix4(Ja),this}translate(e,n,r){return Ja.makeTranslation(e,n,r),this.applyMatrix4(Ja),this}scale(e,n,r){return Ja.makeScale(e,n,r),this.applyMatrix4(Ja),this}lookAt(e){return bD.lookAt(e),bD.updateMatrix(),this.applyMatrix4(bD.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ag).negate(),this.translate(ag.x,ag.y,ag.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const r=[];for(let i=0,o=e.length;i<o;i++){const s=e[i];r.push(s.x,s.y,s.z||0)}this.setAttribute("position",new ni(r,3))}else{const r=Math.min(e.length,n.count);for(let i=0;i<r;i++){const o=e[i];n.setXYZ(i,o.x,o.y,o.z||0)}e.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new qw);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new He(-1/0,-1/0,-1/0),new He(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const o=n[r];xa.setFromBufferAttribute(o),this.morphTargetsRelative?(Ao.addVectors(this.boundingBox.min,xa.min),this.boundingBox.expandByPoint(Ao),Ao.addVectors(this.boundingBox.max,xa.max),this.boundingBox.expandByPoint(Ao)):(this.boundingBox.expandByPoint(xa.min),this.boundingBox.expandByPoint(xa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new kL);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new He,1/0);return}if(e){const r=this.boundingSphere.center;if(xa.setFromBufferAttribute(e),n)for(let o=0,s=n.length;o<s;o++){const a=n[o];gy.setFromBufferAttribute(a),this.morphTargetsRelative?(Ao.addVectors(xa.min,gy.min),xa.expandByPoint(Ao),Ao.addVectors(xa.max,gy.max),xa.expandByPoint(Ao)):(xa.expandByPoint(gy.min),xa.expandByPoint(gy.max))}xa.getCenter(r);let i=0;for(let o=0,s=e.count;o<s;o++)Ao.fromBufferAttribute(e,o),i=Math.max(i,r.distanceToSquared(Ao));if(n)for(let o=0,s=n.length;o<s;o++){const a=n[o],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Ao.fromBufferAttribute(a,c),l&&(ag.fromBufferAttribute(e,c),Ao.add(ag)),i=Math.max(i,r.distanceToSquared(Ao))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,i=n.normal,o=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new nu(new Float32Array(4*r.count),4));const s=this.getAttribute("tangent"),a=[],l=[];for(let D=0;D<r.count;D++)a[D]=new He,l[D]=new He;const c=new He,u=new He,d=new He,f=new qt,p=new qt,b=new qt,v=new He,m=new He;function g(D,E,_){c.fromBufferAttribute(r,D),u.fromBufferAttribute(r,E),d.fromBufferAttribute(r,_),f.fromBufferAttribute(o,D),p.fromBufferAttribute(o,E),b.fromBufferAttribute(o,_),u.sub(c),d.sub(c),p.sub(f),b.sub(f);const A=1/(p.x*b.y-b.x*p.y);isFinite(A)&&(v.copy(u).multiplyScalar(b.y).addScaledVector(d,-p.y).multiplyScalar(A),m.copy(d).multiplyScalar(p.x).addScaledVector(u,-b.x).multiplyScalar(A),a[D].add(v),a[E].add(v),a[_].add(v),l[D].add(m),l[E].add(m),l[_].add(m))}let x=this.groups;x.length===0&&(x=[{start:0,count:e.count}]);for(let D=0,E=x.length;D<E;++D){const _=x[D],A=_.start,R=_.count;for(let F=A,L=A+R;F<L;F+=3)g(e.getX(F+0),e.getX(F+1),e.getX(F+2))}const w=new He,S=new He,P=new He,I=new He;function M(D){P.fromBufferAttribute(i,D),I.copy(P);const E=a[D];w.copy(E),w.sub(P.multiplyScalar(P.dot(E))).normalize(),S.crossVectors(I,E);const A=S.dot(l[D])<0?-1:1;s.setXYZW(D,w.x,w.y,w.z,A)}for(let D=0,E=x.length;D<E;++D){const _=x[D],A=_.start,R=_.count;for(let F=A,L=A+R;F<L;F+=3)M(e.getX(F+0)),M(e.getX(F+1)),M(e.getX(F+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new nu(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let f=0,p=r.count;f<p;f++)r.setXYZ(f,0,0,0);const i=new He,o=new He,s=new He,a=new He,l=new He,c=new He,u=new He,d=new He;if(e)for(let f=0,p=e.count;f<p;f+=3){const b=e.getX(f+0),v=e.getX(f+1),m=e.getX(f+2);i.fromBufferAttribute(n,b),o.fromBufferAttribute(n,v),s.fromBufferAttribute(n,m),u.subVectors(s,o),d.subVectors(i,o),u.cross(d),a.fromBufferAttribute(r,b),l.fromBufferAttribute(r,v),c.fromBufferAttribute(r,m),a.add(u),l.add(u),c.add(u),r.setXYZ(b,a.x,a.y,a.z),r.setXYZ(v,l.x,l.y,l.z),r.setXYZ(m,c.x,c.y,c.z)}else for(let f=0,p=n.count;f<p;f+=3)i.fromBufferAttribute(n,f+0),o.fromBufferAttribute(n,f+1),s.fromBufferAttribute(n,f+2),u.subVectors(s,o),d.subVectors(i,o),u.cross(d),r.setXYZ(f+0,u.x,u.y,u.z),r.setXYZ(f+1,u.x,u.y,u.z),r.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)Ao.fromBufferAttribute(e,n),Ao.normalize(),e.setXYZ(n,Ao.x,Ao.y,Ao.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,f=new c.constructor(l.length*u);let p=0,b=0;for(let v=0,m=l.length;v<m;v++){a.isInterleavedBufferAttribute?p=l[v]*a.data.stride+a.offset:p=l[v]*u;for(let g=0;g<u;g++)f[b++]=c[p++]}return new nu(f,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new fa,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);n.setAttribute(a,c)}const o=this.morphAttributes;for(const a in o){const l=[],c=o[a];for(let u=0,d=c.length;u<d;u++){const f=c[u],p=e(f,r);l.push(p)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,l=s.length;a<l;a++){const c=s[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let o=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,f=c.length;d<f;d++){const p=c[d];u.push(p.toJSON(e.data))}u.length>0&&(i[l]=u,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone());const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(n))}const o=e.morphAttributes;for(const c in o){const u=[],d=o[c];for(let f=0,p=d.length;f<p;f++)u.push(d[f].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let c=0,u=s.length;c<u;c++){const d=s[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const x9=new Ci,Lh=new nte,KS=new kL,b9=new He,YS=new He,XS=new He,QS=new He,wD=new He,ZS=new He,w9=new He,JS=new He;class Mn extends hs{constructor(e=new fa,n=new Ts){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,o=r.morphAttributes.position,s=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(o&&a){ZS.set(0,0,0);for(let l=0,c=o.length;l<c;l++){const u=a[l],d=o[l];u!==0&&(wD.fromBufferAttribute(d,e),s?ZS.addScaledVector(wD,u):ZS.addScaledVector(wD.sub(n),u))}n.add(ZS)}return n}raycast(e,n){const r=this.geometry,i=this.material,o=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),KS.copy(r.boundingSphere),KS.applyMatrix4(o),Lh.copy(e.ray).recast(e.near),!(KS.containsPoint(Lh.origin)===!1&&(Lh.intersectSphere(KS,b9)===null||Lh.origin.distanceToSquared(b9)>Cu(e.far-e.near,2)))&&(x9.copy(o).invert(),Lh.copy(e.ray).applyMatrix4(x9),!(r.boundingBox!==null&&Lh.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,Lh)))}_computeIntersections(e,n,r){let i;const o=this.geometry,s=this.material,a=o.index,l=o.attributes.position,c=o.attributes.uv,u=o.attributes.uv1,d=o.attributes.normal,f=o.groups,p=o.drawRange;if(a!==null)if(Array.isArray(s))for(let b=0,v=f.length;b<v;b++){const m=f[b],g=s[m.materialIndex],x=Math.max(m.start,p.start),w=Math.min(a.count,Math.min(m.start+m.count,p.start+p.count));for(let S=x,P=w;S<P;S+=3){const I=a.getX(S),M=a.getX(S+1),D=a.getX(S+2);i=e_(this,g,e,r,c,u,d,I,M,D),i&&(i.faceIndex=Math.floor(S/3),i.face.materialIndex=m.materialIndex,n.push(i))}}else{const b=Math.max(0,p.start),v=Math.min(a.count,p.start+p.count);for(let m=b,g=v;m<g;m+=3){const x=a.getX(m),w=a.getX(m+1),S=a.getX(m+2);i=e_(this,s,e,r,c,u,d,x,w,S),i&&(i.faceIndex=Math.floor(m/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(s))for(let b=0,v=f.length;b<v;b++){const m=f[b],g=s[m.materialIndex],x=Math.max(m.start,p.start),w=Math.min(l.count,Math.min(m.start+m.count,p.start+p.count));for(let S=x,P=w;S<P;S+=3){const I=S,M=S+1,D=S+2;i=e_(this,g,e,r,c,u,d,I,M,D),i&&(i.faceIndex=Math.floor(S/3),i.face.materialIndex=m.materialIndex,n.push(i))}}else{const b=Math.max(0,p.start),v=Math.min(l.count,p.start+p.count);for(let m=b,g=v;m<g;m+=3){const x=m,w=m+1,S=m+2;i=e_(this,s,e,r,c,u,d,x,w,S),i&&(i.faceIndex=Math.floor(m/3),n.push(i))}}}}function o7e(t,e,n,r,i,o,s,a){let l;if(e.side===ca?l=r.intersectTriangle(s,o,i,!0,a):l=r.intersectTriangle(i,o,s,e.side===Sd,a),l===null)return null;JS.copy(a),JS.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(JS);return c<n.near||c>n.far?null:{distance:c,point:JS.clone(),object:t}}function e_(t,e,n,r,i,o,s,a,l,c){t.getVertexPosition(a,YS),t.getVertexPosition(l,XS),t.getVertexPosition(c,QS);const u=o7e(t,e,n,r,YS,XS,QS,w9);if(u){const d=new He;Zl.getBarycoord(w9,YS,XS,QS,d),i&&(u.uv=Zl.getInterpolatedAttribute(i,a,l,c,d,new qt)),o&&(u.uv1=Zl.getInterpolatedAttribute(o,a,l,c,d,new qt)),s&&(u.normal=Zl.getInterpolatedAttribute(s,a,l,c,d,new He),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new He,materialIndex:0};Zl.getNormal(YS,XS,QS,f.normal),u.face=f,u.barycoord=d}return u}class il extends fa{constructor(e=1,n=1,r=1,i=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:o,depthSegments:s};const a=this;i=Math.floor(i),o=Math.floor(o),s=Math.floor(s);const l=[],c=[],u=[],d=[];let f=0,p=0;b("z","y","x",-1,-1,r,n,e,s,o,0),b("z","y","x",1,-1,r,n,-e,s,o,1),b("x","z","y",1,1,e,r,n,i,s,2),b("x","z","y",1,-1,e,r,-n,i,s,3),b("x","y","z",1,-1,e,n,r,i,o,4),b("x","y","z",-1,-1,e,n,-r,i,o,5),this.setIndex(l),this.setAttribute("position",new ni(c,3)),this.setAttribute("normal",new ni(u,3)),this.setAttribute("uv",new ni(d,2));function b(v,m,g,x,w,S,P,I,M,D,E){const _=S/M,A=P/D,R=S/2,F=P/2,L=I/2,N=M+1,U=D+1;let $=0,B=0;const H=new He;for(let q=0;q<U;q++){const z=q*A-F;for(let G=0;G<N;G++){const K=G*_-R;H[v]=K*x,H[m]=z*w,H[g]=L,c.push(H.x,H.y,H.z),H[v]=0,H[m]=0,H[g]=I>0?1:-1,u.push(H.x,H.y,H.z),d.push(G/M),d.push(1-q/D),$+=1}}for(let q=0;q<D;q++)for(let z=0;z<M;z++){const G=f+z+N*q,K=f+z+N*(q+1),Z=f+(z+1)+N*(q+1),ee=f+(z+1)+N*q;l.push(G,K,ee),l.push(K,Z,ee),B+=6}a.addGroup(p,B,E),p+=B,f+=$}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new il(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Qv(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function _s(t){const e={};for(let n=0;n<t.length;n++){const r=Qv(t[n]);for(const i in r)e[i]=r[i]}return e}function s7e(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function ste(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Rr.workingColorSpace}const a7e={clone:Qv,merge:_s};var l7e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,c7e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class rh extends gm{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=l7e,this.fragmentShader=c7e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Qv(e.uniforms),this.uniformsGroups=s7e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?n.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?n.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?n.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?n.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?n.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?n.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?n.uniforms[i]={type:"m4",value:s.toArray()}:n.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class ate extends hs{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ci,this.projectionMatrix=new Ci,this.projectionMatrixInverse=new Ci,this.coordinateSystem=Xu}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const nf=new He,S9=new qt,_9=new qt;class cl extends ate{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=lF*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(tD*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return lF*2*Math.atan(Math.tan(tD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){nf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(nf.x,nf.y).multiplyScalar(-e/nf.z),nf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(nf.x,nf.y).multiplyScalar(-e/nf.z)}getViewSize(e,n){return this.getViewBounds(e,S9,_9),n.subVectors(_9,S9)}setViewOffset(e,n,r,i,o,s){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(tD*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,o=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,c=s.fullHeight;o+=s.offsetX*i/l,n-=s.offsetY*r/c,i*=s.width/l,r*=s.height/c}const a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const lg=-90,cg=1;class u7e extends hs{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new cl(lg,cg,e,n);i.layers=this.layers,this.add(i);const o=new cl(lg,cg,e,n);o.layers=this.layers,this.add(o);const s=new cl(lg,cg,e,n);s.layers=this.layers,this.add(s);const a=new cl(lg,cg,e,n);a.layers=this.layers,this.add(a);const l=new cl(lg,cg,e,n);l.layers=this.layers,this.add(l);const c=new cl(lg,cg,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,o,s,a,l]=n;for(const c of n)this.remove(c);if(e===Xu)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===qC)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,s,a,l,c,u]=this.children,d=e.getRenderTarget(),f=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),b=e.xr.enabled;e.xr.enabled=!1;const v=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,o),e.setRenderTarget(r,1,i),e.render(n,s),e.setRenderTarget(r,2,i),e.render(n,a),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,c),r.texture.generateMipmaps=v,e.setRenderTarget(r,5,i),e.render(n,u),e.setRenderTarget(d,f,p),e.xr.enabled=b,r.texture.needsPMREMUpdate=!0}}class lte extends Ns{constructor(e=[],n=Kv,r,i,o,s,a,l,c,u){super(e,n,r,i,o,s,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class d7e extends nm{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new lte(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:nc}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new il(5,5,5),o=new rh({name:"CubemapFromEquirect",uniforms:Qv(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:ca,blending:Hf});o.uniforms.tEquirect.value=n;const s=new Mn(i,o),a=n.minFilter;return n.minFilter===Mf&&(n.minFilter=nc),new u7e(1,10,this).update(e,s),n.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,n=!0,r=!0,i=!0){const o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(n,r,i);e.setRenderTarget(o)}}class Yl extends hs{constructor(){super(),this.isGroup=!0,this.type="Group"}}const f7e={type:"move"};class SD{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Yl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Yl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new He,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new He),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Yl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new He,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new He),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,o=null,s=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){s=!0;for(const v of e.hand.values()){const m=n.getJointPose(v,r),g=this._getHandJoint(c,v);m!==null&&(g.matrix.fromArray(m.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=m.radius),g.visible=m!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],f=u.position.distanceTo(d.position),p=.02,b=.005;c.inputState.pinching&&f>p+b?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=p-b&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(o=n.getPose(e.gripSpace,r),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&o!==null&&(i=o),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(f7e)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=o!==null),c!==null&&(c.visible=s!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new Yl;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}let h7e=class extends hs{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new au,this.environmentIntensity=1,this.environmentRotation=new au,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}};const _D=new He,p7e=new He,m7e=new Jn;class Xh{constructor(e=new He(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=_D.subVectors(r,n).cross(p7e.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(_D),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:n.copy(e.start).addScaledVector(r,o)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||m7e.getNormalMatrix(e),i=this.coplanarPoint(_D).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Bh=new kL,t_=new He;class OL{constructor(e=new Xh,n=new Xh,r=new Xh,i=new Xh,o=new Xh,s=new Xh){this.planes=[e,n,r,i,o,s]}set(e,n,r,i,o,s){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(o),a[5].copy(s),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=Xu){const r=this.planes,i=e.elements,o=i[0],s=i[1],a=i[2],l=i[3],c=i[4],u=i[5],d=i[6],f=i[7],p=i[8],b=i[9],v=i[10],m=i[11],g=i[12],x=i[13],w=i[14],S=i[15];if(r[0].setComponents(l-o,f-c,m-p,S-g).normalize(),r[1].setComponents(l+o,f+c,m+p,S+g).normalize(),r[2].setComponents(l+s,f+u,m+b,S+x).normalize(),r[3].setComponents(l-s,f-u,m-b,S-x).normalize(),r[4].setComponents(l-a,f-d,m-v,S-w).normalize(),n===Xu)r[5].setComponents(l+a,f+d,m+v,S+w).normalize();else if(n===qC)r[5].setComponents(a,d,v,w).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Bh.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Bh.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Bh)}intersectsSprite(e){return Bh.center.set(0,0,0),Bh.radius=.7071067811865476,Bh.applyMatrix4(e.matrixWorld),this.intersectsSphere(Bh)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let o=0;o<6;o++)if(n[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(t_.x=i.normal.x>0?e.max.x:e.min.x,t_.y=i.normal.y>0?e.max.y:e.min.y,t_.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(t_)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class vy extends Ns{constructor(e,n,r,i,o,s,a,l,c){super(e,n,r,i,o,s,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class cte extends Ns{constructor(e,n,r=tm,i,o,s,a=lc,l=lc,c,u=Lb){if(u!==Lb&&u!==Bb)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,i,o,s,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new IL(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class du{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),o=0;n.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),o+=r.distanceTo(i),n.push(o),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n=null){const r=this.getLengths();let i=0;const o=r.length;let s;n?s=n:s=e*r[o-1];let a=0,l=o-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-s,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===s)return i/(o-1);const u=r[i],f=r[i+1]-u,p=(s-u)/f;return(i+p)/(o-1)}getTangent(e,n){let i=e-1e-4,o=e+1e-4;i<0&&(i=0),o>1&&(o=1);const s=this.getPoint(i),a=this.getPoint(o),l=n||(s.isVector2?new qt:new He);return l.copy(a).sub(s).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n=!1){const r=new He,i=[],o=[],s=[],a=new He,l=new Ci;for(let p=0;p<=e;p++){const b=p/e;i[p]=this.getTangentAt(b,new He)}o[0]=new He,s[0]=new He;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),d=Math.abs(i[0].y),f=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),d<=c&&(c=d,r.set(0,1,0)),f<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),o[0].crossVectors(i[0],a),s[0].crossVectors(i[0],o[0]);for(let p=1;p<=e;p++){if(o[p]=o[p-1].clone(),s[p]=s[p-1].clone(),a.crossVectors(i[p-1],i[p]),a.length()>Number.EPSILON){a.normalize();const b=Math.acos(dr(i[p-1].dot(i[p]),-1,1));o[p].applyMatrix4(l.makeRotationAxis(a,b))}s[p].crossVectors(i[p],o[p])}if(n===!0){let p=Math.acos(dr(o[0].dot(o[e]),-1,1));p/=e,i[0].dot(a.crossVectors(o[0],o[e]))>0&&(p=-p);for(let b=1;b<=e;b++)o[b].applyMatrix4(l.makeRotationAxis(i[b],p*b)),s[b].crossVectors(i[b],o[b])}return{tangents:i,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class NL extends du{constructor(e=0,n=0,r=1,i=1,o=0,s=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=l}getPoint(e,n=new qt){const r=n,i=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=i;for(;o>i;)o-=i;o<Number.EPSILON&&(s?o=0:o=i),this.aClockwise===!0&&!s&&(o===i?o=-i:o=o-i);const a=this.aStartAngle+e*o;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),f=l-this.aX,p=c-this.aY;l=f*u-p*d+this.aX,c=f*d+p*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class g7e extends NL{constructor(e,n,r,i,o,s){super(e,n,r,r,i,o,s),this.isArcCurve=!0,this.type="ArcCurve"}}function LL(){let t=0,e=0,n=0,r=0;function i(o,s,a,l){t=o,e=a,n=-3*o+3*s-2*a-l,r=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,c){i(s,a,c*(a-o),c*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,c,u,d){let f=(s-o)/c-(a-o)/(c+u)+(a-s)/u,p=(a-s)/u-(l-s)/(u+d)+(l-a)/d;f*=u,p*=u,i(s,a,f,p)},calc:function(o){const s=o*o,a=s*o;return t+e*o+n*s+r*a}}}const n_=new He,ED=new LL,CD=new LL,AD=new LL;class v7e extends du{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new He){const r=n,i=this.points,o=i.length,s=(o-(this.closed?0:1))*e;let a=Math.floor(s),l=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:l===0&&a===o-1&&(a=o-2,l=1);let c,u;this.closed||a>0?c=i[(a-1)%o]:(n_.subVectors(i[0],i[1]).add(i[0]),c=n_);const d=i[a%o],f=i[(a+1)%o];if(this.closed||a+2<o?u=i[(a+2)%o]:(n_.subVectors(i[o-1],i[o-2]).add(i[o-1]),u=n_),this.curveType==="centripetal"||this.curveType==="chordal"){const p=this.curveType==="chordal"?.5:.25;let b=Math.pow(c.distanceToSquared(d),p),v=Math.pow(d.distanceToSquared(f),p),m=Math.pow(f.distanceToSquared(u),p);v<1e-4&&(v=1),b<1e-4&&(b=v),m<1e-4&&(m=v),ED.initNonuniformCatmullRom(c.x,d.x,f.x,u.x,b,v,m),CD.initNonuniformCatmullRom(c.y,d.y,f.y,u.y,b,v,m),AD.initNonuniformCatmullRom(c.z,d.z,f.z,u.z,b,v,m)}else this.curveType==="catmullrom"&&(ED.initCatmullRom(c.x,d.x,f.x,u.x,this.tension),CD.initCatmullRom(c.y,d.y,f.y,u.y,this.tension),AD.initCatmullRom(c.z,d.z,f.z,u.z,this.tension));return r.set(ED.calc(l),CD.calc(l),AD.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new He().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function E9(t,e,n,r,i){const o=(r-e)*.5,s=(i-n)*.5,a=t*t,l=t*a;return(2*n-2*r+o+s)*l+(-3*n+3*r-2*o-s)*a+o*t+n}function y7e(t,e){const n=1-t;return n*n*e}function x7e(t,e){return 2*(1-t)*t*e}function b7e(t,e){return t*t*e}function Px(t,e,n,r){return y7e(t,e)+x7e(t,n)+b7e(t,r)}function w7e(t,e){const n=1-t;return n*n*n*e}function S7e(t,e){const n=1-t;return 3*n*n*t*e}function _7e(t,e){return 3*(1-t)*t*t*e}function E7e(t,e){return t*t*t*e}function Dx(t,e,n,r,i){return w7e(t,e)+S7e(t,n)+_7e(t,r)+E7e(t,i)}class ute extends du{constructor(e=new qt,n=new qt,r=new qt,i=new qt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new qt){const r=n,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return r.set(Dx(e,i.x,o.x,s.x,a.x),Dx(e,i.y,o.y,s.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class C7e extends du{constructor(e=new He,n=new He,r=new He,i=new He){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new He){const r=n,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return r.set(Dx(e,i.x,o.x,s.x,a.x),Dx(e,i.y,o.y,s.y,a.y),Dx(e,i.z,o.z,s.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class dte extends du{constructor(e=new qt,n=new qt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new qt){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new qt){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class A7e extends du{constructor(e=new He,n=new He){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new He){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new He){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class fte extends du{constructor(e=new qt,n=new qt,r=new qt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new qt){const r=n,i=this.v0,o=this.v1,s=this.v2;return r.set(Px(e,i.x,o.x,s.x),Px(e,i.y,o.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class T7e extends du{constructor(e=new He,n=new He,r=new He){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new He){const r=n,i=this.v0,o=this.v1,s=this.v2;return r.set(Px(e,i.x,o.x,s.x),Px(e,i.y,o.y,s.y),Px(e,i.z,o.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class hte extends du{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new qt){const r=n,i=this.points,o=(i.length-1)*e,s=Math.floor(o),a=o-s,l=i[s===0?s:s-1],c=i[s],u=i[s>i.length-2?i.length-1:s+1],d=i[s>i.length-3?i.length-1:s+2];return r.set(E9(a,l.x,c.x,u.x,d.x),E9(a,l.y,c.y,u.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new qt().fromArray(i))}return this}}var cF=Object.freeze({__proto__:null,ArcCurve:g7e,CatmullRomCurve3:v7e,CubicBezierCurve:ute,CubicBezierCurve3:C7e,EllipseCurve:NL,LineCurve:dte,LineCurve3:A7e,QuadraticBezierCurve:fte,QuadraticBezierCurve3:T7e,SplineCurve:hte});class M7e extends du{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new cF[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let o=0;for(;o<i.length;){if(i[o]>=r){const s=i[o]-r,a=this.curves[o],l=a.getLength(),c=l===0?0:1-s/l;return a.getPointAt(c,n)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,o=this.curves;i<o.length;i++){const s=o[i],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(n.push(u),r=u)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new cF[i.type]().fromJSON(i))}return this}}let C9=class extends M7e{constructor(e){super(),this.type="Path",this.currentPoint=new qt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new dte(this.currentPoint.clone(),new qt(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const o=new fte(this.currentPoint.clone(),new qt(e,n),new qt(r,i));return this.curves.push(o),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,o,s){const a=new ute(this.currentPoint.clone(),new qt(e,n),new qt(r,i),new qt(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new hte(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,o,s){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,r,i,o,s),this}absarc(e,n,r,i,o,s){return this.absellipse(e,n,r,r,i,o,s),this}ellipse(e,n,r,i,o,s,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,n+u,r,i,o,s,a,l),this}absellipse(e,n,r,i,o,s,a,l){const c=new NL(e,n,r,i,o,s,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class jb extends fa{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const o=[],s=[],a=[],l=[],c=new He,u=new qt;s.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,f=3;d<=n;d++,f+=3){const p=r+d/n*i;c.x=e*Math.cos(p),c.y=e*Math.sin(p),s.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(s[f]/e+1)/2,u.y=(s[f+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=n;d++)o.push(d,d+1,0);this.setIndex(o),this.setAttribute("position",new ni(s,3)),this.setAttribute("normal",new ni(a,3)),this.setAttribute("uv",new ni(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jb(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Ef extends fa{constructor(e=1,n=1,r=1,i=32,o=1,s=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),o=Math.floor(o);const u=[],d=[],f=[],p=[];let b=0;const v=[],m=r/2;let g=0;x(),s===!1&&(e>0&&w(!0),n>0&&w(!1)),this.setIndex(u),this.setAttribute("position",new ni(d,3)),this.setAttribute("normal",new ni(f,3)),this.setAttribute("uv",new ni(p,2));function x(){const S=new He,P=new He;let I=0;const M=(n-e)/r;for(let D=0;D<=o;D++){const E=[],_=D/o,A=_*(n-e)+e;for(let R=0;R<=i;R++){const F=R/i,L=F*l+a,N=Math.sin(L),U=Math.cos(L);P.x=A*N,P.y=-_*r+m,P.z=A*U,d.push(P.x,P.y,P.z),S.set(N,M,U).normalize(),f.push(S.x,S.y,S.z),p.push(F,1-_),E.push(b++)}v.push(E)}for(let D=0;D<i;D++)for(let E=0;E<o;E++){const _=v[E][D],A=v[E+1][D],R=v[E+1][D+1],F=v[E][D+1];(e>0||E!==0)&&(u.push(_,A,F),I+=3),(n>0||E!==o-1)&&(u.push(A,R,F),I+=3)}c.addGroup(g,I,0),g+=I}function w(S){const P=b,I=new qt,M=new He;let D=0;const E=S===!0?e:n,_=S===!0?1:-1;for(let R=1;R<=i;R++)d.push(0,m*_,0),f.push(0,_,0),p.push(.5,.5),b++;const A=b;for(let R=0;R<=i;R++){const L=R/i*l+a,N=Math.cos(L),U=Math.sin(L);M.x=E*U,M.y=m*_,M.z=E*N,d.push(M.x,M.y,M.z),f.push(0,_,0),I.x=N*.5+.5,I.y=U*.5*_+.5,p.push(I.x,I.y),b++}for(let R=0;R<i;R++){const F=P+R,L=A+R;S===!0?u.push(L,L+1,F):u.push(L+1,L,F),D+=3}c.addGroup(g,D,S===!0?1:2),g+=D}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ef(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class BL extends Ef{constructor(e=1,n=1,r=32,i=1,o=!1,s=0,a=Math.PI*2){super(0,e,n,r,i,o,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:a}}static fromJSON(e){return new BL(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class jL extends fa{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const o=[],s=[];a(i),c(r),u(),this.setAttribute("position",new ni(o,3)),this.setAttribute("normal",new ni(o.slice(),3)),this.setAttribute("uv",new ni(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(x){const w=new He,S=new He,P=new He;for(let I=0;I<n.length;I+=3)p(n[I+0],w),p(n[I+1],S),p(n[I+2],P),l(w,S,P,x)}function l(x,w,S,P){const I=P+1,M=[];for(let D=0;D<=I;D++){M[D]=[];const E=x.clone().lerp(S,D/I),_=w.clone().lerp(S,D/I),A=I-D;for(let R=0;R<=A;R++)R===0&&D===I?M[D][R]=E:M[D][R]=E.clone().lerp(_,R/A)}for(let D=0;D<I;D++)for(let E=0;E<2*(I-D)-1;E++){const _=Math.floor(E/2);E%2===0?(f(M[D][_+1]),f(M[D+1][_]),f(M[D][_])):(f(M[D][_+1]),f(M[D+1][_+1]),f(M[D+1][_]))}}function c(x){const w=new He;for(let S=0;S<o.length;S+=3)w.x=o[S+0],w.y=o[S+1],w.z=o[S+2],w.normalize().multiplyScalar(x),o[S+0]=w.x,o[S+1]=w.y,o[S+2]=w.z}function u(){const x=new He;for(let w=0;w<o.length;w+=3){x.x=o[w+0],x.y=o[w+1],x.z=o[w+2];const S=m(x)/2/Math.PI+.5,P=g(x)/Math.PI+.5;s.push(S,1-P)}b(),d()}function d(){for(let x=0;x<s.length;x+=6){const w=s[x+0],S=s[x+2],P=s[x+4],I=Math.max(w,S,P),M=Math.min(w,S,P);I>.9&&M<.1&&(w<.2&&(s[x+0]+=1),S<.2&&(s[x+2]+=1),P<.2&&(s[x+4]+=1))}}function f(x){o.push(x.x,x.y,x.z)}function p(x,w){const S=x*3;w.x=e[S+0],w.y=e[S+1],w.z=e[S+2]}function b(){const x=new He,w=new He,S=new He,P=new He,I=new qt,M=new qt,D=new qt;for(let E=0,_=0;E<o.length;E+=9,_+=6){x.set(o[E+0],o[E+1],o[E+2]),w.set(o[E+3],o[E+4],o[E+5]),S.set(o[E+6],o[E+7],o[E+8]),I.set(s[_+0],s[_+1]),M.set(s[_+2],s[_+3]),D.set(s[_+4],s[_+5]),P.copy(x).add(w).add(S).divideScalar(3);const A=m(P);v(I,_+0,x,A),v(M,_+2,w,A),v(D,_+4,S,A)}}function v(x,w,S,P){P<0&&x.x===1&&(s[w]=x.x-1),S.x===0&&S.z===0&&(s[w]=P/2/Math.PI+.5)}function m(x){return Math.atan2(x.z,-x.x)}function g(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jL(e.vertices,e.indices,e.radius,e.details)}}class UL extends C9{constructor(e){super(e),this.uuid=b0(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new C9().fromJSON(i))}return this}}function P7e(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let o=pte(t,0,i,n,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,c;if(r&&(o=F7e(t,e,o,n)),t.length>80*n){a=1/0,l=1/0;let u=-1/0,d=-1/0;for(let f=n;f<i;f+=n){const p=t[f],b=t[f+1];p<a&&(a=p),b<l&&(l=b),p>u&&(u=p),b>d&&(d=b)}c=Math.max(u-a,d-l),c=c!==0?32767/c:0}return Ub(o,s,n,a,l,c,0),s}function pte(t,e,n,r,i){let o;if(i===H7e(t,e,n,r)>0)for(let s=e;s<n;s+=r)o=A9(s/r|0,t[s],t[s+1],o);else for(let s=n-r;s>=e;s-=r)o=A9(s/r|0,t[s],t[s+1],o);return o&&Zv(o,o.next)&&(Vb(o),o=o.next),o}function rm(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(Zv(n,n.next)||Ri(n.prev,n,n.next)===0)){if(Vb(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function Ub(t,e,n,r,i,o,s){if(!t)return;!s&&o&&j7e(t,r,i,o);let a=t;for(;t.prev!==t.next;){const l=t.prev,c=t.next;if(o?R7e(t,r,i,o):D7e(t)){e.push(l.i,t.i,c.i),Vb(t),t=c.next,a=c.next;continue}if(t=c,t===a){s?s===1?(t=I7e(rm(t),e),Ub(t,e,n,r,i,o,2)):s===2&&k7e(t,e,n,r,i,o):Ub(rm(t),e,n,r,i,o,1);break}}}function D7e(t){const e=t.prev,n=t,r=t.next;if(Ri(e,n,r)>=0)return!1;const i=e.x,o=n.x,s=r.x,a=e.y,l=n.y,c=r.y,u=Math.min(i,o,s),d=Math.min(a,l,c),f=Math.max(i,o,s),p=Math.max(a,l,c);let b=r.next;for(;b!==e;){if(b.x>=u&&b.x<=f&&b.y>=d&&b.y<=p&&Gy(i,a,o,l,s,c,b.x,b.y)&&Ri(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function R7e(t,e,n,r){const i=t.prev,o=t,s=t.next;if(Ri(i,o,s)>=0)return!1;const a=i.x,l=o.x,c=s.x,u=i.y,d=o.y,f=s.y,p=Math.min(a,l,c),b=Math.min(u,d,f),v=Math.max(a,l,c),m=Math.max(u,d,f),g=uF(p,b,e,n,r),x=uF(v,m,e,n,r);let w=t.prevZ,S=t.nextZ;for(;w&&w.z>=g&&S&&S.z<=x;){if(w.x>=p&&w.x<=v&&w.y>=b&&w.y<=m&&w!==i&&w!==s&&Gy(a,u,l,d,c,f,w.x,w.y)&&Ri(w.prev,w,w.next)>=0||(w=w.prevZ,S.x>=p&&S.x<=v&&S.y>=b&&S.y<=m&&S!==i&&S!==s&&Gy(a,u,l,d,c,f,S.x,S.y)&&Ri(S.prev,S,S.next)>=0))return!1;S=S.nextZ}for(;w&&w.z>=g;){if(w.x>=p&&w.x<=v&&w.y>=b&&w.y<=m&&w!==i&&w!==s&&Gy(a,u,l,d,c,f,w.x,w.y)&&Ri(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;S&&S.z<=x;){if(S.x>=p&&S.x<=v&&S.y>=b&&S.y<=m&&S!==i&&S!==s&&Gy(a,u,l,d,c,f,S.x,S.y)&&Ri(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function I7e(t,e){let n=t;do{const r=n.prev,i=n.next.next;!Zv(r,i)&&gte(r,n,n.next,i)&&zb(r,i)&&zb(i,r)&&(e.push(r.i,n.i,i.i),Vb(n),Vb(n.next),n=t=i),n=n.next}while(n!==t);return rm(n)}function k7e(t,e,n,r,i,o){let s=t;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&V7e(s,a)){let l=vte(s,a);s=rm(s,s.next),l=rm(l,l.next),Ub(s,e,n,r,i,o,0),Ub(l,e,n,r,i,o,0);return}a=a.next}s=s.next}while(s!==t)}function F7e(t,e,n,r){const i=[];for(let o=0,s=e.length;o<s;o++){const a=e[o]*r,l=o<s-1?e[o+1]*r:t.length,c=pte(t,a,l,r,!1);c===c.next&&(c.steiner=!0),i.push(z7e(c))}i.sort(O7e);for(let o=0;o<i.length;o++)n=N7e(i[o],n);return n}function O7e(t,e){let n=t.x-e.x;if(n===0&&(n=t.y-e.y,n===0)){const r=(t.next.y-t.y)/(t.next.x-t.x),i=(e.next.y-e.y)/(e.next.x-e.x);n=r-i}return n}function N7e(t,e){const n=L7e(t,e);if(!n)return e;const r=vte(n,t);return rm(r,r.next),rm(n,n.next)}function L7e(t,e){let n=e;const r=t.x,i=t.y;let o=-1/0,s;if(Zv(t,n))return n;do{if(Zv(t,n.next))return n.next;if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const d=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(d<=r&&d>o&&(o=d,s=n.x<n.next.x?n:n.next,d===r))return s}n=n.next}while(n!==e);if(!s)return null;const a=s,l=s.x,c=s.y;let u=1/0;n=s;do{if(r>=n.x&&n.x>=l&&r!==n.x&&mte(i<c?r:o,i,l,c,i<c?o:r,i,n.x,n.y)){const d=Math.abs(i-n.y)/(r-n.x);zb(n,t)&&(d<u||d===u&&(n.x>s.x||n.x===s.x&&B7e(s,n)))&&(s=n,u=d)}n=n.next}while(n!==a);return s}function B7e(t,e){return Ri(t.prev,t,e.prev)<0&&Ri(e.next,t,t.next)<0}function j7e(t,e,n,r){let i=t;do i.z===0&&(i.z=uF(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,U7e(i)}function U7e(t){let e,n=1;do{let r=t,i;t=null;let o=null;for(e=0;r;){e++;let s=r,a=0;for(let c=0;c<n&&(a++,s=s.nextZ,!!s);c++);let l=n;for(;a>0||l>0&&s;)a!==0&&(l===0||!s||r.z<=s.z)?(i=r,r=r.nextZ,a--):(i=s,s=s.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=s}o.nextZ=null,n*=2}while(e>1);return t}function uF(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function z7e(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function mte(t,e,n,r,i,o,s,a){return(i-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(r-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function Gy(t,e,n,r,i,o,s,a){return!(t===s&&e===a)&&mte(t,e,n,r,i,o,s,a)}function V7e(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!W7e(t,e)&&(zb(t,e)&&zb(e,t)&&$7e(t,e)&&(Ri(t.prev,t,e.prev)||Ri(t,e.prev,e))||Zv(t,e)&&Ri(t.prev,t,t.next)>0&&Ri(e.prev,e,e.next)>0)}function Ri(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Zv(t,e){return t.x===e.x&&t.y===e.y}function gte(t,e,n,r){const i=i_(Ri(t,e,n)),o=i_(Ri(t,e,r)),s=i_(Ri(n,r,t)),a=i_(Ri(n,r,e));return!!(i!==o&&s!==a||i===0&&r_(t,n,e)||o===0&&r_(t,r,e)||s===0&&r_(n,t,r)||a===0&&r_(n,e,r))}function r_(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function i_(t){return t>0?1:t<0?-1:0}function W7e(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&gte(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function zb(t,e){return Ri(t.prev,t,t.next)<0?Ri(t,e,t.next)>=0&&Ri(t,t.prev,e)>=0:Ri(t,e,t.prev)<0||Ri(t,t.next,e)<0}function $7e(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function vte(t,e){const n=dF(t.i,t.x,t.y),r=dF(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function A9(t,e,n,r){const i=dF(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Vb(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function dF(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function H7e(t,e,n,r){let i=0;for(let o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}class G7e{static triangulate(e,n,r=2){return P7e(e,n,r)}}class qf{static area(e){const n=e.length;let r=0;for(let i=n-1,o=0;o<n;i=o++)r+=e[i].x*e[o].y-e[o].x*e[i].y;return r*.5}static isClockWise(e){return qf.area(e)<0}static triangulateShape(e,n){const r=[],i=[],o=[];T9(e),M9(r,e);let s=e.length;n.forEach(T9);for(let l=0;l<n.length;l++)i.push(s),s+=n[l].length,M9(r,n[l]);const a=G7e.triangulate(r,i);for(let l=0;l<a.length;l+=3)o.push(a.slice(l,l+3));return o}}function T9(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function M9(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class zL extends fa{constructor(e=new UL([new qt(.5,.5),new qt(-.5,.5),new qt(-.5,-.5),new qt(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];s(c)}this.setAttribute("position",new ni(i,3)),this.setAttribute("uv",new ni(o,2)),this.computeVertexNormals();function s(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,u=n.steps!==void 0?n.steps:1,d=n.depth!==void 0?n.depth:1;let f=n.bevelEnabled!==void 0?n.bevelEnabled:!0,p=n.bevelThickness!==void 0?n.bevelThickness:.2,b=n.bevelSize!==void 0?n.bevelSize:p-.1,v=n.bevelOffset!==void 0?n.bevelOffset:0,m=n.bevelSegments!==void 0?n.bevelSegments:3;const g=n.extrudePath,x=n.UVGenerator!==void 0?n.UVGenerator:q7e;let w,S=!1,P,I,M,D;g&&(w=g.getSpacedPoints(u),S=!0,f=!1,P=g.computeFrenetFrames(u,!1),I=new He,M=new He,D=new He),f||(m=0,p=0,b=0,v=0);const E=a.extractPoints(c);let _=E.shape;const A=E.holes;if(!qf.isClockWise(_)){_=_.reverse();for(let de=0,me=A.length;de<me;de++){const ie=A[de];qf.isClockWise(ie)&&(A[de]=ie.reverse())}}function F(de){const ie=10000000000000001e-36;let ae=de[0];for(let ge=1;ge<=de.length;ge++){const X=ge%de.length,W=de[X],ve=W.x-ae.x,ue=W.y-ae.y,Me=ve*ve+ue*ue,Ae=Math.max(Math.abs(W.x),Math.abs(W.y),Math.abs(ae.x),Math.abs(ae.y)),Ne=ie*Ae*Ae;if(Me<=Ne){de.splice(X,1),ge--;continue}ae=W}}F(_),A.forEach(F);const L=A.length,N=_;for(let de=0;de<L;de++){const me=A[de];_=_.concat(me)}function U(de,me,ie){return me||console.error("THREE.ExtrudeGeometry: vec does not exist"),de.clone().addScaledVector(me,ie)}const $=_.length;function B(de,me,ie){let ae,ge,X;const W=de.x-me.x,ve=de.y-me.y,ue=ie.x-de.x,Me=ie.y-de.y,Ae=W*W+ve*ve,Ne=W*Me-ve*ue;if(Math.abs(Ne)>Number.EPSILON){const Re=Math.sqrt(Ae),Ie=Math.sqrt(ue*ue+Me*Me),it=me.x-ve/Re,Ee=me.y+W/Re,Le=ie.x-Me/Ie,Ge=ie.y+ue/Ie,Ke=((Le-it)*Me-(Ge-Ee)*ue)/(W*Me-ve*ue);ae=it+W*Ke-de.x,ge=Ee+ve*Ke-de.y;const je=ae*ae+ge*ge;if(je<=2)return new qt(ae,ge);X=Math.sqrt(je/2)}else{let Re=!1;W>Number.EPSILON?ue>Number.EPSILON&&(Re=!0):W<-Number.EPSILON?ue<-Number.EPSILON&&(Re=!0):Math.sign(ve)===Math.sign(Me)&&(Re=!0),Re?(ae=-ve,ge=W,X=Math.sqrt(Ae)):(ae=W,ge=ve,X=Math.sqrt(Ae/2))}return new qt(ae/X,ge/X)}const H=[];for(let de=0,me=N.length,ie=me-1,ae=de+1;de<me;de++,ie++,ae++)ie===me&&(ie=0),ae===me&&(ae=0),H[de]=B(N[de],N[ie],N[ae]);const q=[];let z,G=H.concat();for(let de=0,me=L;de<me;de++){const ie=A[de];z=[];for(let ae=0,ge=ie.length,X=ge-1,W=ae+1;ae<ge;ae++,X++,W++)X===ge&&(X=0),W===ge&&(W=0),z[ae]=B(ie[ae],ie[X],ie[W]);q.push(z),G=G.concat(z)}const K=[],Z=[];for(let de=0;de<m;de++){const me=de/m,ie=p*Math.cos(me*Math.PI/2),ae=b*Math.sin(me*Math.PI/2)+v;for(let ge=0,X=N.length;ge<X;ge++){const W=U(N[ge],H[ge],ae);ye(W.x,W.y,-ie),me==0&&K.push(W)}for(let ge=0,X=L;ge<X;ge++){const W=A[ge];z=q[ge];const ve=[];for(let ue=0,Me=W.length;ue<Me;ue++){const Ae=U(W[ue],z[ue],ae);ye(Ae.x,Ae.y,-ie),me==0&&ve.push(Ae)}me==0&&Z.push(ve)}}const ee=qf.triangulateShape(K,Z),V=ee.length,J=b+v;for(let de=0;de<$;de++){const me=f?U(_[de],G[de],J):_[de];S?(M.copy(P.normals[0]).multiplyScalar(me.x),I.copy(P.binormals[0]).multiplyScalar(me.y),D.copy(w[0]).add(M).add(I),ye(D.x,D.y,D.z)):ye(me.x,me.y,0)}for(let de=1;de<=u;de++)for(let me=0;me<$;me++){const ie=f?U(_[me],G[me],J):_[me];S?(M.copy(P.normals[de]).multiplyScalar(ie.x),I.copy(P.binormals[de]).multiplyScalar(ie.y),D.copy(w[de]).add(M).add(I),ye(D.x,D.y,D.z)):ye(ie.x,ie.y,d/u*de)}for(let de=m-1;de>=0;de--){const me=de/m,ie=p*Math.cos(me*Math.PI/2),ae=b*Math.sin(me*Math.PI/2)+v;for(let ge=0,X=N.length;ge<X;ge++){const W=U(N[ge],H[ge],ae);ye(W.x,W.y,d+ie)}for(let ge=0,X=A.length;ge<X;ge++){const W=A[ge];z=q[ge];for(let ve=0,ue=W.length;ve<ue;ve++){const Me=U(W[ve],z[ve],ae);S?ye(Me.x,Me.y+w[u-1].y,w[u-1].x+ie):ye(Me.x,Me.y,d+ie)}}}oe(),ne();function oe(){const de=i.length/3;if(f){let me=0,ie=$*me;for(let ae=0;ae<V;ae++){const ge=ee[ae];Ce(ge[2]+ie,ge[1]+ie,ge[0]+ie)}me=u+m*2,ie=$*me;for(let ae=0;ae<V;ae++){const ge=ee[ae];Ce(ge[0]+ie,ge[1]+ie,ge[2]+ie)}}else{for(let me=0;me<V;me++){const ie=ee[me];Ce(ie[2],ie[1],ie[0])}for(let me=0;me<V;me++){const ie=ee[me];Ce(ie[0]+$*u,ie[1]+$*u,ie[2]+$*u)}}r.addGroup(de,i.length/3-de,0)}function ne(){const de=i.length/3;let me=0;pe(N,me),me+=N.length;for(let ie=0,ae=A.length;ie<ae;ie++){const ge=A[ie];pe(ge,me),me+=ge.length}r.addGroup(de,i.length/3-de,1)}function pe(de,me){let ie=de.length;for(;--ie>=0;){const ae=ie;let ge=ie-1;ge<0&&(ge=de.length-1);for(let X=0,W=u+m*2;X<W;X++){const ve=$*X,ue=$*(X+1),Me=me+ae+ve,Ae=me+ge+ve,Ne=me+ge+ue,Re=me+ae+ue;_e(Me,Ae,Ne,Re)}}}function ye(de,me,ie){l.push(de),l.push(me),l.push(ie)}function Ce(de,me,ie){ce(de),ce(me),ce(ie);const ae=i.length/3,ge=x.generateTopUV(r,i,ae-3,ae-2,ae-1);Be(ge[0]),Be(ge[1]),Be(ge[2])}function _e(de,me,ie,ae){ce(de),ce(me),ce(ae),ce(me),ce(ie),ce(ae);const ge=i.length/3,X=x.generateSideWallUV(r,i,ge-6,ge-3,ge-2,ge-1);Be(X[0]),Be(X[1]),Be(X[3]),Be(X[1]),Be(X[2]),Be(X[3])}function ce(de){i.push(l[de*3+0]),i.push(l[de*3+1]),i.push(l[de*3+2])}function Be(de){o.push(de.x),o.push(de.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return K7e(n,r,e)}static fromJSON(e,n){const r=[];for(let o=0,s=e.shapes.length;o<s;o++){const a=n[e.shapes[o]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new cF[i.type]().fromJSON(i)),new zL(r,e.options)}}const q7e={generateTopUV:function(t,e,n,r,i){const o=e[n*3],s=e[n*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new qt(o,s),new qt(a,l),new qt(c,u)]},generateSideWallUV:function(t,e,n,r,i,o){const s=e[n*3],a=e[n*3+1],l=e[n*3+2],c=e[r*3],u=e[r*3+1],d=e[r*3+2],f=e[i*3],p=e[i*3+1],b=e[i*3+2],v=e[o*3],m=e[o*3+1],g=e[o*3+2];return Math.abs(a-u)<Math.abs(s-c)?[new qt(s,1-l),new qt(c,1-d),new qt(f,1-b),new qt(v,1-g)]:[new qt(a,1-l),new qt(u,1-d),new qt(p,1-b),new qt(m,1-g)]}};function K7e(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const o=t[r];n.shapes.push(o.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class VL extends jL{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,o,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new VL(e.radius,e.detail)}}class Kf extends fa{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const o=e/2,s=n/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,d=e/a,f=n/l,p=[],b=[],v=[],m=[];for(let g=0;g<u;g++){const x=g*f-s;for(let w=0;w<c;w++){const S=w*d-o;b.push(S,-x,0),v.push(0,0,1),m.push(w/a),m.push(1-g/l)}}for(let g=0;g<l;g++)for(let x=0;x<a;x++){const w=x+c*g,S=x+c*(g+1),P=x+1+c*(g+1),I=x+1+c*g;p.push(w,S,I),p.push(S,P,I)}this.setIndex(p),this.setAttribute("position",new ni(b,3)),this.setAttribute("normal",new ni(v,3)),this.setAttribute("uv",new ni(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kf(e.width,e.height,e.widthSegments,e.heightSegments)}}class Rx extends fa{constructor(e=new UL([new qt(0,.5),new qt(-.5,-.5),new qt(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],o=[],s=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new ni(i,3)),this.setAttribute("normal",new ni(o,3)),this.setAttribute("uv",new ni(s,2));function c(u){const d=i.length/3,f=u.extractPoints(n);let p=f.shape;const b=f.holes;qf.isClockWise(p)===!1&&(p=p.reverse());for(let m=0,g=b.length;m<g;m++){const x=b[m];qf.isClockWise(x)===!0&&(b[m]=x.reverse())}const v=qf.triangulateShape(p,b);for(let m=0,g=b.length;m<g;m++){const x=b[m];p=p.concat(x)}for(let m=0,g=p.length;m<g;m++){const x=p[m];i.push(x.x,x.y,0),o.push(0,0,1),s.push(x.x,x.y)}for(let m=0,g=v.length;m<g;m++){const x=v[m],w=x[0]+d,S=x[1]+d,P=x[2]+d;r.push(w,S,P),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return Y7e(n,e)}static fromJSON(e,n){const r=[];for(let i=0,o=e.shapes.length;i<o;i++){const s=n[e.shapes[i]];r.push(s)}return new Rx(r,e.curveSegments)}}function Y7e(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class Xs extends fa{constructor(e=1,n=32,r=16,i=0,o=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:o,thetaStart:s,thetaLength:a},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(s+a,Math.PI);let c=0;const u=[],d=new He,f=new He,p=[],b=[],v=[],m=[];for(let g=0;g<=r;g++){const x=[],w=g/r;let S=0;g===0&&s===0?S=.5/n:g===r&&l===Math.PI&&(S=-.5/n);for(let P=0;P<=n;P++){const I=P/n;d.x=-e*Math.cos(i+I*o)*Math.sin(s+w*a),d.y=e*Math.cos(s+w*a),d.z=e*Math.sin(i+I*o)*Math.sin(s+w*a),b.push(d.x,d.y,d.z),f.copy(d).normalize(),v.push(f.x,f.y,f.z),m.push(I+S,1-w),x.push(c++)}u.push(x)}for(let g=0;g<r;g++)for(let x=0;x<n;x++){const w=u[g][x+1],S=u[g][x],P=u[g+1][x],I=u[g+1][x+1];(g!==0||s>0)&&p.push(w,S,I),(g!==r-1||l<Math.PI)&&p.push(S,P,I)}this.setIndex(p),this.setAttribute("position",new ni(b,3)),this.setAttribute("normal",new ni(v,3)),this.setAttribute("uv",new ni(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xs(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Ix extends fa{constructor(e=1,n=.4,r=12,i=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:o},r=Math.floor(r),i=Math.floor(i);const s=[],a=[],l=[],c=[],u=new He,d=new He,f=new He;for(let p=0;p<=r;p++)for(let b=0;b<=i;b++){const v=b/i*o,m=p/r*Math.PI*2;d.x=(e+n*Math.cos(m))*Math.cos(v),d.y=(e+n*Math.cos(m))*Math.sin(v),d.z=n*Math.sin(m),a.push(d.x,d.y,d.z),u.x=e*Math.cos(v),u.y=e*Math.sin(v),f.subVectors(d,u).normalize(),l.push(f.x,f.y,f.z),c.push(b/i),c.push(p/r)}for(let p=1;p<=r;p++)for(let b=1;b<=i;b++){const v=(i+1)*p+b-1,m=(i+1)*(p-1)+b-1,g=(i+1)*(p-1)+b,x=(i+1)*p+b;s.push(v,m,x),s.push(m,g,x)}this.setIndex(s),this.setAttribute("position",new ni(a,3)),this.setAttribute("normal",new ni(l,3)),this.setAttribute("uv",new ni(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ix(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class ji extends gm{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new wn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zee,this.normalScale=new qt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new au,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class X7e extends gm{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=M$e,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Q7e extends gm{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class yte extends hs{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new wn(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}const TD=new Ci,P9=new He,D9=new He;class Z7e{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new qt(512,512),this.map=null,this.mapPass=null,this.matrix=new Ci,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new OL,this._frameExtents=new qt(1,1),this._viewportCount=1,this._viewports=[new $i(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;P9.setFromMatrixPosition(e.matrixWorld),n.position.copy(P9),D9.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(D9),n.updateMatrixWorld(),TD.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(TD),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(TD)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class xte extends ate{constructor(e=-1,n=1,r=1,i=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=r-e,s=r+e,a=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=c*this.view.offsetX,s=o+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class J7e extends Z7e{constructor(){super(new xte(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class eHe extends yte{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(hs.DEFAULT_UP),this.updateMatrix(),this.target=new hs,this.shadow=new J7e}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class tHe extends yte{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class nHe extends cl{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}const R9=new Ci;class MD{constructor(e,n,r=0,i=1/0){this.ray=new nte(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new FL,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return R9.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(R9),this}intersectObject(e,n=!0,r=[]){return fF(e,this,r,n),r.sort(I9),r}intersectObjects(e,n=!0,r=[]){for(let i=0,o=e.length;i<o;i++)fF(e[i],this,r,n);return r.sort(I9),r}}function I9(t,e){return t.distance-e.distance}function fF(t,e,n,r){let i=!0;if(t.layers.test(e.layers)&&t.raycast(e,n)===!1&&(i=!1),i===!0&&r===!0){const o=t.children;for(let s=0,a=o.length;s<a;s++)fF(o[s],e,n,!0)}}function k9(t,e,n,r){const i=rHe(r);switch(n){case Hee:return t*e;case qee:return t*e;case Kee:return t*e*2;case Yee:return t*e/i.components*i.byteLength;case PL:return t*e/i.components*i.byteLength;case Xee:return t*e*2/i.components*i.byteLength;case DL:return t*e*2/i.components*i.byteLength;case Gee:return t*e*3/i.components*i.byteLength;case rc:return t*e*4/i.components*i.byteLength;case RL:return t*e*4/i.components*i.byteLength;case cE:case uE:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case dE:case fE:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Lk:case jk:return Math.max(t,16)*Math.max(e,8)/4;case Nk:case Bk:return Math.max(t,8)*Math.max(e,8)/2;case Uk:case zk:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case Vk:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Wk:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case $k:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case Hk:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case Gk:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case qk:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case Kk:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case Yk:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case Xk:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case Qk:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case Zk:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case Jk:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case eF:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case tF:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case nF:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case hE:case rF:case iF:return Math.ceil(t/4)*Math.ceil(e/4)*16;case Qee:case oF:return Math.ceil(t/4)*Math.ceil(e/4)*8;case sF:case aF:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function rHe(t){switch(t){case _d:case Vee:return{byteLength:1,components:1};case Ob:case Wee:case Hw:return{byteLength:2,components:1};case TL:case ML:return{byteLength:2,components:4};case tm:case AL:case Yu:return{byteLength:4,components:1};case $ee:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:CL}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=CL);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function bte(){let t=null,e=!1,n=null,r=null;function i(o,s){n(o,s),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){n=o},setContext:function(o){t=o}}}function iHe(t){const e=new WeakMap;function n(a,l){const c=a.array,u=a.usage,d=c.byteLength,f=t.createBuffer();t.bindBuffer(l,f),t.bufferData(l,c,u),a.onUploadCallback();let p;if(c instanceof Float32Array)p=t.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?p=t.HALF_FLOAT:p=t.UNSIGNED_SHORT;else if(c instanceof Int16Array)p=t.SHORT;else if(c instanceof Uint32Array)p=t.UNSIGNED_INT;else if(c instanceof Int32Array)p=t.INT;else if(c instanceof Int8Array)p=t.BYTE;else if(c instanceof Uint8Array)p=t.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)p=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:f,type:p,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:d}}function r(a,l,c){const u=l.array,d=l.updateRanges;if(t.bindBuffer(c,a),d.length===0)t.bufferSubData(c,0,u);else{d.sort((p,b)=>p.start-b.start);let f=0;for(let p=1;p<d.length;p++){const b=d[f],v=d[p];v.start<=b.start+b.count+1?b.count=Math.max(b.count,v.start+v.count-b.start):(++f,d[f]=v)}d.length=f+1;for(let p=0,b=d.length;p<b;p++){const v=d[p];t.bufferSubData(c,v.start*u.BYTES_PER_ELEMENT,u,v.start,v.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(t.deleteBuffer(l.buffer),e.delete(a))}function s(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,n(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(c.buffer,a,l),c.version=a.version}}return{get:i,remove:o,update:s}}var oHe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,sHe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,aHe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,lHe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,cHe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,uHe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,dHe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,fHe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,hHe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,pHe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,mHe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,gHe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,vHe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,yHe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,xHe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,bHe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,wHe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,SHe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,_He=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,EHe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,CHe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,AHe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,THe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,MHe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,PHe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,DHe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,RHe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,IHe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,kHe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,FHe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,OHe="gl_FragColor = linearToOutputTexel( gl_FragColor );",NHe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,LHe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,BHe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,jHe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,UHe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,zHe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,VHe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,WHe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,$He=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,HHe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,GHe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,qHe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,KHe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,YHe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,XHe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,QHe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,ZHe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,JHe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,eGe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,tGe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,nGe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,rGe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,iGe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,oGe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,sGe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,aGe=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,lGe=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,cGe=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,uGe=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,dGe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,fGe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,hGe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,pGe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,mGe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,gGe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,vGe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,yGe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,xGe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,bGe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,wGe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,SGe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,_Ge=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,EGe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,CGe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,AGe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,TGe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,MGe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,PGe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,DGe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,RGe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,IGe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,kGe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,FGe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,OGe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,NGe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,LGe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,BGe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,jGe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,UGe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,zGe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,VGe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,WGe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,$Ge=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,HGe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,GGe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,qGe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,KGe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,YGe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,XGe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,QGe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,ZGe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,JGe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,eqe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,tqe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,nqe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,rqe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const iqe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,oqe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,sqe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,aqe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,lqe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cqe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,uqe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,dqe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,fqe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,hqe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,pqe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,mqe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,gqe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,vqe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,yqe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,xqe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bqe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wqe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Sqe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,_qe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Eqe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Cqe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Aqe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Tqe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Mqe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Pqe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Dqe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Rqe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Iqe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,kqe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Fqe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Oqe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Nqe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Lqe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,nr={alphahash_fragment:oHe,alphahash_pars_fragment:sHe,alphamap_fragment:aHe,alphamap_pars_fragment:lHe,alphatest_fragment:cHe,alphatest_pars_fragment:uHe,aomap_fragment:dHe,aomap_pars_fragment:fHe,batching_pars_vertex:hHe,batching_vertex:pHe,begin_vertex:mHe,beginnormal_vertex:gHe,bsdfs:vHe,iridescence_fragment:yHe,bumpmap_pars_fragment:xHe,clipping_planes_fragment:bHe,clipping_planes_pars_fragment:wHe,clipping_planes_pars_vertex:SHe,clipping_planes_vertex:_He,color_fragment:EHe,color_pars_fragment:CHe,color_pars_vertex:AHe,color_vertex:THe,common:MHe,cube_uv_reflection_fragment:PHe,defaultnormal_vertex:DHe,displacementmap_pars_vertex:RHe,displacementmap_vertex:IHe,emissivemap_fragment:kHe,emissivemap_pars_fragment:FHe,colorspace_fragment:OHe,colorspace_pars_fragment:NHe,envmap_fragment:LHe,envmap_common_pars_fragment:BHe,envmap_pars_fragment:jHe,envmap_pars_vertex:UHe,envmap_physical_pars_fragment:QHe,envmap_vertex:zHe,fog_vertex:VHe,fog_pars_vertex:WHe,fog_fragment:$He,fog_pars_fragment:HHe,gradientmap_pars_fragment:GHe,lightmap_pars_fragment:qHe,lights_lambert_fragment:KHe,lights_lambert_pars_fragment:YHe,lights_pars_begin:XHe,lights_toon_fragment:ZHe,lights_toon_pars_fragment:JHe,lights_phong_fragment:eGe,lights_phong_pars_fragment:tGe,lights_physical_fragment:nGe,lights_physical_pars_fragment:rGe,lights_fragment_begin:iGe,lights_fragment_maps:oGe,lights_fragment_end:sGe,logdepthbuf_fragment:aGe,logdepthbuf_pars_fragment:lGe,logdepthbuf_pars_vertex:cGe,logdepthbuf_vertex:uGe,map_fragment:dGe,map_pars_fragment:fGe,map_particle_fragment:hGe,map_particle_pars_fragment:pGe,metalnessmap_fragment:mGe,metalnessmap_pars_fragment:gGe,morphinstance_vertex:vGe,morphcolor_vertex:yGe,morphnormal_vertex:xGe,morphtarget_pars_vertex:bGe,morphtarget_vertex:wGe,normal_fragment_begin:SGe,normal_fragment_maps:_Ge,normal_pars_fragment:EGe,normal_pars_vertex:CGe,normal_vertex:AGe,normalmap_pars_fragment:TGe,clearcoat_normal_fragment_begin:MGe,clearcoat_normal_fragment_maps:PGe,clearcoat_pars_fragment:DGe,iridescence_pars_fragment:RGe,opaque_fragment:IGe,packing:kGe,premultiplied_alpha_fragment:FGe,project_vertex:OGe,dithering_fragment:NGe,dithering_pars_fragment:LGe,roughnessmap_fragment:BGe,roughnessmap_pars_fragment:jGe,shadowmap_pars_fragment:UGe,shadowmap_pars_vertex:zGe,shadowmap_vertex:VGe,shadowmask_pars_fragment:WGe,skinbase_vertex:$Ge,skinning_pars_vertex:HGe,skinning_vertex:GGe,skinnormal_vertex:qGe,specularmap_fragment:KGe,specularmap_pars_fragment:YGe,tonemapping_fragment:XGe,tonemapping_pars_fragment:QGe,transmission_fragment:ZGe,transmission_pars_fragment:JGe,uv_pars_fragment:eqe,uv_pars_vertex:tqe,uv_vertex:nqe,worldpos_vertex:rqe,background_vert:iqe,background_frag:oqe,backgroundCube_vert:sqe,backgroundCube_frag:aqe,cube_vert:lqe,cube_frag:cqe,depth_vert:uqe,depth_frag:dqe,distanceRGBA_vert:fqe,distanceRGBA_frag:hqe,equirect_vert:pqe,equirect_frag:mqe,linedashed_vert:gqe,linedashed_frag:vqe,meshbasic_vert:yqe,meshbasic_frag:xqe,meshlambert_vert:bqe,meshlambert_frag:wqe,meshmatcap_vert:Sqe,meshmatcap_frag:_qe,meshnormal_vert:Eqe,meshnormal_frag:Cqe,meshphong_vert:Aqe,meshphong_frag:Tqe,meshphysical_vert:Mqe,meshphysical_frag:Pqe,meshtoon_vert:Dqe,meshtoon_frag:Rqe,points_vert:Iqe,points_frag:kqe,shadow_vert:Fqe,shadow_frag:Oqe,sprite_vert:Nqe,sprite_frag:Lqe},Jt={common:{diffuse:{value:new wn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Jn},alphaMap:{value:null},alphaMapTransform:{value:new Jn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Jn}},envmap:{envMap:{value:null},envMapRotation:{value:new Jn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Jn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Jn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Jn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Jn},normalScale:{value:new qt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Jn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Jn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Jn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Jn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new wn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new wn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Jn},alphaTest:{value:0},uvTransform:{value:new Jn}},sprite:{diffuse:{value:new wn(16777215)},opacity:{value:1},center:{value:new qt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Jn},alphaMap:{value:null},alphaMapTransform:{value:new Jn},alphaTest:{value:0}}},Rc={basic:{uniforms:_s([Jt.common,Jt.specularmap,Jt.envmap,Jt.aomap,Jt.lightmap,Jt.fog]),vertexShader:nr.meshbasic_vert,fragmentShader:nr.meshbasic_frag},lambert:{uniforms:_s([Jt.common,Jt.specularmap,Jt.envmap,Jt.aomap,Jt.lightmap,Jt.emissivemap,Jt.bumpmap,Jt.normalmap,Jt.displacementmap,Jt.fog,Jt.lights,{emissive:{value:new wn(0)}}]),vertexShader:nr.meshlambert_vert,fragmentShader:nr.meshlambert_frag},phong:{uniforms:_s([Jt.common,Jt.specularmap,Jt.envmap,Jt.aomap,Jt.lightmap,Jt.emissivemap,Jt.bumpmap,Jt.normalmap,Jt.displacementmap,Jt.fog,Jt.lights,{emissive:{value:new wn(0)},specular:{value:new wn(1118481)},shininess:{value:30}}]),vertexShader:nr.meshphong_vert,fragmentShader:nr.meshphong_frag},standard:{uniforms:_s([Jt.common,Jt.envmap,Jt.aomap,Jt.lightmap,Jt.emissivemap,Jt.bumpmap,Jt.normalmap,Jt.displacementmap,Jt.roughnessmap,Jt.metalnessmap,Jt.fog,Jt.lights,{emissive:{value:new wn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:nr.meshphysical_vert,fragmentShader:nr.meshphysical_frag},toon:{uniforms:_s([Jt.common,Jt.aomap,Jt.lightmap,Jt.emissivemap,Jt.bumpmap,Jt.normalmap,Jt.displacementmap,Jt.gradientmap,Jt.fog,Jt.lights,{emissive:{value:new wn(0)}}]),vertexShader:nr.meshtoon_vert,fragmentShader:nr.meshtoon_frag},matcap:{uniforms:_s([Jt.common,Jt.bumpmap,Jt.normalmap,Jt.displacementmap,Jt.fog,{matcap:{value:null}}]),vertexShader:nr.meshmatcap_vert,fragmentShader:nr.meshmatcap_frag},points:{uniforms:_s([Jt.points,Jt.fog]),vertexShader:nr.points_vert,fragmentShader:nr.points_frag},dashed:{uniforms:_s([Jt.common,Jt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:nr.linedashed_vert,fragmentShader:nr.linedashed_frag},depth:{uniforms:_s([Jt.common,Jt.displacementmap]),vertexShader:nr.depth_vert,fragmentShader:nr.depth_frag},normal:{uniforms:_s([Jt.common,Jt.bumpmap,Jt.normalmap,Jt.displacementmap,{opacity:{value:1}}]),vertexShader:nr.meshnormal_vert,fragmentShader:nr.meshnormal_frag},sprite:{uniforms:_s([Jt.sprite,Jt.fog]),vertexShader:nr.sprite_vert,fragmentShader:nr.sprite_frag},background:{uniforms:{uvTransform:{value:new Jn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:nr.background_vert,fragmentShader:nr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Jn}},vertexShader:nr.backgroundCube_vert,fragmentShader:nr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:nr.cube_vert,fragmentShader:nr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:nr.equirect_vert,fragmentShader:nr.equirect_frag},distanceRGBA:{uniforms:_s([Jt.common,Jt.displacementmap,{referencePosition:{value:new He},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:nr.distanceRGBA_vert,fragmentShader:nr.distanceRGBA_frag},shadow:{uniforms:_s([Jt.lights,Jt.fog,{color:{value:new wn(0)},opacity:{value:1}}]),vertexShader:nr.shadow_vert,fragmentShader:nr.shadow_frag}};Rc.physical={uniforms:_s([Rc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Jn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Jn},clearcoatNormalScale:{value:new qt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Jn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Jn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Jn},sheen:{value:0},sheenColor:{value:new wn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Jn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Jn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Jn},transmissionSamplerSize:{value:new qt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Jn},attenuationDistance:{value:0},attenuationColor:{value:new wn(0)},specularColor:{value:new wn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Jn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Jn},anisotropyVector:{value:new qt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Jn}}]),vertexShader:nr.meshphysical_vert,fragmentShader:nr.meshphysical_frag};const o_={r:0,b:0,g:0},jh=new au,Bqe=new Ci;function jqe(t,e,n,r,i,o,s){const a=new wn(0);let l=o===!0?0:1,c,u,d=null,f=0,p=null;function b(w){let S=w.isScene===!0?w.background:null;return S&&S.isTexture&&(S=(w.backgroundBlurriness>0?n:e).get(S)),S}function v(w){let S=!1;const P=b(w);P===null?g(a,l):P&&P.isColor&&(g(P,1),S=!0);const I=t.xr.getEnvironmentBlendMode();I==="additive"?r.buffers.color.setClear(0,0,0,1,s):I==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,s),(t.autoClear||S)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function m(w,S){const P=b(S);P&&(P.isCubeTexture||P.mapping===GT)?(u===void 0&&(u=new Mn(new il(1,1,1),new rh({name:"BackgroundCubeMaterial",uniforms:Qv(Rc.backgroundCube.uniforms),vertexShader:Rc.backgroundCube.vertexShader,fragmentShader:Rc.backgroundCube.fragmentShader,side:ca,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(I,M,D){this.matrixWorld.copyPosition(D.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),jh.copy(S.backgroundRotation),jh.x*=-1,jh.y*=-1,jh.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(jh.y*=-1,jh.z*=-1),u.material.uniforms.envMap.value=P,u.material.uniforms.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(Bqe.makeRotationFromEuler(jh)),u.material.toneMapped=Rr.getTransfer(P.colorSpace)!==ei,(d!==P||f!==P.version||p!==t.toneMapping)&&(u.material.needsUpdate=!0,d=P,f=P.version,p=t.toneMapping),u.layers.enableAll(),w.unshift(u,u.geometry,u.material,0,0,null)):P&&P.isTexture&&(c===void 0&&(c=new Mn(new Kf(2,2),new rh({name:"BackgroundMaterial",uniforms:Qv(Rc.background.uniforms),vertexShader:Rc.background.vertexShader,fragmentShader:Rc.background.fragmentShader,side:Sd,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=P,c.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,c.material.toneMapped=Rr.getTransfer(P.colorSpace)!==ei,P.matrixAutoUpdate===!0&&P.updateMatrix(),c.material.uniforms.uvTransform.value.copy(P.matrix),(d!==P||f!==P.version||p!==t.toneMapping)&&(c.material.needsUpdate=!0,d=P,f=P.version,p=t.toneMapping),c.layers.enableAll(),w.unshift(c,c.geometry,c.material,0,0,null))}function g(w,S){w.getRGB(o_,ste(t)),r.buffers.color.setClear(o_.r,o_.g,o_.b,S,s)}function x(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return a},setClearColor:function(w,S=1){a.set(w),l=S,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(w){l=w,g(a,l)},render:v,addToRenderList:m,dispose:x}}function Uqe(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},i=f(null);let o=i,s=!1;function a(_,A,R,F,L){let N=!1;const U=d(F,R,A);o!==U&&(o=U,c(o.object)),N=p(_,F,R,L),N&&b(_,F,R,L),L!==null&&e.update(L,t.ELEMENT_ARRAY_BUFFER),(N||s)&&(s=!1,S(_,A,R,F),L!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(L).buffer))}function l(){return t.createVertexArray()}function c(_){return t.bindVertexArray(_)}function u(_){return t.deleteVertexArray(_)}function d(_,A,R){const F=R.wireframe===!0;let L=r[_.id];L===void 0&&(L={},r[_.id]=L);let N=L[A.id];N===void 0&&(N={},L[A.id]=N);let U=N[F];return U===void 0&&(U=f(l()),N[F]=U),U}function f(_){const A=[],R=[],F=[];for(let L=0;L<n;L++)A[L]=0,R[L]=0,F[L]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:A,enabledAttributes:R,attributeDivisors:F,object:_,attributes:{},index:null}}function p(_,A,R,F){const L=o.attributes,N=A.attributes;let U=0;const $=R.getAttributes();for(const B in $)if($[B].location>=0){const q=L[B];let z=N[B];if(z===void 0&&(B==="instanceMatrix"&&_.instanceMatrix&&(z=_.instanceMatrix),B==="instanceColor"&&_.instanceColor&&(z=_.instanceColor)),q===void 0||q.attribute!==z||z&&q.data!==z.data)return!0;U++}return o.attributesNum!==U||o.index!==F}function b(_,A,R,F){const L={},N=A.attributes;let U=0;const $=R.getAttributes();for(const B in $)if($[B].location>=0){let q=N[B];q===void 0&&(B==="instanceMatrix"&&_.instanceMatrix&&(q=_.instanceMatrix),B==="instanceColor"&&_.instanceColor&&(q=_.instanceColor));const z={};z.attribute=q,q&&q.data&&(z.data=q.data),L[B]=z,U++}o.attributes=L,o.attributesNum=U,o.index=F}function v(){const _=o.newAttributes;for(let A=0,R=_.length;A<R;A++)_[A]=0}function m(_){g(_,0)}function g(_,A){const R=o.newAttributes,F=o.enabledAttributes,L=o.attributeDivisors;R[_]=1,F[_]===0&&(t.enableVertexAttribArray(_),F[_]=1),L[_]!==A&&(t.vertexAttribDivisor(_,A),L[_]=A)}function x(){const _=o.newAttributes,A=o.enabledAttributes;for(let R=0,F=A.length;R<F;R++)A[R]!==_[R]&&(t.disableVertexAttribArray(R),A[R]=0)}function w(_,A,R,F,L,N,U){U===!0?t.vertexAttribIPointer(_,A,R,L,N):t.vertexAttribPointer(_,A,R,F,L,N)}function S(_,A,R,F){v();const L=F.attributes,N=R.getAttributes(),U=A.defaultAttributeValues;for(const $ in N){const B=N[$];if(B.location>=0){let H=L[$];if(H===void 0&&($==="instanceMatrix"&&_.instanceMatrix&&(H=_.instanceMatrix),$==="instanceColor"&&_.instanceColor&&(H=_.instanceColor)),H!==void 0){const q=H.normalized,z=H.itemSize,G=e.get(H);if(G===void 0)continue;const K=G.buffer,Z=G.type,ee=G.bytesPerElement,V=Z===t.INT||Z===t.UNSIGNED_INT||H.gpuType===AL;if(H.isInterleavedBufferAttribute){const J=H.data,oe=J.stride,ne=H.offset;if(J.isInstancedInterleavedBuffer){for(let pe=0;pe<B.locationSize;pe++)g(B.location+pe,J.meshPerAttribute);_.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=J.meshPerAttribute*J.count)}else for(let pe=0;pe<B.locationSize;pe++)m(B.location+pe);t.bindBuffer(t.ARRAY_BUFFER,K);for(let pe=0;pe<B.locationSize;pe++)w(B.location+pe,z/B.locationSize,Z,q,oe*ee,(ne+z/B.locationSize*pe)*ee,V)}else{if(H.isInstancedBufferAttribute){for(let J=0;J<B.locationSize;J++)g(B.location+J,H.meshPerAttribute);_.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=H.meshPerAttribute*H.count)}else for(let J=0;J<B.locationSize;J++)m(B.location+J);t.bindBuffer(t.ARRAY_BUFFER,K);for(let J=0;J<B.locationSize;J++)w(B.location+J,z/B.locationSize,Z,q,z*ee,z/B.locationSize*J*ee,V)}}else if(U!==void 0){const q=U[$];if(q!==void 0)switch(q.length){case 2:t.vertexAttrib2fv(B.location,q);break;case 3:t.vertexAttrib3fv(B.location,q);break;case 4:t.vertexAttrib4fv(B.location,q);break;default:t.vertexAttrib1fv(B.location,q)}}}}x()}function P(){D();for(const _ in r){const A=r[_];for(const R in A){const F=A[R];for(const L in F)u(F[L].object),delete F[L];delete A[R]}delete r[_]}}function I(_){if(r[_.id]===void 0)return;const A=r[_.id];for(const R in A){const F=A[R];for(const L in F)u(F[L].object),delete F[L];delete A[R]}delete r[_.id]}function M(_){for(const A in r){const R=r[A];if(R[_.id]===void 0)continue;const F=R[_.id];for(const L in F)u(F[L].object),delete F[L];delete R[_.id]}}function D(){E(),s=!0,o!==i&&(o=i,c(o.object))}function E(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:D,resetDefaultState:E,dispose:P,releaseStatesOfGeometry:I,releaseStatesOfProgram:M,initAttributes:v,enableAttribute:m,disableUnusedAttributes:x}}function zqe(t,e,n){let r;function i(c){r=c}function o(c,u){t.drawArrays(r,c,u),n.update(u,r,1)}function s(c,u,d){d!==0&&(t.drawArraysInstanced(r,c,u,d),n.update(u,r,d))}function a(c,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,c,0,u,0,d);let p=0;for(let b=0;b<d;b++)p+=u[b];n.update(p,r,1)}function l(c,u,d,f){if(d===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let b=0;b<c.length;b++)s(c[b],u[b],f[b]);else{p.multiDrawArraysInstancedWEBGL(r,c,0,u,0,f,0,d);let b=0;for(let v=0;v<d;v++)b+=u[v]*f[v];n.update(b,r,1)}}this.setMode=i,this.render=o,this.renderInstances=s,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function Vqe(t,e,n,r){let i;function o(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const M=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(M){return!(M!==rc&&r.convert(M)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(M){const D=M===Hw&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(M!==_d&&r.convert(M)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&M!==Yu&&!D)}function l(M){if(M==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return M==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=n.precision!==void 0?n.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const d=n.logarithmicDepthBuffer===!0,f=n.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),p=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),b=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=t.getParameter(t.MAX_TEXTURE_SIZE),m=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),g=t.getParameter(t.MAX_VERTEX_ATTRIBS),x=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),w=t.getParameter(t.MAX_VARYING_VECTORS),S=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),P=b>0,I=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:d,reverseDepthBuffer:f,maxTextures:p,maxVertexTextures:b,maxTextureSize:v,maxCubemapSize:m,maxAttributes:g,maxVertexUniforms:x,maxVaryings:w,maxFragmentUniforms:S,vertexTextures:P,maxSamples:I}}function Wqe(t){const e=this;let n=null,r=0,i=!1,o=!1;const s=new Xh,a=new Jn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){const p=d.length!==0||f||r!==0||i;return i=f,r=d.length,p},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(d,f){n=u(d,f,0)},this.setState=function(d,f,p){const b=d.clippingPlanes,v=d.clipIntersection,m=d.clipShadows,g=t.get(d);if(!i||b===null||b.length===0||o&&!m)o?u(null):c();else{const x=o?0:r,w=x*4;let S=g.clippingState||null;l.value=S,S=u(b,f,w,p);for(let P=0;P!==w;++P)S[P]=n[P];g.clippingState=S,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=x}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,f,p,b){const v=d!==null?d.length:0;let m=null;if(v!==0){if(m=l.value,b!==!0||m===null){const g=p+v*4,x=f.matrixWorldInverse;a.getNormalMatrix(x),(m===null||m.length<g)&&(m=new Float32Array(g));for(let w=0,S=p;w!==v;++w,S+=4)s.copy(d[w]).applyMatrix4(x,a),s.normal.toArray(m,S),m[S+3]=s.constant}l.value=m,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,m}}function $qe(t){let e=new WeakMap;function n(s,a){return a===kk?s.mapping=Kv:a===Fk&&(s.mapping=Yv),s}function r(s){if(s&&s.isTexture){const a=s.mapping;if(a===kk||a===Fk)if(e.has(s)){const l=e.get(s).texture;return n(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const c=new d7e(l.height);return c.fromEquirectangularTexture(t,s),e.set(s,c),s.addEventListener("dispose",i),n(c.texture,s.mapping)}else return null}}return s}function i(s){const a=s.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}const zg=4,F9=[.125,.215,.35,.446,.526,.582],ip=20,PD=new xte,O9=new wn;let DD=null,RD=0,ID=0,kD=!1;const Qh=(1+Math.sqrt(5))/2,ug=1/Qh,N9=[new He(-Qh,ug,0),new He(Qh,ug,0),new He(-ug,0,Qh),new He(ug,0,Qh),new He(0,Qh,-ug),new He(0,Qh,ug),new He(-1,1,-1),new He(1,1,-1),new He(-1,1,1),new He(1,1,1)],Hqe=new He;class L9{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100,o={}){const{size:s=256,position:a=Hqe}=o;DD=this._renderer.getRenderTarget(),RD=this._renderer.getActiveCubeFace(),ID=this._renderer.getActiveMipmapLevel(),kD=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,r,i,l,a),n>0&&this._blur(l,0,0,n),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=U9(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=j9(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(DD,RD,ID),this._renderer.xr.enabled=kD,e.scissorTest=!1,s_(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Kv||e.mapping===Yv?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),DD=this._renderer.getRenderTarget(),RD=this._renderer.getActiveCubeFace(),ID=this._renderer.getActiveMipmapLevel(),kD=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:nc,minFilter:nc,generateMipmaps:!1,type:Hw,format:rc,colorSpace:Xv,depthBuffer:!1},i=B9(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=B9(e,n,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Gqe(o)),this._blurMaterial=qqe(o,e,n)}return i}_compileMaterial(e){const n=new Mn(this._lodPlanes[0],e);this._renderer.compile(n,PD)}_sceneToCubeUV(e,n,r,i,o){const l=new cl(90,1,n,r),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,f=d.autoClear,p=d.toneMapping;d.getClearColor(O9),d.toneMapping=Gf,d.autoClear=!1;const b=new Ts({name:"PMREM.Background",side:ca,depthWrite:!1,depthTest:!1}),v=new Mn(new il,b);let m=!1;const g=e.background;g?g.isColor&&(b.color.copy(g),e.background=null,m=!0):(b.color.copy(O9),m=!0);for(let x=0;x<6;x++){const w=x%3;w===0?(l.up.set(0,c[x],0),l.position.set(o.x,o.y,o.z),l.lookAt(o.x+u[x],o.y,o.z)):w===1?(l.up.set(0,0,c[x]),l.position.set(o.x,o.y,o.z),l.lookAt(o.x,o.y+u[x],o.z)):(l.up.set(0,c[x],0),l.position.set(o.x,o.y,o.z),l.lookAt(o.x,o.y,o.z+u[x]));const S=this._cubeSize;s_(i,w*S,x>2?S:0,S,S),d.setRenderTarget(i),m&&d.render(v,l),d.render(e,l)}v.geometry.dispose(),v.material.dispose(),d.toneMapping=p,d.autoClear=f,e.background=g}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===Kv||e.mapping===Yv;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=U9()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=j9());const o=i?this._cubemapMaterial:this._equirectMaterial,s=new Mn(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=e;const l=this._cubeSize;s_(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(s,PD)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const i=this._lodPlanes.length;for(let o=1;o<i;o++){const s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),a=N9[(i-o-1)%N9.length];this._blur(e,o-1,o,s,a)}n.autoClear=r}_blur(e,n,r,i,o){const s=this._pingPongRenderTarget;this._halfBlur(e,s,n,r,i,"latitudinal",o),this._halfBlur(s,e,r,r,i,"longitudinal",o)}_halfBlur(e,n,r,i,o,s,a){const l=this._renderer,c=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new Mn(this._lodPlanes[i],c),f=c.uniforms,p=this._sizeLods[r]-1,b=isFinite(o)?Math.PI/(2*p):2*Math.PI/(2*ip-1),v=o/b,m=isFinite(o)?1+Math.floor(u*v):ip;m>ip&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${ip}`);const g=[];let x=0;for(let M=0;M<ip;++M){const D=M/v,E=Math.exp(-D*D/2);g.push(E),M===0?x+=E:M<m&&(x+=2*E)}for(let M=0;M<g.length;M++)g[M]=g[M]/x;f.envMap.value=e.texture,f.samples.value=m,f.weights.value=g,f.latitudinal.value=s==="latitudinal",a&&(f.poleAxis.value=a);const{_lodMax:w}=this;f.dTheta.value=b,f.mipInt.value=w-r;const S=this._sizeLods[i],P=3*S*(i>w-zg?i-w+zg:0),I=4*(this._cubeSize-S);s_(n,P,I,3*S,2*S),l.setRenderTarget(n),l.render(d,PD)}}function Gqe(t){const e=[],n=[],r=[];let i=t;const o=t-zg+1+F9.length;for(let s=0;s<o;s++){const a=Math.pow(2,i);n.push(a);let l=1/a;s>t-zg?l=F9[s-t+zg-1]:s===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,d=1+c,f=[u,u,d,u,d,d,u,u,d,d,u,d],p=6,b=6,v=3,m=2,g=1,x=new Float32Array(v*b*p),w=new Float32Array(m*b*p),S=new Float32Array(g*b*p);for(let I=0;I<p;I++){const M=I%3*2/3-1,D=I>2?0:-1,E=[M,D,0,M+2/3,D,0,M+2/3,D+1,0,M,D,0,M+2/3,D+1,0,M,D+1,0];x.set(E,v*b*I),w.set(f,m*b*I);const _=[I,I,I,I,I,I];S.set(_,g*b*I)}const P=new fa;P.setAttribute("position",new nu(x,v)),P.setAttribute("uv",new nu(w,m)),P.setAttribute("faceIndex",new nu(S,g)),e.push(P),i>zg&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function B9(t,e,n){const r=new nm(t,e,n);return r.texture.mapping=GT,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function s_(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function qqe(t,e,n){const r=new Float32Array(ip),i=new He(0,1,0);return new rh({name:"SphericalGaussianBlur",defines:{n:ip,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:WL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Hf,depthTest:!1,depthWrite:!1})}function j9(){return new rh({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:WL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Hf,depthTest:!1,depthWrite:!1})}function U9(){return new rh({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:WL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Hf,depthTest:!1,depthWrite:!1})}function WL(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Kqe(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===kk||l===Fk,u=l===Kv||l===Yv;if(c||u){let d=e.get(a);const f=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==f)return n===null&&(n=new L9(t)),d=c?n.fromEquirectangular(a,d):n.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{const p=a.image;return c&&p&&p.height>0||u&&p&&i(p)?(n===null&&(n=new L9(t)),d=c?n.fromEquirectangular(a):n.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",o),d.texture):null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function o(a){const l=a.target;l.removeEventListener("dispose",o);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:s}}function Yqe(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const i=n(r);return i===null&&pE("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function Xqe(t,e,n,r){const i={},o=new WeakMap;function s(d){const f=d.target;f.index!==null&&e.remove(f.index);for(const b in f.attributes)e.remove(f.attributes[b]);f.removeEventListener("dispose",s),delete i[f.id];const p=o.get(f);p&&(e.remove(p),o.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,n.memory.geometries--}function a(d,f){return i[f.id]===!0||(f.addEventListener("dispose",s),i[f.id]=!0,n.memory.geometries++),f}function l(d){const f=d.attributes;for(const p in f)e.update(f[p],t.ARRAY_BUFFER)}function c(d){const f=[],p=d.index,b=d.attributes.position;let v=0;if(p!==null){const x=p.array;v=p.version;for(let w=0,S=x.length;w<S;w+=3){const P=x[w+0],I=x[w+1],M=x[w+2];f.push(P,I,I,M,M,P)}}else if(b!==void 0){const x=b.array;v=b.version;for(let w=0,S=x.length/3-1;w<S;w+=3){const P=w+0,I=w+1,M=w+2;f.push(P,I,I,M,M,P)}}else return;const m=new(ete(f)?ote:ite)(f,1);m.version=v;const g=o.get(d);g&&e.remove(g),o.set(d,m)}function u(d){const f=o.get(d);if(f){const p=d.index;p!==null&&f.version<p.version&&c(d)}else c(d);return o.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function Qqe(t,e,n){let r;function i(f){r=f}let o,s;function a(f){o=f.type,s=f.bytesPerElement}function l(f,p){t.drawElements(r,p,o,f*s),n.update(p,r,1)}function c(f,p,b){b!==0&&(t.drawElementsInstanced(r,p,o,f*s,b),n.update(p,r,b))}function u(f,p,b){if(b===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,p,0,o,f,0,b);let m=0;for(let g=0;g<b;g++)m+=p[g];n.update(m,r,1)}function d(f,p,b,v){if(b===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let g=0;g<f.length;g++)c(f[g]/s,p[g],v[g]);else{m.multiDrawElementsInstancedWEBGL(r,p,0,o,f,0,v,0,b);let g=0;for(let x=0;x<b;x++)g+=p[x]*v[x];n.update(g,r,1)}}this.setMode=i,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function Zqe(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,s,a){switch(n.calls++,s){case t.TRIANGLES:n.triangles+=a*(o/3);break;case t.LINES:n.lines+=a*(o/2);break;case t.LINE_STRIP:n.lines+=a*(o-1);break;case t.LINE_LOOP:n.lines+=a*o;break;case t.POINTS:n.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function Jqe(t,e,n){const r=new WeakMap,i=new $i;function o(s,a,l){const c=s.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=u!==void 0?u.length:0;let f=r.get(a);if(f===void 0||f.count!==d){let _=function(){D.dispose(),r.delete(a),a.removeEventListener("dispose",_)};var p=_;f!==void 0&&f.texture.dispose();const b=a.morphAttributes.position!==void 0,v=a.morphAttributes.normal!==void 0,m=a.morphAttributes.color!==void 0,g=a.morphAttributes.position||[],x=a.morphAttributes.normal||[],w=a.morphAttributes.color||[];let S=0;b===!0&&(S=1),v===!0&&(S=2),m===!0&&(S=3);let P=a.attributes.position.count*S,I=1;P>e.maxTextureSize&&(I=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const M=new Float32Array(P*I*4*d),D=new tte(M,P,I,d);D.type=Yu,D.needsUpdate=!0;const E=S*4;for(let A=0;A<d;A++){const R=g[A],F=x[A],L=w[A],N=P*I*4*A;for(let U=0;U<R.count;U++){const $=U*E;b===!0&&(i.fromBufferAttribute(R,U),M[N+$+0]=i.x,M[N+$+1]=i.y,M[N+$+2]=i.z,M[N+$+3]=0),v===!0&&(i.fromBufferAttribute(F,U),M[N+$+4]=i.x,M[N+$+5]=i.y,M[N+$+6]=i.z,M[N+$+7]=0),m===!0&&(i.fromBufferAttribute(L,U),M[N+$+8]=i.x,M[N+$+9]=i.y,M[N+$+10]=i.z,M[N+$+11]=L.itemSize===4?i.w:1)}}f={count:d,texture:D,size:new qt(P,I)},r.set(a,f),a.addEventListener("dispose",_)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",s.morphTexture,n);else{let b=0;for(let m=0;m<c.length;m++)b+=c[m];const v=a.morphTargetsRelative?1:1-b;l.getUniforms().setValue(t,"morphTargetBaseInfluence",v),l.getUniforms().setValue(t,"morphTargetInfluences",c)}l.getUniforms().setValue(t,"morphTargetsTexture",f.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",f.size)}return{update:o}}function eKe(t,e,n,r){let i=new WeakMap;function o(l){const c=r.render.frame,u=l.geometry,d=e.get(l,u);if(i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;i.get(f)!==c&&(f.update(),i.set(f,c))}return d}function s(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:o,dispose:s}}const wte=new Ns,z9=new cte(1,1),Ste=new tte,_te=new K$e,Ete=new lte,V9=[],W9=[],$9=new Float32Array(16),H9=new Float32Array(9),G9=new Float32Array(4);function w0(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=V9[i];if(o===void 0&&(o=new Float32Array(i),V9[i]=o),e!==0){r.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=n,t[s].toArray(o,a)}return o}function wo(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function So(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function qT(t,e){let n=W9[e];n===void 0&&(n=new Int32Array(e),W9[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function tKe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function nKe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(wo(n,e))return;t.uniform2fv(this.addr,e),So(n,e)}}function rKe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(wo(n,e))return;t.uniform3fv(this.addr,e),So(n,e)}}function iKe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(wo(n,e))return;t.uniform4fv(this.addr,e),So(n,e)}}function oKe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(wo(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),So(n,e)}else{if(wo(n,r))return;G9.set(r),t.uniformMatrix2fv(this.addr,!1,G9),So(n,r)}}function sKe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(wo(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),So(n,e)}else{if(wo(n,r))return;H9.set(r),t.uniformMatrix3fv(this.addr,!1,H9),So(n,r)}}function aKe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(wo(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),So(n,e)}else{if(wo(n,r))return;$9.set(r),t.uniformMatrix4fv(this.addr,!1,$9),So(n,r)}}function lKe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function cKe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(wo(n,e))return;t.uniform2iv(this.addr,e),So(n,e)}}function uKe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(wo(n,e))return;t.uniform3iv(this.addr,e),So(n,e)}}function dKe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(wo(n,e))return;t.uniform4iv(this.addr,e),So(n,e)}}function fKe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function hKe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(wo(n,e))return;t.uniform2uiv(this.addr,e),So(n,e)}}function pKe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(wo(n,e))return;t.uniform3uiv(this.addr,e),So(n,e)}}function mKe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(wo(n,e))return;t.uniform4uiv(this.addr,e),So(n,e)}}function gKe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);let o;this.type===t.SAMPLER_2D_SHADOW?(z9.compareFunction=Jee,o=z9):o=wte,n.setTexture2D(e||o,i)}function vKe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||_te,i)}function yKe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||Ete,i)}function xKe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Ste,i)}function bKe(t){switch(t){case 5126:return tKe;case 35664:return nKe;case 35665:return rKe;case 35666:return iKe;case 35674:return oKe;case 35675:return sKe;case 35676:return aKe;case 5124:case 35670:return lKe;case 35667:case 35671:return cKe;case 35668:case 35672:return uKe;case 35669:case 35673:return dKe;case 5125:return fKe;case 36294:return hKe;case 36295:return pKe;case 36296:return mKe;case 35678:case 36198:case 36298:case 36306:case 35682:return gKe;case 35679:case 36299:case 36307:return vKe;case 35680:case 36300:case 36308:case 36293:return yKe;case 36289:case 36303:case 36311:case 36292:return xKe}}function wKe(t,e){t.uniform1fv(this.addr,e)}function SKe(t,e){const n=w0(e,this.size,2);t.uniform2fv(this.addr,n)}function _Ke(t,e){const n=w0(e,this.size,3);t.uniform3fv(this.addr,n)}function EKe(t,e){const n=w0(e,this.size,4);t.uniform4fv(this.addr,n)}function CKe(t,e){const n=w0(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function AKe(t,e){const n=w0(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function TKe(t,e){const n=w0(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function MKe(t,e){t.uniform1iv(this.addr,e)}function PKe(t,e){t.uniform2iv(this.addr,e)}function DKe(t,e){t.uniform3iv(this.addr,e)}function RKe(t,e){t.uniform4iv(this.addr,e)}function IKe(t,e){t.uniform1uiv(this.addr,e)}function kKe(t,e){t.uniform2uiv(this.addr,e)}function FKe(t,e){t.uniform3uiv(this.addr,e)}function OKe(t,e){t.uniform4uiv(this.addr,e)}function NKe(t,e,n){const r=this.cache,i=e.length,o=qT(n,i);wo(r,o)||(t.uniform1iv(this.addr,o),So(r,o));for(let s=0;s!==i;++s)n.setTexture2D(e[s]||wte,o[s])}function LKe(t,e,n){const r=this.cache,i=e.length,o=qT(n,i);wo(r,o)||(t.uniform1iv(this.addr,o),So(r,o));for(let s=0;s!==i;++s)n.setTexture3D(e[s]||_te,o[s])}function BKe(t,e,n){const r=this.cache,i=e.length,o=qT(n,i);wo(r,o)||(t.uniform1iv(this.addr,o),So(r,o));for(let s=0;s!==i;++s)n.setTextureCube(e[s]||Ete,o[s])}function jKe(t,e,n){const r=this.cache,i=e.length,o=qT(n,i);wo(r,o)||(t.uniform1iv(this.addr,o),So(r,o));for(let s=0;s!==i;++s)n.setTexture2DArray(e[s]||Ste,o[s])}function UKe(t){switch(t){case 5126:return wKe;case 35664:return SKe;case 35665:return _Ke;case 35666:return EKe;case 35674:return CKe;case 35675:return AKe;case 35676:return TKe;case 5124:case 35670:return MKe;case 35667:case 35671:return PKe;case 35668:case 35672:return DKe;case 35669:case 35673:return RKe;case 5125:return IKe;case 36294:return kKe;case 36295:return FKe;case 36296:return OKe;case 35678:case 36198:case 36298:case 36306:case 35682:return NKe;case 35679:case 36299:case 36307:return LKe;case 35680:case 36300:case 36308:case 36293:return BKe;case 36289:case 36303:case 36311:case 36292:return jKe}}class zKe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=bKe(n.type)}}class VKe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=UKe(n.type)}}class WKe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let o=0,s=i.length;o!==s;++o){const a=i[o];a.setValue(e,n[a.id],r)}}}const FD=/(\w+)(\])?(\[|\.)?/g;function q9(t,e){t.seq.push(e),t.map[e.id]=e}function $Ke(t,e,n){const r=t.name,i=r.length;for(FD.lastIndex=0;;){const o=FD.exec(r),s=FD.lastIndex;let a=o[1];const l=o[2]==="]",c=o[3];if(l&&(a=a|0),c===void 0||c==="["&&s+2===i){q9(n,c===void 0?new zKe(a,t,e):new VKe(a,t,e));break}else{let d=n.map[a];d===void 0&&(d=new WKe(a),q9(n,d)),n=d}}}class mE{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const o=e.getActiveUniform(n,i),s=e.getUniformLocation(n,o.name);$Ke(o,s,this)}}setValue(e,n,r,i){const o=this.map[n];o!==void 0&&o.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let o=0,s=n.length;o!==s;++o){const a=n[o],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,o=e.length;i!==o;++i){const s=e[i];s.id in n&&r.push(s)}return r}}function K9(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const HKe=37297;let GKe=0;function qKe(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let s=i;s<o;s++){const a=s+1;r.push(`${a===e?">":" "} ${a}: ${n[s]}`)}return r.join(`
`)}const Y9=new Jn;function KKe(t){Rr._getMatrix(Y9,Rr.workingColorSpace,t);const e=`mat3( ${Y9.elements.map(n=>n.toFixed(4))} )`;switch(Rr.getTransfer(t)){case GC:return[e,"LinearTransferOETF"];case ei:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function X9(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const s=parseInt(o[1]);return n.toUpperCase()+`

`+i+`

`+qKe(t.getShaderSource(e),s)}else return i}function YKe(t,e){const n=KKe(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function XKe(t,e){let n;switch(e){case b$e:n="Linear";break;case w$e:n="Reinhard";break;case S$e:n="Cineon";break;case _$e:n="ACESFilmic";break;case C$e:n="AgX";break;case A$e:n="Neutral";break;case E$e:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const a_=new He;function QKe(){Rr.getLuminanceCoefficients(a_);const t=a_.x.toFixed(4),e=a_.y.toFixed(4),n=a_.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function ZKe(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(qy).join(`
`)}function JKe(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function eYe(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const o=t.getActiveAttrib(e,i),s=o.name;let a=1;o.type===t.FLOAT_MAT2&&(a=2),o.type===t.FLOAT_MAT3&&(a=3),o.type===t.FLOAT_MAT4&&(a=4),n[s]={type:o.type,location:t.getAttribLocation(e,s),locationSize:a}}return n}function qy(t){return t!==""}function Q9(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Z9(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const tYe=/^[ \t]*#include +<([\w\d./]+)>/gm;function hF(t){return t.replace(tYe,rYe)}const nYe=new Map;function rYe(t,e){let n=nr[e];if(n===void 0){const r=nYe.get(e);if(r!==void 0)n=nr[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return hF(n)}const iYe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function J9(t){return t.replace(iYe,oYe)}function oYe(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function eW(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function sYe(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===Bee?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===jee?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Fu&&(e="SHADOWMAP_TYPE_VSM"),e}function aYe(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Kv:case Yv:e="ENVMAP_TYPE_CUBE";break;case GT:e="ENVMAP_TYPE_CUBE_UV";break}return e}function lYe(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Yv:e="ENVMAP_MODE_REFRACTION";break}return e}function cYe(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Uee:e="ENVMAP_BLENDING_MULTIPLY";break;case y$e:e="ENVMAP_BLENDING_MIX";break;case x$e:e="ENVMAP_BLENDING_ADD";break}return e}function uYe(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function dYe(t,e,n,r){const i=t.getContext(),o=n.defines;let s=n.vertexShader,a=n.fragmentShader;const l=sYe(n),c=aYe(n),u=lYe(n),d=cYe(n),f=uYe(n),p=ZKe(n),b=JKe(o),v=i.createProgram();let m,g,x=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(m=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b].filter(qy).join(`
`),m.length>0&&(m+=`
`),g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b].filter(qy).join(`
`),g.length>0&&(g+=`
`)):(m=[eW(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(qy).join(`
`),g=[eW(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Gf?"#define TONE_MAPPING":"",n.toneMapping!==Gf?nr.tonemapping_pars_fragment:"",n.toneMapping!==Gf?XKe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",nr.colorspace_pars_fragment,YKe("linearToOutputTexel",n.outputColorSpace),QKe(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(qy).join(`
`)),s=hF(s),s=Q9(s,n),s=Z9(s,n),a=hF(a),a=Q9(a,n),a=Z9(a,n),s=J9(s),a=J9(a),n.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,m=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,g=["#define varying in",n.glslVersion===s9?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===s9?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const w=x+m+s,S=x+g+a,P=K9(i,i.VERTEX_SHADER,w),I=K9(i,i.FRAGMENT_SHADER,S);i.attachShader(v,P),i.attachShader(v,I),n.index0AttributeName!==void 0?i.bindAttribLocation(v,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v);function M(A){if(t.debug.checkShaderErrors){const R=i.getProgramInfoLog(v).trim(),F=i.getShaderInfoLog(P).trim(),L=i.getShaderInfoLog(I).trim();let N=!0,U=!0;if(i.getProgramParameter(v,i.LINK_STATUS)===!1)if(N=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,v,P,I);else{const $=X9(i,P,"vertex"),B=X9(i,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(v,i.VALIDATE_STATUS)+`

Material Name: `+A.name+`
Material Type: `+A.type+`

Program Info Log: `+R+`
`+$+`
`+B)}else R!==""?console.warn("THREE.WebGLProgram: Program Info Log:",R):(F===""||L==="")&&(U=!1);U&&(A.diagnostics={runnable:N,programLog:R,vertexShader:{log:F,prefix:m},fragmentShader:{log:L,prefix:g}})}i.deleteShader(P),i.deleteShader(I),D=new mE(i,v),E=eYe(i,v)}let D;this.getUniforms=function(){return D===void 0&&M(this),D};let E;this.getAttributes=function(){return E===void 0&&M(this),E};let _=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return _===!1&&(_=i.getProgramParameter(v,HKe)),_},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=GKe++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=P,this.fragmentShader=I,this}let fYe=0;class hYe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),o=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new pYe(e),n.set(e,r)),r}}class pYe{constructor(e){this.id=fYe++,this.code=e,this.usedTimes=0}}function mYe(t,e,n,r,i,o,s){const a=new FL,l=new hYe,c=new Set,u=[],d=i.logarithmicDepthBuffer,f=i.vertexTextures;let p=i.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(E){return c.add(E),E===0?"uv":`uv${E}`}function m(E,_,A,R,F){const L=R.fog,N=F.geometry,U=E.isMeshStandardMaterial?R.environment:null,$=(E.isMeshStandardMaterial?n:e).get(E.envMap||U),B=$&&$.mapping===GT?$.image.height:null,H=b[E.type];E.precision!==null&&(p=i.getMaxPrecision(E.precision),p!==E.precision&&console.warn("THREE.WebGLProgram.getParameters:",E.precision,"not supported, using",p,"instead."));const q=N.morphAttributes.position||N.morphAttributes.normal||N.morphAttributes.color,z=q!==void 0?q.length:0;let G=0;N.morphAttributes.position!==void 0&&(G=1),N.morphAttributes.normal!==void 0&&(G=2),N.morphAttributes.color!==void 0&&(G=3);let K,Z,ee,V;if(H){const Pe=Rc[H];K=Pe.vertexShader,Z=Pe.fragmentShader}else K=E.vertexShader,Z=E.fragmentShader,l.update(E),ee=l.getVertexShaderID(E),V=l.getFragmentShaderID(E);const J=t.getRenderTarget(),oe=t.state.buffers.depth.getReversed(),ne=F.isInstancedMesh===!0,pe=F.isBatchedMesh===!0,ye=!!E.map,Ce=!!E.matcap,_e=!!$,ce=!!E.aoMap,Be=!!E.lightMap,de=!!E.bumpMap,me=!!E.normalMap,ie=!!E.displacementMap,ae=!!E.emissiveMap,ge=!!E.metalnessMap,X=!!E.roughnessMap,W=E.anisotropy>0,ve=E.clearcoat>0,ue=E.dispersion>0,Me=E.iridescence>0,Ae=E.sheen>0,Ne=E.transmission>0,Re=W&&!!E.anisotropyMap,Ie=ve&&!!E.clearcoatMap,it=ve&&!!E.clearcoatNormalMap,Ee=ve&&!!E.clearcoatRoughnessMap,Le=Me&&!!E.iridescenceMap,Ge=Me&&!!E.iridescenceThicknessMap,Ke=Ae&&!!E.sheenColorMap,je=Ae&&!!E.sheenRoughnessMap,et=!!E.specularMap,lt=!!E.specularColorMap,ht=!!E.specularIntensityMap,ke=Ne&&!!E.transmissionMap,gt=Ne&&!!E.thicknessMap,tt=!!E.gradientMap,yt=!!E.alphaMap,at=E.alphaTest>0,mt=!!E.alphaHash,Ot=!!E.extensions;let rn=Gf;E.toneMapped&&(J===null||J.isXRRenderTarget===!0)&&(rn=t.toneMapping);const on={shaderID:H,shaderType:E.type,shaderName:E.name,vertexShader:K,fragmentShader:Z,defines:E.defines,customVertexShaderID:ee,customFragmentShaderID:V,isRawShaderMaterial:E.isRawShaderMaterial===!0,glslVersion:E.glslVersion,precision:p,batching:pe,batchingColor:pe&&F._colorsTexture!==null,instancing:ne,instancingColor:ne&&F.instanceColor!==null,instancingMorph:ne&&F.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:J===null?t.outputColorSpace:J.isXRRenderTarget===!0?J.texture.colorSpace:Xv,alphaToCoverage:!!E.alphaToCoverage,map:ye,matcap:Ce,envMap:_e,envMapMode:_e&&$.mapping,envMapCubeUVHeight:B,aoMap:ce,lightMap:Be,bumpMap:de,normalMap:me,displacementMap:f&&ie,emissiveMap:ae,normalMapObjectSpace:me&&E.normalMapType===D$e,normalMapTangentSpace:me&&E.normalMapType===Zee,metalnessMap:ge,roughnessMap:X,anisotropy:W,anisotropyMap:Re,clearcoat:ve,clearcoatMap:Ie,clearcoatNormalMap:it,clearcoatRoughnessMap:Ee,dispersion:ue,iridescence:Me,iridescenceMap:Le,iridescenceThicknessMap:Ge,sheen:Ae,sheenColorMap:Ke,sheenRoughnessMap:je,specularMap:et,specularColorMap:lt,specularIntensityMap:ht,transmission:Ne,transmissionMap:ke,thicknessMap:gt,gradientMap:tt,opaque:E.transparent===!1&&E.blending===fv&&E.alphaToCoverage===!1,alphaMap:yt,alphaTest:at,alphaHash:mt,combine:E.combine,mapUv:ye&&v(E.map.channel),aoMapUv:ce&&v(E.aoMap.channel),lightMapUv:Be&&v(E.lightMap.channel),bumpMapUv:de&&v(E.bumpMap.channel),normalMapUv:me&&v(E.normalMap.channel),displacementMapUv:ie&&v(E.displacementMap.channel),emissiveMapUv:ae&&v(E.emissiveMap.channel),metalnessMapUv:ge&&v(E.metalnessMap.channel),roughnessMapUv:X&&v(E.roughnessMap.channel),anisotropyMapUv:Re&&v(E.anisotropyMap.channel),clearcoatMapUv:Ie&&v(E.clearcoatMap.channel),clearcoatNormalMapUv:it&&v(E.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ee&&v(E.clearcoatRoughnessMap.channel),iridescenceMapUv:Le&&v(E.iridescenceMap.channel),iridescenceThicknessMapUv:Ge&&v(E.iridescenceThicknessMap.channel),sheenColorMapUv:Ke&&v(E.sheenColorMap.channel),sheenRoughnessMapUv:je&&v(E.sheenRoughnessMap.channel),specularMapUv:et&&v(E.specularMap.channel),specularColorMapUv:lt&&v(E.specularColorMap.channel),specularIntensityMapUv:ht&&v(E.specularIntensityMap.channel),transmissionMapUv:ke&&v(E.transmissionMap.channel),thicknessMapUv:gt&&v(E.thicknessMap.channel),alphaMapUv:yt&&v(E.alphaMap.channel),vertexTangents:!!N.attributes.tangent&&(me||W),vertexColors:E.vertexColors,vertexAlphas:E.vertexColors===!0&&!!N.attributes.color&&N.attributes.color.itemSize===4,pointsUvs:F.isPoints===!0&&!!N.attributes.uv&&(ye||yt),fog:!!L,useFog:E.fog===!0,fogExp2:!!L&&L.isFogExp2,flatShading:E.flatShading===!0,sizeAttenuation:E.sizeAttenuation===!0,logarithmicDepthBuffer:d,reverseDepthBuffer:oe,skinning:F.isSkinnedMesh===!0,morphTargets:N.morphAttributes.position!==void 0,morphNormals:N.morphAttributes.normal!==void 0,morphColors:N.morphAttributes.color!==void 0,morphTargetsCount:z,morphTextureStride:G,numDirLights:_.directional.length,numPointLights:_.point.length,numSpotLights:_.spot.length,numSpotLightMaps:_.spotLightMap.length,numRectAreaLights:_.rectArea.length,numHemiLights:_.hemi.length,numDirLightShadows:_.directionalShadowMap.length,numPointLightShadows:_.pointShadowMap.length,numSpotLightShadows:_.spotShadowMap.length,numSpotLightShadowsWithMaps:_.numSpotLightShadowsWithMaps,numLightProbes:_.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:E.dithering,shadowMapEnabled:t.shadowMap.enabled&&A.length>0,shadowMapType:t.shadowMap.type,toneMapping:rn,decodeVideoTexture:ye&&E.map.isVideoTexture===!0&&Rr.getTransfer(E.map.colorSpace)===ei,decodeVideoTextureEmissive:ae&&E.emissiveMap.isVideoTexture===!0&&Rr.getTransfer(E.emissiveMap.colorSpace)===ei,premultipliedAlpha:E.premultipliedAlpha,doubleSided:E.side===Ms,flipSided:E.side===ca,useDepthPacking:E.depthPacking>=0,depthPacking:E.depthPacking||0,index0AttributeName:E.index0AttributeName,extensionClipCullDistance:Ot&&E.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ot&&E.extensions.multiDraw===!0||pe)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:E.customProgramCacheKey()};return on.vertexUv1s=c.has(1),on.vertexUv2s=c.has(2),on.vertexUv3s=c.has(3),c.clear(),on}function g(E){const _=[];if(E.shaderID?_.push(E.shaderID):(_.push(E.customVertexShaderID),_.push(E.customFragmentShaderID)),E.defines!==void 0)for(const A in E.defines)_.push(A),_.push(E.defines[A]);return E.isRawShaderMaterial===!1&&(x(_,E),w(_,E),_.push(t.outputColorSpace)),_.push(E.customProgramCacheKey),_.join()}function x(E,_){E.push(_.precision),E.push(_.outputColorSpace),E.push(_.envMapMode),E.push(_.envMapCubeUVHeight),E.push(_.mapUv),E.push(_.alphaMapUv),E.push(_.lightMapUv),E.push(_.aoMapUv),E.push(_.bumpMapUv),E.push(_.normalMapUv),E.push(_.displacementMapUv),E.push(_.emissiveMapUv),E.push(_.metalnessMapUv),E.push(_.roughnessMapUv),E.push(_.anisotropyMapUv),E.push(_.clearcoatMapUv),E.push(_.clearcoatNormalMapUv),E.push(_.clearcoatRoughnessMapUv),E.push(_.iridescenceMapUv),E.push(_.iridescenceThicknessMapUv),E.push(_.sheenColorMapUv),E.push(_.sheenRoughnessMapUv),E.push(_.specularMapUv),E.push(_.specularColorMapUv),E.push(_.specularIntensityMapUv),E.push(_.transmissionMapUv),E.push(_.thicknessMapUv),E.push(_.combine),E.push(_.fogExp2),E.push(_.sizeAttenuation),E.push(_.morphTargetsCount),E.push(_.morphAttributeCount),E.push(_.numDirLights),E.push(_.numPointLights),E.push(_.numSpotLights),E.push(_.numSpotLightMaps),E.push(_.numHemiLights),E.push(_.numRectAreaLights),E.push(_.numDirLightShadows),E.push(_.numPointLightShadows),E.push(_.numSpotLightShadows),E.push(_.numSpotLightShadowsWithMaps),E.push(_.numLightProbes),E.push(_.shadowMapType),E.push(_.toneMapping),E.push(_.numClippingPlanes),E.push(_.numClipIntersection),E.push(_.depthPacking)}function w(E,_){a.disableAll(),_.supportsVertexTextures&&a.enable(0),_.instancing&&a.enable(1),_.instancingColor&&a.enable(2),_.instancingMorph&&a.enable(3),_.matcap&&a.enable(4),_.envMap&&a.enable(5),_.normalMapObjectSpace&&a.enable(6),_.normalMapTangentSpace&&a.enable(7),_.clearcoat&&a.enable(8),_.iridescence&&a.enable(9),_.alphaTest&&a.enable(10),_.vertexColors&&a.enable(11),_.vertexAlphas&&a.enable(12),_.vertexUv1s&&a.enable(13),_.vertexUv2s&&a.enable(14),_.vertexUv3s&&a.enable(15),_.vertexTangents&&a.enable(16),_.anisotropy&&a.enable(17),_.alphaHash&&a.enable(18),_.batching&&a.enable(19),_.dispersion&&a.enable(20),_.batchingColor&&a.enable(21),E.push(a.mask),a.disableAll(),_.fog&&a.enable(0),_.useFog&&a.enable(1),_.flatShading&&a.enable(2),_.logarithmicDepthBuffer&&a.enable(3),_.reverseDepthBuffer&&a.enable(4),_.skinning&&a.enable(5),_.morphTargets&&a.enable(6),_.morphNormals&&a.enable(7),_.morphColors&&a.enable(8),_.premultipliedAlpha&&a.enable(9),_.shadowMapEnabled&&a.enable(10),_.doubleSided&&a.enable(11),_.flipSided&&a.enable(12),_.useDepthPacking&&a.enable(13),_.dithering&&a.enable(14),_.transmission&&a.enable(15),_.sheen&&a.enable(16),_.opaque&&a.enable(17),_.pointsUvs&&a.enable(18),_.decodeVideoTexture&&a.enable(19),_.decodeVideoTextureEmissive&&a.enable(20),_.alphaToCoverage&&a.enable(21),E.push(a.mask)}function S(E){const _=b[E.type];let A;if(_){const R=Rc[_];A=a7e.clone(R.uniforms)}else A=E.uniforms;return A}function P(E,_){let A;for(let R=0,F=u.length;R<F;R++){const L=u[R];if(L.cacheKey===_){A=L,++A.usedTimes;break}}return A===void 0&&(A=new dYe(t,_,E,o),u.push(A)),A}function I(E){if(--E.usedTimes===0){const _=u.indexOf(E);u[_]=u[u.length-1],u.pop(),E.destroy()}}function M(E){l.remove(E)}function D(){l.dispose()}return{getParameters:m,getProgramCacheKey:g,getUniforms:S,acquireProgram:P,releaseProgram:I,releaseShaderCache:M,programs:u,dispose:D}}function gYe(){let t=new WeakMap;function e(s){return t.has(s)}function n(s){let a=t.get(s);return a===void 0&&(a={},t.set(s,a)),a}function r(s){t.delete(s)}function i(s,a,l){t.get(s)[a]=l}function o(){t=new WeakMap}return{has:e,get:n,remove:r,update:i,dispose:o}}function vYe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function tW(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function nW(){const t=[];let e=0;const n=[],r=[],i=[];function o(){e=0,n.length=0,r.length=0,i.length=0}function s(d,f,p,b,v,m){let g=t[e];return g===void 0?(g={id:d.id,object:d,geometry:f,material:p,groupOrder:b,renderOrder:d.renderOrder,z:v,group:m},t[e]=g):(g.id=d.id,g.object=d,g.geometry=f,g.material=p,g.groupOrder=b,g.renderOrder=d.renderOrder,g.z=v,g.group=m),e++,g}function a(d,f,p,b,v,m){const g=s(d,f,p,b,v,m);p.transmission>0?r.push(g):p.transparent===!0?i.push(g):n.push(g)}function l(d,f,p,b,v,m){const g=s(d,f,p,b,v,m);p.transmission>0?r.unshift(g):p.transparent===!0?i.unshift(g):n.unshift(g)}function c(d,f){n.length>1&&n.sort(d||vYe),r.length>1&&r.sort(f||tW),i.length>1&&i.sort(f||tW)}function u(){for(let d=e,f=t.length;d<f;d++){const p=t[d];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:n,transmissive:r,transparent:i,init:o,push:a,unshift:l,finish:u,sort:c}}function yYe(){let t=new WeakMap;function e(r,i){const o=t.get(r);let s;return o===void 0?(s=new nW,t.set(r,[s])):i>=o.length?(s=new nW,o.push(s)):s=o[i],s}function n(){t=new WeakMap}return{get:e,dispose:n}}function xYe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new He,color:new wn};break;case"SpotLight":n={position:new He,direction:new He,color:new wn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new He,color:new wn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new He,skyColor:new wn,groundColor:new wn};break;case"RectAreaLight":n={color:new wn,position:new He,halfWidth:new He,halfHeight:new He};break}return t[e.id]=n,n}}}function bYe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qt};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qt};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qt,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let wYe=0;function SYe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function _Ye(t){const e=new xYe,n=bYe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new He);const i=new He,o=new Ci,s=new Ci;function a(c){let u=0,d=0,f=0;for(let E=0;E<9;E++)r.probe[E].set(0,0,0);let p=0,b=0,v=0,m=0,g=0,x=0,w=0,S=0,P=0,I=0,M=0;c.sort(SYe);for(let E=0,_=c.length;E<_;E++){const A=c[E],R=A.color,F=A.intensity,L=A.distance,N=A.shadow&&A.shadow.map?A.shadow.map.texture:null;if(A.isAmbientLight)u+=R.r*F,d+=R.g*F,f+=R.b*F;else if(A.isLightProbe){for(let U=0;U<9;U++)r.probe[U].addScaledVector(A.sh.coefficients[U],F);M++}else if(A.isDirectionalLight){const U=e.get(A);if(U.color.copy(A.color).multiplyScalar(A.intensity),A.castShadow){const $=A.shadow,B=n.get(A);B.shadowIntensity=$.intensity,B.shadowBias=$.bias,B.shadowNormalBias=$.normalBias,B.shadowRadius=$.radius,B.shadowMapSize=$.mapSize,r.directionalShadow[p]=B,r.directionalShadowMap[p]=N,r.directionalShadowMatrix[p]=A.shadow.matrix,x++}r.directional[p]=U,p++}else if(A.isSpotLight){const U=e.get(A);U.position.setFromMatrixPosition(A.matrixWorld),U.color.copy(R).multiplyScalar(F),U.distance=L,U.coneCos=Math.cos(A.angle),U.penumbraCos=Math.cos(A.angle*(1-A.penumbra)),U.decay=A.decay,r.spot[v]=U;const $=A.shadow;if(A.map&&(r.spotLightMap[P]=A.map,P++,$.updateMatrices(A),A.castShadow&&I++),r.spotLightMatrix[v]=$.matrix,A.castShadow){const B=n.get(A);B.shadowIntensity=$.intensity,B.shadowBias=$.bias,B.shadowNormalBias=$.normalBias,B.shadowRadius=$.radius,B.shadowMapSize=$.mapSize,r.spotShadow[v]=B,r.spotShadowMap[v]=N,S++}v++}else if(A.isRectAreaLight){const U=e.get(A);U.color.copy(R).multiplyScalar(F),U.halfWidth.set(A.width*.5,0,0),U.halfHeight.set(0,A.height*.5,0),r.rectArea[m]=U,m++}else if(A.isPointLight){const U=e.get(A);if(U.color.copy(A.color).multiplyScalar(A.intensity),U.distance=A.distance,U.decay=A.decay,A.castShadow){const $=A.shadow,B=n.get(A);B.shadowIntensity=$.intensity,B.shadowBias=$.bias,B.shadowNormalBias=$.normalBias,B.shadowRadius=$.radius,B.shadowMapSize=$.mapSize,B.shadowCameraNear=$.camera.near,B.shadowCameraFar=$.camera.far,r.pointShadow[b]=B,r.pointShadowMap[b]=N,r.pointShadowMatrix[b]=A.shadow.matrix,w++}r.point[b]=U,b++}else if(A.isHemisphereLight){const U=e.get(A);U.skyColor.copy(A.color).multiplyScalar(F),U.groundColor.copy(A.groundColor).multiplyScalar(F),r.hemi[g]=U,g++}}m>0&&(t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Jt.LTC_FLOAT_1,r.rectAreaLTC2=Jt.LTC_FLOAT_2):(r.rectAreaLTC1=Jt.LTC_HALF_1,r.rectAreaLTC2=Jt.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=d,r.ambient[2]=f;const D=r.hash;(D.directionalLength!==p||D.pointLength!==b||D.spotLength!==v||D.rectAreaLength!==m||D.hemiLength!==g||D.numDirectionalShadows!==x||D.numPointShadows!==w||D.numSpotShadows!==S||D.numSpotMaps!==P||D.numLightProbes!==M)&&(r.directional.length=p,r.spot.length=v,r.rectArea.length=m,r.point.length=b,r.hemi.length=g,r.directionalShadow.length=x,r.directionalShadowMap.length=x,r.pointShadow.length=w,r.pointShadowMap.length=w,r.spotShadow.length=S,r.spotShadowMap.length=S,r.directionalShadowMatrix.length=x,r.pointShadowMatrix.length=w,r.spotLightMatrix.length=S+P-I,r.spotLightMap.length=P,r.numSpotLightShadowsWithMaps=I,r.numLightProbes=M,D.directionalLength=p,D.pointLength=b,D.spotLength=v,D.rectAreaLength=m,D.hemiLength=g,D.numDirectionalShadows=x,D.numPointShadows=w,D.numSpotShadows=S,D.numSpotMaps=P,D.numLightProbes=M,r.version=wYe++)}function l(c,u){let d=0,f=0,p=0,b=0,v=0;const m=u.matrixWorldInverse;for(let g=0,x=c.length;g<x;g++){const w=c[g];if(w.isDirectionalLight){const S=r.directional[d];S.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),S.direction.sub(i),S.direction.transformDirection(m),d++}else if(w.isSpotLight){const S=r.spot[p];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(m),S.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),S.direction.sub(i),S.direction.transformDirection(m),p++}else if(w.isRectAreaLight){const S=r.rectArea[b];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(m),s.identity(),o.copy(w.matrixWorld),o.premultiply(m),s.extractRotation(o),S.halfWidth.set(w.width*.5,0,0),S.halfHeight.set(0,w.height*.5,0),S.halfWidth.applyMatrix4(s),S.halfHeight.applyMatrix4(s),b++}else if(w.isPointLight){const S=r.point[f];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(m),f++}else if(w.isHemisphereLight){const S=r.hemi[v];S.direction.setFromMatrixPosition(w.matrixWorld),S.direction.transformDirection(m),v++}}}return{setup:a,setupView:l,state:r}}function rW(t){const e=new _Ye(t),n=[],r=[];function i(u){c.camera=u,n.length=0,r.length=0}function o(u){n.push(u)}function s(u){r.push(u)}function a(){e.setup(n)}function l(u){e.setupView(n,u)}const c={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:a,setupLightsView:l,pushLight:o,pushShadow:s}}function EYe(t){let e=new WeakMap;function n(i,o=0){const s=e.get(i);let a;return s===void 0?(a=new rW(t),e.set(i,[a])):o>=s.length?(a=new rW(t),s.push(a)):a=s[o],a}function r(){e=new WeakMap}return{get:n,dispose:r}}const CYe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,AYe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function TYe(t,e,n){let r=new OL;const i=new qt,o=new qt,s=new $i,a=new X7e({depthPacking:P$e}),l=new Q7e,c={},u=n.maxTextureSize,d={[Sd]:ca,[ca]:Sd,[Ms]:Ms},f=new rh({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new qt},radius:{value:4}},vertexShader:CYe,fragmentShader:AYe}),p=f.clone();p.defines.HORIZONTAL_PASS=1;const b=new fa;b.setAttribute("position",new nu(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Mn(b,f),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Bee;let g=this.type;this.render=function(I,M,D){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||I.length===0)return;const E=t.getRenderTarget(),_=t.getActiveCubeFace(),A=t.getActiveMipmapLevel(),R=t.state;R.setBlending(Hf),R.buffers.color.setClear(1,1,1,1),R.buffers.depth.setTest(!0),R.setScissorTest(!1);const F=g!==Fu&&this.type===Fu,L=g===Fu&&this.type!==Fu;for(let N=0,U=I.length;N<U;N++){const $=I[N],B=$.shadow;if(B===void 0){console.warn("THREE.WebGLShadowMap:",$,"has no shadow.");continue}if(B.autoUpdate===!1&&B.needsUpdate===!1)continue;i.copy(B.mapSize);const H=B.getFrameExtents();if(i.multiply(H),o.copy(B.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(o.x=Math.floor(u/H.x),i.x=o.x*H.x,B.mapSize.x=o.x),i.y>u&&(o.y=Math.floor(u/H.y),i.y=o.y*H.y,B.mapSize.y=o.y)),B.map===null||F===!0||L===!0){const z=this.type!==Fu?{minFilter:lc,magFilter:lc}:{};B.map!==null&&B.map.dispose(),B.map=new nm(i.x,i.y,z),B.map.texture.name=$.name+".shadowMap",B.camera.updateProjectionMatrix()}t.setRenderTarget(B.map),t.clear();const q=B.getViewportCount();for(let z=0;z<q;z++){const G=B.getViewport(z);s.set(o.x*G.x,o.y*G.y,o.x*G.z,o.y*G.w),R.viewport(s),B.updateMatrices($,z),r=B.getFrustum(),S(M,D,B.camera,$,this.type)}B.isPointLightShadow!==!0&&this.type===Fu&&x(B,D),B.needsUpdate=!1}g=this.type,m.needsUpdate=!1,t.setRenderTarget(E,_,A)};function x(I,M){const D=e.update(v);f.defines.VSM_SAMPLES!==I.blurSamples&&(f.defines.VSM_SAMPLES=I.blurSamples,p.defines.VSM_SAMPLES=I.blurSamples,f.needsUpdate=!0,p.needsUpdate=!0),I.mapPass===null&&(I.mapPass=new nm(i.x,i.y)),f.uniforms.shadow_pass.value=I.map.texture,f.uniforms.resolution.value=I.mapSize,f.uniforms.radius.value=I.radius,t.setRenderTarget(I.mapPass),t.clear(),t.renderBufferDirect(M,null,D,f,v,null),p.uniforms.shadow_pass.value=I.mapPass.texture,p.uniforms.resolution.value=I.mapSize,p.uniforms.radius.value=I.radius,t.setRenderTarget(I.map),t.clear(),t.renderBufferDirect(M,null,D,p,v,null)}function w(I,M,D,E){let _=null;const A=D.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(A!==void 0)_=A;else if(_=D.isPointLight===!0?l:a,t.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){const R=_.uuid,F=M.uuid;let L=c[R];L===void 0&&(L={},c[R]=L);let N=L[F];N===void 0&&(N=_.clone(),L[F]=N,M.addEventListener("dispose",P)),_=N}if(_.visible=M.visible,_.wireframe=M.wireframe,E===Fu?_.side=M.shadowSide!==null?M.shadowSide:M.side:_.side=M.shadowSide!==null?M.shadowSide:d[M.side],_.alphaMap=M.alphaMap,_.alphaTest=M.alphaTest,_.map=M.map,_.clipShadows=M.clipShadows,_.clippingPlanes=M.clippingPlanes,_.clipIntersection=M.clipIntersection,_.displacementMap=M.displacementMap,_.displacementScale=M.displacementScale,_.displacementBias=M.displacementBias,_.wireframeLinewidth=M.wireframeLinewidth,_.linewidth=M.linewidth,D.isPointLight===!0&&_.isMeshDistanceMaterial===!0){const R=t.properties.get(_);R.light=D}return _}function S(I,M,D,E,_){if(I.visible===!1)return;if(I.layers.test(M.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&_===Fu)&&(!I.frustumCulled||r.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,I.matrixWorld);const F=e.update(I),L=I.material;if(Array.isArray(L)){const N=F.groups;for(let U=0,$=N.length;U<$;U++){const B=N[U],H=L[B.materialIndex];if(H&&H.visible){const q=w(I,H,E,_);I.onBeforeShadow(t,I,M,D,F,q,B),t.renderBufferDirect(D,null,F,q,I,B),I.onAfterShadow(t,I,M,D,F,q,B)}}}else if(L.visible){const N=w(I,L,E,_);I.onBeforeShadow(t,I,M,D,F,N,null),t.renderBufferDirect(D,null,F,N,I,null),I.onAfterShadow(t,I,M,D,F,N,null)}}const R=I.children;for(let F=0,L=R.length;F<L;F++)S(R[F],M,D,E,_)}function P(I){I.target.removeEventListener("dispose",P);for(const D in c){const E=c[D],_=I.target.uuid;_ in E&&(E[_].dispose(),delete E[_])}}}const MYe={[Ak]:Tk,[Mk]:Rk,[Pk]:Ik,[qv]:Dk,[Tk]:Ak,[Rk]:Mk,[Ik]:Pk,[Dk]:qv};function PYe(t,e){function n(){let ke=!1;const gt=new $i;let tt=null;const yt=new $i(0,0,0,0);return{setMask:function(at){tt!==at&&!ke&&(t.colorMask(at,at,at,at),tt=at)},setLocked:function(at){ke=at},setClear:function(at,mt,Ot,rn,on){on===!0&&(at*=rn,mt*=rn,Ot*=rn),gt.set(at,mt,Ot,rn),yt.equals(gt)===!1&&(t.clearColor(at,mt,Ot,rn),yt.copy(gt))},reset:function(){ke=!1,tt=null,yt.set(-1,0,0,0)}}}function r(){let ke=!1,gt=!1,tt=null,yt=null,at=null;return{setReversed:function(mt){if(gt!==mt){const Ot=e.get("EXT_clip_control");mt?Ot.clipControlEXT(Ot.LOWER_LEFT_EXT,Ot.ZERO_TO_ONE_EXT):Ot.clipControlEXT(Ot.LOWER_LEFT_EXT,Ot.NEGATIVE_ONE_TO_ONE_EXT),gt=mt;const rn=at;at=null,this.setClear(rn)}},getReversed:function(){return gt},setTest:function(mt){mt?J(t.DEPTH_TEST):oe(t.DEPTH_TEST)},setMask:function(mt){tt!==mt&&!ke&&(t.depthMask(mt),tt=mt)},setFunc:function(mt){if(gt&&(mt=MYe[mt]),yt!==mt){switch(mt){case Ak:t.depthFunc(t.NEVER);break;case Tk:t.depthFunc(t.ALWAYS);break;case Mk:t.depthFunc(t.LESS);break;case qv:t.depthFunc(t.LEQUAL);break;case Pk:t.depthFunc(t.EQUAL);break;case Dk:t.depthFunc(t.GEQUAL);break;case Rk:t.depthFunc(t.GREATER);break;case Ik:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}yt=mt}},setLocked:function(mt){ke=mt},setClear:function(mt){at!==mt&&(gt&&(mt=1-mt),t.clearDepth(mt),at=mt)},reset:function(){ke=!1,tt=null,yt=null,at=null,gt=!1}}}function i(){let ke=!1,gt=null,tt=null,yt=null,at=null,mt=null,Ot=null,rn=null,on=null;return{setTest:function(Pe){ke||(Pe?J(t.STENCIL_TEST):oe(t.STENCIL_TEST))},setMask:function(Pe){gt!==Pe&&!ke&&(t.stencilMask(Pe),gt=Pe)},setFunc:function(Pe,Ue,Xe){(tt!==Pe||yt!==Ue||at!==Xe)&&(t.stencilFunc(Pe,Ue,Xe),tt=Pe,yt=Ue,at=Xe)},setOp:function(Pe,Ue,Xe){(mt!==Pe||Ot!==Ue||rn!==Xe)&&(t.stencilOp(Pe,Ue,Xe),mt=Pe,Ot=Ue,rn=Xe)},setLocked:function(Pe){ke=Pe},setClear:function(Pe){on!==Pe&&(t.clearStencil(Pe),on=Pe)},reset:function(){ke=!1,gt=null,tt=null,yt=null,at=null,mt=null,Ot=null,rn=null,on=null}}}const o=new n,s=new r,a=new i,l=new WeakMap,c=new WeakMap;let u={},d={},f=new WeakMap,p=[],b=null,v=!1,m=null,g=null,x=null,w=null,S=null,P=null,I=null,M=new wn(0,0,0),D=0,E=!1,_=null,A=null,R=null,F=null,L=null;const N=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let U=!1,$=0;const B=t.getParameter(t.VERSION);B.indexOf("WebGL")!==-1?($=parseFloat(/^WebGL (\d)/.exec(B)[1]),U=$>=1):B.indexOf("OpenGL ES")!==-1&&($=parseFloat(/^OpenGL ES (\d)/.exec(B)[1]),U=$>=2);let H=null,q={};const z=t.getParameter(t.SCISSOR_BOX),G=t.getParameter(t.VIEWPORT),K=new $i().fromArray(z),Z=new $i().fromArray(G);function ee(ke,gt,tt,yt){const at=new Uint8Array(4),mt=t.createTexture();t.bindTexture(ke,mt),t.texParameteri(ke,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(ke,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Ot=0;Ot<tt;Ot++)ke===t.TEXTURE_3D||ke===t.TEXTURE_2D_ARRAY?t.texImage3D(gt,0,t.RGBA,1,1,yt,0,t.RGBA,t.UNSIGNED_BYTE,at):t.texImage2D(gt+Ot,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,at);return mt}const V={};V[t.TEXTURE_2D]=ee(t.TEXTURE_2D,t.TEXTURE_2D,1),V[t.TEXTURE_CUBE_MAP]=ee(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),V[t.TEXTURE_2D_ARRAY]=ee(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),V[t.TEXTURE_3D]=ee(t.TEXTURE_3D,t.TEXTURE_3D,1,1),o.setClear(0,0,0,1),s.setClear(1),a.setClear(0),J(t.DEPTH_TEST),s.setFunc(qv),de(!1),me(e9),J(t.CULL_FACE),ce(Hf);function J(ke){u[ke]!==!0&&(t.enable(ke),u[ke]=!0)}function oe(ke){u[ke]!==!1&&(t.disable(ke),u[ke]=!1)}function ne(ke,gt){return d[ke]!==gt?(t.bindFramebuffer(ke,gt),d[ke]=gt,ke===t.DRAW_FRAMEBUFFER&&(d[t.FRAMEBUFFER]=gt),ke===t.FRAMEBUFFER&&(d[t.DRAW_FRAMEBUFFER]=gt),!0):!1}function pe(ke,gt){let tt=p,yt=!1;if(ke){tt=f.get(gt),tt===void 0&&(tt=[],f.set(gt,tt));const at=ke.textures;if(tt.length!==at.length||tt[0]!==t.COLOR_ATTACHMENT0){for(let mt=0,Ot=at.length;mt<Ot;mt++)tt[mt]=t.COLOR_ATTACHMENT0+mt;tt.length=at.length,yt=!0}}else tt[0]!==t.BACK&&(tt[0]=t.BACK,yt=!0);yt&&t.drawBuffers(tt)}function ye(ke){return b!==ke?(t.useProgram(ke),b=ke,!0):!1}const Ce={[rp]:t.FUNC_ADD,[t$e]:t.FUNC_SUBTRACT,[n$e]:t.FUNC_REVERSE_SUBTRACT};Ce[r$e]=t.MIN,Ce[i$e]=t.MAX;const _e={[o$e]:t.ZERO,[s$e]:t.ONE,[a$e]:t.SRC_COLOR,[Ek]:t.SRC_ALPHA,[h$e]:t.SRC_ALPHA_SATURATE,[d$e]:t.DST_COLOR,[c$e]:t.DST_ALPHA,[l$e]:t.ONE_MINUS_SRC_COLOR,[Ck]:t.ONE_MINUS_SRC_ALPHA,[f$e]:t.ONE_MINUS_DST_COLOR,[u$e]:t.ONE_MINUS_DST_ALPHA,[p$e]:t.CONSTANT_COLOR,[m$e]:t.ONE_MINUS_CONSTANT_COLOR,[g$e]:t.CONSTANT_ALPHA,[v$e]:t.ONE_MINUS_CONSTANT_ALPHA};function ce(ke,gt,tt,yt,at,mt,Ot,rn,on,Pe){if(ke===Hf){v===!0&&(oe(t.BLEND),v=!1);return}if(v===!1&&(J(t.BLEND),v=!0),ke!==e$e){if(ke!==m||Pe!==E){if((g!==rp||S!==rp)&&(t.blendEquation(t.FUNC_ADD),g=rp,S=rp),Pe)switch(ke){case fv:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case t9:t.blendFunc(t.ONE,t.ONE);break;case n9:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case r9:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ke);break}else switch(ke){case fv:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case t9:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case n9:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case r9:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ke);break}x=null,w=null,P=null,I=null,M.set(0,0,0),D=0,m=ke,E=Pe}return}at=at||gt,mt=mt||tt,Ot=Ot||yt,(gt!==g||at!==S)&&(t.blendEquationSeparate(Ce[gt],Ce[at]),g=gt,S=at),(tt!==x||yt!==w||mt!==P||Ot!==I)&&(t.blendFuncSeparate(_e[tt],_e[yt],_e[mt],_e[Ot]),x=tt,w=yt,P=mt,I=Ot),(rn.equals(M)===!1||on!==D)&&(t.blendColor(rn.r,rn.g,rn.b,on),M.copy(rn),D=on),m=ke,E=!1}function Be(ke,gt){ke.side===Ms?oe(t.CULL_FACE):J(t.CULL_FACE);let tt=ke.side===ca;gt&&(tt=!tt),de(tt),ke.blending===fv&&ke.transparent===!1?ce(Hf):ce(ke.blending,ke.blendEquation,ke.blendSrc,ke.blendDst,ke.blendEquationAlpha,ke.blendSrcAlpha,ke.blendDstAlpha,ke.blendColor,ke.blendAlpha,ke.premultipliedAlpha),s.setFunc(ke.depthFunc),s.setTest(ke.depthTest),s.setMask(ke.depthWrite),o.setMask(ke.colorWrite);const yt=ke.stencilWrite;a.setTest(yt),yt&&(a.setMask(ke.stencilWriteMask),a.setFunc(ke.stencilFunc,ke.stencilRef,ke.stencilFuncMask),a.setOp(ke.stencilFail,ke.stencilZFail,ke.stencilZPass)),ae(ke.polygonOffset,ke.polygonOffsetFactor,ke.polygonOffsetUnits),ke.alphaToCoverage===!0?J(t.SAMPLE_ALPHA_TO_COVERAGE):oe(t.SAMPLE_ALPHA_TO_COVERAGE)}function de(ke){_!==ke&&(ke?t.frontFace(t.CW):t.frontFace(t.CCW),_=ke)}function me(ke){ke!==ZWe?(J(t.CULL_FACE),ke!==A&&(ke===e9?t.cullFace(t.BACK):ke===JWe?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):oe(t.CULL_FACE),A=ke}function ie(ke){ke!==R&&(U&&t.lineWidth(ke),R=ke)}function ae(ke,gt,tt){ke?(J(t.POLYGON_OFFSET_FILL),(F!==gt||L!==tt)&&(t.polygonOffset(gt,tt),F=gt,L=tt)):oe(t.POLYGON_OFFSET_FILL)}function ge(ke){ke?J(t.SCISSOR_TEST):oe(t.SCISSOR_TEST)}function X(ke){ke===void 0&&(ke=t.TEXTURE0+N-1),H!==ke&&(t.activeTexture(ke),H=ke)}function W(ke,gt,tt){tt===void 0&&(H===null?tt=t.TEXTURE0+N-1:tt=H);let yt=q[tt];yt===void 0&&(yt={type:void 0,texture:void 0},q[tt]=yt),(yt.type!==ke||yt.texture!==gt)&&(H!==tt&&(t.activeTexture(tt),H=tt),t.bindTexture(ke,gt||V[ke]),yt.type=ke,yt.texture=gt)}function ve(){const ke=q[H];ke!==void 0&&ke.type!==void 0&&(t.bindTexture(ke.type,null),ke.type=void 0,ke.texture=void 0)}function ue(){try{t.compressedTexImage2D(...arguments)}catch(ke){console.error("THREE.WebGLState:",ke)}}function Me(){try{t.compressedTexImage3D(...arguments)}catch(ke){console.error("THREE.WebGLState:",ke)}}function Ae(){try{t.texSubImage2D(...arguments)}catch(ke){console.error("THREE.WebGLState:",ke)}}function Ne(){try{t.texSubImage3D(...arguments)}catch(ke){console.error("THREE.WebGLState:",ke)}}function Re(){try{t.compressedTexSubImage2D(...arguments)}catch(ke){console.error("THREE.WebGLState:",ke)}}function Ie(){try{t.compressedTexSubImage3D(...arguments)}catch(ke){console.error("THREE.WebGLState:",ke)}}function it(){try{t.texStorage2D(...arguments)}catch(ke){console.error("THREE.WebGLState:",ke)}}function Ee(){try{t.texStorage3D(...arguments)}catch(ke){console.error("THREE.WebGLState:",ke)}}function Le(){try{t.texImage2D(...arguments)}catch(ke){console.error("THREE.WebGLState:",ke)}}function Ge(){try{t.texImage3D(...arguments)}catch(ke){console.error("THREE.WebGLState:",ke)}}function Ke(ke){K.equals(ke)===!1&&(t.scissor(ke.x,ke.y,ke.z,ke.w),K.copy(ke))}function je(ke){Z.equals(ke)===!1&&(t.viewport(ke.x,ke.y,ke.z,ke.w),Z.copy(ke))}function et(ke,gt){let tt=c.get(gt);tt===void 0&&(tt=new WeakMap,c.set(gt,tt));let yt=tt.get(ke);yt===void 0&&(yt=t.getUniformBlockIndex(gt,ke.name),tt.set(ke,yt))}function lt(ke,gt){const yt=c.get(gt).get(ke);l.get(gt)!==yt&&(t.uniformBlockBinding(gt,yt,ke.__bindingPointIndex),l.set(gt,yt))}function ht(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),s.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),u={},H=null,q={},d={},f=new WeakMap,p=[],b=null,v=!1,m=null,g=null,x=null,w=null,S=null,P=null,I=null,M=new wn(0,0,0),D=0,E=!1,_=null,A=null,R=null,F=null,L=null,K.set(0,0,t.canvas.width,t.canvas.height),Z.set(0,0,t.canvas.width,t.canvas.height),o.reset(),s.reset(),a.reset()}return{buffers:{color:o,depth:s,stencil:a},enable:J,disable:oe,bindFramebuffer:ne,drawBuffers:pe,useProgram:ye,setBlending:ce,setMaterial:Be,setFlipSided:de,setCullFace:me,setLineWidth:ie,setPolygonOffset:ae,setScissorTest:ge,activeTexture:X,bindTexture:W,unbindTexture:ve,compressedTexImage2D:ue,compressedTexImage3D:Me,texImage2D:Le,texImage3D:Ge,updateUBOMapping:et,uniformBlockBinding:lt,texStorage2D:it,texStorage3D:Ee,texSubImage2D:Ae,texSubImage3D:Ne,compressedTexSubImage2D:Re,compressedTexSubImage3D:Ie,scissor:Ke,viewport:je,reset:ht}}function DYe(t,e,n,r,i,o,s){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator=="undefined"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new qt,u=new WeakMap;let d;const f=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(X){}function b(X,W){return p?new OffscreenCanvas(X,W):KC("canvas")}function v(X,W,ve){let ue=1;const Me=ge(X);if((Me.width>ve||Me.height>ve)&&(ue=ve/Math.max(Me.width,Me.height)),ue<1)if(typeof HTMLImageElement!="undefined"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&X instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&X instanceof ImageBitmap||typeof VideoFrame!="undefined"&&X instanceof VideoFrame){const Ae=Math.floor(ue*Me.width),Ne=Math.floor(ue*Me.height);d===void 0&&(d=b(Ae,Ne));const Re=W?b(Ae,Ne):d;return Re.width=Ae,Re.height=Ne,Re.getContext("2d").drawImage(X,0,0,Ae,Ne),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Me.width+"x"+Me.height+") to ("+Ae+"x"+Ne+")."),Re}else return"data"in X&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Me.width+"x"+Me.height+")."),X;return X}function m(X){return X.generateMipmaps}function g(X){t.generateMipmap(X)}function x(X){return X.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:X.isWebGL3DRenderTarget?t.TEXTURE_3D:X.isWebGLArrayRenderTarget||X.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function w(X,W,ve,ue,Me=!1){if(X!==null){if(t[X]!==void 0)return t[X];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+X+"'")}let Ae=W;if(W===t.RED&&(ve===t.FLOAT&&(Ae=t.R32F),ve===t.HALF_FLOAT&&(Ae=t.R16F),ve===t.UNSIGNED_BYTE&&(Ae=t.R8)),W===t.RED_INTEGER&&(ve===t.UNSIGNED_BYTE&&(Ae=t.R8UI),ve===t.UNSIGNED_SHORT&&(Ae=t.R16UI),ve===t.UNSIGNED_INT&&(Ae=t.R32UI),ve===t.BYTE&&(Ae=t.R8I),ve===t.SHORT&&(Ae=t.R16I),ve===t.INT&&(Ae=t.R32I)),W===t.RG&&(ve===t.FLOAT&&(Ae=t.RG32F),ve===t.HALF_FLOAT&&(Ae=t.RG16F),ve===t.UNSIGNED_BYTE&&(Ae=t.RG8)),W===t.RG_INTEGER&&(ve===t.UNSIGNED_BYTE&&(Ae=t.RG8UI),ve===t.UNSIGNED_SHORT&&(Ae=t.RG16UI),ve===t.UNSIGNED_INT&&(Ae=t.RG32UI),ve===t.BYTE&&(Ae=t.RG8I),ve===t.SHORT&&(Ae=t.RG16I),ve===t.INT&&(Ae=t.RG32I)),W===t.RGB_INTEGER&&(ve===t.UNSIGNED_BYTE&&(Ae=t.RGB8UI),ve===t.UNSIGNED_SHORT&&(Ae=t.RGB16UI),ve===t.UNSIGNED_INT&&(Ae=t.RGB32UI),ve===t.BYTE&&(Ae=t.RGB8I),ve===t.SHORT&&(Ae=t.RGB16I),ve===t.INT&&(Ae=t.RGB32I)),W===t.RGBA_INTEGER&&(ve===t.UNSIGNED_BYTE&&(Ae=t.RGBA8UI),ve===t.UNSIGNED_SHORT&&(Ae=t.RGBA16UI),ve===t.UNSIGNED_INT&&(Ae=t.RGBA32UI),ve===t.BYTE&&(Ae=t.RGBA8I),ve===t.SHORT&&(Ae=t.RGBA16I),ve===t.INT&&(Ae=t.RGBA32I)),W===t.RGB&&ve===t.UNSIGNED_INT_5_9_9_9_REV&&(Ae=t.RGB9_E5),W===t.RGBA){const Ne=Me?GC:Rr.getTransfer(ue);ve===t.FLOAT&&(Ae=t.RGBA32F),ve===t.HALF_FLOAT&&(Ae=t.RGBA16F),ve===t.UNSIGNED_BYTE&&(Ae=Ne===ei?t.SRGB8_ALPHA8:t.RGBA8),ve===t.UNSIGNED_SHORT_4_4_4_4&&(Ae=t.RGBA4),ve===t.UNSIGNED_SHORT_5_5_5_1&&(Ae=t.RGB5_A1)}return(Ae===t.R16F||Ae===t.R32F||Ae===t.RG16F||Ae===t.RG32F||Ae===t.RGBA16F||Ae===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Ae}function S(X,W){let ve;return X?W===null||W===tm||W===Nb?ve=t.DEPTH24_STENCIL8:W===Yu?ve=t.DEPTH32F_STENCIL8:W===Ob&&(ve=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):W===null||W===tm||W===Nb?ve=t.DEPTH_COMPONENT24:W===Yu?ve=t.DEPTH_COMPONENT32F:W===Ob&&(ve=t.DEPTH_COMPONENT16),ve}function P(X,W){return m(X)===!0||X.isFramebufferTexture&&X.minFilter!==lc&&X.minFilter!==nc?Math.log2(Math.max(W.width,W.height))+1:X.mipmaps!==void 0&&X.mipmaps.length>0?X.mipmaps.length:X.isCompressedTexture&&Array.isArray(X.image)?W.mipmaps.length:1}function I(X){const W=X.target;W.removeEventListener("dispose",I),D(W),W.isVideoTexture&&u.delete(W)}function M(X){const W=X.target;W.removeEventListener("dispose",M),_(W)}function D(X){const W=r.get(X);if(W.__webglInit===void 0)return;const ve=X.source,ue=f.get(ve);if(ue){const Me=ue[W.__cacheKey];Me.usedTimes--,Me.usedTimes===0&&E(X),Object.keys(ue).length===0&&f.delete(ve)}r.remove(X)}function E(X){const W=r.get(X);t.deleteTexture(W.__webglTexture);const ve=X.source,ue=f.get(ve);delete ue[W.__cacheKey],s.memory.textures--}function _(X){const W=r.get(X);if(X.depthTexture&&(X.depthTexture.dispose(),r.remove(X.depthTexture)),X.isWebGLCubeRenderTarget)for(let ue=0;ue<6;ue++){if(Array.isArray(W.__webglFramebuffer[ue]))for(let Me=0;Me<W.__webglFramebuffer[ue].length;Me++)t.deleteFramebuffer(W.__webglFramebuffer[ue][Me]);else t.deleteFramebuffer(W.__webglFramebuffer[ue]);W.__webglDepthbuffer&&t.deleteRenderbuffer(W.__webglDepthbuffer[ue])}else{if(Array.isArray(W.__webglFramebuffer))for(let ue=0;ue<W.__webglFramebuffer.length;ue++)t.deleteFramebuffer(W.__webglFramebuffer[ue]);else t.deleteFramebuffer(W.__webglFramebuffer);if(W.__webglDepthbuffer&&t.deleteRenderbuffer(W.__webglDepthbuffer),W.__webglMultisampledFramebuffer&&t.deleteFramebuffer(W.__webglMultisampledFramebuffer),W.__webglColorRenderbuffer)for(let ue=0;ue<W.__webglColorRenderbuffer.length;ue++)W.__webglColorRenderbuffer[ue]&&t.deleteRenderbuffer(W.__webglColorRenderbuffer[ue]);W.__webglDepthRenderbuffer&&t.deleteRenderbuffer(W.__webglDepthRenderbuffer)}const ve=X.textures;for(let ue=0,Me=ve.length;ue<Me;ue++){const Ae=r.get(ve[ue]);Ae.__webglTexture&&(t.deleteTexture(Ae.__webglTexture),s.memory.textures--),r.remove(ve[ue])}r.remove(X)}let A=0;function R(){A=0}function F(){const X=A;return X>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+X+" texture units while this GPU supports only "+i.maxTextures),A+=1,X}function L(X){const W=[];return W.push(X.wrapS),W.push(X.wrapT),W.push(X.wrapR||0),W.push(X.magFilter),W.push(X.minFilter),W.push(X.anisotropy),W.push(X.internalFormat),W.push(X.format),W.push(X.type),W.push(X.generateMipmaps),W.push(X.premultiplyAlpha),W.push(X.flipY),W.push(X.unpackAlignment),W.push(X.colorSpace),W.join()}function N(X,W){const ve=r.get(X);if(X.isVideoTexture&&ie(X),X.isRenderTargetTexture===!1&&X.version>0&&ve.__version!==X.version){const ue=X.image;if(ue===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ue.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Z(ve,X,W);return}}n.bindTexture(t.TEXTURE_2D,ve.__webglTexture,t.TEXTURE0+W)}function U(X,W){const ve=r.get(X);if(X.version>0&&ve.__version!==X.version){Z(ve,X,W);return}n.bindTexture(t.TEXTURE_2D_ARRAY,ve.__webglTexture,t.TEXTURE0+W)}function $(X,W){const ve=r.get(X);if(X.version>0&&ve.__version!==X.version){Z(ve,X,W);return}n.bindTexture(t.TEXTURE_3D,ve.__webglTexture,t.TEXTURE0+W)}function B(X,W){const ve=r.get(X);if(X.version>0&&ve.__version!==X.version){ee(ve,X,W);return}n.bindTexture(t.TEXTURE_CUBE_MAP,ve.__webglTexture,t.TEXTURE0+W)}const H={[Fb]:t.REPEAT,[gp]:t.CLAMP_TO_EDGE,[Ok]:t.MIRRORED_REPEAT},q={[lc]:t.NEAREST,[T$e]:t.NEAREST_MIPMAP_NEAREST,[BS]:t.NEAREST_MIPMAP_LINEAR,[nc]:t.LINEAR,[eD]:t.LINEAR_MIPMAP_NEAREST,[Mf]:t.LINEAR_MIPMAP_LINEAR},z={[R$e]:t.NEVER,[L$e]:t.ALWAYS,[I$e]:t.LESS,[Jee]:t.LEQUAL,[k$e]:t.EQUAL,[N$e]:t.GEQUAL,[F$e]:t.GREATER,[O$e]:t.NOTEQUAL};function G(X,W){if(W.type===Yu&&e.has("OES_texture_float_linear")===!1&&(W.magFilter===nc||W.magFilter===eD||W.magFilter===BS||W.magFilter===Mf||W.minFilter===nc||W.minFilter===eD||W.minFilter===BS||W.minFilter===Mf)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(X,t.TEXTURE_WRAP_S,H[W.wrapS]),t.texParameteri(X,t.TEXTURE_WRAP_T,H[W.wrapT]),(X===t.TEXTURE_3D||X===t.TEXTURE_2D_ARRAY)&&t.texParameteri(X,t.TEXTURE_WRAP_R,H[W.wrapR]),t.texParameteri(X,t.TEXTURE_MAG_FILTER,q[W.magFilter]),t.texParameteri(X,t.TEXTURE_MIN_FILTER,q[W.minFilter]),W.compareFunction&&(t.texParameteri(X,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(X,t.TEXTURE_COMPARE_FUNC,z[W.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(W.magFilter===lc||W.minFilter!==BS&&W.minFilter!==Mf||W.type===Yu&&e.has("OES_texture_float_linear")===!1)return;if(W.anisotropy>1||r.get(W).__currentAnisotropy){const ve=e.get("EXT_texture_filter_anisotropic");t.texParameterf(X,ve.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(W.anisotropy,i.getMaxAnisotropy())),r.get(W).__currentAnisotropy=W.anisotropy}}}function K(X,W){let ve=!1;X.__webglInit===void 0&&(X.__webglInit=!0,W.addEventListener("dispose",I));const ue=W.source;let Me=f.get(ue);Me===void 0&&(Me={},f.set(ue,Me));const Ae=L(W);if(Ae!==X.__cacheKey){Me[Ae]===void 0&&(Me[Ae]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,ve=!0),Me[Ae].usedTimes++;const Ne=Me[X.__cacheKey];Ne!==void 0&&(Me[X.__cacheKey].usedTimes--,Ne.usedTimes===0&&E(W)),X.__cacheKey=Ae,X.__webglTexture=Me[Ae].texture}return ve}function Z(X,W,ve){let ue=t.TEXTURE_2D;(W.isDataArrayTexture||W.isCompressedArrayTexture)&&(ue=t.TEXTURE_2D_ARRAY),W.isData3DTexture&&(ue=t.TEXTURE_3D);const Me=K(X,W),Ae=W.source;n.bindTexture(ue,X.__webglTexture,t.TEXTURE0+ve);const Ne=r.get(Ae);if(Ae.version!==Ne.__version||Me===!0){n.activeTexture(t.TEXTURE0+ve);const Re=Rr.getPrimaries(Rr.workingColorSpace),Ie=W.colorSpace===_f?null:Rr.getPrimaries(W.colorSpace),it=W.colorSpace===_f||Re===Ie?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,W.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,W.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,it);let Ee=v(W.image,!1,i.maxTextureSize);Ee=ae(W,Ee);const Le=o.convert(W.format,W.colorSpace),Ge=o.convert(W.type);let Ke=w(W.internalFormat,Le,Ge,W.colorSpace,W.isVideoTexture);G(ue,W);let je;const et=W.mipmaps,lt=W.isVideoTexture!==!0,ht=Ne.__version===void 0||Me===!0,ke=Ae.dataReady,gt=P(W,Ee);if(W.isDepthTexture)Ke=S(W.format===Bb,W.type),ht&&(lt?n.texStorage2D(t.TEXTURE_2D,1,Ke,Ee.width,Ee.height):n.texImage2D(t.TEXTURE_2D,0,Ke,Ee.width,Ee.height,0,Le,Ge,null));else if(W.isDataTexture)if(et.length>0){lt&&ht&&n.texStorage2D(t.TEXTURE_2D,gt,Ke,et[0].width,et[0].height);for(let tt=0,yt=et.length;tt<yt;tt++)je=et[tt],lt?ke&&n.texSubImage2D(t.TEXTURE_2D,tt,0,0,je.width,je.height,Le,Ge,je.data):n.texImage2D(t.TEXTURE_2D,tt,Ke,je.width,je.height,0,Le,Ge,je.data);W.generateMipmaps=!1}else lt?(ht&&n.texStorage2D(t.TEXTURE_2D,gt,Ke,Ee.width,Ee.height),ke&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Ee.width,Ee.height,Le,Ge,Ee.data)):n.texImage2D(t.TEXTURE_2D,0,Ke,Ee.width,Ee.height,0,Le,Ge,Ee.data);else if(W.isCompressedTexture)if(W.isCompressedArrayTexture){lt&&ht&&n.texStorage3D(t.TEXTURE_2D_ARRAY,gt,Ke,et[0].width,et[0].height,Ee.depth);for(let tt=0,yt=et.length;tt<yt;tt++)if(je=et[tt],W.format!==rc)if(Le!==null)if(lt){if(ke)if(W.layerUpdates.size>0){const at=k9(je.width,je.height,W.format,W.type);for(const mt of W.layerUpdates){const Ot=je.data.subarray(mt*at/je.data.BYTES_PER_ELEMENT,(mt+1)*at/je.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,tt,0,0,mt,je.width,je.height,1,Le,Ot)}W.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,tt,0,0,0,je.width,je.height,Ee.depth,Le,je.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,tt,Ke,je.width,je.height,Ee.depth,0,je.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else lt?ke&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,tt,0,0,0,je.width,je.height,Ee.depth,Le,Ge,je.data):n.texImage3D(t.TEXTURE_2D_ARRAY,tt,Ke,je.width,je.height,Ee.depth,0,Le,Ge,je.data)}else{lt&&ht&&n.texStorage2D(t.TEXTURE_2D,gt,Ke,et[0].width,et[0].height);for(let tt=0,yt=et.length;tt<yt;tt++)je=et[tt],W.format!==rc?Le!==null?lt?ke&&n.compressedTexSubImage2D(t.TEXTURE_2D,tt,0,0,je.width,je.height,Le,je.data):n.compressedTexImage2D(t.TEXTURE_2D,tt,Ke,je.width,je.height,0,je.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):lt?ke&&n.texSubImage2D(t.TEXTURE_2D,tt,0,0,je.width,je.height,Le,Ge,je.data):n.texImage2D(t.TEXTURE_2D,tt,Ke,je.width,je.height,0,Le,Ge,je.data)}else if(W.isDataArrayTexture)if(lt){if(ht&&n.texStorage3D(t.TEXTURE_2D_ARRAY,gt,Ke,Ee.width,Ee.height,Ee.depth),ke)if(W.layerUpdates.size>0){const tt=k9(Ee.width,Ee.height,W.format,W.type);for(const yt of W.layerUpdates){const at=Ee.data.subarray(yt*tt/Ee.data.BYTES_PER_ELEMENT,(yt+1)*tt/Ee.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,yt,Ee.width,Ee.height,1,Le,Ge,at)}W.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Ee.width,Ee.height,Ee.depth,Le,Ge,Ee.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,Ke,Ee.width,Ee.height,Ee.depth,0,Le,Ge,Ee.data);else if(W.isData3DTexture)lt?(ht&&n.texStorage3D(t.TEXTURE_3D,gt,Ke,Ee.width,Ee.height,Ee.depth),ke&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Ee.width,Ee.height,Ee.depth,Le,Ge,Ee.data)):n.texImage3D(t.TEXTURE_3D,0,Ke,Ee.width,Ee.height,Ee.depth,0,Le,Ge,Ee.data);else if(W.isFramebufferTexture){if(ht)if(lt)n.texStorage2D(t.TEXTURE_2D,gt,Ke,Ee.width,Ee.height);else{let tt=Ee.width,yt=Ee.height;for(let at=0;at<gt;at++)n.texImage2D(t.TEXTURE_2D,at,Ke,tt,yt,0,Le,Ge,null),tt>>=1,yt>>=1}}else if(et.length>0){if(lt&&ht){const tt=ge(et[0]);n.texStorage2D(t.TEXTURE_2D,gt,Ke,tt.width,tt.height)}for(let tt=0,yt=et.length;tt<yt;tt++)je=et[tt],lt?ke&&n.texSubImage2D(t.TEXTURE_2D,tt,0,0,Le,Ge,je):n.texImage2D(t.TEXTURE_2D,tt,Ke,Le,Ge,je);W.generateMipmaps=!1}else if(lt){if(ht){const tt=ge(Ee);n.texStorage2D(t.TEXTURE_2D,gt,Ke,tt.width,tt.height)}ke&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Le,Ge,Ee)}else n.texImage2D(t.TEXTURE_2D,0,Ke,Le,Ge,Ee);m(W)&&g(ue),Ne.__version=Ae.version,W.onUpdate&&W.onUpdate(W)}X.__version=W.version}function ee(X,W,ve){if(W.image.length!==6)return;const ue=K(X,W),Me=W.source;n.bindTexture(t.TEXTURE_CUBE_MAP,X.__webglTexture,t.TEXTURE0+ve);const Ae=r.get(Me);if(Me.version!==Ae.__version||ue===!0){n.activeTexture(t.TEXTURE0+ve);const Ne=Rr.getPrimaries(Rr.workingColorSpace),Re=W.colorSpace===_f?null:Rr.getPrimaries(W.colorSpace),Ie=W.colorSpace===_f||Ne===Re?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,W.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,W.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ie);const it=W.isCompressedTexture||W.image[0].isCompressedTexture,Ee=W.image[0]&&W.image[0].isDataTexture,Le=[];for(let yt=0;yt<6;yt++)!it&&!Ee?Le[yt]=v(W.image[yt],!0,i.maxCubemapSize):Le[yt]=Ee?W.image[yt].image:W.image[yt],Le[yt]=ae(W,Le[yt]);const Ge=Le[0],Ke=o.convert(W.format,W.colorSpace),je=o.convert(W.type),et=w(W.internalFormat,Ke,je,W.colorSpace),lt=W.isVideoTexture!==!0,ht=Ae.__version===void 0||ue===!0,ke=Me.dataReady;let gt=P(W,Ge);G(t.TEXTURE_CUBE_MAP,W);let tt;if(it){lt&&ht&&n.texStorage2D(t.TEXTURE_CUBE_MAP,gt,et,Ge.width,Ge.height);for(let yt=0;yt<6;yt++){tt=Le[yt].mipmaps;for(let at=0;at<tt.length;at++){const mt=tt[at];W.format!==rc?Ke!==null?lt?ke&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+yt,at,0,0,mt.width,mt.height,Ke,mt.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+yt,at,et,mt.width,mt.height,0,mt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):lt?ke&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+yt,at,0,0,mt.width,mt.height,Ke,je,mt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+yt,at,et,mt.width,mt.height,0,Ke,je,mt.data)}}}else{if(tt=W.mipmaps,lt&&ht){tt.length>0&&gt++;const yt=ge(Le[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,gt,et,yt.width,yt.height)}for(let yt=0;yt<6;yt++)if(Ee){lt?ke&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+yt,0,0,0,Le[yt].width,Le[yt].height,Ke,je,Le[yt].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+yt,0,et,Le[yt].width,Le[yt].height,0,Ke,je,Le[yt].data);for(let at=0;at<tt.length;at++){const Ot=tt[at].image[yt].image;lt?ke&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+yt,at+1,0,0,Ot.width,Ot.height,Ke,je,Ot.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+yt,at+1,et,Ot.width,Ot.height,0,Ke,je,Ot.data)}}else{lt?ke&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+yt,0,0,0,Ke,je,Le[yt]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+yt,0,et,Ke,je,Le[yt]);for(let at=0;at<tt.length;at++){const mt=tt[at];lt?ke&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+yt,at+1,0,0,Ke,je,mt.image[yt]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+yt,at+1,et,Ke,je,mt.image[yt])}}}m(W)&&g(t.TEXTURE_CUBE_MAP),Ae.__version=Me.version,W.onUpdate&&W.onUpdate(W)}X.__version=W.version}function V(X,W,ve,ue,Me,Ae){const Ne=o.convert(ve.format,ve.colorSpace),Re=o.convert(ve.type),Ie=w(ve.internalFormat,Ne,Re,ve.colorSpace),it=r.get(W),Ee=r.get(ve);if(Ee.__renderTarget=W,!it.__hasExternalTextures){const Le=Math.max(1,W.width>>Ae),Ge=Math.max(1,W.height>>Ae);Me===t.TEXTURE_3D||Me===t.TEXTURE_2D_ARRAY?n.texImage3D(Me,Ae,Ie,Le,Ge,W.depth,0,Ne,Re,null):n.texImage2D(Me,Ae,Ie,Le,Ge,0,Ne,Re,null)}n.bindFramebuffer(t.FRAMEBUFFER,X),me(W)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,ue,Me,Ee.__webglTexture,0,de(W)):(Me===t.TEXTURE_2D||Me>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Me<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,ue,Me,Ee.__webglTexture,Ae),n.bindFramebuffer(t.FRAMEBUFFER,null)}function J(X,W,ve){if(t.bindRenderbuffer(t.RENDERBUFFER,X),W.depthBuffer){const ue=W.depthTexture,Me=ue&&ue.isDepthTexture?ue.type:null,Ae=S(W.stencilBuffer,Me),Ne=W.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Re=de(W);me(W)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Re,Ae,W.width,W.height):ve?t.renderbufferStorageMultisample(t.RENDERBUFFER,Re,Ae,W.width,W.height):t.renderbufferStorage(t.RENDERBUFFER,Ae,W.width,W.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,Ne,t.RENDERBUFFER,X)}else{const ue=W.textures;for(let Me=0;Me<ue.length;Me++){const Ae=ue[Me],Ne=o.convert(Ae.format,Ae.colorSpace),Re=o.convert(Ae.type),Ie=w(Ae.internalFormat,Ne,Re,Ae.colorSpace),it=de(W);ve&&me(W)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,it,Ie,W.width,W.height):me(W)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,it,Ie,W.width,W.height):t.renderbufferStorage(t.RENDERBUFFER,Ie,W.width,W.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function oe(X,W){if(W&&W.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,X),!(W.depthTexture&&W.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const ue=r.get(W.depthTexture);ue.__renderTarget=W,(!ue.__webglTexture||W.depthTexture.image.width!==W.width||W.depthTexture.image.height!==W.height)&&(W.depthTexture.image.width=W.width,W.depthTexture.image.height=W.height,W.depthTexture.needsUpdate=!0),N(W.depthTexture,0);const Me=ue.__webglTexture,Ae=de(W);if(W.depthTexture.format===Lb)me(W)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Me,0,Ae):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Me,0);else if(W.depthTexture.format===Bb)me(W)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Me,0,Ae):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Me,0);else throw new Error("Unknown depthTexture format")}function ne(X){const W=r.get(X),ve=X.isWebGLCubeRenderTarget===!0;if(W.__boundDepthTexture!==X.depthTexture){const ue=X.depthTexture;if(W.__depthDisposeCallback&&W.__depthDisposeCallback(),ue){const Me=()=>{delete W.__boundDepthTexture,delete W.__depthDisposeCallback,ue.removeEventListener("dispose",Me)};ue.addEventListener("dispose",Me),W.__depthDisposeCallback=Me}W.__boundDepthTexture=ue}if(X.depthTexture&&!W.__autoAllocateDepthBuffer){if(ve)throw new Error("target.depthTexture not supported in Cube render targets");oe(W.__webglFramebuffer,X)}else if(ve){W.__webglDepthbuffer=[];for(let ue=0;ue<6;ue++)if(n.bindFramebuffer(t.FRAMEBUFFER,W.__webglFramebuffer[ue]),W.__webglDepthbuffer[ue]===void 0)W.__webglDepthbuffer[ue]=t.createRenderbuffer(),J(W.__webglDepthbuffer[ue],X,!1);else{const Me=X.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ae=W.__webglDepthbuffer[ue];t.bindRenderbuffer(t.RENDERBUFFER,Ae),t.framebufferRenderbuffer(t.FRAMEBUFFER,Me,t.RENDERBUFFER,Ae)}}else if(n.bindFramebuffer(t.FRAMEBUFFER,W.__webglFramebuffer),W.__webglDepthbuffer===void 0)W.__webglDepthbuffer=t.createRenderbuffer(),J(W.__webglDepthbuffer,X,!1);else{const ue=X.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Me=W.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,Me),t.framebufferRenderbuffer(t.FRAMEBUFFER,ue,t.RENDERBUFFER,Me)}n.bindFramebuffer(t.FRAMEBUFFER,null)}function pe(X,W,ve){const ue=r.get(X);W!==void 0&&V(ue.__webglFramebuffer,X,X.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),ve!==void 0&&ne(X)}function ye(X){const W=X.texture,ve=r.get(X),ue=r.get(W);X.addEventListener("dispose",M);const Me=X.textures,Ae=X.isWebGLCubeRenderTarget===!0,Ne=Me.length>1;if(Ne||(ue.__webglTexture===void 0&&(ue.__webglTexture=t.createTexture()),ue.__version=W.version,s.memory.textures++),Ae){ve.__webglFramebuffer=[];for(let Re=0;Re<6;Re++)if(W.mipmaps&&W.mipmaps.length>0){ve.__webglFramebuffer[Re]=[];for(let Ie=0;Ie<W.mipmaps.length;Ie++)ve.__webglFramebuffer[Re][Ie]=t.createFramebuffer()}else ve.__webglFramebuffer[Re]=t.createFramebuffer()}else{if(W.mipmaps&&W.mipmaps.length>0){ve.__webglFramebuffer=[];for(let Re=0;Re<W.mipmaps.length;Re++)ve.__webglFramebuffer[Re]=t.createFramebuffer()}else ve.__webglFramebuffer=t.createFramebuffer();if(Ne)for(let Re=0,Ie=Me.length;Re<Ie;Re++){const it=r.get(Me[Re]);it.__webglTexture===void 0&&(it.__webglTexture=t.createTexture(),s.memory.textures++)}if(X.samples>0&&me(X)===!1){ve.__webglMultisampledFramebuffer=t.createFramebuffer(),ve.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,ve.__webglMultisampledFramebuffer);for(let Re=0;Re<Me.length;Re++){const Ie=Me[Re];ve.__webglColorRenderbuffer[Re]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,ve.__webglColorRenderbuffer[Re]);const it=o.convert(Ie.format,Ie.colorSpace),Ee=o.convert(Ie.type),Le=w(Ie.internalFormat,it,Ee,Ie.colorSpace,X.isXRRenderTarget===!0),Ge=de(X);t.renderbufferStorageMultisample(t.RENDERBUFFER,Ge,Le,X.width,X.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Re,t.RENDERBUFFER,ve.__webglColorRenderbuffer[Re])}t.bindRenderbuffer(t.RENDERBUFFER,null),X.depthBuffer&&(ve.__webglDepthRenderbuffer=t.createRenderbuffer(),J(ve.__webglDepthRenderbuffer,X,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Ae){n.bindTexture(t.TEXTURE_CUBE_MAP,ue.__webglTexture),G(t.TEXTURE_CUBE_MAP,W);for(let Re=0;Re<6;Re++)if(W.mipmaps&&W.mipmaps.length>0)for(let Ie=0;Ie<W.mipmaps.length;Ie++)V(ve.__webglFramebuffer[Re][Ie],X,W,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Re,Ie);else V(ve.__webglFramebuffer[Re],X,W,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Re,0);m(W)&&g(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Ne){for(let Re=0,Ie=Me.length;Re<Ie;Re++){const it=Me[Re],Ee=r.get(it);n.bindTexture(t.TEXTURE_2D,Ee.__webglTexture),G(t.TEXTURE_2D,it),V(ve.__webglFramebuffer,X,it,t.COLOR_ATTACHMENT0+Re,t.TEXTURE_2D,0),m(it)&&g(t.TEXTURE_2D)}n.unbindTexture()}else{let Re=t.TEXTURE_2D;if((X.isWebGL3DRenderTarget||X.isWebGLArrayRenderTarget)&&(Re=X.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(Re,ue.__webglTexture),G(Re,W),W.mipmaps&&W.mipmaps.length>0)for(let Ie=0;Ie<W.mipmaps.length;Ie++)V(ve.__webglFramebuffer[Ie],X,W,t.COLOR_ATTACHMENT0,Re,Ie);else V(ve.__webglFramebuffer,X,W,t.COLOR_ATTACHMENT0,Re,0);m(W)&&g(Re),n.unbindTexture()}X.depthBuffer&&ne(X)}function Ce(X){const W=X.textures;for(let ve=0,ue=W.length;ve<ue;ve++){const Me=W[ve];if(m(Me)){const Ae=x(X),Ne=r.get(Me).__webglTexture;n.bindTexture(Ae,Ne),g(Ae),n.unbindTexture()}}}const _e=[],ce=[];function Be(X){if(X.samples>0){if(me(X)===!1){const W=X.textures,ve=X.width,ue=X.height;let Me=t.COLOR_BUFFER_BIT;const Ae=X.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ne=r.get(X),Re=W.length>1;if(Re)for(let Ie=0;Ie<W.length;Ie++)n.bindFramebuffer(t.FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ie,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Ne.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ie,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ne.__webglFramebuffer);for(let Ie=0;Ie<W.length;Ie++){if(X.resolveDepthBuffer&&(X.depthBuffer&&(Me|=t.DEPTH_BUFFER_BIT),X.stencilBuffer&&X.resolveStencilBuffer&&(Me|=t.STENCIL_BUFFER_BIT)),Re){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Ne.__webglColorRenderbuffer[Ie]);const it=r.get(W[Ie]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,it,0)}t.blitFramebuffer(0,0,ve,ue,0,0,ve,ue,Me,t.NEAREST),l===!0&&(_e.length=0,ce.length=0,_e.push(t.COLOR_ATTACHMENT0+Ie),X.depthBuffer&&X.resolveDepthBuffer===!1&&(_e.push(Ae),ce.push(Ae),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,ce)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,_e))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Re)for(let Ie=0;Ie<W.length;Ie++){n.bindFramebuffer(t.FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ie,t.RENDERBUFFER,Ne.__webglColorRenderbuffer[Ie]);const it=r.get(W[Ie]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Ne.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ie,t.TEXTURE_2D,it,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ne.__webglMultisampledFramebuffer)}else if(X.depthBuffer&&X.resolveDepthBuffer===!1&&l){const W=X.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[W])}}}function de(X){return Math.min(i.maxSamples,X.samples)}function me(X){const W=r.get(X);return X.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&W.__useRenderToTexture!==!1}function ie(X){const W=s.render.frame;u.get(X)!==W&&(u.set(X,W),X.update())}function ae(X,W){const ve=X.colorSpace,ue=X.format,Me=X.type;return X.isCompressedTexture===!0||X.isVideoTexture===!0||ve!==Xv&&ve!==_f&&(Rr.getTransfer(ve)===ei?(ue!==rc||Me!==_d)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ve)),W}function ge(X){return typeof HTMLImageElement!="undefined"&&X instanceof HTMLImageElement?(c.width=X.naturalWidth||X.width,c.height=X.naturalHeight||X.height):typeof VideoFrame!="undefined"&&X instanceof VideoFrame?(c.width=X.displayWidth,c.height=X.displayHeight):(c.width=X.width,c.height=X.height),c}this.allocateTextureUnit=F,this.resetTextureUnits=R,this.setTexture2D=N,this.setTexture2DArray=U,this.setTexture3D=$,this.setTextureCube=B,this.rebindTextures=pe,this.setupRenderTarget=ye,this.updateRenderTargetMipmap=Ce,this.updateMultisampleRenderTarget=Be,this.setupDepthRenderbuffer=ne,this.setupFrameBufferTexture=V,this.useMultisampledRTT=me}function RYe(t,e){function n(r,i=_f){let o;const s=Rr.getTransfer(i);if(r===_d)return t.UNSIGNED_BYTE;if(r===TL)return t.UNSIGNED_SHORT_4_4_4_4;if(r===ML)return t.UNSIGNED_SHORT_5_5_5_1;if(r===$ee)return t.UNSIGNED_INT_5_9_9_9_REV;if(r===Vee)return t.BYTE;if(r===Wee)return t.SHORT;if(r===Ob)return t.UNSIGNED_SHORT;if(r===AL)return t.INT;if(r===tm)return t.UNSIGNED_INT;if(r===Yu)return t.FLOAT;if(r===Hw)return t.HALF_FLOAT;if(r===Hee)return t.ALPHA;if(r===Gee)return t.RGB;if(r===rc)return t.RGBA;if(r===qee)return t.LUMINANCE;if(r===Kee)return t.LUMINANCE_ALPHA;if(r===Lb)return t.DEPTH_COMPONENT;if(r===Bb)return t.DEPTH_STENCIL;if(r===Yee)return t.RED;if(r===PL)return t.RED_INTEGER;if(r===Xee)return t.RG;if(r===DL)return t.RG_INTEGER;if(r===RL)return t.RGBA_INTEGER;if(r===cE||r===uE||r===dE||r===fE)if(s===ei)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(r===cE)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===uE)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===dE)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===fE)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(r===cE)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===uE)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===dE)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===fE)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===Nk||r===Lk||r===Bk||r===jk)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(r===Nk)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===Lk)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===Bk)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===jk)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===Uk||r===zk||r===Vk)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(r===Uk||r===zk)return s===ei?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(r===Vk)return s===ei?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===Wk||r===$k||r===Hk||r===Gk||r===qk||r===Kk||r===Yk||r===Xk||r===Qk||r===Zk||r===Jk||r===eF||r===tF||r===nF)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(r===Wk)return s===ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===$k)return s===ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===Hk)return s===ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===Gk)return s===ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===qk)return s===ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===Kk)return s===ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===Yk)return s===ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===Xk)return s===ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===Qk)return s===ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===Zk)return s===ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===Jk)return s===ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===eF)return s===ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===tF)return s===ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===nF)return s===ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===hE||r===rF||r===iF)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(r===hE)return s===ei?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===rF)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===iF)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===Qee||r===oF||r===sF||r===aF)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(r===hE)return o.COMPRESSED_RED_RGTC1_EXT;if(r===oF)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===sF)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===aF)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Nb?t.UNSIGNED_INT_24_8:t[r]!==void 0?t[r]:null}return{convert:n}}const IYe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,kYe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class FYe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const i=new Ns,o=e.properties.get(i);o.__webglTexture=n.texture,(n.depthNear!==r.depthNear||n.depthFar!==r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,r=new rh({vertexShader:IYe,fragmentShader:kYe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new Mn(new Kf(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class OYe extends x0{constructor(e,n){super();const r=this;let i=null,o=1,s=null,a="local-floor",l=1,c=null,u=null,d=null,f=null,p=null,b=null;const v=new FYe,m=n.getContextAttributes();let g=null,x=null;const w=[],S=[],P=new qt;let I=null;const M=new cl;M.viewport=new $i;const D=new cl;D.viewport=new $i;const E=[M,D],_=new nHe;let A=null,R=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Z){let ee=w[Z];return ee===void 0&&(ee=new SD,w[Z]=ee),ee.getTargetRaySpace()},this.getControllerGrip=function(Z){let ee=w[Z];return ee===void 0&&(ee=new SD,w[Z]=ee),ee.getGripSpace()},this.getHand=function(Z){let ee=w[Z];return ee===void 0&&(ee=new SD,w[Z]=ee),ee.getHandSpace()};function F(Z){const ee=S.indexOf(Z.inputSource);if(ee===-1)return;const V=w[ee];V!==void 0&&(V.update(Z.inputSource,Z.frame,c||s),V.dispatchEvent({type:Z.type,data:Z.inputSource}))}function L(){i.removeEventListener("select",F),i.removeEventListener("selectstart",F),i.removeEventListener("selectend",F),i.removeEventListener("squeeze",F),i.removeEventListener("squeezestart",F),i.removeEventListener("squeezeend",F),i.removeEventListener("end",L),i.removeEventListener("inputsourceschange",N);for(let Z=0;Z<w.length;Z++){const ee=S[Z];ee!==null&&(S[Z]=null,w[Z].disconnect(ee))}A=null,R=null,v.reset(),e.setRenderTarget(g),p=null,f=null,d=null,i=null,x=null,K.stop(),r.isPresenting=!1,e.setPixelRatio(I),e.setSize(P.width,P.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Z){o=Z,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Z){a=Z,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||s},this.setReferenceSpace=function(Z){c=Z},this.getBaseLayer=function(){return f!==null?f:p},this.getBinding=function(){return d},this.getFrame=function(){return b},this.getSession=function(){return i},this.setSession=function(Z){return te(this,null,function*(){if(i=Z,i!==null){if(g=e.getRenderTarget(),i.addEventListener("select",F),i.addEventListener("selectstart",F),i.addEventListener("selectend",F),i.addEventListener("squeeze",F),i.addEventListener("squeezestart",F),i.addEventListener("squeezeend",F),i.addEventListener("end",L),i.addEventListener("inputsourceschange",N),m.xrCompatible!==!0&&(yield n.makeXRCompatible()),I=e.getPixelRatio(),e.getSize(P),typeof XRWebGLBinding!="undefined"&&"createProjectionLayer"in XRWebGLBinding.prototype){let V=null,J=null,oe=null;m.depth&&(oe=m.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,V=m.stencil?Bb:Lb,J=m.stencil?Nb:tm);const ne={colorFormat:n.RGBA8,depthFormat:oe,scaleFactor:o};d=new XRWebGLBinding(i,n),f=d.createProjectionLayer(ne),i.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),x=new nm(f.textureWidth,f.textureHeight,{format:rc,type:_d,depthTexture:new cte(f.textureWidth,f.textureHeight,J,void 0,void 0,void 0,void 0,void 0,void 0,V),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:m.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1,resolveStencilBuffer:f.ignoreDepthValues===!1})}else{const V={antialias:m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:o};p=new XRWebGLLayer(i,n,V),i.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),x=new nm(p.framebufferWidth,p.framebufferHeight,{format:rc,type:_d,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil,resolveDepthBuffer:p.ignoreDepthValues===!1,resolveStencilBuffer:p.ignoreDepthValues===!1})}x.isXRRenderTarget=!0,this.setFoveation(l),c=null,s=yield i.requestReferenceSpace(a),K.setContext(i),K.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return v.getDepthTexture()};function N(Z){for(let ee=0;ee<Z.removed.length;ee++){const V=Z.removed[ee],J=S.indexOf(V);J>=0&&(S[J]=null,w[J].disconnect(V))}for(let ee=0;ee<Z.added.length;ee++){const V=Z.added[ee];let J=S.indexOf(V);if(J===-1){for(let ne=0;ne<w.length;ne++)if(ne>=S.length){S.push(V),J=ne;break}else if(S[ne]===null){S[ne]=V,J=ne;break}if(J===-1)break}const oe=w[J];oe&&oe.connect(V)}}const U=new He,$=new He;function B(Z,ee,V){U.setFromMatrixPosition(ee.matrixWorld),$.setFromMatrixPosition(V.matrixWorld);const J=U.distanceTo($),oe=ee.projectionMatrix.elements,ne=V.projectionMatrix.elements,pe=oe[14]/(oe[10]-1),ye=oe[14]/(oe[10]+1),Ce=(oe[9]+1)/oe[5],_e=(oe[9]-1)/oe[5],ce=(oe[8]-1)/oe[0],Be=(ne[8]+1)/ne[0],de=pe*ce,me=pe*Be,ie=J/(-ce+Be),ae=ie*-ce;if(ee.matrixWorld.decompose(Z.position,Z.quaternion,Z.scale),Z.translateX(ae),Z.translateZ(ie),Z.matrixWorld.compose(Z.position,Z.quaternion,Z.scale),Z.matrixWorldInverse.copy(Z.matrixWorld).invert(),oe[10]===-1)Z.projectionMatrix.copy(ee.projectionMatrix),Z.projectionMatrixInverse.copy(ee.projectionMatrixInverse);else{const ge=pe+ie,X=ye+ie,W=de-ae,ve=me+(J-ae),ue=Ce*ye/X*ge,Me=_e*ye/X*ge;Z.projectionMatrix.makePerspective(W,ve,ue,Me,ge,X),Z.projectionMatrixInverse.copy(Z.projectionMatrix).invert()}}function H(Z,ee){ee===null?Z.matrixWorld.copy(Z.matrix):Z.matrixWorld.multiplyMatrices(ee.matrixWorld,Z.matrix),Z.matrixWorldInverse.copy(Z.matrixWorld).invert()}this.updateCamera=function(Z){if(i===null)return;let ee=Z.near,V=Z.far;v.texture!==null&&(v.depthNear>0&&(ee=v.depthNear),v.depthFar>0&&(V=v.depthFar)),_.near=D.near=M.near=ee,_.far=D.far=M.far=V,(A!==_.near||R!==_.far)&&(i.updateRenderState({depthNear:_.near,depthFar:_.far}),A=_.near,R=_.far),M.layers.mask=Z.layers.mask|2,D.layers.mask=Z.layers.mask|4,_.layers.mask=M.layers.mask|D.layers.mask;const J=Z.parent,oe=_.cameras;H(_,J);for(let ne=0;ne<oe.length;ne++)H(oe[ne],J);oe.length===2?B(_,M,D):_.projectionMatrix.copy(M.projectionMatrix),q(Z,_,J)};function q(Z,ee,V){V===null?Z.matrix.copy(ee.matrixWorld):(Z.matrix.copy(V.matrixWorld),Z.matrix.invert(),Z.matrix.multiply(ee.matrixWorld)),Z.matrix.decompose(Z.position,Z.quaternion,Z.scale),Z.updateMatrixWorld(!0),Z.projectionMatrix.copy(ee.projectionMatrix),Z.projectionMatrixInverse.copy(ee.projectionMatrixInverse),Z.isPerspectiveCamera&&(Z.fov=lF*2*Math.atan(1/Z.projectionMatrix.elements[5]),Z.zoom=1)}this.getCamera=function(){return _},this.getFoveation=function(){if(!(f===null&&p===null))return l},this.setFoveation=function(Z){l=Z,f!==null&&(f.fixedFoveation=Z),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=Z)},this.hasDepthSensing=function(){return v.texture!==null},this.getDepthSensingMesh=function(){return v.getMesh(_)};let z=null;function G(Z,ee){if(u=ee.getViewerPose(c||s),b=ee,u!==null){const V=u.views;p!==null&&(e.setRenderTargetFramebuffer(x,p.framebuffer),e.setRenderTarget(x));let J=!1;V.length!==_.cameras.length&&(_.cameras.length=0,J=!0);for(let pe=0;pe<V.length;pe++){const ye=V[pe];let Ce=null;if(p!==null)Ce=p.getViewport(ye);else{const ce=d.getViewSubImage(f,ye);Ce=ce.viewport,pe===0&&(e.setRenderTargetTextures(x,ce.colorTexture,ce.depthStencilTexture),e.setRenderTarget(x))}let _e=E[pe];_e===void 0&&(_e=new cl,_e.layers.enable(pe),_e.viewport=new $i,E[pe]=_e),_e.matrix.fromArray(ye.transform.matrix),_e.matrix.decompose(_e.position,_e.quaternion,_e.scale),_e.projectionMatrix.fromArray(ye.projectionMatrix),_e.projectionMatrixInverse.copy(_e.projectionMatrix).invert(),_e.viewport.set(Ce.x,Ce.y,Ce.width,Ce.height),pe===0&&(_.matrix.copy(_e.matrix),_.matrix.decompose(_.position,_.quaternion,_.scale)),J===!0&&_.cameras.push(_e)}const oe=i.enabledFeatures;if(oe&&oe.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&d){const pe=d.getDepthInformation(V[0]);pe&&pe.isValid&&pe.texture&&v.init(e,pe,i.renderState)}}for(let V=0;V<w.length;V++){const J=S[V],oe=w[V];J!==null&&oe!==void 0&&oe.update(J,ee,c||s)}z&&z(Z,ee),ee.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:ee}),b=null}const K=new bte;K.setAnimationLoop(G),this.setAnimationLoop=function(Z){z=Z},this.dispose=function(){}}}const Uh=new au,NYe=new Ci;function LYe(t,e){function n(m,g){m.matrixAutoUpdate===!0&&m.updateMatrix(),g.value.copy(m.matrix)}function r(m,g){g.color.getRGB(m.fogColor.value,ste(t)),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)}function i(m,g,x,w,S){g.isMeshBasicMaterial||g.isMeshLambertMaterial?o(m,g):g.isMeshToonMaterial?(o(m,g),d(m,g)):g.isMeshPhongMaterial?(o(m,g),u(m,g)):g.isMeshStandardMaterial?(o(m,g),f(m,g),g.isMeshPhysicalMaterial&&p(m,g,S)):g.isMeshMatcapMaterial?(o(m,g),b(m,g)):g.isMeshDepthMaterial?o(m,g):g.isMeshDistanceMaterial?(o(m,g),v(m,g)):g.isMeshNormalMaterial?o(m,g):g.isLineBasicMaterial?(s(m,g),g.isLineDashedMaterial&&a(m,g)):g.isPointsMaterial?l(m,g,x,w):g.isSpriteMaterial?c(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function o(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map,n(g.map,m.mapTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,n(g.alphaMap,m.alphaMapTransform)),g.bumpMap&&(m.bumpMap.value=g.bumpMap,n(g.bumpMap,m.bumpMapTransform),m.bumpScale.value=g.bumpScale,g.side===ca&&(m.bumpScale.value*=-1)),g.normalMap&&(m.normalMap.value=g.normalMap,n(g.normalMap,m.normalMapTransform),m.normalScale.value.copy(g.normalScale),g.side===ca&&m.normalScale.value.negate()),g.displacementMap&&(m.displacementMap.value=g.displacementMap,n(g.displacementMap,m.displacementMapTransform),m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap,n(g.emissiveMap,m.emissiveMapTransform)),g.specularMap&&(m.specularMap.value=g.specularMap,n(g.specularMap,m.specularMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);const x=e.get(g),w=x.envMap,S=x.envMapRotation;w&&(m.envMap.value=w,Uh.copy(S),Uh.x*=-1,Uh.y*=-1,Uh.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(Uh.y*=-1,Uh.z*=-1),m.envMapRotation.value.setFromMatrix4(NYe.makeRotationFromEuler(Uh)),m.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap&&(m.lightMap.value=g.lightMap,m.lightMapIntensity.value=g.lightMapIntensity,n(g.lightMap,m.lightMapTransform)),g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity,n(g.aoMap,m.aoMapTransform))}function s(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,g.map&&(m.map.value=g.map,n(g.map,m.mapTransform))}function a(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}function l(m,g,x,w){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*x,m.scale.value=w*.5,g.map&&(m.map.value=g.map,n(g.map,m.uvTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,n(g.alphaMap,m.alphaMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest)}function c(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map,n(g.map,m.mapTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,n(g.alphaMap,m.alphaMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest)}function u(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}function d(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}function f(m,g){m.metalness.value=g.metalness,g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap,n(g.metalnessMap,m.metalnessMapTransform)),m.roughness.value=g.roughness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap,n(g.roughnessMap,m.roughnessMapTransform)),g.envMap&&(m.envMapIntensity.value=g.envMapIntensity)}function p(m,g,x){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap,n(g.sheenColorMap,m.sheenColorMapTransform)),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap,n(g.sheenRoughnessMap,m.sheenRoughnessMapTransform))),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap,n(g.clearcoatMap,m.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,n(g.clearcoatRoughnessMap,m.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(m.clearcoatNormalMap.value=g.clearcoatNormalMap,n(g.clearcoatNormalMap,m.clearcoatNormalMapTransform),m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===ca&&m.clearcoatNormalScale.value.negate())),g.dispersion>0&&(m.dispersion.value=g.dispersion),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap,n(g.iridescenceMap,m.iridescenceMapTransform)),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap,n(g.iridescenceThicknessMap,m.iridescenceThicknessMapTransform))),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=x.texture,m.transmissionSamplerSize.value.set(x.width,x.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap,n(g.transmissionMap,m.transmissionMapTransform)),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap,n(g.thicknessMap,m.thicknessMapTransform)),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(m.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(m.anisotropyMap.value=g.anisotropyMap,n(g.anisotropyMap,m.anisotropyMapTransform))),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap,n(g.specularColorMap,m.specularColorMapTransform)),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap,n(g.specularIntensityMap,m.specularIntensityMapTransform))}function b(m,g){g.matcap&&(m.matcap.value=g.matcap)}function v(m,g){const x=e.get(g).light;m.referencePosition.value.setFromMatrixPosition(x.matrixWorld),m.nearDistance.value=x.shadow.camera.near,m.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function BYe(t,e,n,r){let i={},o={},s=[];const a=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(x,w){const S=w.program;r.uniformBlockBinding(x,S)}function c(x,w){let S=i[x.id];S===void 0&&(b(x),S=u(x),i[x.id]=S,x.addEventListener("dispose",m));const P=w.program;r.updateUBOMapping(x,P);const I=e.render.frame;o[x.id]!==I&&(f(x),o[x.id]=I)}function u(x){const w=d();x.__bindingPointIndex=w;const S=t.createBuffer(),P=x.__size,I=x.usage;return t.bindBuffer(t.UNIFORM_BUFFER,S),t.bufferData(t.UNIFORM_BUFFER,P,I),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,w,S),S}function d(){for(let x=0;x<a;x++)if(s.indexOf(x)===-1)return s.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(x){const w=i[x.id],S=x.uniforms,P=x.__cache;t.bindBuffer(t.UNIFORM_BUFFER,w);for(let I=0,M=S.length;I<M;I++){const D=Array.isArray(S[I])?S[I]:[S[I]];for(let E=0,_=D.length;E<_;E++){const A=D[E];if(p(A,I,E,P)===!0){const R=A.__offset,F=Array.isArray(A.value)?A.value:[A.value];let L=0;for(let N=0;N<F.length;N++){const U=F[N],$=v(U);typeof U=="number"||typeof U=="boolean"?(A.__data[0]=U,t.bufferSubData(t.UNIFORM_BUFFER,R+L,A.__data)):U.isMatrix3?(A.__data[0]=U.elements[0],A.__data[1]=U.elements[1],A.__data[2]=U.elements[2],A.__data[3]=0,A.__data[4]=U.elements[3],A.__data[5]=U.elements[4],A.__data[6]=U.elements[5],A.__data[7]=0,A.__data[8]=U.elements[6],A.__data[9]=U.elements[7],A.__data[10]=U.elements[8],A.__data[11]=0):(U.toArray(A.__data,L),L+=$.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,R,A.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function p(x,w,S,P){const I=x.value,M=w+"_"+S;if(P[M]===void 0)return typeof I=="number"||typeof I=="boolean"?P[M]=I:P[M]=I.clone(),!0;{const D=P[M];if(typeof I=="number"||typeof I=="boolean"){if(D!==I)return P[M]=I,!0}else if(D.equals(I)===!1)return D.copy(I),!0}return!1}function b(x){const w=x.uniforms;let S=0;const P=16;for(let M=0,D=w.length;M<D;M++){const E=Array.isArray(w[M])?w[M]:[w[M]];for(let _=0,A=E.length;_<A;_++){const R=E[_],F=Array.isArray(R.value)?R.value:[R.value];for(let L=0,N=F.length;L<N;L++){const U=F[L],$=v(U),B=S%P,H=B%$.boundary,q=B+H;S+=H,q!==0&&P-q<$.storage&&(S+=P-q),R.__data=new Float32Array($.storage/Float32Array.BYTES_PER_ELEMENT),R.__offset=S,S+=$.storage}}}const I=S%P;return I>0&&(S+=P-I),x.__size=S,x.__cache={},this}function v(x){const w={boundary:0,storage:0};return typeof x=="number"||typeof x=="boolean"?(w.boundary=4,w.storage=4):x.isVector2?(w.boundary=8,w.storage=8):x.isVector3||x.isColor?(w.boundary=16,w.storage=12):x.isVector4?(w.boundary=16,w.storage=16):x.isMatrix3?(w.boundary=48,w.storage=48):x.isMatrix4?(w.boundary=64,w.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),w}function m(x){const w=x.target;w.removeEventListener("dispose",m);const S=s.indexOf(w.__bindingPointIndex);s.splice(S,1),t.deleteBuffer(i[w.id]),delete i[w.id],delete o[w.id]}function g(){for(const x in i)t.deleteBuffer(i[x]);s=[],i={},o={}}return{bind:l,update:c,dispose:g}}class jYe{constructor(e={}){const{canvas:n=j$e(),context:r=null,depth:i=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reverseDepthBuffer:f=!1}=e;this.isWebGLRenderer=!0;let p;if(r!==null){if(typeof WebGLRenderingContext!="undefined"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=r.getContextAttributes().alpha}else p=s;const b=new Uint32Array(4),v=new Int32Array(4);let m=null,g=null;const x=[],w=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Gf,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const S=this;let P=!1;this._outputColorSpace=rl;let I=0,M=0,D=null,E=-1,_=null;const A=new $i,R=new $i;let F=null;const L=new wn(0);let N=0,U=n.width,$=n.height,B=1,H=null,q=null;const z=new $i(0,0,U,$),G=new $i(0,0,U,$);let K=!1;const Z=new OL;let ee=!1,V=!1;const J=new Ci,oe=new Ci,ne=new He,pe=new $i,ye={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ce=!1;function _e(){return D===null?B:1}let ce=r;function Be(le,Fe){return n.getContext(le,Fe)}try{const le={alpha:!0,depth:i,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${CL}`),n.addEventListener("webglcontextlost",yt,!1),n.addEventListener("webglcontextrestored",at,!1),n.addEventListener("webglcontextcreationerror",mt,!1),ce===null){const Fe="webgl2";if(ce=Be(Fe,le),ce===null)throw Be(Fe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(le){throw console.error("THREE.WebGLRenderer: "+le.message),le}let de,me,ie,ae,ge,X,W,ve,ue,Me,Ae,Ne,Re,Ie,it,Ee,Le,Ge,Ke,je,et,lt,ht,ke;function gt(){de=new Yqe(ce),de.init(),lt=new RYe(ce,de),me=new Vqe(ce,de,e,lt),ie=new PYe(ce,de),me.reverseDepthBuffer&&f&&ie.buffers.depth.setReversed(!0),ae=new Zqe(ce),ge=new gYe,X=new DYe(ce,de,ie,ge,me,lt,ae),W=new $qe(S),ve=new Kqe(S),ue=new iHe(ce),ht=new Uqe(ce,ue),Me=new Xqe(ce,ue,ae,ht),Ae=new eKe(ce,Me,ue,ae),Ke=new Jqe(ce,me,X),Ee=new Wqe(ge),Ne=new mYe(S,W,ve,de,me,ht,Ee),Re=new LYe(S,ge),Ie=new yYe,it=new EYe(de),Ge=new jqe(S,W,ve,ie,Ae,p,l),Le=new TYe(S,Ae,me),ke=new BYe(ce,ae,me,ie),je=new zqe(ce,de,ae),et=new Qqe(ce,de,ae),ae.programs=Ne.programs,S.capabilities=me,S.extensions=de,S.properties=ge,S.renderLists=Ie,S.shadowMap=Le,S.state=ie,S.info=ae}gt();const tt=new OYe(S,ce);this.xr=tt,this.getContext=function(){return ce},this.getContextAttributes=function(){return ce.getContextAttributes()},this.forceContextLoss=function(){const le=de.get("WEBGL_lose_context");le&&le.loseContext()},this.forceContextRestore=function(){const le=de.get("WEBGL_lose_context");le&&le.restoreContext()},this.getPixelRatio=function(){return B},this.setPixelRatio=function(le){le!==void 0&&(B=le,this.setSize(U,$,!1))},this.getSize=function(le){return le.set(U,$)},this.setSize=function(le,Fe,Je=!0){if(tt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}U=le,$=Fe,n.width=Math.floor(le*B),n.height=Math.floor(Fe*B),Je===!0&&(n.style.width=le+"px",n.style.height=Fe+"px"),this.setViewport(0,0,le,Fe)},this.getDrawingBufferSize=function(le){return le.set(U*B,$*B).floor()},this.setDrawingBufferSize=function(le,Fe,Je){U=le,$=Fe,B=Je,n.width=Math.floor(le*Je),n.height=Math.floor(Fe*Je),this.setViewport(0,0,le,Fe)},this.getCurrentViewport=function(le){return le.copy(A)},this.getViewport=function(le){return le.copy(z)},this.setViewport=function(le,Fe,Je,qe){le.isVector4?z.set(le.x,le.y,le.z,le.w):z.set(le,Fe,Je,qe),ie.viewport(A.copy(z).multiplyScalar(B).round())},this.getScissor=function(le){return le.copy(G)},this.setScissor=function(le,Fe,Je,qe){le.isVector4?G.set(le.x,le.y,le.z,le.w):G.set(le,Fe,Je,qe),ie.scissor(R.copy(G).multiplyScalar(B).round())},this.getScissorTest=function(){return K},this.setScissorTest=function(le){ie.setScissorTest(K=le)},this.setOpaqueSort=function(le){H=le},this.setTransparentSort=function(le){q=le},this.getClearColor=function(le){return le.copy(Ge.getClearColor())},this.setClearColor=function(){Ge.setClearColor(...arguments)},this.getClearAlpha=function(){return Ge.getClearAlpha()},this.setClearAlpha=function(){Ge.setClearAlpha(...arguments)},this.clear=function(le=!0,Fe=!0,Je=!0){let qe=0;if(le){let Ve=!1;if(D!==null){const wt=D.texture.format;Ve=wt===RL||wt===DL||wt===PL}if(Ve){const wt=D.texture.type,It=wt===_d||wt===tm||wt===Ob||wt===Nb||wt===TL||wt===ML,Ct=Ge.getClearColor(),Wt=Ge.getClearAlpha(),ln=Ct.r,vn=Ct.g,cn=Ct.b;It?(b[0]=ln,b[1]=vn,b[2]=cn,b[3]=Wt,ce.clearBufferuiv(ce.COLOR,0,b)):(v[0]=ln,v[1]=vn,v[2]=cn,v[3]=Wt,ce.clearBufferiv(ce.COLOR,0,v))}else qe|=ce.COLOR_BUFFER_BIT}Fe&&(qe|=ce.DEPTH_BUFFER_BIT),Je&&(qe|=ce.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ce.clear(qe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",yt,!1),n.removeEventListener("webglcontextrestored",at,!1),n.removeEventListener("webglcontextcreationerror",mt,!1),Ge.dispose(),Ie.dispose(),it.dispose(),ge.dispose(),W.dispose(),ve.dispose(),Ae.dispose(),ht.dispose(),ke.dispose(),Ne.dispose(),tt.dispose(),tt.removeEventListener("sessionstart",vt),tt.removeEventListener("sessionend",Pt),jt.stop()};function yt(le){le.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),P=!0}function at(){console.log("THREE.WebGLRenderer: Context Restored."),P=!1;const le=ae.autoReset,Fe=Le.enabled,Je=Le.autoUpdate,qe=Le.needsUpdate,Ve=Le.type;gt(),ae.autoReset=le,Le.enabled=Fe,Le.autoUpdate=Je,Le.needsUpdate=qe,Le.type=Ve}function mt(le){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",le.statusMessage)}function Ot(le){const Fe=le.target;Fe.removeEventListener("dispose",Ot),rn(Fe)}function rn(le){on(le),ge.remove(le)}function on(le){const Fe=ge.get(le).programs;Fe!==void 0&&(Fe.forEach(function(Je){Ne.releaseProgram(Je)}),le.isShaderMaterial&&Ne.releaseShaderCache(le))}this.renderBufferDirect=function(le,Fe,Je,qe,Ve,wt){Fe===null&&(Fe=ye);const It=Ve.isMesh&&Ve.matrixWorld.determinant()<0,Ct=Wr(le,Fe,Je,qe,Ve);ie.setMaterial(qe,It);let Wt=Je.index,ln=1;if(qe.wireframe===!0){if(Wt=Me.getWireframeAttribute(Je),Wt===void 0)return;ln=2}const vn=Je.drawRange,cn=Je.attributes.position;let be=vn.start*ln,st=(vn.start+vn.count)*ln;wt!==null&&(be=Math.max(be,wt.start*ln),st=Math.min(st,(wt.start+wt.count)*ln)),Wt!==null?(be=Math.max(be,0),st=Math.min(st,Wt.count)):cn!=null&&(be=Math.max(be,0),st=Math.min(st,cn.count));const zt=st-be;if(zt<0||zt===1/0)return;ht.setup(Ve,qe,Ct,Je,Wt);let At,Bt=je;if(Wt!==null&&(At=ue.get(Wt),Bt=et,Bt.setIndex(At)),Ve.isMesh)qe.wireframe===!0?(ie.setLineWidth(qe.wireframeLinewidth*_e()),Bt.setMode(ce.LINES)):Bt.setMode(ce.TRIANGLES);else if(Ve.isLine){let St=qe.linewidth;St===void 0&&(St=1),ie.setLineWidth(St*_e()),Ve.isLineSegments?Bt.setMode(ce.LINES):Ve.isLineLoop?Bt.setMode(ce.LINE_LOOP):Bt.setMode(ce.LINE_STRIP)}else Ve.isPoints?Bt.setMode(ce.POINTS):Ve.isSprite&&Bt.setMode(ce.TRIANGLES);if(Ve.isBatchedMesh)if(Ve._multiDrawInstances!==null)pE("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Bt.renderMultiDrawInstances(Ve._multiDrawStarts,Ve._multiDrawCounts,Ve._multiDrawCount,Ve._multiDrawInstances);else if(de.get("WEBGL_multi_draw"))Bt.renderMultiDraw(Ve._multiDrawStarts,Ve._multiDrawCounts,Ve._multiDrawCount);else{const St=Ve._multiDrawStarts,Qn=Ve._multiDrawCounts,bn=Ve._multiDrawCount,Gr=Wt?ue.get(Wt).bytesPerElement:1,ai=ge.get(qe).currentProgram.getUniforms();for(let cr=0;cr<bn;cr++)ai.setValue(ce,"_gl_DrawID",cr),Bt.render(St[cr]/Gr,Qn[cr])}else if(Ve.isInstancedMesh)Bt.renderInstances(be,zt,Ve.count);else if(Je.isInstancedBufferGeometry){const St=Je._maxInstanceCount!==void 0?Je._maxInstanceCount:1/0,Qn=Math.min(Je.instanceCount,St);Bt.renderInstances(be,zt,Qn)}else Bt.render(be,zt)};function Pe(le,Fe,Je){le.transparent===!0&&le.side===Ms&&le.forceSinglePass===!1?(le.side=ca,le.needsUpdate=!0,mn(le,Fe,Je),le.side=Sd,le.needsUpdate=!0,mn(le,Fe,Je),le.side=Ms):mn(le,Fe,Je)}this.compile=function(le,Fe,Je=null){Je===null&&(Je=le),g=it.get(Je),g.init(Fe),w.push(g),Je.traverseVisible(function(Ve){Ve.isLight&&Ve.layers.test(Fe.layers)&&(g.pushLight(Ve),Ve.castShadow&&g.pushShadow(Ve))}),le!==Je&&le.traverseVisible(function(Ve){Ve.isLight&&Ve.layers.test(Fe.layers)&&(g.pushLight(Ve),Ve.castShadow&&g.pushShadow(Ve))}),g.setupLights();const qe=new Set;return le.traverse(function(Ve){if(!(Ve.isMesh||Ve.isPoints||Ve.isLine||Ve.isSprite))return;const wt=Ve.material;if(wt)if(Array.isArray(wt))for(let It=0;It<wt.length;It++){const Ct=wt[It];Pe(Ct,Je,Ve),qe.add(Ct)}else Pe(wt,Je,Ve),qe.add(wt)}),g=w.pop(),qe},this.compileAsync=function(le,Fe,Je=null){const qe=this.compile(le,Fe,Je);return new Promise(Ve=>{function wt(){if(qe.forEach(function(It){ge.get(It).currentProgram.isReady()&&qe.delete(It)}),qe.size===0){Ve(le);return}setTimeout(wt,10)}de.get("KHR_parallel_shader_compile")!==null?wt():setTimeout(wt,10)})};let Ue=null;function Xe(le){Ue&&Ue(le)}function vt(){jt.stop()}function Pt(){jt.start()}const jt=new bte;jt.setAnimationLoop(Xe),typeof self!="undefined"&&jt.setContext(self),this.setAnimationLoop=function(le){Ue=le,tt.setAnimationLoop(le),le===null?jt.stop():jt.start()},tt.addEventListener("sessionstart",vt),tt.addEventListener("sessionend",Pt),this.render=function(le,Fe){if(Fe!==void 0&&Fe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(P===!0)return;if(le.matrixWorldAutoUpdate===!0&&le.updateMatrixWorld(),Fe.parent===null&&Fe.matrixWorldAutoUpdate===!0&&Fe.updateMatrixWorld(),tt.enabled===!0&&tt.isPresenting===!0&&(tt.cameraAutoUpdate===!0&&tt.updateCamera(Fe),Fe=tt.getCamera()),le.isScene===!0&&le.onBeforeRender(S,le,Fe,D),g=it.get(le,w.length),g.init(Fe),w.push(g),oe.multiplyMatrices(Fe.projectionMatrix,Fe.matrixWorldInverse),Z.setFromProjectionMatrix(oe),V=this.localClippingEnabled,ee=Ee.init(this.clippingPlanes,V),m=Ie.get(le,x.length),m.init(),x.push(m),tt.enabled===!0&&tt.isPresenting===!0){const wt=S.xr.getDepthSensingMesh();wt!==null&&Nt(wt,Fe,-1/0,S.sortObjects)}Nt(le,Fe,0,S.sortObjects),m.finish(),S.sortObjects===!0&&m.sort(H,q),Ce=tt.enabled===!1||tt.isPresenting===!1||tt.hasDepthSensing()===!1,Ce&&Ge.addToRenderList(m,le),this.info.render.frame++,ee===!0&&Ee.beginShadows();const Je=g.state.shadowsArray;Le.render(Je,le,Fe),ee===!0&&Ee.endShadows(),this.info.autoReset===!0&&this.info.reset();const qe=m.opaque,Ve=m.transmissive;if(g.setupLights(),Fe.isArrayCamera){const wt=Fe.cameras;if(Ve.length>0)for(let It=0,Ct=wt.length;It<Ct;It++){const Wt=wt[It];en(qe,Ve,le,Wt)}Ce&&Ge.render(le);for(let It=0,Ct=wt.length;It<Ct;It++){const Wt=wt[It];Yt(m,le,Wt,Wt.viewport)}}else Ve.length>0&&en(qe,Ve,le,Fe),Ce&&Ge.render(le),Yt(m,le,Fe);D!==null&&M===0&&(X.updateMultisampleRenderTarget(D),X.updateRenderTargetMipmap(D)),le.isScene===!0&&le.onAfterRender(S,le,Fe),ht.resetDefaultState(),E=-1,_=null,w.pop(),w.length>0?(g=w[w.length-1],ee===!0&&Ee.setGlobalState(S.clippingPlanes,g.state.camera)):g=null,x.pop(),x.length>0?m=x[x.length-1]:m=null};function Nt(le,Fe,Je,qe){if(le.visible===!1)return;if(le.layers.test(Fe.layers)){if(le.isGroup)Je=le.renderOrder;else if(le.isLOD)le.autoUpdate===!0&&le.update(Fe);else if(le.isLight)g.pushLight(le),le.castShadow&&g.pushShadow(le);else if(le.isSprite){if(!le.frustumCulled||Z.intersectsSprite(le)){qe&&pe.setFromMatrixPosition(le.matrixWorld).applyMatrix4(oe);const It=Ae.update(le),Ct=le.material;Ct.visible&&m.push(le,It,Ct,Je,pe.z,null)}}else if((le.isMesh||le.isLine||le.isPoints)&&(!le.frustumCulled||Z.intersectsObject(le))){const It=Ae.update(le),Ct=le.material;if(qe&&(le.boundingSphere!==void 0?(le.boundingSphere===null&&le.computeBoundingSphere(),pe.copy(le.boundingSphere.center)):(It.boundingSphere===null&&It.computeBoundingSphere(),pe.copy(It.boundingSphere.center)),pe.applyMatrix4(le.matrixWorld).applyMatrix4(oe)),Array.isArray(Ct)){const Wt=It.groups;for(let ln=0,vn=Wt.length;ln<vn;ln++){const cn=Wt[ln],be=Ct[cn.materialIndex];be&&be.visible&&m.push(le,It,be,Je,pe.z,cn)}}else Ct.visible&&m.push(le,It,Ct,Je,pe.z,null)}}const wt=le.children;for(let It=0,Ct=wt.length;It<Ct;It++)Nt(wt[It],Fe,Je,qe)}function Yt(le,Fe,Je,qe){const Ve=le.opaque,wt=le.transmissive,It=le.transparent;g.setupLightsView(Je),ee===!0&&Ee.setGlobalState(S.clippingPlanes,Je),qe&&ie.viewport(A.copy(qe)),Ve.length>0&&fn(Ve,Fe,Je),wt.length>0&&fn(wt,Fe,Je),It.length>0&&fn(It,Fe,Je),ie.buffers.depth.setTest(!0),ie.buffers.depth.setMask(!0),ie.buffers.color.setMask(!0),ie.setPolygonOffset(!1)}function en(le,Fe,Je,qe){if((Je.isScene===!0?Je.overrideMaterial:null)!==null)return;g.state.transmissionRenderTarget[qe.id]===void 0&&(g.state.transmissionRenderTarget[qe.id]=new nm(1,1,{generateMipmaps:!0,type:de.has("EXT_color_buffer_half_float")||de.has("EXT_color_buffer_float")?Hw:_d,minFilter:Mf,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Rr.workingColorSpace}));const wt=g.state.transmissionRenderTarget[qe.id],It=qe.viewport||A;wt.setSize(It.z*S.transmissionResolutionScale,It.w*S.transmissionResolutionScale);const Ct=S.getRenderTarget();S.setRenderTarget(wt),S.getClearColor(L),N=S.getClearAlpha(),N<1&&S.setClearColor(16777215,.5),S.clear(),Ce&&Ge.render(Je);const Wt=S.toneMapping;S.toneMapping=Gf;const ln=qe.viewport;if(qe.viewport!==void 0&&(qe.viewport=void 0),g.setupLightsView(qe),ee===!0&&Ee.setGlobalState(S.clippingPlanes,qe),fn(le,Je,qe),X.updateMultisampleRenderTarget(wt),X.updateRenderTargetMipmap(wt),de.has("WEBGL_multisampled_render_to_texture")===!1){let vn=!1;for(let cn=0,be=Fe.length;cn<be;cn++){const st=Fe[cn],zt=st.object,At=st.geometry,Bt=st.material,St=st.group;if(Bt.side===Ms&&zt.layers.test(qe.layers)){const Qn=Bt.side;Bt.side=ca,Bt.needsUpdate=!0,hn(zt,Je,qe,At,Bt,St),Bt.side=Qn,Bt.needsUpdate=!0,vn=!0}}vn===!0&&(X.updateMultisampleRenderTarget(wt),X.updateRenderTargetMipmap(wt))}S.setRenderTarget(Ct),S.setClearColor(L,N),ln!==void 0&&(qe.viewport=ln),S.toneMapping=Wt}function fn(le,Fe,Je){const qe=Fe.isScene===!0?Fe.overrideMaterial:null;for(let Ve=0,wt=le.length;Ve<wt;Ve++){const It=le[Ve],Ct=It.object,Wt=It.geometry,ln=It.group;let vn=It.material;vn.allowOverride===!0&&qe!==null&&(vn=qe),Ct.layers.test(Je.layers)&&hn(Ct,Fe,Je,Wt,vn,ln)}}function hn(le,Fe,Je,qe,Ve,wt){le.onBeforeRender(S,Fe,Je,qe,Ve,wt),le.modelViewMatrix.multiplyMatrices(Je.matrixWorldInverse,le.matrixWorld),le.normalMatrix.getNormalMatrix(le.modelViewMatrix),Ve.onBeforeRender(S,Fe,Je,qe,le,wt),Ve.transparent===!0&&Ve.side===Ms&&Ve.forceSinglePass===!1?(Ve.side=ca,Ve.needsUpdate=!0,S.renderBufferDirect(Je,Fe,qe,Ve,le,wt),Ve.side=Sd,Ve.needsUpdate=!0,S.renderBufferDirect(Je,Fe,qe,Ve,le,wt),Ve.side=Ms):S.renderBufferDirect(Je,Fe,qe,Ve,le,wt),le.onAfterRender(S,Fe,Je,qe,Ve,wt)}function mn(le,Fe,Je){Fe.isScene!==!0&&(Fe=ye);const qe=ge.get(le),Ve=g.state.lights,wt=g.state.shadowsArray,It=Ve.state.version,Ct=Ne.getParameters(le,Ve.state,wt,Fe,Je),Wt=Ne.getProgramCacheKey(Ct);let ln=qe.programs;qe.environment=le.isMeshStandardMaterial?Fe.environment:null,qe.fog=Fe.fog,qe.envMap=(le.isMeshStandardMaterial?ve:W).get(le.envMap||qe.environment),qe.envMapRotation=qe.environment!==null&&le.envMap===null?Fe.environmentRotation:le.envMapRotation,ln===void 0&&(le.addEventListener("dispose",Ot),ln=new Map,qe.programs=ln);let vn=ln.get(Wt);if(vn!==void 0){if(qe.currentProgram===vn&&qe.lightsStateVersion===It)return er(le,Ct),vn}else Ct.uniforms=Ne.getUniforms(le),le.onBeforeCompile(Ct,S),vn=Ne.acquireProgram(Ct,Wt),ln.set(Wt,vn),qe.uniforms=Ct.uniforms;const cn=qe.uniforms;return(!le.isShaderMaterial&&!le.isRawShaderMaterial||le.clipping===!0)&&(cn.clippingPlanes=Ee.uniform),er(le,Ct),qe.needsLights=Yn(le),qe.lightsStateVersion=It,qe.needsLights&&(cn.ambientLightColor.value=Ve.state.ambient,cn.lightProbe.value=Ve.state.probe,cn.directionalLights.value=Ve.state.directional,cn.directionalLightShadows.value=Ve.state.directionalShadow,cn.spotLights.value=Ve.state.spot,cn.spotLightShadows.value=Ve.state.spotShadow,cn.rectAreaLights.value=Ve.state.rectArea,cn.ltc_1.value=Ve.state.rectAreaLTC1,cn.ltc_2.value=Ve.state.rectAreaLTC2,cn.pointLights.value=Ve.state.point,cn.pointLightShadows.value=Ve.state.pointShadow,cn.hemisphereLights.value=Ve.state.hemi,cn.directionalShadowMap.value=Ve.state.directionalShadowMap,cn.directionalShadowMatrix.value=Ve.state.directionalShadowMatrix,cn.spotShadowMap.value=Ve.state.spotShadowMap,cn.spotLightMatrix.value=Ve.state.spotLightMatrix,cn.spotLightMap.value=Ve.state.spotLightMap,cn.pointShadowMap.value=Ve.state.pointShadowMap,cn.pointShadowMatrix.value=Ve.state.pointShadowMatrix),qe.currentProgram=vn,qe.uniformsList=null,vn}function jn(le){if(le.uniformsList===null){const Fe=le.currentProgram.getUniforms();le.uniformsList=mE.seqWithValue(Fe.seq,le.uniforms)}return le.uniformsList}function er(le,Fe){const Je=ge.get(le);Je.outputColorSpace=Fe.outputColorSpace,Je.batching=Fe.batching,Je.batchingColor=Fe.batchingColor,Je.instancing=Fe.instancing,Je.instancingColor=Fe.instancingColor,Je.instancingMorph=Fe.instancingMorph,Je.skinning=Fe.skinning,Je.morphTargets=Fe.morphTargets,Je.morphNormals=Fe.morphNormals,Je.morphColors=Fe.morphColors,Je.morphTargetsCount=Fe.morphTargetsCount,Je.numClippingPlanes=Fe.numClippingPlanes,Je.numIntersection=Fe.numClipIntersection,Je.vertexAlphas=Fe.vertexAlphas,Je.vertexTangents=Fe.vertexTangents,Je.toneMapping=Fe.toneMapping}function Wr(le,Fe,Je,qe,Ve){Fe.isScene!==!0&&(Fe=ye),X.resetTextureUnits();const wt=Fe.fog,It=qe.isMeshStandardMaterial?Fe.environment:null,Ct=D===null?S.outputColorSpace:D.isXRRenderTarget===!0?D.texture.colorSpace:Xv,Wt=(qe.isMeshStandardMaterial?ve:W).get(qe.envMap||It),ln=qe.vertexColors===!0&&!!Je.attributes.color&&Je.attributes.color.itemSize===4,vn=!!Je.attributes.tangent&&(!!qe.normalMap||qe.anisotropy>0),cn=!!Je.morphAttributes.position,be=!!Je.morphAttributes.normal,st=!!Je.morphAttributes.color;let zt=Gf;qe.toneMapped&&(D===null||D.isXRRenderTarget===!0)&&(zt=S.toneMapping);const At=Je.morphAttributes.position||Je.morphAttributes.normal||Je.morphAttributes.color,Bt=At!==void 0?At.length:0,St=ge.get(qe),Qn=g.state.lights;if(ee===!0&&(V===!0||le!==_)){const Un=le===_&&qe.id===E;Ee.setState(qe,le,Un)}let bn=!1;qe.version===St.__version?(St.needsLights&&St.lightsStateVersion!==Qn.state.version||St.outputColorSpace!==Ct||Ve.isBatchedMesh&&St.batching===!1||!Ve.isBatchedMesh&&St.batching===!0||Ve.isBatchedMesh&&St.batchingColor===!0&&Ve.colorTexture===null||Ve.isBatchedMesh&&St.batchingColor===!1&&Ve.colorTexture!==null||Ve.isInstancedMesh&&St.instancing===!1||!Ve.isInstancedMesh&&St.instancing===!0||Ve.isSkinnedMesh&&St.skinning===!1||!Ve.isSkinnedMesh&&St.skinning===!0||Ve.isInstancedMesh&&St.instancingColor===!0&&Ve.instanceColor===null||Ve.isInstancedMesh&&St.instancingColor===!1&&Ve.instanceColor!==null||Ve.isInstancedMesh&&St.instancingMorph===!0&&Ve.morphTexture===null||Ve.isInstancedMesh&&St.instancingMorph===!1&&Ve.morphTexture!==null||St.envMap!==Wt||qe.fog===!0&&St.fog!==wt||St.numClippingPlanes!==void 0&&(St.numClippingPlanes!==Ee.numPlanes||St.numIntersection!==Ee.numIntersection)||St.vertexAlphas!==ln||St.vertexTangents!==vn||St.morphTargets!==cn||St.morphNormals!==be||St.morphColors!==st||St.toneMapping!==zt||St.morphTargetsCount!==Bt)&&(bn=!0):(bn=!0,St.__version=qe.version);let Gr=St.currentProgram;bn===!0&&(Gr=mn(qe,Fe,Ve));let ai=!1,cr=!1,eo=!1;const _r=Gr.getUniforms(),wi=St.uniforms;if(ie.useProgram(Gr.program)&&(ai=!0,cr=!0,eo=!0),qe.id!==E&&(E=qe.id,cr=!0),ai||_!==le){ie.buffers.depth.getReversed()?(J.copy(le.projectionMatrix),z$e(J),V$e(J),_r.setValue(ce,"projectionMatrix",J)):_r.setValue(ce,"projectionMatrix",le.projectionMatrix),_r.setValue(ce,"viewMatrix",le.matrixWorldInverse);const fi=_r.map.cameraPosition;fi!==void 0&&fi.setValue(ce,ne.setFromMatrixPosition(le.matrixWorld)),me.logarithmicDepthBuffer&&_r.setValue(ce,"logDepthBufFC",2/(Math.log(le.far+1)/Math.LN2)),(qe.isMeshPhongMaterial||qe.isMeshToonMaterial||qe.isMeshLambertMaterial||qe.isMeshBasicMaterial||qe.isMeshStandardMaterial||qe.isShaderMaterial)&&_r.setValue(ce,"isOrthographic",le.isOrthographicCamera===!0),_!==le&&(_=le,cr=!0,eo=!0)}if(Ve.isSkinnedMesh){_r.setOptional(ce,Ve,"bindMatrix"),_r.setOptional(ce,Ve,"bindMatrixInverse");const Un=Ve.skeleton;Un&&(Un.boneTexture===null&&Un.computeBoneTexture(),_r.setValue(ce,"boneTexture",Un.boneTexture,X))}Ve.isBatchedMesh&&(_r.setOptional(ce,Ve,"batchingTexture"),_r.setValue(ce,"batchingTexture",Ve._matricesTexture,X),_r.setOptional(ce,Ve,"batchingIdTexture"),_r.setValue(ce,"batchingIdTexture",Ve._indirectTexture,X),_r.setOptional(ce,Ve,"batchingColorTexture"),Ve._colorsTexture!==null&&_r.setValue(ce,"batchingColorTexture",Ve._colorsTexture,X));const uo=Je.morphAttributes;if((uo.position!==void 0||uo.normal!==void 0||uo.color!==void 0)&&Ke.update(Ve,Je,Gr),(cr||St.receiveShadow!==Ve.receiveShadow)&&(St.receiveShadow=Ve.receiveShadow,_r.setValue(ce,"receiveShadow",Ve.receiveShadow)),qe.isMeshGouraudMaterial&&qe.envMap!==null&&(wi.envMap.value=Wt,wi.flipEnvMap.value=Wt.isCubeTexture&&Wt.isRenderTargetTexture===!1?-1:1),qe.isMeshStandardMaterial&&qe.envMap===null&&Fe.environment!==null&&(wi.envMapIntensity.value=Fe.environmentIntensity),cr&&(_r.setValue(ce,"toneMappingExposure",S.toneMappingExposure),St.needsLights&&lr(wi,eo),wt&&qe.fog===!0&&Re.refreshFogUniforms(wi,wt),Re.refreshMaterialUniforms(wi,qe,B,$,g.state.transmissionRenderTarget[le.id]),mE.upload(ce,jn(St),wi,X)),qe.isShaderMaterial&&qe.uniformsNeedUpdate===!0&&(mE.upload(ce,jn(St),wi,X),qe.uniformsNeedUpdate=!1),qe.isSpriteMaterial&&_r.setValue(ce,"center",Ve.center),_r.setValue(ce,"modelViewMatrix",Ve.modelViewMatrix),_r.setValue(ce,"normalMatrix",Ve.normalMatrix),_r.setValue(ce,"modelMatrix",Ve.matrixWorld),qe.isShaderMaterial||qe.isRawShaderMaterial){const Un=qe.uniformsGroups;for(let fi=0,Yo=Un.length;fi<Yo;fi++){const Oi=Un[fi];ke.update(Oi,Gr),ke.bind(Oi,Gr)}}return Gr}function lr(le,Fe){le.ambientLightColor.needsUpdate=Fe,le.lightProbe.needsUpdate=Fe,le.directionalLights.needsUpdate=Fe,le.directionalLightShadows.needsUpdate=Fe,le.pointLights.needsUpdate=Fe,le.pointLightShadows.needsUpdate=Fe,le.spotLights.needsUpdate=Fe,le.spotLightShadows.needsUpdate=Fe,le.rectAreaLights.needsUpdate=Fe,le.hemisphereLights.needsUpdate=Fe}function Yn(le){return le.isMeshLambertMaterial||le.isMeshToonMaterial||le.isMeshPhongMaterial||le.isMeshStandardMaterial||le.isShadowMaterial||le.isShaderMaterial&&le.lights===!0}this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return D},this.setRenderTargetTextures=function(le,Fe,Je){const qe=ge.get(le);qe.__autoAllocateDepthBuffer=le.resolveDepthBuffer===!1,qe.__autoAllocateDepthBuffer===!1&&(qe.__useRenderToTexture=!1),ge.get(le.texture).__webglTexture=Fe,ge.get(le.depthTexture).__webglTexture=qe.__autoAllocateDepthBuffer?void 0:Je,qe.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(le,Fe){const Je=ge.get(le);Je.__webglFramebuffer=Fe,Je.__useDefaultFramebuffer=Fe===void 0};const yn=ce.createFramebuffer();this.setRenderTarget=function(le,Fe=0,Je=0){D=le,I=Fe,M=Je;let qe=!0,Ve=null,wt=!1,It=!1;if(le){const Wt=ge.get(le);if(Wt.__useDefaultFramebuffer!==void 0)ie.bindFramebuffer(ce.FRAMEBUFFER,null),qe=!1;else if(Wt.__webglFramebuffer===void 0)X.setupRenderTarget(le);else if(Wt.__hasExternalTextures)X.rebindTextures(le,ge.get(le.texture).__webglTexture,ge.get(le.depthTexture).__webglTexture);else if(le.depthBuffer){const cn=le.depthTexture;if(Wt.__boundDepthTexture!==cn){if(cn!==null&&ge.has(cn)&&(le.width!==cn.image.width||le.height!==cn.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");X.setupDepthRenderbuffer(le)}}const ln=le.texture;(ln.isData3DTexture||ln.isDataArrayTexture||ln.isCompressedArrayTexture)&&(It=!0);const vn=ge.get(le).__webglFramebuffer;le.isWebGLCubeRenderTarget?(Array.isArray(vn[Fe])?Ve=vn[Fe][Je]:Ve=vn[Fe],wt=!0):le.samples>0&&X.useMultisampledRTT(le)===!1?Ve=ge.get(le).__webglMultisampledFramebuffer:Array.isArray(vn)?Ve=vn[Je]:Ve=vn,A.copy(le.viewport),R.copy(le.scissor),F=le.scissorTest}else A.copy(z).multiplyScalar(B).floor(),R.copy(G).multiplyScalar(B).floor(),F=K;if(Je!==0&&(Ve=yn),ie.bindFramebuffer(ce.FRAMEBUFFER,Ve)&&qe&&ie.drawBuffers(le,Ve),ie.viewport(A),ie.scissor(R),ie.setScissorTest(F),wt){const Wt=ge.get(le.texture);ce.framebufferTexture2D(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,Wt.__webglTexture,Je)}else if(It){const Wt=ge.get(le.texture),ln=Fe;ce.framebufferTextureLayer(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,Wt.__webglTexture,Je,ln)}else if(le!==null&&Je!==0){const Wt=ge.get(le.texture);ce.framebufferTexture2D(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_2D,Wt.__webglTexture,Je)}E=-1},this.readRenderTargetPixels=function(le,Fe,Je,qe,Ve,wt,It){if(!(le&&le.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ct=ge.get(le).__webglFramebuffer;if(le.isWebGLCubeRenderTarget&&It!==void 0&&(Ct=Ct[It]),Ct){ie.bindFramebuffer(ce.FRAMEBUFFER,Ct);try{const Wt=le.texture,ln=Wt.format,vn=Wt.type;if(!me.textureFormatReadable(ln)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!me.textureTypeReadable(vn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Fe>=0&&Fe<=le.width-qe&&Je>=0&&Je<=le.height-Ve&&ce.readPixels(Fe,Je,qe,Ve,lt.convert(ln),lt.convert(vn),wt)}finally{const Wt=D!==null?ge.get(D).__webglFramebuffer:null;ie.bindFramebuffer(ce.FRAMEBUFFER,Wt)}}},this.readRenderTargetPixelsAsync=function(le,Fe,Je,qe,Ve,wt,It){return te(this,null,function*(){if(!(le&&le.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ct=ge.get(le).__webglFramebuffer;if(le.isWebGLCubeRenderTarget&&It!==void 0&&(Ct=Ct[It]),Ct)if(Fe>=0&&Fe<=le.width-qe&&Je>=0&&Je<=le.height-Ve){ie.bindFramebuffer(ce.FRAMEBUFFER,Ct);const Wt=le.texture,ln=Wt.format,vn=Wt.type;if(!me.textureFormatReadable(ln))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!me.textureTypeReadable(vn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const cn=ce.createBuffer();ce.bindBuffer(ce.PIXEL_PACK_BUFFER,cn),ce.bufferData(ce.PIXEL_PACK_BUFFER,wt.byteLength,ce.STREAM_READ),ce.readPixels(Fe,Je,qe,Ve,lt.convert(ln),lt.convert(vn),0);const be=D!==null?ge.get(D).__webglFramebuffer:null;ie.bindFramebuffer(ce.FRAMEBUFFER,be);const st=ce.fenceSync(ce.SYNC_GPU_COMMANDS_COMPLETE,0);return ce.flush(),yield U$e(ce,st,4),ce.bindBuffer(ce.PIXEL_PACK_BUFFER,cn),ce.getBufferSubData(ce.PIXEL_PACK_BUFFER,0,wt),ce.deleteBuffer(cn),ce.deleteSync(st),wt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")})},this.copyFramebufferToTexture=function(le,Fe=null,Je=0){const qe=Math.pow(2,-Je),Ve=Math.floor(le.image.width*qe),wt=Math.floor(le.image.height*qe),It=Fe!==null?Fe.x:0,Ct=Fe!==null?Fe.y:0;X.setTexture2D(le,0),ce.copyTexSubImage2D(ce.TEXTURE_2D,Je,0,0,It,Ct,Ve,wt),ie.unbindTexture()};const Te=ce.createFramebuffer(),Ze=ce.createFramebuffer();this.copyTextureToTexture=function(le,Fe,Je=null,qe=null,Ve=0,wt=null){wt===null&&(Ve!==0?(pE("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),wt=Ve,Ve=0):wt=0);let It,Ct,Wt,ln,vn,cn,be,st,zt;const At=le.isCompressedTexture?le.mipmaps[wt]:le.image;if(Je!==null)It=Je.max.x-Je.min.x,Ct=Je.max.y-Je.min.y,Wt=Je.isBox3?Je.max.z-Je.min.z:1,ln=Je.min.x,vn=Je.min.y,cn=Je.isBox3?Je.min.z:0;else{const uo=Math.pow(2,-Ve);It=Math.floor(At.width*uo),Ct=Math.floor(At.height*uo),le.isDataArrayTexture?Wt=At.depth:le.isData3DTexture?Wt=Math.floor(At.depth*uo):Wt=1,ln=0,vn=0,cn=0}qe!==null?(be=qe.x,st=qe.y,zt=qe.z):(be=0,st=0,zt=0);const Bt=lt.convert(Fe.format),St=lt.convert(Fe.type);let Qn;Fe.isData3DTexture?(X.setTexture3D(Fe,0),Qn=ce.TEXTURE_3D):Fe.isDataArrayTexture||Fe.isCompressedArrayTexture?(X.setTexture2DArray(Fe,0),Qn=ce.TEXTURE_2D_ARRAY):(X.setTexture2D(Fe,0),Qn=ce.TEXTURE_2D),ce.pixelStorei(ce.UNPACK_FLIP_Y_WEBGL,Fe.flipY),ce.pixelStorei(ce.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Fe.premultiplyAlpha),ce.pixelStorei(ce.UNPACK_ALIGNMENT,Fe.unpackAlignment);const bn=ce.getParameter(ce.UNPACK_ROW_LENGTH),Gr=ce.getParameter(ce.UNPACK_IMAGE_HEIGHT),ai=ce.getParameter(ce.UNPACK_SKIP_PIXELS),cr=ce.getParameter(ce.UNPACK_SKIP_ROWS),eo=ce.getParameter(ce.UNPACK_SKIP_IMAGES);ce.pixelStorei(ce.UNPACK_ROW_LENGTH,At.width),ce.pixelStorei(ce.UNPACK_IMAGE_HEIGHT,At.height),ce.pixelStorei(ce.UNPACK_SKIP_PIXELS,ln),ce.pixelStorei(ce.UNPACK_SKIP_ROWS,vn),ce.pixelStorei(ce.UNPACK_SKIP_IMAGES,cn);const _r=le.isDataArrayTexture||le.isData3DTexture,wi=Fe.isDataArrayTexture||Fe.isData3DTexture;if(le.isDepthTexture){const uo=ge.get(le),Un=ge.get(Fe),fi=ge.get(uo.__renderTarget),Yo=ge.get(Un.__renderTarget);ie.bindFramebuffer(ce.READ_FRAMEBUFFER,fi.__webglFramebuffer),ie.bindFramebuffer(ce.DRAW_FRAMEBUFFER,Yo.__webglFramebuffer);for(let Oi=0;Oi<Wt;Oi++)_r&&(ce.framebufferTextureLayer(ce.READ_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ge.get(le).__webglTexture,Ve,cn+Oi),ce.framebufferTextureLayer(ce.DRAW_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ge.get(Fe).__webglTexture,wt,zt+Oi)),ce.blitFramebuffer(ln,vn,It,Ct,be,st,It,Ct,ce.DEPTH_BUFFER_BIT,ce.NEAREST);ie.bindFramebuffer(ce.READ_FRAMEBUFFER,null),ie.bindFramebuffer(ce.DRAW_FRAMEBUFFER,null)}else if(Ve!==0||le.isRenderTargetTexture||ge.has(le)){const uo=ge.get(le),Un=ge.get(Fe);ie.bindFramebuffer(ce.READ_FRAMEBUFFER,Te),ie.bindFramebuffer(ce.DRAW_FRAMEBUFFER,Ze);for(let fi=0;fi<Wt;fi++)_r?ce.framebufferTextureLayer(ce.READ_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,uo.__webglTexture,Ve,cn+fi):ce.framebufferTexture2D(ce.READ_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_2D,uo.__webglTexture,Ve),wi?ce.framebufferTextureLayer(ce.DRAW_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,Un.__webglTexture,wt,zt+fi):ce.framebufferTexture2D(ce.DRAW_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_2D,Un.__webglTexture,wt),Ve!==0?ce.blitFramebuffer(ln,vn,It,Ct,be,st,It,Ct,ce.COLOR_BUFFER_BIT,ce.NEAREST):wi?ce.copyTexSubImage3D(Qn,wt,be,st,zt+fi,ln,vn,It,Ct):ce.copyTexSubImage2D(Qn,wt,be,st,ln,vn,It,Ct);ie.bindFramebuffer(ce.READ_FRAMEBUFFER,null),ie.bindFramebuffer(ce.DRAW_FRAMEBUFFER,null)}else wi?le.isDataTexture||le.isData3DTexture?ce.texSubImage3D(Qn,wt,be,st,zt,It,Ct,Wt,Bt,St,At.data):Fe.isCompressedArrayTexture?ce.compressedTexSubImage3D(Qn,wt,be,st,zt,It,Ct,Wt,Bt,At.data):ce.texSubImage3D(Qn,wt,be,st,zt,It,Ct,Wt,Bt,St,At):le.isDataTexture?ce.texSubImage2D(ce.TEXTURE_2D,wt,be,st,It,Ct,Bt,St,At.data):le.isCompressedTexture?ce.compressedTexSubImage2D(ce.TEXTURE_2D,wt,be,st,At.width,At.height,Bt,At.data):ce.texSubImage2D(ce.TEXTURE_2D,wt,be,st,It,Ct,Bt,St,At);ce.pixelStorei(ce.UNPACK_ROW_LENGTH,bn),ce.pixelStorei(ce.UNPACK_IMAGE_HEIGHT,Gr),ce.pixelStorei(ce.UNPACK_SKIP_PIXELS,ai),ce.pixelStorei(ce.UNPACK_SKIP_ROWS,cr),ce.pixelStorei(ce.UNPACK_SKIP_IMAGES,eo),wt===0&&Fe.generateMipmaps&&ce.generateMipmap(Qn),ie.unbindTexture()},this.copyTextureToTexture3D=function(le,Fe,Je=null,qe=null,Ve=0){return pE('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(le,Fe,Je,qe,Ve)},this.initRenderTarget=function(le){ge.get(le).__webglFramebuffer===void 0&&X.setupRenderTarget(le)},this.initTexture=function(le){le.isCubeTexture?X.setTextureCube(le,0):le.isData3DTexture?X.setTexture3D(le,0):le.isDataArrayTexture||le.isCompressedArrayTexture?X.setTexture2DArray(le,0):X.setTexture2D(le,0),ie.unbindTexture()},this.resetState=function(){I=0,M=0,D=null,ie.reset(),ht.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Xu}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=Rr._getDrawingBufferColorSpace(e),n.unpackColorSpace=Rr._getUnpackColorSpace()}}class UYe{constructor(e,n){go(this,"mesh");go(this,"velocity");go(this,"rotationSpeed");go(this,"scene");go(this,"lifespan");const r=Math.random();let i;if(r<.4){const d=.15+Math.random()*.1,f=.08+Math.random()*.06;i=new Kf(d,f)}else if(r<.7){const d=.06+Math.random()*.04;i=new jb(d,8)}else{const d=.08+Math.random()*.04;i=new BL(d,d*1.5,3)}const o=[new wn(16711680),new wn(16777215),new wn(255),new wn(16766720),new wn(16738740),new wn(65280),new wn(16729344),new wn(9662683)],s=new Ts({color:o[Math.floor(Math.random()*o.length)],side:Ms,transparent:!0,opacity:.9});this.mesh=new Mn(i,s);const a=new He((Math.random()-.5)*.3,Math.random()*.2,(Math.random()-.5)*.3);this.mesh.position.copy(n).add(a);const l=Math.random()*Math.PI*2,c=Math.random()*Math.PI*.3,u=.4+Math.random()*.3;this.velocity=new He(Math.cos(l)*Math.cos(c)*u,Math.sin(c)*u+.2,Math.sin(l)*Math.cos(c)*u),this.rotationSpeed=new He((Math.random()-.5)*.8,(Math.random()-.5)*.8,(Math.random()-.5)*.8),this.lifespan=.6,this.scene=e,e.add(this.mesh)}update(e){return this.mesh.position.add(this.velocity.clone().multiplyScalar(e)),this.mesh.rotation.x+=this.rotationSpeed.x*e,this.mesh.rotation.y+=this.rotationSpeed.y*e,this.mesh.rotation.z+=this.rotationSpeed.z*e,this.velocity.y-=.4*e,this.velocity.multiplyScalar(.95),this.mesh.material instanceof gm&&(this.mesh.material.opacity-=.05),this.lifespan-=e,this.lifespan<=0||this.mesh.position.y<-2?(this.scene.remove(this.mesh),!0):!1}}class iW{constructor(e,n){go(this,"mesh");go(this,"speed");go(this,"scene");console.log("Creating cloud at position:",n);const r=new Yl,i=()=>{const a=.92+Math.random()*.08;return new wn(a,a,a)},o=Math.floor(Math.random()*4);o===0?this.createFaceAndEars(r,i):o===1?this.createCumulusCloud(r,i):o===2?this.createStretchedCloud(r,i):this.createPuffyCloud(r,i),this.mesh=r,this.mesh.position.copy(n);const s=.75+Math.random()*.5;this.mesh.scale.set(s,s,s),this.speed=.003+Math.random()*.004,this.scene=e,e.add(this.mesh),console.log("Added cloud to scene at",this.mesh.position)}createFaceAndEars(e,n){const r=new Xs(.8,16,16),i=new Ts({color:n()}),o=new Mn(r,i);o.scale.set(.9,.9,.9),e.add(o),[{x:-1,y:.3,z:0},{x:1,y:.3,z:0},{x:0,y:.5,z:0}].forEach(a=>{const l=new Ts({color:n()}),c=new Mn(r,l);c.position.set(a.x,a.y,a.z),c.scale.set(.6,.4,.6),e.add(c)})}createCumulusCloud(e,n){const r=new Xs(.6,16,16),i=5+Math.floor(Math.random()*3);for(let s=0;s<i;s++){const a=new Ts({color:n()}),l=new Mn(r,a),c=-1.5+s*(3/i),u=Math.random()*.4-.2,d=Math.random()*.4-.2;l.position.set(c,u,d);const f=.7+Math.random()*.6;l.scale.set(f,f*.8,f),e.add(l)}const o=2+Math.floor(Math.random()*2);for(let s=0;s<o;s++){const a=new Ts({color:n()}),l=new Mn(r,a),c=-.8+Math.random()*1.6,u=.4+Math.random()*.3,d=Math.random()*.3-.15;l.position.set(c,u,d);const f=.5+Math.random()*.4;l.scale.set(f,f,f),e.add(l)}}createStretchedCloud(e,n){const r=new Xs(.5,16,16),i=4+Math.random()*2,o=6+Math.floor(Math.random()*3);for(let s=0;s<o;s++){const a=new Ts({color:n()}),l=new Mn(r,a),c=s/(o-1),u=-i/2+c*i,d=Math.sin(c*Math.PI)*.2,f=Math.random()*.3-.15;l.position.set(u,d,f);const p=.7+Math.sin(c*Math.PI)*.5,b=(.7+Math.random()*.3)*p;l.scale.set(b,b*.8,b),e.add(l)}}createPuffyCloud(e,n){const r=new Xs(.8,16,16),i=new Ts({color:n()}),o=new Mn(r,i);e.add(o);const s=2+Math.floor(Math.random()*2);for(let a=0;a<s;a++){const l=new Ts({color:n()}),c=new Mn(r,l),u=Math.random()*Math.PI*2,d=.6+Math.random()*.4,f=Math.cos(u)*d,p=Math.random()*.6-.3,b=Math.sin(u)*d*.5;c.position.set(f,p,b);const v=.6+Math.random()*.4;c.scale.set(v,v,v),e.add(c)}}update(){this.mesh.position.x+=this.speed,this.mesh.position.x>15&&(this.mesh.position.x=-15,console.log("Cloud reset to position:",this.mesh.position))}}const zYe=T.forwardRef(({gameActive:t,onMoleHit:e,config:n},r)=>{const i=T.useRef(null),o=T.useRef(),s=T.useRef(),a=T.useRef(),l=T.useRef([]),c=T.useRef(),u=T.useRef([]),d=T.useRef([]),f=T.useRef(new MD),p=T.useRef(Date.now());T.useEffect(()=>{const E=document.createElement("link");E.rel="stylesheet",E.href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&display=swap",document.head.appendChild(E);const _=document.createElement("div");return _.style.fontFamily='"Comic Neue", sans-serif',_.style.position="absolute",_.style.visibility="hidden",_.innerText="Preload Comic Neue Font",document.body.appendChild(_),()=>{document.body.removeChild(_)}},[]);const b=()=>{const E=n.richCategories&&Array.isArray(n.richCategories);let _=[],A=[],R="";if(E){const L=n.richCategories;console.log("Using rich text categories:",L);const N=L[0];R=N.title,_=N.items.map(U=>U.content||U.text||"").filter(U=>U.trim().length>0),A=L.slice(1).flatMap(U=>(console.log("Getting words from other rich category:",U.title),U.items.map($=>$.content||$.text||"").filter($=>$.trim().length>0))),console.log("Rich text words - Point generating:",_),console.log("Rich text words - Other categories:",A)}else{console.log("Using legacy categories format");const L=n.categories[0];_=L.words,R=L.title,A=n.categories.slice(1).flatMap(N=>(console.log("Getting words from other legacy category:",N.title),N.words))}if(Math.random()<.7&&_.length>0){const L=_[Math.floor(Math.random()*_.length)];return console.log("Selected point-generating word:",L,"from category:",R),{word:L,isCorrect:!0}}else if(A.length>0){const L=A[Math.floor(Math.random()*A.length)];return console.log("Selected non-point-generating word:",L),{word:L,isCorrect:!1}}else if(_.length>0){const L=_[Math.floor(Math.random()*_.length)];return console.log("Fallback: using point-generating word as incorrect:",L),{word:L,isCorrect:!1}}else return console.log("No words available, using fallback"),{word:"word",isCorrect:!0}},v=(E,_)=>{const A=E.children.find(R=>R.userData&&R.userData.isTextPlane);if(A&&A.material instanceof Ts){let R=_,F=!1,L={bold:!1,italic:!1,underline:!1,superscript:!1,subscript:!1},N="",U="",$="",B="",H="",q="";if(typeof _=="string"&&_.includes("<"))if(F=!0,console.log("Processing rich text for mole display:",_),L.bold=_.includes("<strong>")||_.includes("<b>"),L.italic=_.includes("<em>")||_.includes("<i>"),L.underline=_.includes("<u>")&&_.includes("</u>"),L.superscript=_.includes("<sup>")&&_.includes("</sup>"),L.subscript=_.includes("<sub>")&&_.includes("</sub>"),console.log("Detected text styles:",L,"Display text:",R),console.log("Raw HTML being processed:",_),L.superscript||L.subscript){if(console.log("Processing super/subscript text:",_),L.superscript){const oe=_.match(/^(.*?)<sup>(.*?)<\/sup>(.*)$/);if(console.log("Superscript regex match:",oe),oe)B=oe[1].replace(/<[^>]*>/g,""),H=oe[2],q=oe[3].replace(/<[^>]*>/g,""),N=B+q,U=H,R=N,console.log("Extracted superscript parts:",{beforeScript:B,scriptText:H,afterScript:q,mainText:N});else{console.log("Superscript regex failed, falling back to plain text extraction");const ne=document.createElement("div");ne.innerHTML=_,R=ne.textContent||ne.innerText||_}}if(L.subscript){const oe=_.match(/^(.*?)<sub>(.*?)<\/sub>(.*)$/);if(console.log("Subscript regex match:",oe),oe)B=oe[1].replace(/<[^>]*>/g,""),H=oe[2],q=oe[3].replace(/<[^>]*>/g,""),N=B+q,$=H,R=N,console.log("Extracted subscript parts:",{beforeScript:B,scriptText:H,afterScript:q,mainText:N});else{console.log("Subscript regex failed, falling back to plain text extraction");const ne=document.createElement("div");ne.innerHTML=_,R=ne.textContent||ne.innerText||_}}console.log("Final parsed text parts:",{beforeScript:B,scriptText:H,afterScript:q,mainText:N,superText:U,subText:$,displayText:R})}else{const oe=document.createElement("div");oe.innerHTML=_,R=oe.textContent||oe.innerText||_}const z=document.createElement("canvas"),G=z.getContext("2d");if(!G)return;if(z.width=1024,z.height=1024,G.clearRect(0,0,z.width,z.height),!document.querySelector('link[href*="Comic+Neue"]')){const oe=document.createElement("link");oe.rel="stylesheet",oe.href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap",document.head.appendChild(oe)}let K=Math.min(240,1e3/R.length);G.imageSmoothingEnabled=!0,G.imageSmoothingQuality="high";let Z=L.bold?"bold":"normal",ee=L.italic?"italic":"normal";G.font=`${ee} ${Z} ${K}px "Comic Neue", "Comic Sans MS", sans-serif`,G.textAlign="center",G.textBaseline="middle",G.fillStyle="#000000";let V=z.height/2;if(L.superscript&&U){console.log("RENDER CHECK - Superscript variables:",{beforeScript:B,scriptText:H,afterScript:q,superText:U}),G.font=`${ee} ${Z} ${K}px "Comic Neue", "Comic Sans MS", sans-serif`,G.fillStyle="#000000";const oe=G.measureText(B||"").width,ne=G.measureText(q||"").width,pe=K*.5;G.font=`${ee} ${Z} ${pe}px "Comic Neue", "Comic Sans MS", sans-serif`;const ye=G.measureText(U).width,Ce=ye+10,_e=oe+ne+Ce;G.font=`${ee} ${Z} ${K}px "Comic Neue", "Comic Sans MS", sans-serif`;const ce=z.width/2-_e/2;if(console.log("Superscript rendering - beforeScript:",B,"afterScript:",q),console.log("Width calculations - before:",oe,"after:",ne,"script:",ye,"spacing:",Ce,"total:",_e,"startX:",ce),G.textAlign="left",G.textBaseline="middle",B&&(console.log("Drawing beforeScript:",B,"at position:",ce,V),G.fillText(B,ce,V)),q){const me=ce+oe+Ce;console.log("Drawing afterScript:",q,"at position:",me,V),G.fillText(q,me,V)}G.font=`${ee} ${Z} ${pe}px "Comic Neue", "Comic Sans MS", sans-serif`;const Be=ce+oe+Ce/2-ye/2,de=V-K*.5;console.log("Drawing superscript:",U,"at position:",Be,de),G.fillText(U,Be,de),G.textAlign="center",G.font=`${ee} ${Z} ${K}px "Comic Neue", "Comic Sans MS", sans-serif`}else if(L.subscript&&$){console.log("RENDER CHECK - Subscript variables:",{beforeScript:B,scriptText:H,afterScript:q,subText:$}),G.font=`${ee} ${Z} ${K}px "Comic Neue", "Comic Sans MS", sans-serif`,G.fillStyle="#000000";const oe=G.measureText(B||"").width,ne=G.measureText(q||"").width,pe=K*.5;G.font=`${ee} ${Z} ${pe}px "Comic Neue", "Comic Sans MS", sans-serif`;const ye=G.measureText($).width,Ce=ye+10,_e=oe+ne+Ce;G.font=`${ee} ${Z} ${K}px "Comic Neue", "Comic Sans MS", sans-serif`;const ce=z.width/2-_e/2;if(console.log("Subscript rendering - beforeScript:",B,"afterScript:",q),console.log("Width calculations - before:",oe,"after:",ne,"script:",ye,"spacing:",Ce,"total:",_e,"startX:",ce),G.textAlign="left",G.textBaseline="middle",B&&(console.log("Drawing beforeScript:",B,"at position:",ce,V),G.fillText(B,ce,V)),q){const me=ce+oe+Ce;console.log("Drawing afterScript:",q,"at position:",me,V),G.fillText(q,me,V)}G.font=`${ee} ${Z} ${pe}px "Comic Neue", "Comic Sans MS", sans-serif`;const Be=ce+oe+Ce/2-ye/2,de=V+K*.4;console.log("Drawing subscript:",$,"at position:",Be,de),G.fillText($,Be,de),G.textAlign="center",G.font=`${ee} ${Z} ${K}px "Comic Neue", "Comic Sans MS", sans-serif`}else console.log("Drawing normal text:",R,"at position:",z.width/2,V),G.fillText(R,z.width/2,V);if(G.font=`${ee} ${Z} ${K}px "Comic Neue", "Comic Sans MS", sans-serif`,L.underline){let oe,ne;if(L.superscript&&U){const Ce=G.measureText(B||"").width,_e=G.measureText(q||"").width;oe=Ce+_e,ne=(z.width-oe)/2}else if(L.subscript&&$){const Ce=G.measureText(B||"").width,_e=G.measureText(q||"").width;oe=Ce+_e,ne=(z.width-oe)/2}else oe=G.measureText(R).width,ne=(z.width-oe)/2;const pe=V+K*.32,ye=Math.max(3,K*.03);G.fillRect(ne,pe,oe,ye),console.log("Drew underline at Y:",pe,"thickness:",ye)}F&&(G.fillStyle="#FFD700",G.font="24px Arial",G.fillText("✨",z.width-50,50)),A.material.map&&A.material.map.dispose();const J=new vy(z);J.minFilter=Mf,J.magFilter=nc,J.anisotropy=a.current?a.current.capabilities.getMaxAnisotropy():1,J.needsUpdate=!0,A.material.map=J,A.material.needsUpdate=!0}},m=()=>{const E=new Yl,_=new Xs(.5,32,24);_.scale(1,1.3,1);const A=new ji({color:15127980,roughness:.8,metalness:.1}),R=new Mn(_,A);R.castShadow=!0,R.receiveShadow=!0,E.add(R);const L=(()=>{const ne=new Yl,pe=new Xs(.08,16,12),ye=new ji({color:16777215,roughness:.3,metalness:.2}),Ce=new Mn(pe,ye);Ce.position.set(-.15,.36,.4),ne.add(Ce);const _e=new Mn(pe,ye);_e.position.set(.15,.36,.4),ne.add(_e);const ce=new Xs(.04,12,8),Be=new ji({color:0,roughness:.5,metalness:.1}),de=new Mn(ce,Be);de.position.set(-.15,.36,.47),ne.add(de);const me=new Mn(ce,Be);return me.position.set(.15,.36,.47),ne.add(me),ne})();E.add(L);const N=()=>{const ne=new Yl;switch(Math.floor(Math.random()*6)){case 0:const ye=new wn(Math.random()>.7?16733440:Math.random()>.5?4006676:5782055),Ce=.2+Math.random()*.15,_e=new il(.1,Ce,.4),ce=new ji({color:ye,roughness:.9,metalness:.1}),Be=new Mn(_e,ce);Be.position.set(0,.6,.05);const de=_e.attributes.position;for(let at=0;at<de.count;at++){const mt=de.getX(at),Ot=de.getY(at),rn=de.getZ(at),on=mt+(Math.random()-.5)*.05,Pe=rn+(Math.random()-.5)*.05;de.setXYZ(at,on,Ot,Pe)}_e.computeVertexNormals(),ne.add(Be);break;case 1:const me=new wn(Math.random()>.6?2692873:5782055),ie=8+Math.floor(Math.random()*6);for(let at=0;at<ie;at++){const mt=at/ie*Math.PI*2,Ot=new Ix(.04,.02,8,6,Math.PI*1.5),rn=new ji({color:me,roughness:.9,metalness:.1}),on=new Mn(Ot,rn);on.position.set(Math.cos(mt)*.25,.55,Math.sin(mt)*.25),on.rotation.x=Math.random()*Math.PI,on.rotation.y=Math.random()*Math.PI,on.rotation.z=Math.random()*Math.PI,ne.add(on)}break;case 2:const ae=new wn(Math.random()>.5?4006676:5782055),ge=new Ef(.3,.35,.12,12),X=new ji({color:ae,roughness:.9,metalness:.1}),W=new Mn(ge,X);W.position.set(0,.65,0),ne.add(W);for(let at=0;at<5;at++){const mt=at/5*Math.PI*2,Ot=new il(.05,.05,.05),rn=new Mn(Ot,X);rn.position.set(Math.cos(mt)*.15,.72,Math.sin(mt)*.15),rn.rotation.x=Math.random()*Math.PI*.2,rn.rotation.y=Math.random()*Math.PI*.2,rn.rotation.z=Math.random()*Math.PI*.2,ne.add(rn)}break;case 3:const ve=new wn(Math.random()>.7?1642503:4006676),ue=new Ef(.2,.3,.25,16,1,!1,0,Math.PI);ue.rotateX(Math.PI/2),ue.rotateY(Math.PI);const Me=new ji({color:ve,roughness:.8,metalness:.1}),Ae=new Mn(ue,Me);Ae.position.set(0,.6,.2);const Ne=3;for(let at=0;at<Ne;at++){const mt=new Ix(.15,.05,8,12,Math.PI*.8),Ot=new Mn(mt,Me);Ot.position.set(0,.55+at*.08,.15-at*.05),Ot.rotation.x=Math.PI/2,Ot.scale.set(1.2,.7,1),ne.add(Ot)}const Re=new il(.5,.18,.3);Re.translate(0,-.1,0);const Ie=new Mn(Re,Me);Ie.position.set(0,.5,0),ne.add(Ae),ne.add(Ie);break;case 4:const it=new wn(Math.random()>.6?1642503:4006676),Ee=new Xs(.35,32,16,0,Math.PI*2,0,Math.PI/2),Le=new ji({color:it,roughness:.9,metalness:.05}),Ge=new Mn(Ee,Le);Ge.position.set(0,.68,0),ne.add(Ge);const Ke=new Ix(.35,.04,16,32,Math.PI*2),je=new ji({color:it,roughness:.9,metalness:.05}),et=new Mn(Ke,je);et.rotation.x=Math.PI/2,et.position.set(0,.51,0),ne.add(et);for(let at=0;at<8;at++){const mt=-Math.PI/4+at/7*Math.PI*1.5,Ot=.1+Math.random()*.08,rn=new il(.08,Ot,.04),on=new Mn(rn,Le),Pe=.35;on.position.set(Math.cos(mt)*Pe*.85,.55,Math.sin(mt)*Pe*.85),on.rotation.x=Math.PI*.45,on.rotation.y=-mt,ne.add(on)}break;case 5:const lt=new wn(Math.random()>.5?1642503:4006676),ht=new Xs(.35,32,32),ke=new ji({color:lt,roughness:1,metalness:0}),gt=new Mn(ht,ke);gt.position.set(0,.68,0);const tt=ht.attributes.position;for(let at=0;at<tt.count;at++){const mt=tt.getX(at),Ot=tt.getY(at),rn=tt.getZ(at),on=.06,Pe=mt+(Math.random()-.5)*on,Ue=Ot+(Math.random()-.5)*on,Xe=rn+(Math.random()-.5)*on;tt.setXYZ(at,Pe,Ue,Xe)}ht.computeVertexNormals();const yt=20;for(let at=0;at<yt;at++){const mt=Math.random()*Math.PI*2,Ot=Math.random()*Math.PI,rn=Math.sin(Ot)*Math.cos(mt),on=Math.cos(Ot),Pe=Math.sin(Ot)*Math.sin(mt),Ue=.04+Math.random()*.04,Xe=new Xs(Ue,8,8),vt=new Mn(Xe,ke),Pt=.35;vt.position.set(rn*Pt*1.1,on*Pt*1.1+.68,Pe*Pt*1.1),vt.position.y>=.55&&ne.add(vt)}ne.add(gt);break}return ne};if(Math.random()<.7){const ne=N();E.add(ne)}const $=(()=>{const ne=document.createElement("canvas"),pe=ne.getContext("2d");return pe&&(ne.width=256,ne.height=256,pe.clearRect(0,0,ne.width,ne.height)),ne})(),B=new vy($),H=new Ts({map:B,transparent:!0,side:Sd}),q=new Kf(.7,.7),z=new Mn(q,H);z.position.set(0,.2,.48),z.userData.isFacePlane=!0,E.add(z);const G=new Kf(.9,.9),K=document.createElement("canvas"),Z=K.getContext("2d");Z&&(K.width=512,K.height=512,Z.clearRect(0,0,K.width,K.height));const ee=new vy(K),V=new Ts({map:ee,transparent:!0}),J=new Mn(G,V);J.position.set(0,0,.5),J.userData.isTextPlane=!0,E.add(J);const oe=(ne,pe)=>{const ye=ne.children.find(Ce=>Ce.userData&&Ce.userData.isFacePlane);if(ye&&ye.material instanceof Ts&&ye.material.map){const Ce=document.createElement("canvas"),_e=Ce.getContext("2d");if(!_e)return;switch(Ce.width=256,Ce.height=256,_e.clearRect(0,0,Ce.width,Ce.height),pe){case"neutral":_e.strokeStyle="#000000",_e.lineWidth=6,_e.beginPath(),_e.moveTo(90,150),_e.quadraticCurveTo(128,170,166,150),_e.stroke();break;case"surprised":_e.fillStyle="#000000",_e.beginPath(),_e.arc(128,160,25,0,Math.PI),_e.fill();break;case"hit":_e.strokeStyle="#000000",_e.lineWidth=6,_e.beginPath(),_e.moveTo(90,160),_e.quadraticCurveTo(128,140,166,160),_e.stroke();break;case"happy":_e.fillStyle="#FFFFFF",_e.beginPath(),_e.moveTo(85,150),_e.quadraticCurveTo(128,190,171,150),_e.quadraticCurveTo(128,170,85,150),_e.fill(),_e.strokeStyle="#000000",_e.lineWidth=4,_e.beginPath(),_e.moveTo(85,150),_e.quadraticCurveTo(128,190,171,150),_e.stroke(),_e.lineWidth=1,_e.beginPath(),_e.moveTo(128,170),_e.lineTo(128,185),_e.moveTo(108,167),_e.lineTo(108,177),_e.moveTo(148,167),_e.lineTo(148,177),_e.stroke();break}const ce=new vy(Ce);ye.material.map.dispose(),ye.material.map=ce,ye.material.needsUpdate=!0}};return E.userData.updateExpression=oe,E.userData.updateExpression&&E.userData.updateExpression(E,"neutral"),E.userData.isMole=!0,E.rotation.x=-Math.PI*5/180,E},g=E=>{var U;if(!t)return;const _=new qt;let A,R;E instanceof MouseEvent?(A=E.clientX,R=E.clientY):(A=E.touches[0].clientX,R=E.touches[0].clientY);const F=(U=i.current)==null?void 0:U.getBoundingClientRect();if(!F)return;_.x=(A-F.left)/F.width*2-1,_.y=-((R-F.top)/F.height)*2+1,f.current.setFromCamera(_,s.current);const L=[];l.current.forEach($=>{$.userData.isVisible&&$.traverse(B=>{B instanceof Mn&&L.push(B)})});const N=f.current.intersectObjects(L);if(N.length>0){let B=N[0].object;for(;B.parent&&!B.userData.isMole;)B=B.parent;B.userData.isMole&&B.userData.isVisible&&!B.userData.isHit&&(B.userData.isHit=!0,B.userData.updateExpression&&B.userData.updateExpression(B,"hit"),e(B.userData.word,B.userData.isCorrect),I(B,!1),D(B.position.clone()),setTimeout(()=>{B.userData.isVisible=!1,B.userData.isHit=!1,B.userData.updateExpression&&B.userData.updateExpression(B,"neutral")},300))}},x=()=>{if(!i.current)return()=>{};console.log("Creating scene...");const E=new h7e;o.current=E;const _=new cl(45,i.current.clientWidth/i.current.clientHeight,.1,1e3);_.position.set(0,6,8),_.lookAt(0,0,0),s.current=_;const A=new jYe({antialias:!0});A.setSize(i.current.clientWidth,i.current.clientHeight),A.shadowMap.enabled=!0,A.shadowMap.type=jee,A.setClearColor(8900331,1),i.current.appendChild(A.domElement),a.current=A;const R=new tHe(16777215,.7);E.add(R);const F=new eHe(16777215,.9);F.position.set(3,8,4),F.castShadow=!0,F.shadow.mapSize.width=1024,F.shadow.mapSize.height=1024,F.shadow.camera.near=.5,F.shadow.camera.far=20,F.shadow.camera.left=-10,F.shadow.camera.right=10,F.shadow.camera.top=10,F.shadow.camera.bottom=-10,E.add(F),d.current=[],console.log("Creating sphere-based clouds..."),[new He(-5,2,-7),new He(0,3,-6),new He(5,2,-7)].forEach((B,H)=>{console.log(`Creating cloud ${H} at ${B.x}, ${B.y}, ${B.z}`);const q=new iW(E,B);d.current.push(q)});for(let B=0;B<2;B++){const H=new He(-10+Math.random()*20,2.5+Math.random()*2,-8+Math.random()*3);console.log(`Creating extra cloud at ${H.x}, ${H.y}, ${H.z}`);const q=new iW(E,H);d.current.push(q)}console.log(`Created ${d.current.length} clouds`),w(E),S(E),f.current=new MD;let N=Date.now();function U(){if(!a.current)return;const B=Date.now(),H=(B-N)/1e3;N=B,d.current&&d.current.length>0?d.current.forEach((q,z)=>{q&&q.update?q.update():console.error(`Cloud ${z} is invalid:`,q)}):console.warn("No clouds to update"),u.current.forEach((q,z)=>{q.update(H),q.mesh.position.y<-5&&(E.remove(q.mesh),u.current.splice(z,1))}),a.current.render(E,_),c.current=requestAnimationFrame(U),B-p.current>5e3&&(p.current=B,console.log("Camera position:",_.position),console.log("Number of clouds:",d.current.length),console.log("Scene children:",E.children.length))}U();function $(){if(!i.current||!s.current||!a.current)return;const B=i.current.clientWidth,H=i.current.clientHeight;s.current.aspect=B/H,s.current.updateProjectionMatrix(),a.current.setSize(B,H)}return window.addEventListener("resize",$),i.current.addEventListener("mousedown",g),i.current.addEventListener("touchstart",g,{passive:!0}),()=>{window.removeEventListener("resize",$),i.current&&(i.current.removeEventListener("mousedown",g),i.current.removeEventListener("touchstart",g),a.current&&i.current.removeChild(a.current.domElement)),c.current&&cancelAnimationFrame(c.current)}},w=E=>{const R=new jb(10,96),F=.2,L=.25,N=.4,U=R.getAttribute("position"),$=R.getAttribute("uv"),B=[{centerU:.3,centerV:.7,radius:.27,color:15037299,heightMult:1.2},{centerU:.7,centerV:.6,radius:.25,color:9364626,heightMult:.8},{centerU:.2,centerV:.3,radius:.23,color:9795021,heightMult:1.4},{centerU:.6,centerV:.2,radius:.28,color:5227511,heightMult:.6},{centerU:.5,centerV:.5,radius:.18,color:16758605,heightMult:1}],H=(ne,pe,ye)=>{const Ce=Math.sin(ne*4.7+pe*3.2)*Math.cos(pe*2.3-ne*1.9)*.1,_e=Math.sin(ne*7.5+pe*5.7)*Math.cos(pe*4.3-ne*3.1)*.05,ce=1-Math.min(ye*2.5,1);return(Ce+_e)*ce},q=new ni(U.count*3,3),z=new wn(6279520);for(let ne=0;ne<U.count;ne++){const pe=U.getX(ne),ye=U.getY(ne),Ce=$.getX(ne),_e=$.getY(ne);if(pe===0&&ye===0&&ne===0){U.setZ(ne,.08),q.setXYZ(ne,z.r,z.g,z.b);continue}const Be=Math.sqrt(pe*pe+ye*ye)/10;let de=1,me=new wn(z);for(const Ne of B){const Re=Ce-Ne.centerU,Ie=_e-Ne.centerV,it=Re*Re+Ie*Ie;if(it<Ne.radius*Ne.radius){const Ee=new wn(Ne.color),Le=Math.sqrt(it),Ge=(Ne.radius-Le)/Ne.radius,Ke=Math.pow(Ge,2.5);me.r=z.r*(.6-Ke*.6)+Ee.r*Ke,me.g=z.g*(.6-Ke*.6)+Ee.g*Ke,me.b=z.b*(.6-Ke*.6)+Ee.b*Ke,de=1*(1-Ke)+Ne.heightMult*Ke;break}}const ie=Math.sin(pe*8.3+ye*7.1)*.03+Math.cos(pe*9.8+ye*6.3)*.02;me.r=Math.max(0,Math.min(1,me.r+ie)),me.g=Math.max(0,Math.min(1,me.g+ie)),me.b=Math.max(0,Math.min(1,me.b+ie*.5)),q.setXYZ(ne,me.r,me.g,me.b);const ae=F*Math.sin(L*pe)+F*Math.cos(L*ye),ge=.05*Math.sin(pe*3+ye*2)*Math.cos(pe-ye)+.05*Math.cos(pe*5)*Math.sin(ye*3),X=Math.atan2(ye,pe),W=Math.sin(X*8)*.5+Math.sin(X*5)*.3+Math.sin(X*3)*.2,ve=Be*(.3+.7*Be),ue=N*W*ve,Me=H(pe,ye,Be),Ae=(ae+ge+ue+Me)*de;U.setZ(ne,Ae)}R.setAttribute("color",q),R.computeVertexNormals();const G=(ne,pe=.2)=>{const Ce=document.createElement("canvas");Ce.width=1024,Ce.height=1024;const _e=Ce.getContext("2d"),ce=_e.createRadialGradient(1024/2,1024/2,0,1024/2,1024/2,1024*.7);ce.addColorStop(0,"rgb(75, 52, 35)"),ce.addColorStop(.7,"rgb(70, 47, 30)"),ce.addColorStop(1,"rgb(65, 42, 25)"),_e.fillStyle=ce,_e.fillRect(0,0,1024,1024);const Be=/rgb\((\d+),\s*(\d+),\s*(\d+)\)/.exec(ne);let de=90,me=160,ie=60;Be&&(de=parseInt(Be[1]),me=parseInt(Be[2]),ie=parseInt(Be[3]));const ae=(Me,Ae,Ne)=>(Math.sin(Me*7.13*Ne+Ae*3.79*Ne)*Math.cos(Me*4.21*Ne-Ae*8.11*Ne)+Math.sin(Me*2.89*Ne-Ae*5.23*Ne)*Math.cos(Me*9.37*Ne+Ae*1.97*Ne))*.25+.5,ge=15e3;for(let Me=0;Me<ge;Me++){const Ae=Math.random()*1024,Ne=Math.random()*1024,Re=1+Math.random()*3,Ie=60+Math.floor(Math.random()*30),it=40+Math.floor(Math.random()*20),Ee=20+Math.floor(Math.random()*20),Le=.2+Math.random()*.3;_e.fillStyle=`rgba(${Ie}, ${it}, ${Ee}, ${Le})`,Math.random()>.6?(_e.beginPath(),_e.arc(Ae,Ne,Re/2,0,Math.PI*2),_e.fill()):_e.fillRect(Ae,Ne,Re,Re*.8)}const X=3e4,W=[[de,me,ie],[Math.min(255,de*1.4),Math.min(255,me*1.3),Math.min(255,ie*1)],[Math.min(255,de*1),Math.min(255,me*1.1),Math.min(255,ie*.9)],[Math.min(255,de*1.35),Math.min(255,me*1.05),Math.min(255,ie*.8)]];for(let Me=0;Me<X;Me++){const Ae=Math.random()*1024,Ne=Math.random()*1024,Re=Ae/1024,Ie=Ne/1024,it=ae(Re,Ie,1),Ee=ae(Re,Ie,3),Le=ae(Re,Ie,7),Ge=it*.5+Ee*.3+Le*.2;if(Ge<.4)continue;const Ke=3+Math.random()*12*Ge,je=.5+Math.random()*1.5*Ge,et=Math.random()*Math.PI*2,lt=Math.floor(Math.random()*W.length),ht=W[lt],ke=Math.max(0,Math.min(255,ht[0]*(.9+Ge*.2))),gt=Math.max(0,Math.min(255,ht[1]*(.9+Ge*.2))),tt=Math.max(0,Math.min(255,ht[2]*(.9+Ge*.2))),yt=.4+Ge*.6;_e.strokeStyle=`rgba(${Math.floor(ke)}, ${Math.floor(gt)}, ${Math.floor(tt)}, ${yt})`,_e.lineWidth=je;const at=Math.random()*.5;_e.beginPath(),_e.moveTo(Ae,Ne);const mt=ae(Re*10,Ie*10,.5);if(mt<.3)_e.lineTo(Ae+Math.cos(et)*Ke,Ne+Math.sin(et)*Ke);else if(mt<.6){const Ot=Ae+Math.cos(et+at)*(Ke*.5),rn=Ne+Math.sin(et+at)*(Ke*.5),on=Ae+Math.cos(et)*Ke,Pe=Ne+Math.sin(et)*Ke;_e.quadraticCurveTo(Ot,rn,on,Pe)}else{const Ot=Ae+Math.cos(et-at)*(Ke*.3),rn=Ne+Math.sin(et-at)*(Ke*.3),on=Ae+Math.cos(et+at)*(Ke*.6),Pe=Ne+Math.sin(et+at)*(Ke*.6),Ue=Ae+Math.cos(et)*Ke,Xe=Ne+Math.sin(et)*Ke;_e.bezierCurveTo(Ot,rn,on,Pe,Ue,Xe)}_e.stroke()}const ve=80;for(let Me=0;Me<ve;Me++){const Ae=Math.random()*1024,Ne=Math.random()*1024,Re=Ae/1024,Ie=Ne/1024;if(ae(Re*5,Ie*5,2)<.6)continue;const Ee=2+Math.random()*4,Le=["rgba(255, 255, 180, 0.9)","rgba(255, 200, 200, 0.9)","rgba(200, 200, 255, 0.9)","rgba(255, 180, 140, 0.9)","rgba(220, 180, 255, 0.9)"];_e.fillStyle=Le[Math.floor(Math.random()*Le.length)],_e.beginPath(),_e.arc(Ae,Ne,Ee/2,0,Math.PI*2),_e.fill(),_e.fillStyle="rgba(255, 220, 100, 0.95)",_e.beginPath(),_e.arc(Ae,Ne,Ee/4,0,Math.PI*2),_e.fill()}const ue=new vy(Ce);return ue.wrapS=Fb,ue.wrapT=Fb,ue.repeat.set(5,7),ue.rotation=(Math.random()-.5)*.1,ue},K=new ji({vertexColors:!0,map:G("rgb(150, 225, 100)",.4),roughness:.9,metalness:0,side:Ms,flatShading:!1,wireframe:!1}),Z=new Mn(R,K);Z.rotation.x=-Math.PI/2,Z.position.y=-.05,Z.receiveShadow=!0,E.add(Z);const ee=(ne,pe)=>{const Be=.2*Math.sin(.25*ne)+.2*Math.cos(.25*pe),de=.05*Math.sin(ne*3+pe*2)*Math.cos(ne-pe)+.05*Math.cos(ne*5)*Math.sin(pe*3),ie=Math.sqrt(ne*ne+pe*pe)/10,ae=Math.atan2(pe,ne),ge=Math.sin(ae*8)*.5+Math.sin(ae*5)*.3+Math.sin(ae*3)*.2,X=ie*(.3+.7*ie),W=.4*ge*X,ve=(()=>{const Re=Math.sin(ne*4.7+pe*3.2)*Math.cos(pe*2.3-ne*1.9)*.1,Ie=Math.sin(ne*7.5+pe*5.7)*Math.cos(pe*4.3-ne*3.1)*.05,it=1-Math.min(ie*2.5,1);return(Re+Ie)*it})(),ue=(ne/10+1)/2,Me=(pe/10+1)/2;let Ae=1;const Ne=[{centerU:.3,centerV:.7,radius:.27,color:15037299,heightMult:1.2},{centerU:.7,centerV:.6,radius:.25,color:9364626,heightMult:.8},{centerU:.2,centerV:.3,radius:.23,color:9795021,heightMult:1.4},{centerU:.6,centerV:.2,radius:.28,color:5227511,heightMult:.6},{centerU:.5,centerV:.5,radius:.18,color:16758605,heightMult:1}];for(const Re of Ne){const Ie=ue-Re.centerU,it=Me-Re.centerV,Ee=Ie*Ie+it*it;if(Ee<Re.radius*Re.radius){const Le=Math.sqrt(Ee),Ge=(Re.radius-Le)/Re.radius,Ke=Math.pow(Ge,3);Ae=1*(1-Ke)+Re.heightMult*Ke;break}}return(Be+de+W+ve)*Ae},V=()=>{const ne=new Yl,pe=new il(1,.7,1,5,4,5),ye=pe.getAttribute("position"),Ce=new He,_e=[];for(let X=0;X<ye.count;X++)if(Ce.fromBufferAttribute(ye,X),Ce.y<-.3)_e.push(new He(Ce.x,-.35,Ce.z)),ye.setY(X,-.35);else{const ve=(Ce.y+.35)/1.05,ue=Math.pow(ve,1.5)*.2;Ce.x+=(Math.random()-.5)*ue,Ce.y+=(Math.random()-.5)*ue*.8,Ce.z+=(Math.random()-.5)*ue,ye.setXYZ(X,Ce.x,Ce.y,Ce.z)}pe.computeVertexNormals();const ce=new ji({color:8219475,roughness:.9,metalness:.1,flatShading:!0,side:Ms}),Be=Math.random()*.2-.1;ce.color.r+=Be,ce.color.g+=Be,ce.color.b+=Be;const de=new Mn(pe,ce);ne.add(de);const me=new Ef(.6,.6,.1,12),ie=new ji({color:ce.color,roughness:.9,metalness:.1,flatShading:!0}),ae=new Mn(me,ie);ae.position.y=-.4,ne.add(ae);for(let X=0;X<4;X++){const W=new il(.2+Math.random()*.15,.1+Math.random()*.1,.2+Math.random()*.15),ve=W.getAttribute("position");for(let Ie=0;Ie<ve.count;Ie++){const it=new He().fromBufferAttribute(ve,Ie);it.y>-.05&&(it.x+=(Math.random()-.5)*.1,it.y+=(Math.random()-.5)*.05,it.z+=(Math.random()-.5)*.1,ve.setXYZ(Ie,it.x,it.y,it.z))}W.computeVertexNormals();const ue=Math.random()*.15-.05,Me=new ji({color:new wn(ce.color).offsetHSL(0,0,ue),roughness:.9,metalness:.1,flatShading:!0}),Ae=new Mn(W,Me),Ne=Math.PI*2/4*X+(Math.random()-.5)*.5,Re=.4+Math.random()*.15;Ae.position.set(Math.cos(Ne)*Re,-.3-Math.random()*.1,Math.sin(Ne)*Re),Ae.rotation.set(Math.random()*Math.PI,Math.random()*Math.PI,Math.random()*Math.PI),ne.add(Ae)}const ge=()=>{const X=new Xs(.25,7,5),W=X.getAttribute("position");for(let Me=0;Me<W.count;Me++){const Ae=new He().fromBufferAttribute(W,Me);Ae.y*=.6,Ae.y>0&&(Ae.x+=(Math.random()-.5)*.2,Ae.z+=(Math.random()-.5)*.2),W.setXYZ(Me,Ae.x,Ae.y,Ae.z)}X.computeVertexNormals();const ve=Math.random()*.1-.05,ue=new ji({color:new wn(ce.color).offsetHSL(0,0,ve),roughness:.9,metalness:.1,flatShading:!0});return new Mn(X,ue)};if(Math.random()>.3){const X=ge();X.position.set((Math.random()-.5)*.3,.1+Math.random()*.1,(Math.random()-.5)*.3),X.scale.set(.7+Math.random()*.5,.4+Math.random()*.3,.7+Math.random()*.5),X.rotation.y=Math.random()*Math.PI*2,ne.add(X)}return ne.traverse(X=>{X instanceof Mn&&(X.castShadow=!0,X.receiveShadow=!0)}),ne.userData.isMesh=!0,ne.userData.geometry=pe,ne.userData.material=ce,ne},J=(ne,pe,ye,Ce,_e=1)=>{const ce=4+Math.floor(Math.random()*3),Be=new Yl;ne.add(Be);const de=Math.cos(pe)*ye,me=Math.sin(pe)*ye,ie=Ce(de,me),ae=1.2*_e,ge=new Ef(ae,ae,.2,8),X=new ji({color:7166787,roughness:1,metalness:0,flatShading:!0}),W=new Mn(ge,X);W.position.set(de,ie-.1,me),Be.add(W);const ve=V();ve.position.set(de,ie,me);const ue=(1.2+Math.random()*.6)*_e;ve.scale.set(ue*(1+Math.random()*.2),ue*(.5+Math.random()*.2),ue*(1+Math.random()*.2)),ve.rotation.x=Math.random()*Math.PI/4,ve.rotation.y=Math.random()*Math.PI*2,ve.rotation.z=Math.random()*Math.PI/4,Be.add(ve);const Me=()=>{const Ne=new il(1,.15,1),Re=Ne.getAttribute("position");for(let Ee=0;Ee<Re.count;Ee++)Re.getY(Ee)>0&&(Re.setX(Ee,Re.getX(Ee)+(Math.random()-.5)*.1),Re.setY(Ee,Re.getY(Ee)+(Math.random()-.5)*.05),Re.setZ(Ee,Re.getZ(Ee)+(Math.random()-.5)*.1));Ne.computeVertexNormals();const Ie=Math.random()*.1-.05,it=new ji({color:new wn(8219475).offsetHSL(0,0,Ie),roughness:.9,metalness:.1,flatShading:!0,side:Ms});return new Mn(Ne,it)},Ae=2+Math.floor(Math.random()*2);for(let Ne=0;Ne<Ae;Ne++){const Re=Me(),Ie=Math.random()*Math.PI*2,it=ae*.7,Ee=de+Math.cos(Ie)*it,Le=me+Math.sin(Ie)*it,Ge=Ce(Ee,Le);Re.position.set(Ee,Ge-.05,Le),Re.rotation.set((Math.random()-.5)*.2,Math.random()*Math.PI*2,(Math.random()-.5)*.2);const Ke=.8+Math.random()*.4;Re.scale.set(Ke,1,Ke),Be.add(Re)}for(let Ne=1;Ne<ce;Ne++){const Re=V(),Ie=Math.PI*2/(ce-1)*(Ne-1),it=pe+Ie+(Math.random()-.5)*.4,Ee=(Math.random()-.3)*.7,Le=ae*(.7+Ee),Ge=de+Math.cos(it)*Le,Ke=me+Math.sin(it)*Le;Ce(Ge,Ke);const je=(Math.random()-.3)*.15;Re.position.set(Ge,ie+je,Ke);const et=.6+Math.random()*.5;if(Re.scale.set(et*(.9+Math.random()*.3),et*(.4+Math.random()*.2),et*(.9+Math.random()*.3)),Re.rotation.x=(Math.random()-.5)*Math.PI/4,Re.rotation.y=Math.random()*Math.PI*2,Re.rotation.z=(Math.random()-.5)*Math.PI/4,Be.add(Re),Ne%2===0){const lt=new He(de-Ge,0,me-Ke).normalize().multiplyScalar(.3+Math.random()*.4);Re.position.x+=lt.x,Re.position.z+=lt.z}}return Be},oe=(ne,pe)=>{[{angle:Math.PI*1.25,distance:9.8,scale:1},{angle:Math.PI*1.45,distance:9.5,scale:1.5},{angle:Math.PI*1.65,distance:9.8,scale:1}].forEach(Ce=>{J(ne,Ce.angle,Ce.distance,pe,Ce.scale)})};E.add(Z);for(let ne=0;ne<2;ne++){const pe=V();let ye=!1,Ce=new He,_e=0,ce=0;for(;!ye&&ce<20;){ce++;const de=[{angle:Math.PI/4+Math.PI/2*ne,dist:7+ne%2},{angle:Math.PI/4+Math.PI/3*ne,dist:6},{angle:Math.random()*Math.PI+Math.PI/2,dist:7.5+Math.random()*1.5}][Math.min(ce%3,2)],me=de.angle,ie=de.dist,ae=Math.cos(me)*ie,ge=Math.sin(me)*ie;_e=ee(ae,ge),Ce.set(ae,0,ge);const X=[{x:-2.5,z:-2},{x:2.5,z:-2},{x:-3,z:1},{x:3,z:1}];let W=!1;for(const ue of X)if(Math.sqrt(Math.pow(ae-ue.x,2)+Math.pow(ge-ue.z,2))<2.5){W=!0;break}if(!W&&ne>0)for(let ue=0;ue<ne;ue++){const Me=E.children.find(Ae=>Ae.userData&&Ae.userData.isRock&&Ae.userData.rockIndex===ue);if(Me&&Math.sqrt(Math.pow(ae-Me.position.x,2)+Math.pow(ge-Me.position.z,2))<2){W=!0;break}}const ve=Math.sqrt(ae*ae+ge*ge);ye=!W&&ve>3}if(ye){pe.position.set(Ce.x,_e-.08,Ce.z);const Be=.5+Math.random()*.7;pe.scale.set(Be*(.8+Math.random()*.4),Be*(.6+Math.random()*.3),Be*(.8+Math.random()*.4)),pe.rotation.set(Math.random()*Math.PI*2,Math.random()*Math.PI*2,Math.random()*Math.PI*2),pe.userData.isRock=!0,pe.userData.rockIndex=ne,pe.castShadow=!0,pe.receiveShadow=!0,console.log(`Rock ${ne} placed at (${Ce.x.toFixed(2)}, ${_e.toFixed(2)}, ${Ce.z.toFixed(2)})`),E.add(pe)}}oe(E,ee)},S=E=>{l.current=[];const _=[{x:-2.5,z:-2,position:"backLeft"},{x:2.5,z:-2,position:"backRight"},{x:-3,z:1,position:"frontLeft"},{x:3,z:1,position:"frontRight"}],A={},R=_.map(F=>{const L=m();L.position.set(F.x,-1.5,F.z);const N=new He(0,7,7),U=new He;if(F.z<0){U.subVectors(N,new He(F.x,0,F.z)).normalize();const $=Math.atan2(U.x,U.z);A[F.position]=$}return{mole:L,position:F}});console.log(`Creating exactly ${_.length} holes and moles`),_.forEach((F,L)=>{const H=F.x,q=F.z,z=.2*Math.sin(.25*H)+.2*Math.cos(.25*q),G=.05*Math.sin(H*3+q*2)*Math.cos(H-q)+.05*Math.cos(H*5)*Math.sin(q*3),Z=Math.sqrt(H*H+q*q)/10,ee=Math.atan2(q,H),V=Math.sin(ee*8)*.5+Math.sin(ee*5)*.3+Math.sin(ee*3)*.2,J=Math.pow(Z,2.5),oe=.4*V*J,ne=(H/10+1)/2,pe=(q/10+1)/2;let ye=1;const Ce=[{centerU:.3,centerV:.7,radius:.25,color:15037299,heightMult:1.2},{centerU:.7,centerV:.6,radius:.2,color:8505220,heightMult:.8},{centerU:.2,centerV:.3,radius:.2,color:9795021,heightMult:1.4},{centerU:.6,centerV:.2,radius:.25,color:5227511,heightMult:.6},{centerU:.5,centerV:.5,radius:.15,color:16758605,heightMult:1}];for(const ge of Ce){const X=ne-ge.centerU,W=pe-ge.centerV,ve=X*X+W*W;if(ve<ge.radius*ge.radius){const ue=Math.sqrt(ve),Me=(ge.radius-ue)/ge.radius,Ae=Math.pow(Me,3);ye=1*(1-Ae)+ge.heightMult*Ae;break}}const _e=(z+G+oe)*ye,ce=P();ce.position.set(F.x,_e-.01,F.z);const Be=.2*.25*Math.cos(.25*H),de=-.2*.25*Math.sin(.25*q);if(Math.abs(Be)>.05||Math.abs(de)>.05){const ge=new He(-Be,1,-de).normalize(),X=Math.atan2(ge.z,ge.y),W=-Math.atan2(ge.x,ge.y);ce.rotation.x=-Math.PI/2+X,ce.rotation.z=W}E.add(ce);const{mole:me}=R[L];let ie=0;F.position==="frontLeft"?ie=A.backLeft||0:F.position==="frontRight"?ie=A.backRight||0:ie=A[F.position]||0,me.rotation.y=ie,me.visible=!1,me.userData.isUp=!1,me.userData.isMoving=!1;const ae=_e-1.3;me.userData.holePosition={x:F.x,y:ae,z:F.z},me.position.y=ae,me.userData.centerRotation=ie,me.userData.terrainHeight=_e,E.add(me),l.current.push(me)}),console.log(`Setup complete. Total moles: ${l.current.length}`)},P=()=>{const E=new Yl,_=(ne,pe,ye)=>{const Ce=new UL;for(let _e=0;_e<=ye;_e++){const ce=_e/ye*Math.PI*2,de=(ne+(Math.random()*2-1)*pe)*(1+.1*Math.sin(ce*3)+.05*Math.sin(ce*5)),me=Math.cos(ce)*de,ie=Math.sin(ce)*de*.7;_e===0?Ce.moveTo(me,ie):Ce.lineTo(me,ie)}return Ce.closePath(),Ce},A={steps:2,depth:.4,bevelEnabled:!0,bevelThickness:.06,bevelSize:.06,bevelOffset:0,bevelSegments:3},R=_(1.3,.15,12),F=new Rx(R),L=new ji({color:9127187,roughness:.8,metalness:.1}),N=new Mn(F,L);N.rotation.x=-Math.PI/2,N.position.y=.01,N.receiveShadow=!0,E.add(N);const U=_(1.1,.1,12),$=new zL(U,A),B=new ji({color:4006676,roughness:.9,metalness:0,side:Ms}),H=new Mn($,B);H.rotation.x=Math.PI/2,H.position.y=.015,H.receiveShadow=!0,E.add(H);const q=_(1.2,.15,12),z=new Rx(q),G=new ji({color:1706496,roughness:1,metalness:0}),K=new Mn(z,G);K.rotation.x=-Math.PI/2,K.position.y=-.375,K.receiveShadow=!0,E.add(K);const Z=_(1,.12,10),ee=new Rx(Z),V=new ji({color:2759178,roughness:1,metalness:0}),J=new Mn(ee,V);J.rotation.x=-Math.PI/2,J.position.y=-.18,J.receiveShadow=!0,E.add(J);const oe=()=>{const ne=.05+Math.random()*.1;let pe;const ye=Math.random();ye<.4?(pe=new Xs(ne,8,6),pe.scale(1,.3,1)):ye<.7?pe=new Ef(ne*.8,ne,ne*.3,8,1,!1):(pe=new VL(ne*.7,0),pe.scale(1,.4,1));const Ce=pe.getAttribute("position"),_e=new He;for(let ie=0;ie<Ce.count;ie++)_e.fromBufferAttribute(Ce,ie),_e.x+=(Math.random()-.5)*.02,_e.y+=(Math.random()-.5)*.01,_e.z+=(Math.random()-.5)*.02,Ce.setXYZ(ie,_e.x,_e.y,_e.z);pe.computeVertexNormals();const ce=[9127187,10382154,8215365,7162933,11239778],Be=ce[Math.floor(Math.random()*ce.length)],de=Math.random()*.06-.03,me=new ji({color:new wn(Be).offsetHSL(0,0,de),roughness:.9+Math.random()*.1,metalness:0,flatShading:ye>.7});return new Mn(pe,me)};for(let ne=0;ne<20;ne++){const pe=oe(),ye=ne/20*Math.PI*2+(Math.random()-.5)*.3;let Ce;ne%4===0?Ce=1.3+Math.random()*.25:Ce=1.2+Math.random()*.2,pe.position.set(Math.cos(ye)*Ce,.01+Math.random()*.01,Math.sin(ye)*Ce*.7),pe.rotation.set(Math.random()*Math.PI*.2,Math.random()*Math.PI*2,Math.random()*Math.PI*.2);const _e=.8+Math.random()*.4;pe.scale.multiplyScalar(_e),pe.castShadow=!0,pe.receiveShadow=!0,E.add(pe)}for(let ne=0;ne<5;ne++){const pe=oe(),ye=ne/5*Math.PI*2+(Math.random()-.5)*.5,Ce=1.35+Math.random()*.2;pe.position.set(Math.cos(ye)*Ce,.015+Math.random()*.01,Math.sin(ye)*Ce*.7);const _e=1.3+Math.random()*.4,ce=.6+Math.random()*.2;pe.scale.set(_e,ce,_e);for(let Be=0;Be<4;Be++){const de=oe();de.position.set(Math.cos(ye)*(Ce-.1),.01+Math.random()*.01,Math.sin(ye)*(Ce-.1)),de.scale.set(.2,.2,.2),de.rotation.set(Math.random()*Math.PI*.2,Math.random()*Math.PI*2,Math.random()*Math.PI*.2),pe.add(de)}E.add(pe)}return E};T.useEffect(()=>{console.log("Scene component mounted. Game active:",t),console.log("Config:",n)},[]),T.useEffect(()=>{if(!o.current||!l.current.length)return console.log("Scene not ready yet, skipping game loop initialization"),()=>{};if(console.log("********* GAME STATE CHANGED *********"),console.log("Game active:",t,"Moles count:",l.current.length),!t)return console.log("Game not active, hiding moles"),M(),()=>{};console.log("********* INITIALIZING GAME LOOP *********"),console.log("Time:",Date.now()),M(),l.current.forEach(z=>{z.userData.molesShownCounter=0,console.log(`Reset mole counter for mole at ${z.position.x.toFixed(2)}, ${z.position.z.toFixed(2)}`)});const E=[],_=new Map,A=2e3,R=n.speed||2;let F;switch(R){case 1:F=9;break;case 3:F=15;break;case 2:default:F=12;break}let L=0;const N=R===3?F+Math.floor(Math.random()*2):F-Math.floor(Math.random()*2);console.log("⭐ STRICT MOLE LIMITER ENABLED ⭐"),console.log(`Game Speed: ${R} (${R===1?"Slow":R===2?"Medium":"Fast"})`),console.log(`Target mole count: ${N} in ${n.gameTime}s`);const U=Math.max(1500,n.gameTime*1e3/N);console.log(`Base interval between moles: ${Math.round(U)}ms (minimum 1.5s)`);const $=()=>{if(!t){console.log("❌ Game no longer active - not showing mole");return}if(L>=N){console.log(`⛔ MAXIMUM REACHED: ${L}/${N} moles shown - NO MORE WILL APPEAR`);return}const z=l.current.find(K=>(K.userData.molesShownCounter||0)>N);if(z){console.log(`⛔ Error: Mole counter exceeds max - found mole with counter ${z.userData.molesShownCounter}/${N}`);return}const G=l.current.filter(K=>!K.userData.isUp&&!K.userData.isMoving);if(G.length>0){const K=G[Math.floor(Math.random()*G.length)];L++,K.userData.molesShownCounter=L,console.log(`🔵 Showing mole #${L}/${N} at:`,K.position),I(K,!0),_.set(K,Date.now());const Z=setTimeout(()=>{K.userData.isUp&&!K.userData.isMoving&&(I(K,!1),_.delete(K))},A);E.push(Z),L<N?(console.log(`🟢 Scheduling next mole (${L+1}/${N})`),B()):console.log(`🔴 LIMIT REACHED: ${L}/${N} moles - no more will be scheduled`)}else if(L<N){console.log(`⚠️ No available moles, retrying in 300ms (${L}/${N} shown so far)`);const K=setTimeout($,300);E.push(K)}},B=()=>{if(L>=N){console.log(`🛑 LIMIT CHECK: ${L}/${N} moles shown - not scheduling any more`);return}const z=L===0?0:L/N*n.gameTime*1e3,G=Math.max(0,n.gameTime*1e3-z),K=N-L;let Z=K>0?G/K:U;const V=Z*(R===1?.25:R===2?.2:.15),J=R===1?1800:R===2?1500:1200,oe=Math.max(J,Z-V+Math.random()*V*2);console.log(`⏱️ Next mole (#${L+1}/${N}) scheduled in ${Math.round(oe)}ms (min: ${J}ms)`);const ne=setTimeout($,oe);E.push(ne)};console.log("Starting game - first mole will appear in 500ms");const H=setTimeout($,500);E.push(H);const q=setInterval(()=>{t&&l.current.forEach(z=>{if(z.userData.isUp&&!z.userData.isMoving){const G=_.get(z),K=Date.now();(!G||K-G>A+500)&&(console.log("Detected stuck mole, forcing down:",z.position),I(z,!1),_.delete(z))}})},1e3);return E.push(q),()=>{console.log("Cleaning up timeouts"),E.forEach(z=>{typeof z=="number"?cancelAnimationFrame(z):clearTimeout(z)}),clearInterval(q)}},[t,n.gameTime,n.speed]);const I=(E,_)=>{if(console.log("Animating mole:",_?"up":"down"),E.userData.isMoving){console.log("Mole is already moving, forcing completion of current animation"),E.position.y=_?E.userData.holePosition.y+1.8:E.userData.holePosition.y,E.userData.isMoving=!1,E.userData.isUp=!_,setTimeout(()=>I(E,_),50);return}const A=setTimeout(()=>{console.log("SAFETY: Animation taking too long, forcing completion"),E.position.y=_?E.userData.holePosition.y+1.8:E.userData.holePosition.y,E.userData.isMoving=!1,E.userData.isUp=_,_||(E.visible=!1,v(E,""))},300);E.userData.isMoving=!0,E.userData.currentSafetyTimer=A;const R=E.position.y,F=_?E.userData.holePosition.y+1.8:E.userData.holePosition.y,L=150,N=Date.now();if(_){E.visible=!0,E.rotation.y=E.userData.centerRotation||0;const{word:$,isCorrect:B}=b();E.userData.isCorrectWord=B,E.userData.word=$,v(E,$),console.log("Mole word assigned:",$,"isCorrect:",B)}function U(){if(!E.parent){clearTimeout(E.userData.currentSafetyTimer);return}const $=Date.now()-N,B=Math.min($/L,1),H=B<.5?2*B*B:-1+(4-2*B)*B;E.position.y=R+(F-R)*H,B<1?requestAnimationFrame(U):(clearTimeout(E.userData.currentSafetyTimer),E.position.y=F,E.userData.isMoving=!1,E.userData.isUp=_,_||(E.visible=!1,v(E,"")),console.log("Mole animation complete:",_?"up":"down"))}U()},M=()=>{console.log("Resetting all moles to default state"),l.current.forEach(E=>{E.userData.currentSafetyTimer&&clearTimeout(E.userData.currentSafetyTimer),E.position.y=E.userData.holePosition.y,E.visible=!1,E.userData.isUp=!1,E.userData.isMoving=!1,v(E,"")})};T.useEffect(()=>{if(!i.current||!o.current||!s.current)return;const E=new MD,_=new qt,A=R=>{if(!t){console.log("Game not active, ignoring click");return}const F=i.current.getBoundingClientRect(),L="touches"in R?R.touches[0].clientX:R.clientX,N="touches"in R?R.touches[0].clientY:R.clientY;_.x=(L-F.left)/F.width*2-1,_.y=-((N-F.top)/F.height)*2+1,E.setFromCamera(_,s.current);const U=[];l.current.forEach(B=>{B.visible&&B.userData.isUp&&!B.userData.isMoving&&B.traverse(H=>{H instanceof Mn&&(H.userData.parentMole=B,U.push(H))})}),console.log("Checking intersections with",U.length,"objects");const $=E.intersectObjects(U,!1);if($.length>0){console.log("Hit detected");const B=$[0].object,H=B.userData.parentMole||B.parent;if(H&&H.userData.isUp&&!H.userData.isMoving)if(console.log("Processing hit on mole, isCorrect:",H.userData.isCorrectWord),e(H.userData.word,H.userData.isCorrectWord),H.userData.isCorrectWord){D(H.position.clone());const q=25;for(let ee=0;ee<q;ee++){const V=Math.random()*Math.PI*2,J=Math.random()*.8,oe=Math.random()*.5+.5,ne=new He((Math.random()-.5)*.4,0,(Math.random()-.5)*.4),pe=H.position.clone().add(new He(Math.cos(V)*J,oe,Math.sin(V)*J)).add(ne),ye=new UYe(o.current,pe);u.current.push(ye)}const z=H.scale.x,G=300,K=Date.now(),Z=()=>{const ee=Date.now()-K,V=Math.min(ee/G,1),oe=z*(1+(ne=>Math.pow(2,-10*ne)*Math.sin((ne-.3/4)*(2*Math.PI)/.3)*1.2+1)(V)*.2);H.scale.set(oe,oe,oe),V<1?requestAnimationFrame(Z):(H.scale.set(z,z,z),I(H,!1))};Z()}else I(H,!1)}else console.log("No hit detected")};return i.current.addEventListener("click",A),i.current.addEventListener("touchstart",A),()=>{var R,F;(R=i.current)==null||R.removeEventListener("click",A),(F=i.current)==null||F.removeEventListener("touchstart",A)}},[t,e,n]),T.useImperativeHandle(r,()=>({reset:M}));const D=E=>{if(!o.current)return;const _=25,A=[],R=[new wn(16711680),new wn(16777215),new wn(255),new wn(16766720),new wn(16738740),new wn(65280)];for(let L=0;L<_;L++){const N=Math.random();let U;if(N<.5){const ee=.04+Math.random()*.06,V=.04+Math.random()*.06;U=new Kf(ee,V)}else{const ee=.02+Math.random()*.04;U=new jb(ee,6)}const $=new Ts({color:R[Math.floor(Math.random()*R.length)],side:Ms,transparent:!0,opacity:.9}),B=new Mn(U,$),H=new He((Math.random()-.5)*.2,Math.random()*.1,(Math.random()-.5)*.2);B.position.copy(E).add(H);const q=Math.random()*Math.PI*2,z=Math.random()*Math.PI*.4,G=.3+Math.random()*.4,K=new He(Math.cos(q)*Math.cos(z)*G,Math.sin(z)*G+.1,Math.sin(q)*Math.cos(z)*G),Z=.5+Math.random()*.3;A.push({mesh:B,velocity:K,life:Z,maxLife:Z}),o.current.add(B)}const F=()=>{let L=!1;A.forEach(N=>{var U;N.life>0?(N.life-=.02,N.mesh.position.x+=N.velocity.x*.1,N.mesh.position.y+=N.velocity.y*.1,N.mesh.position.z+=N.velocity.z*.1,N.velocity.y-=.01,N.velocity.multiplyScalar(.95),N.mesh.material instanceof gm&&(N.mesh.material.opacity=N.life/N.maxLife*.9),L=!0):N.mesh.parent&&((U=o.current)==null||U.remove(N.mesh))}),L&&requestAnimationFrame(F)};F()};return T.useEffect(()=>{if(!i.current)return;console.log("Initializing scene...");const E=x();return console.log("Scene initialized, clouds added:",d.current.length),r&&typeof r!="function"&&(r.current={resetMoles:M}),E},[]),h.jsx(Et,{ref:i,position:"relative",width:"100%",height:"100%",overflow:"hidden",sx:{"& canvas":{display:"block",width:"100% !important",height:"100% !important"}}})});class ld extends Error{constructor(e,n){super(e),this.code=n,this.name="HighScoreError"}}const VYe=t=>te(nt,null,function*(){try{const{gameType:e,configId:n,scoringSystem:r}=t,i=mr(Tn(bt,"highScores"),Bn("configId","==",n),Bn("gameType","==",e),f0("score",r==="miss-based"?"asc":"desc"),$f(10));return(yield Xn(i)).docs.map(a=>j({id:a.id},a.data()))}catch(e){throw console.error("Error loading high scores:",e),new ld("Failed to load high scores","LOAD_ERROR")}}),WYe=(t,e,n)=>{var i;if(e.length<10)return!0;const r=(i=e[e.length-1])==null?void 0:i.score;return n==="miss-based"?t<r:t>r},$Ye=(t,e)=>te(nt,null,function*(){if(!t)return e;let n=t.displayName||e||"Student";try{const r=yield si(an(bt,"users",t.uid));r.exists()&&(n=r.data().name||n)}catch(r){console.log("Could not fetch user name from database, using fallback")}return n}),HYe=(t,e)=>te(nt,null,function*(){if(!e.enableRateLimit)return;const n=e.rateLimitMinutes||5,r=e.rateLimitCount||5,i=new Date;i.setMinutes(i.getMinutes()-n);const o=mr(Tn(bt,"highScores"),Bn("userId","==",t.uid),Bn("configId","==",e.configId),Bn("createdAt",">",i),$f(r));if((yield Xn(o)).size>=r)throw new ld("Please wait a few minutes before submitting another score.","RATE_LIMIT_EXCEEDED")}),GYe=t=>te(nt,null,function*(){const e=an(bt,"userGameConfigs",t);if(!(yield si(e)).exists())throw new ld("Game configuration not found.","CONFIG_NOT_FOUND")}),qYe=(t,e,n,r)=>te(nt,null,function*(){const{gameType:i,configId:o}=r;if(!o)throw new ld("Missing game configuration ID","MISSING_CONFIG_ID");if(!n)throw new ld("Must be logged in to save high score","NOT_AUTHENTICATED");if(typeof t!="number"||isNaN(t)||t<0)throw new ld("Invalid score value detected","INVALID_SCORE");yield GYe(o),yield HYe(n,r);const s=yield $Ye(n,e),a={userId:n.uid,playerName:s,score:t,configId:o,gameType:i,createdAt:bo()},l=yield yc(Tn(bt,"highScores"),a);return se(j({id:l.id},a),{createdAt:new Date})});class KYe{constructor(e){this.config=e}loadScores(){return te(this,null,function*(){return VYe(this.config)})}checkScore(e,n){return WYe(e,n,this.config.scoringSystem)}saveScore(e,n,r){return te(this,null,function*(){return qYe(e,n,r,this.config)})}}const Cte=t=>{const{currentUser:e}=Dr(),n=co(),[r,i]=T.useState([]),[o,s]=T.useState(!1),[a,l]=T.useState(!1),[c,u]=T.useState(!1),[d,f]=T.useState(!1),[p,b]=T.useState(null),v=new KYe({gameType:t.gameType,configId:t.configId,scoringSystem:t.scoringSystem,enableRateLimit:t.enableRateLimit,rateLimitCount:t.rateLimitCount,rateLimitMinutes:t.rateLimitMinutes}),m=T.useCallback(()=>te(nt,null,function*(){if(t.configId){s(!0),b(null);try{const S=yield v.loadScores();i(S)}catch(S){const P=S instanceof ld?S.message:"Failed to load high scores";b(P),console.error("Error loading high scores:",S)}finally{s(!1)}}}),[t.configId,t.gameType]),g=T.useCallback(S=>v.checkScore(S,r),[r]),x=T.useCallback((S,P)=>te(nt,null,function*(){if(!t.configId){n({title:"Error",description:"Cannot save high score: missing game configuration",status:"error",duration:3e3});return}l(!0),b(null);const I=g(S);u(I),I&&t.onHighScoreProcessStart&&t.onHighScoreProcessStart();try{I&&(yield v.saveScore(S,P,e),yield m(),n({title:"High Score Saved!",description:`Congratulations! Your score of ${S} has been recorded.`,status:"success",duration:5e3})),f(!0)}catch(M){const D=M instanceof ld?M.message:"Failed to save high score";if(b(D),M instanceof ld){let E="Error Saving Score",_=M.message;switch(M.code){case"RATE_LIMIT_EXCEEDED":E="Too Many Attempts";break;case"NOT_AUTHENTICATED":E="Authentication Required";break;case"CONFIG_NOT_FOUND":E="Configuration Error";break;case"INVALID_SCORE":E="Invalid Score";break}n({title:E,description:_,status:"error",duration:5e3})}else n({title:"Error Saving Score",description:"Could not save your high score. Please try again.",status:"error",duration:3e3});console.error("Error saving high score:",M)}finally{l(!1),t.onHighScoreProcessComplete&&t.onHighScoreProcessComplete()}}),[t.configId,t.onHighScoreProcessStart,t.onHighScoreProcessComplete,e,g,m,n]),w=T.useCallback(()=>{b(null)},[]);return T.useEffect(()=>{m()},[m]),{highScores:r,isLoading:o,isSubmittingScore:a,isNewHighScore:c,showHighScoreModal:d,error:p,loadHighScores:m,checkHighScore:g,saveHighScore:x,setShowHighScoreModal:f,clearError:w}},pF=({isOpen:t,onClose:e,score:n,isNewHighScore:r,highScores:i,scoringSystem:o,gameTitle:s,timeElapsed:a,additionalStats:l,isLoading:c=!1,isSubmittingScore:u=!1,error:d,onClearError:f,onPlayAgain:p,customActions:b,maxScoresToShow:v=5,showNavigation:m=!0})=>{const g=Pr(),{isTeacher:x,isStudent:w}=Dr(),S=E=>{const _=Math.floor(E/60),A=E%60;return`${_}:${A.toString().padStart(2,"0")}`},P=E=>o==="miss-based"?E===1?"1 miss":`${E} misses`:`${E} points`,I=(E,_)=>_===0?"gold":_===1?"gray":_===2?"orange":"blue",M=()=>{e(),g(x?"/teacher":w?"/student":"/")},D=()=>{f&&f(),e()};return h.jsxs($c,{isOpen:t,onClose:D,size:"lg",isCentered:!0,children:[h.jsx(qc,{}),h.jsxs(Hc,{children:[h.jsx(Gc,{textAlign:"center",children:u?h.jsxs(h.Fragment,{children:[h.jsx(Fa,{size:"sm",mr:2}),"Saving Score..."]}):r?"🏆 New High Score!":"🎉 Game Complete!"}),h.jsx(Yc,{}),h.jsx(Kc,{children:h.jsxs(Kt,{spacing:6,children:[d&&h.jsxs(bi,{status:"error",borderRadius:"md",children:[h.jsx(xi,{}),h.jsx(bl,{children:d})]}),h.jsxs(Et,{textAlign:"center",children:[h.jsx(ft,{fontSize:"lg",mb:2,children:"Your Score:"}),h.jsx(lo,{fontSize:"xl",px:4,py:2,borderRadius:"lg",colorScheme:r?"gold":"blue",children:P(n)})]}),(a||l)&&h.jsxs(h.Fragment,{children:[h.jsx(md,{}),h.jsxs(Et,{w:"full",children:[h.jsx(zr,{size:"sm",mb:3,textAlign:"center",children:"Game Stats"}),h.jsxs(Kt,{spacing:2,children:[a&&h.jsxs(Ln,{w:"full",justify:"space-between",children:[h.jsx(ft,{children:"Time Elapsed:"}),h.jsx(lo,{colorScheme:"green",children:S(a)})]}),l==null?void 0:l.map((E,_)=>h.jsxs(Ln,{w:"full",justify:"space-between",children:[h.jsxs(ft,{children:[E.label,":"]}),h.jsx(lo,{colorScheme:E.colorScheme||"blue",children:E.value})]},_))]})]})]}),!c&&i.length>0&&h.jsxs(h.Fragment,{children:[h.jsx(md,{}),h.jsxs(Et,{w:"full",children:[h.jsx(zr,{size:"sm",mb:3,textAlign:"center",children:o==="miss-based"?"Best Scores (Fewest Misses)":"High Scores"}),h.jsx(Kt,{spacing:2,children:i.slice(0,v).map((E,_)=>h.jsxs(Ln,{w:"full",justify:"space-between",p:3,bg:_%2===0?"gray.50":"white",borderRadius:"md",border:E.userId&&E.score===n?"2px solid":"1px solid",borderColor:E.userId&&E.score===n?"gold.300":"gray.200",children:[h.jsxs(Ln,{children:[h.jsxs(ft,{fontWeight:"bold",minW:"30px",children:["#",_+1]}),h.jsx(ft,{children:E.playerName})]}),h.jsx(lo,{colorScheme:I(E.score,_),children:P(E.score)})]},E.id))})]})]}),c&&h.jsxs(Et,{textAlign:"center",children:[h.jsx(Fa,{size:"lg"}),h.jsx(ft,{mt:2,children:"Loading high scores..."})]})]})}),h.jsx(ov,{children:h.jsxs(Kt,{w:"full",spacing:3,children:[h.jsxs(Ln,{spacing:3,w:"full",justify:"center",children:[p&&h.jsx(pn,{colorScheme:"blue",onClick:p,leftIcon:h.jsx(wee,{}),isDisabled:u,children:"Play Again"}),b==null?void 0:b.map((E,_)=>h.jsx(pn,{colorScheme:E.colorScheme||"gray",variant:E.variant||"solid",onClick:E.onClick,isDisabled:u,children:E.label},_))]}),m&&h.jsxs(Ln,{spacing:3,children:[h.jsx(pn,{variant:"outline",onClick:D,isDisabled:u,children:"Close"}),h.jsx(pn,{variant:"ghost",onClick:M,isDisabled:u,children:x?"Back to Teacher Dashboard":w?"Back to Student Dashboard":"Back to Home"})]})]})})]})]})},Ate=({playerName:t,onGameComplete:e,config:n,onHighScoreProcessStart:r,onHighScoreProcessComplete:i})=>{var z;const{currentUser:o,isTeacher:s,isStudent:a}=Dr(),l=Pr(),[c,u]=T.useState(0),[d,f]=T.useState(n.gameTime),[p,b]=T.useState(!1),[v,m]=T.useState(0),[g,x]=T.useState(!1),[w,S]=T.useState(!1),[P,I]=T.useState(3),M=T.useRef(null),D=T.useRef(null),E=T.useRef(null),_=co(),{highScores:A,isNewHighScore:R,showHighScoreModal:F,setShowHighScoreModal:L,saveHighScore:N,isSubmittingScore:U}=Cte({gameType:"whack-a-mole",configId:n.id||"default",scoringSystem:"points-based",enableRateLimit:!0,onHighScoreProcessStart:r,onHighScoreProcessComplete:i});T.useEffect(()=>(p&&d>0&&!g?M.current=setTimeout(()=>{f(d-1)},1e3):d===0&&p&&B(),()=>{M.current&&clearTimeout(M.current)}),[d,p,g]),T.useEffect(()=>(w&&P>0?D.current=setTimeout(()=>{I(P-1)},1e3):P===0&&w&&(S(!1),b(!0),x(!1)),()=>{D.current&&clearTimeout(D.current)}),[w,P]);const $=()=>{u(0),f(n.gameTime),m(0),x(!1),b(!1),S(!0),I(3),E.current&&E.current.reset()},B=()=>{x(!0),b(!1),M.current&&clearInterval(M.current),E.current&&E.current.reset(),e(c),n.id&&o?N(c,t):o||_({title:"Game Complete!",description:`Final Score: ${c} points. Sign in to save high scores!`,status:"info",duration:5e3})},H=(G,K)=>{if(!(!p||g))if(K){const Z=v+1;let ee=n.pointsPerHit;Z>=n.bonusThreshold&&(ee+=n.bonusPoints,_({title:"Bonus!",description:`+${n.bonusPoints} bonus points!`,status:"success",duration:1e3})),u(V=>V+ee),m(Z)}else u(Z=>Math.max(0,Z-n.penaltyPoints)),m(0),_({title:"Oops!",description:`Wrong word! "${G}" -${n.penaltyPoints} points`,status:"error",duration:1e3})},q=()=>{L(!1),l(s?"/teacher":a?"/student":"/")};return h.jsxs(Et,{width:"100%",height:"100vh",position:"relative",children:[h.jsx(sd,{gameTitle:"Whack-a-Mole",variant:"compact"}),h.jsxs(Et,{position:"absolute",top:0,left:0,right:0,zIndex:1,p:4,display:"flex",justifyContent:"space-between",children:[h.jsx(Et,{bg:"transparent",p:4,borderRadius:"md",maxWidth:"400px",children:h.jsx(ft,{fontSize:"2xl",fontWeight:"bold",color:"#001f3f",fontFamily:"'Comic Neue', cursive",textShadow:"1px 1px 2px rgba(255,255,255,0.8)",isTruncated:!0,children:n.title})}),h.jsxs(Ln,{justify:"space-between",bg:"transparent",p:4,borderRadius:"md",width:"300px",children:[h.jsxs(ft,{fontSize:"2xl",fontWeight:"bold",color:"#001f3f",fontFamily:"'Comic Neue', cursive",textShadow:"1px 1px 2px rgba(255,255,255,0.8)",children:["Score: ",c]}),h.jsxs(ft,{fontSize:"2xl",fontWeight:"bold",color:"#001f3f",fontFamily:"'Comic Neue', cursive",textShadow:"1px 1px 2px rgba(255,255,255,0.8)",children:["Time: ",d,"s"]})]})]}),h.jsx(zYe,{ref:E,onMoleHit:H,config:n,gameActive:p&&!g}),w&&h.jsx(cu,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10,bg:"rgba(255, 255, 255, 0.95)",borderRadius:"full",width:"200px",height:"200px",border:"8px solid #001f3f",boxShadow:"0 0 50px rgba(0, 31, 63, 0.3)",children:h.jsx(ft,{fontSize:"8xl",fontWeight:"bold",color:"#001f3f",fontFamily:"'Comic Neue', cursive",textShadow:"2px 2px 4px rgba(255,255,255,0.8)",lineHeight:"1",children:P})}),(!p&&!w||g)&&!F&&h.jsx(Et,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:2,bg:"white",p:6,borderRadius:"md",boxShadow:"xl",textAlign:"center",fontFamily:"'Comic Neue', cursive",children:h.jsxs(Kt,{spacing:4,children:[h.jsx(zr,{size:"lg",fontFamily:"'Comic Neue', cursive",children:g?"Game Over!":"Whack-a-Mole"}),!g&&h.jsx(Kt,{spacing:2,children:n.instructions?h.jsx(ft,{fontFamily:"'Comic Neue', cursive",children:n.instructions}):h.jsxs(h.Fragment,{children:[h.jsxs(ft,{fontFamily:"'Comic Neue', cursive",children:["Select moles displaying words from ",n.categories[0].title,"!"]}),h.jsxs(ft,{fontSize:"sm",color:"gray.600",fontFamily:"'Comic Neue', cursive",children:["Words from ",n.categories[0].title," will earn you points. Other words will result in a penalty."]})]})}),g&&h.jsxs(ft,{fontSize:"xl",fontFamily:"'Comic Neue', cursive",children:["Final Score: ",c]}),h.jsx(pn,{colorScheme:"blue",size:"lg",onClick:$,fontFamily:"'Comic Neue', cursive",fontWeight:"bold",children:g?"Play Again":"Start Game"})]})}),h.jsx(pF,{isOpen:F,onClose:q,score:c,isNewHighScore:R,highScores:A,scoringSystem:"points-based",gameTitle:"Whack-a-Mole",additionalStats:[{label:"Game Time",value:`${n.gameTime}s`,colorScheme:"blue"},{label:"Category",value:((z=n.categories[0])==null?void 0:z.title)||"Words",colorScheme:"green"},{label:"Max Consecutive",value:v,colorScheme:"purple"}],isSubmittingScore:U,onPlayAgain:$,customActions:[{label:"Back to Dashboard",onClick:q,colorScheme:"gray",variant:"outline"}]})]})},YYe={primaryColors:["#FF6B6B","#FFD93D","#6BCF7F","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD"],pastel:["#FFB3BA","#FFDFBA","#FFFFBA","#BAFFC9","#BAE1FF","#E1BAFF","#FFBADB","#C9BAFF"],bright:["#FF0000","#FF8800","#FFFF00","#88FF00","#00FF00","#00FF88","#00FFFF","#0088FF"],patriotic:["#DC143C","#FFFFFF","#000080","#FF0000","#87CEEB","#4169E1","#C0C0C0","#191970"],greenShades:["#90EE90","#32CD32","#228B22","#006400","#2E8B57","#6B8E23","#00FF7F","#ADFF2F"],desert:["#F4A460","#D2B48C","#F5F5DC","#A0522D","#B7410E","#FF8C00","#E2725B","#C3B091"],ocean:["#ADD8E6","#87CEEB","#00BFFF","#40E0D0","#008080","#00FFFF","#4682B4"],sunset:["#FFC0CB","#FF7F50","#FFA500","#FFD700","#FFFF00","#FF6347","#DDA0DD","#E6E6FA"],custom:["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4"]},XYe=t=>{const e=t.replace("#",""),n=parseInt(e.substr(0,2),16)/255,r=parseInt(e.substr(2,2),16)/255,i=parseInt(e.substr(4,2),16)/255,o=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),s=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4),a=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4);return .2126*o+.7152*s+.0722*a},QYe=t=>XYe(t)<.5?"#FFFFFF":"#000000",Tte=(t,e)=>{const n=360/e;return t*n+n/2},ZYe=(t,e)=>{var i,o;console.log("=== POINTER DETECTION ==="),console.log(`Current rotation: ${t.toFixed(1)}°`),console.log("Looking for segment closest to 180° (9 o'clock pointer)"),console.log(`Using ${e.length} segments for detection`);let n=0,r=360;for(let s=0;s<e.length;s++){const a=Tte(s,e.length),l=(a+t)%360,c=Math.min(Math.abs(l-180),360-Math.abs(l-180));console.log(`${s}: "${(i=e[s])==null?void 0:i.text}" - base center: ${a.toFixed(1)}°, after rotation: ${l.toFixed(1)}°, distance to 180°: ${c.toFixed(1)}°`),c<r&&(r=c,n=s)}return console.log(`Closest segment: "${(o=e[n])==null?void 0:o.text}" (index ${n}) with distance ${r.toFixed(1)}°`),console.log("========================"),n},oW=(t,e="primaryColors",n)=>{const r=e==="custom"&&n?n:YYe[e];return t.map((i,o)=>se(j({},i),{color:r[o%r.length]}))},JYe=t=>({x:130,y:240,segmentIndex:t}),eXe=t=>{const e=[],n=(r,i={})=>{var o;if(r.nodeType===3){const s=r.textContent||"";s.trim()&&e.push(j({text:s},i))}else if(r.nodeType===1){const s=r,a=j({},i);switch((o=s.tagName)==null?void 0:o.toLowerCase()){case"b":case"strong":a.bold=!0;break;case"i":case"em":a.italic=!0;break;case"u":a.underline=!0;break;case"sup":a.superscript=!0;break;case"sub":a.subscript=!0;break}for(const l of Array.from(s.childNodes))n(l,a)}};try{const i=new DOMParser().parseFromString(t,"text/html");for(const o of Array.from(i.body.childNodes))n(o)}catch(r){console.error("Error parsing HTML:",r),e.push({text:t})}return e},tXe=()=>{const t=T.useRef(null),e=T.useRef(null);T.useEffect(()=>{const s=()=>te(nt,null,function*(){if(!t.current)try{t.current=new(window.AudioContext||window.webkitAudioContext),t.current.state==="suspended"&&(yield t.current.resume()),console.log("Audio context initialized and ready")}catch(a){console.error("Failed to initialize audio context:",a)}});return document.addEventListener("click",s,{once:!0}),()=>{document.removeEventListener("click",s),e.current&&clearInterval(e.current)}},[]);const n=()=>{if(!t.current||t.current.state!=="running"){console.log("Audio context not ready for click sound");return}try{const s=t.current,a=s.createOscillator(),l=s.createGain();a.type="square",a.frequency.setValueAtTime(800,s.currentTime),l.gain.setValueAtTime(0,s.currentTime),l.gain.linearRampToValueAtTime(.1,s.currentTime+.001),l.gain.exponentialRampToValueAtTime(.001,s.currentTime+.05),a.connect(l),l.connect(s.destination),a.start(s.currentTime),a.stop(s.currentTime+.05)}catch(s){console.error("Error generating click sound:",s)}};return{generateClick:n,startClickingSound:(s,a)=>{if(!t.current)return;const l=Date.now(),c=50,u=300;let d;switch(a){case 2:d=.65;break;case 3:d=.7;break;case 4:d=.75;break;case 5:d=.85;break;case 6:d=.86;break;case 7:d=.87;break;case 8:d=.88;break;case 9:d=.89;break;default:d=.95;break}let f=c;const p=()=>{const b=Date.now()-l,v=Math.min(b/s,1);if(v<d){const m=1-Math.pow(1-v,3);f=c+(u-c)*m,n(),e.current=setTimeout(p,f)}};p()},ensureAudioReady:()=>te(nt,null,function*(){if(!t.current)try{t.current=new(window.AudioContext||window.webkitAudioContext)}catch(s){return console.error("Failed to create audio context:",s),!1}if(t.current&&t.current.state==="suspended")try{return yield t.current.resume(),console.log("Audio context resumed"),!0}catch(s){return console.error("Failed to resume audio context:",s),!1}return!0}),stopClickingSounds:()=>{e.current&&(clearTimeout(e.current),e.current=null)}}},nXe=(t,e)=>{const[n,r]=T.useState({items:[],selected:null,spinning:!1,rotation:0,spinCount:0,gameComplete:!1,selectionHistory:[],isZoomed:!1,zoomTarget:{x:0,y:0,segmentIndex:0}}),i=tXe();T.useEffect(()=>{var c;if(e&&e.items){const u=e.items;console.log("🎮 [useGameLogic] Raw config items received:",u),console.log("🎮 [useGameLogic] First item details:",u[0]),console.log("🎮 [useGameLogic] First item has content field:",!!((c=u[0])!=null&&c.content));const d=e.wheelTheme||"primaryColors",f=e.customColors,p=oW(u,d,f);console.log("🎮 [useGameLogic] Items after color processing:",p),console.log("🎮 [useGameLogic] First processed item:",p[0]),r(b=>se(j({},b),{items:p}))}},[e]),T.useEffect(()=>{const c=e.maxSpins||0;c>0&&n.spinCount>=c&&!n.gameComplete&&(r(u=>se(j({},u),{gameComplete:!0})),t(n.spinCount))},[n.spinCount,e,t,n.gameComplete]);const o=()=>te(nt,null,function*(){var M;if(n.items.length<2||n.spinning||n.gameComplete)return;yield i.ensureAudioReady();const c=e.maxSpins||0;if(c>0&&n.spinCount>=c){r(D=>se(j({},D),{gameComplete:!0})),t(n.spinCount);return}r(D=>se(j({},D),{spinning:!0}));const u=n.items,d=5+Math.floor(Math.random()*3),f=3e3;i.startClickingSound(f,u.length);const p=Math.floor(Math.random()*u.length),b=Tte(p,u.length),v=(b+n.rotation)%360;let g=(180-v+360)%360;const x=360*d,w=n.rotation+x+g;console.log("=== SPIN CALCULATION ==="),console.log(`Winner: "${(M=u[p])==null?void 0:M.text}" (index ${p})`),console.log(`Segment center: ${b.toFixed(1)}°`),console.log(`Current position: ${v.toFixed(1)}°`),console.log(`Rotation needed: ${g.toFixed(1)}°`),console.log(`Final rotation: ${w.toFixed(1)}°`),console.log("=======================");const S=Date.now(),P=n.rotation,I=()=>{var R;const D=Date.now()-S,E=Math.min(D/f,1),_=1-Math.pow(1-E,3),A=P+(w-P)*_;if(r(F=>se(j({},F),{rotation:A})),E<1)requestAnimationFrame(I);else{r(U=>se(j({},U),{rotation:w}));const F=ZYe(w,u),L=u[F];console.log("=== SPIN COMPLETE ==="),console.log(`Final winner: "${L==null?void 0:L.text}" (intended: "${(R=u[p])==null?void 0:R.text}")`),console.log(`Final rotation: ${w.toFixed(1)}°`),console.log("=====================");const N=JYe(F);r(U=>se(j({},U),{spinning:!1,selected:L.text,selectionHistory:[...U.selectionHistory,L.text],spinCount:U.spinCount+1,zoomTarget:N})),setTimeout(()=>{r(U=>se(j({},U),{isZoomed:!0}))},500),i.stopClickingSounds()}};requestAnimationFrame(I)}),s=()=>{r(c=>se(j({},c),{isZoomed:!1,zoomTarget:{x:0,y:0,segmentIndex:0}}))},a=()=>{if(!n.selected)return;const c=n.items.filter(d=>d.text!==n.selected),u=n.selectionHistory.includes(n.selected)?n.selectionHistory:[...n.selectionHistory,n.selected];r(d=>se(j({},d),{items:c,selected:null,selectionHistory:u,rotation:0,isZoomed:!1,zoomTarget:{x:0,y:0,segmentIndex:0}}))},l=()=>{if(e&&e.items){const c=e.items,u=e.wheelTheme||"primaryColors",d=e.customColors,f=oW(c,u,d);r({items:f,selected:null,spinning:!1,rotation:0,spinCount:0,gameComplete:!1,selectionHistory:[],isZoomed:!1,zoomTarget:{x:0,y:0,segmentIndex:0}})}i.stopClickingSounds()};return se(j({},n),{spin:o,handleZoomOut:s,removeSelectedItem:a,resetGame:l})},rXe=({items:t,rotation:e,isZoomed:n,zoomTarget:r,spinning:i})=>{const a=360/t.length,l=(u,d,f,p,b,v=18)=>{const m=eXe(u);return h.jsx("text",{x:d,y:f,textAnchor:"middle",dominantBaseline:"middle",fontSize:v,fontWeight:"normal",fontFamily:"'Comic Neue', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif",fill:b,transform:p,children:m.map((g,x)=>{const w={};let S="normal",P="normal",I="'Comic Neue', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif";g.bold&&(S="bold"),g.italic&&(P="italic",w.fontStyle="italic",I="Arial, Helvetica, sans-serif"),g.underline&&(w.textDecoration="underline");let M=v,D=0;const E=x>0?m[x-1]:null,_=E&&(E.superscript||E.subscript);return g.superscript?(M=v*.75,D=_?-v*.3-v*.2:-v*.3):g.subscript?(M=v*.75,D=_?v*.2+v*.3:v*.2):_&&(D=E.superscript?v*.3:-v*.2),h.jsx("tspan",{fontSize:M,fontWeight:S,fontStyle:P,fontFamily:I,dy:D,style:w,children:g.text},x)})})},c=()=>{var p,b;if(t.length===0)return null;console.log("🎨 [WheelRenderer] Rendering items:",t),console.log("🎨 [WheelRenderer] First item:",t[0]),console.log("🎨 [WheelRenderer] First item has content:",!!((p=t[0])!=null&&p.content)),console.log("🎨 [WheelRenderer] First item content value:",(b=t[0])==null?void 0:b.content);const u=n?2.4:1,d=n?240-r.x:0,f=n?240-r.y:0;return h.jsxs(Et,{position:"relative",width:"480px",height:"480px",display:"flex",justifyContent:"center",alignItems:"center",mx:"auto",overflow:"visible",style:{transform:`scale(${u}) translate(${d}px, ${f}px)`,transition:n?"transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94)":"transform 0.6s ease-out"},children:[h.jsxs("svg",{width:480,height:480,style:{transition:i?"none":"transform 0.3s ease",transform:`rotate(${e}deg)`},children:[h.jsx("g",{children:t.map((v,m)=>{const g=a*m,x=g+a,w=a>180?1:0,S=240+220*Math.cos(Math.PI*g/180),P=240+220*Math.sin(Math.PI*g/180),I=240+220*Math.cos(Math.PI*x/180),M=240+220*Math.sin(Math.PI*x/180),D=`M240,240 L${S},${P} A220,220 0 ${w} 1 ${I},${M} Z`,E=g+a/2,_=220*.7,A=240+_*Math.cos(Math.PI*E/180),R=240+_*Math.sin(Math.PI*E/180),F=`rotate(${E+180}, ${A}, ${R})`,L=n&&m===r.segmentIndex,N=QYe(v.color);return h.jsxs("g",{children:[h.jsx("path",{d:D,fill:v.color,stroke:L?"#FFD700":"#fff",strokeWidth:L?"4":"2",filter:L?"drop-shadow(0 0 10px rgba(255, 215, 0, 0.8))":"none"}),v.content?l(v.content,A,R,F,N,18):h.jsx("text",{x:A,y:R,textAnchor:"middle",dominantBaseline:"middle",fontSize:"18",fontWeight:"normal",fontFamily:"'Comic Neue', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif",fill:N,transform:F,children:v.text.length>10?v.text.substring(0,10)+"...":v.text})]},v.id)})}),h.jsx("circle",{cx:240,cy:240,r:20,fill:"#9CA3AF"}),h.jsx("circle",{cx:240,cy:240,r:12,fill:"#fff"})]}),h.jsx(Et,{position:"absolute",top:"50%",left:"50%",transform:"translate(-254px, -40px)",zIndex:10,children:h.jsx(Et,{transformOrigin:"12.5px 40px",sx:{animation:i?"pointerBounce 0.1s ease-in-out infinite alternate":"none","@keyframes pointerBounce":{"0%":{transform:"rotate(86deg)"},"100%":{transform:"rotate(90deg)"}},transform:i?void 0:"rotate(90deg)"},children:h.jsxs("svg",{width:"25",height:"50",viewBox:"0 0 25 50",children:[h.jsx("path",{d:"M12.5 45 C6 45, 2 37, 2 28 C2 18, 8 8, 12.5 8 C17 8, 23 18, 23 28 C23 37, 19 45, 12.5 45 Z",fill:"#E2E8F0",stroke:"#2D3748",strokeWidth:"1"}),h.jsx("path",{d:"M12.5 10 C9 10, 5 18, 5 28 C5 35, 8 42, 12.5 42 C17 42, 20 35, 20 28 C20 18, 16 10, 12.5 10 Z",fill:"#F7FAFC"}),h.jsx("circle",{cx:"12.5",cy:"40",r:"3",fill:"#2D3748"})]})})})]})};return h.jsx(Et,{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",overflow:n?"hidden":"visible",transition:"all 0.3s ease",children:c()})},iXe=({isZoomed:t,selected:e,items:n,config:r,onZoomOut:i,onRemoveSelected:o})=>t?h.jsx(h.Fragment,{children:h.jsxs(Kt,{position:"absolute",top:"80px",left:"-155px",spacing:3,zIndex:1e3,children:[h.jsx(pn,{onClick:i,bg:"#4ECDC4",color:"white",_hover:{bg:"#45B7D1"},_active:{bg:"#3A9BC1"},size:"md",fontSize:"lg",px:6,py:4,borderRadius:"full",shadow:"lg",children:"🔍 ZOOM OUT"}),r.removeOnSelect&&e&&h.jsx(pn,{onClick:o,bg:"#F5F5DC",color:"#8B4513",_hover:{bg:"#F0E68C"},_active:{bg:"#DDD6C1"},size:"md",fontSize:"lg",px:6,py:4,borderRadius:"full",shadow:"lg",leftIcon:h.jsx("span",{children:"🗑️"}),children:"REMOVE"})]})}):null,oXe=({isZoomed:t,spinning:e,gameComplete:n,itemsLength:r,spinCount:i,onSpin:o,onReset:s})=>t?null:h.jsxs(Kt,{spacing:4,align:"center",justify:"center",w:"100%",children:[h.jsx(pn,{onClick:o,isDisabled:e||r<2||n,bg:"#F5F5DC",color:"#8B4513",_hover:{bg:"#F0E68C"},_active:{bg:"#DDD6C1"},size:"lg",fontSize:"xl",px:8,py:6,isLoading:e,loadingText:"SPINNING...",children:"🎯 SPIN THE WHEEL!"}),n&&h.jsxs(Kt,{spacing:2,children:[h.jsx(ft,{fontSize:"lg",fontWeight:"bold",color:"blue.600",children:"Game Complete! 🎊"}),h.jsxs(ft,{children:["Total spins: ",i]}),h.jsx(pn,{onClick:s,colorScheme:"blue",variant:"outline",children:"🔄 Play Again"})]})]}),Mte=({onGameComplete:t,config:e})=>{const n=nXe(t,e);return n.items.length===0?h.jsx(cu,{p:8,children:h.jsx(ft,{children:"No items configured for this spinner wheel."})}):h.jsxs(Et,{position:"fixed",top:"0",left:"0",w:"100vw",h:"100vh",bg:"#E6F3FF",display:"flex",flexDirection:"column",zIndex:1,overflow:"auto",children:[h.jsx(sd,{gameTitle:"Spinner Wheel",variant:"compact"}),h.jsx(Et,{flex:"1",display:"flex",justifyContent:"center",alignItems:"center",children:h.jsx(Et,{maxW:"600px",p:6,fontFamily:"'Comic Neue', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif",bg:"#E6F3FF",borderRadius:"xl",position:"relative",marginTop:"auto",marginBottom:"auto",children:h.jsxs(Kt,{spacing:6,children:[!n.isZoomed&&h.jsx(Kt,{spacing:2,textAlign:"center",children:h.jsxs(zr,{size:"lg",color:"blue.600",children:["🎡 ",e.title||"Spinner Wheel"]})}),h.jsxs(Et,{bg:"#E6F3FF",p:6,borderRadius:"xl",shadow:n.isZoomed?"none":"lg",position:"relative",children:[h.jsx(rXe,{items:n.items,rotation:n.rotation,isZoomed:n.isZoomed,zoomTarget:n.zoomTarget,spinning:n.spinning}),h.jsx(iXe,{isZoomed:n.isZoomed,selected:n.selected,items:n.items,config:e,onZoomOut:n.handleZoomOut,onRemoveSelected:n.removeSelectedItem})]}),h.jsx(oXe,{isZoomed:n.isZoomed,spinning:n.spinning,gameComplete:n.gameComplete,itemsLength:n.items.length,spinCount:n.spinCount,onSpin:n.spin,onReset:n.resetGame})]})})})]})},sXe=(t,e)=>{const r=t.replace(/[^\w]/g,"").split("");return aXe([...r],e)},aXe=(t,e)=>{const n=[...t],r=e==="low"?3:e==="medium"?5:8;for(let i=0;i<r;i++)for(let o=n.length-1;o>0;o--){const s=Math.floor(Math.random()*(o+1));[n[o],n[s]]=[n[s],n[o]]}return n},lXe=t=>t.anagrams.map((e,n)=>{const r=sXe(e.original,t.shuffleIntensity);return{id:e.id||n.toString(),original:e.original,definition:e.definition,difficulty:e.difficulty,scrambled:r,currentAnswer:new Array(e.original.length).fill(""),isCompleted:!1}}),sW=t=>t.toLowerCase().replace(/[^\w]/g,""),cXe=(t,e)=>{const n=t.join(""),r=sW(n),i=sW(e);return r===i},uXe=t=>{const e=Math.floor(t/60),n=t%60;return`${e}:${n.toString().padStart(2,"0")}`},dXe=(t,e,n)=>{const[r,i]=T.useState({gameStarted:!1,gameCompleted:!1,currentAnagramIndex:0,anagrams:[],score:0,timeElapsed:0,gameStats:{totalMisses:0,correctAnswers:0,timeElapsed:0,hintsUsed:0},showHint:!1,showDefinition:!1,highScores:[],showHighScoreModal:!1,isNewHighScore:!1,feedback:"",feedbackType:"info",showIncorrectFeedback:!1}),o=T.useRef(null),s=T.useRef(null),a=T.useRef(null);T.useEffect(()=>(l(),()=>{o.current&&clearInterval(o.current),s.current&&clearTimeout(s.current),a.current&&clearTimeout(a.current)}),[t]),T.useEffect(()=>{if(t.enableTextToSpeech&&Hv()&&r.gameStarted&&!r.gameCompleted&&r.anagrams.length>0){const g=r.anagrams[r.currentAnagramIndex];if(g){const x=setTimeout(()=>{bee(g.original)},500);return()=>clearTimeout(x)}}},[r.currentAnagramIndex,r.gameStarted,r.gameCompleted,t.enableTextToSpeech]),T.useEffect(()=>(r.gameStarted&&!r.gameCompleted?o.current=setInterval(()=>{i(g=>se(j({},g),{timeElapsed:g.timeElapsed+1}))},1e3):o.current&&clearInterval(o.current),()=>{o.current&&clearInterval(o.current)}),[r.gameStarted,r.gameCompleted]);const l=T.useCallback(()=>{const g=lXe(t);i(x=>se(j({},x),{anagrams:g,currentAnagramIndex:0,showHint:!1,showDefinition:!1}))},[t]),c=T.useCallback((g,x,w)=>{if(r.gameCompleted)return;const S=r.anagrams[r.currentAnagramIndex];if(!S.isCompleted){if(w==="scrambled"&&g){const P=S.currentAnswer.findIndex(M=>M==="");if(P===-1)return;const I=S.original[P];if(g.toLowerCase()===I.toLowerCase()){i(E=>{const _=[...E.anagrams];return _[E.currentAnagramIndex].currentAnswer[P]=g,_[E.currentAnagramIndex].scrambled[x]="",se(j({},E),{anagrams:_})});const M=[...S.currentAnswer];M[P]=g,M.every(E=>E!=="")&&setTimeout(()=>u(),500)}else i(M=>se(j({},M),{showIncorrectFeedback:!0,gameStats:se(j({},M.gameStats),{totalMisses:M.gameStats.totalMisses+1})})),a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{i(M=>se(j({},M),{showIncorrectFeedback:!1}))},250);return}if(w==="answer"&&g){const P=S.scrambled.findIndex(I=>I==="");P!==-1&&i(I=>{const M=[...I.anagrams];return M[I.currentAnagramIndex].scrambled[P]=g,M[I.currentAnagramIndex].currentAnswer[x]="",se(j({},I),{anagrams:M})})}}},[r.gameCompleted,r.anagrams,r.currentAnagramIndex]),u=T.useCallback(()=>{const g=r.anagrams[r.currentAnagramIndex];cXe(g.currentAnswer,g.original)?(i(w=>{const S=[...w.anagrams];return S[w.currentAnagramIndex].isCompleted=!0,se(j({},w),{anagrams:S,feedback:`Correct! The word is "${g.original}"`,feedbackType:"success",gameStats:se(j({},w.gameStats),{correctAnswers:w.gameStats.correctAnswers+1})})}),r.currentAnagramIndex===r.anagrams.length-1?setTimeout(()=>p(),2e3):setTimeout(()=>{i(w=>se(j({},w),{currentAnagramIndex:w.currentAnagramIndex+1,showHint:!1,showDefinition:!1}))},2e3)):i(w=>se(j({},w),{feedback:"Try again!",feedbackType:"error",gameStats:se(j({},w.gameStats),{totalMisses:w.gameStats.totalMisses+1})})),s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{i(w=>se(j({},w),{feedback:"",feedbackType:"info"}))},3e3)},[r.anagrams,r.currentAnagramIndex]),d=T.useCallback(()=>{r.showHint||i(g=>se(j({},g),{showHint:!0,gameStats:se(j({},g.gameStats),{hintsUsed:g.gameStats.hintsUsed+1})}))},[r.showHint]),f=T.useCallback(()=>{i(g=>se(j({},g),{showDefinition:!g.showDefinition}))},[]),p=T.useCallback(()=>te(nt,null,function*(){const g=r.gameStats.totalMisses;i(x=>se(j({},x),{gameCompleted:!0,score:g,gameStats:se(j({},x.gameStats),{timeElapsed:x.timeElapsed})})),n(g)}),[r.gameStats.totalMisses,r.timeElapsed,e,n]),b=T.useCallback(()=>{i(g=>se(j({},g),{gameStarted:!0,timeElapsed:0}))},[]),v=T.useCallback(()=>{i({gameStarted:!1,gameCompleted:!1,currentAnagramIndex:0,anagrams:[],score:0,timeElapsed:0,gameStats:{totalMisses:0,correctAnswers:0,timeElapsed:0,hintsUsed:0},showHint:!1,showDefinition:!1,highScores:[],showHighScoreModal:!1,isNewHighScore:!1,feedback:"",feedbackType:"info",showIncorrectFeedback:!1}),l()},[l]),m=T.useCallback(()=>{i(g=>se(j({},g),{showHighScoreModal:!1}))},[]);return{gameState:r,handleLetterClick:c,checkAnswer:u,useHint:d,toggleDefinition:f,startGame:b,resetGame:v,closeHighScoreModal:m,formatTime:uXe}},fXe=({config:t,onStartGame:e})=>{const n=Xl("gray.50","gray.900"),r=Xl("white","gray.700");return h.jsx(Et,{minH:"100vh",bg:n,p:6,children:h.jsx(cu,{children:h.jsxs(dc,{maxW:"lg",w:"full",bg:r,children:[h.jsxs(Pv,{textAlign:"center",children:[h.jsx(zr,{size:"xl",color:"purple.500",mb:2,fontFamily:"'Comic Neue', sans-serif",children:"🔤 Anagram Challenge"}),h.jsx(ft,{color:"gray.600",fontSize:"lg",fontFamily:"'Comic Neue', sans-serif",children:"Unscramble the letters to form words!"})]}),h.jsx(uc,{children:h.jsxs(Kt,{spacing:6,children:[h.jsxs(Kt,{spacing:3,textAlign:"center",children:[h.jsx(ft,{fontSize:"md",color:"gray.700",fontFamily:"'Comic Neue', sans-serif",children:h.jsx("strong",{children:"How to Play:"})}),h.jsxs(Kt,{spacing:2,align:"start",fontSize:"sm",color:"gray.600",children:[h.jsx(ft,{fontFamily:"'Comic Neue', sans-serif",children:"• Click letters in the correct order to spell the word"}),h.jsx(ft,{fontFamily:"'Comic Neue', sans-serif",children:"• Letters must be placed sequentially from left to right"}),h.jsx(ft,{fontFamily:"'Comic Neue', sans-serif",children:"• Click answer letters to move them back to scrambled area"}),h.jsx(ft,{fontFamily:"'Comic Neue', sans-serif",children:"• Use hints and definitions if available"}),h.jsx(ft,{fontFamily:"'Comic Neue', sans-serif",children:"• Fewer misses = better score!"})]})]}),h.jsxs(Kt,{spacing:2,textAlign:"center",children:[h.jsx(ft,{fontSize:"sm",color:"gray.600",fontFamily:"'Comic Neue', sans-serif",children:h.jsx("strong",{children:"Game Settings:"})}),h.jsxs(ft,{fontSize:"sm",color:"gray.600",fontFamily:"'Comic Neue', sans-serif",children:["Words: ",t.anagrams.length," | Shuffle: ",t.shuffleIntensity," | Hints: ",t.enableHints?"Enabled":"Disabled"]})]}),h.jsx(pn,{onClick:e,colorScheme:"purple",size:"lg",w:"full",fontSize:"lg",fontFamily:"'Comic Neue', sans-serif",children:"Start Game"})]})})]})})})},hXe=({html:t})=>h.jsx(Et,{dangerouslySetInnerHTML:{__html:t},sx:{"& strong":{fontWeight:"bold"},"& em":{fontStyle:"italic"},"& u":{textDecoration:"underline"},"& sub":{fontSize:"0.8em",verticalAlign:"sub"},"& sup":{fontSize:"0.8em",verticalAlign:"super"},fontFamily:"'Comic Neue', sans-serif"}}),pXe=({gameState:t,config:e,onLetterClick:n,onUseHint:r,onToggleDefinition:i})=>{const o=Xl("white","gray.700"),s=Xl("blue.50","blue.900"),a=Xl("blue.200","blue.600"),l=Xl("green.50","green.900"),c=Xl("green.200","green.600"),u=t.anagrams[t.currentAnagramIndex],d=()=>{u&&bee(u.original)},f=()=>{u!=null&&u.definition&&oUe(u.definition)};return u?h.jsxs(Et,{position:"relative",w:"full",children:[(t.feedback||t.showIncorrectFeedback)&&h.jsx(Et,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,pointerEvents:"none",children:t.showIncorrectFeedback?h.jsx(Et,{bg:"red.500",color:"white",borderRadius:"full",w:"80px",h:"80px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"3xl",fontWeight:"bold",fontFamily:"'Comic Neue', sans-serif",boxShadow:"lg",animation:"pulse 0.25s ease-in-out",children:"✕"}):h.jsxs(bi,{status:t.feedbackType,borderRadius:"md",w:"auto",boxShadow:"lg",fontFamily:"'Comic Neue', sans-serif",children:[h.jsx(xi,{}),t.feedback]})}),h.jsx(Kt,{spacing:6,w:"full",children:h.jsx(dc,{w:"full",bg:o,children:h.jsx(uc,{p:6,children:h.jsxs(Kt,{spacing:8,children:[h.jsxs(Kt,{spacing:3,w:"full",children:[h.jsx(zr,{size:"sm",color:"gray.600",fontFamily:"'Comic Neue', sans-serif",children:"Scrambled Letters"}),h.jsx(fc,{wrap:"wrap",gap:2,justify:"center",minH:"60px",p:4,bg:s,border:"2px dashed",borderColor:a,borderRadius:"md",children:u.scrambled.map((p,b)=>h.jsx(Et,{w:"50px",h:"50px",border:"2px solid",borderColor:p?"blue.300":"gray.300",borderRadius:"md",display:"flex",alignItems:"center",justifyContent:"center",bg:p?"white":"gray.100",cursor:p?"pointer":"default",onClick:()=>n(p,b,"scrambled"),_hover:p?{transform:"translateY(-2px)",boxShadow:"md"}:{},transition:"all 0.2s",fontSize:"xl",fontWeight:"bold",fontFamily:"'Comic Neue', sans-serif",color:p?"blue.600":"gray.400",children:p},b))})]}),h.jsxs(Kt,{spacing:3,w:"full",children:[h.jsx(zr,{size:"sm",color:"gray.600",fontFamily:"'Comic Neue', sans-serif",children:"Your Answer"}),h.jsx(fc,{wrap:"wrap",gap:2,justify:"center",minH:"60px",p:4,bg:l,border:"2px dashed",borderColor:c,borderRadius:"md",children:u.currentAnswer.map((p,b)=>h.jsx(Et,{w:"50px",h:"50px",border:"2px solid",borderColor:p?"green.300":"gray.300",borderRadius:"md",display:"flex",alignItems:"center",justifyContent:"center",bg:p?"white":"gray.100",cursor:p?"pointer":"default",onClick:()=>n(p,b,"answer"),_hover:p?{transform:"translateY(-2px)",boxShadow:"md"}:{},transition:"all 0.2s",fontSize:"xl",fontWeight:"bold",fontFamily:"'Comic Neue', sans-serif",color:p?"green.600":"gray.400",children:p},b))})]}),h.jsxs(Kt,{spacing:3,w:"full",children:[h.jsxs(Ln,{spacing:4,wrap:"wrap",justify:"center",children:[e.enableHints&&h.jsx(pn,{onClick:r,colorScheme:"cyan",variant:"outline",size:"sm",fontFamily:"'Comic Neue', sans-serif",isDisabled:t.showHint,children:t.showHint?"🔍 Hint Shown":"🔍 Show Hint"}),e.showDefinitions&&u.definition&&h.jsx(pn,{onClick:i,colorScheme:"blue",variant:"outline",size:"sm",fontFamily:"'Comic Neue', sans-serif",leftIcon:t.showDefinition?h.jsx(Gv,{}):h.jsx(pUe,{}),children:"Definition"}),e.enableTextToSpeech&&Hv()&&h.jsxs(h.Fragment,{children:[h.jsx(pn,{onClick:d,colorScheme:"purple",variant:"outline",size:"sm",fontFamily:"'Comic Neue', sans-serif",children:"🗣️ Speak Word"}),e.showDefinitions&&u.definition&&h.jsx(pn,{onClick:f,colorScheme:"orange",variant:"outline",size:"sm",fontFamily:"'Comic Neue', sans-serif",children:"📚 Speak Definition"})]})]}),e.enableHints&&h.jsx(uC,{in:t.showHint,children:h.jsxs(bi,{status:"info",borderRadius:"md",fontFamily:"'Comic Neue', sans-serif",children:[h.jsx(xi,{}),h.jsxs(ft,{fontSize:"sm",children:["💡 First letter: ",h.jsx("strong",{children:u.original[0]})]})]})}),e.showDefinitions&&u.definition&&h.jsx(uC,{in:t.showDefinition,children:h.jsxs(bi,{status:"info",borderRadius:"md",fontFamily:"'Comic Neue', sans-serif",children:[h.jsx(xi,{}),h.jsxs(Et,{fontSize:"sm",children:[h.jsx(ft,{as:"span",fontWeight:"bold",children:"📚 Definition:"})," ",h.jsx(hXe,{html:u.definition})]})]})})]})]})})})})]}):null},mXe=({gameState:t,formatTime:e,onResetGame:n})=>{const r=Xl("gray.50","gray.900"),i=Xl("white","gray.700");return h.jsx(Et,{minH:"100vh",bg:r,p:6,children:h.jsx(cu,{children:h.jsxs(dc,{maxW:"lg",w:"full",bg:i,children:[h.jsx(Pv,{textAlign:"center",children:h.jsx(zr,{size:"xl",color:"green.500",mb:2,fontFamily:"'Comic Neue', sans-serif",children:"🎉 Game Complete!"})}),h.jsx(uc,{children:h.jsxs(Kt,{spacing:6,children:[h.jsxs(hC,{templateColumns:"1fr 1fr",gap:6,w:"full",children:[h.jsxs(Fy,{textAlign:"center",children:[h.jsx(Ny,{fontFamily:"'Comic Neue', sans-serif",children:"Total Misses"}),h.jsx(Ly,{color:"purple.500",fontSize:"3xl",fontFamily:"'Comic Neue', sans-serif",children:t.score}),h.jsx(Oy,{fontFamily:"'Comic Neue', sans-serif",children:"Fewer misses = better score!"})]}),h.jsxs(Fy,{textAlign:"center",children:[h.jsx(Ny,{fontFamily:"'Comic Neue', sans-serif",children:"Time"}),h.jsx(Ly,{color:"orange.500",fontSize:"3xl",fontFamily:"'Comic Neue', sans-serif",children:e(t.timeElapsed)}),h.jsx(Oy,{fontFamily:"'Comic Neue', sans-serif",children:"Total time"})]})]}),h.jsxs(hC,{templateColumns:"1fr 1fr",gap:6,w:"full",children:[h.jsxs(Fy,{textAlign:"center",children:[h.jsx(Ny,{fontFamily:"'Comic Neue', sans-serif",children:"Correct"}),h.jsxs(Ly,{color:"green.500",fontSize:"2xl",fontFamily:"'Comic Neue', sans-serif",children:[t.gameStats.correctAnswers," / ",t.anagrams.length]}),h.jsx(Oy,{fontFamily:"'Comic Neue', sans-serif",children:"Words solved"})]}),h.jsxs(Fy,{textAlign:"center",children:[h.jsx(Ny,{fontFamily:"'Comic Neue', sans-serif",children:"Accuracy"}),h.jsxs(Ly,{color:"blue.500",fontSize:"2xl",fontFamily:"'Comic Neue', sans-serif",children:[t.gameStats.totalMisses+t.gameStats.correctAnswers>0?Math.round(t.gameStats.correctAnswers/(t.gameStats.totalMisses+t.gameStats.correctAnswers)*100):100,"%"]}),h.jsx(Oy,{fontFamily:"'Comic Neue', sans-serif",children:"Success rate"})]})]}),h.jsx(Ln,{spacing:4,w:"full",justify:"center",children:h.jsx(pn,{onClick:n,colorScheme:"purple",size:"lg",leftIcon:h.jsx(wee,{}),fontFamily:"'Comic Neue', sans-serif",children:"Play Again"})})]})})]})})})},gXe=({playerName:t,onGameComplete:e,config:n})=>{const r=dXe(n,t,e),{gameState:i}=r;return i.gameStarted?i.gameCompleted?h.jsxs(Et,{w:"100%",minH:"100vh",display:"flex",flexDirection:"column",children:[h.jsx(sd,{gameTitle:"Anagram",variant:"compact"}),h.jsx(Et,{flex:1,overflow:"auto",children:h.jsx(mXe,{gameState:i,onResetGame:r.resetGame,formatTime:r.formatTime})})]}):h.jsxs(Et,{w:"100%",minH:"100vh",display:"flex",flexDirection:"column",children:[h.jsx(sd,{gameTitle:"Anagram",variant:"compact"}),h.jsx(Et,{flex:1,overflow:"auto",children:h.jsx(pXe,{gameState:i,config:n,onLetterClick:r.handleLetterClick,onUseHint:r.useHint,onToggleDefinition:r.toggleDefinition})})]}):h.jsxs(Et,{w:"100%",minH:"100vh",display:"flex",flexDirection:"column",children:[h.jsx(sd,{gameTitle:"Anagram",variant:"compact"}),h.jsx(Et,{flex:1,overflow:"auto",children:h.jsx(fXe,{config:n,onStartGame:r.startGame})})]})},Pte=({config:t,playerName:e,onGameComplete:n})=>t.type!=="anagram"?h.jsx("div",{children:"Error: Invalid game configuration"}):h.jsx(gXe,{config:t,playerName:e,onGameComplete:n}),vXe=({anagram:t,onComplete:e,onHintUsed:n,showDefinition:r,enableHints:i,enableTextToSpeech:o=!1,correctFeedbackDuration:s="momentary"})=>{const[a,l]=T.useState([]),[c,u]=T.useState(0),[d,f]=T.useState(0),[p,b]=T.useState(null),[v,m]=T.useState(!1),[g,x]=T.useState(!1),[w,S]=T.useState(!1),[P,I]=T.useState(null),[M,D]=T.useState(new Set),E=T.useRef(null),_=T.useRef(new Map),[A,R]=T.useState(null),[F,L]=T.useState(!1),[N,U]=T.useState({x:0,y:0}),[$,B]=T.useState(null);T.useEffect(()=>(z(),()=>{_.current.forEach(Be=>clearTimeout(Be)),_.current.clear()}),[t.id]),T.useEffect(()=>{if(F){const Be=de=>{U({x:de.clientX,y:de.clientY}),H(de.clientX)};return document.addEventListener("mousemove",Be),()=>document.removeEventListener("mousemove",Be)}else B(null)},[F]),T.useEffect(()=>{const Be=de=>{de.key==="Escape"&&F&&A&&(R(null),L(!1),B(null))};if(F)return document.addEventListener("keydown",Be),()=>document.removeEventListener("keydown",Be)},[F,A]);const H=Be=>{const de=E.current;if(!de)return;const me=de.getBoundingClientRect();if(Be<me.left||Be>me.right){B(null);return}const ie=V(Be,de);B(ie)},q=(Be,de,me)=>{const ie=t.original.trim().split(/\s+/);return de>=0&&de<ie.length?ie[de]===Be.text:!1},z=()=>{_.current.forEach(ie=>clearTimeout(ie)),_.current.clear(),D(new Set);const me=[...t.original.trim().split(/\s+/).map((ie,ae)=>({id:`word-${ae}`,text:ie,originalIndex:ae,currentIndex:ae,isCorrect:!1}))];for(let ie=me.length-1;ie>0;ie--){const ae=Math.floor(Math.random()*(ie+1));[me[ie],me[ae]]=[me[ae],me[ie]],me[ie].currentIndex=ie,me[ae].currentIndex=ae}l(me),u(0),f(0),b(null),m(!1),x(!1),S(!1),I(null),R(null),L(!1),B(null)},G=()=>{v||(m(!0),b(Date.now()))},K=Be=>{const de=_.current.get(Be);if(de&&clearTimeout(de),D(me=>new Set([...me,Be])),s==="momentary"){const me=setTimeout(()=>{D(ie=>{const ae=new Set(ie);return ae.delete(Be),ae}),_.current.delete(Be)},1e3);_.current.set(Be,me)}},Z=(Be,de)=>{de.stopPropagation(),G(),!F&&!g?(R(Be),L(!0),U({x:de.clientX,y:de.clientY})):F&&A&&A.id!==Be.id&&(ne(A,Be),R(null),L(!1),B(null))},ee=Be=>{if(F&&A){const de=E.current;if(de){const me=de.getBoundingClientRect(),ie=Be.clientX,ae=Be.clientY;if(ie>=me.left&&ie<=me.right&&ae>=me.top&&ae<=me.bottom){const ge=V(ie,de);oe(A,ge),R(null),L(!1),B(null);return}}R(null),L(!1),B(null)}},V=(Be,de)=>{const me=de.querySelectorAll(".draggable-word:not(.dragging-source)"),ie=A?a.findIndex(ae=>ae.id===A.id):-1;for(let ae=0;ae<me.length;ae++){const X=me[ae].getBoundingClientRect();if(Be<X.left+X.width/2)return ie!==-1&&ae>=ie?ae+1:ae}return a.length},J=Be=>{F&&A&&U({x:Be.clientX,y:Be.clientY})},oe=(Be,de)=>{const me=a.findIndex(ue=>ue.id===Be.id);if(me===-1)return;const ie=[...a],ae=ie.splice(me,1)[0],ge=de>me?de-1:de;ie.splice(ge,0,ae),ie.forEach((ue,Me)=>{const Ae=ue.isCorrect;ue.currentIndex=Me,ue.isCorrect=q(ue,Me),s==="always"?ue.isCorrect?D(Ne=>new Set([...Ne,ue.id])):D(Ne=>{const Re=new Set(Ne);return Re.delete(ue.id),Re}):!Ae&&ue.isCorrect&&K(ue.id)}),l(ie),u(ue=>ue+1);const W=!ie[ge].isCorrect;W&&f(ue=>ue+1),ie.every(ue=>ue.isCorrect)&&!g&&(x(!0),setTimeout(()=>{e(!0,d+(W?1:0))},1500))},ne=(Be,de)=>{const me=a.findIndex(ie=>ie.id===de.id);me!==-1&&oe(Be,me)},pe=()=>{if(!i||w)return;n();const Be=a.findIndex(de=>!de.isCorrect);Be!==-1&&(I(Be),S(!0),setTimeout(()=>{S(!1),I(null)},3e3))},ye=()=>{z()},Ce=()=>{!o||!Hv()||wd(t.original,{rate:.8,pitch:1,volume:.8})},_e=(Be,de)=>{let me="draggable-word";return Be.isCorrect&&M.has(Be.id)&&(me+=" correct"),A&&A.id===Be.id&&(me+=" dragging-source"),w&&P===de&&(me+=" hint-highlight"),me},ce=()=>p?Math.round((Date.now()-p)/1e3):0;return h.jsxs("div",{className:"word-sentence-mode",onMouseMove:J,onClick:ee,children:[h.jsx("div",{className:"game-header"}),h.jsxs("div",{className:"game-stats",children:[h.jsxs("div",{className:"stat-item",children:[h.jsx("span",{className:"stat-label",children:"Moves:"}),h.jsx("span",{className:"stat-value",children:c})]}),h.jsxs("div",{className:"stat-item",children:[h.jsx("span",{className:"stat-label",children:"Misses:"}),h.jsx("span",{className:"stat-value",children:d})]}),v&&h.jsxs("div",{className:"stat-item",children:[h.jsx("span",{className:"stat-label",children:"Time:"}),h.jsxs("span",{className:"stat-value",children:[ce(),"s"]})]})]}),h.jsx("div",{className:"sentence-container",ref:E,children:h.jsx("div",{className:"sentence-line",children:a.map((Be,de)=>h.jsxs(Lt.Fragment,{children:[F&&$===de&&h.jsx("div",{className:"drop-zone-indicator"}),h.jsx("span",{className:_e(Be,de),onClick:me=>Z(Be,me),title:g?"":"Click to pick up, click another word to swap",style:{opacity:A&&A.id===Be.id?.3:1,cursor:g?"default":"pointer"},children:Be.text}),F&&$===a.length&&de===a.length-1&&h.jsx("div",{className:"drop-zone-indicator"})]},Be.id))})}),F&&A&&h.jsx("div",{style:{position:"fixed",left:N.x-30,top:N.y-15,background:"rgba(255, 255, 255, 0.95)",border:"2px solid #007bff",borderRadius:"8px",padding:"5px 10px",fontSize:"clamp(1rem, 4vw, 1.4rem)",fontWeight:"bold",color:"#007bff",pointerEvents:"none",zIndex:1e3,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",transform:"rotate(-2deg)",whiteSpace:"nowrap"},children:A.text}),w&&P!==null&&h.jsx("div",{className:"hint-area",children:h.jsxs("p",{children:['💡 The word "',h.jsx("strong",{children:a[P].text}),'" needs to be moved to a correct position']})}),h.jsxs("div",{className:"game-controls",children:[o&&Hv()&&h.jsx("button",{className:"tts-button",onClick:Ce,title:"Listen to the correct sentence",children:"🔊 Listen"}),i&&!g&&!w&&h.jsx("button",{className:"hint-button",onClick:pe,children:"Show Hint"}),h.jsx("button",{className:"reset-button",onClick:ye,disabled:g,children:"Reset"})]}),g&&h.jsxs("div",{className:"completion-message",children:[h.jsx("h3",{children:"🎉 Perfect! You arranged the sentence correctly!"}),h.jsxs("div",{className:"completion-stats",children:[h.jsxs("p",{children:["Completed with ",h.jsx("strong",{children:d})," misses in ",h.jsx("strong",{children:c})," moves and ",h.jsx("strong",{children:ce()})," seconds"]}),h.jsx("p",{children:h.jsx("em",{children:"Fewer misses = better score!"})})]})]})]})},yXe=(t,e,n)=>{const[r,i]=T.useState(!1),[o,s]=T.useState(!1),[a,l]=T.useState(0),[c,u]=T.useState([]),[d,f]=T.useState(0),[p,b]=T.useState(0),[v,m]=T.useState({totalMisses:0,correctAnswers:0,timeElapsed:0,hintsUsed:0}),g=T.useRef(null);T.useEffect(()=>(x(),i(!0),b(0),()=>{g.current&&clearInterval(g.current)}),[t]),T.useEffect(()=>(r&&!o?g.current=setInterval(()=>{b(M=>M+1)},1e3):g.current&&clearInterval(g.current),()=>{g.current&&clearInterval(g.current)}),[r,o]);const x=()=>{const M=t.sentences.map((D,E)=>({id:D.id||E.toString(),original:D.original,definition:D.definition,difficulty:D.difficulty,currentAnswer:[],isCompleted:!1}));u(M)},w=()=>te(nt,null,function*(){s(!0);const M=v.totalMisses;m(D=>se(j({},D),{timeElapsed:p})),f(M),n(M)});return{gameStarted:r,gameCompleted:o,currentSentenceIndex:a,sentences:c,score:d,timeElapsed:p,gameStats:v,resetGame:()=>{i(!0),s(!1),l(0),f(0),b(0),m({totalMisses:0,correctAnswers:0,timeElapsed:0,hintsUsed:0}),x()},handleSentenceComplete:(M,D)=>{const E=[...c];M?(E[a].isCompleted=!0,m(_=>se(j({},_),{correctAnswers:_.correctAnswers+1,totalMisses:_.totalMisses+D})),a===c.length-1?setTimeout(()=>w(),2e3):setTimeout(()=>{l(_=>_+1)},2e3)):m(_=>se(j({},_),{totalMisses:_.totalMisses+D})),u(E)},handleHintUsed:()=>{m(M=>se(j({},M),{hintsUsed:M.hintsUsed+1}))},currentSentence:c[a]}},xXe=({currentSentenceIndex:t,totalSentences:e,gameStats:n,timeElapsed:r,formatTime:i})=>{const o=Xl("white","gray.700");return h.jsx(dc,{w:"full",bg:o,children:h.jsx(uc,{p:4,children:h.jsxs(Kt,{spacing:3,children:[h.jsxs(Ln,{w:"full",justify:"space-between",children:[h.jsxs(lo,{colorScheme:"blue",variant:"outline",children:["Sentence ",t+1," of ",e]}),h.jsxs(lo,{colorScheme:"green",variant:"outline",children:["Misses: ",n.totalMisses]}),h.jsxs(lo,{colorScheme:"orange",variant:"outline",children:["Time: ",i(r)]})]}),h.jsxs(Et,{w:"full",children:[h.jsx(ft,{fontSize:"sm",mb:1,color:"gray.600",children:"Progress"}),h.jsx(gX,{value:t/e*100,colorScheme:"blue",size:"md",borderRadius:"full"})]})]})})})},bXe=t=>{const e=Math.floor(t/60),n=t%60;return`${e}:${n.toString().padStart(2,"0")}`},wXe=({playerName:t,onGameComplete:e,config:n})=>{var s,a,l;const r=Xl("gray.50","gray.900"),i=yXe(n,t,e),o=T.useMemo(()=>i.currentSentence?{id:i.currentSentence.id,original:i.currentSentence.original,definition:i.currentSentence.definition}:null,[(s=i.currentSentence)==null?void 0:s.id,(a=i.currentSentence)==null?void 0:a.original,(l=i.currentSentence)==null?void 0:l.definition]);return i.currentSentence?h.jsx(Et,{minH:"100vh",bg:r,p:4,children:h.jsxs(Kt,{spacing:6,maxW:"4xl",mx:"auto",children:[h.jsx(sd,{gameTitle:"Sentence Sense",variant:"compact"}),h.jsx(xXe,{currentSentenceIndex:i.currentSentenceIndex,totalSentences:i.sentences.length,gameStats:i.gameStats,timeElapsed:i.timeElapsed,formatTime:bXe}),h.jsx(Et,{w:"full",children:h.jsx(vXe,{anagram:o,onComplete:i.handleSentenceComplete,onHintUsed:i.handleHintUsed,showDefinition:!1,enableHints:n.showHints,enableTextToSpeech:n.enableTextToSpeech})})]})}):h.jsx(Et,{minH:"100vh",bg:r,children:h.jsx(cu,{h:"100vh",children:h.jsxs(Kt,{spacing:4,children:[h.jsx(Fa,{size:"xl",color:"blue.500",thickness:"4px"}),h.jsx(ft,{color:"gray.600",children:"Loading sentence..."})]})})})},Dte=({config:t,playerName:e,onGameComplete:n})=>t.type!=="sentence-sense"?h.jsx("div",{children:"Error: Invalid game configuration"}):h.jsx(wXe,{config:t,playerName:e,onGameComplete:n}),SXe=(t,e,n)=>{const r=n.numberOfCards;if(n.includeDecimal&&n.decimalPlaces,t<r){const o=r-1-t;return["ones","tens","hundreds","thousands","ten thousands"][o]||`10^${o}`}else{const o=t-r;return["tenths","hundredths","thousandths"][o]||`10^${-(o+1)}`}},_Xe=(t,e)=>{const n=t.filter(o=>o.position==="slot").sort((o,s)=>(o.slotIndex||0)-(s.slotIndex||0));if(n.length===0)return"";const r=[],i=e.numberOfCards;return e.includeDecimal,n.forEach((o,s)=>{let a;if(s<i){const l=Math.pow(10,i-1-s);a=o.digit*l}else{const l=s-i+1,c=Math.pow(10,-l);a=o.digit*c}a>0&&(a>=1?r.push(a.toLocaleString()):r.push(a.toString()))}),r.join(" + ")},EXe=(t,e)=>{if(t.filter(i=>i.position==="slot").sort((i,o)=>(i.slotIndex||0)-(o.slotIndex||0)).length===0)return"";const r=mF(t,e);return CXe(r,e)},CXe=(t,e)=>{if(t===0)return"zero";const n=["","one","two","three","four","five","six","seven","eight","nine"],r=["ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],i=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"];if(e.includeDecimal&&t%1!==0){const o=Math.floor(t),s=t-o;let a="";o>0?a+=OD(o,n,r,i):a+="zero",a+=" and ";const l=s.toFixed(e.decimalPlaces).slice(2),c=parseInt(l);return c>0?(a+=OD(c,n,r,i),e.decimalPlaces===1?a+=c===1?" tenth":" tenths":e.decimalPlaces===2?a+=c===1?" hundredth":" hundredths":e.decimalPlaces===3&&(a+=c===1?" thousandth":" thousandths")):(a+="zero",e.decimalPlaces===1?a+=" tenths":e.decimalPlaces===2?a+=" hundredths":e.decimalPlaces===3&&(a+=" thousandths")),a}return OD(Math.floor(t),n,r,i)},OD=(t,e,n,r)=>{const i=[];let o=t;if(o>=1e4){const a=Math.floor(o/1e4),l=Math.floor(o%1e4/1e3);a>=1&&l>=1?a*10+l>=20?i.push(r[a]+"-"+e[l]+" thousand,"):a*10+l>=10&&i.push(n[a*10+l-10]+" thousand,"):a>=1&&l===0&&i.push(r[a]+" thousand,"),o=o%1e3}else if(o>=1e3){const a=Math.floor(o/1e3);a>=1&&i.push(e[a]+" thousand,"),o=o%1e3}if(o>=100){const a=Math.floor(o/100);o%100>0?i.push(e[a]+" hundred,"):i.push(e[a]+" hundred"),o=o%100}if(o>0)if(i.length>0&&i.push("and"),o>=20){const a=Math.floor(o/10),l=o%10;l>0?i.push(r[a]+"-"+e[l]):i.push(r[a])}else o>=10?i.push(n[o-10]):i.push(e[o]);return i.join(" ").replace(/,$/,"")},aW=t=>{const e=t.numberOfCards+(t.includeDecimal?t.decimalPlaces:0),n=[];for(let r=0;r<e;r++)n.push({id:`card-${Math.random().toString(36).substring(7)}`,digit:Math.floor(Math.random()*10),position:"deck"});return n},AXe=(t,e)=>{const{objective:n,aiDifficulty:r}=e;let i=[...t];return console.log("🤖 TEACHER MOVE:",{objective:n,aiDifficulty:r,originalCards:t.map(o=>o.digit),includeDecimal:e.includeDecimal,decimalPlaces:e.decimalPlaces}),r==="easy"?i=t.sort(()=>Math.random()-.5):r==="medium"?Math.random()>.3?i=t.sort((o,s)=>n==="largest"?s.digit-o.digit:o.digit-s.digit):i=t.sort(()=>Math.random()-.5):i=t.sort((o,s)=>n==="largest"?s.digit-o.digit:o.digit-s.digit),console.log("🤖 TEACHER ARRANGED:",i.map(o=>o.digit)),i.map((o,s)=>se(j({},o),{position:"slot",slotIndex:s}))},mF=(t,e)=>{const n=t.filter(s=>s.position==="slot").sort((s,a)=>(s.slotIndex||0)-(a.slotIndex||0));if(n.length===0)return 0;const r=e.numberOfCards;if(!e.includeDecimal)return parseInt(n.map(s=>s.digit).join(""));let o=0;return n.forEach((s,a)=>{if(a<r){const l=Math.pow(10,r-1-a);o+=s.digit*l}else{const l=a-r+1,c=Math.pow(10,-l);o+=s.digit*c}}),o},TXe=(t,e,n)=>(console.log("🎯 WINNER DETERMINATION:",{studentNumber:t,teacherNumber:e,objective:n,studentWins:n==="smallest"?t<e:t>e}),n==="largest"?t>e?"student":e>t?"teacher":"tie":t<e?"student":e<t?"teacher":"tie"),MXe=(t,e)=>{const n=e.numberOfCards+(e.includeDecimal?e.decimalPlaces:0);return t.filter(i=>i.position==="slot").length===n},PXe=(t,e)=>{var b;console.log("🔧 [PlaceValueShowdown] Config values received:",{numberOfCards:t.numberOfCards,includeDecimal:t.includeDecimal,decimalPlaces:t.decimalPlaces,totalSlots:t.numberOfCards+(t.includeDecimal?t.decimalPlaces:0),fullConfig:t});const[n,r]=T.useState({phase:"dealing",round:0,studentScore:0,teacherScore:0,studentCards:[],teacherCards:[],studentNumber:null,teacherNumber:null,roundWinner:null,message:`🟢 In this game, each of you will be dealt ${t.numberOfCards}${t.includeDecimal?` + ${t.decimalPlaces} decimal`:""} digit cards. Your mission is to drag and drop them into the slots to create the ${t.objective} number possible! The winner of each round earns 1 point! First to ${t.winningScore} points wins!`,isStudentReady:!1,isTeacherReady:!1}),[i,o]=T.useState({selectedCard:null,isCardSelected:!1,ghostPosition:{x:0,y:0}}),s=T.useRef(!1),a=T.useCallback(()=>{const v=aW(t),m=aW(t);r(g=>se(j({},g),{phase:"dealing",round:g.round+1,studentCards:v,teacherCards:m,studentNumber:null,teacherNumber:null,roundWinner:null,isStudentReady:!1,isTeacherReady:!1,message:"🎴 Shuffling the cards..."})),setTimeout(()=>{r(g=>se(j({},g),{phase:"arranging",message:`Now, arrange your cards to make the ${t.objective} number possible! Just click and drag your cards into the number slots.`})),setTimeout(()=>{r(g=>{const x=AXe(g.teacherCards,t);return se(j({},g),{teacherCards:x,isTeacherReady:!0})})},2e3+Math.random()*3e3)},1500)},[t]);T.useEffect(()=>{s.current||(s.current=!0,setTimeout(()=>{t.numberOfCards+(t.includeDecimal?t.decimalPlaces:0),r(v=>se(j({},v),{message:`📣 Let's get started! ${t.includeDecimal?`We'll be working with ${t.numberOfCards} whole number cards and ${t.decimalPlaces} decimal place cards.`:`We'll be working with ${t.numberOfCards} digit cards.`}`})),setTimeout(()=>{a()},1500)},3e3))},[a,t]),T.useEffect(()=>{if(n.isStudentReady&&n.isTeacherReady&&n.phase==="arranging"){const v=mF(n.studentCards,t),m=mF(n.teacherCards,t),g=TXe(v,m,t.objective),x=n.studentScore+(g==="student"?1:0),w=n.teacherScore+(g==="teacher"?1:0);r(S=>se(j({},S),{phase:"revealing",studentNumber:v,teacherNumber:m,roundWinner:g,studentScore:x,teacherScore:w,message:"Let's see who made the better number!"})),(x>=t.winningScore||w>=t.winningScore)&&setTimeout(()=>{const S=x>w?t.playerName:t.teacherName;r(P=>se(j({},P),{phase:"gameComplete",message:`🎉 That's game! The final score is: ${t.teacherName} ${w}, ${t.playerName} ${x}. And the grand winner is... ${S}! Great job practicing place value!`}))},2e3)}},[n.isStudentReady,n.isTeacherReady,n.phase,n.studentScore,n.teacherScore,t]),T.useEffect(()=>{MXe(n.studentCards,t)&&!n.isStudentReady&&r(m=>se(j({},m),{isStudentReady:!0}))},[n.studentCards,t,n.isStudentReady]),T.useEffect(()=>{if(n.phase==="gameComplete"){const v=n.studentScore;setTimeout(()=>{e(v)},3e3)}},[n.phase,n.studentScore,e]);const l=T.useCallback((v,m)=>{var g;n.phase==="arranging"&&(i.isCardSelected&&((g=i.selectedCard)==null?void 0:g.id)===v.id?o({selectedCard:null,isCardSelected:!1,ghostPosition:{x:0,y:0}}):o({selectedCard:v,isCardSelected:!0,ghostPosition:{x:m.clientX,y:m.clientY}}))},[n.phase,i.isCardSelected,(b=i.selectedCard)==null?void 0:b.id]),c=T.useCallback(v=>{!i.selectedCard||n.phase!=="arranging"||(r(m=>{const g=m.studentCards.map(x=>x.id===i.selectedCard.id?se(j({},x),{position:"slot",slotIndex:v}):x.slotIndex===v?se(j({},x),{position:"deck",slotIndex:void 0}):x);return se(j({},m),{studentCards:g})}),o({selectedCard:null,isCardSelected:!1,ghostPosition:{x:0,y:0}}))},[i.selectedCard,n.phase]),u=T.useCallback(v=>{n.phase==="arranging"&&r(m=>se(j({},m),{studentCards:m.studentCards.map(g=>g.id===v.id?se(j({},g),{position:"deck",slotIndex:void 0}):g)}))},[n.phase]),d=T.useCallback(v=>{v.target===v.currentTarget&&i.isCardSelected&&o({selectedCard:null,isCardSelected:!1,ghostPosition:{x:0,y:0}})},[i.isCardSelected]),f=T.useCallback(()=>{n.roundWinner&&(n.studentScore>=t.winningScore||n.teacherScore>=t.winningScore||setTimeout(()=>{a()},500))},[n.roundWinner,n.studentScore,n.teacherScore,t.winningScore,a]),p=T.useCallback(v=>{i.isCardSelected&&o(m=>se(j({},m),{ghostPosition:v}))},[i.isCardSelected]);return{gameState:n,selectionState:i,handlers:{handleCardClick:l,handleSlotClick:c,handleReturnToDeck:u,handleGameAreaClick:d,handleAdvanceToNextRound:f,updateGhostPosition:p}}},DXe=({config:t,gameState:e,showPlaceValueLabels:n,setShowPlaceValueLabels:r,showExpandedNumbers:i,setShowExpandedNumbers:o,showExpandedWords:s,setShowExpandedWords:a,onAdvanceToNextRound:l})=>h.jsxs("div",{className:"game-header",children:[h.jsxs("h2",{children:["🏆 ",t.title,h.jsx("span",{className:`objective-indicator ${t.objective==="smallest"?"smallest":""}`,children:t.objective==="largest"?"🔺 LARGEST":"🔻 SMALLEST"})]}),h.jsxs("div",{className:"header-content",children:[h.jsxs("div",{className:"scoreboard",children:[h.jsxs("div",{className:"score",children:[h.jsx("span",{className:"player-name",children:t.teacherName}),h.jsx("span",{className:"points",children:e.teacherScore})]}),h.jsx("div",{className:"vs",children:"VS"}),h.jsxs("div",{className:"score",children:[h.jsx("span",{className:"player-name",children:t.playerName}),h.jsx("span",{className:"points",children:e.studentScore})]})]}),h.jsxs("div",{className:"header-controls",children:[h.jsx("button",{onClick:()=>r(!n),className:`feature-button compact ${n?"active":""}`,title:"Show Place Values",children:"📊"}),h.jsx("button",{onClick:()=>o(!i),className:`feature-button compact ${i?"active":""}`,title:"Show Expanded Numbers",children:"🔢"}),h.jsx("button",{onClick:()=>a(!s),className:`feature-button compact ${s?"active":""}`,title:"Show Expanded Words",children:"📝"})]}),e.phase==="revealing"&&h.jsx("button",{onClick:l,className:"continue-button compact",children:"🎲 Next Round"})]})]}),RXe=({children:t,showPlaceValueLabels:e,slotIndex:n,totalSlots:r,hasComma:i,config:o})=>h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"slot-container",children:[t,e&&h.jsx("div",{className:"place-value-label",children:SXe(n,r,o)})]}),i&&h.jsx("div",{className:"comma-separator",children:","})]}),lW=({isTeacher:t,config:e,gameState:n,showPlaceValueLabels:r,showExpandedNumbers:i,showExpandedWords:o,onSlotClick:s,onCardClick:a,onReturnToDeck:l,selectionState:c})=>{const u=t?n.teacherCards:n.studentCards,d=t?n.isTeacherReady:n.isStudentReady,f=t?n.teacherNumber:n.studentNumber,p=t?e.teacherName:e.playerName,b=t?"teacher-area":"student-area",v=t?"teacher-slot":"student-slot",m=t?"teacher-card":"student-card",g=e.numberOfCards+(e.includeDecimal?e.decimalPlaces:0);return console.log("🎯 [PlayerArea] Slot calculation:",{isTeacher:t,playerName:p,numberOfCards:e.numberOfCards,includeDecimal:e.includeDecimal,decimalPlaces:e.decimalPlaces,totalSlots:g,configType:e.type}),h.jsxs("div",{className:`player-area ${b}`,children:[h.jsxs("h3",{children:[p,"'s Turn"]}),h.jsx("div",{className:"number-slots",children:Array.from({length:g},(x,w)=>{const S=u.find(M=>M.slotIndex===w),P=e.numberOfCards>=4&&w===e.numberOfCards-4,I=e.includeDecimal&&w===e.numberOfCards;return h.jsxs(Lt.Fragment,{children:[I&&h.jsx("div",{className:"decimal-point",children:h.jsx("div",{className:"decimal-dot",children:"."})}),h.jsx(RXe,{showPlaceValueLabels:r,slotIndex:w,totalSlots:g,hasComma:P,config:e,children:h.jsx("div",{className:`number-slot ${v} ${!t&&(c!=null&&c.isCardSelected)?"can-drop":""}`,onClick:()=>!t&&(s==null?void 0:s(w)),children:S&&h.jsx("div",{className:`card ${m} ${t&&n.phase==="revealing"?"revealed":""}`,onClick:()=>!t&&(l==null?void 0:l(S)),children:t&&n.phase!=="revealing"?"?":S.digit})})})]},w)})}),!t&&h.jsx("div",{className:"student-deck-container",children:h.jsx("div",{className:"student-deck",children:u.filter(x=>x.position==="deck").map(x=>{var w,S;return h.jsx("div",{className:`card ${m} deck-card ${((w=c==null?void 0:c.selectedCard)==null?void 0:w.id)===x.id?"selected":""}`,onClick:P=>a==null?void 0:a(x,P),style:{opacity:((S=c==null?void 0:c.selectedCard)==null?void 0:S.id)===x.id?.5:1},children:x.digit},x.id)})})}),t&&h.jsx("div",{className:"teacher-spacer"}),h.jsx("div",{className:"ready-indicator",style:{opacity:d&&n.phase==="arranging"?1:0,visibility:d&&n.phase==="arranging"?"visible":"hidden"},children:"✅ Ready!"}),n.phase==="revealing"&&f!==null&&h.jsxs("div",{className:"inline-notation",children:[i&&h.jsxs("div",{className:"notation-line",children:[h.jsxs("strong",{children:[e.includeDecimal?f.toFixed(e.decimalPlaces):f.toLocaleString()," ="]})," ",_Xe(u,e)]}),o&&h.jsxs("div",{className:"notation-line",children:[h.jsx("strong",{children:"In Words:"})," ",EXe(u,e)]})]})]})},IXe=({playerName:t,onGameComplete:e,config:n,onHighScoreProcessStart:r,onHighScoreProcessComplete:i})=>{const{currentUser:o}=Dr(),[s,a]=T.useState(!1),[l,c]=T.useState(!1),[u,d]=T.useState(!1),f=Lt.useMemo(()=>{const m=o&&n.userId&&o.uid!==n.userId;return se(j({},n),{playerName:t||n.playerName,teacherName:m?"Teacher":n.teacherName})},[n,t,o]),{gameState:p,selectionState:b,handlers:v}=PXe(f,e);return T.useEffect(()=>{const m=g=>{b.isCardSelected&&v.updateGhostPosition({x:g.clientX,y:g.clientY})};return b.isCardSelected&&window.addEventListener("mousemove",m),()=>{window.removeEventListener("mousemove",m)}},[b.isCardSelected,v]),h.jsxs("div",{className:"place-value-showdown",onClick:v.handleGameAreaClick,children:[h.jsx("div",{style:{position:"absolute",top:"10px",left:"10px",right:"10px",zIndex:1e3},children:h.jsx(sd,{gameTitle:f.title,variant:"compact"})}),h.jsx(DXe,{config:f,gameState:p,showPlaceValueLabels:s,setShowPlaceValueLabels:a,showExpandedNumbers:l,setShowExpandedNumbers:c,showExpandedWords:u,setShowExpandedWords:d,onAdvanceToNextRound:v.handleAdvanceToNextRound}),(p.phase==="dealing"||p.phase==="gameComplete")&&h.jsx("div",{className:"game-message",children:h.jsx("p",{children:p.message})}),(p.phase==="dealing"||p.phase==="arranging"||p.phase==="revealing")&&h.jsxs("div",{className:"game-area",children:[h.jsx(lW,{isTeacher:!0,config:f,gameState:p,showPlaceValueLabels:s,showExpandedNumbers:l,showExpandedWords:u}),h.jsx(lW,{isTeacher:!1,config:f,gameState:p,showPlaceValueLabels:s,showExpandedNumbers:l,showExpandedWords:u,onSlotClick:v.handleSlotClick,onCardClick:v.handleCardClick,onReturnToDeck:v.handleReturnToDeck,selectionState:b})]}),p.phase==="gameComplete"&&h.jsxs("div",{className:"game-complete",children:[h.jsx("h2",{children:"🎉 Game Complete!"}),h.jsxs("div",{className:"final-scores",children:[h.jsx("p",{children:h.jsx("strong",{children:"Final Score:"})}),h.jsxs("p",{children:[f.teacherName,": ",p.teacherScore]}),h.jsxs("p",{children:[f.playerName,": ",p.studentScore]})]})]}),b.isCardSelected&&b.selectedCard&&h.jsx("div",{className:"ghost-card",style:{position:"fixed",left:b.ghostPosition.x-30,top:b.ghostPosition.y-40,pointerEvents:"none",zIndex:1e3,opacity:.8},children:h.jsx("div",{className:"card student-card",children:b.selectedCard.digit})})]})},Rte=({playerName:t,onGameComplete:e,config:n,onHighScoreProcessStart:r,onHighScoreProcessComplete:i})=>n.type!=="place-value-showdown"?h.jsx("div",{children:"Error: Invalid game configuration"}):h.jsx(IXe,{config:n,playerName:t,onGameComplete:e,onHighScoreProcessStart:r,onHighScoreProcessComplete:i}),mi=800,Kn=500,dg=15,Iu=35,l_=80,kXe=80,cW=12,yy=10,xy=-5,uW=50,FXe={classic:{name:"Classic Pong",background:{type:"solid",primary:"#000000"},paddles:{player:"#00FF00",ai:"#FF0000"},ball:{target:"#87CEEB",nonTarget:"#87CEEB"},text:{primary:"#FFFFFF",secondary:"#CCCCCC",target:"#000000",nonTarget:"#000000",background:"rgba(255, 255, 255, 0.9)",fontFamily:"Comic Neue, cursive"},ui:{centerLine:"#444444",buttons:"#00FF00",accent:"#FFFF00"},effects:{targetGlow:"#00FF00",correctHit:"#00FF00",wrongHit:"#FF0000"}},space:{name:"Space Adventure",background:{type:"gradient",primary:"#0B0C2A",secondary:"#1E1A78"},paddles:{player:"#00D4FF",ai:"#FF6B35"},ball:{target:"#87CEEB",nonTarget:"#87CEEB"},text:{primary:"#FFFFFF",secondary:"#A4B0BE",target:"#000000",nonTarget:"#000000",background:"rgba(11, 12, 42, 0.8)",fontFamily:"Comic Neue, cursive"},ui:{centerLine:"#3742FA",buttons:"#00D4FF",accent:"#FFA502"},effects:{targetGlow:"#00FF94",correctHit:"#00FF94",wrongHit:"#FF4757"}},neon:{name:"Neon Cyber",background:{type:"gradient",primary:"#0F0F23",secondary:"#2E0249"},paddles:{player:"#FF00FF",ai:"#00FFFF"},ball:{target:"#87CEEB",nonTarget:"#87CEEB"},text:{primary:"#FFFFFF",secondary:"#FF00FF",target:"#000000",nonTarget:"#000000",background:"rgba(15, 15, 35, 0.9)",fontFamily:"Comic Neue, cursive"},ui:{centerLine:"#FF00FF",buttons:"#00FFFF",accent:"#FFFF00"},effects:{targetGlow:"#FFFF00",correctHit:"#FFFF00",wrongHit:"#FF0080"}},ocean:{name:"Ocean Depths",background:{type:"gradient",primary:"#1B263B",secondary:"#0F4C75"},paddles:{player:"#4ECDC4",ai:"#F38BA8"},ball:{target:"#87CEEB",nonTarget:"#87CEEB"},text:{primary:"#FFFFFF",secondary:"#B3E5FC",target:"#000000",nonTarget:"#000000",background:"rgba(27, 38, 59, 0.8)",fontFamily:"Comic Neue, cursive"},ui:{centerLine:"#4ECDC4",buttons:"#96CEB4",accent:"#FFD93D"},effects:{targetGlow:"#96CEB4",correctHit:"#96CEB4",wrongHit:"#FF8A80"}},forest:{name:"Enchanted Forest",background:{type:"gradient",primary:"#1B4332",secondary:"#2D5016"},paddles:{player:"#95D5B2",ai:"#F4A261"},ball:{target:"#87CEEB",nonTarget:"#87CEEB"},text:{primary:"#FFFFFF",secondary:"#D8F3DC",target:"#000000",nonTarget:"#000000",background:"rgba(27, 67, 50, 0.8)",fontFamily:"Comic Neue, cursive"},ui:{centerLine:"#52B788",buttons:"#74C69D",accent:"#F9C74F"},effects:{targetGlow:"#74C69D",correctHit:"#74C69D",wrongHit:"#E76F51"}}},OXe={targetWords:["cat","bat","hat","mat","sat","pat","fat","rat"],nonTargetWords:["dog","sun","pen","book","tree","car","fish","bird"],categoryName:"Short A Words",theme:"classic",initialSpeed:4,paddleSize:kXe,maxLives:3,speedIncrement:1,wordsPerLevel:10,enableSound:!0,gameTime:180},zh=t=>{const e=Math.random()<.6,n=e?t.targetWords:t.nonTargetWords;return{text:n[Math.floor(Math.random()*n.length)],isTarget:e}},dW=(t,e,n,r,i,o,s)=>{const a=t-n,l=t+n,c=e-n,u=e+n,d=r,f=r+o,p=i,b=i+s;return l>=d&&a<=f&&u>=p&&c<=b},fW=(t,e,n)=>{let r=(t-e)/n;r=Ky(r,.1,.9);const i=Math.PI/4;return(r-.5)*2*i},Ky=(t,e,n)=>Math.min(Math.max(t,e),n),NXe=(t,e)=>{if("speechSynthesis"in window){const n=new SpeechSynthesisUtterance(t);n.rate=.8,n.pitch=e?1.2:.8,speechSynthesis.speak(n)}},LXe=t=>{const[e,n]=T.useState("idle"),[r,i]=T.useState(t),[o,s]=T.useState(0),[a,l]=T.useState(0),[c,u]=T.useState(t.maxLives),[d,f]=T.useState(1),[p,b]=T.useState(0),[v,m]=T.useState(t.gameTime||180),[g,x]=T.useState(0),[w,S]=T.useState(0),[P,I]=T.useState(0),[M,D]=T.useState(0),[E,_]=T.useState(0),[A,R]=T.useState(0),[F,L]=T.useState(!0),[N,U]=T.useState(0),[$,B]=T.useState(!1),[H,q]=T.useState({x:Math.round(mi/2),y:Math.round(Kn/2),vx:0,vy:0,radius:Iu,word:zh(r)}),[z,G]=T.useState({x:mi-dg,y:Kn/2-r.paddleSize/2,width:dg,height:r.paddleSize}),[K,Z]=T.useState({x:0,y:Kn/2-l_/2,width:dg,height:l_}),ee=T.useRef(null),V=T.useRef(null),J=T.useRef(H),oe=T.useRef(K);J.current=H,oe.current=K;const ne=e==="playing";T.useCallback(()=>{const X=r.initialSpeed,W=F?-X:X,ve=(Math.random()-.5)*2;return L(ue=>!ue),{x:Math.round(mi/2),y:Math.round(Kn/2),vx:W,vy:ve,radius:Iu,word:zh(r)}},[r,F]);const pe=T.useCallback(()=>{s(0),l(0),u(r.maxLives),f(1),b(0),m(r.gameTime||180),x(0),S(0),I(0),D(0),_(0),R(0),L(!0),B(!1),q({x:Math.round(mi/2),y:Math.round(Kn/2),vx:0,vy:0,radius:Iu,word:zh(r)}),G({x:mi-dg,y:Kn/2-r.paddleSize/2,width:dg,height:r.paddleSize}),Z({x:0,y:Kn/2-l_/2,width:dg,height:l_})},[r]),ye=T.useCallback(()=>{pe(),n("playing")},[pe]),Ce=T.useCallback(()=>{e==="playing"&&n("paused")},[e]),_e=T.useCallback(()=>{e==="paused"&&n("playing")},[e]),ce=T.useCallback(()=>{n("idle"),pe()},[pe]),Be=T.useCallback(()=>{n("gameOver")},[]),de=T.useCallback(X=>{const W=Ky(X-z.height/2,0,Kn-z.height);G(ve=>se(j({},ve),{y:W}))},[z.height]),me=T.useCallback(()=>{!$&&e==="playing"&&(B(!0),q(X=>se(j({},X),{x:Math.round(X.x),y:Math.round(X.y),vx:-r.initialSpeed,vy:(Math.random()-.5)*2})))},[$,e,r.initialSpeed]),ie=T.useCallback(()=>{e==="playing"&&Z(X=>{const W=J.current,ve=X.y+X.height/2,ue=W.y,Me=3,Ae=W.word.isTarget,Ne=W.vx<0;let Re=X.y;if(Ne&&Ae)ue<ve-10?Re=Math.max(0,X.y-Me):ue>ve+10&&(Re=Math.min(Kn-X.height,X.y+Me));else if(Ne&&!Ae)Math.random()<.8?ue<ve?Re=Math.min(Kn-X.height,X.y+Me*1.5):Re=Math.max(0,X.y-Me*1.5):ue<ve-10?Re=Math.max(0,X.y-Me*.5):ue>ve+10&&(Re=Math.min(Kn-X.height,X.y+Me*.5));else{const Ie=Kn/2-X.height/2;Math.abs(ve-Kn/2)>20&&(ve<Kn/2?Re=Math.min(Ie,X.y+Me*.5):Re=Math.max(Ie,X.y-Me*.5))}return se(j({},X),{y:Re})})},[e]),ae=T.useCallback(()=>{if(!ne||!$)return null;const X=performance.now(),W=100;let ve=null;const ue=j({},H),Me=Math.round(ue.vx),Ae=Math.round(ue.vy);if(ue.x=Math.round(ue.x+Me),ue.y=Math.round(ue.y+Ae),ue.vx=Me,ue.vy=Ae,ue.y<=Iu||ue.y>=Kn-Iu){const Ne=ue.y<=Iu?"top":"bottom",Re=ue.vx,Ie=ue.vy,it=Math.sqrt(Re*Re+Ie*Ie),Ee=Math.abs(Math.atan2(Ie,Re)*180/Math.PI);console.log(`🏐 Ball hit ${Ne} wall:`),console.log(`  Original velocity: vx=${Re.toFixed(2)}, vy=${Ie.toFixed(2)}`),console.log(`  Original speed: ${it.toFixed(2)}`),console.log(`  Original angle: ${Ee.toFixed(1)}°`),ue.vy*=-1,ue.y=Ky(ue.y,Iu,Kn-Iu);const Le=Math.sqrt(ue.vx*ue.vx+ue.vy*ue.vy),Ge=25*Math.PI/180,Ke=Le*Math.sin(Ge),je=Le*Math.cos(Ge);if(console.log(`  After initial bounce: vx=${ue.vx.toFixed(2)}, vy=${ue.vy.toFixed(2)}`),console.log(`  Required min |vx| for 25° from vertical: ${Ke.toFixed(2)}, actual |vx|: ${Math.abs(ue.vx).toFixed(2)}`),console.log(`  Required max |vy| for 25° from vertical: ${je.toFixed(2)}, actual |vy|: ${Math.abs(ue.vy).toFixed(2)}`),Math.abs(ue.vx)<Ke){console.log("  ⚠️  Too vertical! Adding horizontal velocity..."),ue.vx=ue.vx>=0?Ke:-Ke;const et=Math.sqrt(Le*Le-ue.vx*ue.vx);Math.abs(ue.vy)>et&&(ue.vy=ue.vy>0?et:-et);const lt=Math.sqrt(ue.vx*ue.vx+ue.vy*ue.vy),ht=Math.atan2(Math.abs(ue.vx),Math.abs(ue.vy))*180/Math.PI;console.log(`  ✅ Adjusted velocity: vx=${ue.vx.toFixed(2)}, vy=${ue.vy.toFixed(2)}`),console.log(`  ✅ Final speed: ${lt.toFixed(2)}`),console.log(`  ✅ Final angle from vertical: ${ht.toFixed(1)}°`)}else{const et=Math.atan2(Math.abs(ue.vx),Math.abs(ue.vy))*180/Math.PI;console.log(`  ✅ Angle OK: ${et.toFixed(1)}° from vertical`)}ve={type:"bounce"}}if(ue.vx>0&&X-N>W&&dW(ue.x,ue.y,ue.radius,z.x,z.y,z.width,z.height)){console.log(`🏓 Player Paddle hit at ball position: x=${ue.x.toFixed(1)}, y=${ue.y.toFixed(1)}`),console.log(`  Paddle position: x=${z.x}, y=${z.y.toFixed(1)}, height=${z.height}`),console.log(`  Ball velocity before: vx=${ue.vx.toFixed(2)}, vy=${ue.vy.toFixed(2)}`);const Ne=fW(ue.y,z.y,z.height),Re=Math.sqrt(ue.vx*ue.vx+ue.vy*ue.vy),Ie=Math.max(Re,r.initialSpeed);if(ue.vx=-Ie*Math.cos(Ne),ue.vy=Ie*Math.sin(Ne),ue.x=z.x-ue.radius-2,ue.y-ue.radius<0&&(ue.y=ue.radius+1,console.log("  ⚠️  Ball too close to top edge after paddle hit, adjusting y position")),ue.y+ue.radius>Kn&&(ue.y=Kn-ue.radius-1,console.log("  ⚠️  Ball too close to bottom edge after paddle hit, adjusting y position")),console.log(`  Ball velocity after: vx=${ue.vx.toFixed(2)}, vy=${ue.vy.toFixed(2)}`),console.log(`  Ball position after: x=${ue.x.toFixed(1)}, y=${ue.y.toFixed(1)}`),U(X),ue.word.isTarget){s(Ee=>Ee+yy),S(Ee=>Ee+1),x(Ee=>Ee+1);const it=Ky(Ie+r.speedIncrement,r.initialSpeed,cW);ue.vx=-it*Math.cos(Ne),ue.vy=it*Math.sin(Ne),ve={type:"correct",points:yy,word:ue.word},g+1>=d*r.wordsPerLevel&&(f(Ee=>Ee+1),s(Ee=>Ee+uW),ve={type:"levelUp",points:uW})}else s(it=>Math.max(0,it+xy)),I(it=>it+1),x(it=>it+1),ve={type:"wrong",points:xy,word:ue.word};ue.word=zh(r)}if(ue.vx<0&&X-N>W&&dW(ue.x,ue.y,ue.radius,K.x,K.y,K.width,K.height)){console.log(`🏓 AI Paddle hit at ball position: x=${ue.x.toFixed(1)}, y=${ue.y.toFixed(1)}`),console.log(`  Paddle position: x=${K.x}, y=${K.y.toFixed(1)}, height=${K.height}`),console.log(`  Ball velocity before: vx=${ue.vx.toFixed(2)}, vy=${ue.vy.toFixed(2)}`);const Ne=fW(ue.y,K.y,K.height),Re=Math.sqrt(ue.vx*ue.vx+ue.vy*ue.vy),Ie=Math.max(Re,r.initialSpeed);if(ue.vx=Ie*Math.cos(Ne),ue.vy=Ie*Math.sin(Ne),ue.x=K.x+K.width+ue.radius+2,ue.y-ue.radius<0&&(ue.y=ue.radius+1,console.log("  ⚠️  Ball too close to top edge after paddle hit, adjusting y position")),ue.y+ue.radius>Kn&&(ue.y=Kn-ue.radius-1,console.log("  ⚠️  Ball too close to bottom edge after paddle hit, adjusting y position")),console.log(`  Ball velocity after: vx=${ue.vx.toFixed(2)}, vy=${ue.vy.toFixed(2)}`),console.log(`  Ball position after: x=${ue.x.toFixed(1)}, y=${ue.y.toFixed(1)}`),U(X),ue.word.isTarget){l(Ee=>Ee+yy),_(Ee=>Ee+1),x(Ee=>Ee+1);const it=Ky(Ie+r.speedIncrement,r.initialSpeed,cW);ue.vx=it*Math.cos(Ne),ue.vy=it*Math.sin(Ne),ve={type:"aiCorrect",points:yy,word:ue.word}}else l(it=>Math.max(0,it+xy)),R(it=>it+1),x(it=>it+1),ve={type:"aiWrong",points:xy,word:ue.word};ue.word=zh(r)}if(ue.x>mi+Iu){ue.word.isTarget&&(D(Ie=>Ie+1),s(Ie=>Math.max(0,Ie+xy)),ve={type:"miss",word:ue.word}),x(Ie=>Ie+1);const Ne=r.initialSpeed,Re=F?-Ne:Ne;L(Ie=>!Ie),ue.x=Math.round(mi/2),ue.y=Math.round(Kn/2),ue.vx=Re,ue.vy=(Math.random()-.5)*4,ue.word=zh(r)}if(ue.x<-35){ue.word.isTarget&&(s(Ie=>Ie+yy),ve={type:"aiMiss",word:ue.word}),x(Ie=>Ie+1);const Ne=r.initialSpeed,Re=F?-Ne:Ne;L(Ie=>!Ie),ue.x=Math.round(mi/2),ue.y=Math.round(Kn/2),ue.vx=Re,ue.vy=(Math.random()-.5)*4,ue.word=zh(r)}return q(ue),ve},[ne,$,H,z,K,r,c,d,g,Be,F,N]);T.useEffect(()=>(e==="playing"?ee.current=setInterval(()=>{b(X=>X+1),m(X=>{const W=X-1;return W<=0?(Be(),0):W})},1e3):ee.current&&(clearInterval(ee.current),ee.current=null),()=>{ee.current&&clearInterval(ee.current)}),[e,Be]),T.useEffect(()=>(e==="playing"?V.current=setInterval(ie,50):V.current&&(clearInterval(V.current),V.current=null),()=>{V.current&&clearInterval(V.current)}),[e,ie]),T.useEffect(()=>()=>{ee.current&&clearInterval(ee.current),V.current&&clearInterval(V.current)},[]);const ge=T.useCallback(()=>ae(),[ae]);return{gameState:e,settings:r,ball:H,playerPaddle:z,aiPaddle:K,ballMoving:$,score:o,aiScore:a,level:d,timeElapsed:p,timeRemaining:v,wordsProcessed:g,correctHits:w,wrongHits:P,missedTargets:M,aiCorrectHits:E,aiWrongHits:A,startGame:ye,pauseGame:Ce,resumeGame:_e,resetGame:ce,endGame:Be,updateBall:ae,updatePlayerPaddle:de,startBallMovement:me,handleBallHit:ge,isGameActive:ne,updateSettings:i}},BXe={correct:"/sounds/pop.mp3",wrong:"/sounds/crack.mp3",bounce:"/sounds/cardboard.mp3",levelUp:"/sounds/unwrap.mp3",gameOver:"/sounds/crack.mp3",backgroundMusic:void 0},jXe=t=>{const[e,n]=T.useState(!1),[r,i]=T.useState(.7),o=j(j({},BXe),t),s=T.useRef(new Map),a=T.useRef(null);T.useEffect(()=>{if(Object.entries(o).forEach(([E,_])=>{if(E!=="backgroundMusic"&&_){const A=new Audio(_);A.volume=r,A.preload="auto",A.onerror=()=>{console.warn(`Failed to load audio file for ${E}: ${_}`),s.current.delete(E)},A.oncanplaythrough=()=>{console.log(`Successfully loaded audio for ${E}`)},s.current.set(E,A)}}),o.backgroundMusic){const E=new Audio(o.backgroundMusic);E.volume=r*.3,E.loop=!0,E.preload="auto",E.onerror=()=>{console.warn(`Failed to load background music: ${o.backgroundMusic}`),a.current=null},a.current=E}return()=>{s.current.forEach(E=>{E.pause(),E.src=""}),s.current.clear(),a.current&&(a.current.pause(),a.current.src="")}},[]),T.useEffect(()=>{s.current.forEach(E=>{E.volume=e?0:r}),a.current&&(a.current.volume=e?0:r*.3)},[r,e]);const l=T.useCallback((E,_=1)=>{if(!e)try{const A=new(window.AudioContext||window.webkitAudioContext),R=A.createOscillator(),F=A.createGain();R.connect(F),F.connect(A.destination);const L=r*_*.1;switch(E){case"correct":R.frequency.setValueAtTime(800,A.currentTime),R.frequency.exponentialRampToValueAtTime(1e3,A.currentTime+.1),F.gain.setValueAtTime(L,A.currentTime),F.gain.exponentialRampToValueAtTime(.01,A.currentTime+.15),R.type="sine";break;case"wrong":R.frequency.setValueAtTime(200,A.currentTime),R.frequency.exponentialRampToValueAtTime(150,A.currentTime+.2),F.gain.setValueAtTime(L,A.currentTime),F.gain.exponentialRampToValueAtTime(.01,A.currentTime+.3),R.type="sawtooth";break;case"bounce":R.frequency.setValueAtTime(400,A.currentTime),R.frequency.exponentialRampToValueAtTime(200,A.currentTime+.05),F.gain.setValueAtTime(L,A.currentTime),F.gain.exponentialRampToValueAtTime(.01,A.currentTime+.1),R.type="square";break;case"levelUp":R.frequency.setValueAtTime(400,A.currentTime),R.frequency.exponentialRampToValueAtTime(800,A.currentTime+.3),F.gain.setValueAtTime(L,A.currentTime),F.gain.exponentialRampToValueAtTime(.01,A.currentTime+.4),R.type="triangle";break;case"gameOver":R.frequency.setValueAtTime(300,A.currentTime),R.frequency.exponentialRampToValueAtTime(100,A.currentTime+.5),F.gain.setValueAtTime(L,A.currentTime),F.gain.exponentialRampToValueAtTime(.01,A.currentTime+.6),R.type="sawtooth";break;default:R.frequency.setValueAtTime(500,A.currentTime),F.gain.setValueAtTime(L,A.currentTime),F.gain.exponentialRampToValueAtTime(.01,A.currentTime+.1),R.type="sine"}R.start(A.currentTime),R.stop(A.currentTime+1)}catch(A){console.warn(`Failed to generate fallback sound for ${E}:`,A)}},[e,r]),c=T.useCallback((E,_=1)=>{if(e)return;const A=s.current.get(E);if(A){const R=A.cloneNode();R.volume=r*_,R.play().catch(F=>{console.warn(`Failed to play sound ${E}:`,F),l(E,_)})}else l(E,_)},[e,r,l]),u=T.useCallback(()=>{c("correct",1),"vibrate"in navigator&&navigator.vibrate([50,50,100])},[c]),d=T.useCallback(()=>{c("wrong",1),"vibrate"in navigator&&navigator.vibrate(200)},[c]),f=T.useCallback(()=>{c("bounce",.6)},[c]),p=T.useCallback(()=>{c("levelUp",1.2),"vibrate"in navigator&&navigator.vibrate([100,50,100,50,200])},[c]),b=T.useCallback(()=>{c("gameOver",1),"vibrate"in navigator&&navigator.vibrate([300,100,300])},[c]),v=T.useCallback(()=>{a.current&&!e&&a.current.play().catch(E=>{console.warn("Failed to play background music:",E)})},[e]),m=T.useCallback(()=>{a.current&&(a.current.pause(),a.current.currentTime=0)},[]),g=T.useCallback(()=>{a.current&&a.current.pause()},[]),x=T.useCallback(()=>{a.current&&!e&&a.current.play().catch(E=>{console.warn("Failed to resume background music:",E)})},[e]),w=T.useCallback(()=>{n(E=>!E)},[]),S=T.useCallback(E=>{i(Math.max(0,Math.min(1,E)))},[]),P=T.useCallback(()=>{if("AudioContext"in window||"webkitAudioContext"in window){const E=window.AudioContext||window.webkitAudioContext;return new E}return null},[]),I=T.useCallback((E,_)=>{if("speechSynthesis"in window&&!e){const A=new SpeechSynthesisUtterance(E);_&&(_.rate&&(A.rate=_.rate),_.pitch&&(A.pitch=_.pitch),_.voice&&(A.voice=_.voice)),speechSynthesis.speak(A)}},[e]),M=T.useCallback(()=>"speechSynthesis"in window?speechSynthesis.getVoices():[],[]),D=T.useCallback(E=>{if(!e&&"AudioContext"in window){const _=P();if(!_)return;const A=_.createOscillator(),R=_.createGain();switch(A.connect(R),R.connect(_.destination),E){case"click":A.frequency.setValueAtTime(800,_.currentTime),R.gain.setValueAtTime(.1,_.currentTime),R.gain.exponentialRampToValueAtTime(.01,_.currentTime+.1);break;case"hover":A.frequency.setValueAtTime(600,_.currentTime),R.gain.setValueAtTime(.05,_.currentTime),R.gain.exponentialRampToValueAtTime(.01,_.currentTime+.05);break;case"focus":A.frequency.setValueAtTime(1e3,_.currentTime),R.gain.setValueAtTime(.03,_.currentTime),R.gain.exponentialRampToValueAtTime(.01,_.currentTime+.03);break}A.start(),A.stop(_.currentTime+.1)}},[e,P]);return{isMuted:e,volume:r,playCorrectSound:u,playWrongSound:d,playBounceSound:f,playLevelUpSound:p,playGameOverSound:b,playUISound:D,startBackgroundMusic:v,stopBackgroundMusic:m,pauseBackgroundMusic:g,resumeBackgroundMusic:x,toggleMute:w,setVolume:S,speakText:I,getAvailableVoices:M,playSound:c,createAudioContext:P}};class UXe{constructor(e=200){go(this,"cache",new Map);go(this,"maxCacheSize");this.maxCacheSize=e}createCacheKey(e,n){const{fontSize:r,color:i,fontFamily:o,maxWidth:s,bold:a,italic:l,backgroundColor:c,padding:u}=n;return`${e}-${r}-${i}-${o}-${s||"auto"}-${a||!1}-${l||!1}-${c||"transparent"}-${u||4}`}preRenderText(e,n){const r=this.createCacheKey(e,n);if(this.cache.has(r))return this.cache.get(r);const i=document.createElement("canvas"),o=i.getContext("2d"),s=n.bold?"bold":"normal",a=n.italic?"italic":"normal";let l=n.fontSize;o.font=`${a} ${s} ${l}px ${n.fontFamily}`;let c=o.measureText(e);if(n.maxWidth)for(;c.width>n.maxWidth&&l>8;)l-=1,o.font=`${a} ${s} ${l}px ${n.fontFamily}`,c=o.measureText(e);const u=n.padding||4,d=Math.ceil(c.width)+u*2,f=Math.ceil(l*1.4)+u*2;i.width=d,i.height=f,o.font=`${a} ${s} ${l}px ${n.fontFamily}`,o.textAlign="center",o.textBaseline="middle",o.imageSmoothingEnabled=!1,n.backgroundColor&&(o.fillStyle=n.backgroundColor,o.fillRect(0,0,d,f));const p=d/2,b=f/2;o.fillStyle=n.color,o.fillText(e,p,b);const v={canvas:i,width:d,height:f,actualFontSize:l};if(this.cache.set(r,v),this.cache.size>this.maxCacheSize){const m=this.cache.keys().next().value;m&&this.cache.delete(m)}return v}drawPreRenderedText(e,n,r,i,o,s=!0){const a=this.preRenderText(n,o),l=Math.round(s?r-a.width/2:r),c=Math.round(s?i-a.height/2:i),u=e.imageSmoothingEnabled;e.imageSmoothingEnabled=!1,e.drawImage(a.canvas,l,c),e.imageSmoothingEnabled=u}clearCache(){this.cache.clear()}clearCachePattern(e){const n=[];for(const r of this.cache.keys())r.includes(e)&&n.push(r);n.forEach(r=>this.cache.delete(r))}getCacheSize(){return this.cache.size}getCacheStats(){return{size:this.cache.size,maxSize:this.maxCacheSize}}}const hW=new UXe(200),zXe=({gameConfig:t={},onGameComplete:e,onHighScoreProcessStart:n,onHighScoreProcessComplete:r,onGameExit:i,configId:o,playerName:s="Student"})=>{var cn;const{currentUser:a,isTeacher:l}=Dr(),c=T.useRef(null),u=T.useRef(null),d=T.useRef(),[f,p]=T.useState(Kn/2),b=T.useRef(""),{highScores:v,isNewHighScore:m,showHighScoreModal:g,setShowHighScoreModal:x,saveHighScore:w,isSubmittingScore:S}=Cte({gameType:"word-volley",configId:o||"default",scoringSystem:"points-based",enableRateLimit:!0,onHighScoreProcessStart:n,onHighScoreProcessComplete:r}),[P,I]=T.useState(!1),[M,D]=T.useState([]),[E,_]=T.useState(!1),A=T.useCallback(()=>te(nt,null,function*(){_(!0);try{const be=Tn(bt,"highScores"),st=mr(be,Bn("gameType","==","word-volley"),f0("score","desc"),$f(10)),zt=yield Xn(st),At=[];zt.forEach(Bt=>{At.push(j({id:Bt.id},Bt.data()))}),D(At),I(!0)}catch(be){console.error("Error loading general leaderboard:",be),D([]),I(!0)}finally{_(!1)}}),[]),[R,F]=T.useState(!1),[L,N]=T.useState(!1),[U,$]=T.useState(!0),[B,H]=T.useState(!1),[q,z]=T.useState(!0),[G,K]=T.useState(0),[Z,ee]=T.useState("classic"),[V,J]=T.useState((cn=t.enableTextToSpeech)!=null?cn:!0),oe=T.useCallback(()=>{J(be=>!be)},[]);T.useEffect(()=>{b.current!==Z&&(hW.clearCache(),b.current=Z)},[Z]);const[ne,pe]=T.useState(!1),[ye,Ce]=T.useState(-100),[_e,ce]=T.useState(0),Be=T.useRef(),de=T.useRef(),[me,ie]=T.useState(!1),[ae,ge]=T.useState(-100),[X,W]=T.useState(0),ve=T.useRef(),ue=T.useRef(),[Me,Ae]=T.useState(!1),[Ne,Re]=T.useState(Kn+100),[Ie,it]=T.useState(0),[Ee,Le]=T.useState(0),Ge=T.useRef(),Ke=T.useRef(),{gameState:je,settings:et,ball:lt,playerPaddle:ht,aiPaddle:ke,ballMoving:gt,score:tt,aiScore:yt,level:at,timeElapsed:mt,timeRemaining:Ot,wordsProcessed:rn,startGame:on,pauseGame:Pe,resumeGame:Ue,resetGame:Xe,updateBall:vt,updatePlayerPaddle:Pt,startBallMovement:jt,isGameActive:Nt}=LXe(j(j({},OXe),t)),{playBounceSound:Yt,toggleMute:en,isMuted:fn}=jXe();T.useEffect(()=>{V&&lt.word&&je==="playing"&&NXe(lt.word.text,lt.word.isTarget)},[lt.word,V,je]);const hn=T.useCallback((be,st)=>be>=ht.x-20&&be<=ht.x+ht.width+20&&st>=ht.y-20&&st<=ht.y+ht.height+20,[ht]),mn=T.useCallback(be=>{if(!Nt)return;const st=c.current,zt=u.current;if(!st||!zt)return;zt.getBoundingClientRect();const At=st.getBoundingClientRect(),Bt=be.clientX-At.left,St=be.clientY-At.top;p(St);const Qn=Bt>=0&&Bt<=mi&&St>=0&&St<=Kn;if(N(Qn),R&&Qn){U&&$(!1);let bn=St;St<0?bn=0:St>Kn&&(bn=Kn),p(bn),Pt(bn)}},[Nt,Pt,R,U]),jn=T.useCallback(be=>{if(!Nt)return;const st=c.current;if(!st)return;const zt=st.getBoundingClientRect(),At=be.clientX-zt.left,Bt=be.clientY-zt.top;if(!R&&hn(At,Bt)){F(!0),$(!1),jt();const St=Math.max(0,Math.min(Kn,Bt));p(St),Pt(St)}},[Nt,R,hn,Pt,jt]),er=T.useCallback(be=>{if(!Nt)return;be.preventDefault();const st=c.current;if(!st)return;const zt=be.touches[0],At=st.getBoundingClientRect();zt.clientX-At.left;const Bt=zt.clientY-At.top;if(p(Bt),N(!0),R||(F(!0),$(!1)),R){const St=Math.max(0,Math.min(Kn,Bt));p(St),Pt(St)}},[Nt,Pt,R]),Wr=T.useCallback(be=>{if(!Nt)return;be.preventDefault();const st=c.current;if(!st)return;const zt=be.touches[0],At=st.getBoundingClientRect(),Bt=zt.clientY-At.top;F(!0),$(!1),N(!0),jt();const St=Math.max(0,Math.min(Kn,Bt));p(St),Pt(St)},[Nt,Pt,jt]),lr=T.useCallback(()=>{Nt&&N(!0)},[Nt]),Yn=T.useCallback(()=>{N(!1)},[]);T.useEffect(()=>{je==="idle"?(on(),F(!1),$(!0)):je==="gameOver"&&(F(!1),$(!0))},[je,on]),T.useEffect(()=>{if(Z==="forest"&&Nt){const be=()=>{const st=Math.random()*3e4+2e4;de.current=setTimeout(()=>{Z==="forest"&&Nt&&yn(),be()},st)};return be(),()=>{de.current&&clearTimeout(de.current),Be.current&&cancelAnimationFrame(Be.current)}}},[Z,Nt]),T.useEffect(()=>{if(Z==="ocean"&&Nt){const be=()=>{const st=Math.random()*25e3+15e3;ue.current=setTimeout(()=>{Z==="ocean"&&Nt&&Te(),be()},st)};return be(),()=>{ue.current&&clearTimeout(ue.current),ve.current&&cancelAnimationFrame(ve.current)}}},[Z,Nt]),T.useEffect(()=>{if(Z==="space"&&Nt){const be=()=>{const st=Math.random()*2e4+1e4;Ke.current=setTimeout(()=>{Z==="space"&&Nt&&Ze(),be()},st)};return be(),()=>{Ke.current&&clearTimeout(Ke.current),Ge.current&&cancelAnimationFrame(Ge.current)}}},[Z,Nt]);const yn=T.useCallback(()=>{pe(!0),Ce(-100),ce(0);const be=()=>{Ce(st=>{const zt=st+1.5;return zt>mi+100?(pe(!1),-100):zt}),ce(st=>(st+1)%4),ye<mi+100&&(Be.current=requestAnimationFrame(be))};Be.current=requestAnimationFrame(be)},[ye]),Te=T.useCallback(()=>{ie(!0),ge(-120),W(0);const be=()=>{ge(st=>{const zt=st+2.5;return zt>mi+120?(ie(!1),-120):zt}),W(st=>(st+1)%6),ae<mi+120&&(ve.current=requestAnimationFrame(be))};ve.current=requestAnimationFrame(be)},[ae]),Ze=T.useCallback(()=>{Ae(!0),Re(Kn+50),it(0),Le(Math.random()*(mi-80)+40);const be=()=>{Re(st=>{const zt=st-4;return zt<-100?(Ae(!1),Kn+50):zt}),it(st=>(st+1)%8),Ne>-100&&(Ge.current=requestAnimationFrame(be))};Ge.current=requestAnimationFrame(be)},[Ne]);T.useEffect(()=>()=>{de.current&&clearTimeout(de.current),Be.current&&cancelAnimationFrame(Be.current),ue.current&&clearTimeout(ue.current),ve.current&&cancelAnimationFrame(ve.current),Ke.current&&clearTimeout(Ke.current),Ge.current&&cancelAnimationFrame(Ge.current)},[]);const le=T.useCallback(()=>{const be=c.current,st=be==null?void 0:be.getContext("2d");if(!be||!st)return;const zt=FXe[Z];if(st.clearRect(0,0,mi,Kn),zt.background.type==="gradient"){const cr=st.createLinearGradient(0,0,mi,Kn);cr.addColorStop(0,zt.background.primary),cr.addColorStop(1,zt.background.secondary||zt.background.primary),st.fillStyle=cr}else st.fillStyle=zt.background.primary;st.fillRect(0,0,mi,Kn),st.strokeStyle=zt.ui.centerLine,st.setLineDash([10,10]),st.lineWidth=2,st.beginPath(),st.moveTo(mi/2,0),st.lineTo(mi/2,Kn),st.stroke(),st.setLineDash([]),st.fillStyle=zt.paddles.ai;const At=Math.min(ke.width,ke.height)/2;Fe(st,ke.x,ke.y,ke.width,ke.height,At),st.fill();const Bt=lt.word.isTarget&&lt.vx>0&&lt.x>mi/2;if(R&&L){st.fillStyle=zt.paddles.player,st.strokeStyle="#00FF00",st.lineWidth=3;const cr=Math.min(ht.width+4,ht.height+4)/2;Fe(st,ht.x-2,ht.y-2,ht.width+4,ht.height+4,cr),st.stroke(),st.shadowColor="#00FF00",st.shadowBlur=10}else if(R&&!L){st.fillStyle=zt.paddles.player,st.strokeStyle="#FFD700",st.lineWidth=3;const cr=Math.min(ht.width+4,ht.height+4)/2;Fe(st,ht.x-2,ht.y-2,ht.width+4,ht.height+4,cr),st.stroke()}else if(st.fillStyle=zt.paddles.player,U&&Nt){st.strokeStyle="rgba(255, 255, 255, 0.5)",st.lineWidth=2,st.setLineDash([5,5]);const cr=Math.min(ht.width+2,ht.height+2)/2;Fe(st,ht.x-1,ht.y-1,ht.width+2,ht.height+2,cr),st.stroke(),st.setLineDash([])}Bt&&R&&(st.shadowColor=zt.effects.targetGlow,st.shadowBlur=20);const St=Math.min(ht.width,ht.height)/2;Fe(st,ht.x,ht.y,ht.width,ht.height,St),st.fill(),st.shadowBlur=0;const Qn=Math.round(lt.x),bn=Math.round(lt.y);st.fillStyle=zt.ball.target,st.beginPath(),st.arc(Qn,bn,lt.radius,0,Math.PI*2),st.fill();const Gr=lt.radius*1.6;let ai=Math.max(14,Math.min(24,lt.radius*.7));ai=Math.round(ai),hW.drawPreRenderedText(st,lt.word.text,Qn,bn,{fontSize:ai,color:zt.text.target,fontFamily:zt.text.fontFamily,maxWidth:Gr,bold:!0},!0),Je(st,zt),qe(),Z==="forest"&&ne&&Ve(st),Z==="ocean"&&me&&wt(st),Z==="space"&&Me&&It(st)},[lt,ht,ke,Z,tt,at,R,L,U,Nt,ne,ye,_e,me,ae,X,Me,Ne,Ie,Ee]),Fe=(be,st,zt,At,Bt,St)=>{be.beginPath(),be.moveTo(st+St,zt),be.lineTo(st+At-St,zt),be.quadraticCurveTo(st+At,zt,st+At,zt+St),be.lineTo(st+At,zt+Bt-St),be.quadraticCurveTo(st+At,zt+Bt,st+At-St,zt+Bt),be.lineTo(st+St,zt+Bt),be.quadraticCurveTo(st,zt+Bt,st,zt+Bt-St),be.lineTo(st,zt+St),be.quadraticCurveTo(st,zt,st+St,zt),be.closePath()},Je=(be,st)=>{be.font=`14px ${st.text.fontFamily}`,be.fillStyle=st.text.primary,be.textAlign="center",!gt&&Nt?(be.fillStyle="rgba(255, 255, 0, 0.9)",be.fillText("🚀 Click on your paddle to start the ball!",mi/2,Kn-40)):!R&&U&&Nt?(be.fillStyle="rgba(255, 255, 0, 0.9)",be.fillText("👆 Click on your paddle to start controlling it!",mi/2,Kn-40)):R&&!L&&Nt?(be.fillStyle="rgba(255, 165, 0, 0.9)",be.fillText("⚠️ Move mouse back over game area to control paddle",mi/2,Kn-40)):R&&L&&Nt&&(be.fillStyle="rgba(0, 255, 0, 0.7)",be.fillText("✅ Paddle engaged - following your cursor",mi/2,Kn-20))},qe=(be,st)=>{},Ve=be=>{const At=Kn-40-10;be.fillStyle="#8B4513",be.fillRect(ye,At,60*.7,40*.6),be.beginPath(),be.arc(ye+60*.8,At+40*.3,40*.3,0,Math.PI*2),be.fill(),be.beginPath(),be.moveTo(ye+60*.65,At+40*.1),be.lineTo(ye+60*.75,At-40*.1),be.lineTo(ye+60*.85,At+40*.1),be.fill(),be.beginPath(),be.moveTo(ye+60*.75,At+40*.1),be.lineTo(ye+60*.85,At-40*.1),be.lineTo(ye+60*.95,At+40*.1),be.fill();const Bt=Math.sin(_e*.5)*10;be.strokeStyle="#8B4513",be.lineWidth=8,be.beginPath(),be.moveTo(ye-60*.1,At+40*.3),be.quadraticCurveTo(ye-60*.3+Bt,At-40*.2,ye-60*.2,At-40*.4),be.stroke();const St=Math.sin(_e*.8)*5;be.fillStyle="#654321",be.fillRect(ye+60*.15+St,At+40*.5,6,40*.4),be.fillRect(ye+60*.25-St,At+40*.5,6,40*.4),be.fillRect(ye+60*.45-St,At+40*.5,6,40*.4),be.fillRect(ye+60*.55+St,At+40*.5,6,40*.4),be.fillStyle="#FFD700",be.beginPath(),be.arc(ye+60*.75,At+40*.25,3,0,Math.PI*2),be.fill(),be.beginPath(),be.arc(ye+60*.85,At+40*.25,3,0,Math.PI*2),be.fill(),be.fillStyle="#000",be.beginPath(),be.arc(ye+60*.75,At+40*.25,1,0,Math.PI*2),be.fill(),be.beginPath(),be.arc(ye+60*.85,At+40*.25,1,0,Math.PI*2),be.fill(),be.strokeStyle="#654321",be.lineWidth=2;for(let Qn=0;Qn<3;Qn++)be.beginPath(),be.moveTo(ye+60*.1+Qn*15,At+40*.2),be.lineTo(ye+60*.2+Qn*15,At+40*.5),be.stroke();be.strokeStyle="#000",be.lineWidth=1,be.beginPath(),be.moveTo(ye+60*.65,At+40*.35),be.lineTo(ye+60*.5,At+40*.3),be.stroke(),be.beginPath(),be.moveTo(ye+60*.65,At+40*.4),be.lineTo(ye+60*.5,At+40*.4),be.stroke(),be.beginPath(),be.moveTo(ye+60*.95,At+40*.35),be.lineTo(ye+60*1.1,At+40*.3),be.stroke(),be.beginPath(),be.moveTo(ye+60*.95,At+40*.4),be.lineTo(ye+60*1.1,At+40*.4),be.stroke()},wt=be=>{const At=Kn/2-20,Bt=Math.sin(X*.3)*8,St=At+Bt;be.fillStyle="#4682B4",be.beginPath(),be.ellipse(ae+80*.5,St+40*.5,80*.4,40*.25,0,0,Math.PI*2),be.fill(),be.beginPath(),be.ellipse(ae+80*.8,St+40*.5,80*.15,40*.15,0,0,Math.PI*2),be.fill(),be.beginPath(),be.moveTo(ae+80*.4,St+40*.25),be.lineTo(ae+80*.5,St-40*.1),be.lineTo(ae+80*.6,St+40*.25),be.fill();const Qn=Math.sin(X*.4)*15;if(be.beginPath(),be.moveTo(ae+80*.1,St+40*.5),be.lineTo(ae-80*.1,St+40*.3+Qn),be.lineTo(ae-80*.05,St+40*.5),be.lineTo(ae-80*.1,St+40*.7-Qn),be.closePath(),be.fill(),be.beginPath(),be.ellipse(ae+80*.45,St+40*.65,80*.12,40*.08,.3,0,Math.PI*2),be.fill(),be.fillStyle="#000080",be.beginPath(),be.arc(ae+80*.7,St+40*.4,4,0,Math.PI*2),be.fill(),be.fillStyle="#87CEEB",be.beginPath(),be.arc(ae+80*.72,St+40*.38,2,0,Math.PI*2),be.fill(),be.strokeStyle="#5F9EA0",be.lineWidth=2,be.beginPath(),be.moveTo(ae+80*.3,St+40*.35),be.quadraticCurveTo(ae+80*.5,St+40*.25,ae+80*.7,St+40*.35),be.stroke(),be.beginPath(),be.moveTo(ae+80*.25,St+40*.65),be.quadraticCurveTo(ae+80*.45,St+40*.75,ae+80*.65,St+40*.65),be.stroke(),X%8===0)for(let bn=0;bn<3;bn++){const Gr=ae-20-bn*15,ai=St+40*.3+(Math.random()-.5)*20;be.fillStyle="rgba(173, 216, 230, 0.6)",be.beginPath(),be.arc(Gr,ai,2+Math.random()*3,0,Math.PI*2),be.fill()}},It=be=>{const At=Ee,Bt=Ne;be.fillStyle="#C0C0C0",be.fillRect(At,Bt,30,80*.7),be.fillStyle="#FF4500",be.beginPath(),be.moveTo(At,Bt),be.lineTo(At+30/2,Bt-80*.3),be.lineTo(At+30,Bt),be.closePath(),be.fill(),be.fillStyle="#8B0000",be.beginPath(),be.moveTo(At-30*.2,Bt+80*.5),be.lineTo(At,Bt+80*.7),be.lineTo(At,Bt+80*.4),be.closePath(),be.fill(),be.beginPath(),be.moveTo(At+30+30*.2,Bt+80*.5),be.lineTo(At+30,Bt+80*.7),be.lineTo(At+30,Bt+80*.4),be.closePath(),be.fill(),be.fillStyle="#87CEEB",be.beginPath(),be.arc(At+30/2,Bt+80*.25,30*.15,0,Math.PI*2),be.fill(),be.strokeStyle="#2F4F4F",be.lineWidth=2,be.beginPath(),be.arc(At+30/2,Bt+80*.25,30*.15,0,Math.PI*2),be.stroke(),be.strokeStyle="#696969",be.lineWidth=1,be.beginPath(),be.moveTo(At+30*.1,Bt+80*.15),be.lineTo(At+30*.9,Bt+80*.15),be.stroke(),be.beginPath(),be.moveTo(At+30*.1,Bt+80*.45),be.lineTo(At+30*.9,Bt+80*.45),be.stroke();const St=40+Math.sin(Ie*.8)*15,Qn=.7+Math.sin(Ie*1.2)*.3;if(be.fillStyle=`rgba(255, 69, 0, ${Qn})`,be.beginPath(),be.moveTo(At+30*.2,Bt+80*.7),be.lineTo(At+30/2,Bt+80*.7+St),be.lineTo(At+30*.8,Bt+80*.7),be.closePath(),be.fill(),be.fillStyle=`rgba(255, 255, 0, ${Qn*.8})`,be.beginPath(),be.moveTo(At+30*.3,Bt+80*.7),be.lineTo(At+30/2,Bt+80*.7+St*.7),be.lineTo(At+30*.7,Bt+80*.7),be.closePath(),be.fill(),be.fillStyle=`rgba(255, 255, 255, ${Qn*.6})`,be.beginPath(),be.moveTo(At+30*.4,Bt+80*.7),be.lineTo(At+30/2,Bt+80*.7+St*.4),be.lineTo(At+30*.6,Bt+80*.7),be.closePath(),be.fill(),Ie%3===0)for(let bn=0;bn<5;bn++){const Gr=At+9+Math.random()*30*.4,ai=Bt+80*.8+Math.random()*30;be.fillStyle=`rgba(255, ${100+Math.random()*155}, 0, 0.8)`,be.beginPath(),be.arc(Gr,ai,1+Math.random()*2,0,Math.PI*2),be.fill()}if(Ie%4===0)for(let bn=0;bn<3;bn++){const Gr=At+15+(Math.random()-.5)*20,ai=Bt+80+20+bn*15;be.fillStyle=`rgba(169, 169, 169, ${.4-bn*.1})`,be.beginPath(),be.arc(Gr,ai,3+bn,0,Math.PI*2),be.fill()}},Ct=T.useCallback(()=>{if(je==="playing"){const be=Math.sqrt(lt.vx*lt.vx+lt.vy*lt.vy);K(be);const st=vt();st&&st.type==="bounce"&&Yt(),le()}else je==="gameOver"&&(e&&e(tt,mt),o&&w(tt,s));je!=="idle"&&(d.current=requestAnimationFrame(Ct))},[je,vt,le,tt,mt,e,o,s,w,Yt,lt]);T.useEffect(()=>(je==="playing"&&(d.current=requestAnimationFrame(Ct)),()=>{d.current&&cancelAnimationFrame(d.current)}),[je,Ct]),T.useEffect(()=>()=>{d.current&&cancelAnimationFrame(d.current)},[]);const Wt=()=>{je==="playing"?Pe():je==="paused"&&Ue()},ln=()=>{Xe()},vn=be=>{const st=Math.floor(be/60),zt=be%60;return`${st}:${zt.toString().padStart(2,"0")}`};return h.jsxs("div",{className:"word-volley-game",children:[h.jsx(sd,{gameTitle:"Pong",variant:"compact"}),h.jsxs("div",{className:"game-container",children:[h.jsxs("div",{style:{padding:"12px 24px",background:"#f8f9fa",borderRadius:"12px 12px 0 0",display:"flex",flexDirection:"column",gap:"8px",marginBottom:"-12px",position:"relative",zIndex:1},children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[h.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"#dc2626"},children:["AI: ",yt]}),h.jsxs("div",{style:{fontSize:"1.4rem",fontWeight:"bold",color:Ot<=30?"#dc2626":Ot<=60?"#ea580c":"#1f2937",textAlign:"center",animation:Ot<=30?"pulse 1s ease-in-out infinite":"none"},children:["⏰ ",vn(Ot)]}),h.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"#2563eb"},children:["Player: ",tt]})]}),h.jsxs("div",{style:{textAlign:"center",fontSize:"0.9rem",color:"#6b7280",fontWeight:"500",padding:"6px 12px",background:"rgba(255, 255, 255, 0.7)",borderRadius:"6px",border:"1px solid rgba(0, 0, 0, 0.1)"},children:["Hit: ",h.jsx("strong",{style:{color:"#059669"},children:et.categoryName})," words | Avoid: ",h.jsxs("strong",{style:{color:"#dc2626"},children:["Non-",et.categoryName]})," words"]}),q&&h.jsxs("div",{style:{textAlign:"center",fontSize:"0.8rem",color:"#374151",fontWeight:"500",padding:"4px 8px",background:"rgba(59, 130, 246, 0.1)",borderRadius:"4px",border:"1px solid rgba(59, 130, 246, 0.3)",fontFamily:"monospace"},children:["Speed Debug: ",h.jsxs("strong",{children:[G.toFixed(2)," px/frame"]})," | vx: ",h.jsx("strong",{children:lt.vx.toFixed(2)}),", vy: ",h.jsx("strong",{children:lt.vy.toFixed(2)})," | Config: ",h.jsx("strong",{children:et.initialSpeed.toFixed(2)}),h.jsx("button",{onClick:()=>z(!1),style:{marginLeft:"8px",padding:"2px 6px",fontSize:"0.7rem",background:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.5)",borderRadius:"3px",cursor:"pointer"},children:"Hide"})]}),!q&&h.jsx("button",{onClick:()=>z(!0),style:{padding:"4px 8px",fontSize:"0.8rem",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"4px",cursor:"pointer",color:"#374151"},children:"Show Speed Debug"})]}),h.jsxs("div",{className:"canvas-container",ref:u,onMouseMove:mn,onClick:jn,onTouchMove:er,onTouchStart:Wr,onMouseEnter:lr,onMouseLeave:Yn,style:{cursor:R&&L?"none":"pointer"},children:[h.jsx("canvas",{ref:c,width:mi,height:Kn,className:`game-canvas ball-text-optimized theme-${Z} ${R?"paddle-engaged":""}`,style:{touchAction:"none"}}),je==="paused"&&h.jsx("div",{className:"game-overlay",children:h.jsxs("div",{className:"pause-message",children:[h.jsx("h3",{children:"Game Paused"}),h.jsx("button",{className:"resume-button",onClick:Wt,children:"Resume"})]})}),je==="gameOver"&&!g&&h.jsx("div",{className:"game-overlay",children:h.jsxs("div",{className:"start-message",children:[h.jsx("h3",{children:"Game Complete!"}),h.jsxs("p",{children:["Final Score: ",tt]}),h.jsxs("p",{children:["Time: ",Math.floor(mt/60),":",(mt%60).toString().padStart(2,"0")]}),h.jsxs("p",{children:["Words Processed: ",rn]}),h.jsxs("p",{children:["Level Reached: ",at]}),h.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center",flexWrap:"wrap",marginTop:"20px"},children:[h.jsx("button",{className:"start-button",onClick:ln,children:"Play Again"}),l&&h.jsx("button",{className:"start-button",onClick:A,disabled:E,style:{background:E?"#6c757d":"linear-gradient(135deg, #007bff, #0056b3)",cursor:E?"not-allowed":"pointer"},children:E?"⏳ Loading...":"🏆 View Leaderboard"}),i&&h.jsx("button",{className:"start-button",onClick:i,style:{background:"#6c757d"},children:"Exit Game"})]})]})})]}),h.jsxs("div",{style:{padding:"16px 24px",background:"#f8f9fa",borderRadius:"12px",marginTop:"0px",display:"flex",flexDirection:"column",gap:"12px"},children:[h.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[h.jsx("button",{onClick:Wt,disabled:je!=="playing"&&je!=="paused",style:{background:je!=="playing"&&je!=="paused"?"#6c757d":"linear-gradient(135deg, #ffc107, #fd7e14)",border:"none",borderRadius:"20px",color:"white",padding:"10px 20px",fontSize:"0.9rem",fontWeight:"600",cursor:je!=="playing"&&je!=="paused"?"not-allowed":"pointer",transition:"all 0.2s ease",opacity:je!=="playing"&&je!=="paused"?.6:1},children:je==="paused"?"▶️ Resume":"⏸️ Pause"}),h.jsx("button",{onClick:ln,style:{background:"linear-gradient(135deg, #dc3545, #e83e8c)",border:"none",borderRadius:"20px",color:"white",padding:"10px 20px",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:"🔄 Reset"}),h.jsx("button",{onClick:en,style:{background:"linear-gradient(135deg, #6f42c1, #e83e8c)",border:"none",borderRadius:"20px",color:"white",padding:"10px 20px",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:fn?"🔇 Unmute":"🔊 Mute"}),h.jsx("button",{onClick:oe,style:{background:"linear-gradient(135deg, #17a2b8, #20c997)",border:"none",borderRadius:"20px",color:"white",padding:"10px 20px",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:V?"🗣️ TTS On":"🔇 TTS Off"}),l&&h.jsx("button",{onClick:A,disabled:E,style:{background:E?"#6c757d":"linear-gradient(135deg, #007bff, #0056b3)",border:"none",borderRadius:"20px",color:"white",padding:"10px 20px",fontSize:"0.9rem",fontWeight:"600",cursor:E?"not-allowed":"pointer",transition:"all 0.2s ease"},children:E?"⏳ Loading...":"🏆 Leaderboard"})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[h.jsx("label",{style:{fontSize:"0.9rem",fontWeight:"600",color:"#495057"},children:"🎨 Theme:"}),h.jsxs("select",{value:Z,onChange:be=>{const st=be.target.value;ee(st),console.log("Theme changed to:",st)},style:{padding:"8px 12px",borderRadius:"15px",border:"2px solid #dee2e6",background:"white",fontSize:"0.9rem",fontWeight:"500",color:"#495057",cursor:"pointer",transition:"all 0.2s ease",outline:"none"},onFocus:be=>{be.target.style.borderColor="#667eea",be.target.style.boxShadow="0 0 0 3px rgba(102, 126, 234, 0.1)"},onBlur:be=>{be.target.style.borderColor="#dee2e6",be.target.style.boxShadow="none"},children:[h.jsx("option",{value:"classic",children:"Classic Pong"}),h.jsx("option",{value:"space",children:"Space Adventure"}),h.jsx("option",{value:"neon",children:"Neon Cyber"}),h.jsx("option",{value:"ocean",children:"Ocean Depths"}),h.jsx("option",{value:"forest",children:"Enchanted Forest"})]})]}),h.jsx("button",{onClick:()=>H(!0),style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",borderRadius:"20px",color:"white",padding:"10px 20px",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(102, 126, 234, 0.3)"},onMouseEnter:be=>{be.currentTarget.style.transform="translateY(-1px)",be.currentTarget.style.boxShadow="0 4px 12px rgba(102, 126, 234, 0.4)"},onMouseLeave:be=>{be.currentTarget.style.transform="translateY(0)",be.currentTarget.style.boxShadow="0 2px 8px rgba(102, 126, 234, 0.3)"},children:"📊 How Scoring Works"})]})]})]}),B&&h.jsx("div",{className:"game-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3},children:h.jsxs("div",{className:"start-message",style:{maxWidth:"700px",width:"95%"},children:[h.jsx("h3",{children:"📊 How Scoring Works"}),h.jsxs("div",{style:{display:"flex",gap:"20px",marginBottom:"20px",flexWrap:"wrap"},children:[h.jsxs("div",{style:{flex:"1",minWidth:"300px",textAlign:"left"},children:[h.jsx("h4",{style:{color:"#4CAF50",marginBottom:"10px"},children:"🎯 Player Scoring"}),h.jsxs("div",{style:{marginBottom:"15px"},children:[h.jsx("strong",{style:{color:"#4CAF50"},children:"Positive Points:"}),h.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px"},children:[h.jsxs("li",{children:[h.jsx("strong",{children:"+10 points"})," - When you hit a target word (correct category)"]}),h.jsxs("li",{children:[h.jsx("strong",{children:"+10 points"})," - When the AI misses a target word (bonus for AI mistakes)"]})]})]}),h.jsxs("div",{children:[h.jsx("strong",{style:{color:"#f44336"},children:"Negative Points:"}),h.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px"},children:[h.jsxs("li",{children:[h.jsx("strong",{children:"-5 points"})," - When you hit a non-target word (wrong category)"]}),h.jsxs("li",{children:[h.jsx("strong",{children:"-5 points"})," - When you miss a target word (ball goes off your side)"]})]})]})]}),h.jsxs("div",{style:{flex:"1",minWidth:"300px",textAlign:"left"},children:[h.jsx("h4",{style:{color:"#FF9800",marginBottom:"10px"},children:"🤖 AI Scoring"}),h.jsxs("div",{style:{marginBottom:"15px"},children:[h.jsx("strong",{style:{color:"#4CAF50"},children:"Positive Points:"}),h.jsx("ul",{style:{margin:"5px 0",paddingLeft:"20px"},children:h.jsxs("li",{children:[h.jsx("strong",{children:"+10 points"})," - When AI hits a target word (AI plays correctly)"]})})]}),h.jsxs("div",{style:{marginBottom:"15px"},children:[h.jsx("strong",{style:{color:"#f44336"},children:"Negative Points:"}),h.jsx("ul",{style:{margin:"5px 0",paddingLeft:"20px"},children:h.jsxs("li",{children:[h.jsx("strong",{children:"-5 points"})," - When AI hits a non-target word (AI makes mistake)"]})})]}),h.jsxs("div",{children:[h.jsx("strong",{style:{color:"#757575"},children:"No penalty:"}),h.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px"},children:[h.jsx("li",{children:"When AI misses a target word (you get the bonus instead)"}),h.jsx("li",{children:"When AI correctly avoids a non-target word"})]})]})]})]}),h.jsxs("div",{style:{background:"rgba(33, 150, 243, 0.1)",border:"1px solid rgba(33, 150, 243, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"20px",textAlign:"left"},children:[h.jsx("strong",{style:{color:"#2196F3"},children:"💡 Pro Tip:"})," You score best by hitting target words and capitalizing on AI mistakes!"]}),h.jsx("button",{className:"start-button",onClick:()=>H(!1),style:{marginTop:"10px"},children:"Got It!"})]})}),h.jsx(pF,{isOpen:g,onClose:()=>x(!1),score:tt,isNewHighScore:m,highScores:v,scoringSystem:"points-based",gameTitle:"Word Volley",timeElapsed:mt,additionalStats:[{label:"Words Processed",value:rn,colorScheme:"blue"},{label:"Level Reached",value:at,colorScheme:"purple"},{label:"Category",value:et.categoryName||"Words",colorScheme:"green"}],isSubmittingScore:S,onPlayAgain:ln,customActions:i?[{label:"Exit Game",onClick:i,colorScheme:"gray",variant:"outline"}]:void 0}),h.jsx(pF,{isOpen:P,onClose:()=>I(!1),score:tt,isNewHighScore:!1,highScores:M,scoringSystem:"points-based",gameTitle:"Word Volley - General Leaderboard",timeElapsed:mt,additionalStats:[{label:"Words Processed",value:rn,colorScheme:"blue"},{label:"Level Reached",value:at,colorScheme:"purple"},{label:"Your Score",value:tt,colorScheme:"orange"}],isSubmittingScore:!1,onPlayAgain:ln,customActions:[{label:"Close Leaderboard",onClick:()=>I(!1),colorScheme:"blue",variant:"solid"},...i?[{label:"Exit Game",onClick:i,colorScheme:"gray",variant:"outline"}]:[]]})]})},Ite=({gameConfig:t,playerName:e,onGameComplete:n,onHighScoreProcessStart:r,onHighScoreProcessComplete:i})=>{var p,b,v,m;const o=Pr(),a=40+((t.paddleSize||5)-1)/9*40,c=3+((t.gameSpeed||5)-2)/13*12,u={gameTime:(t.gameDuration||3)*60,paddleSize:a,initialSpeed:c,categoryName:((p=t.targetCategory)==null?void 0:p.name)||"Words",targetWords:((b=t.targetCategory)==null?void 0:b.words)||[],nonTargetWords:((v=t.nonTargetCategory)==null?void 0:v.words)||[],enableTextToSpeech:(m=t.enableTextToSpeech)!=null?m:!0,theme:"classic",maxLives:3,speedIncrement:1,wordsPerLevel:10,enableSound:!0},d=(g,x)=>{n(g)},f=()=>{o(-1)};return h.jsx(zXe,{gameConfig:u,onGameComplete:d,onHighScoreProcessStart:r,onHighScoreProcessComplete:i,configId:t.id,playerName:e,onGameExit:f})},$L=()=>{const[t,e]=T.useState(null),n=T.useCallback(r=>{e(r),setTimeout(()=>{e(null)},r.duration)},[]);return{toastMessage:t,showToast:n}},VXe=({toastMessage:t})=>{if(!t)return null;const e=n=>{switch(n){case"success":return"bg-green-500";case"error":return"bg-red-500";case"warning":return"bg-yellow-500";case"info":return"bg-blue-500";default:return"bg-gray-500"}};return h.jsxs("div",{className:`fixed top-4 right-4 p-4 rounded-lg text-white ${e(t.status)} shadow-lg transition-opacity duration-300`,style:{zIndex:1e3},children:[h.jsx("h3",{className:"font-bold",children:t.title}),t.description&&h.jsx("p",{className:"mt-1",children:t.description})]})},WXe=()=>{const{configId:t}=Pd(),[e,n]=T.useState(null),[r,i]=T.useState(!0),{showToast:o}=$L();T.useEffect(()=>{te(nt,null,function*(){if(!t){o({title:"Configuration ID missing",description:"No game configuration ID was provided.",status:"error",duration:3e3}),i(!1);return}try{const c=an(bt,"userGameConfigs",t),u=yield si(c);if(u.exists()){const d=j({id:u.id},u.data());n(d)}else o({title:"Configuration not found",description:"The game configuration could not be found.",status:"error",duration:3e3})}catch(c){console.error("Error loading game configuration:",c),o({title:"Error loading configuration",description:"There was an error loading the game configuration.",status:"error",duration:3e3})}finally{i(!1)}})},[t,o]);const s=T.useCallback(l=>{o({title:"Game Complete!",description:`You scored ${l} points!`,status:"success",duration:5e3})},[o]);if(r)return h.jsx(mC,{maxW:"container.xl",centerContent:!0,children:h.jsx(cu,{p:8,children:h.jsx(Fa,{size:"xl"})})});if(!e)return null;const a=()=>{switch(e.type){case"whack-a-mole":return h.jsx(Ate,{playerName:"Player",onGameComplete:s,config:e});case"sort-categories-egg":return h.jsx(Lee,{playerName:"Player",onGameComplete:s,config:e});case"spinner-wheel":return h.jsx(Mte,{onGameComplete:s,config:e});case"anagram":return h.jsx(Pte,{playerName:"Player",onGameComplete:s,config:e});case"sentence-sense":return h.jsx(Dte,{playerName:"Player",onGameComplete:s,config:e});case"place-value-showdown":return h.jsx(Rte,{playerName:"Player",onGameComplete:s,config:e});case"word-volley":return h.jsx(Ite,{gameConfig:e,playerName:"Player",onGameComplete:s});default:return h.jsxs(ft,{children:["Invalid game configuration type: ",e.type]})}};return h.jsx(mC,{maxW:"container.xl",p:4,children:a()})},KT="gameFolders",pW=3,kte=(t,e=[],n=null,r=0)=>t.filter(o=>(o.parentId===void 0?null:o.parentId)===n).map(o=>{const s=kte(t,e,o.id,r+1),l=e.filter(c=>c.folderId===o.id).length+s.reduce((c,u)=>c+(u.gameCount||0),0);return se(j({},o),{children:s,level:r,gameCount:l,isExpanded:r<2})}).sort((o,s)=>(o.order||0)-(s.order||0)),YC=(t,e)=>{if(!e)return!0;let n=0,r=e;for(;r&&n<=pW;){const i=t.find(o=>o.id===r);if(!i)break;n++,r=i.parentId||null}return n<=pW},XC=(t,e)=>{const n=[];return t.filter(i=>i.parentId===e).forEach(i=>{n.push(i.id),n.push(...XC(t,i.id))}),n},$Xe=(t,e)=>{const n=[];let r=e;for(;r;){const i=t.find(o=>o.id===r);if(!i)break;n.unshift(i),r=i.parentId||null}return n},HXe=(t,e)=>YC(t,e),GXe=(t,e,n)=>n?e===n?!1:!XC(t,e).includes(n):!0,ND=t=>te(nt,null,function*(){const e=yield Fte(t.userId);if(!YC(e,t.parentId||null))throw new Error("Cannot create folder: would exceed maximum depth of 4 levels");const n=new Date;return(yield yc(Tn(bt,KT),se(j({},t),{createdAt:n,updatedAt:n,depth:qXe(e,t.parentId||null)}))).id}),Fte=t=>te(nt,null,function*(){try{const e=mr(Tn(bt,KT),Bn("userId","==",t),f0("order","asc"));return(yield Xn(e)).docs.map(r=>{var i,o;return se(j({id:r.id},r.data()),{createdAt:((i=r.data().createdAt)==null?void 0:i.toDate())||new Date,updatedAt:((o=r.data().updatedAt)==null?void 0:o.toDate())||new Date})})}catch(e){throw console.error("Error fetching folders:",e),e}}),c_=(t,e)=>te(nt,null,function*(){const n=an(bt,KT,t);yield Os(n,se(j({},e),{updatedAt:new Date}))}),LD=t=>te(nt,null,function*(){const e=an(bt,KT,t);yield tu(e)}),u_=(t,e,n)=>te(nt,null,function*(){try{return yield gE(t,n),(yield yc(Tn(bt,"gameFolderAssignments"),{gameId:t,folderId:e,userId:n,assignedAt:wr.now()})).id}catch(r){throw console.error("Error assigning game to folder:",r),r}}),gE=(t,e)=>te(nt,null,function*(){try{const n=mr(Tn(bt,"gameFolderAssignments"),Bn("gameId","==",t),Bn("userId","==",e)),r=yield Xn(n),i=lL(bt);r.docs.forEach(o=>{i.delete(o.ref)}),yield i.commit()}catch(n){throw console.error("Error removing game from folder:",n),n}}),mW=t=>te(nt,null,function*(){try{const e=mr(Tn(bt,"gameFolderAssignments"),Bn("userId","==",t));return(yield Xn(e)).docs.map(r=>j({id:r.id},r.data()))}catch(e){throw console.error("Error fetching game folder assignments:",e),e}}),qXe=(t,e)=>{if(!e)return 0;const n=t.find(r=>r.id===e);return n?(n.depth||0)+1:0},KXe=t=>{let e=0,n=0,r=0;const i=(o,s=0)=>{o.forEach(a=>{e++,n+=a.gameCount||0,r=Math.max(r,s),a.children.length>0&&i(a.children,s+1)})};return i(t),{totalFolders:e,totalGames:n,maxDepth:r}},YXe=({userId:t,games:e,onGamesUpdate:n,onShowToast:r})=>{const[i,o]=T.useState([]),[s,a]=T.useState([]),[l,c]=T.useState(null),[u,d]=T.useState(!1),[f,p]=T.useState(null),[b,v]=T.useState(new Set),[m,g]=T.useState([]),[x,w]=T.useState([]),{showModal:S}=Rl(),P=m.length>0,I=x.length>0,M=T.useCallback(de=>{g(me=>[...me,de]),w([])},[]),D=T.useMemo(()=>kte(i,e),[i,e]),E=T.useCallback(()=>te(nt,null,function*(){if(t){d(!0),p(null);try{const[de,me]=yield Promise.all([Fte(t),mW(t)]);o(de),a(me);const ie=new Set;de.forEach(ae=>{(ae.depth||0)<2&&ie.add(ae.id)}),v(ie)}catch(de){const me=de instanceof Error?de.message:"Failed to load folder data";console.error("Error loading folders:",de),p(me),r({title:"Error Loading Folders",description:me,status:"error",duration:5e3})}finally{d(!1)}}}),[t,r]);T.useEffect(()=>{t&&E()},[t,E]),T.useEffect(()=>{te(nt,null,function*(){if(!(!t||i.length===0||e.length===0))try{const me=yield mW(t);if(me.length===0)return;const ie=new Map;me.forEach(X=>{const W=i.find(ve=>ve.id===X.folderId);W&&ie.set(X.gameId,{folderId:W.id,folderName:W.name,folderColor:W.color})});const ae=e.map(X=>{const W=ie.get(X.id);return W?se(j({},X),{folderId:W.folderId,folderName:W.folderName,folderColor:W.folderColor}):X});ae.some((X,W)=>X.folderId!==e[W].folderId||X.folderName!==e[W].folderName||X.folderColor!==e[W].folderColor)&&n(ae)}catch(me){console.error("📁 Error loading game folder assignments:",me),r({title:"Error loading folder assignments",status:"error",duration:3e3})}})},[t,i,e,n,r]);const _=T.useCallback(de=>te(nt,null,function*(){if(t){d(!0),p(null);try{if(!YC(i,de.parentId||null))throw new Error("Cannot create folder: would exceed maximum depth of 4 levels");const me=yield ND(se(j({},de),{userId:t}));yield E();const ie={type:"CREATE_FOLDER",description:`Create folder "${de.name}"`,undoAction:()=>te(nt,null,function*(){yield LD(me),yield E(),l===me&&c(null)}),redoAction:()=>te(nt,null,function*(){yield ND(se(j({},de),{userId:t})),yield E()}),timestamp:Date.now()};M(ie),r({title:"Folder Created",description:`"${de.name}" has been created successfully`,status:"success",duration:3e3}),c(me)}catch(me){const ie=me instanceof Error?me.message:"Failed to create folder";p(ie),r({title:"Error Creating Folder",description:ie,status:"error",duration:5e3})}finally{d(!1)}}}),[t,i,E,r,M,l]),A=T.useCallback((de,me)=>te(nt,null,function*(){d(!0),p(null);try{const ie=i.find(ge=>ge.id===de);if(!ie)throw new Error("Folder not found");yield c_(de,me),yield E();const ae={type:"UPDATE_FOLDER",description:`Update folder "${me.name||ie.name}"`,undoAction:()=>te(nt,null,function*(){yield c_(de,{name:ie.name,description:ie.description,color:ie.color}),yield E()}),redoAction:()=>te(nt,null,function*(){yield c_(de,me),yield E()}),timestamp:Date.now()};M(ae),r({title:"Folder Updated",description:"Folder has been updated successfully",status:"success",duration:3e3})}catch(ie){const ae=ie instanceof Error?ie.message:"Failed to update folder";p(ae),r({title:"Error Updating Folder",description:ae,status:"error",duration:5e3})}finally{d(!1)}}),[t,i,E,r,M]),R=T.useCallback(de=>te(nt,null,function*(){d(!0),p(null);try{if(XC(i,de).length>0)throw new Error("Cannot delete folder with subfolders. Please delete subfolders first or move them to another location.");const ie=q(de);if(ie.length>0)throw new Error(`Cannot delete folder with ${ie.length} game(s). Please move games to another folder first.`);const ae=i.find(X=>X.id===de);if(!ae)throw new Error("Folder not found");yield LD(de),yield E();const ge={type:"DELETE_FOLDER",description:`Delete folder "${ae.name}"`,undoAction:()=>te(nt,null,function*(){yield ND({name:ae.name,description:ae.description,color:ae.color,parentId:ae.parentId,order:ae.order,userId:ae.userId}),yield E()}),redoAction:()=>te(nt,null,function*(){yield LD(de),yield E(),l===de&&c(null)}),timestamp:Date.now()};M(ge),l===de&&c(null),r({title:"Folder Deleted",description:"Folder has been deleted successfully",status:"success",duration:3e3})}catch(me){const ie=me instanceof Error?me.message:"Failed to delete folder";p(ie),r({title:"Error Deleting Folder",description:ie,status:"error",duration:5e3})}finally{d(!1)}}),[t,l,i,E,r,M]),F=T.useCallback((de,me)=>te(nt,null,function*(){if(t)try{const ie=e.find(W=>W.id===de),ae=i.find(W=>W.id===me);yield u_(de,me,t),yield E();const ge=e.map(W=>W.id===de?se(j({},W),{folderId:me,folderName:(ae==null?void 0:ae.name)||"Unknown Folder",folderColor:(ae==null?void 0:ae.color)||"#3182CE"}):W);n(ge);const X={type:"MOVE_GAME",description:`Move "${(ie==null?void 0:ie.title)||"game"}" to "${(ae==null?void 0:ae.name)||"folder"}"`,undoAction:()=>te(nt,null,function*(){ie!=null&&ie.folderId?yield u_(de,ie.folderId,t):yield gE(de,t),yield E();const W=e.map(ve=>ve.id===de?se(j({},ve),{folderId:ie==null?void 0:ie.folderId,folderName:ie==null?void 0:ie.folderName,folderColor:ie==null?void 0:ie.folderColor}):ve);n(W)}),redoAction:()=>te(nt,null,function*(){yield u_(de,me,t),yield E();const W=e.map(ve=>ve.id===de?se(j({},ve),{folderId:me,folderName:(ae==null?void 0:ae.name)||"Unknown Folder",folderColor:(ae==null?void 0:ae.color)||"#3182CE"}):ve);n(W)}),timestamp:Date.now()};M(X),r({title:"Game Assigned",description:"Game has been assigned to folder successfully",status:"success",duration:3e3})}catch(ie){const ae=ie instanceof Error?ie.message:"Failed to assign game to folder";r({title:"Error Assigning Game",description:ae,status:"error",duration:5e3})}}),[t,e,i,E,n,r,M]),L=T.useCallback(de=>te(nt,null,function*(){if(t)try{const me=e.find(ae=>ae.id===de);yield gE(de,t),yield E();const ie=e.map(ae=>ae.id===de?se(j({},ae),{folderId:void 0,folderName:void 0,folderColor:void 0}):ae);if(n(ie),me!=null&&me.folderId){const ae={type:"MOVE_GAME",description:`Remove "${me.title||"game"}" from "${me.folderName||"folder"}"`,undoAction:()=>te(nt,null,function*(){yield u_(de,me.folderId,t),yield E();const ge=e.map(X=>X.id===de?se(j({},X),{folderId:me.folderId,folderName:me.folderName,folderColor:me.folderColor}):X);n(ge)}),redoAction:()=>te(nt,null,function*(){yield gE(de,t),yield E();const ge=e.map(X=>X.id===de?se(j({},X),{folderId:void 0,folderName:void 0,folderColor:void 0}):X);n(ge)}),timestamp:Date.now()};M(ae)}r({title:"Game Removed",description:"Game has been removed from folder successfully",status:"success",duration:3e3})}catch(me){const ie=me instanceof Error?me.message:"Failed to remove game from folder";r({title:"Error Removing Game",description:ie,status:"error",duration:5e3})}}),[t,e,E,n,r,M]),N=T.useCallback(de=>te(nt,null,function*(){var ge;console.log("🎯 Handling drop operation:",de);const{draggedItem:me,targetFolderId:ie,newParentId:ae}=de;d(!0),p(null);try{if(me.type==="folder"){const X=me.data;if(console.log("📁 Moving folder:",X.name,"to parent:",ae||"root"),!GXe(i,X.id,ae||null))throw new Error("Invalid folder move: would create circular reference");if(!YC(i,ae||null))throw new Error("Invalid folder move: would exceed maximum depth of 4 levels");const W=ae?(((ge=i.find(ve=>ve.id===ae))==null?void 0:ge.depth)||0)+1:0;yield c_(X.id,{parentId:ae||null,depth:W}),yield E(),r({title:"Folder Moved",description:`"${X.name}" has been moved successfully`,status:"success",duration:3e3})}else if(me.type==="game"){const X=me.data;console.log("🎮 Moving game:",X.title,"to target:",ie),ie==="unorganized"?(yield L(X.id),r({title:"Game Unorganized",description:`"${X.title}" has been removed from folder`,status:"success",duration:3e3})):ie&&(yield F(X.id,ie),r({title:"Game Organized",description:`"${X.title}" has been moved to folder`,status:"success",duration:3e3}))}}catch(X){const W=X instanceof Error?X.message:"Failed to move item";console.error("🎯 Drop operation failed:",X),p(W),r({title:"Move Failed",description:W,status:"error",duration:5e3})}finally{d(!1)}}),[i,E,F,L,r]),U=T.useCallback(de=>{v(me=>new Set([...me,de]))},[]),$=T.useCallback(de=>{v(me=>{const ie=new Set(me);return ie.delete(de),ie})},[]),B=T.useCallback(de=>{c(de)},[]),H=T.useCallback(de=>$Xe(i,de),[i]),q=T.useCallback(de=>e.filter(me=>me.folderId===de),[e]),z=T.useCallback(de=>{const me=[de,...XC(i,de)];return e.filter(ie=>ie.folderId&&me.includes(ie.folderId))},[e,i]),G=T.useCallback(()=>e.filter(de=>!de.folderId),[e]),K=T.useCallback(de=>HXe(i,de),[i]),Z=T.useCallback(()=>KXe(D),[D]),ee=T.useCallback(de=>{const me=de.toLowerCase();return i.filter(ie=>ie.name.toLowerCase().includes(me)||ie.description.toLowerCase().includes(me))},[i]),V=T.useCallback(()=>te(nt,null,function*(){yield E()}),[E]),J=V,oe=T.useCallback(de=>{const me=de!==void 0?de:l;S("createFolder",{onSave:ie=>te(nt,null,function*(){yield _(se(j({},ie),{parentId:me,order:i.length,userId:t}))})})},[S,_,l,i.length,t]),ne=T.useCallback(de=>{S("editFolder",{folder:de,onSave:me=>te(nt,null,function*(){yield A(de.id,me)})})},[S,A]),pe=T.useCallback(()=>te(nt,null,function*(){if(m.length===0)return;const de=m[m.length-1];try{yield de.undoAction(),g(me=>me.slice(0,-1)),w(me=>[...me,de]),r({title:"Action Undone",description:`Undid: ${de.description}`,status:"info",duration:3e3})}catch(me){r({title:"Undo Failed",description:"Could not undo the last action",status:"error",duration:3e3})}}),[m,r]),ye=T.useCallback(()=>te(nt,null,function*(){if(x.length===0)return;const de=x[x.length-1];try{yield de.redoAction(),w(me=>me.slice(0,-1)),g(me=>[...me,de]),r({title:"Action Redone",description:`Redid: ${de.description}`,status:"info",duration:3e3})}catch(me){r({title:"Redo Failed",description:"Could not redo the action",status:"error",duration:3e3})}}),[x,r]),Ce=T.useCallback(()=>{g([]),w([]),r({title:"History Cleared",description:"Undo/redo history has been cleared",status:"info",duration:2e3})},[r]),_e=T.useCallback((de,me)=>te(nt,null,function*(){me?yield A(me,de):yield _(se(j({},de),{parentId:null,order:i.length,userId:t}))}),[A,_,i.length,t]),ce=T.useCallback(de=>te(nt,null,function*(){yield R(de)}),[R]),Be=T.useCallback(()=>{},[]);return{folders:i,folderTree:D,assignments:s,selectedFolderId:l,isLoading:u,error:f,canUndo:P,canRedo:I,undoStack:m,redoStack:x,createNewFolder:_,updateExistingFolder:A,deleteExistingFolder:R,assignGame:F,removeGame:L,handleDrop:N,expandFolder:U,collapseFolder:$,undo:pe,redo:ye,clearHistory:Ce,selectFolder:B,setSelectedFolderId:c,getFolderBreadcrumbs:H,getGamesInFolder:q,getGamesInFolderTree:z,getUnorganizedGames:G,canCreateSubfolder:K,getFolderStats:Z,searchFolders:ee,refreshData:V,refreshFolders:J,openCreateFolderModal:oe,openEditFolderModal:ne,handleSaveFolder:_e,handleDeleteFolder:ce,handleCancelFolder:Be}},YT=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";function S0(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function HL(t){return"nodeType"in t}function Us(t){var e,n;return t?S0(t)?t:HL(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function GL(t){const{Document:e}=Us(t);return t instanceof e}function Kw(t){return S0(t)?!1:t instanceof Us(t).HTMLElement}function Ote(t){return t instanceof Us(t).SVGElement}function _0(t){return t?S0(t)?t.document:HL(t)?GL(t)?t:Kw(t)||Ote(t)?t.ownerDocument:document:document:document}const Ed=YT?T.useLayoutEffect:T.useEffect;function XT(t){const e=T.useRef(t);return Ed(()=>{e.current=t}),T.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function XXe(){const t=T.useRef(null),e=T.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=T.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Wb(t,e){e===void 0&&(e=[t]);const n=T.useRef(t);return Ed(()=>{n.current!==t&&(n.current=t)},e),n}function Yw(t,e){const n=T.useRef();return T.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function QC(t){const e=XT(t),n=T.useRef(null),r=T.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function ZC(t){const e=T.useRef();return T.useEffect(()=>{e.current=t},[t]),e.current}let BD={};function QT(t,e){return T.useMemo(()=>{if(e)return e;const n=BD[t]==null?0:BD[t]+1;return BD[t]=n,t+"-"+n},[t,e])}function Nte(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((o,s)=>{const a=Object.entries(s);for(const[l,c]of a){const u=o[l];u!=null&&(o[l]=u+t*c)}return o},j({},e))}}const pv=Nte(1),JC=Nte(-1);function QXe(t){return"clientX"in t&&"clientY"in t}function qL(t){if(!t)return!1;const{KeyboardEvent:e}=Us(t.target);return e&&t instanceof e}function ZXe(t){if(!t)return!1;const{TouchEvent:e}=Us(t.target);return e&&t instanceof e}function eA(t){if(ZXe(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return QXe(t)?{x:t.clientX,y:t.clientY}:null}const $b=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[$b.Translate.toString(t),$b.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),gW="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function JXe(t){return t.matches(gW)?t:t.querySelector(gW)}const eQe={display:"none"};function tQe(t){let{id:e,value:n}=t;return Lt.createElement("div",{id:e,style:eQe},n)}function nQe(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Lt.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function rQe(){const[t,e]=T.useState("");return{announce:T.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const Lte=T.createContext(null);function iQe(t){const e=T.useContext(Lte);T.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function oQe(){const[t]=T.useState(()=>new Set),e=T.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[T.useCallback(r=>{let{type:i,event:o}=r;t.forEach(s=>{var a;return(a=s[i])==null?void 0:a.call(s,o)})},[t]),e]}const sQe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},aQe={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function lQe(t){let{announcements:e=aQe,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=sQe}=t;const{announce:o,announcement:s}=rQe(),a=QT("DndLiveRegion"),[l,c]=T.useState(!1);if(T.useEffect(()=>{c(!0)},[]),iQe(T.useMemo(()=>({onDragStart(d){let{active:f}=d;o(e.onDragStart({active:f}))},onDragMove(d){let{active:f,over:p}=d;e.onDragMove&&o(e.onDragMove({active:f,over:p}))},onDragOver(d){let{active:f,over:p}=d;o(e.onDragOver({active:f,over:p}))},onDragEnd(d){let{active:f,over:p}=d;o(e.onDragEnd({active:f,over:p}))},onDragCancel(d){let{active:f,over:p}=d;o(e.onDragCancel({active:f,over:p}))}}),[o,e])),!l)return null;const u=Lt.createElement(Lt.Fragment,null,Lt.createElement(tQe,{id:r,value:i.draggable}),Lt.createElement(nQe,{id:a,announcement:s}));return n?ec.createPortal(u,n):u}var yo;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(yo||(yo={}));function tA(){}function cQe(t,e){return T.useMemo(()=>({sensor:t,options:e!=null?e:{}}),[t,e])}function uQe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return T.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const pc=Object.freeze({x:0,y:0});function dQe(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function fQe(t,e){const n=eA(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function hQe(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function pQe(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function mQe(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function vW(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const gQe=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=vW(e,e.left,e.top),o=[];for(const s of r){const{id:a}=s,l=n.get(a);if(l){const c=dQe(vW(l),i);o.push({id:a,data:{droppableContainer:s,value:c}})}}return o.sort(hQe)};function vQe(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),o=Math.min(e.top+e.height,t.top+t.height),s=i-r,a=o-n;if(r<i&&n<o){const l=e.width*e.height,c=t.width*t.height,u=s*a,d=u/(l+c-u);return Number(d.toFixed(4))}return 0}const yQe=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const o of r){const{id:s}=o,a=n.get(s);if(a){const l=vQe(a,e);l>0&&i.push({id:s,data:{droppableContainer:o,value:l}})}}return i.sort(pQe)};function xQe(t,e,n){return se(j({},t),{scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1})}function Bte(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:pc}function bQe(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.reduce((s,a)=>se(j({},s),{top:s.top+t*a.y,bottom:s.bottom+t*a.y,left:s.left+t*a.x,right:s.right+t*a.x}),j({},n))}}const wQe=bQe(1);function jte(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function SQe(t,e,n){const r=jte(e);if(!r)return t;const{scaleX:i,scaleY:o,x:s,y:a}=r,l=t.left-s-(1-i)*parseFloat(n),c=t.top-a-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),u=i?t.width/i:t.width,d=o?t.height/o:t.height;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l}}const _Qe={ignoreTransform:!1};function Xw(t,e){e===void 0&&(e=_Qe);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:u}=Us(t).getComputedStyle(t);c&&(n=SQe(n,c,u))}const{top:r,left:i,width:o,height:s,bottom:a,right:l}=n;return{top:r,left:i,width:o,height:s,bottom:a,right:l}}function yW(t){return Xw(t,{ignoreTransform:!0})}function EQe(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function CQe(t,e){return e===void 0&&(e=Us(t).getComputedStyle(t)),e.position==="fixed"}function AQe(t,e){e===void 0&&(e=Us(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=e[i];return typeof o=="string"?n.test(o):!1})}function KL(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(GL(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Kw(i)||Ote(i)||n.includes(i))return n;const o=Us(t).getComputedStyle(i);return i!==t&&AQe(i,o)&&n.push(i),CQe(i,o)?n:r(i.parentNode)}return t?r(t):n}function Ute(t){const[e]=KL(t,1);return e!=null?e:null}function jD(t){return!YT||!t?null:S0(t)?t:HL(t)?GL(t)||t===_0(t).scrollingElement?window:Kw(t)?t:null:null}function zte(t){return S0(t)?t.scrollX:t.scrollLeft}function Vte(t){return S0(t)?t.scrollY:t.scrollTop}function gF(t){return{x:zte(t),y:Vte(t)}}var Po;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Po||(Po={}));function Wte(t){return!YT||!t?!1:t===document.scrollingElement}function $te(t){const e={x:0,y:0},n=Wte(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,o=t.scrollLeft<=e.x,s=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:i,isLeft:o,isBottom:s,isRight:a,maxScroll:r,minScroll:e}}const TQe={x:.2,y:.2};function MQe(t,e,n,r,i){let{top:o,left:s,right:a,bottom:l}=n;r===void 0&&(r=10),i===void 0&&(i=TQe);const{isTop:c,isBottom:u,isLeft:d,isRight:f}=$te(t),p={x:0,y:0},b={x:0,y:0},v={height:e.height*i.y,width:e.width*i.x};return!c&&o<=e.top+v.height?(p.y=Po.Backward,b.y=r*Math.abs((e.top+v.height-o)/v.height)):!u&&l>=e.bottom-v.height&&(p.y=Po.Forward,b.y=r*Math.abs((e.bottom-v.height-l)/v.height)),!f&&a>=e.right-v.width?(p.x=Po.Forward,b.x=r*Math.abs((e.right-v.width-a)/v.width)):!d&&s<=e.left+v.width&&(p.x=Po.Backward,b.x=r*Math.abs((e.left+v.width-s)/v.width)),{direction:p,speed:b}}function PQe(t){if(t===document.scrollingElement){const{innerWidth:o,innerHeight:s}=window;return{top:0,left:0,right:o,bottom:s,width:o,height:s}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function Hte(t){return t.reduce((e,n)=>pv(e,gF(n)),pc)}function DQe(t){return t.reduce((e,n)=>e+zte(n),0)}function RQe(t){return t.reduce((e,n)=>e+Vte(n),0)}function Gte(t,e){if(e===void 0&&(e=Xw),!t)return;const{top:n,left:r,bottom:i,right:o}=e(t);Ute(t)&&(i<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const IQe=[["x",["left","right"],DQe],["y",["top","bottom"],RQe]];class YL{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=KL(n),i=Hte(r);this.rect=j({},e),this.width=e.width,this.height=e.height;for(const[o,s,a]of IQe)for(const l of s)Object.defineProperty(this,l,{get:()=>{const c=a(r),u=i[o]-c;return this.rect[l]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class kx{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function kQe(t){const{EventTarget:e}=Us(t);return t instanceof e?t:_0(t)}function UD(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(Cu(n,2)+Cu(r,2))>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var ol;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(ol||(ol={}));function xW(t){t.preventDefault()}function FQe(t){t.stopPropagation()}var oi;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(oi||(oi={}));const qte={start:[oi.Space,oi.Enter],cancel:[oi.Esc],end:[oi.Space,oi.Enter,oi.Tab]},OQe=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case oi.Right:return se(j({},n),{x:n.x+25});case oi.Left:return se(j({},n),{x:n.x-25});case oi.Down:return se(j({},n),{y:n.y+25});case oi.Up:return se(j({},n),{y:n.y-25})}};class Kte{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new kx(_0(n)),this.windowListeners=new kx(Us(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ol.Resize,this.handleCancel),this.windowListeners.add(ol.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ol.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&Gte(r),n(pc)}handleKeyDown(e){if(qL(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:o=qte,coordinateGetter:s=OQe,scrollBehavior:a="smooth"}=i,{code:l}=e;if(o.end.includes(l)){this.handleEnd(e);return}if(o.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:c}=r.current,u=c?{x:c.left,y:c.top}:pc;this.referenceCoordinates||(this.referenceCoordinates=u);const d=s(e,{active:n,context:r.current,currentCoordinates:u});if(d){const f=JC(d,u),p={x:0,y:0},{scrollableAncestors:b}=r.current;for(const v of b){const m=e.code,{isTop:g,isRight:x,isLeft:w,isBottom:S,maxScroll:P,minScroll:I}=$te(v),M=PQe(v),D={x:Math.min(m===oi.Right?M.right-M.width/2:M.right,Math.max(m===oi.Right?M.left:M.left+M.width/2,d.x)),y:Math.min(m===oi.Down?M.bottom-M.height/2:M.bottom,Math.max(m===oi.Down?M.top:M.top+M.height/2,d.y))},E=m===oi.Right&&!x||m===oi.Left&&!w,_=m===oi.Down&&!S||m===oi.Up&&!g;if(E&&D.x!==d.x){const A=v.scrollLeft+f.x,R=m===oi.Right&&A<=P.x||m===oi.Left&&A>=I.x;if(R&&!f.y){v.scrollTo({left:A,behavior:a});return}R?p.x=v.scrollLeft-A:p.x=m===oi.Right?v.scrollLeft-P.x:v.scrollLeft-I.x,p.x&&v.scrollBy({left:-p.x,behavior:a});break}else if(_&&D.y!==d.y){const A=v.scrollTop+f.y,R=m===oi.Down&&A<=P.y||m===oi.Up&&A>=I.y;if(R&&!f.x){v.scrollTo({top:A,behavior:a});return}R?p.y=v.scrollTop-A:p.y=m===oi.Down?v.scrollTop-P.y:v.scrollTop-I.y,p.y&&v.scrollBy({top:-p.y,behavior:a});break}}this.handleMove(e,pv(JC(d,this.referenceCoordinates),p))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Kte.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=qte,onActivation:i}=e,{active:o}=n;const{code:s}=t.nativeEvent;if(r.start.includes(s)){const a=o.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function bW(t){return!!(t&&"distance"in t)}function wW(t){return!!(t&&"delay"in t)}class XL{constructor(e,n,r){var i;r===void 0&&(r=kQe(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:o}=e,{target:s}=o;this.props=e,this.events=n,this.document=_0(s),this.documentListeners=new kx(this.document),this.listeners=new kx(r),this.windowListeners=new kx(Us(s)),this.initialCoordinates=(i=eA(o))!=null?i:pc,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(ol.Resize,this.handleCancel),this.windowListeners.add(ol.DragStart,xW),this.windowListeners.add(ol.VisibilityChange,this.handleCancel),this.windowListeners.add(ol.ContextMenu,xW),this.documentListeners.add(ol.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(wW(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(bW(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(ol.Click,FQe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ol.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:o}=this,{onMove:s,options:{activationConstraint:a}}=o;if(!i)return;const l=(n=eA(e))!=null?n:pc,c=JC(i,l);if(!r&&a){if(bW(a)){if(a.tolerance!=null&&UD(c,a.tolerance))return this.handleCancel();if(UD(c,a.distance))return this.handleStart()}if(wW(a)&&UD(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}e.cancelable&&e.preventDefault(),s(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===oi.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const NQe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class QL extends XL{constructor(e){const{event:n}=e,r=_0(n.target);super(e,NQe,r)}}QL.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const LQe={move:{name:"mousemove"},end:{name:"mouseup"}};var vF;(function(t){t[t.RightClick=2]="RightClick"})(vF||(vF={}));class BQe extends XL{constructor(e){super(e,LQe,_0(e.event.target))}}BQe.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===vF.RightClick?!1:(r==null||r({event:n}),!0)}}];const zD={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class jQe extends XL{constructor(e){super(e,zD)}static setup(){return window.addEventListener(zD.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(zD.move.name,e)};function e(){}}}jQe.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Fx;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Fx||(Fx={}));var nA;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(nA||(nA={}));function UQe(t){let{acceleration:e,activator:n=Fx.Pointer,canScroll:r,draggingRect:i,enabled:o,interval:s=5,order:a=nA.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:u,delta:d,threshold:f}=t;const p=VQe({delta:d,disabled:!o}),[b,v]=XXe(),m=T.useRef({x:0,y:0}),g=T.useRef({x:0,y:0}),x=T.useMemo(()=>{switch(n){case Fx.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Fx.DraggableRect:return i}},[n,i,l]),w=T.useRef(null),S=T.useCallback(()=>{const I=w.current;if(!I)return;const M=m.current.x*g.current.x,D=m.current.y*g.current.y;I.scrollBy(M,D)},[]),P=T.useMemo(()=>a===nA.TreeOrder?[...c].reverse():c,[a,c]);T.useEffect(()=>{if(!o||!c.length||!x){v();return}for(const I of P){if((r==null?void 0:r(I))===!1)continue;const M=c.indexOf(I),D=u[M];if(!D)continue;const{direction:E,speed:_}=MQe(I,D,x,e,f);for(const A of["x","y"])p[A][E[A]]||(_[A]=0,E[A]=0);if(_.x>0||_.y>0){v(),w.current=I,b(S,s),m.current=_,g.current=E;return}}m.current={x:0,y:0},g.current={x:0,y:0},v()},[e,S,r,v,o,s,JSON.stringify(x),JSON.stringify(p),b,c,P,u,JSON.stringify(f)])}const zQe={x:{[Po.Backward]:!1,[Po.Forward]:!1},y:{[Po.Backward]:!1,[Po.Forward]:!1}};function VQe(t){let{delta:e,disabled:n}=t;const r=ZC(e);return Yw(i=>{if(n||!r||!i)return zQe;const o={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Po.Backward]:i.x[Po.Backward]||o.x===-1,[Po.Forward]:i.x[Po.Forward]||o.x===1},y:{[Po.Backward]:i.y[Po.Backward]||o.y===-1,[Po.Forward]:i.y[Po.Forward]||o.y===1}}},[n,e,r])}function WQe(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Yw(i=>{var o;return e==null?null:(o=r!=null?r:i)!=null?o:null},[r,e])}function $Qe(t,e){return T.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,o=i.activators.map(s=>({eventName:s.eventName,handler:e(s.handler,r)}));return[...n,...o]},[]),[t,e])}var Hb;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Hb||(Hb={}));var yF;(function(t){t.Optimized="optimized"})(yF||(yF={}));const SW=new Map;function HQe(t,e){let{dragging:n,dependencies:r,config:i}=e;const[o,s]=T.useState(null),{frequency:a,measure:l,strategy:c}=i,u=T.useRef(t),d=m(),f=Wb(d),p=T.useCallback(function(g){g===void 0&&(g=[]),!f.current&&s(x=>x===null?g:x.concat(g.filter(w=>!x.includes(w))))},[f]),b=T.useRef(null),v=Yw(g=>{if(d&&!n)return SW;if(!g||g===SW||u.current!==t||o!=null){const x=new Map;for(let w of t){if(!w)continue;if(o&&o.length>0&&!o.includes(w.id)&&w.rect.current){x.set(w.id,w.rect.current);continue}const S=w.node.current,P=S?new YL(l(S),S):null;w.rect.current=P,P&&x.set(w.id,P)}return x}return g},[t,o,n,d,l]);return T.useEffect(()=>{u.current=t},[t]),T.useEffect(()=>{d||p()},[n,d]),T.useEffect(()=>{o&&o.length>0&&s(null)},[JSON.stringify(o)]),T.useEffect(()=>{d||typeof a!="number"||b.current!==null||(b.current=setTimeout(()=>{p(),b.current=null},a))},[a,d,p,...r]),{droppableRects:v,measureDroppableContainers:p,measuringScheduled:o!=null};function m(){switch(c){case Hb.Always:return!1;case Hb.BeforeDragging:return n;default:return!n}}}function ZL(t,e){return Yw(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function GQe(t,e){return ZL(t,e)}function qQe(t){let{callback:e,disabled:n}=t;const r=XT(e),i=T.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.MutationObserver=="undefined")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return T.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function ZT(t){let{callback:e,disabled:n}=t;const r=XT(e),i=T.useMemo(()=>{if(n||typeof window=="undefined"||typeof window.ResizeObserver=="undefined")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return T.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function KQe(t){return new YL(Xw(t),t)}function _W(t,e,n){e===void 0&&(e=KQe);const[r,i]=T.useState(null);function o(){i(l=>{if(!t)return null;if(t.isConnected===!1){var c;return(c=l!=null?l:n)!=null?c:null}const u=e(t);return JSON.stringify(l)===JSON.stringify(u)?l:u})}const s=qQe({callback(l){if(t)for(const c of l){const{type:u,target:d}=c;if(u==="childList"&&d instanceof HTMLElement&&d.contains(t)){o();break}}}}),a=ZT({callback:o});return Ed(()=>{o(),t?(a==null||a.observe(t),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),s==null||s.disconnect())},[t]),r}function YQe(t){const e=ZL(t);return Bte(t,e)}const EW=[];function XQe(t){const e=T.useRef(t),n=Yw(r=>t?r&&r!==EW&&t&&e.current&&t.parentNode===e.current.parentNode?r:KL(t):EW,[t]);return T.useEffect(()=>{e.current=t},[t]),n}function QQe(t){const[e,n]=T.useState(null),r=T.useRef(t),i=T.useCallback(o=>{const s=jD(o.target);s&&n(a=>a?(a.set(s,gF(s)),new Map(a)):null)},[]);return T.useEffect(()=>{const o=r.current;if(t!==o){s(o);const a=t.map(l=>{const c=jD(l);return c?(c.addEventListener("scroll",i,{passive:!0}),[c,gF(c)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=t}return()=>{s(t),s(o)};function s(a){a.forEach(l=>{const c=jD(l);c==null||c.removeEventListener("scroll",i)})}},[i,t]),T.useMemo(()=>t.length?e?Array.from(e.values()).reduce((o,s)=>pv(o,s),pc):Hte(t):pc,[t,e])}function CW(t,e){e===void 0&&(e=[]);const n=T.useRef(null);return T.useEffect(()=>{n.current=null},e),T.useEffect(()=>{const r=t!==pc;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?JC(t,n.current):pc}function ZQe(t){T.useEffect(()=>{if(!YT)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function JQe(t,e){return T.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:o}=r;return n[i]=s=>{o(s,e)},n},{}),[t,e])}function Yte(t){return T.useMemo(()=>t?EQe(t):null,[t])}const AW=[];function eZe(t,e){e===void 0&&(e=Xw);const[n]=t,r=Yte(n?Us(n):null),[i,o]=T.useState(AW);function s(){o(()=>t.length?t.map(l=>Wte(l)?r:new YL(e(l),l)):AW)}const a=ZT({callback:s});return Ed(()=>{a==null||a.disconnect(),s(),t.forEach(l=>a==null?void 0:a.observe(l))},[t]),i}function Xte(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Kw(e)?e:t}function tZe(t){let{measure:e}=t;const[n,r]=T.useState(null),i=T.useCallback(c=>{for(const{target:u}of c)if(Kw(u)){r(d=>{const f=e(u);return d?se(j({},d),{width:f.width,height:f.height}):f});break}},[e]),o=ZT({callback:i}),s=T.useCallback(c=>{const u=Xte(c);o==null||o.disconnect(),u&&(o==null||o.observe(u)),r(u?e(u):null)},[e,o]),[a,l]=QC(s);return T.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const nZe=[{sensor:QL,options:{}},{sensor:Kte,options:{}}],rZe={current:{}},vE={draggable:{measure:yW},droppable:{measure:yW,strategy:Hb.WhileDragging,frequency:yF.Optimized},dragOverlay:{measure:Xw}};class Ox extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const iZe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ox,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:tA},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:vE,measureDroppableContainers:tA,windowRect:null,measuringScheduled:!1},Qte={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:tA,draggableNodes:new Map,over:null,measureDroppableContainers:tA},Qw=T.createContext(Qte),Zte=T.createContext(iZe);function oZe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ox}}}function sZe(t,e){switch(e.type){case yo.DragStart:return se(j({},t),{draggable:se(j({},t.draggable),{initialCoordinates:e.initialCoordinates,active:e.active})});case yo.DragMove:return t.draggable.active==null?t:se(j({},t),{draggable:se(j({},t.draggable),{translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}})});case yo.DragEnd:case yo.DragCancel:return se(j({},t),{draggable:se(j({},t.draggable),{active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}})});case yo.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new Ox(t.droppable.containers);return i.set(r,n),se(j({},t),{droppable:se(j({},t.droppable),{containers:i})})}case yo.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,o=t.droppable.containers.get(n);if(!o||r!==o.key)return t;const s=new Ox(t.droppable.containers);return s.set(n,se(j({},o),{disabled:i})),se(j({},t),{droppable:se(j({},t.droppable),{containers:s})})}case yo.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new Ox(t.droppable.containers);return o.delete(n),se(j({},t),{droppable:se(j({},t.droppable),{containers:o})})}default:return t}}function aZe(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=T.useContext(Qw),o=ZC(r),s=ZC(n==null?void 0:n.id);return T.useEffect(()=>{if(!e&&!r&&o&&s!=null){if(!qL(o)||document.activeElement===o.target)return;const a=i.get(s);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const u of[l.current,c.current]){if(!u)continue;const d=JXe(u);if(d){d.focus();break}}})}},[r,e,i,s,o]),null}function Jte(t,e){let i=e,{transform:n}=i,r=Dt(i,["transform"]);return t!=null&&t.length?t.reduce((o,s)=>s(j({transform:o},r)),n):n}function lZe(t){return T.useMemo(()=>({draggable:j(j({},vE.draggable),t==null?void 0:t.draggable),droppable:j(j({},vE.droppable),t==null?void 0:t.droppable),dragOverlay:j(j({},vE.dragOverlay),t==null?void 0:t.dragOverlay)}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function cZe(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const o=T.useRef(!1),{x:s,y:a}=typeof i=="boolean"?{x:i,y:i}:i;Ed(()=>{if(!s&&!a||!e){o.current=!1;return}if(o.current||!r)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const u=n(c),d=Bte(u,r);if(s||(d.x=0),a||(d.y=0),o.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const f=Ute(c);f&&f.scrollBy({top:d.y,left:d.x})}},[e,s,a,r,n])}const JT=T.createContext(se(j({},pc),{scaleX:1,scaleY:1}));var ff;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(ff||(ff={}));const ene=T.memo(function(e){var n,r,i,o;let yt=e,{id:s,accessibility:a,autoScroll:l=!0,children:c,sensors:u=nZe,collisionDetection:d=yQe,measuring:f,modifiers:p}=yt,b=Dt(yt,["id","accessibility","autoScroll","children","sensors","collisionDetection","measuring","modifiers"]);const v=T.useReducer(sZe,void 0,oZe),[m,g]=v,[x,w]=oQe(),[S,P]=T.useState(ff.Uninitialized),I=S===ff.Initialized,{draggable:{active:M,nodes:D,translate:E},droppable:{containers:_}}=m,A=M!=null?D.get(M):null,R=T.useRef({initial:null,translated:null}),F=T.useMemo(()=>{var at;return M!=null?{id:M,data:(at=A==null?void 0:A.data)!=null?at:rZe,rect:R}:null},[M,A]),L=T.useRef(null),[N,U]=T.useState(null),[$,B]=T.useState(null),H=Wb(b,Object.values(b)),q=QT("DndDescribedBy",s),z=T.useMemo(()=>_.getEnabled(),[_]),G=lZe(f),{droppableRects:K,measureDroppableContainers:Z,measuringScheduled:ee}=HQe(z,{dragging:I,dependencies:[E.x,E.y],config:G.droppable}),V=WQe(D,M),J=T.useMemo(()=>$?eA($):null,[$]),oe=tt(),ne=GQe(V,G.draggable.measure);cZe({activeNode:M!=null?D.get(M):null,config:oe.layoutShiftCompensation,initialRect:ne,measure:G.draggable.measure});const pe=_W(V,G.draggable.measure,ne),ye=_W(V?V.parentElement:null),Ce=T.useRef({activatorEvent:null,active:null,activeNode:V,collisionRect:null,collisions:null,droppableRects:K,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:_,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),_e=_.getNodeFor((n=Ce.current.over)==null?void 0:n.id),ce=tZe({measure:G.dragOverlay.measure}),Be=(r=ce.nodeRef.current)!=null?r:V,de=I?(i=ce.rect)!=null?i:pe:null,me=!!(ce.nodeRef.current&&ce.rect),ie=YQe(me?null:pe),ae=Yte(Be?Us(Be):null),ge=XQe(I?_e!=null?_e:V:null),X=eZe(ge),W=Jte(p,{transform:{x:E.x-ie.x,y:E.y-ie.y,scaleX:1,scaleY:1},activatorEvent:$,active:F,activeNodeRect:pe,containerNodeRect:ye,draggingNodeRect:de,over:Ce.current.over,overlayNodeRect:ce.rect,scrollableAncestors:ge,scrollableAncestorRects:X,windowRect:ae}),ve=J?pv(J,E):null,ue=QQe(ge),Me=CW(ue),Ae=CW(ue,[pe]),Ne=pv(W,Me),Re=de?wQe(de,W):null,Ie=F&&Re?d({active:F,collisionRect:Re,droppableRects:K,droppableContainers:z,pointerCoordinates:ve}):null,it=mQe(Ie,"id"),[Ee,Le]=T.useState(null),Ge=me?W:pv(W,Ae),Ke=xQe(Ge,(o=Ee==null?void 0:Ee.rect)!=null?o:null,pe),je=T.useRef(null),et=T.useCallback((at,mt)=>{let{sensor:Ot,options:rn}=mt;if(L.current==null)return;const on=D.get(L.current);if(!on)return;const Pe=at.nativeEvent,Ue=new Ot({active:L.current,activeNode:on,event:Pe,options:rn,context:Ce,onAbort(vt){if(!D.get(vt))return;const{onDragAbort:jt}=H.current,Nt={id:vt};jt==null||jt(Nt),x({type:"onDragAbort",event:Nt})},onPending(vt,Pt,jt,Nt){if(!D.get(vt))return;const{onDragPending:en}=H.current,fn={id:vt,constraint:Pt,initialCoordinates:jt,offset:Nt};en==null||en(fn),x({type:"onDragPending",event:fn})},onStart(vt){const Pt=L.current;if(Pt==null)return;const jt=D.get(Pt);if(!jt)return;const{onDragStart:Nt}=H.current,Yt={activatorEvent:Pe,active:{id:Pt,data:jt.data,rect:R}};ec.unstable_batchedUpdates(()=>{Nt==null||Nt(Yt),P(ff.Initializing),g({type:yo.DragStart,initialCoordinates:vt,active:Pt}),x({type:"onDragStart",event:Yt}),U(je.current),B(Pe)})},onMove(vt){g({type:yo.DragMove,coordinates:vt})},onEnd:Xe(yo.DragEnd),onCancel:Xe(yo.DragCancel)});je.current=Ue;function Xe(vt){return function(){return te(this,null,function*(){const{active:jt,collisions:Nt,over:Yt,scrollAdjustedTranslate:en}=Ce.current;let fn=null;if(jt&&en){const{cancelDrop:hn}=H.current;fn={activatorEvent:Pe,active:jt,collisions:Nt,delta:en,over:Yt},vt===yo.DragEnd&&typeof hn=="function"&&(yield Promise.resolve(hn(fn)))&&(vt=yo.DragCancel)}L.current=null,ec.unstable_batchedUpdates(()=>{g({type:vt}),P(ff.Uninitialized),Le(null),U(null),B(null),je.current=null;const hn=vt===yo.DragEnd?"onDragEnd":"onDragCancel";if(fn){const mn=H.current[hn];mn==null||mn(fn),x({type:hn,event:fn})}})})}}},[D]),lt=T.useCallback((at,mt)=>(Ot,rn)=>{const on=Ot.nativeEvent,Pe=D.get(rn);if(L.current!==null||!Pe||on.dndKit||on.defaultPrevented)return;const Ue={active:Pe};at(Ot,mt.options,Ue)===!0&&(on.dndKit={capturedBy:mt.sensor},L.current=rn,et(Ot,mt))},[D,et]),ht=$Qe(u,lt);ZQe(u),Ed(()=>{pe&&S===ff.Initializing&&P(ff.Initialized)},[pe,S]),T.useEffect(()=>{const{onDragMove:at}=H.current,{active:mt,activatorEvent:Ot,collisions:rn,over:on}=Ce.current;if(!mt||!Ot)return;const Pe={active:mt,activatorEvent:Ot,collisions:rn,delta:{x:Ne.x,y:Ne.y},over:on};ec.unstable_batchedUpdates(()=>{at==null||at(Pe),x({type:"onDragMove",event:Pe})})},[Ne.x,Ne.y]),T.useEffect(()=>{const{active:at,activatorEvent:mt,collisions:Ot,droppableContainers:rn,scrollAdjustedTranslate:on}=Ce.current;if(!at||L.current==null||!mt||!on)return;const{onDragOver:Pe}=H.current,Ue=rn.get(it),Xe=Ue&&Ue.rect.current?{id:Ue.id,rect:Ue.rect.current,data:Ue.data,disabled:Ue.disabled}:null,vt={active:at,activatorEvent:mt,collisions:Ot,delta:{x:on.x,y:on.y},over:Xe};ec.unstable_batchedUpdates(()=>{Le(Xe),Pe==null||Pe(vt),x({type:"onDragOver",event:vt})})},[it]),Ed(()=>{Ce.current={activatorEvent:$,active:F,activeNode:V,collisionRect:Re,collisions:Ie,droppableRects:K,draggableNodes:D,draggingNode:Be,draggingNodeRect:de,droppableContainers:_,over:Ee,scrollableAncestors:ge,scrollAdjustedTranslate:Ne},R.current={initial:de,translated:Re}},[F,V,Ie,Re,D,Be,de,K,_,Ee,ge,Ne]),UQe(se(j({},oe),{delta:E,draggingRect:Re,pointerCoordinates:ve,scrollableAncestors:ge,scrollableAncestorRects:X}));const ke=T.useMemo(()=>({active:F,activeNode:V,activeNodeRect:pe,activatorEvent:$,collisions:Ie,containerNodeRect:ye,dragOverlay:ce,draggableNodes:D,droppableContainers:_,droppableRects:K,over:Ee,measureDroppableContainers:Z,scrollableAncestors:ge,scrollableAncestorRects:X,measuringConfiguration:G,measuringScheduled:ee,windowRect:ae}),[F,V,pe,$,Ie,ye,ce,D,_,K,Ee,Z,ge,X,G,ee,ae]),gt=T.useMemo(()=>({activatorEvent:$,activators:ht,active:F,activeNodeRect:pe,ariaDescribedById:{draggable:q},dispatch:g,draggableNodes:D,over:Ee,measureDroppableContainers:Z}),[$,ht,F,pe,g,q,D,Ee,Z]);return Lt.createElement(Lte.Provider,{value:w},Lt.createElement(Qw.Provider,{value:gt},Lt.createElement(Zte.Provider,{value:ke},Lt.createElement(JT.Provider,{value:Ke},c)),Lt.createElement(aZe,{disabled:(a==null?void 0:a.restoreFocus)===!1})),Lt.createElement(lQe,se(j({},a),{hiddenTextDescribedById:q})));function tt(){const at=(N==null?void 0:N.autoScrollEnabled)===!1,mt=typeof l=="object"?l.enabled===!1:l===!1,Ot=I&&!at&&!mt;return typeof l=="object"?se(j({},l),{enabled:Ot}):{enabled:Ot}}}),uZe=T.createContext(null),TW="button",dZe="Draggable";function JL(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const o=QT(dZe),{activators:s,activatorEvent:a,active:l,activeNodeRect:c,ariaDescribedById:u,draggableNodes:d,over:f}=T.useContext(Qw),{role:p=TW,roleDescription:b="draggable",tabIndex:v=0}=i!=null?i:{},m=(l==null?void 0:l.id)===e,g=T.useContext(m?JT:uZe),[x,w]=QC(),[S,P]=QC(),I=JQe(s,e),M=Wb(n);Ed(()=>(d.set(e,{id:e,key:o,node:x,activatorNode:S,data:M}),()=>{const E=d.get(e);E&&E.key===o&&d.delete(e)}),[d,e]);const D=T.useMemo(()=>({role:p,tabIndex:v,"aria-disabled":r,"aria-pressed":m&&p===TW?!0:void 0,"aria-roledescription":b,"aria-describedby":u.draggable}),[r,p,v,m,b,u.draggable]);return{active:l,activatorEvent:a,activeNodeRect:c,attributes:D,isDragging:m,listeners:r?void 0:I,node:x,over:f,setNodeRef:w,setActivatorNodeRef:P,transform:g}}function fZe(){return T.useContext(Zte)}const hZe="Droppable",pZe={timeout:25};function e2(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const o=QT(hZe),{active:s,dispatch:a,over:l,measureDroppableContainers:c}=T.useContext(Qw),u=T.useRef({disabled:n}),d=T.useRef(!1),f=T.useRef(null),p=T.useRef(null),{disabled:b,updateMeasurementsFor:v,timeout:m}=j(j({},pZe),i),g=Wb(v!=null?v:r),x=T.useCallback(()=>{if(!d.current){d.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{c(Array.isArray(g.current)?g.current:[g.current]),p.current=null},m)},[m]),w=ZT({callback:x,disabled:b||!s}),S=T.useCallback((D,E)=>{w&&(E&&(w.unobserve(E),d.current=!1),D&&w.observe(D))},[w]),[P,I]=QC(S),M=Wb(e);return T.useEffect(()=>{!w||!P.current||(w.disconnect(),d.current=!1,w.observe(P.current))},[P,w]),T.useEffect(()=>(a({type:yo.RegisterDroppable,element:{id:r,key:o,disabled:n,node:P,rect:f,data:M}}),()=>a({type:yo.UnregisterDroppable,key:o,id:r})),[r]),T.useEffect(()=>{n!==u.current.disabled&&(a({type:yo.SetDroppableDisabled,id:r,key:o,disabled:n}),u.current.disabled=n)},[r,o,n,a]),{active:s,rect:f,isOver:(l==null?void 0:l.id)===r,node:P,over:l,setNodeRef:I}}function mZe(t){let{animation:e,children:n}=t;const[r,i]=T.useState(null),[o,s]=T.useState(null),a=ZC(n);return!n&&!r&&a&&i(a),Ed(()=>{if(!o)return;const l=r==null?void 0:r.key,c=r==null?void 0:r.props.id;if(l==null||c==null){i(null);return}Promise.resolve(e(c,o)).then(()=>{i(null)})},[e,r,o]),Lt.createElement(Lt.Fragment,null,n,r?T.cloneElement(r,{ref:s}):null)}const gZe={x:0,y:0,scaleX:1,scaleY:1};function vZe(t){let{children:e}=t;return Lt.createElement(Qw.Provider,{value:Qte},Lt.createElement(JT.Provider,{value:gZe},e))}const yZe={position:"fixed",touchAction:"none"},xZe=t=>qL(t)?"transform 250ms ease":void 0,bZe=T.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:i,children:o,className:s,rect:a,style:l,transform:c,transition:u=xZe}=t;if(!a)return null;const d=i?c:se(j({},c),{scaleX:1,scaleY:1}),f=j(se(j({},yZe),{width:a.width,height:a.height,top:a.top,left:a.left,transform:$b.Transform.toString(d),transformOrigin:i&&r?fQe(r,a):void 0,transition:typeof u=="function"?u(r):u}),l);return Lt.createElement(n,{className:s,style:f,ref:e},o)}),wZe=t=>e=>{let{active:n,dragOverlay:r}=e;const i={},{styles:o,className:s}=t;if(o!=null&&o.active)for(const[a,l]of Object.entries(o.active))l!==void 0&&(i[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,l));if(o!=null&&o.dragOverlay)for(const[a,l]of Object.entries(o.dragOverlay))l!==void 0&&r.node.style.setProperty(a,l);return s!=null&&s.active&&n.node.classList.add(s.active),s!=null&&s.dragOverlay&&r.node.classList.add(s.dragOverlay),function(){for(const[l,c]of Object.entries(i))n.node.style.setProperty(l,c);s!=null&&s.active&&n.node.classList.remove(s.active)}},SZe=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:$b.Transform.toString(e)},{transform:$b.Transform.toString(n)}]},_Ze={duration:250,easing:"ease",keyframes:SZe,sideEffects:wZe({styles:{active:{opacity:"0"}}})};function EZe(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:i}=t;return XT((o,s)=>{if(e===null)return;const a=n.get(o);if(!a)return;const l=a.node.current;if(!l)return;const c=Xte(s);if(!c)return;const{transform:u}=Us(s).getComputedStyle(s),d=jte(u);if(!d)return;const f=typeof e=="function"?e:CZe(e);return Gte(l,i.draggable.measure),f({active:{id:o,data:a.data,node:l,rect:i.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:s,rect:i.dragOverlay.measure(c)},droppableContainers:r,measuringConfiguration:i,transform:d})})}function CZe(t){const{duration:e,easing:n,sideEffects:r,keyframes:i}=j(j({},_Ze),t);return o=>{let x=o,{active:s,dragOverlay:a,transform:l}=x,c=Dt(x,["active","dragOverlay","transform"]);if(!e)return;const u={x:a.rect.left-s.rect.left,y:a.rect.top-s.rect.top},d={scaleX:l.scaleX!==1?s.rect.width*l.scaleX/a.rect.width:1,scaleY:l.scaleY!==1?s.rect.height*l.scaleY/a.rect.height:1},f=j({x:l.x-u.x,y:l.y-u.y},d),p=i(se(j({},c),{active:s,dragOverlay:a,transform:{initial:l,final:f}})),[b]=p,v=p[p.length-1];if(JSON.stringify(b)===JSON.stringify(v))return;const m=r==null?void 0:r(j({active:s,dragOverlay:a},c)),g=a.node.animate(p,{duration:e,easing:n,fill:"forwards"});return new Promise(w=>{g.onfinish=()=>{m==null||m(),w()}})}}let MW=0;function AZe(t){return T.useMemo(()=>{if(t!=null)return MW++,MW},[t])}const tne=Lt.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:i,transition:o,modifiers:s,wrapperElement:a="div",className:l,zIndex:c=999}=t;const{activatorEvent:u,active:d,activeNodeRect:f,containerNodeRect:p,draggableNodes:b,droppableContainers:v,dragOverlay:m,over:g,measuringConfiguration:x,scrollableAncestors:w,scrollableAncestorRects:S,windowRect:P}=fZe(),I=T.useContext(JT),M=AZe(d==null?void 0:d.id),D=Jte(s,{activatorEvent:u,active:d,activeNodeRect:f,containerNodeRect:p,draggingNodeRect:m.rect,over:g,overlayNodeRect:m.rect,scrollableAncestors:w,scrollableAncestorRects:S,transform:I,windowRect:P}),E=ZL(f),_=EZe({config:r,draggableNodes:b,droppableContainers:v,measuringConfiguration:x}),A=E?m.setRef:void 0;return Lt.createElement(vZe,null,Lt.createElement(mZe,{animation:_},d&&M?Lt.createElement(bZe,{key:M,id:d.id,ref:A,as:a,activatorEvent:u,adjustScale:e,className:l,transition:o,rect:E,style:j({zIndex:c},i),transform:D},n):null))}),TZe=({unorganizedGamesCount:t})=>{const{setNodeRef:e,isOver:n}=e2({id:"unorganized",data:{type:"unorganized"}});return h.jsxs("div",{ref:e,style:{padding:"16px",backgroundColor:n?"#F0FFF4":"#F7FAFC",border:n?"2px solid #38A169":"2px dashed #CBD5E0",borderRadius:"12px",textAlign:"center",transition:"all 0.2s ease",minHeight:"60px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:n?"copy":"default",transform:n?"scale(1.02)":"scale(1)",boxShadow:n?"0 4px 12px rgba(56, 161, 105, 0.2)":"none"},children:[n&&h.jsx("div",{style:{position:"absolute",top:"-2px",left:"-2px",right:"-2px",bottom:"-2px",border:"2px dashed #38A169",borderRadius:"14px",pointerEvents:"none",animation:"pulse 1s infinite"}}),h.jsx("span",{style:{fontSize:"24px"},children:"📚"}),h.jsxs("div",{children:[h.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",margin:"0",color:n?"#2F855A":"#4A5568"},children:"Unorganized Games"}),h.jsx("p",{style:{fontSize:"14px",color:n?"#38A169":"#718096",margin:"4px 0 0 0"},children:n?"Drop here to remove from folders":`${t} games without folders`})]})]})},MZe=({game:t,onPlay:e,onEdit:n,onAssign:r,onDelete:i})=>{const{attributes:o,listeners:s,setNodeRef:a,isDragging:l}=JL({id:t.id,data:{type:"game",game:t}});return h.jsx("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"14px",border:"1px solid #E2E8F0",boxShadow:l?"0 8px 24px rgba(0, 0, 0, 0.15)":"0 2px 4px rgba(0, 0, 0, 0.05)",transition:"all 0.2s ease",opacity:l?.5:1,transform:l?"rotate(2deg)":"none",position:"relative"},onMouseEnter:c=>{l||(c.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)",c.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:c=>{l||(c.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.05)",c.currentTarget.style.transform="translateY(0)")},children:h.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[h.jsxs("div",se(j(j({ref:a},o),s),{style:{width:"48px",height:"48px",backgroundColor:(t.gameType||"").includes("whack")?"#C6F6D5":(t.gameType||"").includes("spinner")?"#FED7D7":(t.gameType||"").includes("anagram")?"#BFDBFE":(t.gameType||"").includes("sentence")?"#E0F2FE":(t.gameType||"").includes("place")?"#FFEBE6":(t.gameType||"").includes("word-volley")?"#FFF2E6":"#E9D8FD",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",flexShrink:0,cursor:l?"grabbing":"grab",border:l?"2px solid #4299E1":"2px solid transparent",transition:"all 0.2s ease",position:"relative"},onMouseEnter:c=>{l||(c.currentTarget.style.border="2px solid #CBD5E0",c.currentTarget.style.transform="scale(1.05)")},onMouseLeave:c=>{l||(c.currentTarget.style.border="2px solid transparent",c.currentTarget.style.transform="scale(1)")},title:"Drag to move game to folder",children:[t.thumbnailUrl?h.jsx("img",{src:t.thumbnailUrl,alt:t.title,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"6px",pointerEvents:"none"}}):h.jsx("div",{style:{fontSize:"20px",color:"#718096",pointerEvents:"none"},children:(t.gameType||"").includes("whack")?"🔨":(t.gameType||"").includes("spinner")?"🎡":(t.gameType||"").includes("anagram")?"🧩":(t.gameType||"").includes("sentence")?"📝":(t.gameType||"").includes("place")?"🎯":(t.gameType||"").includes("word-volley")?"🏓":"🥚"}),h.jsx("div",{style:{position:"absolute",bottom:"2px",right:"2px",width:"10px",height:"10px",backgroundColor:l?"#4299E1":"rgba(0, 0, 0, 0.2)",borderRadius:"2px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"6px",color:"white",opacity:l?1:.7,transition:"all 0.2s ease",pointerEvents:"none"},children:"⋮⋮"})]})),h.jsxs("div",{style:{flex:1,minWidth:0},children:[h.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"3px",color:"#2D3748",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.title}),t.folderName&&h.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"3px",padding:"1px 5px",backgroundColor:t.folderColor||"#E2E8F0",color:"white",borderRadius:"10px",fontSize:"11px",fontWeight:"500",marginBottom:"6px"},children:["📁 ",t.folderName]}),h.jsx("p",{style:{color:"#718096",fontSize:"13px",marginBottom:"12px",textTransform:"capitalize"},children:(t.gameType||"Unknown").replace("-"," ")}),h.jsxs("div",{style:{display:"flex",gap:"5px",flexWrap:"nowrap"},children:[h.jsx("button",{onClick:c=>{c.stopPropagation(),e(t.id)},style:{padding:"3px 6px",backgroundColor:"#E3F2FD",color:"#1976D2",border:"1px solid #BBDEFB",borderRadius:"5px",cursor:"pointer",fontSize:"10px",fontWeight:"500",display:"flex",alignItems:"center",gap:"2px",transition:"all 0.2s",minWidth:"auto",whiteSpace:"nowrap"},onMouseEnter:c=>{c.currentTarget.style.backgroundColor="#BBDEFB",c.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:c=>{c.currentTarget.style.backgroundColor="#E3F2FD",c.currentTarget.style.transform="translateY(0)"},children:"▶️ Play"}),h.jsx("button",{onClick:c=>{c.stopPropagation(),n(t)},style:{padding:"3px 6px",backgroundColor:"#F3E5F5",color:"#7B1FA2",border:"1px solid #E1BEE7",borderRadius:"5px",cursor:"pointer",fontSize:"10px",fontWeight:"500",display:"flex",alignItems:"center",gap:"2px",transition:"all 0.2s",minWidth:"auto",whiteSpace:"nowrap"},onMouseEnter:c=>{c.currentTarget.style.backgroundColor="#E1BEE7",c.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:c=>{c.currentTarget.style.backgroundColor="#F3E5F5",c.currentTarget.style.transform="translateY(0)"},children:"✏️ Edit"}),h.jsx("button",{onClick:c=>{c.stopPropagation(),r(t)},style:{padding:"3px 6px",backgroundColor:"#E8F5E8",color:"#2E7D32",border:"1px solid #C8E6C9",borderRadius:"5px",cursor:"pointer",fontSize:"10px",fontWeight:"500",display:"flex",alignItems:"center",gap:"2px",transition:"all 0.2s",minWidth:"auto",whiteSpace:"nowrap"},onMouseEnter:c=>{c.currentTarget.style.backgroundColor="#C8E6C9",c.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:c=>{c.currentTarget.style.backgroundColor="#E8F5E8",c.currentTarget.style.transform="translateY(0)"},children:"📧 Assign"}),h.jsx("button",{onClick:c=>{c.stopPropagation(),i(t.id)},style:{padding:"3px 6px",backgroundColor:"#FFEBEE",color:"#C62828",border:"1px solid #FFCDD2",borderRadius:"5px",cursor:"pointer",fontSize:"10px",fontWeight:"500",display:"flex",alignItems:"center",gap:"2px",transition:"all 0.2s",minWidth:"auto",whiteSpace:"nowrap"},onMouseEnter:c=>{c.currentTarget.style.backgroundColor="#FFCDD2",c.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:c=>{c.currentTarget.style.backgroundColor="#FFEBEE",c.currentTarget.style.transform="translateY(0)"},children:"🗑️"})]})]})]})})},nne=({folder:t,selectedFolderId:e,onFolderClick:n,onCreateSubfolder:r,onEditFolder:i,onDeleteFolder:o,getGamesInFolder:s,canCreateSubfolder:a,maxDepth:l,showGameCounts:c,collapsible:u,expandedFolders:d,onToggleExpanded:f})=>{const b=s(t.id).length,v=e===t.id,m=t.children&&t.children.length>0,g=d.has(t.id),x=t.level*24,{setNodeRef:w,isOver:S}=e2({id:t.id,data:{type:"folder",folder:t}}),{attributes:P,listeners:I,setNodeRef:M,isDragging:D}=JL({id:t.id,data:{type:"folder",folder:t}}),E=T.useCallback(()=>{n(t.id)},[t.id,n]),_=T.useCallback(A=>{A.stopPropagation(),m&&u&&f(t.id)},[t.id,m,u,f]);return h.jsxs("div",{style:{marginLeft:`${x}px`},children:[h.jsx("div",{style:{position:"relative"},children:h.jsx("div",{ref:w,style:{backgroundColor:S?"#E6FFFA":"transparent",border:S?"2px dashed #38B2AC":"2px solid transparent",borderRadius:"8px",padding:"2px",transition:"all 0.2s ease"},children:h.jsxs("div",se(j(j({ref:M},P),I),{onClick:E,style:{padding:"16px 20px",backgroundColor:v?t.color||"#4299E1":"white",color:v?"white":"#4A5568",border:`2px solid ${t.color||"#4299E1"}`,borderRadius:"6px",cursor:D?"grabbing":"grab",fontSize:"14px",fontWeight:v?"600":"400",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"4px",userSelect:"none",opacity:D?.5:1,transform:D?"rotate(2deg)":"none",transition:"all 0.2s ease",minHeight:"56px"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[h.jsx("span",{style:{fontSize:"16px"},children:g?"📂":"📁"}),h.jsx("span",{children:t.name}),m&&h.jsxs("span",{style:{fontSize:"12px",color:v?"rgba(255,255,255,0.8)":"#718096",marginLeft:"4px"},children:["(",t.children.length,")"]})]}),h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[c&&b>0&&h.jsxs("span",{style:{fontSize:"11px",backgroundColor:v?"rgba(255,255,255,0.2)":"#E2E8F0",color:v?"white":"#4A5568",padding:"2px 6px",borderRadius:"10px",fontWeight:"500"},children:[b," game",b!==1?"s":""]}),(v||t.level<l)&&a(t.id)&&h.jsx("button",{onClick:A=>{A.stopPropagation(),r(t.id)},style:{background:"none",border:"none",cursor:"pointer",padding:"2px",color:v?"white":"#4299E1",fontSize:"12px",opacity:v?1:.7},title:"Add subfolder",children:"➕"}),h.jsx("button",{onClick:A=>{A.stopPropagation(),i(t)},style:{background:"none",border:"none",cursor:"pointer",padding:"2px",color:v?"white":"#805AD5",fontSize:"12px",opacity:v?1:.7},title:"Edit folder",children:"✏️"}),m&&h.jsx("button",{onClick:_,style:{background:"none",border:"none",cursor:"pointer",padding:"2px",color:v?"white":"#4A5568",fontSize:"12px"},children:g?"▼":"▶"}),h.jsx("button",{onClick:A=>{A.stopPropagation(),window.confirm(`Delete folder "${t.name}"?`)&&o(t.id)},style:{background:"none",border:"none",cursor:"pointer",padding:"2px",color:v?"white":"#E53E3E",fontSize:"12px",opacity:.7},title:"Delete folder",children:"🗑️"})]})]}))})}),g&&m&&t.children.map(A=>h.jsx(nne,{folder:A,selectedFolderId:e,onFolderClick:n,onCreateSubfolder:r,onEditFolder:i,onDeleteFolder:o,getGamesInFolder:s,canCreateSubfolder:a,maxDepth:l,showGameCounts:c,collapsible:u,expandedFolders:d,onToggleExpanded:f},A.id))]})},PZe=({folders:t,selectedFolderId:e,onFolderClick:n,onCreateSubfolder:r,onEditFolder:i,onDeleteFolder:o,getGamesInFolder:s,canCreateSubfolder:a,maxDepth:l=3,showGameCounts:c=!0,collapsible:u=!0})=>{const[d,f]=T.useState(()=>{const m=new Set,g=x=>{x.forEach(w=>{w.level<2&&m.add(w.id),w.children&&w.children.length>0&&g(w.children)})};return g(t),m}),p=T.useCallback(m=>{f(g=>{const x=new Set(g);return x.has(m)?x.delete(m):x.add(m),x})},[]),b=T.useCallback(()=>{const m=new Set,g=x=>{x.forEach(w=>{m.add(w.id),w.children&&w.children.length>0&&g(w.children)})};g(t),f(m)},[t]),v=T.useCallback(()=>{f(new Set)},[]);return h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[h.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"8px",padding:"8px",backgroundColor:"#F7FAFC",borderRadius:"6px",border:"1px solid #E2E8F0"},children:[t.length>0&&u&&h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:b,style:{padding:"4px 8px",backgroundColor:"#E6FFFA",color:"#319795",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"📂 Expand All"}),h.jsx("button",{onClick:v,style:{padding:"4px 8px",backgroundColor:"#FED7D7",color:"#C53030",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"📁 Collapse All"})]}),h.jsx("button",{onClick:()=>r(null),style:{padding:"6px 12px",backgroundColor:"#4299E1",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"➕ Add Root Folder"}),t.length===0&&h.jsx("span",{style:{fontSize:"12px",color:"#718096",alignSelf:"center",marginLeft:"8px"},children:"Create folders to organize your games"})]}),t.length>0&&h.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:t.map(m=>h.jsx(nne,{folder:m,selectedFolderId:e,onFolderClick:n,onCreateSubfolder:r,onEditFolder:i,onDeleteFolder:o,getGamesInFolder:s,canCreateSubfolder:a,maxDepth:l,showGameCounts:c,collapsible:u,expandedFolders:d,onToggleExpanded:p},m.id))}),t.length===0&&h.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"#718096",backgroundColor:"#F7FAFC",borderRadius:"8px",border:"2px dashed #CBD5E0"},children:[h.jsx("div",{style:{fontSize:"32px",marginBottom:"8px"},children:"📁"}),h.jsx("p",{style:{margin:"0",fontWeight:"500"},children:"No folders yet"}),h.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"14px"},children:'Use the "Add Root Folder" button above to get started'})]})]})},t2="assignmentFolders",n2="assignmentFolderAssignments",PW=3,DZe=t=>te(nt,null,function*(){try{const e=wr.now();return(yield yc(Tn(bt,t2),se(j({},t),{createdAt:e,updatedAt:e}))).id}catch(e){throw console.error("Error creating assignment folder:",e),e}}),RZe=t=>te(nt,null,function*(){try{const e=mr(Tn(bt,t2),Bn("userId","==",t),f0("order","asc"));return(yield Xn(e)).docs.map(r=>{var i,o;return se(j({id:r.id},r.data()),{createdAt:((i=r.data().createdAt)==null?void 0:i.toDate())||new Date,updatedAt:((o=r.data().updatedAt)==null?void 0:o.toDate())||new Date})})}catch(e){throw console.error("Error fetching user assignment folders:",e),e}}),IZe=(t,e)=>te(nt,null,function*(){try{const n=an(bt,t2,t);yield Os(n,se(j({},e),{updatedAt:wr.now()}))}catch(n){throw console.error("Error updating assignment folder:",n),n}}),kZe=t=>te(nt,null,function*(){try{const e=lL(bt),n=an(bt,t2,t);e.delete(n);const r=mr(Tn(bt,n2),Bn("folderId","==",t));(yield Xn(r)).docs.forEach(o=>{e.delete(o.ref)}),yield e.commit()}catch(e){throw console.error("Error deleting assignment folder:",e),e}}),FZe=(t,e,n)=>te(nt,null,function*(){try{return yield rne(t,n),(yield yc(Tn(bt,n2),{assignmentId:t,folderId:e,userId:n,assignedAt:wr.now()})).id}catch(r){throw console.error("Error assigning assignment to folder:",r),r}}),rne=(t,e)=>te(nt,null,function*(){try{const n=mr(Tn(bt,n2),Bn("assignmentId","==",t),Bn("userId","==",e)),r=yield Xn(n),i=lL(bt);r.docs.forEach(o=>{i.delete(o.ref)}),yield i.commit()}catch(n){throw console.error("Error removing assignment from folder:",n),n}}),OZe=t=>te(nt,null,function*(){try{const e=mr(Tn(bt,n2),Bn("userId","==",t));return(yield Xn(e)).docs.map(r=>{var i;return se(j({id:r.id},r.data()),{assignedAt:((i=r.data().assignedAt)==null?void 0:i.toDate())||new Date})})}catch(e){throw console.error("Error fetching assignment folder assignments:",e),e}}),e5=(t,e=[],n=null,r=0)=>t.filter(o=>(o.parentId===void 0?null:o.parentId)===n).map(o=>{const s=e5(t,e,o.id,r+1),l=e.filter(c=>c.folderId===o.id).length+s.reduce((c,u)=>c+(u.assignmentCount||0),0);return se(j({},o),{children:s,level:r,assignmentCount:l,isExpanded:r<2})}).sort((o,s)=>(o.order||0)-(s.order||0)),NZe=(t,e)=>{if(!e)return!0;let n=0,r=e;for(;r&&n<=PW;){const i=t.find(o=>o.id===r);if(!i)break;n++,r=i.parentId||null}return n<PW},LZe=(t,e)=>NZe(t,e),BZe=({userId:t,assignments:e,onAssignmentsUpdate:n,onShowToast:r})=>{const[i,o]=T.useState([]),[s,a]=T.useState([]),[l,c]=T.useState(null),[u,d]=T.useState(!1),[f,p]=T.useState(null),[b,v]=T.useState(new Set),[m,g]=T.useState([]),[x,w]=T.useState([]),{showModal:S}=Rl(),P=m.length>0,I=x.length>0,M=T.useMemo(()=>e5(i,e),[i,e]),D=T.useCallback(()=>te(nt,null,function*(){if(t){d(!0),p(null);try{console.log("📋 Loading assignment folders for user:",t);const[K,Z]=yield Promise.all([RZe(t),OZe(t)]);console.log("📋 Retrieved assignment folders:",K),console.log("📋 Retrieved assignment folder assignments:",Z),o(K),a(Z);const ee=new Set;K.forEach(V=>{(V.depth||0)<2&&ee.add(V.id)}),v(ee)}catch(K){const Z=K instanceof Error?K.message:"Failed to load assignment folder data";console.error("Error loading assignment folders:",K),p(Z),r({title:"Error Loading Assignment Folders",description:Z,status:"error",duration:5e3})}finally{d(!1)}}}),[t,r]);T.useEffect(()=>{t&&D()},[t,D]);const E=T.useCallback(K=>te(nt,null,function*(){var Z;try{const ee=se(j({},K),{userId:t,depth:K.parentId?(((Z=i.find(J=>J.id===K.parentId))==null?void 0:Z.depth)||0)+1:0,order:i.filter(J=>J.parentId===(K.parentId||null)).length});console.log("📋 Creating assignment folder:",ee);const V=yield DZe(ee);return r({title:"Assignment Folder Created",description:`"${K.name}" has been created successfully`,status:"success",duration:3e3}),yield D(),V}catch(ee){throw console.error("Error creating assignment folder:",ee),r({title:"Error Creating Assignment Folder",description:"Failed to create assignment folder. Please try again.",status:"error",duration:5e3}),ee}}),[t,i,D,r]),_=T.useCallback((K,Z)=>te(nt,null,function*(){try{console.log("📋 Updating assignment folder:",K,Z),yield IZe(K,Z),r({title:"Assignment Folder Updated",description:"Assignment folder has been updated successfully",status:"success",duration:3e3}),yield D()}catch(ee){throw console.error("Error updating assignment folder:",ee),r({title:"Error Updating Assignment Folder",description:"Failed to update assignment folder. Please try again.",status:"error",duration:5e3}),ee}}),[D,r]),A=T.useCallback(K=>te(nt,null,function*(){try{console.log("📋 Deleting assignment folder:",K),yield kZe(K),r({title:"Assignment Folder Deleted",description:"Assignment folder has been deleted successfully",status:"success",duration:3e3}),yield D()}catch(Z){throw console.error("Error deleting assignment folder:",Z),r({title:"Error Deleting Assignment Folder",description:"Failed to delete assignment folder. Please try again.",status:"error",duration:5e3}),Z}}),[D,r]),R=T.useCallback((K,Z)=>te(nt,null,function*(){try{console.log("📋 Assigning assignment to folder:",{assignmentId:K,folderId:Z,userId:t}),yield FZe(K,Z,t);const ee=yield mk(t);n(ee),yield D()}catch(ee){throw console.error("Error assigning assignment to folder:",ee),r({title:"Error Moving Assignment",description:"Failed to move assignment to folder. Please try again.",status:"error",duration:5e3}),ee}}),[t,n,D,r]),F=T.useCallback(K=>te(nt,null,function*(){try{console.log("📋 Removing assignment from folder:",{assignmentId:K,userId:t}),yield rne(K,t);const Z=yield mk(t);n(Z),yield D()}catch(Z){throw console.error("Error removing assignment from folder:",Z),r({title:"Error Removing Assignment",description:"Failed to remove assignment from folder. Please try again.",status:"error",duration:5e3}),Z}}),[t,n,D,r]),L=T.useCallback(K=>e.filter(Z=>Z.folderId===K),[e]),N=T.useCallback(()=>e.filter(K=>!K.folderId),[e]),U=T.useCallback(K=>{console.log("📋 Opening create assignment folder modal, parentId:",K),S("assignment-folder-modal",{title:"Create Assignment Folder",onSave:Z=>te(nt,null,function*(){console.log("📋 onSave callback triggered with data:",Z,"parentId:",K);try{yield E(se(j({},Z),{parentId:K||null})),console.log("📋 Folder creation completed successfully")}catch(ee){throw console.error("📋 Error in onSave callback:",ee),ee}}),onCancel:()=>{console.log("📋 Create assignment folder modal cancelled")}})},[S,E]),$=T.useCallback(K=>{console.log("📋 Opening edit assignment folder modal:",K),S("assignment-folder-modal",{title:"Edit Assignment Folder",folder:{id:K.id,name:K.name,description:K.description,color:K.color},onSave:(Z,ee)=>te(nt,null,function*(){console.log("📋 Edit onSave callback triggered with data:",Z,"folderId:",ee);try{ee&&(yield _(ee,Z),console.log("📋 Folder update completed successfully"))}catch(V){throw console.error("📋 Error in edit onSave callback:",V),V}}),onCancel:()=>{console.log("📋 Edit assignment folder modal cancelled")}})},[S,_]),B=T.useCallback(()=>te(nt,null,function*(){r({title:"Undo",description:"Assignment folder undo functionality coming soon",status:"info",duration:3e3})}),[r]),H=T.useCallback(()=>te(nt,null,function*(){r({title:"Redo",description:"Assignment folder redo functionality coming soon",status:"info",duration:3e3})}),[r]),q=T.useCallback((K,Z)=>te(nt,null,function*(){console.log("📋 handleSaveFolder called with:",K,"folderId:",Z);try{Z?yield _(Z,K):yield E(se(j({},K),{parentId:null}))}catch(ee){throw console.error("📋 Error in handleSaveFolder:",ee),ee}}),[_,E]),z=T.useCallback(K=>te(nt,null,function*(){console.log("📋 handleDeleteFolder called with folderId:",K);try{yield A(K)}catch(Z){throw console.error("📋 Error in handleDeleteFolder:",Z),Z}}),[A]),G=T.useCallback(()=>{console.log("📋 handleCancelFolder called")},[]);return{folders:i,folderTree:M,assignments:s,selectedFolderId:l,isLoading:u,error:f,canUndo:P,canRedo:I,undoStack:m,redoStack:x,createNewFolder:E,updateExistingFolder:_,deleteExistingFolder:A,setSelectedFolderId:c,getAssignmentsInFolder:L,getUnorganizedAssignments:N,canCreateSubfolder:K=>LZe(i,K),refreshData:D,refreshFolders:D,openCreateFolderModal:U,openEditFolderModal:$,undo:B,redo:H,assignAssignmentToFolder:R,removeAssignmentFromFolder:F,handleSaveFolder:q,handleDeleteFolder:z,handleCancelFolder:G}},ine=({folder:t,selectedFolderId:e,onFolderClick:n,onCreateSubfolder:r,onEditFolder:i,onDeleteFolder:o,getAssignmentsInFolder:s,canCreateSubfolder:a,maxDepth:l,expandedFolders:c,onToggleExpanded:u})=>{var M;const d=s(t.id),f=d.length,p=e===t.id,b=t.children&&t.children.length>0,v=c.has(t.id),m=t.level*24,g=D=>D.replace(/[^a-zA-Z0-9]/g,"").slice(0,12),x=()=>{if(d.length===0)return null;const D=d.map(E=>g(E.gameName||E.title||"Untitled")).filter(E=>E.length>0);return D.length>0?D:["Untitled"]},{setNodeRef:w,isOver:S}=e2({id:`folder-${t.id}`,data:{type:"folder",folderId:t.id}}),P=T.useCallback(()=>{n(t.id)},[t.id,n]),I=T.useCallback(D=>{D.stopPropagation(),b&&u(t.id)},[t.id,b,u]);return h.jsx("div",{style:{marginLeft:`${m}px`},children:h.jsxs("div",{style:{position:"relative"},children:[h.jsx("div",{ref:w,style:{backgroundColor:S?"#E2F8FF":"transparent",border:S?"2px dashed #3182CE":"2px solid transparent",borderRadius:"8px",padding:"2px",transition:"all 0.2s ease"},children:h.jsxs("div",{onClick:P,style:{padding:"16px 20px",backgroundColor:p?t.color||"#4299E1":"white",color:p?"white":"#4A5568",border:`2px solid ${t.color||"#4299E1"}`,borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:p?"600":"400",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"4px",userSelect:"none",transition:"all 0.2s ease",minHeight:"56px",transform:S?"scale(1.02)":"scale(1)"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[b&&h.jsx("button",{onClick:I,style:{background:"none",border:"none",cursor:"pointer",padding:"2px",color:p?"white":"#4A5568",fontSize:"12px"},children:v?"▼":"▶"}),h.jsx("span",{style:{fontSize:"16px"},children:v?"📂":"📁"}),h.jsx("span",{children:t.name}),b&&h.jsxs("span",{style:{fontSize:"12px",color:p?"rgba(255,255,255,0.8)":"#718096",marginLeft:"4px"},children:["(",t.children.length,")"]})]}),h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[f>0&&h.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"2px",maxWidth:"200px"},children:(M=x())==null?void 0:M.map((D,E)=>h.jsx("span",{style:{fontSize:"10px",backgroundColor:p?"rgba(255,255,255,0.3)":"#E2E8F0",color:p?"white":"#4A5568",padding:"1px 4px",borderRadius:"8px",fontWeight:"500",fontFamily:"monospace"},children:D},E))}),h.jsxs("div",{style:{display:"flex",gap:"2px",alignItems:"center",pointerEvents:"auto",zIndex:20,position:"relative"},children:[t.level<l&&a(t.id)&&h.jsx("button",{onClick:D=>{D.stopPropagation(),r(t.id)},style:{background:"none",border:"none",cursor:"pointer",padding:"4px 6px",color:p?"white":"#4299E1",fontSize:"14px",opacity:1,zIndex:10,position:"relative",pointerEvents:"auto",minWidth:"20px",minHeight:"20px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Add subfolder",children:"➕"}),h.jsx("button",{onClick:D=>{D.stopPropagation(),i(t)},style:{background:"none",border:"none",cursor:"pointer",padding:"4px 6px",color:p?"white":"#805AD5",fontSize:"14px",opacity:1,zIndex:10,position:"relative",pointerEvents:"auto",minWidth:"20px",minHeight:"20px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Edit folder",children:"✏️"}),h.jsx("button",{onClick:D=>{D.stopPropagation(),o(t.id)},style:{background:"none",border:"none",cursor:"pointer",padding:"4px 6px",color:p?"white":"#E53E3E",fontSize:"14px",opacity:1,zIndex:10,position:"relative",pointerEvents:"auto",minWidth:"20px",minHeight:"20px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Delete folder",children:"🗑️"})]})]})]})}),b&&v&&h.jsx("div",{style:{marginTop:"4px"},children:t.children.map(D=>h.jsx(ine,{folder:D,selectedFolderId:e,onFolderClick:n,onCreateSubfolder:r,onEditFolder:i,onDeleteFolder:o,getAssignmentsInFolder:s,canCreateSubfolder:a,maxDepth:l,expandedFolders:c,onToggleExpanded:u},D.id))})]})})},jZe=({unorganizedAssignments:t})=>{const{isOver:e,setNodeRef:n}=e2({id:"unorganized-zone",data:{type:"unorganized"}});return h.jsxs("div",{ref:n,style:{padding:"12px",backgroundColor:e?"#FFF8E1":"#FFF8DC",border:`2px dashed ${e?"#F59E0B":"#DDD"}`,borderRadius:"8px",textAlign:"center",color:"#666",transition:"all 0.2s ease",transform:e?"scale(1.02)":"scale(1)"},children:["🗂️ Unorganized Assignments (",t.length,")",h.jsx("br",{}),h.jsx("small",{children:"Drag assignments here to remove them from folders"})]})},UZe=({currentUser:t,assignments:e,onAssignmentsUpdate:n,showToast:r,assignmentFolderFilter:i,setAssignmentFolderFilter:o,onFolderHandlersReady:s})=>{const[a,l]=T.useState(new Set),c=BZe({userId:(t==null?void 0:t.uid)||"",assignments:e,onAssignmentsUpdate:n,onShowToast:r}),u=T.useMemo(()=>e5(c.folders,e),[c.folders,e]),d=T.useCallback(v=>{l(m=>{const g=new Set(m);return g.has(v)?g.delete(v):g.add(v),g})},[]),f=T.useCallback(()=>{const v=new Set,m=g=>{g.forEach(x=>{v.add(x.id),x.children.length>0&&m(x.children)})};m(u),l(v)},[u]),p=T.useCallback(()=>{l(new Set)},[]),b=T.useMemo(()=>se(j({},c),{expandAll:f,collapseAll:p}),[c.handleSaveFolder,c.handleDeleteFolder,c.handleCancelFolder,c.assignAssignmentToFolder,c.removeAssignmentFromFolder,c.openCreateFolderModal,c.openEditFolderModal,f,p]);return Lt.useEffect(()=>{s&&(console.log("📋 Calling onFolderHandlersReady with handlers:",Object.keys(b)),s(b))},[b,s]),Lt.useEffect(()=>{const v=new Set,m=g=>{g.forEach(x=>{x.level<2&&v.add(x.id),x.children.length>0&&m(x.children)})};m(u),l(g=>new Set([...g,...v]))},[u]),c.isLoading?h.jsx("div",{style:{marginBottom:"12px",padding:"16px",textAlign:"center"},children:"Loading assignment folders..."}):c.error?h.jsxs("div",{style:{marginBottom:"12px",padding:"16px",backgroundColor:"#FED7D7",color:"#9B2C2C",borderRadius:"8px",textAlign:"center"},children:["Error loading assignment folders: ",c.error]}):h.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"#F0F8FF",borderRadius:"8px",border:"1px solid #B0E0E6"},children:[h.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[h.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#2D3748"},children:"📋 Organize Your Assignments"}),h.jsxs("div",{style:{display:"flex",gap:"4px"},children:[h.jsx("button",{onClick:c.undo,disabled:!c.canUndo,style:{padding:"6px 12px",backgroundColor:c.canUndo?"#2B6CB0":"#EDF2F7",color:c.canUndo?"white":"#A0AEC0",border:`2px solid ${c.canUndo?"#2B6CB0":"#CBD5E0"}`,borderRadius:"6px",cursor:c.canUndo?"pointer":"not-allowed",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s ease",boxShadow:c.canUndo?"0 2px 4px rgba(43, 108, 176, 0.2)":"none"},title:"Undo last action",children:"↶ Undo"}),h.jsx("button",{onClick:c.redo,disabled:!c.canRedo,style:{padding:"6px 12px",backgroundColor:c.canRedo?"#38A169":"#EDF2F7",color:c.canRedo?"white":"#A0AEC0",border:`2px solid ${c.canRedo?"#38A169":"#CBD5E0"}`,borderRadius:"6px",cursor:c.canRedo?"pointer":"not-allowed",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s ease",boxShadow:c.canRedo?"0 2px 4px rgba(56, 161, 105, 0.2)":"none"},title:"Redo last action",children:"↷ Redo"})]})]})}),h.jsx("div",{style:{marginBottom:"8px"},children:h.jsxs("button",{onClick:()=>{c.setSelectedFolderId(null),o("all")},style:{padding:"8px 16px",backgroundColor:c.selectedFolderId===null?"#E2E8F0":"white",color:c.selectedFolderId===null?"#2D3748":"#4A5568",border:"1px solid #E2E8F0",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:c.selectedFolderId===null?"600":"400"},children:["📋 All Assignments (",e.length,")"]})}),c.folders.length>0?h.jsxs("div",{children:[h.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px",alignItems:"center"},children:[h.jsx("button",{onClick:f,style:{padding:"4px 8px",backgroundColor:"#E6FFFA",color:"#234E52",border:"1px solid #4FD1C7",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"500"},children:"📖 Expand All"}),h.jsx("button",{onClick:p,style:{padding:"4px 8px",backgroundColor:"#FED7D7",color:"#742A2A",border:"1px solid #FC8181",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"500"},children:"📕 Collapse All"}),h.jsx("button",{onClick:()=>c.openCreateFolderModal(),style:{padding:"4px 8px",backgroundColor:"#4299E1",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"500"},children:"➕ Add Root Folder"})]}),h.jsx("div",{style:{marginBottom:"12px",padding:"12px",backgroundColor:"white",borderRadius:"6px",border:"1px solid #E2E8F0",minHeight:"100px"},children:u.map(v=>h.jsx(ine,{folder:v,selectedFolderId:c.selectedFolderId,onFolderClick:m=>{c.setSelectedFolderId(m),o(m)},onCreateSubfolder:c.openCreateFolderModal,onEditFolder:c.openEditFolderModal,onDeleteFolder:c.deleteExistingFolder,getAssignmentsInFolder:c.getAssignmentsInFolder,canCreateSubfolder:c.canCreateSubfolder,maxDepth:3,expandedFolders:a,onToggleExpanded:d},v.id))}),h.jsx("div",{style:{marginTop:"12px"},children:h.jsx(jZe,{unorganizedAssignments:c.getUnorganizedAssignments()})})]}):h.jsx("div",{style:{marginBottom:"12px"},children:h.jsxs("div",{style:{marginBottom:"12px",padding:"16px",backgroundColor:"#E6F3FF",borderRadius:"8px",border:"1px solid #4299E1",textAlign:"center"},children:[h.jsx("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#2B6CB0",marginBottom:"8px"},children:"🚀 Get Started with Assignment Folders"}),h.jsx("p",{style:{color:"#4A5568",marginBottom:"12px"},children:"Organize your assignments into folders to keep track of different classes, subjects, or assignment types."}),h.jsx("button",{onClick:()=>c.openCreateFolderModal(),style:{padding:"8px 16px",backgroundColor:"#4299E1",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"📁 Create Your First Assignment Folder"})]})})]})},zZe=({assignment:t,getStudentDisplayName:e,handleViewAssignment:n,confirmDeleteAssignment:r})=>{var d,f,p;const{attributes:i,listeners:o,setNodeRef:s,isDragging:a}=JL({id:t.id||"unknown",data:{type:"assignment",assignment:t}}),l=new Date,c=((d=t.deadline)==null?void 0:d.toDate())<l&&(t.status==="assigned"||t.status==="started"),u=t.status==="completed";return h.jsxs("tr",{style:{borderBottom:"1px solid #E2E8F0",backgroundColor:u?"#F0FFF4":c?"#FFF5F5":"transparent",opacity:a?.5:1,transform:a?"rotate(1deg)":"none",transition:"all 0.2s ease"},children:[h.jsx("td",{style:{padding:"12px",width:"40px"},children:h.jsx("div",se(j(j({ref:s},i),o),{style:{width:"24px",height:"24px",backgroundColor:"#F7FAFC",border:"2px solid #E2E8F0",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",cursor:a?"grabbing":"grab",fontSize:"12px",color:"#718096",transition:"all 0.2s ease"},onMouseEnter:b=>{a||(b.currentTarget.style.backgroundColor="#EDF2F7",b.currentTarget.style.borderColor="#CBD5E0")},onMouseLeave:b=>{a||(b.currentTarget.style.backgroundColor="#F7FAFC",b.currentTarget.style.borderColor="#E2E8F0")},title:"Drag to move assignment to folder",children:"⋮⋮"}))}),h.jsx("td",{style:{padding:"12px"},children:t.gameName}),h.jsx("td",{style:{padding:"12px"},children:t.gameType}),h.jsx("td",{style:{padding:"12px"},children:(f=t.createdAt)==null?void 0:f.toDate().toLocaleDateString()}),h.jsxs("td",{style:{padding:"12px"},children:[(p=t.deadline)==null?void 0:p.toDate().toLocaleDateString(),c&&h.jsx("span",{style:{color:"#E53E3E",fontSize:"12px",fontWeight:"bold",display:"block"},children:"Overdue"})]}),h.jsx("td",{style:{padding:"12px"},children:e(t.studentEmail)}),h.jsx("td",{style:{padding:"12px"},children:h.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"medium",backgroundColor:u?"#C6F6D5":c?"#FED7D7":"#E2E8F0",color:u?"#2F855A":c?"#C53030":"#4A5568"},children:u?"Completed":c?"Overdue":"Assigned"})}),h.jsx("td",{style:{padding:"12px"},children:h.jsxs("div",{style:{display:"flex",gap:"8px"},children:[h.jsx("button",{onClick:()=>n(t),style:{padding:"6px 16px",backgroundColor:"#3182CE",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"View"}),h.jsx("button",{onClick:()=>r(t.id||""),style:{padding:"6px 16px",backgroundColor:"#F56565",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"Delete"})]})})]},t.id)},VZe=({currentUser:t,showToast:e,students:n,onAssignmentHandlersReady:r})=>{const[i,o]=T.useState([]),[s,a]=T.useState(""),[l,c]=T.useState("all"),[u,d]=T.useState("all"),[f,p]=T.useState(null),[b,v]=T.useState(null),[m,g]=T.useState([]),[x,w]=T.useState(!1),[S,P]=T.useState(null),{showModal:I}=Rl(),M=$=>{var H,q;console.log("🚀 handleDragStart called:",{activeId:$.active.id,activeData:$.active.data.current});const B=(H=$.active.data.current)==null?void 0:H.assignment;B&&((q=$.active.data.current)==null?void 0:q.type)==="assignment"&&P(B)},D=$=>te(nt,null,function*(){var K,Z,ee,V,J;const{active:B,over:H}=$;if(console.log("🎯 handleDragEnd called:",{activeId:B.id,overId:H==null?void 0:H.id,activeData:B.data.current,overData:H==null?void 0:H.data.current,hasHandlers:!!f}),P(null),!H||!f){console.log("🚫 Early return - missing over or handlers:",{over:!!H,handlers:!!f});return}const q=(K=B.data.current)==null?void 0:K.assignment;if(!q||((Z=B.data.current)==null?void 0:Z.type)!=="assignment"){console.log("🚫 Early return - invalid drag data:",{draggedAssignment:!!q,type:(ee=B.data.current)==null?void 0:ee.type});return}const z=(V=H.data.current)==null?void 0:V.folderId,G=(J=H.data.current)==null?void 0:J.type;console.log("📁 Processing drop:",{droppedOnType:G,droppedOnFolderId:z,assignmentId:q.id,assignmentName:q.gameName});try{G==="folder"&&z?(console.log("📋 Assigning to folder:",z),yield f.assignAssignmentToFolder(q.id,z),e({title:"Assignment Moved",description:`"${q.gameName}" moved to folder`,status:"success",duration:3e3})):G==="unorganized"?(console.log("📋 Removing from folder"),yield f.removeAssignmentFromFolder(q.id),e({title:"Assignment Unorganized",description:`"${q.gameName}" removed from folder`,status:"success",duration:3e3})):console.log("🚫 No valid drop target found")}catch(oe){console.error("❌ Error in drag and drop:",oe),e({title:"Error",description:"Failed to move assignment",status:"error",duration:3e3})}}),E=$=>{const B=n.find(H=>H.email===$);return(B==null?void 0:B.name)||$.split("@")[0]};T.useEffect(()=>{te(nt,null,function*(){if(t)try{console.log("Fetching assignments for user:",t.uid);const B=yield mk(t.uid);console.log("Fetched assignments:",B),o(B)}catch(B){console.error("Error fetching assignments:",B),e({title:"Error fetching assignments",status:"error",duration:3e3})}})},[t]);const _=$=>te(nt,null,function*(){try{console.log("Deleting assignment:",$),yield p5e($),o(i.filter(B=>B.id!==$)),e({title:"Assignment deleted successfully",status:"success",duration:3e3})}catch(B){console.error("Error deleting assignment:",B),e({title:"Error deleting assignment",status:"error",duration:3e3})}}),A=$=>te(nt,null,function*(){console.log("Viewing assignment:",$),v($),w(!0);try{let B=[];$.id&&(B=yield m5e($.id),console.log("Assignment attempts:",B)),g(B),I("assignment-details",{assignment:$,attempts:B,onClose:R})}catch(B){console.error("Error fetching assignment attempts:",B),e({title:"Error loading assignment details",status:"error",duration:3e3}),g([])}finally{w(!1)}}),R=()=>{console.log("Closing assignment view"),v(null),g([])},F=$=>{console.log("🔵 confirmDeleteAssignment called with assignmentId:",$);const B=i.find(H=>H.id===$);if(!B){console.warn("🟡 confirmDeleteAssignment: Assignment not found:",$);return}console.log("🔵 confirmDeleteAssignment: Showing modal for assignment:",{assignmentId:$,assignmentTitle:B.gameName}),I("delete-confirmation",{title:"Delete Assignment?",itemName:B.gameName,itemType:"assignment",warningMessage:"This action cannot be undone. All student progress on this assignment will be lost.",onDelete:()=>_($)})};T.useEffect(()=>{r({handleDeleteAssignment:_,handleViewAssignment:A,closeViewAssignment:R})},[i]);const L=i.filter($=>{const B=!s||(()=>{var z,G,K;const q=s.toLowerCase();return((z=$.gameName)==null?void 0:z.toLowerCase().includes(q))||((G=$.studentEmail)==null?void 0:G.toLowerCase().includes(q))||((K=$.gameType)==null?void 0:K.toLowerCase().includes(q))})(),H=u==="all"?!0:u==="unorganized"?!$.folderId:$.folderId===u;return B&&H}),N=()=>{if(l==="all")return L;const $=new Date;return L.filter(B=>{var q;const H=(q=B.deadline)==null?void 0:q.toDate();switch(l){case"assigned":return B.status==="assigned"||B.status==="started";case"overdue":return(B.status==="assigned"||B.status==="started")&&H&&H<$;case"completed":return B.status==="completed";default:return!0}})},U=()=>{const $=new Date,B=L.filter(G=>G.status==="assigned"||G.status==="started").length,H=L.filter(G=>{var K;return(G.status==="assigned"||G.status==="started")&&((K=G.deadline)==null?void 0:K.toDate())&&G.deadline.toDate()<$}).length,q=L.filter(G=>G.status==="completed").length,z=G=>({padding:"8px 16px",margin:"0 4px",border:"none",borderRadius:"20px",backgroundColor:G?"#4299E1":"#F7FAFC",color:G?"white":"#4A5568",cursor:"pointer",fontSize:"14px",fontWeight:G?"bold":"normal",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"});return h.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"24px",flexWrap:"wrap"},children:[h.jsxs("button",{onClick:()=>c("all"),style:z(l==="all"),children:["All (",L.length,")"]}),h.jsxs("button",{onClick:()=>c("assigned"),style:z(l==="assigned"),children:["Active (",B,")"]}),h.jsxs("button",{onClick:()=>c("overdue"),style:z(l==="overdue"),children:["Overdue (",H,")"]}),h.jsxs("button",{onClick:()=>c("completed"),style:z(l==="completed"),children:["Completed (",q,")"]})]})};return h.jsxs(ene,{onDragEnd:D,onDragStart:M,children:[h.jsxs("div",{children:[h.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"#FAFAFA",borderRadius:"8px",border:"1px solid #E2E8F0"},children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[h.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#2D3748"},children:"🔍 Search & Filter Assignments"}),(s||l!=="all"||u!=="all")&&h.jsx("button",{onClick:()=>{a(""),c("all"),d("all")},style:{padding:"4px 8px",backgroundColor:"#F7FAFC",color:"#4A5568",border:"1px solid #CBD5E0",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Clear Filters"})]}),h.jsx("div",{style:{marginBottom:"12px"},children:h.jsx("input",{type:"text",placeholder:"Search by title, game type, or student email...",value:s,onChange:$=>a($.target.value),style:{padding:"10px 12px",border:"1px solid #CBD5E0",borderRadius:"6px",width:"100%",fontSize:"14px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)",outline:"none",transition:"border-color 0.2s"},onFocus:$=>{$.target.style.borderColor="#4299E1"},onBlur:$=>{$.target.style.borderColor="#CBD5E0"}})}),h.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[h.jsx("label",{style:{fontSize:"14px",color:"#4A5568",fontWeight:"500"},children:"Status:"}),h.jsxs("select",{value:l,onChange:$=>c($.target.value),style:{padding:"6px 8px",border:"1px solid #CBD5E0",borderRadius:"4px",fontSize:"14px",backgroundColor:"white",cursor:"pointer"},children:[h.jsx("option",{value:"all",children:"All Status"}),h.jsx("option",{value:"assigned",children:"🔴 Active"}),h.jsx("option",{value:"overdue",children:"⏰ Overdue"}),h.jsx("option",{value:"completed",children:"✅ Completed"})]})]}),f&&h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[h.jsx("label",{style:{fontSize:"14px",color:"#4A5568",fontWeight:"500"},children:"Organization:"}),h.jsxs("select",{value:u,onChange:$=>d($.target.value),style:{padding:"6px 8px",border:"1px solid #CBD5E0",borderRadius:"4px",fontSize:"14px",backgroundColor:"white",cursor:"pointer"},children:[h.jsx("option",{value:"all",children:"All Assignments"}),h.jsx("option",{value:"unorganized",children:"📋 Unorganized"})]})]}),h.jsx("div",{style:{marginLeft:"auto",fontSize:"14px",color:"#718096",fontWeight:"500"},children:(()=>{const $=N().length,B=i.length;return s||l!=="all"||u!=="all"?`${$} of ${B} assignments`:`${B} assignments`})()})]})]}),h.jsx(UZe,{currentUser:t,assignments:i,onAssignmentsUpdate:o,showToast:e,assignmentFolderFilter:u,setAssignmentFolderFilter:d,onFolderHandlersReady:$=>{console.log("📋 Assignment folder handlers ready - methods available:",{assignAssignmentToFolder:typeof $.assignAssignmentToFolder,removeAssignmentFromFolder:typeof $.removeAssignmentFromFolder,totalMethods:Object.keys($).length}),p($)}}),U(),N().length>0?h.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[h.jsx("thead",{children:h.jsxs("tr",{style:{borderBottom:"1px solid #E2E8F0"},children:[h.jsx("th",{style:{padding:"12px",textAlign:"left",width:"40px"},children:"⋮⋮"}),h.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Title"}),h.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Game"}),h.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Created Date"}),h.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Due Date"}),h.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Student"}),h.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Status"}),h.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Actions"})]})}),h.jsx("tbody",{children:N().map($=>h.jsx(zZe,{assignment:$,getStudentDisplayName:E,handleViewAssignment:A,confirmDeleteAssignment:F},$.id))})]}):h.jsx("div",{style:{padding:"24px",textAlign:"center",backgroundColor:"#EBF8FF",borderRadius:"8px",marginTop:"16px"},children:h.jsxs("p",{style:{color:"#4A5568",fontSize:"16px"},children:["No ",l!=="all"?l:""," assignments found."]})})]}),h.jsx(tne,{children:S?h.jsxs("div",{style:{padding:"6px 20px",backgroundColor:"#4299E1",color:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"12px",opacity:.9,transform:"rotate(2deg)",minWidth:"250px",maxWidth:"400px",cursor:"grabbing",whiteSpace:"nowrap"},children:["📋",h.jsx("span",{style:{flex:1,overflow:"hidden",textOverflow:"ellipsis"},children:S.gameName}),h.jsx("span",{style:{fontSize:"11px",backgroundColor:"rgba(255, 255, 255, 0.2)",padding:"2px 8px",borderRadius:"12px",flexShrink:0},children:"Assignment"})]}):null})]})},yE="teacher-dashboard-game-type-filter",WZe=15*60*1e3,$Ze=t=>{const e={value:t,timestamp:Date.now()};localStorage.setItem(yE,JSON.stringify(e))},HZe=()=>{try{const t=localStorage.getItem(yE);if(t){const e=JSON.parse(t);if(Date.now()-e.timestamp<WZe)return e.value;localStorage.removeItem(yE)}}catch(t){console.error("Error loading game type filter:",t),localStorage.removeItem(yE)}return"all"},GZe=()=>{var Pt,jt,Nt,Yt,en,fn,hn,mn,jn,er,Wr,lr,Yn,yn;const{currentUser:t}=Dr(),{toastMessage:e,showToast:n}=$L(),r=Pr(),i=gs(),{showModal:o}=Rl();T.useEffect(()=>{i.state&&i.state.activeTab&&p(i.state.activeTab)},[i]);const[s,a]=T.useState([]),[l,c]=T.useState([]),[u,d]=T.useState([]),[f,p]=T.useState("create"),[b,v]=T.useState(null),[m,g]=T.useState([]),[x,w]=T.useState(!1),[S,P]=T.useState(""),[I,M]=T.useState(""),[D,E]=T.useState(HZe()),[_,A]=T.useState("all"),[R,F]=T.useState(!1),[L,N]=T.useState([]),[U,$]=T.useState([]),[B,H]=T.useState(!1),[q,z]=T.useState([]),[G,K]=T.useState(!1),[Z,ee]=T.useState(""),[V,J]=T.useState(""),[oe,ne]=T.useState("all"),[pe,ye]=T.useState("all"),[Ce,_e]=T.useState("students"),[ce,Be]=T.useState("all"),[de,me]=T.useState(null),ie=T.useRef(null),ae=YXe({userId:(t==null?void 0:t.uid)||"",games:s,onGamesUpdate:Te=>a(Te),onShowToast:n}),ge=uQe(cQe(QL,{activationConstraint:{distance:3}})),[X,W]=T.useState(null),ve=T.useCallback(Te=>{const{active:Ze}=Te,le=Ze.data.current;console.log("🚀 Drag start:",{activeId:Ze.id,dragData:le}),le&&W({id:Ze.id,type:le.type,data:le.folder||le.game})},[]),ue=T.useCallback(Te=>{var Fe,Je,qe,Ve;const{active:Ze,over:le}=Te;le&&le.id&&((Fe=le.data.current)==null?void 0:Fe.type)==="folder"&&console.log("🎯 Drag over folder:",{activeId:Ze.id,overId:le.id,overFolder:(qe=(Je=le.data.current)==null?void 0:Je.folder)==null?void 0:qe.name,overType:(Ve=le.data.current)==null?void 0:Ve.type})},[]),Me=T.useCallback(Te=>{var Fe,Je;const{active:Ze,over:le}=Te;if(console.log("🎯 Drag end:",{activeId:Ze.id,overId:le==null?void 0:le.id,activeType:(Fe=Ze.data.current)==null?void 0:Fe.type,overType:(Je=le==null?void 0:le.data.current)==null?void 0:Je.type,overData:le==null?void 0:le.data.current}),Ze&&le&&Ze.id!==le.id){const qe=Ze.data.current,Ve=le.data.current;if(console.log("📦 Drop data detailed:",{dragData:qe,dropData:Ve,activeId:Ze.id,overId:le.id,dragType:qe==null?void 0:qe.type,dropType:Ve==null?void 0:Ve.type}),qe&&Ve){const wt={draggedItem:{id:Ze.id,type:qe.type,data:qe.folder||qe.game},targetFolderId:le.id,newParentId:Ve.type==="folder"?le.id:(Ve.type==="unorganized",null)};console.log("🔄 Calling handleDrop with:",wt),ae.handleDrop(wt)}else console.log("❌ Missing drag or drop data:",{dragData:qe,dropData:Ve})}else console.log("❌ Drop conditions not met:",{hasActive:!!Ze,hasOver:!!le,sameId:(Ze==null?void 0:Ze.id)===(le==null?void 0:le.id),activeId:Ze==null?void 0:Ze.id,overId:le==null?void 0:le.id});W(null)},[ae]);T.useEffect(()=>{const Te=le=>{if(!ae.selectedFolderId)return;const Fe=le.target,Je=Fe.closest("[data-folder-button]"),qe=Fe.closest("[data-folder-actions]");!Je&&!qe&&ae.setSelectedFolderId(null)},Ze=le=>{le.key==="Escape"&&ae.selectedFolderId&&ae.setSelectedFolderId(null)};return document.addEventListener("mousedown",Te),document.addEventListener("keydown",Ze),()=>{document.removeEventListener("mousedown",Te),document.removeEventListener("keydown",Ze)}},[ae.selectedFolderId,ae.setSelectedFolderId]);const Ae=T.useCallback(()=>te(nt,null,function*(){F(!0);try{const Te=Tn(bt,"userGameConfigs"),Ze=yield Xn(Te);if(Ze.empty){a([]),c([]),F(!1);return}const le=Ze.docs.map(qe=>{const Ve=qe.data();return{id:qe.id,title:Ve.title||"Untitled Game",description:Ve.description||"",gameType:Ve.type||"Unknown",thumbnailUrl:Ve.thumbnail||null,createdBy:Ve.email||"",share:Ve.share||!1,userId:Ve.userId||"",folderId:Ve.folderId||"",folderName:Ve.folderName||"",folderColor:Ve.folderColor||""}}),Fe=le.filter(qe=>qe.createdBy===(t==null?void 0:t.email)||qe.userId===(t==null?void 0:t.uid)),Je=le.filter(qe=>qe.share===!0&&qe.createdBy!==(t==null?void 0:t.email)&&qe.userId!==(t==null?void 0:t.uid));a(Fe),c(Je)}catch(Te){console.error("Error fetching games:",Te),n({title:"Error fetching games",status:"error",duration:3e3})}finally{F(!1)}}),[t==null?void 0:t.email,t==null?void 0:t.uid,n]),Ne=T.useCallback(()=>te(nt,null,function*(){try{if(t!=null&&t.uid){const Te=yield h5e(t.uid);d(Te)}}catch(Te){n({title:"Error fetching assignments",status:"error",duration:3e3})}}),[t==null?void 0:t.uid,n]),Re=T.useCallback(()=>te(nt,null,function*(){H(!0);try{const Te=Tn(bt,"blankGameTemplates"),le=(yield Xn(Te)).docs.map(wt=>{const It=wt.data();return se(j({id:wt.id},It),{userId:It.userId||"",createdBy:It.createdBy||It.email||""})}),Fe=Tn(bt,"categoryTemplates"),qe=(yield Xn(Fe)).docs.map(wt=>{const It=wt.data();return se(j({id:wt.id},It),{userId:It.userId||"",createdBy:It.createdBy||It.email||""})}),Ve=le.sort((wt,It)=>{const Ct=(wt.type||"").localeCompare(It.type||"");return Ct!==0?Ct:(wt.title||"").localeCompare(It.title||"",void 0,{numeric:!0,sensitivity:"base"})});N(Ve),$(qe)}catch(Te){console.error("Error fetching game templates:",Te),n({title:"Error fetching templates",status:"error",duration:3e3})}finally{H(!1)}}),[n]);T.useEffect(()=>{f==="create"&&Re()},[f,Re]),T.useEffect(()=>{f==="students"&&t&&lt()},[f,t]),T.useEffect(()=>{t&&(Ae(),Ne())},[t,Ae,Ne]);const Ie=Te=>te(nt,null,function*(){const Ze=Date.now();console.log("🗑️ handleDeleteGame called with gameId:",Te,"at timestamp:",Ze);try{console.log("🗑️ Starting game deletion..."),yield tu(an(bt,"userGameConfigs",Te)),console.log("🗑️ Game deleted successfully from database, took:",Date.now()-Ze,"ms"),a(s.filter(le=>le.id!==Te)),console.log("🗑️ Updated games state"),n({title:"Game deleted",status:"success",duration:3e3}),console.log("🗑️ Game deletion completed successfully, total time:",Date.now()-Ze,"ms")}catch(le){console.error("🗑️ Error deleting game:",le),n({title:"Error deleting game",status:"error",duration:3e3})}}),it=Te=>{console.log("🔵 confirmDeleteGame called with gameId:",Te);const Ze=s.find(le=>le.id===Te);if(!Ze){console.warn("🟡 confirmDeleteGame: Game not found:",Te);return}console.log("🔵 confirmDeleteGame: Showing modal for game:",{gameId:Te,gameName:Ze.title}),o("delete-confirmation",{title:"Delete Game?",itemName:Ze.title,itemType:"game",warningMessage:void 0,onDelete:()=>Ie(Te)})},Ee=()=>{};u.filter(Te=>{const Ze=S.toLowerCase();return Te.gameName.toLowerCase().includes(Ze)||Te.studentEmail.toLowerCase().includes(Ze)});const Le=T.useCallback(()=>{let Te=s;return ae.selectedFolderId&&(Te=ae.getGamesInFolder(ae.selectedFolderId)),Te.filter(Ze=>{const le=!I||Ze.title.toLowerCase().includes(I.toLowerCase())||(Ze.description||"").toLowerCase().includes(I.toLowerCase())||(Ze.gameType||"").toLowerCase().includes(I.toLowerCase()),Fe=D==="all"||(Ze.gameType||"").toLowerCase().includes(D.toLowerCase());let Je=!0;return _!=="all"&&!ae.selectedFolderId&&(_==="unorganized"?Je=!Ze.folderId:_==="in-folders"&&(Je=!!Ze.folderId)),le&&Fe&&Je}).sort((Ze,le)=>{const Fe=(Ze.gameType||"").localeCompare(le.gameType||"");return Fe!==0?Fe:(Ze.title||"").localeCompare(le.title||"",void 0,{numeric:!0,sensitivity:"base"})})},[s,I,D,_,ae.selectedFolderId,ae]),Ge=T.useCallback(()=>l.filter(Te=>{const Ze=!V||Te.title.toLowerCase().includes(V.toLowerCase())||(Te.description||"").toLowerCase().includes(V.toLowerCase())||(Te.gameType||"").toLowerCase().includes(V.toLowerCase()),le=oe==="all"||(Te.gameType||"").toLowerCase().includes(oe.toLowerCase());return Ze&&le}).sort((Te,Ze)=>{const le=(Te.gameType||"").localeCompare(Ze.gameType||"");return le!==0?le:(Te.title||"").localeCompare(Ze.title||"",void 0,{numeric:!0,sensitivity:"base"})}),[l,V,oe]),Ke=()=>{},je=(Te,Ze,le,Fe)=>te(nt,null,function*(){console.log(`Assigning ${Te.title} to ${Ze.length} student(s)`),console.log(`Deadline: ${le}, Times to complete: ${Fe}`);try{for(const Je of Ze){const qe={gameName:Te.title,gameId:Te.id,gameType:Te.gameType||"Unknown",studentEmail:Je,teacherId:(t==null?void 0:t.uid)||"",teacherEmail:(t==null?void 0:t.email)||"",timesRequired:Fe,deadline:wr.fromDate(le)},Ve=yield TJ(qe);console.log("Successfully created assignment, ID:",Ve)}Ne()}catch(Je){throw console.error("Error creating assignment:",Je),Je}}),et=Te=>{console.log("🎯 handleTemplateClick called with template:",Te),console.log("🎯 Template type:",Te.type),console.log("🎯 Template ID:",Te.id),Te.id&&sessionStorage.setItem("selectedTemplateId",Te.id),Te.type==="whack-a-mole"?Te.id?r(`/configure/whack-a-mole/${Te.id}`):r("/configure/whack-a-mole"):Te.type==="sort-categories-egg"?Te.id?r(`/configure/sort-categories-egg/${Te.id}`):r("/configure/sort-categories-egg"):Te.type==="spinner-wheel"?Te.id?r(`/configure/spinner-wheel/${Te.id}`):r("/configure/spinner-wheel"):Te.type==="anagram"?Te.id?r(`/configure/anagram/${Te.id}`):r("/configure/anagram"):Te.type==="place-value-showdown"?Te.id?r(`/configure/place-value-showdown/${Te.id}`):r("/configure/place-value-showdown"):Te.type==="sentence-sense"?(console.log("🎯 Navigating to sentence-sense configuration"),Te.id?(console.log("🎯 Navigating with template ID:",Te.id),r(`/configure/sentence-sense/${Te.id}`)):(console.log("🎯 Navigating without template ID"),r("/configure/sentence-sense"))):Te.type==="word-volley"?(console.log("🎯 Navigating to word-volley configuration"),Te.id?(console.log("🎯 Navigating with template ID:",Te.id),r(`/configure/word-volley/${Te.id}`)):(console.log("🎯 Navigating without template ID"),r("/configure/word-volley"))):(console.log("🎯 Unknown template type, navigating to default /configure"),r("/configure"))},lt=()=>te(nt,null,function*(){if(t){K(!0);try{const Te=Tn(bt,"users"),Ze=mr(Te,Bn("role","==","student"),Bn("teacherId","==",t.uid)),Fe=(yield Xn(Ze)).docs.map(Je=>{const qe=Je.data();return{id:Je.id,name:qe.name||"",email:qe.email||"",grade:qe.grade||"",age:qe.age||0,notes:qe.notes||"",createdAt:qe.createdAt||wr.now(),passwordSetupSent:qe.passwordSetupSent||!1}});z(Fe)}catch(Te){console.error("Error fetching students:",Te),n({title:"Error fetching students",status:"error",duration:3e3})}finally{K(!1)}}}),ht=Te=>te(nt,null,function*(){if(t)try{console.log("Creating student record for:",Te.email);const Ze={name:Te.name,email:Te.email,grade:Te.grade,age:Te.age,notes:Te.notes,role:"student",teacherId:t.uid,teacherEmail:t.email,createdAt:bo(),updatedAt:bo(),displayName:Te.name,hasTemporaryPassword:!0,linkedToAuth:!1,authUid:"",emailVerified:!1,passwordSetupSent:!1,passwordSetupComplete:!1,lastLogin:null,createdBy:"teacher",source:"teacher_dashboard"},Fe={id:(yield yc(Tn(bt,"users"),Ze)).id,name:Te.name,email:Te.email,grade:Te.grade,age:Te.age,notes:Te.notes,createdAt:wr.now(),passwordSetupSent:!1};z([...q,Fe]),n({title:"Student added successfully",description:`Password setup email will be sent automatically to ${Te.email}`,status:"success",duration:5e3})}catch(Ze){console.error("Error adding student:",Ze),n({title:"Error adding student",status:"error",duration:3e3})}}),ke=Te=>{console.log("🔵 confirmDeleteStudent called with studentId:",Te);const Ze=q.find(le=>le.id===Te);if(!Ze){console.warn("🟡 confirmDeleteStudent: Student not found:",Te);return}console.log("🔵 confirmDeleteStudent: Showing modal for student:",{studentId:Te,studentName:Ze.name}),o("delete-confirmation",{title:"Delete Student?",itemName:Ze.name,itemType:"student",warningMessage:"All associated assignments will remain but will no longer be linked to this student.",onDelete:()=>Xe(Te)})},gt=()=>{console.log("🔵 openAddStudentModal called"),o("student-modal",{student:null})},tt=Te=>{console.log("🔵 openEditStudentModal called with student:",Te),o("student-modal",{student:{id:Te.id,name:Te.name,email:Te.email,grade:Te.grade||"",age:Te.age||0,notes:Te.notes||""}})},yt=Te=>{console.log("🔵 openStudentNotesModal called with student:",Te),o("student-notes",{student:{id:Te.id,name:Te.name,email:Te.email,notes:Te.notes||""}})},at=(Te,Ze)=>te(nt,null,function*(){try{console.log("Saving student notes:",Te,Ze);const le=an(bt,"users",Te);yield Os(le,{notes:Ze,updatedAt:bo()}),z(q.map(Fe=>Fe.id===Te?se(j({},Fe),{notes:Ze}):Fe)),n({title:"Notes saved successfully",status:"success",duration:3e3})}catch(le){console.error("Error saving student notes:",le),n({title:"Error saving notes",status:"error",duration:3e3})}}),mt=Te=>{_e(f),r(`/student?id=${Te.id}&teacherView=true`)},Ot=Te=>{r(`/game/${Te}`)},rn=Te=>{ie.current=Te,o("edit-choice",{gameName:Te.title})},on=Te=>{const Ze=Te.gameType;let le="/configure";return Ze==="whack-a-mole"?le="/configure/whack-a-mole":Ze==="sort-categories-egg"?le="/configure/sort-categories-egg":Ze==="spinner-wheel"?le="/configure/spinner-wheel":Ze==="anagram"?le="/configure/anagram":Ze==="sentence-sense"?le="/configure/sentence-sense":Ze==="place-value-showdown"?le="/configure/place-value-showdown":Ze==="word-volley"&&(le="/configure/word-volley"),{handleUpdate:()=>{r(`${le}/${Te.id}`)},handleCopy:()=>{r(`${le}/${Te.id}?copy=true`)}}},Pe=Te=>{o("assignment-creation",{game:Te})},Ue=(Te,Ze)=>te(nt,null,function*(){try{console.log("Updating student:",Te,Ze);const le=an(bt,"users",Te);yield Os(le,Ze),z(q.map(Fe=>Fe.id===Te?j(j({},Fe),Ze):Fe)),n({title:"Student updated successfully",status:"success",duration:3e3})}catch(le){console.error("Error updating student:",le),n({title:"Error updating student",status:"error",duration:3e3})}}),Xe=Te=>te(nt,null,function*(){const Ze=Date.now();console.log("🗑️ handleDeleteStudent called with studentId:",Te,"at timestamp:",Ze);try{console.log("🗑️ Starting student deletion..."),yield tu(an(bt,"users",Te)),console.log("🗑️ Student deleted successfully from database, took:",Date.now()-Ze,"ms"),z(q.filter(le=>le.id!==Te)),console.log("🗑️ Updated students state"),n({title:"Student deleted",status:"success",duration:3e3}),console.log("🗑️ Student deletion completed successfully, total time:",Date.now()-Ze,"ms")}catch(le){console.error("🗑️ Error deleting student:",le),n({title:"Error deleting student",status:"error",duration:3e3})}}),vt=Te=>{E(Te),$Ze(Te)};return h.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"32px 16px"},children:[h.jsx(VXe,{toastMessage:e}),h.jsx(AJ,{onDeleteFolder:ae.handleDeleteFolder,onSaveFolder:ae.handleSaveFolder,onCancelFolder:ae.handleCancelFolder,onSaveStudent:(Te,Ze)=>{Ze?Ue(Ze,Te):ht(Te)},onCancelStudent:()=>{},onSaveStudentNotes:at,onUpdateGame:()=>{const Te=ie.current;if(Te){const{handleUpdate:Ze}=on(Te);Ze()}},onCopyGame:()=>{const Te=ie.current;if(Te){const{handleCopy:Ze}=on(Te);Ze()}},onCancelEdit:()=>{ie.current=null},onCloseAssignmentDetails:Ee,onAssignGame:je,onCancelAssignment:Ke,showToast:n}),h.jsx("h1",{style:{fontSize:"32px",fontWeight:"bold",marginBottom:"32px"},children:"Create"}),h.jsxs("div",{children:[h.jsxs("div",{style:{display:"flex",borderBottom:"1px solid #E2E8F0",marginBottom:"24px"},children:[h.jsx("div",{onClick:()=>p("create"),style:{padding:"12px 24px",position:"relative",cursor:"pointer",color:f==="create"?"#4299E1":"#718096",fontWeight:f==="create"?"bold":"normal",borderBottom:f==="create"?"2px solid #4299E1":"none",marginBottom:f==="create"?"-1px":"0",transition:"all 0.2s ease",textDecoration:"none",backgroundColor:f==="create"?"#EBF8FF":"transparent",borderRadius:"4px 4px 0 0"},children:"Create Games"}),h.jsx("div",{onClick:()=>p("assignments"),style:{padding:"12px 24px",position:"relative",cursor:"pointer",color:f==="assignments"?"#4299E1":"#718096",fontWeight:f==="assignments"?"bold":"normal",borderBottom:f==="assignments"?"2px solid #4299E1":"none",marginBottom:f==="assignments"?"-1px":"0",transition:"all 0.2s ease",textDecoration:"none",backgroundColor:f==="assignments"?"#EBF8FF":"transparent",borderRadius:"4px 4px 0 0"},children:"Track Assignments"}),h.jsx("div",{onClick:()=>p("students"),style:{padding:"12px 24px",position:"relative",cursor:"pointer",color:f==="students"?"#4299E1":"#718096",fontWeight:f==="students"?"bold":"normal",borderBottom:f==="students"?"2px solid #4299E1":"none",marginBottom:f==="students"?"-1px":"0",transition:"all 0.2s ease",textDecoration:"none",backgroundColor:f==="students"?"#EBF8FF":"transparent",borderRadius:"4px 4px 0 0"},children:"My Students"})]}),f==="assignments"&&h.jsx(VZe,{currentUser:t,showToast:n,students:q,onAssignmentHandlersReady:Te=>{window.assignmentHandlers=Te}}),f==="create"&&h.jsxs("div",{children:[h.jsxs("div",{style:{marginBottom:"48px"},children:[h.jsx("h2",{style:{fontSize:"24px",fontWeight:"bold",marginBottom:"20px",color:"#2D3748",borderBottom:"2px solid #805AD5",paddingBottom:"8px"},children:"Start Creating"}),B?h.jsx("div",{style:{textAlign:"center",padding:"40px",backgroundColor:"#F7FAFC",borderRadius:"12px",border:"1px solid #E2E8F0"},children:h.jsx("div",{style:{fontSize:"16px",color:"#718096"},children:"Loading templates..."})}):L.length>0?h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"20px"},children:L.map(Te=>h.jsxs("div",{onClick:()=>{console.log("🎯 Template card clicked:",Te),et(Te)},style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",border:"2px solid #E2E8F0",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)",transition:"all 0.2s ease",cursor:"pointer",textAlign:"center"},onMouseEnter:Ze=>{Ze.currentTarget.style.borderColor="#805AD5",Ze.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)",Ze.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:Ze=>{Ze.currentTarget.style.borderColor="#E2E8F0",Ze.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.05)",Ze.currentTarget.style.transform="translateY(0)"},children:[h.jsx("div",{style:{width:"80px",height:"80px",backgroundColor:Te.type==="whack-a-mole"?"#C6F6D5":Te.type==="spinner-wheel"?"#FED7D7":Te.type==="anagram"?"#BFDBFE":Te.type==="sentence-sense"?"#E8F5E8":Te.type==="place-value-showdown"?"#FFE6E6":Te.type==="word-volley"?"#FFF2E6":"#E9D8FD",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",fontSize:"32px"},children:Te.thumbnail?h.jsx("img",{src:Te.thumbnail,alt:Te.title,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"12px"}}):Te.type==="whack-a-mole"?"🔨":Te.type==="spinner-wheel"?"🎡":Te.type==="anagram"?"🧩":Te.type==="sentence-sense"?"📝":Te.type==="place-value-showdown"?"🎯":Te.type==="word-volley"?"🏓":"🥚"}),h.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px",color:"#2D3748"},children:Te.title}),h.jsx("div",{style:{padding:"8px 16px",backgroundColor:"#805AD5",color:"white",borderRadius:"6px",fontSize:"14px",fontWeight:"500",display:"inline-flex",alignItems:"center",gap:"6px"},children:"✨ Create Game"})]},Te.id))}):h.jsxs("div",{style:{textAlign:"center",padding:"40px",backgroundColor:"#F7FAFC",borderRadius:"12px",border:"2px dashed #CBD5E0"},children:[h.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"📝"}),h.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px",color:"#2D3748"},children:"No templates available"}),h.jsx("p",{style:{color:"#718096"},children:"Templates will appear here when they become available"})]})]}),h.jsxs("div",{style:{marginBottom:"48px"},children:[h.jsx("h2",{style:{fontSize:"24px",fontWeight:"bold",marginBottom:"20px",color:"#2D3748",borderBottom:"2px solid #4299E1",paddingBottom:"8px"},children:"My Created Games"}),R?h.jsx("div",{style:{textAlign:"center",padding:"40px",backgroundColor:"#F7FAFC",borderRadius:"12px",border:"1px solid #E2E8F0"},children:h.jsx("div",{style:{fontSize:"16px",color:"#718096"},children:"Loading games..."})}):s.length>0?h.jsxs("div",{children:[h.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"#FAFAFA",borderRadius:"8px",border:"1px solid #E2E8F0"},children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[h.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#2D3748"},children:"🔍 Search & Filter Games"}),(I||D!=="all"||_!=="all")&&h.jsx("button",{onClick:()=>{M(""),E("all"),A("all")},style:{padding:"4px 8px",backgroundColor:"#F7FAFC",color:"#4A5568",border:"1px solid #CBD5E0",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Clear Filters"})]}),h.jsx("div",{style:{marginBottom:"12px"},children:h.jsx("input",{type:"text",placeholder:"Search by title, description, or game type...",value:I,onChange:Te=>M(Te.target.value),style:{padding:"10px 12px",border:"1px solid #CBD5E0",borderRadius:"6px",width:"100%",fontSize:"14px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)",outline:"none",transition:"border-color 0.2s"},onFocus:Te=>{Te.target.style.borderColor="#4299E1"},onBlur:Te=>{Te.target.style.borderColor="#CBD5E0"}})}),h.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[h.jsx("label",{style:{fontSize:"14px",color:"#4A5568",fontWeight:"500"},children:"Type:"}),h.jsxs("select",{value:D,onChange:Te=>vt(Te.target.value),style:{padding:"6px 8px",border:"1px solid #CBD5E0",borderRadius:"4px",fontSize:"14px",backgroundColor:"white",cursor:"pointer"},children:[h.jsx("option",{value:"all",children:"✅ All Types"}),h.jsx("option",{value:"anagram",children:"🧩 Anagram"}),h.jsx("option",{value:"place-value-showdown",children:"🎯 Place Value Showdown"}),h.jsx("option",{value:"word-volley",children:"🏓 Pong"}),h.jsx("option",{value:"sentence-sense",children:"📝 Sentence Sense"}),h.jsx("option",{value:"sort-categories-egg",children:"🥚 Sort Categories"}),h.jsx("option",{value:"spinner-wheel",children:"🎡 Spinner Wheel"}),h.jsx("option",{value:"whack-a-mole",children:"🔨 Whack-a-Mole"})]})]}),!ae.selectedFolderId&&ae.folders.length>0&&h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[h.jsx("label",{style:{fontSize:"14px",color:"#4A5568",fontWeight:"500"},children:"Organization:"}),h.jsxs("select",{value:_,onChange:Te=>A(Te.target.value),style:{padding:"6px 8px",border:"1px solid #CBD5E0",borderRadius:"4px",fontSize:"14px",backgroundColor:"white",cursor:"pointer"},children:[h.jsx("option",{value:"all",children:"All Games"}),h.jsx("option",{value:"in-folders",children:"📁 In Folders"}),h.jsx("option",{value:"unorganized",children:"📋 Unorganized"})]})]}),h.jsx("div",{style:{marginLeft:"auto",fontSize:"14px",color:"#718096",fontWeight:"500"},children:(()=>{const Te=Le().length,Ze=ae.selectedFolderId?ae.getGamesInFolder(ae.selectedFolderId).length:s.length;return I||D!=="all"||_!=="all"?`${Te} of ${Ze} games`:`${Ze} games`})()})]})]}),h.jsxs(ene,{sensors:ge,collisionDetection:gQe,onDragStart:ve,onDragOver:ue,onDragEnd:Me,children:[h.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"#F8FAFC",borderRadius:"8px",border:"1px solid #E2E8F0"},children:[h.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[h.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#2D3748"},children:"📁 Organize Your Games"}),h.jsxs("div",{style:{display:"flex",gap:"4px"},children:[h.jsx("button",{onClick:ae.undo,disabled:!ae.canUndo,style:{padding:"6px 12px",backgroundColor:ae.canUndo?"#2B6CB0":"#EDF2F7",color:ae.canUndo?"white":"#A0AEC0",border:`2px solid ${ae.canUndo?"#2B6CB0":"#CBD5E0"}`,borderRadius:"6px",cursor:ae.canUndo?"pointer":"not-allowed",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s ease",boxShadow:ae.canUndo?"0 2px 4px rgba(43, 108, 176, 0.2)":"none"},title:ae.canUndo?`Undo: ${((Pt=ae.undoStack[ae.undoStack.length-1])==null?void 0:Pt.description)||"Last action"}`:"Nothing to undo",onMouseEnter:Te=>{if(ae.canUndo){const Ze=Te.target;Ze.style.backgroundColor="#2C5282",Ze.style.transform="translateY(-1px)"}},onMouseLeave:Te=>{if(ae.canUndo){const Ze=Te.target;Ze.style.backgroundColor="#2B6CB0",Ze.style.transform="translateY(0)"}},children:"↶ Undo"}),h.jsx("button",{onClick:ae.redo,disabled:!ae.canRedo,style:{padding:"6px 12px",backgroundColor:ae.canRedo?"#38A169":"#EDF2F7",color:ae.canRedo?"white":"#A0AEC0",border:`2px solid ${ae.canRedo?"#38A169":"#CBD5E0"}`,borderRadius:"6px",cursor:ae.canRedo?"pointer":"not-allowed",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s ease",boxShadow:ae.canRedo?"0 2px 4px rgba(56, 161, 105, 0.2)":"none"},title:ae.canRedo?`Redo: ${((jt=ae.redoStack[ae.redoStack.length-1])==null?void 0:jt.description)||"Last undone action"}`:"Nothing to redo",onMouseEnter:Te=>{if(ae.canRedo){const Ze=Te.target;Ze.style.backgroundColor="#2F855A",Ze.style.transform="translateY(-1px)"}},onMouseLeave:Te=>{if(ae.canRedo){const Ze=Te.target;Ze.style.backgroundColor="#38A169",Ze.style.transform="translateY(0)"}},children:"↷ Redo"})]})]})}),ae.folderTree.length>0?h.jsxs("div",{style:{marginBottom:"12px"},children:[h.jsx("div",{style:{marginBottom:"8px"},children:h.jsxs("button",{onClick:()=>{ae.setSelectedFolderId(null),A("all")},style:{padding:"6px 12px",backgroundColor:ae.selectedFolderId===null?"#E2E8F0":"white",color:ae.selectedFolderId===null?"#2D3748":"#4A5568",border:"1px solid #E2E8F0",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:ae.selectedFolderId===null?"600":"400"},children:["📋 All Games (",s.length,")"]})}),h.jsx(PZe,{folders:ae.folderTree,selectedFolderId:ae.selectedFolderId,onFolderClick:Te=>{ae.setSelectedFolderId(Te),A("all")},onCreateSubfolder:ae.openCreateFolderModal,onEditFolder:ae.openEditFolderModal,onDeleteFolder:Te=>ae.deleteExistingFolder(Te),getGamesInFolder:ae.getGamesInFolder,canCreateSubfolder:ae.canCreateSubfolder,maxDepth:3,showGameCounts:!0,collapsible:!0}),h.jsx("div",{style:{marginTop:"12px"},children:h.jsx(TZe,{unorganizedGamesCount:ae.getUnorganizedGames().length})})]}):h.jsx("div",{style:{marginBottom:"12px"},children:h.jsxs("div",{style:{marginBottom:"12px",padding:"16px",backgroundColor:"#E6F3FF",borderRadius:"8px",border:"1px solid #4299E1",textAlign:"center"},children:[h.jsx("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#2B6CB0",marginBottom:"8px"},children:"🚀 Get Started with Game Folders"}),h.jsx("p",{style:{color:"#4A5568",marginBottom:"12px"},children:"Organize your games into folders to keep track of different subjects, game types, or teaching units."}),h.jsx("button",{onClick:()=>ae.openCreateFolderModal(),style:{padding:"8px 16px",backgroundColor:"#4299E1",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"📁 Create Your First Game Folder"})]})})]}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"20px"},children:(()=>{const Te=Le();return Te.length===0&&(I||D!=="all"||_!=="all")?h.jsxs("div",{style:{gridColumn:"1 / -1",padding:"40px 20px",textAlign:"center",backgroundColor:"#F8F9FA",borderRadius:"12px",border:"2px dashed #CBD5E0"},children:[h.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"🔍"}),h.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px",color:"#2D3748"},children:"No games found"}),h.jsx("p",{style:{color:"#718096",marginBottom:"20px"},children:"Try adjusting your search terms or filters"}),h.jsx("button",{onClick:()=>{M(""),E("all"),A("all")},style:{padding:"8px 16px",backgroundColor:"#4299E1",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},children:"Clear All Filters"})]}):Te.map(Ze=>h.jsx(MZe,{game:Ze,onPlay:Ot,onEdit:rn,onAssign:Pe,onDelete:it},Ze.id))})()}),h.jsx(tne,{adjustScale:!1,dropAnimation:null,children:X&&(X.type==="game"?h.jsx("div",{style:{width:"64px",height:"64px",backgroundColor:(((Nt=X.data)==null?void 0:Nt.gameType)||"").includes("whack")?"#C6F6D5":(((Yt=X.data)==null?void 0:Yt.gameType)||"").includes("spinner")?"#FED7D7":(((en=X.data)==null?void 0:en.gameType)||"").includes("anagram")?"#BFDBFE":(((fn=X.data)==null?void 0:fn.gameType)||"").includes("sentence")?"#E0F2FE":(((hn=X.data)==null?void 0:hn.gameType)||"").includes("place")?"#FFEBE6":"#E9D8FD",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:"3px solid #4299E1",boxShadow:"0 8px 24px rgba(0,0,0,0.3)",cursor:"grabbing",pointerEvents:"none",opacity:.95,transform:"rotate(3deg) scale(1.1)",zIndex:1e3},children:(mn=X.data)!=null&&mn.thumbnailUrl?h.jsx("img",{src:X.data.thumbnailUrl,alt:X.data.title,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"5px",pointerEvents:"none"}}):h.jsx("div",{style:{fontSize:"24px",color:"#718096",pointerEvents:"none"},children:(((jn=X.data)==null?void 0:jn.gameType)||"").includes("whack")?"🔨":(((er=X.data)==null?void 0:er.gameType)||"").includes("spinner")?"🎡":(((Wr=X.data)==null?void 0:Wr.gameType)||"").includes("anagram")?"🧩":(((lr=X.data)==null?void 0:lr.gameType)||"").includes("sentence")?"📝":(((Yn=X.data)==null?void 0:Yn.gameType)||"").includes("place")?"🎯":"🥚"})}):h.jsxs("div",{style:{padding:"8px 12px",backgroundColor:"white",border:"2px solid #4299E1",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px",transform:"rotate(2deg)",zIndex:1e3,cursor:"grabbing",pointerEvents:"none",opacity:.9},children:[h.jsx("span",{children:"📁"}),h.jsx("span",{children:((yn=X.data)==null?void 0:yn.name)||"Folder"})]}))})]})]}):h.jsxs("div",{style:{textAlign:"center",padding:"40px",backgroundColor:"#F7FAFC",borderRadius:"12px",border:"2px dashed #CBD5E0"},children:[h.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"🎮"}),h.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px",color:"#2D3748"},children:"No games created yet"}),h.jsx("p",{style:{color:"#718096",marginBottom:"20px"},children:"Start by creating your first game using the templates below"})]})]}),h.jsxs("div",{style:{marginBottom:"48px"},children:[h.jsx("h2",{style:{fontSize:"24px",fontWeight:"bold",marginBottom:"20px",color:"#2D3748",borderBottom:"2px solid #38A169",paddingBottom:"8px"},children:"Public Games"}),h.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"#FAFAFA",borderRadius:"8px",border:"1px solid #E2E8F0"},children:[h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto auto",gap:"12px",alignItems:"center"},children:[h.jsx("input",{type:"text",placeholder:"Search public games...",value:V,onChange:Te=>J(Te.target.value),style:{padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",backgroundColor:"white"}}),h.jsxs("select",{value:oe,onChange:Te=>ne(Te.target.value),style:{padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",backgroundColor:"white",minWidth:"150px"},children:[h.jsx("option",{value:"all",children:"✅ All Types"}),h.jsx("option",{value:"whack-a-mole",children:"🔨 Whack-a-Mole"}),h.jsx("option",{value:"spinner-wheel",children:"🎡 Spinner Wheel"}),h.jsx("option",{value:"sort-categories-egg",children:"🥚 Sort Categories"}),h.jsx("option",{value:"anagram",children:"🧩 Anagram"}),h.jsx("option",{value:"sentence-sense",children:"📝 Sentence Sense"}),h.jsx("option",{value:"place-value-showdown",children:"🎯 Place Value Showdown"}),h.jsx("option",{value:"word-volley",children:"🏓 Pong"})]}),h.jsx("button",{onClick:()=>{J(""),ne("all")},style:{padding:"8px 16px",backgroundColor:"#F3F4F6",border:"1px solid #D1D5DB",borderRadius:"6px",cursor:"pointer",fontSize:"14px",color:"#374151"},children:"Clear"})]}),h.jsxs("div",{style:{marginTop:"12px",fontSize:"14px",color:"#6B7280"},children:["Showing ",Ge().length," of ",l.length," public games"]})]}),R?h.jsx("div",{style:{textAlign:"center",padding:"40px",backgroundColor:"#F7FAFC",borderRadius:"12px",border:"1px solid #E2E8F0"},children:h.jsx("div",{style:{fontSize:"16px",color:"#718096"},children:"Loading public games..."})}):l.length>0?Ge().length>0?h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"20px"},children:Ge().map(Te=>h.jsx("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",border:"1px solid #E2E8F0",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)",transition:"all 0.2s ease",cursor:"pointer"},onMouseEnter:Ze=>{Ze.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)",Ze.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:Ze=>{Ze.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.05)",Ze.currentTarget.style.transform="translateY(0)"},children:h.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"16px"},children:[h.jsx("div",{style:{width:"64px",height:"64px",backgroundColor:(Te.gameType||"").includes("whack")?"#C6F6D5":(Te.gameType||"").includes("spinner")?"#FED7D7":(Te.gameType||"").includes("anagram")?"#BFDBFE":(Te.gameType||"").includes("sentence")?"#E0F2FE":(Te.gameType||"").includes("place")?"#FFEBE6":(Te.gameType||"").includes("word-volley")?"#FFF2E6":"#E9D8FD",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",flexShrink:0},children:Te.thumbnailUrl?h.jsx("img",{src:Te.thumbnailUrl,alt:Te.title,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px"}}):h.jsx("div",{style:{fontSize:"24px",color:"#718096"},children:(Te.gameType||"").includes("whack")?"🔨":(Te.gameType||"").includes("spinner")?"🎡":(Te.gameType||"").includes("anagram")?"🧩":(Te.gameType||"").includes("sentence")?"📝":(Te.gameType||"").includes("place")?"🎯":(Te.gameType||"").includes("word-volley")?"🏓":"🥚"})}),h.jsxs("div",{style:{flex:1,minWidth:0},children:[h.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"4px",color:"#2D3748",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Te.title}),h.jsx("p",{style:{color:"#718096",fontSize:"14px",marginBottom:"16px",textTransform:"capitalize"},children:(Te.gameType||"Unknown").replace("-"," ")}),h.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"nowrap"},children:[h.jsx("button",{onClick:Ze=>{Ze.stopPropagation(),Ot(Te.id)},style:{padding:"4px 8px",backgroundColor:"#E3F2FD",color:"#1976D2",border:"1px solid #BBDEFB",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:"500",display:"flex",alignItems:"center",gap:"3px",transition:"all 0.2s",minWidth:"auto",whiteSpace:"nowrap"},onMouseEnter:Ze=>{Ze.currentTarget.style.backgroundColor="#BBDEFB",Ze.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:Ze=>{Ze.currentTarget.style.backgroundColor="#E3F2FD",Ze.currentTarget.style.transform="translateY(0)"},children:"▶️ Play"}),h.jsx("button",{onClick:Ze=>{Ze.stopPropagation();const le=Te.gameType;let Fe="/configure";le==="whack-a-mole"?Fe="/configure/whack-a-mole":le==="sort-categories-egg"?Fe="/configure/sort-categories-egg":le==="spinner-wheel"?Fe="/configure/spinner-wheel":le==="anagram"?Fe="/configure/anagram":le==="sentence-sense"?Fe="/configure/sentence-sense":le==="place-value-showdown"?Fe="/configure/place-value-showdown":le==="word-volley"&&(Fe="/configure/word-volley"),r(`${Fe}/${Te.id}?copy=true`)},style:{padding:"4px 8px",backgroundColor:"#F3E5F5",color:"#7B1FA2",border:"1px solid #E1BEE7",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:"500",display:"flex",alignItems:"center",gap:"3px",transition:"all 0.2s",minWidth:"auto",whiteSpace:"nowrap"},onMouseEnter:Ze=>{Ze.currentTarget.style.backgroundColor="#E1BEE7",Ze.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:Ze=>{Ze.currentTarget.style.backgroundColor="#F3E5F5",Ze.currentTarget.style.transform="translateY(0)"},children:"📄 Copy"}),h.jsx("button",{onClick:Ze=>{Ze.stopPropagation(),Pe(Te)},style:{padding:"4px 8px",backgroundColor:"#E8F5E8",color:"#2E7D32",border:"1px solid #C8E6C9",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:"500",display:"flex",alignItems:"center",gap:"3px",transition:"all 0.2s",minWidth:"auto",whiteSpace:"nowrap"},onMouseEnter:Ze=>{Ze.currentTarget.style.backgroundColor="#C8E6C9",Ze.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:Ze=>{Ze.currentTarget.style.backgroundColor="#E8F5E8",Ze.currentTarget.style.transform="translateY(0)"},children:"📋 Assign"})]})]})]})},Te.id))}):h.jsxs("div",{style:{textAlign:"center",padding:"40px",backgroundColor:"#F7FAFC",borderRadius:"12px",border:"2px dashed #CBD5E0"},children:[h.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"🔍"}),h.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px",color:"#2D3748"},children:"No games match your search"}),h.jsx("p",{style:{color:"#718096",marginBottom:"16px"},children:"Try adjusting your search terms or filters"}),h.jsx("button",{onClick:()=>{J(""),ne("all")},style:{padding:"8px 16px",backgroundColor:"#4299E1",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},children:"Clear All Filters"})]}):h.jsxs("div",{style:{textAlign:"center",padding:"40px",backgroundColor:"#F7FAFC",borderRadius:"12px",border:"2px dashed #CBD5E0"},children:[h.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"🌍"}),h.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px",color:"#2D3748"},children:"No public games available"}),h.jsx("p",{style:{color:"#718096"},children:"Check back later for games shared by other educators"})]})]})]}),f==="students"&&h.jsxs("div",{children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[h.jsx("h2",{style:{fontSize:"20px",fontWeight:"bold"},children:"Student Management"}),h.jsx("button",{onClick:gt,style:{padding:"8px 16px",backgroundColor:"#38A169",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:h.jsx("span",{children:"+ Add Student"})})]}),h.jsx("div",{style:{marginBottom:"16px"},children:h.jsx("input",{type:"text",placeholder:"Search by name or email...",value:Z,onChange:Te=>ee(Te.target.value),style:{padding:"12px 16px",border:"1px solid #E2E8F0",borderRadius:"4px",width:"100%",fontSize:"16px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)"}})}),G?h.jsx("div",{style:{textAlign:"center",padding:"40px 0"},children:"Loading students..."}):q.length>0?h.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[h.jsx("thead",{children:h.jsxs("tr",{style:{backgroundColor:"#F7FAFC",borderBottom:"2px solid #E2E8F0"},children:[h.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:"bold"},children:"Name"}),h.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:"bold"},children:"Email"}),h.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:"bold"},children:"Grade"}),h.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:"bold"},children:"Password Status"}),h.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:"bold"},children:"Actions"})]})}),h.jsx("tbody",{children:q.filter(Te=>{if(!Z)return!0;const Ze=Z.toLowerCase();return Te.name.toLowerCase().includes(Ze)||Te.email.toLowerCase().includes(Ze)||Te.grade&&Te.grade.toLowerCase().includes(Ze)}).map(Te=>h.jsxs("tr",{style:{borderBottom:"1px solid #E2E8F0"},children:[h.jsx("td",{style:{padding:"12px"},children:Te.name}),h.jsx("td",{style:{padding:"12px"},children:Te.email}),h.jsx("td",{style:{padding:"12px"},children:Te.grade||"-"}),h.jsx("td",{style:{padding:"12px"},children:h.jsx("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:Te.passwordSetupSent?h.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"medium",backgroundColor:"#FEF3C7",color:"#92400E"},children:"🔐 Password Setup Sent"}):h.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"medium",backgroundColor:"#E5E7EB",color:"#374151"},children:"📧 Email Only"})})}),h.jsx("td",{style:{padding:"12px"},children:h.jsxs("div",{style:{display:"flex",gap:"8px"},children:[h.jsx("button",{onClick:()=>mt(Te),style:{padding:"6px 12px",backgroundColor:"#38B2AC",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"View"}),h.jsx("button",{onClick:()=>yt(Te),style:{padding:"6px 12px",backgroundColor:"#805AD5",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"Notes"}),h.jsx("button",{onClick:()=>tt(Te),style:{padding:"6px 12px",backgroundColor:"#4299E1",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"Edit"}),h.jsx("button",{onClick:()=>ke(Te.id),style:{padding:"6px 12px",backgroundColor:"#F56565",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"Delete"})]})})]},Te.id))})]}):h.jsxs("div",{style:{textAlign:"center",padding:"40px 0",color:"#718096",backgroundColor:"white",borderRadius:"8px",border:"1px dashed #E2E8F0",marginTop:"24px"},children:[h.jsx("p",{style:{marginBottom:"16px"},children:"You haven't added any students yet."}),h.jsx("button",{onClick:gt,style:{padding:"8px 16px",backgroundColor:"#4299E1",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Add Your First Student"})]})]})]})]})},r2=()=>{const{currentUser:t,isStudent:e}=Dr(),[n,r]=T.useState({isInstallable:!1,isInstalled:!1,showInstallPrompt:!1,installPrompt:null}),[i,o]=T.useState(!1);T.useEffect(()=>{const x=new URLSearchParams(window.location.search),w=x.get("forceBrowser")==="true",S=x.get("pwa"),P=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;if(console.log("🔧 PWA Hook - Immediate URL parameter check:",{forceBrowser:w,pwaParam:S,isStandalone:P,currentUrl:window.location.href}),S==="auto"){console.log("🎯 PWA Hook - pwa=auto detected, smart routing enabled"),x.delete("pwa");const I=`${window.location.pathname}${x.toString()?"?"+x.toString():""}`;if(window.history.replaceState({},"",I),P){console.log("✅ PWA Hook - Already in PWA mode, continuing");return}console.log("🌐 PWA Hook - In browser mode, will show brief install prompt if available"),setTimeout(()=>{n.isInstallable&&!n.isInstalled&&(console.log("📱 PWA Hook - Showing brief install prompt for pwa=auto"),o(!0),setTimeout(()=>{o(!1),console.log("📱 PWA Hook - Brief install prompt auto-dismissed")},3e3))},1e3);return}if(P&&w){console.log("🎯 PWA Hook - forceBrowser detected in standalone mode, redirecting to browser"),console.log("🎯 PWA Hook - Browser URL will be:",window.location.href);const I=new URL(window.location.href);I.searchParams.delete("forceBrowser");const M=I.toString();console.log("🎯 PWA Hook - Clean browser URL:",M);const D=document.createElement("a");D.href=M,D.target="_blank",D.rel="noopener noreferrer",document.body.appendChild(D);const E=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0,ctrlKey:!1,metaKey:!1,shiftKey:!1,button:0});D.dispatchEvent(E),setTimeout(()=>{document.body.removeChild(D)},100),setTimeout(()=>{try{window.close()}catch(_){console.log("🎯 PWA Hook - Could not close PWA window, showing user message"),alert("✅ Opened in your browser. You can close this PWA window.")}},500),console.log("🎯 PWA Hook - forceBrowser redirect handled");return}},[]);const s=()=>te(nt,null,function*(){try{console.log("🔍 PWA Hook - Starting enhanced installation check...");const x=window.matchMedia("(display-mode: standalone)").matches,w=window.navigator.standalone===!0,S=document.referrer.includes("android-app://");if(console.log("🔍 PWA Hook - Standalone check:",{isStandalone:x,isIOSPWA:w,isAndroidPWA:S}),x||w||S)return console.log("✅ PWA Hook - Detected via standalone mode"),!0;const P=window.location.hostname.includes("verse-dev-central.web.app")||window.location.hostname.includes("verse-central.web.app")||window.location.protocol==="https:"&&window.location.hostname!=="localhost";if(console.log("🔍 PWA Hook - Environment check:",{hostname:window.location.hostname,isProduction:P,hostnameCheck:window.location.hostname.includes("verse-dev-central.web.app"),protocolCheck:window.location.protocol==="https:",notLocalhost:window.location.hostname!=="localhost"}),P){console.log("🔍 PWA Hook - Running production environment checks...");const E={hasServiceWorker:"serviceWorker"in navigator,chromeMinimal:window.outerHeight-window.innerHeight<300,httpsSecure:window.location.protocol==="https:",noReferrerOrLauncher:document.referrer===""||document.referrer.includes("launch.html"),expectedPWAUrl:window.location.pathname.startsWith("/student")||window.location.pathname.startsWith("/play"),macOSChrome:navigator.platform.includes("Mac")&&navigator.userAgent.includes("Chrome")};console.log("🔍 PWA Hook - Production PWA indicators:",E),console.log("🔍 PWA Hook - Production environment details:",{hostname:window.location.hostname,protocol:window.location.protocol,pathname:window.location.pathname,referrer:document.referrer,platform:navigator.platform,userAgent:navigator.userAgent,outerHeight:window.outerHeight,innerHeight:window.innerHeight,chromeHeight:window.outerHeight-window.innerHeight});const _=Object.values(E).filter(Boolean).length;if(console.log(`🔍 PWA Hook - Production PWA score: ${_}/6 (need 3+ for detection)`),_>=3)return console.log(`✅ PWA Hook - Production PWA detected with score ${_}/6`),!0;console.log(`❌ PWA Hook - Production PWA NOT detected, score too low: ${_}/6`)}const I=navigator.platform.includes("Mac"),M=navigator.userAgent.includes("Chrome")&&!navigator.userAgent.includes("Edge"),D=window.location.protocol==="https:";if(I&&M&&D){const E={hasMenuBar:window.menubar&&window.menubar.visible,hasToolBar:window.toolbar&&window.toolbar.visible,chromeHeight:window.outerHeight-window.innerHeight},_={minimalChrome:E.chromeHeight<200,noMenuBar:!E.hasMenuBar,emptyReferrer:document.referrer==="",hasServiceWorker:"serviceWorker"in navigator,productionUrl:P};console.log("🔍 PWA Hook - macOS PWA indicators:",_);const A=Object.values(_).filter(Boolean).length;if(A>=3)return console.log(`✅ PWA Hook - macOS PWA detected with score ${A}/5`),!0}if("getInstalledRelatedApps"in navigator)try{const E=yield navigator.getInstalledRelatedApps();if(console.log("🔍 PWA Hook - Related apps check:",E.length),E.length>0)return console.log("✅ PWA Hook - Detected via getInstalledRelatedApps"),!0}catch(E){console.log("🔍 PWA Hook - getInstalledRelatedApps error:",E)}if("serviceWorker"in navigator)try{console.log("🔍 PWA Hook - Checking service worker + minimal chrome...");const E=yield navigator.serviceWorker.getRegistrations(),_=window.outerHeight-window.innerHeight;if(console.log("🔍 PWA Hook - Service worker details:",{registrationsCount:E.length,chromeHeight:_,threshold:150,meetsThreshold:_<150}),E.length>0&&_<150)return console.log("✅ PWA Hook - Detected via service worker + minimal chrome"),!0;console.log("❌ PWA Hook - Service worker + minimal chrome check failed")}catch(E){console.log("🔍 PWA Hook - Service worker check error:",E)}else console.log("❌ PWA Hook - Service worker not supported");return console.log("❌ PWA Hook - No PWA installation detected"),!1}catch(x){return console.error("💥 PWA Hook - Error in checkIfInstalled:",x),!1}});T.useEffect(()=>{const x=new URLSearchParams(window.location.search),w=x.get("emailAccess")==="true",S=x.get("from")==="email",P=x.get("studentEmail"),I=x.get("source")==="email",M=window.location.pathname==="/student",D=sessionStorage.getItem("direct_token_access")==="true",E=w||S&&P||I||D&&M;console.log("🔍 PWA Hook - useEffect triggered:",{currentUser:!!t,isStudent:e,userEmail:t==null?void 0:t.email,isEmailLinkAccess:E,emailAccess:w,fromEmail:S,studentEmailParam:!!P,sourceParam:I,isStudentRoute:M,sessionFlag:D});const _=t&&e||E&&M;if(!_){console.log("🚫 PWA Hook - Not enabling PWA:",{hasCurrentUser:!!t,isStudent:e,isEmailLinkAccess:E,isStudentRoute:M,shouldEnablePWA:_});return}console.log("✅ PWA Hook - Enabling PWA:",{reason:t&&e?"authenticated_student":"email_link_access"});const A=U=>{if(console.log("🔄 PWA Hook - Starting PWA launch redirect check..."),window.location.pathname.includes("launch")||window.location.pathname.includes("debug-launcher")||window.location.pathname.includes("test-launcher"))return console.log("🔄 PWA Hook - Skipping redirect check - on launcher page"),!1;const B=window.matchMedia("(display-mode: standalone)").matches,H=window.navigator.standalone===!0,q=!B&&!H,z=document.referrer,G=window.location.hostname,K=z==="",Z=z!==""&&!z.includes(G),ee=z.includes("launch.html"),V=K||Z||ee;if(console.log("🔄 PWA Hook - Launch redirect detailed check:",{isInstalled:U,inBrowserMode:q,fromExternalLink:V,currentURL:window.location.href,referrer:z,hostname:G,standaloneMode:B,iOSStandalone:H,hasNoReferrer:K,isExternalReferrer:Z,isFromLauncher:ee,displayMode:B?"standalone":"browser"}),q&&V){console.log("🔄 PWA Hook - Checking PWA installation status for guidance...");const ne="pwa_launch_"+(new URLSearchParams(window.location.search).get("token")||"default"),pe=sessionStorage.getItem(ne),ye=Date.now();if(pe){const Ce=ye-parseInt(pe);if(Ce<3e3)return console.log(`🚫 PWA Hook - Duplicate launch prevented! Last launch was ${Ce}ms ago`),!1}return window.location.search&&(console.log("💾 PWA Hook - Preserving deep link params:",window.location.search),localStorage.setItem("deepLinkParams",window.location.search)),!0}return!1};te(nt,null,function*(){const U=yield s();if(console.log("📱 PWA Hook - Installation check:",{isInstalled:U}),r(K=>se(j({},K),{isInstalled:U})),U&&window.matchMedia("(display-mode: standalone)").matches){const K=localStorage.getItem("deepLinkParams");if(K&&!window.location.search){console.log("📱 PWA Hook - Restoring deep link params:",K);const ee=new URLSearchParams(K).get("token");if(ee){console.log("📱 PWA Hook - Token detected in deep link, navigating to game:",ee),window.location.href=`/play?token=${ee}`,localStorage.removeItem("deepLinkParams");return}else window.history.replaceState({},"",window.location.pathname+K),localStorage.removeItem("deepLinkParams")}}console.log("🔄 PWA Hook - About to check PWA launch redirect...");const $=A(U);console.log($?"🚀 PWA Hook - PWA launch redirect initiated":"🚫 PWA Hook - PWA launch redirect not triggered");const B=window.matchMedia("(display-mode: standalone)").matches,H=new URLSearchParams(window.location.search),q=H.get("token"),z=H.get("target");console.log("📱 PWA Enhanced Deep Link - Checking standalone mode conditions:",{isStandalone:B,hasToken:!!q,hasTarget:!!z,currentPath:window.location.pathname,searchParams:window.location.search});const G=window.location.pathname.includes("launch")||window.location.pathname.includes("debug-launcher")||window.location.pathname.includes("test-launcher");if(B&&(q||z)&&!G)if(console.log("📱 PWA Enhanced Deep Link - ✅ Already in standalone mode, checking for navigation needed"),console.log("📱 PWA Enhanced Deep Link - Current path:",window.location.pathname),console.log("📱 PWA Enhanced Deep Link - Token:",q),console.log("📱 PWA Enhanced Deep Link - Target:",z),q&&!window.location.pathname.startsWith("/play")){const K=`/play${window.location.search}`;console.log("📱 PWA Enhanced Deep Link - 🚀 Navigating to play route:",K),setTimeout(()=>{window.location.href=K},100)}else if(z&&z.startsWith("/")){const K=decodeURIComponent(z);if(window.location.pathname!==K){const Z=`${K}${window.location.search}`;console.log("📱 PWA Enhanced Deep Link - 🚀 Navigating to target route:",Z),setTimeout(()=>{window.location.href=Z},100)}else console.log("📱 PWA Enhanced Deep Link - ✅ Already on target path:",K)}else console.log("📱 PWA Enhanced Deep Link - ✅ Already on correct path for token");else console.log("📱 PWA Enhanced Deep Link - ❌ Conditions not met:",{isStandalone:B,hasToken:!!q,hasTarget:!!z});if(U)return F()});const F=()=>{const U=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;if("launchQueue"in window)try{window.launchQueue.setConsumer(B=>{if(console.log("📱 PWA LaunchQueue - Received launch params:",B),console.log("📱 PWA LaunchQueue - LaunchParams structure:",JSON.stringify(B,null,2)),console.log("📱 PWA LaunchQueue - Has targetURL:",!!B.targetURL),console.log("📱 PWA LaunchQueue - targetURL value:",B.targetURL),B.targetURL)try{const H=new URL(B.targetURL);if(console.log("📱 PWA LaunchQueue - Parsed URL:",{href:H.href,pathname:H.pathname,search:H.search,hash:H.hash}),H.search){console.log("📱 PWA LaunchQueue - Processing deep link:",H.search);const q=new URLSearchParams(H.search),z=q.get("target"),G=q.get("token"),K=q.get("forceBrowser")==="true";if(console.log("📱 PWA LaunchQueue - Parsed params:",{target:z,token:G,forceBrowser:K}),K&&U){console.log("📱 Detected forceBrowser=true in PWA context"),console.log("📱 Opening link in browser using simulated user click");const Z=new URL(H.href);Z.searchParams.delete("forceBrowser");const ee=Z.toString();console.log("📱 Clean browser URL:",ee);const V=document.createElement("a");V.href=ee,V.target="_blank",V.rel="noopener noreferrer",document.body.appendChild(V);const J=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0,ctrlKey:!1,metaKey:!1,shiftKey:!1,button:0});V.dispatchEvent(J),setTimeout(()=>{document.body.removeChild(V)},100),setTimeout(()=>{alert("✅ Opened in your browser. You may close this PWA tab.")},500),console.log("📱 forceBrowser link handled - opened in browser");return}if(z&&z.startsWith("/")){const ee=decodeURIComponent(z)+H.search;console.log("📱 PWA LaunchQueue - Navigating to target:",ee),setTimeout(()=>{window.location.href=ee},100)}else if(G){const Z=`/play${H.search}`;console.log("📱 PWA LaunchQueue - Navigating to play with token:",Z),setTimeout(()=>{window.location.href=Z},100)}else console.log("📱 PWA LaunchQueue - Fallback: updating URL params only"),window.history.replaceState({},"",window.location.pathname+H.search)}else console.log("📱 PWA LaunchQueue - No search parameters found in URL")}catch(H){console.error("📱 PWA LaunchQueue - Error parsing targetURL:",H)}else{console.log("📱 PWA LaunchQueue - No targetURL in launch params");const H=window.location.href;console.log("📱 PWA LaunchQueue - Current URL fallback check:",H);const q=new URLSearchParams(window.location.search),z=q.get("target"),G=q.get("token");if(z||G){if(console.log("📱 PWA LaunchQueue - Found params in current URL:",{target:z,token:G}),z&&z.startsWith("/")){const K=decodeURIComponent(z);if(window.location.pathname!==K){const Z=K+window.location.search;console.log("📱 PWA LaunchQueue - Fallback navigating to target:",Z),setTimeout(()=>{window.location.href=Z},100)}}else if(G&&!window.location.pathname.startsWith("/play")){const K=`/play${window.location.search}`;console.log("📱 PWA LaunchQueue - Fallback navigating to play:",K),setTimeout(()=>{window.location.href=K},100)}}}}),console.log("📱 PWA LaunchQueue - Consumer registered")}catch(B){console.log("📱 PWA LaunchQueue - Not supported yet:",B)}if("navigator"in window&&"registerProtocolHandler"in navigator)try{navigator.registerProtocolHandler("web+lumino",window.location.origin+"/play?token=%s"),console.log("📱 PWA Deep Linking - Protocol handler registered")}catch(B){console.log("📱 PWA Deep Linking - Protocol handler not supported:",B)}const $=B=>{const H=B.target;if(H&&H.tagName==="A"&&H.href){const q=new URL(H.href),z=new URL(window.location.href);q.origin===z.origin&&n.isInstalled&&(B.preventDefault(),console.log("📱 PWA Deep Linking - Intercepting link:",H.href),window.location.href=H.href)}};return document.addEventListener("click",$,!0),()=>{document.removeEventListener("click",$,!0)}};console.log("🔧 PWA Debug - Current environment:",{"window.location.protocol":window.location.protocol,"window.location.hostname":window.location.hostname,"navigator.serviceWorker":!!navigator.serviceWorker,"window.matchMedia standalone":window.matchMedia("(display-mode: standalone)").matches,"document.referrer":document.referrer}),fetch("/manifest.webmanifest").then(U=>(console.log("🔧 PWA Debug - Manifest fetch:",{status:U.status,ok:U.ok,url:U.url}),U.json())).then(U=>{console.log("🔧 PWA Debug - Manifest content:",U),console.log("🔧 PWA Debug - Manifest validation:",{hasName:!!U.name,hasShortName:!!U.short_name,hasStartUrl:!!U.start_url,hasIcons:!!U.icons&&U.icons.length>0,hasDisplay:!!U.display,startUrl:U.start_url})}).catch(U=>{console.error("🔧 PWA Debug - Manifest fetch error:",U)}),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(U=>{console.log("🔧 PWA Debug - Service Worker registrations:",U.length),U.forEach(($,B)=>{var H;console.log(`🔧 PWA Debug - SW ${B}:`,{scope:$.scope,state:(H=$.active)==null?void 0:H.state,hasUpdateHandler:!!$.onupdatefound})})});const L=U=>{const $=U;if(!$.prompt||typeof $.prompt!="function"){console.log("🔧 PWA Debug - Ignoring fake/test beforeinstallprompt event");return}console.log("🎯 PWA Hook - beforeinstallprompt event received"),console.log("🎯 PWA Hook - Event details:",{platforms:$.platforms,type:$.type,timeStamp:$.timeStamp,hasPrompt:typeof $.prompt=="function"}),U.preventDefault(),window.deferredPrompt=$,r(B=>se(j({},B),{isInstallable:!0,showInstallPrompt:!0,installPrompt:$})),console.log("PWA install prompt available for student")},N=()=>{console.log("PWA installed successfully"),r(U=>se(j({},U),{isInstalled:!0,showInstallPrompt:!1,installPrompt:null}))};return window.addEventListener("beforeinstallprompt",L),window.addEventListener("appinstalled",N),setTimeout(()=>{var U;console.log("🔧 PWA Debug - 5 second check:",{"beforeinstallprompt fired":!!n.installPrompt,showInstallPrompt:n.showInstallPrompt,isInstallable:n.isInstallable}),console.log("🔧 PWA Debug - Chrome PWA criteria:",{"HTTPS or localhost":window.location.protocol==="https:"||window.location.hostname==="localhost","Service Worker registered":"serviceWorker"in navigator,"Manifest linked":!!document.querySelector('link[rel="manifest"]'),"Display mode":window.matchMedia("(display-mode: standalone)").matches?"standalone":"browser","User agent":navigator.userAgent.includes("Chrome"),Platform:navigator.platform,"Navigator standalone":navigator.standalone||!1}),console.log("🔧 PWA Debug - Detailed criteria check:"),console.log("  - Protocol:",window.location.protocol),console.log("  - Hostname:",window.location.hostname),console.log("  - SW support:","serviceWorker"in navigator),console.log("  - Manifest link:",(U=document.querySelector('link[rel="manifest"]'))==null?void 0:U.href),console.log("  - User Agent:",navigator.userAgent),console.log("  - Display mode:",window.matchMedia("(display-mode: standalone)").matches),window.matchMedia("(display-mode: standalone)").matches&&console.log("🔧 PWA Debug - App is already running in standalone mode (installed)"),console.log("🔧 PWA Debug - Manual beforeinstallprompt test..."),window.addEventListener("beforeinstallprompt",$=>{console.log("🎯 PWA Debug - beforeinstallprompt FINALLY fired!",$)})},5e3),setTimeout(()=>{console.log("🔧 PWA Debug - 10 second final check:",{"Install prompt available":!!n.installPrompt,"Chrome thinks installable":n.isInstallable,"PWA enabled":g}),console.log("🔧 PWA Debug - Chrome installation heuristics:"),console.log("  - Page has been visited before:",document.referrer!==""),console.log("  - User has interacted with page:",document.hasFocus()),console.log("  - Time on page > 30s:",performance.now()>3e4),console.log("  - No recent dismissal (unknown)");let U=!1;const $=()=>{U=!0,console.log("🔧 PWA Debug - User interaction detected, PWA may become installable soon"),setTimeout(()=>{!n.installPrompt&&!window.deferredPrompt&&console.log("🔧 PWA Debug - Still no install prompt after user interaction")},2e3)};["click","touchstart","keydown","scroll"].forEach(z=>{document.addEventListener(z,$,{once:!0})}),setTimeout(()=>{console.log("🔧 PWA Debug - User interaction status after 15s:",U),U||console.log("🔧 PWA Debug - No user interaction detected - this may prevent beforeinstallprompt")},15e3),console.log("🔧 PWA Debug - Comprehensive installability check:");const B=window.matchMedia("(display-mode: standalone)").matches,H=window.navigator.standalone===!0;console.log("  - Already installed:",B||H),fetch("/manifest.webmanifest").then(z=>z.json()).then(z=>{var G,K,Z;console.log("🔧 PWA Debug - Manifest details:",{name:z.name,start_url:z.start_url,display:z.display,current_url:window.location.pathname,url_match:z.start_url===window.location.pathname,icons_count:((G=z.icons)==null?void 0:G.length)||0,has_512_icon:(K=z.icons)==null?void 0:K.some(ee=>ee.sizes.includes("512x512"))}),console.log("🔧 PWA Debug - Potential blocking issues:"),console.log("  - URL mismatch:",z.start_url!==window.location.pathname),console.log("  - Missing large icon:",!((Z=z.icons)!=null&&Z.some(ee=>ee.sizes.includes("512x512")))),console.log("  - Display not standalone:",z.display!=="standalone"),console.log("  - Already in standalone mode:",B)}).catch(z=>{console.error("🔧 PWA Debug - Failed to fetch manifest:",z)}),"getInstalledRelatedApps"in navigator&&navigator.getInstalledRelatedApps().then(z=>{console.log("🔧 PWA Debug - Related apps:",z)}).catch(z=>{console.log("🔧 PWA Debug - No related apps or error:",z)}),console.log("🔧 PWA Debug - Waiting for real beforeinstallprompt event...")},1e4),()=>{window.removeEventListener("beforeinstallprompt",L),window.removeEventListener("appinstalled",N)}},[t,e]);const a=()=>te(nt,null,function*(){console.log("🚀 PWA Hook - installPWA called:",{hasInstallPrompt:!!n.installPrompt,showInstallPrompt:n.showInstallPrompt,isInstallable:n.isInstallable,hasGlobalPrompt:!!window.deferredPrompt});let x=n.installPrompt||window.deferredPrompt;if(!x)return console.warn("❌ PWA Hook - No install prompt available. This can happen when:"),console.warn("  • PWA criteria not fully met (HTTPS, manifest, service worker)"),console.warn("  • User has already dismissed the prompt"),console.warn("  • Browser doesn't support PWA installation"),console.warn("  • App is already installed"),console.warn("  • Chrome cache needs clearing (try clearing site data)"),console.log("🔧 PWA Debug - Attempting manual installation guidance..."),!1;if(!x.prompt||typeof x.prompt!="function")return console.error("❌ PWA Hook - Install prompt is invalid (no prompt function). Clearing invalid prompt."),r(w=>se(j({},w),{showInstallPrompt:!1,installPrompt:null,isInstallable:!1})),window.deferredPrompt=null,!1;try{console.log("📱 PWA Hook - Showing install prompt..."),yield x.prompt();const{outcome:w}=yield x.userChoice;return console.log(`✅ PWA Hook - Install prompt result: ${w}`),w==="accepted"?(console.log("🎉 PWA Hook - User accepted installation"),r(S=>se(j({},S),{showInstallPrompt:!1,installPrompt:null})),window.deferredPrompt=null,!0):(console.log("❌ PWA Hook - User dismissed installation"),r(S=>se(j({},S),{showInstallPrompt:!1})),window.deferredPrompt=null,!1)}catch(w){return console.error("💥 PWA Hook - Error installing PWA:",w),window.deferredPrompt=null,!1}}),l=()=>{r(x=>se(j({},x),{showInstallPrompt:!1}))},c=new URLSearchParams(window.location.search),u=c.get("emailAccess")==="true",d=c.get("from")==="email",f=c.get("studentEmail"),p=c.get("source")==="email",b=window.location.pathname==="/student",v=sessionStorage.getItem("direct_token_access")==="true",g=t&&e||(u||d&&f||p||v&&b)&&b;return{isInstallable:n.isInstallable&&g,isInstalled:n.isInstalled,showInstallPrompt:n.showInstallPrompt&&g,showBriefInstallPrompt:i&&g,isPWAEnabled:g,installPWA:a,dismissInstallPrompt:l,dismissBriefInstallPrompt:()=>o(!1),checkIfInstalled:s}},qZe=({className:t=""})=>{const{showInstallPrompt:e,installPWA:n,dismissInstallPrompt:r,isInstalled:i,isPWAEnabled:o}=r2();console.log("🎨 PWA Banner - Render state:",{showInstallPrompt:e,isInstalled:i,isPWAEnabled:o,shouldShow:e&&!i});const s=!1,a=!i&&o;if(console.log("🎨 PWA Banner - Development check:",{isDevelopment:s,showInstallPrompt:e,isInstalled:i,isPWAEnabled:o,shouldShowBanner:a,finalDecision:a,"import.meta.env.DEV":!1,"import.meta.env.MODE":"production"}),!a)return console.log("🚫 PWA Banner - Not showing banner:",{showInstallPrompt:e,isInstalled:i,isPWAEnabled:o,isDevelopment:s,shouldShowBanner:a}),null;console.log("✅ PWA Banner - Showing banner (dev mode or install prompt available)");const l=/iPad|iPhone|iPod/.test(navigator.userAgent),c=/Android/.test(navigator.userAgent),u=()=>{const f=/Chrome/.test(navigator.userAgent),p=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent),b=/Firefox/.test(navigator.userAgent);let v="";f?v="Chrome: Look for the install icon (⊕) in the address bar, or go to Menu → Install LuminateLearn":p?v='Safari: Tap the Share button (□↑) and select "Add to Home Screen"':b?v="Firefox: Look for the install icon in the address bar, or go to Menu → Install":v="Look for an install option in your browser menu or address bar",alert(`Manual Installation:

${v}

Note: If the install option doesn't appear, try:
1. Clear your browser cache
2. Refresh the page
3. Interact with the page (click/scroll)
4. Wait 30+ seconds`)},d=()=>te(nt,null,function*(){(yield n())||(console.log("🔧 PWA Banner - Automatic install failed, showing manual instructions"),u())});return h.jsxs("div",{className:`pwa-install-banner ${t}`,style:{background:"linear-gradient(135deg, #4299E1 0%, #3182CE 100%)",color:"white",borderRadius:"12px",margin:"16px 0",boxShadow:"0 4px 12px rgba(66, 153, 225, 0.3)",overflow:"hidden"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"16px 20px",gap:"16px"},children:[h.jsx("div",{style:{fontSize:"2rem",flexShrink:0},children:"📱"}),h.jsxs("div",{style:{flex:1,minWidth:0},children:[h.jsx("h3",{style:{margin:"0 0 4px 0",fontSize:"1.1rem",fontWeight:600},children:"Install LuminateLearn"}),h.jsx("p",{style:{margin:0,fontSize:"0.9rem",opacity:.9,lineHeight:1.4},children:"Get the app experience! Install LuminateLearn for faster access to your assignments."})]}),h.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexShrink:0},children:[h.jsx("button",{onClick:d,style:{background:"rgba(255, 255, 255, 0.2)",color:"white",border:"1px solid rgba(255, 255, 255, 0.3)",padding:"8px 16px",borderRadius:"8px",fontSize:"0.9rem",fontWeight:500,cursor:"pointer",transition:"all 0.2s ease"},children:e?"Install App":"How to Install"}),s,h.jsx("button",{onClick:()=>{console.log("🔧 PWA Debug - Note: Real beforeinstallprompt events are triggered by Chrome automatically")},style:{background:"rgba(255, 255, 255, 0.1)",color:"white",border:"1px solid rgba(255, 255, 255, 0.2)",padding:"6px 12px",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer"},title:"Test PWA installation criteria",children:"🧪 Debug"}),h.jsx("button",{onClick:r,style:{background:"none",border:"none",color:"white",fontSize:"1.2rem",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",opacity:.7,transition:"opacity 0.2s ease"},children:"✕"})]})]}),h.jsx("div",{style:{fontSize:"0.8rem",opacity:.8,textAlign:"center",padding:"8px 16px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderTop:"1px solid rgba(255, 255, 255, 0.2)"},children:e?'✅ Ready to install - Click "Install App" above':`📱 ${l?"iOS":c?"Android":"Desktop"}: Click "How to Install" for instructions`})]})};function t5(t={}){const{enabled:e=!0,studentEmail:n,source:r="pwa_launch",onDuplicateDetected:i}=t,o=T.useRef(!1),s=T.useRef(null);return T.useEffect(()=>{if(!e||o.current)return;const a=new URLSearchParams(window.location.search);if(a.has("forceBrowser")&&a.get("forceBrowser")==="true"||!(window.location.pathname.includes("/student")||window.location.pathname.includes("/play")||window.location.pathname.includes("/teacher")||window.location.pathname.includes("/email-link")||window.location.pathname.includes("/login")||a.has("pwa")||a.has("emailAccess")||a.has("studentEmail"))||!("serviceWorker"in navigator))return;o.current=!0;const d=setTimeout(()=>te(this,null,function*(){try{console.log("[useSinglePWAWindow] 🎯 Enforcing single PWA window");const f=b=>{var v;if(((v=b.data)==null?void 0:v.type)==="CLOSE_DUPLICATE_PWA"){if(console.log("[useSinglePWAWindow] 📨 Received close duplicate response:",b.data),b.data.success){const m=b.data.reason;i==null||i("focused_existing"),m==="existing_pwa_focused"?console.log("[useSinglePWAWindow] ✅ Existing PWA successfully focused, closing this window"):m==="focus_blocked_fallback_close_new"?console.log("[useSinglePWAWindow] 🔒 Focus blocked by browser security, closing new window per fallback strategy"):m==="focus_failed_prefer_existing"?console.log("[useSinglePWAWindow] ✅ Focus failed but preferring existing PWA, closing this window"):console.log("[useSinglePWAWindow] ✅ Closing this window, reason:",m),setTimeout(()=>{try{window.close()}catch(g){console.log("[useSinglePWAWindow] ❌ Could not close window:",g)}},500)}else{const m=b.data.reason;console.log("[useSinglePWAWindow] ✅ This window can stay, reason:",m),i==null||i("no_action")}navigator.serviceWorker.removeEventListener("message",f),s.current=null}};s.current=f,navigator.serviceWorker.addEventListener("message",f);const p=yield navigator.serviceWorker.ready;p.active&&p.active.postMessage({type:"ENFORCE_SINGLE_PWA",currentUrl:window.location.href,studentEmail:n,source:r,timestamp:Date.now()}),setTimeout(()=>{s.current&&(console.log("[useSinglePWAWindow] ⏰ Timeout reached, removing listener"),navigator.serviceWorker.removeEventListener("message",s.current),s.current=null)},5e3)}catch(f){console.error("[useSinglePWAWindow] ❌ Error enforcing single PWA:",f)}}),100);return()=>{clearTimeout(d),s.current&&(navigator.serviceWorker.removeEventListener("message",s.current),s.current=null)}},[e,n,r,i]),T.useEffect(()=>{var l;if(!e)return;const a=c=>{var u,d;((u=c.data)==null?void 0:u.type)==="PWA_ACTIVITY_NOTIFICATION"?console.log("[useSinglePWAWindow] 📨 Received PWA activity notification:",c.data):((d=c.data)==null?void 0:d.type)==="CLIENT_ALIVE_PING"&&(console.log("[useSinglePWAWindow] 🏓 Responding to client alive ping"),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"CLIENT_ALIVE_RESPONSE",clientId:c.data.clientId,timestamp:Date.now()}))};return(l=navigator.serviceWorker)==null||l.addEventListener("message",a),()=>{var c;(c=navigator.serviceWorker)==null||c.removeEventListener("message",a)}},[e]),{isProcessed:o.current}}const _n={primary:"#4299E1",background:"#EBF8FF",cardBg:"#FFFFFF",text:"#2D3748",textLight:"#718096"},KZe=()=>{const{currentUser:t}=Dr(),e=Pr(),n=gs(),r=new URLSearchParams(n.search),i=r.get("id"),o=r.get("teacherView")==="true",s=r.get("pwa"),{installPWA:a,isInstallable:l,isInstalled:c,showBriefInstallPrompt:u,dismissBriefInstallPrompt:d}=r2(),{toastMessage:f,showToast:p}=$L(),[b,v]=T.useState(()=>{const Ee=new URLSearchParams(window.location.search),Le=Ee.get("emailAccess")==="true",Ge=Ee.get("from")==="email",Ke=Ee.get("pwa")==="true",je=Ee.get("studentEmail"),et=Ee.get("source")==="email",lt=sessionStorage.getItem("direct_token_access")==="true",ht=Le||Ge&&Ke||Ge&&je||et||lt;return console.log("[StudentDashboard] INITIALIZATION: Email link check:",{emailAccess:Le,fromEmail:Ge,pwaParam:Ke,studentEmailParam:je,sourceParam:et,sessionFlag:lt,isEmailLink:ht}),ht&&(console.log("[StudentDashboard] ✅ INITIALIZATION: Email link access detected"),sessionStorage.setItem("direct_token_access","true"),je&&(sessionStorage.setItem("student_email",je),console.log("[StudentDashboard] ✅ INITIALIZATION: Stored student email for Dashboard navigation:",je))),ht}),[m,g]=T.useState(null),[x,w]=T.useState(null),[S,P]=T.useState([]),[I,M]=T.useState([]),[D,E]=T.useState([]),[_,A]=T.useState([]),[R,F]=T.useState({}),[L,N]=T.useState(!0),[U,$]=T.useState("assignments"),[B,H]=T.useState(!1),[q,z]=T.useState([]),[G,K]=T.useState(!1),[Z,ee]=T.useState(!1),[V,J]=T.useState(null),oe=i||(t==null?void 0:t.email)||r.get("studentEmail")||"";t5({enabled:!0,studentEmail:oe,source:"student_dashboard",onDuplicateDetected:Ee=>{console.log("[StudentDashboard] 🎯 PWA duplicate action:",Ee),J(Ee),Ee==="focused_existing"?p({title:"Opening Existing App 🎯",description:"Switching to your already open LuminateLearn app...",status:"info",duration:3e3}):Ee==="closed_duplicates"&&p({title:"App Window Cleaned Up ✨",description:"Closed duplicate windows to keep things tidy!",status:"success",duration:3e3})}}),T.useEffect(()=>{const Ee=window.matchMedia("(display-mode: standalone)").matches,Le=window.navigator.standalone===!0,Ge=Ee||Le;if(console.log("📱 StudentDashboard - IMMEDIATE CHECK:"),console.log("  - standaloneMatch:",Ee),console.log("  - iosStandalone:",Le),console.log("  - isInPWAImmediate:",Ge),console.log("  - userAgent:",navigator.userAgent),console.log("  - windowSize:",`${window.outerWidth}x${window.outerHeight}`),console.log("  - innerSize:",`${window.innerWidth}x${window.innerHeight}`),Ge){console.log("📱 StudentDashboard - IMMEDIATE CHECK: In PWA mode, skipping universal guidance message");return}console.log("📱 StudentDashboard - IMMEDIATE CHECK: In browser mode, setting up delayed check...");const Ke=setTimeout(()=>{const je=window.matchMedia("(display-mode: standalone)").matches,et=window.navigator.standalone===!0,lt=je||et;if(console.log("📱 StudentDashboard - DELAYED CHECK:"),console.log("  - standaloneMatchDelayed:",je),console.log("  - iosStandaloneDelayed:",et),console.log("  - isInPWADelayed:",lt),console.log("  - decision:",lt?"SKIP_MESSAGE":"SHOW_MESSAGE"),lt){console.log("📱 StudentDashboard - DELAYED CHECK: In PWA mode, skipping universal guidance message");return}console.log("📱 StudentDashboard - DELAYED CHECK: In browser mode, showing universal PWA guidance");try{p({title:"🌟 Get the best LuminateLearn experience!",description:`See an Install icon? → Tap it to add LuminateLearn to your device
See "Open in App"? → Tap it
See "Always Use"? → Tap it`,status:"info",duration:12e3}),console.log("📱 StudentDashboard - Universal PWA toast completed")}catch(ht){console.error("📱 StudentDashboard - Universal PWA toast error:",ht)}},6e3);return()=>clearTimeout(Ke)},[]),T.useEffect(()=>{const Ee=r.get("showGuide")==="true",Le=r.get("pwa")==="alreadyInstalled",Ge=r.get("forceBrowser")==="true",Ke=r.get("showOpenInAppHint")==="true",je=r.get("emailClient")==="true";if(console.log("StudentDashboard: PWA parameters:",{pwaInstall:s,showGuide:Ee,alreadyInstalled:Le,forceBrowser:Ge,showOpenInAppHint:Ke,emailClient:je,isInstallable:l,isInstalled:c}),Ge){console.log("📱 Force browser mode detected - skipping PWA features");return}if(Le){const et=setTimeout(()=>{p({title:"App Already Installed! 🎉",description:"LuminateLearn is already installed on your device. You can find it on your home screen or in your applications folder.",status:"info",duration:8e3})},1e3);return()=>clearTimeout(et)}if(s==="install"||Ee)if(c){const et=setTimeout(()=>{p({title:"App Already Installed! 🎉",description:"LuminateLearn is already installed. Look for the app icon on your home screen or in your applications.",status:"success",duration:8e3})},1e3);return()=>clearTimeout(et)}else if(l){const et=setTimeout(()=>{H(!0),console.log("📱 PWA installation prompted from email link")},1e3);return()=>clearTimeout(et)}else{const et=setTimeout(()=>{p({title:"Manual Installation Required",description:"Look for an install button in your browser address bar, or check your browser menu for 'Install LuminateLearn' or 'Add to Home Screen'.",status:"info",duration:1e4})},1e3);return()=>clearTimeout(et)}},[s,l,c,r,p]);const ne=()=>te(nt,null,function*(){try{yield a(),H(!1);const Ee=new URL(window.location.href);Ee.searchParams.delete("pwa"),window.history.replaceState({},"",Ee.toString()),console.log("✅ PWA installation completed from Student Dashboard")}catch(Ee){console.error("❌ PWA installation failed:",Ee)}});T.useEffect(()=>{if(!L&&x){const Ee=setTimeout(()=>{const Le=new URL(window.location.href);let Ge=!1;if(["studentEmail","source","pwa","from","emailAccess","forceBrowser","showInstall","showGuide"].forEach(je=>{Le.searchParams.has(je)&&(console.log(`[StudentDashboard] 🧹 Cleaning URL parameter: ${je}`),Le.searchParams.delete(je),Ge=!0)}),Ge){const je=Le.toString();console.log("[StudentDashboard] ✨ URL cleaned:",je),window.history.replaceState({},"",je)}},2e3);return()=>clearTimeout(Ee)}},[L,x]),T.useEffect(()=>{let Ee=null;try{Ee=new BroadcastChannel("luminatelearn-assignments"),console.log("[StudentDashboard] 📡 BroadcastChannel initialized");const Ge=Ke=>{var je;console.log("[StudentDashboard] 📨 BroadcastChannel message:",Ke.data),((je=Ke.data)==null?void 0:je.type)==="ASSIGNMENT_AVAILABLE"&&(console.log("[StudentDashboard] 🎯 New assignment notification received"),ee(!0),p({title:"New Assignment Available! 🎯",description:"A new assignment has been shared with you. Check your assignments tab!",status:"info",duration:6e3}),setTimeout(()=>{console.log("[StudentDashboard] 🔄 Auto-refreshing assignments"),window.location.reload()},2e3))};Ee.onmessage=Ge}catch(Ge){console.warn("[StudentDashboard] ⚠️ BroadcastChannel not supported:",Ge)}const Le=Ge=>{var Ke;console.log("[StudentDashboard] 🔧 Service Worker message:",Ge.data),((Ke=Ge.data)==null?void 0:Ke.type)==="ASSIGNMENT_NOTIFICATION"&&(console.log("[StudentDashboard] 🎯 Assignment notification from Service Worker"),ee(!0),p({title:"Assignment Ready! 🚀",description:"Your assignment is ready to play. Welcome back!",status:"success",duration:5e3}),setTimeout(()=>{window.location.reload()},1500))};return"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",Le),()=>{Ee&&Ee.close(),"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",Le)}},[p]),T.useEffect(()=>{te(nt,null,function*(){N(!0);try{if(o&&i){const Le=an(bt,"users",i),Ge=yield si(Le);if(Ge.exists()){const Ke=Ge.data();g(j({id:Ge.id},Ke)),yield pe(Ke.email)}else console.error("Student not found"),e("/teacher")}else if(!t&&!b){console.log("[StudentDashboard] No current user and not email link access - redirecting to login"),e("/login");return}else if(t)if(b){const Le=r.get("studentEmail")||sessionStorage.getItem("student_email");Le?(console.log("[StudentDashboard] ✅ Authenticated email link user - fetching data for:",Le),yield pe(Le)):yield ye()}else{const Le=sessionStorage.getItem("student_email");Le&&sessionStorage.getItem("direct_token_access")==="true"?(console.log("[StudentDashboard] ✅ Using stored student email for authenticated user:",Le),yield pe(Le)):yield ye()}else if(b){const Le=r.get("studentEmail");if(Le){console.log("🔐 Email link access detected - using simplified approach for:",Le),yield pe(Le);let Ge=Le.split("@")[0];try{console.log("[StudentDashboard] Fetching student name from users collection for email:",Le);const Ke=mr(Tn(bt,"users"),Bn("email","==",Le.toLowerCase()),$f(1)),je=yield Xn(Ke);if(je.empty)console.log("[StudentDashboard] No user found in users collection, using email prefix");else{const et=je.docs[0].data();et.name?(Ge=et.name,console.log("[StudentDashboard] Found student name in users collection:",et.name)):console.log("[StudentDashboard] No name field in user document, using email prefix")}}catch(Ke){console.error("[StudentDashboard] Error fetching student name from users collection:",Ke)}w({id:"email_link_user",email:Le,name:Ge})}else{console.log("[StudentDashboard] Email link access but no studentEmail parameter"),e("/login");return}}}catch(Le){console.error("Error in data fetching:",Le)}finally{N(!1)}})},[t,e,i,o,b]);const pe=Ee=>te(nt,null,function*(){try{yield Ce(Ee),yield ce(Ee),yield ie(),i?yield de(i):t!=null&&t.uid&&(yield de(t.uid))}catch(Le){console.error("Error fetching student specific data:",Le)}}),ye=()=>te(nt,null,function*(){try{if(t!=null&&t.uid){const Ee=an(bt,"users",t.uid),Le=yield si(Ee);Le.exists()&&w(j({id:Le.id},Le.data()))}yield _e(),yield Be(),yield ie(),yield me()}catch(Ee){console.error("Error fetching student data:",Ee)}}),Ce=Ee=>te(nt,null,function*(){try{const Le=mr(Tn(bt,"assignments"),Bn("studentEmail","==",Ee)),Ke=(yield Xn(Le)).docs.map(je=>j({id:je.id},je.data()));Ke.sort((je,et)=>{var ke,gt;const lt=((ke=je.deadline)==null?void 0:ke.toDate())||new Date,ht=((gt=et.deadline)==null?void 0:gt.toDate())||new Date;return lt.getTime()-ht.getTime()}),P(Ke),yield ae(Ke)}catch(Le){console.error("Error fetching assignments:",Le)}}),_e=()=>te(nt,null,function*(){t!=null&&t.email&&(yield Ce(t.email))}),ce=Ee=>te(nt,null,function*(){}),Be=()=>te(nt,null,function*(){}),de=Ee=>te(nt,null,function*(){try{const Le=yield si(an(bt,"users",Ee));if(Le.exists()){const Ge=Le.data();E(Ge.highScores||[])}}catch(Le){console.error("Error fetching high scores:",Le)}}),me=()=>te(nt,null,function*(){t!=null&&t.uid&&(yield de(t.uid))}),ie=()=>te(nt,null,function*(){try{const Ee=mr(Tn(bt,"userGameConfigs"),Bn("share","==",!0)),Ge=(yield Xn(Ee)).docs.map(Ke=>j({id:Ke.id},Ke.data()));A(Ge)}catch(Ee){console.error("Error fetching free games:",Ee)}}),ae=Ee=>te(nt,null,function*(){try{const Le=[...new Set(Ee.map(Ke=>Ke.gameId).filter(Boolean))];if(Le.length===0)return;const Ge={};for(const Ke of Le)try{const je=an(bt,"userGameConfigs",Ke),et=yield si(je);et.exists()&&(Ge[Ke]=j({id:et.id},et.data()))}catch(je){console.error(`Error fetching game config for ${Ke}:`,je)}F(Ge)}catch(Le){console.error("Error fetching game configs:",Le)}}),ge=Ee=>{e(`/game/${Ee}`)},X=Ee=>{Ee.linkToken&&e(`/play?token=${Ee.linkToken}`)},W=Ee=>Ee.timesRequired?Math.min(100,Math.round((Ee.completedCount||0)/Ee.timesRequired*100)):0,ve=(Ee,Le)=>{switch(Ee){case"sort-categories-egg":case"sort-categories-egg-reveal":return((Le==null?void 0:Le.eggQty)||6)*10;case"whack-a-mole":const Ke=(Le==null?void 0:Le.speed)||(Le==null?void 0:Le.difficulty)||"medium";let je;switch(Ke.toLowerCase()){case"low":case"easy":je=60;break;case"high":case"hard":je=120;break;case"medium":default:je=90;break}return Le!=null&&Le.targetScore&&(je=Le.targetScore),je;case"spinner-wheel":return(Le==null?void 0:Le.maxScore)||100;case"place-value-showdown":return((Le==null?void 0:Le.winningScore)||5)*20;default:return 100}},ue=(Ee,Le,Ge,Ke)=>{const je=ve(Le||"",Ge),et=Math.min(100,Math.max(0,Ee/je*100));let lt,ht,ke;return et>=96?(lt=5,ht="MASTER",ke="#FFD700"):et>=85?(lt=4,ht="EXPERT",ke="#FF6B6B"):et>=70?(lt=3,ht="SKILLED",ke="#4ECDC4"):et>=50?(lt=2,ht="LEARNER",ke="#45B7D1"):(lt=1,ht="BEGINNER",ke="#96CEB4"),h.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"4px"},children:[h.jsx("div",{style:{display:"flex",marginBottom:"4px"},children:[...Array(5)].map((gt,tt)=>h.jsx("div",{style:{fontSize:"20px",color:tt<lt?"#FFD700":"#E2E8F0",marginRight:"2px",textShadow:tt<lt?"0 1px 3px rgba(0,0,0,0.3)":"none"},children:"★"},tt))}),h.jsx("div",{style:{fontSize:"11px",fontWeight:"bold",color:ke,backgroundColor:`${ke}15`,padding:"2px 8px",borderRadius:"12px",textAlign:"center",border:`1px solid ${ke}40`},children:ht}),h.jsxs("div",{style:{fontSize:"10px",color:_n.textLight,marginTop:"2px"},children:[Math.round(et),"% (",Ee,"/",je,")"]})]})},Me=(Ee,Le,Ge)=>h.jsxs("button",{onClick:()=>$(Ee),style:{padding:"12px",backgroundColor:U===Ee?_n.primary:"transparent",color:U===Ee?"white":_n.text,border:"none",borderRadius:"12px",cursor:"pointer",fontWeight:"bold",fontSize:"16px",display:"flex",alignItems:"center",boxShadow:U===Ee?"0 4px 6px rgba(66, 153, 225, 0.3)":"none",transition:"all 0.2s ease"},children:[h.jsx("span",{style:{marginRight:"8px",fontSize:"20px"},children:Ge}),Le]}),Ae=()=>{const Ee=new Date,Le=S.filter(et=>{var ht;const lt=(ht=et.deadline)==null?void 0:ht.toDate();return lt&&lt<Ee&&(et.status==="assigned"||et.status==="started")}),Ge=S.filter(et=>{var ht;const lt=(ht=et.deadline)==null?void 0:ht.toDate();return(et.status==="assigned"||et.status==="started")&&(!lt||lt>=Ee)}),Ke=S.filter(et=>et.status==="completed"),je=({assignment:et,sectionType:lt})=>{var tt;const ht=()=>{switch(lt){case"overdue":return"#F56565";case"current":return"#4299E1";case"completed":return"#48BB78";default:return"#E2E8F0"}},ke=()=>{switch(lt){case"overdue":return"#FFF5F5";case"current":return _n.cardBg;case"completed":return"#F0FFF4";default:return _n.cardBg}},gt=R[et.gameId];return h.jsxs("div",{style:{backgroundColor:ke(),borderRadius:"16px",padding:"16px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)",border:`2px solid ${ht()}`,cursor:lt!=="completed"?"pointer":"default",transition:"transform 0.2s ease, box-shadow 0.2s ease",opacity:lt==="completed"?.8:1},onClick:()=>lt!=="completed"&&X(et),children:[h.jsx("div",{style:{height:"120px",backgroundColor:"#EDF2F7",borderRadius:"12px",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:`1px solid ${ht()}20`},children:gt!=null&&gt.thumbnail?h.jsx("img",{src:gt.thumbnail,alt:et.gameName,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"12px"}}):h.jsx("div",{style:{fontSize:"48px",color:ht(),opacity:.7},children:(gt==null?void 0:gt.type)==="whack-a-mole"?"🔨":(gt==null?void 0:gt.type)==="sort-categories-egg"?"🥚":(gt==null?void 0:gt.type)==="place-value-showdown"?"🎯":"🎮"})}),h.jsx("h3",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"8px",color:_n.text},children:et.gameName}),h.jsxs("div",{style:{marginBottom:"12px",color:_n.textLight,fontSize:"14px"},children:["Due: ",((tt=et.deadline)==null?void 0:tt.toDate().toLocaleDateString())||"No deadline",lt==="overdue"&&h.jsx("span",{style:{marginLeft:"8px",color:"#E53E3E",fontSize:"12px",fontWeight:"bold",backgroundColor:"#FED7D7",padding:"2px 6px",borderRadius:"12px"},children:"OVERDUE"})]}),h.jsxs("div",{style:{marginBottom:"8px",fontSize:"14px"},children:[h.jsx("span",{style:{color:_n.textLight},children:"Progress: "}),h.jsxs("span",{style:{fontWeight:"bold",color:_n.text},children:[et.completedCount||0," / ",et.timesRequired||1]})]}),h.jsx("div",{style:{height:"12px",backgroundColor:"#E2E8F0",borderRadius:"6px",overflow:"hidden"},children:h.jsx("div",{style:{height:"100%",width:`${W(et)}%`,backgroundColor:W(et)===100?"#48BB78":ht(),borderRadius:"6px"}})}),h.jsx("div",{style:{marginTop:"16px",padding:"8px",backgroundColor:lt==="completed"?"#C6F6D5":_n.background,borderRadius:"8px",textAlign:"center",fontWeight:"bold",color:lt==="completed"?"#2F855A":ht()},children:lt==="completed"?"✅ Completed!":lt==="overdue"?"🚨 Complete Now!":"▶️ Play Now"})]},et.id)};return h.jsxs("div",{style:{marginTop:"24px"},children:[h.jsx("h2",{style:{fontSize:"24px",marginBottom:"24px",color:_n.text},children:"My Assignments"}),S.length===0?h.jsxs("div",{style:{backgroundColor:_n.cardBg,borderRadius:"16px",padding:"24px",textAlign:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)"},children:[h.jsx("span",{style:{fontSize:"48px",marginBottom:"16px",display:"block"},children:"📚"}),h.jsx("p",{style:{color:_n.textLight,fontSize:"18px"},children:"You don't have any assignments yet!"})]}):h.jsxs(h.Fragment,{children:[Le.length>0&&h.jsxs("div",{style:{marginBottom:"32px"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",backgroundColor:"#FED7D7",padding:"12px 16px",borderRadius:"12px",border:"2px solid #F56565"},children:[h.jsx("span",{style:{fontSize:"24px",marginRight:"12px"},children:"🚨"}),h.jsxs("h3",{style:{fontSize:"20px",fontWeight:"bold",color:"#C53030",margin:0},children:["Not-Yet-Done Assignments (",Le.length,")"]})]}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px"},children:Le.map(et=>h.jsx(je,{assignment:et,sectionType:"overdue"},et.id))})]}),Ge.length>0&&h.jsxs("div",{style:{marginBottom:"32px"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",backgroundColor:"#EBF8FF",padding:"12px 16px",borderRadius:"12px",border:"2px solid #4299E1"},children:[h.jsx("span",{style:{fontSize:"24px",marginRight:"12px"},children:"📋"}),h.jsxs("h3",{style:{fontSize:"20px",fontWeight:"bold",color:"#2B6CB0",margin:0},children:["Current Assignments (",Ge.length,")"]})]}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px"},children:Ge.map(et=>h.jsx(je,{assignment:et,sectionType:"current"},et.id))})]}),Ke.length>0&&h.jsxs("div",{style:{marginBottom:"32px"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",backgroundColor:"#F0FFF4",padding:"12px 16px",borderRadius:"12px",border:"2px solid #48BB78"},children:[h.jsx("span",{style:{fontSize:"24px",marginRight:"12px"},children:"✅"}),h.jsxs("h3",{style:{fontSize:"20px",fontWeight:"bold",color:"#2F855A",margin:0},children:["Completed Assignments (",Ke.length,")"]})]}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px"},children:Ke.map(et=>h.jsx(je,{assignment:et,sectionType:"completed"},et.id))})]})]})]})},Ne=()=>{const Ee=S.reduce((Ge,Ke)=>{var je;if(Ke.gameId&&R[Ke.gameId]){const et=R[Ke.gameId];Ge[Ke.gameId]=se(j({},et),{id:Ke.gameId,name:Ke.gameName,assignmentCount:(((je=Ge[Ke.gameId])==null?void 0:je.assignmentCount)||0)+1})}return Ge},{}),Le=Object.values(Ee);return h.jsxs("div",{style:{marginTop:"24px"},children:[h.jsx("h2",{style:{fontSize:"24px",marginBottom:"24px",color:_n.text},children:"Free Play"}),Le.length>0&&h.jsxs("div",{style:{marginBottom:"32px"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",backgroundColor:"#E6FFFA",padding:"12px 16px",borderRadius:"12px",border:"2px solid #38B2AC"},children:[h.jsx("span",{style:{fontSize:"24px",marginRight:"12px"},children:"🎯"}),h.jsxs("h3",{style:{fontSize:"20px",fontWeight:"bold",color:"#2C7A7B",margin:0},children:["My Assigned Games (",Le.length,")"]})]}),h.jsx("p",{style:{color:_n.textLight,marginBottom:"16px",fontSize:"14px"},children:"Practice with games you've been assigned. Perfect your skills anytime!"}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px"},children:Le.map(Ge=>h.jsxs("div",{style:{backgroundColor:_n.cardBg,borderRadius:"16px",padding:"16px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)",border:"2px solid #38B2AC",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onClick:()=>ge(Ge.id),onMouseOver:Ke=>{Ke.currentTarget.style.transform="translateY(-2px)",Ke.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseOut:Ke=>{Ke.currentTarget.style.transform="translateY(0)",Ke.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.05)"},children:[h.jsx("div",{style:{height:"160px",backgroundColor:"#E6FFFA",borderRadius:"12px",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:"1px solid #38B2AC30"},children:Ge.thumbnail?h.jsx("img",{src:Ge.thumbnail,alt:Ge.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"12px"}}):h.jsx("div",{style:{fontSize:"48px",color:"#38B2AC"},children:Ge.type==="whack-a-mole"?"🔨":Ge.type==="sort-categories-egg"?"🥚":Ge.type==="place-value-showdown"?"🎯":"🎮"})}),h.jsx("h3",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"8px",color:_n.text},children:Ge.name||Ge.title}),h.jsxs("div",{style:{fontSize:"14px",color:_n.textLight,marginBottom:"8px"},children:["Type: ",Ge.type||Ge.gameType]}),h.jsxs("div",{style:{fontSize:"14px",color:_n.textLight,marginBottom:"16px"},children:["Assigned ",Ge.assignmentCount," time",Ge.assignmentCount>1?"s":""]}),h.jsx("div",{style:{padding:"8px",backgroundColor:"#38B2AC",borderRadius:"8px",textAlign:"center",fontWeight:"bold",color:"white"},children:"🎯 Practice Game"})]},Ge.id))})]}),h.jsxs("div",{style:{marginBottom:"32px"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",backgroundColor:"#F0FFF4",padding:"12px 16px",borderRadius:"12px",border:"2px solid #48BB78"},children:[h.jsx("span",{style:{fontSize:"24px",marginRight:"12px"},children:"🌟"}),h.jsxs("h3",{style:{fontSize:"20px",fontWeight:"bold",color:"#2F855A",margin:0},children:["Public Games (",_.length,")"]})]}),_.length===0?h.jsxs("div",{style:{backgroundColor:_n.cardBg,borderRadius:"16px",padding:"24px",textAlign:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)"},children:[h.jsx("span",{style:{fontSize:"48px",marginBottom:"16px",display:"block"},children:"🎮"}),h.jsx("p",{style:{color:_n.textLight,fontSize:"18px"},children:"No public games available right now. Check back later!"})]}):h.jsxs(h.Fragment,{children:[h.jsx("p",{style:{color:_n.textLight,marginBottom:"16px",fontSize:"14px"},children:"Explore games shared by teachers for everyone to enjoy!"}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px"},children:_.map(Ge=>h.jsxs("div",{style:{backgroundColor:_n.cardBg,borderRadius:"16px",padding:"16px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)",border:"2px solid #48BB78",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onClick:()=>ge(Ge.id),onMouseOver:Ke=>{Ke.currentTarget.style.transform="translateY(-2px)",Ke.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseOut:Ke=>{Ke.currentTarget.style.transform="translateY(0)",Ke.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.05)"},children:[h.jsx("div",{style:{height:"160px",backgroundColor:"#F0FFF4",borderRadius:"12px",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:"1px solid #48BB7830"},children:Ge.thumbnail?h.jsx("img",{src:Ge.thumbnail,alt:Ge.name||Ge.title,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"12px"}}):h.jsx("div",{style:{fontSize:"48px",color:"#48BB78"},children:Ge.type==="whack-a-mole"?"🔨":Ge.type==="sort-categories-egg"?"🥚":Ge.type==="place-value-showdown"?"🎯":"🎮"})}),h.jsx("h3",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"8px",color:_n.text},children:Ge.name||Ge.title}),h.jsxs("div",{style:{fontSize:"14px",color:_n.textLight,marginBottom:"16px"},children:["Type: ",Ge.type||Ge.gameType]}),h.jsx("div",{style:{padding:"8px",backgroundColor:"#48BB78",borderRadius:"8px",textAlign:"center",fontWeight:"bold",color:"white"},children:"🌟 Play Free Game"})]},Ge.id))})]})]}),Le.length===0&&_.length===0&&h.jsxs("div",{style:{backgroundColor:_n.cardBg,borderRadius:"16px",padding:"32px",textAlign:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)"},children:[h.jsx("span",{style:{fontSize:"64px",marginBottom:"16px",display:"block"},children:"🎮"}),h.jsx("h3",{style:{fontSize:"20px",marginBottom:"8px",color:_n.text},children:"No Games Available"}),h.jsx("p",{style:{color:_n.textLight,fontSize:"16px"},children:"You don't have any assigned games yet, and there are no public games available. Check back later or ask your teacher about assignments!"})]})]})},Re=()=>{var Ke;const Ee=(je,et,lt)=>{const ht=ve(et||"",lt),ke=Math.min(100,Math.max(0,je/ht*100));return ke>=96?{emoji:"🏆",text:"LEGEND",color:"#FFD700",bgColor:"#FFF8DC"}:ke>=85?{emoji:"🥇",text:"CHAMPION",color:"#FFD700",bgColor:"#FFF8DC"}:ke>=70?{emoji:"🥈",text:"EXPERT",color:"#C0C0C0",bgColor:"#F8F8FF"}:ke>=50?{emoji:"🥉",text:"SKILLED",color:"#CD7F32",bgColor:"#FDF5E6"}:ke>=25?{emoji:"⭐",text:"RISING STAR",color:"#32CD32",bgColor:"#F0FFF0"}:{emoji:"🌟",text:"ACHIEVER",color:"#4169E1",bgColor:"#F0F8FF"}},Le=()=>{var lt;const je=q.length,et=((lt=q[0])==null?void 0:lt.score)||0;return je===0?"🎮 Start playing games to unlock your first achievement!":je===1?"🌟 Great start! Keep playing to build your collection of achievements!":et>=900?"🏆 Legendary performance! You're absolutely crushing it!":et>=700?"🎯 Fantastic scores! You're becoming a true gaming expert!":"🚀 Keep it up! Every game makes you stronger!"},Ge=({score:je,index:et})=>{var gt,tt;const lt=Ee(je.score,je.gameType,je.gameConfig),ht=je.gameConfig,ke=et===0;return h.jsxs("div",{style:{backgroundColor:ke?"#FFF8DC":_n.cardBg,borderRadius:"20px",padding:"20px",boxShadow:ke?"0 8px 25px rgba(255, 215, 0, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.08)",border:ke?"3px solid #FFD700":"2px solid #E2E8F0",position:"relative",transform:ke?"scale(1.02)":"scale(1)",transition:"all 0.3s ease"},children:[ke&&h.jsx("div",{style:{position:"absolute",top:"-15px",right:"20px",backgroundColor:"#FFD700",color:"#8B4513",padding:"8px 16px",borderRadius:"20px",fontWeight:"bold",fontSize:"14px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",display:"flex",alignItems:"center"},children:"👑 TOP SCORE"}),h.jsx("div",{style:{height:"140px",backgroundColor:lt.bgColor,borderRadius:"16px",marginBottom:"16px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:`2px solid ${lt.color}30`},children:ht!=null&&ht.thumbnail?h.jsx("img",{src:ht.thumbnail,alt:ht.title,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"16px"}}):h.jsx("div",{style:{fontSize:"56px",color:lt.color,opacity:.8},children:je.gameType==="whack-a-mole"?"🔨":je.gameType==="sort-categories-egg"?"🥚":je.gameType==="spinner-wheel"?"🎡":je.gameType==="place-value-showdown"?"🎯":"🎮"})}),h.jsx("h3",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"8px",color:_n.text,textAlign:"center"},children:(ht==null?void 0:ht.title)||"Unknown Game"}),h.jsxs("div",{style:{backgroundColor:lt.bgColor,color:lt.color,borderRadius:"25px",padding:"8px 16px",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"12px",border:`2px solid ${lt.color}40`},children:[h.jsx("span",{style:{marginRight:"6px",fontSize:"16px"},children:lt.emoji}),lt.text]}),h.jsxs("div",{style:{textAlign:"center",marginBottom:"12px"},children:[h.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:lt.color,marginBottom:"4px"},children:je.score}),h.jsx("div",{style:{fontSize:"14px",color:_n.textLight},children:"points"}),ue(je.score,je.gameType,je.gameConfig)]}),h.jsxs("div",{style:{fontSize:"12px",color:_n.textLight,textAlign:"center",marginTop:"8px"},children:["🗓️ ",(tt=(gt=je.createdAt)==null?void 0:gt.toDate)!=null&&tt.call(gt)?je.createdAt.toDate().toLocaleDateString():new Date(je.createdAt).toLocaleDateString()]}),h.jsxs("div",{style:{position:"absolute",top:"12px",left:"12px",backgroundColor:ke?"#FFD700":_n.primary,color:ke?"#8B4513":"white",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",fontSize:"14px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"},children:["#",et+1]})]})};return h.jsxs("div",{style:{marginTop:"24px"},children:[h.jsx("h2",{style:{fontSize:"24px",marginBottom:"16px",color:_n.text},children:"🏆 My High Scores"}),h.jsxs("div",{style:{backgroundColor:"#4299E1",color:"white",borderRadius:"16px",padding:"20px",marginBottom:"24px",textAlign:"center",boxShadow:"0 4px 12px rgba(66, 153, 225, 0.3)"},children:[h.jsx("div",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"8px"},children:Le()}),h.jsx("div",{style:{opacity:.9},children:q.length>0&&`You've achieved ${q.length} high score${q.length>1?"s":""}!`})]}),q.length===0?h.jsxs("div",{style:{backgroundColor:_n.cardBg,borderRadius:"20px",padding:"40px",textAlign:"center",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.05)"},children:[h.jsx("div",{style:{fontSize:"80px",marginBottom:"20px"},children:"🏆"}),h.jsx("h3",{style:{fontSize:"24px",marginBottom:"12px",color:_n.text},children:"Your Trophy Case Awaits!"}),h.jsx("p",{style:{color:_n.textLight,fontSize:"18px",marginBottom:"20px"},children:"Complete games to unlock achievements and build your high score collection!"}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginTop:"24px"},children:[{emoji:"🌟",text:"First Score",desc:"Complete any game"},{emoji:"⭐",text:"Rising Star",desc:"Score 500+ points"},{emoji:"🥇",text:"Champion",desc:"Score 800+ points"},{emoji:"🏆",text:"Legend",desc:"Score 900+ points"}].map((je,et)=>h.jsxs("div",{style:{backgroundColor:"#F7FAFC",borderRadius:"12px",padding:"16px",opacity:.6,textAlign:"center",border:"2px dashed #E2E8F0"},children:[h.jsx("div",{style:{fontSize:"32px",marginBottom:"8px"},children:je.emoji}),h.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px",color:_n.text},children:je.text}),h.jsx("div",{style:{fontSize:"12px",color:_n.textLight},children:je.desc})]},et))})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"16px",marginBottom:"32px"},children:[h.jsxs("div",{style:{backgroundColor:_n.cardBg,padding:"20px",borderRadius:"16px",textAlign:"center",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.05)"},children:[h.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:_n.primary},children:q.length}),h.jsx("div",{style:{color:_n.textLight},children:"Total Achievements"})]}),h.jsxs("div",{style:{backgroundColor:_n.cardBg,padding:"20px",borderRadius:"16px",textAlign:"center",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.05)"},children:[h.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#FFD700"},children:((Ke=q[0])==null?void 0:Ke.score)||0}),h.jsx("div",{style:{color:_n.textLight},children:"Best Score"})]}),h.jsxs("div",{style:{backgroundColor:_n.cardBg,padding:"20px",borderRadius:"16px",textAlign:"center",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.05)"},children:[h.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#48BB78"},children:Math.round(q.reduce((je,et)=>je+(et.score||0),0)/q.length)||0}),h.jsx("div",{style:{color:_n.textLight},children:"Average Score"})]})]}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:q.map((je,et)=>h.jsx(Ge,{score:je,index:et},je.id))}),h.jsxs("div",{style:{backgroundColor:"#F0FFF4",borderRadius:"16px",padding:"20px",marginTop:"32px",textAlign:"center",border:"2px solid #48BB78"},children:[h.jsx("div",{style:{fontSize:"20px",marginBottom:"8px"},children:"🎯"}),h.jsx("div",{style:{color:"#2F855A",fontWeight:"bold"},children:"Keep playing to beat your high scores and unlock new achievements!"})]})]})]})},Ie=()=>te(nt,null,function*(){if(!G){K(!0);try{const Ee=o?i:t==null?void 0:t.uid;if(!Ee){console.log("No student userId found for high scores query"),z([]);return}console.log("Querying high scores for userId:",Ee);const Le=mr(Tn(bt,"highScores"),Bn("userId","==",Ee),f0("score","desc")),Ge=yield Xn(Le);console.log("Found high scores:",Ge.docs.length);const Ke=[];for(const je of Ge.docs){const et=je.data();console.log("Processing high score:",et);const lt={id:je.id,userId:et.userId||Ee,playerName:et.playerName||"Student",score:et.score,configId:et.configId,createdAt:et.createdAt,gameType:et.gameType||"unknown",gameConfig:null};if(et.configId)try{const ht=an(bt,"userGameConfigs",et.configId),ke=yield si(ht);if(ke.exists()){const gt=ke.data();lt.gameConfig=j({id:ke.id,title:gt.title||gt.name,thumbnail:gt.thumbnail||gt.thumbnailUrl,type:gt.type||gt.gameType},gt),console.log("Found game config for score:",lt.gameConfig.title)}else console.log("Game config not found for configId:",et.configId)}catch(ht){console.error("Error fetching game config:",ht)}Ke.push(lt)}console.log("Enhanced high scores loaded:",Ke.length),z(Ke)}catch(Ee){console.error("Error loading enhanced high scores:",Ee),z([])}finally{K(!1)}}}),it=()=>{e("/teacher",{state:{activeTab:"students"}})};return T.useEffect(()=>{U==="highscores"&&!G&&q.length===0&&Ie()},[U]),T.useEffect(()=>{const Ee=new URLSearchParams(window.location.search),Le=Ee.get("emailAccess")==="true",Ge=Ee.get("from")==="email",Ke=Ee.get("pwa")==="true",je=Ee.get("studentEmail"),et=Ee.get("source")==="email",lt=window.location.href,ke=document.referrer.includes("oobCode="),gt=lt.includes("oobCode=");console.log("[StudentDashboard] Email link access detection (EARLY):",{emailAccess:Le,fromEmail:Ge,pwaParam:Ke,studentEmailParam:je,sourceParam:et,hasOobCodeInReferrer:ke,hasOobCodeInUrl:gt,currentUrl:lt}),(Le||Ge&&Ke||Ge&&je||et||ke||gt||sessionStorage.getItem("direct_token_access")==="true")&&(console.log("[StudentDashboard] ✅ EARLY: Email link access detected - setting bypass flag"),v(!0),sessionStorage.setItem("direct_token_access","true"),je&&(sessionStorage.setItem("student_email",je),console.log("[StudentDashboard] ✅ EARLY: Stored student email for Dashboard navigation:",je)))},[]),h.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"32px 16px",backgroundColor:_n.background,minHeight:"100vh"},children:[o&&h.jsx("div",{style:{marginBottom:"20px"},children:h.jsxs("button",{onClick:it,style:{display:"flex",alignItems:"center",padding:"8px 16px",backgroundColor:_n.primary,color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[h.jsx("span",{style:{marginRight:"8px",fontSize:"18px"},children:"←"}),"Back to Teacher Dashboard"]})}),h.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"32px"},children:[h.jsx("div",{style:{marginRight:"16px",fontSize:"40px"},children:"👋"}),h.jsxs("div",{children:[h.jsx("h1",{style:{fontSize:"28px",fontWeight:"bold",marginBottom:"4px",color:_n.text},children:o?`Student: ${(m==null?void 0:m.name)||"Unknown Student"}`:`Hello, ${(x==null?void 0:x.name)||(t==null?void 0:t.displayName)||"Student"}!`}),h.jsx("p",{style:{color:_n.textLight},children:o?`Teacher view of student dashboard${m!=null&&m.grade?` - Grade ${m.grade}`:""}`:""})]})]}),!o&&u&&h.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",padding:"16px 20px",borderRadius:"12px",boxShadow:"0 4px 16px rgba(16, 185, 129, 0.3)",zIndex:1e3,maxWidth:"320px",animation:"slideIn 0.3s ease-out"},children:h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[h.jsx("div",{style:{fontSize:"1.5rem"},children:"📱"}),h.jsxs("div",{style:{flex:1},children:[h.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Install Our App?"}),h.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Get faster access to assignments"})]}),h.jsx("button",{onClick:a,style:{background:"rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"white",padding:"6px 12px",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer",marginRight:"8px"},children:"Install"}),h.jsx("button",{onClick:d,style:{background:"none",border:"none",color:"white",fontSize:"1.2rem",cursor:"pointer",padding:"4px",opacity:.7},children:"×"})]})}),!o&&h.jsx(qZe,{}),B&&!o&&h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:h.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"30px",maxWidth:"500px",width:"100%",textAlign:"center",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)",position:"relative"},children:[h.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",margin:"-30px -30px 20px -30px",padding:"25px 30px",borderRadius:"16px 16px 0 0"},children:[h.jsx("div",{style:{fontSize:"48px",marginBottom:"10px"},children:"📱"}),h.jsx("h2",{style:{margin:0,fontSize:"24px",fontWeight:"bold"},children:"Install LuminateLearn App"})]}),h.jsxs("div",{style:{marginBottom:"25px"},children:[h.jsxs("p",{style:{fontSize:"18px",color:_n.text,marginBottom:"15px",lineHeight:1.6},children:["🚀 ",h.jsx("strong",{children:"Get the best learning experience!"})]}),h.jsx("p",{style:{fontSize:"16px",color:_n.textLight,lineHeight:1.6},children:"Install LuminateLearn as an app for faster access, offline capabilities, and a native app experience!"})]}),h.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"},children:[h.jsx("button",{onClick:ne,style:{backgroundColor:_n.primary,color:"white",border:"none",borderRadius:"12px",padding:"15px 25px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 12px rgba(66, 153, 225, 0.3)",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseOver:Ee=>{Ee.currentTarget.style.backgroundColor="#3182CE",Ee.currentTarget.style.transform="translateY(-1px)"},onMouseOut:Ee=>{Ee.currentTarget.style.backgroundColor=_n.primary,Ee.currentTarget.style.transform="translateY(0)"},children:"📱 Install App"}),h.jsx("button",{onClick:()=>{H(!1);const Ee=new URL(window.location.href);Ee.searchParams.delete("pwa"),window.history.replaceState({},"",Ee.toString())},style:{backgroundColor:"transparent",color:_n.textLight,border:`2px solid ${_n.textLight}`,borderRadius:"12px",padding:"13px 25px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:Ee=>{Ee.currentTarget.style.backgroundColor=_n.textLight,Ee.currentTarget.style.color="white"},onMouseOut:Ee=>{Ee.currentTarget.style.backgroundColor="transparent",Ee.currentTarget.style.color=_n.textLight},children:"Maybe Later"})]}),h.jsxs("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#F0FFF4",borderRadius:"8px",fontSize:"14px",color:"#2F855A"},children:["✨ ",h.jsx("strong",{children:"Benefits:"})," Faster loading, works offline, and feels like a native app!"]})]})}),h.jsxs("div",{style:{display:"flex",gap:"12px",overflowX:"auto",padding:"8px 0"},children:[Me("assignments","My Assignments","📚"),Me("freeplay","Free Play","🎮"),Me("highscores","High Scores","🏆")]}),L?h.jsx(uL,{size:"large"}):h.jsxs(h.Fragment,{children:[U==="assignments"&&Ae(),U==="freeplay"&&Ne(),U==="highscores"&&Re()]}),f&&h.jsxs("div",{style:{position:"fixed",top:"20px",left:"50%",transform:"translateX(-50%)",backgroundColor:"#FFD700",color:"black",padding:"16px 24px",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:2e3,maxWidth:"90%",textAlign:"center",animation:"slideDown 0.3s ease-out",fontFamily:"'Comic Neue', 'Comic Sans MS', 'Trebuchet MS', cursive, sans-serif"},children:[h.jsx("style",{children:`
              @keyframes slideDown {
                from {
                  transform: translateX(-50%) translateY(-20px);
                  opacity: 0;
                }
                to {
                  transform: translateX(-50%) translateY(0);
                  opacity: 1;
                }
              }
            `}),h.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:"bold",marginBottom:"8px"},children:f.title}),f.description&&h.jsx("p",{style:{margin:0,fontSize:"14px",opacity:.9},children:f.description})]})]})},YZe=()=>{const{templateId:t}=Pd(),{currentUser:e}=Dr(),n=Pr(),r=co(),i=gs(),[o,s]=T.useState(null),[a,l]=T.useState(!1),u=(()=>{const b=i.pathname;return b.includes("whack-a-mole")?"whack-a-mole":b.includes("sort-categories-egg")?"sort-categories-egg":b.includes("spinner-wheel")?"spinner-wheel":b.includes("anagram")?"anagram":b.includes("sentence-sense")?"sentence-sense":b.includes("place-value-showdown")?"place-value-showdown":b.includes("word-volley")?"word-volley":null})();T.useEffect(()=>{u&&!t?(l(!0),s(null)):l(!1)},[u,t]),T.useEffect(()=>{e||(r({title:"Authentication Required",description:"Please sign in to access configuration pages.",status:"error",duration:5e3,isClosable:!0}),n("/"))},[e,n,r]),T.useEffect(()=>{!u&&i.pathname!=="/configure"&&(r({title:"Missing Game Type",description:"A game type is required to configure a game.",status:"error",duration:5e3,isClosable:!0}),n("/"))},[u,n,r,i.pathname]),T.useEffect(()=>{s(null)},[i.pathname]);const d=b=>{u&&!t||s(b)};if(!e||i.pathname==="/configure"&&!u)return h.jsx(cu,{h:"100vh",children:h.jsx(Fa,{size:"xl"})});const f=()=>!u||u==="whack-a-mole"?0:u==="sort-categories-egg"?1:u==="spinner-wheel"?2:u==="anagram"?3:u==="sentence-sense"?4:u==="place-value-showdown"?5:u==="word-volley"?6:0,p=b=>{b===0&&n("/configure/whack-a-mole"),b===1&&n("/configure/sort-categories-egg"),b===2&&n("/configure/spinner-wheel"),b===3&&n("/configure/anagram"),b===4&&n("/configure/sentence-sense"),b===5&&n("/configure/place-value-showdown"),b===6&&n("/configure/word-volley")};return h.jsxs(mC,{maxW:"container.xl",py:8,children:[h.jsxs(Et,{mb:8,children:[h.jsx(zr,{mb:6,children:"Game Configuration"}),h.jsx(ww,{index:f(),onChange:p,variant:"enclosed",colorScheme:"blue",children:h.jsxs(Sw,{children:[h.jsx(As,{children:"Whack-a-Mole"}),h.jsx(As,{children:"Sort Categories Egg"}),h.jsx(As,{children:"Spinner Wheel"}),h.jsx(As,{children:"Anagram"}),h.jsx(As,{children:"Sentence Sense"}),h.jsx(As,{children:"Place Value Showdown"}),h.jsx(As,{children:"Pong"})]})})]}),o&&!a&&h.jsxs(bi,{status:"error",mb:6,children:[h.jsx(xi,{}),h.jsx(tT,{children:"Error:"}),h.jsx(bl,{children:o})]}),h.jsx(sRe,{context:{onError:d}})]})};function XZe(t,e="You have unsaved changes. Are you sure you want to leave this page?"){const n=Pr(),r=gs(),[i,o]=T.useState(r.key),[s,a]=T.useState(!1),[l,c]=T.useState(null);return T.useEffect(()=>{if(t){const p=b=>(b.preventDefault(),b.returnValue=e,e);return window.addEventListener("beforeunload",p),()=>window.removeEventListener("beforeunload",p)}},[t,e]),T.useEffect(()=>{r.key!==i&&t&&(a(!0),c({to:-1,isBack:!0}),o(r.key))},[r,i,t]),{showPrompt:s,confirmNavigation:()=>{a(!1),l&&(typeof l.to=="string"?n(l.to):l.isBack?n(-1):n(l.to)),c(null)},cancelNavigation:()=>{a(!1),c(null)},safeNavigate:p=>{t?(a(!0),c({to:p,isBack:!1})):n(p)}}}const QZe=`
  body {
    background-color: #E6F3FF !important;
    min-height: 100vh;
  }
  
  .apple-container {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    max-width: 800px;
    margin: 0 auto;
    background-color: #E6F3FF;
    min-height: 100vh;
    padding: 20px;
  }
  
  .apple-section {
    background-color: white;
    border-radius: 12px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    padding: 20px;
    margin-bottom: 24px;
    border: 1px solid #E2E8F0;
    transition: all 0.2s ease;
  }

  .apple-section:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  }
  
  .apple-input {
    border-radius: 8px !important;
    border-color: #E2E8F0 !important;
    background-color: #F8F9FC !important;
    transition: all 0.2s ease !important;
  }
  
  .apple-input:focus-within {
    border-color: #007AFF !important;
    box-shadow: 0 0 0 1px #007AFF !important;
    background-color: white !important;
  }
  
  .apple-button {
    border-radius: 8px !important;
    font-weight: 500 !important;
    transition: all 0.2s ease !important;
  }
  
  .apple-button-primary {
    background-color: #007AFF !important;
    color: white !important;
  }
  
  .apple-button-primary:hover {
    background-color: #0063CC !important;
    transform: translateY(-1px) !important;
  }
`,ZZe=({field:t,value:e,onChange:n,error:r,saveAttempted:i})=>{var s;const o=i&&t.required&&!e;switch(t.type){case"text":return h.jsx(ti,{value:e||"",onChange:a=>n(a.target.value),placeholder:t.placeholder,isInvalid:o,className:"apple-input"});case"textarea":return h.jsx(ZN,{value:e||"",onChange:a=>n(a.target.value),placeholder:t.placeholder,isInvalid:o,className:"apple-input",rows:3});case"number":return h.jsxs(uX,{value:e||t.defaultValue||0,onChange:a=>n(parseInt(a)||t.defaultValue||0),min:t.min,max:t.max,step:t.step,isInvalid:o,width:t.width||"auto",children:[h.jsx(fX,{className:"apple-input"}),h.jsxs(dX,{children:[h.jsx(mX,{}),h.jsx(pX,{})]})]});case"select":return h.jsx(Ov,{value:e||t.defaultValue||"",onChange:a=>{var c;const l=(c=t.options)==null?void 0:c.find(u=>u.value.toString()===a.target.value);n(l?l.value:a.target.value)},placeholder:t.placeholder,isInvalid:o,className:"apple-input",width:t.width||"auto",children:(s=t.options)==null?void 0:s.map(a=>h.jsx("option",{value:a.value,children:a.label},a.value))});case"switch":return h.jsx(QN,{isChecked:e||!1,onChange:a=>n(a.target.checked),colorScheme:"blue"});case"custom":if(t.component){const a=t.component;return h.jsx(a,{value:e,onChange:n,field:t})}return null;default:return h.jsxs(ft,{children:["Unsupported field type: ",t.type]})}},JZe=({section:t,formData:e,updateField:n,errors:r,saveAttempted:i})=>{var o;if(t.component){const s=t.component;return h.jsxs(dc,{children:[h.jsxs(Pv,{children:[h.jsx(zr,{size:"md",children:t.title}),t.description&&h.jsx(ft,{color:"gray.600",fontSize:"sm",mt:1,children:t.description})]}),h.jsx(uc,{children:h.jsx(s,{formData:e,updateField:n,errors:r,saveAttempted:i})})]})}return h.jsxs(dc,{children:[h.jsxs(Pv,{children:[h.jsx(zr,{size:"md",children:t.title}),t.description&&h.jsx(ft,{color:"gray.600",fontSize:"sm",mt:1,children:t.description})]}),h.jsx(uc,{children:h.jsx(Kt,{spacing:4,children:(o=t.fields)==null?void 0:o.map(s=>h.jsxs(Mr,{isInvalid:!!r[s.name],children:[h.jsx(ar,{children:s.label}),h.jsx(ZZe,{field:s,value:e[s.name],onChange:a=>n(s.name,a),error:r[s.name],saveAttempted:i}),s.helpText&&h.jsx(ft,{fontSize:"sm",color:"gray.600",mt:1,children:s.helpText}),r[s.name]&&h.jsxs(bi,{status:"error",mt:2,children:[h.jsx(xi,{}),h.jsx(bl,{children:r[s.name]})]})]},s.name))})})]})},vm=({schema:t,onSave:e,onCancel:n,initialData:r={},isEditing:i=!1,documentId:o})=>{Pr();const{currentUser:s}=Dr(),a=co(),l=()=>{const M={};return t.sections.forEach(D=>{D.fields&&D.fields.forEach(E=>{E.defaultValue!==void 0&&(M[E.name]=E.defaultValue)})}),j(j({},M),r)},[c,u]=T.useState(l()),[d,f]=T.useState(!1),[p,b]=T.useState(!1),[v,m]=T.useState({}),g=JSON.stringify(c)!==JSON.stringify(r),{safeNavigate:x}=XZe(g);T.useEffect(()=>{const M=document.createElement("style");return M.textContent=QZe,document.head.appendChild(M),()=>{document.head.removeChild(M)}},[]);const w=(M,D)=>{u(E=>se(j({},E),{[M]:D})),v[M]&&m(E=>se(j({},E),{[M]:""}))},S=()=>{const M={};if(t.sections.forEach(D=>{var E;(E=D.fields)==null||E.forEach(_=>{if(_.required&&!c[_.name]&&(M[_.name]=`${_.label} is required`),_.validation){const A=_.validation(c[_.name]);A&&(M[_.name]=A)}})}),t.customValidation){const D=t.customValidation(c);D&&(M.custom=D)}return m(M),Object.keys(M).length===0},P=()=>te(nt,null,function*(){if(b(!0),!S()){a({title:"Validation Error",description:"Please fix the errors below before saving.",status:"error",duration:3e3});return}f(!0);try{const M=t.generateConfig?t.generateConfig(c,s):se(j({},c),{type:t.gameType,userId:s==null?void 0:s.uid,email:s==null?void 0:s.email,createdAt:bo()});if(e)yield e(M);else if(o)yield Os(an(bt,"userGameConfigs",o),M);else{const D=yield yc(Tn(bt,"userGameConfigs"),M);try{const E=yield gL(D.id,M);yield Os(an(bt,"userGameConfigs",D.id),{thumbnail:E})}catch(E){console.error("Error generating thumbnail:",E)}}a({title:"Success",description:"Configuration saved successfully!",status:"success",duration:3e3})}catch(M){console.error("Error saving configuration:",M);const D=M instanceof Error?M.message:String(M),E=D.includes("Unsupported field value: undefined");let _="Failed to save configuration. Please try again.";if(E){const A=D.match(/found in field (\w+)/);_=`Configuration error: The "${A?A[1]:"unknown field"}" field has an invalid value. Please refresh the page and try again.`}a({title:"Save Failed",description:_,status:"error",duration:5e3})}finally{f(!1)}}),I=()=>{n?n():x("/")};return d?h.jsx(cu,{p:8,children:h.jsx(Fa,{size:"xl"})}):h.jsx(Et,{className:"apple-container",p:6,children:h.jsxs(Kt,{spacing:6,align:"stretch",children:[h.jsxs(Et,{children:[h.jsx(zr,{size:"lg",mb:2,children:i?`Edit ${t.title}`:`Create ${t.title}`}),h.jsx(ft,{color:"gray.600",children:t.description})]}),v.custom&&h.jsxs(bi,{status:"error",children:[h.jsx(xi,{}),h.jsx(bl,{children:v.custom})]}),t.sections.map((M,D)=>h.jsx(JZe,{section:M,formData:c,updateField:w,errors:v,saveAttempted:p},D)),h.jsxs(Ln,{spacing:4,justify:"flex-end",children:[h.jsx(pn,{onClick:I,variant:"ghost",className:"apple-button",children:"Cancel"}),h.jsx(pn,{onClick:P,colorScheme:"blue",isLoading:d,loadingText:"Saving...",className:"apple-button apple-button-primary",children:"Save Game Configuration"})]})]})})};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function DW(t){return Object.prototype.toString.call(t)==="[object Object]"}function zo(t){var e,n;return DW(t)===!1?!1:(e=t.constructor,e===void 0?!0:(n=e.prototype,!(DW(n)===!1||n.hasOwnProperty("isPrototypeOf")===!1)))}var one=Symbol.for("immer-nothing"),RW=Symbol.for("immer-draftable"),La=Symbol.for("immer-state");function Jl(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Jv=Object.getPrototypeOf;function im(t){return!!t&&!!t[La]}function om(t){var e;return t?sne(t)||Array.isArray(t)||!!t[RW]||!!((e=t.constructor)!=null&&e[RW])||o2(t)||s2(t):!1}var eJe=Object.prototype.constructor.toString();function sne(t){if(!t||typeof t!="object")return!1;const e=Jv(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===eJe}function rA(t,e){i2(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function i2(t){const e=t[La];return e?e.type_:Array.isArray(t)?1:o2(t)?2:s2(t)?3:0}function xF(t,e){return i2(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function ane(t,e,n){const r=i2(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function tJe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function o2(t){return t instanceof Map}function s2(t){return t instanceof Set}function Zh(t){return t.copy_||t.base_}function bF(t,e){if(o2(t))return new Map(t);if(s2(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=sne(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[La];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[s]})}return Object.create(Jv(t),r)}else{const r=Jv(t);if(r!==null&&n)return j({},t);const i=Object.create(r);return Object.assign(i,t)}}function n5(t,e=!1){return a2(t)||im(t)||!om(t)||(i2(t)>1&&(t.set=t.add=t.clear=t.delete=nJe),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>n5(r,!0))),t}function nJe(){Jl(2)}function a2(t){return Object.isFrozen(t)}var rJe={};function sm(t){const e=rJe[t];return e||Jl(0,t),e}var Gb;function lne(){return Gb}function iJe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function IW(t,e){e&&(sm("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function wF(t){SF(t),t.drafts_.forEach(oJe),t.drafts_=null}function SF(t){t===Gb&&(Gb=t.parent_)}function kW(t){return Gb=iJe(Gb,t)}function oJe(t){const e=t[La];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function FW(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[La].modified_&&(wF(e),Jl(4)),om(t)&&(t=iA(e,t),e.parent_||oA(e,t)),e.patches_&&sm("Patches").generateReplacementPatches_(n[La].base_,t,e.patches_,e.inversePatches_)):t=iA(e,n,[]),wF(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==one?t:void 0}function iA(t,e,n){if(a2(e))return e;const r=e[La];if(!r)return rA(e,(i,o)=>OW(t,r,e,i,o,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return oA(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),rA(o,(a,l)=>OW(t,r,i,a,l,n,s)),oA(t,i,!1),n&&t.patches_&&sm("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function OW(t,e,n,r,i,o,s){if(im(i)){const a=o&&e&&e.type_!==3&&!xF(e.assigned_,r)?o.concat(r):void 0,l=iA(t,i,a);if(ane(n,r,l),im(l))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(om(i)&&!a2(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;iA(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&oA(t,i)}}function oA(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&n5(e,n)}function sJe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:lne(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=r5;n&&(i=[r],o=qb);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}var r5={get(t,e){if(e===La)return t;const n=Zh(t);if(!xF(n,e))return aJe(t,n,e);const r=n[e];return t.finalized_||!om(r)?r:r===VD(t.base_,e)?(WD(t),t.copy_[e]=EF(r,t)):r},has(t,e){return e in Zh(t)},ownKeys(t){return Reflect.ownKeys(Zh(t))},set(t,e,n){const r=cne(Zh(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=VD(Zh(t),e),o=i==null?void 0:i[La];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(tJe(n,i)&&(n!==void 0||xF(t.base_,e)))return!0;WD(t),_F(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return VD(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,WD(t),_F(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Zh(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Jl(11)},getPrototypeOf(t){return Jv(t.base_)},setPrototypeOf(){Jl(12)}},qb={};rA(r5,(t,e)=>{qb[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});qb.deleteProperty=function(t,e){return qb.set.call(this,t,e,void 0)};qb.set=function(t,e,n){return r5.set.call(this,t[0],e,n,t[0])};function VD(t,e){const n=t[La];return(n?Zh(n):t)[e]}function aJe(t,e,n){var i;const r=cne(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function cne(t,e){if(!(e in t))return;let n=Jv(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Jv(n)}}function _F(t){t.modified_||(t.modified_=!0,t.parent_&&_F(t.parent_))}function WD(t){t.copy_||(t.copy_=bF(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var lJe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const o=n;n=e;const s=this;return function(l=o,...c){return s.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&Jl(6),r!==void 0&&typeof r!="function"&&Jl(7);let i;if(om(e)){const o=kW(this),s=EF(e,void 0);let a=!0;try{i=n(s),a=!1}finally{a?wF(o):SF(o)}return IW(o,r),FW(i,o)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===one&&(i=void 0),this.autoFreeze_&&n5(i,!0),r){const o=[],s=[];sm("Patches").generateReplacementPatches_(e,i,o,s),r(o,s)}return i}else Jl(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...a)=>this.produceWithPatches(s,l=>e(l,...a));let r,i;return[this.produce(e,n,(s,a)=>{r=s,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){om(t)||Jl(8),im(t)&&(t=cJe(t));const e=kW(this),n=EF(t,void 0);return n[La].isManual_=!0,SF(e),n}finishDraft(t,e){const n=t&&t[La];(!n||!n.isManual_)&&Jl(9);const{scope_:r}=n;return IW(r,e),FW(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=sm("Patches").applyPatches_;return im(t)?r(t,e):this.produce(t,i=>r(i,e))}};function EF(t,e){const n=o2(t)?sm("MapSet").proxyMap_(t,e):s2(t)?sm("MapSet").proxySet_(t,e):sJe(t,e);return(e?e.scope_:lne()).drafts_.push(n),n}function cJe(t){return im(t)||Jl(10,t),une(t)}function une(t){if(!om(t)||a2(t))return t;const e=t[La];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=bF(t,e.scope_.immer_.useStrictShallowCopy_)}else n=bF(t,!0);return rA(n,(r,i)=>{ane(n,r,une(i))}),e&&(e.finalized_=!1),n}var Ba=new lJe,i5=Ba.produce;Ba.produceWithPatches.bind(Ba);Ba.setAutoFreeze.bind(Ba);Ba.setUseStrictShallowCopy.bind(Ba);Ba.applyPatches.bind(Ba);var NW=Ba.createDraft.bind(Ba),LW=Ba.finishDraft.bind(Ba),uJe={transform(t,e){var{current:n,affinity:r}=t;if(n!=null){var i=ze.transform(n,e,{affinity:r});t.current=i,i==null&&t.unref()}}},dJe={transform(t,e){var{current:n,affinity:r}=t;if(n!=null){var i=or.transform(n,e,{affinity:r});t.current=i,i==null&&t.unref()}}},fJe={transform(t,e){var{current:n,affinity:r}=t;if(n!=null){var i=ct.transform(n,e,{affinity:r});t.current=i,i==null&&t.unref()}}},sA=new WeakMap,aA=new WeakMap,Nx=new WeakMap,dne=new WeakMap,BW=new WeakMap,jW=new WeakMap,UW=new WeakMap,ze={ancestors(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=e,r=ze.levels(t,e);return n?r=r.slice(1):r=r.slice(0,-1),r},common(t,e){for(var n=[],r=0;r<t.length&&r<e.length;r++){var i=t[r],o=e[r];if(i!==o)break;n.push(i)}return n},compare(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return 0},endsAfter(t,e){var n=t.length-1,r=t.slice(0,n),i=e.slice(0,n),o=t[n],s=e[n];return ze.equals(r,i)&&o>s},endsAt(t,e){var n=t.length,r=t.slice(0,n),i=e.slice(0,n);return ze.equals(r,i)},endsBefore(t,e){var n=t.length-1,r=t.slice(0,n),i=e.slice(0,n),o=t[n],s=e[n];return ze.equals(r,i)&&o<s},equals(t,e){return t.length===e.length&&t.every((n,r)=>n===e[r])},hasPrevious(t){return t[t.length-1]>0},isAfter(t,e){return ze.compare(t,e)===1},isAncestor(t,e){return t.length<e.length&&ze.compare(t,e)===0},isBefore(t,e){return ze.compare(t,e)===-1},isChild(t,e){return t.length===e.length+1&&ze.compare(t,e)===0},isCommon(t,e){return t.length<=e.length&&ze.compare(t,e)===0},isDescendant(t,e){return t.length>e.length&&ze.compare(t,e)===0},isParent(t,e){return t.length+1===e.length&&ze.compare(t,e)===0},isPath(t){return Array.isArray(t)&&(t.length===0||typeof t[0]=="number")},isSibling(t,e){if(t.length!==e.length)return!1;var n=t.slice(0,-1),r=e.slice(0,-1),i=t[t.length-1],o=e[e.length-1];return i!==o&&ze.equals(n,r)},levels(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=e,r=[],i=0;i<=t.length;i++)r.push(t.slice(0,i));return n&&r.reverse(),r},next(t){if(t.length===0)throw new Error("Cannot get the next path of a root path [".concat(t,"], because it has no next index."));var e=t[t.length-1];return t.slice(0,-1).concat(e+1)},operationCanTransformPath(t){switch(t.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(t){if(t.length===0)throw new Error("Cannot get the parent path of the root path [".concat(t,"]."));return t.slice(0,-1)},previous(t){if(t.length===0)throw new Error("Cannot get the previous path of a root path [".concat(t,"], because it has no previous index."));var e=t[t.length-1];if(e<=0)throw new Error("Cannot get the previous path of a first child path [".concat(t,"] because it would result in a negative index."));return t.slice(0,-1).concat(e-1)},relative(t,e){if(!ze.isAncestor(e,t)&&!ze.equals(t,e))throw new Error("Cannot get the relative path of [".concat(t,"] inside ancestor [").concat(e,"], because it is not above or equal to the path."));return t.slice(e.length)},transform(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return null;var r=[...t],{affinity:i="forward"}=n;if(t.length===0)return r;switch(e.type){case"insert_node":{var{path:o}=e;(ze.equals(o,r)||ze.endsBefore(o,r)||ze.isAncestor(o,r))&&(r[o.length-1]+=1);break}case"remove_node":{var{path:s}=e;if(ze.equals(s,r)||ze.isAncestor(s,r))return null;ze.endsBefore(s,r)&&(r[s.length-1]-=1);break}case"merge_node":{var{path:a,position:l}=e;ze.equals(a,r)||ze.endsBefore(a,r)?r[a.length-1]-=1:ze.isAncestor(a,r)&&(r[a.length-1]-=1,r[a.length]+=l);break}case"split_node":{var{path:c,position:u}=e;if(ze.equals(c,r)){if(i==="forward")r[r.length-1]+=1;else if(i!=="backward")return null}else ze.endsBefore(c,r)?r[c.length-1]+=1:ze.isAncestor(c,r)&&t[c.length]>=u&&(r[c.length-1]+=1,r[c.length]-=u);break}case"move_node":{var{path:d,newPath:f}=e;if(ze.equals(d,f))return r;if(ze.isAncestor(d,r)||ze.equals(d,r)){var p=f.slice();return ze.endsBefore(d,f)&&d.length<f.length&&(p[d.length-1]-=1),p.concat(r.slice(d.length))}else ze.isSibling(d,f)&&(ze.isAncestor(f,r)||ze.equals(f,r))?ze.endsBefore(d,r)?r[d.length-1]-=1:r[d.length-1]+=1:ze.endsBefore(f,r)||ze.equals(f,r)||ze.isAncestor(f,r)?(ze.endsBefore(d,r)&&(r[d.length-1]-=1),r[f.length-1]+=1):ze.endsBefore(d,r)&&(ze.equals(f,r)&&(r[f.length-1]+=1),r[d.length-1]-=1);break}}return r}};function Kb(t){"@babel/helpers - typeof";return Kb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kb(t)}function hJe(t,e){if(Kb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Kb(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pJe(t){var e=hJe(t,"string");return Kb(e)==="symbol"?e:String(e)}function zs(t,e,n){return e=pJe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function by(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zW(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var mJe=(t,e,n)=>{switch(n.type){case"insert_node":{var{path:r,node:i}=n,o=Vt.parent(t,r),s=r[r.length-1];if(s>o.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(r,"] because the destination is past the end of the node."));if(o.children.splice(s,0,i),e)for(var[a,l]of ct.points(e))e[l]=or.transform(a,n);break}case"insert_text":{var{path:c,offset:u,text:d}=n;if(d.length===0)break;var f=Vt.leaf(t,c),p=f.text.slice(0,u),b=f.text.slice(u);if(f.text=p+d+b,e)for(var[v,m]of ct.points(e))e[m]=or.transform(v,n);break}case"merge_node":{var{path:g}=n,x=Vt.get(t,g),w=ze.previous(g),S=Vt.get(t,w),P=Vt.parent(t,g),I=g[g.length-1];if(Xt.isText(x)&&Xt.isText(S))S.text+=x.text;else if(!Xt.isText(x)&&!Xt.isText(S))S.children.push(...x.children);else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(g,"] to nodes of different interfaces: ").concat(Do.stringify(x)," ").concat(Do.stringify(S)));if(P.children.splice(I,1),e)for(var[M,D]of ct.points(e))e[D]=or.transform(M,n);break}case"move_node":{var{path:E,newPath:_}=n;if(ze.isAncestor(E,_))throw new Error("Cannot move a path [".concat(E,"] to new path [").concat(_,"] because the destination is inside itself."));var A=Vt.get(t,E),R=Vt.parent(t,E),F=E[E.length-1];R.children.splice(F,1);var L=ze.transform(E,n),N=Vt.get(t,ze.parent(L)),U=L[L.length-1];if(N.children.splice(U,0,A),e)for(var[$,B]of ct.points(e))e[B]=or.transform($,n);break}case"remove_node":{var{path:H}=n,q=H[H.length-1],z=Vt.parent(t,H);if(z.children.splice(q,1),e)for(var[G,K]of ct.points(e)){var Z=or.transform(G,n);if(e!=null&&Z!=null)e[K]=Z;else{var ee=void 0,V=void 0;for(var[J,oe]of Vt.texts(t))if(ze.compare(oe,H)===-1)ee=[J,oe];else{V=[J,oe];break}var ne=!1;ee&&V&&(ze.equals(V[1],H)?ne=!ze.hasPrevious(V[1]):ne=ze.common(ee[1],H).length<ze.common(V[1],H).length),ee&&!ne?(G.path=ee[1],G.offset=ee[0].text.length):V?(G.path=V[1],G.offset=0):e=null}}break}case"remove_text":{var{path:pe,offset:ye,text:Ce}=n;if(Ce.length===0)break;var _e=Vt.leaf(t,pe),ce=_e.text.slice(0,ye),Be=_e.text.slice(ye+Ce.length);if(_e.text=ce+Be,e)for(var[de,me]of ct.points(e))e[me]=or.transform(de,n);break}case"set_node":{var{path:ie,properties:ae,newProperties:ge}=n;if(ie.length===0)throw new Error("Cannot set properties on the root node!");var X=Vt.get(t,ie);for(var W in ge){if(W==="children"||W==="text")throw new Error('Cannot set the "'.concat(W,'" property of nodes!'));var ve=ge[W];ve==null?delete X[W]:X[W]=ve}for(var ue in ae)ge.hasOwnProperty(ue)||delete X[ue];break}case"set_selection":{var{newProperties:Me}=n;if(Me==null)e=Me;else{if(e==null){if(!ct.isRange(Me))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(Do.stringify(Me)," when there is no current selection."));e=by({},Me)}for(var Ae in Me){var Ne=Me[Ae];if(Ne==null){if(Ae==="anchor"||Ae==="focus")throw new Error('Cannot remove the "'.concat(Ae,'" selection property'));delete e[Ae]}else e[Ae]=Ne}}break}case"split_node":{var{path:Re,position:Ie,properties:it}=n;if(Re.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(Re,"] because the root node cannot be split."));var Ee=Vt.get(t,Re),Le=Vt.parent(t,Re),Ge=Re[Re.length-1],Ke;if(Xt.isText(Ee)){var je=Ee.text.slice(0,Ie),et=Ee.text.slice(Ie);Ee.text=je,Ke=by(by({},it),{},{text:et})}else{var lt=Ee.children.slice(0,Ie),ht=Ee.children.slice(Ie);Ee.children=lt,Ke=by(by({},it),{},{children:ht})}if(Le.children.splice(Ge+1,0,Ke),e)for(var[ke,gt]of ct.points(e))e[gt]=or.transform(ke,n);break}}return e},gJe={transform(t,e){t.children=NW(t.children);var n=t.selection&&NW(t.selection);try{n=mJe(t,n,e)}finally{t.children=LW(t.children),n?t.selection=im(n)?LW(n):n:t.selection=null}}},vJe={insertNodes(t,e,n){t.insertNodes(e,n)},liftNodes(t,e){t.liftNodes(e)},mergeNodes(t,e){t.mergeNodes(e)},moveNodes(t,e){t.moveNodes(e)},removeNodes(t,e){t.removeNodes(e)},setNodes(t,e,n){t.setNodes(e,n)},splitNodes(t,e){t.splitNodes(e)},unsetNodes(t,e,n){t.unsetNodes(e,n)},unwrapNodes(t,e){t.unwrapNodes(e)},wrapNodes(t,e,n){t.wrapNodes(e,n)}},yJe={collapse(t,e){t.collapse(e)},deselect(t){t.deselect()},move(t,e){t.move(e)},select(t,e){t.select(e)},setPoint(t,e,n){t.setPoint(e,n)},setSelection(t,e){t.setSelection(e)}},fne=(t,e)=>{for(var n in t){var r=t[n],i=e[n];if(zo(r)&&zo(i)){if(!fne(r,i))return!1}else if(Array.isArray(r)&&Array.isArray(i)){if(r.length!==i.length)return!1;for(var o=0;o<r.length;o++)if(r[o]!==i[o])return!1}else if(r!==i)return!1}for(var s in e)if(t[s]===void 0&&e[s]!==void 0)return!1;return!0};function xJe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Cd(t,e){if(t==null)return{};var n=xJe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var bJe=["anchor","focus"];function VW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wJe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VW(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var ct={edges(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=e,{anchor:r,focus:i}=t;return ct.isBackward(t)===n?[r,i]:[i,r]},end(t){var[,e]=ct.edges(t);return e},equals(t,e){return or.equals(t.anchor,e.anchor)&&or.equals(t.focus,e.focus)},surrounds(t,e){var n=ct.intersection(t,e);return n?ct.equals(n,e):!1},includes(t,e){if(ct.isRange(e)){if(ct.includes(t,e.anchor)||ct.includes(t,e.focus))return!0;var[n,r]=ct.edges(t),[i,o]=ct.edges(e);return or.isBefore(n,i)&&or.isAfter(r,o)}var[s,a]=ct.edges(t),l=!1,c=!1;return or.isPoint(e)?(l=or.compare(e,s)>=0,c=or.compare(e,a)<=0):(l=ze.compare(e,s.path)>=0,c=ze.compare(e,a.path)<=0),l&&c},intersection(t,e){var n=Cd(t,bJe),[r,i]=ct.edges(t),[o,s]=ct.edges(e),a=or.isBefore(r,o)?o:r,l=or.isBefore(i,s)?i:s;return or.isBefore(l,a)?null:wJe({anchor:a,focus:l},n)},isBackward(t){var{anchor:e,focus:n}=t;return or.isAfter(e,n)},isCollapsed(t){var{anchor:e,focus:n}=t;return or.equals(e,n)},isExpanded(t){return!ct.isCollapsed(t)},isForward(t){return!ct.isBackward(t)},isRange(t){return zo(t)&&or.isPoint(t.anchor)&&or.isPoint(t.focus)},*points(t){yield[t.anchor,"anchor"],yield[t.focus,"focus"]},start(t){var[e]=ct.edges(t);return e},transform(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return i5(t,r=>{if(r===null)return null;var{affinity:i="inward"}=n,o,s;if(i==="inward"){var a=ct.isCollapsed(r);ct.isForward(r)?(o="forward",s=a?o:"backward"):(o="backward",s=a?o:"forward")}else i==="outward"?ct.isForward(r)?(o="backward",s="forward"):(o="forward",s="backward"):(o=i,s=i);var l=or.transform(r.anchor,e,{affinity:o}),c=or.transform(r.focus,e,{affinity:s});if(!l||!c)return null;r.anchor=l,r.focus=c})}},WW=t=>zo(t)&&Vt.isNodeList(t.children)&&!he.isEditor(t),nn={isAncestor(t){return zo(t)&&Vt.isNodeList(t.children)},isElement:WW,isElementList(t){return Array.isArray(t)&&t.every(e=>nn.isElement(e))},isElementProps(t){return t.children!==void 0},isElementType:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return WW(e)&&e[r]===n},matches(t,e){for(var n in e)if(n!=="children"&&t[n]!==e[n])return!1;return!0}},SJe=["children"],_Je=["text"],$W=new WeakMap,Vt={ancestor(t,e){var n=Vt.get(t,e);if(Xt.isText(n))throw new Error("Cannot get the ancestor node at path [".concat(e,"] because it refers to a text node instead: ").concat(Do.stringify(n)));return n},ancestors(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var r of ze.ancestors(e,n)){var i=Vt.ancestor(t,r),o=[i,r];yield o}}()},child(t,e){if(Xt.isText(t))throw new Error("Cannot get the child of a text node: ".concat(Do.stringify(t)));var n=t.children[e];if(n==null)throw new Error("Cannot get child at index `".concat(e,"` in node: ").concat(Do.stringify(t)));return n},children(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var{reverse:r=!1}=n,i=Vt.ancestor(t,e),{children:o}=i,s=r?o.length-1:0;r?s>=0:s<o.length;){var a=Vt.child(i,s),l=e.concat(s);yield[a,l],s=r?s-1:s+1}}()},common(t,e,n){var r=ze.common(e,n),i=Vt.get(t,r);return[i,r]},descendant(t,e){var n=Vt.get(t,e);if(he.isEditor(n))throw new Error("Cannot get the descendant node at path [".concat(e,"] because it refers to the root editor node instead: ").concat(Do.stringify(n)));return n},descendants(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[n,r]of Vt.nodes(t,e))r.length!==0&&(yield[n,r])}()},elements(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[n,r]of Vt.nodes(t,e))nn.isElement(n)&&(yield[n,r])}()},extractProps(t){if(nn.isAncestor(t)){var e=Cd(t,SJe);return e}else{var e=Cd(t,_Je);return e}},first(t,e){for(var n=e.slice(),r=Vt.get(t,n);r&&!(Xt.isText(r)||r.children.length===0);)r=r.children[0],n.push(0);return[r,n]},fragment(t,e){if(Xt.isText(t))throw new Error("Cannot get a fragment starting from a root text node: ".concat(Do.stringify(t)));var n=i5({children:t.children},r=>{var[i,o]=ct.edges(e),s=Vt.nodes(r,{reverse:!0,pass:f=>{var[,p]=f;return!ct.includes(e,p)}});for(var[,a]of s){if(!ct.includes(e,a)){var l=Vt.parent(r,a),c=a[a.length-1];l.children.splice(c,1)}if(ze.equals(a,o.path)){var u=Vt.leaf(r,a);u.text=u.text.slice(0,o.offset)}if(ze.equals(a,i.path)){var d=Vt.leaf(r,a);d.text=d.text.slice(i.offset)}}he.isEditor(r)&&(r.selection=null)});return n.children},get(t,e){var n=Vt.getIf(t,e);if(n===void 0)throw new Error("Cannot find a descendant at path [".concat(e,"] in node: ").concat(Do.stringify(t)));return n},getIf(t,e){for(var n=t,r=0;r<e.length;r++){var i=e[r];if(Xt.isText(n)||!n.children[i])return;n=n.children[i]}return n},has(t,e){for(var n=t,r=0;r<e.length;r++){var i=e[r];if(Xt.isText(n)||!n.children[i])return!1;n=n.children[i]}return!0},isNode(t){return Xt.isText(t)||nn.isElement(t)||he.isEditor(t)},isNodeList(t){if(!Array.isArray(t))return!1;var e=$W.get(t);if(e!==void 0)return e;var n=t.every(r=>Vt.isNode(r));return $W.set(t,n),n},last(t,e){for(var n=e.slice(),r=Vt.get(t,n);r&&!(Xt.isText(r)||r.children.length===0);){var i=r.children.length-1;r=r.children[i],n.push(i)}return[r,n]},leaf(t,e){var n=Vt.get(t,e);if(!Xt.isText(n))throw new Error("Cannot get the leaf node at path [".concat(e,"] because it refers to a non-leaf node: ").concat(Do.stringify(n)));return n},levels(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var r of ze.levels(e,n)){var i=Vt.get(t,r);yield[i,r]}}()},matches(t,e){return nn.isElement(t)&&nn.isElementProps(e)&&nn.matches(t,e)||Xt.isText(t)&&Xt.isTextProps(e)&&Xt.matches(t,e)},nodes(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var{pass:n,reverse:r=!1}=e,{from:i=[],to:o}=e,s=new Set,a=[],l=t;!(o&&(r?ze.isBefore(a,o):ze.isAfter(a,o)));){if(s.has(l)||(yield[l,a]),!s.has(l)&&!Xt.isText(l)&&l.children.length!==0&&(n==null||n([l,a])===!1)){s.add(l);var c=r?l.children.length-1:0;ze.isAncestor(a,i)&&(c=i[a.length]),a=a.concat(c),l=Vt.get(t,a);continue}if(a.length===0)break;if(!r){var u=ze.next(a);if(Vt.has(t,u)){a=u,l=Vt.get(t,a);continue}}if(r&&a[a.length-1]!==0){var d=ze.previous(a);a=d,l=Vt.get(t,a);continue}a=ze.parent(a),l=Vt.get(t,a),s.add(l)}}()},parent(t,e){var n=ze.parent(e),r=Vt.get(t,n);if(Xt.isText(r))throw new Error("Cannot get the parent of path [".concat(e,"] because it does not exist in the root."));return r},string(t){return Xt.isText(t)?t.text:t.children.map(Vt.string).join("")},texts(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[n,r]of Vt.nodes(t,e))Xt.isText(n)&&(yield[n,r])}()}};function HW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Si(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HW(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Pf={isNodeOperation(t){return Pf.isOperation(t)&&t.type.endsWith("_node")},isOperation(t){if(!zo(t))return!1;switch(t.type){case"insert_node":return ze.isPath(t.path)&&Vt.isNode(t.node);case"insert_text":return typeof t.offset=="number"&&typeof t.text=="string"&&ze.isPath(t.path);case"merge_node":return typeof t.position=="number"&&ze.isPath(t.path)&&zo(t.properties);case"move_node":return ze.isPath(t.path)&&ze.isPath(t.newPath);case"remove_node":return ze.isPath(t.path)&&Vt.isNode(t.node);case"remove_text":return typeof t.offset=="number"&&typeof t.text=="string"&&ze.isPath(t.path);case"set_node":return ze.isPath(t.path)&&zo(t.properties)&&zo(t.newProperties);case"set_selection":return t.properties===null&&ct.isRange(t.newProperties)||t.newProperties===null&&ct.isRange(t.properties)||zo(t.properties)&&zo(t.newProperties);case"split_node":return ze.isPath(t.path)&&typeof t.position=="number"&&zo(t.properties);default:return!1}},isOperationList(t){return Array.isArray(t)&&t.every(e=>Pf.isOperation(e))},isSelectionOperation(t){return Pf.isOperation(t)&&t.type.endsWith("_selection")},isTextOperation(t){return Pf.isOperation(t)&&t.type.endsWith("_text")},inverse(t){switch(t.type){case"insert_node":return Si(Si({},t),{},{type:"remove_node"});case"insert_text":return Si(Si({},t),{},{type:"remove_text"});case"merge_node":return Si(Si({},t),{},{type:"split_node",path:ze.previous(t.path)});case"move_node":{var{newPath:e,path:n}=t;if(ze.equals(e,n))return t;if(ze.isSibling(n,e))return Si(Si({},t),{},{path:e,newPath:n});var r=ze.transform(n,t),i=ze.transform(ze.next(n),t);return Si(Si({},t),{},{path:r,newPath:i})}case"remove_node":return Si(Si({},t),{},{type:"insert_node"});case"remove_text":return Si(Si({},t),{},{type:"insert_text"});case"set_node":{var{properties:o,newProperties:s}=t;return Si(Si({},t),{},{properties:s,newProperties:o})}case"set_selection":{var{properties:a,newProperties:l}=t;return a==null?Si(Si({},t),{},{properties:l,newProperties:null}):l==null?Si(Si({},t),{},{properties:null,newProperties:a}):Si(Si({},t),{},{properties:l,newProperties:a})}case"split_node":return Si(Si({},t),{},{type:"merge_node",path:ze.next(t.path)})}}},GW=new WeakMap,EJe=t=>{var e=GW.get(t);if(e!==void 0)return e;if(!zo(t))return!1;var n=typeof t.addMark=="function"&&typeof t.apply=="function"&&typeof t.deleteFragment=="function"&&typeof t.insertBreak=="function"&&typeof t.insertSoftBreak=="function"&&typeof t.insertFragment=="function"&&typeof t.insertNode=="function"&&typeof t.insertText=="function"&&typeof t.isElementReadOnly=="function"&&typeof t.isInline=="function"&&typeof t.isSelectable=="function"&&typeof t.isVoid=="function"&&typeof t.normalizeNode=="function"&&typeof t.onChange=="function"&&typeof t.removeMark=="function"&&typeof t.getDirtyPaths=="function"&&(t.marks===null||zo(t.marks))&&(t.selection===null||ct.isRange(t.selection))&&Vt.isNodeList(t.children)&&Pf.isOperationList(t.operations);return GW.set(t,n),n},he={above(t,e){return t.above(e)},addMark(t,e,n){t.addMark(e,n)},after(t,e,n){return t.after(e,n)},before(t,e,n){return t.before(e,n)},deleteBackward(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:n="character"}=e;t.deleteBackward(n)},deleteForward(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:n="character"}=e;t.deleteForward(n)},deleteFragment(t,e){t.deleteFragment(e)},edges(t,e){return t.edges(e)},elementReadOnly(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.elementReadOnly(e)},end(t,e){return t.end(e)},first(t,e){return t.first(e)},fragment(t,e){return t.fragment(e)},hasBlocks(t,e){return t.hasBlocks(e)},hasInlines(t,e){return t.hasInlines(e)},hasPath(t,e){return t.hasPath(e)},hasTexts(t,e){return t.hasTexts(e)},insertBreak(t){t.insertBreak()},insertFragment(t,e,n){t.insertFragment(e,n)},insertNode(t,e){t.insertNode(e)},insertSoftBreak(t){t.insertSoftBreak()},insertText(t,e){t.insertText(e)},isBlock(t,e){return t.isBlock(e)},isEdge(t,e,n){return t.isEdge(e,n)},isEditor(t){return EJe(t)},isElementReadOnly(t,e){return t.isElementReadOnly(e)},isEmpty(t,e){return t.isEmpty(e)},isEnd(t,e,n){return t.isEnd(e,n)},isInline(t,e){return t.isInline(e)},isNormalizing(t){return t.isNormalizing()},isSelectable(t,e){return t.isSelectable(e)},isStart(t,e,n){return t.isStart(e,n)},isVoid(t,e){return t.isVoid(e)},last(t,e){return t.last(e)},leaf(t,e,n){return t.leaf(e,n)},levels(t,e){return t.levels(e)},marks(t){return t.getMarks()},next(t,e){return t.next(e)},node(t,e,n){return t.node(e,n)},nodes(t,e){return t.nodes(e)},normalize(t,e){t.normalize(e)},parent(t,e,n){return t.parent(e,n)},path(t,e,n){return t.path(e,n)},pathRef(t,e,n){return t.pathRef(e,n)},pathRefs(t){return t.pathRefs()},point(t,e,n){return t.point(e,n)},pointRef(t,e,n){return t.pointRef(e,n)},pointRefs(t){return t.pointRefs()},positions(t,e){return t.positions(e)},previous(t,e){return t.previous(e)},range(t,e,n){return t.range(e,n)},rangeRef(t,e,n){return t.rangeRef(e,n)},rangeRefs(t){return t.rangeRefs()},removeMark(t,e){t.removeMark(e)},setNormalizing(t,e){t.setNormalizing(e)},start(t,e){return t.start(e)},string(t,e,n){return t.string(e,n)},unhangRange(t,e,n){return t.unhangRange(e,n)},void(t,e){return t.void(e)},withoutNormalizing(t,e){t.withoutNormalizing(e)},shouldMergeNodesRemovePrevNode:(t,e,n)=>t.shouldMergeNodesRemovePrevNode(e,n)},CJe={isSpan(t){return Array.isArray(t)&&t.length===2&&t.every(ze.isPath)}};function qW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qW(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var or={compare(t,e){var n=ze.compare(t.path,e.path);return n===0?t.offset<e.offset?-1:t.offset>e.offset?1:0:n},isAfter(t,e){return or.compare(t,e)===1},isBefore(t,e){return or.compare(t,e)===-1},equals(t,e){return t.offset===e.offset&&ze.equals(t.path,e.path)},isPoint(t){return zo(t)&&typeof t.offset=="number"&&ze.isPath(t.path)},transform(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return i5(t,r=>{if(r===null)return null;var{affinity:i="forward"}=n,{path:o,offset:s}=r;switch(e.type){case"insert_node":case"move_node":{r.path=ze.transform(o,e,n);break}case"insert_text":{ze.equals(e.path,o)&&(e.offset<s||e.offset===s&&i==="forward")&&(r.offset+=e.text.length);break}case"merge_node":{ze.equals(e.path,o)&&(r.offset+=e.position),r.path=ze.transform(o,e,n);break}case"remove_text":{ze.equals(e.path,o)&&e.offset<=s&&(r.offset-=Math.min(s-e.offset,e.text.length));break}case"remove_node":{if(ze.equals(e.path,o)||ze.isAncestor(e.path,o))return null;r.path=ze.transform(o,e,n);break}case"split_node":{if(ze.equals(e.path,o)){if(e.position===s&&i==null)return null;(e.position<s||e.position===s&&i==="forward")&&(r.offset-=e.position,r.path=ze.transform(o,e,KW(KW({},n),{},{affinity:"forward"})))}else r.path=ze.transform(o,e,n);break}}})}},YW=void 0,Do={setScrubber(t){YW=t},stringify(t){return JSON.stringify(t,YW)}},AJe=["text"],TJe=["anchor","focus","merge"];function XW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ku(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XW(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Xt={equals(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:r=!1}=n;function i(o){var s=Cd(o,AJe);return s}return fne(r?i(t):t,r?i(e):e)},isText(t){return zo(t)&&typeof t.text=="string"},isTextList(t){return Array.isArray(t)&&t.every(e=>Xt.isText(e))},isTextProps(t){return t.text!==void 0},matches(t,e){for(var n in e)if(n!=="text"&&(!t.hasOwnProperty(n)||t[n]!==e[n]))return!1;return!0},decorations(t,e){var n=[ku({},t)];for(var r of e){var{anchor:i,focus:o,merge:s}=r,a=Cd(r,TJe),[l,c]=ct.edges(r),u=[],d=0,f=l.offset,p=c.offset,b=s!=null?s:Object.assign;for(var v of n){var{length:m}=v.text,g=d;if(d+=m,f<=g&&d<=p){b(v,a),u.push(v);continue}if(f!==p&&(f===d||p===g)||f>d||p<g||p===g&&g!==0){u.push(v);continue}var x=v,w=void 0,S=void 0;if(p<d){var P=p-g;S=ku(ku({},x),{},{text:x.text.slice(P)}),x=ku(ku({},x),{},{text:x.text.slice(0,P)})}if(f>g){var I=f-g;w=ku(ku({},x),{},{text:x.text.slice(0,I)}),x=ku(ku({},x),{},{text:x.text.slice(I)})}b(x,a),w&&u.push(w),u.push(x),S&&u.push(S)}n=u}return n}},o5=t=>t.selection?t.selection:t.children.length>0?he.end(t,[]):[0],E0=(t,e)=>{var[n]=he.node(t,e);return r=>r===n},s5=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=!n,i=n?kJe(e):e,o=Vn.None,s=Vn.None,a=0,l=null,c=null;for(var u of i){var d=u.codePointAt(0);if(!d)break;var f=HJe(u,d);if([o,s]=r?[s,f]:[f,o],Vg(o,Vn.ZWJ)&&Vg(s,Vn.ExtPict)&&(r?l=QW(e.substring(0,a)):l=QW(e.substring(0,e.length-a)),!l)||Vg(o,Vn.RI)&&Vg(s,Vn.RI)&&(c!==null?c=!c:r?c=!0:c=XJe(e.substring(0,e.length-a)),!c)||o!==Vn.None&&s!==Vn.None&&qJe(o,s))break;a+=u.length}return a||1},MJe=/\s/,PJe=/[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,DJe=/['\u2018\u2019]/,RJe=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=0,i=!1;e.length>0;){var o=s5(e,n),[s,a]=a5(e,o,n);if(IJe(s,a,n))i=!0,r+=o;else if(!i)r+=o;else break;e=a}return r},a5=(t,e,n)=>{if(n){var r=t.length-e;return[t.slice(r,t.length),t.slice(0,r)]}return[t.slice(0,e),t.slice(e)]},IJe=function t(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(MJe.test(e))return!1;if(DJe.test(e)){var i=s5(n,r),[o,s]=a5(n,i,r);if(t(o,s,r))return!0}return!PJe.test(e)},kJe=function*(e){for(var n=e.length-1,r=0;r<e.length;r++){var i=e.charAt(n-r);if(OJe(i.charCodeAt(0))){var o=e.charAt(n-r-1);if(FJe(o.charCodeAt(0))){yield o+i,r++;continue}}yield i}},FJe=t=>t>=55296&&t<=56319,OJe=t=>t>=56320&&t<=57343,Vn;(function(t){t[t.None=0]="None",t[t.Extend=1]="Extend",t[t.ZWJ=2]="ZWJ",t[t.RI=4]="RI",t[t.Prepend=8]="Prepend",t[t.SpacingMark=16]="SpacingMark",t[t.L=32]="L",t[t.V=64]="V",t[t.T=128]="T",t[t.LV=256]="LV",t[t.LVT=512]="LVT",t[t.ExtPict=1024]="ExtPict",t[t.Any=2048]="Any"})(Vn||(Vn={}));var NJe=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,LJe=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,BJe=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,jJe=/^[\u1100-\u115F\uA960-\uA97C]$/,UJe=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,zJe=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,VJe=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,WJe=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,$Je=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,HJe=(t,e)=>{var n=Vn.Any;return t.search(NJe)!==-1&&(n|=Vn.Extend),e===8205&&(n|=Vn.ZWJ),e>=127462&&e<=127487&&(n|=Vn.RI),t.search(LJe)!==-1&&(n|=Vn.Prepend),t.search(BJe)!==-1&&(n|=Vn.SpacingMark),t.search(jJe)!==-1&&(n|=Vn.L),t.search(UJe)!==-1&&(n|=Vn.V),t.search(zJe)!==-1&&(n|=Vn.T),t.search(VJe)!==-1&&(n|=Vn.LV),t.search(WJe)!==-1&&(n|=Vn.LVT),t.search($Je)!==-1&&(n|=Vn.ExtPict),n};function Vg(t,e){return(t&e)!==0}var GJe=[[Vn.L,Vn.L|Vn.V|Vn.LV|Vn.LVT],[Vn.LV|Vn.V,Vn.V|Vn.T],[Vn.LVT|Vn.T,Vn.T],[Vn.Any,Vn.Extend|Vn.ZWJ],[Vn.Any,Vn.SpacingMark],[Vn.Prepend,Vn.Any],[Vn.ZWJ,Vn.ExtPict],[Vn.RI,Vn.RI]];function qJe(t,e){return GJe.findIndex(n=>Vg(t,n[0])&&Vg(e,n[1]))===-1}var KJe=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,QW=t=>t.search(KJe)!==-1,YJe=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,XJe=t=>{var e=t.match(YJe);if(e===null)return!1;var n=e[0].length/2;return n%2===1},QJe={delete(t,e){t.delete(e)},insertFragment(t,e,n){t.insertFragment(e,n)},insertText(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};he.withoutNormalizing(t,()=>{var{voids:r=!1}=n,{at:i=o5(t)}=n;if(ze.isPath(i)&&(i=he.range(t,i)),ct.isRange(i))if(ct.isCollapsed(i))i=i.anchor;else{var o=ct.end(i);if(!r&&he.void(t,{at:o}))return;var s=ct.start(i),a=he.pointRef(t,s),l=he.pointRef(t,o);Rt.delete(t,{at:i,voids:r});var c=a.unref(),u=l.unref();i=c||u,Rt.setSelection(t,{anchor:i,focus:i})}if(!(!r&&he.void(t,{at:i})||he.elementReadOnly(t,{at:i}))){var{path:d,offset:f}=i;e.length>0&&t.apply({type:"insert_text",path:d,offset:f,text:e})}})}};function ZW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function d_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZW(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Rt=d_(d_(d_(d_({},gJe),vJe),yJe),QJe),xE=new WeakMap,ZJe=t=>xE.get(t)||!1,JJe=(t,e,n)=>{var r=xE.get(t)||!1;xE.set(t,!0);try{e(),n()}finally{xE.set(t,r)}};function hne(t,e,n){var r=sA.get(t)||[],i=aA.get(t)||new Set,o,s,a=d=>{if(d){var f=d.join(",");s.has(f)||(s.add(f),o.push(d))}};if(n){o=[],s=new Set;for(var l of r){var c=n(l);a(c)}}else o=r,s=i;for(var u of e)a(u);sA.set(t,o),aA.set(t,s)}var eet=(t,e)=>{for(var n of he.pathRefs(t))uJe.transform(n,e);for(var r of he.pointRefs(t))dJe.transform(r,e);for(var i of he.rangeRefs(t))fJe.transform(i,e);if(!ZJe(t)){var o=ze.operationCanTransformPath(e)?s=>ze.transform(s,e):void 0;hne(t,t.getDirtyPaths(e),o)}Rt.transform(t,e),t.operations.push(e),he.normalize(t,{operation:e}),e.type==="set_selection"&&(t.marks=null),Nx.get(t)||(Nx.set(t,!0),Promise.resolve().then(()=>{Nx.set(t,!1),t.onChange({operation:e}),t.operations=[]}))},tet=(t,e)=>{switch(e.type){case"insert_text":case"remove_text":case"set_node":{var{path:n}=e;return ze.levels(n)}case"insert_node":{var{node:r,path:i}=e,o=ze.levels(i),s=Xt.isText(r)?[]:Array.from(Vt.nodes(r),_=>{var[,A]=_;return i.concat(A)});return[...o,...s]}case"merge_node":{var{path:a}=e,l=ze.ancestors(a),c=ze.previous(a);return[...l,c]}case"move_node":{var{path:u,newPath:d}=e;if(ze.equals(u,d))return[];var f=[],p=[];for(var b of ze.ancestors(u)){var v=ze.transform(b,e);f.push(v)}for(var m of ze.ancestors(d)){var g=ze.transform(m,e);p.push(g)}var x=p[p.length-1],w=d[d.length-1],S=x.concat(w);return[...f,...p,S]}case"remove_node":{var{path:P}=e,I=ze.ancestors(P);return[...I]}case"split_node":{var{path:M}=e,D=ze.levels(M),E=ze.next(M);return[...D,E]}default:return[]}},net=t=>{var{selection:e}=t;return e?Vt.fragment(t,e):[]},ret=(t,e)=>{var[n,r]=e;if(!Xt.isText(n)){if(nn.isElement(n)&&n.children.length===0){var i={text:""};Rt.insertNodes(t,i,{at:r.concat(0),voids:!0});return}for(var o=he.isEditor(n)?!1:nn.isElement(n)&&(t.isInline(n)||n.children.length===0||Xt.isText(n.children[0])||t.isInline(n.children[0])),s=0,a=0;a<n.children.length;a++,s++){var l=Vt.get(t,r);if(!Xt.isText(l)){var c=l.children[s],u=l.children[s-1],d=a===n.children.length-1,f=Xt.isText(c)||nn.isElement(c)&&t.isInline(c);if(f!==o)f?Rt.removeNodes(t,{at:r.concat(s),voids:!0}):Rt.unwrapNodes(t,{at:r.concat(s),voids:!0}),s--;else if(nn.isElement(c)){if(t.isInline(c)){if(u==null||!Xt.isText(u)){var p={text:""};Rt.insertNodes(t,p,{at:r.concat(s),voids:!0}),s++}else if(d){var b={text:""};Rt.insertNodes(t,b,{at:r.concat(s+1),voids:!0}),s++}}}else{if(!Xt.isText(c)&&!("children"in c)){var v=c;v.children=[]}u!=null&&Xt.isText(u)&&(Xt.equals(c,u,{loose:!0})?(Rt.mergeNodes(t,{at:r.concat(s),voids:!0}),s--):u.text===""?(Rt.removeNodes(t,{at:r.concat(s-1),voids:!0}),s--):c.text===""&&(Rt.removeNodes(t,{at:r.concat(s),voids:!0}),s--))}}}}},iet=(t,e)=>{var{iteration:n,initialDirtyPathsLength:r}=e,i=r*42;if(n>i)throw new Error("Could not completely normalize the editor after ".concat(i," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},oet=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:r=!1,mode:i="lowest",at:o=e.selection,match:s}=n;if(o){var a=he.path(e,o),l=i==="lowest";for(var[c,u]of he.levels(e,{at:a,voids:r,match:s,reverse:l}))if(!Xt.isText(c)){if(ct.isRange(o)){if(ze.isAncestor(u,o.anchor.path)&&ze.isAncestor(u,o.focus.path))return[c,u]}else if(!ze.equals(a,u))return[c,u]}}};function JW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function e$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JW(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var set=(t,e,n)=>{var{selection:r}=t;if(r){var i=(d,f)=>{if(!Xt.isText(d))return!1;var[p,b]=he.parent(t,f);return!t.isVoid(p)||t.markableVoid(p)},o=ct.isExpanded(r),s=!1;if(!o){var[a,l]=he.node(t,r);if(a&&i(a,l)){var[c]=he.parent(t,l);s=c&&t.markableVoid(c)}}if(o||s)Rt.setNodes(t,{[e]:n},{match:i,split:!0,voids:!0});else{var u=e$(e$({},he.marks(t)||{}),{},{[e]:n});t.marks=u,Nx.get(t)||t.onChange()}}};function t$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function n$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t$(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var aet=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=he.point(e,n,{edge:"end"}),o=he.end(e,[]),s={anchor:i,focus:o},{distance:a=1}=r,l=0,c;for(var u of he.positions(e,n$(n$({},r),{},{at:s}))){if(l>a)break;l!==0&&(c=u),l++}return c};function r$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function i$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r$(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var cet=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=he.start(e,[]),o=he.point(e,n,{edge:"start"}),s={anchor:i,focus:o},{distance:a=1}=r,l=0,c;for(var u of he.positions(e,i$(i$({},r),{},{at:s,reverse:!0}))){if(l>a)break;l!==0&&(c=u),l++}return c},uet=(t,e)=>{var{selection:n}=t;n&&ct.isCollapsed(n)&&Rt.delete(t,{unit:e,reverse:!0})},det=(t,e)=>{var{selection:n}=t;n&&ct.isCollapsed(n)&&Rt.delete(t,{unit:e})},fet=function(e){var{direction:n="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:r}=e;r&&ct.isExpanded(r)&&Rt.delete(e,{reverse:n==="backward"})},het=(t,e)=>[he.start(t,e),he.end(t,e)];function o$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function s$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o$(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var pet=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return he.above(e,s$(s$({},n),{},{match:r=>nn.isElement(r)&&he.isElementReadOnly(e,r)}))},met=(t,e)=>he.point(t,e,{edge:"end"}),get=(t,e)=>{var n=he.path(t,e,{edge:"start"});return he.node(t,n)},vet=(t,e)=>{var n=he.range(t,e);return Vt.fragment(t,n)};function a$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function l$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a$(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var yet=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return he.above(e,l$(l$({},n),{},{match:r=>nn.isElement(r)&&he.isVoid(e,r)}))},xet=(t,e)=>e.children.some(n=>nn.isElement(n)&&he.isBlock(t,n)),bet=(t,e)=>e.children.some(n=>Xt.isText(n)||he.isInline(t,n)),wet=(t,e)=>Vt.has(t,e),_et=(t,e)=>e.children.every(n=>Xt.isText(n)),Eet=t=>{Rt.splitNodes(t,{always:!0})},Cet=(t,e,n)=>{Rt.insertNodes(t,e,n)},Aet=t=>{Rt.splitNodes(t,{always:!0})};function c$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tet(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c$(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Met=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:i,marks:o}=e;if(i){if(o){var s=Tet({text:n},o);Rt.insertNodes(e,s,{at:r.at,voids:r.voids})}else Rt.insertText(e,n,r);e.marks=null}},Pet=(t,e)=>!t.isInline(e),Det=(t,e,n)=>he.isStart(t,e,n)||he.isEnd(t,e,n),Ret=(t,e)=>{var{children:n}=e,[r]=n;return n.length===0||n.length===1&&Xt.isText(r)&&r.text===""&&!t.isVoid(e)},Iet=(t,e,n)=>{var r=he.end(t,n);return or.equals(e,r)},ket=t=>{var e=dne.get(t);return e===void 0?!0:e},Fet=(t,e,n)=>{if(e.offset!==0)return!1;var r=he.start(t,n);return or.equals(e,r)},Oet=(t,e)=>{var n=he.path(t,e,{edge:"end"});return he.node(t,n)},Net=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=he.path(e,n,r),o=Vt.leaf(e,i);return[o,i]};function Let(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:n=t.selection,reverse:r=!1,voids:i=!1}=e,{match:o}=e;if(o==null&&(o=()=>!0),!!n){var s=[],a=he.path(t,n);for(var[l,c]of Vt.levels(t,a))if(o(l,c)&&(s.push([l,c]),!i&&nn.isElement(l)&&he.isVoid(t,l)))break;r&&s.reverse(),yield*aM(s)}}()}var Bet=["text"],jet=["text"],Uet=function(e){var{marks:n,selection:r}=e;if(!r)return null;var{anchor:i,focus:o}=r;if(n)return n;if(ct.isExpanded(r)){var s=ct.isBackward(r);s&&([o,i]=[i,o]);var a=he.isEnd(e,i,i.path);if(a){var l=he.after(e,i);l&&(i=l)}var[c]=he.nodes(e,{match:Xt.isText,at:{anchor:i,focus:o}});if(c){var[u]=c,d=Cd(u,Bet);return d}else return{}}var{path:f}=i,[p]=he.leaf(e,f);if(i.offset===0){var b=he.previous(e,{at:f,match:Xt.isText}),v=he.above(e,{match:P=>nn.isElement(P)&&he.isVoid(e,P)&&e.markableVoid(P)});if(!v){var m=he.above(e,{match:P=>nn.isElement(P)&&he.isBlock(e,P)});if(b&&m){var[g,x]=b,[,w]=m;ze.isAncestor(w,x)&&(p=g)}}}var S=Cd(p,jet);return S},zet=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:i=!1}=n,{match:o,at:s=e.selection}=n;if(s){var a=he.after(e,s,{voids:i});if(a){var[,l]=he.last(e,[]),c=[a.path,l];if(ze.isPath(s)&&s.length===0)throw new Error("Cannot get the next node from the root node!");if(o==null)if(ze.isPath(s)){var[u]=he.parent(e,s);o=f=>u.children.includes(f)}else o=()=>!0;var[d]=he.nodes(e,{at:c,match:o,mode:r,voids:i});return d}}},Vet=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=he.path(e,n,r),o=Vt.get(e,i);return[o,i]};function Wet(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:n=t.selection,mode:r="all",universal:i=!1,reverse:o=!1,voids:s=!1,pass:a,ignoreNonSelectable:l=!1}=e,{match:c}=e;if(c||(c=()=>!0),!!n){var u,d;if(CJe.isSpan(n))u=n[0],d=n[1];else{var f=he.path(t,n,{edge:"start"}),p=he.path(t,n,{edge:"end"});u=o?p:f,d=o?f:p}var b=Vt.nodes(t,{reverse:o,from:u,to:d,pass:P=>{var[I,M]=P;return a&&a([I,M])?!0:nn.isElement(I)?!!(!s&&(he.isVoid(t,I)||he.isElementReadOnly(t,I))||l&&!he.isSelectable(t,I)):!1}}),v=[],m;for(var[g,x]of b)if(!(l&&nn.isElement(g)&&!he.isSelectable(t,g))){var w=m&&ze.compare(x,m[1])===0;if(!(r==="highest"&&w)){if(!c(g,x)){if(i&&!w&&Xt.isText(g))return;continue}if(r==="lowest"&&w){m=[g,x];continue}var S=r==="lowest"?m:[g,x];S&&(i?v.push(S):yield S),m=[g,x]}}r==="lowest"&&m&&(i?v.push(m):yield m),i&&(yield*aM(v))}}()}var $et=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:r=!1,operation:i}=n,o=u=>sA.get(u)||[],s=u=>aA.get(u)||new Set,a=u=>{var d=o(u).pop(),f=d.join(",");return s(u).delete(f),d};if(he.isNormalizing(e)){if(r){var l=Array.from(Vt.nodes(e),u=>{var[,d]=u;return d}),c=new Set(l.map(u=>u.join(",")));sA.set(e,l),aA.set(e,c)}o(e).length!==0&&he.withoutNormalizing(e,()=>{for(var u of o(e))if(Vt.has(e,u)){var d=he.node(e,u),[f,p]=d;nn.isElement(f)&&f.children.length===0&&e.normalizeNode(d,{operation:i})}for(var b=o(e),v=b.length,m=0;b.length!==0;){if(!e.shouldNormalize({dirtyPaths:b,iteration:m,initialDirtyPathsLength:v,operation:i}))return;var g=a(e);if(Vt.has(e,g)){var x=he.node(e,g);e.normalizeNode(x,{operation:i})}m++,b=o(e)}})}},Het=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=he.path(e,n,r),o=ze.parent(i),s=he.node(e,o);return s},Get=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:i="forward"}=r,o={current:n,affinity:i,unref(){var{current:a}=o,l=he.pathRefs(e);return l.delete(o),o.current=null,a}},s=he.pathRefs(e);return s.add(o),o},qet=t=>{var e=BW.get(t);return e||(e=new Set,BW.set(t,e)),e},Ket=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:i,edge:o}=r;if(ze.isPath(n)){if(o==="start"){var[,s]=Vt.first(e,n);n=s}else if(o==="end"){var[,a]=Vt.last(e,n);n=a}}return ct.isRange(n)&&(o==="start"?n=ct.start(n):o==="end"?n=ct.end(n):n=ze.common(n.anchor.path,n.focus.path)),or.isPoint(n)&&(n=n.path),i!=null&&(n=n.slice(0,i)),n},Yet=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:i="forward"}=r,o={current:n,affinity:i,unref(){var{current:a}=o,l=he.pointRefs(e);return l.delete(o),o.current=null,a}},s=he.pointRefs(e);return s.add(o),o},Xet=t=>{var e=jW.get(t);return e||(e=new Set,jW.set(t,e)),e},Qet=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:i="start"}=r;if(ze.isPath(n)){var o;if(i==="end"){var[,s]=Vt.last(e,n);o=s}else{var[,a]=Vt.first(e,n);o=a}var l=Vt.get(e,o);if(!Xt.isText(l))throw new Error("Cannot get the ".concat(i," point in the node at path [").concat(n,"] because it has no ").concat(i," text node."));return{path:o,offset:i==="end"?l.text.length:0}}if(ct.isRange(n)){var[c,u]=ct.edges(n);return i==="start"?c:u}return n};function Zet(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:n=t.selection,unit:r="offset",reverse:i=!1,voids:o=!1,ignoreNonSelectable:s=!1}=e;if(!n)return;var a=he.range(t,n),[l,c]=ct.edges(a),u=i?c:l,d=!1,f="",p=0,b=0,v=0;for(var[m,g]of he.nodes(t,{at:n,reverse:i,voids:o,ignoreNonSelectable:s})){if(nn.isElement(m)){if(!o&&(t.isVoid(m)||t.isElementReadOnly(m))){yield he.start(t,g);continue}if(t.isInline(m))continue;if(he.hasInlines(t,m)){var x=ze.isAncestor(g,c.path)?c:he.end(t,g),w=ze.isAncestor(g,l.path)?l:he.start(t,g);f=he.string(t,{anchor:w,focus:x},{voids:o}),d=!0}}if(Xt.isText(m)){var S=ze.equals(g,u.path);for(S?(b=i?u.offset:m.text.length-u.offset,v=u.offset):(b=m.text.length,v=i?b:0),(S||d||r==="offset")&&(yield{path:g,offset:v},d=!1);;){if(p===0){if(f==="")break;p=P(f,r,i),f=a5(f,p,i)[1]}if(v=i?v-p:v+p,b=b-p,b<0){p=-b;break}p=0,yield{path:g,offset:v}}}}function P(I,M,D){return M==="character"?s5(I,D):M==="word"?RJe(I,D):M==="line"||M==="block"?I.length:1}}()}var Jet=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:i=!1}=n,{match:o,at:s=e.selection}=n;if(s){var a=he.before(e,s,{voids:i});if(a){var[,l]=he.first(e,[]),c=[a.path,l];if(ze.isPath(s)&&s.length===0)throw new Error("Cannot get the previous node from the root node!");if(o==null)if(ze.isPath(s)){var[u]=he.parent(e,s);o=f=>u.children.includes(f)}else o=()=>!0;var[d]=he.nodes(e,{reverse:!0,at:c,match:o,mode:r,voids:i});return d}}},ett=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:i="forward"}=r,o={current:n,affinity:i,unref(){var{current:a}=o,l=he.rangeRefs(e);return l.delete(o),o.current=null,a}},s=he.rangeRefs(e);return s.add(o),o},ttt=t=>{var e=UW.get(t);return e||(e=new Set,UW.set(t,e)),e},ntt=(t,e,n)=>{if(ct.isRange(e)&&!n)return e;var r=he.start(t,e),i=he.end(t,n||e);return{anchor:r,focus:i}};function u$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rtt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u$(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var itt=(t,e)=>{var{selection:n}=t;if(n){var r=(u,d)=>{if(!Xt.isText(u))return!1;var[f,p]=he.parent(t,d);return!t.isVoid(f)||t.markableVoid(f)},i=ct.isExpanded(n),o=!1;if(!i){var[s,a]=he.node(t,n);if(s&&r(s,a)){var[l]=he.parent(t,a);o=l&&t.markableVoid(l)}}if(i||o)Rt.unsetNodes(t,e,{match:r,split:!0,voids:!0});else{var c=rtt({},he.marks(t)||{});delete c[e],t.marks=c,Nx.get(t)||t.onChange()}}},ott=(t,e)=>{dne.set(t,e)},stt=(t,e)=>he.point(t,e,{edge:"start"}),att=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:i=!1}=r,o=he.range(e,n),[s,a]=ct.edges(o),l="";for(var[c,u]of he.nodes(e,{at:o,match:Xt.isText,voids:i})){var d=c.text;ze.equals(u,a.path)&&(d=d.slice(0,a.offset)),ze.equals(u,s.path)&&(d=d.slice(s.offset)),l+=d}return l},ltt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:i=!1}=r,[o,s]=ct.edges(n);if(o.offset!==0||s.offset!==0||ct.isCollapsed(n)||ze.hasPrevious(s.path))return n;var a=he.above(e,{at:s,match:b=>nn.isElement(b)&&he.isBlock(e,b),voids:i}),l=a?a[1]:[],c=he.start(e,o),u={anchor:c,focus:s},d=!0;for(var[f,p]of he.nodes(e,{at:u,match:Xt.isText,reverse:!0,voids:i})){if(d){d=!1;continue}if(f.text!==""||ze.isBefore(p,l)){s={path:p,offset:f.text.length};break}}return{anchor:o,focus:s}},ctt=(t,e)=>{var n=he.isNormalizing(t);he.setNormalizing(t,!1);try{e()}finally{he.setNormalizing(t,n)}he.normalize(t)},utt=(t,e,n)=>{var[r,i]=e;return nn.isElement(r)&&he.isEmpty(t,r)||Xt.isText(r)&&r.text===""&&i[i.length-1]!==0},dtt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};he.withoutNormalizing(e,()=>{var r,i,{reverse:o=!1,unit:s="character",distance:a=1,voids:l=!1}=n,{at:c=e.selection,hanging:u=!1}=n;if(c){var d=!1;if(ct.isRange(c)&&ct.isCollapsed(c)&&(d=!0,c=c.anchor),or.isPoint(c)){var f=he.void(e,{at:c,mode:"highest"});if(!l&&f){var[,p]=f;c=p}else{var b={unit:s,distance:a},v=o?he.before(e,c,b)||he.start(e,[]):he.after(e,c,b)||he.end(e,[]);c={anchor:c,focus:v},u=!0}}if(ze.isPath(c)){Rt.removeNodes(e,{at:c,voids:l});return}if(!ct.isCollapsed(c)){if(!u){var[,m]=ct.edges(c),g=he.end(e,[]);or.equals(m,g)||(c=he.unhangRange(e,c,{voids:l}))}var[x,w]=ct.edges(c),S=he.above(e,{match:ce=>nn.isElement(ce)&&he.isBlock(e,ce),at:x,voids:l}),P=he.above(e,{match:ce=>nn.isElement(ce)&&he.isBlock(e,ce),at:w,voids:l}),I=S&&P&&!ze.equals(S[1],P[1]),M=ze.equals(x.path,w.path),D=l?null:(r=he.void(e,{at:x,mode:"highest"}))!==null&&r!==void 0?r:he.elementReadOnly(e,{at:x,mode:"highest"}),E=l?null:(i=he.void(e,{at:w,mode:"highest"}))!==null&&i!==void 0?i:he.elementReadOnly(e,{at:w,mode:"highest"});if(D){var _=he.before(e,x);_&&S&&ze.isAncestor(S[1],_.path)&&(x=_)}if(E){var A=he.after(e,w);A&&P&&ze.isAncestor(P[1],A.path)&&(w=A)}var R=[],F;for(var L of he.nodes(e,{at:c,voids:l})){var[N,U]=L;F&&ze.compare(U,F)===0||(!l&&nn.isElement(N)&&(he.isVoid(e,N)||he.isElementReadOnly(e,N))||!ze.isCommon(U,x.path)&&!ze.isCommon(U,w.path))&&(R.push(L),F=U)}var $=Array.from(R,ce=>{var[,Be]=ce;return he.pathRef(e,Be)}),B=he.pointRef(e,x),H=he.pointRef(e,w),q="";if(!M&&!D){var z=B.current,[G]=he.leaf(e,z),{path:K}=z,{offset:Z}=x,ee=G.text.slice(Z);ee.length>0&&(e.apply({type:"remove_text",path:K,offset:Z,text:ee}),q=ee)}if($.reverse().map(ce=>ce.unref()).filter(ce=>ce!==null).forEach(ce=>Rt.removeNodes(e,{at:ce,voids:l})),!E){var V=H.current,[J]=he.leaf(e,V),{path:oe}=V,ne=M?x.offset:0,pe=J.text.slice(ne,w.offset);pe.length>0&&(e.apply({type:"remove_text",path:oe,offset:ne,text:pe}),q=pe)}!M&&I&&H.current&&B.current&&Rt.mergeNodes(e,{at:H.current,hanging:!0,voids:l}),d&&o&&s==="character"&&q.length>1&&q.match(/[\u0E00-\u0E7F]+/)&&Rt.insertText(e,q.slice(0,q.length-a));var ye=B.unref(),Ce=H.unref(),_e=o?ye||Ce:Ce||ye;n.at==null&&_e&&Rt.select(e,_e)}}})},ftt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};he.withoutNormalizing(e,()=>{var{hanging:i=!1,voids:o=!1}=r,{at:s=o5(e),batchDirty:a=!0}=r;if(n.length){if(ct.isRange(s))if(i||(s=he.unhangRange(e,s,{voids:o})),ct.isCollapsed(s))s=s.anchor;else{var[,l]=ct.edges(s);if(!o&&he.void(e,{at:l}))return;var c=he.pointRef(e,l);Rt.delete(e,{at:s}),s=c.unref()}else ze.isPath(s)&&(s=he.start(e,s));if(!(!o&&he.void(e,{at:s}))){var u=he.above(e,{at:s,match:ee=>nn.isElement(ee)&&he.isInline(e,ee),mode:"highest",voids:o});if(u){var[,d]=u;if(he.isEnd(e,s,d)){var f=he.after(e,d);s=f}else if(he.isStart(e,s,d)){var p=he.before(e,d);s=p}}var b=he.above(e,{match:ee=>nn.isElement(ee)&&he.isBlock(e,ee),at:s,voids:o}),[,v]=b,m=he.isStart(e,s,v),g=he.isEnd(e,s,v),x=m&&g,w=!m||m&&g,S=!g,[,P]=Vt.first({children:n},[]),[,I]=Vt.last({children:n},[]),M=[],D=ee=>{var[V,J]=ee,oe=J.length===0;return oe?!1:x?!0:!(w&&ze.isAncestor(J,P)&&nn.isElement(V)&&!e.isVoid(V)&&!e.isInline(V)||S&&ze.isAncestor(J,I)&&nn.isElement(V)&&!e.isVoid(V)&&!e.isInline(V))};for(var E of Vt.nodes({children:n},{pass:D}))D(E)&&M.push(E);var _=[],A=[],R=[],F=!0,L=!1;for(var[N]of M)nn.isElement(N)&&!e.isInline(N)?(F=!1,L=!0,A.push(N)):F?_.push(N):R.push(N);var[U]=he.nodes(e,{at:s,match:ee=>Xt.isText(ee)||he.isInline(e,ee),mode:"highest",voids:o}),[,$]=U,B=he.isStart(e,s,$),H=he.isEnd(e,s,$),q=he.pathRef(e,g&&!R.length?ze.next(v):v),z=he.pathRef(e,H?ze.next($):$);Rt.splitNodes(e,{at:s,match:ee=>L?nn.isElement(ee)&&he.isBlock(e,ee):Xt.isText(ee)||he.isInline(e,ee),mode:L?"lowest":"highest",always:L&&(!m||_.length>0)&&(!g||R.length>0),voids:o});var G=he.pathRef(e,!B||B&&H?ze.next($):$);if(Rt.insertNodes(e,_,{at:G.current,match:ee=>Xt.isText(ee)||he.isInline(e,ee),mode:"highest",voids:o,batchDirty:a}),x&&!_.length&&A.length&&!R.length&&Rt.delete(e,{at:v,voids:o}),Rt.insertNodes(e,A,{at:q.current,match:ee=>nn.isElement(ee)&&he.isBlock(e,ee),mode:"lowest",voids:o,batchDirty:a}),Rt.insertNodes(e,R,{at:z.current,match:ee=>Xt.isText(ee)||he.isInline(e,ee),mode:"highest",voids:o,batchDirty:a}),!r.at){var K;if(R.length>0&&z.current?K=ze.previous(z.current):A.length>0&&q.current?K=ze.previous(q.current):G.current&&(K=ze.previous(G.current)),K){var Z=he.end(e,K);Rt.select(e,Z)}}G.unref(),q.unref(),z.unref()}}})},htt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:r="anchor"}=n,{selection:i}=e;if(i){if(r==="anchor")Rt.select(e,i.anchor);else if(r==="focus")Rt.select(e,i.focus);else if(r==="start"){var[o]=ct.edges(i);Rt.select(e,o)}else if(r==="end"){var[,s]=ct.edges(i);Rt.select(e,s)}}else return},ptt=t=>{var{selection:e}=t;e&&t.apply({type:"set_selection",properties:e,newProperties:null})},mtt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:r}=e,{distance:i=1,unit:o="character",reverse:s=!1}=n,{edge:a=null}=n;if(r){a==="start"&&(a=ct.isBackward(r)?"focus":"anchor"),a==="end"&&(a=ct.isBackward(r)?"anchor":"focus");var{anchor:l,focus:c}=r,u={distance:i,unit:o,ignoreNonSelectable:!0},d={};if(a==null||a==="anchor"){var f=s?he.before(e,l,u):he.after(e,l,u);f&&(d.anchor=f)}if(a==null||a==="focus"){var p=s?he.before(e,c,u):he.after(e,c,u);p&&(d.focus=p)}Rt.setSelection(e,d)}},gtt=(t,e)=>{var{selection:n}=t;if(e=he.range(t,e),n){Rt.setSelection(t,e);return}if(!ct.isRange(e))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(Do.stringify(e)));t.apply({type:"set_selection",properties:n,newProperties:e})};function d$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function f$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d$(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var vtt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:i}=e,{edge:o="both"}=r;if(i){o==="start"&&(o=ct.isBackward(i)?"focus":"anchor"),o==="end"&&(o=ct.isBackward(i)?"anchor":"focus");var{anchor:s,focus:a}=i,l=o==="anchor"?s:a;Rt.setSelection(e,{[o==="anchor"?"anchor":"focus"]:f$(f$({},l),n)})}},ytt=(t,e)=>{var{selection:n}=t,r={},i={};if(n){for(var o in e)(o==="anchor"&&e.anchor!=null&&!or.equals(e.anchor,n.anchor)||o==="focus"&&e.focus!=null&&!or.equals(e.focus,n.focus)||o!=="anchor"&&o!=="focus"&&e[o]!==n[o])&&(r[o]=n[o],i[o]=e[o]);Object.keys(r).length>0&&t.apply({type:"set_selection",properties:r,newProperties:i})}},xtt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};he.withoutNormalizing(e,()=>{var{hanging:i=!1,voids:o=!1,mode:s="lowest",batchDirty:a=!0}=r,{at:l,match:c,select:u}=r;if(Vt.isNode(n)&&(n=[n]),n.length!==0){var[d]=n;if(l||(l=o5(e),u!==!1&&(u=!0)),u==null&&(u=!1),ct.isRange(l))if(i||(l=he.unhangRange(e,l,{voids:o})),ct.isCollapsed(l))l=l.anchor;else{var[,f]=ct.edges(l),p=he.pointRef(e,f);Rt.delete(e,{at:l}),l=p.unref()}if(or.isPoint(l)){c==null&&(Xt.isText(d)?c=_=>Xt.isText(_):e.isInline(d)?c=_=>Xt.isText(_)||he.isInline(e,_):c=_=>nn.isElement(_)&&he.isBlock(e,_));var[b]=he.nodes(e,{at:l.path,match:c,mode:s,voids:o});if(b){var[,v]=b,m=he.pathRef(e,v),g=he.isEnd(e,l,v);Rt.splitNodes(e,{at:l,match:c,mode:s,voids:o});var x=m.unref();l=g?ze.next(x):x}else return}var w=ze.parent(l),S=l[l.length-1];if(!(!o&&he.void(e,{at:w}))){if(a){var P=[],I=ze.levels(w);JJe(e,()=>{var _=function(){var F=w.concat(S);S++;var L={type:"insert_node",path:F,node:A};e.apply(L),l=ze.next(l),P.push(L),Xt.isText(A)?I.push(F):I.push(...Array.from(Vt.nodes(A),N=>{var[,U]=N;return F.concat(U)}))};for(var A of n)_()},()=>{hne(e,I,_=>{var A=_;for(var R of P)if(ze.operationCanTransformPath(R)&&(A=ze.transform(A,R),!A))return null;return A})})}else for(var M of n){var D=w.concat(S);S++,e.apply({type:"insert_node",path:D,node:M}),l=ze.next(l)}if(l=ze.previous(l),u){var E=he.end(e,l);E&&Rt.select(e,E)}}}})},btt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};he.withoutNormalizing(e,()=>{var{at:r=e.selection,mode:i="lowest",voids:o=!1}=n,{match:s}=n;if(s==null&&(s=ze.isPath(r)?E0(e,r):S=>nn.isElement(S)&&he.isBlock(e,S)),!!r){var a=he.nodes(e,{at:r,match:s,mode:i,voids:o}),l=Array.from(a,S=>{var[,P]=S;return he.pathRef(e,P)});for(var c of l){var u=c.unref();if(u.length<2)throw new Error("Cannot lift node at a path [".concat(u,"] because it has a depth of less than `2`."));var d=he.node(e,ze.parent(u)),[f,p]=d,b=u[u.length-1],{length:v}=f.children;if(v===1){var m=ze.next(p);Rt.moveNodes(e,{at:u,to:m,voids:o}),Rt.removeNodes(e,{at:p,voids:o})}else if(b===0)Rt.moveNodes(e,{at:u,to:p,voids:o});else if(b===v-1){var g=ze.next(p);Rt.moveNodes(e,{at:u,to:g,voids:o})}else{var x=ze.next(u),w=ze.next(p);Rt.splitNodes(e,{at:x,voids:o}),Rt.moveNodes(e,{at:u,to:w,voids:o})}}}})},wtt=["text"],Stt=["children"],pne=(t,e)=>{if(nn.isElement(e)){var n=e;return he.isVoid(t,e)?!0:n.children.length===1?pne(t,n.children[0]):!1}else return!he.isEditor(e)},_tt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};he.withoutNormalizing(e,()=>{var{match:r,at:i=e.selection}=n,{hanging:o=!1,voids:s=!1,mode:a="lowest"}=n;if(i){if(r==null)if(ze.isPath(i)){var[l]=he.parent(e,i);r=_=>l.children.includes(_)}else r=_=>nn.isElement(_)&&he.isBlock(e,_);if(!o&&ct.isRange(i)&&(i=he.unhangRange(e,i,{voids:s})),ct.isRange(i))if(ct.isCollapsed(i))i=i.anchor;else{var[,c]=ct.edges(i),u=he.pointRef(e,c);Rt.delete(e,{at:i}),i=u.unref(),n.at==null&&Rt.select(e,i)}var[d]=he.nodes(e,{at:i,match:r,voids:s,mode:a}),f=he.previous(e,{at:i,match:r,voids:s,mode:a});if(!(!d||!f)){var[p,b]=d,[v,m]=f;if(!(b.length===0||m.length===0)){var g=ze.next(m),x=ze.common(b,m),w=ze.isSibling(b,m),S=Array.from(he.levels(e,{at:b}),_=>{var[A]=_;return A}).slice(x.length).slice(0,-1),P=he.above(e,{at:b,mode:"highest",match:_=>S.includes(_)&&pne(e,_)}),I=P&&he.pathRef(e,P[1]),M,D;if(Xt.isText(p)&&Xt.isText(v)){var E=Cd(p,wtt);D=v.text.length,M=E}else if(nn.isElement(p)&&nn.isElement(v)){var E=Cd(p,Stt);D=v.children.length,M=E}else throw new Error("Cannot merge the node at path [".concat(b,"] with the previous sibling because it is not the same kind: ").concat(Do.stringify(p)," ").concat(Do.stringify(v)));w||Rt.moveNodes(e,{at:b,to:g,voids:s}),I&&Rt.removeNodes(e,{at:I.current,voids:s}),he.shouldMergeNodesRemovePrevNode(e,f,d)?Rt.removeNodes(e,{at:m,voids:s}):e.apply({type:"merge_node",path:g,position:D,properties:M}),I&&I.unref()}}}})},Ett=(t,e)=>{he.withoutNormalizing(t,()=>{var{to:n,at:r=t.selection,mode:i="lowest",voids:o=!1}=e,{match:s}=e;if(r){s==null&&(s=ze.isPath(r)?E0(t,r):p=>nn.isElement(p)&&he.isBlock(t,p));var a=he.pathRef(t,n),l=he.nodes(t,{at:r,match:s,mode:i,voids:o}),c=Array.from(l,p=>{var[,b]=p;return he.pathRef(t,b)});for(var u of c){var d=u.unref(),f=a.current;d.length!==0&&t.apply({type:"move_node",path:d,newPath:f}),a.current&&ze.isSibling(f,d)&&ze.isAfter(f,d)&&(a.current=ze.next(a.current))}a.unref()}})},Ctt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};he.withoutNormalizing(e,()=>{var{hanging:r=!1,voids:i=!1,mode:o="lowest"}=n,{at:s=e.selection,match:a}=n;if(s){a==null&&(a=ze.isPath(s)?E0(e,s):p=>nn.isElement(p)&&he.isBlock(e,p)),!r&&ct.isRange(s)&&(s=he.unhangRange(e,s,{voids:i}));var l=he.nodes(e,{at:s,match:a,mode:o,voids:i}),c=Array.from(l,p=>{var[,b]=p;return he.pathRef(e,b)});for(var u of c){var d=u.unref();if(d){var[f]=he.node(e,d);e.apply({type:"remove_node",path:d,node:f})}}}})},Att=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};he.withoutNormalizing(e,()=>{var{match:i,at:o=e.selection,compare:s,merge:a}=r,{hanging:l=!1,mode:c="lowest",split:u=!1,voids:d=!1}=r;if(o){if(i==null&&(i=ze.isPath(o)?E0(e,o):D=>nn.isElement(D)&&he.isBlock(e,D)),!l&&ct.isRange(o)&&(o=he.unhangRange(e,o,{voids:d})),u&&ct.isRange(o)){if(ct.isCollapsed(o)&&he.leaf(e,o.anchor)[0].text.length>0)return;var f=he.rangeRef(e,o,{affinity:"inward"}),[p,b]=ct.edges(o),v=c==="lowest"?"lowest":"highest",m=he.isEnd(e,b,b.path);Rt.splitNodes(e,{at:b,match:i,mode:v,voids:d,always:!m});var g=he.isStart(e,p,p.path);Rt.splitNodes(e,{at:p,match:i,mode:v,voids:d,always:!g}),o=f.unref(),r.at==null&&Rt.select(e,o)}s||(s=(D,E)=>D!==E);for(var[x,w]of he.nodes(e,{at:o,match:i,mode:c,voids:d})){var S={},P={};if(w.length!==0){var I=!1;for(var M in n)M==="children"||M==="text"||s(n[M],x[M])&&(I=!0,x.hasOwnProperty(M)&&(S[M]=x[M]),a?n[M]!=null&&(P[M]=a(x[M],n[M])):n[M]!=null&&(P[M]=n[M]));I&&e.apply({type:"set_node",path:w,properties:S,newProperties:P})}}}})},Ttt=(t,e)=>{if(ct.isCollapsed(e))return e.anchor;var[,n]=ct.edges(e),r=he.pointRef(t,n);return Rt.delete(t,{at:e}),r.unref()},Mtt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};he.withoutNormalizing(e,()=>{var{mode:r="lowest",voids:i=!1}=n,{match:o,at:s=e.selection,height:a=0,always:l=!1}=n;if(o==null&&(o=H=>nn.isElement(H)&&he.isBlock(e,H)),ct.isRange(s)&&(s=Ttt(e,s)),ze.isPath(s)){var c=s,u=he.point(e,c),[d]=he.parent(e,c);o=H=>H===d,a=u.path.length-c.length+1,s=u,l=!0}if(s){var f=he.pointRef(e,s,{affinity:"backward"}),p;try{var[b]=he.nodes(e,{at:s,match:o,mode:r,voids:i});if(!b)return;var v=he.void(e,{at:s,mode:"highest"}),m=0;if(!i&&v){var[g,x]=v;if(nn.isElement(g)&&e.isInline(g)){var w=he.after(e,x);if(!w){var S={text:""},P=ze.next(x);Rt.insertNodes(e,S,{at:P,voids:i}),w=he.point(e,P)}s=w,l=!0}var I=s.path.length-x.length;a=I+1,l=!0}p=he.pointRef(e,s);var M=s.path.length-a,[,D]=b,E=s.path.slice(0,M),_=a===0?s.offset:s.path[M]+m;for(var[A,R]of he.levels(e,{at:E,reverse:!0,voids:i})){var F=!1;if(R.length<D.length||R.length===0||!i&&nn.isElement(A)&&he.isVoid(e,A))break;var L=f.current,N=he.isEnd(e,L,R);if(l||!f||!he.isEdge(e,L,R)){F=!0;var U=Vt.extractProps(A);e.apply({type:"split_node",path:R,position:_,properties:U})}_=R[R.length-1]+(F||N?1:0)}if(n.at==null){var $=p.current||he.end(e,[]);Rt.select(e,$)}}finally{var B;f.unref(),(B=p)===null||B===void 0||B.unref()}}})},Ptt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(n)||(n=[n]);var i={};for(var o of n)i[o]=null;Rt.setNodes(e,i,r)},Dtt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};he.withoutNormalizing(e,()=>{var{mode:r="lowest",split:i=!1,voids:o=!1}=n,{at:s=e.selection,match:a}=n;if(s){a==null&&(a=ze.isPath(s)?E0(e,s):p=>nn.isElement(p)&&he.isBlock(e,p)),ze.isPath(s)&&(s=he.range(e,s));var l=ct.isRange(s)?he.rangeRef(e,s):null,c=he.nodes(e,{at:s,match:a,mode:r,voids:o}),u=Array.from(c,p=>{var[,b]=p;return he.pathRef(e,b)}).reverse(),d=function(){var b=f.unref(),[v]=he.node(e,b),m=he.range(e,b);i&&l&&(m=ct.intersection(l.current,m)),Rt.liftNodes(e,{at:m,match:g=>nn.isAncestor(v)&&v.children.includes(g),voids:o})};for(var f of u)d();l&&l.unref()}})};function h$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function p$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h$(Object(n),!0).forEach(function(r){zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Rtt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};he.withoutNormalizing(e,()=>{var{mode:i="lowest",split:o=!1,voids:s=!1}=r,{match:a,at:l=e.selection}=r;if(l){if(a==null&&(ze.isPath(l)?a=E0(e,l):e.isInline(n)?a=m=>nn.isElement(m)&&he.isInline(e,m)||Xt.isText(m):a=m=>nn.isElement(m)&&he.isBlock(e,m)),o&&ct.isRange(l)){var[c,u]=ct.edges(l),d=he.rangeRef(e,l,{affinity:"inward"});Rt.splitNodes(e,{at:u,match:a,voids:s}),Rt.splitNodes(e,{at:c,match:a,voids:s}),l=d.unref(),r.at==null&&Rt.select(e,l)}var f=Array.from(he.nodes(e,{at:l,match:e.isInline(n)?m=>nn.isElement(m)&&he.isBlock(e,m):m=>he.isEditor(m),mode:"lowest",voids:s})),p=function(){var g=ct.isRange(l)?ct.intersection(l,he.range(e,v)):l;if(!g)return 0;var x=Array.from(he.nodes(e,{at:g,match:a,mode:i,voids:s}));if(x.length>0){var[w]=x,S=x[x.length-1],[,P]=w,[,I]=S;if(P.length===0&&I.length===0)return 0;var M=ze.equals(P,I)?ze.parent(P):ze.common(P,I),D=he.range(e,P,I),E=he.node(e,M),[_]=E,A=M.length+1,R=ze.next(I.slice(0,A)),F=p$(p$({},n),{},{children:[]});Rt.insertNodes(e,F,{at:R,voids:s}),Rt.moveNodes(e,{at:D,match:L=>nn.isAncestor(_)&&_.children.includes(L),to:R.concat(0),voids:s})}},b;for(var[,v]of f)b=p()}})},Itt=()=>{var t={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return eet(t,...r)},addMark:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return set(t,...r)},deleteBackward:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return uet(t,...r)},deleteForward:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return det(t,...r)},deleteFragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return fet(t,...r)},getFragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return net(t,...r)},insertBreak:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Eet(t,...r)},insertSoftBreak:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Aet(t,...r)},insertFragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ftt(t,...r)},insertNode:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Cet(t,...r)},insertText:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Met(t,...r)},normalizeNode:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ret(t,...r)},removeMark:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return itt(t,...r)},getDirtyPaths:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return tet(t,...r)},shouldNormalize:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return iet(t,...r)},above:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return oet(t,...r)},after:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return aet(t,...r)},before:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return cet(t,...r)},collapse:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return htt(t,...r)},delete:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return dtt(t,...r)},deselect:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ptt(t,...r)},edges:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return het(t,...r)},elementReadOnly:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return pet(t,...r)},end:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return met(t,...r)},first:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return get(t,...r)},fragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return vet(t,...r)},getMarks:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Uet(t,...r)},hasBlocks:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return xet(t,...r)},hasInlines:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return bet(t,...r)},hasPath:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return wet(t,...r)},hasTexts:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _et(t,...r)},insertNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return xtt(t,...r)},isBlock:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Pet(t,...r)},isEdge:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Det(t,...r)},isEmpty:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Ret(t,...r)},isEnd:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Iet(t,...r)},isNormalizing:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ket(t,...r)},isStart:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Fet(t,...r)},last:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oet(t,...r)},leaf:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Net(t,...r)},levels:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Let(t,...r)},liftNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return btt(t,...r)},mergeNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _tt(t,...r)},move:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return mtt(t,...r)},moveNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Ett(t,...r)},next:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return zet(t,...r)},node:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Vet(t,...r)},nodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Wet(t,...r)},normalize:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return $et(t,...r)},parent:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Het(t,...r)},path:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Ket(t,...r)},pathRef:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Get(t,...r)},pathRefs:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return qet(t,...r)},point:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Qet(t,...r)},pointRef:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Yet(t,...r)},pointRefs:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Xet(t,...r)},positions:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Zet(t,...r)},previous:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Jet(t,...r)},range:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ntt(t,...r)},rangeRef:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ett(t,...r)},rangeRefs:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ttt(t,...r)},removeNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Ctt(t,...r)},select:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return gtt(t,...r)},setNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Att(t,...r)},setNormalizing:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ott(t,...r)},setPoint:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return vtt(t,...r)},setSelection:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ytt(t,...r)},splitNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Mtt(t,...r)},start:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return stt(t,...r)},string:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return att(t,...r)},unhangRange:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ltt(t,...r)},unsetNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Ptt(t,...r)},unwrapNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Dtt(t,...r)},void:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return yet(t,...r)},withoutNormalizing:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ctt(t,...r)},wrapNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Rtt(t,...r)},shouldMergeNodesRemovePrevNode:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return utt(t,...r)}};return t},ktt=Ntt,mne="֑-߿יִ-﷽ﹰ-ﻼ",gne="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",Ftt=new RegExp("^[^"+gne+"]*["+mne+"]"),Ott=new RegExp("^[^"+mne+"]*["+gne+"]");function Ntt(t){return t=String(t||""),Ftt.test(t)?"rtl":Ott.test(t)?"ltr":"neutral"}const vne=Ad(ktt);var Ltt=uu,Btt=function(){return Ltt.Date.now()},jtt=Btt,Utt=/\s/;function ztt(t){for(var e=t.length;e--&&Utt.test(t.charAt(e)););return e}var Vtt=ztt,Wtt=Vtt,$tt=/^\s+/;function Htt(t){return t&&t.slice(0,Wtt(t)+1).replace($tt,"")}var Gtt=Htt,qtt=Vw,Ktt=$w,Ytt="[object Symbol]";function Xtt(t){return typeof t=="symbol"||Ktt(t)&&qtt(t)==Ytt}var Qtt=Xtt,Ztt=Gtt,m$=Ww,Jtt=Qtt,g$=NaN,ent=/^[-+]0x[0-9a-f]+$/i,tnt=/^0b[01]+$/i,nnt=/^0o[0-7]+$/i,rnt=parseInt;function int(t){if(typeof t=="number")return t;if(Jtt(t))return g$;if(m$(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=m$(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Ztt(t);var n=tnt.test(t);return n||nnt.test(t)?rnt(t.slice(2),n?2:8):ent.test(t)?g$:+t}var ont=int,snt=Ww,$D=jtt,v$=ont,ant="Expected a function",lnt=Math.max,cnt=Math.min;function unt(t,e,n){var r,i,o,s,a,l,c=0,u=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(ant);e=v$(e)||0,snt(n)&&(u=!!n.leading,d="maxWait"in n,o=d?lnt(v$(n.maxWait)||0,e):o,f="trailing"in n?!!n.trailing:f);function p(I){var M=r,D=i;return r=i=void 0,c=I,s=t.apply(D,M),s}function b(I){return c=I,a=setTimeout(g,e),u?p(I):s}function v(I){var M=I-l,D=I-c,E=e-M;return d?cnt(E,o-D):E}function m(I){var M=I-l,D=I-c;return l===void 0||M>=e||M<0||d&&D>=o}function g(){var I=$D();if(m(I))return x(I);a=setTimeout(g,v(I))}function x(I){return a=void 0,f&&r?p(I):(r=i=void 0,s)}function w(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function S(){return a===void 0?s:x($D())}function P(){var I=$D(),M=m(I);if(r=arguments,i=this,l=I,M){if(a===void 0)return b(l);if(d)return clearTimeout(a),a=setTimeout(g,e),p(l)}return a===void 0&&(a=setTimeout(g,e)),s}return P.cancel=w,P.flush=S,P}var yne=unt;const dnt=Ad(yne);var fnt=yne,hnt=Ww,pnt="Expected a function";function mnt(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(pnt);return hnt(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),fnt(t,e,{leading:r,maxWait:e,trailing:i})}var gnt=mnt;const vnt=Ad(gnt),y$=t=>typeof t=="object"&&t!=null&&t.nodeType===1,x$=(t,e)=>(!e||t!=="hidden")&&t!=="visible"&&t!=="clip",HD=(t,e)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const n=getComputedStyle(t,null);return x$(n.overflowY,e)||x$(n.overflowX,e)||(r=>{const i=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch(s){return null}})(r);return!!i&&(i.clientHeight<r.scrollHeight||i.clientWidth<r.scrollWidth)})(t)}return!1},f_=(t,e,n,r,i,o,s,a)=>o<t&&s>e||o>t&&s<e?0:o<=t&&a<=n||s>=e&&a>=n?o-t-r:s>e&&a<n||o<t&&a>n?s-e+i:0,ynt=t=>{const e=t.parentElement;return e==null?t.getRootNode().host||null:e},b$=(t,e)=>{var n,r,i,o;if(typeof document=="undefined")return[];const{scrollMode:s,block:a,inline:l,boundary:c,skipOverflowHiddenElements:u}=e,d=typeof c=="function"?c:R=>R!==c;if(!y$(t))throw new TypeError("Invalid target");const f=document.scrollingElement||document.documentElement,p=[];let b=t;for(;y$(b)&&d(b);){if(b=ynt(b),b===f){p.push(b);break}b!=null&&b===document.body&&HD(b)&&!HD(document.documentElement)||b!=null&&HD(b,u)&&p.push(b)}const v=(r=(n=window.visualViewport)==null?void 0:n.width)!=null?r:innerWidth,m=(o=(i=window.visualViewport)==null?void 0:i.height)!=null?o:innerHeight,{scrollX:g,scrollY:x}=window,{height:w,width:S,top:P,right:I,bottom:M,left:D}=t.getBoundingClientRect();let E=a==="start"||a==="nearest"?P:a==="end"?M:P+w/2,_=l==="center"?D+S/2:l==="end"?I:D;const A=[];for(let R=0;R<p.length;R++){const F=p[R],{height:L,width:N,top:U,right:$,bottom:B,left:H}=F.getBoundingClientRect();if(s==="if-needed"&&P>=0&&D>=0&&M<=m&&I<=v&&P>=U&&M<=B&&D>=H&&I<=$)return A;const q=getComputedStyle(F),z=parseInt(q.borderLeftWidth,10),G=parseInt(q.borderTopWidth,10),K=parseInt(q.borderRightWidth,10),Z=parseInt(q.borderBottomWidth,10);let ee=0,V=0;const J="offsetWidth"in F?F.offsetWidth-F.clientWidth-z-K:0,oe="offsetHeight"in F?F.offsetHeight-F.clientHeight-G-Z:0,ne="offsetWidth"in F?F.offsetWidth===0?0:N/F.offsetWidth:0,pe="offsetHeight"in F?F.offsetHeight===0?0:L/F.offsetHeight:0;if(f===F)ee=a==="start"?E:a==="end"?E-m:a==="nearest"?f_(x,x+m,m,G,Z,x+E,x+E+w,w):E-m/2,V=l==="start"?_:l==="center"?_-v/2:l==="end"?_-v:f_(g,g+v,v,z,K,g+_,g+_+S,S),ee=Math.max(0,ee+x),V=Math.max(0,V+g);else{ee=a==="start"?E-U-G:a==="end"?E-B+Z+oe:a==="nearest"?f_(U,B,L,G,Z+oe,E,E+w,w):E-(U+L/2)+oe/2,V=l==="start"?_-H-z:l==="center"?_-(H+N/2)+J/2:l==="end"?_-$+K+J:f_(H,$,N,z,K+J,_,_+S,S);const{scrollLeft:ye,scrollTop:Ce}=F;ee=Math.max(0,Math.min(Ce+ee/pe,F.scrollHeight-L/pe+oe)),V=Math.max(0,Math.min(ye+V/ne,F.scrollWidth-N/ne+J)),E+=Ce-ee,_+=ye-V}A.push({el:F,top:ee,left:V})}return A},xnt=t=>t===!1?{block:"end",inline:"nearest"}:(e=>e===Object(e)&&Object.keys(e).length!==0)(t)?t:{block:"start",inline:"nearest"};function bnt(t,e){if(!t.isConnected||!(i=>{let o=i;for(;o&&o.parentNode;){if(o.parentNode===document)return!0;o=o.parentNode instanceof ShadowRoot?o.parentNode.host:o.parentNode}return!1})(t))return;const n=(i=>{const o=window.getComputedStyle(i);return{top:parseFloat(o.scrollMarginTop)||0,right:parseFloat(o.scrollMarginRight)||0,bottom:parseFloat(o.scrollMarginBottom)||0,left:parseFloat(o.scrollMarginLeft)||0}})(t);if((i=>typeof i=="object"&&typeof i.behavior=="function")(e))return e.behavior(b$(t,e));const r=typeof e=="boolean"||e==null?void 0:e.behavior;for(const{el:i,top:o,left:s}of b$(t,xnt(e))){const a=o-n.top+n.bottom,l=s-n.left+n.right;i.scroll({top:a,left:l,behavior:r})}}var kd={};Object.defineProperty(kd,"__esModule",{value:!0});var wnt=typeof window!="undefined"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),GD={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},xne={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:wnt?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},l5={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(var h_=1;h_<20;h_++)l5["f"+h_]=111+h_;function l2(t,e,n){e&&!("byKey"in e)&&(n=e,e=null),Array.isArray(t)||(t=[t]);var r=t.map(function(s){return bne(s,e)}),i=function(a){return r.some(function(l){return wne(l,a)})},o=n==null?i:i(n);return o}function Snt(t,e){return l2(t,e)}function _nt(t,e){return l2(t,{byKey:!0},e)}function bne(t,e){var n=e&&e.byKey,r={};t=t.replace("++","+add");var i=t.split("+"),o=i.length;for(var s in GD)r[GD[s]]=!1;var a=!0,l=!1,c=void 0;try{for(var u=i[Symbol.iterator](),d;!(a=(d=u.next()).done);a=!0){var f=d.value,p=f.endsWith("?")&&f.length>1;p&&(f=f.slice(0,-1));var b=c5(f),v=GD[b];if(f.length>1&&!v&&!xne[f]&&!l5[b])throw new TypeError('Unknown modifier: "'+f+'"');(o===1||!v)&&(n?r.key=b:r.which=Sne(f)),v&&(r[v]=p?null:!0)}}catch(m){l=!0,c=m}finally{try{!a&&u.return&&u.return()}finally{if(l)throw c}}return r}function wne(t,e){for(var n in t){var r=t[n],i=void 0;if(r!=null&&(n==="key"&&e.key!=null?i=e.key.toLowerCase():n==="which"?i=r===91&&e.which===93?91:e.which:i=e[n],!(i==null&&r===!1)&&i!==r))return!1}return!0}function Sne(t){t=c5(t);var e=l5[t]||t.toUpperCase().charCodeAt(0);return e}function c5(t){return t=t.toLowerCase(),t=xne[t]||t,t}kd.default=l2;var qD=kd.isHotkey=l2;kd.isCodeHotkey=Snt;kd.isKeyHotkey=_nt;kd.parseHotkey=bne;kd.compareHotkey=wne;kd.toKeyCode=Sne;kd.toKeyName=c5;var _ne=globalThis.Node,Ent=globalThis.Text,u5=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView||null,Cnt=t=>ih(t)&&t.nodeType===8,dl=t=>ih(t)&&t.nodeType===1,ih=t=>{var e=u5(t);return!!e&&t instanceof e.Node},CF=t=>{var e=t&&t.anchorNode&&u5(t.anchorNode);return!!e&&t instanceof e.Selection},Ene=t=>ih(t)&&t.nodeType===3,Ant=t=>t.clipboardData&&t.clipboardData.getData("text/plain")!==""&&t.clipboardData.types.length===1,Tnt=t=>{var[e,n]=t;if(dl(e)&&e.childNodes.length){var r=n===e.childNodes.length,i=r?n-1:n;for([e,i]=Cne(e,i,r?"backward":"forward"),r=i<n;dl(e)&&e.childNodes.length;){var o=r?e.childNodes.length-1:0;e=Pnt(e,o,r?"backward":"forward")}n=r&&e.textContent!=null?e.textContent.length:0}return[e,n]},Mnt=t=>{for(var e=t&&t.parentNode;e;){if(e.toString()==="[object ShadowRoot]")return!0;e=e.parentNode}return!1},Cne=(t,e,n)=>{for(var{childNodes:r}=t,i=r[e],o=e,s=!1,a=!1;(Cnt(i)||dl(i)&&i.childNodes.length===0||dl(i)&&i.getAttribute("contenteditable")==="false")&&!(s&&a);){if(o>=r.length){s=!0,o=e-1,n="backward";continue}if(o<0){a=!0,o=e+1,n="forward";continue}i=r[o],e=o,o+=n==="forward"?1:-1}return[i,e]},Pnt=(t,e,n)=>{var[r]=Cne(t,e,n);return r},Ane=t=>{var e="";if(Ene(t)&&t.nodeValue)return t.nodeValue;if(dl(t)){for(var n of Array.from(t.childNodes))e+=Ane(n);var r=getComputedStyle(t).getPropertyValue("display");(r==="block"||r==="list"||t.tagName==="BR")&&(e+=`
`)}return e},Dnt=/data-slate-fragment="(.+?)"/m,Rnt=t=>{var e=t.getData("text/html"),[,n]=e.match(Dnt)||[];return n},Lx=t=>t.getSelection!=null?t.getSelection():document.getSelection(),d5=(t,e,n)=>{var{target:r}=e;if(dl(r)&&r.matches('[contentEditable="false"]'))return!1;var{document:i}=qn.getWindow(t);if(i.contains(r))return qn.hasDOMNode(t,r,{editable:!0});var o=n.find(s=>{var{addedNodes:a,removedNodes:l}=s;for(var c of a)if(c===r||c.contains(r))return!0;for(var u of l)if(u===r||u.contains(r))return!0});return!o||o===e?!1:d5(t,o,n)},Int=()=>{for(var t=document.activeElement;(e=t)!==null&&e!==void 0&&e.shadowRoot&&(n=t.shadowRoot)!==null&&n!==void 0&&n.activeElement;){var e,n,r;t=(r=t)===null||r===void 0||(r=r.shadowRoot)===null||r===void 0?void 0:r.activeElement}return t},w$=(t,e)=>!!(t.compareDocumentPosition(e)&_ne.DOCUMENT_POSITION_PRECEDING),knt=(t,e)=>!!(t.compareDocumentPosition(e)&_ne.DOCUMENT_POSITION_FOLLOWING),KD,YD,Tne=typeof navigator!="undefined"&&typeof window!="undefined"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,S$=typeof navigator!="undefined"&&/Mac OS X/.test(navigator.userAgent),Ps=typeof navigator!="undefined"&&/Android/.test(navigator.userAgent),Wg=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Jh=typeof navigator!="undefined"&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),Fnt=typeof navigator!="undefined"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),Mne=typeof navigator!="undefined"&&/Chrome/i.test(navigator.userAgent),Ont=typeof navigator!="undefined"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),Nnt=Ps&&typeof navigator!="undefined"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),Lnt=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),Bnt=typeof navigator!="undefined"&&/.*UCBrowser/.test(navigator.userAgent),jnt=typeof navigator!="undefined"&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),bE=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&/Version\/(\d+)/.test(navigator.userAgent)&&((KD=navigator.userAgent.match(/Version\/(\d+)/))!==null&&KD!==void 0&&KD[1]&&parseInt((YD=navigator.userAgent.match(/Version\/(\d+)/))===null||YD===void 0?void 0:YD[1],10)<17);var rf=(!Ont||!Nnt)&&!Fnt&&typeof globalThis!="undefined"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function Yb(t){"@babel/helpers - typeof";return Yb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yb(t)}function Unt(t,e){if(Yb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yb(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function znt(t){var e=Unt(t,"string");return Yb(e)==="symbol"?e:String(e)}function Pne(t,e,n){return e=znt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Vnt=0;class Wnt{constructor(){Pne(this,"id",void 0),this.id="".concat(Vnt++)}}var mv=new WeakMap,f5=new WeakMap,h5=new WeakMap,Dne=new WeakMap,wE=new WeakMap,AF=new WeakMap,Xb=new WeakMap,Ip=new WeakMap,lA=new WeakMap,c2=new WeakMap,TF=new WeakMap,Df=new WeakMap,vp=new WeakMap,Bx=new WeakMap,MF=new WeakMap,p5=new WeakMap,ic=new WeakMap,Qu=new WeakMap,Qs=new WeakMap,hf=new WeakMap,pf=new WeakMap,Rne=new WeakMap,e0=Symbol("placeholder"),Ine=Symbol("mark-placeholder"),qn={androidPendingDiffs:t=>Qs.get(t),androidScheduleFlush:t=>{var e;(e=p5.get(t))===null||e===void 0||e()},blur:t=>{var e=qn.toDOMNode(t,t),n=qn.findDocumentOrShadowRoot(t);Df.set(t,!1),n.activeElement===e&&e.blur()},deselect:t=>{var{selection:e}=t,n=qn.findDocumentOrShadowRoot(t),r=Lx(n);r&&r.rangeCount>0&&r.removeAllRanges(),e&&Rt.deselect(t)},findDocumentOrShadowRoot:t=>{var e=qn.toDOMNode(t,t),n=e.getRootNode();return n instanceof Document||n instanceof ShadowRoot?n:e.ownerDocument},findEventRange:(t,e)=>{"nativeEvent"in e&&(e=e.nativeEvent);var{clientX:n,clientY:r,target:i}=e;if(n==null||r==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var o=qn.toSlateNode(t,e.target),s=qn.findPath(t,o);if(nn.isElement(o)&&he.isVoid(t,o)){var a=i.getBoundingClientRect(),l=t.isInline(o)?n-a.left<a.left+a.width-n:r-a.top<a.top+a.height-r,c=he.point(t,s,{edge:l?"start":"end"}),u=l?he.before(t,c):he.after(t,c);if(u){var d=he.range(t,u);return d}}var f,{document:p}=qn.getWindow(t);if(p.caretRangeFromPoint)f=p.caretRangeFromPoint(n,r);else{var b=p.caretPositionFromPoint(n,r);b&&(f=p.createRange(),f.setStart(b.offsetNode,b.offset),f.setEnd(b.offsetNode,b.offset))}if(!f)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var v=qn.toSlateRange(t,f,{exactMatch:!1,suppressThrow:!1});return v},findKey:(t,e)=>{var n=lA.get(e);return n||(n=new Wnt,lA.set(e,n)),n},findPath:(t,e)=>{for(var n=[],r=e;;){var i=h5.get(r);if(i==null){if(he.isEditor(r))return n;break}var o=f5.get(r);if(o==null)break;n.unshift(o),r=i}throw new Error("Unable to find the path for Slate node: ".concat(Do.stringify(e)))},focus:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{retries:5};if(!Df.get(e)){if(n.retries<=0)throw new Error("Could not set focus, editor seems stuck with pending operations");if(e.operations.length>0){setTimeout(()=>{qn.focus(e,{retries:n.retries-1})},10);return}var r=qn.toDOMNode(e,e),i=qn.findDocumentOrShadowRoot(e);if(i.activeElement!==r){if(e.selection&&i instanceof Document){var o=Lx(i),s=qn.toDOMRange(e,e.selection);o==null||o.removeAllRanges(),o==null||o.addRange(s)}e.selection||Rt.select(e,he.start(e,[])),Df.set(e,!0),r.focus({preventScroll:!0})}}},getWindow:t=>{var e=Dne.get(t);if(!e)throw new Error("Unable to find a host window element for this editor");return e},hasDOMNode:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:i=!1}=r,o=qn.toDOMNode(e,e),s;try{s=dl(n)?n:n.parentElement}catch(a){if(a instanceof Error&&!a.message.includes('Permission denied to access property "nodeType"'))throw a}return s?s.closest("[data-slate-editor]")===o&&(!i||s.isContentEditable?!0:typeof s.isContentEditable=="boolean"&&s.closest('[contenteditable="false"]')===o||!!s.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(t,e)=>ih(e)&&qn.hasDOMNode(t,e,{editable:!0}),hasRange:(t,e)=>{var{anchor:n,focus:r}=e;return he.hasPath(t,n.path)&&he.hasPath(t,r.path)},hasSelectableTarget:(t,e)=>qn.hasEditableTarget(t,e)||qn.isTargetInsideNonReadonlyVoid(t,e),hasTarget:(t,e)=>ih(e)&&qn.hasDOMNode(t,e),insertData:(t,e)=>{t.insertData(e)},insertFragmentData:(t,e)=>t.insertFragmentData(e),insertTextData:(t,e)=>t.insertTextData(e),isComposing:t=>!!vp.get(t),isFocused:t=>!!Df.get(t),isReadOnly:t=>!!TF.get(t),isTargetInsideNonReadonlyVoid:(t,e)=>{if(TF.get(t))return!1;var n=qn.hasTarget(t,e)&&qn.toSlateNode(t,e);return nn.isElement(n)&&he.isVoid(t,n)},setFragmentData:(t,e,n)=>t.setFragmentData(e,n),toDOMNode:(t,e)=>{var n=c2.get(t),r=he.isEditor(e)?wE.get(t):n==null?void 0:n.get(qn.findKey(t,e));if(!r)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(Do.stringify(e)));return r},toDOMPoint:(t,e)=>{var[n]=he.node(t,e.path),r=qn.toDOMNode(t,n),i;he.void(t,{at:e})&&(e={path:e.path,offset:0});for(var o="[data-slate-string], [data-slate-zero-width]",s=Array.from(r.querySelectorAll(o)),a=0,l=0;l<s.length;l++){var c=s[l],u=c.childNodes[0];if(!(u==null||u.textContent==null)){var{length:d}=u.textContent,f=c.getAttribute("data-slate-length"),p=f==null?d:parseInt(f,10),b=a+p,v=s[l+1];if(e.offset===b&&v!==null&&v!==void 0&&v.hasAttribute("data-slate-mark-placeholder")){var m,g=v.childNodes[0];i=[g instanceof Ent?g:v,(m=v.textContent)!==null&&m!==void 0&&m.startsWith("\uFEFF")?1:0];break}if(e.offset<=b){var x=Math.min(d,Math.max(0,e.offset-a));i=[u,x];break}a=b}}if(!i)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(Do.stringify(e)));return i},toDOMRange:(t,e)=>{var{anchor:n,focus:r}=e,i=ct.isBackward(e),o=qn.toDOMPoint(t,n),s=ct.isCollapsed(e)?o:qn.toDOMPoint(t,r),a=qn.getWindow(t),l=a.document.createRange(),[c,u]=i?s:o,[d,f]=i?o:s,p=dl(c)?c:c.parentElement,b=!!p.getAttribute("data-slate-zero-width"),v=dl(d)?d:d.parentElement,m=!!v.getAttribute("data-slate-zero-width");return l.setStart(c,b?1:u),l.setEnd(d,m?1:f),l},toSlateNode:(t,e)=>{var n=dl(e)?e:e.parentElement;n&&!n.hasAttribute("data-slate-node")&&(n=n.closest("[data-slate-node]"));var r=n?Xb.get(n):null;if(!r)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(n));return r},toSlatePoint:(t,e,n)=>{var{exactMatch:r,suppressThrow:i,searchDirection:o="backward"}=n,[s,a]=r?e:Tnt(e),l=s.parentNode,c=null,u=0;if(l){var d,f,p=qn.toDOMNode(t,t),b=l.closest('[data-slate-void="true"]'),v=b&&p.contains(b)?b:null,m=l.closest('[contenteditable="false"]'),g=m&&p.contains(m)?m:null,x=l.closest("[data-slate-leaf]"),w=null;if(x){if(c=x.closest('[data-slate-node="text"]'),c){var S=qn.getWindow(t),P=S.document.createRange();P.setStart(c,0),P.setEnd(s,a);var I=P.cloneContents(),M=[...Array.prototype.slice.call(I.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(I.querySelectorAll("[contenteditable=false]"))];M.forEach(K=>{if(Ps&&!r&&K.hasAttribute("data-slate-zero-width")&&K.textContent.length>0&&K.textContext!=="\uFEFF"){K.textContent.startsWith("\uFEFF")&&(K.textContent=K.textContent.slice(1));return}K.parentNode.removeChild(K)}),u=I.textContent.length,w=c}}else if(v){for(var D=v.querySelectorAll("[data-slate-leaf]"),E=0;E<D.length;E++){var _=D[E];if(qn.hasDOMNode(t,_)){x=_;break}}x?(c=x.closest('[data-slate-node="text"]'),w=x,u=w.textContent.length,w.querySelectorAll("[data-slate-zero-width]").forEach(K=>{u-=K.textContent.length})):u=1}else if(g){var A=K=>K?K.querySelectorAll("[data-slate-leaf]:not(:scope [data-slate-editor] [data-slate-leaf])"):[],R=g.closest('[data-slate-node="element"]');if(o==="forward"){var F,L=[...A(R),...A(R==null?void 0:R.nextElementSibling)];x=(F=L.find(K=>knt(g,K)))!==null&&F!==void 0?F:null}else{var N,U=[...A(R==null?void 0:R.previousElementSibling),...A(R)];x=(N=U.findLast(K=>w$(g,K)))!==null&&N!==void 0?N:null}x&&(c=x.closest('[data-slate-node="text"]'),w=x,o==="forward"?u=0:(u=w.textContent.length,w.querySelectorAll("[data-slate-zero-width]").forEach(K=>{u-=K.textContent.length})))}w&&u===w.textContent.length&&Ps&&w.getAttribute("data-slate-zero-width")==="z"&&(d=w.textContent)!==null&&d!==void 0&&d.startsWith("\uFEFF")&&(l.hasAttribute("data-slate-zero-width")||Wg&&(f=w.textContent)!==null&&f!==void 0&&f.endsWith(`

`))&&u--}if(Ps&&!c&&!r){var $=l.hasAttribute("data-slate-node")?l:l.closest("[data-slate-node]");if($&&qn.hasDOMNode(t,$,{editable:!0})){var B=qn.toSlateNode(t,$),{path:H,offset:q}=he.start(t,qn.findPath(t,B));return $.querySelector("[data-slate-leaf]")||(q=a),{path:H,offset:q}}}if(!c){if(i)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(e))}var z=qn.toSlateNode(t,c),G=qn.findPath(t,z);return{path:G,offset:u}},toSlateRange:(t,e,n)=>{var r,{exactMatch:i,suppressThrow:o}=n,s=CF(e)?e.anchorNode:e.startContainer,a,l,c,u,d;if(s)if(CF(e)){if(Wg&&e.rangeCount>1){c=e.focusNode;var f=e.getRangeAt(0),p=e.getRangeAt(e.rangeCount-1);if(c instanceof HTMLTableRowElement&&f.startContainer instanceof HTMLTableRowElement&&p.startContainer instanceof HTMLTableRowElement){let M=function(D){return D.childElementCount>0?M(D.children[0]):D};var I=M,b=f.startContainer,v=p.startContainer,m=M(b.children[f.startOffset]),g=M(v.children[p.startOffset]);u=0,g.childNodes.length>0?a=g.childNodes[0]:a=g,m.childNodes.length>0?c=m.childNodes[0]:c=m,g instanceof HTMLElement?l=g.innerHTML.length:l=0}else f.startContainer===c?(a=p.endContainer,l=p.endOffset,u=f.startOffset):(a=f.startContainer,l=f.endOffset,u=p.startOffset)}else a=e.anchorNode,l=e.anchorOffset,c=e.focusNode,u=e.focusOffset;Mne&&Mnt(a)||Wg?d=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:d=e.isCollapsed}else a=e.startContainer,l=e.startOffset,c=e.endContainer,u=e.endOffset,d=e.collapsed;if(a==null||c==null||l==null||u==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(e));Wg&&(r=c.textContent)!==null&&r!==void 0&&r.endsWith(`

`)&&u===c.textContent.length&&u--;var x=qn.toSlatePoint(t,[a,l],{exactMatch:i,suppressThrow:o});if(!x)return null;var w=w$(a,c)||a===c&&u<l,S=d?x:qn.toSlatePoint(t,[c,u],{exactMatch:i,suppressThrow:o,searchDirection:w?"forward":"backward"});if(!S)return null;var P={anchor:x,focus:S};return ct.isExpanded(P)&&ct.isForward(P)&&dl(c)&&he.void(t,{at:P.focus,mode:"highest"})&&(P=he.unhangRange(t,P,{voids:!0})),P}};function $nt(t,e){var{path:n,diff:r}=e;if(!he.hasPath(t,n))return!1;var i=Vt.get(t,n);if(!Xt.isText(i))return!1;if(r.start!==i.text.length||r.text.length===0)return i.text.slice(r.start,r.start+r.text.length)===r.text;var o=ze.next(n);if(!he.hasPath(t,o))return!1;var s=Vt.get(t,o);return Xt.isText(s)&&s.text.startsWith(r.text)}function kne(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce((i,o)=>i.slice(0,o.start)+o.text+i.slice(o.end),t)}function Hnt(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++)if(t.charAt(r)!==e.charAt(r))return r;return n}function Gnt(t,e,n){for(var r=Math.min(t.length,e.length,n),i=0;i<r;i++)if(t.charAt(t.length-i-1)!==e.charAt(e.length-i-1))return i;return r}function Fne(t,e){var{start:n,end:r,text:i}=e,o=t.slice(n,r),s=Hnt(o,i),a=Math.min(o.length-s,i.length-s),l=Gnt(o,i,a),c={start:n+s,end:r-l,text:i.slice(s,i.length-l)};return c.start===c.end&&c.text.length===0?null:c}function qnt(t,e,n){var r=Math.min(e.start,n.start),i=Math.max(0,Math.min(e.start+e.text.length,n.end)-n.start),o=kne(t,e,n),s=Math.max(n.start+n.text.length,e.start+e.text.length+(e.start+e.text.length>n.start?n.text.length:0)-i),a=o.slice(r,s),l=Math.max(e.end,n.end-e.text.length+(e.end-e.start));return Fne(t,{start:r,end:l,text:a})}function Knt(t){var{path:e,diff:n}=t;return{anchor:{path:e,offset:n.start},focus:{path:e,offset:n.end}}}function PF(t,e){var{path:n,offset:r}=e;if(!he.hasPath(t,n))return null;var i=Vt.get(t,n);if(!Xt.isText(i))return null;var o=he.above(t,{match:a=>nn.isElement(a)&&he.isBlock(t,a),at:n});if(!o)return null;for(;r>i.text.length;){var s=he.next(t,{at:n,match:Xt.isText});if(!s||!ze.isDescendant(s[1],o[1]))return null;r-=i.text.length,i=s[0],n=s[1]}return{path:n,offset:r}}function _$(t,e){var n=PF(t,e.anchor);if(!n)return null;if(ct.isCollapsed(e))return{anchor:n,focus:n};var r=PF(t,e.focus);return r?{anchor:n,focus:r}:null}function DF(t,e,n){var r=Qs.get(t),i=r==null?void 0:r.find(u=>{var{path:d}=u;return ze.equals(d,e.path)});if(!i||e.offset<=i.diff.start)return or.transform(e,n,{affinity:"backward"});var{diff:o}=i;if(e.offset<=o.start+o.text.length){var s={path:e.path,offset:o.start},a=or.transform(s,n,{affinity:"backward"});return a?{path:a.path,offset:a.offset+e.offset-o.start}:null}var l={path:e.path,offset:e.offset-o.text.length+o.end-o.start},c=or.transform(l,n,{affinity:"backward"});return c?n.type==="split_node"&&ze.equals(n.path,e.path)&&l.offset<n.position&&o.start<n.position?c:{path:c.path,offset:c.offset+o.text.length-o.end+o.start}:null}function E$(t,e,n){var r=DF(t,e.anchor,n);if(!r)return null;if(ct.isCollapsed(e))return{anchor:r,focus:r};var i=DF(t,e.focus,n);return i?{anchor:r,focus:i}:null}function Ynt(t,e){var{path:n,diff:r,id:i}=t;switch(e.type){case"insert_text":return!ze.equals(e.path,n)||e.offset>=r.end?t:e.offset<=r.start?{diff:{start:e.text.length+r.start,end:e.text.length+r.end,text:r.text},id:i,path:n}:{diff:{start:r.start,end:r.end+e.text.length,text:r.text},id:i,path:n};case"remove_text":return!ze.equals(e.path,n)||e.offset>=r.end?t:e.offset+e.text.length<=r.start?{diff:{start:r.start-e.text.length,end:r.end-e.text.length,text:r.text},id:i,path:n}:{diff:{start:r.start,end:r.end-e.text.length,text:r.text},id:i,path:n};case"split_node":return!ze.equals(e.path,n)||e.position>=r.end?{diff:r,id:i,path:ze.transform(n,e,{affinity:"backward"})}:e.position>r.start?{diff:{start:r.start,end:Math.min(e.position,r.end),text:r.text},id:i,path:n}:{diff:{start:r.start-e.position,end:r.end-e.position,text:r.text},id:i,path:ze.transform(n,e,{affinity:"forward"})};case"merge_node":return ze.equals(e.path,n)?{diff:{start:r.start+e.position,end:r.end+e.position,text:r.text},id:i,path:ze.transform(n,e)}:{diff:r,id:i,path:ze.transform(n,e)}}var o=ze.transform(n,e);return o?{diff:r,path:o,id:i}:null}var C$=(t,e)=>{var n=(e.top+e.bottom)/2;return t.top<=n&&t.bottom>=n},A$=(t,e,n)=>{var r=qn.toDOMRange(t,e).getBoundingClientRect(),i=qn.toDOMRange(t,n).getBoundingClientRect();return C$(r,i)&&C$(i,r)},Xnt=(t,e)=>{var n=he.range(t,ct.end(e)),r=Array.from(he.positions(t,{at:e})),i=0,o=r.length,s=Math.floor(o/2);if(A$(t,he.range(t,r[i]),n))return he.range(t,r[i],n);if(r.length<2)return he.range(t,r[r.length-1],n);for(;s!==r.length&&s!==i;)A$(t,he.range(t,r[s]),n)?o=s:i=s,s=Math.floor((i+o)/2);return he.range(t,r[o],n)};function T$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function M$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T$(Object(n),!0).forEach(function(r){Pne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Qnt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",r=e,{apply:i,onChange:o,deleteBackward:s,addMark:a,removeMark:l}=r;return c2.set(r,new WeakMap),r.addMark=(c,u)=>{var d,f;(d=p5.get(r))===null||d===void 0||d(),!ic.get(r)&&(f=Qs.get(r))!==null&&f!==void 0&&f.length&&ic.set(r,null),Qu.delete(r),a(c,u)},r.removeMark=c=>{var u;!ic.get(r)&&(u=Qs.get(r))!==null&&u!==void 0&&u.length&&ic.set(r,null),Qu.delete(r),l(c)},r.deleteBackward=c=>{if(c!=="line")return s(c);if(r.selection&&ct.isCollapsed(r.selection)){var u=he.above(r,{match:b=>nn.isElement(b)&&he.isBlock(r,b),at:r.selection});if(u){var[,d]=u,f=he.range(r,d,r.selection.anchor),p=Xnt(r,f);ct.isCollapsed(p)||Rt.delete(r,{at:p})}}},r.apply=c=>{var u=[],d=[],f=Qs.get(r);if(f!=null&&f.length){var p=f.map(L=>Ynt(L,c)).filter(Boolean);Qs.set(r,p)}var b=pf.get(r);b&&pf.set(r,E$(r,b,c));var v=hf.get(r);if(v!=null&&v.at){var m=or.isPoint(v==null?void 0:v.at)?DF(r,v.at,c):E$(r,v.at,c);hf.set(r,m?M$(M$({},v),{},{at:m}):null)}switch(c.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{u.push(...fg(r,c.path));break}case"set_selection":{var g;(g=Bx.get(r))===null||g===void 0||g.unref(),Bx.delete(r);break}case"insert_node":case"remove_node":{u.push(...fg(r,ze.parent(c.path)));break}case"merge_node":{var x=ze.previous(c.path);u.push(...fg(r,x));break}case"move_node":{var w=ze.common(ze.parent(c.path),ze.parent(c.newPath));u.push(...fg(r,w));var S;ze.isBefore(c.path,c.newPath)?(u.push(...fg(r,ze.parent(c.path))),S=c.newPath):(u.push(...fg(r,ze.parent(c.newPath))),S=c.path);var P=Vt.get(e,ze.parent(S)),I=qn.findKey(r,P),M=he.pathRef(r,ze.parent(S));d.push([M,I]);break}}switch(i(c),c.type){case"insert_node":case"remove_node":case"merge_node":case"move_node":case"split_node":case"insert_text":case"remove_text":case"set_selection":mv.set(r,!0)}for(var[D,E]of u){var[_]=he.node(r,D);lA.set(_,E)}for(var[A,R]of d){if(A.current){var[F]=he.node(r,A.current);lA.set(F,R)}A.unref()}},r.setFragmentData=c=>{var{selection:u}=r;if(u){var[d,f]=ct.edges(u),p=he.void(r,{at:d.path}),b=he.void(r,{at:f.path});if(!(ct.isCollapsed(u)&&!p)){var v=qn.toDOMRange(r,u),m=v.cloneContents(),g=m.childNodes[0];if(m.childNodes.forEach(_=>{_.textContent&&_.textContent.trim()!==""&&(g=_)}),b){var[x]=b,w=v.cloneRange(),S=qn.toDOMNode(r,x);w.setEndAfter(S),m=w.cloneContents()}if(p&&(g=m.querySelector("[data-slate-spacer]")),Array.from(m.querySelectorAll("[data-slate-zero-width]")).forEach(_=>{var A=_.getAttribute("data-slate-zero-width")==="n";_.textContent=A?`
`:""}),Ene(g)){var P=g.ownerDocument.createElement("span");P.style.whiteSpace="pre",P.appendChild(g),m.appendChild(P),g=P}var I=r.getFragment(),M=JSON.stringify(I),D=window.btoa(encodeURIComponent(M));g.setAttribute("data-slate-fragment",D),c.setData("application/".concat(n),D);var E=m.ownerDocument.createElement("div");return E.appendChild(m),E.setAttribute("hidden","true"),m.ownerDocument.body.appendChild(E),c.setData("text/html",E.innerHTML),c.setData("text/plain",Ane(E)),m.ownerDocument.body.removeChild(E),c}}},r.insertData=c=>{r.insertFragmentData(c)||r.insertTextData(c)},r.insertFragmentData=c=>{var u=c.getData("application/".concat(n))||Rnt(c);if(u){var d=decodeURIComponent(window.atob(u)),f=JSON.parse(d);return r.insertFragment(f),!0}return!1},r.insertTextData=c=>{var u=c.getData("text/plain");if(u){var d=u.split(/\r\n|\r|\n/),f=!1;for(var p of d)f&&Rt.splitNodes(r,{always:!0}),r.insertText(p),f=!0;return!0}return!1},r.onChange=c=>{var u=MF.get(r);u&&u(c),o(c)},r},fg=(t,e)=>{var n=[];for(var[r,i]of he.levels(t,{at:e})){var o=qn.findKey(t,r);n.push([i,o])}return n},Znt=3,Jnt={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},ert={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},trt={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},_i=t=>{var e=Jnt[t],n=ert[t],r=trt[t],i=e&&qD(e),o=n&&qD(n),s=r&&qD(r);return a=>!!(i&&i(a)||S$&&o&&o(a)||!S$&&s&&s(a))},Mi={isBold:_i("bold"),isCompose:_i("compose"),isMoveBackward:_i("moveBackward"),isMoveForward:_i("moveForward"),isDeleteBackward:_i("deleteBackward"),isDeleteForward:_i("deleteForward"),isDeleteLineBackward:_i("deleteLineBackward"),isDeleteLineForward:_i("deleteLineForward"),isDeleteWordBackward:_i("deleteWordBackward"),isDeleteWordForward:_i("deleteWordForward"),isExtendBackward:_i("extendBackward"),isExtendForward:_i("extendForward"),isExtendLineBackward:_i("extendLineBackward"),isExtendLineForward:_i("extendLineForward"),isItalic:_i("italic"),isMoveLineBackward:_i("moveLineBackward"),isMoveLineForward:_i("moveLineForward"),isMoveWordBackward:_i("moveWordBackward"),isMoveWordForward:_i("moveWordForward"),isRedo:_i("redo"),isSoftBreak:_i("insertSoftBreak"),isSplitBlock:_i("splitBlock"),isTransposeCharacter:_i("transposeCharacter"),isUndo:_i("undo")};function nrt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function P$(t,e){if(t==null)return{};var n=nrt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var rrt=["anchor","focus"],irt=["anchor","focus"],ort=(t,e)=>Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(n=>e.hasOwnProperty(n)&&t[n]===e[n]),One=(t,e)=>{var n=P$(t,rrt),r=P$(e,irt);return t[e0]===e[e0]&&ort(n,r)},srt=(t,e)=>{if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++){var r=t[n],i=e[n];if(!ct.equals(r,i)||!One(r,i))return!1}return!0},art=(t,e)=>{if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++){var r=t[n],i=e[n];if(r.anchor.offset!==i.anchor.offset||r.focus.offset!==i.focus.offset||!One(r,i))return!1}return!0},kp=[],lrt=function(){return kp.some(function(t){return t.activeTargets.length>0})},crt=function(){return kp.some(function(t){return t.skippedTargets.length>0})},D$="ResizeObserver loop completed with undelivered notifications.",urt=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:D$}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=D$),window.dispatchEvent(t)},Qb;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Qb||(Qb={}));var Fp=function(t){return Object.freeze(t)},drt=function(){function t(e,n){this.inlineSize=e,this.blockSize=n,Fp(this)}return t}(),Nne=function(){function t(e,n,r,i){return this.x=e,this.y=n,this.width=r,this.height=i,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Fp(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,r=e.y,i=e.top,o=e.right,s=e.bottom,a=e.left,l=e.width,c=e.height;return{x:n,y:r,top:i,right:o,bottom:s,left:a,width:l,height:c}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),m5=function(t){return t instanceof SVGElement&&"getBBox"in t},Lne=function(t){if(m5(t)){var e=t.getBBox(),n=e.width,r=e.height;return!n&&!r}var i=t,o=i.offsetWidth,s=i.offsetHeight;return!(o||s||t.getClientRects().length)},R$=function(t){var e;if(t instanceof Element)return!0;var n=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},frt=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},jx=typeof window!="undefined"?window:{},p_=new WeakMap,I$=/auto|scroll/,hrt=/^tb|vertical/,prt=/msie|trident/i.test(jx.navigator&&jx.navigator.userAgent),Cc=function(t){return parseFloat(t||"0")},gv=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new drt((n?e:t)||0,(n?t:e)||0)},k$=Fp({devicePixelContentBoxSize:gv(),borderBoxSize:gv(),contentBoxSize:gv(),contentRect:new Nne(0,0,0,0)}),Bne=function(t,e){if(e===void 0&&(e=!1),p_.has(t)&&!e)return p_.get(t);if(Lne(t))return p_.set(t,k$),k$;var n=getComputedStyle(t),r=m5(t)&&t.ownerSVGElement&&t.getBBox(),i=!prt&&n.boxSizing==="border-box",o=hrt.test(n.writingMode||""),s=!r&&I$.test(n.overflowY||""),a=!r&&I$.test(n.overflowX||""),l=r?0:Cc(n.paddingTop),c=r?0:Cc(n.paddingRight),u=r?0:Cc(n.paddingBottom),d=r?0:Cc(n.paddingLeft),f=r?0:Cc(n.borderTopWidth),p=r?0:Cc(n.borderRightWidth),b=r?0:Cc(n.borderBottomWidth),v=r?0:Cc(n.borderLeftWidth),m=d+c,g=l+u,x=v+p,w=f+b,S=a?t.offsetHeight-w-t.clientHeight:0,P=s?t.offsetWidth-x-t.clientWidth:0,I=i?m+x:0,M=i?g+w:0,D=r?r.width:Cc(n.width)-I-P,E=r?r.height:Cc(n.height)-M-S,_=D+m+P+x,A=E+g+S+w,R=Fp({devicePixelContentBoxSize:gv(Math.round(D*devicePixelRatio),Math.round(E*devicePixelRatio),o),borderBoxSize:gv(_,A,o),contentBoxSize:gv(D,E,o),contentRect:new Nne(d,l,D,E)});return p_.set(t,R),R},jne=function(t,e,n){var r=Bne(t,n),i=r.borderBoxSize,o=r.contentBoxSize,s=r.devicePixelContentBoxSize;switch(e){case Qb.DEVICE_PIXEL_CONTENT_BOX:return s;case Qb.BORDER_BOX:return i;default:return o}},mrt=function(){function t(e){var n=Bne(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=Fp([n.borderBoxSize]),this.contentBoxSize=Fp([n.contentBoxSize]),this.devicePixelContentBoxSize=Fp([n.devicePixelContentBoxSize])}return t}(),Une=function(t){if(Lne(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},grt=function(){var t=1/0,e=[];kp.forEach(function(s){if(s.activeTargets.length!==0){var a=[];s.activeTargets.forEach(function(c){var u=new mrt(c.target),d=Une(c.target);a.push(u),c.lastReportedSize=jne(c.target,c.observedBox),d<t&&(t=d)}),e.push(function(){s.callback.call(s.observer,a,s.observer)}),s.activeTargets.splice(0,s.activeTargets.length)}});for(var n=0,r=e;n<r.length;n++){var i=r[n];i()}return t},F$=function(t){kp.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(i){i.isActive()&&(Une(i.target)>t?n.activeTargets.push(i):n.skippedTargets.push(i))})})},vrt=function(){var t=0;for(F$(t);lrt();)t=grt(),F$(t);return crt()&&urt(),t>0},XD,zne=[],yrt=function(){return zne.splice(0).forEach(function(t){return t()})},xrt=function(t){if(!XD){var e=0,n=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return yrt()}).observe(n,r),XD=function(){n.textContent="".concat(e?e--:e++)}}zne.push(t),XD()},brt=function(t){xrt(function(){requestAnimationFrame(t)})},SE=0,wrt=function(){return!!SE},Srt=250,_rt={attributes:!0,characterData:!0,childList:!0,subtree:!0},O$=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],N$=function(t){return t===void 0&&(t=0),Date.now()+t},QD=!1,Ert=function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=Srt),!QD){QD=!0;var r=N$(e);brt(function(){var i=!1;try{i=vrt()}finally{if(QD=!1,e=r-N$(),!wrt())return;i?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,_rt)};document.body?n():jx.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),O$.forEach(function(n){return jx.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),O$.forEach(function(n){return jx.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t}(),RF=new Ert,L$=function(t){!SE&&t>0&&RF.start(),SE+=t,!SE&&RF.stop()},Crt=function(t){return!m5(t)&&!frt(t)&&getComputedStyle(t).display==="inline"},Art=function(){function t(e,n){this.target=e,this.observedBox=n||Qb.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=jne(this.target,this.observedBox,!0);return Crt(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),Trt=function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t}(),m_=new WeakMap,B$=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},g_=function(){function t(){}return t.connect=function(e,n){var r=new Trt(e,n);m_.set(e,r)},t.observe=function(e,n,r){var i=m_.get(e),o=i.observationTargets.length===0;B$(i.observationTargets,n)<0&&(o&&kp.push(i),i.observationTargets.push(new Art(n,r&&r.box)),L$(1),RF.schedule())},t.unobserve=function(e,n){var r=m_.get(e),i=B$(r.observationTargets,n),o=r.observationTargets.length===1;i>=0&&(o&&kp.splice(kp.indexOf(r),1),r.observationTargets.splice(i,1),L$(-1))},t.disconnect=function(e){var n=this,r=m_.get(e);r.observationTargets.slice().forEach(function(i){return n.unobserve(e,i.target)}),r.activeTargets.splice(0,r.activeTargets.length)},t}(),Mrt=function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");g_.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!R$(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");g_.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!R$(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");g_.unobserve(this,e)},t.prototype.disconnect=function(){g_.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();function Prt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function cA(t,e){if(t==null)return{};var n=Prt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Zb(t){"@babel/helpers - typeof";return Zb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zb(t)}function Drt(t,e){if(Zb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zb(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rrt(t){var e=Drt(t,"string");return Zb(e)==="symbol"?e:String(e)}function ru(t,e,n){return e=Rrt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g5=T.createContext(null),ph=()=>{var t=T.useContext(g5);if(!t)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return t},Gt=qn;function j$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function v_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j$(Object(n),!0).forEach(function(r){ru(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Irt=25,krt=200,Frt=function(){},Ort=t=>(t==null?void 0:t.constructor.name)==="DataTransfer";function Nrt(t){var{editor:e,scheduleOnDOMSelectionChange:n,onDOMSelectionChange:r}=t,i=!1,o=null,s=null,a=null,l=0,c=!1,u=()=>{var R=pf.get(e);if(pf.delete(e),R){var{selection:F}=e,L=_$(e,R);L&&(!F||!ct.equals(L,F))&&Rt.select(e,L)}},d=()=>{var R=hf.get(e);if(hf.delete(e),!!R){if(R.at){var F=or.isPoint(R.at)?PF(e,R.at):_$(e,R.at);if(!F)return;var L=he.range(e,F);(!e.selection||!ct.equals(e.selection,L))&&Rt.select(e,F)}R.run()}},f=()=>{if(s&&(clearTimeout(s),s=null),a&&(clearTimeout(a),a=null),!S()&&!w()){u();return}i||(i=!0,setTimeout(()=>i=!1)),w()&&(i="action");var R=e.selection&&he.rangeRef(e,e.selection,{affinity:"forward"});Qu.set(e,e.marks),Frt("flush",hf.get(e),Qs.get(e));for(var F=S(),L;L=(N=Qs.get(e))===null||N===void 0?void 0:N[0];){var N,U,$=ic.get(e);$!==void 0&&(ic.delete(e),e.marks=$),$&&c===!1&&(c=null);var B=Knt(L);(!e.selection||!ct.equals(e.selection,B))&&Rt.select(e,B),L.diff.text?he.insertText(e,L.diff.text):he.deleteFragment(e),Qs.set(e,(U=Qs.get(e))===null||U===void 0?void 0:U.filter(z=>{var{id:G}=z;return G!==L.id})),$nt(e,L)||(F=!1,hf.delete(e),Qu.delete(e),i="action",pf.delete(e),n.cancel(),r.cancel(),R==null||R.unref())}var H=R==null?void 0:R.unref();if(H&&!pf.get(e)&&(!e.selection||!ct.equals(H,e.selection))&&Rt.select(e,H),w()){d();return}F&&n(),n.flush(),r.flush(),u();var q=Qu.get(e);Qu.delete(e),q!==void 0&&(e.marks=q,e.onChange())},p=R=>{o&&clearTimeout(o),o=setTimeout(()=>{vp.set(e,!1),f()},Irt)},b=R=>{vp.set(e,!0),o&&(clearTimeout(o),o=null)},v=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,L=AF.get(e);if(L){if(S()||F){L.style.display="none";return}L.style.removeProperty("display")}},m=(R,F)=>{var L,N=(L=Qs.get(e))!==null&&L!==void 0?L:[];Qs.set(e,N);var U=Vt.leaf(e,R),$=N.findIndex(q=>ze.equals(q.path,R));if($<0){var B=Fne(U.text,F);B&&N.push({path:R,diff:F,id:l++}),v();return}var H=qnt(U.text,N[$].diff,F);if(!H){N.splice($,1),v();return}N[$]=v_(v_({},N[$]),{},{diff:H})},g=function(F){var{at:L}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};c=!1,pf.delete(e),n.cancel(),r.cancel(),w()&&f(),hf.set(e,{at:L,run:F}),a=setTimeout(f)},x=R=>{var F;if(s&&(clearTimeout(s),s=null),!mv.get(e)){var{inputType:L}=R,N=null,U=R.dataTransfer||R.data||void 0;c!==!1&&L!=="insertText"&&L!=="insertCompositionText"&&(c=!1);var[$]=R.getTargetRanges();$&&(N=Gt.toSlateRange(e,$,{exactMatch:!1,suppressThrow:!0}));var B=Gt.getWindow(e),H=B.getSelection();if(!N&&H&&($=H,N=Gt.toSlateRange(e,H,{exactMatch:!1,suppressThrow:!0})),N=(F=N)!==null&&F!==void 0?F:e.selection,!!N){var q=!0;if(L.startsWith("delete")){if(ct.isExpanded(N)){var[z,G]=ct.edges(N),K=Vt.leaf(e,z.path);if(K.text.length===z.offset&&G.offset===0){var Z=he.next(e,{at:z.path,match:Xt.isText});Z&&ze.equals(Z[1],G.path)&&(N={anchor:G,focus:G})}}var ee=L.endsWith("Backward")?"backward":"forward",[V,J]=ct.edges(N),[oe,ne]=he.leaf(e,V.path),pe={text:"",start:V.offset,end:J.offset},ye=Qs.get(e),Ce=ye==null?void 0:ye.find(Re=>ze.equals(Re.path,ne)),_e=Ce?[Ce.diff,pe]:[pe],ce=kne(oe.text,..._e);if(ce.length===0&&(q=!1),ct.isExpanded(N)){if(q&&ze.equals(N.anchor.path,N.focus.path)){var Be={path:N.anchor.path,offset:V.offset},de=he.range(e,Be,Be);return M(de),m(N.anchor.path,{text:"",end:J.offset,start:V.offset})}return g(()=>he.deleteFragment(e,{direction:ee}),{at:N})}}switch(L){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return g(()=>he.deleteFragment(e),{at:N});case"deleteContent":case"deleteContentForward":{var{anchor:me}=N;if(q&&ct.isCollapsed(N)){var ie=Vt.leaf(e,me.path);if(me.offset<ie.text.length)return m(me.path,{text:"",start:me.offset,end:me.offset+1})}return g(()=>he.deleteForward(e),{at:N})}case"deleteContentBackward":{var ae,{anchor:ge}=N,X=CF($)?$.isCollapsed:!!((ae=$)!==null&&ae!==void 0&&ae.collapsed);return q&&X&&ct.isCollapsed(N)&&ge.offset>0?m(ge.path,{text:"",start:ge.offset-1,end:ge.offset}):g(()=>he.deleteBackward(e),{at:N})}case"deleteEntireSoftLine":return g(()=>{he.deleteBackward(e,{unit:"line"}),he.deleteForward(e,{unit:"line"})},{at:N});case"deleteHardLineBackward":return g(()=>he.deleteBackward(e,{unit:"block"}),{at:N});case"deleteSoftLineBackward":return g(()=>he.deleteBackward(e,{unit:"line"}),{at:N});case"deleteHardLineForward":return g(()=>he.deleteForward(e,{unit:"block"}),{at:N});case"deleteSoftLineForward":return g(()=>he.deleteForward(e,{unit:"line"}),{at:N});case"deleteWordBackward":return g(()=>he.deleteBackward(e,{unit:"word"}),{at:N});case"deleteWordForward":return g(()=>he.deleteForward(e,{unit:"word"}),{at:N});case"insertLineBreak":return g(()=>he.insertSoftBreak(e),{at:N});case"insertParagraph":return g(()=>he.insertBreak(e),{at:N});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(Ort(U))return g(()=>Gt.insertData(e,U),{at:N});var W=U!=null?U:"";if(ic.get(e)&&(W=W.replace("\uFEFF","")),L==="insertText"&&/.*\n.*\n$/.test(W)&&(W=W.slice(0,-1)),W.includes(`
`))return g(()=>{var Re=W.split(`
`);Re.forEach((Ie,it)=>{Ie&&he.insertText(e,Ie),it!==Re.length-1&&he.insertSoftBreak(e)})},{at:N});if(ze.equals(N.anchor.path,N.focus.path)){var[ve,ue]=ct.edges(N),Me={start:ve.offset,end:ue.offset,text:W};if(W&&c&&L==="insertCompositionText"){var Ae=c.start+c.text.search(/\S|$/),Ne=Me.start+Me.text.search(/\S|$/);Ne===Ae+1&&Me.end===c.start+c.text.length?(Me.start-=1,c=null,_()):c=!1}else L==="insertText"?c===null?c=Me:c&&ct.isCollapsed(N)&&c.end+c.text.length===ve.offset?c=v_(v_({},c),{},{text:c.text+W}):c=!1:c=!1;if(q){m(ve.path,Me);return}}return g(()=>he.insertText(e,W),{at:N})}}}}},w=()=>!!hf.get(e),S=()=>{var R;return!!((R=Qs.get(e))!==null&&R!==void 0&&R.length)},P=()=>w()||S(),I=()=>i,M=R=>{pf.set(e,R),s&&(clearTimeout(s),s=null);var{selection:F}=e;if(R){var L=!F||!ze.equals(F.anchor.path,R.anchor.path),N=!F||!ze.equals(F.anchor.path.slice(0,-1),R.anchor.path.slice(0,-1));(L&&c||N)&&(c=!1),(L||S())&&(s=setTimeout(f,krt))}},D=()=>{(w()||!S())&&f()},E=R=>{S()||(v(!0),setTimeout(v))},_=()=>{w()||(a=setTimeout(f))},A=R=>{if(!(S()||w())&&R.some(L=>d5(e,L,R))){var F;(F=Rne.get(e))===null||F===void 0||F()}};return{flush:f,scheduleFlush:_,hasPendingDiffs:S,hasPendingAction:w,hasPendingChanges:P,isFlushing:I,handleUserSelect:M,handleCompositionEnd:p,handleCompositionStart:b,handleDOMBeforeInput:x,handleKeyDown:E,handleDomMutations:A,handleInput:D}}function Lrt(){var t=T.useRef(!1);return T.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),t.current}var Jb=bE?T.useLayoutEffect:T.useEffect;function Brt(t,e,n){var[r]=T.useState(()=>new MutationObserver(e));Jb(()=>{r.takeRecords()}),T.useEffect(()=>{if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return r.observe(t.current,n),()=>r.disconnect()},[r,t,n])}var jrt=["node"];function U$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Urt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U$(Object(n),!0).forEach(function(r){ru(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var zrt={subtree:!0,childList:!0,characterData:!0},Vrt=Ps?t=>{var{node:e}=t,n=cA(t,jrt);if(!Ps)return null;var r=ph(),i=Lrt(),[o]=T.useState(()=>Nrt(Urt({editor:r},n)));return Brt(e,o.handleDomMutations,zrt),p5.set(r,o.scheduleFlush),i&&o.flush(),o}:()=>null;function z$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wrt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z$(Object(n),!0).forEach(function(r){ru(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var $rt=t=>{var{isLast:e,leaf:n,parent:r,text:i}=t,o=ph(),s=Gt.findPath(o,i),a=ze.parent(s),l=!!n[Ine];return o.isVoid(r)?Lt.createElement(ZD,{length:Vt.string(r).length}):n.text===""&&r.children[r.children.length-1]===i&&!o.isInline(r)&&he.string(o,a)===""?Lt.createElement(ZD,{isLineBreak:!0,isMarkPlaceholder:l}):n.text===""?Lt.createElement(ZD,{isMarkPlaceholder:l}):e&&n.text.slice(-1)===`
`?Lt.createElement(V$,{isTrailing:!0,text:n.text}):Lt.createElement(V$,{text:n.text})},V$=t=>{var{text:e,isTrailing:n=!1}=t,r=T.useRef(null),i=()=>"".concat(e!=null?e:"").concat(n?`
`:""),[o]=T.useState(i);return Jb(()=>{var s=i();r.current&&r.current.textContent!==s&&(r.current.textContent=s)}),Lt.createElement(Hrt,{ref:r},o)},Hrt=T.memo(T.forwardRef((t,e)=>Lt.createElement("span",{"data-slate-string":!0,ref:e},t.children))),ZD=t=>{var{length:e=0,isLineBreak:n=!1,isMarkPlaceholder:r=!1}=t,i={"data-slate-zero-width":n?"n":"z","data-slate-length":e};return r&&(i["data-slate-mark-placeholder"]=!0),Lt.createElement("span",Wrt({},i),!(Ps||Tne)||!n?"\uFEFF":null,n?Lt.createElement("br",null):null)};function W$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vne(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W$(Object(n),!0).forEach(function(r){ru(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Grt=Ps?300:0;function qrt(t,e){t.current&&(t.current.disconnect(),e&&(t.current=null))}function $$(t){t.current&&(clearTimeout(t.current),t.current=null)}var Krt=t=>{var{leaf:e,isLast:n,text:r,parent:i,renderPlaceholder:o,renderLeaf:s=x=>Lt.createElement(Xrt,Vne({},x))}=t,a=ph(),l=T.useRef(null),c=T.useRef(null),[u,d]=T.useState(!1),f=T.useRef(null),p=T.useCallback(x=>{if(qrt(l,x==null),x==null){var w;AF.delete(a),(w=e.onPlaceholderResize)===null||w===void 0||w.call(e,null)}else{if(AF.set(a,x),!l.current){var S=window.ResizeObserver||Mrt;l.current=new S(()=>{var P;(P=e.onPlaceholderResize)===null||P===void 0||P.call(e,x)})}l.current.observe(x),c.current=x}},[c,e,a]),b=Lt.createElement($rt,{isLast:n,leaf:e,parent:i,text:r}),v=!!e[e0];if(T.useEffect(()=>(v?f.current||(f.current=setTimeout(()=>{d(!0),f.current=null},Grt)):($$(f),d(!1)),()=>$$(f)),[v,d]),v&&u){var m={children:e.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:Jh?"inherit":void 0},contentEditable:!1,ref:p}};b=Lt.createElement(Lt.Fragment,null,o(m),b)}var g={"data-slate-leaf":!0};return s({attributes:g,children:b,leaf:e,text:r})},Yrt=Lt.memo(Krt,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&Xt.equals(e.leaf,t.leaf)&&e.leaf[e0]===t.leaf[e0]),Xrt=t=>{var{attributes:e,children:n}=t;return Lt.createElement("span",Vne({},e),n)},Qrt=t=>{for(var{decorations:e,isLast:n,parent:r,renderPlaceholder:i,renderLeaf:o,text:s}=t,a=ph(),l=T.useRef(null),c=Xt.decorations(s,e),u=Gt.findKey(a,s),d=[],f=0;f<c.length;f++){var p=c[f];d.push(Lt.createElement(Yrt,{isLast:n&&f===c.length-1,key:"".concat(u.id,"-").concat(f),renderPlaceholder:i,leaf:p,text:s,parent:r,renderLeaf:o}))}var b=T.useCallback(v=>{var m=c2.get(a);v?(m==null||m.set(u,v),Ip.set(s,v),Xb.set(v,s)):(m==null||m.delete(u),Ip.delete(s),l.current&&Xb.delete(l.current)),l.current=v},[l,a,u,s]);return Lt.createElement("span",{"data-slate-node":"text",ref:b},d)},Wne=Lt.memo(Qrt,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&art(e.decorations,t.decorations));function H$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function IF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H$(Object(n),!0).forEach(function(r){ru(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Zrt=t=>{var{decorations:e,element:n,renderElement:r=x=>Lt.createElement(eit,IF({},x)),renderPlaceholder:i,renderLeaf:o,selection:s}=t,a=ph(),l=rit(),c=a.isInline(n),u=Gt.findKey(a,n),d=T.useCallback(x=>{var w=c2.get(a);x?(w==null||w.set(u,x),Ip.set(n,x),Xb.set(x,n)):(w==null||w.delete(u),Ip.delete(n))},[a,u,n]),f=Hne({decorations:e,node:n,renderElement:r,renderPlaceholder:i,renderLeaf:o,selection:s}),p={"data-slate-node":"element",ref:d};if(c&&(p["data-slate-inline"]=!0),!c&&he.hasInlines(a,n)){var b=Vt.string(n),v=vne(b);v==="rtl"&&(p.dir=v)}if(he.isVoid(a,n)){p["data-slate-void"]=!0,!l&&c&&(p.contentEditable=!1);var m=c?"span":"div",[[g]]=Vt.texts(n);f=Lt.createElement(m,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},Lt.createElement(Wne,{renderPlaceholder:i,decorations:[],isLast:!1,parent:n,text:g})),f5.set(g,0),h5.set(g,n)}return r({attributes:p,children:f,element:n})},Jrt=Lt.memo(Zrt,(t,e)=>t.element===e.element&&t.renderElement===e.renderElement&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&srt(t.decorations,e.decorations)&&(t.selection===e.selection||!!t.selection&&!!e.selection&&ct.equals(t.selection,e.selection))),eit=t=>{var{attributes:e,children:n,element:r}=t,i=ph(),o=i.isInline(r)?"span":"div";return Lt.createElement(o,IF(IF({},e),{},{style:{position:"relative"}}),n)},$ne=T.createContext(()=>[]),tit=()=>T.useContext($ne),nit=T.createContext(!1),Hne=t=>{var{decorations:e,node:n,renderElement:r,renderPlaceholder:i,renderLeaf:o,selection:s}=t,a=tit(),l=ph();mv.set(l,!1);for(var c=Gt.findPath(l,n),u=[],d=nn.isElement(n)&&!l.isInline(n)&&he.hasInlines(l,n),f=0;f<n.children.length;f++){var p=c.concat(f),b=n.children[f],v=Gt.findKey(l,b),m=he.range(l,p),g=s&&ct.intersection(m,s),x=a([b,p]);for(var w of e){var S=ct.intersection(w,m);S&&x.push(S)}nn.isElement(b)?u.push(Lt.createElement(nit.Provider,{key:"provider-".concat(v.id),value:!!g},Lt.createElement(Jrt,{decorations:x,element:b,key:v.id,renderElement:r,renderPlaceholder:i,renderLeaf:o,selection:g}))):u.push(Lt.createElement(Wne,{decorations:x,key:v.id,isLast:d&&f===n.children.length-1,parent:n,renderPlaceholder:i,renderLeaf:o,text:b})),f5.set(b,f),h5.set(b,n)}return u},Gne=T.createContext(!1),rit=()=>T.useContext(Gne),qne=T.createContext(null),Kne=()=>{var t=T.useContext(qne);if(!t)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:e}=t;return e};function iit(){var t=ph(),e=T.useRef(!1),n=T.useRef(0),r=T.useCallback(()=>{if(!e.current){e.current=!0;var i=Gt.getWindow(t);i.cancelAnimationFrame(n.current),n.current=i.requestAnimationFrame(()=>{e.current=!1})}},[t]);return T.useEffect(()=>()=>cancelAnimationFrame(n.current),[]),{receivedUserInput:e,onUserInput:r}}var oit=(t,e)=>{var n=[],r=()=>{n=[]},i=s=>{if(e.current){var a=s.filter(l=>d5(t,l,s));n.push(...a)}};function o(){n.length>0&&(n.reverse().forEach(s=>{s.type!=="characterData"&&(s.removedNodes.forEach(a=>{s.target.insertBefore(a,s.nextSibling)}),s.addedNodes.forEach(a=>{s.target.removeChild(a)}))}),r())}return{registerMutations:i,restoreDOM:o,clear:r}},sit={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class Yne extends T.Component{constructor(){super(...arguments),ru(this,"context",null),ru(this,"manager",null),ru(this,"mutationObserver",null)}observe(){var e,{node:n}=this.props;if(!n.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(e=this.mutationObserver)===null||e===void 0||e.observe(n.current,sit)}componentDidMount(){var{receivedUserInput:e}=this.props,n=this.context;this.manager=oit(n,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,n,r,i=(e=this.mutationObserver)===null||e===void 0?void 0:e.takeRecords();if(i!=null&&i.length){var o;(o=this.manager)===null||o===void 0||o.registerMutations(i)}return(n=this.mutationObserver)===null||n===void 0||n.disconnect(),(r=this.manager)===null||r===void 0||r.restoreDOM(),null}componentDidUpdate(){var e;(e=this.manager)===null||e===void 0||e.clear(),this.observe()}componentWillUnmount(){var e;(e=this.mutationObserver)===null||e===void 0||e.disconnect()}render(){return this.props.children}}ru(Yne,"contextType",g5);var ait=Ps?Yne:t=>{var{children:e}=t;return Lt.createElement(Lt.Fragment,null,e)},lit=T.createContext(!1),cit=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],uit=["text"];function G$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ac(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G$(Object(n),!0).forEach(function(r){ru(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var dit=t=>Lt.createElement(Lt.Fragment,null,Hne(t)),fit=T.forwardRef((t,e)=>{var n=T.useCallback(V=>Lt.createElement(hit,Ac({},V)),[]),{autoFocus:r,decorate:i=pit,onDOMBeforeInput:o,placeholder:s,readOnly:a=!1,renderElement:l,renderLeaf:c,renderPlaceholder:u=n,scrollSelectionIntoView:d=mit,style:f={},as:p="div",disableDefaultStyles:b=!1}=t,v=cA(t,cit),m=Kne(),[g,x]=T.useState(!1),w=T.useRef(null),S=T.useRef([]),[P,I]=T.useState(),M=T.useRef(!1),{onUserInput:D,receivedUserInput:E}=iit(),[,_]=T.useReducer(V=>V+1,0);Rne.set(m,_),TF.set(m,a);var A=T.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);T.useEffect(()=>{w.current&&r&&w.current.focus()},[r]);var R=T.useRef(),F=T.useMemo(()=>vnt(()=>{if(mv.get(m)){F();return}var V=Gt.toDOMNode(m,m),J=V.getRootNode();if(!M.current&&Jh&&J instanceof ShadowRoot){M.current=!0;var oe=Int();oe?document.execCommand("indent"):Rt.deselect(m),M.current=!1;return}var ne=R.current;if((Ps||!Gt.isComposing(m))&&(!A.isUpdatingSelection||ne!=null&&ne.isFlushing())&&!A.isDraggingInternally){var pe=Gt.findDocumentOrShadowRoot(m),{activeElement:ye}=pe,Ce=Gt.toDOMNode(m,m),_e=Lx(pe);if(ye===Ce?(A.latestElement=ye,Df.set(m,!0)):Df.delete(m),!_e)return Rt.deselect(m);var{anchorNode:ce,focusNode:Be}=_e,de=Gt.hasEditableTarget(m,ce)||Gt.isTargetInsideNonReadonlyVoid(m,ce),me=Gt.hasTarget(m,Be);if(de&&me){var ie=Gt.toSlateRange(m,_e,{exactMatch:!1,suppressThrow:!0});ie&&(!Gt.isComposing(m)&&!(ne!=null&&ne.hasPendingChanges())&&!(ne!=null&&ne.isFlushing())?Rt.select(m,ie):ne==null||ne.handleUserSelect(ie))}a&&(!de||!me)&&Rt.deselect(m)}},100),[m,a,A]),L=T.useMemo(()=>dnt(F,0),[F]);R.current=Vrt({node:w,onDOMSelectionChange:F,scheduleOnDOMSelectionChange:L}),Jb(()=>{var V,J,oe;w.current&&(oe=u5(w.current))?(Dne.set(m,oe),wE.set(m,w.current),Ip.set(m,w.current),Xb.set(w.current,m)):Ip.delete(m);var{selection:ne}=m,pe=Gt.findDocumentOrShadowRoot(m),ye=Lx(pe);if(!(!ye||!Gt.isFocused(m)||(V=R.current)!==null&&V!==void 0&&V.hasPendingAction())){var Ce=de=>{var me=ye.type!=="None";if(!(!ne&&!me)){var ie=ye.focusNode,ae;if(Wg&&ye.rangeCount>1){var ge=ye.getRangeAt(0),X=ye.getRangeAt(ye.rangeCount-1);ge.startContainer===ie?ae=X.endContainer:ae=ge.startContainer}else ae=ye.anchorNode;var W=wE.get(m),ve=!1;if(W.contains(ae)&&W.contains(ie)&&(ve=!0),me&&ve&&ne&&!de){var ue=Gt.toSlateRange(m,ye,{exactMatch:!0,suppressThrow:!0});if(ue&&ct.equals(ue,ne)){var Me;if(!A.hasMarkPlaceholder||(Me=ae)!==null&&Me!==void 0&&(Me=Me.parentElement)!==null&&Me!==void 0&&Me.hasAttribute("data-slate-mark-placeholder"))return}}if(ne&&!Gt.hasRange(m,ne)){m.selection=Gt.toSlateRange(m,ye,{exactMatch:!1,suppressThrow:!0});return}A.isUpdatingSelection=!0;var Ae=null;try{Ae=ne&&Gt.toDOMRange(m,ne)}catch(Ne){}return Ae?(Gt.isComposing(m)&&!Ps?ye.collapseToEnd():ct.isBackward(ne)?ye.setBaseAndExtent(Ae.endContainer,Ae.endOffset,Ae.startContainer,Ae.startOffset):ye.setBaseAndExtent(Ae.startContainer,Ae.startOffset,Ae.endContainer,Ae.endOffset),d(m,Ae)):ye.removeAllRanges(),Ae}};ye.rangeCount<=1&&Ce();var _e=((J=R.current)===null||J===void 0?void 0:J.isFlushing())==="action";if(!Ps||!_e){setTimeout(()=>{A.isUpdatingSelection=!1});return}var ce=null,Be=requestAnimationFrame(()=>{if(_e){var de=me=>{try{var ie=Gt.toDOMNode(m,m);ie.focus(),Ce(me)}catch(ae){}};de(),ce=setTimeout(()=>{de(!0),A.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(Be),ce&&clearTimeout(ce)}}});var N=T.useCallback(V=>{K$(m,V);var J=Gt.toDOMNode(m,m),oe=J.getRootNode();if(M!=null&&M.current&&Jh&&oe instanceof ShadowRoot){var ne=V.getTargetRanges(),pe=ne[0],ye=new window.Range;ye.setStart(pe.startContainer,pe.startOffset),ye.setEnd(pe.endContainer,pe.endOffset);var Ce=Gt.toSlateRange(m,ye,{exactMatch:!1,suppressThrow:!1});Rt.select(m,Ce),V.preventDefault(),V.stopImmediatePropagation();return}if(D(),!a&&Gt.hasEditableTarget(m,V.target)&&!git(V,o)){var _e;if(R.current)return R.current.handleDOMBeforeInput(V);L.flush(),F.flush();var{selection:ce}=m,{inputType:Be}=V,de=V.dataTransfer||V.data||void 0,me=Be==="insertCompositionText"||Be==="deleteCompositionText";if(me&&Gt.isComposing(m))return;var ie=!1;if(Be==="insertText"&&ce&&ct.isCollapsed(ce)&&V.data&&V.data.length===1&&/[a-z ]/i.test(V.data)&&ce.anchor.offset!==0&&(ie=!0,m.marks&&(ie=!1),!mv.get(m))){var ae,ge,{anchor:X}=ce,[W,ve]=Gt.toDOMPoint(m,X),ue=(ae=W.parentElement)===null||ae===void 0?void 0:ae.closest("a"),Me=Gt.getWindow(m);if(ie&&ue&&Gt.hasDOMNode(m,ue)){var Ae,Ne=Me==null?void 0:Me.document.createTreeWalker(ue,NodeFilter.SHOW_TEXT).lastChild();Ne===W&&((Ae=Ne.textContent)===null||Ae===void 0?void 0:Ae.length)===ve&&(ie=!1)}if(ie&&W.parentElement&&(Me==null||(ge=Me.getComputedStyle(W.parentElement))===null||ge===void 0?void 0:ge.whiteSpace)==="pre"){var Re=he.above(m,{at:X.path,match:Ke=>nn.isElement(Ke)&&he.isBlock(m,Ke)});Re&&Vt.string(Re[0]).includes("	")&&(ie=!1)}}if((!Be.startsWith("delete")||Be.startsWith("deleteBy"))&&!mv.get(m)){var[Ie]=V.getTargetRanges();if(Ie){var it=Gt.toSlateRange(m,Ie,{exactMatch:!1,suppressThrow:!1});if(!ce||!ct.equals(ce,it)){ie=!1;var Ee=!me&&m.selection&&he.rangeRef(m,m.selection);Rt.select(m,it),Ee&&Bx.set(m,Ee)}}}if(me)return;if(ie||V.preventDefault(),ce&&ct.isExpanded(ce)&&Be.startsWith("delete")){var Le=Be.endsWith("Backward")?"backward":"forward";he.deleteFragment(m,{direction:Le});return}switch(Be){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{he.deleteFragment(m);break}case"deleteContent":case"deleteContentForward":{he.deleteForward(m);break}case"deleteContentBackward":{he.deleteBackward(m);break}case"deleteEntireSoftLine":{he.deleteBackward(m,{unit:"line"}),he.deleteForward(m,{unit:"line"});break}case"deleteHardLineBackward":{he.deleteBackward(m,{unit:"block"});break}case"deleteSoftLineBackward":{he.deleteBackward(m,{unit:"line"});break}case"deleteHardLineForward":{he.deleteForward(m,{unit:"block"});break}case"deleteSoftLineForward":{he.deleteForward(m,{unit:"line"});break}case"deleteWordBackward":{he.deleteBackward(m,{unit:"word"});break}case"deleteWordForward":{he.deleteForward(m,{unit:"word"});break}case"insertLineBreak":he.insertSoftBreak(m);break;case"insertParagraph":{he.insertBreak(m);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{Be==="insertFromComposition"&&Gt.isComposing(m)&&(x(!1),vp.set(m,!1)),(de==null?void 0:de.constructor.name)==="DataTransfer"?Gt.insertData(m,de):typeof de=="string"&&(ie?S.current.push(()=>he.insertText(m,de)):he.insertText(m,de));break}}var Ge=(_e=Bx.get(m))===null||_e===void 0?void 0:_e.unref();Bx.delete(m),Ge&&(!m.selection||!ct.equals(m.selection,Ge))&&Rt.select(m,Ge)}},[m,F,D,o,a,L]),U=T.useCallback(V=>{V==null?(F.cancel(),L.cancel(),wE.delete(m),Ip.delete(m),w.current&&rf&&w.current.removeEventListener("beforeinput",N)):rf&&V.addEventListener("beforeinput",N),w.current=V,typeof e=="function"?e(V):e&&(e.current=V)},[F,L,m,N,e]);Jb(()=>{var V=Gt.getWindow(m),J=ne=>{var{target:pe}=ne,ye=pe instanceof HTMLElement?pe:null,Ce=ye==null?void 0:ye.tagName;Ce==="INPUT"||Ce==="TEXTAREA"||L()};V.document.addEventListener("selectionchange",J);var oe=()=>{A.isDraggingInternally=!1};return V.document.addEventListener("dragend",oe),V.document.addEventListener("drop",oe),()=>{V.document.removeEventListener("selectionchange",J),V.document.removeEventListener("dragend",oe),V.document.removeEventListener("drop",oe)}},[L,A]);var $=i([m,[]]),B=s&&m.children.length===1&&Array.from(Vt.texts(m)).length===1&&Vt.string(m)===""&&!g,H=T.useCallback(V=>{if(V&&B){var J;I((J=V.getBoundingClientRect())===null||J===void 0?void 0:J.height)}else I(void 0)},[B]);if(B){var q=he.start(m,[]);$.push({[e0]:!0,placeholder:s,onPlaceholderResize:H,anchor:q,focus:q})}var{marks:z}=m;if(A.hasMarkPlaceholder=!1,m.selection&&ct.isCollapsed(m.selection)&&z){var{anchor:G}=m.selection,K=Vt.leaf(m,G.path),Z=cA(K,uit);if(!Xt.equals(K,z,{loose:!0})){A.hasMarkPlaceholder=!0;var ee=Object.fromEntries(Object.keys(Z).map(V=>[V,null]));$.push(Ac(Ac(Ac({[Ine]:!0},ee),z),{},{anchor:G,focus:G}))}}return T.useEffect(()=>{setTimeout(()=>{var{selection:V}=m;if(V){var{anchor:J}=V,oe=Vt.leaf(m,J.path);if(z&&!Xt.equals(oe,z,{loose:!0})){ic.set(m,z);return}}ic.delete(m)})}),Lt.createElement(Gne.Provider,{value:a},Lt.createElement(lit.Provider,{value:g},Lt.createElement($ne.Provider,{value:i},Lt.createElement(ait,{node:w,receivedUserInput:E},Lt.createElement(p,Ac(Ac({role:a?void 0:"textbox","aria-multiline":a?void 0:!0},v),{},{spellCheck:rf||!bE?v.spellCheck:!1,autoCorrect:rf||!bE?v.autoCorrect:"false",autoCapitalize:rf||!bE?v.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!a,zindex:-1,suppressContentEditableWarning:!0,ref:U,style:Ac(Ac({},b?{}:Ac({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},P?{minHeight:P}:{})),f),onBeforeInput:T.useCallback(V=>{if(!rf&&!a&&!Ss(V,v.onBeforeInput)&&Gt.hasSelectableTarget(m,V.target)&&(V.preventDefault(),!Gt.isComposing(m))){var J=V.data;he.insertText(m,J)}},[v.onBeforeInput,m,a]),onInput:T.useCallback(V=>{if(!Ss(V,v.onInput)){if(R.current){R.current.handleInput();return}for(var J of S.current)J();S.current=[],Gt.isFocused(m)||K$(m,V.nativeEvent)}},[v.onInput,m]),onBlur:T.useCallback(V=>{if(!(a||A.isUpdatingSelection||!Gt.hasSelectableTarget(m,V.target)||Ss(V,v.onBlur))){var J=Gt.findDocumentOrShadowRoot(m);if(A.latestElement!==J.activeElement){var{relatedTarget:oe}=V,ne=Gt.toDOMNode(m,m);if(oe!==ne&&!(dl(oe)&&oe.hasAttribute("data-slate-spacer"))){if(oe!=null&&ih(oe)&&Gt.hasDOMNode(m,oe)){var pe=Gt.toSlateNode(m,oe);if(nn.isElement(pe)&&!m.isVoid(pe))return}if(Jh){var ye=Lx(J);ye==null||ye.removeAllRanges()}Df.delete(m)}}}},[a,A.isUpdatingSelection,A.latestElement,m,v.onBlur]),onClick:T.useCallback(V=>{if(Gt.hasTarget(m,V.target)&&!Ss(V,v.onClick)&&ih(V.target)){var J=Gt.toSlateNode(m,V.target),oe=Gt.findPath(m,J);if(!he.hasPath(m,oe)||Vt.get(m,oe)!==J)return;if(V.detail===Znt&&oe.length>=1){var ne=oe;if(!(nn.isElement(J)&&he.isBlock(m,J))){var pe,ye=he.above(m,{match:ie=>nn.isElement(ie)&&he.isBlock(m,ie),at:oe});ne=(pe=ye==null?void 0:ye[1])!==null&&pe!==void 0?pe:oe.slice(0,1)}var Ce=he.range(m,ne);Rt.select(m,Ce);return}if(a)return;var _e=he.start(m,oe),ce=he.end(m,oe),Be=he.void(m,{at:_e}),de=he.void(m,{at:ce});if(Be&&de&&ze.equals(Be[1],de[1])){var me=he.range(m,_e);Rt.select(m,me)}}},[m,v.onClick,a]),onCompositionEnd:T.useCallback(V=>{if(Gt.hasSelectableTarget(m,V.target)){var J;if(Gt.isComposing(m)&&Promise.resolve().then(()=>{x(!1),vp.set(m,!1)}),(J=R.current)===null||J===void 0||J.handleCompositionEnd(V),Ss(V,v.onCompositionEnd)||Ps)return;if(!Jh&&!Lnt&&!Tne&&!jnt&&!Bnt&&V.data){var oe=ic.get(m);ic.delete(m),oe!==void 0&&(Qu.set(m,m.marks),m.marks=oe),he.insertText(m,V.data);var ne=Qu.get(m);Qu.delete(m),ne!==void 0&&(m.marks=ne)}}},[v.onCompositionEnd,m]),onCompositionUpdate:T.useCallback(V=>{Gt.hasSelectableTarget(m,V.target)&&!Ss(V,v.onCompositionUpdate)&&(Gt.isComposing(m)||(x(!0),vp.set(m,!0)))},[v.onCompositionUpdate,m]),onCompositionStart:T.useCallback(V=>{if(Gt.hasSelectableTarget(m,V.target)){var J;if((J=R.current)===null||J===void 0||J.handleCompositionStart(V),Ss(V,v.onCompositionStart)||Ps)return;x(!0);var{selection:oe}=m;if(oe&&ct.isExpanded(oe)){he.deleteFragment(m);return}}},[v.onCompositionStart,m]),onCopy:T.useCallback(V=>{Gt.hasSelectableTarget(m,V.target)&&!Ss(V,v.onCopy)&&!q$(V)&&(V.preventDefault(),Gt.setFragmentData(m,V.clipboardData,"copy"))},[v.onCopy,m]),onCut:T.useCallback(V=>{if(!a&&Gt.hasSelectableTarget(m,V.target)&&!Ss(V,v.onCut)&&!q$(V)){V.preventDefault(),Gt.setFragmentData(m,V.clipboardData,"cut");var{selection:J}=m;if(J)if(ct.isExpanded(J))he.deleteFragment(m);else{var oe=Vt.parent(m,J.anchor.path);he.isVoid(m,oe)&&Rt.delete(m)}}},[a,m,v.onCut]),onDragOver:T.useCallback(V=>{if(Gt.hasTarget(m,V.target)&&!Ss(V,v.onDragOver)){var J=Gt.toSlateNode(m,V.target);nn.isElement(J)&&he.isVoid(m,J)&&V.preventDefault()}},[v.onDragOver,m]),onDragStart:T.useCallback(V=>{if(!a&&Gt.hasTarget(m,V.target)&&!Ss(V,v.onDragStart)){var J=Gt.toSlateNode(m,V.target),oe=Gt.findPath(m,J),ne=nn.isElement(J)&&he.isVoid(m,J)||he.void(m,{at:oe,voids:!0});if(ne){var pe=he.range(m,oe);Rt.select(m,pe)}A.isDraggingInternally=!0,Gt.setFragmentData(m,V.dataTransfer,"drag")}},[a,m,v.onDragStart,A]),onDrop:T.useCallback(V=>{if(!a&&Gt.hasTarget(m,V.target)&&!Ss(V,v.onDrop)){V.preventDefault();var J=m.selection,oe=Gt.findEventRange(m,V),ne=V.dataTransfer;Rt.select(m,oe),A.isDraggingInternally&&J&&!ct.equals(J,oe)&&!he.void(m,{at:oe,voids:!0})&&Rt.delete(m,{at:J}),Gt.insertData(m,ne),Gt.isFocused(m)||Gt.focus(m)}},[a,m,v.onDrop,A]),onDragEnd:T.useCallback(V=>{!a&&A.isDraggingInternally&&v.onDragEnd&&Gt.hasTarget(m,V.target)&&v.onDragEnd(V)},[a,A,v,m]),onFocus:T.useCallback(V=>{if(!a&&!A.isUpdatingSelection&&Gt.hasEditableTarget(m,V.target)&&!Ss(V,v.onFocus)){var J=Gt.toDOMNode(m,m),oe=Gt.findDocumentOrShadowRoot(m);if(A.latestElement=oe.activeElement,Wg&&V.target!==J){J.focus();return}Df.set(m,!0)}},[a,A,m,v.onFocus]),onKeyDown:T.useCallback(V=>{if(!a&&Gt.hasEditableTarget(m,V.target)){var J;(J=R.current)===null||J===void 0||J.handleKeyDown(V);var{nativeEvent:oe}=V;if(Gt.isComposing(m)&&oe.isComposing===!1&&(vp.set(m,!1),x(!1)),Ss(V,v.onKeyDown)||Gt.isComposing(m))return;var{selection:ne}=m,pe=m.children[ne!==null?ne.focus.path[0]:0],ye=vne(Vt.string(pe))==="rtl";if(Mi.isRedo(oe)){V.preventDefault();var Ce=m;typeof Ce.redo=="function"&&Ce.redo();return}if(Mi.isUndo(oe)){V.preventDefault();var _e=m;typeof _e.undo=="function"&&_e.undo();return}if(Mi.isMoveLineBackward(oe)){V.preventDefault(),Rt.move(m,{unit:"line",reverse:!0});return}if(Mi.isMoveLineForward(oe)){V.preventDefault(),Rt.move(m,{unit:"line"});return}if(Mi.isExtendLineBackward(oe)){V.preventDefault(),Rt.move(m,{unit:"line",edge:"focus",reverse:!0});return}if(Mi.isExtendLineForward(oe)){V.preventDefault(),Rt.move(m,{unit:"line",edge:"focus"});return}if(Mi.isMoveBackward(oe)){V.preventDefault(),ne&&ct.isCollapsed(ne)?Rt.move(m,{reverse:!ye}):Rt.collapse(m,{edge:ye?"end":"start"});return}if(Mi.isMoveForward(oe)){V.preventDefault(),ne&&ct.isCollapsed(ne)?Rt.move(m,{reverse:ye}):Rt.collapse(m,{edge:ye?"start":"end"});return}if(Mi.isMoveWordBackward(oe)){V.preventDefault(),ne&&ct.isExpanded(ne)&&Rt.collapse(m,{edge:"focus"}),Rt.move(m,{unit:"word",reverse:!ye});return}if(Mi.isMoveWordForward(oe)){V.preventDefault(),ne&&ct.isExpanded(ne)&&Rt.collapse(m,{edge:"focus"}),Rt.move(m,{unit:"word",reverse:ye});return}if(rf){if((Mne||Jh)&&ne&&(Mi.isDeleteBackward(oe)||Mi.isDeleteForward(oe))&&ct.isCollapsed(ne)){var ce=Vt.parent(m,ne.anchor.path);if(nn.isElement(ce)&&he.isVoid(m,ce)&&(he.isInline(m,ce)||he.isBlock(m,ce))){V.preventDefault(),he.deleteBackward(m,{unit:"block"});return}}}else{if(Mi.isBold(oe)||Mi.isItalic(oe)||Mi.isTransposeCharacter(oe)){V.preventDefault();return}if(Mi.isSoftBreak(oe)){V.preventDefault(),he.insertSoftBreak(m);return}if(Mi.isSplitBlock(oe)){V.preventDefault(),he.insertBreak(m);return}if(Mi.isDeleteBackward(oe)){V.preventDefault(),ne&&ct.isExpanded(ne)?he.deleteFragment(m,{direction:"backward"}):he.deleteBackward(m);return}if(Mi.isDeleteForward(oe)){V.preventDefault(),ne&&ct.isExpanded(ne)?he.deleteFragment(m,{direction:"forward"}):he.deleteForward(m);return}if(Mi.isDeleteLineBackward(oe)){V.preventDefault(),ne&&ct.isExpanded(ne)?he.deleteFragment(m,{direction:"backward"}):he.deleteBackward(m,{unit:"line"});return}if(Mi.isDeleteLineForward(oe)){V.preventDefault(),ne&&ct.isExpanded(ne)?he.deleteFragment(m,{direction:"forward"}):he.deleteForward(m,{unit:"line"});return}if(Mi.isDeleteWordBackward(oe)){V.preventDefault(),ne&&ct.isExpanded(ne)?he.deleteFragment(m,{direction:"backward"}):he.deleteBackward(m,{unit:"word"});return}if(Mi.isDeleteWordForward(oe)){V.preventDefault(),ne&&ct.isExpanded(ne)?he.deleteFragment(m,{direction:"forward"}):he.deleteForward(m,{unit:"word"});return}}}},[a,m,v.onKeyDown]),onPaste:T.useCallback(V=>{!a&&Gt.hasEditableTarget(m,V.target)&&!Ss(V,v.onPaste)&&(!rf||Ant(V.nativeEvent)||Jh)&&(V.preventDefault(),Gt.insertData(m,V.clipboardData))},[a,m,v.onPaste])}),Lt.createElement(dit,{decorations:$,node:m,renderElement:l,renderPlaceholder:u,renderLeaf:c,selection:m.selection}))))))}),hit=t=>{var{attributes:e,children:n}=t;return Lt.createElement("span",Ac({},e),n,Ps&&Lt.createElement("br",null))},pit=()=>[],mit=(t,e)=>{if(e.getBoundingClientRect&&(!t.selection||t.selection&&ct.isCollapsed(t.selection))){var n=e.startContainer.parentElement;n.getBoundingClientRect=e.getBoundingClientRect.bind(e),bnt(n,{scrollMode:"if-needed"}),delete n.getBoundingClientRect}},Ss=(t,e)=>{if(!e)return!1;var n=e(t);return n!=null?n:t.isDefaultPrevented()||t.isPropagationStopped()},q$=t=>ih(t.target)&&(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement),git=(t,e)=>{if(!e)return!1;var n=e(t);return n!=null?n:t.defaultPrevented},K$=(t,e)=>{var n=t;if(e.inputType==="historyUndo"&&typeof n.undo=="function"){n.undo();return}if(e.inputType==="historyRedo"&&typeof n.redo=="function"){n.redo();return}},vit=T.createContext(!1),yit=T.createContext({});function xit(t){var e=T.useRef([]).current,n=T.useRef({editor:t}).current,r=T.useCallback(o=>{n.editor=o,e.forEach(s=>s(o))},[e,n]),i=T.useMemo(()=>({getSlate:()=>n.editor,addEventListener:o=>(e.push(o),()=>{e.splice(e.indexOf(o),1)})}),[e,n]);return{selectorContext:i,onChange:r}}var Xne=parseInt(Lt.version.split(".")[0],10),bit=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],wit=t=>{var{editor:e,children:n,onChange:r,onSelectionChange:i,onValueChange:o,initialValue:s}=t,a=cA(t,bit),[l,c]=Lt.useState(()=>{if(!Vt.isNodeList(s))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(Do.stringify(s)));if(!he.isEditor(e))throw new Error("[Slate] editor is invalid! You passed: ".concat(Do.stringify(e)));return e.children=s,Object.assign(e,a),{v:0,editor:e}}),{selectorContext:u,onChange:d}=xit(e),f=T.useCallback(v=>{var m;switch(r&&r(e.children),v==null||(m=v.operation)===null||m===void 0?void 0:m.type){case"set_selection":i==null||i(e.selection);break;default:o==null||o(e.children)}c(g=>({v:g.v+1,editor:e})),d(e)},[e,d,r,i,o]);T.useEffect(()=>(MF.set(e,f),()=>{MF.set(e,()=>{})}),[e,f]);var[p,b]=T.useState(Gt.isFocused(e));return T.useEffect(()=>{b(Gt.isFocused(e))},[e]),Jb(()=>{var v=()=>b(Gt.isFocused(e));return Xne>=17?(document.addEventListener("focusin",v),document.addEventListener("focusout",v),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",v)}):(document.addEventListener("focus",v,!0),document.addEventListener("blur",v,!0),()=>{document.removeEventListener("focus",v,!0),document.removeEventListener("blur",v,!0)})},[]),Lt.createElement(yit.Provider,{value:u},Lt.createElement(qne.Provider,{value:l},Lt.createElement(g5.Provider,{value:l.editor},Lt.createElement(vit.Provider,{value:p},n))))},Sit=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",r=e;r=Qnt(r,n);var{onChange:i}=r;return r.onChange=o=>{var s=Xne<18?tfe.unstable_batchedUpdates:a=>a();s(()=>{i(o)})},r},_it={isHistory(t){return zo(t)&&Array.isArray(t.redos)&&Array.isArray(t.undos)&&(t.redos.length===0||Pf.isOperationList(t.redos[0].operations))&&(t.undos.length===0||Pf.isOperationList(t.undos[0].operations))}},JD=new WeakMap,Vh=new WeakMap,y_=new WeakMap,Ic={isHistoryEditor(t){return _it.isHistory(t.history)&&he.isEditor(t)},isMerging(t){return Vh.get(t)},isSplittingOnce(t){return y_.get(t)},setSplittingOnce(t,e){y_.set(t,e)},isSaving(t){return JD.get(t)},redo(t){t.redo()},undo(t){t.undo()},withMerging(t,e){var n=Ic.isMerging(t);Vh.set(t,!0),e(),Vh.set(t,n)},withNewBatch(t,e){var n=Ic.isMerging(t);Vh.set(t,!0),y_.set(t,!0),e(),Vh.set(t,n),y_.delete(t)},withoutMerging(t,e){var n=Ic.isMerging(t);Vh.set(t,!1),e(),Vh.set(t,n)},withoutSaving(t,e){var n=Ic.isSaving(t);JD.set(t,!1);try{e()}finally{JD.set(t,n)}}},Eit=t=>{var e=t,{apply:n}=e;return e.history={undos:[],redos:[]},e.redo=()=>{var{history:r}=e,{redos:i}=r;if(i.length>0){var o=i[i.length-1];o.selectionBefore&&Rt.setSelection(e,o.selectionBefore),Ic.withoutSaving(e,()=>{he.withoutNormalizing(e,()=>{for(var s of o.operations)e.apply(s)})}),r.redos.pop(),e.writeHistory("undos",o)}},e.undo=()=>{var{history:r}=e,{undos:i}=r;if(i.length>0){var o=i[i.length-1];Ic.withoutSaving(e,()=>{he.withoutNormalizing(e,()=>{var s=o.operations.map(Pf.inverse).reverse();for(var a of s)e.apply(a);o.selectionBefore&&Rt.setSelection(e,o.selectionBefore)})}),e.writeHistory("redos",o),r.undos.pop()}},e.apply=r=>{var{operations:i,history:o}=e,{undos:s}=o,a=s[s.length-1],l=a&&a.operations[a.operations.length-1],c=Ic.isSaving(e),u=Ic.isMerging(e);if(c==null&&(c=Ait(r)),c){if(u==null&&(a==null?u=!1:i.length!==0?u=!0:u=Cit(r,l)),Ic.isSplittingOnce(e)&&(u=!1,Ic.setSplittingOnce(e,void 0)),a&&u)a.operations.push(r);else{var d={operations:[r],selectionBefore:e.selection};e.writeHistory("undos",d)}for(;s.length>100;)s.shift();o.redos=[]}n(r)},e.writeHistory=(r,i)=>{e.history[r].push(i)},e},Cit=(t,e)=>!!(e&&t.type==="insert_text"&&e.type==="insert_text"&&t.offset===e.offset+e.text.length&&ze.equals(t.path,e.path)||e&&t.type==="remove_text"&&e.type==="remove_text"&&t.offset+t.text.length===e.offset&&ze.equals(t.path,e.path)),Ait=(t,e)=>t.type!=="set_selection",Qne={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Y$=Lt.createContext&&Lt.createContext(Qne),Tit=["attr","size","title"];function Mit(t,e){if(t==null)return{};var n=Pit(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Pit(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function uA(){return uA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uA.apply(this,arguments)}function X$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X$(Object(n),!0).forEach(function(r){Dit(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dit(t,e,n){return e=Rit(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rit(t){var e=Iit(t,"string");return typeof e=="symbol"?e:e+""}function Iit(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zne(t){return t&&t.map((e,n)=>Lt.createElement(e.tag,dA({key:n},e.attr),Zne(e.child)))}function Zw(t){return e=>Lt.createElement(kit,uA({attr:dA({},t.attr)},e),Zne(t.child))}function kit(t){var e=n=>{var{attr:r,size:i,title:o}=t,s=Mit(t,Tit),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),Lt.createElement("svg",uA({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:l,style:dA(dA({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&Lt.createElement("title",null,o),t.children)};return Y$!==void 0?Lt.createElement(Y$.Consumer,null,n=>e(n)):e(Qne)}function Fit(t){return Zw({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M17.061 11.22A4.46 4.46 0 0 0 18 8.5C18 6.019 15.981 4 13.5 4H6v15h8c2.481 0 4.5-2.019 4.5-4.5a4.48 4.48 0 0 0-1.439-3.28zM13.5 7c.827 0 1.5.673 1.5 1.5s-.673 1.5-1.5 1.5H9V7h4.5zm.5 9H9v-3h5c.827 0 1.5.673 1.5 1.5S14.827 16 14 16z"},child:[]}]})(t)}function Oit(t){return Zw({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19 7V4H9v3h2.868L9.012 17H5v3h10v-3h-2.868l2.856-10z"},child:[]}]})(t)}function Nit(t){return Zw({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M5 18h14v2H5zM6 4v6c0 3.309 2.691 6 6 6s6-2.691 6-6V4h-2v6c0 2.206-1.794 4-4 4s-4-1.794-4-4V4H6z"},child:[]}]})(t)}function Lit(t){return Zw({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M22 18h-2v1h3v1h-4v-2c0-.55.45-1 1-1h2v-1h-3v-1h3c.55 0 1 .45 1 1v1c0 .55-.45 1-1 1zM5.88 18h2.66l3.4-5.42h.12l3.4 5.42h2.66l-4.65-7.27L17.81 4h-2.68l-3.07 4.99h-.12L8.85 4H6.19l4.32 6.73L5.88 18z"},child:[]}]})(t)}function Bit(t){return Zw({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M22 7h-2v1h3v1h-4V7c0-.55.45-1 1-1h2V5h-3V4h3c.55 0 1 .45 1 1v1c0 .55-.45 1-1 1zM5.88 20h2.66l3.4-5.42h.12l3.4 5.42h2.66l-4.65-7.27L17.81 6h-2.68l-3.07 4.99h-.12L8.85 6H6.19l4.32 6.73L5.88 20z"},child:[]}]})(t)}function jit(t,e,n,r,i,o,s){try{let l=t.selection;if(typeof window!="undefined"&&window.hasOwnProperty("_activeSlateEditor"),!l&&n.current)try{he.hasPath(t,n.current.anchor.path)&&he.hasPath(t,n.current.focus.path)?(Rt.select(t,n.current),l=n.current,Gt.focus(t),console.log("Restored selection from lastSelectionRef")):console.log("Cannot restore selection - paths no longer exist")}catch(S){console.error("Failed to restore selection from ref:",S)}if(!l)try{const S=he.start(t,[]);Rt.select(t,S),l={anchor:S,focus:S},console.log("Positioned cursor at document start as fallback")}catch(S){console.warn("applyMarkSafely: No valid selection and cannot position at start. Aborting.");return}if(console.log("Using selection:",JSON.stringify(l)),ct.isCollapsed(l)){console.log("Selection is collapsed - attempting to expand");try{const[S,P]=he.node(t,l.anchor.path);if(Xt.isText(S)&&S.text.length>0){const I=S.text.substring(0,l.anchor.offset),M=S.text.substring(l.anchor.offset),D=/\s/;if(I.length>0&&!D.test(I.charAt(I.length-1))||M.length>0&&!D.test(M.charAt(0))){let _=l.anchor.offset,A=l.anchor.offset;for(;_>0&&!D.test(S.text.charAt(_-1));)_--;for(;A<S.text.length&&!D.test(S.text.charAt(A));)A++;const R={anchor:{path:l.anchor.path,offset:_},focus:{path:l.anchor.path,offset:A}};console.log("Expanded selection to word:",JSON.stringify(R)),Rt.select(t,R),l=R}else if(S.text.length>0){let _=Math.max(0,l.anchor.offset-1),A=Math.min(S.text.length,l.anchor.offset+1);_===A&&(_>0?_--:A<S.text.length&&A++);const R={anchor:{path:l.anchor.path,offset:_},focus:{path:l.anchor.path,offset:A}};console.log("Expanded selection to nearby chars:",JSON.stringify(R)),Rt.select(t,R),l=R}}}catch(S){console.error("Failed to expand collapsed selection:",S)}}const u=ct.isForward(l),d=j({},l),f=ct.start(l),p=ct.end(l),b=[...f.path],v=f.offset,m=[...p.path],g=p.offset,x=ze.parent(b);let w=!1;try{const S=[];for(const[P,I]of he.nodes(t,{at:l,match:Xt.isText}))if(S.push([P,I]),P[e]){w=!0;break}console.log(`Format ${e} isActive:`,w)}catch(S){console.error("Error checking format status:",S)}try{w?(he.removeMark(t,e),console.log(`Removed ${e} mark`)):(he.addMark(t,e,!0),console.log(`Added ${e} mark`));const S=se(j({},r.current),{[e]:!w});r.current=S,i(S);try{const P=Vt.get(t,x);if(!nn.isElement(P))throw new Error("Expected paragraph to be an Element");console.log("Node structure after format:",JSON.stringify(P));const I=P.children.filter(M=>Xt.isText(M));console.log(`Paragraph now has ${I.length} text nodes`)}catch(P){console.error("Error getting paragraph structure:",P)}typeof window!="undefined"&&window.hasOwnProperty("_activeSlateEditor"),Gt.focus(t),o(!0),setTimeout(()=>{try{let P=[...x,0],I=[...x,0],M=v,D=g;const E=Vt.get(t,x);if(!nn.isElement(E))throw new Error("Expected paragraph to be an Element");const _=E.children;console.log(`Searching for new selection in ${_.length} children nodes`);let A=0,R=!1,F=!1;for(let N=0;N<_.length;N++){const U=_[N];if(!Xt.isText(U))continue;const $=[...x,N],B=U.text.length,H=A+B;if(!R&&A<=v&&v<=H&&(P=$,M=v-A,R=!0,console.log(`Found start point in node ${N}, offset ${M}`)),!F&&A<=g&&g<=H&&(I=$,D=g-A,F=!0,console.log(`Found end point in node ${N}, offset ${D}`)),R&&F)break;A+=B}if(R||(P=[...x,0],M=0,console.log("Using fallback for start point")),!F){if(R)I=P,D=M;else{const N=_.length-1;I=[...x,N];const U=_[N];D=Xt.isText(U)?U.text.length:0}console.log("Using fallback for end point")}const L={anchor:{path:u?P:I,offset:u?M:D},focus:{path:u?I:P,offset:u?D:M}};try{Rt.select(t,L),console.log("Selection restored at:",JSON.stringify(L)),n.current=t.selection,typeof window!="undefined"&&window.hasOwnProperty("_activeSlateEditor")}catch(N){console.error("Error restoring selection:",N);try{const U=he.start(t,x);Rt.select(t,U),console.log("Used paragraph start as fallback selection"),n.current=t.selection}catch(U){console.error("Failed to set fallback selection:",U)}}}catch(P){console.error("Error in selection restoration:",P)}},10)}catch(S){console.error("Error applying format:",S)}}catch(a){console.error("applyMarkSafely error:",a)}}const Uit=({attributes:t,children:e,leaf:n})=>(n.bold&&(e=h.jsx("strong",{children:e})),n.italic&&(e=h.jsx("em",{children:e})),n.underline&&(e=h.jsx("u",{children:e})),n.subscript&&(e=h.jsx("sub",{children:e})),n.superscript&&(e=h.jsx("sup",{children:e})),h.jsx("span",se(j({},t),{children:e}))),Lu=!0,zit=({title:t,children:e})=>h.jsxs("div",{className:"simple-tooltip-container",children:[h.jsx("div",{className:"simple-tooltip-content",children:t}),e]}),Vit=Lt.forwardRef((c,l)=>{var u=c,{children:t,onClick:e,onMouseDown:n,onMouseEnter:r,onMouseLeave:i,active:o,"aria-label":s}=u,a=Dt(u,["children","onClick","onMouseDown","onMouseEnter","onMouseLeave","active","aria-label"]);return h.jsx("button",se(j({ref:l,className:`toolbar-btn ${o?"active":""}`,onClick:e,onMouseDown:n,onMouseEnter:r,onMouseLeave:i,"aria-label":s,type:"button"},a),{children:t}))}),eR=t=>{if(!t.selection)return{};try{if(t.children.length===0)return{};let e=t.selection.focus.path;e=[...e];let n,r;try{[n,r]=he.leaf(t,e)}catch(o){try{Lu&&console.log("Getting leaf at start of document as fallback");let s=he.start(t,[]);[n,r]=he.leaf(t,s.path)}catch(s){return console.error("Failed to get any valid leaf:",s),{}}}if(!n)return{};Lu&&console.log("Current leaf node format:",n);const i={};return Object.keys(n).forEach(o=>{o!=="text"&&(i[o]=n[o])}),i}catch(e){return console.error("Error getting leaf format:",e),{}}},Wit=T.forwardRef(({value:t,onChange:e,placeholder:n="",className:r="",compact:i=!1,showToolbar:o=!0},s)=>{const a=T.useMemo(()=>{const $=Eit(Sit(Itt())),{onChange:B}=$;return $.onChange=()=>{console.log("Editor onChange called, selection:",$.selection),B()},$},[]),l=T.useRef(`editor-${Math.random().toString(36).substring(2,9)}`),c=T.useRef(!1),u=T.useRef(null);T.useEffect(()=>{typeof window!="undefined"&&!window.hasOwnProperty("_activeSlateEditor")&&(window._activeSlateEditor={id:null,selection:null,timestamp:0});const $=()=>{const H=window._activeSlateEditor;H.id=l.current,H.timestamp=Date.now(),console.log(`Editor ${l.current} is now active`)},B=u.current;return B&&(B.addEventListener("focus",$,!0),window._activeSlateEditor.id||(window._activeSlateEditor.id=l.current)),()=>{B&&B.removeEventListener("focus",$,!0)}},[]);const d=T.useCallback(()=>{var $;a.selection&&(m.current=a.selection,(($=window._activeSlateEditor)==null?void 0:$.id)===l.current&&(window._activeSlateEditor.selection=a.selection,window._activeSlateEditor.timestamp=Date.now(),console.log(`Saved selection in active editor ${l.current}:`,a.selection)))},[a]),f=T.useCallback(()=>{var $;try{if((($=window._activeSlateEditor)==null?void 0:$.id)===l.current){const B=m.current;B&&(he.hasPath(a,B.anchor.path)&&he.hasPath(a,B.focus.path)?(Rt.select(a,B),Lu&&console.log(`Restored selection in editor ${l.current}`)):Lu&&console.log(`Couldn't restore selection in editor ${l.current} - paths don't exist`))}}catch(B){console.error("Error restoring selection:",B)}},[a]),p=T.useRef(t),[b,v]=T.useState(()=>{c.current=!0;const $=Q$(t);return p.current=t,console.log("Initial editor state:",$),$}),m=T.useRef(null),g=T.useRef({bold:!1,italic:!1,underline:!1,subscript:!1,superscript:!1}),[x,w]=T.useState(g.current),[S,P]=T.useState(!1),I=T.useRef(!1),[M,D]=T.useState(!1),[E,_]=T.useState(!1),A=T.useRef(null);T.useEffect(()=>{if(t===p.current)return;if(S){console.log("Skipping value update while editor is focused");return}p.current=t;const $=Q$(t),B=a.selection;console.log("Updating editor state from props:",$);try{a.children=$,a.onChange(),v($)}catch(H){console.error("Error updating editor content:",H)}B&&setTimeout(()=>{try{Rt.select(a,B)}catch(H){console.error("Failed to restore selection after value update:",H)}},0)},[t,a,S]),T.useEffect(()=>{console.log("SlateEditor rendered, isFocused:",S)}),T.useEffect(()=>{const $=H=>{const q=H.target;if(q.closest(".inline-toolbar")||q.getAttribute("data-toolbar-button")==="true"){const G=q.closest(".slate-editor-container");if(!G)return;G.getAttribute("data-editor-id")===l.current&&(console.log(`Toolbar interaction detected for editor ${l.current}`),I.current=!0,H.preventDefault(),d())}},B=()=>{I.current&&(console.log(`Toolbar interaction complete for editor ${l.current}`),setTimeout(()=>{var H;try{((H=window._activeSlateEditor)==null?void 0:H.id)===l.current&&(Gt.focus(a),P(!0),f())}catch(q){console.error("Error maintaining focus after toolbar interaction",q)}I.current=!1},10))};return document.addEventListener("mousedown",$,!0),document.addEventListener("mouseup",B,!0),()=>{document.removeEventListener("mousedown",$,!0),document.removeEventListener("mouseup",B,!0)}},[a,d,f]),T.useEffect(()=>{if(a.selection)try{const $=eR(a),B={bold:!!$.bold,italic:!!$.italic,underline:!!$.underline,subscript:!!$.subscript,superscript:!!$.superscript};JP(g.current,B)||(Lu&&console.log("Updating marks from selection change:",B),g.current=B,w(B)),!M&&S&&D(!0)}catch($){console.error("Error in selection effect:",$)}},[a.selection,a,M,S]);const R=T.useCallback($=>{v($);const B=a.selection;console.log("handleChange - selection:",B?ct.isCollapsed(B):"null");try{if(D(!!B||E),B)try{const z=eR(a);let G=z;if(ct.isExpanded(B))try{const Z=he.marks(a)||{};G=j(j({},z),Z)}catch(Z){console.error("Error getting marks:",Z)}const K={bold:!!G.bold,italic:!!G.italic,underline:!!G.underline,subscript:!!G.subscript,superscript:!!G.superscript};JP(g.current,K)||(Lu&&console.log("Updating marks from selection change:",K),g.current=K,w(K))}catch(z){console.error("Error updating marks:",z)}const q=$it($);Lu&&console.log("Sending onChange to parent with HTML:",q,"HTML length:",q.length),e(q)}catch(H){console.error("Error in handleChange:",H)}},[a,E,e]),F=T.useCallback(()=>{console.log(`Editor ${l.current} focused`),A.current&&(clearTimeout(A.current),A.current=null),P(!0),typeof window!="undefined"&&(window._activeSlateEditor={id:l.current,selection:a.selection,timestamp:Date.now()}),d(),f()},[a,d,f]),L=T.useCallback($=>{if(console.log(`Editor ${l.current} blurred`),d(),I.current){console.log("Ignoring blur during toolbar interaction");return}A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{I.current?console.log("Prevented blur state change due to toolbar interaction"):P(!1),A.current=null},50)},[d]),N=T.useCallback($=>{var H,q,z;if(console.log("Key pressed:",$.key),$.metaKey||$.ctrlKey)switch($.key){case"b":{$.preventDefault();const G="bold";x[G]||!!((H=he.marks(a))!=null&&H[G])?(he.removeMark(a,G),g.current.bold=!1):(he.addMark(a,G,!0),g.current.bold=!0),w(j({},g.current));break}case"i":{$.preventDefault();const G="italic";x[G]||!!((q=he.marks(a))!=null&&q[G])?(he.removeMark(a,G),g.current.italic=!1):(he.addMark(a,G,!0),g.current.italic=!0),w(j({},g.current));break}case"u":{$.preventDefault();const G="underline";x[G]||!!((z=he.marks(a))!=null&&z[G])?(he.removeMark(a,G),g.current.underline=!1):(he.addMark(a,G,!0),g.current.underline=!0),w(j({},g.current));break}}m.current&&setTimeout(()=>{if(!a.selection&&S)try{Lu&&console.log("Restoring selection after keypress"),Rt.select(a,m.current)}catch(G){console.error("Failed to restore selection after keypress:",G)}},0)},[a,x,S]),U=T.useRef(a);return T.useEffect(()=>{U.current=a;const $=()=>{if(a.selection)try{m.current=a.selection;const H=eR(a),q={bold:!!H.bold,italic:!!H.italic,underline:!!H.underline,subscript:!!H.subscript,superscript:!!H.superscript};JP(g.current,q)||(g.current=q,w(q))}catch(H){console.error("Error updating selection state:",H)}console.log("Selection at capture:",JSON.stringify(a.selection))},B=new MutationObserver(()=>{U.current.selection&&$()});try{const H=Gt.toDOMNode(a,a);B.observe(H,{subtree:!0,characterData:!0,childList:!0})}catch(H){console.error("Could not observe editor DOM:",H)}return()=>{B.disconnect()}},[a]),h.jsx("div",{className:`slate-editor-container ${i?"compact":""} ${r}`,ref:u,"data-focused":S||I.current,"data-editor-id":l.current,children:h.jsx(wit,{editor:a,initialValue:b,onChange:R,onSelectionChange:$=>{console.log("Selection changed:",$)},children:h.jsxs("div",{className:"slate-editor-with-toolbar",children:[h.jsx(fit,{className:"slate-editor",placeholder:n,renderLeaf:$=>h.jsx(Uit,j({},$)),onFocus:F,onBlur:L,onKeyDown:N,autoFocus:!1}),o&&h.jsxs("div",{className:"inline-toolbar always-visible",children:[h.jsx(wy,{format:"bold",icon:h.jsx(Fit,{size:16}),toolbarRef:I,activeMarks:x,lastSelectionRef:m,activeMarksRef:g,setActiveMarks:w,setIsFocused:P,isFocused:S}),h.jsx(wy,{format:"italic",icon:h.jsx(Oit,{size:16}),toolbarRef:I,activeMarks:x,lastSelectionRef:m,activeMarksRef:g,setActiveMarks:w,setIsFocused:P,isFocused:S}),h.jsx(wy,{format:"underline",icon:h.jsx(Nit,{size:16}),toolbarRef:I,activeMarks:x,lastSelectionRef:m,activeMarksRef:g,setActiveMarks:w,setIsFocused:P,isFocused:S}),h.jsx(wy,{format:"subscript",icon:h.jsx(Lit,{size:16}),toolbarRef:I,activeMarks:x,lastSelectionRef:m,activeMarksRef:g,setActiveMarks:w,setIsFocused:P,isFocused:S}),h.jsx(wy,{format:"superscript",icon:h.jsx(Bit,{size:16}),toolbarRef:I,activeMarks:x,lastSelectionRef:m,activeMarksRef:g,setActiveMarks:w,setIsFocused:P,isFocused:S})]})]})})})}),wy=({format:t,icon:e,toolbarRef:n,activeMarks:r,lastSelectionRef:i,activeMarksRef:o,setActiveMarks:s,setIsFocused:a,isFocused:l})=>{const c=Kne(),u=T.useRef(null),d=T.useRef(!1),f=(m,g)=>{m.preventDefault(),m.stopPropagation(),d.current=!0,n.current=!0;try{jit(c,g,i,o,s,a)}catch(x){console.error("Error during format operation:",x)}finally{setTimeout(()=>{d.current=!1,n.current=!1},100)}},p=()=>{console.log(`Mouse entered ${t} button`),n.current=!0},b=()=>{console.log(`Mouse left ${t} button`),d.current||(n.current=!1)},v=m=>{m.preventDefault(),m.stopPropagation(),f(m,t)};return h.jsx(zit,{title:`${t.charAt(0).toUpperCase()+t.slice(1)}`,children:h.jsx(Vit,{ref:u,onMouseDown:v,onMouseEnter:p,onMouseLeave:b,active:r[t],"aria-label":t,"data-toolbar-button":"true","data-button-format":t,children:e})})},Q$=t=>{if(console.log("Deserializing HTML:",t),!t)return console.log("Received empty value for HTML deserialization:",t),[{type:"paragraph",children:[{text:""}]}];if(typeof t=="object"&&t!==null)if(t.name&&typeof t.name=="string")console.log("Extracting name from object:",t.name),t=t.name;else if(t.text&&typeof t.text=="string")console.log("Extracting text from object:",t.text),t=t.text;else return console.log("Received object value for HTML deserialization, using empty string:",t),[{type:"paragraph",children:[{text:""}]}];if(typeof t!="string")return console.log("Received non-string value for HTML deserialization:",t),[{type:"paragraph",children:[{text:""}]}];if(t.trim()==="")return[{type:"paragraph",children:[{text:""}]}];try{const e=document.createElement("div");if(e.innerHTML=t,e.childNodes.length>0&&(e.childNodes[0].nodeType===3||e.childNodes[0].nodeType===1&&!["P","DIV"].includes(e.childNodes[0].tagName))){const o=e.innerHTML;e.innerHTML=`<p>${o}</p>`}const n=o=>{if(o.nodeType===o.TEXT_NODE)return{text:o.textContent||""};if(o.nodeType!==o.ELEMENT_NODE)return null;const s=o;if(["STRONG","B","EM","I","U","SUB","SUP"].includes(s.tagName)){const l={};(s.tagName==="STRONG"||s.tagName==="B")&&(l.bold=!0),(s.tagName==="EM"||s.tagName==="I")&&(l.italic=!0),s.tagName==="U"&&(l.underline=!0),s.tagName==="SUB"&&(l.subscript=!0),s.tagName==="SUP"&&(l.superscript=!0);const c=[];return Array.from(s.childNodes).forEach(u=>{const d=n(u);d&&(Array.isArray(d)?d.forEach(f=>{Xt.isText(f)?c.push(j(j({},f),l)):c.push(f)}):Xt.isText(d)?c.push(j(j({},d),l)):c.push(d))}),c.length===0&&s.textContent?j({text:s.textContent},l):c.length>0?c:null}if(s.tagName==="P"||s.tagName==="DIV"){const l=[];return Array.from(s.childNodes).forEach(c=>{const u=n(c);if(u)if(Array.isArray(u))u.forEach(d=>{if(Xt.isText(d))l.push(d);else{const f=d;f.children&&f.children.length>0&&l.push(...f.children)}});else if(Xt.isText(u))l.push(u);else{const d=u;d.children&&d.children.length>0&&l.push(...d.children)}}),l.length===0&&s.textContent&&l.push({text:s.textContent}),{type:"paragraph",children:l.length>0?l:[{text:""}]}}const a=[];return Array.from(s.childNodes).forEach(l=>{const c=n(l);c&&(Array.isArray(c)?a.push(...c):a.push(c))}),a.length===0&&s.textContent?{text:s.textContent}:a.length>0?a:null},r=[],i=[];return Array.from(e.childNodes).forEach(o=>{const s=n(o);s&&i.push(s)}),i.forEach(o=>{if(o!==null)if(Array.isArray(o)){const s=[];let a=[];o.forEach(l=>{Xt.isText(l)?a.push(l):nn.isElement(l)&&(a.length>0&&(s.push({type:"paragraph",children:[...a]}),a=[]),s.push(l))}),a.length>0&&s.push({type:"paragraph",children:[...a]}),r.push(...s)}else nn.isElement(o)?r.push(o):Xt.isText(o)&&r.push({type:"paragraph",children:[o]})}),r.length===0&&r.push({type:"paragraph",children:[{text:""}]}),Lu&&console.log("Deserialized Slate nodes:",JSON.stringify(r)),r}catch(e){return console.error("Error deserializing HTML:",e),[{type:"paragraph",children:[{text:""}]}]}},$it=t=>{console.log("Serializing nodes:",JSON.stringify(t));const e=t.map(r=>{if(nn.isElement(r)){const i=[];return r.children.forEach((o,s)=>{if(Xt.isText(o))if(s===0)i.push(o);else{const a=i[i.length-1],l=o;a.bold===l.bold&&a.italic===l.italic&&a.underline===l.underline&&a.subscript===l.subscript&&a.superscript===l.superscript?i[i.length-1]=se(j({},a),{text:a.text+l.text}):i.push(l)}}),se(j({},r),{children:i})}return r});console.log("Normalized nodes:",JSON.stringify(e));let n="";for(const r of e)if(nn.isElement(r)){let i="";for(const o of r.children){if(!Xt.isText(o))continue;let s=Hit(o.text);const a=[];o.bold&&a.push("bold"),o.italic&&a.push("italic"),o.underline&&a.push("underline"),o.subscript&&a.push("subscript"),o.superscript&&a.push("superscript");for(const l of a)switch(l){case"bold":s=`<strong>${s}</strong>`;break;case"italic":s=`<em>${s}</em>`;break;case"underline":s=`<u>${s}</u>`;break;case"subscript":s=`<sub>${s}</sub>`;break;case"superscript":s=`<sup>${s}</sup>`;break}i+=s}n+=i}return console.log("Serialized HTML:",n),n},Hit=t=>{const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return t.replace(/[&<>"']/g,n=>e[n]||n)},v5=Lt.memo(Wit,(t,e)=>t.placeholder===e.placeholder&&t.className===e.className&&t.compact===e.compact&&t.showToolbar===e.showToolbar&&!0);var fA={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */fA.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,u="__lodash_placeholder__",d=1,f=2,p=4,b=1,v=2,m=1,g=2,x=4,w=8,S=16,P=32,I=64,M=128,D=256,E=512,_=30,A="...",R=800,F=16,L=1,N=2,U=3,$=1/0,B=9007199254740991,H=17976931348623157e292,q=NaN,z=4294967295,G=z-1,K=z>>>1,Z=[["ary",M],["bind",m],["bindKey",g],["curry",w],["curryRight",S],["flip",E],["partial",P],["partialRight",I],["rearg",D]],ee="[object Arguments]",V="[object Array]",J="[object AsyncFunction]",oe="[object Boolean]",ne="[object Date]",pe="[object DOMException]",ye="[object Error]",Ce="[object Function]",_e="[object GeneratorFunction]",ce="[object Map]",Be="[object Number]",de="[object Null]",me="[object Object]",ie="[object Promise]",ae="[object Proxy]",ge="[object RegExp]",X="[object Set]",W="[object String]",ve="[object Symbol]",ue="[object Undefined]",Me="[object WeakMap]",Ae="[object WeakSet]",Ne="[object ArrayBuffer]",Re="[object DataView]",Ie="[object Float32Array]",it="[object Float64Array]",Ee="[object Int8Array]",Le="[object Int16Array]",Ge="[object Int32Array]",Ke="[object Uint8Array]",je="[object Uint8ClampedArray]",et="[object Uint16Array]",lt="[object Uint32Array]",ht=/\b__p \+= '';/g,ke=/\b(__p \+=) '' \+/g,gt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,tt=/&(?:amp|lt|gt|quot|#39);/g,yt=/[&<>"']/g,at=RegExp(tt.source),mt=RegExp(yt.source),Ot=/<%-([\s\S]+?)%>/g,rn=/<%([\s\S]+?)%>/g,on=/<%=([\s\S]+?)%>/g,Pe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ue=/^\w*$/,Xe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vt=/[\\^$.*+?()[\]{}|]/g,Pt=RegExp(vt.source),jt=/^\s+/,Nt=/\s/,Yt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,en=/\{\n\/\* \[wrapped with (.+)\] \*/,fn=/,? & /,hn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,mn=/[()=,{}\[\]\/\s]/,jn=/\\(\\)?/g,er=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Wr=/\w*$/,lr=/^[-+]0x[0-9a-f]+$/i,Yn=/^0b[01]+$/i,yn=/^\[object .+?Constructor\]$/,Te=/^0o[0-7]+$/i,Ze=/^(?:0|[1-9]\d*)$/,le=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Fe=/($^)/,Je=/['\n\r\u2028\u2029\\]/g,qe="\\ud800-\\udfff",Ve="\\u0300-\\u036f",wt="\\ufe20-\\ufe2f",It="\\u20d0-\\u20ff",Ct=Ve+wt+It,Wt="\\u2700-\\u27bf",ln="a-z\\xdf-\\xf6\\xf8-\\xff",vn="\\xac\\xb1\\xd7\\xf7",cn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",be="\\u2000-\\u206f",st=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",zt="A-Z\\xc0-\\xd6\\xd8-\\xde",At="\\ufe0e\\ufe0f",Bt=vn+cn+be+st,St="['’]",Qn="["+qe+"]",bn="["+Bt+"]",Gr="["+Ct+"]",ai="\\d+",cr="["+Wt+"]",eo="["+ln+"]",_r="[^"+qe+Bt+ai+Wt+ln+zt+"]",wi="\\ud83c[\\udffb-\\udfff]",uo="(?:"+Gr+"|"+wi+")",Un="[^"+qe+"]",fi="(?:\\ud83c[\\udde6-\\uddff]){2}",Yo="[\\ud800-\\udbff][\\udc00-\\udfff]",Oi="["+zt+"]",ym="\\u200d",mh="(?:"+eo+"|"+_r+")",gh="(?:"+Oi+"|"+_r+")",xm="(?:"+St+"(?:d|ll|m|re|s|t|ve))?",bm="(?:"+St+"(?:D|LL|M|RE|S|T|VE))?",wm=uo+"?",ha="["+At+"]?",Vs="(?:"+ym+"(?:"+[Un,fi,Yo].join("|")+")"+ha+wm+")*",Fd="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Od="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",vh=ha+wm+Vs,Il="(?:"+[cr,fi,Yo].join("|")+")"+vh,yh="(?:"+[Un+Gr+"?",Gr,fi,Yo,Qn].join("|")+")",Sm=RegExp(St,"g"),kl=RegExp(Gr,"g"),Eo=RegExp(wi+"(?="+wi+")|"+yh+vh,"g"),C0=RegExp([Oi+"?"+eo+"+"+xm+"(?="+[bn,Oi,"$"].join("|")+")",gh+"+"+bm+"(?="+[bn,Oi+mh,"$"].join("|")+")",Oi+"?"+mh+"+"+xm,Oi+"+"+bm,Od,Fd,ai,Il].join("|"),"g"),_m=RegExp("["+ym+qe+Ct+At+"]"),Nd=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,fu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Em=-1,Cr={};Cr[Ie]=Cr[it]=Cr[Ee]=Cr[Le]=Cr[Ge]=Cr[Ke]=Cr[je]=Cr[et]=Cr[lt]=!0,Cr[ee]=Cr[V]=Cr[Ne]=Cr[oe]=Cr[Re]=Cr[ne]=Cr[ye]=Cr[Ce]=Cr[ce]=Cr[Be]=Cr[me]=Cr[ge]=Cr[X]=Cr[W]=Cr[Me]=!1;var gr={};gr[ee]=gr[V]=gr[Ne]=gr[Re]=gr[oe]=gr[ne]=gr[Ie]=gr[it]=gr[Ee]=gr[Le]=gr[Ge]=gr[ce]=gr[Be]=gr[me]=gr[ge]=gr[X]=gr[W]=gr[ve]=gr[Ke]=gr[je]=gr[et]=gr[lt]=!0,gr[ye]=gr[Ce]=gr[Me]=!1;var Cm={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},De={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},We={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},un=parseFloat,rr=parseInt,Ar=typeof Wi=="object"&&Wi&&Wi.Object===Object&&Wi,qr=typeof self=="object"&&self&&self.Object===Object&&self,En=Ar||qr||Function("return this")(),Fr=e&&!e.nodeType&&e,Kr=Fr&&!0&&t&&!t.nodeType&&t,fo=Kr&&Kr.exports===Fr,Fl=fo&&Ar.process,Ni=function(){try{var Qe=Kr&&Kr.require&&Kr.require("util").types;return Qe||Fl&&Fl.binding&&Fl.binding("util")}catch(xt){}}(),hu=Ni&&Ni.isArrayBuffer,pu=Ni&&Ni.isDate,xh=Ni&&Ni.isMap,A0=Ni&&Ni.isRegExp,bh=Ni&&Ni.isSet,Jw=Ni&&Ni.isTypedArray;function Xo(Qe,xt,dt){switch(dt.length){case 0:return Qe.call(xt);case 1:return Qe.call(xt,dt[0]);case 2:return Qe.call(xt,dt[0],dt[1]);case 3:return Qe.call(xt,dt[0],dt[1],dt[2])}return Qe.apply(xt,dt)}function wh(Qe,xt,dt,sn){for(var Wn=-1,Nr=Qe==null?0:Qe.length;++Wn<Nr;){var po=Qe[Wn];xt(sn,po,dt(po),Qe)}return sn}function vs(Qe,xt){for(var dt=-1,sn=Qe==null?0:Qe.length;++dt<sn&&xt(Qe[dt],dt,Qe)!==!1;);return Qe}function e1(Qe,xt){for(var dt=Qe==null?0:Qe.length;dt--&&xt(Qe[dt],dt,Qe)!==!1;);return Qe}function Am(Qe,xt){for(var dt=-1,sn=Qe==null?0:Qe.length;++dt<sn;)if(!xt(Qe[dt],dt,Qe))return!1;return!0}function Wa(Qe,xt){for(var dt=-1,sn=Qe==null?0:Qe.length,Wn=0,Nr=[];++dt<sn;){var po=Qe[dt];xt(po,dt,Qe)&&(Nr[Wn++]=po)}return Nr}function Sh(Qe,xt){var dt=Qe==null?0:Qe.length;return!!dt&&mu(Qe,xt,0)>-1}function Ld(Qe,xt,dt){for(var sn=-1,Wn=Qe==null?0:Qe.length;++sn<Wn;)if(dt(xt,Qe[sn]))return!0;return!1}function ri(Qe,xt){for(var dt=-1,sn=Qe==null?0:Qe.length,Wn=Array(sn);++dt<sn;)Wn[dt]=xt(Qe[dt],dt,Qe);return Wn}function Ol(Qe,xt){for(var dt=-1,sn=xt.length,Wn=Qe.length;++dt<sn;)Qe[Wn+dt]=xt[dt];return Qe}function Nl(Qe,xt,dt,sn){var Wn=-1,Nr=Qe==null?0:Qe.length;for(sn&&Nr&&(dt=Qe[++Wn]);++Wn<Nr;)dt=xt(dt,Qe[Wn],Wn,Qe);return dt}function t1(Qe,xt,dt,sn){var Wn=Qe==null?0:Qe.length;for(sn&&Wn&&(dt=Qe[--Wn]);Wn--;)dt=xt(dt,Qe[Wn],Wn,Qe);return dt}function Tm(Qe,xt){for(var dt=-1,sn=Qe==null?0:Qe.length;++dt<sn;)if(xt(Qe[dt],dt,Qe))return!0;return!1}var n1=re("length");function r1(Qe){return Qe.split("")}function Mm(Qe){return Qe.match(hn)||[]}function Qo(Qe,xt,dt){var sn;return dt(Qe,function(Wn,Nr,po){if(xt(Wn,Nr,po))return sn=Nr,!1}),sn}function _h(Qe,xt,dt,sn){for(var Wn=Qe.length,Nr=dt+(sn?1:-1);sn?Nr--:++Nr<Wn;)if(xt(Qe[Nr],Nr,Qe))return Nr;return-1}function mu(Qe,xt,dt){return xt===xt?are(Qe,xt,dt):_h(Qe,k,dt)}function Bd(Qe,xt,dt,sn){for(var Wn=dt-1,Nr=Qe.length;++Wn<Nr;)if(sn(Qe[Wn],xt))return Wn;return-1}function k(Qe){return Qe!==Qe}function Y(Qe,xt){var dt=Qe==null?0:Qe.length;return dt?Ht(Qe,xt)/dt:q}function re(Qe){return function(xt){return xt==null?n:xt[Qe]}}function we(Qe){return function(xt){return Qe==null?n:Qe[xt]}}function ot(Qe,xt,dt,sn,Wn){return Wn(Qe,function(Nr,po,ii){dt=sn?(sn=!1,Nr):xt(dt,Nr,po,ii)}),dt}function pt(Qe,xt){var dt=Qe.length;for(Qe.sort(xt);dt--;)Qe[dt]=Qe[dt].value;return Qe}function Ht(Qe,xt){for(var dt,sn=-1,Wn=Qe.length;++sn<Wn;){var Nr=xt(Qe[sn]);Nr!==n&&(dt=dt===n?Nr:dt+Nr)}return dt}function Or(Qe,xt){for(var dt=-1,sn=Array(Qe);++dt<Qe;)sn[dt]=xt(dt);return sn}function ho(Qe,xt){return ri(xt,function(dt){return[dt,Qe[dt]]})}function vr(Qe){return Qe&&Qe.slice(0,x5(Qe)+1).replace(jt,"")}function $r(Qe){return function(xt){return Qe(xt)}}function to(Qe,xt){return ri(xt,function(dt){return Qe[dt]})}function $a(Qe,xt){return Qe.has(xt)}function Ws(Qe,xt){for(var dt=-1,sn=Qe.length;++dt<sn&&mu(xt,Qe[dt],0)>-1;);return dt}function Eh(Qe,xt){for(var dt=Qe.length;dt--&&mu(xt,Qe[dt],0)>-1;);return dt}function T0(Qe,xt){for(var dt=Qe.length,sn=0;dt--;)Qe[dt]===xt&&++sn;return sn}var ere=we(Cm),tre=we(De);function nre(Qe){return"\\"+ut[Qe]}function rre(Qe,xt){return Qe==null?n:Qe[xt]}function Pm(Qe){return _m.test(Qe)}function ire(Qe){return Nd.test(Qe)}function ore(Qe){for(var xt,dt=[];!(xt=Qe.next()).done;)dt.push(xt.value);return dt}function u2(Qe){var xt=-1,dt=Array(Qe.size);return Qe.forEach(function(sn,Wn){dt[++xt]=[Wn,sn]}),dt}function y5(Qe,xt){return function(dt){return Qe(xt(dt))}}function jd(Qe,xt){for(var dt=-1,sn=Qe.length,Wn=0,Nr=[];++dt<sn;){var po=Qe[dt];(po===xt||po===u)&&(Qe[dt]=u,Nr[Wn++]=dt)}return Nr}function i1(Qe){var xt=-1,dt=Array(Qe.size);return Qe.forEach(function(sn){dt[++xt]=sn}),dt}function sre(Qe){var xt=-1,dt=Array(Qe.size);return Qe.forEach(function(sn){dt[++xt]=[sn,sn]}),dt}function are(Qe,xt,dt){for(var sn=dt-1,Wn=Qe.length;++sn<Wn;)if(Qe[sn]===xt)return sn;return-1}function lre(Qe,xt,dt){for(var sn=dt+1;sn--;)if(Qe[sn]===xt)return sn;return sn}function Dm(Qe){return Pm(Qe)?ure(Qe):n1(Qe)}function Ll(Qe){return Pm(Qe)?dre(Qe):r1(Qe)}function x5(Qe){for(var xt=Qe.length;xt--&&Nt.test(Qe.charAt(xt)););return xt}var cre=we(We);function ure(Qe){for(var xt=Eo.lastIndex=0;Eo.test(Qe);)++xt;return xt}function dre(Qe){return Qe.match(Eo)||[]}function fre(Qe){return Qe.match(C0)||[]}var hre=function Qe(xt){xt=xt==null?En:Rm.defaults(En.Object(),xt,Rm.pick(En,fu));var dt=xt.Array,sn=xt.Date,Wn=xt.Error,Nr=xt.Function,po=xt.Math,ii=xt.Object,d2=xt.RegExp,pre=xt.String,Ha=xt.TypeError,o1=dt.prototype,mre=Nr.prototype,Im=ii.prototype,s1=xt["__core-js_shared__"],a1=mre.toString,Yr=Im.hasOwnProperty,gre=0,b5=function(){var y=/[^.]+$/.exec(s1&&s1.keys&&s1.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}(),l1=Im.toString,vre=a1.call(ii),yre=En._,xre=d2("^"+a1.call(Yr).replace(vt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),c1=fo?xt.Buffer:n,Ud=xt.Symbol,u1=xt.Uint8Array,w5=c1?c1.allocUnsafe:n,d1=y5(ii.getPrototypeOf,ii),S5=ii.create,_5=Im.propertyIsEnumerable,f1=o1.splice,E5=Ud?Ud.isConcatSpreadable:n,M0=Ud?Ud.iterator:n,Ch=Ud?Ud.toStringTag:n,h1=function(){try{var y=Dh(ii,"defineProperty");return y({},"",{}),y}catch(C){}}(),bre=xt.clearTimeout!==En.clearTimeout&&xt.clearTimeout,wre=sn&&sn.now!==En.Date.now&&sn.now,Sre=xt.setTimeout!==En.setTimeout&&xt.setTimeout,p1=po.ceil,m1=po.floor,f2=ii.getOwnPropertySymbols,_re=c1?c1.isBuffer:n,C5=xt.isFinite,Ere=o1.join,Cre=y5(ii.keys,ii),mo=po.max,Zo=po.min,Are=sn.now,Tre=xt.parseInt,A5=po.random,Mre=o1.reverse,h2=Dh(xt,"DataView"),P0=Dh(xt,"Map"),p2=Dh(xt,"Promise"),km=Dh(xt,"Set"),D0=Dh(xt,"WeakMap"),R0=Dh(ii,"create"),g1=D0&&new D0,Fm={},Pre=Rh(h2),Dre=Rh(P0),Rre=Rh(p2),Ire=Rh(km),kre=Rh(D0),v1=Ud?Ud.prototype:n,I0=v1?v1.valueOf:n,T5=v1?v1.toString:n;function xe(y){if(Li(y)&&!Gn(y)&&!(y instanceof hr)){if(y instanceof Ga)return y;if(Yr.call(y,"__wrapped__"))return MB(y)}return new Ga(y)}var Om=function(){function y(){}return function(C){if(!Ti(C))return{};if(S5)return S5(C);y.prototype=C;var O=new y;return y.prototype=n,O}}();function y1(){}function Ga(y,C){this.__wrapped__=y,this.__actions__=[],this.__chain__=!!C,this.__index__=0,this.__values__=n}xe.templateSettings={escape:Ot,evaluate:rn,interpolate:on,variable:"",imports:{_:xe}},xe.prototype=y1.prototype,xe.prototype.constructor=xe,Ga.prototype=Om(y1.prototype),Ga.prototype.constructor=Ga;function hr(y){this.__wrapped__=y,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=z,this.__views__=[]}function Fre(){var y=new hr(this.__wrapped__);return y.__actions__=$s(this.__actions__),y.__dir__=this.__dir__,y.__filtered__=this.__filtered__,y.__iteratees__=$s(this.__iteratees__),y.__takeCount__=this.__takeCount__,y.__views__=$s(this.__views__),y}function Ore(){if(this.__filtered__){var y=new hr(this);y.__dir__=-1,y.__filtered__=!0}else y=this.clone(),y.__dir__*=-1;return y}function Nre(){var y=this.__wrapped__.value(),C=this.__dir__,O=Gn(y),Q=C<0,fe=O?y.length:0,Se=Kie(0,fe,this.__views__),Oe=Se.start,$e=Se.end,rt=$e-Oe,_t=Q?$e:Oe-1,Tt=this.__iteratees__,kt=Tt.length,Zt=0,xn=Zo(rt,this.__takeCount__);if(!O||!Q&&fe==rt&&xn==rt)return Q5(y,this.__actions__);var kn=[];e:for(;rt--&&Zt<xn;){_t+=C;for(var tr=-1,Fn=y[_t];++tr<kt;){var ur=Tt[tr],yr=ur.iteratee,ga=ur.type,bs=yr(Fn);if(ga==N)Fn=bs;else if(!bs){if(ga==L)continue e;break e}}kn[Zt++]=Fn}return kn}hr.prototype=Om(y1.prototype),hr.prototype.constructor=hr;function Ah(y){var C=-1,O=y==null?0:y.length;for(this.clear();++C<O;){var Q=y[C];this.set(Q[0],Q[1])}}function Lre(){this.__data__=R0?R0(null):{},this.size=0}function Bre(y){var C=this.has(y)&&delete this.__data__[y];return this.size-=C?1:0,C}function jre(y){var C=this.__data__;if(R0){var O=C[y];return O===l?n:O}return Yr.call(C,y)?C[y]:n}function Ure(y){var C=this.__data__;return R0?C[y]!==n:Yr.call(C,y)}function zre(y,C){var O=this.__data__;return this.size+=this.has(y)?0:1,O[y]=R0&&C===n?l:C,this}Ah.prototype.clear=Lre,Ah.prototype.delete=Bre,Ah.prototype.get=jre,Ah.prototype.has=Ure,Ah.prototype.set=zre;function gu(y){var C=-1,O=y==null?0:y.length;for(this.clear();++C<O;){var Q=y[C];this.set(Q[0],Q[1])}}function Vre(){this.__data__=[],this.size=0}function Wre(y){var C=this.__data__,O=x1(C,y);if(O<0)return!1;var Q=C.length-1;return O==Q?C.pop():f1.call(C,O,1),--this.size,!0}function $re(y){var C=this.__data__,O=x1(C,y);return O<0?n:C[O][1]}function Hre(y){return x1(this.__data__,y)>-1}function Gre(y,C){var O=this.__data__,Q=x1(O,y);return Q<0?(++this.size,O.push([y,C])):O[Q][1]=C,this}gu.prototype.clear=Vre,gu.prototype.delete=Wre,gu.prototype.get=$re,gu.prototype.has=Hre,gu.prototype.set=Gre;function vu(y){var C=-1,O=y==null?0:y.length;for(this.clear();++C<O;){var Q=y[C];this.set(Q[0],Q[1])}}function qre(){this.size=0,this.__data__={hash:new Ah,map:new(P0||gu),string:new Ah}}function Kre(y){var C=R1(this,y).delete(y);return this.size-=C?1:0,C}function Yre(y){return R1(this,y).get(y)}function Xre(y){return R1(this,y).has(y)}function Qre(y,C){var O=R1(this,y),Q=O.size;return O.set(y,C),this.size+=O.size==Q?0:1,this}vu.prototype.clear=qre,vu.prototype.delete=Kre,vu.prototype.get=Yre,vu.prototype.has=Xre,vu.prototype.set=Qre;function Th(y){var C=-1,O=y==null?0:y.length;for(this.__data__=new vu;++C<O;)this.add(y[C])}function Zre(y){return this.__data__.set(y,l),this}function Jre(y){return this.__data__.has(y)}Th.prototype.add=Th.prototype.push=Zre,Th.prototype.has=Jre;function Bl(y){var C=this.__data__=new gu(y);this.size=C.size}function eie(){this.__data__=new gu,this.size=0}function tie(y){var C=this.__data__,O=C.delete(y);return this.size=C.size,O}function nie(y){return this.__data__.get(y)}function rie(y){return this.__data__.has(y)}function iie(y,C){var O=this.__data__;if(O instanceof gu){var Q=O.__data__;if(!P0||Q.length<i-1)return Q.push([y,C]),this.size=++O.size,this;O=this.__data__=new vu(Q)}return O.set(y,C),this.size=O.size,this}Bl.prototype.clear=eie,Bl.prototype.delete=tie,Bl.prototype.get=nie,Bl.prototype.has=rie,Bl.prototype.set=iie;function M5(y,C){var O=Gn(y),Q=!O&&Ih(y),fe=!O&&!Q&&Hd(y),Se=!O&&!Q&&!fe&&jm(y),Oe=O||Q||fe||Se,$e=Oe?Or(y.length,pre):[],rt=$e.length;for(var _t in y)(C||Yr.call(y,_t))&&!(Oe&&(_t=="length"||fe&&(_t=="offset"||_t=="parent")||Se&&(_t=="buffer"||_t=="byteLength"||_t=="byteOffset")||wu(_t,rt)))&&$e.push(_t);return $e}function P5(y){var C=y.length;return C?y[C2(0,C-1)]:n}function oie(y,C){return I1($s(y),Mh(C,0,y.length))}function sie(y){return I1($s(y))}function m2(y,C,O){(O!==n&&!jl(y[C],O)||O===n&&!(C in y))&&yu(y,C,O)}function k0(y,C,O){var Q=y[C];(!(Yr.call(y,C)&&jl(Q,O))||O===n&&!(C in y))&&yu(y,C,O)}function x1(y,C){for(var O=y.length;O--;)if(jl(y[O][0],C))return O;return-1}function aie(y,C,O,Q){return zd(y,function(fe,Se,Oe){C(Q,fe,O(fe),Oe)}),Q}function D5(y,C){return y&&bc(C,Co(C),y)}function lie(y,C){return y&&bc(C,Gs(C),y)}function yu(y,C,O){C=="__proto__"&&h1?h1(y,C,{configurable:!0,enumerable:!0,value:O,writable:!0}):y[C]=O}function g2(y,C){for(var O=-1,Q=C.length,fe=dt(Q),Se=y==null;++O<Q;)fe[O]=Se?n:X2(y,C[O]);return fe}function Mh(y,C,O){return y===y&&(O!==n&&(y=y<=O?y:O),C!==n&&(y=y>=C?y:C)),y}function qa(y,C,O,Q,fe,Se){var Oe,$e=C&d,rt=C&f,_t=C&p;if(O&&(Oe=fe?O(y,Q,fe,Se):O(y)),Oe!==n)return Oe;if(!Ti(y))return y;var Tt=Gn(y);if(Tt){if(Oe=Xie(y),!$e)return $s(y,Oe)}else{var kt=Jo(y),Zt=kt==Ce||kt==_e;if(Hd(y))return eB(y,$e);if(kt==me||kt==ee||Zt&&!fe){if(Oe=rt||Zt?{}:xB(y),!$e)return rt?jie(y,lie(Oe,y)):Bie(y,D5(Oe,y))}else{if(!gr[kt])return fe?y:{};Oe=Qie(y,kt,$e)}}Se||(Se=new Bl);var xn=Se.get(y);if(xn)return xn;Se.set(y,Oe),KB(y)?y.forEach(function(Fn){Oe.add(qa(Fn,C,O,Fn,y,Se))}):GB(y)&&y.forEach(function(Fn,ur){Oe.set(ur,qa(Fn,C,O,ur,y,Se))});var kn=_t?rt?N2:O2:rt?Gs:Co,tr=Tt?n:kn(y);return vs(tr||y,function(Fn,ur){tr&&(ur=Fn,Fn=y[ur]),k0(Oe,ur,qa(Fn,C,O,ur,y,Se))}),Oe}function cie(y){var C=Co(y);return function(O){return R5(O,y,C)}}function R5(y,C,O){var Q=O.length;if(y==null)return!Q;for(y=ii(y);Q--;){var fe=O[Q],Se=C[fe],Oe=y[fe];if(Oe===n&&!(fe in y)||!Se(Oe))return!1}return!0}function I5(y,C,O){if(typeof y!="function")throw new Ha(s);return U0(function(){y.apply(n,O)},C)}function F0(y,C,O,Q){var fe=-1,Se=Sh,Oe=!0,$e=y.length,rt=[],_t=C.length;if(!$e)return rt;O&&(C=ri(C,$r(O))),Q?(Se=Ld,Oe=!1):C.length>=i&&(Se=$a,Oe=!1,C=new Th(C));e:for(;++fe<$e;){var Tt=y[fe],kt=O==null?Tt:O(Tt);if(Tt=Q||Tt!==0?Tt:0,Oe&&kt===kt){for(var Zt=_t;Zt--;)if(C[Zt]===kt)continue e;rt.push(Tt)}else Se(C,kt,Q)||rt.push(Tt)}return rt}var zd=oB(xc),k5=oB(y2,!0);function uie(y,C){var O=!0;return zd(y,function(Q,fe,Se){return O=!!C(Q,fe,Se),O}),O}function b1(y,C,O){for(var Q=-1,fe=y.length;++Q<fe;){var Se=y[Q],Oe=C(Se);if(Oe!=null&&($e===n?Oe===Oe&&!ma(Oe):O(Oe,$e)))var $e=Oe,rt=Se}return rt}function die(y,C,O,Q){var fe=y.length;for(O=Zn(O),O<0&&(O=-O>fe?0:fe+O),Q=Q===n||Q>fe?fe:Zn(Q),Q<0&&(Q+=fe),Q=O>Q?0:XB(Q);O<Q;)y[O++]=C;return y}function F5(y,C){var O=[];return zd(y,function(Q,fe,Se){C(Q,fe,Se)&&O.push(Q)}),O}function Oo(y,C,O,Q,fe){var Se=-1,Oe=y.length;for(O||(O=Jie),fe||(fe=[]);++Se<Oe;){var $e=y[Se];C>0&&O($e)?C>1?Oo($e,C-1,O,Q,fe):Ol(fe,$e):Q||(fe[fe.length]=$e)}return fe}var v2=sB(),O5=sB(!0);function xc(y,C){return y&&v2(y,C,Co)}function y2(y,C){return y&&O5(y,C,Co)}function w1(y,C){return Wa(C,function(O){return Su(y[O])})}function Ph(y,C){C=Wd(C,y);for(var O=0,Q=C.length;y!=null&&O<Q;)y=y[wc(C[O++])];return O&&O==Q?y:n}function N5(y,C,O){var Q=C(y);return Gn(y)?Q:Ol(Q,O(y))}function ys(y){return y==null?y===n?ue:de:Ch&&Ch in ii(y)?qie(y):soe(y)}function x2(y,C){return y>C}function fie(y,C){return y!=null&&Yr.call(y,C)}function hie(y,C){return y!=null&&C in ii(y)}function pie(y,C,O){return y>=Zo(C,O)&&y<mo(C,O)}function b2(y,C,O){for(var Q=O?Ld:Sh,fe=y[0].length,Se=y.length,Oe=Se,$e=dt(Se),rt=1/0,_t=[];Oe--;){var Tt=y[Oe];Oe&&C&&(Tt=ri(Tt,$r(C))),rt=Zo(Tt.length,rt),$e[Oe]=!O&&(C||fe>=120&&Tt.length>=120)?new Th(Oe&&Tt):n}Tt=y[0];var kt=-1,Zt=$e[0];e:for(;++kt<fe&&_t.length<rt;){var xn=Tt[kt],kn=C?C(xn):xn;if(xn=O||xn!==0?xn:0,!(Zt?$a(Zt,kn):Q(_t,kn,O))){for(Oe=Se;--Oe;){var tr=$e[Oe];if(!(tr?$a(tr,kn):Q(y[Oe],kn,O)))continue e}Zt&&Zt.push(kn),_t.push(xn)}}return _t}function mie(y,C,O,Q){return xc(y,function(fe,Se,Oe){C(Q,O(fe),Se,Oe)}),Q}function O0(y,C,O){C=Wd(C,y),y=_B(y,C);var Q=y==null?y:y[wc(Ya(C))];return Q==null?n:Xo(Q,y,O)}function L5(y){return Li(y)&&ys(y)==ee}function gie(y){return Li(y)&&ys(y)==Ne}function vie(y){return Li(y)&&ys(y)==ne}function N0(y,C,O,Q,fe){return y===C?!0:y==null||C==null||!Li(y)&&!Li(C)?y!==y&&C!==C:yie(y,C,O,Q,N0,fe)}function yie(y,C,O,Q,fe,Se){var Oe=Gn(y),$e=Gn(C),rt=Oe?V:Jo(y),_t=$e?V:Jo(C);rt=rt==ee?me:rt,_t=_t==ee?me:_t;var Tt=rt==me,kt=_t==me,Zt=rt==_t;if(Zt&&Hd(y)){if(!Hd(C))return!1;Oe=!0,Tt=!1}if(Zt&&!Tt)return Se||(Se=new Bl),Oe||jm(y)?gB(y,C,O,Q,fe,Se):Hie(y,C,rt,O,Q,fe,Se);if(!(O&b)){var xn=Tt&&Yr.call(y,"__wrapped__"),kn=kt&&Yr.call(C,"__wrapped__");if(xn||kn){var tr=xn?y.value():y,Fn=kn?C.value():C;return Se||(Se=new Bl),fe(tr,Fn,O,Q,Se)}}return Zt?(Se||(Se=new Bl),Gie(y,C,O,Q,fe,Se)):!1}function xie(y){return Li(y)&&Jo(y)==ce}function w2(y,C,O,Q){var fe=O.length,Se=fe,Oe=!Q;if(y==null)return!Se;for(y=ii(y);fe--;){var $e=O[fe];if(Oe&&$e[2]?$e[1]!==y[$e[0]]:!($e[0]in y))return!1}for(;++fe<Se;){$e=O[fe];var rt=$e[0],_t=y[rt],Tt=$e[1];if(Oe&&$e[2]){if(_t===n&&!(rt in y))return!1}else{var kt=new Bl;if(Q)var Zt=Q(_t,Tt,rt,y,C,kt);if(!(Zt===n?N0(Tt,_t,b|v,Q,kt):Zt))return!1}}return!0}function B5(y){if(!Ti(y)||toe(y))return!1;var C=Su(y)?xre:yn;return C.test(Rh(y))}function bie(y){return Li(y)&&ys(y)==ge}function wie(y){return Li(y)&&Jo(y)==X}function Sie(y){return Li(y)&&B1(y.length)&&!!Cr[ys(y)]}function j5(y){return typeof y=="function"?y:y==null?qs:typeof y=="object"?Gn(y)?V5(y[0],y[1]):z5(y):a4(y)}function S2(y){if(!j0(y))return Cre(y);var C=[];for(var O in ii(y))Yr.call(y,O)&&O!="constructor"&&C.push(O);return C}function _ie(y){if(!Ti(y))return ooe(y);var C=j0(y),O=[];for(var Q in y)Q=="constructor"&&(C||!Yr.call(y,Q))||O.push(Q);return O}function _2(y,C){return y<C}function U5(y,C){var O=-1,Q=Hs(y)?dt(y.length):[];return zd(y,function(fe,Se,Oe){Q[++O]=C(fe,Se,Oe)}),Q}function z5(y){var C=B2(y);return C.length==1&&C[0][2]?wB(C[0][0],C[0][1]):function(O){return O===y||w2(O,y,C)}}function V5(y,C){return U2(y)&&bB(C)?wB(wc(y),C):function(O){var Q=X2(O,y);return Q===n&&Q===C?Q2(O,y):N0(C,Q,b|v)}}function S1(y,C,O,Q,fe){y!==C&&v2(C,function(Se,Oe){if(fe||(fe=new Bl),Ti(Se))Eie(y,C,Oe,O,S1,Q,fe);else{var $e=Q?Q(V2(y,Oe),Se,Oe+"",y,C,fe):n;$e===n&&($e=Se),m2(y,Oe,$e)}},Gs)}function Eie(y,C,O,Q,fe,Se,Oe){var $e=V2(y,O),rt=V2(C,O),_t=Oe.get(rt);if(_t){m2(y,O,_t);return}var Tt=Se?Se($e,rt,O+"",y,C,Oe):n,kt=Tt===n;if(kt){var Zt=Gn(rt),xn=!Zt&&Hd(rt),kn=!Zt&&!xn&&jm(rt);Tt=rt,Zt||xn||kn?Gn($e)?Tt=$e:Ki($e)?Tt=$s($e):xn?(kt=!1,Tt=eB(rt,!0)):kn?(kt=!1,Tt=tB(rt,!0)):Tt=[]:z0(rt)||Ih(rt)?(Tt=$e,Ih($e)?Tt=QB($e):(!Ti($e)||Su($e))&&(Tt=xB(rt))):kt=!1}kt&&(Oe.set(rt,Tt),fe(Tt,rt,Q,Se,Oe),Oe.delete(rt)),m2(y,O,Tt)}function W5(y,C){var O=y.length;if(O)return C+=C<0?O:0,wu(C,O)?y[C]:n}function $5(y,C,O){C.length?C=ri(C,function(Se){return Gn(Se)?function(Oe){return Ph(Oe,Se.length===1?Se[0]:Se)}:Se}):C=[qs];var Q=-1;C=ri(C,$r(Rn()));var fe=U5(y,function(Se,Oe,$e){var rt=ri(C,function(_t){return _t(Se)});return{criteria:rt,index:++Q,value:Se}});return pt(fe,function(Se,Oe){return Lie(Se,Oe,O)})}function Cie(y,C){return H5(y,C,function(O,Q){return Q2(y,Q)})}function H5(y,C,O){for(var Q=-1,fe=C.length,Se={};++Q<fe;){var Oe=C[Q],$e=Ph(y,Oe);O($e,Oe)&&L0(Se,Wd(Oe,y),$e)}return Se}function Aie(y){return function(C){return Ph(C,y)}}function E2(y,C,O,Q){var fe=Q?Bd:mu,Se=-1,Oe=C.length,$e=y;for(y===C&&(C=$s(C)),O&&($e=ri(y,$r(O)));++Se<Oe;)for(var rt=0,_t=C[Se],Tt=O?O(_t):_t;(rt=fe($e,Tt,rt,Q))>-1;)$e!==y&&f1.call($e,rt,1),f1.call(y,rt,1);return y}function G5(y,C){for(var O=y?C.length:0,Q=O-1;O--;){var fe=C[O];if(O==Q||fe!==Se){var Se=fe;wu(fe)?f1.call(y,fe,1):M2(y,fe)}}return y}function C2(y,C){return y+m1(A5()*(C-y+1))}function Tie(y,C,O,Q){for(var fe=-1,Se=mo(p1((C-y)/(O||1)),0),Oe=dt(Se);Se--;)Oe[Q?Se:++fe]=y,y+=O;return Oe}function A2(y,C){var O="";if(!y||C<1||C>B)return O;do C%2&&(O+=y),C=m1(C/2),C&&(y+=y);while(C);return O}function ir(y,C){return W2(SB(y,C,qs),y+"")}function Mie(y){return P5(Um(y))}function Pie(y,C){var O=Um(y);return I1(O,Mh(C,0,O.length))}function L0(y,C,O,Q){if(!Ti(y))return y;C=Wd(C,y);for(var fe=-1,Se=C.length,Oe=Se-1,$e=y;$e!=null&&++fe<Se;){var rt=wc(C[fe]),_t=O;if(rt==="__proto__"||rt==="constructor"||rt==="prototype")return y;if(fe!=Oe){var Tt=$e[rt];_t=Q?Q(Tt,rt,$e):n,_t===n&&(_t=Ti(Tt)?Tt:wu(C[fe+1])?[]:{})}k0($e,rt,_t),$e=$e[rt]}return y}var q5=g1?function(y,C){return g1.set(y,C),y}:qs,Die=h1?function(y,C){return h1(y,"toString",{configurable:!0,enumerable:!1,value:J2(C),writable:!0})}:qs;function Rie(y){return I1(Um(y))}function Ka(y,C,O){var Q=-1,fe=y.length;C<0&&(C=-C>fe?0:fe+C),O=O>fe?fe:O,O<0&&(O+=fe),fe=C>O?0:O-C>>>0,C>>>=0;for(var Se=dt(fe);++Q<fe;)Se[Q]=y[Q+C];return Se}function Iie(y,C){var O;return zd(y,function(Q,fe,Se){return O=C(Q,fe,Se),!O}),!!O}function _1(y,C,O){var Q=0,fe=y==null?Q:y.length;if(typeof C=="number"&&C===C&&fe<=K){for(;Q<fe;){var Se=Q+fe>>>1,Oe=y[Se];Oe!==null&&!ma(Oe)&&(O?Oe<=C:Oe<C)?Q=Se+1:fe=Se}return fe}return T2(y,C,qs,O)}function T2(y,C,O,Q){var fe=0,Se=y==null?0:y.length;if(Se===0)return 0;C=O(C);for(var Oe=C!==C,$e=C===null,rt=ma(C),_t=C===n;fe<Se;){var Tt=m1((fe+Se)/2),kt=O(y[Tt]),Zt=kt!==n,xn=kt===null,kn=kt===kt,tr=ma(kt);if(Oe)var Fn=Q||kn;else _t?Fn=kn&&(Q||Zt):$e?Fn=kn&&Zt&&(Q||!xn):rt?Fn=kn&&Zt&&!xn&&(Q||!tr):xn||tr?Fn=!1:Fn=Q?kt<=C:kt<C;Fn?fe=Tt+1:Se=Tt}return Zo(Se,G)}function K5(y,C){for(var O=-1,Q=y.length,fe=0,Se=[];++O<Q;){var Oe=y[O],$e=C?C(Oe):Oe;if(!O||!jl($e,rt)){var rt=$e;Se[fe++]=Oe===0?0:Oe}}return Se}function Y5(y){return typeof y=="number"?y:ma(y)?q:+y}function pa(y){if(typeof y=="string")return y;if(Gn(y))return ri(y,pa)+"";if(ma(y))return T5?T5.call(y):"";var C=y+"";return C=="0"&&1/y==-1/0?"-0":C}function Vd(y,C,O){var Q=-1,fe=Sh,Se=y.length,Oe=!0,$e=[],rt=$e;if(O)Oe=!1,fe=Ld;else if(Se>=i){var _t=C?null:Wie(y);if(_t)return i1(_t);Oe=!1,fe=$a,rt=new Th}else rt=C?[]:$e;e:for(;++Q<Se;){var Tt=y[Q],kt=C?C(Tt):Tt;if(Tt=O||Tt!==0?Tt:0,Oe&&kt===kt){for(var Zt=rt.length;Zt--;)if(rt[Zt]===kt)continue e;C&&rt.push(kt),$e.push(Tt)}else fe(rt,kt,O)||(rt!==$e&&rt.push(kt),$e.push(Tt))}return $e}function M2(y,C){return C=Wd(C,y),y=_B(y,C),y==null||delete y[wc(Ya(C))]}function X5(y,C,O,Q){return L0(y,C,O(Ph(y,C)),Q)}function E1(y,C,O,Q){for(var fe=y.length,Se=Q?fe:-1;(Q?Se--:++Se<fe)&&C(y[Se],Se,y););return O?Ka(y,Q?0:Se,Q?Se+1:fe):Ka(y,Q?Se+1:0,Q?fe:Se)}function Q5(y,C){var O=y;return O instanceof hr&&(O=O.value()),Nl(C,function(Q,fe){return fe.func.apply(fe.thisArg,Ol([Q],fe.args))},O)}function P2(y,C,O){var Q=y.length;if(Q<2)return Q?Vd(y[0]):[];for(var fe=-1,Se=dt(Q);++fe<Q;)for(var Oe=y[fe],$e=-1;++$e<Q;)$e!=fe&&(Se[fe]=F0(Se[fe]||Oe,y[$e],C,O));return Vd(Oo(Se,1),C,O)}function Z5(y,C,O){for(var Q=-1,fe=y.length,Se=C.length,Oe={};++Q<fe;){var $e=Q<Se?C[Q]:n;O(Oe,y[Q],$e)}return Oe}function D2(y){return Ki(y)?y:[]}function R2(y){return typeof y=="function"?y:qs}function Wd(y,C){return Gn(y)?y:U2(y,C)?[y]:TB(Hr(y))}var kie=ir;function $d(y,C,O){var Q=y.length;return O=O===n?Q:O,!C&&O>=Q?y:Ka(y,C,O)}var J5=bre||function(y){return En.clearTimeout(y)};function eB(y,C){if(C)return y.slice();var O=y.length,Q=w5?w5(O):new y.constructor(O);return y.copy(Q),Q}function I2(y){var C=new y.constructor(y.byteLength);return new u1(C).set(new u1(y)),C}function Fie(y,C){var O=C?I2(y.buffer):y.buffer;return new y.constructor(O,y.byteOffset,y.byteLength)}function Oie(y){var C=new y.constructor(y.source,Wr.exec(y));return C.lastIndex=y.lastIndex,C}function Nie(y){return I0?ii(I0.call(y)):{}}function tB(y,C){var O=C?I2(y.buffer):y.buffer;return new y.constructor(O,y.byteOffset,y.length)}function nB(y,C){if(y!==C){var O=y!==n,Q=y===null,fe=y===y,Se=ma(y),Oe=C!==n,$e=C===null,rt=C===C,_t=ma(C);if(!$e&&!_t&&!Se&&y>C||Se&&Oe&&rt&&!$e&&!_t||Q&&Oe&&rt||!O&&rt||!fe)return 1;if(!Q&&!Se&&!_t&&y<C||_t&&O&&fe&&!Q&&!Se||$e&&O&&fe||!Oe&&fe||!rt)return-1}return 0}function Lie(y,C,O){for(var Q=-1,fe=y.criteria,Se=C.criteria,Oe=fe.length,$e=O.length;++Q<Oe;){var rt=nB(fe[Q],Se[Q]);if(rt){if(Q>=$e)return rt;var _t=O[Q];return rt*(_t=="desc"?-1:1)}}return y.index-C.index}function rB(y,C,O,Q){for(var fe=-1,Se=y.length,Oe=O.length,$e=-1,rt=C.length,_t=mo(Se-Oe,0),Tt=dt(rt+_t),kt=!Q;++$e<rt;)Tt[$e]=C[$e];for(;++fe<Oe;)(kt||fe<Se)&&(Tt[O[fe]]=y[fe]);for(;_t--;)Tt[$e++]=y[fe++];return Tt}function iB(y,C,O,Q){for(var fe=-1,Se=y.length,Oe=-1,$e=O.length,rt=-1,_t=C.length,Tt=mo(Se-$e,0),kt=dt(Tt+_t),Zt=!Q;++fe<Tt;)kt[fe]=y[fe];for(var xn=fe;++rt<_t;)kt[xn+rt]=C[rt];for(;++Oe<$e;)(Zt||fe<Se)&&(kt[xn+O[Oe]]=y[fe++]);return kt}function $s(y,C){var O=-1,Q=y.length;for(C||(C=dt(Q));++O<Q;)C[O]=y[O];return C}function bc(y,C,O,Q){var fe=!O;O||(O={});for(var Se=-1,Oe=C.length;++Se<Oe;){var $e=C[Se],rt=Q?Q(O[$e],y[$e],$e,O,y):n;rt===n&&(rt=y[$e]),fe?yu(O,$e,rt):k0(O,$e,rt)}return O}function Bie(y,C){return bc(y,j2(y),C)}function jie(y,C){return bc(y,vB(y),C)}function C1(y,C){return function(O,Q){var fe=Gn(O)?wh:aie,Se=C?C():{};return fe(O,y,Rn(Q,2),Se)}}function Nm(y){return ir(function(C,O){var Q=-1,fe=O.length,Se=fe>1?O[fe-1]:n,Oe=fe>2?O[2]:n;for(Se=y.length>3&&typeof Se=="function"?(fe--,Se):n,Oe&&xs(O[0],O[1],Oe)&&(Se=fe<3?n:Se,fe=1),C=ii(C);++Q<fe;){var $e=O[Q];$e&&y(C,$e,Q,Se)}return C})}function oB(y,C){return function(O,Q){if(O==null)return O;if(!Hs(O))return y(O,Q);for(var fe=O.length,Se=C?fe:-1,Oe=ii(O);(C?Se--:++Se<fe)&&Q(Oe[Se],Se,Oe)!==!1;);return O}}function sB(y){return function(C,O,Q){for(var fe=-1,Se=ii(C),Oe=Q(C),$e=Oe.length;$e--;){var rt=Oe[y?$e:++fe];if(O(Se[rt],rt,Se)===!1)break}return C}}function Uie(y,C,O){var Q=C&m,fe=B0(y);function Se(){var Oe=this&&this!==En&&this instanceof Se?fe:y;return Oe.apply(Q?O:this,arguments)}return Se}function aB(y){return function(C){C=Hr(C);var O=Pm(C)?Ll(C):n,Q=O?O[0]:C.charAt(0),fe=O?$d(O,1).join(""):C.slice(1);return Q[y]()+fe}}function Lm(y){return function(C){return Nl(o4(i4(C).replace(Sm,"")),y,"")}}function B0(y){return function(){var C=arguments;switch(C.length){case 0:return new y;case 1:return new y(C[0]);case 2:return new y(C[0],C[1]);case 3:return new y(C[0],C[1],C[2]);case 4:return new y(C[0],C[1],C[2],C[3]);case 5:return new y(C[0],C[1],C[2],C[3],C[4]);case 6:return new y(C[0],C[1],C[2],C[3],C[4],C[5]);case 7:return new y(C[0],C[1],C[2],C[3],C[4],C[5],C[6])}var O=Om(y.prototype),Q=y.apply(O,C);return Ti(Q)?Q:O}}function zie(y,C,O){var Q=B0(y);function fe(){for(var Se=arguments.length,Oe=dt(Se),$e=Se,rt=Bm(fe);$e--;)Oe[$e]=arguments[$e];var _t=Se<3&&Oe[0]!==rt&&Oe[Se-1]!==rt?[]:jd(Oe,rt);if(Se-=_t.length,Se<O)return fB(y,C,A1,fe.placeholder,n,Oe,_t,n,n,O-Se);var Tt=this&&this!==En&&this instanceof fe?Q:y;return Xo(Tt,this,Oe)}return fe}function lB(y){return function(C,O,Q){var fe=ii(C);if(!Hs(C)){var Se=Rn(O,3);C=Co(C),O=function($e){return Se(fe[$e],$e,fe)}}var Oe=y(C,O,Q);return Oe>-1?fe[Se?C[Oe]:Oe]:n}}function cB(y){return bu(function(C){var O=C.length,Q=O,fe=Ga.prototype.thru;for(y&&C.reverse();Q--;){var Se=C[Q];if(typeof Se!="function")throw new Ha(s);if(fe&&!Oe&&D1(Se)=="wrapper")var Oe=new Ga([],!0)}for(Q=Oe?Q:O;++Q<O;){Se=C[Q];var $e=D1(Se),rt=$e=="wrapper"?L2(Se):n;rt&&z2(rt[0])&&rt[1]==(M|w|P|D)&&!rt[4].length&&rt[9]==1?Oe=Oe[D1(rt[0])].apply(Oe,rt[3]):Oe=Se.length==1&&z2(Se)?Oe[$e]():Oe.thru(Se)}return function(){var _t=arguments,Tt=_t[0];if(Oe&&_t.length==1&&Gn(Tt))return Oe.plant(Tt).value();for(var kt=0,Zt=O?C[kt].apply(this,_t):Tt;++kt<O;)Zt=C[kt].call(this,Zt);return Zt}})}function A1(y,C,O,Q,fe,Se,Oe,$e,rt,_t){var Tt=C&M,kt=C&m,Zt=C&g,xn=C&(w|S),kn=C&E,tr=Zt?n:B0(y);function Fn(){for(var ur=arguments.length,yr=dt(ur),ga=ur;ga--;)yr[ga]=arguments[ga];if(xn)var bs=Bm(Fn),va=T0(yr,bs);if(Q&&(yr=rB(yr,Q,fe,xn)),Se&&(yr=iB(yr,Se,Oe,xn)),ur-=va,xn&&ur<_t){var Yi=jd(yr,bs);return fB(y,C,A1,Fn.placeholder,O,yr,Yi,$e,rt,_t-ur)}var Ul=kt?O:this,Eu=Zt?Ul[y]:y;return ur=yr.length,$e?yr=aoe(yr,$e):kn&&ur>1&&yr.reverse(),Tt&&rt<ur&&(yr.length=rt),this&&this!==En&&this instanceof Fn&&(Eu=tr||B0(Eu)),Eu.apply(Ul,yr)}return Fn}function uB(y,C){return function(O,Q){return mie(O,y,C(Q),{})}}function T1(y,C){return function(O,Q){var fe;if(O===n&&Q===n)return C;if(O!==n&&(fe=O),Q!==n){if(fe===n)return Q;typeof O=="string"||typeof Q=="string"?(O=pa(O),Q=pa(Q)):(O=Y5(O),Q=Y5(Q)),fe=y(O,Q)}return fe}}function k2(y){return bu(function(C){return C=ri(C,$r(Rn())),ir(function(O){var Q=this;return y(C,function(fe){return Xo(fe,Q,O)})})})}function M1(y,C){C=C===n?" ":pa(C);var O=C.length;if(O<2)return O?A2(C,y):C;var Q=A2(C,p1(y/Dm(C)));return Pm(C)?$d(Ll(Q),0,y).join(""):Q.slice(0,y)}function Vie(y,C,O,Q){var fe=C&m,Se=B0(y);function Oe(){for(var $e=-1,rt=arguments.length,_t=-1,Tt=Q.length,kt=dt(Tt+rt),Zt=this&&this!==En&&this instanceof Oe?Se:y;++_t<Tt;)kt[_t]=Q[_t];for(;rt--;)kt[_t++]=arguments[++$e];return Xo(Zt,fe?O:this,kt)}return Oe}function dB(y){return function(C,O,Q){return Q&&typeof Q!="number"&&xs(C,O,Q)&&(O=Q=n),C=_u(C),O===n?(O=C,C=0):O=_u(O),Q=Q===n?C<O?1:-1:_u(Q),Tie(C,O,Q,y)}}function P1(y){return function(C,O){return typeof C=="string"&&typeof O=="string"||(C=Xa(C),O=Xa(O)),y(C,O)}}function fB(y,C,O,Q,fe,Se,Oe,$e,rt,_t){var Tt=C&w,kt=Tt?Oe:n,Zt=Tt?n:Oe,xn=Tt?Se:n,kn=Tt?n:Se;C|=Tt?P:I,C&=~(Tt?I:P),C&x||(C&=-4);var tr=[y,C,fe,xn,kt,kn,Zt,$e,rt,_t],Fn=O.apply(n,tr);return z2(y)&&EB(Fn,tr),Fn.placeholder=Q,CB(Fn,y,C)}function F2(y){var C=po[y];return function(O,Q){if(O=Xa(O),Q=Q==null?0:Zo(Zn(Q),292),Q&&C5(O)){var fe=(Hr(O)+"e").split("e"),Se=C(fe[0]+"e"+(+fe[1]+Q));return fe=(Hr(Se)+"e").split("e"),+(fe[0]+"e"+(+fe[1]-Q))}return C(O)}}var Wie=km&&1/i1(new km([,-0]))[1]==$?function(y){return new km(y)}:nM;function hB(y){return function(C){var O=Jo(C);return O==ce?u2(C):O==X?sre(C):ho(C,y(C))}}function xu(y,C,O,Q,fe,Se,Oe,$e){var rt=C&g;if(!rt&&typeof y!="function")throw new Ha(s);var _t=Q?Q.length:0;if(_t||(C&=-97,Q=fe=n),Oe=Oe===n?Oe:mo(Zn(Oe),0),$e=$e===n?$e:Zn($e),_t-=fe?fe.length:0,C&I){var Tt=Q,kt=fe;Q=fe=n}var Zt=rt?n:L2(y),xn=[y,C,O,Q,fe,Tt,kt,Se,Oe,$e];if(Zt&&ioe(xn,Zt),y=xn[0],C=xn[1],O=xn[2],Q=xn[3],fe=xn[4],$e=xn[9]=xn[9]===n?rt?0:y.length:mo(xn[9]-_t,0),!$e&&C&(w|S)&&(C&=-25),!C||C==m)var kn=Uie(y,C,O);else C==w||C==S?kn=zie(y,C,$e):(C==P||C==(m|P))&&!fe.length?kn=Vie(y,C,O,Q):kn=A1.apply(n,xn);var tr=Zt?q5:EB;return CB(tr(kn,xn),y,C)}function pB(y,C,O,Q){return y===n||jl(y,Im[O])&&!Yr.call(Q,O)?C:y}function mB(y,C,O,Q,fe,Se){return Ti(y)&&Ti(C)&&(Se.set(C,y),S1(y,C,n,mB,Se),Se.delete(C)),y}function $ie(y){return z0(y)?n:y}function gB(y,C,O,Q,fe,Se){var Oe=O&b,$e=y.length,rt=C.length;if($e!=rt&&!(Oe&&rt>$e))return!1;var _t=Se.get(y),Tt=Se.get(C);if(_t&&Tt)return _t==C&&Tt==y;var kt=-1,Zt=!0,xn=O&v?new Th:n;for(Se.set(y,C),Se.set(C,y);++kt<$e;){var kn=y[kt],tr=C[kt];if(Q)var Fn=Oe?Q(tr,kn,kt,C,y,Se):Q(kn,tr,kt,y,C,Se);if(Fn!==n){if(Fn)continue;Zt=!1;break}if(xn){if(!Tm(C,function(ur,yr){if(!$a(xn,yr)&&(kn===ur||fe(kn,ur,O,Q,Se)))return xn.push(yr)})){Zt=!1;break}}else if(!(kn===tr||fe(kn,tr,O,Q,Se))){Zt=!1;break}}return Se.delete(y),Se.delete(C),Zt}function Hie(y,C,O,Q,fe,Se,Oe){switch(O){case Re:if(y.byteLength!=C.byteLength||y.byteOffset!=C.byteOffset)return!1;y=y.buffer,C=C.buffer;case Ne:return!(y.byteLength!=C.byteLength||!Se(new u1(y),new u1(C)));case oe:case ne:case Be:return jl(+y,+C);case ye:return y.name==C.name&&y.message==C.message;case ge:case W:return y==C+"";case ce:var $e=u2;case X:var rt=Q&b;if($e||($e=i1),y.size!=C.size&&!rt)return!1;var _t=Oe.get(y);if(_t)return _t==C;Q|=v,Oe.set(y,C);var Tt=gB($e(y),$e(C),Q,fe,Se,Oe);return Oe.delete(y),Tt;case ve:if(I0)return I0.call(y)==I0.call(C)}return!1}function Gie(y,C,O,Q,fe,Se){var Oe=O&b,$e=O2(y),rt=$e.length,_t=O2(C),Tt=_t.length;if(rt!=Tt&&!Oe)return!1;for(var kt=rt;kt--;){var Zt=$e[kt];if(!(Oe?Zt in C:Yr.call(C,Zt)))return!1}var xn=Se.get(y),kn=Se.get(C);if(xn&&kn)return xn==C&&kn==y;var tr=!0;Se.set(y,C),Se.set(C,y);for(var Fn=Oe;++kt<rt;){Zt=$e[kt];var ur=y[Zt],yr=C[Zt];if(Q)var ga=Oe?Q(yr,ur,Zt,C,y,Se):Q(ur,yr,Zt,y,C,Se);if(!(ga===n?ur===yr||fe(ur,yr,O,Q,Se):ga)){tr=!1;break}Fn||(Fn=Zt=="constructor")}if(tr&&!Fn){var bs=y.constructor,va=C.constructor;bs!=va&&"constructor"in y&&"constructor"in C&&!(typeof bs=="function"&&bs instanceof bs&&typeof va=="function"&&va instanceof va)&&(tr=!1)}return Se.delete(y),Se.delete(C),tr}function bu(y){return W2(SB(y,n,RB),y+"")}function O2(y){return N5(y,Co,j2)}function N2(y){return N5(y,Gs,vB)}var L2=g1?function(y){return g1.get(y)}:nM;function D1(y){for(var C=y.name+"",O=Fm[C],Q=Yr.call(Fm,C)?O.length:0;Q--;){var fe=O[Q],Se=fe.func;if(Se==null||Se==y)return fe.name}return C}function Bm(y){var C=Yr.call(xe,"placeholder")?xe:y;return C.placeholder}function Rn(){var y=xe.iteratee||eM;return y=y===eM?j5:y,arguments.length?y(arguments[0],arguments[1]):y}function R1(y,C){var O=y.__data__;return eoe(C)?O[typeof C=="string"?"string":"hash"]:O.map}function B2(y){for(var C=Co(y),O=C.length;O--;){var Q=C[O],fe=y[Q];C[O]=[Q,fe,bB(fe)]}return C}function Dh(y,C){var O=rre(y,C);return B5(O)?O:n}function qie(y){var C=Yr.call(y,Ch),O=y[Ch];try{y[Ch]=n;var Q=!0}catch(Se){}var fe=l1.call(y);return Q&&(C?y[Ch]=O:delete y[Ch]),fe}var j2=f2?function(y){return y==null?[]:(y=ii(y),Wa(f2(y),function(C){return _5.call(y,C)}))}:rM,vB=f2?function(y){for(var C=[];y;)Ol(C,j2(y)),y=d1(y);return C}:rM,Jo=ys;(h2&&Jo(new h2(new ArrayBuffer(1)))!=Re||P0&&Jo(new P0)!=ce||p2&&Jo(p2.resolve())!=ie||km&&Jo(new km)!=X||D0&&Jo(new D0)!=Me)&&(Jo=function(y){var C=ys(y),O=C==me?y.constructor:n,Q=O?Rh(O):"";if(Q)switch(Q){case Pre:return Re;case Dre:return ce;case Rre:return ie;case Ire:return X;case kre:return Me}return C});function Kie(y,C,O){for(var Q=-1,fe=O.length;++Q<fe;){var Se=O[Q],Oe=Se.size;switch(Se.type){case"drop":y+=Oe;break;case"dropRight":C-=Oe;break;case"take":C=Zo(C,y+Oe);break;case"takeRight":y=mo(y,C-Oe);break}}return{start:y,end:C}}function Yie(y){var C=y.match(en);return C?C[1].split(fn):[]}function yB(y,C,O){C=Wd(C,y);for(var Q=-1,fe=C.length,Se=!1;++Q<fe;){var Oe=wc(C[Q]);if(!(Se=y!=null&&O(y,Oe)))break;y=y[Oe]}return Se||++Q!=fe?Se:(fe=y==null?0:y.length,!!fe&&B1(fe)&&wu(Oe,fe)&&(Gn(y)||Ih(y)))}function Xie(y){var C=y.length,O=new y.constructor(C);return C&&typeof y[0]=="string"&&Yr.call(y,"index")&&(O.index=y.index,O.input=y.input),O}function xB(y){return typeof y.constructor=="function"&&!j0(y)?Om(d1(y)):{}}function Qie(y,C,O){var Q=y.constructor;switch(C){case Ne:return I2(y);case oe:case ne:return new Q(+y);case Re:return Fie(y,O);case Ie:case it:case Ee:case Le:case Ge:case Ke:case je:case et:case lt:return tB(y,O);case ce:return new Q;case Be:case W:return new Q(y);case ge:return Oie(y);case X:return new Q;case ve:return Nie(y)}}function Zie(y,C){var O=C.length;if(!O)return y;var Q=O-1;return C[Q]=(O>1?"& ":"")+C[Q],C=C.join(O>2?", ":" "),y.replace(Yt,`{
/* [wrapped with `+C+`] */
`)}function Jie(y){return Gn(y)||Ih(y)||!!(E5&&y&&y[E5])}function wu(y,C){var O=typeof y;return C=C==null?B:C,!!C&&(O=="number"||O!="symbol"&&Ze.test(y))&&y>-1&&y%1==0&&y<C}function xs(y,C,O){if(!Ti(O))return!1;var Q=typeof C;return(Q=="number"?Hs(O)&&wu(C,O.length):Q=="string"&&C in O)?jl(O[C],y):!1}function U2(y,C){if(Gn(y))return!1;var O=typeof y;return O=="number"||O=="symbol"||O=="boolean"||y==null||ma(y)?!0:Ue.test(y)||!Pe.test(y)||C!=null&&y in ii(C)}function eoe(y){var C=typeof y;return C=="string"||C=="number"||C=="symbol"||C=="boolean"?y!=="__proto__":y===null}function z2(y){var C=D1(y),O=xe[C];if(typeof O!="function"||!(C in hr.prototype))return!1;if(y===O)return!0;var Q=L2(O);return!!Q&&y===Q[0]}function toe(y){return!!b5&&b5 in y}var noe=s1?Su:iM;function j0(y){var C=y&&y.constructor,O=typeof C=="function"&&C.prototype||Im;return y===O}function bB(y){return y===y&&!Ti(y)}function wB(y,C){return function(O){return O==null?!1:O[y]===C&&(C!==n||y in ii(O))}}function roe(y){var C=N1(y,function(Q){return O.size===c&&O.clear(),Q}),O=C.cache;return C}function ioe(y,C){var O=y[1],Q=C[1],fe=O|Q,Se=fe<(m|g|M),Oe=Q==M&&O==w||Q==M&&O==D&&y[7].length<=C[8]||Q==(M|D)&&C[7].length<=C[8]&&O==w;if(!(Se||Oe))return y;Q&m&&(y[2]=C[2],fe|=O&m?0:x);var $e=C[3];if($e){var rt=y[3];y[3]=rt?rB(rt,$e,C[4]):$e,y[4]=rt?jd(y[3],u):C[4]}return $e=C[5],$e&&(rt=y[5],y[5]=rt?iB(rt,$e,C[6]):$e,y[6]=rt?jd(y[5],u):C[6]),$e=C[7],$e&&(y[7]=$e),Q&M&&(y[8]=y[8]==null?C[8]:Zo(y[8],C[8])),y[9]==null&&(y[9]=C[9]),y[0]=C[0],y[1]=fe,y}function ooe(y){var C=[];if(y!=null)for(var O in ii(y))C.push(O);return C}function soe(y){return l1.call(y)}function SB(y,C,O){return C=mo(C===n?y.length-1:C,0),function(){for(var Q=arguments,fe=-1,Se=mo(Q.length-C,0),Oe=dt(Se);++fe<Se;)Oe[fe]=Q[C+fe];fe=-1;for(var $e=dt(C+1);++fe<C;)$e[fe]=Q[fe];return $e[C]=O(Oe),Xo(y,this,$e)}}function _B(y,C){return C.length<2?y:Ph(y,Ka(C,0,-1))}function aoe(y,C){for(var O=y.length,Q=Zo(C.length,O),fe=$s(y);Q--;){var Se=C[Q];y[Q]=wu(Se,O)?fe[Se]:n}return y}function V2(y,C){if(!(C==="constructor"&&typeof y[C]=="function")&&C!="__proto__")return y[C]}var EB=AB(q5),U0=Sre||function(y,C){return En.setTimeout(y,C)},W2=AB(Die);function CB(y,C,O){var Q=C+"";return W2(y,Zie(Q,loe(Yie(Q),O)))}function AB(y){var C=0,O=0;return function(){var Q=Are(),fe=F-(Q-O);if(O=Q,fe>0){if(++C>=R)return arguments[0]}else C=0;return y.apply(n,arguments)}}function I1(y,C){var O=-1,Q=y.length,fe=Q-1;for(C=C===n?Q:C;++O<C;){var Se=C2(O,fe),Oe=y[Se];y[Se]=y[O],y[O]=Oe}return y.length=C,y}var TB=roe(function(y){var C=[];return y.charCodeAt(0)===46&&C.push(""),y.replace(Xe,function(O,Q,fe,Se){C.push(fe?Se.replace(jn,"$1"):Q||O)}),C});function wc(y){if(typeof y=="string"||ma(y))return y;var C=y+"";return C=="0"&&1/y==-1/0?"-0":C}function Rh(y){if(y!=null){try{return a1.call(y)}catch(C){}try{return y+""}catch(C){}}return""}function loe(y,C){return vs(Z,function(O){var Q="_."+O[0];C&O[1]&&!Sh(y,Q)&&y.push(Q)}),y.sort()}function MB(y){if(y instanceof hr)return y.clone();var C=new Ga(y.__wrapped__,y.__chain__);return C.__actions__=$s(y.__actions__),C.__index__=y.__index__,C.__values__=y.__values__,C}function coe(y,C,O){(O?xs(y,C,O):C===n)?C=1:C=mo(Zn(C),0);var Q=y==null?0:y.length;if(!Q||C<1)return[];for(var fe=0,Se=0,Oe=dt(p1(Q/C));fe<Q;)Oe[Se++]=Ka(y,fe,fe+=C);return Oe}function uoe(y){for(var C=-1,O=y==null?0:y.length,Q=0,fe=[];++C<O;){var Se=y[C];Se&&(fe[Q++]=Se)}return fe}function doe(){var y=arguments.length;if(!y)return[];for(var C=dt(y-1),O=arguments[0],Q=y;Q--;)C[Q-1]=arguments[Q];return Ol(Gn(O)?$s(O):[O],Oo(C,1))}var foe=ir(function(y,C){return Ki(y)?F0(y,Oo(C,1,Ki,!0)):[]}),hoe=ir(function(y,C){var O=Ya(C);return Ki(O)&&(O=n),Ki(y)?F0(y,Oo(C,1,Ki,!0),Rn(O,2)):[]}),poe=ir(function(y,C){var O=Ya(C);return Ki(O)&&(O=n),Ki(y)?F0(y,Oo(C,1,Ki,!0),n,O):[]});function moe(y,C,O){var Q=y==null?0:y.length;return Q?(C=O||C===n?1:Zn(C),Ka(y,C<0?0:C,Q)):[]}function goe(y,C,O){var Q=y==null?0:y.length;return Q?(C=O||C===n?1:Zn(C),C=Q-C,Ka(y,0,C<0?0:C)):[]}function voe(y,C){return y&&y.length?E1(y,Rn(C,3),!0,!0):[]}function yoe(y,C){return y&&y.length?E1(y,Rn(C,3),!0):[]}function xoe(y,C,O,Q){var fe=y==null?0:y.length;return fe?(O&&typeof O!="number"&&xs(y,C,O)&&(O=0,Q=fe),die(y,C,O,Q)):[]}function PB(y,C,O){var Q=y==null?0:y.length;if(!Q)return-1;var fe=O==null?0:Zn(O);return fe<0&&(fe=mo(Q+fe,0)),_h(y,Rn(C,3),fe)}function DB(y,C,O){var Q=y==null?0:y.length;if(!Q)return-1;var fe=Q-1;return O!==n&&(fe=Zn(O),fe=O<0?mo(Q+fe,0):Zo(fe,Q-1)),_h(y,Rn(C,3),fe,!0)}function RB(y){var C=y==null?0:y.length;return C?Oo(y,1):[]}function boe(y){var C=y==null?0:y.length;return C?Oo(y,$):[]}function woe(y,C){var O=y==null?0:y.length;return O?(C=C===n?1:Zn(C),Oo(y,C)):[]}function Soe(y){for(var C=-1,O=y==null?0:y.length,Q={};++C<O;){var fe=y[C];Q[fe[0]]=fe[1]}return Q}function IB(y){return y&&y.length?y[0]:n}function _oe(y,C,O){var Q=y==null?0:y.length;if(!Q)return-1;var fe=O==null?0:Zn(O);return fe<0&&(fe=mo(Q+fe,0)),mu(y,C,fe)}function Eoe(y){var C=y==null?0:y.length;return C?Ka(y,0,-1):[]}var Coe=ir(function(y){var C=ri(y,D2);return C.length&&C[0]===y[0]?b2(C):[]}),Aoe=ir(function(y){var C=Ya(y),O=ri(y,D2);return C===Ya(O)?C=n:O.pop(),O.length&&O[0]===y[0]?b2(O,Rn(C,2)):[]}),Toe=ir(function(y){var C=Ya(y),O=ri(y,D2);return C=typeof C=="function"?C:n,C&&O.pop(),O.length&&O[0]===y[0]?b2(O,n,C):[]});function Moe(y,C){return y==null?"":Ere.call(y,C)}function Ya(y){var C=y==null?0:y.length;return C?y[C-1]:n}function Poe(y,C,O){var Q=y==null?0:y.length;if(!Q)return-1;var fe=Q;return O!==n&&(fe=Zn(O),fe=fe<0?mo(Q+fe,0):Zo(fe,Q-1)),C===C?lre(y,C,fe):_h(y,k,fe,!0)}function Doe(y,C){return y&&y.length?W5(y,Zn(C)):n}var Roe=ir(kB);function kB(y,C){return y&&y.length&&C&&C.length?E2(y,C):y}function Ioe(y,C,O){return y&&y.length&&C&&C.length?E2(y,C,Rn(O,2)):y}function koe(y,C,O){return y&&y.length&&C&&C.length?E2(y,C,n,O):y}var Foe=bu(function(y,C){var O=y==null?0:y.length,Q=g2(y,C);return G5(y,ri(C,function(fe){return wu(fe,O)?+fe:fe}).sort(nB)),Q});function Ooe(y,C){var O=[];if(!(y&&y.length))return O;var Q=-1,fe=[],Se=y.length;for(C=Rn(C,3);++Q<Se;){var Oe=y[Q];C(Oe,Q,y)&&(O.push(Oe),fe.push(Q))}return G5(y,fe),O}function $2(y){return y==null?y:Mre.call(y)}function Noe(y,C,O){var Q=y==null?0:y.length;return Q?(O&&typeof O!="number"&&xs(y,C,O)?(C=0,O=Q):(C=C==null?0:Zn(C),O=O===n?Q:Zn(O)),Ka(y,C,O)):[]}function Loe(y,C){return _1(y,C)}function Boe(y,C,O){return T2(y,C,Rn(O,2))}function joe(y,C){var O=y==null?0:y.length;if(O){var Q=_1(y,C);if(Q<O&&jl(y[Q],C))return Q}return-1}function Uoe(y,C){return _1(y,C,!0)}function zoe(y,C,O){return T2(y,C,Rn(O,2),!0)}function Voe(y,C){var O=y==null?0:y.length;if(O){var Q=_1(y,C,!0)-1;if(jl(y[Q],C))return Q}return-1}function Woe(y){return y&&y.length?K5(y):[]}function $oe(y,C){return y&&y.length?K5(y,Rn(C,2)):[]}function Hoe(y){var C=y==null?0:y.length;return C?Ka(y,1,C):[]}function Goe(y,C,O){return y&&y.length?(C=O||C===n?1:Zn(C),Ka(y,0,C<0?0:C)):[]}function qoe(y,C,O){var Q=y==null?0:y.length;return Q?(C=O||C===n?1:Zn(C),C=Q-C,Ka(y,C<0?0:C,Q)):[]}function Koe(y,C){return y&&y.length?E1(y,Rn(C,3),!1,!0):[]}function Yoe(y,C){return y&&y.length?E1(y,Rn(C,3)):[]}var Xoe=ir(function(y){return Vd(Oo(y,1,Ki,!0))}),Qoe=ir(function(y){var C=Ya(y);return Ki(C)&&(C=n),Vd(Oo(y,1,Ki,!0),Rn(C,2))}),Zoe=ir(function(y){var C=Ya(y);return C=typeof C=="function"?C:n,Vd(Oo(y,1,Ki,!0),n,C)});function Joe(y){return y&&y.length?Vd(y):[]}function ese(y,C){return y&&y.length?Vd(y,Rn(C,2)):[]}function tse(y,C){return C=typeof C=="function"?C:n,y&&y.length?Vd(y,n,C):[]}function H2(y){if(!(y&&y.length))return[];var C=0;return y=Wa(y,function(O){if(Ki(O))return C=mo(O.length,C),!0}),Or(C,function(O){return ri(y,re(O))})}function FB(y,C){if(!(y&&y.length))return[];var O=H2(y);return C==null?O:ri(O,function(Q){return Xo(C,n,Q)})}var nse=ir(function(y,C){return Ki(y)?F0(y,C):[]}),rse=ir(function(y){return P2(Wa(y,Ki))}),ise=ir(function(y){var C=Ya(y);return Ki(C)&&(C=n),P2(Wa(y,Ki),Rn(C,2))}),ose=ir(function(y){var C=Ya(y);return C=typeof C=="function"?C:n,P2(Wa(y,Ki),n,C)}),sse=ir(H2);function ase(y,C){return Z5(y||[],C||[],k0)}function lse(y,C){return Z5(y||[],C||[],L0)}var cse=ir(function(y){var C=y.length,O=C>1?y[C-1]:n;return O=typeof O=="function"?(y.pop(),O):n,FB(y,O)});function OB(y){var C=xe(y);return C.__chain__=!0,C}function use(y,C){return C(y),y}function k1(y,C){return C(y)}var dse=bu(function(y){var C=y.length,O=C?y[0]:0,Q=this.__wrapped__,fe=function(Se){return g2(Se,y)};return C>1||this.__actions__.length||!(Q instanceof hr)||!wu(O)?this.thru(fe):(Q=Q.slice(O,+O+(C?1:0)),Q.__actions__.push({func:k1,args:[fe],thisArg:n}),new Ga(Q,this.__chain__).thru(function(Se){return C&&!Se.length&&Se.push(n),Se}))});function fse(){return OB(this)}function hse(){return new Ga(this.value(),this.__chain__)}function pse(){this.__values__===n&&(this.__values__=YB(this.value()));var y=this.__index__>=this.__values__.length,C=y?n:this.__values__[this.__index__++];return{done:y,value:C}}function mse(){return this}function gse(y){for(var C,O=this;O instanceof y1;){var Q=MB(O);Q.__index__=0,Q.__values__=n,C?fe.__wrapped__=Q:C=Q;var fe=Q;O=O.__wrapped__}return fe.__wrapped__=y,C}function vse(){var y=this.__wrapped__;if(y instanceof hr){var C=y;return this.__actions__.length&&(C=new hr(this)),C=C.reverse(),C.__actions__.push({func:k1,args:[$2],thisArg:n}),new Ga(C,this.__chain__)}return this.thru($2)}function yse(){return Q5(this.__wrapped__,this.__actions__)}var xse=C1(function(y,C,O){Yr.call(y,O)?++y[O]:yu(y,O,1)});function bse(y,C,O){var Q=Gn(y)?Am:uie;return O&&xs(y,C,O)&&(C=n),Q(y,Rn(C,3))}function wse(y,C){var O=Gn(y)?Wa:F5;return O(y,Rn(C,3))}var Sse=lB(PB),_se=lB(DB);function Ese(y,C){return Oo(F1(y,C),1)}function Cse(y,C){return Oo(F1(y,C),$)}function Ase(y,C,O){return O=O===n?1:Zn(O),Oo(F1(y,C),O)}function NB(y,C){var O=Gn(y)?vs:zd;return O(y,Rn(C,3))}function LB(y,C){var O=Gn(y)?e1:k5;return O(y,Rn(C,3))}var Tse=C1(function(y,C,O){Yr.call(y,O)?y[O].push(C):yu(y,O,[C])});function Mse(y,C,O,Q){y=Hs(y)?y:Um(y),O=O&&!Q?Zn(O):0;var fe=y.length;return O<0&&(O=mo(fe+O,0)),j1(y)?O<=fe&&y.indexOf(C,O)>-1:!!fe&&mu(y,C,O)>-1}var Pse=ir(function(y,C,O){var Q=-1,fe=typeof C=="function",Se=Hs(y)?dt(y.length):[];return zd(y,function(Oe){Se[++Q]=fe?Xo(C,Oe,O):O0(Oe,C,O)}),Se}),Dse=C1(function(y,C,O){yu(y,O,C)});function F1(y,C){var O=Gn(y)?ri:U5;return O(y,Rn(C,3))}function Rse(y,C,O,Q){return y==null?[]:(Gn(C)||(C=C==null?[]:[C]),O=Q?n:O,Gn(O)||(O=O==null?[]:[O]),$5(y,C,O))}var Ise=C1(function(y,C,O){y[O?0:1].push(C)},function(){return[[],[]]});function kse(y,C,O){var Q=Gn(y)?Nl:ot,fe=arguments.length<3;return Q(y,Rn(C,4),O,fe,zd)}function Fse(y,C,O){var Q=Gn(y)?t1:ot,fe=arguments.length<3;return Q(y,Rn(C,4),O,fe,k5)}function Ose(y,C){var O=Gn(y)?Wa:F5;return O(y,L1(Rn(C,3)))}function Nse(y){var C=Gn(y)?P5:Mie;return C(y)}function Lse(y,C,O){(O?xs(y,C,O):C===n)?C=1:C=Zn(C);var Q=Gn(y)?oie:Pie;return Q(y,C)}function Bse(y){var C=Gn(y)?sie:Rie;return C(y)}function jse(y){if(y==null)return 0;if(Hs(y))return j1(y)?Dm(y):y.length;var C=Jo(y);return C==ce||C==X?y.size:S2(y).length}function Use(y,C,O){var Q=Gn(y)?Tm:Iie;return O&&xs(y,C,O)&&(C=n),Q(y,Rn(C,3))}var zse=ir(function(y,C){if(y==null)return[];var O=C.length;return O>1&&xs(y,C[0],C[1])?C=[]:O>2&&xs(C[0],C[1],C[2])&&(C=[C[0]]),$5(y,Oo(C,1),[])}),O1=wre||function(){return En.Date.now()};function Vse(y,C){if(typeof C!="function")throw new Ha(s);return y=Zn(y),function(){if(--y<1)return C.apply(this,arguments)}}function BB(y,C,O){return C=O?n:C,C=y&&C==null?y.length:C,xu(y,M,n,n,n,n,C)}function jB(y,C){var O;if(typeof C!="function")throw new Ha(s);return y=Zn(y),function(){return--y>0&&(O=C.apply(this,arguments)),y<=1&&(C=n),O}}var G2=ir(function(y,C,O){var Q=m;if(O.length){var fe=jd(O,Bm(G2));Q|=P}return xu(y,Q,C,O,fe)}),UB=ir(function(y,C,O){var Q=m|g;if(O.length){var fe=jd(O,Bm(UB));Q|=P}return xu(C,Q,y,O,fe)});function zB(y,C,O){C=O?n:C;var Q=xu(y,w,n,n,n,n,n,C);return Q.placeholder=zB.placeholder,Q}function VB(y,C,O){C=O?n:C;var Q=xu(y,S,n,n,n,n,n,C);return Q.placeholder=VB.placeholder,Q}function WB(y,C,O){var Q,fe,Se,Oe,$e,rt,_t=0,Tt=!1,kt=!1,Zt=!0;if(typeof y!="function")throw new Ha(s);C=Xa(C)||0,Ti(O)&&(Tt=!!O.leading,kt="maxWait"in O,Se=kt?mo(Xa(O.maxWait)||0,C):Se,Zt="trailing"in O?!!O.trailing:Zt);function xn(Yi){var Ul=Q,Eu=fe;return Q=fe=n,_t=Yi,Oe=y.apply(Eu,Ul),Oe}function kn(Yi){return _t=Yi,$e=U0(ur,C),Tt?xn(Yi):Oe}function tr(Yi){var Ul=Yi-rt,Eu=Yi-_t,l4=C-Ul;return kt?Zo(l4,Se-Eu):l4}function Fn(Yi){var Ul=Yi-rt,Eu=Yi-_t;return rt===n||Ul>=C||Ul<0||kt&&Eu>=Se}function ur(){var Yi=O1();if(Fn(Yi))return yr(Yi);$e=U0(ur,tr(Yi))}function yr(Yi){return $e=n,Zt&&Q?xn(Yi):(Q=fe=n,Oe)}function ga(){$e!==n&&J5($e),_t=0,Q=rt=fe=$e=n}function bs(){return $e===n?Oe:yr(O1())}function va(){var Yi=O1(),Ul=Fn(Yi);if(Q=arguments,fe=this,rt=Yi,Ul){if($e===n)return kn(rt);if(kt)return J5($e),$e=U0(ur,C),xn(rt)}return $e===n&&($e=U0(ur,C)),Oe}return va.cancel=ga,va.flush=bs,va}var Wse=ir(function(y,C){return I5(y,1,C)}),$se=ir(function(y,C,O){return I5(y,Xa(C)||0,O)});function Hse(y){return xu(y,E)}function N1(y,C){if(typeof y!="function"||C!=null&&typeof C!="function")throw new Ha(s);var O=function(){var Q=arguments,fe=C?C.apply(this,Q):Q[0],Se=O.cache;if(Se.has(fe))return Se.get(fe);var Oe=y.apply(this,Q);return O.cache=Se.set(fe,Oe)||Se,Oe};return O.cache=new(N1.Cache||vu),O}N1.Cache=vu;function L1(y){if(typeof y!="function")throw new Ha(s);return function(){var C=arguments;switch(C.length){case 0:return!y.call(this);case 1:return!y.call(this,C[0]);case 2:return!y.call(this,C[0],C[1]);case 3:return!y.call(this,C[0],C[1],C[2])}return!y.apply(this,C)}}function Gse(y){return jB(2,y)}var qse=kie(function(y,C){C=C.length==1&&Gn(C[0])?ri(C[0],$r(Rn())):ri(Oo(C,1),$r(Rn()));var O=C.length;return ir(function(Q){for(var fe=-1,Se=Zo(Q.length,O);++fe<Se;)Q[fe]=C[fe].call(this,Q[fe]);return Xo(y,this,Q)})}),q2=ir(function(y,C){var O=jd(C,Bm(q2));return xu(y,P,n,C,O)}),$B=ir(function(y,C){var O=jd(C,Bm($B));return xu(y,I,n,C,O)}),Kse=bu(function(y,C){return xu(y,D,n,n,n,C)});function Yse(y,C){if(typeof y!="function")throw new Ha(s);return C=C===n?C:Zn(C),ir(y,C)}function Xse(y,C){if(typeof y!="function")throw new Ha(s);return C=C==null?0:mo(Zn(C),0),ir(function(O){var Q=O[C],fe=$d(O,0,C);return Q&&Ol(fe,Q),Xo(y,this,fe)})}function Qse(y,C,O){var Q=!0,fe=!0;if(typeof y!="function")throw new Ha(s);return Ti(O)&&(Q="leading"in O?!!O.leading:Q,fe="trailing"in O?!!O.trailing:fe),WB(y,C,{leading:Q,maxWait:C,trailing:fe})}function Zse(y){return BB(y,1)}function Jse(y,C){return q2(R2(C),y)}function eae(){if(!arguments.length)return[];var y=arguments[0];return Gn(y)?y:[y]}function tae(y){return qa(y,p)}function nae(y,C){return C=typeof C=="function"?C:n,qa(y,p,C)}function rae(y){return qa(y,d|p)}function iae(y,C){return C=typeof C=="function"?C:n,qa(y,d|p,C)}function oae(y,C){return C==null||R5(y,C,Co(C))}function jl(y,C){return y===C||y!==y&&C!==C}var sae=P1(x2),aae=P1(function(y,C){return y>=C}),Ih=L5(function(){return arguments}())?L5:function(y){return Li(y)&&Yr.call(y,"callee")&&!_5.call(y,"callee")},Gn=dt.isArray,lae=hu?$r(hu):gie;function Hs(y){return y!=null&&B1(y.length)&&!Su(y)}function Ki(y){return Li(y)&&Hs(y)}function cae(y){return y===!0||y===!1||Li(y)&&ys(y)==oe}var Hd=_re||iM,uae=pu?$r(pu):vie;function dae(y){return Li(y)&&y.nodeType===1&&!z0(y)}function fae(y){if(y==null)return!0;if(Hs(y)&&(Gn(y)||typeof y=="string"||typeof y.splice=="function"||Hd(y)||jm(y)||Ih(y)))return!y.length;var C=Jo(y);if(C==ce||C==X)return!y.size;if(j0(y))return!S2(y).length;for(var O in y)if(Yr.call(y,O))return!1;return!0}function hae(y,C){return N0(y,C)}function pae(y,C,O){O=typeof O=="function"?O:n;var Q=O?O(y,C):n;return Q===n?N0(y,C,n,O):!!Q}function K2(y){if(!Li(y))return!1;var C=ys(y);return C==ye||C==pe||typeof y.message=="string"&&typeof y.name=="string"&&!z0(y)}function mae(y){return typeof y=="number"&&C5(y)}function Su(y){if(!Ti(y))return!1;var C=ys(y);return C==Ce||C==_e||C==J||C==ae}function HB(y){return typeof y=="number"&&y==Zn(y)}function B1(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=B}function Ti(y){var C=typeof y;return y!=null&&(C=="object"||C=="function")}function Li(y){return y!=null&&typeof y=="object"}var GB=xh?$r(xh):xie;function gae(y,C){return y===C||w2(y,C,B2(C))}function vae(y,C,O){return O=typeof O=="function"?O:n,w2(y,C,B2(C),O)}function yae(y){return qB(y)&&y!=+y}function xae(y){if(noe(y))throw new Wn(o);return B5(y)}function bae(y){return y===null}function wae(y){return y==null}function qB(y){return typeof y=="number"||Li(y)&&ys(y)==Be}function z0(y){if(!Li(y)||ys(y)!=me)return!1;var C=d1(y);if(C===null)return!0;var O=Yr.call(C,"constructor")&&C.constructor;return typeof O=="function"&&O instanceof O&&a1.call(O)==vre}var Y2=A0?$r(A0):bie;function Sae(y){return HB(y)&&y>=-9007199254740991&&y<=B}var KB=bh?$r(bh):wie;function j1(y){return typeof y=="string"||!Gn(y)&&Li(y)&&ys(y)==W}function ma(y){return typeof y=="symbol"||Li(y)&&ys(y)==ve}var jm=Jw?$r(Jw):Sie;function _ae(y){return y===n}function Eae(y){return Li(y)&&Jo(y)==Me}function Cae(y){return Li(y)&&ys(y)==Ae}var Aae=P1(_2),Tae=P1(function(y,C){return y<=C});function YB(y){if(!y)return[];if(Hs(y))return j1(y)?Ll(y):$s(y);if(M0&&y[M0])return ore(y[M0]());var C=Jo(y),O=C==ce?u2:C==X?i1:Um;return O(y)}function _u(y){if(!y)return y===0?y:0;if(y=Xa(y),y===$||y===-1/0){var C=y<0?-1:1;return C*H}return y===y?y:0}function Zn(y){var C=_u(y),O=C%1;return C===C?O?C-O:C:0}function XB(y){return y?Mh(Zn(y),0,z):0}function Xa(y){if(typeof y=="number")return y;if(ma(y))return q;if(Ti(y)){var C=typeof y.valueOf=="function"?y.valueOf():y;y=Ti(C)?C+"":C}if(typeof y!="string")return y===0?y:+y;y=vr(y);var O=Yn.test(y);return O||Te.test(y)?rr(y.slice(2),O?2:8):lr.test(y)?q:+y}function QB(y){return bc(y,Gs(y))}function Mae(y){return y?Mh(Zn(y),-9007199254740991,B):y===0?y:0}function Hr(y){return y==null?"":pa(y)}var Pae=Nm(function(y,C){if(j0(C)||Hs(C)){bc(C,Co(C),y);return}for(var O in C)Yr.call(C,O)&&k0(y,O,C[O])}),ZB=Nm(function(y,C){bc(C,Gs(C),y)}),U1=Nm(function(y,C,O,Q){bc(C,Gs(C),y,Q)}),Dae=Nm(function(y,C,O,Q){bc(C,Co(C),y,Q)}),Rae=bu(g2);function Iae(y,C){var O=Om(y);return C==null?O:D5(O,C)}var kae=ir(function(y,C){y=ii(y);var O=-1,Q=C.length,fe=Q>2?C[2]:n;for(fe&&xs(C[0],C[1],fe)&&(Q=1);++O<Q;)for(var Se=C[O],Oe=Gs(Se),$e=-1,rt=Oe.length;++$e<rt;){var _t=Oe[$e],Tt=y[_t];(Tt===n||jl(Tt,Im[_t])&&!Yr.call(y,_t))&&(y[_t]=Se[_t])}return y}),Fae=ir(function(y){return y.push(n,mB),Xo(JB,n,y)});function Oae(y,C){return Qo(y,Rn(C,3),xc)}function Nae(y,C){return Qo(y,Rn(C,3),y2)}function Lae(y,C){return y==null?y:v2(y,Rn(C,3),Gs)}function Bae(y,C){return y==null?y:O5(y,Rn(C,3),Gs)}function jae(y,C){return y&&xc(y,Rn(C,3))}function Uae(y,C){return y&&y2(y,Rn(C,3))}function zae(y){return y==null?[]:w1(y,Co(y))}function Vae(y){return y==null?[]:w1(y,Gs(y))}function X2(y,C,O){var Q=y==null?n:Ph(y,C);return Q===n?O:Q}function Wae(y,C){return y!=null&&yB(y,C,fie)}function Q2(y,C){return y!=null&&yB(y,C,hie)}var $ae=uB(function(y,C,O){C!=null&&typeof C.toString!="function"&&(C=l1.call(C)),y[C]=O},J2(qs)),Hae=uB(function(y,C,O){C!=null&&typeof C.toString!="function"&&(C=l1.call(C)),Yr.call(y,C)?y[C].push(O):y[C]=[O]},Rn),Gae=ir(O0);function Co(y){return Hs(y)?M5(y):S2(y)}function Gs(y){return Hs(y)?M5(y,!0):_ie(y)}function qae(y,C){var O={};return C=Rn(C,3),xc(y,function(Q,fe,Se){yu(O,C(Q,fe,Se),Q)}),O}function Kae(y,C){var O={};return C=Rn(C,3),xc(y,function(Q,fe,Se){yu(O,fe,C(Q,fe,Se))}),O}var Yae=Nm(function(y,C,O){S1(y,C,O)}),JB=Nm(function(y,C,O,Q){S1(y,C,O,Q)}),Xae=bu(function(y,C){var O={};if(y==null)return O;var Q=!1;C=ri(C,function(Se){return Se=Wd(Se,y),Q||(Q=Se.length>1),Se}),bc(y,N2(y),O),Q&&(O=qa(O,d|f|p,$ie));for(var fe=C.length;fe--;)M2(O,C[fe]);return O});function Qae(y,C){return e4(y,L1(Rn(C)))}var Zae=bu(function(y,C){return y==null?{}:Cie(y,C)});function e4(y,C){if(y==null)return{};var O=ri(N2(y),function(Q){return[Q]});return C=Rn(C),H5(y,O,function(Q,fe){return C(Q,fe[0])})}function Jae(y,C,O){C=Wd(C,y);var Q=-1,fe=C.length;for(fe||(fe=1,y=n);++Q<fe;){var Se=y==null?n:y[wc(C[Q])];Se===n&&(Q=fe,Se=O),y=Su(Se)?Se.call(y):Se}return y}function ele(y,C,O){return y==null?y:L0(y,C,O)}function tle(y,C,O,Q){return Q=typeof Q=="function"?Q:n,y==null?y:L0(y,C,O,Q)}var t4=hB(Co),n4=hB(Gs);function nle(y,C,O){var Q=Gn(y),fe=Q||Hd(y)||jm(y);if(C=Rn(C,4),O==null){var Se=y&&y.constructor;fe?O=Q?new Se:[]:Ti(y)?O=Su(Se)?Om(d1(y)):{}:O={}}return(fe?vs:xc)(y,function(Oe,$e,rt){return C(O,Oe,$e,rt)}),O}function rle(y,C){return y==null?!0:M2(y,C)}function ile(y,C,O){return y==null?y:X5(y,C,R2(O))}function ole(y,C,O,Q){return Q=typeof Q=="function"?Q:n,y==null?y:X5(y,C,R2(O),Q)}function Um(y){return y==null?[]:to(y,Co(y))}function sle(y){return y==null?[]:to(y,Gs(y))}function ale(y,C,O){return O===n&&(O=C,C=n),O!==n&&(O=Xa(O),O=O===O?O:0),C!==n&&(C=Xa(C),C=C===C?C:0),Mh(Xa(y),C,O)}function lle(y,C,O){return C=_u(C),O===n?(O=C,C=0):O=_u(O),y=Xa(y),pie(y,C,O)}function cle(y,C,O){if(O&&typeof O!="boolean"&&xs(y,C,O)&&(C=O=n),O===n&&(typeof C=="boolean"?(O=C,C=n):typeof y=="boolean"&&(O=y,y=n)),y===n&&C===n?(y=0,C=1):(y=_u(y),C===n?(C=y,y=0):C=_u(C)),y>C){var Q=y;y=C,C=Q}if(O||y%1||C%1){var fe=A5();return Zo(y+fe*(C-y+un("1e-"+((fe+"").length-1))),C)}return C2(y,C)}var ule=Lm(function(y,C,O){return C=C.toLowerCase(),y+(O?r4(C):C)});function r4(y){return Z2(Hr(y).toLowerCase())}function i4(y){return y=Hr(y),y&&y.replace(le,ere).replace(kl,"")}function dle(y,C,O){y=Hr(y),C=pa(C);var Q=y.length;O=O===n?Q:Mh(Zn(O),0,Q);var fe=O;return O-=C.length,O>=0&&y.slice(O,fe)==C}function fle(y){return y=Hr(y),y&&mt.test(y)?y.replace(yt,tre):y}function hle(y){return y=Hr(y),y&&Pt.test(y)?y.replace(vt,"\\$&"):y}var ple=Lm(function(y,C,O){return y+(O?"-":"")+C.toLowerCase()}),mle=Lm(function(y,C,O){return y+(O?" ":"")+C.toLowerCase()}),gle=aB("toLowerCase");function vle(y,C,O){y=Hr(y),C=Zn(C);var Q=C?Dm(y):0;if(!C||Q>=C)return y;var fe=(C-Q)/2;return M1(m1(fe),O)+y+M1(p1(fe),O)}function yle(y,C,O){y=Hr(y),C=Zn(C);var Q=C?Dm(y):0;return C&&Q<C?y+M1(C-Q,O):y}function xle(y,C,O){y=Hr(y),C=Zn(C);var Q=C?Dm(y):0;return C&&Q<C?M1(C-Q,O)+y:y}function ble(y,C,O){return O||C==null?C=0:C&&(C=+C),Tre(Hr(y).replace(jt,""),C||0)}function wle(y,C,O){return(O?xs(y,C,O):C===n)?C=1:C=Zn(C),A2(Hr(y),C)}function Sle(){var y=arguments,C=Hr(y[0]);return y.length<3?C:C.replace(y[1],y[2])}var _le=Lm(function(y,C,O){return y+(O?"_":"")+C.toLowerCase()});function Ele(y,C,O){return O&&typeof O!="number"&&xs(y,C,O)&&(C=O=n),O=O===n?z:O>>>0,O?(y=Hr(y),y&&(typeof C=="string"||C!=null&&!Y2(C))&&(C=pa(C),!C&&Pm(y))?$d(Ll(y),0,O):y.split(C,O)):[]}var Cle=Lm(function(y,C,O){return y+(O?" ":"")+Z2(C)});function Ale(y,C,O){return y=Hr(y),O=O==null?0:Mh(Zn(O),0,y.length),C=pa(C),y.slice(O,O+C.length)==C}function Tle(y,C,O){var Q=xe.templateSettings;O&&xs(y,C,O)&&(C=n),y=Hr(y),C=U1({},C,Q,pB);var fe=U1({},C.imports,Q.imports,pB),Se=Co(fe),Oe=to(fe,Se),$e,rt,_t=0,Tt=C.interpolate||Fe,kt="__p += '",Zt=d2((C.escape||Fe).source+"|"+Tt.source+"|"+(Tt===on?er:Fe).source+"|"+(C.evaluate||Fe).source+"|$","g"),xn="//# sourceURL="+(Yr.call(C,"sourceURL")?(C.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Em+"]")+`
`;y.replace(Zt,function(Fn,ur,yr,ga,bs,va){return yr||(yr=ga),kt+=y.slice(_t,va).replace(Je,nre),ur&&($e=!0,kt+=`' +
__e(`+ur+`) +
'`),bs&&(rt=!0,kt+=`';
`+bs+`;
__p += '`),yr&&(kt+=`' +
((__t = (`+yr+`)) == null ? '' : __t) +
'`),_t=va+Fn.length,Fn}),kt+=`';
`;var kn=Yr.call(C,"variable")&&C.variable;if(!kn)kt=`with (obj) {
`+kt+`
}
`;else if(mn.test(kn))throw new Wn(a);kt=(rt?kt.replace(ht,""):kt).replace(ke,"$1").replace(gt,"$1;"),kt="function("+(kn||"obj")+`) {
`+(kn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+($e?", __e = _.escape":"")+(rt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+kt+`return __p
}`;var tr=s4(function(){return Nr(Se,xn+"return "+kt).apply(n,Oe)});if(tr.source=kt,K2(tr))throw tr;return tr}function Mle(y){return Hr(y).toLowerCase()}function Ple(y){return Hr(y).toUpperCase()}function Dle(y,C,O){if(y=Hr(y),y&&(O||C===n))return vr(y);if(!y||!(C=pa(C)))return y;var Q=Ll(y),fe=Ll(C),Se=Ws(Q,fe),Oe=Eh(Q,fe)+1;return $d(Q,Se,Oe).join("")}function Rle(y,C,O){if(y=Hr(y),y&&(O||C===n))return y.slice(0,x5(y)+1);if(!y||!(C=pa(C)))return y;var Q=Ll(y),fe=Eh(Q,Ll(C))+1;return $d(Q,0,fe).join("")}function Ile(y,C,O){if(y=Hr(y),y&&(O||C===n))return y.replace(jt,"");if(!y||!(C=pa(C)))return y;var Q=Ll(y),fe=Ws(Q,Ll(C));return $d(Q,fe).join("")}function kle(y,C){var O=_,Q=A;if(Ti(C)){var fe="separator"in C?C.separator:fe;O="length"in C?Zn(C.length):O,Q="omission"in C?pa(C.omission):Q}y=Hr(y);var Se=y.length;if(Pm(y)){var Oe=Ll(y);Se=Oe.length}if(O>=Se)return y;var $e=O-Dm(Q);if($e<1)return Q;var rt=Oe?$d(Oe,0,$e).join(""):y.slice(0,$e);if(fe===n)return rt+Q;if(Oe&&($e+=rt.length-$e),Y2(fe)){if(y.slice($e).search(fe)){var _t,Tt=rt;for(fe.global||(fe=d2(fe.source,Hr(Wr.exec(fe))+"g")),fe.lastIndex=0;_t=fe.exec(Tt);)var kt=_t.index;rt=rt.slice(0,kt===n?$e:kt)}}else if(y.indexOf(pa(fe),$e)!=$e){var Zt=rt.lastIndexOf(fe);Zt>-1&&(rt=rt.slice(0,Zt))}return rt+Q}function Fle(y){return y=Hr(y),y&&at.test(y)?y.replace(tt,cre):y}var Ole=Lm(function(y,C,O){return y+(O?" ":"")+C.toUpperCase()}),Z2=aB("toUpperCase");function o4(y,C,O){return y=Hr(y),C=O?n:C,C===n?ire(y)?fre(y):Mm(y):y.match(C)||[]}var s4=ir(function(y,C){try{return Xo(y,n,C)}catch(O){return K2(O)?O:new Wn(O)}}),Nle=bu(function(y,C){return vs(C,function(O){O=wc(O),yu(y,O,G2(y[O],y))}),y});function Lle(y){var C=y==null?0:y.length,O=Rn();return y=C?ri(y,function(Q){if(typeof Q[1]!="function")throw new Ha(s);return[O(Q[0]),Q[1]]}):[],ir(function(Q){for(var fe=-1;++fe<C;){var Se=y[fe];if(Xo(Se[0],this,Q))return Xo(Se[1],this,Q)}})}function Ble(y){return cie(qa(y,d))}function J2(y){return function(){return y}}function jle(y,C){return y==null||y!==y?C:y}var Ule=cB(),zle=cB(!0);function qs(y){return y}function eM(y){return j5(typeof y=="function"?y:qa(y,d))}function Vle(y){return z5(qa(y,d))}function Wle(y,C){return V5(y,qa(C,d))}var $le=ir(function(y,C){return function(O){return O0(O,y,C)}}),Hle=ir(function(y,C){return function(O){return O0(y,O,C)}});function tM(y,C,O){var Q=Co(C),fe=w1(C,Q);O==null&&!(Ti(C)&&(fe.length||!Q.length))&&(O=C,C=y,y=this,fe=w1(C,Co(C)));var Se=!(Ti(O)&&"chain"in O)||!!O.chain,Oe=Su(y);return vs(fe,function($e){var rt=C[$e];y[$e]=rt,Oe&&(y.prototype[$e]=function(){var _t=this.__chain__;if(Se||_t){var Tt=y(this.__wrapped__),kt=Tt.__actions__=$s(this.__actions__);return kt.push({func:rt,args:arguments,thisArg:y}),Tt.__chain__=_t,Tt}return rt.apply(y,Ol([this.value()],arguments))})}),y}function Gle(){return En._===this&&(En._=yre),this}function nM(){}function qle(y){return y=Zn(y),ir(function(C){return W5(C,y)})}var Kle=k2(ri),Yle=k2(Am),Xle=k2(Tm);function a4(y){return U2(y)?re(wc(y)):Aie(y)}function Qle(y){return function(C){return y==null?n:Ph(y,C)}}var Zle=dB(),Jle=dB(!0);function rM(){return[]}function iM(){return!1}function ece(){return{}}function tce(){return""}function nce(){return!0}function rce(y,C){if(y=Zn(y),y<1||y>B)return[];var O=z,Q=Zo(y,z);C=Rn(C),y-=z;for(var fe=Or(Q,C);++O<y;)C(O);return fe}function ice(y){return Gn(y)?ri(y,wc):ma(y)?[y]:$s(TB(Hr(y)))}function oce(y){var C=++gre;return Hr(y)+C}var sce=T1(function(y,C){return y+C},0),ace=F2("ceil"),lce=T1(function(y,C){return y/C},1),cce=F2("floor");function uce(y){return y&&y.length?b1(y,qs,x2):n}function dce(y,C){return y&&y.length?b1(y,Rn(C,2),x2):n}function fce(y){return Y(y,qs)}function hce(y,C){return Y(y,Rn(C,2))}function pce(y){return y&&y.length?b1(y,qs,_2):n}function mce(y,C){return y&&y.length?b1(y,Rn(C,2),_2):n}var gce=T1(function(y,C){return y*C},1),vce=F2("round"),yce=T1(function(y,C){return y-C},0);function xce(y){return y&&y.length?Ht(y,qs):0}function bce(y,C){return y&&y.length?Ht(y,Rn(C,2)):0}return xe.after=Vse,xe.ary=BB,xe.assign=Pae,xe.assignIn=ZB,xe.assignInWith=U1,xe.assignWith=Dae,xe.at=Rae,xe.before=jB,xe.bind=G2,xe.bindAll=Nle,xe.bindKey=UB,xe.castArray=eae,xe.chain=OB,xe.chunk=coe,xe.compact=uoe,xe.concat=doe,xe.cond=Lle,xe.conforms=Ble,xe.constant=J2,xe.countBy=xse,xe.create=Iae,xe.curry=zB,xe.curryRight=VB,xe.debounce=WB,xe.defaults=kae,xe.defaultsDeep=Fae,xe.defer=Wse,xe.delay=$se,xe.difference=foe,xe.differenceBy=hoe,xe.differenceWith=poe,xe.drop=moe,xe.dropRight=goe,xe.dropRightWhile=voe,xe.dropWhile=yoe,xe.fill=xoe,xe.filter=wse,xe.flatMap=Ese,xe.flatMapDeep=Cse,xe.flatMapDepth=Ase,xe.flatten=RB,xe.flattenDeep=boe,xe.flattenDepth=woe,xe.flip=Hse,xe.flow=Ule,xe.flowRight=zle,xe.fromPairs=Soe,xe.functions=zae,xe.functionsIn=Vae,xe.groupBy=Tse,xe.initial=Eoe,xe.intersection=Coe,xe.intersectionBy=Aoe,xe.intersectionWith=Toe,xe.invert=$ae,xe.invertBy=Hae,xe.invokeMap=Pse,xe.iteratee=eM,xe.keyBy=Dse,xe.keys=Co,xe.keysIn=Gs,xe.map=F1,xe.mapKeys=qae,xe.mapValues=Kae,xe.matches=Vle,xe.matchesProperty=Wle,xe.memoize=N1,xe.merge=Yae,xe.mergeWith=JB,xe.method=$le,xe.methodOf=Hle,xe.mixin=tM,xe.negate=L1,xe.nthArg=qle,xe.omit=Xae,xe.omitBy=Qae,xe.once=Gse,xe.orderBy=Rse,xe.over=Kle,xe.overArgs=qse,xe.overEvery=Yle,xe.overSome=Xle,xe.partial=q2,xe.partialRight=$B,xe.partition=Ise,xe.pick=Zae,xe.pickBy=e4,xe.property=a4,xe.propertyOf=Qle,xe.pull=Roe,xe.pullAll=kB,xe.pullAllBy=Ioe,xe.pullAllWith=koe,xe.pullAt=Foe,xe.range=Zle,xe.rangeRight=Jle,xe.rearg=Kse,xe.reject=Ose,xe.remove=Ooe,xe.rest=Yse,xe.reverse=$2,xe.sampleSize=Lse,xe.set=ele,xe.setWith=tle,xe.shuffle=Bse,xe.slice=Noe,xe.sortBy=zse,xe.sortedUniq=Woe,xe.sortedUniqBy=$oe,xe.split=Ele,xe.spread=Xse,xe.tail=Hoe,xe.take=Goe,xe.takeRight=qoe,xe.takeRightWhile=Koe,xe.takeWhile=Yoe,xe.tap=use,xe.throttle=Qse,xe.thru=k1,xe.toArray=YB,xe.toPairs=t4,xe.toPairsIn=n4,xe.toPath=ice,xe.toPlainObject=QB,xe.transform=nle,xe.unary=Zse,xe.union=Xoe,xe.unionBy=Qoe,xe.unionWith=Zoe,xe.uniq=Joe,xe.uniqBy=ese,xe.uniqWith=tse,xe.unset=rle,xe.unzip=H2,xe.unzipWith=FB,xe.update=ile,xe.updateWith=ole,xe.values=Um,xe.valuesIn=sle,xe.without=nse,xe.words=o4,xe.wrap=Jse,xe.xor=rse,xe.xorBy=ise,xe.xorWith=ose,xe.zip=sse,xe.zipObject=ase,xe.zipObjectDeep=lse,xe.zipWith=cse,xe.entries=t4,xe.entriesIn=n4,xe.extend=ZB,xe.extendWith=U1,tM(xe,xe),xe.add=sce,xe.attempt=s4,xe.camelCase=ule,xe.capitalize=r4,xe.ceil=ace,xe.clamp=ale,xe.clone=tae,xe.cloneDeep=rae,xe.cloneDeepWith=iae,xe.cloneWith=nae,xe.conformsTo=oae,xe.deburr=i4,xe.defaultTo=jle,xe.divide=lce,xe.endsWith=dle,xe.eq=jl,xe.escape=fle,xe.escapeRegExp=hle,xe.every=bse,xe.find=Sse,xe.findIndex=PB,xe.findKey=Oae,xe.findLast=_se,xe.findLastIndex=DB,xe.findLastKey=Nae,xe.floor=cce,xe.forEach=NB,xe.forEachRight=LB,xe.forIn=Lae,xe.forInRight=Bae,xe.forOwn=jae,xe.forOwnRight=Uae,xe.get=X2,xe.gt=sae,xe.gte=aae,xe.has=Wae,xe.hasIn=Q2,xe.head=IB,xe.identity=qs,xe.includes=Mse,xe.indexOf=_oe,xe.inRange=lle,xe.invoke=Gae,xe.isArguments=Ih,xe.isArray=Gn,xe.isArrayBuffer=lae,xe.isArrayLike=Hs,xe.isArrayLikeObject=Ki,xe.isBoolean=cae,xe.isBuffer=Hd,xe.isDate=uae,xe.isElement=dae,xe.isEmpty=fae,xe.isEqual=hae,xe.isEqualWith=pae,xe.isError=K2,xe.isFinite=mae,xe.isFunction=Su,xe.isInteger=HB,xe.isLength=B1,xe.isMap=GB,xe.isMatch=gae,xe.isMatchWith=vae,xe.isNaN=yae,xe.isNative=xae,xe.isNil=wae,xe.isNull=bae,xe.isNumber=qB,xe.isObject=Ti,xe.isObjectLike=Li,xe.isPlainObject=z0,xe.isRegExp=Y2,xe.isSafeInteger=Sae,xe.isSet=KB,xe.isString=j1,xe.isSymbol=ma,xe.isTypedArray=jm,xe.isUndefined=_ae,xe.isWeakMap=Eae,xe.isWeakSet=Cae,xe.join=Moe,xe.kebabCase=ple,xe.last=Ya,xe.lastIndexOf=Poe,xe.lowerCase=mle,xe.lowerFirst=gle,xe.lt=Aae,xe.lte=Tae,xe.max=uce,xe.maxBy=dce,xe.mean=fce,xe.meanBy=hce,xe.min=pce,xe.minBy=mce,xe.stubArray=rM,xe.stubFalse=iM,xe.stubObject=ece,xe.stubString=tce,xe.stubTrue=nce,xe.multiply=gce,xe.nth=Doe,xe.noConflict=Gle,xe.noop=nM,xe.now=O1,xe.pad=vle,xe.padEnd=yle,xe.padStart=xle,xe.parseInt=ble,xe.random=cle,xe.reduce=kse,xe.reduceRight=Fse,xe.repeat=wle,xe.replace=Sle,xe.result=Jae,xe.round=vce,xe.runInContext=Qe,xe.sample=Nse,xe.size=jse,xe.snakeCase=_le,xe.some=Use,xe.sortedIndex=Loe,xe.sortedIndexBy=Boe,xe.sortedIndexOf=joe,xe.sortedLastIndex=Uoe,xe.sortedLastIndexBy=zoe,xe.sortedLastIndexOf=Voe,xe.startCase=Cle,xe.startsWith=Ale,xe.subtract=yce,xe.sum=xce,xe.sumBy=bce,xe.template=Tle,xe.times=rce,xe.toFinite=_u,xe.toInteger=Zn,xe.toLength=XB,xe.toLower=Mle,xe.toNumber=Xa,xe.toSafeInteger=Mae,xe.toString=Hr,xe.toUpper=Ple,xe.trim=Dle,xe.trimEnd=Rle,xe.trimStart=Ile,xe.truncate=kle,xe.unescape=Fle,xe.uniqueId=oce,xe.upperCase=Ole,xe.upperFirst=Z2,xe.each=NB,xe.eachRight=LB,xe.first=IB,tM(xe,function(){var y={};return xc(xe,function(C,O){Yr.call(xe.prototype,O)||(y[O]=C)}),y}(),{chain:!1}),xe.VERSION=r,vs(["bind","bindKey","curry","curryRight","partial","partialRight"],function(y){xe[y].placeholder=xe}),vs(["drop","take"],function(y,C){hr.prototype[y]=function(O){O=O===n?1:mo(Zn(O),0);var Q=this.__filtered__&&!C?new hr(this):this.clone();return Q.__filtered__?Q.__takeCount__=Zo(O,Q.__takeCount__):Q.__views__.push({size:Zo(O,z),type:y+(Q.__dir__<0?"Right":"")}),Q},hr.prototype[y+"Right"]=function(O){return this.reverse()[y](O).reverse()}}),vs(["filter","map","takeWhile"],function(y,C){var O=C+1,Q=O==L||O==U;hr.prototype[y]=function(fe){var Se=this.clone();return Se.__iteratees__.push({iteratee:Rn(fe,3),type:O}),Se.__filtered__=Se.__filtered__||Q,Se}}),vs(["head","last"],function(y,C){var O="take"+(C?"Right":"");hr.prototype[y]=function(){return this[O](1).value()[0]}}),vs(["initial","tail"],function(y,C){var O="drop"+(C?"":"Right");hr.prototype[y]=function(){return this.__filtered__?new hr(this):this[O](1)}}),hr.prototype.compact=function(){return this.filter(qs)},hr.prototype.find=function(y){return this.filter(y).head()},hr.prototype.findLast=function(y){return this.reverse().find(y)},hr.prototype.invokeMap=ir(function(y,C){return typeof y=="function"?new hr(this):this.map(function(O){return O0(O,y,C)})}),hr.prototype.reject=function(y){return this.filter(L1(Rn(y)))},hr.prototype.slice=function(y,C){y=Zn(y);var O=this;return O.__filtered__&&(y>0||C<0)?new hr(O):(y<0?O=O.takeRight(-y):y&&(O=O.drop(y)),C!==n&&(C=Zn(C),O=C<0?O.dropRight(-C):O.take(C-y)),O)},hr.prototype.takeRightWhile=function(y){return this.reverse().takeWhile(y).reverse()},hr.prototype.toArray=function(){return this.take(z)},xc(hr.prototype,function(y,C){var O=/^(?:filter|find|map|reject)|While$/.test(C),Q=/^(?:head|last)$/.test(C),fe=xe[Q?"take"+(C=="last"?"Right":""):C],Se=Q||/^find/.test(C);fe&&(xe.prototype[C]=function(){var Oe=this.__wrapped__,$e=Q?[1]:arguments,rt=Oe instanceof hr,_t=$e[0],Tt=rt||Gn(Oe),kt=function(ur){var yr=fe.apply(xe,Ol([ur],$e));return Q&&Zt?yr[0]:yr};Tt&&O&&typeof _t=="function"&&_t.length!=1&&(rt=Tt=!1);var Zt=this.__chain__,xn=!!this.__actions__.length,kn=Se&&!Zt,tr=rt&&!xn;if(!Se&&Tt){Oe=tr?Oe:new hr(this);var Fn=y.apply(Oe,$e);return Fn.__actions__.push({func:k1,args:[kt],thisArg:n}),new Ga(Fn,Zt)}return kn&&tr?y.apply(this,$e):(Fn=this.thru(kt),kn?Q?Fn.value()[0]:Fn.value():Fn)})}),vs(["pop","push","shift","sort","splice","unshift"],function(y){var C=o1[y],O=/^(?:push|sort|unshift)$/.test(y)?"tap":"thru",Q=/^(?:pop|shift)$/.test(y);xe.prototype[y]=function(){var fe=arguments;if(Q&&!this.__chain__){var Se=this.value();return C.apply(Gn(Se)?Se:[],fe)}return this[O](function(Oe){return C.apply(Gn(Oe)?Oe:[],fe)})}}),xc(hr.prototype,function(y,C){var O=xe[C];if(O){var Q=O.name+"";Yr.call(Fm,Q)||(Fm[Q]=[]),Fm[Q].push({name:C,func:O})}}),Fm[A1(n,g).name]=[{name:"wrapper",func:n}],hr.prototype.clone=Fre,hr.prototype.reverse=Ore,hr.prototype.value=Nre,xe.prototype.at=dse,xe.prototype.chain=fse,xe.prototype.commit=hse,xe.prototype.next=pse,xe.prototype.plant=gse,xe.prototype.reverse=vse,xe.prototype.toJSON=xe.prototype.valueOf=xe.prototype.value=yse,xe.prototype.first=xe.prototype.head,M0&&(xe.prototype[M0]=mse),xe},Rm=hre();Kr?((Kr.exports=Rm)._=Rm,Fr._=Rm):En._=Rm}).call(Wi)})(fA,fA.exports);var Git=fA.exports;const qit=`
  /* Global Apple-style design */
  .apple-container {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    max-width: 800px;
    margin: 0 auto;
  }
  
  /* Section styling */
  .apple-section {
    background-color: white;
    border-radius: 12px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    padding: 20px;
    margin-bottom: 24px;
    border: 1px solid #E2E8F0;
    transition: all 0.2s ease;
  }

  .apple-section:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  }
  
  /* Section header */
  .apple-section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    border-bottom: 1px solid #E2E8F0;
    padding-bottom: 12px;
  }
  
  /* Input fields */
  .apple-input {
    border-radius: 8px !important;
    border-color: #E2E8F0 !important;
    background-color: #F8F9FC !important;
    transition: all 0.2s ease !important;
  }
  
  .apple-input:focus-within {
    border-color: #007AFF !important;
    box-shadow: 0 0 0 1px #007AFF !important;
    background-color: white !important;
  }
  
  /* Number input fields */
  .chakra-numberinput__field {
    background-color: #F8F9FC !important;
    border-color: #E2E8F0 !important;
    border-radius: 8px !important;
  }
  
  .chakra-numberinput__field:focus-within {
    border-color: #007AFF !important;
    box-shadow: 0 0 0 1px #007AFF !important;
    background-color: white !important;
  }
  
  /* Textarea fields */
  .chakra-textarea {
    background-color: #F8F9FC !important;
    border-color: #E2E8F0 !important;
    border-radius: 8px !important;
  }
  
  .chakra-textarea:focus {
    border-color: #007AFF !important;
    box-shadow: 0 0 0 1px #007AFF !important;
    background-color: white !important;
  }
  
  /* Custom editor styling */
  .narrow-editor {
    width: 100%;
  }
  
  .narrow-editor [contenteditable="true"] {
    padding: 8px 12px;
    min-height: 38px;
    line-height: 1.5;
  }
  
  /* Ensure the formatting toolbar aligns with input field */
  .item-editor-wrapper .slate-toolbar {
    border-radius: 6px;
    margin-top: 2px;
  }
  
  /* Buttons */
  .apple-button {
    border-radius: 8px !important;
    font-weight: 500 !important;
    transition: all 0.2s ease !important;
  }
  
  .apple-button-primary {
    background-color: #007AFF !important;
    color: white !important;
  }
  
  .apple-button-primary:hover {
    background-color: #0063CC !important;
    transform: translateY(-1px) !important;
  }
  
  .apple-button-primary:active {
    transform: translateY(0) scale(0.98) !important;
  }
  
  .apple-button-secondary {
    background-color: #F1F5F9 !important;
    color: #1E293B !important;
    border: 1px solid #E2E8F0 !important;
  }
  
  .apple-button-secondary:hover {
    background-color: #E2E8F0 !important;
    transform: translateY(-1px) !important;
  }
  
  .apple-button-secondary:active {
    transform: translateY(0) scale(0.98) !important;
  }

  /* Add styling for active category */
  .category-box {
    transition: all 0.2s ease;
    border: 1px solid #E2E8F0;
  }
  
  .category-box:focus-within {
    border-color: #007AFF;
    box-shadow: 0 0 0 1px #007AFF;
    background-color: #F7FAFF;
  }

  /* Category header styling */
  .category-header {
    background-color: #f5f7fa;
    margin: -16px -16px 16px -16px;
    padding: 12px 16px;
    border-top-left-radius: 7px;
    border-top-right-radius: 7px;
    border-bottom: 1px solid #E2E8F0;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .category-box:focus-within .category-header {
    background-color: #EBF5FF;
    border-bottom-color: #C5E0FF;
  }
  
  /* Category order buttons */
  .order-buttons {
    display: flex;
    gap: 4px;
  }

  /* Switch styling */
  .chakra-switch__track[data-checked] {
    background-color: #007AFF !important;
  }
  
  .chakra-switch__track:not([data-checked]) {
    background-color: #CBD5E0 !important;
  }
`;if(!document.querySelector("#whack-a-mole-styles")){const t=document.createElement("style");t.id="whack-a-mole-styles",t.textContent=qit,document.head.appendChild(t)}const Yy={width:"32px",height:"32px",padding:"0",minWidth:"auto",borderRadius:"8px",fontWeight:"500",transition:"all 0.2s ease",color:"gray.500",_hover:{bg:"blue.50",color:"blue.500",transform:"translateY(-1px)"},_active:{transform:"scale(0.98)"}},Z$=se(j({},Yy),{color:"gray.500",_hover:{bg:"red.50",color:"red.500"}}),Kit=T.createContext({activeEditorId:null,setActiveEditorId:()=>{},lastSelectionPath:null,setLastSelectionPath:()=>{}}),op=()=>Math.random().toString(36).substring(2,9),Yit=({value:t,onChange:e,placeholder:n,onFocus:r,editorId:i})=>{const o=T.useRef(null),s=()=>{if(typeof t=="string")return t;if(Array.isArray(t))try{let l="";const c=u=>{for(const d of u)typeof d.text=="string"?l+=d.text:d.children&&c(d.children)};return c(t),l}catch(l){return console.error("Error extracting text from Slate content:",l),""}return""},a=l=>{e(l)};return T.useEffect(()=>{if(o.current){const l=o.current,c=u=>{r&&u.target instanceof HTMLDivElement&&r(u)};return l.addEventListener("focusin",c),()=>{l.removeEventListener("focusin",c)}}},[r]),h.jsx("div",{ref:o,className:"item-editor-wrapper","data-editor-id":i,style:{width:"100%"},children:h.jsx(v5,{value:s(),onChange:a,placeholder:n,className:"apple-input narrow-editor"})})},J$=T.memo(Yit,(t,e)=>{if(t.placeholder!==e.placeholder||t.editorId!==e.editorId)return!1;try{return Git.isEqual(t.value,e.value)}catch(n){return!1}}),Xit=(t,e,n)=>t.map((r,i)=>{if(i!==e)return r;const o=[...r.items||[]];return o.splice(n,1),se(j({},r),{items:o})}),Qit=({formData:t,updateField:e,errors:n,saveAttempted:r})=>{var x,w,S,P,I,M,D;co();const[i,o]=T.useState(null),[s,a]=T.useState(null),l=T.useRef({categoryIndex:0,itemIndex:0,id:null});if(!t.categories||t.categories.length!==2){console.log("🚀 [CategoryManager] SYNC INIT - Creating default two categories");const E=[{id:"whack-these",title:"Whack These",items:[{id:op(),content:""}]},{id:"do-not-whack",title:"Do Not Whack These",items:[{id:op(),content:""}]}];e("categories",E),console.log("🚀 [CategoryManager] SYNC INIT - Set formData.categories:",E)}let c=!1;const u=((x=t.categories)==null?void 0:x.map((E,_)=>{if(!E.items)return console.log("🔧 [CategoryManager] SAFETY - Initializing missing items for category:",E.title),c=!0,se(j({},E),{items:[{id:op(),content:""}]});const A=j({},E);return _===0?(A.id="whack-these",A.title="Whack These"):_===1&&(A.id="do-not-whack",A.title="Do Not Whack These"),A}))||[];c&&e("categories",u);const d=u,f=(E,_,A)=>{console.log("Item content change:",{categoryIndex:E,itemIndex:_,content:A,contentType:typeof A});const R=[...d];let F="",L=A;if(typeof A=="string"){const N=document.createElement("div");N.innerHTML=A,F=N.textContent||N.innerText||"",L=A}else if(Array.isArray(A)){const N=U=>{for(const $ of U)typeof $.text=="string"?F+=$.text:$.children&&N($.children)};N(A),L=A}else F=String(A||""),L=F;console.log("Processed content:",{plainText:F,richContent:typeof L=="string"?L:"Rich structure",contentType:typeof L}),R[E].items[_]=se(j({},R[E].items[_]),{content:L,text:F}),e("categories",R)},p=E=>{const _=[...d];if(_[E]){const A=op();_[E].items.push({id:A,content:""}),e("categories",_),l.current={categoryIndex:E,itemIndex:_[E].items.length-1,id:A},setTimeout(()=>{const{categoryIndex:R,itemIndex:F,id:L}=l.current;console.log(`Attempting to focus new item at category ${R}, item ${F}, id ${L}`);const N=document.querySelector(`[data-editor-id="${L}"]`);if(N){console.log("Found item element, focusing");const U=N.querySelector('[contenteditable="true"]');U?(U.focus(),o(L),a([R,F])):console.log("Could not find editable element")}else console.log("Could not find item element with id:",L)},100)}},b=(E,_)=>{if(_<=0)return;const A=[...d],R=A[E];if(!R||!R.items)return;const F=R.items[_];R.items[_]=R.items[_-1],R.items[_-1]=F,e("categories",A)},v=(E,_)=>{const A=[...d],R=A[E];if(!R||!R.items||_>=R.items.length-1)return;const F=R.items[_];R.items[_]=R.items[_+1],R.items[_+1]=F,e("categories",A)},m=E=>_=>{o(E);for(let A=0;A<d.length;A++){const R=d[A];if(R.items){for(let F=0;F<R.items.length;F++)if(R.items[F].id===E){a([A,F]);break}}}},g=(E,_)=>{const A=Xit(d,E,_);A[E]&&A[E].items.length===0&&A[E].items.push({id:op(),content:""}),e("categories",A)};return h.jsx(Kit.Provider,{value:{activeEditorId:i,setActiveEditorId:o,lastSelectionPath:s,setLastSelectionPath:a},children:h.jsxs(Kt,{spacing:6,align:"stretch",children:[h.jsx(ft,{fontSize:"sm",color:"gray.600",mb:4,children:'Create two categories of words or phrases: items students should "whack" and items they should avoid.'}),h.jsxs(ww,{children:[h.jsxs(Sw,{children:[h.jsx(As,{children:h.jsxs(Ln,{children:[h.jsx(ft,{children:"Whack These"}),h.jsxs(lo,{colorScheme:"green",variant:"subtle",children:[((S=(w=d[0])==null?void 0:w.items)==null?void 0:S.length)||0," items"]})]})}),h.jsx(As,{children:h.jsxs(Ln,{children:[h.jsx(ft,{children:"Do Not Whack These"}),h.jsxs(lo,{colorScheme:"red",variant:"subtle",children:[((I=(P=d[1])==null?void 0:P.items)==null?void 0:I.length)||0," items"]})]})})]}),h.jsxs(uT,{children:[h.jsx(Uf,{children:h.jsxs(Et,{p:4,borderWidth:"1px",borderRadius:"md",className:"category-box",children:[h.jsxs(Kt,{align:"start",spacing:1,mb:4,children:[h.jsx(zr,{size:"md",color:"green.600",children:"Whack These"}),h.jsx(ft,{fontSize:"sm",color:"gray.600",children:"Words or phrases that students should hit to earn points"})]}),h.jsxs(Et,{mb:4,children:[h.jsx(ar,{children:"Items"}),h.jsx(ft,{fontSize:"sm",color:"gray.600",mb:3,children:"Enter items to be displayed on moles that players should hit. (Minimum 1 Item)"}),(((M=d[0])==null?void 0:M.items)||[]).map((E,_)=>{var A,R;return h.jsx(Et,{mb:2,children:h.jsxs(fc,{align:"center",direction:"row",children:[h.jsxs(ft,{mr:2,fontWeight:"bold",width:"25px",color:"gray.500",children:[_+1,"."]}),h.jsx(Et,{flex:"1",mr:2,children:h.jsx(J$,{value:E.content,onChange:F=>f(0,_,F),onFocus:m(E.id),placeholder:`Enter word ${_+1}`,editorId:E.id})}),h.jsxs(Ln,{spacing:1,children:[h.jsx(kr,{icon:h.jsx(kb,{boxSize:3}),"aria-label":"Move item up",size:"sm",variant:"ghost",isDisabled:_===0,onClick:()=>b(0,_),mr:1,sx:Yy,className:"apple-button"}),h.jsx(kr,{icon:h.jsx(Gv,{boxSize:3}),"aria-label":"Move item down",size:"sm",variant:"ghost",isDisabled:!((A=d[0])!=null&&A.items)||_===d[0].items.length-1,onClick:()=>v(0,_),mr:1,sx:Yy,className:"apple-button"}),h.jsx(kr,{icon:h.jsx(Tl,{boxSize:4}),"aria-label":"Delete item",size:"sm",variant:"ghost",isDisabled:!((R=d[0])!=null&&R.items)||d[0].items.length<=1,onClick:()=>g(0,_),sx:Z$,className:"apple-button"})]})]})},E.id||`item-0-${_}`)}),h.jsx(pn,{leftIcon:h.jsx(Al,{}),onClick:()=>p(0),size:"sm",colorScheme:"green",_hover:{bg:"green.600"},className:"apple-button apple-button-primary",mt:4,children:"Add Item to Whack"})]})]})}),h.jsx(Uf,{children:h.jsxs(Et,{p:4,borderWidth:"1px",borderRadius:"md",className:"category-box",children:[h.jsxs(Kt,{align:"start",spacing:1,mb:4,children:[h.jsx(zr,{size:"md",color:"red.600",children:"Do Not Whack These"}),h.jsx(ft,{fontSize:"sm",color:"gray.600",children:"Words or phrases that students should avoid (distractors that cause point penalties)"})]}),h.jsxs(Et,{mb:4,children:[h.jsx(ar,{children:"Items"}),h.jsx(ft,{fontSize:"sm",color:"gray.600",mb:3,children:"Enter items to be displayed on moles that players should avoid hitting. (Minimum 1 Item)"}),(((D=d[1])==null?void 0:D.items)||[]).map((E,_)=>{var A,R;return h.jsx(Et,{mb:2,children:h.jsxs(fc,{align:"center",direction:"row",children:[h.jsxs(ft,{mr:2,fontWeight:"bold",width:"25px",color:"gray.500",children:[_+1,"."]}),h.jsx(Et,{flex:"1",mr:2,children:h.jsx(J$,{value:E.content,onChange:F=>f(1,_,F),onFocus:m(E.id),placeholder:`Enter word ${_+1}`,editorId:E.id})}),h.jsxs(Ln,{spacing:1,children:[h.jsx(kr,{icon:h.jsx(kb,{boxSize:3}),"aria-label":"Move item up",size:"sm",variant:"ghost",isDisabled:_===0,onClick:()=>b(1,_),mr:1,sx:Yy,className:"apple-button"}),h.jsx(kr,{icon:h.jsx(Gv,{boxSize:3}),"aria-label":"Move item down",size:"sm",variant:"ghost",isDisabled:!((A=d[1])!=null&&A.items)||_===d[1].items.length-1,onClick:()=>v(1,_),mr:1,sx:Yy,className:"apple-button"}),h.jsx(kr,{icon:h.jsx(Tl,{boxSize:4}),"aria-label":"Delete item",size:"sm",variant:"ghost",isDisabled:!((R=d[1])!=null&&R.items)||d[1].items.length<=1,onClick:()=>g(1,_),sx:Z$,className:"apple-button"})]})]})},E.id||`item-1-${_}`)}),h.jsx(pn,{leftIcon:h.jsx(Al,{}),onClick:()=>p(1),size:"sm",colorScheme:"red",_hover:{bg:"red.600"},className:"apple-button apple-button-primary",mt:4,children:"Add Item to Avoid"})]})]})})]})]}),d.length===0&&h.jsxs(Et,{textAlign:"center",py:8,color:"gray.500",children:[h.jsx(ft,{children:"No categories created yet."}),h.jsx(ft,{fontSize:"sm",children:"Categories will be automatically created."})]})]})})},e7=t=>({title:t.title,words:(t.items||[]).map(e=>{if(e.text)return e.text;if(typeof e.content=="string"){const n=document.createElement("div");return n.innerHTML=e.content,n.textContent||n.innerText||""}try{let n="";const r=i=>{for(const o of i)typeof o.text=="string"?n+=o.text:o.children&&r(o.children)};return r(Array.isArray(e.content)?e.content:[]),n.trim()}catch(n){return console.error("Error extracting text from rich content:",n),""}}).filter(Boolean)}),Zit={gameType:"whack-a-mole",title:"Whack-a-Mole Configuration",description:'Create a 3D word categorization game where students "whack" the correct moles that appear.',sections:[{title:"Game Settings",description:"Configure basic game parameters",fields:[{name:"title",label:"Title",type:"text",required:!0,placeholder:"Enter a title for this game",defaultValue:""},{name:"gameTime",label:"Game Time (seconds)",type:"number",required:!0,min:30,max:300,defaultValue:30,width:"200px",helpText:"How long each game session lasts"},{name:"gameSpeed",label:"Game Speed",type:"select",required:!0,options:[{value:1,label:"Slow (10-12 moles)"},{value:2,label:"Medium (14-16 moles)"},{value:3,label:"Fast (17-19 moles)"}],defaultValue:2,width:"300px",helpText:"Controls how frequently moles appear during the game"},{name:"instructions",label:"Game Instructions",type:"textarea",placeholder:"Enter custom instructions for players",helpText:"Custom instructions to show on the game start screen. If left empty, default instructions will be shown."}]},{title:"Scoring Settings",description:"Configure how points are awarded and deducted",fields:[{name:"pointsPerHit",label:"Points Per Hit",type:"number",required:!0,min:1,max:100,defaultValue:10,width:"150px",helpText:"Points awarded for hitting a correct mole"},{name:"penaltyPoints",label:"Penalty Points",type:"number",required:!0,min:0,max:50,defaultValue:5,width:"150px",helpText:"Points deducted for hitting an incorrect mole"},{name:"bonusPoints",label:"Bonus Points",type:"number",required:!0,min:0,max:100,defaultValue:10,width:"150px",helpText:"Extra points for hitting multiple correct moles in a row"},{name:"bonusThreshold",label:"Bonus Threshold",type:"number",required:!0,min:2,max:10,defaultValue:3,width:"150px",helpText:"How many consecutive hits needed to trigger bonus points"}]},{title:"Categories",description:'Create words that students should "whack" and words they should avoid',component:Qit},{title:"Sharing",description:"Make your game available to other teachers",fields:[{name:"share",label:"Share this game publicly",type:"switch",defaultValue:!1,helpText:"Public games can be used by other teachers as templates"}]}],customValidation:t=>{if(!t||!t.title||!t.title.trim())return"Please enter a title for your game";if(!t.categories||t.categories.length!==2)return'Both "Whack These" and "Do Not Whack These" categories are required';const e=t.categories[0],n=t.categories[1];if(!e.items||e.items.length===0)return'"Whack These" category must have at least one item';if(!n.items||n.items.length===0)return'"Do Not Whack These" category must have at least one item';for(const[r,i]of t.categories.entries()){const o=r===0?"Whack These":"Do Not Whack These";for(const s of i.items)if(!(s.text||typeof s.content=="string"&&s.content.trim()||Array.isArray(s.content)&&s.content.some(l=>typeof l.text=="string"&&l.text.trim())))return`All items in "${o}" category must have content`}},generateConfig:(t,e)=>{var v,m;t||(t={}),t.share===void 0&&(t.share=!1);const n=j({title:"Whack-a-Mole Game",gameTime:30,pointsPerHit:10,penaltyPoints:5,bonusPoints:10,bonusThreshold:3,gameSpeed:2,instructions:"",share:!1,categories:[]},t),r=n.share!==void 0?!!n.share:!1,i=Number(n.gameTime)||30,o=Number(n.pointsPerHit)||10,s=Number(n.penaltyPoints)||5,a=Number(n.bonusPoints)||10,l=Number(n.bonusThreshold)||3,c=Number(n.gameSpeed)||2,u=n.instructions||"",d=(v=n.categories)==null?void 0:v[0],f=(m=n.categories)==null?void 0:m[1],p=[];return d&&p.push(e7(d)),f&&p.push(e7(f)),{type:"whack-a-mole",title:n.title||"Whack-a-Mole Game",gameTime:i,pointsPerHit:o,penaltyPoints:s,bonusPoints:a,bonusThreshold:l,speed:c,instructions:u,categories:p,richCategories:[d,f].filter(Boolean).map(g=>({id:g.id||op(),title:g.title||"",items:(g.items||[]).map(x=>{let w=x.text||"";if(!w&&x.content){if(typeof x.content=="string"){const P=document.createElement("div");P.innerHTML=x.content,w=P.textContent||P.innerText||""}else if(Array.isArray(x.content)){const P=I=>{for(const M of I)typeof M.text=="string"?w+=M.text:M.children&&P(M.children)};P(x.content)}}const S={id:x.id||op(),text:w||""};return x.content!==void 0&&x.content!==null&&(S.content=x.content),S})})),share:r,description:'3D word categorization game with "Whack These" and "Do Not Whack These" categories',email:e==null?void 0:e.email,userId:e==null?void 0:e.uid,createdAt:bo(),updatedAt:bo()}}},hg=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,t7=()=>{const{templateId:t}=Pd(),e=Pr(),n=co(),{currentUser:r}=Dr(),[i,o]=T.useState({}),[s,a]=T.useState(!1),[l,c]=T.useState(!1),[u,d]=T.useState(!1);return T.useEffect(()=>{te(nt,null,function*(){if(!t)return;const b=new URLSearchParams(window.location.search).get("copy")==="true";d(b),c(!0);try{const v=["userGameConfigs","gameConfigs","blankGameTemplates","categoryTemplates"];let m=null,g="";for(const x of v){const w=an(bt,x,t);if(m=yield si(w),m.exists()){g=x;break}}if(m&&m.exists()){const x=m.data();b?(a(!1),n({title:"Creating a copy",description:"Creating a new copy of this game configuration.",status:"info",duration:5e3})):x.userId!==(r==null?void 0:r.uid)&&g==="userGameConfigs"?(a(!1),n({title:"Creating a copy",description:"You're not the owner of this configuration, so you'll create a copy instead.",status:"info",duration:5e3})):a(!0);const w=se(j({},x),{title:b?`Copy of ${x.title||"Untitled Game"}`:x.title});w.categories&&Array.isArray(w.categories)&&(w.categories=w.categories.map(S=>S.words&&Array.isArray(S.words)&&!S.items?(console.log("Converting legacy category format for:",S.title,"with words:",S.words),{id:S.id||`cat-${hg()}`,title:S.title||"",items:S.words.map((P,I)=>({id:`item-${hg()}`,content:P,text:P}))}):S.items&&Array.isArray(S.items)?(console.log("Ensuring proper structure for category:",S.title,"with items:",S.items),{id:S.id||`cat-${hg()}`,title:S.title||"",items:S.items.map((P,I)=>({id:P.id||`item-${hg()}`,content:P.content||P.text||P,text:P.text||P.content||P}))}):(console.log("Creating fallback category for:",S.title),{id:S.id||`cat-${hg()}`,title:S.title||"",items:[{id:`item-${hg()}`,content:"",text:""}]}))),o(w)}else n({title:"Configuration not found",description:"The requested configuration could not be found.",status:"error",duration:5e3}),e("/configure/whack-a-mole")}catch(v){console.error("Error loading configuration:",v),n({title:"Error",description:"Failed to load the configuration.",status:"error",duration:5e3}),e("/configure/whack-a-mole")}finally{c(!1)}})},[t,r,e,n]),t&&l?null:h.jsx(vm,{schema:Zit,initialData:i,isEditing:s,documentId:u?void 0:t})},Jit=({formData:t,updateField:e,errors:n,saveAttempted:r})=>{const i=co();t.categories||(e("categories",[]),t.categories=[]),T.useEffect(()=>{t&&!t.categories&&e("categories",[])},[t,e]);const o=(t==null?void 0:t.categories)||[],s=()=>{if(o.length>=Tx){i({title:"Maximum categories reached",description:`You can only add up to ${Tx} categories.`,status:"warning",duration:3e3,isClosable:!0});return}const v={id:Date.now().toString(),name:"",items:[""]};e("categories",[...o,v])},a=v=>{if(o.length<=Mx){i({title:"Minimum categories required",description:`You must have at least ${Mx} categories.`,status:"warning",duration:3e3,isClosable:!0});return}const m=o.filter((g,x)=>x!==v);e("categories",m)},l=(v,m,g)=>{const x=[...o];x[v]=se(j({},x[v]),{[m]:g}),e("categories",x)},c=v=>{if(o[v].items.length>=Dp){i({title:"Maximum items reached",description:`You can only add up to ${Dp} items per category.`,status:"warning",duration:3e3,isClosable:!0});return}const g=[...o];g[v]=se(j({},g[v]),{items:[...g[v].items,""]}),e("categories",g)},u=(v,m)=>{if(o[v].items.length<=Rp){i({title:"Minimum items required",description:`Each category must have at least ${Rp} items.`,status:"warning",duration:3e3,isClosable:!0});return}const x=[...o];x[v]=se(j({},x[v]),{items:x[v].items.filter((w,S)=>S!==m)}),e("categories",x)},d=(v,m,g)=>{const x=[...o];x[v].items[m]=g,e("categories",x)},f=(v,m)=>{const g=[...o],x=m==="up"?v-1:v+1;[g[v],g[x]]=[g[x],g[v]],e("categories",g)},p=(v,m,g)=>{const x=[...o],w=g==="up"?m-1:m+1,S=x[v].items;[S[m],S[w]]=[S[w],S[m]],e("categories",x)},b=()=>o.reduce((v,m)=>v+m.items.length,0);return h.jsxs(Kt,{spacing:6,align:"stretch",children:[h.jsxs(Mr,{children:[h.jsx(ar,{children:"Categories"}),h.jsx(ft,{fontSize:"sm",color:"gray.600",mb:4,children:"Create categories and add items that belong in each category"}),h.jsxs(Ln,{justify:"space-between",mb:4,children:[h.jsxs(Ln,{children:[h.jsxs(lo,{colorScheme:"blue",children:[o.length," categories"]}),h.jsxs(lo,{colorScheme:"green",children:[b()," total items"]})]}),h.jsx(pn,{leftIcon:h.jsx(Al,{}),size:"sm",colorScheme:"blue",onClick:s,isDisabled:o.length>=Tx,children:"Add Category"})]})]}),o.length===0?h.jsxs(bi,{status:"info",borderRadius:"md",children:[h.jsx(xi,{}),h.jsx(bl,{children:'No categories created yet. Click "Add Category" to get started.'})]}):h.jsx(_N,{allowMultiple:!0,children:o.map((v,m)=>h.jsxs(wN,{border:"1px",borderColor:"gray.200",borderRadius:"md",mb:2,children:[h.jsxs(yN,{children:[h.jsx(Et,{flex:"1",textAlign:"left",children:h.jsxs(Ln,{justify:"space-between",children:[h.jsxs(Kt,{align:"start",spacing:1,children:[h.jsxs(ft,{fontWeight:"medium",children:[v.name||`Category ${m+1}`,h.jsxs(lo,{ml:2,colorScheme:"blue",variant:"outline",children:[v.items.length," items"]})]}),h.jsxs(ft,{fontSize:"sm",color:"gray.600",children:[v.items.filter(g=>g.trim()).length," completed items"]})]}),h.jsx(Ln,{children:h.jsxs(wI,{size:"sm",isAttached:!0,children:[h.jsx(ll,{label:"Move Up",children:h.jsx(kr,{"aria-label":"Move category up",icon:h.jsx(kb,{}),onClick:g=>{g.stopPropagation(),f(m,"up")},isDisabled:m===0})}),h.jsx(ll,{label:"Move Down",children:h.jsx(kr,{"aria-label":"Move category down",icon:h.jsx(Gv,{}),onClick:g=>{g.stopPropagation(),f(m,"down")},isDisabled:m===o.length-1})}),h.jsx(ll,{label:"Delete Category",children:h.jsx(kr,{"aria-label":"Delete category",icon:h.jsx(Tl,{}),onClick:g=>{g.stopPropagation(),a(m)},colorScheme:"red",variant:"outline",isDisabled:o.length<=Mx})})]})})]})}),h.jsx(bN,{})]}),h.jsx(SN,{pb:4,children:h.jsxs(Kt,{spacing:4,align:"stretch",children:[h.jsxs(Mr,{children:[h.jsx(ar,{children:"Category Name"}),h.jsx(ti,{value:v.name,onChange:g=>l(m,"name",g.target.value),placeholder:"Enter category name"})]}),h.jsxs(Mr,{children:[h.jsxs(ar,{children:["Items (",v.items.length,")"]}),h.jsx(Kt,{spacing:2,align:"stretch",children:v.items.map((g,x)=>h.jsxs(Ln,{spacing:2,children:[h.jsx(ti,{value:g,onChange:w=>d(m,x,w.target.value),placeholder:`Item ${x+1}`,flex:1}),h.jsxs(wI,{size:"sm",isAttached:!0,children:[h.jsx(ll,{label:"Move Up",children:h.jsx(kr,{"aria-label":"Move item up",icon:h.jsx(kb,{}),onClick:()=>p(m,x,"up"),isDisabled:x===0})}),h.jsx(ll,{label:"Move Down",children:h.jsx(kr,{"aria-label":"Move item down",icon:h.jsx(Gv,{}),onClick:()=>p(m,x,"down"),isDisabled:x===v.items.length-1})}),h.jsx(ll,{label:"Delete Item",children:h.jsx(kr,{"aria-label":`Delete item #${x+1}`,icon:h.jsx(Tl,{}),onClick:()=>u(m,x),colorScheme:"red",variant:"outline",isDisabled:v.items.length<=Rp})})]})]},x))}),h.jsx(pn,{leftIcon:h.jsx(Al,{}),size:"sm",colorScheme:"blue",variant:"outline",onClick:()=>c(m),mt:2,isDisabled:v.items.length>=Dp,children:"Add Item"})]})]})})]},v.id))})]})},eot={gameType:"sort-categories-egg",title:"Sort Categories Egg Reveal",description:"Create a drag-and-drop categorization game where students sort items into categories and reveal eggs",sections:[{title:"Basic Settings",description:"Configure the basic game information",fields:[{name:"title",label:"Game Title",type:"text",required:!0,placeholder:"Enter game title",defaultValue:"Sort Categories Egg Reveal Game"},{name:"description",label:"Description",type:"textarea",placeholder:"Enter game description (optional)",helpText:"Brief description of what students will learn"},{name:"instructions",label:"Instructions",type:"textarea",placeholder:"Enter instructions for students (optional)",helpText:"Instructions that will be shown to students before they start"}]},{title:"Categories and Items",description:"Set up the categories and items for sorting",component:Jit},{title:"Game Settings",description:"Configure game-specific settings",fields:[{name:"containerType",label:"Container Type",type:"select",required:!0,defaultValue:"eggs",options:[{value:"eggs",label:"Eggs 🥚"},{value:"balloons",label:"Balloons 🎈"},{value:"presents",label:"Present Boxes 🎁"},{value:"amazon",label:"Amazon Boxes 📦"}],width:"200px",helpText:"Choose the container graphic theme for your items"},{name:"eggQty",label:"Number of Containers",type:"select",required:!0,defaultValue:12,options:[{value:4,label:"4 containers"},{value:6,label:"6 containers"},{value:8,label:"8 containers"},{value:10,label:"10 containers"},{value:12,label:"12 containers"},{value:14,label:"14 containers"},{value:16,label:"16 containers"},{value:18,label:"18 containers"},{value:20,label:"20 containers"}],width:"150px",helpText:"How many containers will be revealed when categories are completed"},{name:"textToSpeechMode",label:"Text-to-Speech Mode",type:"select",required:!0,defaultValue:"amazon-polly-phonics",options:[{value:"disabled",label:"Disabled - No sound"},{value:"amazon-polly-phonics",label:"Amazon Polly with Phonics (Recommended)"},{value:"amazon-polly-regular",label:"Amazon Polly with Regular Pronunciation"},{value:"web-speech-phonics",label:"Web Speech API with Phonics"},{value:"web-speech-regular",label:"Web Speech API with Regular Pronunciation"}],width:"400px",helpText:'Amazon Polly provides professional-quality speech with accurate phonemes. Phonics mode makes "ck" sound like /k/, "th" like /θ/, etc.'}]},{title:"Sharing Settings",description:"Control who can access this game",fields:[{name:"share",label:"Make Public",type:"switch",defaultValue:!1,helpText:"Allow other teachers to use this game"}]}],customValidation:t=>{if(!t.title||!t.title.trim())return"Please enter a title for your game";if(!t.categories||t.categories.length===0)return"Please add at least one category";const e=t.categories||[];if(e.length<Mx)return`You need at least ${Mx} categories`;if(e.length>Tx)return`You can have at most ${Tx} categories`;for(let n=0;n<e.length;n++){const r=e[n];if(!r.name||r.name.trim()==="")return`Category ${n+1} needs a name`;if(!r.items||r.items.length<Rp)return`Category "${r.name}" needs at least ${Rp} items`;if(r.items.length>Dp)return`Category "${r.name}" can have at most ${Dp} items`;if(r.items.filter(o=>!o||o.trim()==="").length>0)return`Category "${r.name}" has empty items that need to be filled`}},generateConfig:(t,e)=>{t||(t={});const n=j({title:"Sort Categories Egg Reveal Game",description:"",instructions:"",categories:[],eggQty:12,share:!1,textToSpeechMode:"amazon-polly-phonics",containerType:"eggs"},t),r=n.textToSpeechMode||"amazon-polly-phonics",i=r!=="disabled",o=r.includes("phonics"),s=r.includes("amazon-polly"),a=n.share!==void 0?!!n.share:!1,l=(n.categories||[]).map(u=>({name:u.name,items:u.items.filter(d=>d&&d.trim()!=="")}));return{title:n.title||"Sort Categories Egg Reveal Game",type:"sort-categories-egg",description:n.description||`Categorization game with ${l.length} categories`,instructions:n.instructions||"",categories:l,eggQty:Number(n.eggQty)||12,share:a,textToSpeechMode:r,containerType:n.containerType||"eggs",enableTextToSpeech:i,usePhonicsMode:o,useAmazonPolly:s,email:e==null?void 0:e.email,userId:e==null?void 0:e.uid,createdAt:bo(),updatedAt:bo()}}},n7=()=>{const{templateId:t}=Pd(),e=Pr(),n=co(),{currentUser:r}=Dr(),[i,o]=T.useState({}),[s,a]=T.useState(!1),[l,c]=T.useState(!1),[u,d]=T.useState(!1);return T.useEffect(()=>{te(nt,null,function*(){if(!t||t==="new"||t.trim()==="")return;const b=new URLSearchParams(window.location.search).get("copy")==="true";d(b),c(!0);try{let v=!1;const m=[{name:"userGameConfigs",ref:an(bt,"userGameConfigs",t)},{name:"gameConfigs",ref:an(bt,"gameConfigs",t)},{name:"blankGameTemplates",ref:an(bt,"blankGameTemplates",t)},{name:"categoryTemplates",ref:an(bt,"categoryTemplates",t)}];let g="",x=null;for(const w of m){const S=yield si(w.ref);if(S.exists()){x=S,g=w.name,v=w.name==="gameConfigs"||w.name==="blankGameTemplates"||w.name==="categoryTemplates";break}}if(x&&x.exists()){const w=x.data();b?(a(!1),n({title:"Creating a copy",description:"Creating a new copy of this sort categories configuration.",status:"info",duration:5e3})):v||w.userId!==(r==null?void 0:r.uid)?(a(!1),d(!0),n({title:"Creating a copy",description:v?"This is an official template. You'll create a copy that you can customize.":"You're not the owner of this configuration, so you'll create a copy instead.",status:"info",duration:5e3})):a(!0);const S=se(j({},w),{title:b||v||w.userId!==(r==null?void 0:r.uid)?`Copy of ${w.title||"Untitled Sort Categories Game"}`:w.title||"",share:b||v||w.userId!==(r==null?void 0:r.uid)?!1:w.share});o(S)}else n({title:"Configuration not found",description:"The requested configuration could not be found in any collection.",status:"error",duration:5e3}),e("/configure/sort-categories-egg")}catch(v){console.error("Error loading configuration:",v),n({title:"Error",description:"Failed to load the configuration.",status:"error",duration:5e3}),e("/configure/sort-categories-egg")}finally{c(!1)}})},[t,r,e,n]),t&&l?null:h.jsx(vm,{schema:eot,initialData:i,isEditing:s,documentId:u?void 0:t})},Jne=()=>{const t=Pr(),e=T.useCallback(n=>{var r;if(console.log("[PWA] Received message:",n.data),((r=n.data)==null?void 0:r.type)==="NAVIGATE_TO_ASSIGNMENT"){const{url:i,token:o,timestamp:s,from:a}=n.data;console.log("[PWA] ✅ Processing NAVIGATE_TO_ASSIGNMENT request",{url:i,token:o,timestamp:s,from:a,currentLocation:window.location.href}),console.log("[PWA] Attempting to focus window");try{window.focus(),console.log("[PWA] ✅ Window focus completed"),"serviceWorker"in navigator&&navigator.serviceWorker.ready&&navigator.serviceWorker.ready.then(c=>{c.active&&(c.active.postMessage({type:"FOCUS_WINDOW"}),console.log("[PWA] Sent FOCUS_WINDOW message to service worker"))})}catch(c){console.warn("[PWA] Could not focus PWA window:",c)}"serviceWorker"in navigator&&navigator.serviceWorker.controller&&(console.log("[PWA] Sending ACK back to launcher via service worker"),navigator.serviceWorker.controller.postMessage({type:"NAVIGATE_TO_ASSIGNMENT_ACK",success:!0,timestamp:Date.now(),originalTimestamp:s})),console.log("[PWA] Sending BroadcastChannel ACK");const l=new BroadcastChannel("luminatelearn-pwa-navigation");l.postMessage({type:"PWA_NAVIGATION_ACK",timestamp:Date.now(),originalTimestamp:s}),l.close(),console.log("[PWA] 🎯 Navigation will be handled by usePWAMessageAck hook for full page reload")}},[t]);return T.useEffect(()=>{const n=i=>{var o;if(console.log("[PWA] Received service worker message:",i.data),((o=i.data)==null?void 0:o.type)==="NAVIGATE_TO_ASSIGNMENT"){const{url:s,token:a,timestamp:l,from:c}=i.data;console.log("[PWA] ✅ Processing service worker navigation request",{url:s,token:a,timestamp:l,from:c}),e(i)}else console.log("[PWA] Ignoring non-navigation service worker message")},r=new BroadcastChannel("luminatelearn-pwa-navigation");return r.onmessage=e,"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",n),console.log("[PWA] 🎧 Listening for assignment navigation messages via service worker and BroadcastChannel"),()=>{r.close(),"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",n)}},[e]),null};function tot(){T.useEffect(()=>{var e;if(console.log("[PWA-ACK] 🚀 Initializing PWA message ACK handler"),!((e=navigator==null?void 0:navigator.serviceWorker)!=null&&e.controller)){console.log("[PWA-ACK] ❌ No service worker controller available");return}console.log("[PWA-ACK] ✅ Service worker controller available, setting up listener");const t=n=>{var r,i;if(console.log("[PWA-ACK] 📨 Received service worker message:",n.data),((r=n.data)==null?void 0:r.type)==="NAVIGATE_TO_ASSIGNMENT"){console.log("[PWA-ACK] 🎯 Processing NAVIGATE_TO_ASSIGNMENT message");const o=n.data.url;console.log("[PWA-ACK] Target URL:",o),console.log("[PWA-ACK] Current URL:",window.location.href),o?(console.log("[PWA-ACK] 🚀 Forcing navigation to target URL (fresh assignment load)"),window.location.href=o):console.log("[PWA-ACK] ❌ No target URL provided"),console.log("[PWA-ACK] 📤 Sending NAVIGATE_TO_ASSIGNMENT_ACK to service worker"),(i=navigator.serviceWorker.controller)==null||i.postMessage({type:"NAVIGATE_TO_ASSIGNMENT_ACK",success:!0,timestamp:Date.now()}),console.log("[PWA-ACK] ✅ NAVIGATE_TO_ASSIGNMENT_ACK sent successfully")}else console.log("[PWA-ACK] 🔇 Ignoring non-navigation message")};return console.log("[PWA-ACK] 🎧 Adding service worker message listener"),navigator.serviceWorker.addEventListener("message",t),()=>{console.log("[PWA-ACK] 🔇 Removing service worker message listener"),navigator.serviceWorker.removeEventListener("message",t)}},[])}const not=({playerName:t,onGameComplete:e,config:n,onHighScoreProcessStart:r,onHighScoreProcessComplete:i})=>h.jsx(Et,{width:"100%",height:"100%",children:h.jsx(Ate,{playerName:t,onGameComplete:e,config:n,onHighScoreProcessStart:r,onHighScoreProcessComplete:i})}),rot=()=>{Jne(),tot();const[t]=dh(),e=t.get("token")||"",n=Pr();gs();const{currentUser:r}=Dr();r2();const[i,o]=T.useState(!1),[s,a]=T.useState(!0),[l,c]=T.useState(null),[u,d]=T.useState(null),[f,p]=T.useState(null),[b,v]=T.useState(!1),[m,g]=T.useState(null),[x,w]=T.useState(!1),[S,P]=T.useState(""),[I,M]=T.useState(!0),[D,E]=T.useState(null),[_,A]=T.useState(""),[R,F]=T.useState(!1),[L,N]=T.useState(!1),[U,$]=T.useState(!1),[B,H]=T.useState(null),[q,z]=T.useState(!1),[G,K]=T.useState(!1),[Z,ee]=T.useState(!1),[V,J]=T.useState(!1);t5({enabled:!0,studentEmail:(f==null?void 0:f.studentEmail)||(B==null?void 0:B.email)||"",source:"game_window",onDuplicateDetected:ge=>{console.log("[GameByToken] 🎯 PWA duplicate action:",ge)}}),T.useEffect(()=>{const ge=UQ(Xr,X=>{const W=i||sessionStorage.getItem("direct_token_access")==="true"||t.get("directAccess")==="true";if(W)if($(!0),console.log("Authentication state overridden for direct access:",{authenticated:!0}),!X&&f){const ve={email:f.studentEmail||"student@example.com",displayName:f.studentName||"Student"};H(ve),console.log("Created synthetic user for direct access:",ve)}else H(X);else $(!!X),H(X),console.log("Authentication state changed:",{authenticated:!!X,email:X==null?void 0:X.email});(X||W)&&z(!1)});return()=>ge()},[i,f,t]),T.useEffect(()=>{const ge=t.get("mode"),X=t.get("source");if(ge&&X==="email"&&e){console.log("🔄 Detected legacy email format, redirecting to new EmailLinkRouter system");const ht=`/email-link?type=${ge}&target=assignment&token=${e}&source=email`;console.log("🔄 Redirecting to:",ht),n(ht,{replace:!0});return}const W=window.location.href,ve=document.referrer,ue=ve.includes("oobCode="),Me=W.includes("oobCode=")||t.get("oobCode"),Ae=ve.includes("assignmentId=")||t.get("assignmentId"),Ne=W.includes("mode=signIn")||t.get("mode")==="signIn",Re=t.get("directAccess"),Ie=Re==="true"||sessionStorage.getItem("direct_token_access")==="true",it=t.get("requireAuth"),Ee=it==="true",Le=t.get("from")==="launcher",Ge=t.get("emailAccess")==="true",Ke=t.get("pwa")==="true",je=t.get("pwa_type");t.get("forceBrowser"),console.log("GameByToken: Enhanced access mode detection:",{hasOobCodeInReferrer:ue,hasOobCodeInUrl:Me,hasAssignmentId:Ae,hasModeSignIn:Ne,directAccessParam:Re,hasDirectAccess:Ie,requireAuthParam:it,hasRequireAuth:Ee,fromLauncher:Le,emailAccess:Ge,pwaParam:Ke,pwaType:je,referrer:ve,tokenValue:e}),(ue||Me||Ae||Ne||Ie||Ee||Le&&Ge||Ke&&e||je==="game"&&e)&&(console.log("GameByToken: ✅ Enhanced special access mode detected - enabling email link access"),o(!0),sessionStorage.setItem("direct_token_access","true"));const et=t.get("from")==="email";window.name="assignment-window",localStorage.setItem("pwa_origin",et?"email_link":"javascript");const lt=ht=>{var ke,gt;((ke=ht.data)==null?void 0:ke.type)==="FORCE_CLOSE_LAUNCHER"&&(localStorage.getItem("pwa_origin")==="device_icon"?alert("Please close this tab manually. A newer game window has been launched."):window.close()),(gt=ht.data)==null||gt.type};return navigator.serviceWorker.addEventListener("message",lt),()=>{navigator.serviceWorker.removeEventListener("message",lt)}},[t,e]),T.useEffect(()=>{if(!("serviceWorker"in navigator))return;const ge=X=>{X.data&&X.data.type};return navigator.serviceWorker.addEventListener("message",ge),()=>{navigator.serviceWorker.removeEventListener("message",ge)}},[e]),T.useEffect(()=>{if(!e){c("Invalid game link. Please check the URL and try again."),a(!1);return}if(g3(Xr,window.location.href)){let ge=window.localStorage.getItem("emailForSignIn");ge||(ge=window.prompt("Please provide your email for confirmation")),ge&&(F(!0),v3(Xr,ge,window.location.href).then(X=>{window.localStorage.removeItem("emailForSignIn"),$(!0),H(X.user),oe(e),F(!1)}).catch(X=>{console.error("Error signing in with email link:",X),c("Failed to authenticate. Please try accessing the game from your email again."),F(!1)}))}else oe(e)},[e]),T.useEffect(()=>{if(!s&&u&&f&&!U&&!B){if(i)return;f.studentEmail&&A(f.studentEmail),!R&&!q&&z(!0)}},[s,u,f,U,B,R,q,i]);const oe=ge=>te(nt,null,function*(){if(!ge){c("Invalid game token"),a(!1);return}(t.get("directAccess")==="true"||sessionStorage.getItem("direct_token_access")==="true")&&o(!0),a(!0),c(null);try{const W=yield g5e(ge);if(!W)throw new Error("Assignment not found");console.log(`GameByToken: Loading game config for gameId: ${W.gameId}`);const ve=an(bt,"userGameConfigs",W.gameId),ue=yield si(ve);if(!ue.exists())throw new Error("Game configuration not found");const Me=j({id:ue.id},ue.data());if(d(Me),p(W),W.studentEmail&&(A(W.studentEmail),console.log("Pre-filled auth email:",W.studentEmail)),W.studentEmail)try{console.log("Fetching student name from users collection for email:",W.studentEmail);const Ae=mr(Tn(bt,"users"),Bn("email","==",W.studentEmail.toLowerCase()),$f(1)),Ne=yield Xn(Ae);if(Ne.empty){const Re=W.studentEmail.split("@")[0];P(Re),console.log("No user found in users collection, using email prefix:",Re)}else{const Re=Ne.docs[0].data();if(Re.name)P(Re.name),console.log("Found student name in users collection:",Re.name);else{const Ie=W.studentEmail.split("@")[0];P(Ie),console.log("No name field in user document, using email prefix:",Ie)}}}catch(Ae){console.error("Error fetching student name from users collection:",Ae);const Ne=W.studentEmail.split("@")[0];P(Ne),console.log("Error fetching student name, using email prefix:",Ne)}}catch(W){console.error("Error loading game by token:",W),W instanceof Error&&W.message.includes("permissions")?c("Access denied. This link is specific to the email recipient and cannot be shared. Please check that you are using the correct link from your email or authenticate below."):W instanceof Error&&W.message.includes("not found")?c("Assignment not found. The link may be expired or invalid."):c("Failed to load the game. Please try again or contact your teacher.")}finally{a(!1)}}),ne=()=>te(nt,null,function*(){if(!_||!_.includes("@")){alert("Please enter a valid email address");return}if(!(f&&f.studentEmail&&_.toLowerCase()!==f.studentEmail.toLowerCase()&&!window.confirm(`The email you entered (${_}) doesn't match the assignment's recipient email (${f.studentEmail}). Are you sure you want to continue with this email?`)))try{F(!0),window.localStorage.setItem("emailForSignIn",_);const ge=window.location.href;yield SFe(Xr,_,{url:ge,handleCodeInApp:!0}),N(!0)}catch(ge){console.error("Error sending sign-in link:",ge);let X="Failed to send authentication email. Please try again.";if(ge instanceof Error){const W=ge.message.includes("auth/")?ge.message.split("auth/")[1].split(")")[0]:"unknown";switch(console.error("Firebase auth error code:",W),W){case"operation-not-allowed":X="Email authentication is not enabled on this application. Please contact the administrator.";break;case"invalid-email":X="The email address provided is invalid. Please check and try again.";break;case"user-disabled":X="This user account has been disabled. Please contact support.";break;case"missing-android-pkg-name":case"missing-ios-bundle-id":case"invalid-continue-uri":case"unauthorized-continue-uri":X="There is a configuration issue with the authentication system. Please contact support.";break}}E(X)}finally{F(!1)}}),pe=ge=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(ge),ye=()=>{v(!0),g(new Date),i&&f&&f.studentEmail&&(console.log("Using email from assignment for email link access:",f.studentEmail),!S&&f.studentName?(P(f.studentName),M(!0)):S||(P(f.studentEmail.split("@")[0]),M(!0)))};T.useEffect(()=>{te(nt,null,function*(){const X={isEmailLinkAccess:i,loading:s,isPlaying:b,hasAssignment:!!f,hasGameConfig:!!u,hasStudentEmail:f==null?void 0:f.studentEmail,hasAutoStarted:Z,currentStudentName:S,isAuthenticated:U,hasCurrentUser:!!B,gameType:u==null?void 0:u.type};if(console.log("GameByToken: Enhanced auto-start effect triggered with:",X),i&&!s&&!b&&f&&u&&f.studentEmail&&!Z){console.log("GameByToken: ✅ All auto-start conditions met! Initiating auto-start sequence..."),console.log("GameByToken: Starting auto-start for game type:",u.type);let ve=S;if(!ve){try{const ue=mr(Tn(bt,"users"),Bn("email","==",f.studentEmail.toLowerCase()),$f(1)),Me=yield Xn(ue);if(!Me.empty){const Ae=Me.docs[0].data();Ae.name&&(ve=Ae.name,P(Ae.name))}}catch(ue){console.error("Error fetching student name for auto-start:",ue)}!ve&&f.studentName?(ve=f.studentName,P(f.studentName)):ve||(ve=f.studentEmail.split("@")[0],P(f.studentEmail.split("@")[0]))}if(M(!0),U||$(!0),!B){const ue={email:f.studentEmail,displayName:f.studentName||f.studentEmail.split("@")[0]};H(ue)}setTimeout(()=>{v(!0),g(new Date),ee(!0)},200)}})},[i,s,b,f,u,S,Z,U,B]),T.useEffect(()=>{te(nt,null,function*(){if(i&&f&&!s&&!Z){try{const X=mr(Tn(bt,"users"),Bn("email","==",f.studentEmail.toLowerCase()),$f(1)),W=yield Xn(X);if(W.empty)f.studentName?P(f.studentName):f.studentEmail&&P(f.studentEmail.split("@")[0]);else{const ve=W.docs[0].data();ve.name?P(ve.name):f.studentName?P(f.studentName):f.studentEmail&&P(f.studentEmail.split("@")[0])}}catch(X){console.error("Error fetching student name for immediate setup:",X),f.studentName?P(f.studentName):f.studentEmail&&P(f.studentEmail.split("@")[0])}if(M(!0),$(!0),!B){const X={email:f.studentEmail,displayName:f.studentName||f.studentEmail.split("@")[0]};H(X)}}})},[i,f,s,Z,B]),T.useEffect(()=>{const ge=new URLSearchParams(window.location.search),X=ge.get("directAccess")==="true",W=ge.get("token");(X||W)&&(o(!0),$(!0),sessionStorage.setItem("direct_token_access","true"))},[]);const Ce=ge=>te(nt,null,function*(){if(E(null),!f||!m||!u){console.error("Cannot save attempt - missing required data",{hasAssignment:!!f,hasStartTime:!!m,hasGameConfig:!!u}),alert("Missing required data to save your progress. Please try again.");return}if(!U||!B){sessionStorage.setItem("pending_game_score",ge.toString()),sessionStorage.setItem("pending_start_time",m.toISOString()),f.studentEmail&&A(f.studentEmail),v(!1),z(!0);return}w(!0);try{const W=Math.floor((new Date().getTime()-m.getTime())/1e3);console.log("GameByToken: Attempting to save progress with data:",{assignmentId:f.id,studentEmail:f.studentEmail,studentName:S||"Unknown Student",duration:W,score:ge,scoreType:typeof ge,gameType:u.type,userAuthenticated:U,userEmail:B==null?void 0:B.email});const ve=typeof ge=="number"&&!isNaN(ge)?ge:0,ue=yield UP(f.id||"",{duration:W,score:ve,results:{score:ve},studentEmail:f.studentEmail,studentName:S||"Unknown Student"});console.log(`GameByToken: Successfully saved attempt with ID: ${ue}`),f.status==="assigned"&&(yield Xm(f.id||"",{status:"started"}));const Me=(f.completedCount||0)+1,Ae=Me>=f.timesRequired;yield Xm(f.id||"",{completedCount:Me,lastCompletedAt:wr.now(),status:Ae?"completed":f.status}),console.log(`GameByToken: Updated assignment - attempts: ${Me}/${f.timesRequired}, completed: ${Ae}`),sessionStorage.removeItem("pending_game_score"),sessionStorage.removeItem("pending_start_time")}catch(X){console.error("Error submitting attempt:",X);let W="Failed to save your progress. Please try again.";X instanceof Error&&(console.error("Error details:",X.message),X.message.includes("undefined")?W="There was an issue with your score data. Please try again.":X.message.includes("permission")?(W='You have been authenticated, but there was a permission issue when updating your progress. Please use the "Continue without authentication" button below to save your progress anyway.',A(f.studentEmail||""),sessionStorage.setItem("pending_game_score",ge.toString()),sessionStorage.setItem("pending_start_time",m.toISOString()),z(!0)):X.message.includes("network")&&(W="Network error while saving progress. Please check your connection and try again.")),E(W)}finally{w(!1)}});T.useEffect(()=>{if(U&&B&&!x){const ge=sessionStorage.getItem("pending_game_score"),X=sessionStorage.getItem("pending_start_time");if(ge&&X){console.log("Found pending game data. Resuming after authentication"),g(new Date(X));const W=parseInt(ge);isNaN(W)||setTimeout(()=>{Ce(W)},500)}}},[U,B]);const _e=()=>{console.log("GameByToken: High score process started"),J(!0)},ce=()=>{console.log("GameByToken: High score process completed"),J(!1),console.log("GameByToken: Waiting before cleaning up game state..."),setTimeout(()=>{console.log("GameByToken: Cleaning up game state and reloading assignment"),v(!1),g(null),e&&(K(!1),ee(!1),oe(e))},1e3)},Be=()=>{if(!f)return!1;const ge=new Date;return f.deadline.toDate()<ge},de=()=>f?f.completedCount>=f.timesRequired:!1,me=()=>{if(s)return h.jsx("div",{className:"text-center py-10",children:"Loading game..."});if(l)return h.jsxs("div",{className:"max-w-lg mx-auto my-8 p-6 bg-red-50 border border-red-300 rounded-lg",children:[h.jsx("h2",{className:"text-xl font-bold text-red-700 mb-2",children:"Error"}),h.jsx("p",{className:"text-red-700",children:l}),h.jsx("button",{onClick:()=>n("/"),className:"mt-4 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded",children:"Return Home"})]});if(u&&!b){const ge=i||sessionStorage.getItem("direct_token_access")==="true";return!U&&!B&&!ge?ie():Be()?h.jsxs("div",{className:"max-w-lg mx-auto my-8 p-6 bg-yellow-50 border border-yellow-300 rounded-lg",children:[h.jsx("h2",{className:"text-xl font-bold text-yellow-700 mb-2",children:"Assignment Past Due"}),h.jsxs("p",{className:"text-yellow-700",children:["This assignment was due on ",f&&pe(f.deadline.toDate()),". You can still complete it, but it will be marked as late."]}),h.jsx("button",{onClick:ye,className:"mt-4 px-6 py-3 bg-green-500 hover:bg-green-600 text-white rounded-lg font-bold",children:"Start Game"})]}):de()?h.jsxs("div",{className:"max-w-lg mx-auto my-8 p-6 bg-green-50 border border-green-300 rounded-lg",children:[h.jsx("h2",{className:"text-xl font-bold text-green-700 mb-2",children:"Assignment Already Completed"}),h.jsxs("p",{className:"text-green-700 mb-4",children:["You have already completed this assignment with a score of ",f.score,"."]}),h.jsx("button",{onClick:ye,className:"mt-2 px-6 py-3 bg-green-500 hover:bg-green-600 text-white rounded-lg font-bold",children:"Play Again"})]}):h.jsxs("div",{className:"max-w-lg mx-auto my-8 p-6 bg-white border border-gray-200 shadow-md rounded-lg",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:u.title}),u.instructions&&h.jsxs("div",{className:"mb-6",children:[h.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Instructions:"}),h.jsx("div",{className:"prose prose-sm max-w-none",children:u.instructions})]}),f&&f.deadline&&h.jsxs("p",{className:"mb-4 text-sm text-gray-600",children:["Due date: ",new Date(f.deadline.seconds*1e3).toLocaleDateString()]}),h.jsx("button",{onClick:ye,className:"w-full px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-bold text-lg transition-colors",children:"Start Game"})]})}if(b&&f&&u)switch(console.log("GameByToken: Rendering game with type:",u.type),u.type){case"sentence-sense":return h.jsx(Dte,{config:u,onGameComplete:Ce,playerName:S,onHighScoreProcessStart:_e,onHighScoreProcessComplete:ce});case"whack-a-mole":return h.jsx(not,{config:u,onGameComplete:Ce,playerName:S,onHighScoreProcessStart:_e,onHighScoreProcessComplete:ce});case"spinner-wheel":return h.jsx(Mte,{config:u,onGameComplete:Ce});case"place-value-showdown":return h.jsx(Rte,{config:u,onGameComplete:Ce,playerName:S,onHighScoreProcessStart:_e,onHighScoreProcessComplete:ce});case"sort-categories-egg-reveal":return h.jsx(Lee,{config:u,onGameComplete:Ce,playerName:S,onHighScoreProcessStart:_e,onHighScoreProcessComplete:ce});case"anagram":return h.jsx(Pte,{config:u,onGameComplete:Ce,playerName:S,onHighScoreProcessStart:_e,onHighScoreProcessComplete:ce});case"word-volley":return h.jsx(Ite,{gameConfig:u,playerName:S,onGameComplete:Ce,onHighScoreProcessStart:_e,onHighScoreProcessComplete:ce});default:return console.error("GameByToken: Unsupported game type:",u.type),h.jsxs("div",{children:["Unsupported game type: ",u.type]})}return h.jsx("div",{className:"text-center py-10",children:"Something went wrong. Please try again."})},ie=()=>h.jsxs("div",{style:{backgroundColor:"white",borderRadius:"var(--border-radius-md)",padding:"var(--spacing-6)",maxWidth:"500px",width:"100%",margin:"0 auto",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[h.jsx("h2",{style:{fontSize:"var(--font-size-xl)",color:"var(--color-gray-800)",marginBottom:"var(--spacing-4)",textAlign:"center"},children:"Authenticate to Access Your Assignment"}),D&&h.jsxs("div",{style:{margin:"var(--spacing-2) 0",padding:"var(--spacing-2)",backgroundColor:"var(--color-error-50)",color:"var(--color-error-700)",borderRadius:"var(--border-radius-sm)",fontSize:"var(--font-size-sm)",marginBottom:"var(--spacing-4)"},children:["⚠️ ",D]}),L?h.jsxs(h.Fragment,{children:[h.jsxs("div",{style:{padding:"var(--spacing-4)",backgroundColor:"var(--color-success-50)",borderRadius:"var(--border-radius-md)",marginBottom:"var(--spacing-4)"},children:[h.jsx("p",{style:{color:"var(--color-success-700)",marginBottom:"var(--spacing-2)"},children:"✓ Authentication email sent!"}),h.jsxs("p",{style:{color:"var(--color-gray-700)"},children:["We've sent an email to ",h.jsx("strong",{children:_}),". Please check your inbox and click the link to continue to your assignment."]})]}),h.jsx("p",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-gray-500)"},children:"Don't see the email? Check your spam folder or try again."}),h.jsx("button",{onClick:()=>N(!1),style:{width:"100%",padding:"var(--spacing-3)",backgroundColor:"white",color:"var(--color-gray-700)",border:"1px solid var(--color-gray-300)",borderRadius:"var(--border-radius-sm)",fontSize:"var(--font-size-md)",marginTop:"var(--spacing-4)",cursor:"pointer"},children:"Try Again"})]}):h.jsxs(h.Fragment,{children:[h.jsx("p",{style:{marginBottom:"var(--spacing-4)",color:"var(--color-gray-600)"},children:"To confirm your identity and access your assignment, please enter your email address below. We'll send you a secure link to continue."}),h.jsxs("div",{style:{marginBottom:"var(--spacing-4)"},children:[h.jsx("label",{htmlFor:"authEmail",style:{display:"block",fontSize:"var(--font-size-sm)",color:"var(--color-gray-700)",marginBottom:"var(--spacing-1)"},children:"Your Email Address"}),h.jsx("input",{id:"authEmail",type:"email",value:_,onChange:ge=>A(ge.target.value),placeholder:"Enter your email",style:{width:"100%",padding:"var(--spacing-2)",border:"1px solid var(--color-gray-300)",borderRadius:"var(--border-radius-sm)",fontSize:"var(--font-size-md)"}}),h.jsx("p",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-gray-500)",marginTop:"var(--spacing-1)"},children:"Please use the same email address that your teacher sent the assignment to."})]}),h.jsx("button",{onClick:ne,disabled:R,style:{width:"100%",padding:"var(--spacing-3)",backgroundColor:"var(--color-primary-600)",color:"white",border:"none",borderRadius:"var(--border-radius-sm)",fontSize:"var(--font-size-md)",fontWeight:"bold",cursor:R?"not-allowed":"pointer",opacity:R?.7:1,marginBottom:"var(--spacing-3)"},children:R?"Sending...":"Send Authentication Link"}),h.jsxs("div",{style:{textAlign:"center",marginTop:"var(--spacing-3)"},children:[h.jsx("p",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-gray-500)",marginBottom:"var(--spacing-2)"},children:"If you're having trouble with authentication:"}),h.jsx("button",{onClick:()=>{const ge=sessionStorage.getItem("pending_game_score"),X=ge?parseInt(ge):0;z(!1);const W={email:_||(f==null?void 0:f.studentEmail)||"student@example.com",displayName:S||"Student"};console.log("Bypassing authentication with temporary user:",W),sessionStorage.setItem("auth_bypass_mode","true"),w(!0);const ve=sessionStorage.getItem("pending_start_time"),ue=ve?new Date(ve):new Date,Ae=Math.floor((new Date().getTime()-ue.getTime())/1e3);f?UP(f.id||"",{duration:Ae,score:X,results:{score:X},studentEmail:f.studentEmail||_,studentName:S||"Anonymous Student"}).then(Ne=>(console.log(`Successfully saved attempt with ID: ${Ne} (auth bypassed)`),f.status==="assigned"?Xm(f.id||"",{status:"started"}):Promise.resolve())).then(()=>{const Ne=(f.completedCount||0)+1,Re=Ne>=f.timesRequired;return Xm(f.id||"",{completedCount:Ne,lastCompletedAt:wr.now(),status:Re?"completed":f.status})}).then(()=>(sessionStorage.removeItem("pending_game_score"),sessionStorage.removeItem("pending_start_time"),e?oe(e):Promise.resolve())).catch(Ne=>{console.error("Error while bypassing authentication:",Ne),E("Failed to save your progress in bypass mode. Please try again.")}).finally(()=>{w(!1)}):(console.error("Cannot bypass authentication: No assignment data available"),E("Cannot proceed without assignment data. Please try refreshing the page."),w(!1))},style:{padding:"var(--spacing-2) var(--spacing-4)",backgroundColor:"var(--color-gray-100)",color:"var(--color-gray-700)",border:"1px solid var(--color-gray-300)",borderRadius:"var(--border-radius-sm)",fontSize:"var(--font-size-sm)",cursor:"pointer"},children:"Continue without authentication (temporary)"})]})]})]});if(R)return h.jsx("div",{style:{textAlign:"center",padding:"var(--spacing-8)"},children:h.jsx("p",{children:"Authenticating, please wait..."})});if(s)return h.jsx("div",{style:{textAlign:"center",padding:"var(--spacing-8)"},children:h.jsx("p",{children:"Loading game..."})});if(l)return h.jsxs("div",{style:{textAlign:"center",padding:"var(--spacing-8)",maxWidth:"600px",margin:"0 auto"},children:[h.jsx("p",{style:{color:"var(--color-error-600)",marginBottom:"var(--spacing-4)"},children:l}),l.includes("Access denied")?ie():h.jsx("button",{onClick:()=>n("/"),style:{marginTop:"var(--spacing-4)",padding:"var(--spacing-2) var(--spacing-4)",backgroundColor:"var(--color-primary-600)",color:"white",border:"none",borderRadius:"var(--border-radius-sm)",cursor:"pointer"},children:"Go Home"})]});if(de())return h.jsxs("div",{style:{textAlign:"center",padding:"var(--spacing-8)",color:"var(--color-success-600)"},children:[h.jsx("p",{children:"You have completed this assignment!"}),h.jsxs("p",{children:["Required attempts: ",f&&f.timesRequired]}),h.jsxs("p",{children:["Your attempts: ",f&&f.completedCount]}),h.jsx("button",{onClick:()=>n("/"),style:{marginTop:"var(--spacing-4)",padding:"var(--spacing-2) var(--spacing-4)",backgroundColor:"var(--color-primary-600)",color:"white",border:"none",borderRadius:"var(--border-radius-sm)",cursor:"pointer"},children:"Go Home"})]});const ae=()=>f?h.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(5px)",boxShadow:"0 -2px 10px rgba(0, 0, 0, 0.1)",padding:"12px 20px",zIndex:10,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"10px",fontFamily:"'Roboto', 'Helvetica', sans-serif"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[h.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"#4CAF50",color:"white",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"10px",fontSize:"14px"},children:"✓"}),h.jsx("div",{children:h.jsxs("div",{style:{fontWeight:"bold",fontSize:"14px"},children:["Authenticated as: ",f.studentEmail]})})]}),h.jsxs("div",{style:{display:"flex",gap:"20px",color:"#555",fontSize:"14px"},children:[h.jsxs("div",{children:[h.jsx("span",{style:{color:"#777"},children:"Due Date:"})," ",pe(f.deadline.toDate())]}),h.jsxs("div",{children:[h.jsx("span",{style:{color:"#777"},children:"Attempts:"})," ",f.completedCount||0,"/",f.timesRequired]})]})]}):null;return h.jsxs("div",{style:{padding:"var(--spacing-4)",maxWidth:"1200px",margin:"0 auto",paddingBottom:"60px"},children:[q&&h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"0 20px"},children:h.jsxs("div",{style:{backgroundColor:"white",borderRadius:"var(--border-radius-md)",padding:"var(--spacing-6)",maxWidth:"500px",width:"100%",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[h.jsx("h2",{style:{fontSize:"var(--font-size-xl)",color:"var(--color-gray-800)",marginBottom:"var(--spacing-4)",textAlign:"center"},children:"Authentication Required"}),D&&h.jsxs("div",{style:{margin:"var(--spacing-2) 0",padding:"var(--spacing-2)",backgroundColor:"var(--color-error-50)",color:"var(--color-error-700)",borderRadius:"var(--border-radius-sm)",fontSize:"var(--font-size-sm)",marginBottom:"var(--spacing-4)"},children:["⚠️ ",D]}),h.jsxs("p",{style:{color:"var(--color-gray-600)",marginBottom:"var(--spacing-4)",textAlign:"center"},children:["You need to authenticate to save your progress.",f!=null&&f.studentEmail?` Please authenticate as ${f.studentEmail}.`:""]}),L?h.jsxs(h.Fragment,{children:[h.jsxs("div",{style:{padding:"var(--spacing-4)",backgroundColor:"var(--color-success-50)",borderRadius:"var(--border-radius-md)",marginBottom:"var(--spacing-4)"},children:[h.jsx("p",{style:{color:"var(--color-success-700)",marginBottom:"var(--spacing-2)"},children:"✓ Authentication email sent!"}),h.jsxs("p",{style:{color:"var(--color-gray-700)"},children:["We've sent an email to ",h.jsx("strong",{children:_}),". Please check your inbox and click the link to continue to your assignment."]})]}),h.jsx("p",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-gray-500)"},children:"Don't see the email? Check your spam folder or try again."}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"var(--spacing-2)",marginTop:"var(--spacing-4)"},children:[h.jsx("button",{onClick:()=>{z(!1),N(!1)},style:{padding:"var(--spacing-2) var(--spacing-4)",backgroundColor:"white",border:"1px solid var(--color-gray-300)",borderRadius:"var(--border-radius-sm)",color:"var(--color-gray-700)",cursor:"pointer"},children:"Close"}),h.jsx("button",{onClick:()=>N(!1),style:{padding:"var(--spacing-2) var(--spacing-4)",backgroundColor:"var(--color-primary-600)",color:"white",border:"none",borderRadius:"var(--border-radius-sm)",fontWeight:"bold",cursor:"pointer"},children:"Try Again"})]})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{style:{marginBottom:"var(--spacing-4)"},children:[h.jsx("label",{htmlFor:"authEmailModal",style:{display:"block",fontSize:"var(--font-size-sm)",color:"var(--color-gray-700)",marginBottom:"var(--spacing-1)"},children:"Your Email Address"}),h.jsx("input",{id:"authEmailModal",type:"email",value:_,onChange:ge=>A(ge.target.value),placeholder:"Enter your email",style:{width:"100%",padding:"var(--spacing-2)",border:"1px solid var(--color-gray-300)",borderRadius:"var(--border-radius-sm)",fontSize:"var(--font-size-md)"}}),h.jsx("p",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-gray-500)",marginTop:"var(--spacing-1)"},children:"Please use the same email address that your teacher sent the assignment to."})]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"var(--spacing-2)",marginBottom:"var(--spacing-4)"},children:[h.jsx("button",{onClick:()=>z(!1),style:{padding:"var(--spacing-2) var(--spacing-4)",backgroundColor:"white",border:"1px solid var(--color-gray-300)",borderRadius:"var(--border-radius-sm)",color:"var(--color-gray-700)",cursor:"pointer"},children:"Cancel"}),h.jsx("button",{onClick:ne,disabled:R,style:{padding:"var(--spacing-2) var(--spacing-4)",backgroundColor:"var(--color-primary-600)",color:"white",border:"none",borderRadius:"var(--border-radius-sm)",fontWeight:"bold",cursor:R?"not-allowed":"pointer",opacity:R?.7:1},children:R?"Sending...":"Send Authentication Link"})]}),h.jsxs("div",{style:{borderTop:"1px solid var(--color-gray-200)",paddingTop:"var(--spacing-4)",marginTop:"var(--spacing-2)"},children:[h.jsxs("p",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-gray-600)",marginBottom:"var(--spacing-3)",textAlign:"center"},children:[h.jsx("strong",{children:"Temporary Solution:"})," If you're experiencing authentication issues, you can:"]}),h.jsx("button",{onClick:()=>{const ge=sessionStorage.getItem("pending_game_score"),X=ge?parseInt(ge):0;z(!1);const W={email:_||(f==null?void 0:f.studentEmail)||"student@example.com",displayName:S||"Student"};console.log("Bypassing authentication with temporary user:",W),sessionStorage.setItem("auth_bypass_mode","true"),w(!0);const ve=sessionStorage.getItem("pending_start_time"),ue=ve?new Date(ve):new Date,Ae=Math.floor((new Date().getTime()-ue.getTime())/1e3);f?UP(f.id||"",{duration:Ae,score:X,results:{score:X},studentEmail:f.studentEmail||_,studentName:S||"Anonymous Student"}).then(Ne=>(console.log(`Successfully saved attempt with ID: ${Ne} (auth bypassed)`),f.status==="assigned"?Xm(f.id||"",{status:"started"}):Promise.resolve())).then(()=>{const Ne=(f.completedCount||0)+1,Re=Ne>=f.timesRequired;return Xm(f.id||"",{completedCount:Ne,lastCompletedAt:wr.now(),status:Re?"completed":f.status})}).then(()=>(sessionStorage.removeItem("pending_game_score"),sessionStorage.removeItem("pending_start_time"),e?oe(e):Promise.resolve())).catch(Ne=>{console.error("Error while bypassing authentication:",Ne),E("Failed to save your progress in bypass mode. Please try again.")}).finally(()=>{w(!1)}):(console.error("Cannot bypass authentication: No assignment data available"),E("Cannot proceed without assignment data. Please try refreshing the page."),w(!1))},style:{width:"100%",padding:"var(--spacing-2)",backgroundColor:"var(--color-gray-100)",color:"var(--color-gray-700)",border:"1px solid var(--color-gray-300)",borderRadius:"var(--border-radius-sm)",fontSize:"var(--font-size-sm)",cursor:"pointer"},children:"Continue without authentication (Save progress anyway)"})]})]})]})}),f&&u?h.jsxs("div",{children:[h.jsx("h1",{style:{fontSize:"var(--font-size-2xl)",color:"var(--color-gray-800)",marginBottom:"var(--spacing-4)"},children:u.name}),D&&h.jsxs("div",{style:{margin:"var(--spacing-2) 0",padding:"var(--spacing-2)",backgroundColor:"var(--color-error-50)",color:"var(--color-error-700)",borderRadius:"var(--border-radius-sm)",fontSize:"var(--font-size-sm)"},children:["⚠️ ",D]}),b?h.jsx("div",{style:{backgroundColor:"white",borderRadius:"var(--border-radius-md)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",overflow:"hidden"},children:me()}):h.jsxs("div",{children:[h.jsxs("p",{style:{marginBottom:"var(--spacing-4)",color:"var(--color-gray-600)"},children:["Ready to start your assignment: ",h.jsx("strong",{children:u.name})]}),h.jsx("button",{onClick:ye,className:"mt-4 px-6 py-3 bg-green-500 hover:bg-green-600 text-white rounded-lg font-bold",children:"Start Game"})]})]}):h.jsx(h.Fragment,{children:U&&B?h.jsxs("div",{style:{backgroundColor:"var(--color-success-50)",color:"var(--color-success-700)",padding:"var(--spacing-4)",borderRadius:"var(--border-radius-md)",marginBottom:"var(--spacing-4)",textAlign:"center"},children:[h.jsxs("p",{children:["You are authenticated as: ",h.jsx("strong",{children:B.email})]}),h.jsx("p",{children:"Loading your assignment..."})]}):ie()}),f&&ae()]})},iot=()=>{const[t,e]=T.useState([]),[n,r]=T.useState(!0),[i,o]=T.useState(null),[s,a]=T.useState(null),[l,c]=T.useState(!1),[u,d]=T.useState(!1),[f,p]=T.useState(!1),[b,v]=T.useState(""),[m,g]=T.useState("user"),x=co();T.useEffect(()=>{w()},[]);const w=()=>te(nt,null,function*(){r(!0),o(null);try{const N=Tn(bt,"users"),$=(yield Xn(N)).docs.map(B=>{const H=B.data();let q="Pending";return(H.authUid||H.linkedToAuth||H.lastLogin)&&(q="Active"),se(j({id:B.id},H),{role:H.role||"user",status:q})});e($)}catch(N){console.error("Error fetching users:",N),o("Failed to load users. Please try again.")}finally{r(!1)}}),S=N=>{a(N),g(N.role||"user"),c(!0)},P=N=>{a(N),p(!0)},I=()=>te(nt,null,function*(){if(s){r(!0);try{const N=an(bt,"users",s.id);yield Os(N,{role:m,updatedAt:new Date().toISOString()}),e(t.map(U=>U.id===s.id?se(j({},U),{role:m}):U)),x({title:"User updated",description:`${s.email}'s role has been changed to ${m}`,status:"success",duration:5e3,isClosable:!0})}catch(N){console.error("Error updating user:",N),x({title:"Error",description:"Failed to update user. Please try again.",status:"error",duration:5e3,isClosable:!0})}finally{r(!1),c(!1)}}}),M=()=>te(nt,null,function*(){if(s){r(!0);try{const N=an(bt,"users",s.id);yield tu(N),e(t.filter(U=>U.id!==s.id)),x({title:"User deleted",description:`${s.email} has been removed`,status:"success",duration:5e3,isClosable:!0})}catch(N){console.error("Error deleting user:",N),x({title:"Error",description:"Failed to delete user. Please try again.",status:"error",duration:5e3,isClosable:!0})}finally{r(!1),p(!1)}}}),D=()=>te(nt,null,function*(){if(!b||!m){x({title:"Missing information",description:"Please provide email and role",status:"warning",duration:5e3,isClosable:!0});return}r(!0);try{const N=Tn(bt,"users"),U=mr(N,Bn("email","==",b));if(!(yield Xn(U)).empty){x({title:"User already exists",description:"A user with this email already exists",status:"error",duration:5e3,isClosable:!0}),r(!1);return}const B=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),H={email:b,role:m,userId:B,displayName:b.split("@")[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),lastLogin:null,emailVerified:!1,disabled:!1,status:"Pending"};yield eu(an(bt,"users",B),H),e([...t,j({id:B},H)]),x({title:"User added",description:`${b} has been added with role: ${m}. They will need to sign in to activate their account.`,status:"success",duration:5e3,isClosable:!0}),v(""),g("user")}catch(N){console.error("Error adding user:",N),x({title:"Error",description:"Failed to add user. Please try again.",status:"error",duration:5e3,isClosable:!0})}finally{r(!1),d(!1)}}),E=()=>{w(),x({title:"Refreshed",description:"User list has been refreshed",status:"info",duration:3e3,isClosable:!0})},_=N=>{const $={admin:{bg:"#FED7D7",color:"#C53030",text:"ADMIN"},teacher:{bg:"#C6F6D5",color:"#2F855A",text:"TEACHER"},student:{bg:"#BEE3F8",color:"#2C5282",text:"STUDENT"}}[N]||{bg:"#F7FAFC",color:"#4A5568",text:N.toUpperCase()};return h.jsx("span",{style:{backgroundColor:$.bg,color:$.color,padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold"},children:$.text})},A=N=>{const $={active:{bg:"#C6F6D5",color:"#2F855A"},pending:{bg:"#FEEBC8",color:"#C05621"},disabled:{bg:"#FED7D7",color:"#C53030"}}[N]||{bg:"#F7FAFC",color:"#4A5568"};return h.jsx("span",{style:{backgroundColor:$.bg,color:$.color,padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold"},children:N.toUpperCase()})},R=N=>{if(N==null||typeof N=="string"&&N.trim()==="")return"N/A";try{let U;if(N&&typeof N.toDate=="function")U=N.toDate();else if(typeof N=="string")U=new Date(N);else if(N instanceof Date)U=N;else if(typeof N=="number")U=new Date(N);else return console.log("Unhandled date value type:",typeof N,N),"Invalid Date";return isNaN(U.getTime())?"Invalid Date":U.toLocaleDateString()}catch(U){return console.error("Error formatting date:",U,N),"Invalid Date"}},F=()=>te(nt,null,function*(){try{r(!0);let N=0;for(const U of t){const $=R(U.createdAt);if(!U.createdAt||U.createdAt===null||U.createdAt===void 0||typeof U.createdAt=="string"&&U.createdAt.trim()===""||$==="Invalid Date"||$==="N/A"){const H=new Date().toISOString();yield Os(an(bt,"users",U.id),{createdAt:H,updatedAt:H}),N++}}yield w(),N>0?x({title:"Dates fixed",description:`Fixed creation dates for ${N} user(s)`,status:"success",duration:5e3,isClosable:!0}):x({title:"No fixes needed",description:"All users already have valid creation dates",status:"info",duration:3e3,isClosable:!0})}catch(N){console.error("Error fixing user dates:",N),x({title:"Error",description:"Failed to fix user dates",status:"error",duration:5e3,isClosable:!0})}finally{r(!1)}}),L=N=>te(nt,null,function*(){try{const U=new Date().toISOString();yield Os(an(bt,"users",N.id),{createdAt:U,updatedAt:U}),yield w(),x({title:"User date fixed",description:`Fixed creation date for ${N.email}`,status:"success",duration:5e3,isClosable:!0})}catch(U){console.error("Error fixing single user date:",U),x({title:"Error",description:"Failed to fix user date",status:"error",duration:5e3,isClosable:!0})}});return h.jsxs(Et,{children:[h.jsxs(Ln,{justifyContent:"space-between",mb:4,children:[h.jsx(zr,{size:"md",children:"User Management"}),h.jsxs(Ln,{children:[h.jsx(pn,{leftIcon:h.jsx(Al,{}),colorScheme:"green",size:"sm",onClick:()=>d(!0),children:"Add User"}),h.jsx(pn,{colorScheme:"blue",size:"sm",onClick:E,isDisabled:n,children:"Refresh"}),h.jsx(pn,{colorScheme:"orange",size:"sm",onClick:F,isDisabled:n,children:"Fix Dates"})]})]}),h.jsx(Et,{mb:4,p:4,borderWidth:"1px",borderRadius:"md",bg:"blue.50",children:h.jsxs(Ln,{children:[h.jsx(mUe,{color:"blue.500"}),h.jsx(ft,{fontSize:"sm",children:'Users added through this admin interface need to sign in to fully activate their accounts. Their account status will change from "Pending" to "Active" after they sign in for the first time.'})]})}),i&&h.jsxs(bi,{status:"error",mb:4,children:[h.jsx(xi,{}),h.jsx(tT,{children:i})]}),n?h.jsxs(Et,{textAlign:"center",py:10,children:[h.jsx(Fa,{size:"xl"}),h.jsx(ft,{mt:4,children:"Loading users..."})]}):h.jsxs(wX,{variant:"simple",children:[h.jsx(oPe,{children:h.jsxs(wP,{children:[h.jsx(iy,{children:"Email"}),h.jsx(iy,{children:"Role"}),h.jsx(iy,{children:"Status"}),h.jsx(iy,{children:"Created"}),h.jsx(iy,{children:"Actions"})]})}),h.jsx(sPe,{children:t.length===0?h.jsx(wP,{children:h.jsx(Km,{colSpan:5,textAlign:"center",children:"No users found"})}):t.map(N=>h.jsxs(wP,{children:[h.jsx(Km,{children:N.email}),h.jsx(Km,{children:_(N.role||"user")}),h.jsx(Km,{children:h.jsx(ll,{label:N.status==="Pending"?"User needs to sign in to activate their account":"User has signed in and account is active",children:A(N.status||"active")})}),h.jsx(Km,{children:R(N.createdAt)}),h.jsx(Km,{children:h.jsxs(Ln,{spacing:2,children:[h.jsx(kr,{"aria-label":"Edit user",icon:h.jsx(hUe,{}),size:"sm",colorScheme:"blue",onClick:()=>S(N)}),h.jsx(kr,{"aria-label":"Delete user",icon:h.jsx(Tl,{}),size:"sm",colorScheme:"red",onClick:()=>P(N)}),(R(N.createdAt)==="Invalid Date"||R(N.createdAt)==="N/A")&&h.jsx(kr,{"aria-label":"Fix date",icon:h.jsx(ft,{fontSize:"xs",children:"📅"}),size:"sm",colorScheme:"orange",onClick:()=>L(N),title:"Fix creation date"})]})})]},N.id))})]}),h.jsxs($c,{isOpen:l,onClose:()=>c(!1),children:[h.jsx(qc,{}),h.jsxs(Hc,{children:[h.jsx(Gc,{children:"Edit User"}),h.jsx(Yc,{}),h.jsxs(Kc,{children:[h.jsxs(Mr,{mb:4,children:[h.jsx(ar,{children:"Email"}),h.jsx(ti,{value:(s==null?void 0:s.email)||"",isReadOnly:!0})]}),h.jsxs(Mr,{children:[h.jsx(ar,{children:"Role"}),h.jsxs(Ov,{value:m,onChange:N=>g(N.target.value),children:[h.jsx("option",{value:"user",children:"User"}),h.jsx("option",{value:"teacher",children:"Teacher (can create assignments)"}),h.jsx("option",{value:"admin",children:"Admin (includes teacher privileges)"})]}),h.jsx(ft,{fontSize:"sm",color:"gray.600",mt:2,children:"Roles are hierarchical: admins have all teacher privileges, plus admin capabilities."})]})]}),h.jsxs(ov,{children:[h.jsx(pn,{variant:"ghost",mr:3,onClick:()=>c(!1),children:"Cancel"}),h.jsx(pn,{colorScheme:"blue",onClick:I,isLoading:n,children:"Save"})]})]})]}),h.jsxs($c,{isOpen:u,onClose:()=>d(!1),children:[h.jsx(qc,{}),h.jsxs(Hc,{children:[h.jsx(Gc,{children:"Add New User"}),h.jsx(Yc,{}),h.jsxs(Kc,{children:[h.jsxs(bi,{status:"info",mb:4,children:[h.jsx(xi,{}),h.jsxs(Et,{fontSize:"sm",children:[h.jsx(ft,{children:"Users added here must sign in to activate their account."}),h.jsx(ft,{mt:1,children:"If using Google Auth, they should use the same email address."})]})]}),h.jsxs(Mr,{mb:4,children:[h.jsx(ar,{children:"Email"}),h.jsx(ti,{value:b,onChange:N=>v(N.target.value),placeholder:"user@example.com"})]}),h.jsxs(Mr,{children:[h.jsx(ar,{children:"Role"}),h.jsxs(Ov,{value:m,onChange:N=>g(N.target.value),children:[h.jsx("option",{value:"user",children:"User"}),h.jsx("option",{value:"teacher",children:"Teacher (can create assignments)"}),h.jsx("option",{value:"admin",children:"Admin (includes teacher privileges)"})]}),h.jsx(ft,{fontSize:"sm",color:"gray.600",mt:2,children:"Roles are hierarchical: admins have all teacher privileges, plus admin capabilities."})]})]}),h.jsxs(ov,{children:[h.jsx(pn,{variant:"ghost",mr:3,onClick:()=>d(!1),children:"Cancel"}),h.jsx(pn,{colorScheme:"green",onClick:D,isLoading:n,children:"Add User"})]})]})]}),h.jsxs($c,{isOpen:f,onClose:()=>p(!1),children:[h.jsx(qc,{}),h.jsxs(Hc,{children:[h.jsx(Gc,{children:"Confirm Delete"}),h.jsx(Yc,{}),h.jsxs(Kc,{children:["Are you sure you want to delete user ",h.jsx("strong",{children:s==null?void 0:s.email}),"? This action cannot be undone."]}),h.jsxs(ov,{children:[h.jsx(pn,{variant:"ghost",mr:3,onClick:()=>p(!1),children:"Cancel"}),h.jsx(pn,{colorScheme:"red",onClick:M,isLoading:n,children:"Delete"})]})]})]})]})},oot=()=>{const{currentUser:t}=Dr(),e=Pr(),[n,r]=T.useState(!0),[i,o]=T.useState(!1),s=co();T.useEffect(()=>{if(!t){e("/login");return}te(nt,null,function*(){try{const c=an(bt,"users",t.uid),u=yield si(c);if(!(u.exists()&&u.data().role==="admin")){s({title:"Access Denied",description:"You do not have permission to access the admin page.",status:"error",duration:5e3}),e("/");return}r(!1)}catch(c){console.error("Error checking admin status:",c),s({title:"Error",description:"An error occurred while checking permissions.",status:"error",duration:5e3}),e("/")}})},[t,e,s]);const a=()=>te(nt,null,function*(){try{o(!0);const l=yield qBe();s({title:"Thumbnails Regenerated",description:`Successfully regenerated ${l.success} thumbnails. ${l.failed} failed.`,status:"success",duration:5e3})}catch(l){console.error("Error regenerating thumbnails:",l),s({title:"Error",description:"Failed to regenerate thumbnails.",status:"error",duration:5e3})}finally{o(!1)}});return n?h.jsx(cu,{minHeight:"80vh",children:h.jsxs(Kt,{spacing:4,children:[h.jsx(Fa,{size:"xl"}),h.jsx(ft,{children:"Loading admin dashboard..."})]})}):h.jsx(Et,{maxW:"1200px",mx:"auto",p:6,children:h.jsxs(Kt,{align:"stretch",spacing:6,children:[h.jsx(zr,{as:"h1",size:"xl",mb:2,children:"Admin Dashboard"}),h.jsx(ft,{color:"gray.600",children:"Manage users, system settings, and maintenance tasks."}),h.jsx(md,{my:2}),h.jsxs(ww,{variant:"enclosed",colorScheme:"blue",children:[h.jsxs(Sw,{children:[h.jsx(As,{children:"User Management"}),h.jsx(As,{children:"System Settings"}),h.jsx(As,{children:"Maintenance"})]}),h.jsxs(uT,{children:[h.jsxs(Uf,{children:[h.jsxs(Et,{mb:4,p:4,borderWidth:"1px",borderRadius:"md",bg:"blue.50",children:[h.jsx(zr,{size:"sm",mb:2,children:"Role Hierarchy"}),h.jsxs(ft,{children:[h.jsx("strong",{children:"Admin:"})," Has full system access including user management and all teacher privileges."]}),h.jsxs(ft,{children:[h.jsx("strong",{children:"Teacher:"})," Can create and manage assignments and educational content."]}),h.jsxs(ft,{children:[h.jsx("strong",{children:"User:"})," Basic access to use the platform and complete assignments."]})]}),h.jsx(iot,{})]}),h.jsx(Uf,{children:h.jsxs(Et,{p:4,borderWidth:"1px",borderRadius:"md",bg:"white",children:[h.jsx(zr,{size:"md",mb:4,children:"System Settings"}),h.jsx(ft,{mb:4,children:"System configuration and settings will be added here."})]})}),h.jsx(Uf,{children:h.jsxs(Et,{p:4,borderWidth:"1px",borderRadius:"md",bg:"white",children:[h.jsx(zr,{size:"md",mb:4,children:"Maintenance Tasks"}),h.jsx(ft,{mb:4,children:"Perform system maintenance and optimization tasks."}),h.jsx(Kt,{align:"start",spacing:4,children:h.jsx(pn,{colorScheme:"blue",onClick:a,isLoading:i,loadingText:"Regenerating...",children:"Regenerate All Thumbnails"})})]})})]})]})]})})},sot=()=>{const{currentUser:t,setCurrentUserAsAdmin:e}=Dr(),[n,r]=T.useState(!1),[i,o]=T.useState(""),[s,a]=T.useState(""),l=()=>te(nt,null,function*(){r(!0),o(""),a("");try{if(!t)throw new Error("You must be logged in to perform this action");yield e(),a(`User ${t.email} has been set as admin. Please refresh the page to see changes.`)}catch(c){o(`Failed to set admin role: ${c instanceof Error?c.message:"Unknown error"}`)}finally{r(!1)}});return h.jsx(Et,{maxW:"800px",mx:"auto",p:8,children:h.jsxs(Kt,{spacing:6,align:"stretch",children:[h.jsx(zr,{children:"Set Current User as Admin"}),t?h.jsxs(h.Fragment,{children:[h.jsxs(Et,{p:4,borderWidth:"1px",borderRadius:"md",children:[h.jsxs(ft,{children:["Current User: ",h.jsx(II,{children:t.email})]}),h.jsxs(ft,{children:["User ID: ",h.jsx(II,{children:t.uid})]})]}),h.jsx(ft,{children:"Clicking the button below will set your account as an administrator. This will give you access to administrative features."}),h.jsx(pn,{colorScheme:"blue",onClick:l,isLoading:n,loadingText:"Setting admin role...",children:"Set as Admin"}),i&&h.jsxs(bi,{status:"error",children:[h.jsx(xi,{}),i]}),s&&h.jsxs(bi,{status:"success",children:[h.jsx(xi,{}),s]})]}):h.jsxs(bi,{status:"warning",children:[h.jsx(xi,{}),"You must be logged in to use this page."]})]})})},of=()=>Date.now().toString()+Math.random().toString(36).substr(2,9),Uu={primaryColors:["#FF6B6B","#FFD93D","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8"],pastelColors:["#FFB3BA","#BAFFC9","#BAE1FF","#FFFFBA","#FFDFBA","#E0BBE4","#FFC9DD","#C9FFC9"],brightColors:["#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080"],earthTones:["#8B4513","#A0522D","#CD853F","#DEB887","#F4A460","#D2691E","#BC8F8F","#F5DEB3"],ocean:["#006994","#0081A7","#00AFB9","#FDFCDC","#FED9B7","#F07167","#E29578","#83C5BE"],sunset:["#F72585","#B5179E","#7209B7","#480CA8","#3A0CA3","#3F37C9","#4361EE","#4895EF"],forest:["#2D5016","#3F6C23","#4F7C2F","#5F8A3A","#6F9946","#7FA752","#8FB65E","#9FC46A"],patriotic:["#DC143C","#FFFFFF","#000080","#B22222","#F8F8FF","#4169E1","#FF4500","#1E90FF"]};let zi=[];const aot=({formData:t,updateField:e,errors:n,saveAttempted:r})=>{var d;if(!t.items||t.items.length===0){console.log("🚀 [WheelItemsManager] SYNC INIT - Creating default items");const f=[{id:of(),text:"Item 1",color:"#FF6B6B"},{id:of(),text:"Item 2",color:"#4ECDC4"},{id:of(),text:"Item 3",color:"#45B7D1"},{id:of(),text:"Item 4",color:"#96CEB4"}];t.items=f,zi=f,console.log("🚀 [WheelItemsManager] SYNC INIT - Set formData.items:",t.items)}else console.log("🚀 [WheelItemsManager] SYNC INIT - Items already exist:",t.items),console.log("🚀 [WheelItemsManager] SYNC INIT - First item structure:",t.items[0]),console.log("🚀 [WheelItemsManager] SYNC INIT - First item has content field:",!!((d=t.items[0])!=null&&d.content)),zi.length===0?(console.log("🚀 [WheelItemsManager] SYNC INIT - Initializing currentWheelItems from formData"),zi=t.items,console.log("🚀 [WheelItemsManager] SYNC INIT - currentWheelItems set to:",zi)):console.log(`🚀 [WheelItemsManager] SYNC INIT - Skipping currentWheelItems update (already has ${zi.length} items)`);T.useEffect(()=>{if(!t.items||t.items.length===0){console.log("🔄 [WheelItemsManager] USEEFFECT INIT - Creating default items");const f=[{id:of(),text:"Item 1",color:"#FF6B6B"},{id:of(),text:"Item 2",color:"#4ECDC4"},{id:of(),text:"Item 3",color:"#45B7D1"},{id:of(),text:"Item 4",color:"#96CEB4"}];e("items",f),t.items=f,zi=f,console.log("🔄 [WheelItemsManager] USEEFFECT INIT - Set formData.items:",t.items)}else console.log("🔄 [WheelItemsManager] USEEFFECT INIT - Items already exist:",t.items),zi.length===0?(console.log("🔄 [WheelItemsManager] USEEFFECT INIT - Initializing currentWheelItems from formData"),zi=t.items):console.log(`🔄 [WheelItemsManager] USEEFFECT INIT - Skipping currentWheelItems update (already has ${zi.length} items)`)},[t.items,e]);const i=(t==null?void 0:t.items)||[],o=()=>{const f={id:Date.now().toString()+Math.random().toString(36).substr(2,9),text:`Item ${i.length+1}`,color:"#FF6B6B"},p=[...i,f];e("items",p),zi=p,t.items=p},s=f=>{const p=i.filter(b=>b.id!==f);e("items",p),zi=p,t.items=p},a=(f,p)=>{console.log(`🔧 [updateItem] Updated item id=${f} with text="${p}"`),console.log("🔧 [updateItem] Text contains HTML tags:",p.includes("<")&&p.includes(">")),console.log("🔧 [updateItem] Raw text content:",p);let b="";p.includes("<")&&p.includes(">")?(b=p.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').trim(),console.log("🔧 [updateItem] Extracted plain text from HTML:",b)):(b=p.trim(),console.log("🔧 [updateItem] Using text as-is (no HTML):",b)),zi=zi.map(g=>g.id===f?se(j({},g),{text:b||p,content:p}):g),console.log("📋 [updateItem] Updated currentWheelItems:",zi);const m=t.items.map(g=>g.id===f?se(j({},g),{text:b||p,content:p}):g);t.items=m,console.log("🔄 [updateItem] Directly updated formData.items:",t.items),e("items",m),console.log("🔄 [updateItem] Verification - currentWheelItems matches formData.items:",JSON.stringify(zi)===JSON.stringify(t.items))},l=f=>{if(f>0){const p=[...i];[p[f-1],p[f]]=[p[f],p[f-1]],e("items",p),zi=p,t.items=p}},c=f=>{if(f<i.length-1){const p=[...i];[p[f],p[f+1]]=[p[f+1],p[f]],e("items",p),zi=p,t.items=p}},u=f=>{const p=(t==null?void 0:t.wheelTheme)||"primaryColors",b=(t==null?void 0:t.customColors)||Uu.primaryColors,v=p==="custom"?b:Uu[p];return v[f%v.length]};return h.jsxs(Kt,{spacing:6,align:"stretch",children:[h.jsxs(Mr,{children:[h.jsx(ar,{mb:3,children:"Wheel Items"}),h.jsx(ft,{fontSize:"sm",color:"gray.600",mb:4,children:"Add items that will appear on the spinner wheel"})]}),h.jsxs(Kt,{spacing:3,align:"stretch",children:[i.map((f,p)=>h.jsx(Et,{w:"full",children:h.jsxs(fc,{align:"center",direction:"row",children:[h.jsx(Et,{w:4,h:4,borderRadius:"full",bg:u(p),mr:3,flexShrink:0}),h.jsxs(ft,{mr:2,fontWeight:"bold",width:"25px",color:"gray.500",flexShrink:0,children:[p+1,"."]}),h.jsx(Et,{flex:"1",mr:2,children:h.jsx(Et,{border:"1px",borderColor:"gray.200",borderRadius:"md",children:h.jsx(v5,{value:f.content||f.text,onChange:b=>a(f.id,b),placeholder:`Item ${p+1}`,compact:!0,showToolbar:!0,className:"apple-input"})})}),h.jsxs(Ln,{spacing:1,children:[h.jsx(kr,{icon:h.jsx(kb,{boxSize:3}),"aria-label":"Move item up",size:"sm",variant:"ghost",isDisabled:p===0,onClick:()=>l(p)}),h.jsx(kr,{icon:h.jsx(Gv,{boxSize:3}),"aria-label":"Move item down",size:"sm",variant:"ghost",isDisabled:p===i.length-1,onClick:()=>c(p)}),h.jsx(kr,{"aria-label":"Remove item",icon:h.jsx(Tl,{}),onClick:()=>s(f.id),isDisabled:i.length<=2,colorScheme:"red",variant:"ghost",size:"sm"})]})]})},f.id)),h.jsx(pn,{leftIcon:h.jsx(Al,{}),onClick:o,variant:"outline",colorScheme:"blue",size:"sm",alignSelf:"flex-start",children:"Add Item"}),i.length<2&&h.jsxs(bi,{status:"info",size:"sm",children:[h.jsx(xi,{}),h.jsx(bl,{children:"Add at least 2 items to create a functional spinner wheel."})]}),h.jsxs(fc,{justify:"space-between",fontSize:"sm",color:"gray.500",children:[h.jsx(ft,{children:i.length===0?"No items added yet":i.length===1?"1 item added":`${i.length} items added`}),h.jsx(ft,{children:i.length>=20?"Maximum reached":`${20-i.length} remaining`})]})]}),(n==null?void 0:n.items)&&h.jsxs(bi,{status:"error",children:[h.jsx(xi,{}),h.jsx(bl,{children:n.items})]})]})},lot=({formData:t,updateField:e,errors:n,saveAttempted:r})=>{t.wheelTheme||(e("wheelTheme","primaryColors"),t.wheelTheme="primaryColors"),t.customColors||(e("customColors",Uu.primaryColors),t.customColors=Uu.primaryColors),T.useEffect(()=>{t.wheelTheme||e("wheelTheme","primaryColors"),t.customColors||e("customColors",Uu.primaryColors)},[t.wheelTheme,t.customColors,e]);const i=(t==null?void 0:t.wheelTheme)||"primaryColors",o=(t==null?void 0:t.customColors)||Uu.primaryColors,s=u=>{e("wheelTheme",u)},a=(u,d)=>{const f=[...o];f[u]=d,e("customColors",f)},l=()=>{o.length<8&&e("customColors",[...o,"#FF6B6B"])},c=u=>{o.length>2&&e("customColors",o.filter((d,f)=>f!==u))};return h.jsxs(Kt,{spacing:6,align:"stretch",children:[h.jsxs(Mr,{children:[h.jsx(ar,{mb:3,children:"Color Theme"}),h.jsxs(Ov,{value:i,onChange:u=>s(u.target.value),children:[h.jsx("option",{value:"primaryColors",children:"Primary Colors"}),h.jsx("option",{value:"pastelColors",children:"Pastel Colors"}),h.jsx("option",{value:"brightColors",children:"Bright Colors"}),h.jsx("option",{value:"earthTones",children:"Earth Tones"}),h.jsx("option",{value:"ocean",children:"Ocean"}),h.jsx("option",{value:"sunset",children:"Sunset"}),h.jsx("option",{value:"forest",children:"Forest"}),h.jsx("option",{value:"patriotic",children:"Patriotic"}),h.jsx("option",{value:"custom",children:"Custom Colors"})]})]}),i==="custom"&&h.jsxs(Kt,{spacing:4,align:"stretch",children:[h.jsx(ft,{fontSize:"sm",fontWeight:"medium",children:"Custom Colors"}),h.jsxs(Kt,{spacing:2,align:"stretch",children:[o.map((u,d)=>h.jsxs(Ln,{align:"center",children:[h.jsxs(ft,{minW:"20px",fontSize:"sm",children:[d+1,"."]}),h.jsx(ti,{type:"color",value:u,onChange:f=>a(d,f.target.value),width:"60px",height:"35px",padding:"2px",border:"1px solid",borderColor:"gray.300"}),h.jsx(ti,{value:u,onChange:f=>a(d,f.target.value),placeholder:"#FF6B6B",flex:"1"}),h.jsx(kr,{icon:h.jsx(Tl,{}),onClick:()=>c(d),isDisabled:o.length<=2,colorScheme:"red",variant:"ghost",size:"sm","aria-label":"Remove color"})]},d)),h.jsx(pn,{leftIcon:h.jsx(Al,{}),onClick:l,variant:"outline",colorScheme:"blue",size:"sm",alignSelf:"flex-start",isDisabled:o.length>=8,children:"Add Color"})]})]}),h.jsxs(Et,{children:[h.jsx(ft,{fontSize:"sm",fontWeight:"medium",mb:2,children:"Preview:"}),h.jsx(Ln,{spacing:2,flexWrap:"wrap",children:(i==="custom"?o:Uu[i]).map((u,d)=>h.jsx(Et,{w:6,h:6,bg:u,borderRadius:"md",border:"1px solid",borderColor:"gray.300"},d))})]})]})},cot=(t,e)=>{console.log("🔍 [generateConfig] ENTRY - Raw formData received:",t),console.log("🔍 [generateConfig] Raw formData.items:",t.items),console.log("🔍 [generateConfig] currentWheelItems:",zi),t||(t={});const n=j({title:"My Spinner Wheel",instructions:"Click the SPIN button to randomly select an item from the wheel!",wheelTheme:"primaryColors",customColors:Uu.primaryColors,removeOnSelect:!1,soundEnabled:!0,maxSpins:0,share:!1},t);t.items&&t.items.length>0&&(console.log("🔍 [generateConfig] Synchronizing currentWheelItems with formData.items"),zi=t.items);const r=zi.length>0?zi:t.items||[];console.log("🔍 [generateConfig] Using items from:",zi.length>0?"currentWheelItems (most current)":"formData.items (fallback)"),console.log("🔍 [generateConfig] Final itemsToUse:",r);const i=n.wheelTheme==="custom"?n.customColors:Uu[n.wheelTheme],o=r.map((a,l)=>{const c=a.content||a.text||"";let u="";c.includes("<")&&c.includes(">")?u=c.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').trim():u=c.trim();const d=u||`Item ${l+1}`;console.log(`🔍 [generateConfig] Processing item ${l}:`,{originalText:a.text,extractedPlainText:u,finalText:d,hasHtmlContent:c.includes("<")&&c.includes(">"),preservedHtmlContent:c.includes("<")?c:null});const f={id:a.id,text:d,color:i[l%i.length]};return c.includes("<")&&c.includes(">")&&(f.content=c),f}),s={title:n.title,type:"spinner-wheel",description:`Interactive spinner wheel with ${o.length} ${o.length===1?"item":"items"}`,items:o,removeOnSelect:!!n.removeOnSelect,wheelTheme:n.wheelTheme,customColors:n.customColors,soundEnabled:!!n.soundEnabled,maxSpins:Number(n.maxSpins)||0,instructions:n.instructions,share:!!n.share,email:e==null?void 0:e.email,userId:e==null?void 0:e.uid,createdAt:bo(),updatedAt:bo()};return console.log("🔍 [generateConfig] Final config items:",s.items),console.log("🔍 [generateConfig] Sample item for rich text check:",s.items[0]),s},uot={gameType:"spinner-wheel",title:"Spinner Wheel",description:"Create an interactive spinner wheel for random selection, vocabulary practice, or decision making.",sections:[{title:"Game Settings",description:"Configure basic game parameters",fields:[{name:"title",label:"Title",type:"text",required:!0,placeholder:"Enter wheel title",defaultValue:"My Spinner Wheel"},{name:"instructions",label:"Instructions",type:"textarea",placeholder:"Enter instructions for students",defaultValue:"Click the SPIN button to randomly select an item from the wheel!"}]},{title:"Wheel Items",description:"Add items that will appear on the spinner wheel",fields:[],component:aot},{title:"Appearance",description:"Customize the look of your spinner wheel",fields:[],component:lot},{title:"Advanced Settings",description:"Additional game configuration options",fields:[{name:"removeOnSelect",label:"Remove selected items",type:"switch",defaultValue:!1,helpText:"Remove items from the wheel after they are selected"},{name:"soundEnabled",label:"Enable sound effects",type:"switch",defaultValue:!0,helpText:"Play sound effects during wheel spinning"},{name:"maxSpins",label:"Maximum spins (0 = unlimited)",type:"number",min:0,max:100,defaultValue:0,helpText:"Limit the number of spins allowed"}]},{title:"Sharing",description:"Make your game available to other teachers",fields:[{name:"share",label:"Share this game publicly",type:"switch",defaultValue:!1,helpText:"Public games can be used by other teachers as templates"}]}],customValidation:t=>{if(!t.title||!t.title.trim())return"Please enter a title for your wheel";if(!t.items||t.items.length===0)return"Please add at least one item to the wheel";if(t.items.length<2)return"Please add at least 2 items to create a functional spinner wheel";for(let e=0;e<t.items.length;e++){const n=t.items[e];if(!n.text||!n.text.trim())return`Item ${e+1}: Please enter text for this item`}},generateConfig:(t,e)=>cot(t,e)},r7=()=>{const{templateId:t}=Pd(),e=Pr(),n=co(),{currentUser:r}=Dr(),[i,o]=T.useState({}),[s,a]=T.useState(!1),[l,c]=T.useState(!1),[u,d]=T.useState(!1);return T.useEffect(()=>{te(nt,null,function*(){if(!t||t==="new"||t.trim()==="")return;const b=new URLSearchParams(window.location.search).get("copy")==="true";d(b),c(!0);try{let v=!1;const m=[{name:"userGameConfigs",ref:an(bt,"userGameConfigs",t)},{name:"gameConfigs",ref:an(bt,"gameConfigs",t)},{name:"blankGameTemplates",ref:an(bt,"blankGameTemplates",t)},{name:"categoryTemplates",ref:an(bt,"categoryTemplates",t)}];let g="",x=null;for(const w of m){const S=yield si(w.ref);if(S.exists()){x=S,g=w.name,v=w.name==="gameConfigs"||w.name==="blankGameTemplates"||w.name==="categoryTemplates";break}}if(x&&x.exists()){const w=x.data();b?(a(!1),n({title:"Creating a copy",description:"Creating a new copy of this spinner wheel configuration.",status:"info",duration:5e3})):v||w.userId!==(r==null?void 0:r.uid)?(a(!1),d(!0),n({title:"Creating a copy",description:v?"This is an official template. You'll create a copy that you can customize.":"You're not the owner of this configuration, so you'll create a copy instead.",status:"info",duration:5e3})):a(!0);const S=se(j({},w),{title:b||v||w.userId!==(r==null?void 0:r.uid)?`Copy of ${w.title||"Untitled Spinner Wheel"}`:w.title||"",share:b||v||w.userId!==(r==null?void 0:r.uid)?!1:w.share});o(S)}else n({title:"Configuration not found",description:"The requested configuration could not be found in any collection.",status:"error",duration:5e3}),e("/configure/spinner-wheel")}catch(v){console.error("Error loading configuration:",v),n({title:"Error",description:"Failed to load the configuration.",status:"error",duration:5e3}),e("/configure/spinner-wheel")}finally{c(!1)}})},[t,r,e,n]),t&&l?null:h.jsx(vm,{schema:uot,initialData:i,isEditing:s,documentId:u?void 0:t})},dot=({formData:t,updateField:e,errors:n,saveAttempted:r})=>{var d;if(t.withDefinitions===void 0&&(e("withDefinitions",!1),t.withDefinitions=!1),!t.anagrams||t.anagrams.length===0){const f=[{id:"1",word:"LISTEN",definition:"To hear with attention"}];e("anagrams",f),t.anagrams=f}else if(t.anagrams.some(p=>p.original&&!p.word)){const p=t.anagrams.map(b=>({id:b.id||Date.now().toString(),word:b.original||b.word||"",definition:b.definition||""}));e("anagrams",p),t.anagrams=p}Lt.useEffect(()=>{if(t.withDefinitions===void 0&&e("withDefinitions",!1),!t.anagrams||t.anagrams.length===0)e("anagrams",[{id:"1",word:"LISTEN",definition:"To hear with attention"}]);else if(t.anagrams.some(p=>p.original&&!p.word)){const p=t.anagrams.map(b=>({id:b.id||Date.now().toString(),word:b.original||b.word||"",definition:b.definition||""}));e("anagrams",p)}},[t.withDefinitions,t.anagrams]);const i=(d=t.withDefinitions)!=null?d:!1,o=t.anagrams||[{id:"1",word:"LISTEN",definition:"To hear with attention"}],s=f=>{e("withDefinitions",f==="true")},a=(f,p)=>{const b=[...o];b[f].word=p,e("anagrams",b)},l=(f,p)=>{const b=[...o];b[f].definition=p,e("anagrams",b)},c=()=>{const f={id:Date.now().toString(),word:"",definition:""};e("anagrams",[...o,f])},u=f=>{if(o.length>1){const p=o.filter((b,v)=>v!==f);e("anagrams",p)}};return h.jsxs(Kt,{spacing:6,align:"stretch",children:[h.jsxs(Mr,{children:[h.jsx(ar,{mb:3,children:"Anagram Puzzles"}),h.jsx(yX,{value:i?"true":"false",onChange:s,children:h.jsxs(iT,{direction:"row",spacing:8,children:[h.jsx(LI,{value:"false",children:"Without definitions"}),h.jsx(LI,{value:"true",children:"With definitions"})]})})]}),h.jsxs(Kt,{spacing:4,align:"stretch",children:[o.map((f,p)=>h.jsx(Et,{p:4,border:"1px solid",borderColor:"gray.200",borderRadius:"md",children:h.jsxs(Ln,{spacing:4,align:"start",children:[h.jsxs(ft,{fontWeight:"bold",minW:"20px",children:[p+1,"."]}),h.jsxs(Kt,{spacing:3,flex:1,children:[h.jsxs(Mr,{children:[h.jsx(ar,{fontSize:"sm",children:"Word"}),h.jsx(ti,{value:f.word,onChange:b=>a(p,b.target.value),placeholder:"Enter word",className:"apple-input"})]}),i&&h.jsxs(Mr,{children:[h.jsx(ar,{fontSize:"sm",children:"Definition"}),h.jsx(Et,{border:"1px",borderColor:"gray.200",borderRadius:"md",children:h.jsx(v5,{value:f.definition,onChange:b=>l(p,b),placeholder:"Enter definition",compact:!0,showToolbar:!0,className:"apple-input"})})]})]}),o.length>1&&h.jsx(kr,{icon:h.jsx(Tl,{}),onClick:()=>u(p),colorScheme:"red",variant:"ghost",size:"sm","aria-label":"Remove anagram"})]})},f.id)),h.jsx(pn,{leftIcon:h.jsx(Al,{}),onClick:c,variant:"outline",colorScheme:"blue",size:"sm",alignSelf:"flex-start",children:"Add a new word"}),h.jsx(fc,{justify:"flex-end",fontSize:"sm",color:"gray.500",children:"min 1 max 100"})]}),n.anagrams&&h.jsxs(bi,{status:"error",children:[h.jsx(xi,{}),h.jsx(bl,{children:n.anagrams})]})]})},fot={gameType:"anagram",title:"Anagram",description:"Create letter-to-word anagram puzzles for your students to solve.",sections:[{title:"Game Settings",description:"Configure basic game parameters",fields:[{name:"title",label:"Title",type:"text",required:!0,placeholder:"Enter game title",defaultValue:"Anagram Game"},{name:"showHints",label:"Show Hint Button",type:"switch",defaultValue:!0,helpText:"Allow students to get hints during the game"},{name:"enableTextToSpeech",label:"Enable Text-to-Speech",type:"switch",defaultValue:!0,helpText:"Allow students to hear words and definitions spoken aloud"}]},{title:"Anagram Puzzles",description:"Create your anagram word puzzles",fields:[],component:dot},{title:"Sharing",description:"Make your game available to other teachers",fields:[{name:"share",label:"Share this game publicly",type:"switch",defaultValue:!1,helpText:"Public games can be used by other teachers as templates"}]}],customValidation:t=>{if(!t.title||!t.title.trim())return"Please enter a title for your game";if(!t.anagrams||t.anagrams.length===0)return"Please add at least one anagram word";for(const e of t.anagrams){if(!e.word||!e.word.trim())return"All anagrams must have a word";if(t.withDefinitions&&(!e.definition||!e.definition.trim()))return'All anagrams must have a definition when "With definitions" is selected'}},generateConfig:(t,e)=>{t.withDefinitions===void 0&&(t.withDefinitions=!1),t.showHints===void 0&&(t.showHints=!0),t.enableTextToSpeech===void 0&&(t.enableTextToSpeech=!0),t.share===void 0&&(t.share=!1);const n=j({title:"Anagram Game",withDefinitions:!1,showHints:!0,enableTextToSpeech:!0,share:!1,anagrams:[{id:"1",word:"LISTEN",definition:"To hear with attention"}]},t),r=n.withDefinitions!==void 0?!!n.withDefinitions:!1,i=n.showHints!==void 0?!!n.showHints:!0,o=n.enableTextToSpeech!==void 0?!!n.enableTextToSpeech:!0,s=n.share!==void 0?!!n.share:!1,a=(n.anagrams||[]).map((c,u)=>({id:c.id||u.toString(),original:c.word,definition:c.definition||"",type:"word"}));return{title:n.title||"Anagram Game",type:"anagram",description:`Anagram game with ${a.length} ${a.length===1?"puzzle":"puzzles"}`,difficulty:"medium",timeLimit:300,targetScore:a.length*100,maxAttempts:3,shuffleIntensity:"medium",gameMode:"letters-to-word",showDefinitions:r,enableHints:i,enableTextToSpeech:o,correctFeedbackDuration:"momentary",anagrams:a,share:s,email:e==null?void 0:e.email,userId:e==null?void 0:e.uid,createdAt:bo()}}},i7=()=>{const{templateId:t}=Pd(),e=Pr(),n=co(),{currentUser:r}=Dr(),[i,o]=T.useState({}),[s,a]=T.useState(!1),[l,c]=T.useState(!1),[u,d]=T.useState(!1);return T.useEffect(()=>{te(nt,null,function*(){if(!t||t==="new"||t.trim()==="")return;const b=new URLSearchParams(window.location.search).get("copy")==="true";d(b),c(!0);try{let v=!1;const m=[{name:"userGameConfigs",ref:an(bt,"userGameConfigs",t)},{name:"gameConfigs",ref:an(bt,"gameConfigs",t)},{name:"blankGameTemplates",ref:an(bt,"blankGameTemplates",t)},{name:"categoryTemplates",ref:an(bt,"categoryTemplates",t)}];let g="",x=null;for(const w of m){const S=yield si(w.ref);if(S.exists()){x=S,g=w.name,v=w.name==="gameConfigs"||w.name==="blankGameTemplates"||w.name==="categoryTemplates";break}}if(x&&x.exists()){const w=x.data();b?(a(!1),n({title:"Creating a copy",description:"Creating a new copy of this anagram game configuration.",status:"info",duration:5e3})):v||w.userId!==(r==null?void 0:r.uid)?(a(!1),d(!0),n({title:"Creating a copy",description:v?"This is an official template. You'll create a copy that you can customize.":"You're not the owner of this configuration, so you'll create a copy instead.",status:"info",duration:5e3})):a(!0);const S=se(j({},w),{title:b||v||w.userId!==(r==null?void 0:r.uid)?`Copy of ${w.title||"Untitled Anagram Game"}`:w.title||"",share:b||v||w.userId!==(r==null?void 0:r.uid)?!1:w.share});o(S)}else n({title:"Configuration not found",description:"The requested configuration could not be found in any collection.",status:"error",duration:5e3}),e("/configure/anagram")}catch(v){console.error("Error loading configuration:",v),n({title:"Error",description:"Failed to load the configuration.",status:"error",duration:5e3}),e("/configure/anagram")}finally{c(!1)}})},[t,r,e,n]),t&&l?null:h.jsx(vm,{schema:fot,initialData:i,isEditing:s,documentId:u?void 0:t,onCancel:()=>e("/")})},hot=({formData:t,updateField:e,errors:n,saveAttempted:r})=>{T.useEffect(()=>{t&&!t.sentences&&e("sentences",[])},[t,e]);const i=(t==null?void 0:t.sentences)||[],o=()=>{if(i.length>=50)return;const l={id:Date.now().toString(),original:"",difficulty:"medium"};e("sentences",[...i,l])},s=(l,c,u)=>{const d=[...i];d[l]=se(j({},d[l]),{[c]:u}),e("sentences",d)},a=l=>{if(i.length>0){const c=i.filter((u,d)=>d!==l);e("sentences",c)}};return h.jsxs(Kt,{spacing:6,align:"stretch",children:[h.jsxs(Mr,{children:[h.jsx(ar,{mb:3,children:"Sentences"}),h.jsx(ft,{fontSize:"sm",color:"gray.600",mb:4,children:"Add sentences for students to arrange from scrambled words"})]}),h.jsxs(Kt,{spacing:4,align:"stretch",children:[i.length===0?h.jsxs(bi,{status:"info",borderRadius:"md",children:[h.jsx(xi,{}),h.jsx(bl,{children:'No sentences added yet. Click "Add Sentence" to get started.'})]}):h.jsx(_N,{allowMultiple:!0,children:i.map((l,c)=>h.jsxs(wN,{border:"1px",borderColor:"gray.200",borderRadius:"md",mb:2,children:[h.jsxs(yN,{children:[h.jsx(Et,{flex:"1",textAlign:"left",children:h.jsxs(Ln,{justify:"space-between",children:[h.jsxs(Kt,{align:"start",spacing:1,children:[h.jsxs(ft,{fontWeight:"medium",children:["Sentence ",c+1,l.original&&h.jsxs(lo,{ml:2,colorScheme:"blue",variant:"outline",children:[l.original.split(" ").length," words"]})]}),l.original&&h.jsx(ft,{fontSize:"sm",color:"gray.600",noOfLines:1,children:l.original})]}),h.jsx(kr,{"aria-label":"Delete sentence",icon:h.jsx(Tl,{}),size:"sm",colorScheme:"red",variant:"ghost",onClick:u=>{u.stopPropagation(),a(c)}})]})}),h.jsx(bN,{})]}),h.jsx(SN,{pb:4,children:h.jsxs(Kt,{spacing:4,align:"stretch",children:[h.jsxs(Mr,{isRequired:!0,children:[h.jsx(ar,{children:"Sentence"}),h.jsx(ZN,{value:l.original||"",onChange:u=>s(c,"original",u.target.value),placeholder:"Enter the complete sentence (e.g., 'The quick brown fox jumps over the lazy dog')",rows:2}),h.jsx(ft,{fontSize:"xs",color:"gray.500",mt:1,children:"This sentence will be broken into words and scrambled for the student to rearrange."})]}),l.original&&h.jsxs(Et,{bg:"gray.50",p:3,borderRadius:"md",children:[h.jsx(ft,{fontSize:"sm",fontWeight:"medium",mb:2,children:"Preview:"}),h.jsxs(ft,{fontSize:"sm",color:"gray.600",children:[h.jsx("strong",{children:"Words to arrange:"})," ",l.original.split(" ").map((u,d)=>h.jsx(lo,{mr:1,mb:1,colorScheme:"blue",variant:"outline",style:{textTransform:"none"},children:u},d))]})]})]})})]},l.id))}),h.jsx(pn,{leftIcon:h.jsx(Al,{}),onClick:o,variant:"outline",colorScheme:"blue",size:"sm",alignSelf:"flex-start",isDisabled:i.length>=50,children:"Add Sentence"}),h.jsxs(fc,{justify:"space-between",fontSize:"sm",color:"gray.500",children:[h.jsx(ft,{children:i.length===0?"No sentences added yet":i.length===1?"1 sentence added":`${i.length} sentences added`}),h.jsx(ft,{children:i.length>=50?"Maximum reached":`${50-i.length} remaining`})]})]}),i.length>0&&h.jsxs(Et,{bg:"gray.50",p:4,borderRadius:"md",children:[h.jsx(ft,{fontSize:"sm",fontWeight:"medium",mb:2,children:"Configuration Summary:"}),h.jsxs(Kt,{spacing:1,align:"stretch",children:[h.jsxs(Ln,{justify:"space-between",children:[h.jsx(ft,{fontSize:"sm",children:"Total Sentences:"}),h.jsx(lo,{colorScheme:"blue",children:i.length})]}),h.jsxs(Ln,{justify:"space-between",children:[h.jsx(ft,{fontSize:"sm",children:"Average Words per Sentence:"}),h.jsx(lo,{colorScheme:"green",children:Math.round(i.reduce((l,c)=>{var u;return l+(((u=c.original)==null?void 0:u.split(" ").length)||0)},0)/i.length)})]})]})]}),(n==null?void 0:n.sentences)&&h.jsxs(bi,{status:"error",children:[h.jsx(xi,{}),h.jsx(bl,{children:n.sentences})]})]})},pot={gameType:"sentence-sense",title:"Sentence Sense",description:"Create word arrangement games where students arrange scrambled words into correct sentences.",sections:[{title:"Game Settings",description:"Configure basic game parameters",fields:[{name:"title",label:"Title",type:"text",required:!0,placeholder:"Enter game title",defaultValue:"Sentence Sense Game"},{name:"showHints",label:"Show Hint Button",type:"switch",defaultValue:!0,helpText:"Allow students to get hints during the game"},{name:"enableTextToSpeech",label:"Enable Text-to-Speech",type:"switch",defaultValue:!0,helpText:"Allow students to hear words and sentences spoken aloud"}]},{title:"Sentences",description:"Create your sentence arrangement challenges",fields:[],component:hot},{title:"Sharing",description:"Make your game available to other teachers",fields:[{name:"share",label:"Share this game publicly",type:"switch",defaultValue:!1,helpText:"Public games can be used by other teachers as templates"}]}],customValidation:t=>{if(!t)return"Configuration data is not available";if(!t.title||!t.title.trim())return"Please enter a title for your game";if(!t.sentences||t.sentences.length===0)return"Please add at least one sentence";if(t.sentences.length>50)return"Maximum 50 sentences allowed";for(let e=0;e<t.sentences.length;e++){const n=t.sentences[e];if(!n.original||!n.original.trim())return`Sentence ${e+1}: Please enter sentence text`;if(n.original.trim().split(" ").length<2)return`Sentence ${e+1}: Sentence must contain at least 2 words`}},generateConfig:(t,e)=>{t||(t={}),t.showHints===void 0&&(t.showHints=!0),t.enableTextToSpeech===void 0&&(t.enableTextToSpeech=!0),t.share===void 0&&(t.share=!1);const n=j({title:"Sentence Sense Game",showHints:!0,enableTextToSpeech:!0,share:!1,sentences:[]},t),r=n.showHints!==void 0?!!n.showHints:!0,i=n.enableTextToSpeech!==void 0?!!n.enableTextToSpeech:!0,o=n.share!==void 0?!!n.share:!1,s=(n.sentences||[]).map((l,c)=>({id:l.id||c.toString(),original:l.original,definition:l.definition||"",difficulty:l.difficulty||"medium"}));return{title:n.title||"Sentence Sense Game",type:"sentence-sense",description:`Sentence arrangement game with ${s.length} ${s.length===1?"sentence":"sentences"}`,difficulty:"medium",timeLimit:300,targetScore:s.length*100,maxAttempts:3,showHints:r,enableTextToSpeech:i,sentences:s,share:o,email:e==null?void 0:e.email,userId:e==null?void 0:e.uid,createdAt:bo()}}},o7=()=>{const{templateId:t}=Pd(),e=Pr(),n=co(),{currentUser:r}=Dr(),[i,o]=T.useState({}),[s,a]=T.useState(!1),[l,c]=T.useState(!1),[u,d]=T.useState(!1),f=()=>{e("/teacher")};return T.useEffect(()=>{if(!t||t==="new")return;te(nt,null,function*(){d(!0);try{const b=new URLSearchParams(window.location.search).get("copy")==="true",v=[{name:"userGameConfigs",ref:"userGameConfigs"},{name:"gameConfigs",ref:"gameConfigs"},{name:"blankGameTemplates",ref:"blankGameTemplates"},{name:"categoryTemplates",ref:"categoryTemplates"}];let m=null,g="",x=!1;for(const w of v){const S=yield si(an(bt,w.ref,t));if(S.exists()){m=S,g=w.name,x=w.name==="gameConfigs"||w.name==="blankGameTemplates"||w.name==="categoryTemplates";break}}if(m&&m.exists()){const w=m.data();b?(a(!1),n({title:"Creating a copy",description:"Creating a new copy of this Sentence Sense configuration.",status:"info",duration:5e3})):x||w.userId!==(r==null?void 0:r.uid)?(a(!1),c(!0),n({title:"Creating a copy",description:x?"This is an official template. You'll create a copy that you can customize.":"You're not the owner of this configuration, so you'll create a copy instead.",status:"info",duration:5e3})):a(!0);const S=se(j({},w),{title:b||x||w.userId!==(r==null?void 0:r.uid)?`Copy of ${w.title||"Untitled Sentence Sense Game"}`:w.title||"",share:b||x||w.userId!==(r==null?void 0:r.uid)?!1:w.share});o(S)}else n({title:"Configuration not found",description:"The requested configuration could not be found in any collection.",status:"error",duration:5e3}),e("/configure/sentence-sense")}catch(b){console.error("Error loading configuration:",b),n({title:"Error",description:"Failed to load the configuration.",status:"error",duration:5e3}),e("/configure/sentence-sense")}finally{d(!1)}})},[t,r,e,n]),u?h.jsx("div",{children:"Loading configuration..."}):h.jsx(vm,{schema:pot,onCancel:f,initialData:i,isEditing:s,documentId:s?t:void 0})},mot={gameType:"place-value-showdown",title:"Place Value Showdown",description:"Create an exciting competitive place value game where students challenge an AI teacher to build the largest or smallest numbers using digit positions!",sections:[{title:"Game Settings",description:"Configure basic game parameters",fields:[{name:"title",label:"Title",type:"text",required:!0,placeholder:"Enter game title",defaultValue:"Place Value Showdown"},{name:"numberOfCards",label:"Number of Digits",type:"select",required:!0,options:[{value:1,label:"1 Digit"},{value:2,label:"2 Digits"},{value:3,label:"3 Digits"},{value:4,label:"4 Digits"},{value:5,label:"5 Digits"}],defaultValue:3,helpText:"How many digits each player gets"},{name:"objective",label:"Objective",type:"select",required:!0,options:[{value:"largest",label:"Largest Number"},{value:"smallest",label:"Smallest Number"}],defaultValue:"largest",helpText:"Goal of the game"},{name:"winningScore",label:"Winning Score",type:"number",required:!0,min:1,max:20,defaultValue:5,helpText:"Points needed to win the game (1-20)",validation:t=>{const e=parseInt(t);if(isNaN(e)||e<1||e>20)return"Winning score must be between 1 and 20"}},{name:"gameMode",label:"Game Mode",type:"select",required:!0,options:[{value:"student-vs-teacher",label:"Student vs Teacher"},{value:"practice",label:"Practice Mode"}],defaultValue:"student-vs-teacher",helpText:"Single player practice or competitive mode"}]},{title:"Decimal Settings",description:"Optional decimal place value settings",fields:[{name:"includeDecimal",label:"Include Decimal Places",type:"switch",defaultValue:!1,helpText:"Add decimal places to the number"},{name:"decimalPlaces",label:"Decimal Places",type:"select",options:[{value:1,label:"1 Decimal Place"},{value:2,label:"2 Decimal Places"},{value:3,label:"3 Decimal Places"}],defaultValue:3,helpText:"Number of decimal places to include"}]},{title:"Learning Features",description:"Educational enhancement options",fields:[{name:"enableHints",label:"Enable Place Value Toggle Buttons",type:"switch",defaultValue:!0,helpText:"Allow students to toggle visual cues on/off during gameplay"}]},{title:"Sharing",description:"Make your game available to other teachers",fields:[{name:"share",label:"Share this game publicly",type:"switch",defaultValue:!1,helpText:"Public games can be used by other teachers as templates"}]}],customValidation:t=>{if(t.includeDecimal&&!t.decimalPlaces)return"Please select number of decimal places when including decimals"},generateConfig:(t,e)=>(t.includeDecimal?t.numberOfCards+t.decimalPlaces:t.numberOfCards,{title:t.title,type:"place-value-showdown",description:`Place value game with ${t.numberOfCards} digits${t.includeDecimal?` + ${t.decimalPlaces} decimal places`:""}, aiming for ${t.objective} number. First to ${t.winningScore} points wins!`,difficulty:"medium",timeLimit:300,targetScore:t.winningScore,numberOfCards:t.numberOfCards,objective:t.objective,winningScore:t.winningScore,aiDifficulty:"medium",playerName:"Student",teacherName:(e==null?void 0:e.displayName)||"Teacher",enableHints:t.enableHints,gameMode:t.gameMode,includeDecimal:t.includeDecimal,decimalPlaces:t.decimalPlaces,share:t.share,email:e==null?void 0:e.email,userId:e==null?void 0:e.uid,createdAt:bo()})},s7=()=>{const{templateId:t}=Pd(),e=Pr(),n=co(),{currentUser:r}=Dr(),[i,o]=T.useState({}),[s,a]=T.useState(!1),[l,c]=T.useState(!1),[u,d]=T.useState(!1),f=()=>{e("/teacher")};return T.useEffect(()=>{if(!t||t==="new")return;te(nt,null,function*(){d(!0);try{const b=new URLSearchParams(window.location.search).get("copy")==="true",v=[{name:"userGameConfigs",ref:"userGameConfigs"},{name:"gameConfigs",ref:"gameConfigs"},{name:"blankGameTemplates",ref:"blankGameTemplates"},{name:"categoryTemplates",ref:"categoryTemplates"}];let m=null,g="",x=!1;for(const w of v){const S=yield si(an(bt,w.ref,t));if(S.exists()){m=S,g=w.name,x=w.name==="gameConfigs"||w.name==="blankGameTemplates"||w.name==="categoryTemplates";break}}if(m&&m.exists()){const w=m.data();b?(a(!1),n({title:"Creating a copy",description:"Creating a new copy of this Place Value Showdown configuration.",status:"info",duration:5e3})):x||w.userId!==(r==null?void 0:r.uid)?(a(!1),c(!0),n({title:"Creating a copy",description:x?"This is an official template. You'll create a copy that you can customize.":"You're not the owner of this configuration, so you'll create a copy instead.",status:"info",duration:5e3})):a(!0);const S=se(j({},w),{title:b||x||w.userId!==(r==null?void 0:r.uid)?`Copy of ${w.title||"Untitled Place Value Showdown"}`:w.title||"",share:b||x||w.userId!==(r==null?void 0:r.uid)?!1:w.share});o(S)}else n({title:"Configuration not found",description:"The requested configuration could not be found in any collection.",status:"error",duration:5e3}),e("/configure/place-value-showdown")}catch(b){console.error("Error loading configuration:",b),n({title:"Error",description:"Failed to load the configuration.",status:"error",duration:5e3}),e("/configure/place-value-showdown")}finally{d(!1)}})},[t,r,e,n]),u?h.jsx("div",{children:"Loading configuration..."}):h.jsx(vm,{schema:mot,onCancel:f,initialData:i,isEditing:s,documentId:s?t:void 0})},got=({formData:t,updateField:e})=>{t.targetCategory||e("targetCategory",{id:"target",name:"Short A Words",words:["cat","bat","hat","mat","rat","sat","fat","pat","lap","cap"],isTarget:!0}),t.nonTargetCategory||e("nonTargetCategory",{id:"non-target",name:"Other Words",words:["dog","tree","house","car","sun","moon","book","pen","cup","ball"],isTarget:!1});const n=t.targetCategory||{id:"target",name:"Short A Words",words:["cat","bat","hat","mat","rat"],isTarget:!0},r=t.nonTargetCategory||{id:"non-target",name:"Other Words",words:["dog","tree","house","car","sun"],isTarget:!1},i=(l,c,u)=>{if(l==="target"){const d=[...n.words||[]];d[c]=u,e("targetCategory",se(j({},n),{words:d}))}else{const d=[...r.words||[]];d[c]=u,e("nonTargetCategory",se(j({},r),{words:d}))}},o=l=>{if(l==="target"){const c=n.words||[];if(c.length>=50)return;const u=[...c,""];e("targetCategory",se(j({},n),{words:u}))}else{const c=r.words||[];if(c.length>=50)return;const u=[...c,""];e("nonTargetCategory",se(j({},r),{words:u}))}},s=(l,c)=>{if(l==="target"){const u=(n.words||[]).filter((d,f)=>f!==c);e("targetCategory",se(j({},n),{words:u}))}else{const u=(r.words||[]).filter((d,f)=>f!==c);e("nonTargetCategory",se(j({},r),{words:u}))}},a=(l,c)=>{l==="target"?e("targetCategory",se(j({},n),{name:c})):e("nonTargetCategory",se(j({},r),{name:c}))};return h.jsx(Et,{children:h.jsxs(ww,{children:[h.jsxs(Sw,{children:[h.jsx(As,{children:"Target Words (Hit These)"}),h.jsx(As,{children:"Non-Target Words (Avoid These)"})]}),h.jsxs(uT,{children:[h.jsx(Uf,{children:h.jsxs(dc,{children:[h.jsx(Pv,{children:h.jsxs(Ln,{justify:"space-between",children:[h.jsxs(Kt,{align:"start",spacing:1,children:[h.jsx(zr,{size:"md",children:"Target Category"}),h.jsx(ft,{fontSize:"sm",color:"gray.600",children:"Words that students should hit with their paddle"})]}),h.jsxs(lo,{colorScheme:"green",children:[(n.words||[]).filter(l=>l.trim()).length," / 50 words"]})]})}),h.jsx(uc,{children:h.jsxs(Kt,{spacing:4,children:[h.jsxs(Mr,{children:[h.jsx(ar,{children:"Category Name"}),h.jsx(ti,{value:n.name||"",onChange:l=>a("target",l.target.value),placeholder:"e.g., Short A Words",className:"apple-input"})]}),h.jsxs(Et,{width:"100%",children:[h.jsx(ar,{children:"Words"}),h.jsx(pC,{columns:{base:1,sm:2,md:3},spacing:3,children:(n.words||[]).map((l,c)=>h.jsxs(Ln,{children:[h.jsx(ti,{value:l,onChange:u=>i("target",c,u.target.value),placeholder:`Word ${c+1}`,className:"apple-input",size:"sm"}),h.jsx(kr,{icon:h.jsx(Tl,{}),onClick:()=>s("target",c),size:"sm",colorScheme:"red",variant:"ghost","aria-label":"Remove word"})]},c))}),h.jsx(pn,{leftIcon:h.jsx(Al,{}),onClick:()=>o("target"),size:"sm",colorScheme:"green",variant:"outline",mt:3,isDisabled:(n.words||[]).length>=50,children:(n.words||[]).length>=50?"Maximum Reached (50)":"Add Target Word"}),(n.words||[]).length>=45&&(n.words||[]).length<50&&h.jsxs(ft,{fontSize:"sm",color:"orange.600",mt:1,children:[50-(n.words||[]).length," words remaining"]})]})]})})]})}),h.jsx(Uf,{children:h.jsxs(dc,{children:[h.jsx(Pv,{children:h.jsxs(Ln,{justify:"space-between",children:[h.jsxs(Kt,{align:"start",spacing:1,children:[h.jsx(zr,{size:"md",children:"Non-Target Category"}),h.jsx(ft,{fontSize:"sm",color:"gray.600",children:"Words that students should avoid hitting"})]}),h.jsxs(lo,{colorScheme:"red",children:[(r.words||[]).filter(l=>l.trim()).length," / 50 words"]})]})}),h.jsx(uc,{children:h.jsxs(Kt,{spacing:4,children:[h.jsxs(Mr,{children:[h.jsx(ar,{children:"Category Name"}),h.jsx(ti,{value:r.name||"",onChange:l=>a("nonTarget",l.target.value),placeholder:"e.g., Other Words",className:"apple-input"})]}),h.jsxs(Et,{width:"100%",children:[h.jsx(ar,{children:"Words"}),h.jsx(pC,{columns:{base:1,sm:2,md:3},spacing:3,children:(r.words||[]).map((l,c)=>h.jsxs(Ln,{children:[h.jsx(ti,{value:l,onChange:u=>i("nonTarget",c,u.target.value),placeholder:`Word ${c+1}`,className:"apple-input",size:"sm"}),h.jsx(kr,{icon:h.jsx(Tl,{}),onClick:()=>s("nonTarget",c),size:"sm",colorScheme:"red",variant:"ghost","aria-label":"Remove word"})]},c))}),h.jsx(pn,{leftIcon:h.jsx(Al,{}),onClick:()=>o("nonTarget"),size:"sm",colorScheme:"red",variant:"outline",mt:3,isDisabled:(r.words||[]).length>=50,children:(r.words||[]).length>=50?"Maximum Reached (50)":"Add Non-Target Word"}),(r.words||[]).length>=45&&(r.words||[]).length<50&&h.jsxs(ft,{fontSize:"sm",color:"orange.600",mt:1,children:[50-(r.words||[]).length," words remaining"]})]})]})})]})})]})]})})},vot=(t,e)=>{var o;const n={title:t.title||"Pong Game",description:t.description||"Educational Pong-style word categorization game",gameSpeed:t.gameSpeed||5,paddleSize:t.paddleSize||5,gameDuration:t.gameDuration||3,enableTextToSpeech:(o=t.enableTextToSpeech)!=null?o:!0,targetCategory:t.targetCategory||{id:"target",name:"Short A Words",words:["cat","bat","hat","mat","rat"],isTarget:!0},nonTargetCategory:t.nonTargetCategory||{id:"non-target",name:"Other Words",words:["dog","tree","house","car","sun"],isTarget:!1},share:t.share||!1},r=(n.targetCategory.words||[]).filter(s=>s&&s.trim()),i=(n.nonTargetCategory.words||[]).filter(s=>s&&s.trim());return{title:n.title,type:"word-volley",description:n.description,timeLimit:n.gameDuration*60,targetScore:Math.max(r.length,i.length)*10,gameSpeed:n.gameSpeed,paddleSize:n.paddleSize,gameDuration:n.gameDuration,enableTextToSpeech:n.enableTextToSpeech,targetCategory:se(j({},n.targetCategory),{words:r}),nonTargetCategory:se(j({},n.nonTargetCategory),{words:i}),share:n.share,email:(e==null?void 0:e.email)||"",userId:(e==null?void 0:e.uid)||"",createdAt:bo(),updatedAt:bo()}},yot={gameType:"word-volley",title:"Word Volley Game",description:"Educational Pong-style word categorization game",sections:[{title:"Game Settings",description:"Configure the basic game settings and difficulty",fields:[{name:"title",label:"Game Title",type:"text",required:!0,placeholder:"Enter game title",defaultValue:"Pong Game",helpText:"Name for your Word Volley game"},{name:"description",label:"Description",type:"textarea",placeholder:"Enter game description",defaultValue:"Educational Pong-style word categorization game",helpText:"Brief description of the game"},{name:"gameSpeed",label:"Game Speed",type:"select",required:!0,options:[{value:2,label:"Slow"},{value:5,label:"Medium"},{value:8,label:"Normal"},{value:11,label:"Fast"},{value:15,label:"Very Fast"}],defaultValue:5,width:"140px",helpText:"Controls ball speed (Slow to Very Fast)"},{name:"paddleSize",label:"Paddle Size",type:"select",required:!0,options:[{value:1,label:"Small"},{value:3,label:"Medium"},{value:5,label:"Normal"},{value:7,label:"Large"},{value:10,label:"Extra Large"}],defaultValue:5,width:"140px",helpText:"Controls paddle size (Small to Extra Large)"},{name:"gameDuration",label:"Game Duration (minutes)",type:"select",required:!0,options:[{value:1,label:"1 minute"},{value:2,label:"2 minutes"},{value:3,label:"3 minutes"},{value:4,label:"4 minutes"},{value:5,label:"5 minutes"}],defaultValue:3,width:"140px",helpText:"How long each game session lasts"},{name:"enableTextToSpeech",label:"Enable Text-to-Speech for words",type:"switch",defaultValue:!0,helpText:"Enable audio pronunciation of words during gameplay"}]},{title:"Word Categories",description:"Configure target words (to hit) and non-target words (to avoid)",component:got},{title:"Sharing Settings",description:"Control who can access this configuration",fields:[{name:"share",label:"Share this configuration with other teachers",type:"switch",defaultValue:!1,helpText:"Allow other teachers to use this game configuration"}]}],generateConfig:vot},a7=()=>{const t=Pr(),{onError:e}=zDe();return h.jsx(vm,{schema:yot,onCancel:()=>t("/")})},xot=()=>{const t=Pr(),e=gs(),[n,r]=T.useState("detecting");return T.useEffect(()=>{const i=()=>te(nt,null,function*(){const s=new URLSearchParams(e.search),a=s.get("target"),l=s.get("token"),c=s.get("pwa");if(!a){t("/student");return}if(r("redirecting"),!(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://"))&&"serviceWorker"in navigator)try{if(l){const d=`web+lumino://play?token=${l}`;window.location.href=d,setTimeout(()=>{r("fallback"),o(a,l,c)},1e3);return}}catch(d){console.log("Protocol handler not available, using fallback")}o(a,l,c)}),o=(s,a,l)=>{let c=s;a&&(c+=`?token=${a}`),l&&(c+=a?`&pwa=${l}`:`?pwa=${l}`),s.startsWith("/")?t(c):window.location.href=c};i()},[e,t]),h.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"20px",textAlign:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:[h.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.1)",borderRadius:"15px",padding:"30px",backdropFilter:"blur(10px)",maxWidth:"400px"},children:[h.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:"📱"}),h.jsxs("h2",{style:{marginBottom:"15px"},children:[n==="detecting"&&"Opening LuminateLearn...",n==="redirecting"&&"Launching App...",n==="fallback"&&"Redirecting..."]}),h.jsxs("p",{style:{opacity:.9,lineHeight:1.5},children:[n==="detecting"&&"Detecting the best way to open your assignment...",n==="redirecting"&&"Attempting to open in the LuminateLearn app...",n==="fallback"&&"Opening in your browser..."]}),h.jsx("div",{style:{marginTop:"20px",display:"flex",justifyContent:"center"},children:h.jsx("div",{style:{width:"40px",height:"40px",border:"3px solid rgba(255, 255, 255, 0.3)",borderTop:"3px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}})})]}),h.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})};class bot{constructor(){go(this,"sessionId");go(this,"events",[]);this.sessionId=this.generateSessionId(),console.log("📊 Email Link Analytics initialized with session:",this.sessionId)}generateSessionId(){return`email_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}trackEmailLinkClick(e,n={}){try{const r=j({linkType:e,pwaInstalled:this.detectPWAInstallation(),userAgent:navigator.userAgent,fromEmail:this.detectEmailOrigin(),timestamp:Date.now(),sessionId:this.sessionId},n);this.events.push(r);const i=JSON.parse(localStorage.getItem("email_link_analytics")||"[]");i.push(r),localStorage.setItem("email_link_analytics",JSON.stringify(i)),console.log("📊 Email Link Analytics - Link clicked:",{linkType:r.linkType,pwaInstalled:r.pwaInstalled,fromEmail:r.fromEmail,sessionId:r.sessionId}),this.sendToBackend(r)}catch(r){console.error("📊 Email Link Analytics - Error tracking click:",r)}}trackSmartRouteDecision(e,n,r){try{const i={type:"smart_route_decision",routeType:e,decision:n,reason:r,pwaInstalled:this.detectPWAInstallation(),timestamp:Date.now(),sessionId:this.sessionId};console.log("📊 Email Link Analytics - Smart route decision:",i);const o=JSON.parse(localStorage.getItem("smart_route_decisions")||"[]");o.push(i),localStorage.setItem("smart_route_decisions",JSON.stringify(o)),this.sendToBackend(i)}catch(i){console.error("📊 Email Link Analytics - Error tracking smart route:",i)}}trackPWAInstallFromEmail(e,n){try{const r={type:"pwa_install_from_email",success:e,method:n,timestamp:Date.now(),sessionId:this.sessionId,userAgent:navigator.userAgent};console.log("📊 Email Link Analytics - PWA install tracked:",r);const i=JSON.parse(localStorage.getItem("pwa_install_analytics")||"[]");i.push(r),localStorage.setItem("pwa_install_analytics",JSON.stringify(i)),this.sendToBackend(r)}catch(r){console.error("📊 Email Link Analytics - Error tracking PWA install:",r)}}getSessionId(){return this.sessionId}detectPWAInstallation(){try{const e=window.matchMedia("(display-mode: standalone)").matches,n=window.navigator.standalone===!0,r=document.referrer.includes("android-app://");return e||n||r}catch(e){return!1}}detectEmailOrigin(){try{return new URLSearchParams(window.location.search).get("from")==="email"}catch(e){return!1}}sendToBackend(e){return te(this,null,function*(){try{if(!(window.location.hostname.includes("verse-dev-central.web.app")||window.location.hostname.includes("verse-central.web.app"))){console.log("📊 Analytics - Dev mode, skipping backend send:",e);return}console.log("📊 Analytics - Would send to backend:",e)}catch(n){console.warn("📊 Analytics - Backend send failed:",n)}})}generateAnalyticsReport(){return te(this,null,function*(){try{const e=JSON.parse(localStorage.getItem("email_link_analytics")||"[]"),n=JSON.parse(localStorage.getItem("smart_route_decisions")||"[]"),r=JSON.parse(localStorage.getItem("pwa_install_analytics")||"[]"),i={totalEmailLinkClicks:e.length,linkTypeBreakdown:this.calculateLinkTypeBreakdown(e),smartRouteEffectiveness:this.calculateSmartRouteEffectiveness(n),pwaInstallSuccess:this.calculatePWAInstallSuccess(r),userAgentBreakdown:this.calculateUserAgentBreakdown(e),sessionCount:new Set(e.map(o=>o.sessionId)).size,timeRange:{earliest:Math.min(...e.map(o=>o.timestamp)),latest:Math.max(...e.map(o=>o.timestamp))}};return console.log("📊 Email Link Analytics Report:",i),i}catch(e){return console.error("📊 Analytics - Error generating report:",e),null}})}calculateLinkTypeBreakdown(e){const n={};return e.forEach(r=>{n[r.linkType]=(n[r.linkType]||0)+1}),n}calculateSmartRouteEffectiveness(e){const n={totalDecisions:e.length,pwaRoutes:e.filter(r=>r.decision==="pwa").length,browserRoutes:e.filter(r=>r.decision==="browser").length};return se(j({},n),{pwaPercentage:n.totalDecisions>0?(n.pwaRoutes/n.totalDecisions*100).toFixed(1):0})}calculatePWAInstallSuccess(e){const n=e.filter(i=>i.success).length,r=e.length;return{total:r,successful:n,successRate:r>0?(n/r*100).toFixed(1):0,methodBreakdown:e.reduce((i,o)=>(i[o.method]=(i[o.method]||0)+1,i),{})}}calculateUserAgentBreakdown(e){const n={};return e.forEach(r=>{const i=r.userAgent;let o="Other";i.includes("Chrome")?o="Chrome":i.includes("Safari")&&!i.includes("Chrome")?o="Safari":i.includes("Firefox")?o="Firefox":i.includes("Edge")&&(o="Edge"),n[o]=(n[o]||0)+1}),n}}const wot=new bot,l7=()=>{const[t]=dh(),e=Pr(),{isInstalled:n,isInstallable:r}=r2(),[i,o]=T.useState(!0),[s,a]=T.useState(""),l=window.location.pathname.includes("/assignment")?"assignment":"dashboard",c=t.get("token"),u=t.get("mode"),d=t.get("forceBrowser")==="true",f=t.get("pwaMode"),p=t.get("showGuide")==="true",b=t.get("from")==="email",v=t.get("studentEmail");return T.useEffect(()=>{const m=()=>te(nt,null,function*(){console.log("🎯 Smart Router - Starting intelligent routing",{routeType:l,token:c,mode:u,forceBrowser:d,pwaMode:f,showGuide:p,fromEmail:b,studentEmail:v,isInstalled:n,isInstallable:r}),console.log("🔍 Smart Router - Enhanced PWA detection debug:",{"window.matchMedia standalone":window.matchMedia("(display-mode: standalone)").matches,"navigator.standalone":window.navigator.standalone,"document.referrer":document.referrer,"window.location.href":window.location.href,"window.location.hostname":window.location.hostname,"window.outerHeight - innerHeight":window.outerHeight-window.innerHeight,"serviceWorker available":"serviceWorker"in navigator,userAgent:navigator.userAgent,isInEmailClient:x()});function x(){const S=navigator.userAgent.toLowerCase();return S.includes("yahoo")||S.includes("gmail")||S.includes("outlook")||S.includes("mail")||document.referrer.includes("mail")||window.location.href.includes("from=email")}if(d){a("🖥️ Force Browser Mode");const S=v?`&studentEmail=${v}&emailAccess=true`:"",P=l==="assignment"?`/play?token=${c}&mode=browser&from=email&forceBrowser=true${S}`:`/student?mode=browser&from=email&forceBrowser=true${S}`;console.log("🖥️ Smart Router - Force browser mode, redirecting to:",P),wot.trackEmailLinkClick(l==="assignment"?"browser-assignment":"browser-dashboard",{token:c||void 0,userId:void 0}),window.location.href=P;return}if(f==="required"){if(n){a("📱 PWA Required - Opening in App");const S=v?`&studentEmail=${v}&emailAccess=true`:"",P=l==="assignment"?`/play?token=${c}&pwa=true&pwa_type=game&from=email${S}`:`/student?pwa_type=student&from=email${S}`;console.log("📱 Smart Router - PWA required and installed, redirecting to:",P),window.location.href=P}else a("📱 PWA Required - Installing First"),console.log("📱 Smart Router - PWA required but not installed, redirecting to install"),e(`/student?pwa=install&from=email&showGuide=true&returnUrl=${encodeURIComponent(window.location.href)}`);return}if(p||u==="install"){n?(a("📱 Install Guide - Already Installed"),console.log("📱 Smart Router - Install requested but already installed"),e("/student?pwa=alreadyInstalled&showGuide=true")):(a("📱 Install Guide - Showing Installation"),console.log("📱 Smart Router - Showing install guide"),e("/student?pwa=install&showGuide=true"));return}yield new Promise(S=>setTimeout(S,2e3));const w=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0||document.referrer.includes("android-app://");if(console.log("🎯 Smart Router - Universal routing (all browser loads get PWA guidance):",{"usePWA.isInstalled":n,isCurrentlyInPWA:w,routeType:l,fromEmail:b,timing:"After 2-second delay"}),n&&!w){a("🎯 Smart Route - Using Installed PWA");const S=v?`&studentEmail=${v}&emailAccess=true`:"",P=l==="assignment"?`/play?token=${c}&pwa=true&pwa_type=game&from=email&emailAccess=true${S}`:`/student?pwa_type=student&from=email${S}`;console.log("🎯 Smart Router - PWA detected, using PWA route:",P),l==="assignment"?window.location.href=`/launch.html?target=%2Fplay&token=${c}&pwa=true&from=email`:window.location.href=P}else{a("🎯 Smart Route - Using Browser (Universal PWA guidance)");const S=v?`&studentEmail=${v}&emailAccess=true`:"",P=l==="assignment"?`/play?token=${c}&from=email&emailAccess=true${S}`:`/student?from=email${S}`;console.log("🎯 Smart Router - Using browser route with universal PWA guidance:",P),window.location.href=P}}),g=setTimeout(()=>{m().finally(()=>{o(!1)})},1500);return()=>clearTimeout(g)},[l,c,u,d,f,p,b,n,r,e]),i?h.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"20px",fontFamily:"system-ui, sans-serif"},children:[h.jsx(uL,{}),h.jsx("h2",{style:{marginTop:"20px",color:"#374151"},children:"LuminateLearn"}),h.jsx("p",{style:{color:"#6b7280",textAlign:"center",maxWidth:"400px"},children:"Detecting your device capabilities and choosing the best way to open your content..."}),s&&h.jsx("p",{style:{color:"#059669",fontWeight:"bold",marginTop:"10px"},children:s}),h.jsxs("div",{style:{marginTop:"30px",padding:"15px",backgroundColor:"#f3f4f6",borderRadius:"8px",fontSize:"14px",color:"#4b5563"},children:[h.jsx("strong",{children:"What's happening:"}),h.jsxs("ul",{style:{margin:"10px 0",paddingLeft:"20px"},children:[h.jsx("li",{children:"🔍 Checking if LuminateLearn app is installed"}),h.jsx("li",{children:"🎯 Selecting the best way to open your content"}),h.jsx("li",{children:"🚀 Redirecting to your assignment or dashboard"})]})]})]}):h.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"20px",fontFamily:"system-ui, sans-serif"},children:[h.jsx("h2",{style:{color:"#374151"},children:"Redirecting..."}),h.jsx("p",{style:{color:"#6b7280"},children:"If you're not redirected automatically, please check your browser settings."}),h.jsx("button",{onClick:()=>window.location.href="/student",style:{marginTop:"20px",padding:"12px 24px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold"},children:"Go to Student Dashboard"})]})},sp=class sp{constructor(){go(this,"assignmentChannel",null);go(this,"serviceWorkerReady",!1);if(new URLSearchParams(window.location.search).get("forceBrowser")==="true"){console.log("[EmailLink] 🚫 Browser-only mode detected - skipping service worker initialization");return}this.initializeBroadcastChannel(),this.checkServiceWorkerReady()}static getInstance(){return sp.instance||(sp.instance=new sp),sp.instance}initializeBroadcastChannel(){try{this.assignmentChannel=new BroadcastChannel("luminatelearn-assignments"),console.log("[EmailLink] 📡 BroadcastChannel initialized")}catch(e){console.warn("[EmailLink] ⚠️ BroadcastChannel not supported:",e)}}checkServiceWorkerReady(){return te(this,null,function*(){if("serviceWorker"in navigator)try{const e=yield navigator.serviceWorker.ready;this.serviceWorkerReady=!!e.active,console.log("[EmailLink] 🔧 Service Worker ready:",this.serviceWorkerReady)}catch(e){console.warn("[EmailLink] ⚠️ Service Worker check failed:",e)}})}handlePWALink(e){return te(this,null,function*(){if(console.log("[EmailLink] 📱 Handling PWA link with LAUNCHER BRIDGE approach:",e),this.serviceWorkerReady&&navigator.serviceWorker.controller){console.log("[EmailLink] 🎯 FOCUS-FIRST: Checking for existing PWA windows...");const n=yield this.tryFocusExistingPWA(e.studentEmail,e.source);if(n.success){console.log("[EmailLink] ✅ FOCUS-FIRST SUCCESS: Found and focused existing PWA window"),e.token&&this.notifyPWAOfNewAssignment(e),this.showSuccessMessage("✅ Opened in existing app window");return}else console.log("[EmailLink] ❌ FOCUS-FIRST: No existing PWA windows found:",n.reason)}else console.log("[EmailLink] ⚠️ Service Worker not ready, skipping focus attempt");if(e.target==="dashboard"){console.log("[EmailLink] 🎯 Direct dashboard redirect for seamless UX");const n=this.buildDashboardURL(se(j({},e),{mode:"pwa"}));console.log("[EmailLink] 🚀 Redirecting directly to dashboard:",n),window.location.href=n}else{console.log("[EmailLink] 🌉 Using launcher.html bridge for assignment authentication transfer");const n=this.buildLauncherURL(e);console.log("[EmailLink] 🎯 Redirecting to launcher bridge:",n),window.location.href=n}})}handleBrowserLink(e){return te(this,null,function*(){console.log("[EmailLink] 🌐 Handling Browser link:",e);const n=this.buildDashboardURL(se(j({},e),{mode:"browser"}));console.log("[EmailLink] 🌐 Redirecting to browser-only mode:",n),window.location.href=n})}handleInstallLink(e){return te(this,null,function*(){console.log("[EmailLink] ⬇️ Handling Install link:",e);const n=this.buildDashboardURL(se(j({},e),{install:"guide",mode:"browser"}));console.log("[EmailLink] ⬇️ Opening install guide:",n),window.open(n,"_blank")})}notifyPWAOfNewAssignment(e){var n;console.log("[EmailLink] 📢 Notifying focused PWA about new assignment:",e),this.assignmentChannel&&this.assignmentChannel.postMessage({type:"ASSIGNMENT_AVAILABLE",studentEmail:e.studentEmail,token:e.token,source:e.source||"email",timestamp:Date.now()}),(n=navigator.serviceWorker)!=null&&n.controller&&navigator.serviceWorker.controller.postMessage({type:"NEW_ASSIGNMENT_NOTIFICATION",studentEmail:e.studentEmail,token:e.token,source:e.source||"email",timestamp:Date.now()})}tryFocusExistingPWA(e,n="email"){return te(this,null,function*(){return new Promise(r=>{var s;const i=setTimeout(()=>{r({success:!1,reason:"timeout"})},3e3),o=a=>{var l;((l=a.data)==null?void 0:l.type)==="PWA_WINDOW_FOCUSED"&&(clearTimeout(i),navigator.serviceWorker.removeEventListener("message",o),console.log("[EmailLink] 📱 Service Worker response:",a.data),r({success:a.data.success,reason:a.data.reason}))};navigator.serviceWorker.addEventListener("message",o),(s=navigator.serviceWorker.controller)==null||s.postMessage({type:"CHECK_PWA_WINDOWS",studentEmail:e,source:n,timestamp:Date.now()})})})}attemptWindowClose(){if(!this.shouldCloseCurrentWindow()){console.log("[EmailLink] 🚫 Skipping window close - already in PWA context");return}setTimeout(()=>{try{console.log("[EmailLink] 🔄 Attempting to close email link window..."),window.close(),setTimeout(()=>{window.closed?console.log("[EmailLink] ✅ Email link window closed successfully"):(console.warn("[EmailLink] ⚠️ Window close blocked by COOP policy - showing user hint"),this.showCloseHint())},500)}catch(e){console.warn("[EmailLink] ⚠️ Unable to close window due to COOP/CORB policy:",e),this.showCloseHint()}},1e3)}showSuccessMessage(e){const n=document.createElement("div");n.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background: #48BB78;
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      font-family: system-ui, sans-serif;
      font-size: 14px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      z-index: 10000;
      max-width: 300px;
    `,n.innerHTML=`
      <div style="font-weight: bold;">${e}</div>
      <div style="font-size: 12px; margin-top: 4px; opacity: 0.9;">You may safely close this tab.</div>
    `,document.body.appendChild(n),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n)},5e3)}showCloseHint(){const e=document.createElement("div");e.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background: #4299E1;
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      font-family: system-ui, sans-serif;
      font-size: 14px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      z-index: 10000;
      max-width: 300px;
    `,e.innerHTML=`
      <div style="font-weight: bold; margin-bottom: 4px;">✅ App Launched!</div>
      <div>You may safely close this tab.</div>
    `,document.body.appendChild(e),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},8e3),console.log('[EmailLink] 💡 User hint displayed: "You may safely close this tab"')}checkPWAInstalled(){return te(this,null,function*(){console.log("[EmailLink] 🔍 Starting comprehensive PWA installation check...");const e=[];let n="low";if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0||document.referrer.includes("android-app://"))return console.log("[EmailLink] ✅ PWA detected: Currently in standalone mode"),{isInstalled:!0,confidence:"high",reasons:["Currently running in standalone mode"]};const i=/iphone|ipad|ipod/.test(window.navigator.userAgent.toLowerCase());if(i&&window.navigator.standalone===!0)return console.log("[EmailLink] ✅ PWA detected: iOS standalone mode"),{isInstalled:!0,confidence:"high",reasons:["iOS standalone mode detected"]};const o=navigator.userAgent.toLowerCase(),s=o.includes("chrome")&&!o.includes("edg"),a=o.includes("edg"),l=o.includes("safari")&&!o.includes("chrome"),c=o.includes("firefox"),u=/android|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(o);let d=0;const f={serviceWorker:!1,manifest:!1,https:!1,installedApps:!1,displayMode:!1};if((window.location.protocol==="https:"||window.location.hostname==="localhost")&&(f.https=!0,d++,e.push("HTTPS/localhost detected")),"serviceWorker"in navigator)try{const v=yield navigator.serviceWorker.getRegistrations();v.length>0&&(f.serviceWorker=!0,d++,e.push(`Service Worker registered (${v.length} registrations)`))}catch(v){console.warn("[EmailLink] ⚠️ Service worker check failed:",v),e.push("Service Worker check failed")}const p=document.querySelector('link[rel="manifest"]');if(p&&(f.manifest=!0,d++,e.push("Manifest linked")),"getInstalledRelatedApps"in navigator)try{const v=yield navigator.getInstalledRelatedApps();if(console.log("[EmailLink] 🔍 getInstalledRelatedApps result:",v),v.length>0)return f.installedApps=!0,d+=3,n="high",e.push(`Related apps found (${v.length})`),console.log("[EmailLink] ✅ PWA detected via getInstalledRelatedApps"),{isInstalled:!0,confidence:"high",reasons:e};e.push("No related apps found (may indicate uninstalled or cleared data)")}catch(v){console.warn("[EmailLink] ⚠️ getInstalledRelatedApps check failed:",v),e.push("getInstalledRelatedApps check failed")}if(p)try{const m=yield(yield fetch(p.href)).json();(m.display==="standalone"||m.display==="fullscreen")&&(f.displayMode=!0,d++,e.push("Manifest has standalone/fullscreen display"))}catch(v){console.warn("[EmailLink] ⚠️ Manifest fetch failed:",v),e.push("Manifest fetch failed")}d>=4&&f.serviceWorker&&f.manifest?n="medium":d>=2&&(n="low");let b=!1;return i||l?f.manifest&&f.https?(b=!0,n="medium",e.push("iOS/Safari detected - assuming PWA available (graceful fallback)"),console.log("[EmailLink] 🍎 iOS/Safari PWA assumed available - will attempt PWA launch")):(b=d>=2,e.push("iOS/Safari detected - using lenient detection criteria")):b=d>=3&&f.serviceWorker&&f.manifest,console.log("[EmailLink] 📊 PWA detection results:",{pwaScore:d,confidence:n,indicators:f,reasons:e,userAgent:{isChrome:s,isEdge:a,isSafari:l,isFirefox:c,isMobile:u}}),console.log(`[EmailLink] ${b?"✅":"❌"} PWA installation status: ${b?"INSTALLED":"NOT INSTALLED"} (score: ${d}/7, confidence: ${n})`),{isInstalled:b,confidence:n,reasons:e}})}buildLauncherURL(e){const n=window.location.origin,r=new URL("/launcher.html",n);if(e.target==="assignment"&&e.token)r.searchParams.set("target",encodeURIComponent(`/play?token=${e.token}&pwa=true&pwa_type=game&from=launcher&emailAccess=true`));else{let i="/student";const o=new URLSearchParams;e.studentEmail&&o.set("studentEmail",e.studentEmail),e.source&&o.set("source",e.source),o.set("pwa","true"),o.set("from","email"),o.set("emailAccess","true"),o.toString()&&(i+="?"+o.toString()),r.searchParams.set("target",encodeURIComponent(i))}return r.searchParams.set("pwa","true"),console.log("[EmailLink] 🌉 Built launcher URL:",r.toString()),r.toString()}buildDashboardURL(e){const n=window.location.origin,r="/student",i=new URL(r,n);return e.studentEmail&&i.searchParams.set("studentEmail",e.studentEmail),e.source&&i.searchParams.set("source",e.source),e.mode==="pwa"?(i.searchParams.set("pwa","true"),i.searchParams.set("from","email"),i.searchParams.set("emailAccess","true")):e.mode==="browser"?(i.searchParams.set("forceBrowser","true"),i.searchParams.set("from","email")):e.mode==="install"&&(i.searchParams.set("forceBrowser","true"),i.searchParams.set("from","email"),i.searchParams.set("showInstall","true")),i.toString()}notifyAssignmentAvailable(e){this.assignmentChannel&&(this.assignmentChannel.postMessage({type:"ASSIGNMENT_AVAILABLE",source:e,timestamp:Date.now()}),console.log("[EmailLink] 📡 Assignment notification sent via BroadcastChannel"))}shouldCloseCurrentWindow(){return!(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0||window.location.pathname.includes("/student")||window.location.pathname.includes("/play"))}destroy(){this.assignmentChannel&&(this.assignmentChannel.close(),this.assignmentChannel=null)}};go(sp,"instance");let kF=sp;const tR=kF.getInstance(),Sot=()=>{console.log("🚨🚨🚨 EMERGENCY: EmailLinkRouter IS MOUNTING - COMPONENT IS WORKING! 🚨🚨🚨");const[t]=dh(),[e,n]=T.useState("processing"),[r,i]=T.useState(""),[o,s]=T.useState([]),[a,l]=T.useState(null),[c,u]=T.useState("");t5({enabled:!0,studentEmail:t.get("studentEmail")||"",source:"email_link_router",onDuplicateDetected:v=>{console.log("[EmailLinkRouter] 🎯 PWA duplicate action:",v),v==="focused_existing"&&i("Opening existing app window...")}});const d=(v,m)=>{console.log(`[EmailLinkRouter] 🕐 Starting auto-close in ${v} seconds: ${m}`),u(m),l(v);const g=setInterval(()=>{l(x=>{if(x===null||x<=1){clearInterval(g),console.log("[EmailLinkRouter] ⏰ Auto-closing window now");try{window.close(),setTimeout(()=>{window.closed||(console.log("[EmailLinkRouter] 🔄 window.close() failed, trying history.back()"),window.history.back())},500),setTimeout(()=>{window.closed||(console.log("[EmailLinkRouter] 🔄 history.back() failed, redirecting to close page"),window.location.href="about:blank")},1e3)}catch(w){console.error("[EmailLinkRouter] ❌ Auto-close failed:",w)}return null}return x-1})},1e3);return g},f=()=>{console.log("[EmailLinkRouter] 🛑 User cancelled auto-close"),l(null),u("")};T.useEffect(()=>{te(nt,null,function*(){try{console.log("[EmailLinkRouter] 🚨 EmailLinkRouter is executing!"),console.log("[EmailLinkRouter] 🌐 Current URL:",window.location.href),console.log("[EmailLinkRouter] 📊 All URL parameters:",Object.fromEntries(t.entries()));const m=t.get("type")||t.get("mode"),g=t.get("target"),x=t.get("token"),w=t.get("studentEmail"),S=t.get("source")||"email";let P=g;P||(P=x?"assignment":"dashboard");const I=[`Type: ${m} (from ${t.get("type")?"type":"mode"} parameter)`,`Target: ${P} ${g?"":"(auto-detected)"}`,`Token: ${x?"Present":"Missing"}`,`Student Email: ${w||"Not specified"}`,`Source: ${S}`,`URL: ${window.location.href}`];if(s(I),!m)throw new Error("Missing type parameter (pwa/browser/install) - check email template");const M=j({studentEmail:w||void 0,source:S,mode:m,target:P},x&&{token:x});switch(console.log("[EmailLinkRouter] Processing email link:",M),console.log("[EmailLinkRouter] 🎯 About to process type:",m),i(`Processing ${m} link for ${P}...`),m){case"pwa":console.log("[EmailLinkRouter] 📱 Processing PWA link..."),console.log("[EmailLinkRouter] ⏰ About to call handlePWALink..."),yield tR.handlePWALink(M),console.log("[EmailLinkRouter] ✅ handlePWALink completed - this should not show if redirect works"),n("success"),i("Opening PWA or redirecting..."),setTimeout(()=>{if(e==="success"){console.log("[EmailLinkRouter] 🚨 EMERGENCY FALLBACK: Still here, forcing redirect");const D=`/student?pwa=true&from=email${w?`&studentEmail=${w}`:""}${S?`&source=${S}`:""}`;console.log("[EmailLinkRouter] 🎯 Emergency fallback URL:",D),window.location.href=D}},2e3),setTimeout(()=>{d(3,"PWA link processed - cleaning up")},5e3);break;case"browser":console.log("[EmailLinkRouter] 🌐 Processing Browser link..."),yield tR.handleBrowserLink(M),n("success"),i("Opening in browser..."),setTimeout(()=>{d(2,"Browser link opened successfully")},1e3);break;case"install":console.log("[EmailLinkRouter] ⬇️ Processing Install link..."),yield tR.handleInstallLink(M),n("success"),i("Opening installation guide..."),setTimeout(()=>{d(3,"Installation guide opened successfully")},1e3);break;default:throw new Error(`Unknown type: ${m}`)}}catch(m){console.error("[EmailLinkRouter] Error handling email link:",m),n("error"),i(m instanceof Error?m.message:"Unknown error occurred"),setTimeout(()=>{d(10,"Error occurred - auto-closing for cleanup")},2e3)}})},[t]);const p=()=>{n("processing"),i("Retrying..."),window.location.reload()},b=()=>{const v=t.get("studentEmail"),m=v?`/student?studentEmail=${v}&source=email_fallback`:"/student?source=email_fallback";window.location.href=m};return h.jsx(Et,{minH:"100vh",bg:"gray.50",display:"flex",alignItems:"center",justifyContent:"center",p:4,children:h.jsx(Et,{bg:"white",p:8,borderRadius:"lg",boxShadow:"lg",maxW:"md",w:"full",textAlign:"center",children:h.jsxs(Kt,{spacing:6,children:[h.jsxs(Kt,{spacing:2,children:[h.jsx(ft,{fontSize:"2xl",fontWeight:"bold",color:"blue.600",children:"📧 Processing Email Link"}),h.jsx(ft,{color:"gray.600",children:"LuminateLearn Assignment Access"})]}),e==="processing"&&h.jsxs(Kt,{spacing:4,children:[h.jsx(Fa,{size:"lg",color:"blue.500"}),h.jsx(ft,{color:"gray.700",children:r}),h.jsx(ft,{fontSize:"sm",color:"gray.500",children:"This may take a few seconds..."})]}),e==="success"&&h.jsxs(Kt,{spacing:4,children:[h.jsxs(bi,{status:"success",borderRadius:"md",children:[h.jsx(xi,{}),h.jsxs(Et,{children:[h.jsx(ft,{fontWeight:"bold",children:"Success!"}),h.jsx(ft,{children:r})]})]}),a!==null&&h.jsx(Et,{bg:"blue.50",p:3,borderRadius:"md",border:"1px solid",borderColor:"blue.200",children:h.jsxs(Kt,{spacing:2,children:[h.jsxs(ft,{fontSize:"sm",color:"blue.700",textAlign:"center",children:[h.jsxs("strong",{children:["⏰ Auto-closing in ",a," second",a!==1?"s":""]}),h.jsx("br",{}),h.jsx(ft,{fontSize:"xs",color:"blue.600",mt:1,children:c})]}),h.jsx(pn,{size:"xs",variant:"outline",colorScheme:"blue",onClick:f,children:"🛑 Keep Window Open"})]})})]}),e==="error"&&h.jsxs(Kt,{spacing:4,children:[h.jsxs(bi,{status:"error",borderRadius:"md",children:[h.jsx(xi,{}),h.jsxs(Et,{textAlign:"left",children:[h.jsx(ft,{fontWeight:"bold",children:"Something went wrong"}),h.jsx(ft,{children:r})]})]}),a!==null&&h.jsx(Et,{bg:"orange.50",p:3,borderRadius:"md",border:"1px solid",borderColor:"orange.200",children:h.jsxs(Kt,{spacing:2,children:[h.jsxs(ft,{fontSize:"sm",color:"orange.700",textAlign:"center",children:[h.jsxs("strong",{children:["⏰ Auto-closing in ",a," second",a!==1?"s":""]}),h.jsx("br",{}),h.jsx(ft,{fontSize:"xs",color:"orange.600",mt:1,children:c})]}),h.jsx(pn,{size:"xs",variant:"outline",colorScheme:"orange",onClick:f,children:"🛑 Keep Window Open"})]})}),h.jsxs(Kt,{spacing:3,children:[h.jsx(pn,{colorScheme:"blue",onClick:p,children:"🔄 Try Again"}),h.jsx(pn,{variant:"outline",onClick:b,children:"📚 Go to Student Dashboard"})]})]}),!1,h.jsx(Et,{bg:"blue.50",p:4,borderRadius:"md",w:"full",children:h.jsxs(ft,{fontSize:"sm",color:"blue.700",children:[h.jsx("strong",{children:"💡 Having trouble?"}),h.jsx("br",{}),`This page handles email links for assignments. If you're seeing this for more than a few seconds, try using the "Go to Student Dashboard" button above.`]})})]})})})},_ot=()=>{const[t]=dh(),e=Pr(),{currentUser:n}=Dr(),r=co(),[i,o]=T.useState(""),[s,a]=T.useState(""),[l,c]=T.useState(""),[u,d]=T.useState(!1),[f,p]=T.useState(!1),[b,v]=T.useState(!1),[m,g]=T.useState(!0),[x,w]=T.useState(""),[S,P]=T.useState(!1);T.useEffect(()=>{te(nt,null,function*(){try{const D=t.get("email"),E=t.get("mode");if(!D||E!=="passwordSetup"){w("Invalid password setup link"),g(!1);return}o(D);const _=window.location.href;g3(Xr,_)?(P(!0),w("")):w("Invalid or expired password setup link")}catch(D){console.error("Error verifying email link:",D),w("Failed to verify password setup link")}finally{g(!1)}})},[t]);const I=M=>te(nt,null,function*(){if(M.preventDefault(),s!==l){w("Passwords do not match");return}if(s.length<6){w("Password must be at least 6 characters long");return}v(!0),w("");try{const D=window.location.href,E=yield v3(Xr,i,D);yield y3(E.user,s),r({title:"Password Set Successfully!",description:"You can now sign in with your email and password.",status:"success",duration:5e3,isClosable:!0}),e("/student")}catch(D){console.error("Error setting password:",D);let E="Failed to set password";D.code==="auth/invalid-action-code"?E="This password setup link has expired or is invalid":D.code==="auth/weak-password"?E="Password is too weak. Please choose a stronger password.":D.message&&(E=D.message),w(E)}finally{v(!1)}});return m?h.jsx(Et,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:h.jsxs(Kt,{spacing:4,children:[h.jsx(Fa,{size:"xl"}),h.jsx(ft,{children:"Verifying password setup link..."})]})}):S?h.jsx(Et,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",p:4,children:h.jsx(dc,{maxW:"md",w:"full",children:h.jsx(uc,{children:h.jsxs(Kt,{spacing:6,children:[h.jsx(zr,{size:"lg",textAlign:"center",children:"Set Your Password"}),h.jsx(ft,{textAlign:"center",color:"gray.600",children:"Welcome to LuminateLearn! Please set a password for your account."}),h.jsx(Et,{w:"full",p:3,bg:"blue.50",borderRadius:"md",children:h.jsxs(ft,{fontSize:"sm",color:"blue.800",children:[h.jsx("strong",{children:"Email:"})," ",i]})}),x&&h.jsxs(bi,{status:"error",children:[h.jsx(xi,{}),x]}),h.jsx("form",{onSubmit:I,style:{width:"100%"},children:h.jsxs(Kt,{spacing:4,children:[h.jsxs(Mr,{isRequired:!0,children:[h.jsx(ar,{children:"New Password"}),h.jsxs(rv,{children:[h.jsx(ti,{type:u?"text":"password",value:s,onChange:M=>a(M.target.value),placeholder:"Enter your new password",minLength:6}),h.jsx(Ap,{children:h.jsx(kr,{"aria-label":u?"Hide password":"Show password",icon:u?h.jsx(Ax,{}):h.jsx(Cx,{}),onClick:()=>d(!u),variant:"ghost",size:"sm"})})]}),h.jsx(dC,{children:"Password must be at least 6 characters long"})]}),h.jsxs(Mr,{isRequired:!0,children:[h.jsx(ar,{children:"Confirm Password"}),h.jsxs(rv,{children:[h.jsx(ti,{type:f?"text":"password",value:l,onChange:M=>c(M.target.value),placeholder:"Confirm your new password",minLength:6}),h.jsx(Ap,{children:h.jsx(kr,{"aria-label":f?"Hide password":"Show password",icon:f?h.jsx(Ax,{}):h.jsx(Cx,{}),onClick:()=>p(!f),variant:"ghost",size:"sm"})})]})]}),h.jsx(pn,{type:"submit",colorScheme:"blue",size:"lg",width:"full",isLoading:b,loadingText:"Setting Password...",children:"Set Password"})]})}),h.jsx(ft,{fontSize:"sm",color:"gray.500",textAlign:"center",children:"After setting your password, you'll be able to sign in with your email and password."})]})})})}):h.jsx(Et,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",p:4,children:h.jsx(dc,{maxW:"md",w:"full",children:h.jsx(uc,{children:h.jsxs(Kt,{spacing:4,children:[h.jsx(zr,{size:"lg",textAlign:"center",children:"Invalid Link"}),h.jsxs(bi,{status:"error",children:[h.jsx(xi,{}),x||"This password setup link is invalid or has expired."]}),h.jsx(ft,{textAlign:"center",children:"Please contact your teacher for a new password setup link."}),h.jsx(pn,{onClick:()=>e("/login"),colorScheme:"blue",children:"Go to Login"})]})})})})},Eot=()=>{const t=Pr(),{currentUser:e}=Dr(),n=co(),[r,i]=T.useState(""),[o,s]=T.useState(""),[a,l]=T.useState(""),[c,u]=T.useState(!1),[d,f]=T.useState(!1),[p,b]=T.useState(!1),[v,m]=T.useState(!1),[g,x]=T.useState(""),[w,S]=T.useState(!1);T.useEffect(()=>{if(!e){t("/login");return}te(nt,null,function*(){try{const M=an(bt,"users",e.uid),D=yield si(M);D.exists()&&D.data().hasTemporaryPassword?S(!0):t("/student")}catch(M){console.error("Error checking temporary password:",M),x("Failed to verify account status")}})},[e,t]);const P=I=>te(nt,null,function*(){if(I.preventDefault(),o!==a){x("New passwords do not match");return}if(o.length<6){x("New password must be at least 6 characters long");return}if(o===r){x("New password must be different from your current password");return}m(!0),x("");try{const M=fh.credential(e.email,r);yield xFe(e,M),yield y3(e,o);const D=an(bt,"users",e.uid);yield Os(D,{hasTemporaryPassword:!1,temporaryPasswordSet:!1,passwordSetupComplete:!0,passwordSetupCompletedAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),n({title:"Password Updated Successfully!",description:"You can now use your new password to sign in, or use Google Sign-In.",status:"success",duration:5e3,isClosable:!0}),t("/student")}catch(M){console.error("Error updating password:",M);let D="Failed to update password";M.code==="auth/weak-password"?D="Password is too weak. Please choose a stronger password.":M.code==="auth/wrong-password"?D="Current password is incorrect. Please check your temporary password from the email.":M.code==="auth/requires-recent-login"?D="Please sign out and sign back in, then try changing your password again.":M.code==="auth/invalid-credential"?D="Current password is incorrect. Please check your temporary password from the email.":M.message&&(D=M.message),x(D)}finally{m(!1)}});return e?h.jsx(Et,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",p:4,children:h.jsx(dc,{maxW:"md",w:"full",children:h.jsx(uc,{children:h.jsxs(Kt,{spacing:6,children:[h.jsx(zr,{size:"lg",textAlign:"center",children:"Update Your Password"}),h.jsx(ft,{textAlign:"center",color:"gray.600",children:"Welcome to LuminateLearn! Please create a new password for your account."}),h.jsx(Et,{w:"full",p:3,bg:"blue.50",borderRadius:"md",children:h.jsxs(ft,{fontSize:"sm",color:"blue.800",children:[h.jsx("strong",{children:"Account:"})," ",e.email]})}),g&&h.jsxs(bi,{status:"error",children:[h.jsx(xi,{}),g]}),h.jsx("form",{onSubmit:P,style:{width:"100%"},children:h.jsxs(Kt,{spacing:4,children:[h.jsxs(Mr,{isRequired:!0,children:[h.jsx(ar,{children:"Current Password"}),h.jsxs(rv,{children:[h.jsx(ti,{type:c?"text":"password",value:r,onChange:I=>i(I.target.value),placeholder:"Enter your current (temporary) password"}),h.jsx(Ap,{children:h.jsx(kr,{"aria-label":c?"Hide password":"Show password",icon:c?h.jsx(Ax,{}):h.jsx(Cx,{}),onClick:()=>u(!c),variant:"ghost",size:"sm"})})]}),h.jsx(dC,{children:"This is the temporary password from your email"})]}),h.jsxs(Mr,{isRequired:!0,children:[h.jsx(ar,{children:"New Password"}),h.jsxs(rv,{children:[h.jsx(ti,{type:d?"text":"password",value:o,onChange:I=>s(I.target.value),placeholder:"Enter your new password",minLength:6}),h.jsx(Ap,{children:h.jsx(kr,{"aria-label":d?"Hide password":"Show password",icon:d?h.jsx(Ax,{}):h.jsx(Cx,{}),onClick:()=>f(!d),variant:"ghost",size:"sm"})})]}),h.jsx(dC,{children:"Password must be at least 6 characters long"})]}),h.jsxs(Mr,{isRequired:!0,children:[h.jsx(ar,{children:"Confirm New Password"}),h.jsxs(rv,{children:[h.jsx(ti,{type:p?"text":"password",value:a,onChange:I=>l(I.target.value),placeholder:"Confirm your new password",minLength:6}),h.jsx(Ap,{children:h.jsx(kr,{"aria-label":p?"Hide password":"Show password",icon:p?h.jsx(Ax,{}):h.jsx(Cx,{}),onClick:()=>b(!p),variant:"ghost",size:"sm"})})]})]}),h.jsx(pn,{type:"submit",colorScheme:"blue",size:"lg",width:"full",isLoading:v,loadingText:"Updating Password...",children:"Update Password"})]})}),h.jsx(ft,{fontSize:"sm",color:"gray.500",textAlign:"center",children:"After updating your password, you'll be able to sign in with your email and new password, or you can use Google Sign-In."})]})})})}):null},ba=({children:t})=>(Jne(),T.useEffect(()=>{const e=window.matchMedia("(display-mode: standalone)").matches,n=window.navigator.standalone===!0,r=window.location.search.includes("pwa=true"),i=window.location.search.includes("emailAccess=true"),o=window.location.search.includes("from=email"),s=window.location.search.includes("forceBrowser=true"),a=window.location.search.includes("browserOnly=true"),l=window.location.search.includes("noPWA=true"),c=window.location.search.includes("redirector=true"),u=window.location.pathname==="/student",d=window.location.pathname==="/teacher",f=window.location.pathname==="/email-link",p=window.location.pathname==="/login"&&(i||o);if(!s&&!a&&!l&&!c&&(e||n||r||u||d||f||p)){window.name="standalone-pwa",localStorage.setItem("pwa_origin","device_icon");const m=g=>{var x;if(((x=g.data)==null?void 0:x.type)==="FORCE_CLOSE_LAUNCHER"){const{reason:w,canAutoClose:S,newWindowInfo:P}=g.data,D=localStorage.getItem("pwa_origin")==="device_icon"||window.name==="standalone-pwa";if(w==="focus_blocked_by_security"&&S)if(D)try{window.close(),setTimeout(()=>{alert(`Please close this tab manually. A newer assignment window has been opened.${P?` New: ${new URL(P.url).pathname}`:""}`)},100)}catch(E){alert(`Please close this tab manually. A newer assignment window has been opened.${P?` New: ${new URL(P.url).pathname}`:""}`)}else window.close();else if(D){const E=P?` A newer window has been opened: ${new URL(P.url).pathname}`:" A newer game window has been launched.";alert(`Please close this tab manually.${E}`)}else window.close()}};if("serviceWorker"in navigator)return navigator.serviceWorker.addEventListener("message",m),()=>{navigator.serviceWorker.removeEventListener("message",m)}}},[]),h.jsxs(h.Fragment,{children:[h.jsx(n5e,{}),t]})),Cot=({params:t})=>t.token?jI(`/play?token=${t.token}`):jI("/");function Ui(){const t=VX(),n=Pd().token,r=Pr(),o=(()=>{var s;try{if(Nv(t)){if(t.status===404&&t.data&&typeof t.data=="string"&&t.data.includes("No route matches URL")){const a=t.data.match(/URL "([^"]+)"/),l=a?a[1]:"unknown path";console.log(`Route error: No route matches URL "${l}"`);let c="";return l.startsWith("/play/")?c=l.replace("/play/",""):l.startsWith("/assignment/")&&(c=l.replace("/assignment/","")),{message:`Page not found: ${l}`,details:`The requested page does not exist. ${c?`Token: ${c}`:""}`,isRouteNotFound:!0,extractedToken:c}}return{message:`${t.status} ${t.statusText}`,details:((s=t.data)==null?void 0:s.message)||"No additional details available",isRouteNotFound:t.status===404}}return t instanceof Error?{message:t.message||"Unknown error",details:t.stack||"No stack trace available",isRouteNotFound:t.message.includes("No route matches URL")}:{message:"Unknown error type",details:String(t)||JSON.stringify(t,null,2),isRouteNotFound:!1}}catch(a){return{message:"Error while processing the error details",details:String(a),isRouteNotFound:!1}}})();return console.error("Route error:",o.message,t),T.useEffect(()=>{try{const s=o.message,a=sessionStorage.getItem("route_token");if(o.isRouteNotFound&&a){console.log(`Detected direct navigation with stored token: ${a}`),sessionStorage.removeItem("route_token"),sessionStorage.removeItem("route_path");const u=setTimeout(()=>{r(`/play?token=${a}`)},100);return()=>clearTimeout(u)}if((s.includes("handled by React Router default ErrorBoundary")||s.includes("Minified React error #419")||s.includes("Minified React error #421"))&&!sessionStorage.getItem("errorRefreshed")){console.log("Detected React Router error, refreshing page..."),sessionStorage.setItem("errorRefreshed","true"),window.location.reload();return}if(o.isRouteNotFound&&o.extractedToken){console.log(`Attempting to redirect with token: ${o.extractedToken}`);const u=setTimeout(()=>{r(`/play?token=${o.extractedToken}`)},100);return()=>clearTimeout(u)}const l=window.location.pathname,c=sessionStorage.getItem("errorPath");c&&c!==l&&sessionStorage.removeItem("errorRefreshed"),sessionStorage.setItem("errorPath",l)}catch(s){console.error("Error in ErrorBoundary useEffect:",s)}},[o.message,r,o.isRouteNotFound,o.extractedToken]),o.isRouteNotFound?h.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",padding:"40px 20px",textAlign:"center",fontFamily:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[h.jsx("h1",{style:{fontSize:"24px",marginBottom:"20px",color:"#333"},children:"Page Not Found"}),h.jsxs("p",{style:{fontSize:"16px",color:"#666",marginBottom:"30px"},children:["The page you're looking for doesn't exist.",o.extractedToken&&" We're trying to redirect you to the correct page..."]}),h.jsx("a",{href:"/",style:{display:"inline-block",padding:"10px 20px",background:"#2563eb",color:"white",textDecoration:"none",borderRadius:"4px",fontWeight:"bold"},children:"Go to Home"}),!1]}):h.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",padding:"40px 20px",textAlign:"center",fontFamily:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[h.jsx("h1",{style:{fontSize:"24px",marginBottom:"20px",color:"#333"},children:"Game not found"}),h.jsx("p",{style:{fontSize:"16px",color:"#666",marginBottom:"30px"},children:n?"We couldn't find this assignment. It may have been deleted or the link is incorrect.":"The game or assignment you're looking for doesn't exist or may have been deleted."}),h.jsx("a",{href:"/",style:{display:"inline-block",padding:"10px 20px",background:"#2563eb",color:"white",textDecoration:"none",borderRadius:"4px",fontWeight:"bold"},children:"Go to Home"}),!1]})}const Aot=IRe([{path:"/",element:h.jsx(ba,{children:h.jsx(QBe,{})}),errorElement:h.jsx(Ui,{})},{path:"/login",element:h.jsx(ba,{children:h.jsx(o4e,{})}),errorElement:h.jsx(Ui,{})},{path:"/login-complete",element:h.jsx(ba,{children:h.jsx(s4e,{})}),errorElement:h.jsx(Ui,{})},{path:"/feedback",element:h.jsx(ba,{children:h.jsx(zje,{})}),errorElement:h.jsx(Ui,{})},{path:"/forgot-password",element:h.jsx(ba,{children:h.jsx(p4e,{})}),errorElement:h.jsx(Ui,{})},{path:"/password-setup",element:h.jsx(ba,{children:h.jsx(_ot,{})}),errorElement:h.jsx(Ui,{})},{path:"/password-change",element:h.jsx(ba,{children:h.jsx(Eot,{})}),errorElement:h.jsx(Ui,{})},{path:"/game/:configId",element:h.jsx(ba,{children:h.jsx(WXe,{})}),errorElement:h.jsx(Ui,{})},{path:"/teacher",element:h.jsx(ba,{children:h.jsx(GZe,{})}),errorElement:h.jsx(Ui,{})},{path:"/student",element:h.jsx(ba,{children:h.jsx(KZe,{})}),errorElement:h.jsx(Ui,{})},{path:"/link",element:h.jsx(xot,{}),errorElement:h.jsx(Ui,{})},{path:"/play",element:h.jsx(rot,{}),errorElement:h.jsx(Ui,{})},{path:"/play/:token",loader:({params:t})=>jI(`/play?token=${t.token}`),errorElement:h.jsx(Ui,{})},{path:"/assignment/:token",loader:Cot,errorElement:h.jsx(Ui,{})},{path:"/assignment",element:h.jsx(Oz,{to:"/",replace:!0}),errorElement:h.jsx(Ui,{})},{path:"/configure",element:h.jsx(ba,{children:h.jsx(YZe,{})}),errorElement:h.jsx(Ui,{}),children:[{path:"whack-a-mole",element:h.jsx(t7,{})},{path:"whack-a-mole/:templateId",element:h.jsx(t7,{})},{path:"sort-categories-egg",element:h.jsx(n7,{})},{path:"sort-categories-egg/:templateId",element:h.jsx(n7,{})},{path:"spinner-wheel",element:h.jsx(r7,{})},{path:"spinner-wheel/:templateId",element:h.jsx(r7,{})},{path:"anagram",element:h.jsx(i7,{})},{path:"anagram/:templateId",element:h.jsx(i7,{})},{path:"sentence-sense",element:h.jsx(o7,{})},{path:"sentence-sense/:templateId",element:h.jsx(o7,{})},{path:"place-value-showdown",element:h.jsx(s7,{})},{path:"place-value-showdown/:templateId",element:h.jsx(s7,{})},{path:"word-volley",element:h.jsx(a7,{})},{path:"word-volley/:templateId",element:h.jsx(a7,{})}]},{path:"/admin",element:h.jsx(ba,{children:h.jsx(oot,{})}),errorElement:h.jsx(Ui,{})},{path:"/set-admin",element:h.jsx(ba,{children:h.jsx(sot,{})}),errorElement:h.jsx(Ui,{})},{path:"/smart-route/assignment",element:h.jsx(l7,{}),errorElement:h.jsx(Ui,{})},{path:"/smart-route/dashboard",element:h.jsx(l7,{}),errorElement:h.jsx(Ui,{})},{path:"/email-link",element:h.jsx(Sot,{}),errorElement:h.jsx(Ui,{})},{path:"*",element:h.jsx(Oz,{to:"/",replace:!0}),errorElement:h.jsx(Ui,{})}]);function Tot(){return h.jsx(KLe,{children:h.jsx(XLe,{children:h.jsx(QLe,{children:h.jsxs(JLe,{children:[h.jsx($Re,{router:Aot}),h.jsx(AJ,{})]})})})})}const c7=abe({config:{initialColorMode:"light",useSystemColorMode:!1},colors:{primary:{50:"#EBF8FF",100:"#BEE3F8",200:"#90CDF4",300:"#63B3ED",400:"#4299E1",500:"#3182CE",600:"#2B6CB0",700:"#2C5282",800:"#2A4365",900:"#1A365D"}}});nR.createRoot(document.getElementById("root")).render(h.jsxs(Lt.StrictMode,{children:[h.jsx(mhe,{initialColorMode:c7.config.initialColorMode}),h.jsx(CEe,{theme:c7,children:h.jsx(Tot,{})})]}))});export default Mot();
//# sourceMappingURL=main-BrrQXqGH.js.map
